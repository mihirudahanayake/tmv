var UT=Object.defineProperty;var VT=(t,e,n)=>e in t?UT(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var on=(t,e,n)=>VT(t,typeof e!="symbol"?e+"":e,n);function BT(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var vz=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function zT(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var p4={exports:{}},Fm={},m4={exports:{}},Ot={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gd=Symbol.for("react.element"),qT=Symbol.for("react.portal"),HT=Symbol.for("react.fragment"),WT=Symbol.for("react.strict_mode"),$T=Symbol.for("react.profiler"),GT=Symbol.for("react.provider"),KT=Symbol.for("react.context"),YT=Symbol.for("react.forward_ref"),QT=Symbol.for("react.suspense"),JT=Symbol.for("react.memo"),XT=Symbol.for("react.lazy"),Y5=Symbol.iterator;function ZT(t){return t===null||typeof t!="object"?null:(t=Y5&&t[Y5]||t["@@iterator"],typeof t=="function"?t:null)}var g4={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},y4=Object.assign,v4={};function Kc(t,e,n){this.props=t,this.context=e,this.refs=v4,this.updater=n||g4}Kc.prototype.isReactComponent={};Kc.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Kc.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function w4(){}w4.prototype=Kc.prototype;function X2(t,e,n){this.props=t,this.context=e,this.refs=v4,this.updater=n||g4}var Z2=X2.prototype=new w4;Z2.constructor=X2;y4(Z2,Kc.prototype);Z2.isPureReactComponent=!0;var Q5=Array.isArray,x4=Object.prototype.hasOwnProperty,ey={current:null},_4={key:!0,ref:!0,__self:!0,__source:!0};function b4(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)x4.call(e,r)&&!_4.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Gd,type:t,key:s,ref:o,props:i,_owner:ey.current}}function eI(t,e){return{$$typeof:Gd,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function ty(t){return typeof t=="object"&&t!==null&&t.$$typeof===Gd}function tI(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var J5=/\/+/g;function Gg(t,e){return typeof t=="object"&&t!==null&&t.key!=null?tI(""+t.key):e.toString(36)}function pp(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Gd:case qT:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Gg(o,0):r,Q5(i)?(n="",t!=null&&(n=t.replace(J5,"$&/")+"/"),pp(i,e,n,"",function(u){return u})):i!=null&&(ty(i)&&(i=eI(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(J5,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",Q5(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+Gg(s,a);o+=pp(s,e,n,l,i)}else if(l=ZT(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+Gg(s,a++),o+=pp(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Df(t,e,n){if(t==null)return t;var r=[],i=0;return pp(t,r,"","",function(s){return e.call(n,s,i++)}),r}function nI(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var xi={current:null},mp={transition:null},rI={ReactCurrentDispatcher:xi,ReactCurrentBatchConfig:mp,ReactCurrentOwner:ey};function N4(){throw Error("act(...) is not supported in production builds of React.")}Ot.Children={map:Df,forEach:function(t,e,n){Df(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Df(t,function(){e++}),e},toArray:function(t){return Df(t,function(e){return e})||[]},only:function(t){if(!ty(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ot.Component=Kc;Ot.Fragment=HT;Ot.Profiler=$T;Ot.PureComponent=X2;Ot.StrictMode=WT;Ot.Suspense=QT;Ot.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=rI;Ot.act=N4;Ot.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=y4({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=ey.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)x4.call(e,l)&&!_4.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:Gd,type:t.type,key:i,ref:s,props:r,_owner:o}};Ot.createContext=function(t){return t={$$typeof:KT,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:GT,_context:t},t.Consumer=t};Ot.createElement=b4;Ot.createFactory=function(t){var e=b4.bind(null,t);return e.type=t,e};Ot.createRef=function(){return{current:null}};Ot.forwardRef=function(t){return{$$typeof:YT,render:t}};Ot.isValidElement=ty;Ot.lazy=function(t){return{$$typeof:XT,_payload:{_status:-1,_result:t},_init:nI}};Ot.memo=function(t,e){return{$$typeof:JT,type:t,compare:e===void 0?null:e}};Ot.startTransition=function(t){var e=mp.transition;mp.transition={};try{t()}finally{mp.transition=e}};Ot.unstable_act=N4;Ot.useCallback=function(t,e){return xi.current.useCallback(t,e)};Ot.useContext=function(t){return xi.current.useContext(t)};Ot.useDebugValue=function(){};Ot.useDeferredValue=function(t){return xi.current.useDeferredValue(t)};Ot.useEffect=function(t,e){return xi.current.useEffect(t,e)};Ot.useId=function(){return xi.current.useId()};Ot.useImperativeHandle=function(t,e,n){return xi.current.useImperativeHandle(t,e,n)};Ot.useInsertionEffect=function(t,e){return xi.current.useInsertionEffect(t,e)};Ot.useLayoutEffect=function(t,e){return xi.current.useLayoutEffect(t,e)};Ot.useMemo=function(t,e){return xi.current.useMemo(t,e)};Ot.useReducer=function(t,e,n){return xi.current.useReducer(t,e,n)};Ot.useRef=function(t){return xi.current.useRef(t)};Ot.useState=function(t){return xi.current.useState(t)};Ot.useSyncExternalStore=function(t,e,n){return xi.current.useSyncExternalStore(t,e,n)};Ot.useTransition=function(){return xi.current.useTransition()};Ot.version="18.3.1";m4.exports=Ot;var se=m4.exports;const ol=zT(se),iI=BT({__proto__:null,default:ol},[se]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sI=se,oI=Symbol.for("react.element"),aI=Symbol.for("react.fragment"),lI=Object.prototype.hasOwnProperty,uI=sI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,cI={key:!0,ref:!0,__self:!0,__source:!0};function S4(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)lI.call(e,r)&&!cI.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:oI,type:t,key:s,ref:o,props:i,_owner:uI.current}}Fm.Fragment=aI;Fm.jsx=S4;Fm.jsxs=S4;p4.exports=Fm;var f=p4.exports,A4={exports:{}},ss={},E4={exports:{}},T4={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(ne,ae){var _e=ne.length;ne.push(ae);e:for(;0<_e;){var ge=_e-1>>>1,U=ne[ge];if(0<i(U,ae))ne[ge]=ae,ne[_e]=U,_e=ge;else break e}}function n(ne){return ne.length===0?null:ne[0]}function r(ne){if(ne.length===0)return null;var ae=ne[0],_e=ne.pop();if(_e!==ae){ne[0]=_e;e:for(var ge=0,U=ne.length,K=U>>>1;ge<K;){var W=2*(ge+1)-1,te=ne[W],re=W+1,$=ne[re];if(0>i(te,_e))re<U&&0>i($,te)?(ne[ge]=$,ne[re]=_e,ge=re):(ne[ge]=te,ne[W]=_e,ge=W);else if(re<U&&0>i($,_e))ne[ge]=$,ne[re]=_e,ge=re;else break e}}return ae}function i(ne,ae){var _e=ne.sortIndex-ae.sortIndex;return _e!==0?_e:ne.id-ae.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],c=1,g=null,y=3,m=!1,N=!1,A=!1,C=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function R(ne){for(var ae=n(u);ae!==null;){if(ae.callback===null)r(u);else if(ae.startTime<=ne)r(u),ae.sortIndex=ae.expirationTime,e(l,ae);else break;ae=n(u)}}function D(ne){if(A=!1,R(ne),!N)if(n(l)!==null)N=!0,we(z);else{var ae=n(u);ae!==null&&xe(D,ae.startTime-ne)}}function z(ne,ae){N=!1,A&&(A=!1,_(E),E=-1),m=!0;var _e=y;try{for(R(ae),g=n(l);g!==null&&(!(g.expirationTime>ae)||ne&&!b());){var ge=g.callback;if(typeof ge=="function"){g.callback=null,y=g.priorityLevel;var U=ge(g.expirationTime<=ae);ae=t.unstable_now(),typeof U=="function"?g.callback=U:g===n(l)&&r(l),R(ae)}else r(l);g=n(l)}if(g!==null)var K=!0;else{var W=n(u);W!==null&&xe(D,W.startTime-ae),K=!1}return K}finally{g=null,y=_e,m=!1}}var Q=!1,j=null,E=-1,I=5,F=-1;function b(){return!(t.unstable_now()-F<I)}function S(){if(j!==null){var ne=t.unstable_now();F=ne;var ae=!0;try{ae=j(!0,ne)}finally{ae?P():(Q=!1,j=null)}}else Q=!1}var P;if(typeof k=="function")P=function(){k(S)};else if(typeof MessageChannel<"u"){var J=new MessageChannel,le=J.port2;J.port1.onmessage=S,P=function(){le.postMessage(null)}}else P=function(){C(S,0)};function we(ne){j=ne,Q||(Q=!0,P())}function xe(ne,ae){E=C(function(){ne(t.unstable_now())},ae)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(ne){ne.callback=null},t.unstable_continueExecution=function(){N||m||(N=!0,we(z))},t.unstable_forceFrameRate=function(ne){0>ne||125<ne?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<ne?Math.floor(1e3/ne):5},t.unstable_getCurrentPriorityLevel=function(){return y},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(ne){switch(y){case 1:case 2:case 3:var ae=3;break;default:ae=y}var _e=y;y=ae;try{return ne()}finally{y=_e}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(ne,ae){switch(ne){case 1:case 2:case 3:case 4:case 5:break;default:ne=3}var _e=y;y=ne;try{return ae()}finally{y=_e}},t.unstable_scheduleCallback=function(ne,ae,_e){var ge=t.unstable_now();switch(typeof _e=="object"&&_e!==null?(_e=_e.delay,_e=typeof _e=="number"&&0<_e?ge+_e:ge):_e=ge,ne){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=_e+U,ne={id:c++,callback:ae,priorityLevel:ne,startTime:_e,expirationTime:U,sortIndex:-1},_e>ge?(ne.sortIndex=_e,e(u,ne),n(l)===null&&ne===n(u)&&(A?(_(E),E=-1):A=!0,xe(D,_e-ge))):(ne.sortIndex=U,e(l,ne),N||m||(N=!0,we(z))),ne},t.unstable_shouldYield=b,t.unstable_wrapCallback=function(ne){var ae=y;return function(){var _e=y;y=ae;try{return ne.apply(this,arguments)}finally{y=_e}}}})(T4);E4.exports=T4;var hI=E4.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dI=se,is=hI;function Oe(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var I4=new Set,fd={};function Au(t,e){Lc(t,e),Lc(t+"Capture",e)}function Lc(t,e){for(fd[t]=e,t=0;t<e.length;t++)I4.add(e[t])}var ua=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d1=Object.prototype.hasOwnProperty,fI=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,X5={},Z5={};function pI(t){return d1.call(Z5,t)?!0:d1.call(X5,t)?!1:fI.test(t)?Z5[t]=!0:(X5[t]=!0,!1)}function mI(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function gI(t,e,n,r){if(e===null||typeof e>"u"||mI(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function _i(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Br={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Br[t]=new _i(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Br[e]=new _i(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Br[t]=new _i(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Br[t]=new _i(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Br[t]=new _i(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Br[t]=new _i(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Br[t]=new _i(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Br[t]=new _i(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Br[t]=new _i(t,5,!1,t.toLowerCase(),null,!1,!1)});var ny=/[\-:]([a-z])/g;function ry(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(ny,ry);Br[e]=new _i(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(ny,ry);Br[e]=new _i(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(ny,ry);Br[e]=new _i(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Br[t]=new _i(t,1,!1,t.toLowerCase(),null,!1,!1)});Br.xlinkHref=new _i("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Br[t]=new _i(t,1,!1,t.toLowerCase(),null,!0,!0)});function iy(t,e,n,r){var i=Br.hasOwnProperty(e)?Br[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(gI(e,n,i,r)&&(n=null),r||i===null?pI(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var va=dI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Of=Symbol.for("react.element"),rc=Symbol.for("react.portal"),ic=Symbol.for("react.fragment"),sy=Symbol.for("react.strict_mode"),f1=Symbol.for("react.profiler"),k4=Symbol.for("react.provider"),P4=Symbol.for("react.context"),oy=Symbol.for("react.forward_ref"),p1=Symbol.for("react.suspense"),m1=Symbol.for("react.suspense_list"),ay=Symbol.for("react.memo"),$a=Symbol.for("react.lazy"),C4=Symbol.for("react.offscreen"),ew=Symbol.iterator;function Th(t){return t===null||typeof t!="object"?null:(t=ew&&t[ew]||t["@@iterator"],typeof t=="function"?t:null)}var Bn=Object.assign,Kg;function Uh(t){if(Kg===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Kg=e&&e[1]||""}return`
`+Kg+t}var Yg=!1;function Qg(t,e){if(!t||Yg)return"";Yg=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Yg=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Uh(t):""}function yI(t){switch(t.tag){case 5:return Uh(t.type);case 16:return Uh("Lazy");case 13:return Uh("Suspense");case 19:return Uh("SuspenseList");case 0:case 2:case 15:return t=Qg(t.type,!1),t;case 11:return t=Qg(t.type.render,!1),t;case 1:return t=Qg(t.type,!0),t;default:return""}}function g1(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ic:return"Fragment";case rc:return"Portal";case f1:return"Profiler";case sy:return"StrictMode";case p1:return"Suspense";case m1:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case P4:return(t.displayName||"Context")+".Consumer";case k4:return(t._context.displayName||"Context")+".Provider";case oy:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case ay:return e=t.displayName||null,e!==null?e:g1(t.type)||"Memo";case $a:e=t._payload,t=t._init;try{return g1(t(e))}catch{}}return null}function vI(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return g1(e);case 8:return e===sy?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function vl(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function L4(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function wI(t){var e=L4(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ff(t){t._valueTracker||(t._valueTracker=wI(t))}function R4(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=L4(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Bp(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function y1(t,e){var n=e.checked;return Bn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function tw(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=vl(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function j4(t,e){e=e.checked,e!=null&&iy(t,"checked",e,!1)}function v1(t,e){j4(t,e);var n=vl(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?w1(t,e.type,n):e.hasOwnProperty("defaultValue")&&w1(t,e.type,vl(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function nw(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function w1(t,e,n){(e!=="number"||Bp(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Vh=Array.isArray;function yc(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+vl(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function x1(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Oe(91));return Bn({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function rw(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Oe(92));if(Vh(n)){if(1<n.length)throw Error(Oe(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:vl(n)}}function D4(t,e){var n=vl(e.value),r=vl(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function iw(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function O4(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function _1(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?O4(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Mf,F4=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Mf=Mf||document.createElement("div"),Mf.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Mf.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function pd(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Yh={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},xI=["Webkit","ms","Moz","O"];Object.keys(Yh).forEach(function(t){xI.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Yh[e]=Yh[t]})});function M4(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Yh.hasOwnProperty(t)&&Yh[t]?(""+e).trim():e+"px"}function U4(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=M4(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var _I=Bn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function b1(t,e){if(e){if(_I[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Oe(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Oe(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Oe(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Oe(62))}}function N1(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var S1=null;function ly(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var A1=null,vc=null,wc=null;function sw(t){if(t=Qd(t)){if(typeof A1!="function")throw Error(Oe(280));var e=t.stateNode;e&&(e=zm(e),A1(t.stateNode,t.type,e))}}function V4(t){vc?wc?wc.push(t):wc=[t]:vc=t}function B4(){if(vc){var t=vc,e=wc;if(wc=vc=null,sw(t),e)for(t=0;t<e.length;t++)sw(e[t])}}function z4(t,e){return t(e)}function q4(){}var Jg=!1;function H4(t,e,n){if(Jg)return t(e,n);Jg=!0;try{return z4(t,e,n)}finally{Jg=!1,(vc!==null||wc!==null)&&(q4(),B4())}}function md(t,e){var n=t.stateNode;if(n===null)return null;var r=zm(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Oe(231,e,typeof n));return n}var E1=!1;if(ua)try{var Ih={};Object.defineProperty(Ih,"passive",{get:function(){E1=!0}}),window.addEventListener("test",Ih,Ih),window.removeEventListener("test",Ih,Ih)}catch{E1=!1}function bI(t,e,n,r,i,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(c){this.onError(c)}}var Qh=!1,zp=null,qp=!1,T1=null,NI={onError:function(t){Qh=!0,zp=t}};function SI(t,e,n,r,i,s,o,a,l){Qh=!1,zp=null,bI.apply(NI,arguments)}function AI(t,e,n,r,i,s,o,a,l){if(SI.apply(this,arguments),Qh){if(Qh){var u=zp;Qh=!1,zp=null}else throw Error(Oe(198));qp||(qp=!0,T1=u)}}function Eu(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function W4(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function ow(t){if(Eu(t)!==t)throw Error(Oe(188))}function EI(t){var e=t.alternate;if(!e){if(e=Eu(t),e===null)throw Error(Oe(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return ow(i),t;if(s===r)return ow(i),e;s=s.sibling}throw Error(Oe(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(Oe(189))}}if(n.alternate!==r)throw Error(Oe(190))}if(n.tag!==3)throw Error(Oe(188));return n.stateNode.current===n?t:e}function $4(t){return t=EI(t),t!==null?G4(t):null}function G4(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=G4(t);if(e!==null)return e;t=t.sibling}return null}var K4=is.unstable_scheduleCallback,aw=is.unstable_cancelCallback,TI=is.unstable_shouldYield,II=is.unstable_requestPaint,sr=is.unstable_now,kI=is.unstable_getCurrentPriorityLevel,uy=is.unstable_ImmediatePriority,Y4=is.unstable_UserBlockingPriority,Hp=is.unstable_NormalPriority,PI=is.unstable_LowPriority,Q4=is.unstable_IdlePriority,Mm=null,No=null;function CI(t){if(No&&typeof No.onCommitFiberRoot=="function")try{No.onCommitFiberRoot(Mm,t,void 0,(t.current.flags&128)===128)}catch{}}var qs=Math.clz32?Math.clz32:jI,LI=Math.log,RI=Math.LN2;function jI(t){return t>>>=0,t===0?32:31-(LI(t)/RI|0)|0}var Uf=64,Vf=4194304;function Bh(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Wp(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=Bh(a):(s&=o,s!==0&&(r=Bh(s)))}else o=n&~i,o!==0?r=Bh(o):s!==0&&(r=Bh(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-qs(e),i=1<<n,r|=t[n],e&=~i;return r}function DI(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function OI(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-qs(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=DI(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function I1(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function J4(){var t=Uf;return Uf<<=1,!(Uf&4194240)&&(Uf=64),t}function Xg(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Kd(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-qs(e),t[e]=n}function FI(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-qs(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function cy(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-qs(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var ln=0;function X4(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Z4,hy,e3,t3,n3,k1=!1,Bf=[],al=null,ll=null,ul=null,gd=new Map,yd=new Map,Ka=[],MI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function lw(t,e){switch(t){case"focusin":case"focusout":al=null;break;case"dragenter":case"dragleave":ll=null;break;case"mouseover":case"mouseout":ul=null;break;case"pointerover":case"pointerout":gd.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":yd.delete(e.pointerId)}}function kh(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Qd(e),e!==null&&hy(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function UI(t,e,n,r,i){switch(e){case"focusin":return al=kh(al,t,e,n,r,i),!0;case"dragenter":return ll=kh(ll,t,e,n,r,i),!0;case"mouseover":return ul=kh(ul,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return gd.set(s,kh(gd.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,yd.set(s,kh(yd.get(s)||null,t,e,n,r,i)),!0}return!1}function r3(t){var e=Xl(t.target);if(e!==null){var n=Eu(e);if(n!==null){if(e=n.tag,e===13){if(e=W4(n),e!==null){t.blockedOn=e,n3(t.priority,function(){e3(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function gp(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=P1(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);S1=r,n.target.dispatchEvent(r),S1=null}else return e=Qd(n),e!==null&&hy(e),t.blockedOn=n,!1;e.shift()}return!0}function uw(t,e,n){gp(t)&&n.delete(e)}function VI(){k1=!1,al!==null&&gp(al)&&(al=null),ll!==null&&gp(ll)&&(ll=null),ul!==null&&gp(ul)&&(ul=null),gd.forEach(uw),yd.forEach(uw)}function Ph(t,e){t.blockedOn===e&&(t.blockedOn=null,k1||(k1=!0,is.unstable_scheduleCallback(is.unstable_NormalPriority,VI)))}function vd(t){function e(i){return Ph(i,t)}if(0<Bf.length){Ph(Bf[0],t);for(var n=1;n<Bf.length;n++){var r=Bf[n];r.blockedOn===t&&(r.blockedOn=null)}}for(al!==null&&Ph(al,t),ll!==null&&Ph(ll,t),ul!==null&&Ph(ul,t),gd.forEach(e),yd.forEach(e),n=0;n<Ka.length;n++)r=Ka[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Ka.length&&(n=Ka[0],n.blockedOn===null);)r3(n),n.blockedOn===null&&Ka.shift()}var xc=va.ReactCurrentBatchConfig,$p=!0;function BI(t,e,n,r){var i=ln,s=xc.transition;xc.transition=null;try{ln=1,dy(t,e,n,r)}finally{ln=i,xc.transition=s}}function zI(t,e,n,r){var i=ln,s=xc.transition;xc.transition=null;try{ln=4,dy(t,e,n,r)}finally{ln=i,xc.transition=s}}function dy(t,e,n,r){if($p){var i=P1(t,e,n,r);if(i===null)l0(t,e,r,Gp,n),lw(t,r);else if(UI(i,t,e,n,r))r.stopPropagation();else if(lw(t,r),e&4&&-1<MI.indexOf(t)){for(;i!==null;){var s=Qd(i);if(s!==null&&Z4(s),s=P1(t,e,n,r),s===null&&l0(t,e,r,Gp,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else l0(t,e,r,null,n)}}var Gp=null;function P1(t,e,n,r){if(Gp=null,t=ly(r),t=Xl(t),t!==null)if(e=Eu(t),e===null)t=null;else if(n=e.tag,n===13){if(t=W4(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Gp=t,null}function i3(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(kI()){case uy:return 1;case Y4:return 4;case Hp:case PI:return 16;case Q4:return 536870912;default:return 16}default:return 16}}var tl=null,fy=null,yp=null;function s3(){if(yp)return yp;var t,e=fy,n=e.length,r,i="value"in tl?tl.value:tl.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return yp=i.slice(t,1<r?1-r:void 0)}function vp(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function zf(){return!0}function cw(){return!1}function os(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?zf:cw,this.isPropagationStopped=cw,this}return Bn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=zf)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=zf)},persist:function(){},isPersistent:zf}),e}var Yc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},py=os(Yc),Yd=Bn({},Yc,{view:0,detail:0}),qI=os(Yd),Zg,e0,Ch,Um=Bn({},Yd,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:my,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ch&&(Ch&&t.type==="mousemove"?(Zg=t.screenX-Ch.screenX,e0=t.screenY-Ch.screenY):e0=Zg=0,Ch=t),Zg)},movementY:function(t){return"movementY"in t?t.movementY:e0}}),hw=os(Um),HI=Bn({},Um,{dataTransfer:0}),WI=os(HI),$I=Bn({},Yd,{relatedTarget:0}),t0=os($I),GI=Bn({},Yc,{animationName:0,elapsedTime:0,pseudoElement:0}),KI=os(GI),YI=Bn({},Yc,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),QI=os(YI),JI=Bn({},Yc,{data:0}),dw=os(JI),XI={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ZI={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ek={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function tk(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=ek[t])?!!e[t]:!1}function my(){return tk}var nk=Bn({},Yd,{key:function(t){if(t.key){var e=XI[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=vp(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?ZI[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:my,charCode:function(t){return t.type==="keypress"?vp(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?vp(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),rk=os(nk),ik=Bn({},Um,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),fw=os(ik),sk=Bn({},Yd,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:my}),ok=os(sk),ak=Bn({},Yc,{propertyName:0,elapsedTime:0,pseudoElement:0}),lk=os(ak),uk=Bn({},Um,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),ck=os(uk),hk=[9,13,27,32],gy=ua&&"CompositionEvent"in window,Jh=null;ua&&"documentMode"in document&&(Jh=document.documentMode);var dk=ua&&"TextEvent"in window&&!Jh,o3=ua&&(!gy||Jh&&8<Jh&&11>=Jh),pw=" ",mw=!1;function a3(t,e){switch(t){case"keyup":return hk.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function l3(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var sc=!1;function fk(t,e){switch(t){case"compositionend":return l3(e);case"keypress":return e.which!==32?null:(mw=!0,pw);case"textInput":return t=e.data,t===pw&&mw?null:t;default:return null}}function pk(t,e){if(sc)return t==="compositionend"||!gy&&a3(t,e)?(t=s3(),yp=fy=tl=null,sc=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return o3&&e.locale!=="ko"?null:e.data;default:return null}}var mk={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function gw(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!mk[t.type]:e==="textarea"}function u3(t,e,n,r){V4(r),e=Kp(e,"onChange"),0<e.length&&(n=new py("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Xh=null,wd=null;function gk(t){x3(t,0)}function Vm(t){var e=lc(t);if(R4(e))return t}function yk(t,e){if(t==="change")return e}var c3=!1;if(ua){var n0;if(ua){var r0="oninput"in document;if(!r0){var yw=document.createElement("div");yw.setAttribute("oninput","return;"),r0=typeof yw.oninput=="function"}n0=r0}else n0=!1;c3=n0&&(!document.documentMode||9<document.documentMode)}function vw(){Xh&&(Xh.detachEvent("onpropertychange",h3),wd=Xh=null)}function h3(t){if(t.propertyName==="value"&&Vm(wd)){var e=[];u3(e,wd,t,ly(t)),H4(gk,e)}}function vk(t,e,n){t==="focusin"?(vw(),Xh=e,wd=n,Xh.attachEvent("onpropertychange",h3)):t==="focusout"&&vw()}function wk(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Vm(wd)}function xk(t,e){if(t==="click")return Vm(e)}function _k(t,e){if(t==="input"||t==="change")return Vm(e)}function bk(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var $s=typeof Object.is=="function"?Object.is:bk;function xd(t,e){if($s(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!d1.call(e,i)||!$s(t[i],e[i]))return!1}return!0}function ww(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function xw(t,e){var n=ww(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=ww(n)}}function d3(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?d3(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function f3(){for(var t=window,e=Bp();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Bp(t.document)}return e}function yy(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Nk(t){var e=f3(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&d3(n.ownerDocument.documentElement,n)){if(r!==null&&yy(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=xw(n,s);var o=xw(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Sk=ua&&"documentMode"in document&&11>=document.documentMode,oc=null,C1=null,Zh=null,L1=!1;function _w(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;L1||oc==null||oc!==Bp(r)||(r=oc,"selectionStart"in r&&yy(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Zh&&xd(Zh,r)||(Zh=r,r=Kp(C1,"onSelect"),0<r.length&&(e=new py("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=oc)))}function qf(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ac={animationend:qf("Animation","AnimationEnd"),animationiteration:qf("Animation","AnimationIteration"),animationstart:qf("Animation","AnimationStart"),transitionend:qf("Transition","TransitionEnd")},i0={},p3={};ua&&(p3=document.createElement("div").style,"AnimationEvent"in window||(delete ac.animationend.animation,delete ac.animationiteration.animation,delete ac.animationstart.animation),"TransitionEvent"in window||delete ac.transitionend.transition);function Bm(t){if(i0[t])return i0[t];if(!ac[t])return t;var e=ac[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in p3)return i0[t]=e[n];return t}var m3=Bm("animationend"),g3=Bm("animationiteration"),y3=Bm("animationstart"),v3=Bm("transitionend"),w3=new Map,bw="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Al(t,e){w3.set(t,e),Au(e,[t])}for(var s0=0;s0<bw.length;s0++){var o0=bw[s0],Ak=o0.toLowerCase(),Ek=o0[0].toUpperCase()+o0.slice(1);Al(Ak,"on"+Ek)}Al(m3,"onAnimationEnd");Al(g3,"onAnimationIteration");Al(y3,"onAnimationStart");Al("dblclick","onDoubleClick");Al("focusin","onFocus");Al("focusout","onBlur");Al(v3,"onTransitionEnd");Lc("onMouseEnter",["mouseout","mouseover"]);Lc("onMouseLeave",["mouseout","mouseover"]);Lc("onPointerEnter",["pointerout","pointerover"]);Lc("onPointerLeave",["pointerout","pointerover"]);Au("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Au("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Au("onBeforeInput",["compositionend","keypress","textInput","paste"]);Au("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Au("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Au("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var zh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Tk=new Set("cancel close invalid load scroll toggle".split(" ").concat(zh));function Nw(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,AI(r,e,void 0,t),t.currentTarget=null}function x3(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;Nw(i,a,u),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;Nw(i,a,u),s=l}}}if(qp)throw t=T1,qp=!1,T1=null,t}function An(t,e){var n=e[F1];n===void 0&&(n=e[F1]=new Set);var r=t+"__bubble";n.has(r)||(_3(e,t,2,!1),n.add(r))}function a0(t,e,n){var r=0;e&&(r|=4),_3(n,t,r,e)}var Hf="_reactListening"+Math.random().toString(36).slice(2);function _d(t){if(!t[Hf]){t[Hf]=!0,I4.forEach(function(n){n!=="selectionchange"&&(Tk.has(n)||a0(n,!1,t),a0(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Hf]||(e[Hf]=!0,a0("selectionchange",!1,e))}}function _3(t,e,n,r){switch(i3(e)){case 1:var i=BI;break;case 4:i=zI;break;default:i=dy}n=i.bind(null,e,n,t),i=void 0,!E1||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function l0(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Xl(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}H4(function(){var u=s,c=ly(n),g=[];e:{var y=w3.get(t);if(y!==void 0){var m=py,N=t;switch(t){case"keypress":if(vp(n)===0)break e;case"keydown":case"keyup":m=rk;break;case"focusin":N="focus",m=t0;break;case"focusout":N="blur",m=t0;break;case"beforeblur":case"afterblur":m=t0;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=hw;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=WI;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=ok;break;case m3:case g3:case y3:m=KI;break;case v3:m=lk;break;case"scroll":m=qI;break;case"wheel":m=ck;break;case"copy":case"cut":case"paste":m=QI;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=fw}var A=(e&4)!==0,C=!A&&t==="scroll",_=A?y!==null?y+"Capture":null:y;A=[];for(var k=u,R;k!==null;){R=k;var D=R.stateNode;if(R.tag===5&&D!==null&&(R=D,_!==null&&(D=md(k,_),D!=null&&A.push(bd(k,D,R)))),C)break;k=k.return}0<A.length&&(y=new m(y,N,null,n,c),g.push({event:y,listeners:A}))}}if(!(e&7)){e:{if(y=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",y&&n!==S1&&(N=n.relatedTarget||n.fromElement)&&(Xl(N)||N[ca]))break e;if((m||y)&&(y=c.window===c?c:(y=c.ownerDocument)?y.defaultView||y.parentWindow:window,m?(N=n.relatedTarget||n.toElement,m=u,N=N?Xl(N):null,N!==null&&(C=Eu(N),N!==C||N.tag!==5&&N.tag!==6)&&(N=null)):(m=null,N=u),m!==N)){if(A=hw,D="onMouseLeave",_="onMouseEnter",k="mouse",(t==="pointerout"||t==="pointerover")&&(A=fw,D="onPointerLeave",_="onPointerEnter",k="pointer"),C=m==null?y:lc(m),R=N==null?y:lc(N),y=new A(D,k+"leave",m,n,c),y.target=C,y.relatedTarget=R,D=null,Xl(c)===u&&(A=new A(_,k+"enter",N,n,c),A.target=R,A.relatedTarget=C,D=A),C=D,m&&N)t:{for(A=m,_=N,k=0,R=A;R;R=Ku(R))k++;for(R=0,D=_;D;D=Ku(D))R++;for(;0<k-R;)A=Ku(A),k--;for(;0<R-k;)_=Ku(_),R--;for(;k--;){if(A===_||_!==null&&A===_.alternate)break t;A=Ku(A),_=Ku(_)}A=null}else A=null;m!==null&&Sw(g,y,m,A,!1),N!==null&&C!==null&&Sw(g,C,N,A,!0)}}e:{if(y=u?lc(u):window,m=y.nodeName&&y.nodeName.toLowerCase(),m==="select"||m==="input"&&y.type==="file")var z=yk;else if(gw(y))if(c3)z=_k;else{z=wk;var Q=vk}else(m=y.nodeName)&&m.toLowerCase()==="input"&&(y.type==="checkbox"||y.type==="radio")&&(z=xk);if(z&&(z=z(t,u))){u3(g,z,n,c);break e}Q&&Q(t,y,u),t==="focusout"&&(Q=y._wrapperState)&&Q.controlled&&y.type==="number"&&w1(y,"number",y.value)}switch(Q=u?lc(u):window,t){case"focusin":(gw(Q)||Q.contentEditable==="true")&&(oc=Q,C1=u,Zh=null);break;case"focusout":Zh=C1=oc=null;break;case"mousedown":L1=!0;break;case"contextmenu":case"mouseup":case"dragend":L1=!1,_w(g,n,c);break;case"selectionchange":if(Sk)break;case"keydown":case"keyup":_w(g,n,c)}var j;if(gy)e:{switch(t){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else sc?a3(t,n)&&(E="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(E="onCompositionStart");E&&(o3&&n.locale!=="ko"&&(sc||E!=="onCompositionStart"?E==="onCompositionEnd"&&sc&&(j=s3()):(tl=c,fy="value"in tl?tl.value:tl.textContent,sc=!0)),Q=Kp(u,E),0<Q.length&&(E=new dw(E,t,null,n,c),g.push({event:E,listeners:Q}),j?E.data=j:(j=l3(n),j!==null&&(E.data=j)))),(j=dk?fk(t,n):pk(t,n))&&(u=Kp(u,"onBeforeInput"),0<u.length&&(c=new dw("onBeforeInput","beforeinput",null,n,c),g.push({event:c,listeners:u}),c.data=j))}x3(g,e)})}function bd(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Kp(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=md(t,n),s!=null&&r.unshift(bd(t,s,i)),s=md(t,e),s!=null&&r.push(bd(t,s,i))),t=t.return}return r}function Ku(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Sw(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,i?(l=md(n,s),l!=null&&o.unshift(bd(n,l,a))):i||(l=md(n,s),l!=null&&o.push(bd(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var Ik=/\r\n?/g,kk=/\u0000|\uFFFD/g;function Aw(t){return(typeof t=="string"?t:""+t).replace(Ik,`
`).replace(kk,"")}function Wf(t,e,n){if(e=Aw(e),Aw(t)!==e&&n)throw Error(Oe(425))}function Yp(){}var R1=null,j1=null;function D1(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var O1=typeof setTimeout=="function"?setTimeout:void 0,Pk=typeof clearTimeout=="function"?clearTimeout:void 0,Ew=typeof Promise=="function"?Promise:void 0,Ck=typeof queueMicrotask=="function"?queueMicrotask:typeof Ew<"u"?function(t){return Ew.resolve(null).then(t).catch(Lk)}:O1;function Lk(t){setTimeout(function(){throw t})}function u0(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),vd(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);vd(e)}function cl(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Tw(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Qc=Math.random().toString(36).slice(2),wo="__reactFiber$"+Qc,Nd="__reactProps$"+Qc,ca="__reactContainer$"+Qc,F1="__reactEvents$"+Qc,Rk="__reactListeners$"+Qc,jk="__reactHandles$"+Qc;function Xl(t){var e=t[wo];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ca]||n[wo]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Tw(t);t!==null;){if(n=t[wo])return n;t=Tw(t)}return e}t=n,n=t.parentNode}return null}function Qd(t){return t=t[wo]||t[ca],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function lc(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Oe(33))}function zm(t){return t[Nd]||null}var M1=[],uc=-1;function El(t){return{current:t}}function In(t){0>uc||(t.current=M1[uc],M1[uc]=null,uc--)}function bn(t,e){uc++,M1[uc]=t.current,t.current=e}var wl={},oi=El(wl),Li=El(!1),lu=wl;function Rc(t,e){var n=t.type.contextTypes;if(!n)return wl;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Ri(t){return t=t.childContextTypes,t!=null}function Qp(){In(Li),In(oi)}function Iw(t,e,n){if(oi.current!==wl)throw Error(Oe(168));bn(oi,e),bn(Li,n)}function b3(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(Oe(108,vI(t)||"Unknown",i));return Bn({},n,r)}function Jp(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||wl,lu=oi.current,bn(oi,t),bn(Li,Li.current),!0}function kw(t,e,n){var r=t.stateNode;if(!r)throw Error(Oe(169));n?(t=b3(t,e,lu),r.__reactInternalMemoizedMergedChildContext=t,In(Li),In(oi),bn(oi,t)):In(Li),bn(Li,n)}var Qo=null,qm=!1,c0=!1;function N3(t){Qo===null?Qo=[t]:Qo.push(t)}function Dk(t){qm=!0,N3(t)}function Tl(){if(!c0&&Qo!==null){c0=!0;var t=0,e=ln;try{var n=Qo;for(ln=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Qo=null,qm=!1}catch(i){throw Qo!==null&&(Qo=Qo.slice(t+1)),K4(uy,Tl),i}finally{ln=e,c0=!1}}return null}var cc=[],hc=0,Xp=null,Zp=0,_s=[],bs=0,uu=null,Xo=1,Zo="";function Gl(t,e){cc[hc++]=Zp,cc[hc++]=Xp,Xp=t,Zp=e}function S3(t,e,n){_s[bs++]=Xo,_s[bs++]=Zo,_s[bs++]=uu,uu=t;var r=Xo;t=Zo;var i=32-qs(r)-1;r&=~(1<<i),n+=1;var s=32-qs(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Xo=1<<32-qs(e)+i|n<<i|r,Zo=s+t}else Xo=1<<s|n<<i|r,Zo=t}function vy(t){t.return!==null&&(Gl(t,1),S3(t,1,0))}function wy(t){for(;t===Xp;)Xp=cc[--hc],cc[hc]=null,Zp=cc[--hc],cc[hc]=null;for(;t===uu;)uu=_s[--bs],_s[bs]=null,Zo=_s[--bs],_s[bs]=null,Xo=_s[--bs],_s[bs]=null}var rs=null,Zi=null,Ln=!1,zs=null;function A3(t,e){var n=Ns(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Pw(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,rs=t,Zi=cl(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,rs=t,Zi=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=uu!==null?{id:Xo,overflow:Zo}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Ns(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,rs=t,Zi=null,!0):!1;default:return!1}}function U1(t){return(t.mode&1)!==0&&(t.flags&128)===0}function V1(t){if(Ln){var e=Zi;if(e){var n=e;if(!Pw(t,e)){if(U1(t))throw Error(Oe(418));e=cl(n.nextSibling);var r=rs;e&&Pw(t,e)?A3(r,n):(t.flags=t.flags&-4097|2,Ln=!1,rs=t)}}else{if(U1(t))throw Error(Oe(418));t.flags=t.flags&-4097|2,Ln=!1,rs=t}}}function Cw(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;rs=t}function $f(t){if(t!==rs)return!1;if(!Ln)return Cw(t),Ln=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!D1(t.type,t.memoizedProps)),e&&(e=Zi)){if(U1(t))throw E3(),Error(Oe(418));for(;e;)A3(t,e),e=cl(e.nextSibling)}if(Cw(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Oe(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Zi=cl(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Zi=null}}else Zi=rs?cl(t.stateNode.nextSibling):null;return!0}function E3(){for(var t=Zi;t;)t=cl(t.nextSibling)}function jc(){Zi=rs=null,Ln=!1}function xy(t){zs===null?zs=[t]:zs.push(t)}var Ok=va.ReactCurrentBatchConfig;function Lh(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Oe(309));var r=n.stateNode}if(!r)throw Error(Oe(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(Oe(284));if(!n._owner)throw Error(Oe(290,t))}return t}function Gf(t,e){throw t=Object.prototype.toString.call(e),Error(Oe(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Lw(t){var e=t._init;return e(t._payload)}function T3(t){function e(_,k){if(t){var R=_.deletions;R===null?(_.deletions=[k],_.flags|=16):R.push(k)}}function n(_,k){if(!t)return null;for(;k!==null;)e(_,k),k=k.sibling;return null}function r(_,k){for(_=new Map;k!==null;)k.key!==null?_.set(k.key,k):_.set(k.index,k),k=k.sibling;return _}function i(_,k){return _=pl(_,k),_.index=0,_.sibling=null,_}function s(_,k,R){return _.index=R,t?(R=_.alternate,R!==null?(R=R.index,R<k?(_.flags|=2,k):R):(_.flags|=2,k)):(_.flags|=1048576,k)}function o(_){return t&&_.alternate===null&&(_.flags|=2),_}function a(_,k,R,D){return k===null||k.tag!==6?(k=y0(R,_.mode,D),k.return=_,k):(k=i(k,R),k.return=_,k)}function l(_,k,R,D){var z=R.type;return z===ic?c(_,k,R.props.children,D,R.key):k!==null&&(k.elementType===z||typeof z=="object"&&z!==null&&z.$$typeof===$a&&Lw(z)===k.type)?(D=i(k,R.props),D.ref=Lh(_,k,R),D.return=_,D):(D=Ap(R.type,R.key,R.props,null,_.mode,D),D.ref=Lh(_,k,R),D.return=_,D)}function u(_,k,R,D){return k===null||k.tag!==4||k.stateNode.containerInfo!==R.containerInfo||k.stateNode.implementation!==R.implementation?(k=v0(R,_.mode,D),k.return=_,k):(k=i(k,R.children||[]),k.return=_,k)}function c(_,k,R,D,z){return k===null||k.tag!==7?(k=iu(R,_.mode,D,z),k.return=_,k):(k=i(k,R),k.return=_,k)}function g(_,k,R){if(typeof k=="string"&&k!==""||typeof k=="number")return k=y0(""+k,_.mode,R),k.return=_,k;if(typeof k=="object"&&k!==null){switch(k.$$typeof){case Of:return R=Ap(k.type,k.key,k.props,null,_.mode,R),R.ref=Lh(_,null,k),R.return=_,R;case rc:return k=v0(k,_.mode,R),k.return=_,k;case $a:var D=k._init;return g(_,D(k._payload),R)}if(Vh(k)||Th(k))return k=iu(k,_.mode,R,null),k.return=_,k;Gf(_,k)}return null}function y(_,k,R,D){var z=k!==null?k.key:null;if(typeof R=="string"&&R!==""||typeof R=="number")return z!==null?null:a(_,k,""+R,D);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case Of:return R.key===z?l(_,k,R,D):null;case rc:return R.key===z?u(_,k,R,D):null;case $a:return z=R._init,y(_,k,z(R._payload),D)}if(Vh(R)||Th(R))return z!==null?null:c(_,k,R,D,null);Gf(_,R)}return null}function m(_,k,R,D,z){if(typeof D=="string"&&D!==""||typeof D=="number")return _=_.get(R)||null,a(k,_,""+D,z);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case Of:return _=_.get(D.key===null?R:D.key)||null,l(k,_,D,z);case rc:return _=_.get(D.key===null?R:D.key)||null,u(k,_,D,z);case $a:var Q=D._init;return m(_,k,R,Q(D._payload),z)}if(Vh(D)||Th(D))return _=_.get(R)||null,c(k,_,D,z,null);Gf(k,D)}return null}function N(_,k,R,D){for(var z=null,Q=null,j=k,E=k=0,I=null;j!==null&&E<R.length;E++){j.index>E?(I=j,j=null):I=j.sibling;var F=y(_,j,R[E],D);if(F===null){j===null&&(j=I);break}t&&j&&F.alternate===null&&e(_,j),k=s(F,k,E),Q===null?z=F:Q.sibling=F,Q=F,j=I}if(E===R.length)return n(_,j),Ln&&Gl(_,E),z;if(j===null){for(;E<R.length;E++)j=g(_,R[E],D),j!==null&&(k=s(j,k,E),Q===null?z=j:Q.sibling=j,Q=j);return Ln&&Gl(_,E),z}for(j=r(_,j);E<R.length;E++)I=m(j,_,E,R[E],D),I!==null&&(t&&I.alternate!==null&&j.delete(I.key===null?E:I.key),k=s(I,k,E),Q===null?z=I:Q.sibling=I,Q=I);return t&&j.forEach(function(b){return e(_,b)}),Ln&&Gl(_,E),z}function A(_,k,R,D){var z=Th(R);if(typeof z!="function")throw Error(Oe(150));if(R=z.call(R),R==null)throw Error(Oe(151));for(var Q=z=null,j=k,E=k=0,I=null,F=R.next();j!==null&&!F.done;E++,F=R.next()){j.index>E?(I=j,j=null):I=j.sibling;var b=y(_,j,F.value,D);if(b===null){j===null&&(j=I);break}t&&j&&b.alternate===null&&e(_,j),k=s(b,k,E),Q===null?z=b:Q.sibling=b,Q=b,j=I}if(F.done)return n(_,j),Ln&&Gl(_,E),z;if(j===null){for(;!F.done;E++,F=R.next())F=g(_,F.value,D),F!==null&&(k=s(F,k,E),Q===null?z=F:Q.sibling=F,Q=F);return Ln&&Gl(_,E),z}for(j=r(_,j);!F.done;E++,F=R.next())F=m(j,_,E,F.value,D),F!==null&&(t&&F.alternate!==null&&j.delete(F.key===null?E:F.key),k=s(F,k,E),Q===null?z=F:Q.sibling=F,Q=F);return t&&j.forEach(function(S){return e(_,S)}),Ln&&Gl(_,E),z}function C(_,k,R,D){if(typeof R=="object"&&R!==null&&R.type===ic&&R.key===null&&(R=R.props.children),typeof R=="object"&&R!==null){switch(R.$$typeof){case Of:e:{for(var z=R.key,Q=k;Q!==null;){if(Q.key===z){if(z=R.type,z===ic){if(Q.tag===7){n(_,Q.sibling),k=i(Q,R.props.children),k.return=_,_=k;break e}}else if(Q.elementType===z||typeof z=="object"&&z!==null&&z.$$typeof===$a&&Lw(z)===Q.type){n(_,Q.sibling),k=i(Q,R.props),k.ref=Lh(_,Q,R),k.return=_,_=k;break e}n(_,Q);break}else e(_,Q);Q=Q.sibling}R.type===ic?(k=iu(R.props.children,_.mode,D,R.key),k.return=_,_=k):(D=Ap(R.type,R.key,R.props,null,_.mode,D),D.ref=Lh(_,k,R),D.return=_,_=D)}return o(_);case rc:e:{for(Q=R.key;k!==null;){if(k.key===Q)if(k.tag===4&&k.stateNode.containerInfo===R.containerInfo&&k.stateNode.implementation===R.implementation){n(_,k.sibling),k=i(k,R.children||[]),k.return=_,_=k;break e}else{n(_,k);break}else e(_,k);k=k.sibling}k=v0(R,_.mode,D),k.return=_,_=k}return o(_);case $a:return Q=R._init,C(_,k,Q(R._payload),D)}if(Vh(R))return N(_,k,R,D);if(Th(R))return A(_,k,R,D);Gf(_,R)}return typeof R=="string"&&R!==""||typeof R=="number"?(R=""+R,k!==null&&k.tag===6?(n(_,k.sibling),k=i(k,R),k.return=_,_=k):(n(_,k),k=y0(R,_.mode,D),k.return=_,_=k),o(_)):n(_,k)}return C}var Dc=T3(!0),I3=T3(!1),em=El(null),tm=null,dc=null,_y=null;function by(){_y=dc=tm=null}function Ny(t){var e=em.current;In(em),t._currentValue=e}function B1(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function _c(t,e){tm=t,_y=dc=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Pi=!0),t.firstContext=null)}function As(t){var e=t._currentValue;if(_y!==t)if(t={context:t,memoizedValue:e,next:null},dc===null){if(tm===null)throw Error(Oe(308));dc=t,tm.dependencies={lanes:0,firstContext:t}}else dc=dc.next=t;return e}var Zl=null;function Sy(t){Zl===null?Zl=[t]:Zl.push(t)}function k3(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Sy(e)):(n.next=i.next,i.next=n),e.interleaved=n,ha(t,r)}function ha(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Ga=!1;function Ay(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function P3(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ia(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function hl(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Yt&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,ha(t,n)}return i=r.interleaved,i===null?(e.next=e,Sy(r)):(e.next=i.next,i.next=e),r.interleaved=e,ha(t,n)}function wp(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,cy(t,n)}}function Rw(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function nm(t,e,n,r){var i=t.updateQueue;Ga=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var c=t.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(s!==null){var g=i.baseState;o=0,c=u=l=null,a=s;do{var y=a.lane,m=a.eventTime;if((r&y)===y){c!==null&&(c=c.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var N=t,A=a;switch(y=e,m=n,A.tag){case 1:if(N=A.payload,typeof N=="function"){g=N.call(m,g,y);break e}g=N;break e;case 3:N.flags=N.flags&-65537|128;case 0:if(N=A.payload,y=typeof N=="function"?N.call(m,g,y):N,y==null)break e;g=Bn({},g,y);break e;case 2:Ga=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,y=i.effects,y===null?i.effects=[a]:y.push(a))}else m={eventTime:m,lane:y,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(u=c=m,l=g):c=c.next=m,o|=y;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;y=a,a=y.next,y.next=null,i.lastBaseUpdate=y,i.shared.pending=null}}while(!0);if(c===null&&(l=g),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);hu|=o,t.lanes=o,t.memoizedState=g}}function jw(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(Oe(191,i));i.call(r)}}}var Jd={},So=El(Jd),Sd=El(Jd),Ad=El(Jd);function eu(t){if(t===Jd)throw Error(Oe(174));return t}function Ey(t,e){switch(bn(Ad,e),bn(Sd,t),bn(So,Jd),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:_1(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=_1(e,t)}In(So),bn(So,e)}function Oc(){In(So),In(Sd),In(Ad)}function C3(t){eu(Ad.current);var e=eu(So.current),n=_1(e,t.type);e!==n&&(bn(Sd,t),bn(So,n))}function Ty(t){Sd.current===t&&(In(So),In(Sd))}var Un=El(0);function rm(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var h0=[];function Iy(){for(var t=0;t<h0.length;t++)h0[t]._workInProgressVersionPrimary=null;h0.length=0}var xp=va.ReactCurrentDispatcher,d0=va.ReactCurrentBatchConfig,cu=0,Vn=null,xr=null,Tr=null,im=!1,ed=!1,Ed=0,Fk=0;function Kr(){throw Error(Oe(321))}function ky(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!$s(t[n],e[n]))return!1;return!0}function Py(t,e,n,r,i,s){if(cu=s,Vn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,xp.current=t===null||t.memoizedState===null?Bk:zk,t=n(r,i),ed){s=0;do{if(ed=!1,Ed=0,25<=s)throw Error(Oe(301));s+=1,Tr=xr=null,e.updateQueue=null,xp.current=qk,t=n(r,i)}while(ed)}if(xp.current=sm,e=xr!==null&&xr.next!==null,cu=0,Tr=xr=Vn=null,im=!1,e)throw Error(Oe(300));return t}function Cy(){var t=Ed!==0;return Ed=0,t}function yo(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Tr===null?Vn.memoizedState=Tr=t:Tr=Tr.next=t,Tr}function Es(){if(xr===null){var t=Vn.alternate;t=t!==null?t.memoizedState:null}else t=xr.next;var e=Tr===null?Vn.memoizedState:Tr.next;if(e!==null)Tr=e,xr=t;else{if(t===null)throw Error(Oe(310));xr=t,t={memoizedState:xr.memoizedState,baseState:xr.baseState,baseQueue:xr.baseQueue,queue:xr.queue,next:null},Tr===null?Vn.memoizedState=Tr=t:Tr=Tr.next=t}return Tr}function Td(t,e){return typeof e=="function"?e(t):e}function f0(t){var e=Es(),n=e.queue;if(n===null)throw Error(Oe(311));n.lastRenderedReducer=t;var r=xr,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,u=s;do{var c=u.lane;if((cu&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var g={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=g,o=r):l=l.next=g,Vn.lanes|=c,hu|=c}u=u.next}while(u!==null&&u!==s);l===null?o=r:l.next=a,$s(r,e.memoizedState)||(Pi=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Vn.lanes|=s,hu|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function p0(t){var e=Es(),n=e.queue;if(n===null)throw Error(Oe(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);$s(s,e.memoizedState)||(Pi=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function L3(){}function R3(t,e){var n=Vn,r=Es(),i=e(),s=!$s(r.memoizedState,i);if(s&&(r.memoizedState=i,Pi=!0),r=r.queue,Ly(O3.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Tr!==null&&Tr.memoizedState.tag&1){if(n.flags|=2048,Id(9,D3.bind(null,n,r,i,e),void 0,null),kr===null)throw Error(Oe(349));cu&30||j3(n,e,i)}return i}function j3(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Vn.updateQueue,e===null?(e={lastEffect:null,stores:null},Vn.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function D3(t,e,n,r){e.value=n,e.getSnapshot=r,F3(e)&&M3(t)}function O3(t,e,n){return n(function(){F3(e)&&M3(t)})}function F3(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!$s(t,n)}catch{return!0}}function M3(t){var e=ha(t,1);e!==null&&Hs(e,t,1,-1)}function Dw(t){var e=yo();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Td,lastRenderedState:t},e.queue=t,t=t.dispatch=Vk.bind(null,Vn,t),[e.memoizedState,t]}function Id(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Vn.updateQueue,e===null?(e={lastEffect:null,stores:null},Vn.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function U3(){return Es().memoizedState}function _p(t,e,n,r){var i=yo();Vn.flags|=t,i.memoizedState=Id(1|e,n,void 0,r===void 0?null:r)}function Hm(t,e,n,r){var i=Es();r=r===void 0?null:r;var s=void 0;if(xr!==null){var o=xr.memoizedState;if(s=o.destroy,r!==null&&ky(r,o.deps)){i.memoizedState=Id(e,n,s,r);return}}Vn.flags|=t,i.memoizedState=Id(1|e,n,s,r)}function Ow(t,e){return _p(8390656,8,t,e)}function Ly(t,e){return Hm(2048,8,t,e)}function V3(t,e){return Hm(4,2,t,e)}function B3(t,e){return Hm(4,4,t,e)}function z3(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function q3(t,e,n){return n=n!=null?n.concat([t]):null,Hm(4,4,z3.bind(null,e,t),n)}function Ry(){}function H3(t,e){var n=Es();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&ky(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function W3(t,e){var n=Es();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&ky(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function $3(t,e,n){return cu&21?($s(n,e)||(n=J4(),Vn.lanes|=n,hu|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Pi=!0),t.memoizedState=n)}function Mk(t,e){var n=ln;ln=n!==0&&4>n?n:4,t(!0);var r=d0.transition;d0.transition={};try{t(!1),e()}finally{ln=n,d0.transition=r}}function G3(){return Es().memoizedState}function Uk(t,e,n){var r=fl(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},K3(t))Y3(e,n);else if(n=k3(t,e,n,r),n!==null){var i=yi();Hs(n,t,r,i),Q3(n,e,r)}}function Vk(t,e,n){var r=fl(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(K3(t))Y3(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,$s(a,o)){var l=e.interleaved;l===null?(i.next=i,Sy(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=k3(t,e,i,r),n!==null&&(i=yi(),Hs(n,t,r,i),Q3(n,e,r))}}function K3(t){var e=t.alternate;return t===Vn||e!==null&&e===Vn}function Y3(t,e){ed=im=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Q3(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,cy(t,n)}}var sm={readContext:As,useCallback:Kr,useContext:Kr,useEffect:Kr,useImperativeHandle:Kr,useInsertionEffect:Kr,useLayoutEffect:Kr,useMemo:Kr,useReducer:Kr,useRef:Kr,useState:Kr,useDebugValue:Kr,useDeferredValue:Kr,useTransition:Kr,useMutableSource:Kr,useSyncExternalStore:Kr,useId:Kr,unstable_isNewReconciler:!1},Bk={readContext:As,useCallback:function(t,e){return yo().memoizedState=[t,e===void 0?null:e],t},useContext:As,useEffect:Ow,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,_p(4194308,4,z3.bind(null,e,t),n)},useLayoutEffect:function(t,e){return _p(4194308,4,t,e)},useInsertionEffect:function(t,e){return _p(4,2,t,e)},useMemo:function(t,e){var n=yo();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=yo();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=Uk.bind(null,Vn,t),[r.memoizedState,t]},useRef:function(t){var e=yo();return t={current:t},e.memoizedState=t},useState:Dw,useDebugValue:Ry,useDeferredValue:function(t){return yo().memoizedState=t},useTransition:function(){var t=Dw(!1),e=t[0];return t=Mk.bind(null,t[1]),yo().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Vn,i=yo();if(Ln){if(n===void 0)throw Error(Oe(407));n=n()}else{if(n=e(),kr===null)throw Error(Oe(349));cu&30||j3(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,Ow(O3.bind(null,r,s,t),[t]),r.flags|=2048,Id(9,D3.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=yo(),e=kr.identifierPrefix;if(Ln){var n=Zo,r=Xo;n=(r&~(1<<32-qs(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ed++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Fk++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},zk={readContext:As,useCallback:H3,useContext:As,useEffect:Ly,useImperativeHandle:q3,useInsertionEffect:V3,useLayoutEffect:B3,useMemo:W3,useReducer:f0,useRef:U3,useState:function(){return f0(Td)},useDebugValue:Ry,useDeferredValue:function(t){var e=Es();return $3(e,xr.memoizedState,t)},useTransition:function(){var t=f0(Td)[0],e=Es().memoizedState;return[t,e]},useMutableSource:L3,useSyncExternalStore:R3,useId:G3,unstable_isNewReconciler:!1},qk={readContext:As,useCallback:H3,useContext:As,useEffect:Ly,useImperativeHandle:q3,useInsertionEffect:V3,useLayoutEffect:B3,useMemo:W3,useReducer:p0,useRef:U3,useState:function(){return p0(Td)},useDebugValue:Ry,useDeferredValue:function(t){var e=Es();return xr===null?e.memoizedState=t:$3(e,xr.memoizedState,t)},useTransition:function(){var t=p0(Td)[0],e=Es().memoizedState;return[t,e]},useMutableSource:L3,useSyncExternalStore:R3,useId:G3,unstable_isNewReconciler:!1};function Vs(t,e){if(t&&t.defaultProps){e=Bn({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function z1(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Bn({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Wm={isMounted:function(t){return(t=t._reactInternals)?Eu(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=yi(),i=fl(t),s=ia(r,i);s.payload=e,n!=null&&(s.callback=n),e=hl(t,s,i),e!==null&&(Hs(e,t,i,r),wp(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=yi(),i=fl(t),s=ia(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=hl(t,s,i),e!==null&&(Hs(e,t,i,r),wp(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=yi(),r=fl(t),i=ia(n,r);i.tag=2,e!=null&&(i.callback=e),e=hl(t,i,r),e!==null&&(Hs(e,t,r,n),wp(e,t,r))}};function Fw(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!xd(n,r)||!xd(i,s):!0}function J3(t,e,n){var r=!1,i=wl,s=e.contextType;return typeof s=="object"&&s!==null?s=As(s):(i=Ri(e)?lu:oi.current,r=e.contextTypes,s=(r=r!=null)?Rc(t,i):wl),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Wm,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function Mw(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Wm.enqueueReplaceState(e,e.state,null)}function q1(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Ay(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=As(s):(s=Ri(e)?lu:oi.current,i.context=Rc(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(z1(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Wm.enqueueReplaceState(i,i.state,null),nm(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Fc(t,e){try{var n="",r=e;do n+=yI(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function m0(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function H1(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Hk=typeof WeakMap=="function"?WeakMap:Map;function X3(t,e,n){n=ia(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){am||(am=!0,e2=r),H1(t,e)},n}function Z3(t,e,n){n=ia(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){H1(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){H1(t,e),typeof r!="function"&&(dl===null?dl=new Set([this]):dl.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Uw(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Hk;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=i8.bind(null,t,e,n),e.then(t,t))}function Vw(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Bw(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=ia(-1,1),e.tag=2,hl(n,e,1))),n.lanes|=1),t)}var Wk=va.ReactCurrentOwner,Pi=!1;function mi(t,e,n,r){e.child=t===null?I3(e,null,n,r):Dc(e,t.child,n,r)}function zw(t,e,n,r,i){n=n.render;var s=e.ref;return _c(e,i),r=Py(t,e,n,r,s,i),n=Cy(),t!==null&&!Pi?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,da(t,e,i)):(Ln&&n&&vy(e),e.flags|=1,mi(t,e,r,i),e.child)}function qw(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!By(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,e6(t,e,s,r,i)):(t=Ap(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:xd,n(o,r)&&t.ref===e.ref)return da(t,e,i)}return e.flags|=1,t=pl(s,r),t.ref=e.ref,t.return=e,e.child=t}function e6(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(xd(s,r)&&t.ref===e.ref)if(Pi=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Pi=!0);else return e.lanes=t.lanes,da(t,e,i)}return W1(t,e,n,r,i)}function t6(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},bn(pc,Xi),Xi|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,bn(pc,Xi),Xi|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,bn(pc,Xi),Xi|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,bn(pc,Xi),Xi|=r;return mi(t,e,i,n),e.child}function n6(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function W1(t,e,n,r,i){var s=Ri(n)?lu:oi.current;return s=Rc(e,s),_c(e,i),n=Py(t,e,n,r,s,i),r=Cy(),t!==null&&!Pi?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,da(t,e,i)):(Ln&&r&&vy(e),e.flags|=1,mi(t,e,n,i),e.child)}function Hw(t,e,n,r,i){if(Ri(n)){var s=!0;Jp(e)}else s=!1;if(_c(e,i),e.stateNode===null)bp(t,e),J3(e,n,r),q1(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=As(u):(u=Ri(n)?lu:oi.current,u=Rc(e,u));var c=n.getDerivedStateFromProps,g=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";g||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&Mw(e,o,r,u),Ga=!1;var y=e.memoizedState;o.state=y,nm(e,r,o,i),l=e.memoizedState,a!==r||y!==l||Li.current||Ga?(typeof c=="function"&&(z1(e,n,c,r),l=e.memoizedState),(a=Ga||Fw(e,n,a,r,y,l,u))?(g||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,P3(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:Vs(e.type,a),o.props=u,g=e.pendingProps,y=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=As(l):(l=Ri(n)?lu:oi.current,l=Rc(e,l));var m=n.getDerivedStateFromProps;(c=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==g||y!==l)&&Mw(e,o,r,l),Ga=!1,y=e.memoizedState,o.state=y,nm(e,r,o,i);var N=e.memoizedState;a!==g||y!==N||Li.current||Ga?(typeof m=="function"&&(z1(e,n,m,r),N=e.memoizedState),(u=Ga||Fw(e,n,u,r,y,N,l)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,N,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,N,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&y===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&y===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=N),o.props=r,o.state=N,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&y===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&y===t.memoizedState||(e.flags|=1024),r=!1)}return $1(t,e,n,r,s,i)}function $1(t,e,n,r,i,s){n6(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&kw(e,n,!1),da(t,e,s);r=e.stateNode,Wk.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Dc(e,t.child,null,s),e.child=Dc(e,null,a,s)):mi(t,e,a,s),e.memoizedState=r.state,i&&kw(e,n,!0),e.child}function r6(t){var e=t.stateNode;e.pendingContext?Iw(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Iw(t,e.context,!1),Ey(t,e.containerInfo)}function Ww(t,e,n,r,i){return jc(),xy(i),e.flags|=256,mi(t,e,n,r),e.child}var G1={dehydrated:null,treeContext:null,retryLane:0};function K1(t){return{baseLanes:t,cachePool:null,transitions:null}}function i6(t,e,n){var r=e.pendingProps,i=Un.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),bn(Un,i&1),t===null)return V1(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Km(o,r,0,null),t=iu(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=K1(n),e.memoizedState=G1,t):jy(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return $k(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=pl(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=pl(a,s):(s=iu(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?K1(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=G1,r}return s=t.child,t=s.sibling,r=pl(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function jy(t,e){return e=Km({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Kf(t,e,n,r){return r!==null&&xy(r),Dc(e,t.child,null,n),t=jy(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function $k(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=m0(Error(Oe(422))),Kf(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Km({mode:"visible",children:r.children},i,0,null),s=iu(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Dc(e,t.child,null,o),e.child.memoizedState=K1(o),e.memoizedState=G1,s);if(!(e.mode&1))return Kf(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(Oe(419)),r=m0(s,r,void 0),Kf(t,e,o,r)}if(a=(o&t.childLanes)!==0,Pi||a){if(r=kr,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,ha(t,i),Hs(r,t,i,-1))}return Vy(),r=m0(Error(Oe(421))),Kf(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=s8.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Zi=cl(i.nextSibling),rs=e,Ln=!0,zs=null,t!==null&&(_s[bs++]=Xo,_s[bs++]=Zo,_s[bs++]=uu,Xo=t.id,Zo=t.overflow,uu=e),e=jy(e,r.children),e.flags|=4096,e)}function $w(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),B1(t.return,e,n)}function g0(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function s6(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(mi(t,e,r.children,n),r=Un.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&$w(t,n,e);else if(t.tag===19)$w(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(bn(Un,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&rm(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),g0(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&rm(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}g0(e,!0,n,null,s);break;case"together":g0(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function bp(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function da(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),hu|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Oe(153));if(e.child!==null){for(t=e.child,n=pl(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=pl(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Gk(t,e,n){switch(e.tag){case 3:r6(e),jc();break;case 5:C3(e);break;case 1:Ri(e.type)&&Jp(e);break;case 4:Ey(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;bn(em,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(bn(Un,Un.current&1),e.flags|=128,null):n&e.child.childLanes?i6(t,e,n):(bn(Un,Un.current&1),t=da(t,e,n),t!==null?t.sibling:null);bn(Un,Un.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return s6(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),bn(Un,Un.current),r)break;return null;case 22:case 23:return e.lanes=0,t6(t,e,n)}return da(t,e,n)}var o6,Y1,a6,l6;o6=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Y1=function(){};a6=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,eu(So.current);var s=null;switch(n){case"input":i=y1(t,i),r=y1(t,r),s=[];break;case"select":i=Bn({},i,{value:void 0}),r=Bn({},r,{value:void 0}),s=[];break;case"textarea":i=x1(t,i),r=x1(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Yp)}b1(n,r);var o;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(fd.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var l=r[u];if(a=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(fd.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&An("scroll",t),s||a===l||(s=[])):(s=s||[]).push(u,l))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};l6=function(t,e,n,r){n!==r&&(e.flags|=4)};function Rh(t,e){if(!Ln)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Yr(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Kk(t,e,n){var r=e.pendingProps;switch(wy(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Yr(e),null;case 1:return Ri(e.type)&&Qp(),Yr(e),null;case 3:return r=e.stateNode,Oc(),In(Li),In(oi),Iy(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&($f(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,zs!==null&&(r2(zs),zs=null))),Y1(t,e),Yr(e),null;case 5:Ty(e);var i=eu(Ad.current);if(n=e.type,t!==null&&e.stateNode!=null)a6(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Oe(166));return Yr(e),null}if(t=eu(So.current),$f(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[wo]=e,r[Nd]=s,t=(e.mode&1)!==0,n){case"dialog":An("cancel",r),An("close",r);break;case"iframe":case"object":case"embed":An("load",r);break;case"video":case"audio":for(i=0;i<zh.length;i++)An(zh[i],r);break;case"source":An("error",r);break;case"img":case"image":case"link":An("error",r),An("load",r);break;case"details":An("toggle",r);break;case"input":tw(r,s),An("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},An("invalid",r);break;case"textarea":rw(r,s),An("invalid",r)}b1(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Wf(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Wf(r.textContent,a,t),i=["children",""+a]):fd.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&An("scroll",r)}switch(n){case"input":Ff(r),nw(r,s,!0);break;case"textarea":Ff(r),iw(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Yp)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=O4(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[wo]=e,t[Nd]=r,o6(t,e,!1,!1),e.stateNode=t;e:{switch(o=N1(n,r),n){case"dialog":An("cancel",t),An("close",t),i=r;break;case"iframe":case"object":case"embed":An("load",t),i=r;break;case"video":case"audio":for(i=0;i<zh.length;i++)An(zh[i],t);i=r;break;case"source":An("error",t),i=r;break;case"img":case"image":case"link":An("error",t),An("load",t),i=r;break;case"details":An("toggle",t),i=r;break;case"input":tw(t,r),i=y1(t,r),An("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Bn({},r,{value:void 0}),An("invalid",t);break;case"textarea":rw(t,r),i=x1(t,r),An("invalid",t);break;default:i=r}b1(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?U4(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&F4(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&pd(t,l):typeof l=="number"&&pd(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(fd.hasOwnProperty(s)?l!=null&&s==="onScroll"&&An("scroll",t):l!=null&&iy(t,s,l,o))}switch(n){case"input":Ff(t),nw(t,r,!1);break;case"textarea":Ff(t),iw(t);break;case"option":r.value!=null&&t.setAttribute("value",""+vl(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?yc(t,!!r.multiple,s,!1):r.defaultValue!=null&&yc(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Yp)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Yr(e),null;case 6:if(t&&e.stateNode!=null)l6(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Oe(166));if(n=eu(Ad.current),eu(So.current),$f(e)){if(r=e.stateNode,n=e.memoizedProps,r[wo]=e,(s=r.nodeValue!==n)&&(t=rs,t!==null))switch(t.tag){case 3:Wf(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Wf(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[wo]=e,e.stateNode=r}return Yr(e),null;case 13:if(In(Un),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ln&&Zi!==null&&e.mode&1&&!(e.flags&128))E3(),jc(),e.flags|=98560,s=!1;else if(s=$f(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(Oe(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Oe(317));s[wo]=e}else jc(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Yr(e),s=!1}else zs!==null&&(r2(zs),zs=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Un.current&1?_r===0&&(_r=3):Vy())),e.updateQueue!==null&&(e.flags|=4),Yr(e),null);case 4:return Oc(),Y1(t,e),t===null&&_d(e.stateNode.containerInfo),Yr(e),null;case 10:return Ny(e.type._context),Yr(e),null;case 17:return Ri(e.type)&&Qp(),Yr(e),null;case 19:if(In(Un),s=e.memoizedState,s===null)return Yr(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Rh(s,!1);else{if(_r!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=rm(t),o!==null){for(e.flags|=128,Rh(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return bn(Un,Un.current&1|2),e.child}t=t.sibling}s.tail!==null&&sr()>Mc&&(e.flags|=128,r=!0,Rh(s,!1),e.lanes=4194304)}else{if(!r)if(t=rm(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Rh(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Ln)return Yr(e),null}else 2*sr()-s.renderingStartTime>Mc&&n!==1073741824&&(e.flags|=128,r=!0,Rh(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=sr(),e.sibling=null,n=Un.current,bn(Un,r?n&1|2:n&1),e):(Yr(e),null);case 22:case 23:return Uy(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Xi&1073741824&&(Yr(e),e.subtreeFlags&6&&(e.flags|=8192)):Yr(e),null;case 24:return null;case 25:return null}throw Error(Oe(156,e.tag))}function Yk(t,e){switch(wy(e),e.tag){case 1:return Ri(e.type)&&Qp(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Oc(),In(Li),In(oi),Iy(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Ty(e),null;case 13:if(In(Un),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Oe(340));jc()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return In(Un),null;case 4:return Oc(),null;case 10:return Ny(e.type._context),null;case 22:case 23:return Uy(),null;case 24:return null;default:return null}}var Yf=!1,ni=!1,Qk=typeof WeakSet=="function"?WeakSet:Set,We=null;function fc(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Yn(t,e,r)}else n.current=null}function Q1(t,e,n){try{n()}catch(r){Yn(t,e,r)}}var Gw=!1;function Jk(t,e){if(R1=$p,t=f3(),yy(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,c=0,g=t,y=null;t:for(;;){for(var m;g!==n||i!==0&&g.nodeType!==3||(a=o+i),g!==s||r!==0&&g.nodeType!==3||(l=o+r),g.nodeType===3&&(o+=g.nodeValue.length),(m=g.firstChild)!==null;)y=g,g=m;for(;;){if(g===t)break t;if(y===n&&++u===i&&(a=o),y===s&&++c===r&&(l=o),(m=g.nextSibling)!==null)break;g=y,y=g.parentNode}g=m}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(j1={focusedElem:t,selectionRange:n},$p=!1,We=e;We!==null;)if(e=We,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,We=t;else for(;We!==null;){e=We;try{var N=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(N!==null){var A=N.memoizedProps,C=N.memoizedState,_=e.stateNode,k=_.getSnapshotBeforeUpdate(e.elementType===e.type?A:Vs(e.type,A),C);_.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var R=e.stateNode.containerInfo;R.nodeType===1?R.textContent="":R.nodeType===9&&R.documentElement&&R.removeChild(R.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Oe(163))}}catch(D){Yn(e,e.return,D)}if(t=e.sibling,t!==null){t.return=e.return,We=t;break}We=e.return}return N=Gw,Gw=!1,N}function td(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Q1(e,n,s)}i=i.next}while(i!==r)}}function $m(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function J1(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function u6(t){var e=t.alternate;e!==null&&(t.alternate=null,u6(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[wo],delete e[Nd],delete e[F1],delete e[Rk],delete e[jk])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function c6(t){return t.tag===5||t.tag===3||t.tag===4}function Kw(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||c6(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function X1(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Yp));else if(r!==4&&(t=t.child,t!==null))for(X1(t,e,n),t=t.sibling;t!==null;)X1(t,e,n),t=t.sibling}function Z1(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Z1(t,e,n),t=t.sibling;t!==null;)Z1(t,e,n),t=t.sibling}var Dr=null,Bs=!1;function za(t,e,n){for(n=n.child;n!==null;)h6(t,e,n),n=n.sibling}function h6(t,e,n){if(No&&typeof No.onCommitFiberUnmount=="function")try{No.onCommitFiberUnmount(Mm,n)}catch{}switch(n.tag){case 5:ni||fc(n,e);case 6:var r=Dr,i=Bs;Dr=null,za(t,e,n),Dr=r,Bs=i,Dr!==null&&(Bs?(t=Dr,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Dr.removeChild(n.stateNode));break;case 18:Dr!==null&&(Bs?(t=Dr,n=n.stateNode,t.nodeType===8?u0(t.parentNode,n):t.nodeType===1&&u0(t,n),vd(t)):u0(Dr,n.stateNode));break;case 4:r=Dr,i=Bs,Dr=n.stateNode.containerInfo,Bs=!0,za(t,e,n),Dr=r,Bs=i;break;case 0:case 11:case 14:case 15:if(!ni&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Q1(n,e,o),i=i.next}while(i!==r)}za(t,e,n);break;case 1:if(!ni&&(fc(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Yn(n,e,a)}za(t,e,n);break;case 21:za(t,e,n);break;case 22:n.mode&1?(ni=(r=ni)||n.memoizedState!==null,za(t,e,n),ni=r):za(t,e,n);break;default:za(t,e,n)}}function Yw(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Qk),e.forEach(function(r){var i=o8.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Ms(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Dr=a.stateNode,Bs=!1;break e;case 3:Dr=a.stateNode.containerInfo,Bs=!0;break e;case 4:Dr=a.stateNode.containerInfo,Bs=!0;break e}a=a.return}if(Dr===null)throw Error(Oe(160));h6(s,o,i),Dr=null,Bs=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){Yn(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)d6(e,t),e=e.sibling}function d6(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Ms(e,t),po(t),r&4){try{td(3,t,t.return),$m(3,t)}catch(A){Yn(t,t.return,A)}try{td(5,t,t.return)}catch(A){Yn(t,t.return,A)}}break;case 1:Ms(e,t),po(t),r&512&&n!==null&&fc(n,n.return);break;case 5:if(Ms(e,t),po(t),r&512&&n!==null&&fc(n,n.return),t.flags&32){var i=t.stateNode;try{pd(i,"")}catch(A){Yn(t,t.return,A)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&j4(i,s),N1(a,o);var u=N1(a,s);for(o=0;o<l.length;o+=2){var c=l[o],g=l[o+1];c==="style"?U4(i,g):c==="dangerouslySetInnerHTML"?F4(i,g):c==="children"?pd(i,g):iy(i,c,g,u)}switch(a){case"input":v1(i,s);break;case"textarea":D4(i,s);break;case"select":var y=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var m=s.value;m!=null?yc(i,!!s.multiple,m,!1):y!==!!s.multiple&&(s.defaultValue!=null?yc(i,!!s.multiple,s.defaultValue,!0):yc(i,!!s.multiple,s.multiple?[]:"",!1))}i[Nd]=s}catch(A){Yn(t,t.return,A)}}break;case 6:if(Ms(e,t),po(t),r&4){if(t.stateNode===null)throw Error(Oe(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(A){Yn(t,t.return,A)}}break;case 3:if(Ms(e,t),po(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{vd(e.containerInfo)}catch(A){Yn(t,t.return,A)}break;case 4:Ms(e,t),po(t);break;case 13:Ms(e,t),po(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Fy=sr())),r&4&&Yw(t);break;case 22:if(c=n!==null&&n.memoizedState!==null,t.mode&1?(ni=(u=ni)||c,Ms(e,t),ni=u):Ms(e,t),po(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!c&&t.mode&1)for(We=t,c=t.child;c!==null;){for(g=We=c;We!==null;){switch(y=We,m=y.child,y.tag){case 0:case 11:case 14:case 15:td(4,y,y.return);break;case 1:fc(y,y.return);var N=y.stateNode;if(typeof N.componentWillUnmount=="function"){r=y,n=y.return;try{e=r,N.props=e.memoizedProps,N.state=e.memoizedState,N.componentWillUnmount()}catch(A){Yn(r,n,A)}}break;case 5:fc(y,y.return);break;case 22:if(y.memoizedState!==null){Jw(g);continue}}m!==null?(m.return=y,We=m):Jw(g)}c=c.sibling}e:for(c=null,g=t;;){if(g.tag===5){if(c===null){c=g;try{i=g.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=g.stateNode,l=g.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=M4("display",o))}catch(A){Yn(t,t.return,A)}}}else if(g.tag===6){if(c===null)try{g.stateNode.nodeValue=u?"":g.memoizedProps}catch(A){Yn(t,t.return,A)}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===t)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===t)break e;for(;g.sibling===null;){if(g.return===null||g.return===t)break e;c===g&&(c=null),g=g.return}c===g&&(c=null),g.sibling.return=g.return,g=g.sibling}}break;case 19:Ms(e,t),po(t),r&4&&Yw(t);break;case 21:break;default:Ms(e,t),po(t)}}function po(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(c6(n)){var r=n;break e}n=n.return}throw Error(Oe(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(pd(i,""),r.flags&=-33);var s=Kw(t);Z1(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=Kw(t);X1(t,a,o);break;default:throw Error(Oe(161))}}catch(l){Yn(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Xk(t,e,n){We=t,f6(t)}function f6(t,e,n){for(var r=(t.mode&1)!==0;We!==null;){var i=We,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Yf;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||ni;a=Yf;var u=ni;if(Yf=o,(ni=l)&&!u)for(We=i;We!==null;)o=We,l=o.child,o.tag===22&&o.memoizedState!==null?Xw(i):l!==null?(l.return=o,We=l):Xw(i);for(;s!==null;)We=s,f6(s),s=s.sibling;We=i,Yf=a,ni=u}Qw(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,We=s):Qw(t)}}function Qw(t){for(;We!==null;){var e=We;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ni||$m(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!ni)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Vs(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&jw(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}jw(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var g=c.dehydrated;g!==null&&vd(g)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Oe(163))}ni||e.flags&512&&J1(e)}catch(y){Yn(e,e.return,y)}}if(e===t){We=null;break}if(n=e.sibling,n!==null){n.return=e.return,We=n;break}We=e.return}}function Jw(t){for(;We!==null;){var e=We;if(e===t){We=null;break}var n=e.sibling;if(n!==null){n.return=e.return,We=n;break}We=e.return}}function Xw(t){for(;We!==null;){var e=We;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{$m(4,e)}catch(l){Yn(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Yn(e,i,l)}}var s=e.return;try{J1(e)}catch(l){Yn(e,s,l)}break;case 5:var o=e.return;try{J1(e)}catch(l){Yn(e,o,l)}}}catch(l){Yn(e,e.return,l)}if(e===t){We=null;break}var a=e.sibling;if(a!==null){a.return=e.return,We=a;break}We=e.return}}var Zk=Math.ceil,om=va.ReactCurrentDispatcher,Dy=va.ReactCurrentOwner,Ss=va.ReactCurrentBatchConfig,Yt=0,kr=null,dr=null,Ur=0,Xi=0,pc=El(0),_r=0,kd=null,hu=0,Gm=0,Oy=0,nd=null,Ii=null,Fy=0,Mc=1/0,Ko=null,am=!1,e2=null,dl=null,Qf=!1,nl=null,lm=0,rd=0,t2=null,Np=-1,Sp=0;function yi(){return Yt&6?sr():Np!==-1?Np:Np=sr()}function fl(t){return t.mode&1?Yt&2&&Ur!==0?Ur&-Ur:Ok.transition!==null?(Sp===0&&(Sp=J4()),Sp):(t=ln,t!==0||(t=window.event,t=t===void 0?16:i3(t.type)),t):1}function Hs(t,e,n,r){if(50<rd)throw rd=0,t2=null,Error(Oe(185));Kd(t,n,r),(!(Yt&2)||t!==kr)&&(t===kr&&(!(Yt&2)&&(Gm|=n),_r===4&&Ya(t,Ur)),ji(t,r),n===1&&Yt===0&&!(e.mode&1)&&(Mc=sr()+500,qm&&Tl()))}function ji(t,e){var n=t.callbackNode;OI(t,e);var r=Wp(t,t===kr?Ur:0);if(r===0)n!==null&&aw(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&aw(n),e===1)t.tag===0?Dk(Zw.bind(null,t)):N3(Zw.bind(null,t)),Ck(function(){!(Yt&6)&&Tl()}),n=null;else{switch(X4(r)){case 1:n=uy;break;case 4:n=Y4;break;case 16:n=Hp;break;case 536870912:n=Q4;break;default:n=Hp}n=_6(n,p6.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function p6(t,e){if(Np=-1,Sp=0,Yt&6)throw Error(Oe(327));var n=t.callbackNode;if(bc()&&t.callbackNode!==n)return null;var r=Wp(t,t===kr?Ur:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=um(t,r);else{e=r;var i=Yt;Yt|=2;var s=g6();(kr!==t||Ur!==e)&&(Ko=null,Mc=sr()+500,ru(t,e));do try{n8();break}catch(a){m6(t,a)}while(!0);by(),om.current=s,Yt=i,dr!==null?e=0:(kr=null,Ur=0,e=_r)}if(e!==0){if(e===2&&(i=I1(t),i!==0&&(r=i,e=n2(t,i))),e===1)throw n=kd,ru(t,0),Ya(t,r),ji(t,sr()),n;if(e===6)Ya(t,r);else{if(i=t.current.alternate,!(r&30)&&!e8(i)&&(e=um(t,r),e===2&&(s=I1(t),s!==0&&(r=s,e=n2(t,s))),e===1))throw n=kd,ru(t,0),Ya(t,r),ji(t,sr()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(Oe(345));case 2:Kl(t,Ii,Ko);break;case 3:if(Ya(t,r),(r&130023424)===r&&(e=Fy+500-sr(),10<e)){if(Wp(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){yi(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=O1(Kl.bind(null,t,Ii,Ko),e);break}Kl(t,Ii,Ko);break;case 4:if(Ya(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-qs(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=sr()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Zk(r/1960))-r,10<r){t.timeoutHandle=O1(Kl.bind(null,t,Ii,Ko),r);break}Kl(t,Ii,Ko);break;case 5:Kl(t,Ii,Ko);break;default:throw Error(Oe(329))}}}return ji(t,sr()),t.callbackNode===n?p6.bind(null,t):null}function n2(t,e){var n=nd;return t.current.memoizedState.isDehydrated&&(ru(t,e).flags|=256),t=um(t,e),t!==2&&(e=Ii,Ii=n,e!==null&&r2(e)),t}function r2(t){Ii===null?Ii=t:Ii.push.apply(Ii,t)}function e8(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!$s(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ya(t,e){for(e&=~Oy,e&=~Gm,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-qs(e),r=1<<n;t[n]=-1,e&=~r}}function Zw(t){if(Yt&6)throw Error(Oe(327));bc();var e=Wp(t,0);if(!(e&1))return ji(t,sr()),null;var n=um(t,e);if(t.tag!==0&&n===2){var r=I1(t);r!==0&&(e=r,n=n2(t,r))}if(n===1)throw n=kd,ru(t,0),Ya(t,e),ji(t,sr()),n;if(n===6)throw Error(Oe(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Kl(t,Ii,Ko),ji(t,sr()),null}function My(t,e){var n=Yt;Yt|=1;try{return t(e)}finally{Yt=n,Yt===0&&(Mc=sr()+500,qm&&Tl())}}function du(t){nl!==null&&nl.tag===0&&!(Yt&6)&&bc();var e=Yt;Yt|=1;var n=Ss.transition,r=ln;try{if(Ss.transition=null,ln=1,t)return t()}finally{ln=r,Ss.transition=n,Yt=e,!(Yt&6)&&Tl()}}function Uy(){Xi=pc.current,In(pc)}function ru(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Pk(n)),dr!==null)for(n=dr.return;n!==null;){var r=n;switch(wy(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Qp();break;case 3:Oc(),In(Li),In(oi),Iy();break;case 5:Ty(r);break;case 4:Oc();break;case 13:In(Un);break;case 19:In(Un);break;case 10:Ny(r.type._context);break;case 22:case 23:Uy()}n=n.return}if(kr=t,dr=t=pl(t.current,null),Ur=Xi=e,_r=0,kd=null,Oy=Gm=hu=0,Ii=nd=null,Zl!==null){for(e=0;e<Zl.length;e++)if(n=Zl[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Zl=null}return t}function m6(t,e){do{var n=dr;try{if(by(),xp.current=sm,im){for(var r=Vn.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}im=!1}if(cu=0,Tr=xr=Vn=null,ed=!1,Ed=0,Dy.current=null,n===null||n.return===null){_r=1,kd=e,dr=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=Ur,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=a,g=c.tag;if(!(c.mode&1)&&(g===0||g===11||g===15)){var y=c.alternate;y?(c.updateQueue=y.updateQueue,c.memoizedState=y.memoizedState,c.lanes=y.lanes):(c.updateQueue=null,c.memoizedState=null)}var m=Vw(o);if(m!==null){m.flags&=-257,Bw(m,o,a,s,e),m.mode&1&&Uw(s,u,e),e=m,l=u;var N=e.updateQueue;if(N===null){var A=new Set;A.add(l),e.updateQueue=A}else N.add(l);break e}else{if(!(e&1)){Uw(s,u,e),Vy();break e}l=Error(Oe(426))}}else if(Ln&&a.mode&1){var C=Vw(o);if(C!==null){!(C.flags&65536)&&(C.flags|=256),Bw(C,o,a,s,e),xy(Fc(l,a));break e}}s=l=Fc(l,a),_r!==4&&(_r=2),nd===null?nd=[s]:nd.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var _=X3(s,l,e);Rw(s,_);break e;case 1:a=l;var k=s.type,R=s.stateNode;if(!(s.flags&128)&&(typeof k.getDerivedStateFromError=="function"||R!==null&&typeof R.componentDidCatch=="function"&&(dl===null||!dl.has(R)))){s.flags|=65536,e&=-e,s.lanes|=e;var D=Z3(s,a,e);Rw(s,D);break e}}s=s.return}while(s!==null)}v6(n)}catch(z){e=z,dr===n&&n!==null&&(dr=n=n.return);continue}break}while(!0)}function g6(){var t=om.current;return om.current=sm,t===null?sm:t}function Vy(){(_r===0||_r===3||_r===2)&&(_r=4),kr===null||!(hu&268435455)&&!(Gm&268435455)||Ya(kr,Ur)}function um(t,e){var n=Yt;Yt|=2;var r=g6();(kr!==t||Ur!==e)&&(Ko=null,ru(t,e));do try{t8();break}catch(i){m6(t,i)}while(!0);if(by(),Yt=n,om.current=r,dr!==null)throw Error(Oe(261));return kr=null,Ur=0,_r}function t8(){for(;dr!==null;)y6(dr)}function n8(){for(;dr!==null&&!TI();)y6(dr)}function y6(t){var e=x6(t.alternate,t,Xi);t.memoizedProps=t.pendingProps,e===null?v6(t):dr=e,Dy.current=null}function v6(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Yk(n,e),n!==null){n.flags&=32767,dr=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{_r=6,dr=null;return}}else if(n=Kk(n,e,Xi),n!==null){dr=n;return}if(e=e.sibling,e!==null){dr=e;return}dr=e=t}while(e!==null);_r===0&&(_r=5)}function Kl(t,e,n){var r=ln,i=Ss.transition;try{Ss.transition=null,ln=1,r8(t,e,n,r)}finally{Ss.transition=i,ln=r}return null}function r8(t,e,n,r){do bc();while(nl!==null);if(Yt&6)throw Error(Oe(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Oe(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(FI(t,s),t===kr&&(dr=kr=null,Ur=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Qf||(Qf=!0,_6(Hp,function(){return bc(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Ss.transition,Ss.transition=null;var o=ln;ln=1;var a=Yt;Yt|=4,Dy.current=null,Jk(t,n),d6(n,t),Nk(j1),$p=!!R1,j1=R1=null,t.current=n,Xk(n),II(),Yt=a,ln=o,Ss.transition=s}else t.current=n;if(Qf&&(Qf=!1,nl=t,lm=i),s=t.pendingLanes,s===0&&(dl=null),CI(n.stateNode),ji(t,sr()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(am)throw am=!1,t=e2,e2=null,t;return lm&1&&t.tag!==0&&bc(),s=t.pendingLanes,s&1?t===t2?rd++:(rd=0,t2=t):rd=0,Tl(),null}function bc(){if(nl!==null){var t=X4(lm),e=Ss.transition,n=ln;try{if(Ss.transition=null,ln=16>t?16:t,nl===null)var r=!1;else{if(t=nl,nl=null,lm=0,Yt&6)throw Error(Oe(331));var i=Yt;for(Yt|=4,We=t.current;We!==null;){var s=We,o=s.child;if(We.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(We=u;We!==null;){var c=We;switch(c.tag){case 0:case 11:case 15:td(8,c,s)}var g=c.child;if(g!==null)g.return=c,We=g;else for(;We!==null;){c=We;var y=c.sibling,m=c.return;if(u6(c),c===u){We=null;break}if(y!==null){y.return=m,We=y;break}We=m}}}var N=s.alternate;if(N!==null){var A=N.child;if(A!==null){N.child=null;do{var C=A.sibling;A.sibling=null,A=C}while(A!==null)}}We=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,We=o;else e:for(;We!==null;){if(s=We,s.flags&2048)switch(s.tag){case 0:case 11:case 15:td(9,s,s.return)}var _=s.sibling;if(_!==null){_.return=s.return,We=_;break e}We=s.return}}var k=t.current;for(We=k;We!==null;){o=We;var R=o.child;if(o.subtreeFlags&2064&&R!==null)R.return=o,We=R;else e:for(o=k;We!==null;){if(a=We,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:$m(9,a)}}catch(z){Yn(a,a.return,z)}if(a===o){We=null;break e}var D=a.sibling;if(D!==null){D.return=a.return,We=D;break e}We=a.return}}if(Yt=i,Tl(),No&&typeof No.onPostCommitFiberRoot=="function")try{No.onPostCommitFiberRoot(Mm,t)}catch{}r=!0}return r}finally{ln=n,Ss.transition=e}}return!1}function ex(t,e,n){e=Fc(n,e),e=X3(t,e,1),t=hl(t,e,1),e=yi(),t!==null&&(Kd(t,1,e),ji(t,e))}function Yn(t,e,n){if(t.tag===3)ex(t,t,n);else for(;e!==null;){if(e.tag===3){ex(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(dl===null||!dl.has(r))){t=Fc(n,t),t=Z3(e,t,1),e=hl(e,t,1),t=yi(),e!==null&&(Kd(e,1,t),ji(e,t));break}}e=e.return}}function i8(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=yi(),t.pingedLanes|=t.suspendedLanes&n,kr===t&&(Ur&n)===n&&(_r===4||_r===3&&(Ur&130023424)===Ur&&500>sr()-Fy?ru(t,0):Oy|=n),ji(t,e)}function w6(t,e){e===0&&(t.mode&1?(e=Vf,Vf<<=1,!(Vf&130023424)&&(Vf=4194304)):e=1);var n=yi();t=ha(t,e),t!==null&&(Kd(t,e,n),ji(t,n))}function s8(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),w6(t,n)}function o8(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Oe(314))}r!==null&&r.delete(e),w6(t,n)}var x6;x6=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Li.current)Pi=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Pi=!1,Gk(t,e,n);Pi=!!(t.flags&131072)}else Pi=!1,Ln&&e.flags&1048576&&S3(e,Zp,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;bp(t,e),t=e.pendingProps;var i=Rc(e,oi.current);_c(e,n),i=Py(null,e,r,t,i,n);var s=Cy();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ri(r)?(s=!0,Jp(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Ay(e),i.updater=Wm,e.stateNode=i,i._reactInternals=e,q1(e,r,t,n),e=$1(null,e,r,!0,s,n)):(e.tag=0,Ln&&s&&vy(e),mi(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(bp(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=l8(r),t=Vs(r,t),i){case 0:e=W1(null,e,r,t,n);break e;case 1:e=Hw(null,e,r,t,n);break e;case 11:e=zw(null,e,r,t,n);break e;case 14:e=qw(null,e,r,Vs(r.type,t),n);break e}throw Error(Oe(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Vs(r,i),W1(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Vs(r,i),Hw(t,e,r,i,n);case 3:e:{if(r6(e),t===null)throw Error(Oe(387));r=e.pendingProps,s=e.memoizedState,i=s.element,P3(t,e),nm(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Fc(Error(Oe(423)),e),e=Ww(t,e,r,n,i);break e}else if(r!==i){i=Fc(Error(Oe(424)),e),e=Ww(t,e,r,n,i);break e}else for(Zi=cl(e.stateNode.containerInfo.firstChild),rs=e,Ln=!0,zs=null,n=I3(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(jc(),r===i){e=da(t,e,n);break e}mi(t,e,r,n)}e=e.child}return e;case 5:return C3(e),t===null&&V1(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,D1(r,i)?o=null:s!==null&&D1(r,s)&&(e.flags|=32),n6(t,e),mi(t,e,o,n),e.child;case 6:return t===null&&V1(e),null;case 13:return i6(t,e,n);case 4:return Ey(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Dc(e,null,r,n):mi(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Vs(r,i),zw(t,e,r,i,n);case 7:return mi(t,e,e.pendingProps,n),e.child;case 8:return mi(t,e,e.pendingProps.children,n),e.child;case 12:return mi(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,bn(em,r._currentValue),r._currentValue=o,s!==null)if($s(s.value,o)){if(s.children===i.children&&!Li.current){e=da(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=ia(-1,n&-n),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),B1(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(Oe(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),B1(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}mi(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,_c(e,n),i=As(i),r=r(i),e.flags|=1,mi(t,e,r,n),e.child;case 14:return r=e.type,i=Vs(r,e.pendingProps),i=Vs(r.type,i),qw(t,e,r,i,n);case 15:return e6(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Vs(r,i),bp(t,e),e.tag=1,Ri(r)?(t=!0,Jp(e)):t=!1,_c(e,n),J3(e,r,i),q1(e,r,i,n),$1(null,e,r,!0,t,n);case 19:return s6(t,e,n);case 22:return t6(t,e,n)}throw Error(Oe(156,e.tag))};function _6(t,e){return K4(t,e)}function a8(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ns(t,e,n,r){return new a8(t,e,n,r)}function By(t){return t=t.prototype,!(!t||!t.isReactComponent)}function l8(t){if(typeof t=="function")return By(t)?1:0;if(t!=null){if(t=t.$$typeof,t===oy)return 11;if(t===ay)return 14}return 2}function pl(t,e){var n=t.alternate;return n===null?(n=Ns(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Ap(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")By(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case ic:return iu(n.children,i,s,e);case sy:o=8,i|=8;break;case f1:return t=Ns(12,n,e,i|2),t.elementType=f1,t.lanes=s,t;case p1:return t=Ns(13,n,e,i),t.elementType=p1,t.lanes=s,t;case m1:return t=Ns(19,n,e,i),t.elementType=m1,t.lanes=s,t;case C4:return Km(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case k4:o=10;break e;case P4:o=9;break e;case oy:o=11;break e;case ay:o=14;break e;case $a:o=16,r=null;break e}throw Error(Oe(130,t==null?t:typeof t,""))}return e=Ns(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function iu(t,e,n,r){return t=Ns(7,t,r,e),t.lanes=n,t}function Km(t,e,n,r){return t=Ns(22,t,r,e),t.elementType=C4,t.lanes=n,t.stateNode={isHidden:!1},t}function y0(t,e,n){return t=Ns(6,t,null,e),t.lanes=n,t}function v0(t,e,n){return e=Ns(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function u8(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Xg(0),this.expirationTimes=Xg(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Xg(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function zy(t,e,n,r,i,s,o,a,l){return t=new u8(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Ns(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ay(s),t}function c8(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:rc,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function b6(t){if(!t)return wl;t=t._reactInternals;e:{if(Eu(t)!==t||t.tag!==1)throw Error(Oe(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ri(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Oe(171))}if(t.tag===1){var n=t.type;if(Ri(n))return b3(t,n,e)}return e}function N6(t,e,n,r,i,s,o,a,l){return t=zy(n,r,!0,t,i,s,o,a,l),t.context=b6(null),n=t.current,r=yi(),i=fl(n),s=ia(r,i),s.callback=e??null,hl(n,s,i),t.current.lanes=i,Kd(t,i,r),ji(t,r),t}function Ym(t,e,n,r){var i=e.current,s=yi(),o=fl(i);return n=b6(n),e.context===null?e.context=n:e.pendingContext=n,e=ia(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=hl(i,e,o),t!==null&&(Hs(t,i,o,s),wp(t,i,o)),o}function cm(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function tx(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function qy(t,e){tx(t,e),(t=t.alternate)&&tx(t,e)}function h8(){return null}var S6=typeof reportError=="function"?reportError:function(t){console.error(t)};function Hy(t){this._internalRoot=t}Qm.prototype.render=Hy.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Oe(409));Ym(t,e,null,null)};Qm.prototype.unmount=Hy.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;du(function(){Ym(null,t,null,null)}),e[ca]=null}};function Qm(t){this._internalRoot=t}Qm.prototype.unstable_scheduleHydration=function(t){if(t){var e=t3();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ka.length&&e!==0&&e<Ka[n].priority;n++);Ka.splice(n,0,t),n===0&&r3(t)}};function Wy(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Jm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function nx(){}function d8(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=cm(o);s.call(u)}}var o=N6(e,r,t,0,null,!1,!1,"",nx);return t._reactRootContainer=o,t[ca]=o.current,_d(t.nodeType===8?t.parentNode:t),du(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var u=cm(l);a.call(u)}}var l=zy(t,0,!1,null,null,!1,!1,"",nx);return t._reactRootContainer=l,t[ca]=l.current,_d(t.nodeType===8?t.parentNode:t),du(function(){Ym(e,l,n,r)}),l}function Xm(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=cm(o);a.call(l)}}Ym(e,o,t,i)}else o=d8(n,e,t,i,r);return cm(o)}Z4=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Bh(e.pendingLanes);n!==0&&(cy(e,n|1),ji(e,sr()),!(Yt&6)&&(Mc=sr()+500,Tl()))}break;case 13:du(function(){var r=ha(t,1);if(r!==null){var i=yi();Hs(r,t,1,i)}}),qy(t,1)}};hy=function(t){if(t.tag===13){var e=ha(t,134217728);if(e!==null){var n=yi();Hs(e,t,134217728,n)}qy(t,134217728)}};e3=function(t){if(t.tag===13){var e=fl(t),n=ha(t,e);if(n!==null){var r=yi();Hs(n,t,e,r)}qy(t,e)}};t3=function(){return ln};n3=function(t,e){var n=ln;try{return ln=t,e()}finally{ln=n}};A1=function(t,e,n){switch(e){case"input":if(v1(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=zm(r);if(!i)throw Error(Oe(90));R4(r),v1(r,i)}}}break;case"textarea":D4(t,n);break;case"select":e=n.value,e!=null&&yc(t,!!n.multiple,e,!1)}};z4=My;q4=du;var f8={usingClientEntryPoint:!1,Events:[Qd,lc,zm,V4,B4,My]},jh={findFiberByHostInstance:Xl,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},p8={bundleType:jh.bundleType,version:jh.version,rendererPackageName:jh.rendererPackageName,rendererConfig:jh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:va.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=$4(t),t===null?null:t.stateNode},findFiberByHostInstance:jh.findFiberByHostInstance||h8,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Jf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Jf.isDisabled&&Jf.supportsFiber)try{Mm=Jf.inject(p8),No=Jf}catch{}}ss.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=f8;ss.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Wy(e))throw Error(Oe(200));return c8(t,e,null,n)};ss.createRoot=function(t,e){if(!Wy(t))throw Error(Oe(299));var n=!1,r="",i=S6;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=zy(t,1,!1,null,null,n,!1,r,i),t[ca]=e.current,_d(t.nodeType===8?t.parentNode:t),new Hy(e)};ss.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Oe(188)):(t=Object.keys(t).join(","),Error(Oe(268,t)));return t=$4(e),t=t===null?null:t.stateNode,t};ss.flushSync=function(t){return du(t)};ss.hydrate=function(t,e,n){if(!Jm(e))throw Error(Oe(200));return Xm(null,t,e,!0,n)};ss.hydrateRoot=function(t,e,n){if(!Wy(t))throw Error(Oe(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=S6;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=N6(e,null,t,1,n??null,i,!1,s,o),t[ca]=e.current,_d(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Qm(e)};ss.render=function(t,e,n){if(!Jm(e))throw Error(Oe(200));return Xm(null,t,e,!1,n)};ss.unmountComponentAtNode=function(t){if(!Jm(t))throw Error(Oe(40));return t._reactRootContainer?(du(function(){Xm(null,null,t,!1,function(){t._reactRootContainer=null,t[ca]=null})}),!0):!1};ss.unstable_batchedUpdates=My;ss.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Jm(n))throw Error(Oe(200));if(t==null||t._reactInternals===void 0)throw Error(Oe(38));return Xm(t,e,n,!1,r)};ss.version="18.3.1-next-f1338f8080-20240426";function A6(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(A6)}catch(t){console.error(t)}}A6(),A4.exports=ss;var m8=A4.exports,E6,rx=m8;E6=rx.createRoot,rx.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Pd(){return Pd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Pd.apply(this,arguments)}var rl;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(rl||(rl={}));const ix="popstate";function g8(t){t===void 0&&(t={});function e(i,s){let{pathname:o="/",search:a="",hash:l=""}=Tu(i.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),i2("",{pathname:o,search:a,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(i,s){let o=i.document.querySelector("base"),a="";if(o&&o.getAttribute("href")){let l=i.location.href,u=l.indexOf("#");a=u===-1?l:l.slice(0,u)}return a+"#"+(typeof s=="string"?s:hm(s))}function r(i,s){Zm(i.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(s)+")")}return v8(e,n,r,t)}function ur(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Zm(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function y8(){return Math.random().toString(36).substr(2,8)}function sx(t,e){return{usr:t.state,key:t.key,idx:e}}function i2(t,e,n,r){return n===void 0&&(n=null),Pd({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Tu(e):e,{state:n,key:e&&e.key||r||y8()})}function hm(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Tu(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function v8(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=rl.Pop,l=null,u=c();u==null&&(u=0,o.replaceState(Pd({},o.state,{idx:u}),""));function c(){return(o.state||{idx:null}).idx}function g(){a=rl.Pop;let C=c(),_=C==null?null:C-u;u=C,l&&l({action:a,location:A.location,delta:_})}function y(C,_){a=rl.Push;let k=i2(A.location,C,_);n&&n(k,C),u=c()+1;let R=sx(k,u),D=A.createHref(k);try{o.pushState(R,"",D)}catch(z){if(z instanceof DOMException&&z.name==="DataCloneError")throw z;i.location.assign(D)}s&&l&&l({action:a,location:A.location,delta:1})}function m(C,_){a=rl.Replace;let k=i2(A.location,C,_);n&&n(k,C),u=c();let R=sx(k,u),D=A.createHref(k);o.replaceState(R,"",D),s&&l&&l({action:a,location:A.location,delta:0})}function N(C){let _=i.location.origin!=="null"?i.location.origin:i.location.href,k=typeof C=="string"?C:hm(C);return k=k.replace(/ $/,"%20"),ur(_,"No window.location.(origin|href) available to create URL for href: "+k),new URL(k,_)}let A={get action(){return a},get location(){return t(i,o)},listen(C){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(ix,g),l=C,()=>{i.removeEventListener(ix,g),l=null}},createHref(C){return e(i,C)},createURL:N,encodeLocation(C){let _=N(C);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:y,replace:m,go(C){return o.go(C)}};return A}var ox;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(ox||(ox={}));function w8(t,e,n){return n===void 0&&(n="/"),x8(t,e,n)}function x8(t,e,n,r){let i=typeof e=="string"?Tu(e):e,s=$y(i.pathname||"/",n);if(s==null)return null;let o=T6(t);_8(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let u=R8(s);a=P8(o[l],u)}return a}function T6(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(ur(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let u=ml([r,l.relativePath]),c=n.concat(l);s.children&&s.children.length>0&&(ur(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),T6(s.children,e,c,u)),!(s.path==null&&!s.index)&&e.push({path:u,score:I8(u,s.index),routesMeta:c})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of I6(s.path))i(s,o,l)}),e}function I6(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=I6(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function _8(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:k8(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const b8=/^:[\w-]+$/,N8=3,S8=2,A8=1,E8=10,T8=-2,ax=t=>t==="*";function I8(t,e){let n=t.split("/"),r=n.length;return n.some(ax)&&(r+=T8),e&&(r+=S8),n.filter(i=>!ax(i)).reduce((i,s)=>i+(b8.test(s)?N8:s===""?A8:E8),r)}function k8(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function P8(t,e,n){let{routesMeta:r}=t,i={},s="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],u=a===r.length-1,c=s==="/"?e:e.slice(s.length)||"/",g=C8({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},c),y=l.route;if(!g)return null;Object.assign(i,g.params),o.push({params:i,pathname:ml([s,g.pathname]),pathnameBase:M8(ml([s,g.pathnameBase])),route:y}),g.pathnameBase!=="/"&&(s=ml([s,g.pathnameBase]))}return o}function C8(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=L8(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((u,c,g)=>{let{paramName:y,isOptional:m}=c;if(y==="*"){let A=a[g]||"";o=s.slice(0,s.length-A.length).replace(/(.)\/+$/,"$1")}const N=a[g];return m&&!N?u[y]=void 0:u[y]=(N||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:o,pattern:t}}function L8(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Zm(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function R8(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Zm(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function $y(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const j8=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,D8=t=>j8.test(t);function O8(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Tu(t):t,s;if(n)if(D8(n))s=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),Zm(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+n))}n.startsWith("/")?s=lx(n.substring(1),"/"):s=lx(n,e)}else s=e;return{pathname:s,search:U8(r),hash:V8(i)}}function lx(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function w0(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function F8(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Gy(t,e){let n=F8(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Ky(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=Tu(t):(i=Pd({},t),ur(!i.pathname||!i.pathname.includes("?"),w0("?","pathname","search",i)),ur(!i.pathname||!i.pathname.includes("#"),w0("#","pathname","hash",i)),ur(!i.search||!i.search.includes("#"),w0("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let g=e.length-1;if(!r&&o.startsWith("..")){let y=o.split("/");for(;y[0]==="..";)y.shift(),g-=1;i.pathname=y.join("/")}a=g>=0?e[g]:"/"}let l=O8(i,a),u=o&&o!=="/"&&o.endsWith("/"),c=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||c)&&(l.pathname+="/"),l}const ml=t=>t.join("/").replace(/\/\/+/g,"/"),M8=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),U8=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,V8=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function B8(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const k6=["post","put","patch","delete"];new Set(k6);const z8=["get",...k6];new Set(z8);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Cd(){return Cd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Cd.apply(this,arguments)}const Yy=se.createContext(null),q8=se.createContext(null),Il=se.createContext(null),eg=se.createContext(null),wa=se.createContext({outlet:null,matches:[],isDataRoute:!1}),P6=se.createContext(null);function H8(t,e){let{relative:n}=e===void 0?{}:e;Jc()||ur(!1);let{basename:r,navigator:i}=se.useContext(Il),{hash:s,pathname:o,search:a}=L6(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:ml([r,o])),i.createHref({pathname:l,search:a,hash:s})}function Jc(){return se.useContext(eg)!=null}function Xc(){return Jc()||ur(!1),se.useContext(eg).location}function C6(t){se.useContext(Il).static||se.useLayoutEffect(t)}function ks(){let{isDataRoute:t}=se.useContext(wa);return t?rP():W8()}function W8(){Jc()||ur(!1);let t=se.useContext(Yy),{basename:e,future:n,navigator:r}=se.useContext(Il),{matches:i}=se.useContext(wa),{pathname:s}=Xc(),o=JSON.stringify(Gy(i,n.v7_relativeSplatPath)),a=se.useRef(!1);return C6(()=>{a.current=!0}),se.useCallback(function(u,c){if(c===void 0&&(c={}),!a.current)return;if(typeof u=="number"){r.go(u);return}let g=Ky(u,JSON.parse(o),s,c.relative==="path");t==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:ml([e,g.pathname])),(c.replace?r.replace:r.push)(g,c.state,c)},[e,r,o,s,t])}function tg(){let{matches:t}=se.useContext(wa),e=t[t.length-1];return e?e.params:{}}function L6(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=se.useContext(Il),{matches:i}=se.useContext(wa),{pathname:s}=Xc(),o=JSON.stringify(Gy(i,r.v7_relativeSplatPath));return se.useMemo(()=>Ky(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function $8(t,e){return G8(t,e)}function G8(t,e,n,r){Jc()||ur(!1);let{navigator:i}=se.useContext(Il),{matches:s}=se.useContext(wa),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let u=Xc(),c;if(e){var g;let C=typeof e=="string"?Tu(e):e;l==="/"||(g=C.pathname)!=null&&g.startsWith(l)||ur(!1),c=C}else c=u;let y=c.pathname||"/",m=y;if(l!=="/"){let C=l.replace(/^\//,"").split("/");m="/"+y.replace(/^\//,"").split("/").slice(C.length).join("/")}let N=w8(t,{pathname:m}),A=X8(N&&N.map(C=>Object.assign({},C,{params:Object.assign({},a,C.params),pathname:ml([l,i.encodeLocation?i.encodeLocation(C.pathname).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?l:ml([l,i.encodeLocation?i.encodeLocation(C.pathnameBase).pathname:C.pathnameBase])})),s,n,r);return e&&A?se.createElement(eg.Provider,{value:{location:Cd({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:rl.Pop}},A):A}function K8(){let t=nP(),e=B8(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return se.createElement(se.Fragment,null,se.createElement("h2",null,"Unexpected Application Error!"),se.createElement("h3",{style:{fontStyle:"italic"}},e),n?se.createElement("pre",{style:i},n):null,null)}const Y8=se.createElement(K8,null);class Q8 extends se.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?se.createElement(wa.Provider,{value:this.props.routeContext},se.createElement(P6.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function J8(t){let{routeContext:e,match:n,children:r}=t,i=se.useContext(Yy);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),se.createElement(wa.Provider,{value:e},r)}function X8(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let c=o.findIndex(g=>g.route.id&&(a==null?void 0:a[g.route.id])!==void 0);c>=0||ur(!1),o=o.slice(0,Math.min(o.length,c+1))}let l=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let c=0;c<o.length;c++){let g=o[c];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(u=c),g.route.id){let{loaderData:y,errors:m}=n,N=g.route.loader&&y[g.route.id]===void 0&&(!m||m[g.route.id]===void 0);if(g.route.lazy||N){l=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((c,g,y)=>{let m,N=!1,A=null,C=null;n&&(m=a&&g.route.id?a[g.route.id]:void 0,A=g.route.errorElement||Y8,l&&(u<0&&y===0?(iP("route-fallback"),N=!0,C=null):u===y&&(N=!0,C=g.route.hydrateFallbackElement||null)));let _=e.concat(o.slice(0,y+1)),k=()=>{let R;return m?R=A:N?R=C:g.route.Component?R=se.createElement(g.route.Component,null):g.route.element?R=g.route.element:R=c,se.createElement(J8,{match:g,routeContext:{outlet:c,matches:_,isDataRoute:n!=null},children:R})};return n&&(g.route.ErrorBoundary||g.route.errorElement||y===0)?se.createElement(Q8,{location:n.location,revalidation:n.revalidation,component:A,error:m,children:k(),routeContext:{outlet:null,matches:_,isDataRoute:!0}}):k()},null)}var R6=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(R6||{}),j6=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(j6||{});function Z8(t){let e=se.useContext(Yy);return e||ur(!1),e}function eP(t){let e=se.useContext(q8);return e||ur(!1),e}function tP(t){let e=se.useContext(wa);return e||ur(!1),e}function D6(t){let e=tP(),n=e.matches[e.matches.length-1];return n.route.id||ur(!1),n.route.id}function nP(){var t;let e=se.useContext(P6),n=eP(),r=D6();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function rP(){let{router:t}=Z8(R6.UseNavigateStable),e=D6(j6.UseNavigateStable),n=se.useRef(!1);return C6(()=>{n.current=!0}),se.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,Cd({fromRouteId:e},s)))},[t,e])}const ux={};function iP(t,e,n){ux[t]||(ux[t]=!0)}function sP(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function oP(t){let{to:e,replace:n,state:r,relative:i}=t;Jc()||ur(!1);let{future:s,static:o}=se.useContext(Il),{matches:a}=se.useContext(wa),{pathname:l}=Xc(),u=ks(),c=Ky(e,Gy(a,s.v7_relativeSplatPath),l,i==="path"),g=JSON.stringify(c);return se.useEffect(()=>u(JSON.parse(g),{replace:n,state:r,relative:i}),[u,g,i,n,r]),null}function Gn(t){ur(!1)}function aP(t){let{basename:e="/",children:n=null,location:r,navigationType:i=rl.Pop,navigator:s,static:o=!1,future:a}=t;Jc()&&ur(!1);let l=e.replace(/^\/*/,"/"),u=se.useMemo(()=>({basename:l,navigator:s,static:o,future:Cd({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof r=="string"&&(r=Tu(r));let{pathname:c="/",search:g="",hash:y="",state:m=null,key:N="default"}=r,A=se.useMemo(()=>{let C=$y(c,l);return C==null?null:{location:{pathname:C,search:g,hash:y,state:m,key:N},navigationType:i}},[l,c,g,y,m,N,i]);return A==null?null:se.createElement(Il.Provider,{value:u},se.createElement(eg.Provider,{children:n,value:A}))}function lP(t){let{children:e,location:n}=t;return $8(s2(e),n)}new Promise(()=>{});function s2(t,e){e===void 0&&(e=[]);let n=[];return se.Children.forEach(t,(r,i)=>{if(!se.isValidElement(r))return;let s=[...e,i];if(r.type===se.Fragment){n.push.apply(n,s2(r.props.children,s));return}r.type!==Gn&&ur(!1),!r.props.index||!r.props.children||ur(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=s2(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function o2(){return o2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},o2.apply(this,arguments)}function uP(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function cP(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function hP(t,e){return t.button===0&&(!e||e==="_self")&&!cP(t)}const dP=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],fP="6";try{window.__reactRouterVersion=fP}catch{}const pP="startTransition",cx=iI[pP];function mP(t){let{basename:e,children:n,future:r,window:i}=t,s=se.useRef();s.current==null&&(s.current=g8({window:i,v5Compat:!0}));let o=s.current,[a,l]=se.useState({action:o.action,location:o.location}),{v7_startTransition:u}=r||{},c=se.useCallback(g=>{u&&cx?cx(()=>l(g)):l(g)},[l,u]);return se.useLayoutEffect(()=>o.listen(c),[o,c]),se.useEffect(()=>sP(r),[r]),se.createElement(aP,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const gP=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",yP=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,hx=se.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:l,to:u,preventScrollReset:c,viewTransition:g}=e,y=uP(e,dP),{basename:m}=se.useContext(Il),N,A=!1;if(typeof u=="string"&&yP.test(u)&&(N=u,gP))try{let R=new URL(window.location.href),D=u.startsWith("//")?new URL(R.protocol+u):new URL(u),z=$y(D.pathname,m);D.origin===R.origin&&z!=null?u=z+D.search+D.hash:A=!0}catch{}let C=H8(u,{relative:i}),_=vP(u,{replace:o,state:a,target:l,preventScrollReset:c,relative:i,viewTransition:g});function k(R){r&&r(R),R.defaultPrevented||_(R)}return se.createElement("a",o2({},y,{href:N||C,onClick:A||s?r:k,ref:n,target:l}))});var dx;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(dx||(dx={}));var fx;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(fx||(fx={}));function vP(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,viewTransition:a}=e===void 0?{}:e,l=ks(),u=Xc(),c=L6(t,{relative:o});return se.useCallback(g=>{if(hP(g,n)){g.preventDefault();let y=r!==void 0?r:hm(u)===hm(c);l(t,{replace:y,state:i,preventScrollReset:s,relative:o,viewTransition:a})}},[u,l,c,r,i,n,t,s,o,a])}var px={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O6=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},wP=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},F6={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,u=l?t[i+2]:0,c=s>>2,g=(s&3)<<4|a>>4;let y=(a&15)<<2|u>>6,m=u&63;l||(m=64,o||(y=64)),r.push(n[c],n[g],n[y],n[m])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(O6(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):wP(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const u=i<t.length?n[t.charAt(i)]:64;++i;const g=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||u==null||g==null)throw new xP;const y=s<<2|a>>4;if(r.push(y),u!==64){const m=a<<4&240|u>>2;if(r.push(m),g!==64){const N=u<<6&192|g;r.push(N)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class xP extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const _P=function(t){const e=O6(t);return F6.encodeByteArray(e,!0)},dm=function(t){return _P(t).replace(/\./g,"")},M6=function(t){try{return F6.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bP(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NP=()=>bP().__FIREBASE_DEFAULTS__,SP=()=>{if(typeof process>"u"||typeof px>"u")return;const t=px.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},AP=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&M6(t[1]);return e&&JSON.parse(e)},ng=()=>{try{return NP()||SP()||AP()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},U6=t=>{var e,n;return(n=(e=ng())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},V6=t=>{const e=U6(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},B6=()=>{var t;return(t=ng())===null||t===void 0?void 0:t.config},z6=t=>{var e;return(e=ng())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EP{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q6(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[dm(JSON.stringify(n)),dm(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ai(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function TP(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ai())}function IP(){var t;const e=(t=ng())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function kP(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function PP(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function CP(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function LP(){const t=ai();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function RP(){return!IP()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function H6(){try{return typeof indexedDB=="object"}catch{return!1}}function W6(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}function jP(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DP="FirebaseError";class Js extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=DP,Object.setPrototypeOf(this,Js.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Iu.prototype.create)}}class Iu{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?OP(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Js(i,a,r)}}function OP(t,e){return t.replace(FP,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const FP=/\{\$([^}]+)}/g;function MP(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ld(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(mx(s)&&mx(o)){if(!Ld(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function mx(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xd(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function qh(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Hh(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function UP(t,e){const n=new VP(t,e);return n.subscribe.bind(n)}class VP{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");BP(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=x0),i.error===void 0&&(i.error=x0),i.complete===void 0&&(i.complete=x0);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function BP(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function x0(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cn(t){return t&&t._delegate?t._delegate:t}class Ts{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yl="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zP{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new EP;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(HP(e))try{this.getOrInitializeService({instanceIdentifier:Yl})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Yl){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Yl){return this.instances.has(e)}getOptions(e=Yl){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:qP(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Yl){return this.component?this.component.multipleInstances?e:Yl:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function qP(t){return t===Yl?void 0:t}function HP(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WP{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new zP(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(qt||(qt={}));const $P={debug:qt.DEBUG,verbose:qt.VERBOSE,info:qt.INFO,warn:qt.WARN,error:qt.ERROR,silent:qt.SILENT},GP=qt.INFO,KP={[qt.DEBUG]:"log",[qt.VERBOSE]:"log",[qt.INFO]:"info",[qt.WARN]:"warn",[qt.ERROR]:"error"},YP=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=KP[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Qy{constructor(e){this.name=e,this._logLevel=GP,this._logHandler=YP,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in qt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?$P[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,qt.DEBUG,...e),this._logHandler(this,qt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,qt.VERBOSE,...e),this._logHandler(this,qt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,qt.INFO,...e),this._logHandler(this,qt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,qt.WARN,...e),this._logHandler(this,qt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,qt.ERROR,...e),this._logHandler(this,qt.ERROR,...e)}}const QP=(t,e)=>e.some(n=>t instanceof n);let gx,yx;function JP(){return gx||(gx=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function XP(){return yx||(yx=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const $6=new WeakMap,a2=new WeakMap,G6=new WeakMap,_0=new WeakMap,Jy=new WeakMap;function ZP(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(sa(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&$6.set(n,t)}).catch(()=>{}),Jy.set(e,t),e}function eC(t){if(a2.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});a2.set(t,e)}let l2={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return a2.get(t);if(e==="objectStoreNames")return t.objectStoreNames||G6.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return sa(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function tC(t){l2=t(l2)}function nC(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(b0(this),e,...n);return G6.set(r,e.sort?e.sort():[e]),sa(r)}:XP().includes(t)?function(...e){return t.apply(b0(this),e),sa($6.get(this))}:function(...e){return sa(t.apply(b0(this),e))}}function rC(t){return typeof t=="function"?nC(t):(t instanceof IDBTransaction&&eC(t),QP(t,JP())?new Proxy(t,l2):t)}function sa(t){if(t instanceof IDBRequest)return ZP(t);if(_0.has(t))return _0.get(t);const e=rC(t);return e!==t&&(_0.set(t,e),Jy.set(e,t)),e}const b0=t=>Jy.get(t);function rg(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=sa(o);return r&&o.addEventListener("upgradeneeded",l=>{r(sa(o.result),l.oldVersion,l.newVersion,sa(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}function N0(t,{blocked:e}={}){const n=indexedDB.deleteDatabase(t);return e&&n.addEventListener("blocked",r=>e(r.oldVersion,r)),sa(n).then(()=>{})}const iC=["get","getKey","getAll","getAllKeys","count"],sC=["put","add","delete","clear"],S0=new Map;function vx(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(S0.get(e))return S0.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=sC.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||iC.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),i&&l.done]))[0]};return S0.set(e,s),s}tC(t=>({...t,get:(e,n,r)=>vx(e,n)||t.get(e,n,r),has:(e,n)=>!!vx(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oC{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(aC(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function aC(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const u2="@firebase/app",wx="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fa=new Qy("@firebase/app"),lC="@firebase/app-compat",uC="@firebase/analytics-compat",cC="@firebase/analytics",hC="@firebase/app-check-compat",dC="@firebase/app-check",fC="@firebase/auth",pC="@firebase/auth-compat",mC="@firebase/database",gC="@firebase/data-connect",yC="@firebase/database-compat",vC="@firebase/functions",wC="@firebase/functions-compat",xC="@firebase/installations",_C="@firebase/installations-compat",bC="@firebase/messaging",NC="@firebase/messaging-compat",SC="@firebase/performance",AC="@firebase/performance-compat",EC="@firebase/remote-config",TC="@firebase/remote-config-compat",IC="@firebase/storage",kC="@firebase/storage-compat",PC="@firebase/firestore",CC="@firebase/vertexai-preview",LC="@firebase/firestore-compat",RC="firebase",jC="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c2="[DEFAULT]",DC={[u2]:"fire-core",[lC]:"fire-core-compat",[cC]:"fire-analytics",[uC]:"fire-analytics-compat",[dC]:"fire-app-check",[hC]:"fire-app-check-compat",[fC]:"fire-auth",[pC]:"fire-auth-compat",[mC]:"fire-rtdb",[gC]:"fire-data-connect",[yC]:"fire-rtdb-compat",[vC]:"fire-fn",[wC]:"fire-fn-compat",[xC]:"fire-iid",[_C]:"fire-iid-compat",[bC]:"fire-fcm",[NC]:"fire-fcm-compat",[SC]:"fire-perf",[AC]:"fire-perf-compat",[EC]:"fire-rc",[TC]:"fire-rc-compat",[IC]:"fire-gcs",[kC]:"fire-gcs-compat",[PC]:"fire-fst",[LC]:"fire-fst-compat",[CC]:"fire-vertex","fire-js":"fire-js",[RC]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fm=new Map,OC=new Map,h2=new Map;function xx(t,e){try{t.container.addComponent(e)}catch(n){fa.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Gs(t){const e=t.name;if(h2.has(e))return fa.debug(`There were multiple attempts to register component ${e}.`),!1;h2.set(e,t);for(const n of fm.values())xx(n,t);for(const n of OC.values())xx(n,t);return!0}function ku(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function xo(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FC={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},gl=new Iu("app","Firebase",FC);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MC{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ts("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw gl.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pu=jC;function K6(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:c2,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw gl.create("bad-app-name",{appName:String(i)});if(n||(n=B6()),!n)throw gl.create("no-options");const s=fm.get(i);if(s){if(Ld(n,s.options)&&Ld(r,s.config))return s;throw gl.create("duplicate-app",{appName:i})}const o=new WP(i);for(const l of h2.values())o.addComponent(l);const a=new MC(n,r,o);return fm.set(i,a),a}function ig(t=c2){const e=fm.get(t);if(!e&&t===c2&&B6())return K6();if(!e)throw gl.create("no-app",{appName:t});return e}function Di(t,e,n){var r;let i=(r=DC[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),fa.warn(a.join(" "));return}Gs(new Ts(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UC="firebase-heartbeat-database",VC=1,Rd="firebase-heartbeat-store";let A0=null;function Y6(){return A0||(A0=rg(UC,VC,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Rd)}catch(n){console.warn(n)}}}}).catch(t=>{throw gl.create("idb-open",{originalErrorMessage:t.message})})),A0}async function BC(t){try{const n=(await Y6()).transaction(Rd),r=await n.objectStore(Rd).get(Q6(t));return await n.done,r}catch(e){if(e instanceof Js)fa.warn(e.message);else{const n=gl.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});fa.warn(n.message)}}}async function _x(t,e){try{const r=(await Y6()).transaction(Rd,"readwrite");await r.objectStore(Rd).put(e,Q6(t)),await r.done}catch(n){if(n instanceof Js)fa.warn(n.message);else{const r=gl.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});fa.warn(r.message)}}}function Q6(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zC=1024,qC=30*24*60*60*1e3;class HC{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new $C(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=bx();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=qC}),this._storage.overwrite(this._heartbeatsCache))}catch(r){fa.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=bx(),{heartbeatsToSend:r,unsentEntries:i}=WC(this._heartbeatsCache.heartbeats),s=dm(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return fa.warn(n),""}}}function bx(){return new Date().toISOString().substring(0,10)}function WC(t,e=zC){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),Nx(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Nx(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class $C{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return H6()?W6().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await BC(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return _x(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return _x(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Nx(t){return dm(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GC(t){Gs(new Ts("platform-logger",e=>new oC(e),"PRIVATE")),Gs(new Ts("heartbeat",e=>new HC(e),"PRIVATE")),Di(u2,wx,t),Di(u2,wx,"esm2017"),Di("fire-js","")}GC("");function Xy(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function J6(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const KC=J6,X6=new Iu("auth","Firebase",J6());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pm=new Qy("@firebase/auth");function YC(t,...e){pm.logLevel<=qt.WARN&&pm.warn(`Auth (${Pu}): ${t}`,...e)}function Ep(t,...e){pm.logLevel<=qt.ERROR&&pm.error(`Auth (${Pu}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ks(t,...e){throw Zy(t,...e)}function Ao(t,...e){return Zy(t,...e)}function Z6(t,e,n){const r=Object.assign(Object.assign({},KC()),{[e]:n});return new Iu("auth","Firebase",r).create(e,{appName:t.name})}function oa(t){return Z6(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Zy(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return X6.create(t,...e)}function mt(t,e,...n){if(!t)throw Zy(e,...n)}function ea(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Ep(e),new Error(e)}function pa(t,e){t||ea(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d2(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function QC(){return Sx()==="http:"||Sx()==="https:"}function Sx(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JC(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(QC()||PP()||"connection"in navigator)?navigator.onLine:!0}function XC(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zd{constructor(e,n){this.shortDelay=e,this.longDelay=n,pa(n>e,"Short delay should be less than long delay!"),this.isMobile=TP()||CP()}get(){return JC()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ev(t,e){pa(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eN{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ea("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ea("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ea("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZC={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eL=new Zd(3e4,6e4);function kl(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function xa(t,e,n,r,i={}){return tN(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=Xd(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const u=Object.assign({method:e,headers:l},s);return kP()||(u.referrerPolicy="no-referrer"),eN.fetch()(nN(t,t.config.apiHost,n,a),u)})}async function tN(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},ZC),e);try{const i=new nL(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Xf(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Xf(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Xf(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Xf(t,"user-disabled",o);const c=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw Z6(t,c,u);Ks(t,c)}}catch(i){if(i instanceof Js)throw i;Ks(t,"network-request-failed",{message:String(i)})}}async function ef(t,e,n,r,i={}){const s=await xa(t,e,n,r,i);return"mfaPendingCredential"in s&&Ks(t,"multi-factor-auth-required",{_serverResponse:s}),s}function nN(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?ev(t.config,i):`${t.config.apiScheme}://${i}`}function tL(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class nL{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Ao(this.auth,"network-request-failed")),eL.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Xf(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Ao(t,e,r);return i.customData._tokenResponse=n,i}function Ax(t){return t!==void 0&&t.enterprise!==void 0}class rL{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return tL(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function iL(t,e){return xa(t,"GET","/v2/recaptchaConfig",kl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sL(t,e){return xa(t,"POST","/v1/accounts:delete",e)}async function rN(t,e){return xa(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function id(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function oL(t,e=!1){const n=cn(t),r=await n.getIdToken(e),i=tv(r);mt(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:id(E0(i.auth_time)),issuedAtTime:id(E0(i.iat)),expirationTime:id(E0(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function E0(t){return Number(t)*1e3}function tv(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Ep("JWT malformed, contained fewer than 3 sections"),null;try{const i=M6(n);return i?JSON.parse(i):(Ep("Failed to decode base64 JWT payload"),null)}catch(i){return Ep("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function Ex(t){const e=tv(t);return mt(e,"internal-error"),mt(typeof e.exp<"u","internal-error"),mt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uc(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Js&&aL(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function aL({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lL{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f2{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=id(this.lastLoginAt),this.creationTime=id(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mm(t){var e;const n=t.auth,r=await t.getIdToken(),i=await Uc(t,rN(n,{idToken:r}));mt(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?iN(s.providerUserInfo):[],a=cL(t.providerData,o),l=t.isAnonymous,u=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),c=l?u:!1,g={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new f2(s.createdAt,s.lastLoginAt),isAnonymous:c};Object.assign(t,g)}async function uL(t){const e=cn(t);await mm(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function cL(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function iN(t){return t.map(e=>{var{providerId:n}=e,r=Xy(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hL(t,e){const n=await tN(t,{},async()=>{const r=Xd({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=nN(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",eN.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function dL(t,e){return xa(t,"POST","/v2/accounts:revokeToken",kl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nc{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){mt(e.idToken,"internal-error"),mt(typeof e.idToken<"u","internal-error"),mt(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Ex(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){mt(e.length!==0,"internal-error");const n=Ex(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(mt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await hL(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new Nc;return r&&(mt(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(mt(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(mt(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Nc,this.toJSON())}_performRefresh(){return ea("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qa(t,e){mt(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class ta{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=Xy(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new lL(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new f2(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Uc(this,this.stsTokenManager.getToken(this.auth,e));return mt(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return oL(this,e)}reload(){return uL(this)}_assign(e){this!==e&&(mt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ta(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){mt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await mm(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(xo(this.auth.app))return Promise.reject(oa(this.auth));const e=await this.getIdToken();return await Uc(this,sL(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,l,u,c;const g=(r=n.displayName)!==null&&r!==void 0?r:void 0,y=(i=n.email)!==null&&i!==void 0?i:void 0,m=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,N=(o=n.photoURL)!==null&&o!==void 0?o:void 0,A=(a=n.tenantId)!==null&&a!==void 0?a:void 0,C=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,_=(u=n.createdAt)!==null&&u!==void 0?u:void 0,k=(c=n.lastLoginAt)!==null&&c!==void 0?c:void 0,{uid:R,emailVerified:D,isAnonymous:z,providerData:Q,stsTokenManager:j}=n;mt(R&&j,e,"internal-error");const E=Nc.fromJSON(this.name,j);mt(typeof R=="string",e,"internal-error"),qa(g,e.name),qa(y,e.name),mt(typeof D=="boolean",e,"internal-error"),mt(typeof z=="boolean",e,"internal-error"),qa(m,e.name),qa(N,e.name),qa(A,e.name),qa(C,e.name),qa(_,e.name),qa(k,e.name);const I=new ta({uid:R,auth:e,email:y,emailVerified:D,displayName:g,isAnonymous:z,photoURL:N,phoneNumber:m,tenantId:A,stsTokenManager:E,createdAt:_,lastLoginAt:k});return Q&&Array.isArray(Q)&&(I.providerData=Q.map(F=>Object.assign({},F))),C&&(I._redirectEventId=C),I}static async _fromIdTokenResponse(e,n,r=!1){const i=new Nc;i.updateFromServerResponse(n);const s=new ta({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await mm(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];mt(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?iN(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new Nc;a.updateFromIdToken(r);const l=new ta({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new f2(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,u),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tx=new Map;function na(t){pa(t instanceof Function,"Expected a class definition");let e=Tx.get(t);return e?(pa(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Tx.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sN{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}sN.type="NONE";const Ix=sN;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tp(t,e,n){return`firebase:${t}:${e}:${n}`}class Sc{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Tp(this.userKey,i.apiKey,s),this.fullPersistenceKey=Tp("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?ta._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Sc(na(Ix),e,r);const i=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=i[0]||na(Ix);const o=Tp(r,e.config.apiKey,e.name);let a=null;for(const u of n)try{const c=await u._get(o);if(c){const g=ta._fromJSON(e,c);u!==s&&(a=g),s=u;break}}catch{}const l=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new Sc(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==s)try{await u._remove(o)}catch{}})),new Sc(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kx(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(uN(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(oN(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(hN(e))return"Blackberry";if(dN(e))return"Webos";if(aN(e))return"Safari";if((e.includes("chrome/")||lN(e))&&!e.includes("edge/"))return"Chrome";if(cN(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function oN(t=ai()){return/firefox\//i.test(t)}function aN(t=ai()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function lN(t=ai()){return/crios\//i.test(t)}function uN(t=ai()){return/iemobile/i.test(t)}function cN(t=ai()){return/android/i.test(t)}function hN(t=ai()){return/blackberry/i.test(t)}function dN(t=ai()){return/webos/i.test(t)}function nv(t=ai()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function fL(t=ai()){var e;return nv(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function pL(){return LP()&&document.documentMode===10}function fN(t=ai()){return nv(t)||cN(t)||dN(t)||hN(t)||/windows phone/i.test(t)||uN(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pN(t,e=[]){let n;switch(t){case"Browser":n=kx(ai());break;case"Worker":n=`${kx(ai())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Pu}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mL{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gL(t,e={}){return xa(t,"GET","/v2/passwordPolicy",kl(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yL=6;class vL{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:yL,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wL{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Px(this),this.idTokenSubscription=new Px(this),this.beforeStateQueue=new mL(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=X6,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=na(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Sc.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await rN(this,{idToken:e}),r=await ta._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(xo(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return mt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await mm(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=XC()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(xo(this.app))return Promise.reject(oa(this));const n=e?cn(e):null;return n&&mt(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&mt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return xo(this.app)?Promise.reject(oa(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return xo(this.app)?Promise.reject(oa(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(na(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await gL(this),n=new vL(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Iu("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await dL(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&na(e)||this._popupRedirectResolver;mt(n,this,"argument-error"),this.redirectPersistenceManager=await Sc.create(this,[na(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(mt(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return mt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=pN(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&YC(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Cu(t){return cn(t)}class Px{constructor(e){this.auth=e,this.observer=null,this.addObserver=UP(n=>this.observer=n)}get next(){return mt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sg={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function xL(t){sg=t}function mN(t){return sg.loadJS(t)}function _L(){return sg.recaptchaEnterpriseScript}function bL(){return sg.gapiScript}function NL(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const SL="recaptcha-enterprise",AL="NO_RECAPTCHA";class EL{constructor(e){this.type=SL,this.auth=Cu(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{iL(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const u=new rL(l);return s.tenantId==null?s._agentRecaptchaConfig=u:s._tenantRecaptchaConfigs[s.tenantId]=u,o(u.siteKey)}}).catch(l=>{a(l)})})}function i(s,o,a){const l=window.grecaptcha;Ax(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(u=>{o(u)}).catch(()=>{o(AL)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&Ax(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=_L();l.length!==0&&(l+=a),mN(l).then(()=>{i(a,s,o)}).catch(u=>{o(u)})}}).catch(a=>{o(a)})})}}async function Cx(t,e,n,r=!1){const i=new EL(t);let s;try{s=await i.verify(n)}catch{s=await i.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function p2(t,e,n,r){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await Cx(t,e,n,n==="getOobCode");return r(t,s)}else return r(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await Cx(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TL(t,e){const n=ku(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(Ld(s,e??{}))return i;Ks(i,"already-initialized")}return n.initialize({options:e})}function IL(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(na);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function kL(t,e,n){const r=Cu(t);mt(r._canInitEmulator,r,"emulator-config-failed"),mt(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=gN(e),{host:o,port:a}=PL(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),CL()}function gN(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function PL(t){const e=gN(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:Lx(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:Lx(o)}}}function Lx(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function CL(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rv{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ea("not implemented")}_getIdTokenResponse(e){return ea("not implemented")}_linkToIdToken(e,n){return ea("not implemented")}_getReauthenticationResolver(e){return ea("not implemented")}}async function LL(t,e){return xa(t,"POST","/v1/accounts:update",e)}async function RL(t,e){return xa(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jL(t,e){return ef(t,"POST","/v1/accounts:signInWithPassword",kl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DL(t,e){return ef(t,"POST","/v1/accounts:signInWithEmailLink",kl(t,e))}async function OL(t,e){return ef(t,"POST","/v1/accounts:signInWithEmailLink",kl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jd extends rv{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new jd(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new jd(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return p2(e,n,"signInWithPassword",jL);case"emailLink":return DL(e,{email:this._email,oobCode:this._password});default:Ks(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return p2(e,r,"signUpPassword",RL);case"emailLink":return OL(e,{idToken:n,email:this._email,oobCode:this._password});default:Ks(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ac(t,e){return ef(t,"POST","/v1/accounts:signInWithIdp",kl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FL="http://localhost";class fu extends rv{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new fu(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Ks("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=Xy(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new fu(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Ac(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Ac(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ac(e,n)}buildRequest(){const e={requestUri:FL,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Xd(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ML(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function UL(t){const e=qh(Hh(t)).link,n=e?qh(Hh(e)).deep_link_id:null,r=qh(Hh(t)).deep_link_id;return(r?qh(Hh(r)).link:null)||r||n||e||t}class iv{constructor(e){var n,r,i,s,o,a;const l=qh(Hh(e)),u=(n=l.apiKey)!==null&&n!==void 0?n:null,c=(r=l.oobCode)!==null&&r!==void 0?r:null,g=ML((i=l.mode)!==null&&i!==void 0?i:null);mt(u&&c&&g,"argument-error"),this.apiKey=u,this.operation=g,this.code=c,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=UL(e);try{return new iv(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc{constructor(){this.providerId=Zc.PROVIDER_ID}static credential(e,n){return jd._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=iv.parseLink(n);return mt(r,"argument-error"),jd._fromEmailAndCode(e,r.code,r.tenantId)}}Zc.PROVIDER_ID="password";Zc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Zc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yN{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tf extends yN{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qa extends tf{constructor(){super("facebook.com")}static credential(e){return fu._fromParams({providerId:Qa.PROVIDER_ID,signInMethod:Qa.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Qa.credentialFromTaggedObject(e)}static credentialFromError(e){return Qa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Qa.credential(e.oauthAccessToken)}catch{return null}}}Qa.FACEBOOK_SIGN_IN_METHOD="facebook.com";Qa.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ja extends tf{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return fu._fromParams({providerId:Ja.PROVIDER_ID,signInMethod:Ja.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Ja.credentialFromTaggedObject(e)}static credentialFromError(e){return Ja.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Ja.credential(n,r)}catch{return null}}}Ja.GOOGLE_SIGN_IN_METHOD="google.com";Ja.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xa extends tf{constructor(){super("github.com")}static credential(e){return fu._fromParams({providerId:Xa.PROVIDER_ID,signInMethod:Xa.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Xa.credentialFromTaggedObject(e)}static credentialFromError(e){return Xa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Xa.credential(e.oauthAccessToken)}catch{return null}}}Xa.GITHUB_SIGN_IN_METHOD="github.com";Xa.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Za extends tf{constructor(){super("twitter.com")}static credential(e,n){return fu._fromParams({providerId:Za.PROVIDER_ID,signInMethod:Za.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Za.credentialFromTaggedObject(e)}static credentialFromError(e){return Za.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Za.credential(n,r)}catch{return null}}}Za.TWITTER_SIGN_IN_METHOD="twitter.com";Za.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VL(t,e){return ef(t,"POST","/v1/accounts:signUp",kl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pu{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await ta._fromIdTokenResponse(e,r,i),o=Rx(r);return new pu({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=Rx(r);return new pu({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function Rx(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gm extends Js{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,gm.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new gm(e,n,r,i)}}function vN(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?gm._fromErrorAndOperation(t,s,e,r):s})}async function BL(t,e,n=!1){const r=await Uc(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return pu._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zL(t,e,n=!1){const{auth:r}=t;if(xo(r.app))return Promise.reject(oa(r));const i="reauthenticate";try{const s=await Uc(t,vN(r,i,e,t),n);mt(s.idToken,r,"internal-error");const o=tv(s.idToken);mt(o,r,"internal-error");const{sub:a}=o;return mt(t.uid===a,r,"user-mismatch"),pu._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Ks(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wN(t,e,n=!1){if(xo(t.app))return Promise.reject(oa(t));const r="signIn",i=await vN(t,r,e),s=await pu._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function qL(t,e){return wN(Cu(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xN(t){const e=Cu(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function _N(t,e,n){if(xo(t.app))return Promise.reject(oa(t));const r=Cu(t),o=await p2(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",VL).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&xN(t),l}),a=await pu._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function HL(t,e,n){return xo(t.app)?Promise.reject(oa(t)):qL(cn(t),Zc.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&xN(t),r})}function WL(t,e){return $L(cn(t),null,e)}async function $L(t,e,n){const{auth:r}=t,s={idToken:await t.getIdToken(),returnSecureToken:!0};n&&(s.password=n);const o=await Uc(t,LL(r,s));await t._updateTokensIfNecessary(o,!0)}function GL(t,e,n,r){return cn(t).onIdTokenChanged(e,n,r)}function KL(t,e,n){return cn(t).beforeAuthStateChanged(e,n)}function Lu(t,e,n,r){return cn(t).onAuthStateChanged(e,n,r)}function YL(t){return cn(t).signOut()}const ym="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bN{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(ym,"1"),this.storage.removeItem(ym),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QL=1e3,JL=10;class NN extends bN{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=fN(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);pL()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,JL):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},QL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}NN.type="LOCAL";const XL=NN;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SN extends bN{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}SN.type="SESSION";const AN=SN;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZL(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class og{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new og(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async u=>u(n.origin,s)),l=await ZL(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}og.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sv(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eR{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const u=sv("",20);i.port1.start();const c=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(g){const y=g;if(y.data.eventId===u)switch(y.data.status){case"ack":clearTimeout(c),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(y.data.response);break;default:clearTimeout(c),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eo(){return window}function tR(t){Eo().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EN(){return typeof Eo().WorkerGlobalScope<"u"&&typeof Eo().importScripts=="function"}async function nR(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function rR(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function iR(){return EN()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TN="firebaseLocalStorageDb",sR=1,vm="firebaseLocalStorage",IN="fbase_key";class nf{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function ag(t,e){return t.transaction([vm],e?"readwrite":"readonly").objectStore(vm)}function oR(){const t=indexedDB.deleteDatabase(TN);return new nf(t).toPromise()}function m2(){const t=indexedDB.open(TN,sR);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(vm,{keyPath:IN})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(vm)?e(r):(r.close(),await oR(),e(await m2()))})})}async function jx(t,e,n){const r=ag(t,!0).put({[IN]:e,value:n});return new nf(r).toPromise()}async function aR(t,e){const n=ag(t,!1).get(e),r=await new nf(n).toPromise();return r===void 0?null:r.value}function Dx(t,e){const n=ag(t,!0).delete(e);return new nf(n).toPromise()}const lR=800,uR=3;class kN{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await m2(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>uR)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return EN()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=og._getInstance(iR()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await nR(),!this.activeServiceWorker)return;this.sender=new eR(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||rR()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await m2();return await jx(e,ym,"1"),await Dx(e,ym),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>jx(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>aR(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Dx(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=ag(i,!1).getAll();return new nf(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),lR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}kN.type="LOCAL";const cR=kN;new Zd(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hR(t,e){return e?na(e):(mt(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ov extends rv{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ac(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ac(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ac(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function dR(t){return wN(t.auth,new ov(t),t.bypassAuthState)}function fR(t){const{auth:e,user:n}=t;return mt(n,e,"internal-error"),zL(n,new ov(t),t.bypassAuthState)}async function pR(t){const{auth:e,user:n}=t;return mt(n,e,"internal-error"),BL(n,new ov(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PN{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return dR;case"linkViaPopup":case"linkViaRedirect":return pR;case"reauthViaPopup":case"reauthViaRedirect":return fR;default:Ks(this.auth,"internal-error")}}resolve(e){pa(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){pa(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mR=new Zd(2e3,1e4);class mc extends PN{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,mc.currentPopupAction&&mc.currentPopupAction.cancel(),mc.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return mt(e,this.auth,"internal-error"),e}async onExecution(){pa(this.filter.length===1,"Popup operations only handle one event");const e=sv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Ao(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Ao(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,mc.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ao(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,mR.get())};e()}}mc.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gR="pendingRedirect",Ip=new Map;class yR extends PN{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Ip.get(this.auth._key());if(!e){try{const r=await vR(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Ip.set(this.auth._key(),e)}return this.bypassAuthState||Ip.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function vR(t,e){const n=_R(e),r=xR(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function wR(t,e){Ip.set(t._key(),e)}function xR(t){return na(t._redirectPersistence)}function _R(t){return Tp(gR,t.config.apiKey,t.name)}async function bR(t,e,n=!1){if(xo(t.app))return Promise.reject(oa(t));const r=Cu(t),i=hR(r,e),o=await new yR(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NR=10*60*1e3;class SR{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!AR(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!CN(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Ao(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=NR&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ox(e))}saveEventToCache(e){this.cachedEventUids.add(Ox(e)),this.lastProcessedEventTime=Date.now()}}function Ox(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function CN({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function AR(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return CN(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ER(t,e={}){return xa(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TR=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,IR=/^https?/;async function kR(t){if(t.config.emulator)return;const{authorizedDomains:e}=await ER(t);for(const n of e)try{if(PR(n))return}catch{}Ks(t,"unauthorized-domain")}function PR(t){const e=d2(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!IR.test(n))return!1;if(TR.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CR=new Zd(3e4,6e4);function Fx(){const t=Eo().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function LR(t){return new Promise((e,n)=>{var r,i,s;function o(){Fx(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Fx(),n(Ao(t,"network-request-failed"))},timeout:CR.get()})}if(!((i=(r=Eo().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Eo().gapi)===null||s===void 0)&&s.load)o();else{const a=NL("iframefcb");return Eo()[a]=()=>{gapi.load?o():n(Ao(t,"network-request-failed"))},mN(`${bL()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw kp=null,e})}let kp=null;function RR(t){return kp=kp||LR(t),kp}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jR=new Zd(5e3,15e3),DR="__/auth/iframe",OR="emulator/auth/iframe",FR={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},MR=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function UR(t){const e=t.config;mt(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?ev(e,OR):`https://${t.config.authDomain}/${DR}`,r={apiKey:e.apiKey,appName:t.name,v:Pu},i=MR.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Xd(r).slice(1)}`}async function VR(t){const e=await RR(t),n=Eo().gapi;return mt(n,t,"internal-error"),e.open({where:document.body,url:UR(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:FR,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=Ao(t,"network-request-failed"),a=Eo().setTimeout(()=>{s(o)},jR.get());function l(){Eo().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BR={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},zR=500,qR=600,HR="_blank",WR="http://localhost";class Mx{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function $R(t,e,n,r=zR,i=qR){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},BR),{width:r.toString(),height:i.toString(),top:s,left:o}),u=ai().toLowerCase();n&&(a=lN(u)?HR:n),oN(u)&&(e=e||WR,l.scrollbars="yes");const c=Object.entries(l).reduce((y,[m,N])=>`${y}${m}=${N},`,"");if(fL(u)&&a!=="_self")return GR(e||"",a),new Mx(null);const g=window.open(e||"",a,c);mt(g,t,"popup-blocked");try{g.focus()}catch{}return new Mx(g)}function GR(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KR="__/auth/handler",YR="emulator/auth/handler",QR=encodeURIComponent("fac");async function Ux(t,e,n,r,i,s){mt(t.config.authDomain,t,"auth-domain-config-required"),mt(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Pu,eventId:i};if(e instanceof yN){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",MP(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[c,g]of Object.entries({}))o[c]=g}if(e instanceof tf){const c=e.getScopes().filter(g=>g!=="");c.length>0&&(o.scopes=c.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const c of Object.keys(a))a[c]===void 0&&delete a[c];const l=await t._getAppCheckToken(),u=l?`#${QR}=${encodeURIComponent(l)}`:"";return`${JR(t)}?${Xd(a).slice(1)}${u}`}function JR({config:t}){return t.emulator?ev(t,YR):`https://${t.authDomain}/${KR}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T0="webStorageSupport";class XR{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=AN,this._completeRedirectFn=bR,this._overrideRedirectResult=wR}async _openPopup(e,n,r,i){var s;pa((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await Ux(e,n,r,d2(),i);return $R(e,o,sv())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await Ux(e,n,r,d2(),i);return tR(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(pa(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await VR(e),r=new SR(e);return n.register("authEvent",i=>(mt(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(T0,{type:T0},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[T0];o!==void 0&&n(!!o),Ks(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=kR(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return fN()||aN()||nv()}}const ZR=XR;var Vx="@firebase/auth",Bx="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e7{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){mt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t7(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function n7(t){Gs(new Ts("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;mt(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:pN(t)},u=new wL(r,i,s,l);return IL(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Gs(new Ts("auth-internal",e=>{const n=Cu(e.getProvider("auth").getImmediate());return(r=>new e7(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Di(Vx,Bx,t7(t)),Di(Vx,Bx,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r7=5*60,i7=z6("authIdTokenMaxAge")||r7;let zx=null;const s7=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>i7)return;const i=n==null?void 0:n.token;zx!==i&&(zx=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function o7(t=ig()){const e=ku(t,"auth");if(e.isInitialized())return e.getImmediate();const n=TL(t,{popupRedirectResolver:ZR,persistence:[cR,XL,AN]}),r=z6("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=s7(s.toString());KL(n,o,()=>o(n.currentUser)),GL(n,a=>o(a))}}const i=U6("auth");return i&&kL(n,`http://${i}`),n}function a7(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}xL({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=Ao("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",a7().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});n7("Browser");var qx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var su,LN;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(j,E){function I(){}I.prototype=E.prototype,j.D=E.prototype,j.prototype=new I,j.prototype.constructor=j,j.C=function(F,b,S){for(var P=Array(arguments.length-2),J=2;J<arguments.length;J++)P[J-2]=arguments[J];return E.prototype[b].apply(F,P)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(j,E,I){I||(I=0);var F=Array(16);if(typeof E=="string")for(var b=0;16>b;++b)F[b]=E.charCodeAt(I++)|E.charCodeAt(I++)<<8|E.charCodeAt(I++)<<16|E.charCodeAt(I++)<<24;else for(b=0;16>b;++b)F[b]=E[I++]|E[I++]<<8|E[I++]<<16|E[I++]<<24;E=j.g[0],I=j.g[1],b=j.g[2];var S=j.g[3],P=E+(S^I&(b^S))+F[0]+3614090360&4294967295;E=I+(P<<7&4294967295|P>>>25),P=S+(b^E&(I^b))+F[1]+3905402710&4294967295,S=E+(P<<12&4294967295|P>>>20),P=b+(I^S&(E^I))+F[2]+606105819&4294967295,b=S+(P<<17&4294967295|P>>>15),P=I+(E^b&(S^E))+F[3]+3250441966&4294967295,I=b+(P<<22&4294967295|P>>>10),P=E+(S^I&(b^S))+F[4]+4118548399&4294967295,E=I+(P<<7&4294967295|P>>>25),P=S+(b^E&(I^b))+F[5]+1200080426&4294967295,S=E+(P<<12&4294967295|P>>>20),P=b+(I^S&(E^I))+F[6]+2821735955&4294967295,b=S+(P<<17&4294967295|P>>>15),P=I+(E^b&(S^E))+F[7]+4249261313&4294967295,I=b+(P<<22&4294967295|P>>>10),P=E+(S^I&(b^S))+F[8]+1770035416&4294967295,E=I+(P<<7&4294967295|P>>>25),P=S+(b^E&(I^b))+F[9]+2336552879&4294967295,S=E+(P<<12&4294967295|P>>>20),P=b+(I^S&(E^I))+F[10]+4294925233&4294967295,b=S+(P<<17&4294967295|P>>>15),P=I+(E^b&(S^E))+F[11]+2304563134&4294967295,I=b+(P<<22&4294967295|P>>>10),P=E+(S^I&(b^S))+F[12]+1804603682&4294967295,E=I+(P<<7&4294967295|P>>>25),P=S+(b^E&(I^b))+F[13]+4254626195&4294967295,S=E+(P<<12&4294967295|P>>>20),P=b+(I^S&(E^I))+F[14]+2792965006&4294967295,b=S+(P<<17&4294967295|P>>>15),P=I+(E^b&(S^E))+F[15]+1236535329&4294967295,I=b+(P<<22&4294967295|P>>>10),P=E+(b^S&(I^b))+F[1]+4129170786&4294967295,E=I+(P<<5&4294967295|P>>>27),P=S+(I^b&(E^I))+F[6]+3225465664&4294967295,S=E+(P<<9&4294967295|P>>>23),P=b+(E^I&(S^E))+F[11]+643717713&4294967295,b=S+(P<<14&4294967295|P>>>18),P=I+(S^E&(b^S))+F[0]+3921069994&4294967295,I=b+(P<<20&4294967295|P>>>12),P=E+(b^S&(I^b))+F[5]+3593408605&4294967295,E=I+(P<<5&4294967295|P>>>27),P=S+(I^b&(E^I))+F[10]+38016083&4294967295,S=E+(P<<9&4294967295|P>>>23),P=b+(E^I&(S^E))+F[15]+3634488961&4294967295,b=S+(P<<14&4294967295|P>>>18),P=I+(S^E&(b^S))+F[4]+3889429448&4294967295,I=b+(P<<20&4294967295|P>>>12),P=E+(b^S&(I^b))+F[9]+568446438&4294967295,E=I+(P<<5&4294967295|P>>>27),P=S+(I^b&(E^I))+F[14]+3275163606&4294967295,S=E+(P<<9&4294967295|P>>>23),P=b+(E^I&(S^E))+F[3]+4107603335&4294967295,b=S+(P<<14&4294967295|P>>>18),P=I+(S^E&(b^S))+F[8]+1163531501&4294967295,I=b+(P<<20&4294967295|P>>>12),P=E+(b^S&(I^b))+F[13]+2850285829&4294967295,E=I+(P<<5&4294967295|P>>>27),P=S+(I^b&(E^I))+F[2]+4243563512&4294967295,S=E+(P<<9&4294967295|P>>>23),P=b+(E^I&(S^E))+F[7]+1735328473&4294967295,b=S+(P<<14&4294967295|P>>>18),P=I+(S^E&(b^S))+F[12]+2368359562&4294967295,I=b+(P<<20&4294967295|P>>>12),P=E+(I^b^S)+F[5]+4294588738&4294967295,E=I+(P<<4&4294967295|P>>>28),P=S+(E^I^b)+F[8]+2272392833&4294967295,S=E+(P<<11&4294967295|P>>>21),P=b+(S^E^I)+F[11]+1839030562&4294967295,b=S+(P<<16&4294967295|P>>>16),P=I+(b^S^E)+F[14]+4259657740&4294967295,I=b+(P<<23&4294967295|P>>>9),P=E+(I^b^S)+F[1]+2763975236&4294967295,E=I+(P<<4&4294967295|P>>>28),P=S+(E^I^b)+F[4]+1272893353&4294967295,S=E+(P<<11&4294967295|P>>>21),P=b+(S^E^I)+F[7]+4139469664&4294967295,b=S+(P<<16&4294967295|P>>>16),P=I+(b^S^E)+F[10]+3200236656&4294967295,I=b+(P<<23&4294967295|P>>>9),P=E+(I^b^S)+F[13]+681279174&4294967295,E=I+(P<<4&4294967295|P>>>28),P=S+(E^I^b)+F[0]+3936430074&4294967295,S=E+(P<<11&4294967295|P>>>21),P=b+(S^E^I)+F[3]+3572445317&4294967295,b=S+(P<<16&4294967295|P>>>16),P=I+(b^S^E)+F[6]+76029189&4294967295,I=b+(P<<23&4294967295|P>>>9),P=E+(I^b^S)+F[9]+3654602809&4294967295,E=I+(P<<4&4294967295|P>>>28),P=S+(E^I^b)+F[12]+3873151461&4294967295,S=E+(P<<11&4294967295|P>>>21),P=b+(S^E^I)+F[15]+530742520&4294967295,b=S+(P<<16&4294967295|P>>>16),P=I+(b^S^E)+F[2]+3299628645&4294967295,I=b+(P<<23&4294967295|P>>>9),P=E+(b^(I|~S))+F[0]+4096336452&4294967295,E=I+(P<<6&4294967295|P>>>26),P=S+(I^(E|~b))+F[7]+1126891415&4294967295,S=E+(P<<10&4294967295|P>>>22),P=b+(E^(S|~I))+F[14]+2878612391&4294967295,b=S+(P<<15&4294967295|P>>>17),P=I+(S^(b|~E))+F[5]+4237533241&4294967295,I=b+(P<<21&4294967295|P>>>11),P=E+(b^(I|~S))+F[12]+1700485571&4294967295,E=I+(P<<6&4294967295|P>>>26),P=S+(I^(E|~b))+F[3]+2399980690&4294967295,S=E+(P<<10&4294967295|P>>>22),P=b+(E^(S|~I))+F[10]+4293915773&4294967295,b=S+(P<<15&4294967295|P>>>17),P=I+(S^(b|~E))+F[1]+2240044497&4294967295,I=b+(P<<21&4294967295|P>>>11),P=E+(b^(I|~S))+F[8]+1873313359&4294967295,E=I+(P<<6&4294967295|P>>>26),P=S+(I^(E|~b))+F[15]+4264355552&4294967295,S=E+(P<<10&4294967295|P>>>22),P=b+(E^(S|~I))+F[6]+2734768916&4294967295,b=S+(P<<15&4294967295|P>>>17),P=I+(S^(b|~E))+F[13]+1309151649&4294967295,I=b+(P<<21&4294967295|P>>>11),P=E+(b^(I|~S))+F[4]+4149444226&4294967295,E=I+(P<<6&4294967295|P>>>26),P=S+(I^(E|~b))+F[11]+3174756917&4294967295,S=E+(P<<10&4294967295|P>>>22),P=b+(E^(S|~I))+F[2]+718787259&4294967295,b=S+(P<<15&4294967295|P>>>17),P=I+(S^(b|~E))+F[9]+3951481745&4294967295,j.g[0]=j.g[0]+E&4294967295,j.g[1]=j.g[1]+(b+(P<<21&4294967295|P>>>11))&4294967295,j.g[2]=j.g[2]+b&4294967295,j.g[3]=j.g[3]+S&4294967295}r.prototype.u=function(j,E){E===void 0&&(E=j.length);for(var I=E-this.blockSize,F=this.B,b=this.h,S=0;S<E;){if(b==0)for(;S<=I;)i(this,j,S),S+=this.blockSize;if(typeof j=="string"){for(;S<E;)if(F[b++]=j.charCodeAt(S++),b==this.blockSize){i(this,F),b=0;break}}else for(;S<E;)if(F[b++]=j[S++],b==this.blockSize){i(this,F),b=0;break}}this.h=b,this.o+=E},r.prototype.v=function(){var j=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);j[0]=128;for(var E=1;E<j.length-8;++E)j[E]=0;var I=8*this.o;for(E=j.length-8;E<j.length;++E)j[E]=I&255,I/=256;for(this.u(j),j=Array(16),E=I=0;4>E;++E)for(var F=0;32>F;F+=8)j[I++]=this.g[E]>>>F&255;return j};function s(j,E){var I=a;return Object.prototype.hasOwnProperty.call(I,j)?I[j]:I[j]=E(j)}function o(j,E){this.h=E;for(var I=[],F=!0,b=j.length-1;0<=b;b--){var S=j[b]|0;F&&S==E||(I[b]=S,F=!1)}this.g=I}var a={};function l(j){return-128<=j&&128>j?s(j,function(E){return new o([E|0],0>E?-1:0)}):new o([j|0],0>j?-1:0)}function u(j){if(isNaN(j)||!isFinite(j))return g;if(0>j)return C(u(-j));for(var E=[],I=1,F=0;j>=I;F++)E[F]=j/I|0,I*=4294967296;return new o(E,0)}function c(j,E){if(j.length==0)throw Error("number format error: empty string");if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(j.charAt(0)=="-")return C(c(j.substring(1),E));if(0<=j.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=u(Math.pow(E,8)),F=g,b=0;b<j.length;b+=8){var S=Math.min(8,j.length-b),P=parseInt(j.substring(b,b+S),E);8>S?(S=u(Math.pow(E,S)),F=F.j(S).add(u(P))):(F=F.j(I),F=F.add(u(P)))}return F}var g=l(0),y=l(1),m=l(16777216);t=o.prototype,t.m=function(){if(A(this))return-C(this).m();for(var j=0,E=1,I=0;I<this.g.length;I++){var F=this.i(I);j+=(0<=F?F:4294967296+F)*E,E*=4294967296}return j},t.toString=function(j){if(j=j||10,2>j||36<j)throw Error("radix out of range: "+j);if(N(this))return"0";if(A(this))return"-"+C(this).toString(j);for(var E=u(Math.pow(j,6)),I=this,F="";;){var b=D(I,E).g;I=_(I,b.j(E));var S=((0<I.g.length?I.g[0]:I.h)>>>0).toString(j);if(I=b,N(I))return S+F;for(;6>S.length;)S="0"+S;F=S+F}},t.i=function(j){return 0>j?0:j<this.g.length?this.g[j]:this.h};function N(j){if(j.h!=0)return!1;for(var E=0;E<j.g.length;E++)if(j.g[E]!=0)return!1;return!0}function A(j){return j.h==-1}t.l=function(j){return j=_(this,j),A(j)?-1:N(j)?0:1};function C(j){for(var E=j.g.length,I=[],F=0;F<E;F++)I[F]=~j.g[F];return new o(I,~j.h).add(y)}t.abs=function(){return A(this)?C(this):this},t.add=function(j){for(var E=Math.max(this.g.length,j.g.length),I=[],F=0,b=0;b<=E;b++){var S=F+(this.i(b)&65535)+(j.i(b)&65535),P=(S>>>16)+(this.i(b)>>>16)+(j.i(b)>>>16);F=P>>>16,S&=65535,P&=65535,I[b]=P<<16|S}return new o(I,I[I.length-1]&-2147483648?-1:0)};function _(j,E){return j.add(C(E))}t.j=function(j){if(N(this)||N(j))return g;if(A(this))return A(j)?C(this).j(C(j)):C(C(this).j(j));if(A(j))return C(this.j(C(j)));if(0>this.l(m)&&0>j.l(m))return u(this.m()*j.m());for(var E=this.g.length+j.g.length,I=[],F=0;F<2*E;F++)I[F]=0;for(F=0;F<this.g.length;F++)for(var b=0;b<j.g.length;b++){var S=this.i(F)>>>16,P=this.i(F)&65535,J=j.i(b)>>>16,le=j.i(b)&65535;I[2*F+2*b]+=P*le,k(I,2*F+2*b),I[2*F+2*b+1]+=S*le,k(I,2*F+2*b+1),I[2*F+2*b+1]+=P*J,k(I,2*F+2*b+1),I[2*F+2*b+2]+=S*J,k(I,2*F+2*b+2)}for(F=0;F<E;F++)I[F]=I[2*F+1]<<16|I[2*F];for(F=E;F<2*E;F++)I[F]=0;return new o(I,0)};function k(j,E){for(;(j[E]&65535)!=j[E];)j[E+1]+=j[E]>>>16,j[E]&=65535,E++}function R(j,E){this.g=j,this.h=E}function D(j,E){if(N(E))throw Error("division by zero");if(N(j))return new R(g,g);if(A(j))return E=D(C(j),E),new R(C(E.g),C(E.h));if(A(E))return E=D(j,C(E)),new R(C(E.g),E.h);if(30<j.g.length){if(A(j)||A(E))throw Error("slowDivide_ only works with positive integers.");for(var I=y,F=E;0>=F.l(j);)I=z(I),F=z(F);var b=Q(I,1),S=Q(F,1);for(F=Q(F,2),I=Q(I,2);!N(F);){var P=S.add(F);0>=P.l(j)&&(b=b.add(I),S=P),F=Q(F,1),I=Q(I,1)}return E=_(j,b.j(E)),new R(b,E)}for(b=g;0<=j.l(E);){for(I=Math.max(1,Math.floor(j.m()/E.m())),F=Math.ceil(Math.log(I)/Math.LN2),F=48>=F?1:Math.pow(2,F-48),S=u(I),P=S.j(E);A(P)||0<P.l(j);)I-=F,S=u(I),P=S.j(E);N(S)&&(S=y),b=b.add(S),j=_(j,P)}return new R(b,j)}t.A=function(j){return D(this,j).h},t.and=function(j){for(var E=Math.max(this.g.length,j.g.length),I=[],F=0;F<E;F++)I[F]=this.i(F)&j.i(F);return new o(I,this.h&j.h)},t.or=function(j){for(var E=Math.max(this.g.length,j.g.length),I=[],F=0;F<E;F++)I[F]=this.i(F)|j.i(F);return new o(I,this.h|j.h)},t.xor=function(j){for(var E=Math.max(this.g.length,j.g.length),I=[],F=0;F<E;F++)I[F]=this.i(F)^j.i(F);return new o(I,this.h^j.h)};function z(j){for(var E=j.g.length+1,I=[],F=0;F<E;F++)I[F]=j.i(F)<<1|j.i(F-1)>>>31;return new o(I,j.h)}function Q(j,E){var I=E>>5;E%=32;for(var F=j.g.length-I,b=[],S=0;S<F;S++)b[S]=0<E?j.i(S+I)>>>E|j.i(S+I+1)<<32-E:j.i(S+I);return new o(b,j.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,LN=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=c,su=o}).apply(typeof qx<"u"?qx:typeof self<"u"?self:typeof window<"u"?window:{});var Zf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var RN,Wh,jN,Pp,g2,DN,ON,FN;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(d,x,L){return d==Array.prototype||d==Object.prototype||(d[x]=L.value),d};function n(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof Zf=="object"&&Zf];for(var x=0;x<d.length;++x){var L=d[x];if(L&&L.Math==Math)return L}throw Error("Cannot find global object")}var r=n(this);function i(d,x){if(x)e:{var L=r;d=d.split(".");for(var H=0;H<d.length-1;H++){var pe=d[H];if(!(pe in L))break e;L=L[pe]}d=d[d.length-1],H=L[d],x=x(H),x!=H&&x!=null&&e(L,d,{configurable:!0,writable:!0,value:x})}}function s(d,x){d instanceof String&&(d+="");var L=0,H=!1,pe={next:function(){if(!H&&L<d.length){var be=L++;return{value:x(be,d[be]),done:!1}}return H=!0,{done:!0,value:void 0}}};return pe[Symbol.iterator]=function(){return pe},pe}i("Array.prototype.values",function(d){return d||function(){return s(this,function(x,L){return L})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(d){var x=typeof d;return x=x!="object"?x:d?Array.isArray(d)?"array":x:"null",x=="array"||x=="object"&&typeof d.length=="number"}function u(d){var x=typeof d;return x=="object"&&d!=null||x=="function"}function c(d,x,L){return d.call.apply(d.bind,arguments)}function g(d,x,L){if(!d)throw Error();if(2<arguments.length){var H=Array.prototype.slice.call(arguments,2);return function(){var pe=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(pe,H),d.apply(x,pe)}}return function(){return d.apply(x,arguments)}}function y(d,x,L){return y=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?c:g,y.apply(null,arguments)}function m(d,x){var L=Array.prototype.slice.call(arguments,1);return function(){var H=L.slice();return H.push.apply(H,arguments),d.apply(this,H)}}function N(d,x){function L(){}L.prototype=x.prototype,d.aa=x.prototype,d.prototype=new L,d.prototype.constructor=d,d.Qb=function(H,pe,be){for(var Fe=Array(arguments.length-2),Bt=2;Bt<arguments.length;Bt++)Fe[Bt-2]=arguments[Bt];return x.prototype[pe].apply(H,Fe)}}function A(d){const x=d.length;if(0<x){const L=Array(x);for(let H=0;H<x;H++)L[H]=d[H];return L}return[]}function C(d,x){for(let L=1;L<arguments.length;L++){const H=arguments[L];if(l(H)){const pe=d.length||0,be=H.length||0;d.length=pe+be;for(let Fe=0;Fe<be;Fe++)d[pe+Fe]=H[Fe]}else d.push(H)}}class _{constructor(x,L){this.i=x,this.j=L,this.h=0,this.g=null}get(){let x;return 0<this.h?(this.h--,x=this.g,this.g=x.next,x.next=null):x=this.i(),x}}function k(d){return/^[\s\xa0]*$/.test(d)}function R(){var d=a.navigator;return d&&(d=d.userAgent)?d:""}function D(d){return D[" "](d),d}D[" "]=function(){};var z=R().indexOf("Gecko")!=-1&&!(R().toLowerCase().indexOf("webkit")!=-1&&R().indexOf("Edge")==-1)&&!(R().indexOf("Trident")!=-1||R().indexOf("MSIE")!=-1)&&R().indexOf("Edge")==-1;function Q(d,x,L){for(const H in d)x.call(L,d[H],H,d)}function j(d,x){for(const L in d)x.call(void 0,d[L],L,d)}function E(d){const x={};for(const L in d)x[L]=d[L];return x}const I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function F(d,x){let L,H;for(let pe=1;pe<arguments.length;pe++){H=arguments[pe];for(L in H)d[L]=H[L];for(let be=0;be<I.length;be++)L=I[be],Object.prototype.hasOwnProperty.call(H,L)&&(d[L]=H[L])}}function b(d){var x=1;d=d.split(":");const L=[];for(;0<x&&d.length;)L.push(d.shift()),x--;return d.length&&L.push(d.join(":")),L}function S(d){a.setTimeout(()=>{throw d},0)}function P(){var d=ae;let x=null;return d.g&&(x=d.g,d.g=d.g.next,d.g||(d.h=null),x.next=null),x}class J{constructor(){this.h=this.g=null}add(x,L){const H=le.get();H.set(x,L),this.h?this.h.next=H:this.g=H,this.h=H}}var le=new _(()=>new we,d=>d.reset());class we{constructor(){this.next=this.g=this.h=null}set(x,L){this.h=x,this.g=L,this.next=null}reset(){this.next=this.g=this.h=null}}let xe,ne=!1,ae=new J,_e=()=>{const d=a.Promise.resolve(void 0);xe=()=>{d.then(ge)}};var ge=()=>{for(var d;d=P();){try{d.h.call(d.g)}catch(L){S(L)}var x=le;x.j(d),100>x.h&&(x.h++,d.next=x.g,x.g=d)}ne=!1};function U(){this.s=this.s,this.C=this.C}U.prototype.s=!1,U.prototype.ma=function(){this.s||(this.s=!0,this.N())},U.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function K(d,x){this.type=d,this.g=this.target=x,this.defaultPrevented=!1}K.prototype.h=function(){this.defaultPrevented=!0};var W=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var d=!1,x=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const L=()=>{};a.addEventListener("test",L,x),a.removeEventListener("test",L,x)}catch{}return d}();function te(d,x){if(K.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d){var L=this.type=d.type,H=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;if(this.target=d.target||d.srcElement,this.g=x,x=d.relatedTarget){if(z){e:{try{D(x.nodeName);var pe=!0;break e}catch{}pe=!1}pe||(x=null)}}else L=="mouseover"?x=d.fromElement:L=="mouseout"&&(x=d.toElement);this.relatedTarget=x,H?(this.clientX=H.clientX!==void 0?H.clientX:H.pageX,this.clientY=H.clientY!==void 0?H.clientY:H.pageY,this.screenX=H.screenX||0,this.screenY=H.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=typeof d.pointerType=="string"?d.pointerType:re[d.pointerType]||"",this.state=d.state,this.i=d,d.defaultPrevented&&te.aa.h.call(this)}}N(te,K);var re={2:"touch",3:"pen",4:"mouse"};te.prototype.h=function(){te.aa.h.call(this);var d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var $="closure_listenable_"+(1e6*Math.random()|0),ue=0;function he(d,x,L,H,pe){this.listener=d,this.proxy=null,this.src=x,this.type=L,this.capture=!!H,this.ha=pe,this.key=++ue,this.da=this.fa=!1}function de(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function Ne(d){this.src=d,this.g={},this.h=0}Ne.prototype.add=function(d,x,L,H,pe){var be=d.toString();d=this.g[be],d||(d=this.g[be]=[],this.h++);var Fe=Pe(d,x,H,pe);return-1<Fe?(x=d[Fe],L||(x.fa=!1)):(x=new he(x,this.src,be,!!H,pe),x.fa=L,d.push(x)),x};function Re(d,x){var L=x.type;if(L in d.g){var H=d.g[L],pe=Array.prototype.indexOf.call(H,x,void 0),be;(be=0<=pe)&&Array.prototype.splice.call(H,pe,1),be&&(de(x),d.g[L].length==0&&(delete d.g[L],d.h--))}}function Pe(d,x,L,H){for(var pe=0;pe<d.length;++pe){var be=d[pe];if(!be.da&&be.listener==x&&be.capture==!!L&&be.ha==H)return pe}return-1}var ze="closure_lm_"+(1e6*Math.random()|0),Y={};function Me(d,x,L,H,pe){if(Array.isArray(x)){for(var be=0;be<x.length;be++)Me(d,x[be],L,H,pe);return null}return L=Rt(L),d&&d[$]?d.K(x,L,u(H)?!!H.capture:!1,pe):_t(d,x,L,!1,H,pe)}function _t(d,x,L,H,pe,be){if(!x)throw Error("Invalid event type");var Fe=u(pe)?!!pe.capture:!!pe,Bt=tt(d);if(Bt||(d[ze]=Bt=new Ne(d)),L=Bt.add(x,L,H,Fe,be),L.proxy)return L;if(H=it(),L.proxy=H,H.src=d,H.listener=L,d.addEventListener)W||(pe=Fe),pe===void 0&&(pe=!1),d.addEventListener(x.toString(),H,pe);else if(d.attachEvent)d.attachEvent(qe(x.toString()),H);else if(d.addListener&&d.removeListener)d.addListener(H);else throw Error("addEventListener and attachEvent are unavailable.");return L}function it(){function d(L){return x.call(d.src,d.listener,L)}const x=at;return d}function Le(d,x,L,H,pe){if(Array.isArray(x))for(var be=0;be<x.length;be++)Le(d,x[be],L,H,pe);else H=u(H)?!!H.capture:!!H,L=Rt(L),d&&d[$]?(d=d.i,x=String(x).toString(),x in d.g&&(be=d.g[x],L=Pe(be,L,H,pe),-1<L&&(de(be[L]),Array.prototype.splice.call(be,L,1),be.length==0&&(delete d.g[x],d.h--)))):d&&(d=tt(d))&&(x=d.g[x.toString()],d=-1,x&&(d=Pe(x,L,H,pe)),(L=-1<d?x[d]:null)&&st(L))}function st(d){if(typeof d!="number"&&d&&!d.da){var x=d.src;if(x&&x[$])Re(x.i,d);else{var L=d.type,H=d.proxy;x.removeEventListener?x.removeEventListener(L,H,d.capture):x.detachEvent?x.detachEvent(qe(L),H):x.addListener&&x.removeListener&&x.removeListener(H),(L=tt(x))?(Re(L,d),L.h==0&&(L.src=null,x[ze]=null)):de(d)}}}function qe(d){return d in Y?Y[d]:Y[d]="on"+d}function at(d,x){if(d.da)d=!0;else{x=new te(x,this);var L=d.listener,H=d.ha||d.src;d.fa&&st(d),d=L.call(H,x)}return d}function tt(d){return d=d[ze],d instanceof Ne?d:null}var Wt="__closure_events_fn_"+(1e9*Math.random()>>>0);function Rt(d){return typeof d=="function"?d:(d[Wt]||(d[Wt]=function(x){return d.handleEvent(x)}),d[Wt])}function Ze(){U.call(this),this.i=new Ne(this),this.M=this,this.F=null}N(Ze,U),Ze.prototype[$]=!0,Ze.prototype.removeEventListener=function(d,x,L,H){Le(this,d,x,L,H)};function ft(d,x){var L,H=d.F;if(H)for(L=[];H;H=H.F)L.push(H);if(d=d.M,H=x.type||x,typeof x=="string")x=new K(x,d);else if(x instanceof K)x.target=x.target||d;else{var pe=x;x=new K(H,d),F(x,pe)}if(pe=!0,L)for(var be=L.length-1;0<=be;be--){var Fe=x.g=L[be];pe=Pt(Fe,H,!0,x)&&pe}if(Fe=x.g=d,pe=Pt(Fe,H,!0,x)&&pe,pe=Pt(Fe,H,!1,x)&&pe,L)for(be=0;be<L.length;be++)Fe=x.g=L[be],pe=Pt(Fe,H,!1,x)&&pe}Ze.prototype.N=function(){if(Ze.aa.N.call(this),this.i){var d=this.i,x;for(x in d.g){for(var L=d.g[x],H=0;H<L.length;H++)de(L[H]);delete d.g[x],d.h--}}this.F=null},Ze.prototype.K=function(d,x,L,H){return this.i.add(String(d),x,!1,L,H)},Ze.prototype.L=function(d,x,L,H){return this.i.add(String(d),x,!0,L,H)};function Pt(d,x,L,H){if(x=d.i.g[String(x)],!x)return!0;x=x.concat();for(var pe=!0,be=0;be<x.length;++be){var Fe=x[be];if(Fe&&!Fe.da&&Fe.capture==L){var Bt=Fe.listener,Mn=Fe.ha||Fe.src;Fe.fa&&Re(d.i,Fe),pe=Bt.call(Mn,H)!==!1&&pe}}return pe&&!H.defaultPrevented}function Ke(d,x,L){if(typeof d=="function")L&&(d=y(d,L));else if(d&&typeof d.handleEvent=="function")d=y(d.handleEvent,d);else throw Error("Invalid listener argument");return 2147483647<Number(x)?-1:a.setTimeout(d,x||0)}function wt(d){d.g=Ke(()=>{d.g=null,d.i&&(d.i=!1,wt(d))},d.l);const x=d.h;d.h=null,d.m.apply(null,x)}class et extends U{constructor(x,L){super(),this.m=x,this.l=L,this.h=null,this.i=!1,this.g=null}j(x){this.h=arguments,this.g?this.i=!0:wt(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function dn(d){U.call(this),this.h=d,this.g={}}N(dn,U);var Ft=[];function It(d){Q(d.g,function(x,L){this.g.hasOwnProperty(L)&&st(x)},d),d.g={}}dn.prototype.N=function(){dn.aa.N.call(this),It(this)},dn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var At=a.JSON.stringify,wn=a.JSON.parse,ot=class{stringify(d){return a.JSON.stringify(d,void 0)}parse(d){return a.JSON.parse(d,void 0)}};function Zt(){}Zt.prototype.h=null;function ht(d){return d.h||(d.h=d.i())}function yt(){}var en={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function kt(){K.call(this,"d")}N(kt,K);function lt(){K.call(this,"c")}N(lt,K);var jt={},eo=null;function Xn(){return eo=eo||new Ze}jt.La="serverreachability";function as(d){K.call(this,jt.La,d)}N(as,K);function qr(d){const x=Xn();ft(x,new as(x))}jt.STAT_EVENT="statevent";function ct(d,x){K.call(this,jt.STAT_EVENT,d),this.stat=x}N(ct,K);function Nn(d){const x=Xn();ft(x,new ct(x,d))}jt.Ma="timingevent";function ls(d,x){K.call(this,jt.Ma,d),this.size=x}N(ls,K);function br(d,x){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){d()},x)}function Nr(){this.g=!0}Nr.prototype.xa=function(){this.g=!1};function kn(d,x,L,H,pe,be){d.info(function(){if(d.g)if(be)for(var Fe="",Bt=be.split("&"),Mn=0;Mn<Bt.length;Mn++){var Dt=Bt[Mn].split("=");if(1<Dt.length){var Qt=Dt[0];Dt=Dt[1];var xn=Qt.split("_");Fe=2<=xn.length&&xn[1]=="type"?Fe+(Qt+"="+Dt+"&"):Fe+(Qt+"=redacted&")}}else Fe=null;else Fe=be;return"XMLHTTP REQ ("+H+") [attempt "+pe+"]: "+x+`
`+L+`
`+Fe})}function cr(d,x,L,H,pe,be,Fe){d.info(function(){return"XMLHTTP RESP ("+H+") [ attempt "+pe+"]: "+x+`
`+L+`
`+be+" "+Fe})}function Pn(d,x,L,H){d.info(function(){return"XMLHTTP TEXT ("+x+"): "+to(d,L)+(H?" "+H:"")})}function Lo(d,x){d.info(function(){return"TIMEOUT: "+x})}Nr.prototype.info=function(){};function to(d,x){if(!d.g)return x;if(!x)return null;try{var L=JSON.parse(x);if(L){for(d=0;d<L.length;d++)if(Array.isArray(L[d])){var H=L[d];if(!(2>H.length)){var pe=H[1];if(Array.isArray(pe)&&!(1>pe.length)){var be=pe[0];if(be!="noop"&&be!="stop"&&be!="close")for(var Fe=1;Fe<pe.length;Fe++)pe[Fe]=""}}}}return At(L)}catch{return x}}var Hr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Fi={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},li;function Wr(){}N(Wr,Zt),Wr.prototype.g=function(){return new XMLHttpRequest},Wr.prototype.i=function(){return{}},li=new Wr;function Zn(d,x,L,H){this.j=d,this.i=x,this.l=L,this.R=H||1,this.U=new dn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new no}function no(){this.i=null,this.g="",this.h=!1}var Mi={},Cs={};function ro(d,x,L){d.L=1,d.v=Fo(mr(x)),d.m=L,d.P=!0,Ro(d,null)}function Ro(d,x){d.F=Date.now(),io(d),d.A=mr(d.v);var L=d.A,H=d.R;Array.isArray(H)||(H=[String(H)]),zu(L.i,"t",H),d.C=0,L=d.j.J,d.h=new no,d.g=qn(d.j,L?x:null,!d.m),0<d.O&&(d.M=new et(y(d.Y,d,d.g),d.O)),x=d.U,L=d.g,H=d.ca;var pe="readystatechange";Array.isArray(pe)||(pe&&(Ft[0]=pe.toString()),pe=Ft);for(var be=0;be<pe.length;be++){var Fe=Me(L,pe[be],H||x.handleEvent,!1,x.h||x);if(!Fe)break;x.g[Fe.key]=Fe}x=d.H?E(d.H):{},d.m?(d.u||(d.u="POST"),x["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.A,d.u,d.m,x)):(d.u="GET",d.g.ea(d.A,d.u,null,x)),qr(),kn(d.i,d.u,d.A,d.l,d.R,d.m)}Zn.prototype.ca=function(d){d=d.target;const x=this.M;x&&ui(d)==3?x.j():this.Y(d)},Zn.prototype.Y=function(d){try{if(d==this.g)e:{const xn=ui(this.g);var x=this.g.Ba();const Bi=this.g.Z();if(!(3>xn)&&(xn!=3||this.g&&(this.h.h||this.g.oa()||Bl(this.g)))){this.J||xn!=4||x==7||(x==8||0>=Bi?qr(3):qr(2)),_a(this);var L=this.g.Z();this.X=L;t:if(jo(this)){var H=Bl(this.g);d="";var pe=H.length,be=ui(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ui(this),Sr(this);var Fe="";break t}this.h.i=new a.TextDecoder}for(x=0;x<pe;x++)this.h.h=!0,d+=this.h.i.decode(H[x],{stream:!(be&&x==pe-1)});H.length=0,this.h.g+=d,this.C=0,Fe=this.h.g}else Fe=this.g.oa();if(this.o=L==200,cr(this.i,this.u,this.A,this.l,this.R,xn,L),this.o){if(this.T&&!this.K){t:{if(this.g){var Bt,Mn=this.g;if((Bt=Mn.g?Mn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!k(Bt)){var Dt=Bt;break t}}Dt=null}if(L=Dt)Pn(this.i,this.l,L,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ba(this,L);else{this.o=!1,this.s=3,Nn(12),Ui(this),Sr(this);break e}}if(this.P){L=!0;let $r;for(;!this.J&&this.C<Fe.length;)if($r=oh(this,Fe),$r==Cs){xn==4&&(this.s=4,Nn(14),L=!1),Pn(this.i,this.l,null,"[Incomplete Response]");break}else if($r==Mi){this.s=4,Nn(15),Pn(this.i,this.l,Fe,"[Invalid Chunk]"),L=!1;break}else Pn(this.i,this.l,$r,null),ba(this,$r);if(jo(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),xn!=4||Fe.length!=0||this.h.h||(this.s=1,Nn(16),L=!1),this.o=this.o&&L,!L)Pn(this.i,this.l,Fe,"[Invalid Chunked Response]"),Ui(this),Sr(this);else if(0<Fe.length&&!this.W){this.W=!0;var Qt=this.j;Qt.g==this&&Qt.ba&&!Qt.M&&(Qt.j.info("Great, no buffering proxy detected. Bytes received: "+Fe.length),He(Qt),Qt.M=!0,Nn(11))}}else Pn(this.i,this.l,Fe,null),ba(this,Fe);xn==4&&Ui(this),this.o&&!this.J&&(xn==4?xt(this.j,this):(this.o=!1,io(this)))}else Hu(this.g),L==400&&0<Fe.indexOf("Unknown SID")?(this.s=3,Nn(12)):(this.s=0,Nn(13)),Ui(this),Sr(this)}}}catch{}finally{}};function jo(d){return d.g?d.u=="GET"&&d.L!=2&&d.j.Ca:!1}function oh(d,x){var L=d.C,H=x.indexOf(`
`,L);return H==-1?Cs:(L=Number(x.substring(L,H)),isNaN(L)?Mi:(H+=1,H+L>x.length?Cs:(x=x.slice(H,H+L),d.C=H+L,x)))}Zn.prototype.cancel=function(){this.J=!0,Ui(this)};function io(d){d.S=Date.now()+d.I,Ll(d,d.I)}function Ll(d,x){if(d.B!=null)throw Error("WatchDog timer not null");d.B=br(y(d.ba,d),x)}function _a(d){d.B&&(a.clearTimeout(d.B),d.B=null)}Zn.prototype.ba=function(){this.B=null;const d=Date.now();0<=d-this.S?(Lo(this.i,this.A),this.L!=2&&(qr(),Nn(17)),Ui(this),this.s=2,Sr(this)):Ll(this,this.S-d)};function Sr(d){d.j.G==0||d.J||xt(d.j,d)}function Ui(d){_a(d);var x=d.M;x&&typeof x.ma=="function"&&x.ma(),d.M=null,It(d.U),d.g&&(x=d.g,d.g=null,x.abort(),x.ma())}function ba(d,x){try{var L=d.j;if(L.G!=0&&(L.g==d||bi(L.h,d))){if(!d.K&&bi(L.h,d)&&L.G==3){try{var H=L.Da.g.parse(x)}catch{H=null}if(Array.isArray(H)&&H.length==3){var pe=H;if(pe[0]==0){e:if(!L.u){if(L.g)if(L.g.F+3e3<d.F)pt(L),ms(L);else break e;ke(L),Nn(18)}}else L.za=pe[1],0<L.za-L.T&&37500>pe[2]&&L.F&&L.v==0&&!L.C&&(L.C=br(y(L.Za,L),6e3));if(1>=Ol(L.h)&&L.ca){try{L.ca()}catch{}L.ca=void 0}}else Xt(L,11)}else if((d.K||L.g==d)&&pt(L),!k(x))for(pe=L.Da.g.parse(x),x=0;x<pe.length;x++){let Dt=pe[x];if(L.T=Dt[0],Dt=Dt[1],L.G==2)if(Dt[0]=="c"){L.K=Dt[1],L.ia=Dt[2];const Qt=Dt[3];Qt!=null&&(L.la=Qt,L.j.info("VER="+L.la));const xn=Dt[4];xn!=null&&(L.Aa=xn,L.j.info("SVER="+L.Aa));const Bi=Dt[5];Bi!=null&&typeof Bi=="number"&&0<Bi&&(H=1.5*Bi,L.L=H,L.j.info("backChannelRequestTimeoutMs_="+H)),H=L;const $r=d.g;if($r){const Cr=$r.g?$r.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Cr){var be=H.h;be.g||Cr.indexOf("spdy")==-1&&Cr.indexOf("quic")==-1&&Cr.indexOf("h2")==-1||(be.j=be.l,be.g=new Set,be.h&&(so(be,be.h),be.h=null))}if(H.D){const js=$r.g?$r.g.getResponseHeader("X-HTTP-Session-Id"):null;js&&(H.ya=js,Mt(H.I,H.D,js))}}L.G=3,L.l&&L.l.ua(),L.ba&&(L.R=Date.now()-d.F,L.j.info("Handshake RTT: "+L.R+"ms")),H=L;var Fe=d;if(H.qa=nn(H,H.J?H.ia:null,H.W),Fe.K){Fu(H.h,Fe);var Bt=Fe,Mn=H.L;Mn&&(Bt.I=Mn),Bt.B&&(_a(Bt),io(Bt)),H.g=Fe}else Ae(H);0<L.i.length&&v(L)}else Dt[0]!="stop"&&Dt[0]!="close"||Xt(L,7);else L.G==3&&(Dt[0]=="stop"||Dt[0]=="close"?Dt[0]=="stop"?Xt(L,7):Ia(L):Dt[0]!="noop"&&L.l&&L.l.ta(Dt),L.v=0)}}qr(4)}catch{}}var Rl=class{constructor(d,x){this.g=d,this.map=x}};function jl(d){this.l=d||10,a.PerformanceNavigationTiming?(d=a.performance.getEntriesByType("navigation"),d=0<d.length&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Dl(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function Ol(d){return d.h?1:d.g?d.g.size:0}function bi(d,x){return d.h?d.h==x:d.g?d.g.has(x):!1}function so(d,x){d.g?d.g.add(x):d.h=x}function Fu(d,x){d.h&&d.h==x?d.h=null:d.g&&d.g.has(x)&&d.g.delete(x)}jl.prototype.cancel=function(){if(this.i=jn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function jn(d){if(d.h!=null)return d.i.concat(d.h.D);if(d.g!=null&&d.g.size!==0){let x=d.i;for(const L of d.g.values())x=x.concat(L.D);return x}return A(d.i)}function Mu(d){if(d.V&&typeof d.V=="function")return d.V();if(typeof Map<"u"&&d instanceof Map||typeof Set<"u"&&d instanceof Set)return Array.from(d.values());if(typeof d=="string")return d.split("");if(l(d)){for(var x=[],L=d.length,H=0;H<L;H++)x.push(d[H]);return x}x=[],L=0;for(H in d)x[L++]=d[H];return x}function us(d){if(d.na&&typeof d.na=="function")return d.na();if(!d.V||typeof d.V!="function"){if(typeof Map<"u"&&d instanceof Map)return Array.from(d.keys());if(!(typeof Set<"u"&&d instanceof Set)){if(l(d)||typeof d=="string"){var x=[];d=d.length;for(var L=0;L<d;L++)x.push(L);return x}x=[],L=0;for(const H in d)x[L++]=H;return x}}}function Do(d,x){if(d.forEach&&typeof d.forEach=="function")d.forEach(x,void 0);else if(l(d)||typeof d=="string")Array.prototype.forEach.call(d,x,void 0);else for(var L=us(d),H=Mu(d),pe=H.length,be=0;be<pe;be++)x.call(void 0,H[be],L&&L[be],d)}var Fl=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ni(d,x){if(d){d=d.split("&");for(var L=0;L<d.length;L++){var H=d[L].indexOf("="),pe=null;if(0<=H){var be=d[L].substring(0,H);pe=d[L].substring(H+1)}else be=d[L];x(be,pe?decodeURIComponent(pe.replace(/\+/g," ")):"")}}}function fn(d){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,d instanceof fn){this.h=d.h,Oo(this,d.j),this.o=d.o,this.g=d.g,Na(this,d.s),this.l=d.l;var x=d.i,L=new Pr;L.i=x.i,x.g&&(L.g=new Map(x.g),L.h=x.h),Uu(this,L),this.m=d.m}else d&&(x=String(d).match(Fl))?(this.h=!1,Oo(this,x[1]||"",!0),this.o=oo(x[2]||""),this.g=oo(x[3]||"",!0),Na(this,x[4]),this.l=oo(x[5]||"",!0),Uu(this,x[6]||"",!0),this.m=oo(x[7]||"")):(this.h=!1,this.i=new Pr(null,this.h))}fn.prototype.toString=function(){var d=[],x=this.j;x&&d.push(cs(x,Vu,!0),":");var L=this.g;return(L||x=="file")&&(d.push("//"),(x=this.o)&&d.push(cs(x,Vu,!0),"@"),d.push(encodeURIComponent(String(L)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),L=this.s,L!=null&&d.push(":",String(L))),(L=this.l)&&(this.g&&L.charAt(0)!="/"&&d.push("/"),d.push(cs(L,L.charAt(0)=="/"?lh:ah,!0))),(L=this.i.toString())&&d.push("?",L),(L=this.m)&&d.push("#",cs(L,Bu)),d.join("")};function mr(d){return new fn(d)}function Oo(d,x,L){d.j=L?oo(x,!0):x,d.j&&(d.j=d.j.replace(/:$/,""))}function Na(d,x){if(x){if(x=Number(x),isNaN(x)||0>x)throw Error("Bad port number "+x);d.s=x}else d.s=null}function Uu(d,x,L){x instanceof Pr?(d.i=x,uh(d.i,d.h)):(L||(x=cs(x,Ml)),d.i=new Pr(x,d.h))}function Mt(d,x,L){d.i.set(x,L)}function Fo(d){return Mt(d,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),d}function oo(d,x){return d?x?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function cs(d,x,L){return typeof d=="string"?(d=encodeURI(d).replace(x,Mo),L&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function Mo(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var Vu=/[#\/\?@]/g,ah=/[#\?:]/g,lh=/[#\?]/g,Ml=/[#\?@]/g,Bu=/#/g;function Pr(d,x){this.h=this.g=null,this.i=d||null,this.j=!!x}function hs(d){d.g||(d.g=new Map,d.h=0,d.i&&Ni(d.i,function(x,L){d.add(decodeURIComponent(x.replace(/\+/g," ")),L)}))}t=Pr.prototype,t.add=function(d,x){hs(this),this.i=null,d=dt(this,d);var L=this.g.get(d);return L||this.g.set(d,L=[]),L.push(x),this.h+=1,this};function ao(d,x){hs(d),x=dt(d,x),d.g.has(x)&&(d.i=null,d.h-=d.g.get(x).length,d.g.delete(x))}function Sa(d,x){return hs(d),x=dt(d,x),d.g.has(x)}t.forEach=function(d,x){hs(this),this.g.forEach(function(L,H){L.forEach(function(pe){d.call(x,pe,H,this)},this)},this)},t.na=function(){hs(this);const d=Array.from(this.g.values()),x=Array.from(this.g.keys()),L=[];for(let H=0;H<x.length;H++){const pe=d[H];for(let be=0;be<pe.length;be++)L.push(x[H])}return L},t.V=function(d){hs(this);let x=[];if(typeof d=="string")Sa(this,d)&&(x=x.concat(this.g.get(dt(this,d))));else{d=Array.from(this.g.values());for(let L=0;L<d.length;L++)x=x.concat(d[L])}return x},t.set=function(d,x){return hs(this),this.i=null,d=dt(this,d),Sa(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[x]),this.h+=1,this},t.get=function(d,x){return d?(d=this.V(d),0<d.length?String(d[0]):x):x};function zu(d,x,L){ao(d,x),0<L.length&&(d.i=null,d.g.set(dt(d,x),A(L)),d.h+=L.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],x=Array.from(this.g.keys());for(var L=0;L<x.length;L++){var H=x[L];const be=encodeURIComponent(String(H)),Fe=this.V(H);for(H=0;H<Fe.length;H++){var pe=be;Fe[H]!==""&&(pe+="="+encodeURIComponent(String(Fe[H]))),d.push(pe)}}return this.i=d.join("&")};function dt(d,x){return x=String(x),d.j&&(x=x.toLowerCase()),x}function uh(d,x){x&&!d.j&&(hs(d),d.i=null,d.g.forEach(function(L,H){var pe=H.toLowerCase();H!=pe&&(ao(this,H),zu(this,pe,L))},d)),d.j=x}function ch(d,x){const L=new Nr;if(a.Image){const H=new Image;H.onload=m(Ar,L,"TestLoadImage: loaded",!0,x,H),H.onerror=m(Ar,L,"TestLoadImage: error",!1,x,H),H.onabort=m(Ar,L,"TestLoadImage: abort",!1,x,H),H.ontimeout=m(Ar,L,"TestLoadImage: timeout",!1,x,H),a.setTimeout(function(){H.ontimeout&&H.ontimeout()},1e4),H.src=d}else x(!1)}function hh(d,x){const L=new Nr,H=new AbortController,pe=setTimeout(()=>{H.abort(),Ar(L,"TestPingServer: timeout",!1,x)},1e4);fetch(d,{signal:H.signal}).then(be=>{clearTimeout(pe),be.ok?Ar(L,"TestPingServer: ok",!0,x):Ar(L,"TestPingServer: server error",!1,x)}).catch(()=>{clearTimeout(pe),Ar(L,"TestPingServer: error",!1,x)})}function Ar(d,x,L,H,pe){try{pe&&(pe.onload=null,pe.onerror=null,pe.onabort=null,pe.ontimeout=null),H(L)}catch{}}function Ls(){this.g=new ot}function dh(d,x,L){const H=L||"";try{Do(d,function(pe,be){let Fe=pe;u(pe)&&(Fe=At(pe)),x.push(H+be+"="+encodeURIComponent(Fe))})}catch(pe){throw x.push(H+"type="+encodeURIComponent("_badmap")),pe}}function Aa(d){this.l=d.Ub||null,this.j=d.eb||!1}N(Aa,Zt),Aa.prototype.g=function(){return new Rs(this.l,this.j)},Aa.prototype.i=function(d){return function(){return d}}({});function Rs(d,x){Ze.call(this),this.D=d,this.o=x,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}N(Rs,Ze),t=Rs.prototype,t.open=function(d,x){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=d,this.A=x,this.readyState=1,Uo(this)},t.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const x={headers:this.u,method:this.B,credentials:this.m,cache:void 0};d&&(x.body=d),(this.D||a).fetch(new Request(this.A,x)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Vi(this)),this.readyState=0},t.Sa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,Uo(this)),this.g&&(this.readyState=3,Uo(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ea(this)}else d.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ea(d){d.j.read().then(d.Pa.bind(d)).catch(d.ga.bind(d))}t.Pa=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var x=d.value?d.value:new Uint8Array(0);(x=this.v.decode(x,{stream:!d.done}))&&(this.response=this.responseText+=x)}d.done?Vi(this):Uo(this),this.readyState==3&&Ea(this)}},t.Ra=function(d){this.g&&(this.response=this.responseText=d,Vi(this))},t.Qa=function(d){this.g&&(this.response=d,Vi(this))},t.ga=function(){this.g&&Vi(this)};function Vi(d){d.readyState=4,d.l=null,d.j=null,d.v=null,Uo(d)}t.setRequestHeader=function(d,x){this.u.append(d,x)},t.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],x=this.h.entries();for(var L=x.next();!L.done;)L=L.value,d.push(L[0]+": "+L[1]),L=x.next();return d.join(`\r
`)};function Uo(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(Rs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function ds(d){let x="";return Q(d,function(L,H){x+=H,x+=":",x+=L,x+=`\r
`}),x}function Ul(d,x,L){e:{for(H in L){var H=!1;break e}H=!0}H||(L=ds(L),typeof d=="string"?L!=null&&encodeURIComponent(String(L)):Mt(d,x,L))}function hn(d){Ze.call(this),this.headers=new Map,this.o=d||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}N(hn,Ze);var Vl=/^https?$/i,qu=["POST","PUT"];t=hn.prototype,t.Ha=function(d){this.J=d},t.ea=function(d,x,L,H){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);x=x?x.toUpperCase():"GET",this.D=d,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():li.g(),this.v=this.o?ht(this.o):ht(li),this.g.onreadystatechange=y(this.Ea,this);try{this.B=!0,this.g.open(x,String(d),!0),this.B=!1}catch(be){fs(this,be);return}if(d=L||"",L=new Map(this.headers),H)if(Object.getPrototypeOf(H)===Object.prototype)for(var pe in H)L.set(pe,H[pe]);else if(typeof H.keys=="function"&&typeof H.get=="function")for(const be of H.keys())L.set(be,H.get(be));else throw Error("Unknown input type for opt_headers: "+String(H));H=Array.from(L.keys()).find(be=>be.toLowerCase()=="content-type"),pe=a.FormData&&d instanceof a.FormData,!(0<=Array.prototype.indexOf.call(qu,x,void 0))||H||pe||L.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[be,Fe]of L)this.g.setRequestHeader(be,Fe);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{uo(this),this.u=!0,this.g.send(d),this.u=!1}catch(be){fs(this,be)}};function fs(d,x){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=x,d.m=5,Ta(d),lo(d)}function Ta(d){d.A||(d.A=!0,ft(d,"complete"),ft(d,"error"))}t.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=d||7,ft(this,"complete"),ft(this,"abort"),lo(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),lo(this,!0)),hn.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Vo(this):this.bb())},t.bb=function(){Vo(this)};function Vo(d){if(d.h&&typeof o<"u"&&(!d.v[1]||ui(d)!=4||d.Z()!=2)){if(d.u&&ui(d)==4)Ke(d.Ea,0,d);else if(ft(d,"readystatechange"),ui(d)==4){d.h=!1;try{const Fe=d.Z();e:switch(Fe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var x=!0;break e;default:x=!1}var L;if(!(L=x)){var H;if(H=Fe===0){var pe=String(d.D).match(Fl)[1]||null;!pe&&a.self&&a.self.location&&(pe=a.self.location.protocol.slice(0,-1)),H=!Vl.test(pe?pe.toLowerCase():"")}L=H}if(L)ft(d,"complete"),ft(d,"success");else{d.m=6;try{var be=2<ui(d)?d.g.statusText:""}catch{be=""}d.l=be+" ["+d.Z()+"]",Ta(d)}}finally{lo(d)}}}}function lo(d,x){if(d.g){uo(d);const L=d.g,H=d.v[0]?()=>{}:null;d.g=null,d.v=null,x||ft(d,"ready");try{L.onreadystatechange=H}catch{}}}function uo(d){d.I&&(a.clearTimeout(d.I),d.I=null)}t.isActive=function(){return!!this.g};function ui(d){return d.g?d.g.readyState:0}t.Z=function(){try{return 2<ui(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(d){if(this.g){var x=this.g.responseText;return d&&x.indexOf(d)==0&&(x=x.substring(d.length)),wn(x)}};function Bl(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.H){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function Hu(d){const x={};d=(d.g&&2<=ui(d)&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let H=0;H<d.length;H++){if(k(d[H]))continue;var L=b(d[H]);const pe=L[0];if(L=L[1],typeof L!="string")continue;L=L.trim();const be=x[pe]||[];x[pe]=be,be.push(L)}j(x,function(H){return H.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ci(d,x,L){return L&&L.internalChannelParams&&L.internalChannelParams[d]||x}function ps(d){this.Aa=0,this.i=[],this.j=new Nr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ci("failFast",!1,d),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ci("baseRetryDelayMs",5e3,d),this.cb=ci("retryDelaySeedMs",1e4,d),this.Wa=ci("forwardChannelMaxRetries",2,d),this.wa=ci("forwardChannelRequestTimeoutMs",2e4,d),this.pa=d&&d.xmlHttpFactory||void 0,this.Xa=d&&d.Tb||void 0,this.Ca=d&&d.useFetchStreams||!1,this.L=void 0,this.J=d&&d.supportsCrossDomainXhr||!1,this.K="",this.h=new jl(d&&d.concurrentRequestLimit),this.Da=new Ls,this.P=d&&d.fastHandshake||!1,this.O=d&&d.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=d&&d.Rb||!1,d&&d.xa&&this.j.xa(),d&&d.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&d&&d.detectBufferingProxy||!1,this.ja=void 0,d&&d.longPollingTimeout&&0<d.longPollingTimeout&&(this.ja=d.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=ps.prototype,t.la=8,t.G=1,t.connect=function(d,x,L,H){Nn(0),this.W=d,this.H=x||{},L&&H!==void 0&&(this.H.OSID=L,this.H.OAID=H),this.F=this.X,this.I=nn(this,null,this.W),v(this)};function Ia(d){if(zl(d),d.G==3){var x=d.U++,L=mr(d.I);if(Mt(L,"SID",d.K),Mt(L,"RID",x),Mt(L,"TYPE","terminate"),ie(d,L),x=new Zn(d,d.j,x),x.L=2,x.v=Fo(mr(L)),L=!1,a.navigator&&a.navigator.sendBeacon)try{L=a.navigator.sendBeacon(x.v.toString(),"")}catch{}!L&&a.Image&&(new Image().src=x.v,L=!0),L||(x.g=qn(x.j,null),x.g.ea(x.v)),x.F=Date.now(),io(x)}Dn(d)}function ms(d){d.g&&(He(d),d.g.cancel(),d.g=null)}function zl(d){ms(d),d.u&&(a.clearTimeout(d.u),d.u=null),pt(d),d.h.cancel(),d.s&&(typeof d.s=="number"&&a.clearTimeout(d.s),d.s=null)}function v(d){if(!Dl(d.h)&&!d.s){d.s=!0;var x=d.Ga;xe||_e(),ne||(xe(),ne=!0),ae.add(x,d),d.B=0}}function O(d,x){return Ol(d.h)>=d.h.j-(d.s?1:0)?!1:d.s?(d.i=x.D.concat(d.i),!0):d.G==1||d.G==2||d.B>=(d.Va?0:d.Wa)?!1:(d.s=br(y(d.Ga,d,x),Ut(d,d.B)),d.B++,!0)}t.Ga=function(d){if(this.s)if(this.s=null,this.G==1){if(!d){this.U=Math.floor(1e5*Math.random()),d=this.U++;const pe=new Zn(this,this.j,d);let be=this.o;if(this.S&&(be?(be=E(be),F(be,this.S)):be=this.S),this.m!==null||this.O||(pe.H=be,be=null),this.P)e:{for(var x=0,L=0;L<this.i.length;L++){t:{var H=this.i[L];if("__data__"in H.map&&(H=H.map.__data__,typeof H=="string")){H=H.length;break t}H=void 0}if(H===void 0)break;if(x+=H,4096<x){x=L;break e}if(x===4096||L===this.i.length-1){x=L+1;break e}}x=1e3}else x=1e3;x=fe(this,pe,x),L=mr(this.I),Mt(L,"RID",d),Mt(L,"CVER",22),this.D&&Mt(L,"X-HTTP-Session-Id",this.D),ie(this,L),be&&(this.O?x="headers="+encodeURIComponent(String(ds(be)))+"&"+x:this.m&&Ul(L,this.m,be)),so(this.h,pe),this.Ua&&Mt(L,"TYPE","init"),this.P?(Mt(L,"$req",x),Mt(L,"SID","null"),pe.T=!0,ro(pe,L,null)):ro(pe,L,x),this.G=2}}else this.G==3&&(d?X(this,d):this.i.length==0||Dl(this.h)||X(this))};function X(d,x){var L;x?L=x.l:L=d.U++;const H=mr(d.I);Mt(H,"SID",d.K),Mt(H,"RID",L),Mt(H,"AID",d.T),ie(d,H),d.m&&d.o&&Ul(H,d.m,d.o),L=new Zn(d,d.j,L,d.B+1),d.m===null&&(L.H=d.o),x&&(d.i=x.D.concat(d.i)),x=fe(d,L,1e3),L.I=Math.round(.5*d.wa)+Math.round(.5*d.wa*Math.random()),so(d.h,L),ro(L,H,x)}function ie(d,x){d.H&&Q(d.H,function(L,H){Mt(x,H,L)}),d.l&&Do({},function(L,H){Mt(x,H,L)})}function fe(d,x,L){L=Math.min(d.i.length,L);var H=d.l?y(d.l.Na,d.l,d):null;e:{var pe=d.i;let be=-1;for(;;){const Fe=["count="+L];be==-1?0<L?(be=pe[0].g,Fe.push("ofs="+be)):be=0:Fe.push("ofs="+be);let Bt=!0;for(let Mn=0;Mn<L;Mn++){let Dt=pe[Mn].g;const Qt=pe[Mn].map;if(Dt-=be,0>Dt)be=Math.max(0,pe[Mn].g-100),Bt=!1;else try{dh(Qt,Fe,"req"+Dt+"_")}catch{H&&H(Qt)}}if(Bt){H=Fe.join("&");break e}}}return d=d.i.splice(0,L),x.D=d,H}function Ae(d){if(!d.g&&!d.u){d.Y=1;var x=d.Fa;xe||_e(),ne||(xe(),ne=!0),ae.add(x,d),d.v=0}}function ke(d){return d.g||d.u||3<=d.v?!1:(d.Y++,d.u=br(y(d.Fa,d),Ut(d,d.v)),d.v++,!0)}t.Fa=function(){if(this.u=null,Ye(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var d=2*this.R;this.j.info("BP detection timer enabled: "+d),this.A=br(y(this.ab,this),d)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Nn(10),ms(this),Ye(this))};function He(d){d.A!=null&&(a.clearTimeout(d.A),d.A=null)}function Ye(d){d.g=new Zn(d,d.j,"rpc",d.Y),d.m===null&&(d.g.H=d.o),d.g.O=0;var x=mr(d.qa);Mt(x,"RID","rpc"),Mt(x,"SID",d.K),Mt(x,"AID",d.T),Mt(x,"CI",d.F?"0":"1"),!d.F&&d.ja&&Mt(x,"TO",d.ja),Mt(x,"TYPE","xmlhttp"),ie(d,x),d.m&&d.o&&Ul(x,d.m,d.o),d.L&&(d.g.I=d.L);var L=d.g;d=d.ia,L.L=1,L.v=Fo(mr(x)),L.m=null,L.P=!0,Ro(L,d)}t.Za=function(){this.C!=null&&(this.C=null,ms(this),ke(this),Nn(19))};function pt(d){d.C!=null&&(a.clearTimeout(d.C),d.C=null)}function xt(d,x){var L=null;if(d.g==x){pt(d),He(d),d.g=null;var H=2}else if(bi(d.h,x))L=x.D,Fu(d.h,x),H=1;else return;if(d.G!=0){if(x.o)if(H==1){L=x.m?x.m.length:0,x=Date.now()-x.F;var pe=d.B;H=Xn(),ft(H,new ls(H,L)),v(d)}else Ae(d);else if(pe=x.s,pe==3||pe==0&&0<x.X||!(H==1&&O(d,x)||H==2&&ke(d)))switch(L&&0<L.length&&(x=d.h,x.i=x.i.concat(L)),pe){case 1:Xt(d,5);break;case 4:Xt(d,10);break;case 3:Xt(d,6);break;default:Xt(d,2)}}}function Ut(d,x){let L=d.Ta+Math.floor(Math.random()*d.cb);return d.isActive()||(L*=2),L*x}function Xt(d,x){if(d.j.info("Error code "+x),x==2){var L=y(d.fb,d),H=d.Xa;const pe=!H;H=new fn(H||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Oo(H,"https"),Fo(H),pe?ch(H.toString(),L):hh(H.toString(),L)}else Nn(2);d.G=0,d.l&&d.l.sa(x),Dn(d),zl(d)}t.fb=function(d){d?(this.j.info("Successfully pinged google.com"),Nn(2)):(this.j.info("Failed to ping google.com"),Nn(1))};function Dn(d){if(d.G=0,d.ka=[],d.l){const x=jn(d.h);(x.length!=0||d.i.length!=0)&&(C(d.ka,x),C(d.ka,d.i),d.h.i.length=0,A(d.i),d.i.length=0),d.l.ra()}}function nn(d,x,L){var H=L instanceof fn?mr(L):new fn(L);if(H.g!="")x&&(H.g=x+"."+H.g),Na(H,H.s);else{var pe=a.location;H=pe.protocol,x=x?x+"."+pe.hostname:pe.hostname,pe=+pe.port;var be=new fn(null);H&&Oo(be,H),x&&(be.g=x),pe&&Na(be,pe),L&&(be.l=L),H=be}return L=d.D,x=d.ya,L&&x&&Mt(H,L,x),Mt(H,"VER",d.la),ie(d,H),H}function qn(d,x,L){if(x&&!d.J)throw Error("Can't create secondary domain capable XhrIo object.");return x=d.Ca&&!d.pa?new hn(new Aa({eb:L})):new hn(d.pa),x.Ha(d.J),x}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function On(){}t=On.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Hn(){}Hn.prototype.g=function(d,x){return new Fn(d,x)};function Fn(d,x){Ze.call(this),this.g=new ps(x),this.l=d,this.h=x&&x.messageUrlParams||null,d=x&&x.messageHeaders||null,x&&x.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=x&&x.initMessageHeaders||null,x&&x.messageContentType&&(d?d["X-WebChannel-Content-Type"]=x.messageContentType:d={"X-WebChannel-Content-Type":x.messageContentType}),x&&x.va&&(d?d["X-WebChannel-Client-Profile"]=x.va:d={"X-WebChannel-Client-Profile":x.va}),this.g.S=d,(d=x&&x.Sb)&&!k(d)&&(this.g.m=d),this.v=x&&x.supportsCrossDomainXhr||!1,this.u=x&&x.sendRawJson||!1,(x=x&&x.httpSessionIdParam)&&!k(x)&&(this.g.D=x,d=this.h,d!==null&&x in d&&(d=this.h,x in d&&delete d[x])),this.j=new ys(this)}N(Fn,Ze),Fn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Fn.prototype.close=function(){Ia(this.g)},Fn.prototype.o=function(d){var x=this.g;if(typeof d=="string"){var L={};L.__data__=d,d=L}else this.u&&(L={},L.__data__=At(d),d=L);x.i.push(new Rl(x.Ya++,d)),x.G==3&&v(x)},Fn.prototype.N=function(){this.g.l=null,delete this.j,Ia(this.g),delete this.g,Fn.aa.N.call(this)};function Si(d){kt.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var x=d.__sm__;if(x){e:{for(const L in x){d=L;break e}d=void 0}(this.i=d)&&(d=this.i,x=x!==null&&d in x?x[d]:void 0),this.data=x}else this.data=d}N(Si,kt);function gs(){lt.call(this),this.status=1}N(gs,lt);function ys(d){this.g=d}N(ys,On),ys.prototype.ua=function(){ft(this.g,"a")},ys.prototype.ta=function(d){ft(this.g,new Si(d))},ys.prototype.sa=function(d){ft(this.g,new gs)},ys.prototype.ra=function(){ft(this.g,"b")},Hn.prototype.createWebChannel=Hn.prototype.g,Fn.prototype.send=Fn.prototype.o,Fn.prototype.open=Fn.prototype.m,Fn.prototype.close=Fn.prototype.close,FN=function(){return new Hn},ON=function(){return Xn()},DN=jt,g2={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Hr.NO_ERROR=0,Hr.TIMEOUT=8,Hr.HTTP_ERROR=6,Pp=Hr,Fi.COMPLETE="complete",jN=Fi,yt.EventType=en,en.OPEN="a",en.CLOSE="b",en.ERROR="c",en.MESSAGE="d",Ze.prototype.listen=Ze.prototype.K,Wh=yt,hn.prototype.listenOnce=hn.prototype.L,hn.prototype.getLastError=hn.prototype.Ka,hn.prototype.getLastErrorCode=hn.prototype.Ba,hn.prototype.getStatus=hn.prototype.Z,hn.prototype.getResponseJson=hn.prototype.Oa,hn.prototype.getResponseText=hn.prototype.oa,hn.prototype.send=hn.prototype.ea,hn.prototype.setWithCredentials=hn.prototype.Ha,RN=hn}).apply(typeof Zf<"u"?Zf:typeof self<"u"?self:typeof window<"u"?window:{});const Hx="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ti{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ti.UNAUTHENTICATED=new ti(null),ti.GOOGLE_CREDENTIALS=new ti("google-credentials-uid"),ti.FIRST_PARTY=new ti("first-party-uid"),ti.MOCK_USER=new ti("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let eh="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mu=new Qy("@firebase/firestore");function Dh(){return mu.logLevel}function Qe(t,...e){if(mu.logLevel<=qt.DEBUG){const n=e.map(av);mu.debug(`Firestore (${eh}): ${t}`,...n)}}function ma(t,...e){if(mu.logLevel<=qt.ERROR){const n=e.map(av);mu.error(`Firestore (${eh}): ${t}`,...n)}}function Vc(t,...e){if(mu.logLevel<=qt.WARN){const n=e.map(av);mu.warn(`Firestore (${eh}): ${t}`,...n)}}function av(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vt(t="Unexpected state"){const e=`FIRESTORE (${eh}) INTERNAL ASSERTION FAILED: `+t;throw ma(e),new Error(e)}function un(t,e){t||vt()}function St(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ie={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Be extends Js{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aa{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MN{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class l7{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(ti.UNAUTHENTICATED))}shutdown(){}}class u7{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class c7{constructor(e){this.t=e,this.currentUser=ti.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){un(this.o===void 0);let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new aa;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new aa,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{Qe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(Qe("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new aa)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Qe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(un(typeof r.accessToken=="string"),new MN(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return un(e===null||typeof e=="string"),new ti(e)}}class h7{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=ti.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class d7{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new h7(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(ti.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class f7{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class p7{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){un(this.o===void 0);const r=s=>{s.error!=null&&Qe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,Qe("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{Qe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):Qe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(un(typeof n.token=="string"),this.R=n.token,new f7(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m7(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UN{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=m7(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function Jt(t,e){return t<e?-1:t>e?1:0}function Bc(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Be(Ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Be(Ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new Be(Ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Be(Ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return pr.fromMillis(Date.now())}static fromDate(e){return pr.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new pr(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Jt(this.nanoseconds,e.nanoseconds):Jt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Nt(e)}static min(){return new Nt(new pr(0,0))}static max(){return new Nt(new pr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dd{constructor(e,n,r){n===void 0?n=0:n>e.length&&vt(),r===void 0?r=e.length-n:r>e.length-n&&vt(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Dd.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Dd?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class En extends Dd{construct(e,n,r){return new En(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Be(Ie.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new En(n)}static emptyPath(){return new En([])}}const g7=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Fr extends Dd{construct(e,n,r){return new Fr(e,n,r)}static isValidIdentifier(e){return g7.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Fr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Fr(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new Be(Ie.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new Be(Ie.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new Be(Ie.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new Be(Ie.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Fr(n)}static emptyPath(){return new Fr([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{constructor(e){this.path=e}static fromPath(e){return new ut(En.fromString(e))}static fromName(e){return new ut(En.fromString(e).popFirst(5))}static empty(){return new ut(En.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&En.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return En.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ut(new En(e.slice()))}}function y7(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Nt.fromTimestamp(r===1e9?new pr(n+1,0):new pr(n,r));return new xl(i,ut.empty(),e)}function v7(t){return new xl(t.readTime,t.key,-1)}class xl{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new xl(Nt.min(),ut.empty(),-1)}static max(){return new xl(Nt.max(),ut.empty(),-1)}}function w7(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ut.comparator(t.documentKey,e.documentKey),n!==0?n:Jt(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x7="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class _7{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rf(t){if(t.code!==Ie.FAILED_PRECONDITION||t.message!==x7)throw t;Qe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class je{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&vt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new je((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof je?n:je.resolve(n)}catch(n){return je.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):je.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):je.reject(n)}static resolve(e){return new je((n,r)=>{n(e)})}static reject(e){return new je((n,r)=>{r(e)})}static waitFor(e){return new je((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=je.resolve(!1);for(const r of e)n=n.next(i=>i?je.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new je((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const u=l;n(e[u]).next(c=>{o[u]=c,++a,a===s&&r(o)},c=>i(c))}})}static doWhile(e,n){return new je((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function b7(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function sf(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lv{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}lv.oe=-1;function lg(t){return t==null}function wm(t){return t===0&&1/t==-1/0}function N7(t){return typeof t=="number"&&Number.isInteger(t)&&!wm(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wx(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ru(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function VN(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn{constructor(e,n){this.comparator=e,this.root=n||Or.EMPTY}insert(e,n){return new zn(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Or.BLACK,null,null))}remove(e){return new zn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Or.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ep(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ep(this.root,e,this.comparator,!1)}getReverseIterator(){return new ep(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ep(this.root,e,this.comparator,!0)}}class ep{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Or{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Or.RED,this.left=i??Or.EMPTY,this.right=s??Or.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new Or(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Or.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Or.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Or.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Or.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw vt();const e=this.left.check();if(e!==this.right.check())throw vt();return e+(this.isRed()?0:1)}}Or.EMPTY=null,Or.RED=!0,Or.BLACK=!1;Or.EMPTY=new class{constructor(){this.size=0}get key(){throw vt()}get value(){throw vt()}get color(){throw vt()}get left(){throw vt()}get right(){throw vt()}copy(e,n,r,i,s){return this}insert(e,n,r){return new Or(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vr{constructor(e){this.comparator=e,this.data=new zn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new $x(this.data.getIterator())}getIteratorFrom(e){return new $x(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Vr)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Vr(this.comparator);return n.data=e,n}}class $x{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es{constructor(e){this.fields=e,e.sort(Fr.comparator)}static empty(){return new es([])}unionWith(e){let n=new Vr(Fr.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new es(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Bc(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BN extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zr{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new BN("Invalid base64 string: "+s):s}}(e);return new zr(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new zr(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Jt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}zr.EMPTY_BYTE_STRING=new zr("");const S7=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function _l(t){if(un(!!t),typeof t=="string"){let e=0;const n=S7.exec(t);if(un(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ir(t.seconds),nanos:ir(t.nanos)}}function ir(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function gu(t){return typeof t=="string"?zr.fromBase64String(t):zr.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uv(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function cv(t){const e=t.mapValue.fields.__previous_value__;return uv(e)?cv(e):e}function Od(t){const e=_l(t.mapValue.fields.__local_write_time__.timestampValue);return new pr(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A7{constructor(e,n,r,i,s,o,a,l,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u}}class Fd{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Fd("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Fd&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tp={mapValue:{}};function yu(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?uv(t)?4:T7(t)?9007199254740991:E7(t)?10:11:vt()}function ko(t,e){if(t===e)return!0;const n=yu(t);if(n!==yu(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Od(t).isEqual(Od(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=_l(i.timestampValue),a=_l(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return gu(i.bytesValue).isEqual(gu(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return ir(i.geoPointValue.latitude)===ir(s.geoPointValue.latitude)&&ir(i.geoPointValue.longitude)===ir(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return ir(i.integerValue)===ir(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=ir(i.doubleValue),a=ir(s.doubleValue);return o===a?wm(o)===wm(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Bc(t.arrayValue.values||[],e.arrayValue.values||[],ko);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(Wx(o)!==Wx(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!ko(o[l],a[l])))return!1;return!0}(t,e);default:return vt()}}function Md(t,e){return(t.values||[]).find(n=>ko(n,e))!==void 0}function zc(t,e){if(t===e)return 0;const n=yu(t),r=yu(e);if(n!==r)return Jt(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Jt(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=ir(s.integerValue||s.doubleValue),l=ir(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return Gx(t.timestampValue,e.timestampValue);case 4:return Gx(Od(t),Od(e));case 5:return Jt(t.stringValue,e.stringValue);case 6:return function(s,o){const a=gu(s),l=gu(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let u=0;u<a.length&&u<l.length;u++){const c=Jt(a[u],l[u]);if(c!==0)return c}return Jt(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=Jt(ir(s.latitude),ir(o.latitude));return a!==0?a:Jt(ir(s.longitude),ir(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Kx(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,l,u,c;const g=s.fields||{},y=o.fields||{},m=(a=g.value)===null||a===void 0?void 0:a.arrayValue,N=(l=y.value)===null||l===void 0?void 0:l.arrayValue,A=Jt(((u=m==null?void 0:m.values)===null||u===void 0?void 0:u.length)||0,((c=N==null?void 0:N.values)===null||c===void 0?void 0:c.length)||0);return A!==0?A:Kx(m,N)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===tp.mapValue&&o===tp.mapValue)return 0;if(s===tp.mapValue)return 1;if(o===tp.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),u=o.fields||{},c=Object.keys(u);l.sort(),c.sort();for(let g=0;g<l.length&&g<c.length;++g){const y=Jt(l[g],c[g]);if(y!==0)return y;const m=zc(a[l[g]],u[c[g]]);if(m!==0)return m}return Jt(l.length,c.length)}(t.mapValue,e.mapValue);default:throw vt()}}function Gx(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Jt(t,e);const n=_l(t),r=_l(e),i=Jt(n.seconds,r.seconds);return i!==0?i:Jt(n.nanos,r.nanos)}function Kx(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=zc(n[i],r[i]);if(s)return s}return Jt(n.length,r.length)}function qc(t){return y2(t)}function y2(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=_l(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return gu(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ut.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=y2(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${y2(n.fields[o])}`;return i+"}"}(t.mapValue):vt()}function Yx(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function v2(t){return!!t&&"integerValue"in t}function hv(t){return!!t&&"arrayValue"in t}function Qx(t){return!!t&&"nullValue"in t}function Jx(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Cp(t){return!!t&&"mapValue"in t}function E7(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function sd(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Ru(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=sd(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=sd(t.arrayValue.values[n]);return e}return Object.assign({},t)}function T7(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki{constructor(e){this.value=e}static empty(){return new ki({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Cp(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=sd(n)}setAll(e){let n=Fr.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=sd(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Cp(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ko(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Cp(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Ru(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new ki(sd(this.value))}}function zN(t){const e=[];return Ru(t.fields,(n,r)=>{const i=new Fr([n]);if(Cp(r)){const s=zN(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new es(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ri{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new ri(e,0,Nt.min(),Nt.min(),Nt.min(),ki.empty(),0)}static newFoundDocument(e,n,r,i){return new ri(e,1,n,Nt.min(),r,i,0)}static newNoDocument(e,n){return new ri(e,2,n,Nt.min(),Nt.min(),ki.empty(),0)}static newUnknownDocument(e,n){return new ri(e,3,n,Nt.min(),Nt.min(),ki.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Nt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ki.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ki.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Nt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ri&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ri(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xm{constructor(e,n){this.position=e,this.inclusive=n}}function Xx(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=ut.comparator(ut.fromName(o.referenceValue),n.key):r=zc(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function Zx(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ko(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ud{constructor(e,n="asc"){this.field=e,this.dir=n}}function I7(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qN{}class fr extends qN{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new P7(e,n,r):n==="array-contains"?new R7(e,r):n==="in"?new j7(e,r):n==="not-in"?new D7(e,r):n==="array-contains-any"?new O7(e,r):new fr(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new C7(e,r):new L7(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(zc(n,this.value)):n!==null&&yu(this.value)===yu(n)&&this.matchesComparison(zc(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return vt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ys extends qN{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Ys(e,n)}matches(e){return HN(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function HN(t){return t.op==="and"}function WN(t){return k7(t)&&HN(t)}function k7(t){for(const e of t.filters)if(e instanceof Ys)return!1;return!0}function w2(t){if(t instanceof fr)return t.field.canonicalString()+t.op.toString()+qc(t.value);if(WN(t))return t.filters.map(e=>w2(e)).join(",");{const e=t.filters.map(n=>w2(n)).join(",");return`${t.op}(${e})`}}function $N(t,e){return t instanceof fr?function(r,i){return i instanceof fr&&r.op===i.op&&r.field.isEqual(i.field)&&ko(r.value,i.value)}(t,e):t instanceof Ys?function(r,i){return i instanceof Ys&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&$N(o,i.filters[a]),!0):!1}(t,e):void vt()}function GN(t){return t instanceof fr?function(n){return`${n.field.canonicalString()} ${n.op} ${qc(n.value)}`}(t):t instanceof Ys?function(n){return n.op.toString()+" {"+n.getFilters().map(GN).join(" ,")+"}"}(t):"Filter"}class P7 extends fr{constructor(e,n,r){super(e,n,r),this.key=ut.fromName(r.referenceValue)}matches(e){const n=ut.comparator(e.key,this.key);return this.matchesComparison(n)}}class C7 extends fr{constructor(e,n){super(e,"in",n),this.keys=KN("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class L7 extends fr{constructor(e,n){super(e,"not-in",n),this.keys=KN("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function KN(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>ut.fromName(r.referenceValue))}class R7 extends fr{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return hv(n)&&Md(n.arrayValue,this.value)}}class j7 extends fr{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Md(this.value.arrayValue,n)}}class D7 extends fr{constructor(e,n){super(e,"not-in",n)}matches(e){if(Md(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Md(this.value.arrayValue,n)}}class O7 extends fr{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!hv(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Md(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F7{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function e_(t,e=null,n=[],r=[],i=null,s=null,o=null){return new F7(t,e,n,r,i,s,o)}function dv(t){const e=St(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>w2(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),lg(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>qc(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>qc(r)).join(",")),e.ue=n}return e.ue}function fv(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!I7(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!$N(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Zx(t.startAt,e.startAt)&&Zx(t.endAt,e.endAt)}function x2(t){return ut.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class th{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function M7(t,e,n,r,i,s,o,a){return new th(t,e,n,r,i,s,o,a)}function ug(t){return new th(t)}function t_(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function YN(t){return t.collectionGroup!==null}function od(t){const e=St(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Vr(Fr.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Ud(s,r))}),n.has(Fr.keyField().canonicalString())||e.ce.push(new Ud(Fr.keyField(),r))}return e.ce}function To(t){const e=St(t);return e.le||(e.le=U7(e,od(t))),e.le}function U7(t,e){if(t.limitType==="F")return e_(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Ud(i.field,s)});const n=t.endAt?new xm(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new xm(t.startAt.position,t.startAt.inclusive):null;return e_(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function _2(t,e){const n=t.filters.concat([e]);return new th(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function b2(t,e,n){return new th(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function cg(t,e){return fv(To(t),To(e))&&t.limitType===e.limitType}function QN(t){return`${dv(To(t))}|lt:${t.limitType}`}function Xu(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>GN(i)).join(", ")}]`),lg(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>qc(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>qc(i)).join(",")),`Target(${r})`}(To(t))}; limitType=${t.limitType})`}function hg(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):ut.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of od(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const u=Xx(o,a,l);return o.inclusive?u<=0:u<0}(r.startAt,od(r),i)||r.endAt&&!function(o,a,l){const u=Xx(o,a,l);return o.inclusive?u>=0:u>0}(r.endAt,od(r),i))}(t,e)}function V7(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function JN(t){return(e,n)=>{let r=!1;for(const i of od(t)){const s=B7(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function B7(t,e,n){const r=t.field.isKeyField()?ut.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),u=a.data.field(s);return l!==null&&u!==null?zc(l,u):vt()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return vt()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nh{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ru(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return VN(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z7=new zn(ut.comparator);function ga(){return z7}const XN=new zn(ut.comparator);function $h(...t){let e=XN;for(const n of t)e=e.insert(n.key,n);return e}function ZN(t){let e=XN;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function tu(){return ad()}function eS(){return ad()}function ad(){return new nh(t=>t.toString(),(t,e)=>t.isEqual(e))}const q7=new zn(ut.comparator),H7=new Vr(ut.comparator);function Vt(...t){let e=H7;for(const n of t)e=e.add(n);return e}const W7=new Vr(Jt);function $7(){return W7}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pv(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:wm(e)?"-0":e}}function tS(t){return{integerValue:""+t}}function G7(t,e){return N7(e)?tS(e):pv(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dg{constructor(){this._=void 0}}function K7(t,e,n){return t instanceof Vd?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&uv(s)&&(s=cv(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof Hc?rS(t,e):t instanceof Bd?iS(t,e):function(i,s){const o=nS(i,s),a=n_(o)+n_(i.Pe);return v2(o)&&v2(i.Pe)?tS(a):pv(i.serializer,a)}(t,e)}function Y7(t,e,n){return t instanceof Hc?rS(t,e):t instanceof Bd?iS(t,e):n}function nS(t,e){return t instanceof _m?function(r){return v2(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Vd extends dg{}class Hc extends dg{constructor(e){super(),this.elements=e}}function rS(t,e){const n=sS(e);for(const r of t.elements)n.some(i=>ko(i,r))||n.push(r);return{arrayValue:{values:n}}}class Bd extends dg{constructor(e){super(),this.elements=e}}function iS(t,e){let n=sS(e);for(const r of t.elements)n=n.filter(i=>!ko(i,r));return{arrayValue:{values:n}}}class _m extends dg{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function n_(t){return ir(t.integerValue||t.doubleValue)}function sS(t){return hv(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oS{constructor(e,n){this.field=e,this.transform=n}}function Q7(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Hc&&i instanceof Hc||r instanceof Bd&&i instanceof Bd?Bc(r.elements,i.elements,ko):r instanceof _m&&i instanceof _m?ko(r.Pe,i.Pe):r instanceof Vd&&i instanceof Vd}(t.transform,e.transform)}class J7{constructor(e,n){this.version=e,this.transformResults=n}}class vi{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new vi}static exists(e){return new vi(void 0,e)}static updateTime(e){return new vi(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Lp(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class fg{}function aS(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new pg(t.key,vi.none()):new of(t.key,t.data,vi.none());{const n=t.data,r=ki.empty();let i=new Vr(Fr.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Pl(t.key,r,new es(i.toArray()),vi.none())}}function X7(t,e,n){t instanceof of?function(i,s,o){const a=i.value.clone(),l=i_(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Pl?function(i,s,o){if(!Lp(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=i_(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(lS(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function ld(t,e,n,r){return t instanceof of?function(s,o,a,l){if(!Lp(s.precondition,o))return a;const u=s.value.clone(),c=s_(s.fieldTransforms,l,o);return u.setAll(c),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof Pl?function(s,o,a,l){if(!Lp(s.precondition,o))return a;const u=s_(s.fieldTransforms,l,o),c=o.data;return c.setAll(lS(s)),c.setAll(u),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(g=>g.field))}(t,e,n,r):function(s,o,a){return Lp(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function Z7(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=nS(r.transform,i||null);s!=null&&(n===null&&(n=ki.empty()),n.set(r.field,s))}return n||null}function r_(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Bc(r,i,(s,o)=>Q7(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class of extends fg{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Pl extends fg{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function lS(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function i_(t,e,n){const r=new Map;un(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,Y7(o,a,n[i]))}return r}function s_(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,K7(s,o,e))}return r}class pg extends fg{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ej extends fg{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tj{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&X7(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=ld(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=ld(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=eS();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=aS(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(Nt.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Vt())}isEqual(e){return this.batchId===e.batchId&&Bc(this.mutations,e.mutations,(n,r)=>r_(n,r))&&Bc(this.baseMutations,e.baseMutations,(n,r)=>r_(n,r))}}class mv{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){un(e.mutations.length===r.length);let i=function(){return q7}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new mv(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nj{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rj{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var hr,Gt;function ij(t){switch(t){default:return vt();case Ie.CANCELLED:case Ie.UNKNOWN:case Ie.DEADLINE_EXCEEDED:case Ie.RESOURCE_EXHAUSTED:case Ie.INTERNAL:case Ie.UNAVAILABLE:case Ie.UNAUTHENTICATED:return!1;case Ie.INVALID_ARGUMENT:case Ie.NOT_FOUND:case Ie.ALREADY_EXISTS:case Ie.PERMISSION_DENIED:case Ie.FAILED_PRECONDITION:case Ie.ABORTED:case Ie.OUT_OF_RANGE:case Ie.UNIMPLEMENTED:case Ie.DATA_LOSS:return!0}}function uS(t){if(t===void 0)return ma("GRPC error has no .code"),Ie.UNKNOWN;switch(t){case hr.OK:return Ie.OK;case hr.CANCELLED:return Ie.CANCELLED;case hr.UNKNOWN:return Ie.UNKNOWN;case hr.DEADLINE_EXCEEDED:return Ie.DEADLINE_EXCEEDED;case hr.RESOURCE_EXHAUSTED:return Ie.RESOURCE_EXHAUSTED;case hr.INTERNAL:return Ie.INTERNAL;case hr.UNAVAILABLE:return Ie.UNAVAILABLE;case hr.UNAUTHENTICATED:return Ie.UNAUTHENTICATED;case hr.INVALID_ARGUMENT:return Ie.INVALID_ARGUMENT;case hr.NOT_FOUND:return Ie.NOT_FOUND;case hr.ALREADY_EXISTS:return Ie.ALREADY_EXISTS;case hr.PERMISSION_DENIED:return Ie.PERMISSION_DENIED;case hr.FAILED_PRECONDITION:return Ie.FAILED_PRECONDITION;case hr.ABORTED:return Ie.ABORTED;case hr.OUT_OF_RANGE:return Ie.OUT_OF_RANGE;case hr.UNIMPLEMENTED:return Ie.UNIMPLEMENTED;case hr.DATA_LOSS:return Ie.DATA_LOSS;default:return vt()}}(Gt=hr||(hr={}))[Gt.OK=0]="OK",Gt[Gt.CANCELLED=1]="CANCELLED",Gt[Gt.UNKNOWN=2]="UNKNOWN",Gt[Gt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Gt[Gt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Gt[Gt.NOT_FOUND=5]="NOT_FOUND",Gt[Gt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Gt[Gt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Gt[Gt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Gt[Gt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Gt[Gt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Gt[Gt.ABORTED=10]="ABORTED",Gt[Gt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Gt[Gt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Gt[Gt.INTERNAL=13]="INTERNAL",Gt[Gt.UNAVAILABLE=14]="UNAVAILABLE",Gt[Gt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sj(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oj=new su([4294967295,4294967295],0);function o_(t){const e=sj().encode(t),n=new LN;return n.update(e),new Uint8Array(n.digest())}function a_(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new su([n,r],0),new su([i,s],0)]}class gv{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Gh(`Invalid padding: ${n}`);if(r<0)throw new Gh(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Gh(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Gh(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=su.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(su.fromNumber(r)));return i.compare(oj)===1&&(i=new su([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=o_(e),[r,i]=a_(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new gv(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=o_(e),[r,i]=a_(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Gh extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mg{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,af.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new mg(Nt.min(),i,new zn(Jt),ga(),Vt())}}class af{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new af(r,n,Vt(),Vt(),Vt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rp{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class cS{constructor(e,n){this.targetId=e,this.me=n}}class hS{constructor(e,n,r=zr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class l_{constructor(){this.fe=0,this.ge=c_(),this.pe=zr.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Vt(),n=Vt(),r=Vt();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:vt()}}),new af(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=c_()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,un(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class aj{constructor(e){this.Le=e,this.Be=new Map,this.ke=ga(),this.qe=u_(),this.Qe=new zn(Jt)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:vt()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const s=i.target;if(x2(s))if(r===0){const o=new ut(s.path);this.Ue(n,o,ri.newNoDocument(o,Nt.min()))}else un(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(n);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,u)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=gu(r).toUint8Array()}catch(l){if(l instanceof BN)return Vc("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new gv(o,i,s)}catch(l){return Vc(l instanceof Gh?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&x2(a.target)){const l=new ut(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,ri.newNoDocument(l,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=Vt();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const u=this.Je(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new mg(e,n,this.Qe,this.ke,r);return this.ke=ga(),this.qe=u_(),this.Qe=new zn(Jt),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new l_,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Vr(Jt),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||Qe("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new l_),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function u_(){return new zn(ut.comparator)}function c_(){return new zn(ut.comparator)}const lj={asc:"ASCENDING",desc:"DESCENDING"},uj={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},cj={and:"AND",or:"OR"};class hj{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function N2(t,e){return t.useProto3Json||lg(e)?e:{value:e}}function bm(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function dS(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function dj(t,e){return bm(t,e.toTimestamp())}function Io(t){return un(!!t),Nt.fromTimestamp(function(n){const r=_l(n);return new pr(r.seconds,r.nanos)}(t))}function yv(t,e){return S2(t,e).canonicalString()}function S2(t,e){const n=function(i){return new En(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function fS(t){const e=En.fromString(t);return un(vS(e)),e}function A2(t,e){return yv(t.databaseId,e.path)}function I0(t,e){const n=fS(e);if(n.get(1)!==t.databaseId.projectId)throw new Be(Ie.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Be(Ie.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ut(mS(n))}function pS(t,e){return yv(t.databaseId,e)}function fj(t){const e=fS(t);return e.length===4?En.emptyPath():mS(e)}function E2(t){return new En(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function mS(t){return un(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function h_(t,e,n){return{name:A2(t,e),fields:n.value.mapValue.fields}}function pj(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:vt()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(u,c){return u.useProto3Json?(un(c===void 0||typeof c=="string"),zr.fromBase64String(c||"")):(un(c===void 0||c instanceof Buffer||c instanceof Uint8Array),zr.fromUint8Array(c||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const c=u.code===void 0?Ie.UNKNOWN:uS(u.code);return new Be(c,u.message||"")}(o);n=new hS(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=I0(t,r.document.name),s=Io(r.document.updateTime),o=r.document.createTime?Io(r.document.createTime):Nt.min(),a=new ki({mapValue:{fields:r.document.fields}}),l=ri.newFoundDocument(i,s,o,a),u=r.targetIds||[],c=r.removedTargetIds||[];n=new Rp(u,c,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=I0(t,r.document),s=r.readTime?Io(r.readTime):Nt.min(),o=ri.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Rp([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=I0(t,r.document),s=r.removedTargetIds||[];n=new Rp([],s,i,null)}else{if(!("filter"in e))return vt();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new rj(i,s),a=r.targetId;n=new cS(a,o)}}return n}function mj(t,e){let n;if(e instanceof of)n={update:h_(t,e.key,e.value)};else if(e instanceof pg)n={delete:A2(t,e.key)};else if(e instanceof Pl)n={update:h_(t,e.key,e.data),updateMask:Sj(e.fieldMask)};else{if(!(e instanceof ej))return vt();n={verify:A2(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof Vd)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Hc)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Bd)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof _m)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw vt()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:dj(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:vt()}(t,e.precondition)),n}function gj(t,e){return t&&t.length>0?(un(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?Io(i.updateTime):Io(s);return o.isEqual(Nt.min())&&(o=Io(s)),new J7(o,i.transformResults||[])}(n,e))):[]}function yj(t,e){return{documents:[pS(t,e.path)]}}function vj(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=pS(t,i);const s=function(u){if(u.length!==0)return yS(Ys.create(u,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(u){if(u.length!==0)return u.map(c=>function(y){return{field:Zu(y.field),direction:_j(y.dir)}}(c))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=N2(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{_t:n,parent:i}}function wj(t){let e=fj(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){un(r===1);const c=n.from[0];c.allDescendants?i=c.collectionId:e=e.child(c.collectionId)}let s=[];n.where&&(s=function(g){const y=gS(g);return y instanceof Ys&&WN(y)?y.getFilters():[y]}(n.where));let o=[];n.orderBy&&(o=function(g){return g.map(y=>function(N){return new Ud(ec(N.field),function(C){switch(C){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction))}(y))}(n.orderBy));let a=null;n.limit&&(a=function(g){let y;return y=typeof g=="object"?g.value:g,lg(y)?null:y}(n.limit));let l=null;n.startAt&&(l=function(g){const y=!!g.before,m=g.values||[];return new xm(m,y)}(n.startAt));let u=null;return n.endAt&&(u=function(g){const y=!g.before,m=g.values||[];return new xm(m,y)}(n.endAt)),M7(e,i,o,s,a,"F",l,u)}function xj(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return vt()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function gS(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=ec(n.unaryFilter.field);return fr.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=ec(n.unaryFilter.field);return fr.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=ec(n.unaryFilter.field);return fr.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=ec(n.unaryFilter.field);return fr.create(o,"!=",{nullValue:"NULL_VALUE"});default:return vt()}}(t):t.fieldFilter!==void 0?function(n){return fr.create(ec(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return vt()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Ys.create(n.compositeFilter.filters.map(r=>gS(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return vt()}}(n.compositeFilter.op))}(t):vt()}function _j(t){return lj[t]}function bj(t){return uj[t]}function Nj(t){return cj[t]}function Zu(t){return{fieldPath:t.canonicalString()}}function ec(t){return Fr.fromServerFormat(t.fieldPath)}function yS(t){return t instanceof fr?function(n){if(n.op==="=="){if(Jx(n.value))return{unaryFilter:{field:Zu(n.field),op:"IS_NAN"}};if(Qx(n.value))return{unaryFilter:{field:Zu(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Jx(n.value))return{unaryFilter:{field:Zu(n.field),op:"IS_NOT_NAN"}};if(Qx(n.value))return{unaryFilter:{field:Zu(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Zu(n.field),op:bj(n.op),value:n.value}}}(t):t instanceof Ys?function(n){const r=n.getFilters().map(i=>yS(i));return r.length===1?r[0]:{compositeFilter:{op:Nj(n.op),filters:r}}}(t):vt()}function Sj(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function vS(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class il{constructor(e,n,r,i,s=Nt.min(),o=Nt.min(),a=zr.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new il(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new il(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new il(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new il(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aj{constructor(e){this.ct=e}}function Ej(t){const e=wj({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?b2(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tj{constructor(){this.un=new Ij}addToCollectionParentIndex(e,n){return this.un.add(n),je.resolve()}getCollectionParents(e,n){return je.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return je.resolve()}deleteFieldIndex(e,n){return je.resolve()}deleteAllFieldIndexes(e){return je.resolve()}createTargetIndexes(e,n){return je.resolve()}getDocumentsMatchingTarget(e,n){return je.resolve(null)}getIndexType(e,n){return je.resolve(0)}getFieldIndexes(e,n){return je.resolve([])}getNextCollectionGroupToUpdate(e){return je.resolve(null)}getMinOffset(e,n){return je.resolve(xl.min())}getMinOffsetFromCollectionGroup(e,n){return je.resolve(xl.min())}updateCollectionGroup(e,n,r){return je.resolve()}updateIndexEntries(e,n){return je.resolve()}}class Ij{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Vr(En.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Vr(En.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wc{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Wc(0)}static kn(){return new Wc(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kj{constructor(){this.changes=new nh(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ri.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?je.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pj{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cj{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&ld(r.mutation,i,es.empty(),pr.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Vt()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Vt()){const i=tu();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=$h();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=tu();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Vt()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=ga();const o=ad(),a=function(){return ad()}();return n.forEach((l,u)=>{const c=r.get(u.key);i.has(u.key)&&(c===void 0||c.mutation instanceof Pl)?s=s.insert(u.key,u):c!==void 0?(o.set(u.key,c.mutation.getFieldMask()),ld(c.mutation,u,c.mutation.getFieldMask(),pr.now())):o.set(u.key,es.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((u,c)=>o.set(u,c)),n.forEach((u,c)=>{var g;return a.set(u,new Pj(c,(g=o.get(u))!==null&&g!==void 0?g:null))}),a))}recalculateAndSaveOverlays(e,n){const r=ad();let i=new zn((o,a)=>o-a),s=Vt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const u=n.get(l);if(u===null)return;let c=r.get(l)||es.empty();c=a.applyToLocalView(u,c),r.set(l,c);const g=(i.get(a.batchId)||Vt()).add(l);i=i.insert(a.batchId,g)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,c=l.value,g=eS();c.forEach(y=>{if(!s.has(y)){const m=aS(n.get(y),r.get(y));m!==null&&g.set(y,m),s=s.add(y)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,g))}return je.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return ut.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):YN(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):je.resolve(tu());let a=-1,l=s;return o.next(u=>je.forEach(u,(c,g)=>(a<g.largestBatchId&&(a=g.largestBatchId),s.get(c)?je.resolve():this.remoteDocumentCache.getEntry(e,c).next(y=>{l=l.insert(c,y)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,l,u,Vt())).next(c=>({batchId:a,changes:ZN(c)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ut(n)).next(r=>{let i=$h();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=$h();return this.indexManager.getCollectionParents(e,s).next(a=>je.forEach(a,l=>{const u=function(g,y){return new th(y,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(c=>{c.forEach((g,y)=>{o=o.insert(g,y)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((l,u)=>{const c=u.getKey();o.get(c)===null&&(o=o.insert(c,ri.newInvalidDocument(c)))});let a=$h();return o.forEach((l,u)=>{const c=s.get(l);c!==void 0&&ld(c.mutation,u,es.empty(),pr.now()),hg(n,u)&&(a=a.insert(l,u))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lj{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return je.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Io(i.createTime)}}(n)),je.resolve()}getNamedQuery(e,n){return je.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:Ej(i.bundledQuery),readTime:Io(i.readTime)}}(n)),je.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rj{constructor(){this.overlays=new zn(ut.comparator),this.Ir=new Map}getOverlay(e,n){return je.resolve(this.overlays.get(n))}getOverlays(e,n){const r=tu();return je.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),je.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),je.resolve()}getOverlaysForCollection(e,n,r){const i=tu(),s=n.length+1,o=new ut(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return je.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new zn((u,c)=>u-c);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let c=s.get(u.largestBatchId);c===null&&(c=tu(),s=s.insert(u.largestBatchId,c)),c.set(u.getKey(),u)}}const a=tu(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,c)=>a.set(u,c)),!(a.size()>=i)););return je.resolve(a)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new nj(n,r));let s=this.Ir.get(n);s===void 0&&(s=Vt(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jj{constructor(){this.sessionToken=zr.EMPTY_BYTE_STRING}getSessionToken(e){return je.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,je.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vv{constructor(){this.Tr=new Vr(Er.Er),this.dr=new Vr(Er.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new Er(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Er(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new ut(new En([])),r=new Er(n,e),i=new Er(n,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new ut(new En([])),r=new Er(n,e),i=new Er(n,e+1);let s=Vt();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new Er(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Er{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return ut.comparator(e.key,n.key)||Jt(e.wr,n.wr)}static Ar(e,n){return Jt(e.wr,n.wr)||ut.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dj{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Vr(Er.Er)}checkEmpty(e){return je.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new tj(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.br=this.br.add(new Er(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return je.resolve(o)}lookupMutationBatch(e,n){return je.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),s=i<0?0:i;return je.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return je.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return je.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Er(n,0),i=new Er(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{const a=this.Dr(o.wr);s.push(a)}),je.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Vr(Jt);return n.forEach(i=>{const s=new Er(i,0),o=new Er(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),je.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;ut.isDocumentKey(s)||(s=s.child(""));const o=new Er(new ut(s),0);let a=new Vr(Jt);return this.br.forEachWhile(l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(l.wr)),!0)},o),je.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){un(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return je.forEach(n.mutations,i=>{const s=new Er(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new Er(n,0),i=this.br.firstAfterOrEqual(r);return je.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,je.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oj{constructor(e){this.Mr=e,this.docs=function(){return new zn(ut.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return je.resolve(r?r.document.mutableCopy():ri.newInvalidDocument(n))}getEntries(e,n){let r=ga();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():ri.newInvalidDocument(i))}),je.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=ga();const o=n.path,a=new ut(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:c}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||w7(v7(c),r)<=0||(i.has(c.key)||hg(n,c))&&(s=s.insert(c.key,c.mutableCopy()))}return je.resolve(s)}getAllFromCollectionGroup(e,n,r,i){vt()}Or(e,n){return je.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Fj(this)}getSize(e){return je.resolve(this.size)}}class Fj extends kj{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),je.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mj{constructor(e){this.persistence=e,this.Nr=new nh(n=>dv(n),fv),this.lastRemoteSnapshotVersion=Nt.min(),this.highestTargetId=0,this.Lr=0,this.Br=new vv,this.targetCount=0,this.kr=Wc.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),je.resolve()}getLastRemoteSnapshotVersion(e){return je.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return je.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),je.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),je.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Wc(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,je.resolve()}updateTargetData(e,n){return this.Kn(n),je.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,je.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),je.waitFor(s).next(()=>i)}getTargetCount(e){return je.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return je.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),je.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),je.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),je.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return je.resolve(r)}containsKey(e,n){return je.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uj{constructor(e,n){this.qr={},this.overlays={},this.Qr=new lv(0),this.Kr=!1,this.Kr=!0,this.$r=new jj,this.referenceDelegate=e(this),this.Ur=new Mj(this),this.indexManager=new Tj,this.remoteDocumentCache=function(i){return new Oj(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new Aj(n),this.Gr=new Lj(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Rj,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new Dj(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){Qe("MemoryPersistence","Starting transaction:",e);const i=new Vj(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return je.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class Vj extends _7{constructor(e){super(),this.currentSequenceNumber=e}}class wv{constructor(e){this.persistence=e,this.Jr=new vv,this.Yr=null}static Zr(e){return new wv(e)}get Xr(){if(this.Yr)return this.Yr;throw vt()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),je.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),je.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),je.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return je.forEach(this.Xr,r=>{const i=ut.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,Nt.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return je.or([()=>je.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xv{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=Vt(),i=Vt();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new xv(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bj{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zj{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return RP()?8:b7(ai())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new Bj;return this.Xi(e,n,o).next(a=>{if(s.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(Dh()<=qt.DEBUG&&Qe("QueryEngine","SDK will not create cache indexes for query:",Xu(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),je.resolve()):(Dh()<=qt.DEBUG&&Qe("QueryEngine","Query:",Xu(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Dh()<=qt.DEBUG&&Qe("QueryEngine","The SDK decides to create cache indexes for query:",Xu(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,To(n))):je.resolve())}Yi(e,n){if(t_(n))return je.resolve(null);let r=To(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=b2(n,null,"F"),r=To(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=Vt(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const u=this.ts(n,a);return this.ns(n,u,o,l.readTime)?this.Yi(e,b2(n,null,"F")):this.rs(e,u,n,l)}))})))}Zi(e,n,r,i){return t_(n)||i.isEqual(Nt.min())?je.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const o=this.ts(n,s);return this.ns(n,o,r,i)?je.resolve(null):(Dh()<=qt.DEBUG&&Qe("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Xu(n)),this.rs(e,o,n,y7(i,-1)).next(a=>a))})}ts(e,n){let r=new Vr(JN(e));return n.forEach((i,s)=>{hg(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return Dh()<=qt.DEBUG&&Qe("QueryEngine","Using full collection scan to execute query:",Xu(n)),this.Ji.getDocumentsMatchingQuery(e,n,xl.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qj{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new zn(Jt),this._s=new nh(s=>dv(s),fv),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Cj(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function Hj(t,e,n,r){return new qj(t,e,n,r)}async function wS(t,e){const n=St(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=Vt();for(const u of i){o.push(u.batchId);for(const c of u.mutations)l=l.add(c.key)}for(const u of s){a.push(u.batchId);for(const c of u.mutations)l=l.add(c.key)}return n.localDocuments.getDocuments(r,l).next(u=>({hs:u,removedBatchIds:o,addedBatchIds:a}))})})}function Wj(t,e){const n=St(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,u,c){const g=u.batch,y=g.keys();let m=je.resolve();return y.forEach(N=>{m=m.next(()=>c.getEntry(l,N)).next(A=>{const C=u.docVersions.get(N);un(C!==null),A.version.compareTo(C)<0&&(g.applyToRemoteDocument(A,u),A.isValidDocument()&&(A.setReadTime(u.commitVersion),c.addEntry(A)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(l,g))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=Vt();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function xS(t){const e=St(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function $j(t,e){const n=St(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const a=[];e.targetChanges.forEach((c,g)=>{const y=i.get(g);if(!y)return;a.push(n.Ur.removeMatchingKeys(s,c.removedDocuments,g).next(()=>n.Ur.addMatchingKeys(s,c.addedDocuments,g)));let m=y.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(g)!==null?m=m.withResumeToken(zr.EMPTY_BYTE_STRING,Nt.min()).withLastLimboFreeSnapshotVersion(Nt.min()):c.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(c.resumeToken,r)),i=i.insert(g,m),function(A,C,_){return A.resumeToken.approximateByteSize()===0||C.snapshotVersion.toMicroseconds()-A.snapshotVersion.toMicroseconds()>=3e8?!0:_.addedDocuments.size+_.modifiedDocuments.size+_.removedDocuments.size>0}(y,m,c)&&a.push(n.Ur.updateTargetData(s,m))});let l=ga(),u=Vt();if(e.documentUpdates.forEach(c=>{e.resolvedLimboDocuments.has(c)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,c))}),a.push(Gj(s,o,e.documentUpdates).next(c=>{l=c.Ps,u=c.Is})),!r.isEqual(Nt.min())){const c=n.Ur.getLastRemoteSnapshotVersion(s).next(g=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(c)}return je.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,u)).next(()=>l)}).then(s=>(n.os=i,s))}function Gj(t,e,n){let r=Vt(),i=Vt();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=ga();return n.forEach((a,l)=>{const u=s.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(Nt.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):Qe("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{Ps:o,Is:i}})}function Kj(t,e){const n=St(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Yj(t,e){const n=St(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,je.resolve(i)):n.Ur.allocateTargetId(r).next(o=>(i=new il(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function T2(t,e,n){const r=St(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!sf(o))throw o;Qe("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function d_(t,e,n){const r=St(t);let i=Nt.min(),s=Vt();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,u,c){const g=St(l),y=g._s.get(c);return y!==void 0?je.resolve(g.os.get(y)):g.Ur.getTargetData(u,c)}(r,o,To(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?i:Nt.min(),n?s:Vt())).next(a=>(Qj(r,V7(e),a),{documents:a,Ts:s})))}function Qj(t,e,n){let r=t.us.get(e)||Nt.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}class f_{constructor(){this.activeTargetIds=$7()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Jj{constructor(){this.so=new f_,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new f_,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xj{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p_{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Qe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){Qe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let np=null;function k0(){return np===null?np=function(){return 268435456+Math.round(2147483648*Math.random())}():np++,"0x"+np.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zj={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eD{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qr="WebChannelConnection";class tD extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,o){const a=k0(),l=this.xo(n,r.toUriEncodedString());Qe("RestConnection",`Sending RPC '${n}' ${a}:`,l,i);const u={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(u,s,o),this.No(n,l,u,i).then(c=>(Qe("RestConnection",`Received RPC '${n}' ${a}: `,c),c),c=>{throw Vc("RestConnection",`RPC '${n}' ${a} failed with error: `,c,"url: ",l,"request:",i),c})}Lo(n,r,i,s,o,a){return this.Mo(n,r,i,s,o)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+eh}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}xo(n,r){const i=Zj[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const s=k0();return new Promise((o,a)=>{const l=new RN;l.setWithCredentials(!0),l.listenOnce(jN.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Pp.NO_ERROR:const c=l.getResponseJson();Qe(Qr,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(c)),o(c);break;case Pp.TIMEOUT:Qe(Qr,`RPC '${e}' ${s} timed out`),a(new Be(Ie.DEADLINE_EXCEEDED,"Request time out"));break;case Pp.HTTP_ERROR:const g=l.getStatus();if(Qe(Qr,`RPC '${e}' ${s} failed with status:`,g,"response text:",l.getResponseText()),g>0){let y=l.getResponseJson();Array.isArray(y)&&(y=y[0]);const m=y==null?void 0:y.error;if(m&&m.status&&m.message){const N=function(C){const _=C.toLowerCase().replace(/_/g,"-");return Object.values(Ie).indexOf(_)>=0?_:Ie.UNKNOWN}(m.status);a(new Be(N,m.message))}else a(new Be(Ie.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new Be(Ie.UNAVAILABLE,"Connection failed."));break;default:vt()}}finally{Qe(Qr,`RPC '${e}' ${s} completed.`)}});const u=JSON.stringify(i);Qe(Qr,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",u,r,15)})}Bo(e,n,r){const i=k0(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=FN(),a=ON(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const c=s.join("");Qe(Qr,`Creating RPC '${e}' stream ${i}: ${c}`,l);const g=o.createWebChannel(c,l);let y=!1,m=!1;const N=new eD({Io:C=>{m?Qe(Qr,`Not sending because RPC '${e}' stream ${i} is closed:`,C):(y||(Qe(Qr,`Opening RPC '${e}' stream ${i} transport.`),g.open(),y=!0),Qe(Qr,`RPC '${e}' stream ${i} sending:`,C),g.send(C))},To:()=>g.close()}),A=(C,_,k)=>{C.listen(_,R=>{try{k(R)}catch(D){setTimeout(()=>{throw D},0)}})};return A(g,Wh.EventType.OPEN,()=>{m||(Qe(Qr,`RPC '${e}' stream ${i} transport opened.`),N.yo())}),A(g,Wh.EventType.CLOSE,()=>{m||(m=!0,Qe(Qr,`RPC '${e}' stream ${i} transport closed`),N.So())}),A(g,Wh.EventType.ERROR,C=>{m||(m=!0,Vc(Qr,`RPC '${e}' stream ${i} transport errored:`,C),N.So(new Be(Ie.UNAVAILABLE,"The operation could not be completed")))}),A(g,Wh.EventType.MESSAGE,C=>{var _;if(!m){const k=C.data[0];un(!!k);const R=k,D=R.error||((_=R[0])===null||_===void 0?void 0:_.error);if(D){Qe(Qr,`RPC '${e}' stream ${i} received error:`,D);const z=D.status;let Q=function(I){const F=hr[I];if(F!==void 0)return uS(F)}(z),j=D.message;Q===void 0&&(Q=Ie.INTERNAL,j="Unknown error status: "+z+" with message "+D.message),m=!0,N.So(new Be(Q,j)),g.close()}else Qe(Qr,`RPC '${e}' stream ${i} received:`,k),N.bo(k)}}),A(a,DN.STAT_EVENT,C=>{C.stat===g2.PROXY?Qe(Qr,`RPC '${e}' stream ${i} detected buffering proxy`):C.stat===g2.NOPROXY&&Qe(Qr,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{N.wo()},0),N}}function P0(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gg(t){return new hj(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _S{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&Qe("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bS{constructor(e,n,r,i,s,o,a,l){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new _S(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===Ie.RESOURCE_EXHAUSTED?(ma(n.toString()),ma("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===Ie.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new Be(Ie.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return Qe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(Qe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class nD extends bS{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=pj(this.serializer,e),r=function(s){if(!("targetChange"in s))return Nt.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?Nt.min():o.readTime?Io(o.readTime):Nt.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=E2(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=x2(l)?{documents:yj(s,l)}:{query:vj(s,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=dS(s,o.resumeToken);const u=N2(s,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(Nt.min())>0){a.readTime=bm(s,o.snapshotVersion.toTimestamp());const u=N2(s,o.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);const r=xj(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=E2(this.serializer),n.removeTarget=e,this.a_(n)}}class rD extends bS{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return un(!!e.streamToken),this.lastStreamToken=e.streamToken,un(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){un(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=gj(e.writeResults,e.commitTime),r=Io(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=E2(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>mj(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iD extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new Be(Ie.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,S2(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===Ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Be(Ie.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,S2(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Be(Ie.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class sD{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(ma(n),this.D_=!1):Qe("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oD{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(async()=>{ju(this)&&(Qe("RemoteStore","Restarting streams for network reachability change."),await async function(l){const u=St(l);u.L_.add(4),await lf(u),u.q_.set("Unknown"),u.L_.delete(4),await yg(u)}(this))})}),this.q_=new sD(r,i)}}async function yg(t){if(ju(t))for(const e of t.B_)await e(!0)}async function lf(t){for(const e of t.B_)await e(!1)}function NS(t,e){const n=St(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Sv(n)?Nv(n):rh(n).r_()&&bv(n,e))}function _v(t,e){const n=St(t),r=rh(n);n.N_.delete(e),r.r_()&&SS(n,e),n.N_.size===0&&(r.r_()?r.o_():ju(n)&&n.q_.set("Unknown"))}function bv(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Nt.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}rh(t).A_(e)}function SS(t,e){t.Q_.xe(e),rh(t).R_(e)}function Nv(t){t.Q_=new aj({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),rh(t).start(),t.q_.v_()}function Sv(t){return ju(t)&&!rh(t).n_()&&t.N_.size>0}function ju(t){return St(t).L_.size===0}function AS(t){t.Q_=void 0}async function aD(t){t.q_.set("Online")}async function lD(t){t.N_.forEach((e,n)=>{bv(t,e)})}async function uD(t,e){AS(t),Sv(t)?(t.q_.M_(e),Nv(t)):t.q_.set("Unknown")}async function cD(t,e,n){if(t.q_.set("Online"),e instanceof hS&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.N_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.N_.delete(a),i.Q_.removeTarget(a))}(t,e)}catch(r){Qe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Nm(t,r)}else if(e instanceof Rp?t.Q_.Ke(e):e instanceof cS?t.Q_.He(e):t.Q_.We(e),!n.isEqual(Nt.min()))try{const r=await xS(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.Q_.rt(o);return a.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const c=s.N_.get(u);c&&s.N_.set(u,c.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,u)=>{const c=s.N_.get(l);if(!c)return;s.N_.set(l,c.withResumeToken(zr.EMPTY_BYTE_STRING,c.snapshotVersion)),SS(s,l);const g=new il(c.target,l,u,c.sequenceNumber);bv(s,g)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){Qe("RemoteStore","Failed to raise snapshot:",r),await Nm(t,r)}}async function Nm(t,e,n){if(!sf(e))throw e;t.L_.add(1),await lf(t),t.q_.set("Offline"),n||(n=()=>xS(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Qe("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await yg(t)})}function ES(t,e){return e().catch(n=>Nm(t,n,e))}async function vg(t){const e=St(t),n=bl(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;hD(e);)try{const i=await Kj(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,dD(e,i)}catch(i){await Nm(e,i)}TS(e)&&IS(e)}function hD(t){return ju(t)&&t.O_.length<10}function dD(t,e){t.O_.push(e);const n=bl(t);n.r_()&&n.V_&&n.m_(e.mutations)}function TS(t){return ju(t)&&!bl(t).n_()&&t.O_.length>0}function IS(t){bl(t).start()}async function fD(t){bl(t).p_()}async function pD(t){const e=bl(t);for(const n of t.O_)e.m_(n.mutations)}async function mD(t,e,n){const r=t.O_.shift(),i=mv.from(r,e,n);await ES(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await vg(t)}async function gD(t,e){e&&bl(t).V_&&await async function(r,i){if(function(o){return ij(o)&&o!==Ie.ABORTED}(i.code)){const s=r.O_.shift();bl(r).s_(),await ES(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await vg(r)}}(t,e),TS(t)&&IS(t)}async function m_(t,e){const n=St(t);n.asyncQueue.verifyOperationInProgress(),Qe("RemoteStore","RemoteStore received new credentials");const r=ju(n);n.L_.add(3),await lf(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await yg(n)}async function yD(t,e){const n=St(t);e?(n.L_.delete(2),await yg(n)):e||(n.L_.add(2),await lf(n),n.q_.set("Unknown"))}function rh(t){return t.K_||(t.K_=function(n,r,i){const s=St(n);return s.w_(),new nD(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:aD.bind(null,t),Ro:lD.bind(null,t),mo:uD.bind(null,t),d_:cD.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Sv(t)?Nv(t):t.q_.set("Unknown")):(await t.K_.stop(),AS(t))})),t.K_}function bl(t){return t.U_||(t.U_=function(n,r,i){const s=St(n);return s.w_(),new rD(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:fD.bind(null,t),mo:gD.bind(null,t),f_:pD.bind(null,t),g_:mD.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await vg(t)):(await t.U_.stop(),t.O_.length>0&&(Qe("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Av{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new aa,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new Av(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Be(Ie.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ev(t,e){if(ma("AsyncQueue",`${e}: ${t}`),sf(t))return new Be(Ie.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ec{constructor(e){this.comparator=e?(n,r)=>e(n,r)||ut.comparator(n.key,r.key):(n,r)=>ut.comparator(n.key,r.key),this.keyedMap=$h(),this.sortedSet=new zn(this.comparator)}static emptySet(e){return new Ec(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ec)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Ec;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g_{constructor(){this.W_=new zn(ut.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):vt():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class $c{constructor(e,n,r,i,s,o,a,l,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new $c(e,n,Ec.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&cg(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vD{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class wD{constructor(){this.queries=y_(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=St(n),s=i.queries;i.queries=y_(),s.forEach((o,a)=>{for(const l of a.j_)l.onError(r)})})(this,new Be(Ie.ABORTED,"Firestore shutting down"))}}function y_(){return new nh(t=>QN(t),cg)}async function Tv(t,e){const n=St(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new vD,r=e.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(i,!0);break;case 1:s.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=Ev(o,`Initialization of query '${Xu(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&kv(n)}async function Iv(t,e){const n=St(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function xD(t,e){const n=St(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&kv(n)}function _D(t,e,n){const r=St(t),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(n);r.queries.delete(e)}function kv(t){t.Y_.forEach(e=>{e.next()})}var I2,v_;(v_=I2||(I2={})).ea="default",v_.Cache="cache";class Pv{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new $c(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=$c.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==I2.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kS{constructor(e){this.key=e}}class PS{constructor(e){this.key=e}}class bD{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Vt(),this.mutatedKeys=Vt(),this.Aa=JN(e),this.Ra=new Ec(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new g_,i=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((c,g)=>{const y=i.get(c),m=hg(this.query,g)?g:null,N=!!y&&this.mutatedKeys.has(y.key),A=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let C=!1;y&&m?y.data.isEqual(m.data)?N!==A&&(r.track({type:3,doc:m}),C=!0):this.ga(y,m)||(r.track({type:2,doc:m}),C=!0,(l&&this.Aa(m,l)>0||u&&this.Aa(m,u)<0)&&(a=!0)):!y&&m?(r.track({type:0,doc:m}),C=!0):y&&!m&&(r.track({type:1,doc:y}),C=!0,(l||u)&&(a=!0)),C&&(m?(o=o.add(m),s=A?s.add(c):s.delete(c)):(o=o.delete(c),s=s.delete(c)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const c=this.query.limitType==="F"?o.last():o.first();o=o.delete(c.key),s=s.delete(c.key),r.track({type:1,doc:c})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((c,g)=>function(m,N){const A=C=>{switch(C){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return vt()}};return A(m)-A(N)}(c.type,g.type)||this.Aa(c.doc,g.doc)),this.pa(r),i=i!=null&&i;const a=n&&!i?this.ya():[],l=this.da.size===0&&this.current&&!i?1:0,u=l!==this.Ea;return this.Ea=l,o.length!==0||u?{snapshot:new $c(this.query,e.Ra,s,o,e.mutatedKeys,l===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new g_,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Vt(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new PS(r))}),this.da.forEach(r=>{e.has(r)||n.push(new kS(r))}),n}ba(e){this.Ta=e.Ts,this.da=Vt();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return $c.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class ND{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class SD{constructor(e){this.key=e,this.va=!1}}class AD{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new nh(a=>QN(a),cg),this.Ma=new Map,this.xa=new Set,this.Oa=new zn(ut.comparator),this.Na=new Map,this.La=new vv,this.Ba={},this.ka=new Map,this.qa=Wc.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function ED(t,e,n=!0){const r=OS(t);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await CS(r,e,n,!0),i}async function TD(t,e){const n=OS(t);await CS(n,e,!0,!1)}async function CS(t,e,n,r){const i=await Yj(t.localStore,To(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await ID(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&NS(t.remoteStore,i),a}async function ID(t,e,n,r,i){t.Ka=(g,y,m)=>async function(A,C,_,k){let R=C.view.ma(_);R.ns&&(R=await d_(A.localStore,C.query,!1).then(({documents:j})=>C.view.ma(j,R)));const D=k&&k.targetChanges.get(C.targetId),z=k&&k.targetMismatches.get(C.targetId)!=null,Q=C.view.applyChanges(R,A.isPrimaryClient,D,z);return x_(A,C.targetId,Q.wa),Q.snapshot}(t,g,y,m);const s=await d_(t.localStore,e,!0),o=new bD(e,s.Ts),a=o.ma(s.documents),l=af.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),u=o.applyChanges(a,t.isPrimaryClient,l);x_(t,n,u.wa);const c=new ND(e,n,o);return t.Fa.set(e,c),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),u.snapshot}async function kD(t,e,n){const r=St(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!cg(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await T2(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&_v(r.remoteStore,i.targetId),k2(r,i.targetId)}).catch(rf)):(k2(r,i.targetId),await T2(r.localStore,i.targetId,!0))}async function PD(t,e){const n=St(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),_v(n.remoteStore,r.targetId))}async function CD(t,e,n){const r=MD(t);try{const i=await function(o,a){const l=St(o),u=pr.now(),c=a.reduce((m,N)=>m.add(N.key),Vt());let g,y;return l.persistence.runTransaction("Locally write mutations","readwrite",m=>{let N=ga(),A=Vt();return l.cs.getEntries(m,c).next(C=>{N=C,N.forEach((_,k)=>{k.isValidDocument()||(A=A.add(_))})}).next(()=>l.localDocuments.getOverlayedDocuments(m,N)).next(C=>{g=C;const _=[];for(const k of a){const R=Z7(k,g.get(k.key).overlayedDocument);R!=null&&_.push(new Pl(k.key,R,zN(R.value.mapValue),vi.exists(!0)))}return l.mutationQueue.addMutationBatch(m,u,_,a)}).next(C=>{y=C;const _=C.applyToLocalDocumentSet(g,A);return l.documentOverlayCache.saveOverlays(m,C.batchId,_)})}).then(()=>({batchId:y.batchId,changes:ZN(g)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let u=o.Ba[o.currentUser.toKey()];u||(u=new zn(Jt)),u=u.insert(a,l),o.Ba[o.currentUser.toKey()]=u}(r,i.batchId,n),await uf(r,i.changes),await vg(r.remoteStore)}catch(i){const s=Ev(i,"Failed to persist write");n.reject(s)}}async function LS(t,e){const n=St(t);try{const r=await $j(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Na.get(s);o&&(un(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?un(o.va):i.removedDocuments.size>0&&(un(o.va),o.va=!1))}),await uf(n,r,e)}catch(r){await rf(r)}}function w_(t,e,n){const r=St(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((s,o)=>{const a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=St(o);l.onlineState=a;let u=!1;l.queries.forEach((c,g)=>{for(const y of g.j_)y.Z_(a)&&(u=!0)}),u&&kv(l)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function LD(t,e,n){const r=St(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),s=i&&i.key;if(s){let o=new zn(ut.comparator);o=o.insert(s,ri.newNoDocument(s,Nt.min()));const a=Vt().add(s),l=new mg(Nt.min(),new Map,new zn(Jt),o,a);await LS(r,l),r.Oa=r.Oa.remove(s),r.Na.delete(e),Cv(r)}else await T2(r.localStore,e,!1).then(()=>k2(r,e,n)).catch(rf)}async function RD(t,e){const n=St(t),r=e.batch.batchId;try{const i=await Wj(n.localStore,e);jS(n,r,null),RS(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await uf(n,i)}catch(i){await rf(i)}}async function jD(t,e,n){const r=St(t);try{const i=await function(o,a){const l=St(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let c;return l.mutationQueue.lookupMutationBatch(u,a).next(g=>(un(g!==null),c=g.keys(),l.mutationQueue.removeMutationBatch(u,g))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,c,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,c)).next(()=>l.localDocuments.getDocuments(u,c))})}(r.localStore,e);jS(r,e,n),RS(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await uf(r,i)}catch(i){await rf(i)}}function RS(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function jS(t,e,n){const r=St(t);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function k2(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||DS(t,r)})}function DS(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(_v(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Cv(t))}function x_(t,e,n){for(const r of n)r instanceof kS?(t.La.addReference(r.key,e),DD(t,r)):r instanceof PS?(Qe("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||DS(t,r.key)):vt()}function DD(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(Qe("SyncEngine","New document in limbo: "+n),t.xa.add(r),Cv(t))}function Cv(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new ut(En.fromString(e)),r=t.qa.next();t.Na.set(r,new SD(n)),t.Oa=t.Oa.insert(n,r),NS(t.remoteStore,new il(To(ug(n.path)),r,"TargetPurposeLimboResolution",lv.oe))}}async function uf(t,e,n){const r=St(t),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,l)=>{o.push(r.Ka(l,e,n).then(u=>{var c;if((u||n)&&r.isPrimaryClient){const g=u?!u.fromCache:(c=n==null?void 0:n.targetChanges.get(l.targetId))===null||c===void 0?void 0:c.current;r.sharedClientState.updateQueryState(l.targetId,g?"current":"not-current")}if(u){i.push(u);const g=xv.Wi(l.targetId,u);s.push(g)}}))}),await Promise.all(o),r.Ca.d_(i),await async function(l,u){const c=St(l);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>je.forEach(u,y=>je.forEach(y.$i,m=>c.persistence.referenceDelegate.addReference(g,y.targetId,m)).next(()=>je.forEach(y.Ui,m=>c.persistence.referenceDelegate.removeReference(g,y.targetId,m)))))}catch(g){if(!sf(g))throw g;Qe("LocalStore","Failed to update sequence numbers: "+g)}for(const g of u){const y=g.targetId;if(!g.fromCache){const m=c.os.get(y),N=m.snapshotVersion,A=m.withLastLimboFreeSnapshotVersion(N);c.os=c.os.insert(y,A)}}}(r.localStore,s))}async function OD(t,e){const n=St(t);if(!n.currentUser.isEqual(e)){Qe("SyncEngine","User change. New user:",e.toKey());const r=await wS(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(l=>{l.reject(new Be(Ie.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await uf(n,r.hs)}}function FD(t,e){const n=St(t),r=n.Na.get(e);if(r&&r.va)return Vt().add(r.key);{let i=Vt();const s=n.Ma.get(e);if(!s)return i;for(const o of s){const a=n.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}function OS(t){const e=St(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=LS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=FD.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=LD.bind(null,e),e.Ca.d_=xD.bind(null,e.eventManager),e.Ca.$a=_D.bind(null,e.eventManager),e}function MD(t){const e=St(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=RD.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=jD.bind(null,e),e}class Sm{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=gg(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return Hj(this.persistence,new zj,e.initialUser,this.serializer)}Ga(e){return new Uj(wv.Zr,this.serializer)}Wa(e){return new Jj}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Sm.provider={build:()=>new Sm};class P2{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>w_(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=OD.bind(null,this.syncEngine),await yD(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new wD}()}createDatastore(e){const n=gg(e.databaseInfo.databaseId),r=function(s){return new tD(s)}(e.databaseInfo);return function(s,o,a,l){return new iD(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new oD(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>w_(this.syncEngine,n,0),function(){return p_.D()?new p_:new Xj}())}createSyncEngine(e,n){return function(i,s,o,a,l,u,c){const g=new AD(i,s,o,a,l,u);return c&&(g.Qa=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=St(i);Qe("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await lf(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}P2.provider={build:()=>new P2};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lv{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):ma("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UD{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=ti.UNAUTHENTICATED,this.clientId=UN.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{Qe("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(Qe("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new aa;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Ev(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function C0(t,e){t.asyncQueue.verifyOperationInProgress(),Qe("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await wS(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function __(t,e){t.asyncQueue.verifyOperationInProgress();const n=await VD(t);Qe("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>m_(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>m_(e.remoteStore,i)),t._onlineComponents=e}async function VD(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Qe("FirestoreClient","Using user provided OfflineComponentProvider");try{await C0(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===Ie.FAILED_PRECONDITION||i.code===Ie.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Vc("Error using user provided cache. Falling back to memory cache: "+n),await C0(t,new Sm)}}else Qe("FirestoreClient","Using default OfflineComponentProvider"),await C0(t,new Sm);return t._offlineComponents}async function FS(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Qe("FirestoreClient","Using user provided OnlineComponentProvider"),await __(t,t._uninitializedComponentsProvider._online)):(Qe("FirestoreClient","Using default OnlineComponentProvider"),await __(t,new P2))),t._onlineComponents}function BD(t){return FS(t).then(e=>e.syncEngine)}async function Am(t){const e=await FS(t),n=e.eventManager;return n.onListen=ED.bind(null,e.syncEngine),n.onUnlisten=kD.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=TD.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=PD.bind(null,e.syncEngine),n}function zD(t,e,n={}){const r=new aa;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,u){const c=new Lv({next:y=>{c.Za(),o.enqueueAndForget(()=>Iv(s,g));const m=y.docs.has(a);!m&&y.fromCache?u.reject(new Be(Ie.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&y.fromCache&&l&&l.source==="server"?u.reject(new Be(Ie.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(y)},error:y=>u.reject(y)}),g=new Pv(ug(a.path),c,{includeMetadataChanges:!0,_a:!0});return Tv(s,g)}(await Am(t),t.asyncQueue,e,n,r)),r.promise}function qD(t,e,n={}){const r=new aa;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,u){const c=new Lv({next:y=>{c.Za(),o.enqueueAndForget(()=>Iv(s,g)),y.fromCache&&l.source==="server"?u.reject(new Be(Ie.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(y)},error:y=>u.reject(y)}),g=new Pv(a,c,{includeMetadataChanges:!0,_a:!0});return Tv(s,g)}(await Am(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MS(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b_=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function US(t,e,n){if(!n)throw new Be(Ie.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function HD(t,e,n,r){if(e===!0&&r===!0)throw new Be(Ie.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function N_(t){if(!ut.isDocumentKey(t))throw new Be(Ie.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function S_(t){if(ut.isDocumentKey(t))throw new Be(Ie.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function wg(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":vt()}function wi(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Be(Ie.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=wg(t);throw new Be(Ie.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A_{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Be(Ie.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Be(Ie.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}HD("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=MS((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Be(Ie.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Be(Ie.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Be(Ie.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class xg{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new A_({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Be(Ie.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Be(Ie.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new A_(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new l7;switch(r.type){case"firstParty":return new d7(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Be(Ie.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=b_.get(n);r&&(Qe("ComponentProvider","Removing Datastore"),b_.delete(n),r.terminate())}(this),Promise.resolve()}}function WD(t,e,n,r={}){var i;const s=(t=wi(t,xg))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Vc("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=ti.MOCK_USER;else{a=q6(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new Be(Ie.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new ti(u)}t._authCredentials=new u7(new MN(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cl{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Cl(this.firestore,e,this._query)}}class ii{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new yl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ii(this.firestore,e,this._key)}}class yl extends Cl{constructor(e,n,r){super(e,n,ug(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ii(this.firestore,null,new ut(e))}withConverter(e){return new yl(this.firestore,e,this._path)}}function Tt(t,e,...n){if(t=cn(t),US("collection","path",e),t instanceof xg){const r=En.fromString(e,...n);return S_(r),new yl(t,null,r)}{if(!(t instanceof ii||t instanceof yl))throw new Be(Ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(En.fromString(e,...n));return S_(r),new yl(t.firestore,null,r)}}function Ht(t,e,...n){if(t=cn(t),arguments.length===1&&(e=UN.newId()),US("doc","path",e),t instanceof xg){const r=En.fromString(e,...n);return N_(r),new ii(t,null,new ut(r))}{if(!(t instanceof ii||t instanceof yl))throw new Be(Ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(En.fromString(e,...n));return N_(r),new ii(t.firestore,t instanceof yl?t.converter:null,new ut(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E_{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new _S(this,"async_queue_retry"),this.Vu=()=>{const r=P0();r&&Qe("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=P0();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=P0();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new aa;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!sf(e))throw e;Qe("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw ma("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=Av.createAndSchedule(this,e,n,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&vt()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function T_(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class Po extends xg{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new E_,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new E_(e),this._firestoreClient=void 0,await e}}}function $D(t,e){const n=typeof t=="object"?t:ig(),r=typeof t=="string"?t:"(default)",i=ku(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=V6("firestore");s&&WD(i,...s)}return i}function cf(t){if(t._terminated)throw new Be(Ie.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||GD(t),t._firestoreClient}function GD(t){var e,n,r;const i=t._freezeSettings(),s=function(a,l,u,c){return new A7(a,l,u,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,MS(c.experimentalLongPollingOptions),c.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new UD(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Gc(zr.fromBase64String(e))}catch(n){throw new Be(Ie.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Gc(zr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hf{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Be(Ie.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Fr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class df{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rv{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Be(Ie.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Be(Ie.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Jt(this._lat,e._lat)||Jt(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jv{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KD=/^__.*__$/;class YD{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Pl(e,this.data,this.fieldMask,n,this.fieldTransforms):new of(e,this.data,n,this.fieldTransforms)}}class VS{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Pl(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function BS(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw vt()}}class _g{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new _g(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Em(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(BS(this.Cu)&&KD.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class QD{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||gg(e)}Qu(e,n,r,i=!1){return new _g({Cu:e,methodName:n,qu:r,path:Fr.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ff(t){const e=t._freezeSettings(),n=gg(t._databaseId);return new QD(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Dv(t,e,n,r,i,s={}){const o=t.Qu(s.merge||s.mergeFields?2:0,e,n,i);Mv("Data must be an object, but it was:",o,r);const a=HS(r,o);let l,u;if(s.merge)l=new es(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const c=[];for(const g of s.mergeFields){const y=C2(e,g,n);if(!o.contains(y))throw new Be(Ie.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);$S(c,y)||c.push(y)}l=new es(c),u=o.fieldTransforms.filter(g=>l.covers(g.field))}else l=null,u=o.fieldTransforms;return new YD(new ki(a),l,u)}class bg extends df{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof bg}}function JD(t,e,n){return new _g({Cu:3,qu:e.settings.qu,methodName:t._methodName,xu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Ov extends df{_toFieldTransform(e){return new oS(e.path,new Vd)}isEqual(e){return e instanceof Ov}}class Fv extends df{constructor(e,n){super(e),this.Ku=n}_toFieldTransform(e){const n=JD(this,e,!0),r=this.Ku.map(s=>ih(s,n)),i=new Hc(r);return new oS(e.path,i)}isEqual(e){return e instanceof Fv&&Ld(this.Ku,e.Ku)}}function zS(t,e,n,r){const i=t.Qu(1,e,n);Mv("Data must be an object, but it was:",i,r);const s=[],o=ki.empty();Ru(r,(l,u)=>{const c=Uv(e,l,n);u=cn(u);const g=i.Nu(c);if(u instanceof bg)s.push(c);else{const y=ih(u,g);y!=null&&(s.push(c),o.set(c,y))}});const a=new es(s);return new VS(o,a,i.fieldTransforms)}function qS(t,e,n,r,i,s){const o=t.Qu(1,e,n),a=[C2(e,r,n)],l=[i];if(s.length%2!=0)throw new Be(Ie.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let y=0;y<s.length;y+=2)a.push(C2(e,s[y])),l.push(s[y+1]);const u=[],c=ki.empty();for(let y=a.length-1;y>=0;--y)if(!$S(u,a[y])){const m=a[y];let N=l[y];N=cn(N);const A=o.Nu(m);if(N instanceof bg)u.push(m);else{const C=ih(N,A);C!=null&&(u.push(m),c.set(m,C))}}const g=new es(u);return new VS(c,g,o.fieldTransforms)}function XD(t,e,n,r=!1){return ih(n,t.Qu(r?4:3,e))}function ih(t,e){if(WS(t=cn(t)))return Mv("Unsupported field value:",e,t),HS(t,e);if(t instanceof df)return function(r,i){if(!BS(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=ih(a,i.Lu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=cn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return G7(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=pr.fromDate(r);return{timestampValue:bm(i.serializer,s)}}if(r instanceof pr){const s=new pr(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:bm(i.serializer,s)}}if(r instanceof Rv)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Gc)return{bytesValue:dS(i.serializer,r._byteString)};if(r instanceof ii){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:yv(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof jv)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.Bu("VectorValues must only contain numeric values.");return pv(a.serializer,l)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${wg(r)}`)}(t,e)}function HS(t,e){const n={};return VN(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ru(t,(r,i)=>{const s=ih(i,e.Mu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function WS(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof pr||t instanceof Rv||t instanceof Gc||t instanceof ii||t instanceof df||t instanceof jv)}function Mv(t,e,n){if(!WS(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=wg(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function C2(t,e,n){if((e=cn(e))instanceof hf)return e._internalPath;if(typeof e=="string")return Uv(t,e);throw Em("Field path arguments must be of type string or ",t,!1,void 0,n)}const ZD=new RegExp("[~\\*/\\[\\]]");function Uv(t,e,n){if(e.search(ZD)>=0)throw Em(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new hf(...e.split("."))._internalPath}catch{throw Em(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Em(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new Be(Ie.INVALID_ARGUMENT,a+t+l)}function $S(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GS{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new ii(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new eO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Ng("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class eO extends GS{data(){return super.data()}}function Ng(t,e){return typeof e=="string"?Uv(t,e):e instanceof hf?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KS(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Be(Ie.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Vv{}class YS extends Vv{}function vu(t,e,...n){let r=[];e instanceof Vv&&r.push(e),r=r.concat(n),function(s){const o=s.filter(l=>l instanceof Bv).length,a=s.filter(l=>l instanceof Sg).length;if(o>1||o>0&&a>0)throw new Be(Ie.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class Sg extends YS{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Sg(e,n,r)}_apply(e){const n=this._parse(e);return QS(e._query,n),new Cl(e.firestore,e.converter,_2(e._query,n))}_parse(e){const n=ff(e.firestore);return function(s,o,a,l,u,c,g){let y;if(u.isKeyField()){if(c==="array-contains"||c==="array-contains-any")throw new Be(Ie.INVALID_ARGUMENT,`Invalid Query. You can't perform '${c}' queries on documentId().`);if(c==="in"||c==="not-in"){k_(g,c);const m=[];for(const N of g)m.push(I_(l,s,N));y={arrayValue:{values:m}}}else y=I_(l,s,g)}else c!=="in"&&c!=="not-in"&&c!=="array-contains-any"||k_(g,c),y=XD(a,o,g,c==="in"||c==="not-in");return fr.create(u,c,y)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function zd(t,e,n){const r=e,i=Ng("where",t);return Sg._create(i,r,n)}class Bv extends Vv{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Bv(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Ys.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)QS(o,l),o=_2(o,l)}(e._query,n),new Cl(e.firestore,e.converter,_2(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class zv extends YS{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new zv(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new Be(Ie.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new Be(Ie.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ud(s,o)}(e._query,this._field,this._direction);return new Cl(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new th(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function qv(t,e="asc"){const n=e,r=Ng("orderBy",t);return zv._create(r,n)}function I_(t,e,n){if(typeof(n=cn(n))=="string"){if(n==="")throw new Be(Ie.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!YN(e)&&n.indexOf("/")!==-1)throw new Be(Ie.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(En.fromString(n));if(!ut.isDocumentKey(r))throw new Be(Ie.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Yx(t,new ut(r))}if(n instanceof ii)return Yx(t,n._key);throw new Be(Ie.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${wg(n)}.`)}function k_(t,e){if(!Array.isArray(t)||t.length===0)throw new Be(Ie.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function QS(t,e){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Be(Ie.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Be(Ie.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class tO{convertValue(e,n="none"){switch(yu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ir(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(gu(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw vt()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Ru(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>ir(o.doubleValue));return new jv(s)}convertGeoPoint(e){return new Rv(ir(e.latitude),ir(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=cv(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Od(e));default:return null}}convertTimestamp(e){const n=_l(e);return new pr(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=En.fromString(e);un(vS(r));const i=new Fd(r.get(1),r.get(3)),s=new ut(r.popFirst(5));return i.isEqual(n)||ma(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hv(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kh{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class JS extends GS{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new jp(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Ng("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class jp extends JS{data(e={}){return super.data(e)}}class XS{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Kh(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new jp(this._firestore,this._userDataWriter,r.key,r,new Kh(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Be(Ie.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new jp(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Kh(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new jp(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Kh(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,c=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),c=o.indexOf(a.doc.key)),{type:nO(a.type),doc:l,oldIndex:u,newIndex:c}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function nO(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return vt()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ws(t){t=wi(t,ii);const e=wi(t.firestore,Po);return zD(cf(e),t._key).then(n=>eA(e,t,n))}class Wv extends tO{constructor(e){super(),this.firestore=e}convertBytes(e){return new Gc(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new ii(this.firestore,null,n)}}function Rn(t){t=wi(t,Cl);const e=wi(t.firestore,Po),n=cf(e),r=new Wv(e);return KS(t._query),qD(n,t._query).then(i=>new XS(e,r,t,i))}function $v(t,e,n){t=wi(t,ii);const r=wi(t.firestore,Po),i=Hv(t.converter,e,n);return pf(r,[Dv(ff(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,vi.none())])}function Mr(t,e,n,...r){t=wi(t,ii);const i=wi(t.firestore,Po),s=ff(i);let o;return o=typeof(e=cn(e))=="string"||e instanceof hf?qS(s,"updateDoc",t._key,e,n,r):zS(s,"updateDoc",t._key,e),pf(i,[o.toMutation(t._key,vi.exists(!0))])}function ZS(t){return pf(wi(t.firestore,Po),[new pg(t._key,vi.none())])}function Ti(t,e){const n=wi(t.firestore,Po),r=Ht(t),i=Hv(t.converter,e);return pf(n,[Dv(ff(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,vi.exists(!1))]).then(()=>r)}function Tm(t,...e){var n,r,i;t=cn(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||T_(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(T_(e[o])){const g=e[o];e[o]=(n=g.next)===null||n===void 0?void 0:n.bind(g),e[o+1]=(r=g.error)===null||r===void 0?void 0:r.bind(g),e[o+2]=(i=g.complete)===null||i===void 0?void 0:i.bind(g)}let l,u,c;if(t instanceof ii)u=wi(t.firestore,Po),c=ug(t._key.path),l={next:g=>{e[o]&&e[o](eA(u,t,g))},error:e[o+1],complete:e[o+2]};else{const g=wi(t,Cl);u=wi(g.firestore,Po),c=g._query;const y=new Wv(u);l={next:m=>{e[o]&&e[o](new XS(u,y,g,m))},error:e[o+1],complete:e[o+2]},KS(t._query)}return function(y,m,N,A){const C=new Lv(A),_=new Pv(m,C,N);return y.asyncQueue.enqueueAndForget(async()=>Tv(await Am(y),_)),()=>{C.Za(),y.asyncQueue.enqueueAndForget(async()=>Iv(await Am(y),_))}}(cf(u),c,a,l)}function pf(t,e){return function(r,i){const s=new aa;return r.asyncQueue.enqueueAndForget(async()=>CD(await BD(r),i,s)),s.promise}(cf(t),e)}function eA(t,e,n){const r=n.docs.get(e._key),i=new Wv(t);return new JS(t,i,e._key,r,new Kh(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rO{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=ff(e)}set(e,n,r){this._verifyNotCommitted();const i=L0(e,this._firestore),s=Hv(i.converter,n,r),o=Dv(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,vi.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const s=L0(e,this._firestore);let o;return o=typeof(n=cn(n))=="string"||n instanceof hf?qS(this._dataReader,"WriteBatch.update",s._key,n,r,i):zS(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,vi.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=L0(e,this._firestore);return this._mutations=this._mutations.concat(new pg(n._key,vi.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Be(Ie.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function L0(t,e){if((t=cn(t)).firestore!==e)throw new Be(Ie.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function vo(){return new Ov("serverTimestamp")}function iO(...t){return new Fv("arrayUnion",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tA(t){return cf(t=wi(t,Po)),new rO(t,e=>pf(t,e))}(function(e,n=!0){(function(i){eh=i})(Pu),Gs(new Ts("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new Po(new c7(r.getProvider("auth-internal")),new p7(r.getProvider("app-check-internal")),function(u,c){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new Be(Ie.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Fd(u.options.projectId,c)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Di(Hx,"4.7.3",e),Di(Hx,"4.7.3","esm2017")})();var sO="firebase",oO="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Di(sO,oO,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nA="firebasestorage.googleapis.com",rA="storageBucket",aO=2*60*1e3,lO=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn extends Js{constructor(e,n,r=0){super(R0(e),`Firebase Storage: ${n} (${R0(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Jn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return R0(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Qn;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Qn||(Qn={}));function R0(t){return"storage/"+t}function Gv(){const t="An unknown error occurred, please check the error payload for server response.";return new Jn(Qn.UNKNOWN,t)}function uO(t){return new Jn(Qn.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function cO(t){return new Jn(Qn.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function hO(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Jn(Qn.UNAUTHENTICATED,t)}function dO(){return new Jn(Qn.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function fO(t){return new Jn(Qn.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function pO(){return new Jn(Qn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function mO(){return new Jn(Qn.CANCELED,"User canceled the upload/download.")}function gO(t){return new Jn(Qn.INVALID_URL,"Invalid URL '"+t+"'.")}function yO(t){return new Jn(Qn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function vO(){return new Jn(Qn.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+rA+"' property when initializing the app?")}function wO(){return new Jn(Qn.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function xO(){return new Jn(Qn.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function _O(t){return new Jn(Qn.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function L2(t){return new Jn(Qn.INVALID_ARGUMENT,t)}function iA(){return new Jn(Qn.APP_DELETED,"The Firebase app was deleted.")}function bO(t){return new Jn(Qn.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function ud(t,e){return new Jn(Qn.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Oh(t){throw new Jn(Qn.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=ts.makeFromUrl(e,n)}catch{return new ts(e,"")}if(r.path==="")return r;throw yO(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(D){D.path.charAt(D.path.length-1)==="/"&&(D.path_=D.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),l={bucket:1,path:3};function u(D){D.path_=decodeURIComponent(D.path)}const c="v[A-Za-z0-9_]+",g=n.replace(/[.]/g,"\\."),y="(/([^?#]*).*)?$",m=new RegExp(`^https?://${g}/${c}/b/${i}/o${y}`,"i"),N={bucket:1,path:3},A=n===nA?"(?:storage.googleapis.com|storage.cloud.google.com)":n,C="([^?#]*)",_=new RegExp(`^https?://${A}/${i}/${C}`,"i"),R=[{regex:a,indices:l,postModify:s},{regex:m,indices:N,postModify:u},{regex:_,indices:{bucket:1,path:2},postModify:u}];for(let D=0;D<R.length;D++){const z=R[D],Q=z.regex.exec(e);if(Q){const j=Q[z.indices.bucket];let E=Q[z.indices.path];E||(E=""),r=new ts(j,E),z.postModify(r);break}}if(r==null)throw gO(e);return r}}class NO{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SO(t,e,n){let r=1,i=null,s=null,o=!1,a=0;function l(){return a===2}let u=!1;function c(...C){u||(u=!0,e.apply(null,C))}function g(C){i=setTimeout(()=>{i=null,t(m,l())},C)}function y(){s&&clearTimeout(s)}function m(C,..._){if(u){y();return}if(C){y(),c.call(null,C,..._);return}if(l()||o){y(),c.call(null,C,..._);return}r<64&&(r*=2);let R;a===1?(a=2,R=0):R=(r+Math.random())*1e3,g(R)}let N=!1;function A(C){N||(N=!0,y(),!u&&(i!==null?(C||(a=2),clearTimeout(i),g(0)):C||(a=1)))}return g(0),s=setTimeout(()=>{o=!0,A(!0)},n),A}function AO(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EO(t){return t!==void 0}function TO(t){return typeof t=="object"&&!Array.isArray(t)}function Kv(t){return typeof t=="string"||t instanceof String}function P_(t){return Yv()&&t instanceof Blob}function Yv(){return typeof Blob<"u"}function C_(t,e,n,r){if(r<e)throw L2(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw L2(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qv(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function sA(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var ou;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(ou||(ou={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IO(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kO{constructor(e,n,r,i,s,o,a,l,u,c,g,y=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=u,this.progressCallback_=c,this.connectionFactory_=g,this.retry=y,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((m,N)=>{this.resolve_=m,this.reject_=N,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new rp(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const l=a.loaded,u=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,u)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===ou.NO_ERROR,l=s.getStatus();if(!a||IO(l,this.additionalRetryCodes_)&&this.retry){const c=s.getErrorCode()===ou.ABORT;r(!1,new rp(!1,null,c));return}const u=this.successCodes_.indexOf(l)!==-1;r(!0,new rp(u,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());EO(l)?s(l):s()}catch(l){o(l)}else if(a!==null){const l=Gv();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(i.canceled){const l=this.appDelete_?iA():mO();o(l)}else{const l=pO();o(l)}};this.canceled_?n(!1,new rp(!1,null,!0)):this.backoffId_=SO(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&AO(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class rp{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function PO(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function CO(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function LO(t,e){e&&(t["X-Firebase-GMPID"]=e)}function RO(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function jO(t,e,n,r,i,s,o=!0){const a=sA(t.urlParams),l=t.url+a,u=Object.assign({},t.headers);return LO(u,e),PO(u,n),CO(u,s),RO(u,r),new kO(l,t.method,u,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DO(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function OO(...t){const e=DO();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(Yv())return new Blob(t);throw new Jn(Qn.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function FO(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MO(t){if(typeof atob>"u")throw _O("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _o={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class j0{constructor(e,n){this.data=e,this.contentType=n||null}}function UO(t,e){switch(t){case _o.RAW:return new j0(oA(e));case _o.BASE64:case _o.BASE64URL:return new j0(aA(t,e));case _o.DATA_URL:return new j0(BO(e),zO(e))}throw Gv()}function oA(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const s=r,o=t.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function VO(t){let e;try{e=decodeURIComponent(t)}catch{throw ud(_o.DATA_URL,"Malformed data URL.")}return oA(e)}function aA(t,e){switch(t){case _o.BASE64:{const i=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(i||s)throw ud(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case _o.BASE64URL:{const i=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(i||s)throw ud(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=MO(e)}catch(i){throw i.message.includes("polyfill")?i:ud(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class lA{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw ud(_o.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=qO(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function BO(t){const e=new lA(t);return e.base64?aA(_o.BASE64,e.rest):VO(e.rest)}function zO(t){return new lA(t).contentType}function qO(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class el{constructor(e,n){let r=0,i="";P_(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(P_(this.data_)){const r=this.data_,i=FO(r,e,n);return i===null?null:new el(i)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new el(r,!0)}}static getBlob(...e){if(Yv()){const n=e.map(r=>r instanceof el?r.data_:r);return new el(OO.apply(null,n))}else{const n=e.map(o=>Kv(o)?UO(_o.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new el(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uA(t){let e;try{e=JSON.parse(t)}catch{return null}return TO(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HO(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function WO(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function cA(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $O(t,e){return e}class pi{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||$O}}let ip=null;function GO(t){return!Kv(t)||t.length<2?t:cA(t)}function hA(){if(ip)return ip;const t=[];t.push(new pi("bucket")),t.push(new pi("generation")),t.push(new pi("metageneration")),t.push(new pi("name","fullPath",!0));function e(s,o){return GO(o)}const n=new pi("name");n.xform=e,t.push(n);function r(s,o){return o!==void 0?Number(o):o}const i=new pi("size");return i.xform=r,t.push(i),t.push(new pi("timeCreated")),t.push(new pi("updated")),t.push(new pi("md5Hash",null,!0)),t.push(new pi("cacheControl",null,!0)),t.push(new pi("contentDisposition",null,!0)),t.push(new pi("contentEncoding",null,!0)),t.push(new pi("contentLanguage",null,!0)),t.push(new pi("contentType",null,!0)),t.push(new pi("metadata","customMetadata",!0)),ip=t,ip}function KO(t,e){function n(){const r=t.bucket,i=t.fullPath,s=new ts(r,i);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:n})}function YO(t,e,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const o=n[s];r[o.local]=o.xform(r,e[o.server])}return KO(r,t),r}function dA(t,e,n){const r=uA(e);return r===null?null:YO(t,r,n)}function QO(t,e,n,r){const i=uA(e);if(i===null||!Kv(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(u=>{const c=t.bucket,g=t.fullPath,y="/b/"+o(c)+"/o/"+o(g),m=Qv(y,n,r),N=sA({alt:"media",token:u});return m+N})[0]}function JO(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(n[s.server]=t[s.local])}return JSON.stringify(n)}class fA{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pA(t){if(!t)throw Gv()}function XO(t,e){function n(r,i){const s=dA(t,i,e);return pA(s!==null),s}return n}function ZO(t,e){function n(r,i){const s=dA(t,i,e);return pA(s!==null),QO(s,i,t.host,t._protocol)}return n}function mA(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=dO():i=hO():n.getStatus()===402?i=cO(t.bucket):n.getStatus()===403?i=fO(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function e9(t){const e=mA(t);function n(r,i){let s=e(r,i);return r.getStatus()===404&&(s=uO(t.path)),s.serverResponse=i.serverResponse,s}return n}function t9(t,e,n){const r=e.fullServerUrl(),i=Qv(r,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,a=new fA(i,s,ZO(t,n),o);return a.errorHandler=e9(e),a}function n9(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function r9(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=n9(null,e)),r}function i9(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let R="";for(let D=0;D<2;D++)R=R+Math.random().toString().slice(2);return R}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const u=r9(e,r,i),c=JO(u,n),g="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+c+`\r
--`+l+`\r
Content-Type: `+u.contentType+`\r
\r
`,y=`\r
--`+l+"--",m=el.getBlob(g,r,y);if(m===null)throw wO();const N={name:u.fullPath},A=Qv(s,t.host,t._protocol),C="POST",_=t.maxUploadRetryTime,k=new fA(A,C,XO(t,n),_);return k.urlParams=N,k.headers=o,k.body=m.uploadData(),k.errorHandler=mA(e),k}class s9{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ou.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=ou.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=ou.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i){if(this.sent_)throw Oh("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Oh("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Oh("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Oh("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Oh("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class o9 extends s9{initXhr(){this.xhr_.responseType="text"}}function gA(){return new o9}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wu{constructor(e,n){this._service=e,n instanceof ts?this._location=n:this._location=ts.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new wu(e,n)}get root(){const e=new ts(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return cA(this._location.path)}get storage(){return this._service}get parent(){const e=HO(this._location.path);if(e===null)return null;const n=new ts(this._location.bucket,e);return new wu(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw bO(e)}}function a9(t,e,n){t._throwIfRoot("uploadBytes");const r=i9(t.storage,t._location,hA(),new el(e,!0),n);return t.storage.makeRequestWithTokens(r,gA).then(i=>({metadata:i,ref:t}))}function l9(t){t._throwIfRoot("getDownloadURL");const e=t9(t.storage,t._location,hA());return t.storage.makeRequestWithTokens(e,gA).then(n=>{if(n===null)throw xO();return n})}function u9(t,e){const n=WO(t._location.path,e),r=new ts(t._location.bucket,n);return new wu(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c9(t){return/^[A-Za-z]+:\/\//.test(t)}function h9(t,e){return new wu(t,e)}function yA(t,e){if(t instanceof Jv){const n=t;if(n._bucket==null)throw vO();const r=new wu(n,n._bucket);return e!=null?yA(r,e):r}else return e!==void 0?u9(t,e):t}function d9(t,e){if(e&&c9(e)){if(t instanceof Jv)return h9(t,e);throw L2("To use ref(service, url), the first argument must be a Storage instance.")}else return yA(t,e)}function L_(t,e){const n=e==null?void 0:e[rA];return n==null?null:ts.makeFromBucketSpec(n,t)}function f9(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:q6(i,t.app.options.projectId))}class Jv{constructor(e,n,r,i,s){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=nA,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=aO,this._maxUploadRetryTime=lO,this._requests=new Set,i!=null?this._bucket=ts.makeFromBucketSpec(i,this._host):this._bucket=L_(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=ts.makeFromBucketSpec(this._url,e):this._bucket=L_(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){C_("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){C_("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new wu(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new NO(iA());{const o=jO(e,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const R_="@firebase/storage",j_="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vA="storage";function p9(t,e,n){return t=cn(t),a9(t,e,n)}function m9(t){return t=cn(t),l9(t)}function g9(t,e){return t=cn(t),d9(t,e)}function wA(t=ig(),e){t=cn(t);const r=ku(t,vA).getImmediate({identifier:e}),i=V6("storage");return i&&y9(r,...i),r}function y9(t,e,n,r={}){f9(t,e,n,r)}function v9(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new Jv(n,r,i,e,Pu)}function w9(){Gs(new Ts(vA,v9,"PUBLIC").setMultipleInstances(!0)),Di(R_,j_,""),Di(R_,j_,"esm2017")}w9();const xA="@firebase/installations",Xv="0.6.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _A=1e4,bA=`w:${Xv}`,NA="FIS_v2",x9="https://firebaseinstallations.googleapis.com/v1",_9=60*60*1e3,b9="installations",N9="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S9={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},xu=new Iu(b9,N9,S9);function SA(t){return t instanceof Js&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AA({projectId:t}){return`${x9}/projects/${t}/installations`}function EA(t){return{token:t.token,requestStatus:2,expiresIn:E9(t.expiresIn),creationTime:Date.now()}}async function TA(t,e){const r=(await e.json()).error;return xu.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function IA({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function A9(t,{refreshToken:e}){const n=IA(t);return n.append("Authorization",T9(e)),n}async function kA(t){const e=await t();return e.status>=500&&e.status<600?t():e}function E9(t){return Number(t.replace("s","000"))}function T9(t){return`${NA} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function I9({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=AA(t),i=IA(t),s=e.getImmediate({optional:!0});if(s){const u=await s.getHeartbeatsHeader();u&&i.append("x-firebase-client",u)}const o={fid:n,authVersion:NA,appId:t.appId,sdkVersion:bA},a={method:"POST",headers:i,body:JSON.stringify(o)},l=await kA(()=>fetch(r,a));if(l.ok){const u=await l.json();return{fid:u.fid||n,registrationStatus:2,refreshToken:u.refreshToken,authToken:EA(u.authToken)}}else throw await TA("Create Installation",l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PA(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k9(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P9=/^[cdef][\w-]{21}$/,R2="";function C9(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=L9(t);return P9.test(n)?n:R2}catch{return R2}}function L9(t){return k9(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ag(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CA=new Map;function LA(t,e){const n=Ag(t);RA(n,e),R9(n,e)}function RA(t,e){const n=CA.get(t);if(n)for(const r of n)r(e)}function R9(t,e){const n=j9();n&&n.postMessage({key:t,fid:e}),D9()}let nu=null;function j9(){return!nu&&"BroadcastChannel"in self&&(nu=new BroadcastChannel("[Firebase] FID Change"),nu.onmessage=t=>{RA(t.data.key,t.data.fid)}),nu}function D9(){CA.size===0&&nu&&(nu.close(),nu=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O9="firebase-installations-database",F9=1,_u="firebase-installations-store";let D0=null;function Zv(){return D0||(D0=rg(O9,F9,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(_u)}}})),D0}async function Im(t,e){const n=Ag(t),i=(await Zv()).transaction(_u,"readwrite"),s=i.objectStore(_u),o=await s.get(n);return await s.put(e,n),await i.done,(!o||o.fid!==e.fid)&&LA(t,e.fid),e}async function jA(t){const e=Ag(t),r=(await Zv()).transaction(_u,"readwrite");await r.objectStore(_u).delete(e),await r.done}async function Eg(t,e){const n=Ag(t),i=(await Zv()).transaction(_u,"readwrite"),s=i.objectStore(_u),o=await s.get(n),a=e(o);return a===void 0?await s.delete(n):await s.put(a,n),await i.done,a&&(!o||o.fid!==a.fid)&&LA(t,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function e5(t){let e;const n=await Eg(t.appConfig,r=>{const i=M9(r),s=U9(t,i);return e=s.registrationPromise,s.installationEntry});return n.fid===R2?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function M9(t){const e=t||{fid:C9(),registrationStatus:0};return DA(e)}function U9(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(xu.create("app-offline"));return{installationEntry:e,registrationPromise:i}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=V9(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:B9(t)}:{installationEntry:e}}async function V9(t,e){try{const n=await I9(t,e);return Im(t.appConfig,n)}catch(n){throw SA(n)&&n.customData.serverCode===409?await jA(t.appConfig):await Im(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function B9(t){let e=await D_(t.appConfig);for(;e.registrationStatus===1;)await PA(100),e=await D_(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await e5(t);return r||n}return e}function D_(t){return Eg(t,e=>{if(!e)throw xu.create("installation-not-found");return DA(e)})}function DA(t){return z9(t)?{fid:t.fid,registrationStatus:0}:t}function z9(t){return t.registrationStatus===1&&t.registrationTime+_A<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function q9({appConfig:t,heartbeatServiceProvider:e},n){const r=H9(t,n),i=A9(t,n),s=e.getImmediate({optional:!0});if(s){const u=await s.getHeartbeatsHeader();u&&i.append("x-firebase-client",u)}const o={installation:{sdkVersion:bA,appId:t.appId}},a={method:"POST",headers:i,body:JSON.stringify(o)},l=await kA(()=>fetch(r,a));if(l.ok){const u=await l.json();return EA(u)}else throw await TA("Generate Auth Token",l)}function H9(t,{fid:e}){return`${AA(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function t5(t,e=!1){let n;const r=await Eg(t.appConfig,s=>{if(!OA(s))throw xu.create("not-registered");const o=s.authToken;if(!e&&G9(o))return s;if(o.requestStatus===1)return n=W9(t,e),s;{if(!navigator.onLine)throw xu.create("app-offline");const a=Y9(s);return n=$9(t,a),a}});return n?await n:r.authToken}async function W9(t,e){let n=await O_(t.appConfig);for(;n.authToken.requestStatus===1;)await PA(100),n=await O_(t.appConfig);const r=n.authToken;return r.requestStatus===0?t5(t,e):r}function O_(t){return Eg(t,e=>{if(!OA(e))throw xu.create("not-registered");const n=e.authToken;return Q9(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function $9(t,e){try{const n=await q9(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return await Im(t.appConfig,r),n}catch(n){if(SA(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await jA(t.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await Im(t.appConfig,r)}throw n}}function OA(t){return t!==void 0&&t.registrationStatus===2}function G9(t){return t.requestStatus===2&&!K9(t)}function K9(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+_9}function Y9(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function Q9(t){return t.requestStatus===1&&t.requestTime+_A<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function J9(t){const e=t,{installationEntry:n,registrationPromise:r}=await e5(e);return r?r.catch(console.error):t5(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function X9(t,e=!1){const n=t;return await Z9(n),(await t5(n,e)).token}async function Z9(t){const{registrationPromise:e}=await e5(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eF(t){if(!t||!t.options)throw O0("App Configuration");if(!t.name)throw O0("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw O0(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function O0(t){return xu.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FA="installations",tF="installations-internal",nF=t=>{const e=t.getProvider("app").getImmediate(),n=eF(e),r=ku(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},rF=t=>{const e=t.getProvider("app").getImmediate(),n=ku(e,FA).getImmediate();return{getId:()=>J9(n),getToken:i=>X9(n,i)}};function iF(){Gs(new Ts(FA,nF,"PUBLIC")),Gs(new Ts(tF,rF,"PRIVATE"))}iF();Di(xA,Xv);Di(xA,Xv,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sF="/firebase-messaging-sw.js",oF="/firebase-cloud-messaging-push-scope",MA="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",aF="https://fcmregistrations.googleapis.com/v1",UA="google.c.a.c_id",lF="google.c.a.c_l",uF="google.c.a.ts",cF="google.c.a.e";var F_;(function(t){t[t.DATA_MESSAGE=1]="DATA_MESSAGE",t[t.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"})(F_||(F_={}));/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License. You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under the License
 * is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
 * or implied. See the License for the specific language governing permissions and limitations under
 * the License.
 */var qd;(function(t){t.PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked"})(qd||(qd={}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yo(t){const e=new Uint8Array(t);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function hF(t){const e="=".repeat((4-t.length%4)%4),n=(t+e).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(n),i=new Uint8Array(r.length);for(let s=0;s<r.length;++s)i[s]=r.charCodeAt(s);return i}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F0="fcm_token_details_db",dF=5,M_="fcm_token_object_Store";async function fF(t){if("databases"in indexedDB&&!(await indexedDB.databases()).map(s=>s.name).includes(F0))return null;let e=null;return(await rg(F0,dF,{upgrade:async(r,i,s,o)=>{var a;if(i<2||!r.objectStoreNames.contains(M_))return;const l=o.objectStore(M_),u=await l.index("fcmSenderId").get(t);if(await l.clear(),!!u){if(i===2){const c=u;if(!c.auth||!c.p256dh||!c.endpoint)return;e={token:c.fcmToken,createTime:(a=c.createTime)!==null&&a!==void 0?a:Date.now(),subscriptionOptions:{auth:c.auth,p256dh:c.p256dh,endpoint:c.endpoint,swScope:c.swScope,vapidKey:typeof c.vapidKey=="string"?c.vapidKey:Yo(c.vapidKey)}}}else if(i===3){const c=u;e={token:c.fcmToken,createTime:c.createTime,subscriptionOptions:{auth:Yo(c.auth),p256dh:Yo(c.p256dh),endpoint:c.endpoint,swScope:c.swScope,vapidKey:Yo(c.vapidKey)}}}else if(i===4){const c=u;e={token:c.fcmToken,createTime:c.createTime,subscriptionOptions:{auth:Yo(c.auth),p256dh:Yo(c.p256dh),endpoint:c.endpoint,swScope:c.swScope,vapidKey:Yo(c.vapidKey)}}}}}})).close(),await N0(F0),await N0("fcm_vapid_details_db"),await N0("undefined"),pF(e)?e:null}function pF(t){if(!t||!t.subscriptionOptions)return!1;const{subscriptionOptions:e}=t;return typeof t.createTime=="number"&&t.createTime>0&&typeof t.token=="string"&&t.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mF="firebase-messaging-database",gF=1,Hd="firebase-messaging-store";let M0=null;function VA(){return M0||(M0=rg(mF,gF,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Hd)}}})),M0}async function yF(t){const e=BA(t),r=await(await VA()).transaction(Hd).objectStore(Hd).get(e);if(r)return r;{const i=await fF(t.appConfig.senderId);if(i)return await n5(t,i),i}}async function n5(t,e){const n=BA(t),i=(await VA()).transaction(Hd,"readwrite");return await i.objectStore(Hd).put(e,n),await i.done,e}function BA({appConfig:t}){return t.appId}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vF={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},si=new Iu("messaging","Messaging",vF);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wF(t,e){const n=await i5(t),r=zA(e),i={method:"POST",headers:n,body:JSON.stringify(r)};let s;try{s=await(await fetch(r5(t.appConfig),i)).json()}catch(o){throw si.create("token-subscribe-failed",{errorInfo:o==null?void 0:o.toString()})}if(s.error){const o=s.error.message;throw si.create("token-subscribe-failed",{errorInfo:o})}if(!s.token)throw si.create("token-subscribe-no-token");return s.token}async function xF(t,e){const n=await i5(t),r=zA(e.subscriptionOptions),i={method:"PATCH",headers:n,body:JSON.stringify(r)};let s;try{s=await(await fetch(`${r5(t.appConfig)}/${e.token}`,i)).json()}catch(o){throw si.create("token-update-failed",{errorInfo:o==null?void 0:o.toString()})}if(s.error){const o=s.error.message;throw si.create("token-update-failed",{errorInfo:o})}if(!s.token)throw si.create("token-update-no-token");return s.token}async function _F(t,e){const r={method:"DELETE",headers:await i5(t)};try{const s=await(await fetch(`${r5(t.appConfig)}/${e}`,r)).json();if(s.error){const o=s.error.message;throw si.create("token-unsubscribe-failed",{errorInfo:o})}}catch(i){throw si.create("token-unsubscribe-failed",{errorInfo:i==null?void 0:i.toString()})}}function r5({projectId:t}){return`${aF}/projects/${t}/registrations`}async function i5({appConfig:t,installations:e}){const n=await e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":`FIS ${n}`})}function zA({p256dh:t,auth:e,endpoint:n,vapidKey:r}){const i={web:{endpoint:n,auth:e,p256dh:t}};return r!==MA&&(i.web.applicationPubKey=r),i}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bF=7*24*60*60*1e3;async function NF(t){const e=await AF(t.swRegistration,t.vapidKey),n={vapidKey:t.vapidKey,swScope:t.swRegistration.scope,endpoint:e.endpoint,auth:Yo(e.getKey("auth")),p256dh:Yo(e.getKey("p256dh"))},r=await yF(t.firebaseDependencies);if(r){if(EF(r.subscriptionOptions,n))return Date.now()>=r.createTime+bF?SF(t,{token:r.token,createTime:Date.now(),subscriptionOptions:n}):r.token;try{await _F(t.firebaseDependencies,r.token)}catch(i){console.warn(i)}return U_(t.firebaseDependencies,n)}else return U_(t.firebaseDependencies,n)}async function SF(t,e){try{const n=await xF(t.firebaseDependencies,e),r=Object.assign(Object.assign({},e),{token:n,createTime:Date.now()});return await n5(t.firebaseDependencies,r),n}catch(n){throw n}}async function U_(t,e){const r={token:await wF(t,e),createTime:Date.now(),subscriptionOptions:e};return await n5(t,r),r.token}async function AF(t,e){const n=await t.pushManager.getSubscription();return n||t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:hF(e)})}function EF(t,e){const n=e.vapidKey===t.vapidKey,r=e.endpoint===t.endpoint,i=e.auth===t.auth,s=e.p256dh===t.p256dh;return n&&r&&i&&s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V_(t){const e={from:t.from,collapseKey:t.collapse_key,messageId:t.fcmMessageId};return TF(e,t),IF(e,t),kF(e,t),e}function TF(t,e){if(!e.notification)return;t.notification={};const n=e.notification.title;n&&(t.notification.title=n);const r=e.notification.body;r&&(t.notification.body=r);const i=e.notification.image;i&&(t.notification.image=i);const s=e.notification.icon;s&&(t.notification.icon=s)}function IF(t,e){e.data&&(t.data=e.data)}function kF(t,e){var n,r,i,s,o;if(!e.fcmOptions&&!(!((n=e.notification)===null||n===void 0)&&n.click_action))return;t.fcmOptions={};const a=(i=(r=e.fcmOptions)===null||r===void 0?void 0:r.link)!==null&&i!==void 0?i:(s=e.notification)===null||s===void 0?void 0:s.click_action;a&&(t.fcmOptions.link=a);const l=(o=e.fcmOptions)===null||o===void 0?void 0:o.analytics_label;l&&(t.fcmOptions.analyticsLabel=l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PF(t){return typeof t=="object"&&!!t&&UA in t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CF(t){if(!t||!t.options)throw U0("App Configuration Object");if(!t.name)throw U0("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:n}=t;for(const r of e)if(!n[r])throw U0(r);return{appName:t.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}function U0(t){return si.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LF{constructor(e,n,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const i=CF(e);this.firebaseDependencies={app:e,appConfig:i,installations:n,analyticsProvider:r}}_delete(){return Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RF(t){try{t.swRegistration=await navigator.serviceWorker.register(sF,{scope:oF}),t.swRegistration.update().catch(()=>{})}catch(e){throw si.create("failed-service-worker-registration",{browserErrorMessage:e==null?void 0:e.message})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jF(t,e){if(!e&&!t.swRegistration&&await RF(t),!(!e&&t.swRegistration)){if(!(e instanceof ServiceWorkerRegistration))throw si.create("invalid-sw-registration");t.swRegistration=e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DF(t,e){e?t.vapidKey=e:t.vapidKey||(t.vapidKey=MA)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qA(t,e){if(!navigator)throw si.create("only-available-in-window");if(Notification.permission==="default"&&await Notification.requestPermission(),Notification.permission!=="granted")throw si.create("permission-blocked");return await DF(t,e==null?void 0:e.vapidKey),await jF(t,e==null?void 0:e.serviceWorkerRegistration),NF(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OF(t,e,n){const r=FF(e);(await t.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:n[UA],message_name:n[lF],message_time:n[uF],message_device_time:Math.floor(Date.now()/1e3)})}function FF(t){switch(t){case qd.NOTIFICATION_CLICKED:return"notification_open";case qd.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MF(t,e){const n=e.data;if(!n.isFirebaseMessaging)return;t.onMessageHandler&&n.messageType===qd.PUSH_RECEIVED&&(typeof t.onMessageHandler=="function"?t.onMessageHandler(V_(n)):t.onMessageHandler.next(V_(n)));const r=n.data;PF(r)&&r[cF]==="1"&&await OF(t,n.messageType,r)}const B_="@firebase/messaging",z_="0.12.12";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UF=t=>{const e=new LF(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),t.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",n=>MF(e,n)),e},VF=t=>{const e=t.getProvider("messaging").getImmediate();return{getToken:r=>qA(e,r)}};function BF(){Gs(new Ts("messaging",UF,"PUBLIC")),Gs(new Ts("messaging-internal",VF,"PRIVATE")),Di(B_,z_),Di(B_,z_,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zF(){try{await W6()}catch{return!1}return typeof window<"u"&&H6()&&jP()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qF(t,e){if(!navigator)throw si.create("only-available-in-window");return t.onMessageHandler=e,()=>{t.onMessageHandler=null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HF(t=ig()){return zF().then(e=>{if(!e)throw si.create("unsupported-browser")},e=>{throw si.create("indexed-db-unsupported")}),ku(cn(t),"messaging").getImmediate()}async function HA(t,e){return t=cn(t),qA(t,e)}function WF(t,e){return t=cn(t),qF(t,e)}BF();const $F={apiKey:"AIzaSyCKPrE1B2ikGlnr6PmTq4JVLlBDlOe50Co",authDomain:"tmv1-7fc4f.firebaseapp.com",projectId:"tmv1-7fc4f",storageBucket:"tmv1-7fc4f.firebasestorage.app",messagingSenderId:"377085834114",appId:"1:377085834114:web:aeb2ca19e51abe8fc5959b",measurementId:"G-8J8CDN3QFF"},Tg=K6($F),Ci=o7(Tg),Ve=$D(Tg);wA(Tg);const j2=HF(Tg),Qi=({children:t})=>{const[e,n]=se.useState("checking");return se.useEffect(()=>{const r=Lu(Ci,async i=>{if(!i){n("denied");return}try{const s=await Ws(Ht(Ve,"users",i.uid));(s.exists()?s.data():{}).userType==="admin"?n("allowed"):n("denied")}catch{n("denied")}});return()=>r()},[]),e==="checking"?null:e==="denied"?f.jsx(oP,{to:"/home",replace:!0}):t};var WA={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},q_=ol.createContext&&ol.createContext(WA),GF=["attr","size","title"];function KF(t,e){if(t==null)return{};var n=YF(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function YF(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function km(){return km=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},km.apply(this,arguments)}function H_(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Pm(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?H_(Object(n),!0).forEach(function(r){QF(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):H_(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function QF(t,e,n){return e=JF(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function JF(t){var e=XF(t,"string");return typeof e=="symbol"?e:e+""}function XF(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function $A(t){return t&&t.map((e,n)=>ol.createElement(e.tag,Pm({key:n},e.attr),$A(e.child)))}function vn(t){return e=>ol.createElement(ZF,km({attr:Pm({},t.attr)},e),$A(t.child))}function ZF(t){var e=n=>{var{attr:r,size:i,title:s}=t,o=KF(t,GF),a=i||n.size||"1em",l;return n.className&&(l=n.className),t.className&&(l=(l?l+" ":"")+t.className),ol.createElement("svg",km({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,o,{className:l,style:Pm(Pm({color:t.color||n.color},n.style),t.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),s&&ol.createElement("title",null,s),t.children)};return q_!==void 0?ol.createElement(q_.Consumer,null,n=>e(n)):e(WA)}function eM(t){return vn({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M12.83 352h262.34A12.82 12.82 0 0 0 288 339.17v-38.34A12.82 12.82 0 0 0 275.17 288H12.83A12.82 12.82 0 0 0 0 300.83v38.34A12.82 12.82 0 0 0 12.83 352zm0-256h262.34A12.82 12.82 0 0 0 288 83.17V44.83A12.82 12.82 0 0 0 275.17 32H12.83A12.82 12.82 0 0 0 0 44.83v38.34A12.82 12.82 0 0 0 12.83 96zM432 160H16a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zm0 256H16a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16z"},child:[]}]})(t)}function tM(t){return vn({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"},child:[]}]})(t)}function s5(t){return vn({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 512c35.32 0 63.97-28.65 63.97-64H160.03c0 35.35 28.65 64 63.97 64zm215.39-149.71c-19.32-20.76-55.47-51.99-55.47-154.29 0-77.7-54.48-139.9-127.94-155.16V32c0-17.67-14.32-32-31.98-32s-31.98 14.33-31.98 32v20.84C118.56 68.1 64.08 130.3 64.08 208c0 102.3-36.15 133.53-55.47 154.29-6 6.45-8.66 14.16-8.61 21.71.11 16.4 12.98 32 32.1 32h383.8c19.12 0 32-15.6 32.1-32 .05-7.55-2.61-15.27-8.61-21.71z"},child:[]}]})(t)}function mf(t){return vn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M509.5 184.6L458.9 32.8C452.4 13.2 434.1 0 413.4 0H272v192h238.7c-.4-2.5-.4-5-1.2-7.4zM240 0H98.6c-20.7 0-39 13.2-45.5 32.8L2.5 184.6c-.8 2.4-.8 4.9-1.2 7.4H240V0zM0 224v240c0 26.5 21.5 48 48 48h416c26.5 0 48-21.5 48-48V224H0z"},child:[]}]})(t)}function gi(t){return vn({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M0 464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V192H0v272zm320-196c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zM192 268c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zM64 268c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40zM400 64h-48V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48H160V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48H48C21.5 64 0 85.5 0 112v48h448v-48c0-26.5-21.5-48-48-48z"},child:[]}]})(t)}function D2(t){return vn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z"},child:[]}]})(t)}function la(t){return vn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"},child:[]}]})(t)}function nM(t){return vn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8z"},child:[]}]})(t)}function rM(t){return vn({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M402.6 83.2l90.2 90.2c3.8 3.8 3.8 10 0 13.8L274.4 405.6l-92.8 10.3c-12.4 1.4-22.9-9.1-21.5-21.5l10.3-92.8L388.8 83.2c3.8-3.8 10-3.8 13.8 0zm162-22.9l-48.8-48.8c-15.2-15.2-39.9-15.2-55.2 0l-35.4 35.4c-3.8 3.8-3.8 10 0 13.8l90.2 90.2c3.8 3.8 10 3.8 13.8 0l35.4-35.4c15.2-15.3 15.2-40 0-55.2zM384 346.2V448H64V128h229.8c3.2 0 6.2-1.3 8.5-3.5l40-40c7.6-7.6 2.2-20.5-8.5-20.5H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V306.2c0-10.7-12.9-16-20.5-8.5l-40 40c-2.2 2.3-3.5 5.3-3.5 8.5z"},child:[]}]})(t)}function iM(t){return vn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M502.3 190.8c3.9-3.1 9.7-.2 9.7 4.7V400c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V195.6c0-5 5.7-7.8 9.7-4.7 22.4 17.4 52.1 39.5 154.1 113.6 21.1 15.4 56.7 47.8 92.2 47.6 35.7.3 72-32.8 92.3-47.6 102-74.1 131.6-96.3 154-113.7zM256 320c23.2.4 56.6-29.2 73.4-41.4 132.7-96.3 142.8-104.7 173.4-128.7 5.8-4.5 9.2-11.5 9.2-18.9v-19c0-26.5-21.5-48-48-48H48C21.5 64 0 85.5 0 112v19c0 7.4 3.4 14.3 9.2 18.9 30.6 23.9 40.7 32.4 173.4 128.7 16.8 12.2 50.2 41.8 73.4 41.4z"},child:[]}]})(t)}function sM(t){return vn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zm-248 50c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"},child:[]}]})(t)}function oM(t){return vn({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"},child:[]}]})(t)}function aM(t){return vn({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M224 136V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zm64 236c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12v8zm0-64c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12v8zm0-72v8c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12zm96-114.1v6.1H256V0h6.1c6.4 0 12.5 2.5 17 7l97.9 98c4.5 4.5 7 10.6 7 16.9z"},child:[]}]})(t)}function lM(t){return vn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 255.531c.253 136.64-111.18 248.372-247.82 248.468-59.015.042-113.223-20.53-155.822-54.911-11.077-8.94-11.905-25.541-1.839-35.607l11.267-11.267c8.609-8.609 22.353-9.551 31.891-1.984C173.062 425.135 212.781 440 256 440c101.705 0 184-82.311 184-184 0-101.705-82.311-184-184-184-48.814 0-93.149 18.969-126.068 49.932l50.754 50.754c10.08 10.08 2.941 27.314-11.313 27.314H24c-8.837 0-16-7.163-16-16V38.627c0-14.254 17.234-21.393 27.314-11.314l49.372 49.372C129.209 34.136 189.552 8 256 8c136.81 0 247.747 110.78 248 247.531zm-180.912 78.784l9.823-12.63c8.138-10.463 6.253-25.542-4.21-33.679L288 256.349V152c0-13.255-10.745-24-24-24h-16c-13.255 0-24 10.745-24 24v135.651l65.409 50.874c10.463 8.137 25.541 6.253 33.679-4.21z"},child:[]}]})(t)}function uM(t){return vn({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M280.37 148.26L96 300.11V464a16 16 0 0 0 16 16l112.06-.29a16 16 0 0 0 15.92-16V368a16 16 0 0 1 16-16h64a16 16 0 0 1 16 16v95.64a16 16 0 0 0 16 16.05L464 480a16 16 0 0 0 16-16V300L295.67 148.26a12.19 12.19 0 0 0-15.3 0zM571.6 251.47L488 182.56V44.05a12 12 0 0 0-12-12h-56a12 12 0 0 0-12 12v72.61L318.47 43a48 48 0 0 0-61 0L4.34 251.47a12 12 0 0 0-1.6 16.9l25.5 31A12 12 0 0 0 45.15 301l235.22-193.74a12.19 12.19 0 0 1 15.3 0L530.9 301a12 12 0 0 0 16.9-1.6l25.5-31a12 12 0 0 0-1.7-16.93z"},child:[]}]})(t)}function O2(t){return vn({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M360 0H24C10.745 0 0 10.745 0 24v16c0 13.255 10.745 24 24 24 0 90.965 51.016 167.734 120.842 192C75.016 280.266 24 357.035 24 448c-13.255 0-24 10.745-24 24v16c0 13.255 10.745 24 24 24h336c13.255 0 24-10.745 24-24v-16c0-13.255-10.745-24-24-24 0-90.965-51.016-167.734-120.842-192C308.984 231.734 360 154.965 360 64c13.255 0 24-10.745 24-24V24c0-13.255-10.745-24-24-24zm-75.078 384H99.08c17.059-46.797 52.096-80 92.92-80 40.821 0 75.862 33.196 92.922 80zm.019-256H99.078C91.988 108.548 88 86.748 88 64h208c0 22.805-3.987 44.587-11.059 64z"},child:[]}]})(t)}function cM(t){return vn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M80 368H16a16 16 0 0 0-16 16v64a16 16 0 0 0 16 16h64a16 16 0 0 0 16-16v-64a16 16 0 0 0-16-16zm0-320H16A16 16 0 0 0 0 64v64a16 16 0 0 0 16 16h64a16 16 0 0 0 16-16V64a16 16 0 0 0-16-16zm0 160H16a16 16 0 0 0-16 16v64a16 16 0 0 0 16 16h64a16 16 0 0 0 16-16v-64a16 16 0 0 0-16-16zm416 176H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zm0-320H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16V80a16 16 0 0 0-16-16zm0 160H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16z"},child:[]}]})(t)}function hM(t){return vn({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"},child:[]}]})(t)}function bu(t){return vn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"},child:[]}]})(t)}function Ps(t){return vn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M304 48c0 26.51-21.49 48-48 48s-48-21.49-48-48 21.49-48 48-48 48 21.49 48 48zm-48 368c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zm208-208c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zM96 256c0-26.51-21.49-48-48-48S0 229.49 0 256s21.49 48 48 48 48-21.49 48-48zm12.922 99.078c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.491-48-48-48zm294.156 0c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.49-48-48-48zM108.922 60.922c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.491-48-48-48z"},child:[]}]})(t)}function F2(t){return vn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M139.61 35.5a12 12 0 0 0-17 0L58.93 98.81l-22.7-22.12a12 12 0 0 0-17 0L3.53 92.41a12 12 0 0 0 0 17l47.59 47.4a12.78 12.78 0 0 0 17.61 0l15.59-15.62L156.52 69a12.09 12.09 0 0 0 .09-17zm0 159.19a12 12 0 0 0-17 0l-63.68 63.72-22.7-22.1a12 12 0 0 0-17 0L3.53 252a12 12 0 0 0 0 17L51 316.5a12.77 12.77 0 0 0 17.6 0l15.7-15.69 72.2-72.22a12 12 0 0 0 .09-16.9zM64 368c-26.49 0-48.59 21.5-48.59 48S37.53 464 64 464a48 48 0 0 0 0-96zm432 16H208a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h288a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zm0-320H208a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h288a16 16 0 0 0 16-16V80a16 16 0 0 0-16-16zm0 160H208a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h288a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16z"},child:[]}]})(t)}function Nl(t){return vn({attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"},child:[]}]})(t)}function GA(t){return vn({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z"},child:[]}]})(t)}function W_(t){return vn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M212.333 224.333H12c-6.627 0-12-5.373-12-12V12C0 5.373 5.373 0 12 0h48c6.627 0 12 5.373 12 12v78.112C117.773 39.279 184.26 7.47 258.175 8.007c136.906.994 246.448 111.623 246.157 248.532C504.041 393.258 393.12 504 256.333 504c-64.089 0-122.496-24.313-166.51-64.215-5.099-4.622-5.334-12.554-.467-17.42l33.967-33.967c4.474-4.474 11.662-4.717 16.401-.525C170.76 415.336 211.58 432 256.333 432c97.268 0 176-78.716 176-176 0-97.267-78.716-176-176-176-58.496 0-110.28 28.476-142.274 72.333h98.274c6.627 0 12 5.373 12 12v48c0 6.627-5.373 12-12 12z"},child:[]}]})(t)}function KA(t){return vn({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M624 208h-64v-64c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v64h-64c-8.8 0-16 7.2-16 16v32c0 8.8 7.2 16 16 16h64v64c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16v-64h64c8.8 0 16-7.2 16-16v-32c0-8.8-7.2-16-16-16zm-400 48c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"},child:[]}]})(t)}function YA(t){return vn({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"},child:[]}]})(t)}function o5(t){return vn({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M96 224c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm448 0c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm32 32h-64c-17.6 0-33.5 7.1-45.1 18.6 40.3 22.1 68.9 62 75.1 109.4h66c17.7 0 32-14.3 32-32v-32c0-35.3-28.7-64-64-64zm-256 0c61.9 0 112-50.1 112-112S381.9 32 320 32 208 82.1 208 144s50.1 112 112 112zm76.8 32h-8.3c-20.8 10-43.9 16-68.5 16s-47.6-6-68.5-16h-8.3C179.6 288 128 339.6 128 403.2V432c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48v-28.8c0-63.6-51.6-115.2-115.2-115.2zm-223.7-13.4C161.5 263.1 145.6 256 128 256H64c-35.3 0-64 28.7-64 64v32c0 17.7 14.3 32 32 32h65.9c6.3-47.4 34.9-87.3 75.2-109.4z"},child:[]}]})(t)}const yn=({userType:t})=>{const e=Xc(),[n,r]=se.useState(!1),i=a=>e.pathname===a,o=[{path:t==="admin"?"/admin-home":"/home",label:"Home",icon:f.jsx(uM,{})},{path:"/profile",label:"Profile",icon:f.jsx(YA,{})}];return t==="user"&&o.push({path:"/task-history",label:"Task History",icon:f.jsx(lM,{})},{path:"/user-reject-details",label:"My Rejections",icon:f.jsx(Nl,{})}),t==="admin"&&o.push({path:"/manage-users",label:"Manage Users",icon:f.jsx(KA,{})},{path:"/assign-work",label:"Assign Work",icon:f.jsx(F2,{})},{path:"/work-list",label:"Work List",icon:f.jsx(cM,{})},{path:"/inventory",label:"Inventory",icon:f.jsx(mf,{})},{path:"/notifications",label:"Notifications",icon:f.jsx(s5,{})}),f.jsx("header",{className:"bg-blue-600 text-white shadow-lg",children:f.jsxs("nav",{className:"container mx-auto px-4 py-4",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("h1",{className:"text-lg sm:text-xl md:text-2xl font-bold",children:"Videography Manager"}),f.jsx("button",{onClick:()=>r(!n),className:"lg:hidden text-2xl focus:outline-none","aria-label":"Toggle menu",children:n?f.jsx(Nl,{}):f.jsx(tM,{})}),f.jsx("ul",{className:"hidden lg:flex space-x-6",children:o.map(a=>f.jsx("li",{children:f.jsxs(hx,{to:a.path,className:`flex items-center gap-2 hover:text-blue-200 transition ${i(a.path)?"font-bold border-b-2 border-white pb-1":""}`,children:[a.icon,f.jsx("span",{children:a.label})]})},a.path))})]}),n&&f.jsx("ul",{className:"lg:hidden mt-4 space-y-2 pb-2",children:o.map(a=>f.jsx("li",{children:f.jsxs(hx,{to:a.path,onClick:()=>r(!1),className:`flex items-center gap-3 p-3 rounded hover:bg-blue-700 transition ${i(a.path)?"bg-blue-700 font-bold":""}`,children:[f.jsx("span",{className:"text-xl",children:a.icon}),f.jsx("span",{children:a.label})]})},a.path))})]})})},dM=()=>{const t=ks(),[e,n]=se.useState(null);se.useEffect(()=>{(async()=>{try{const o=await Rn(Tt(Ve,"notifications"));console.log("Notifications count:",o.size),o.forEach(a=>console.log("Notif doc:",a.id,a.data()))}catch(o){console.error("Test read of notifications failed:",o)}})()},[]),se.useEffect(()=>{console.log("Admin notification listener mounted");const s=vu(Tt(Ve,"notifications"),zd("read","==",!1),qv("createdAt","desc")),o=Tm(s,a=>{console.log("Notification snapshot size:",a.size),a.docChanges().forEach(l=>{if(console.log("Notif change:",l.type,l.doc.id),l.type==="added"){const u=l.doc.data();n({id:l.doc.id,...u})}})},a=>{console.error("Notification listener error:",a)});return()=>{console.log("Admin notification listener unsubscribed"),o()}},[]);const r=async()=>{if(!e)return;try{await Mr(Ht(Ve,"notifications",e.id),{read:!0})}catch(o){console.error("Failed to mark notification read",o)}const s=e.id;n(null),t(`/admin/notifications/${s}`)},i=()=>{if(!e)return"";const s=e.userName||"A user";return e.type==="accept"?`${s} accepted a work.`:e.type==="reject"?`${s} rejected a work.`:e.type==="done"?`${s} marked their work as done.`:e.type==="undo-done"?`${s} undid a done task.`:"New activity on a work."};return f.jsxs("div",{className:"min-h-screen bg-gray-100",children:[f.jsx(yn,{userType:"admin"}),e&&f.jsxs("button",{onClick:r,className:"fixed bottom-4 right-4 z-50 max-w-xs text-left bg-white shadow-xl rounded-xl border border-gray-200 px-4 py-3 text-sm hover:bg-gray-50",children:[f.jsx("p",{className:"font-semibold text-gray-800 mb-1",children:i()}),f.jsx("p",{className:"text-gray-500 text-xs",children:"Click to view details"})]}),f.jsx("main",{className:"container mx-auto px-4 py-6 sm:py-8",children:f.jsxs("div",{className:"max-w-4xl mx-auto",children:[f.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-gray-800 mb-6 sm:mb-8",children:"Admin Dashboard"}),f.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-6",children:[f.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 hover:shadow-xl transition",children:[f.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[f.jsx(F2,{className:"text-3xl sm:text-4xl text-blue-600"}),f.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-blue-600",children:"Work List"})]}),f.jsx("p",{className:"text-gray-600 mb-4 text-sm sm:text-base",children:"View all works, see user acceptance and progress, and manage task status."}),f.jsx("button",{onClick:()=>t("/work-list"),className:"w-full bg-blue-600 text-white py-2 sm:py-3 px-4 rounded hover:bg-blue-700 transition font-medium",children:"Go to Work List"})]}),f.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 hover:shadow-xl transition",children:[f.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[f.jsx(KA,{className:"text-3xl sm:text-4xl text-green-600"}),f.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-green-600",children:"Work Assignment"})]}),f.jsx("p",{className:"text-gray-600 mb-4 text-sm sm:text-base",children:"Create new work projects and assign team members to tasks."}),f.jsx("button",{onClick:()=>t("/assign-work"),className:"w-full bg-green-600 text-white py-2 sm:py-3 px-4 rounded hover:bg-green-700 transition font-medium",children:"Go to Work Assignment"})]}),f.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 hover:shadow-xl transition",children:[f.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[f.jsx(gi,{className:"text-3xl sm:text-4xl text-purple-600"}),f.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-purple-600",children:"Schedule Posting"})]}),f.jsx("p",{className:"text-gray-600 mb-4 text-sm sm:text-base",children:"Set posting dates, mark videos as posted, and view the posting queue."}),f.jsx("button",{onClick:()=>t("/posting-dates"),className:"w-full bg-purple-600 text-white py-2 sm:py-3 px-4 rounded hover:bg-purple-700 transition font-medium",children:"Go to Schedule Posting"})]}),f.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 hover:shadow-xl transition",children:[f.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[f.jsx(F2,{className:"text-3xl sm:text-4xl text-orange-500"}),f.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-orange-500",children:"Send Notifications"})]}),f.jsx("p",{className:"text-gray-600 mb-4 text-sm sm:text-base",children:"Send announcements or messages to all members or selected users."}),f.jsx("button",{onClick:()=>t("/admin/notifications"),className:"w-full bg-orange-500 text-white py-2 sm:py-3 px-4 rounded hover:bg-orange-600 transition font-medium",children:"Go to Send Notifications"})]})]})]})})]})},fM=()=>{const[t,e]=se.useState(null),[n,r]=se.useState([]),[i,s]=se.useState({}),[o,a]=se.useState({}),[l,u]=se.useState(!0),[c,g]=se.useState(!1),[y,m]=se.useState(""),[N,A]=se.useState(!1),[C,_]=se.useState(""),[k,R]=se.useState(null),[D,z]=se.useState(!0),[Q,j]=se.useState(null),E="user";se.useEffect(()=>{const $=Lu(Ci,ue=>{e(ue||null),u(!1)});return()=>$()},[]),se.useEffect(()=>{if(!t)return;(async()=>{g(!0);try{const de=(await Rn(Tt(Ve,"works"))).docs.map(Pe=>({id:Pe.id,...Pe.data()})).filter(Pe=>Array.isArray(Pe.assignedUsers)&&Pe.assignedUsers.includes(t.uid));de.sort((Pe,ze)=>{const Y=Pe.date?new Date(Pe.date).getTime():0;return(ze.date?new Date(ze.date).getTime():0)-Y}),r(de);const Ne=await Rn(Tt(Ve,"inventory")),Re={};Ne.docs.forEach(Pe=>{Re[Pe.id]=Pe.data()}),s(Re)}catch(ue){console.error("Error loading user tasks:",ue)}finally{g(!1)}})()},[t]),se.useEffect(()=>{(async()=>{try{const ue=await Rn(Tt(Ve,"users")),he={};ue.docs.forEach(de=>{he[de.id]=de.data()}),a(he)}catch(ue){console.error("Error loading users:",ue)}})()},[]);const I=$=>{m($),setTimeout(()=>m(""),4e3)};se.useEffect(()=>{if(!t)return;const $=vu(Tt(Ve,"users",t.uid,"notifications"),zd("read","==",!1)),ue=Tm($,he=>{he.docChanges().forEach(de=>{if(de.type==="added"){const Ne=de.doc.data(),Re={id:de.doc.id,...Ne};j(Re),setTimeout(async()=>{try{await Mr(Ht(Ve,"users",t.uid,"notifications",Re.id),{read:!0})}catch(Pe){console.error("Failed to mark user notification read",Pe)}j(Pe=>Pe&&Pe.id===Re.id?null:Pe)},5e3)}})});return()=>ue()},[t]),se.useEffect(()=>{if(!t)return;const $=vu(Tt(Ve,"users",t.uid,"notifications"),zd("read","==",!1)),ue=Tm($,he=>{he.docChanges().forEach(de=>{if(de.type==="added"){const Ne=de.doc.data();j({id:de.doc.id,...Ne})}})});return()=>ue()},[t]);const F=$=>$.status||"incomplete",b=$=>($.userAcceptance||{})[t==null?void 0:t.uid]||"pending",S=async $=>{try{const ue=$.userAcceptance||{};ue[t.uid]="accepted";const he=Ht(Ve,"works",$.id);await Mr(he,{userAcceptance:ue}),r(de=>de.map(Ne=>Ne.id===$.id?{...Ne,userAcceptance:ue}:Ne)),I("Work accepted successfully!"),await Ti(Tt(Ve,"notifications"),{type:"accept",workId:$.id,userId:t.uid,userName:t.displayName||"",createdAt:vo(),read:!1}),await Ti(Tt(Ve,"users",t.uid,"notifications"),{type:"accept",workId:$.id,title:$.title||"Work accepted",message:"You accepted this work.",createdAt:vo(),read:!1})}catch(ue){console.error("Failed to accept:",ue)}},P=$=>{R($),_(""),A(!0)},J=async()=>{if(!C.trim()){I("Please provide a reason for rejection.");return}try{const $=k.userAcceptance||{};$[t.uid]="rejected";const ue=k.rejections||{};ue[t.uid]={reason:C.trim(),timestamp:new Date().toISOString(),approved:!1};const he=Ht(Ve,"works",k.id);await Mr(he,{userAcceptance:$,rejections:ue}),r(de=>de.map(Ne=>Ne.id===k.id?{...Ne,userAcceptance:$,rejections:ue}:Ne)),I("Work rejected."),A(!1),R(null),await Ti(Tt(Ve,"notifications"),{type:"reject",workId:k.id,userId:t.uid,userName:t.displayName||"",createdAt:vo(),read:!1}),await Ti(Tt(Ve,"users",t.uid,"notifications"),{type:"reject",workId:k.id,title:k.title||"Work rejected",message:"You rejected this work.",createdAt:vo(),read:!1})}catch($){console.error("Failed to reject:",$)}},le=$=>{if(!t)return[];const he=($.assignedUserDetails||[]).find(de=>de.userId===t.uid);return(he==null?void 0:he.roles)||[]},we=($,ue)=>{const he=`${t.uid}_${ue}`;return($.roleCompletion||{})[he]==="done"},xe=$=>{const ue=le($);return ue.length?ue.every(he=>we($,he)):!1},ne=async($,ue)=>{if(F($)==="complete")return;const he=`${t.uid}_${ue}`,de=$.roleCompletion||{},Ne=de[he]==="done",Re={...de};Ne?delete Re[he]:Re[he]="done";const Pe=le($),ze=Pe.length>0&&Pe.every(Me=>Re[`${t.uid}_${Me}`]==="done"),Y=Pe.length>0&&Pe.every(Me=>($.roleCompletion||{})[`${t.uid}_${Me}`]==="done");try{ze&&!Y?(await Ti(Tt(Ve,"notifications"),{type:"done",workId:$.id,userId:t.uid,userName:t.displayName||"",createdAt:vo(),read:!1}),await Ti(Tt(Ve,"users",t.uid,"notifications"),{type:"done",workId:$.id,title:$.title||"Work done",message:"All your roles for this work are marked done.",createdAt:vo(),read:!1})):!ze&&Y&&(await Ti(Tt(Ve,"notifications"),{type:"undo-done",workId:$.id,userId:t.uid,userName:t.displayName||"",createdAt:vo(),read:!1}),await Ti(Tt(Ve,"users",t.uid,"notifications"),{type:"undo-done",workId:$.id,title:$.title||"Work status changed",message:"You undid a previously completed work status.",createdAt:vo(),read:!1}));const Me=Ht(Ve,"works",$.id);await Mr(Me,{roleCompletion:Re}),r(_t=>_t.map(it=>it.id===$.id?{...it,roleCompletion:Re}:it))}catch(Me){console.error("Failed to update role status:",Me)}},ae=$=>{const ue=$.assignedItems||[];return ue.length?f.jsxs("div",{className:"mt-3",children:[f.jsx("p",{className:"text-xs sm:text-sm font-semibold text-gray-700 mb-1",children:"Assigned items:"}),f.jsx("div",{className:"flex flex-wrap gap-2",children:ue.map(he=>{const de=i[he];return de?f.jsxs("span",{className:"px-2 py-1 rounded-full bg-blue-50 text-xs sm:text-sm text-blue-800 border border-blue-100",children:[de.itemName||"Item",de.itemNo?` (${de.itemNo})`:""]},he):f.jsx("span",{className:"px-2 py-1 rounded-full bg-gray-100 text-xs text-gray-500",children:"Unknown item"},he)})})]}):null},_e=$=>{const he=($.assignedUsers||[]).filter(de=>de!==(t==null?void 0:t.uid));return he.length===0?f.jsx("div",{className:"mt-3",children:f.jsx("p",{className:"text-xs text-gray-500 italic",children:"You are working on this alone"})}):f.jsxs("div",{className:"mt-3",children:[f.jsx("p",{className:"text-xs sm:text-sm font-semibold text-gray-700 mb-2",children:"Working with:"}),f.jsx("div",{className:"flex flex-wrap gap-2",children:he.map(de=>{const Ne=o[de];if(!Ne)return f.jsxs("span",{className:"inline-flex items-center gap-2 px-3 py-1.5 rounded-full bg-gray-100 text-xs text-gray-500",children:[f.jsx("div",{className:"w-6 h-6 rounded-full bg-gray-300 flex items-center justify-center text-xs font-bold text-white",children:"?"}),"Unknown User"]},de);const Re=Ne.photoURL||Ne.avatarUrl||null;return f.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1.5 rounded-full bg-gradient-to-r from-blue-50 to-purple-50 border border-blue-100",children:[Re?f.jsx("img",{src:Re,alt:Ne.name||"User",className:"w-7 h-7 rounded-full object-cover border border-white shadow-sm"}):f.jsx("div",{className:"w-7 h-7 rounded-full bg-gradient-to-r from-blue-500 to-purple-600 flex items-center justify-center text-xs font-bold text-white",children:(Ne.name||"U").charAt(0).toUpperCase()}),f.jsx("div",{className:"flex flex-col",children:f.jsx("span",{className:"text-xs sm:text-sm font-semibold text-gray-800",children:Ne.name||"User"})})]},de)})})]})},ge=n.filter($=>F($)!=="complete"),U=ge.filter($=>b($)==="pending"),K=ge.filter($=>b($)==="rejected"),W=ge.filter($=>b($)==="accepted"&&!xe($)),te=ge.filter($=>b($)==="accepted"&&xe($)),re=()=>Q?Q.title?Q.title:Q.type==="accept"?"You accepted a work.":Q.type==="reject"?"You rejected a work.":Q.type==="done"?"All your roles for a work are done.":Q.type==="undo-done"?"You changed a previously completed work.":"New notification.":"";return f.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50",children:[f.jsx(yn,{userType:E}),Q&&f.jsxs("div",{className:"fixed bottom-4 right-4 z-50 max-w-xs text-left bg-white shadow-xl rounded-xl border border-gray-200 px-4 py-3 text-sm",children:[f.jsx("p",{className:"font-semibold text-gray-800 mb-1",children:re()}),Q.message&&f.jsx("p",{className:"text-gray-600 text-xs mb-1",children:Q.message}),f.jsx("p",{className:"text-gray-500 text-xs",children:"Notification"})]}),y&&f.jsx("div",{className:"fixed top-20 right-4 z-40 bg-gradient-to-r from-blue-600 to-purple-600 text-white text-sm px-5 py-3 rounded-lg shadow-2xl animate-slide-in",children:y}),N&&f.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:f.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full p-6",children:[f.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-4",children:"Reject Work"}),f.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Please provide a reason for rejecting this work:"}),f.jsx("textarea",{value:C,onChange:$=>_($.target.value),rows:"4",className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-red-500 text-sm",placeholder:"Enter your reason..."}),f.jsxs("div",{className:"flex gap-3 mt-4",children:[f.jsx("button",{onClick:J,className:"flex-1 bg-gradient-to-r from-red-500 to-rose-600 text-white py-2.5 px-4 rounded-xl font-semibold hover:from-red-600 hover:to-rose-700 transition-all",children:"Submit Rejection"}),f.jsx("button",{onClick:()=>{A(!1),R(null)},className:"flex-1 bg-gray-200 text-gray-800 py-2.5 px-4 rounded-xl font-semibold hover:bg-gray-300 transition-all",children:"Cancel"})]})]})}),f.jsxs("main",{className:"container mx-auto px-4 py-8 max-w-5xl",children:[f.jsxs("div",{className:"mb-8",children:[f.jsx("h1",{className:"text-3xl sm:text-4xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-purple-600 mb-2",children:"Welcome Back"}),f.jsx("p",{className:"text-gray-600 text-sm sm:text-base",children:"Manage your tasks efficiently. Accept new assignments and track your progress."})]}),l||c?f.jsxs("div",{className:"flex flex-col items-center justify-center py-20",children:[f.jsx(Ps,{className:"animate-spin text-5xl text-blue-600 mb-4"}),f.jsx("p",{className:"text-gray-600",children:"Loading your tasks..."})]}):ge.length===0?f.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-12 text-center border border-gray-100",children:[f.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-blue-100 to-purple-100 rounded-full flex items-center justify-center mx-auto mb-4",children:f.jsx(D2,{className:"text-4xl text-blue-600"})}),f.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:"All Clear!"}),f.jsx("p",{className:"text-gray-600",children:"You have no active tasks at the moment."})]}):f.jsxs(f.Fragment,{children:[U.length>0&&f.jsxs("section",{className:"mb-8",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[f.jsx("div",{className:"w-1 h-6 bg-gradient-to-b from-yellow-400 to-orange-500 rounded-full"}),f.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-gray-800",children:"Pending Acceptance"}),f.jsx("span",{className:"bg-gradient-to-r from-yellow-400 to-orange-500 text-white text-xs font-bold px-3 py-1 rounded-full",children:U.length})]}),f.jsx("div",{className:"space-y-4",children:U.map($=>f.jsxs("div",{className:"bg-white rounded-2xl shadow-md hover:shadow-xl transition-all p-5 sm:p-6 border border-yellow-100",children:[f.jsxs("div",{className:"flex items-start justify-between mb-3",children:[f.jsxs("div",{className:"flex-1",children:[f.jsx("h3",{className:"text-lg sm:text-xl font-bold text-gray-800 mb-1",children:$.title||"Task"}),$.date&&f.jsxs("p",{className:"flex items-center gap-2 text-xs sm:text-sm text-gray-500",children:[f.jsx(gi,{}),new Date($.date).toLocaleDateString()]})]}),f.jsxs("span",{className:"bg-yellow-100 text-yellow-800 text-xs font-semibold px-3 py-1.5 rounded-full flex items-center gap-1",children:[f.jsx(O2,{}),"Pending"]})]}),$.description&&f.jsx("p",{className:"text-gray-700 text-sm mb-2",children:$.description}),ae($),_e($),f.jsxs("div",{className:"flex gap-3 mt-4",children:[f.jsxs("button",{onClick:()=>S($),className:"flex-1 bg-gradient-to-r from-green-500 to-emerald-600 text-white py-2.5 px-4 rounded-xl font-semibold hover:from-green-600 hover:to-emerald-700 transition-all shadow-md flex items-center justify-center gap-2",children:[f.jsx(la,{}),"Accept"]}),f.jsxs("button",{onClick:()=>P($),className:"flex-1 bg-gradient-to-r from-red-500 to-rose-600 text-white py-2.5 px-4 rounded-xl font-semibold hover:from-red-600 hover:to-rose-700 transition-all shadow-md flex items-center justify-center gap-2",children:[f.jsx(Nl,{}),"Reject"]})]})]},$.id))})]}),K.length>0&&f.jsxs("section",{className:"mb-8",children:[f.jsxs("div",{className:"flex items-center justify-between mb-4",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("div",{className:"w-1 h-6 bg-gradient-to-b from-orange-500 to-red-500 rounded-full"}),f.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-gray-800",children:"Pending Rejection Approval"}),f.jsx("span",{className:"bg-gradient-to-r from-orange-500 to-red-500 text-white text-xs font-bold px-3 py-1 rounded-full",children:K.length})]}),f.jsx("button",{onClick:()=>z($=>!$),className:"text-sm font-semibold text-gray-600 hover:text-gray-800 transition px-3 py-1.5 rounded-lg hover:bg-gray-100",children:D?"Hide":"Show"})]}),D&&f.jsx("div",{className:"space-y-4",children:K.map($=>{const ue=($.rejections||{})[t.uid]||{};return f.jsxs("div",{className:"bg-white rounded-2xl shadow-md p-5 sm:p-6 border border-orange-100",children:[f.jsxs("div",{className:"flex items-start justify-between mb-3",children:[f.jsxs("div",{children:[f.jsx("h3",{className:"text-lg sm:text-xl font-bold text-gray-800 mb-1",children:$.title||"Task"}),$.date&&f.jsxs("p",{className:"flex items-center gap-2 text-xs sm:text-sm text-gray-500",children:[f.jsx(gi,{}),new Date($.date).toLocaleDateString()]})]}),f.jsxs("span",{className:"bg-orange-100 text-orange-800 text-xs font-semibold px-3 py-1.5 rounded-full flex items-center gap-1",children:[f.jsx(O2,{}),"Pending Approval"]})]}),ae($),_e($),f.jsxs("div",{className:"bg-orange-50 rounded-xl p-4 mt-3",children:[f.jsx("p",{className:"text-xs font-semibold text-orange-800 mb-1",children:"Your Rejection Reason:"}),f.jsx("p",{className:"text-sm text-gray-700",children:ue.reason||"-"}),f.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Waiting for admin to approve your rejection request"})]})]},$.id)})})]}),W.length>0&&f.jsxs("section",{className:"mb-8",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[f.jsx("div",{className:"w-1 h-6 bg-gradient-to-b from-blue-500 to-purple-600 rounded-full"}),f.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-gray-800",children:"Active Tasks"}),f.jsx("span",{className:"bg-gradient-to-r from-blue-500 to-purple-600 text-white text-xs font-bold px-3 py-1 rounded-full",children:W.length})]}),f.jsx("div",{className:"space-y-4",children:W.map($=>{const ue=le($);return f.jsxs("div",{className:"bg-white rounded-2xl shadow-md hover:shadow-xl transition-all p-5 sm:p-6 border border-blue-100",children:[f.jsx("h3",{className:"text-lg sm:text-xl font-bold text-gray-800 mb-1",children:$.title||"Task"}),$.date&&f.jsxs("p",{className:"flex items-center gap-2 text-xs sm:text-sm text-gray-500 mb-3",children:[f.jsx(gi,{}),new Date($.date).toLocaleDateString()]}),$.description&&f.jsx("p",{className:"text-gray-700 text-sm mb-2",children:$.description}),ae($),_e($),f.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 rounded-xl p-4 mt-3",children:[f.jsx("p",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Your Work Types:"}),f.jsx("div",{className:"flex flex-wrap gap-2",children:ue.map(he=>{const de=we($,he);return f.jsx("button",{type:"button",onClick:()=>ne($,he),className:`inline-flex items-center gap-2 px-4 py-2 rounded-xl text-sm font-semibold transition-all shadow-sm ${de?"bg-gradient-to-r from-green-500 to-emerald-600 text-white hover:from-green-600 hover:to-emerald-700":"bg-white text-gray-700 border-2 border-gray-200 hover:border-blue-400"}`,children:de?f.jsxs(f.Fragment,{children:[f.jsx(W_,{}),"Undo ",he]}):f.jsxs(f.Fragment,{children:[f.jsx(la,{}),"Mark ",he," as done"]})},he)})})]})]},$.id)})})]}),te.length>0&&f.jsxs("section",{children:[f.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[f.jsx("div",{className:"w-1 h-6 bg-gradient-to-b from-green-500 to-emerald-600 rounded-full"}),f.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-gray-800",children:"Completed"}),f.jsx("span",{className:"bg-gradient-to-r from-green-500 to-emerald-600 text-white text-xs font-bold px-3 py-1 rounded-full",children:te.length})]}),f.jsx("div",{className:"space-y-4",children:te.map($=>{const ue=le($);return f.jsxs("div",{className:"bg-white rounded-2xl shadow-md p-5 sm:p-6 border border-green-100",children:[f.jsxs("div",{className:"flex items-start justify-between mb-3",children:[f.jsxs("div",{children:[f.jsx("h3",{className:"text-lg sm:text-xl font-bold text-gray-800 mb-1",children:$.title||"Task"}),$.date&&f.jsxs("p",{className:"flex items-center gap-2 text-xs sm:text-sm text-gray-500",children:[f.jsx(gi,{}),new Date($.date).toLocaleDateString()]})]}),f.jsx(D2,{className:"text-3xl text-green-500"})]}),$.description&&f.jsx("p",{className:"text-gray-700 text-sm mb-2",children:$.description}),ae($),_e($),f.jsx("div",{className:"flex flex-wrap gap-2 mb-3 mt-3",children:ue.map(he=>f.jsxs("button",{onClick:()=>ne($,he),className:"inline-flex items-center gap-1 px-3 py-1.5 rounded-full text-xs font-semibold bg-green-100 text-green-800 hover:bg-green-200 transition",children:[f.jsx(W_,{className:"text-xs"}),"Undo ",he]},he))}),f.jsx("p",{className:"text-sm text-green-700 font-semibold bg-green-50 px-4 py-2 rounded-lg",children:" All work completed. Waiting for admin review."})]},$.id)})})]})]})]})]})},pM="BCDW2bDpR51kOUCYdebGFw4pHEU_h2159MHvkSEslEdrV0yI0AVUiQikAbClmXfS9EGHHQblUlKTC_To4SaQ7Hg";async function mM(t){if(!t)return;if(!("Notification"in window)){console.log("Notifications not supported");return}if(await Notification.requestPermission()!=="granted"){console.log("Notification permission not granted");return}"serviceWorker"in navigator&&await navigator.serviceWorker.register("/firebase-messaging-sw.js");const n=await HA(j2,{vapidKey:pM});if(!n){console.log("No FCM token");return}await $v(Ht(Ve,"users",t),{fcmTokens:iO(n)},{merge:!0}),WF(j2,r=>{var o,a;const i=(o=r.notification)==null?void 0:o.title,s=(a=r.notification)==null?void 0:a.body;i&&new Notification(i,{body:s,icon:"/icon-192.png"})})}const gM=()=>{const t=ks(),[e,n]=se.useState({email:"",password:""}),[r,i]=se.useState(!1),[s,o]=se.useState(""),a=u=>{n(c=>({...c,[u.target.name]:u.target.value}))},l=async u=>{u.preventDefault(),o(""),i(!0);try{const g=(await HL(Ci,e.email,e.password)).user;await mM(g.uid);const y=Ht(Ve,"users",g.uid),m=await Ws(y);let N="user";m.exists()&&(N=m.data().userType||"user"),t(N==="admin"?"/admin-home":"/home")}catch(c){o(c.message||"Failed to log in.")}finally{i(!1)}};return f.jsx("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center px-4",children:f.jsxs("div",{className:"w-full max-w-md bg-white rounded-lg shadow-md p-4 sm:p-6",children:[f.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-800 mb-4",children:"Log In"}),s&&f.jsx("div",{className:"mb-4 p-3 rounded bg-red-100 text-red-700 text-sm",children:s}),f.jsxs("form",{onSubmit:l,className:"space-y-3 sm:space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Email"}),f.jsx("input",{type:"email",name:"email",value:e.email,onChange:a,required:!0,className:"w-full px-3 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Password"}),f.jsx("input",{type:"password",name:"password",value:e.password,onChange:a,required:!0,className:"w-full px-3 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm"})]}),f.jsx("button",{type:"submit",disabled:r,className:"w-full bg-blue-600 text-white py-2 rounded font-semibold text-sm hover:bg-blue-700 disabled:opacity-50",children:r?"Logging in...":"Log In"}),f.jsxs("p",{className:"mt-3 text-center text-xs sm:text-sm text-gray-600",children:["Do not have an account?"," ",f.jsx("span",{onClick:()=>t("/signup"),className:"text-blue-600 font-semibold cursor-pointer hover:underline",children:"Sign up"})]})]})]})})},yM="mihirudahanayake@gmail.com",vM=["videography","photography"],wM=()=>{const t=ks(),[e,n]=se.useState({name:"",email:"",phoneNo:"",departments:["videography"],firstPriority:"videography",batch:"20/21",studyDepartment:"ITT",gender:"male",registrationNumber:"",cardNumber:"",birthday:"",password:"",confirmPassword:""}),[r,i]=se.useState(!1),[s,o]=se.useState(""),a=g=>{n(y=>({...y,[g.target.name]:g.target.value}))},l=g=>{n(y=>{const N=y.departments.includes(g)?y.departments.filter(C=>C!==g):[...y.departments,g];let A=y.firstPriority;return N.includes(A)||(A=N[0]||""),{...y,departments:N,firstPriority:A}})},u=async g=>{if(g.preventDefault(),o(""),e.password!==e.confirmPassword){o("Password and confirm password do not match.");return}if(e.departments.length===0){o("Please select at least one work department.");return}i(!0);try{const m=(await _N(Ci,e.email,e.password)).user,N=m.email===yM?"admin":"user";await $v(Ht(Ve,"users",m.uid),{name:e.name,email:e.email,phoneNo:e.phoneNo,departments:e.departments,firstPriority:e.firstPriority,batch:e.batch,studyDepartment:e.studyDepartment,gender:e.gender,registrationNumber:e.registrationNumber,cardNumber:e.cardNumber||null,birthday:e.birthday||null,userType:N,createdAt:new Date().toISOString()}),t(N==="admin"?"/admin-home":"/home")}catch(y){o(y.message||"Failed to sign up.")}finally{i(!1)}},c=g=>e.departments.includes(g);return f.jsx("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center px-4",children:f.jsxs("div",{className:"w-full max-w-md bg-white rounded-lg shadow-md p-4 sm:p-6",children:[f.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-800 mb-4",children:"Sign Up"}),s&&f.jsx("div",{className:"mb-4 p-3 rounded bg-red-100 text-red-700 text-sm",children:s}),f.jsxs("form",{onSubmit:u,className:"space-y-3 sm:space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Name"}),f.jsx("input",{type:"text",name:"name",value:e.name,onChange:a,required:!0,className:"w-full px-3 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Email"}),f.jsx("input",{type:"email",name:"email",value:e.email,onChange:a,required:!0,className:"w-full px-3 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Phone number"}),f.jsx("input",{type:"tel",name:"phoneNo",value:e.phoneNo,onChange:a,required:!0,className:"w-full px-3 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Batch"}),f.jsxs("select",{name:"batch",value:e.batch,onChange:a,className:"w-full px-3 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm",children:[f.jsx("option",{value:"20/21",children:"20/21"}),f.jsx("option",{value:"21/22",children:"21/22"}),f.jsx("option",{value:"22/23",children:"22/23"}),f.jsx("option",{value:"23/24",children:"23/24"})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Department in study"}),f.jsxs("select",{name:"studyDepartment",value:e.studyDepartment,onChange:a,className:"w-full px-3 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm",children:[f.jsx("option",{value:"ITT",children:"ITT"}),f.jsx("option",{value:"EET",children:"EET"}),f.jsx("option",{value:"MTT",children:"MTT"}),f.jsx("option",{value:"BPT",children:"BPT"}),f.jsx("option",{value:"Food",children:"Food"})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Gender"}),f.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[f.jsxs("label",{className:"flex items-center gap-2",children:[f.jsx("input",{type:"radio",name:"gender",value:"male",checked:e.gender==="male",onChange:a}),f.jsx("span",{children:"Male"})]}),f.jsxs("label",{className:"flex items-center gap-2",children:[f.jsx("input",{type:"radio",name:"gender",value:"female",checked:e.gender==="female",onChange:a}),f.jsx("span",{children:"Female"})]})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Registration number"}),f.jsx("input",{type:"text",name:"registrationNumber",value:e.registrationNumber,onChange:a,required:!0,className:"w-full px-3 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Card (if have)"}),f.jsx("input",{type:"text",name:"cardNumber",value:e.cardNumber,onChange:a,placeholder:"Optional",className:"w-full px-3 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Birthday"}),f.jsx("input",{type:"date",name:"birthday",value:e.birthday,onChange:a,className:"w-full px-3 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Departments (work)"}),f.jsx("div",{className:"bg-gray-50 border rounded p-2 flex flex-col gap-1",children:vM.map(g=>f.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[f.jsx("input",{type:"checkbox",checked:c(g),onChange:()=>l(g)}),f.jsx("span",{className:"capitalize",children:g})]},g))}),f.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"You can select one or more departments."})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"First priority department (work)"}),f.jsx("select",{name:"firstPriority",value:e.firstPriority,onChange:a,className:"w-full px-3 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm",children:e.departments.map(g=>f.jsx("option",{value:g,children:g},g))})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Password"}),f.jsx("input",{type:"password",name:"password",value:e.password,onChange:a,required:!0,minLength:6,className:"w-full px-3 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Confirm password"}),f.jsx("input",{type:"password",name:"confirmPassword",value:e.confirmPassword,onChange:a,required:!0,minLength:6,className:"w-full px-3 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm"})]}),f.jsx("button",{type:"submit",disabled:r,className:"w-full bg-blue-600 text-white py-2 rounded font-semibold text-sm hover:bg-blue-700 disabled:opacity-50",children:r?"Creating account...":"Sign Up"}),f.jsxs("p",{className:"mt-3 text-center text-xs sm:text-sm text-gray-600",children:["Already have an account?"," ",f.jsx("span",{onClick:()=>t("/"),className:"text-blue-600 font-semibold cursor-pointer hover:underline",children:"Log in"})]})]})]})})},xM=()=>{const[t,e]=se.useState({name:"",email:"",password:"",phone:"",specialty:""}),[n,r]=se.useState(!1),[i,s]=se.useState({type:"",text:""}),o=l=>{e(u=>({...u,[l.target.name]:l.target.value}))},a=async l=>{l.preventDefault(),r(!0),s({type:"",text:""});try{const u=await _N(Ci,t.email,t.password),c=t.email==="mihirudahanayake@gmail.com"?"admin":"user";await $v(Ht(Ve,"users",u.user.uid),{name:t.name,email:t.email,phone:t.phone,specialty:t.specialty,role:c,createdAt:new Date().toISOString()}),s({type:"success",text:"User created successfully."}),e({name:"",email:"",password:"",phone:"",specialty:""})}catch(u){s({type:"error",text:u.message})}finally{r(!1)}};return f.jsxs("div",{className:"min-h-screen bg-gray-100",children:[f.jsx(yn,{userType:"admin"}),f.jsx("main",{className:"container mx-auto px-4 py-6 sm:py-8",children:f.jsxs("div",{className:"max-w-2xl mx-auto bg-white rounded-lg shadow-md p-4 sm:p-8",children:[f.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-gray-800 mb-4 sm:mb-6",children:"Create New User Account"}),i.text&&f.jsx("div",{className:`mb-4 p-3 sm:p-4 rounded text-sm sm:text-base ${i.type==="success"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:i.text}),f.jsxs("form",{onSubmit:a,className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-gray-700 font-semibold mb-2 text-sm sm:text-base",children:"Name"}),f.jsx("input",{type:"text",name:"name",value:t.name,onChange:o,required:!0,className:"w-full px-3 sm:px-4 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm sm:text-base"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-gray-700 font-semibold mb-2 text-sm sm:text-base",children:"Email"}),f.jsx("input",{type:"email",name:"email",value:t.email,onChange:o,required:!0,className:"w-full px-3 sm:px-4 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm sm:text-base"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-gray-700 font-semibold mb-2 text-sm sm:text-base",children:"Password"}),f.jsx("input",{type:"password",name:"password",value:t.password,onChange:o,required:!0,minLength:6,className:"w-full px-3 sm:px-4 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm sm:text-base"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-gray-700 font-semibold mb-2 text-sm sm:text-base",children:"Phone"}),f.jsx("input",{type:"tel",name:"phone",value:t.phone,onChange:o,className:"w-full px-3 sm:px-4 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm sm:text-base"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-gray-700 font-semibold mb-2 text-sm sm:text-base",children:"Specialty"}),f.jsx("input",{type:"text",name:"specialty",value:t.specialty,onChange:o,className:"w-full px-3 sm:px-4 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm sm:text-base"})]}),f.jsx("button",{type:"submit",disabled:n,className:"w-full bg-blue-600 text-white py-2 sm:py-3 px-4 rounded font-semibold hover:bg-blue-700 transition disabled:opacity-50 text-sm sm:text-base",children:n?"Creating user...":"Create User"})]})]})})]})},_M=["videography","editing"],bM=()=>{const[t,e]=se.useState([]),[n,r]=se.useState([]),[i,s]=se.useState({title:"",description:"",date:"",priority:"medium",assignedUsers:[],assignedItems:[]}),[o,a]=se.useState(!1),[l,u]=se.useState({type:"",text:""}),[c,g]=se.useState(""),[y,m]=se.useState("");se.useEffect(()=>{N(),A()},[]);const N=async()=>{try{const S=(await Rn(Tt(Ve,"users"))).docs.map(P=>({id:P.id,...P.data()}));S.sort((P,J)=>{const le=(P.name||"").toLowerCase(),we=(J.name||"").toLowerCase();return le.localeCompare(we)}),e(S)}catch(b){console.error("Error fetching users:",b)}},A=async()=>{try{const S=(await Rn(Tt(Ve,"inventory"))).docs.map(P=>({id:P.id,...P.data()}));S.sort((P,J)=>{const le=(P.itemName||"").toLowerCase(),we=(J.itemName||"").toLowerCase();return le.localeCompare(we)}),r(S)}catch(b){console.error("Error fetching inventory:",b)}},C=b=>{s(S=>({...S,[b.target.name]:b.target.value}))},_=b=>{s(S=>S.assignedUsers.find(J=>J.userId===b)?{...S,assignedUsers:S.assignedUsers.filter(J=>J.userId!==b)}:{...S,assignedUsers:[...S.assignedUsers,{userId:b,roles:["videography"]}]})},k=(b,S)=>{s(P=>{const J=P.assignedUsers.map(le=>{if(le.userId!==b)return le;const xe=le.roles.includes(S)?le.roles.filter(ne=>ne!==S):[...le.roles,S];return{...le,roles:xe.length?xe:[S]}});return{...P,assignedUsers:J}})},R=b=>{s(S=>({...S,assignedItems:S.assignedItems.includes(b)?S.assignedItems.filter(P=>P!==b):[...S.assignedItems,b]}))},D=async b=>{b.preventDefault(),a(!0),u({type:"",text:""});try{await Ti(Tt(Ve,"works"),{title:i.title,description:i.description,date:i.date,priority:i.priority,assignedUsers:i.assignedUsers.map(J=>J.userId),assignedUserDetails:i.assignedUsers,assignedItems:i.assignedItems,createdAt:new Date().toISOString(),status:"pending"});const S=i.assignedUsers.map(async({userId:J})=>{const we=(await Ws(Ht(Ve,"users",J))).data();return(we==null?void 0:we.email)||null}),P=(await Promise.all(S)).filter(Boolean);P.length>0&&await Ti(Tt(Ve,"mail"),{to:P,message:{subject:`New work assigned: ${i.title}`,text:`You have been assigned to a new work:

Title: ${i.title}
Date: ${i.date}
Description: ${i.description}`,html:`<p>Hello,</p> <p>You have been assigned a new work. Please find the details below:</p> 
            <p><b>Title:</b> ${i.title}</p> 
            <p><b>Date:</b> ${i.date}</p> 
            <p><b>Description :</b> ${i.description}</p>
            <p>Kindly review and confirm the work by visiting the <a href="https://tmv.fotmv.online/">Videography Manager</a> Website</p> 
            <p>If you encounter any issues or need further assistance, feel free to contact me.</p> 
            <p>Thank you.</p> 
            
            <p>Best regards,</p>

            <p style="color:#A3A9AD">
              <strong>Mihiru Dahanayake</strong><br>
              <i>Acting Videography Department Head<br>FOT Media<br>Faculty Of Technology<br>Rajarata University of Sri Lanka<br>
              <a href="tel:+94703426554" style="color:#0066cc; text-decoration:none;">070 342 6554</a><br>
              <a href="mailto:mihirudahanayake@gmail.com" style="color:#0066cc; text-decoration:none;">mihiru.online@gmail.com</a></i><br>
            </p>`}}),u({type:"success",text:"Work assigned successfully!"}),s({title:"",description:"",date:"",priority:"medium",assignedUsers:[],assignedItems:[]})}catch(S){u({type:"error",text:S.message})}finally{a(!1)}},z=b=>i.assignedUsers.some(S=>S.userId===b),Q=b=>{var S;return((S=i.assignedUsers.find(P=>P.userId===b))==null?void 0:S.roles)||[]},j=c.trim().toLowerCase(),E=t.filter(b=>{if(!j)return!0;const S=(b.name||"").toLowerCase(),P=(b.cardNumber||"").toLowerCase();return S.includes(j)||P.includes(j)}),I=y.trim().toLowerCase(),F=n.filter(b=>{if(!I)return!0;const S=(b.itemName||"").toLowerCase(),P=(b.itemNo||"").toLowerCase();return S.includes(I)||P.includes(I)});return f.jsxs("div",{className:"min-h-screen bg-gray-100",children:[f.jsx(yn,{userType:"admin"}),f.jsx("main",{className:"container mx-auto px-4 py-6 sm:py-8",children:f.jsxs("div",{className:"max-w-3xl mx-auto bg-white rounded-lg shadow-md p-4 sm:p-8",children:[f.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-gray-800 mb-4 sm:mb-6",children:"Create and Assign Work"}),l.text&&f.jsx("div",{className:`mb-4 p-3 sm:p-4 rounded text-sm sm:text-base ${l.type==="success"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:l.text}),f.jsxs("form",{onSubmit:D,className:"space-y-4",children:[f.jsxs("div",{children:[f.jsxs("label",{className:"flex items-center gap-2 text-gray-700 font-semibold mb-2 text-sm sm:text-base",children:[f.jsx(aM,{}),f.jsx("span",{children:"Work Title"})]}),f.jsx("input",{type:"text",name:"title",value:i.title,onChange:C,required:!0,className:"w-full px-3 sm:px-4 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-green-500 text-sm sm:text-base"})]}),f.jsxs("div",{children:[f.jsxs("label",{className:"flex items-center gap-2 text-gray-700 font-semibold mb-2 text-sm sm:text-base",children:[f.jsx(eM,{}),f.jsx("span",{children:"Description"})]}),f.jsx("textarea",{name:"description",value:i.description,onChange:C,required:!0,rows:"4",className:"w-full px-3 sm:px-4 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-green-500 text-sm sm:text-base"})]}),f.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[f.jsxs("div",{children:[f.jsxs("label",{className:"flex items-center gap-2 text-gray-700 font-semibold mb-2 text-sm sm:text-base",children:[f.jsx(gi,{}),f.jsx("span",{children:"Date"})]}),f.jsx("input",{type:"date",name:"date",value:i.date,onChange:C,required:!0,className:"w-full px-3 sm:px-4 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-green-500 text-sm sm:text-base"})]}),f.jsxs("div",{children:[f.jsxs("label",{className:"flex items-center gap-2 text-gray-700 font-semibold mb-2 text-sm sm:text-base",children:[f.jsx(sM,{}),f.jsx("span",{children:"Priority"})]}),f.jsxs("select",{name:"priority",value:i.priority,onChange:C,className:"w-full px-3 sm:px-4 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-green-500 text-sm sm:text-base",children:[f.jsx("option",{value:"low",children:"Low"}),f.jsx("option",{value:"medium",children:"Medium"}),f.jsx("option",{value:"high",children:"High"}),f.jsx("option",{value:"urgent",children:"Urgent"})]})]})]}),f.jsxs("div",{children:[f.jsxs("label",{className:"flex items-center gap-2 text-gray-700 font-semibold mb-2 text-sm sm:text-base",children:[f.jsx(o5,{}),f.jsx("span",{children:"Assign Team Members"})]}),f.jsxs("div",{className:"relative mb-2",children:[f.jsx(bu,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 text-xs"}),f.jsx("input",{type:"text",placeholder:"Search by name or card...",value:c,onChange:b=>g(b.target.value),className:"w-full pl-8 pr-3 py-2 border border-gray-300 rounded text-sm focus:outline-none focus:ring-2 focus:ring-green-500"})]}),f.jsx("div",{className:"border border-gray-300 rounded p-3 sm:p-4 max-h-60 overflow-y-auto",children:E.length===0?f.jsx("p",{className:"text-gray-500 text-sm sm:text-base",children:"No users found"}):E.map(b=>{const S=z(b.id),P=Q(b.id);return f.jsxs("div",{className:"mb-2 p-2 rounded hover:bg-gray-50",children:[f.jsxs("label",{className:"flex items-center cursor-pointer",children:[f.jsx("input",{type:"checkbox",checked:S,onChange:()=>_(b.id),className:"mr-3 w-4 h-4"}),f.jsx("div",{className:"flex-1",children:f.jsxs("p",{className:"text-gray-700 text-sm sm:text-base",children:[b.name," ",f.jsxs("span",{className:"text-xs text-gray-500",children:["(",b.cardNumber||"-",")"]})]})})]}),S&&f.jsx("div",{className:"mt-1 ml-7 flex flex-wrap gap-2 text-xs sm:text-sm",children:_M.map(J=>f.jsx("button",{type:"button",onClick:()=>k(b.id,J),className:`px-2 py-1 rounded border ${P.includes(J)?"bg-green-600 text-white border-green-600":"bg-white text-gray-700 border-gray-300"}`,children:J},J))})]},b.id)})}),f.jsxs("p",{className:"text-xs sm:text-sm text-gray-500 mt-2",children:["Selected: ",i.assignedUsers.length," member(s)"]})]}),f.jsxs("div",{children:[f.jsxs("label",{className:"flex items-center gap-2 text-gray-700 font-semibold mb-2 text-sm sm:text-base",children:[f.jsx(mf,{}),f.jsx("span",{children:"Assign Inventory Items (Optional)"})]}),f.jsxs("div",{className:"relative mb-2",children:[f.jsx(bu,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 text-xs"}),f.jsx("input",{type:"text",placeholder:"Search by item name or number...",value:y,onChange:b=>m(b.target.value),className:"w-full pl-8 pr-3 py-2 border border-gray-300 rounded text-sm focus:outline-none focus:ring-2 focus:ring-green-500"})]}),f.jsx("div",{className:"border border-gray-300 rounded p-3 sm:p-4 max-h-60 overflow-y-auto",children:F.length===0?f.jsx("p",{className:"text-gray-500 text-sm sm:text-base",children:"No items found"}):F.map(b=>f.jsxs("label",{className:"flex items-center mb-2 cursor-pointer hover:bg-gray-50 p-2 rounded",children:[f.jsx("input",{type:"checkbox",checked:i.assignedItems.includes(b.id),onChange:()=>R(b.id),className:"mr-3 w-4 h-4"}),f.jsxs("div",{className:"flex-1",children:[f.jsxs("p",{className:"text-gray-700 text-sm sm:text-base",children:[b.itemName," ",f.jsxs("span",{className:"text-xs text-gray-500",children:["(",b.itemNo,")"]})]}),b.details&&f.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:b.details})]})]},b.id))}),f.jsxs("p",{className:"text-xs sm:text-sm text-gray-500 mt-2",children:["Selected: ",i.assignedItems.length," item(s)"]})]}),f.jsx("button",{type:"submit",disabled:o||i.assignedUsers.length===0,className:"w-full bg-green-600 text-white py-2 sm:py-3 px-4 rounded font-semibold hover:bg-green-700 transition disabled:opacity-50 text-sm sm:text-base",children:o?"Creating Work...":"Create and Assign Work"})]})]})})]})},NM=()=>{const[t,e]=se.useState([]),[n,r]=se.useState({}),[i,s]=se.useState({}),[o,a]=se.useState(!0),[l,u]=se.useState(""),[c,g]=se.useState(""),[y,m]=se.useState(""),[N,A]=se.useState("accepted"),C=ks();se.useEffect(()=>{_()},[]);const _=async()=>{a(!0);try{const S=await Rn(Tt(Ve,"users")),P={};S.docs.forEach(ne=>{P[ne.id]=ne.data()}),r(P);const J=await Rn(Tt(Ve,"inventory")),le={};J.docs.forEach(ne=>{le[ne.id]=ne.data()}),s(le);const xe=(await Rn(Tt(Ve,"works"))).docs.map(ne=>({id:ne.id,...ne.data()}));e(xe)}catch(S){console.error("Error fetching data:",S)}finally{a(!1)}},k=async S=>{try{const P=Ht(Ve,"works",S);await Mr(P,{status:"complete"}),e(J=>J.map(le=>le.id===S?{...le,status:"complete"}:le))}catch(P){console.error("Failed to mark task complete:",P)}},R=l.trim().toLowerCase(),D=S=>{const P={pending:"bg-red-100 text-red-800",accepted:"bg-orange-100 text-orange-800",done:"bg-blue-100 text-blue-800",completed:"bg-green-100 text-green-800"};return P[S]||P.pending},z=S=>{if((S.status||"").toLowerCase()==="complete")return"completed";const P=S.assignedUserDetails||[],J=S.roleCompletion||{},le=S.userAcceptance||{};return!P.length||!P.every(ne=>le[ne.userId]==="accepted")?"pending":P.every(ne=>(ne.roles||[]).every(ae=>J[`${ne.userId}_${ae}`]==="done"))?"done":"accepted"},Q=t.filter(S=>{if(c||y){if(!S.date)return!1;const ge=new Date(S.date),U=new Date(ge.getTime()-ge.getTimezoneOffset()*6e4).toISOString().slice(0,10);if(c&&U<c||y&&U>y)return!1}const P=z(S);if(N!=="all"&&P!==N)return!1;if(!R)return!0;const J=(S.title||"").toLowerCase(),le=(S.assignedUsers||[]).map(ge=>n[ge]||{}),we=le.map(ge=>(ge.name||"").toLowerCase()),xe=le.map(ge=>(ge.cardNumber||"").toLowerCase()),ne=J.includes(R),ae=we.some(ge=>ge.includes(R)),_e=xe.some(ge=>ge.includes(R));return ne||ae||_e}).sort((S,P)=>{const J=S.date?new Date(S.date).getTime():0;return(P.date?new Date(P.date).getTime():0)-J}),j=Q.filter(S=>(S.status||"incomplete")!=="complete"),E=Q.filter(S=>(S.status||"incomplete")==="complete");if(o)return f.jsxs("div",{className:"min-h-screen bg-gray-100",children:[f.jsx(yn,{userType:"admin"}),f.jsxs("div",{className:"flex flex-col justify-center items-center h-64",children:[f.jsx(Ps,{className:"animate-spin text-4xl text-blue-600 mb-4"}),f.jsx("p",{className:"text-gray-600",children:"Loading tasks..."})]})]});const I=(S,P)=>{const le=(S.userAcceptance||{})[P]||"pending";return le==="accepted"?f.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-green-100 text-green-800 text-[11px] font-semibold",children:[f.jsx(la,{className:"text-[10px]"}),"Accepted"]}):le==="rejected"?f.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-red-100 text-red-800 text-[11px] font-semibold",children:[f.jsx(Nl,{className:"text-[10px]"}),"Rejected"]}):f.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-yellow-100 text-yellow-800 text-[11px] font-semibold",children:[f.jsx(O2,{className:"text-[10px]"}),"Pending"]})},F=(S,P=!1)=>{var ne;const J=z(S),le=S.assignedUserDetails||[],we=S.roleCompletion||{},xe=S.assignedItems||[];return f.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 sm:p-6 hover:shadow-xl transition cursor-pointer",onClick:()=>C(`/tasks/${S.id}`),children:[f.jsxs("div",{className:"flex justify-between items-start mb-3",children:[f.jsxs("div",{className:"flex-1 pr-2",children:[f.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-gray-800",children:S.title||"Task"}),f.jsxs("p",{className:"mt-1 text-xs sm:text-sm text-gray-500 capitalize",children:["Priority: ",S.priority||"medium"]})]}),f.jsx("span",{className:`px-2 sm:px-3 py-1 rounded-full text-xs font-semibold ${D(J)}`,children:J})]}),S.description&&f.jsx("p",{className:"text-gray-600 mb-4 text-sm sm:text-base line-clamp-3",children:S.description}),S.date&&f.jsx("div",{className:"mb-3",children:f.jsxs("div",{className:"flex items-center gap-2 text-xs sm:text-sm text-gray-500",children:[f.jsx(gi,{}),f.jsxs("span",{children:["Date: ",new Date(S.date).toLocaleDateString()]})]})}),f.jsxs("div",{className:"mb-3",children:[f.jsx("div",{className:"flex items-center justify-between mb-2",children:f.jsxs("div",{className:"flex items-center gap-2 text-xs sm:text-sm font-semibold text-gray-700",children:[f.jsx(o5,{}),f.jsx("span",{children:"Assigned to:"})]})}),f.jsxs("div",{className:"space-y-2",children:[le.map(ae=>{const _e=ae.userId,ge=ae.roles||[],U=n[_e]||{},K=U.name||"Unknown",W=U.photoURL||U.avatarUrl||null;return f.jsxs("div",{className:"bg-gray-50 px-2 py-1 rounded text-xs sm:text-sm",children:[f.jsxs("div",{className:"flex items-center justify-between gap-2",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[W?f.jsx("img",{src:W,alt:K,className:"w-7 h-7 rounded-full object-cover border border-white shadow-sm"}):f.jsx("div",{className:"w-7 h-7 rounded-full bg-blue-500 flex items-center justify-center text-xs font-bold text-white",children:K.charAt(0).toUpperCase()}),f.jsx("p",{className:"font-semibold text-gray-800",children:K})]}),I(S,_e)]}),f.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:ge.map(te=>{const re=`${_e}_${te}`,$=we[re]==="done";return f.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 rounded text-xs ${$?"bg-green-100 text-green-800":"bg-gray-200 text-gray-700"}`,children:[$&&f.jsx(la,{className:"text-xs"}),te]},te)})})]},_e)}),le.length===0&&((ne=S.assignedUsers)==null?void 0:ne.map(ae=>{const _e=n[ae]||{},ge=_e.name||"Unknown",U=_e.photoURL||_e.avatarUrl||null;return f.jsxs("div",{className:"bg-gray-50 px-2 py-1 rounded text-xs sm:text-sm flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[U?f.jsx("img",{src:U,alt:ge,className:"w-7 h-7 rounded-full object-cover border border-white shadow-sm"}):f.jsx("div",{className:"w-7 h-7 rounded-full bg-blue-500 flex items-center justify-center text-xs font-bold text-white",children:ge.charAt(0).toUpperCase()}),f.jsx("span",{className:"text-gray-700",children:ge})]}),I(S,ae)]},ae)}))]})]}),xe.length>0&&f.jsxs("div",{className:"mb-3",children:[f.jsxs("div",{className:"flex items-center gap-2 text-xs sm:text-sm font-semibold text-gray-700 mb-2",children:[f.jsx(mf,{}),f.jsx("span",{children:"Items:"})]}),f.jsx("div",{className:"flex flex-wrap gap-2",children:xe.map(ae=>{const _e=i[ae];return f.jsx("span",{className:"bg-blue-50 px-2 py-1 rounded text-xs sm:text-sm text-blue-800",children:_e?`${_e.itemName} (${_e.itemNo})`:"Unknown item"},ae)})})]}),!P&&f.jsxs("button",{type:"button",onClick:ae=>{ae.stopPropagation(),k(S.id)},className:"mt-2 inline-flex items-center gap-2 px-3 py-1.5 rounded bg-green-600 text-white text-xs sm:text-sm hover:bg-green-700",children:[f.jsx(la,{}),"Mark as complete"]}),P&&f.jsx("p",{className:"mt-2 text-xs sm:text-sm text-green-700 font-semibold",children:"Completed"})]},S.id)},b=j.length>0||E.length>0;return f.jsxs("div",{className:"min-h-screen bg-gray-100",children:[f.jsx(yn,{userType:"admin"}),f.jsxs("main",{className:"container mx-auto px-4 py-6 sm:py-8",children:[f.jsxs("div",{className:"flex flex-col gap-3 mb-4 sm:mb-6",children:[f.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-gray-800",children:"All Tasks"}),f.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3",children:[f.jsxs("div",{className:"relative flex-1 min-w-0",children:[f.jsx(bu,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 text-sm"}),f.jsx("input",{type:"text",placeholder:"Search title, user name, or card...",value:l,onChange:S=>u(S.target.value),className:"w-full pl-9 pr-3 py-2 border rounded text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),f.jsxs("div",{className:"grid grid-cols-2 gap-2 sm:flex sm:gap-2 w-full sm:w-auto",children:[f.jsx("input",{type:"date",value:c,onChange:S=>g(S.target.value),className:"w-full px-2 py-2 border rounded text-xs sm:text-sm focus:outline-none focus:ring-2 focus:ring-blue-500","aria-label":"Start date"}),f.jsx("input",{type:"date",value:y,onChange:S=>m(S.target.value),className:"w-full px-2 py-2 border rounded text-xs sm:text-sm focus:outline-none focus:ring-2 focus:ring-blue-500","aria-label":"End date"}),f.jsxs("select",{value:N,onChange:S=>A(S.target.value),className:"w-full px-2 py-2 border rounded text-xs sm:text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[f.jsx("option",{value:"accepted",children:"Accepted"}),f.jsx("option",{value:"pending",children:"Pending"}),f.jsx("option",{value:"done",children:"Done"}),f.jsx("option",{value:"completed",children:"Completed"}),f.jsx("option",{value:"all",children:"All status"})]})]})]})]}),b?f.jsxs(f.Fragment,{children:[j.length>0&&f.jsxs("section",{className:"mb-6",children:[f.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-gray-800 mb-3",children:"Incomplete / waiting for admin"}),f.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:j.map(S=>F(S,!1))})]}),E.length>0&&f.jsxs("section",{children:[f.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-gray-800 mb-3",children:"Completed tasks"}),f.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:E.map(S=>F(S,!0))})]})]}):f.jsx("div",{className:"bg-white rounded-lg shadow-md p-6 sm:p-8 text-center",children:f.jsx("p",{className:"text-gray-600 text-sm sm:text-base",children:"No tasks match your filters."})})]})]})},SM=wA(),AM=()=>{const[t,e]=se.useState(null),[n,r]=se.useState(null),[i,s]=se.useState("loading"),[o,a]=se.useState(!1),[l,u]=se.useState(!1),[c,g]=se.useState(!1),[y,m]=se.useState(!1),[N,A]=se.useState(""),[C,_]=se.useState(""),[k,R]=se.useState(""),[D,z]=se.useState(""),[Q,j]=se.useState({newPassword:"",confirmPassword:""}),[E,I]=se.useState(!1),[F,b]=se.useState(""),S=ks();se.useEffect(()=>{const W=Lu(Ci,async te=>{if(!te){s("no-auth"),e(null);return}try{const re=await Ws(Ht(Ve,"users",te.uid));if(re.exists()){const $={id:te.uid,...re.data(),email:te.email||""};e($),r($)}s("ready")}catch(re){console.error(re),s("error")}});return()=>W()},[]);const P=async()=>{await YL(Ci),S("/")},J=W=>{if(!o)return;const{name:te,value:re}=W.target;e($=>({...$,[te]:re}))},le=()=>{A(""),_(""),b(""),r(t),a(!0)},we=()=>{A(""),_(""),b(""),e(n),a(!1)},xe=async W=>{if(W.preventDefault(),!!(t!=null&&t.id)){g(!0),A(""),_("");try{const te=Ht(Ve,"users",t.id),{id:re,userType:$,createdAt:ue,email:he,...de}=t;await Mr(te,de),_("Profile updated successfully."),a(!1),r(t)}catch(te){console.error(te),A("Failed to update profile.")}finally{g(!1)}}},ne=()=>{R(""),z(""),j({newPassword:"",confirmPassword:""}),u(!0)},ae=()=>{R(""),z(""),j({newPassword:"",confirmPassword:""}),u(!1)},_e=async W=>{if(W.preventDefault(),R(""),z(""),Q.newPassword.length<6){R("New password must be at least 6 characters.");return}if(Q.newPassword!==Q.confirmPassword){R("New password and confirm password do not match.");return}const te=Ci.currentUser;if(!te){R("You are not logged in.");return}m(!0);try{await WL(te,Q.newPassword),z("Password updated successfully."),u(!1),j({newPassword:"",confirmPassword:""})}catch(re){console.error(re),R(re.message||"Failed to update password.")}finally{m(!1)}},ge=async W=>{var $;const te=($=W.target.files)==null?void 0:$[0];if(!te)return;const re=Ci.currentUser;if(!re){b("You are not logged in.");return}b(""),I(!0);try{const ue=`memberProfileImage/${re.uid}/${Date.now()}-${te.name}`,he=g9(SM,ue),de=await p9(he,te),Ne=await m9(de.ref),Re=Ht(Ve,"users",re.uid);await Mr(Re,{photoURL:Ne}),e(Pe=>Pe&&{...Pe,photoURL:Ne}),_("Profile picture updated.")}catch(ue){console.error(ue),b("Failed to upload profile picture.")}finally{I(!1),W.target.value=""}},U=(t==null?void 0:t.userType)==="admin"?"admin":"user",K="w-full px-3 py-2 border rounded text-sm focus:outline-none focus:ring-2 focus:ring-blue-500";return f.jsxs("div",{className:"min-h-screen bg-gray-100",children:[f.jsx(yn,{userType:U}),f.jsxs("main",{className:"container mx-auto px-4 py-6 sm:py-8 max-w-2xl",children:[f.jsxs("div",{className:"flex items-center justify-between mb-6",children:[f.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-800",children:"Profile"}),f.jsx("button",{onClick:P,className:"text-xs sm:text-sm px-3 py-1 rounded bg-red-600 text-white hover:bg-red-700",children:"Logout"})]}),i==="loading"&&f.jsx("p",{className:"text-gray-600 text-sm sm:text-base",children:"Loading profile..."}),i==="no-auth"&&f.jsx("p",{className:"text-gray-600 text-sm sm:text-base",children:"You are not logged in."}),i==="error"&&f.jsx("p",{className:"text-red-600 text-sm sm:text-base",children:"Failed to load profile information."}),i==="ready"&&t&&f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 sm:p-6 flex items-center gap-4 mb-6",children:[f.jsx("div",{className:"flex-shrink-0",children:t.photoURL?f.jsx("img",{src:t.photoURL,alt:t.name||"Profile",style:{width:80,height:80,borderRadius:"50%",objectFit:"cover",border:"2px solid #e5e7eb",display:"block",backgroundColor:"#f3f4f6"}}):f.jsx("div",{className:"w-20 h-20 rounded-full bg-gray-300 flex items-center justify-center text-xl font-semibold text-white",children:(t.name||"U").charAt(0).toUpperCase()})}),f.jsxs("div",{className:"flex-1",children:[f.jsx("p",{className:"text-lg font-semibold text-gray-800",children:t.name||"Unnamed user"}),f.jsx("p",{className:"text-sm text-gray-600",children:t.email}),f.jsx("p",{className:"text-xs text-gray-500 mt-1 capitalize",children:t.userType||"user"}),o&&f.jsxs("div",{className:"mt-3",children:[f.jsx("label",{className:"block text-xs font-semibold text-gray-700 mb-1",children:"Change profile picture"}),f.jsx("input",{type:"file",accept:"image/*",onChange:ge,className:`text-xs text-stone-500\r
                        file:mr-3 file:py-1 file:px-3 file:border file:border-gray-300\r
                        file:text-xs file:font-medium\r
                        file:bg-stone-50 file:text-stone-700\r
                        hover:file:cursor-pointer hover:file:bg-blue-50 hover:file:text-blue-700`}),E&&f.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Uploading image..."}),F&&f.jsx("p",{className:"text-xs text-red-600 mt-1",children:F})]})]})]}),f.jsxs("form",{onSubmit:xe,className:"bg-white rounded-lg shadow-md p-4 sm:p-6 space-y-3 mb-6",children:[f.jsxs("div",{className:"flex justify-between items-center mb-2",children:[f.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"Profile details"}),o?f.jsxs("div",{className:"flex gap-2",children:[f.jsx("button",{type:"submit",disabled:c,className:"text-sm px-3 py-1 rounded bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-50",children:c?"Saving...":"Save"}),f.jsx("button",{type:"button",onClick:we,className:"text-sm px-3 py-1 rounded bg-gray-300 text-gray-800 hover:bg-gray-400",children:"Cancel"})]}):f.jsx("button",{type:"button",onClick:le,className:"text-sm px-3 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",children:"Edit"})]}),N&&f.jsx("div",{className:"p-2 rounded bg-red-100 text-red-700 text-sm",children:N}),C&&f.jsx("div",{className:"p-2 rounded bg-green-100 text-green-700 text-sm",children:C}),f.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Name"}),f.jsx("input",{type:"text",name:"name",value:t.name||"",onChange:J,className:K,disabled:!o})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Email"}),f.jsx("input",{type:"email",name:"email",value:t.email||"",onChange:J,className:K,disabled:!0})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Phone"}),f.jsx("input",{type:"tel",name:"phoneNo",value:t.phoneNo||"",onChange:J,className:K,disabled:!o})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Batch"}),f.jsxs("select",{name:"batch",value:t.batch||"20/21",onChange:J,className:K,disabled:!o,children:[f.jsx("option",{value:"20/21",children:"20/21"}),f.jsx("option",{value:"21/22",children:"21/22"}),f.jsx("option",{value:"22/23",children:"22/23"}),f.jsx("option",{value:"23/24",children:"23/24"})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Study department"}),f.jsxs("select",{name:"studyDepartment",value:t.studyDepartment||"ITT",onChange:J,className:K,disabled:!o,children:[f.jsx("option",{value:"ITT",children:"ITT"}),f.jsx("option",{value:"EET",children:"EET"}),f.jsx("option",{value:"MTT",children:"MTT"}),f.jsx("option",{value:"BPT",children:"BPT"}),f.jsx("option",{value:"Food",children:"Food"})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Gender"}),f.jsxs("select",{name:"gender",value:t.gender||"male",onChange:J,className:K,disabled:!o,children:[f.jsx("option",{value:"male",children:"Male"}),f.jsx("option",{value:"female",children:"Female"})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Registration number"}),f.jsx("input",{type:"text",name:"registrationNumber",value:t.registrationNumber||"",onChange:J,className:K,disabled:!o})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Card"}),f.jsx("input",{type:"text",name:"cardNumber",value:t.cardNumber||"",onChange:J,className:K,disabled:!o})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Birthday"}),f.jsx("input",{type:"date",name:"birthday",value:t.birthday||"",onChange:J,className:K,disabled:!o})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Work department"}),f.jsxs("select",{name:"department",value:t.department||"videography",onChange:J,className:K,disabled:!o,children:[f.jsx("option",{value:"videography",children:"Videography"}),f.jsx("option",{value:"photography",children:"Photography"})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"First priority (work)"}),f.jsxs("select",{name:"firstPriority",value:t.firstPriority||"videography",onChange:J,className:K,disabled:!o,children:[f.jsx("option",{value:"videography",children:"Videography"}),f.jsx("option",{value:"photography",children:"Photography"})]})]})]})]}),f.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 sm:p-6 space-y-3",children:[f.jsxs("div",{className:"flex justify-between items-center mb-1",children:[f.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"Change password"}),l?f.jsx("button",{type:"button",onClick:ae,className:"text-sm px-3 py-1 rounded bg-gray-300 text-gray-800 hover:bg-gray-400",children:"Cancel"}):f.jsx("button",{type:"button",onClick:ne,className:"text-sm px-3 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",children:"Change"})]}),k&&f.jsx("div",{className:"p-2 rounded bg-red-100 text-red-700 text-sm",children:k}),D&&f.jsx("div",{className:"p-2 rounded bg-green-100 text-green-700 text-sm",children:D}),l&&f.jsxs("form",{onSubmit:_e,className:"space-y-3 mt-2",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"New password"}),f.jsx("input",{type:"password",name:"newPassword",value:Q.newPassword,onChange:W=>j(te=>({...te,newPassword:W.target.value})),className:K,minLength:6,required:!0})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Confirm new password"}),f.jsx("input",{type:"password",name:"confirmPassword",value:Q.confirmPassword,onChange:W=>j(te=>({...te,confirmPassword:W.target.value})),className:K,minLength:6,required:!0})]}),f.jsx("button",{type:"submit",disabled:y,className:"w-full bg-blue-600 text-white py-2 rounded font-semibold text-sm hover:bg-blue-700 disabled:opacity-50",children:y?"Updating...":"Update password"})]})]})]})]})]})},EM=()=>{const[t,e]=se.useState([]),[n,r]=se.useState(!0),[i,s]=se.useState(""),[o,a]=se.useState("all"),l=ks();se.useEffect(()=>{(async()=>{try{const m=(await Rn(Tt(Ve,"users"))).docs.map(N=>({id:N.id,...N.data()}));e(m)}catch(y){console.error("Error loading users:",y)}finally{r(!1)}})()},[]);const u=i.trim().toLowerCase(),c=t.filter(g=>{if(o!=="all"&&(g.batch||"")!==o)return!1;if(!u)return!0;const y=(g.name||"").toLowerCase(),m=(g.cardNumber||"").toLowerCase();return y.includes(u)||m.includes(u)});return f.jsxs("div",{className:"min-h-screen bg-gray-100",children:[f.jsx(yn,{userType:"admin"}),f.jsxs("main",{className:"container mx-auto px-4 py-6 sm:py-8 max-w-4xl",children:[f.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-800 mb-4",children:"Manage users"}),f.jsxs("div",{className:"mb-4 flex flex-col sm:flex-row gap-3 sm:items-center",children:[f.jsxs("div",{className:"flex-1 relative",children:[f.jsx(bu,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 text-sm"}),f.jsx("input",{type:"text",placeholder:"Search by name or card...",value:i,onChange:g=>s(g.target.value),className:"w-full pl-9 pr-3 py-2 border rounded text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),f.jsx("div",{className:"w-full sm:w-40",children:f.jsxs("select",{value:o,onChange:g=>a(g.target.value),className:"w-full px-3 py-2 border rounded text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[f.jsx("option",{value:"all",children:"All batches"}),f.jsx("option",{value:"20/21",children:"20/21"}),f.jsx("option",{value:"21/22",children:"21/22"}),f.jsx("option",{value:"22/23",children:"22/23"}),f.jsx("option",{value:"23/24",children:"23/24"})]})})]}),n?f.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[f.jsx(Ps,{className:"animate-spin"}),f.jsx("span",{children:"Loading users..."})]}):c.length===0?f.jsx("p",{className:"text-gray-600 text-sm sm:text-base",children:"No users match your search."}):f.jsx("div",{className:"bg-white rounded-lg shadow-md divide-y",children:c.map(g=>f.jsxs("button",{onClick:()=>l(`/users/${g.id}`),className:"w-full text-left px-4 py-3 flex items-center justify-between hover:bg-gray-50",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[g.photoURL?f.jsx("img",{src:g.photoURL,alt:g.name||"User",className:"w-10 h-10 rounded-full object-cover border border-gray-200 bg-gray-100"}):f.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center text-blue-600",children:f.jsx(YA,{})}),f.jsxs("div",{children:[f.jsx("p",{className:"font-semibold text-gray-800 text-sm sm:text-base",children:g.name||"No name"}),f.jsxs("p",{className:"flex items-center gap-1 text-xs sm:text-sm text-gray-600",children:[f.jsx(iM,{})," ",g.email]}),f.jsxs("p",{className:"text-xs text-gray-500",children:["Card: ",g.cardNumber||"-","  Batch: ",g.batch||"-"]})]})]}),f.jsx("span",{className:"text-xs sm:text-sm text-gray-500",children:g.userType||"user"})]},g.id))})]})]})},TM=()=>{const{userId:t}=tg(),[e,n]=se.useState(null),[r,i]=se.useState([]),[s,o]=se.useState(!0);se.useEffect(()=>{(async()=>{try{const c=await Ws(Ht(Ve,"users",t));c.exists()&&n({id:t,...c.data()});const m=(await Rn(Tt(Ve,"works"))).docs.map(N=>({id:N.id,...N.data()})).filter(N=>N.assignedUsers?Array.isArray(N.assignedUsers)?N.assignedUsers.includes(t):N.assignedUsers===t:!1);m.sort((N,A)=>{const C=N.date?new Date(N.date).getTime():0;return(A.date?new Date(A.date).getTime():0)-C}),i(m)}catch(c){console.error("Error loading user details:",c)}finally{o(!1)}})()},[t]);const a=u=>{const g=(u.assignedUserDetails||[]).find(y=>y.userId===t);return(g==null?void 0:g.roles)||[]},l=(u,c)=>{const g=`${t}_${c}`;return(u.roleCompletion||{})[g]==="done"};return f.jsxs("div",{className:"min-h-screen bg-gray-100",children:[f.jsx(yn,{userType:"admin"}),f.jsxs("main",{className:"container mx-auto px-4 py-6 sm:py-8 max-w-4xl",children:[s&&f.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[f.jsx(Ps,{className:"animate-spin"}),f.jsx("span",{children:"Loading user..."})]}),!s&&!e&&f.jsx("p",{className:"text-gray-600 text-sm sm:text-base",children:"User not found."}),!s&&e&&f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.photoURL?f.jsx("img",{src:e.photoURL,alt:e.name||"User",className:"w-16 h-16 sm:w-20 sm:h-20 rounded-full object-cover border border-gray-200 bg-gray-100"}):f.jsx("div",{className:"w-16 h-16 sm:w-20 sm:h-20 rounded-full bg-gray-300 flex items-center justify-center text-2xl font-semibold text-white",children:(e.name||"U").charAt(0).toUpperCase()}),f.jsxs("div",{children:[f.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-800",children:e.name||"User details"}),f.jsx("p",{className:"text-sm sm:text-base text-gray-600",children:e.email})]})]}),f.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 sm:p-6 mb-6 text-sm sm:text-base space-y-2",children:[f.jsxs("p",{children:[f.jsx("span",{className:"font-semibold",children:"Phone:"})," ",e.phoneNo||"-"]}),f.jsxs("p",{children:[f.jsx("span",{className:"font-semibold",children:"Batch:"})," ",e.batch||"-"]}),f.jsxs("p",{children:[f.jsx("span",{className:"font-semibold",children:"Study department:"})," ",e.studyDepartment||"-"]}),f.jsxs("p",{children:[f.jsx("span",{className:"font-semibold",children:"Gender:"})," ",e.gender||"-"]}),f.jsxs("p",{children:[f.jsx("span",{className:"font-semibold",children:"Registration no:"})," ",e.registrationNumber||"-"]}),f.jsxs("p",{children:[f.jsx("span",{className:"font-semibold",children:"Card:"})," ",e.cardNumber||"-"]}),f.jsxs("p",{children:[f.jsx("span",{className:"font-semibold",children:"Work departments:"})," ",Array.isArray(e.departments)?e.departments.join(", "):e.department||"-"]}),f.jsxs("p",{children:[f.jsx("span",{className:"font-semibold",children:"First priority:"})," ",e.firstPriority||"-"]}),f.jsxs("p",{children:[f.jsx("span",{className:"font-semibold",children:"User type:"})," ",e.userType||"user"]})]}),f.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-3",children:"Task history"}),r.length===0?f.jsx("p",{className:"text-gray-600 text-sm sm:text-base",children:"No tasks for this user."}):f.jsx("div",{className:"space-y-3",children:r.map(u=>{const c=a(u),g=u.status||"incomplete";return f.jsxs("div",{className:"bg-white rounded-lg shadow p-3 sm:p-4 text-sm sm:text-base",children:[f.jsxs("div",{className:"flex justify-between items-start mb-2",children:[f.jsxs("div",{className:"flex-1",children:[f.jsx("h3",{className:"font-semibold text-gray-800",children:u.title||"Untitled task"}),u.date&&f.jsxs("span",{className:"flex items-center gap-1 text-xs text-gray-500 mt-1",children:[f.jsx(gi,{})," ",new Date(u.date).toLocaleDateString()]})]}),f.jsx("span",{className:`px-2 py-1 rounded text-xs font-semibold capitalize ${g==="complete"?"bg-green-100 text-green-800":g==="done"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:g})]}),u.description&&f.jsx("p",{className:"text-gray-700 text-sm mb-2",children:u.description}),c.length>0&&f.jsxs("div",{className:"mt-2",children:[f.jsx("p",{className:"text-xs font-semibold text-gray-700 mb-1",children:"Assigned work types:"}),f.jsx("div",{className:"flex flex-wrap gap-1",children:c.map(y=>{const m=l(u,y);return f.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 rounded text-xs ${m?"bg-green-100 text-green-800":"bg-gray-100 text-gray-700"}`,children:[m&&f.jsx(la,{className:"text-xs"}),y]},y)})})]})]},u.id)})})]})]})]})},IM=()=>{const[t,e]=se.useState(null),[n,r]=se.useState([]),[i,s]=se.useState([]),[o,a]=se.useState(!0);se.useEffect(()=>{const u=Lu(Ci,c=>{e(c||null)});return()=>u()},[]),se.useEffect(()=>{if(!t)return;(async()=>{a(!0);try{const y=(await Rn(Tt(Ve,"works"))).docs.map(A=>({id:A.id,...A.data()})).filter(A=>A.status==="complete"&&Array.isArray(A.assignedUsers)&&A.assignedUsers.includes(t.uid));y.sort((A,C)=>{const _=A.date?new Date(A.date).getTime():0;return(C.date?new Date(C.date).getTime():0)-_}),r(y);const N=(await Rn(vu(Tt(Ve,"rejectedWorks"),zd("userId","==",t.uid)))).docs.map(A=>({id:A.id,...A.data()}));N.sort((A,C)=>{const _=A.approvedAt?new Date(A.approvedAt).getTime():0;return(C.approvedAt?new Date(C.approvedAt).getTime():0)-_}),s(N)}catch(c){console.error("Error loading task history:",c)}finally{a(!1)}})()},[t]);const l=u=>{if(!t)return[];const g=(u.assignedUserDetails||[]).find(y=>y.userId===t.uid);return(g==null?void 0:g.roles)||[]};return f.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50",children:[f.jsx(yn,{userType:"user"}),f.jsxs("main",{className:"container mx-auto px-4 py-8 max-w-4xl",children:[f.jsxs("div",{className:"mb-8",children:[f.jsx("h1",{className:"text-3xl sm:text-4xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-purple-600 mb-2",children:"Task History"}),f.jsx("p",{className:"text-gray-600 text-sm sm:text-base",children:"View all your completed and rejected tasks"})]}),o?f.jsxs("div",{className:"flex flex-col items-center justify-center py-20",children:[f.jsx(Ps,{className:"animate-spin text-5xl text-blue-600 mb-4"}),f.jsx("p",{className:"text-gray-600",children:"Loading history..."})]}):n.length===0&&i.length===0?f.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-12 text-center border border-gray-100",children:[f.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-blue-100 to-purple-100 rounded-full flex items-center justify-center mx-auto mb-4",children:f.jsx(gi,{className:"text-4xl text-blue-600"})}),f.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:"No History"}),f.jsx("p",{className:"text-gray-600",children:"You have no completed or rejected tasks yet."})]}):f.jsxs(f.Fragment,{children:[n.length>0&&f.jsxs("section",{className:"mb-8",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[f.jsx("div",{className:"w-1 h-6 bg-gradient-to-b from-green-500 to-emerald-600 rounded-full"}),f.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-gray-800",children:"Completed Tasks"}),f.jsx("span",{className:"bg-gradient-to-r from-green-500 to-emerald-600 text-white text-xs font-bold px-3 py-1 rounded-full",children:n.length})]}),f.jsx("div",{className:"space-y-4",children:n.map(u=>{const c=l(u);return f.jsxs("div",{className:"bg-white rounded-2xl shadow-md p-5 border border-green-100",children:[f.jsxs("div",{className:"flex items-start justify-between mb-3",children:[f.jsxs("div",{className:"flex-1",children:[f.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-1",children:u.title||"Task"}),u.date&&f.jsxs("p",{className:"flex items-center gap-2 text-xs text-gray-500",children:[f.jsx(gi,{}),new Date(u.date).toLocaleDateString()]})]}),f.jsxs("div",{className:"flex items-center gap-2 text-green-600",children:[f.jsx(la,{className:"text-2xl"}),f.jsx("span",{className:"text-xs font-semibold",children:"Completed"})]})]}),u.description&&f.jsx("p",{className:"text-gray-700 text-sm mb-3",children:u.description}),f.jsx("div",{className:"flex flex-wrap gap-2",children:c.map(g=>f.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-semibold bg-green-100 text-green-800",children:g},g))})]},u.id)})})]}),i.length>0&&f.jsxs("section",{children:[f.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[f.jsx("div",{className:"w-1 h-6 bg-gradient-to-b from-red-500 to-rose-600 rounded-full"}),f.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-gray-800",children:"Rejected Tasks"}),f.jsx("span",{className:"bg-gradient-to-r from-red-500 to-rose-600 text-white text-xs font-bold px-3 py-1 rounded-full",children:i.length})]}),f.jsx("div",{className:"space-y-4",children:i.map(u=>f.jsxs("div",{className:"bg-white rounded-2xl shadow-md p-5 border border-red-100",children:[f.jsxs("div",{className:"flex items-start justify-between mb-3",children:[f.jsxs("div",{className:"flex-1",children:[f.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-1",children:u.title||"Task"}),u.date&&f.jsxs("p",{className:"flex items-center gap-2 text-xs text-gray-500",children:[f.jsx(gi,{}),new Date(u.date).toLocaleDateString()]})]}),f.jsxs("div",{className:"flex items-center gap-2 text-red-600",children:[f.jsx(Nl,{className:"text-2xl"}),f.jsx("span",{className:"text-xs font-semibold",children:"You Rejected"})]})]}),u.description&&f.jsx("p",{className:"text-gray-700 text-sm mb-3",children:u.description}),f.jsxs("div",{className:"bg-red-50 rounded-xl p-4 border border-red-100",children:[f.jsxs("div",{className:"flex items-start gap-2 mb-2",children:[f.jsx(oM,{className:"text-red-600 mt-0.5"}),f.jsxs("div",{className:"flex-1",children:[f.jsx("p",{className:"text-xs font-semibold text-red-800 mb-1",children:"Rejection Reason:"}),f.jsx("p",{className:"text-sm text-gray-700",children:u.rejectionReason||"-"})]})]}),f.jsxs("div",{className:"text-xs text-gray-500 mt-2 flex flex-col gap-1",children:[f.jsxs("p",{children:["Rejected: ",new Date(u.rejectedAt).toLocaleString()]}),f.jsxs("p",{children:["Approved: ",new Date(u.approvedAt).toLocaleString()]})]})]})]},u.id))})]})]})]})]})},kM=["videography","editing"],PM=()=>{const{taskId:t}=tg(),e=ks(),[n,r]=se.useState(null),[i,s]=se.useState([]),[o,a]=se.useState([]),[l,u]=se.useState([]),[c,g]=se.useState([]),[y,m]=se.useState(!0),[N,A]=se.useState(!1),[C,_]=se.useState(!1),[k,R]=se.useState(!1),[D,z]=se.useState(""),[Q,j]=se.useState(""),[E,I]=se.useState(""),[F,b]=se.useState("");se.useEffect(()=>{(async()=>{m(!0);try{const re=(await Rn(Tt(Ve,"users"))).docs.map(de=>({id:de.id,...de.data()}));re.sort((de,Ne)=>{const Re=(de.name||"").toLowerCase(),Pe=(Ne.name||"").toLowerCase();return Re.localeCompare(Pe)}),s(re);const ue=(await Rn(Tt(Ve,"inventory"))).docs.map(de=>({id:de.id,...de.data()}));ue.sort((de,Ne)=>{const Re=(de.itemName||"").toLowerCase(),Pe=(Ne.itemName||"").toLowerCase();return Re.localeCompare(Pe)}),a(ue);const he=await Ws(Ht(Ve,"works",t));if(he.exists()){const de={id:he.id,...he.data()};r(de),u(de.assignedUserDetails||[]),g(de.assignedItems||[])}else z("Task not found.")}catch(te){console.error(te),z("Failed to load task.")}finally{m(!1)}})()},[t]);const S=W=>{if(!k)return;const te=l.find(re=>re.userId===W);u(te?re=>re.filter($=>$.userId!==W):re=>[...re,{userId:W,roles:["videography"]}])},P=(W,te)=>{k&&u(re=>re.map($=>{if($.userId!==W)return $;const he=$.roles.includes(te)?$.roles.filter(de=>de!==te):[...$.roles,te];return{...$,roles:he.length?he:[te]}}))},J=W=>{k&&g(te=>te.includes(W)?te.filter(re=>re!==W):[...te,W])},le=W=>{if(!k)return;const{name:te,value:re}=W.target;r($=>({...$,[te]:re}))},we=async W=>{if(W.preventDefault(),!!n){A(!0),z(""),j("");try{const{id:te,...re}=n,$=n.assignedUsers||[],ue=l.map(de=>de.userId);await Mr(Ht(Ve,"works",n.id),{...re,assignedUsers:ue,assignedUserDetails:l,assignedItems:c});const he=ue.filter(de=>!$.includes(de));if(he.length>0){const de=he.map(async Re=>{const ze=(await Ws(Ht(Ve,"users",Re))).data();return(ze==null?void 0:ze.email)||null}),Ne=(await Promise.all(de)).filter(Boolean);Ne.length>0&&await Ti(Tt(Ve,"mail"),{to:Ne,message:{subject:`You were assigned to a work: ${n.title}`,text:`You have been assigned to the work "${n.title}".

Date: ${n.date}
Description: ${n.description}`,html:`<p>Hello,</p> <p>You have been assigned a work. Please find the details below:</p> 
            <p><b>Title:</b> ${n.title}</p> 
            <p><b>Date:</b> ${n.date}</p>
            <p><b>Description:</b> ${n.description}</p> 
            <p>Kindly review and confirm the work by visiting the <a href="https://tmv.fotmv.online/">Videography Manager</a> Website</p> 
            <p>If you encounter any issues or need further assistance, feel free to contact me.</p> 
            <p>Thank you.</p> 
            
            <p>Best regards,</p>

            <p style="color:#A3A9AD">
              <strong>Mihiru Dahanayake</strong><br>
              <i>Acting Videography Department Head<br>FOT Media<br>Faculty Of Technology<br>Rajarata University of Sri Lanka<br>
              <a href="tel:+94703426554" style="color:#0066cc; text-decoration:none;">070 342 6554</a><br>
              <a href="mailto:mihirudahanayake@gmail.com" style="color:#0066cc; text-decoration:none;">mihiru.online@gmail.com</a></i><br>
            </p>`}})}j("Task updated successfully."),R(!1)}catch(te){console.error(te),z("Failed to update task.")}finally{A(!1)}}},xe=async()=>{if(window.confirm("Are you sure you want to delete this task?")){_(!0),z(""),j("");try{await ZS(Ht(Ve,"works",t)),j("Task deleted successfully."),setTimeout(()=>e("/work-list"),1500)}catch(W){console.error(W),z("Failed to delete task.")}finally{_(!1)}}};if(y)return f.jsxs("div",{className:"min-h-screen bg-gray-100",children:[f.jsx(yn,{userType:"admin"}),f.jsxs("div",{className:"flex flex-col justify-center items-center h-64",children:[f.jsx(Ps,{className:"animate-spin text-4xl text-blue-600 mb-4"}),f.jsx("p",{className:"text-gray-600",children:"Loading task..."})]})]});if(!n)return f.jsxs("div",{className:"min-h-screen bg-gray-100",children:[f.jsx(yn,{userType:"admin"}),f.jsxs("main",{className:"container mx-auto px-4 py-6 sm:py-8 max-w-3xl",children:[f.jsx("p",{className:"text-gray-600 mb-4",children:D||"Task not found."}),f.jsx("button",{onClick:()=>e(-1),className:"px-4 py-2 rounded bg-blue-600 text-white text-sm hover:bg-blue-700",children:"Back"})]})]});const ne=W=>l.some(te=>te.userId===W),ae=W=>{var te;return((te=l.find(re=>re.userId===W))==null?void 0:te.roles)||[]},_e=F.trim().toLowerCase(),ge=i.filter(W=>{if(!_e)return!0;const te=(W.name||"").toLowerCase(),re=(W.cardNumber||"").toLowerCase();return te.includes(_e)||re.includes(_e)}),U=E.trim().toLowerCase(),K=o.filter(W=>{if(!U)return!0;const te=(W.itemName||"").toLowerCase(),re=(W.itemNo||"").toLowerCase();return te.includes(U)||re.includes(U)});return f.jsxs("div",{className:"min-h-screen bg-gray-100",children:[f.jsx(yn,{userType:"admin"}),f.jsxs("main",{className:"container mx-auto px-4 py-6 sm:py-8 max-w-3xl",children:[f.jsxs("div",{className:"flex items-center justify-between mb-4",children:[f.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-800",children:"Task details"}),f.jsxs("div",{className:"flex gap-2",children:[k?f.jsxs(f.Fragment,{children:[f.jsx("button",{onClick:we,disabled:N,className:"px-3 py-1 rounded bg-blue-600 text-white text-sm hover:bg-blue-700 disabled:opacity-50",children:N?"Saving...":"Save"}),f.jsx("button",{onClick:()=>{R(!1),j(""),z(""),u(n.assignedUserDetails||[]),g(n.assignedItems||[])},className:"px-3 py-1 rounded bg-gray-300 text-gray-800 text-sm hover:bg-gray-400",children:"Cancel"})]}):f.jsxs(f.Fragment,{children:[f.jsx("button",{onClick:()=>{R(!0),z(""),j("")},className:"px-3 py-1 rounded bg-blue-600 text-white text-sm hover:bg-blue-700",children:"Edit"}),f.jsxs("button",{onClick:xe,disabled:C,className:"px-3 py-1 rounded bg-red-600 text-white text-sm hover:bg-red-700 disabled:opacity-50 inline-flex items-center gap-1",children:[f.jsx(GA,{}),C?"Deleting...":"Delete"]})]}),f.jsx("button",{onClick:()=>e(-1),className:"px-3 py-1 rounded bg-gray-200 text-gray-800 text-sm hover:bg-gray-300",children:"Back"})]})]}),D&&f.jsx("div",{className:"mb-3 p-2 rounded bg-red-100 text-red-700 text-sm",children:D}),Q&&f.jsx("div",{className:"mb-3 p-2 rounded bg-green-100 text-green-700 text-sm",children:Q}),f.jsxs("form",{className:"space-y-4",onSubmit:we,children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Title"}),f.jsx("input",{type:"text",name:"title",value:n.title||"",onChange:le,disabled:!k,className:"w-full px-3 py-2 border rounded text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Description"}),f.jsx("textarea",{name:"description",value:n.description||"",onChange:le,disabled:!k,rows:3,className:"w-full px-3 py-2 border rounded text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),f.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Date"}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(gi,{className:"text-gray-500"}),f.jsx("input",{type:"date",name:"date",value:n.date?new Date(n.date).toISOString().slice(0,10):"",onChange:le,disabled:!k,className:"flex-1 px-3 py-2 border rounded text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Priority"}),f.jsxs("select",{name:"priority",value:n.priority||"medium",onChange:le,disabled:!k,className:"w-full px-3 py-2 border rounded text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[f.jsx("option",{value:"low",children:"Low"}),f.jsx("option",{value:"medium",children:"Medium"}),f.jsx("option",{value:"high",children:"High"}),f.jsx("option",{value:"urgent",children:"Urgent"})]})]})]}),f.jsxs("div",{children:[f.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:[f.jsx(o5,{className:"inline mr-2"}),"Assigned users and work types"]}),k&&f.jsxs("div",{className:"relative mb-3",children:[f.jsx(bu,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 text-xs"}),f.jsx("input",{type:"text",placeholder:"Search users by name or card...",value:F,onChange:W=>b(W.target.value),className:"w-full pl-8 pr-3 py-2 border rounded text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),f.jsx("div",{className:"bg-white rounded border p-3 max-h-80 overflow-y-auto",children:ge.length===0?f.jsx("p",{className:"text-xs text-gray-500",children:"No users found."}):ge.map(W=>{const te=ne(W.id),re=ae(W.id);return f.jsxs("div",{className:"mb-2 p-2 rounded hover:bg-gray-50",children:[f.jsxs("label",{className:"flex items-center cursor-pointer",children:[f.jsx("input",{type:"checkbox",checked:te,onChange:()=>S(W.id),disabled:!k,className:"mr-3 w-4 h-4"}),f.jsx("div",{className:"flex-1",children:f.jsxs("p",{className:"text-sm",children:[W.name||"No name"," ",f.jsxs("span",{className:"text-xs text-gray-500",children:["(",W.cardNumber||"-",")"]})]})})]}),te&&f.jsx("div",{className:"mt-1 ml-7 flex flex-wrap gap-2 text-xs sm:text-sm",children:kM.map($=>f.jsx("button",{type:"button",onClick:()=>P(W.id,$),disabled:!k,className:`px-2 py-1 rounded border ${re.includes($)?"bg-green-600 text-white border-green-600":"bg-white text-gray-700 border-gray-300"} ${k?"cursor-pointer":"cursor-default"}`,children:$},$))})]},W.id)})})]}),f.jsxs("div",{children:[f.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:[f.jsx(mf,{className:"inline mr-2"}),"Assigned inventory items"]}),k&&f.jsxs("div",{className:"relative mb-2",children:[f.jsx(bu,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 text-xs"}),f.jsx("input",{type:"text",placeholder:"Search by item name or number...",value:E,onChange:W=>I(W.target.value),className:"w-full pl-8 pr-3 py-2 border rounded text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),f.jsx("div",{className:"bg-white rounded border p-3 max-h-60 overflow-y-auto",children:K.length===0?f.jsx("p",{className:"text-xs text-gray-500",children:"No items available."}):K.map(W=>f.jsxs("label",{className:"flex items-center mb-2 cursor-pointer hover:bg-gray-50 p-2 rounded",children:[f.jsx("input",{type:"checkbox",checked:c.includes(W.id),onChange:()=>J(W.id),disabled:!k,className:"mr-3 w-4 h-4"}),f.jsxs("div",{className:"flex-1",children:[f.jsxs("p",{className:"text-sm",children:[W.itemName," ",f.jsxs("span",{className:"text-xs text-gray-500",children:["(",W.itemNo,")"]})]}),W.details&&f.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:W.details})]})]},W.id))}),f.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Selected: ",c.length," item(s)"]})]})]})]})]})},CM=()=>{const[t,e]=se.useState([]),[n,r]=se.useState(!0),[i,s]=se.useState(!1),[o,a]=se.useState(""),[l,u]=se.useState(!1),[c,g]=se.useState(null),[y,m]=se.useState({type:"",text:""}),[N,A]=se.useState({itemNo:"",itemName:"",details:""});se.useEffect(()=>{C()},[]);const C=async()=>{r(!0);try{const I=(await Rn(Tt(Ve,"inventory"))).docs.map(F=>({id:F.id,...F.data()}));I.sort((F,b)=>{const S=(F.itemName||"").toLowerCase(),P=(b.itemName||"").toLowerCase();return S.localeCompare(P)}),e(I)}catch(E){console.error("Error fetching inventory:",E),m({type:"error",text:"Failed to load inventory."})}finally{r(!1)}},_=E=>{A(I=>({...I,[E.target.name]:E.target.value}))},k=async E=>{E.preventDefault(),s(!0),m({type:"",text:""});try{if(c){const I=Ht(Ve,"inventory",c.id);await Mr(I,{...N,updatedAt:new Date().toISOString()}),m({type:"success",text:"Item updated successfully!"})}else await Ti(Tt(Ve,"inventory"),{...N,createdAt:new Date().toISOString()}),m({type:"success",text:"Item added successfully!"});A({itemNo:"",itemName:"",details:""}),u(!1),g(null),await C()}catch(I){console.error("Error saving item:",I),m({type:"error",text:c?"Failed to update item.":"Failed to add item."})}finally{s(!1)}},R=E=>{g(E),A({itemNo:E.itemNo,itemName:E.itemName,details:E.details||""}),u(!0),m({type:"",text:""}),window.scrollTo({top:0,behavior:"smooth"})},D=async(E,I)=>{if(window.confirm(`Are you sure you want to delete "${I}"?`))try{await ZS(Ht(Ve,"inventory",E)),m({type:"success",text:"Item deleted successfully!"}),await C()}catch(F){console.error("Error deleting item:",F),m({type:"error",text:"Failed to delete item."})}},z=()=>{g(null),A({itemNo:"",itemName:"",details:""}),u(!1),m({type:"",text:""})},Q=o.trim().toLowerCase(),j=t.filter(E=>{if(!Q)return!0;const I=(E.itemName||"").toLowerCase(),F=(E.itemNo||"").toLowerCase();return I.includes(Q)||F.includes(Q)});return f.jsxs("div",{className:"min-h-screen bg-gray-100",children:[f.jsx(yn,{userType:"admin"}),f.jsxs("main",{className:"container mx-auto px-4 py-6 sm:py-8",children:[f.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3 mb-4 sm:mb-6",children:[f.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-800",children:"Inventory"}),f.jsxs("button",{onClick:()=>{l&&!c?u(!1):(z(),u(!l))},className:"self-start sm:self-auto inline-flex items-center gap-2 px-4 py-2 rounded bg-green-600 text-white text-sm font-semibold hover:bg-green-700",children:[f.jsx(hM,{}),l?"Cancel":"Add Item"]})]}),y.text&&f.jsx("div",{className:`mb-4 p-3 rounded text-sm ${y.type==="success"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:y.text}),l&&f.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 sm:p-6 mb-6",children:[f.jsxs("div",{className:"flex items-center justify-between mb-4",children:[f.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-gray-800",children:c?"Edit Item":"Add New Item"}),c&&f.jsx("button",{onClick:z,className:"text-gray-500 hover:text-gray-700",title:"Cancel editing",children:f.jsx(Nl,{className:"text-xl"})})]}),f.jsxs("form",{onSubmit:k,className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Item No"}),f.jsx("input",{type:"text",name:"itemNo",value:N.itemNo,onChange:_,required:!0,className:"w-full px-3 py-2 border rounded text-sm focus:outline-none focus:ring-2 focus:ring-green-500"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Item Name"}),f.jsx("input",{type:"text",name:"itemName",value:N.itemName,onChange:_,required:!0,className:"w-full px-3 py-2 border rounded text-sm focus:outline-none focus:ring-2 focus:ring-green-500"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Details"}),f.jsx("textarea",{name:"details",value:N.details,onChange:_,rows:"3",className:"w-full px-3 py-2 border rounded text-sm focus:outline-none focus:ring-2 focus:ring-green-500"})]}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx("button",{type:"submit",disabled:i,className:"flex-1 bg-green-600 text-white py-2 px-4 rounded font-semibold hover:bg-green-700 transition disabled:opacity-50 text-sm",children:i?c?"Updating...":"Adding...":c?"Update Item":"Add Item"}),c&&f.jsx("button",{type:"button",onClick:z,className:"px-4 py-2 border border-gray-300 rounded text-gray-700 font-semibold hover:bg-gray-100 transition text-sm",children:"Cancel"})]})]})]}),f.jsxs("div",{className:"relative mb-4",children:[f.jsx(bu,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 text-sm"}),f.jsx("input",{type:"text",placeholder:"Search by item name or number...",value:o,onChange:E=>a(E.target.value),className:"w-full pl-9 pr-3 py-2 border rounded text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),n?f.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[f.jsx(Ps,{className:"animate-spin text-xl text-blue-600"}),f.jsx("span",{children:"Loading inventory..."})]}):j.length===0?f.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 text-center",children:[f.jsx(mf,{className:"mx-auto text-4xl text-gray-400 mb-2"}),f.jsx("p",{className:"text-gray-600 text-sm",children:o?"No items match your search.":"No items in inventory."})]}):f.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:j.map(E=>f.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 hover:shadow-lg transition",children:[f.jsxs("div",{className:"flex items-start justify-between mb-2",children:[f.jsx("h3",{className:"font-semibold text-gray-800 text-sm sm:text-base flex-1",children:E.itemName}),f.jsx("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded ml-2",children:E.itemNo})]}),E.details&&f.jsx("p",{className:"text-gray-600 text-xs sm:text-sm mb-3",children:E.details}),f.jsxs("div",{className:"flex gap-2 mt-3 pt-3 border-t",children:[f.jsxs("button",{onClick:()=>R(E),className:"flex-1 inline-flex items-center justify-center gap-1 px-3 py-1.5 bg-blue-600 text-white text-xs font-semibold rounded hover:bg-blue-700 transition",children:[f.jsx(rM,{}),"Edit"]}),f.jsxs("button",{onClick:()=>D(E.id,E.itemName),className:"flex-1 inline-flex items-center justify-center gap-1 px-3 py-1.5 bg-red-600 text-white text-xs font-semibold rounded hover:bg-red-700 transition",children:[f.jsx(GA,{}),"Delete"]})]})]},E.id))})]})]})},LM=()=>{const[t,e]=se.useState([]),[n,r]=se.useState({}),[i,s]=se.useState([]),[o,a]=se.useState(!0);se.useEffect(()=>{l()},[]);const l=async()=>{a(!0);try{const m=await Rn(Tt(Ve,"users")),N={};m.docs.forEach(D=>{N[D.id]=D.data()}),r(N);const _=(await Rn(Tt(Ve,"works"))).docs.map(D=>({id:D.id,...D.data()})).filter(D=>{const z=D.rejections||{};return Object.keys(z).some(Q=>!z[Q].approved)});e(_);const R=(await Rn(Tt(Ve,"rejectedWorks"))).docs.map(D=>({id:D.id,...D.data()}));R.sort((D,z)=>{const Q=D.approvedAt?new Date(D.approvedAt).getTime():0;return(z.approvedAt?new Date(z.approvedAt).getTime():0)-Q}),s(R)}catch(m){console.error("Error fetching data:",m)}finally{a(!1)}},u=async(m,N)=>{try{const A=t.find(j=>j.id===m),C=(A.rejections||{})[N];await Ti(Tt(Ve,"rejectedWorks"),{workId:m,userId:N,title:A.title,description:A.description,date:A.date,priority:A.priority,assignedUserDetails:A.assignedUserDetails,assignedItems:A.assignedItems,rejectionReason:C.reason,rejectedAt:C.timestamp,approvedAt:new Date().toISOString()});const _=Ht(Ve,"works",m),k=(A.assignedUsers||[]).filter(j=>j!==N),R=(A.assignedUserDetails||[]).filter(j=>j.userId!==N),D={...A.rejections||{}};delete D[N];const z={...A.userAcceptance||{}};delete z[N];const Q={...A.roleCompletion||{}};Object.keys(Q).forEach(j=>{j.startsWith(`${N}_`)&&delete Q[j]}),await Mr(_,{assignedUsers:k,assignedUserDetails:R,rejections:D,userAcceptance:z,roleCompletion:Q}),await l()}catch(A){console.error("Failed to approve:",A)}},c=async(m,N)=>{try{const A=t.find(R=>R.id===m),C=Ht(Ve,"works",m),_={...A.rejections||{}},k={...A.userAcceptance||{}};delete _[N],k[N]="pending",await Mr(C,{rejections:_,userAcceptance:k}),await l()}catch(A){console.error("Failed to cancel rejection:",A)}};if(o)return f.jsxs("div",{className:"min-h-screen bg-gray-100",children:[f.jsx(yn,{userType:"admin"}),f.jsxs("div",{className:"flex flex-col items-center justify-center h-64",children:[f.jsx(Ps,{className:"animate-spin text-4xl text-blue-600 mb-4"}),f.jsx("p",{className:"text-gray-600",children:"Loading rejections..."})]})]});const g=i.reduce((m,N)=>{const A=N.workId||N.id;return m[A]||(m[A]={workId:A,title:N.title,items:[]}),m[A].items.push(N),m},{}),y=Object.values(g);return f.jsxs("div",{className:"min-h-screen bg-gray-100",children:[f.jsx(yn,{userType:"admin"}),f.jsxs("main",{className:"container mx-auto px-4 py-6 sm:py-8 max-w-4xl",children:[f.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-800 mb-6",children:"Pending Rejection Approvals"}),t.length===0?f.jsx("div",{className:"bg-white rounded-lg shadow-md p-6 text-center mb-8",children:f.jsx("p",{className:"text-gray-600",children:"No pending rejections."})}):f.jsx("div",{className:"space-y-4 mb-10",children:t.map(m=>{const N=m.rejections||{};return f.jsxs("div",{className:"bg-white rounded-lg shadow-md p-5",children:[f.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-3",children:m.title||"Task"}),Object.entries(N).filter(([,A])=>!A.approved).map(([A,C])=>{var _;return f.jsxs("div",{className:"mb-3 p-4 bg-red-50 rounded-lg border border-red-100",children:[f.jsxs("div",{className:"flex items-start justify-between mb-2",children:[f.jsxs("div",{children:[f.jsx("p",{className:"font-semibold text-gray-800 text-sm",children:((_=n[A])==null?void 0:_.name)||"Unknown User"}),f.jsx("p",{className:"text-xs text-gray-500",children:new Date(C.timestamp).toLocaleString()})]}),f.jsxs("div",{className:"flex gap-2",children:[f.jsxs("button",{onClick:()=>u(m.id,A),className:"bg-blue-600 text-white text-xs font-semibold px-3 py-1.5 rounded-lg hover:bg-blue-700 flex items-center gap-1",children:[f.jsx(la,{}),"Approve"]}),f.jsxs("button",{onClick:()=>c(m.id,A),className:"bg-gray-200 text-gray-800 text-xs font-semibold px-3 py-1.5 rounded-lg hover:bg-gray-300 flex items-center gap-1",children:[f.jsx(Nl,{}),"Cancel"]})]})]}),f.jsxs("p",{className:"text-sm text-gray-700 bg-white p-3 rounded",children:[f.jsx("span",{className:"font-semibold",children:"Reason: "}),C.reason]})]},A)})]},m.id)})}),f.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-gray-800 mb-4",children:"Approved Rejections"}),y.length===0?f.jsx("div",{className:"bg-white rounded-lg shadow-md p-6 text-center",children:f.jsx("p",{className:"text-gray-600",children:"No approved rejections yet."})}):f.jsx("div",{className:"space-y-4",children:y.map(m=>f.jsxs("div",{className:"bg-white rounded-lg shadow-md p-5 border border-green-100",children:[f.jsxs("div",{className:"flex items-start justify-between mb-3",children:[f.jsx("h3",{className:"text-lg font-bold text-gray-800",children:m.title||"Task"}),f.jsxs("span",{className:"bg-green-100 text-green-800 text-xs font-semibold px-3 py-1.5 rounded-full flex items-center gap-1",children:[f.jsx(la,{}),"Approved"]})]}),f.jsx("div",{className:"space-y-3",children:m.items.map(N=>{var A;return f.jsxs("div",{className:"p-3 rounded border border-green-100 bg-green-50",children:[f.jsx("p",{className:"text-sm font-semibold text-gray-800 mb-1",children:((A=n[N.userId])==null?void 0:A.name)||"Unknown User"}),f.jsxs("p",{className:"text-xs text-gray-500 mb-1",children:["Rejected:"," ",N.rejectedAt?new Date(N.rejectedAt).toLocaleString():"-",f.jsx("br",{}),"Approved:"," ",N.approvedAt?new Date(N.approvedAt).toLocaleString():"-"]}),f.jsxs("p",{className:"text-sm text-gray-700",children:[f.jsx("span",{className:"font-semibold",children:"Reason: "}),N.rejectionReason||"-"]})]},N.id)})})]},m.workId))})]})]})},RM=()=>{const[t,e]=se.useState(null),[n,r]=se.useState([]),[i,s]=se.useState(!0);return se.useEffect(()=>{const o=Lu(Ci,a=>{e(a||null)});return()=>o()},[]),se.useEffect(()=>{if(!t)return;(async()=>{s(!0);try{const a=vu(Tt(Ve,"rejectedWorks"),zd("userId","==",t.uid)),u=(await Rn(a)).docs.map(c=>({id:c.id,...c.data()}));u.sort((c,g)=>{const y=c.approvedAt?new Date(c.approvedAt).getTime():0;return(g.approvedAt?new Date(g.approvedAt).getTime():0)-y}),r(u)}catch(a){console.error("Error fetching rejected works:",a)}finally{s(!1)}})()},[t]),i?f.jsxs("div",{className:"min-h-screen bg-gray-100",children:[f.jsx(yn,{userType:"user"}),f.jsxs("div",{className:"flex flex-col items-center justify-center h-64",children:[f.jsx(Ps,{className:"animate-spin text-4xl text-blue-600 mb-4"}),f.jsx("p",{className:"text-gray-600",children:"Loading rejected works..."})]})]}):f.jsxs("div",{className:"min-h-screen bg-gray-100",children:[f.jsx(yn,{userType:"user"}),f.jsxs("main",{className:"container mx-auto px-4 py-6 sm:py-8 max-w-3xl",children:[f.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-800 mb-6",children:"My Rejected Works"}),n.length===0?f.jsx("div",{className:"bg-white rounded-lg shadow-md p-6 text-center",children:f.jsx("p",{className:"text-gray-600",children:"You have no rejected works."})}):f.jsx("div",{className:"space-y-4",children:n.map(o=>f.jsxs("div",{className:"bg-white rounded-lg shadow-md p-5",children:[f.jsxs("div",{className:"flex items-start justify-between mb-3",children:[f.jsxs("div",{className:"flex-1",children:[f.jsx("h3",{className:"text-lg font-bold text-gray-800",children:o.title||"Task"}),o.date&&f.jsxs("p",{className:"flex items-center gap-1 text-xs text-gray-500 mt-1",children:[f.jsx(gi,{}),f.jsx("span",{children:new Date(o.date).toLocaleDateString()})]})]}),f.jsxs("span",{className:"bg-red-100 text-red-800 text-xs font-semibold px-3 py-1.5 rounded-full flex items-center gap-1",children:[f.jsx(Nl,{}),"You rejected"]})]}),f.jsxs("div",{className:"bg-red-50 rounded-lg p-4",children:[o.description&&f.jsx("p",{className:"text-sm text-gray-700 mb-3",children:o.description}),f.jsx("p",{className:"text-xs font-semibold text-red-800 mb-1",children:"Your reason:"}),f.jsx("p",{className:"text-sm text-gray-700",children:o.rejectionReason||"-"}),f.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Rejected: ",o.rejectedAt?new Date(o.rejectedAt).toLocaleString():"-",f.jsx("br",{}),"Approved by admin: ",o.approvedAt?new Date(o.approvedAt).toLocaleString():"-"]})]})]},o.id))})]})]})},jM=()=>{const[t,e]=se.useState([]),[n,r]=se.useState(!0),[i,s]=se.useState(!1),o=ks(),a=async()=>{r(!0);try{const m=vu(Tt(Ve,"notifications"),qv("createdAt","desc")),A=(await Rn(m)).docs.map(C=>({id:C.id,...C.data()}));e(A)}catch(m){console.error("Failed to load notifications",m)}finally{r(!1)}};se.useEffect(()=>{a()},[]);const l=m=>{const N=m.userName||"A user";return m.type==="accept"?`${N} accepted a work`:m.type==="reject"?`${N} rejected a work`:m.type==="done"?`${N} marked their work as done`:m.type==="undo-done"?`${N} undid a done task`:`${N} did something`},u=m=>m?(m.toDate?m.toDate():new Date(m)).toLocaleString():"",c=async()=>{const m=t.filter(N=>!N.read);if(m.length)try{s(!0);const N=tA(Ve);m.forEach(A=>{N.update(Ht(Ve,"notifications",A.id),{read:!0})}),await N.commit(),e(A=>A.map(C=>({...C,read:!0})))}catch(N){console.error("Failed to mark all read",N)}finally{s(!1)}},g=t.filter(m=>!m.read).length,y=m=>{o(`/admin/notifications/${m.id}`)};return f.jsxs("div",{className:"min-h-screen bg-gray-100",children:[f.jsx(yn,{userType:"admin"}),f.jsxs("main",{className:"container mx-auto px-4 py-6 max-w-4xl",children:[f.jsxs("div",{className:"flex items-center justify-between mb-6",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(s5,{className:"text-2xl text-blue-600"}),f.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-800",children:"Notification History"})]}),f.jsxs("button",{onClick:c,disabled:i||g===0,className:`px-4 py-2 rounded text-sm font-semibold ${g===0?"bg-gray-300 text-gray-600 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"}`,children:["Mark all read (",g,")"]})]}),n?f.jsx("p",{children:"Loading notifications..."}):t.length?f.jsx("ul",{className:"space-y-3",children:t.map(m=>f.jsx("li",{onClick:()=>y(m),className:`bg-white rounded-lg shadow border p-4 cursor-pointer flex items-start gap-3 justify-between ${m.read?"border-gray-100":"border-blue-200 bg-blue-50"}`,children:f.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[f.jsx("div",{className:"mt-1",children:m.read?f.jsx(D2,{className:"text-green-500"}):f.jsx(nM,{className:"text-blue-500 text-xs"})}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsx("p",{className:"font-semibold text-gray-800 truncate",children:l(m)}),f.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Work ID:"," ",f.jsx("span",{className:"font-mono break-all",children:m.workId})]}),f.jsxs("p",{className:"text-xs text-gray-500",children:["At: ",u(m.createdAt)]})]})]})},m.id))}):f.jsx("p",{children:"No notifications yet."})]})]})},DM="modulepreload",OM=function(t){return"https://tmv.fotmv.online/"+t},$_={},V0=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(n.map(l=>{if(l=OM(l),l in $_)return;$_[l]=!0;const u=l.endsWith(".css"),c=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${c}`))return;const g=document.createElement("link");if(g.rel=u?"stylesheet":DM,u||(g.as="script"),g.crossOrigin="",g.href=l,a&&g.setAttribute("nonce",a),document.head.appendChild(g),u)return new Promise((y,m)=>{g.addEventListener("load",y),g.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})};function an(t){"@babel/helpers - typeof";return an=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},an(t)}var Qs=Uint8Array,ns=Uint16Array,a5=Int32Array,l5=new Qs([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),u5=new Qs([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),G_=new Qs([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),QA=function(t,e){for(var n=new ns(31),r=0;r<31;++r)n[r]=e+=1<<t[r-1];for(var i=new a5(n[30]),r=1;r<30;++r)for(var s=n[r];s<n[r+1];++s)i[s]=s-n[r]<<5|r;return{b:n,r:i}},JA=QA(l5,2),FM=JA.b,M2=JA.r;FM[28]=258,M2[258]=28;var MM=QA(u5,0),K_=MM.r,U2=new ns(32768);for(var Tn=0;Tn<32768;++Tn){var Ha=(Tn&43690)>>1|(Tn&21845)<<1;Ha=(Ha&52428)>>2|(Ha&13107)<<2,Ha=(Ha&61680)>>4|(Ha&3855)<<4,U2[Tn]=((Ha&65280)>>8|(Ha&255)<<8)>>1}var cd=function(t,e,n){for(var r=t.length,i=0,s=new ns(e);i<r;++i)t[i]&&++s[t[i]-1];var o=new ns(e);for(i=1;i<e;++i)o[i]=o[i-1]+s[i-1]<<1;var a;if(n){a=new ns(1<<e);var l=15-e;for(i=0;i<r;++i)if(t[i])for(var u=i<<4|t[i],c=e-t[i],g=o[t[i]-1]++<<c,y=g|(1<<c)-1;g<=y;++g)a[U2[g]>>l]=u}else for(a=new ns(r),i=0;i<r;++i)t[i]&&(a[i]=U2[o[t[i]-1]++]>>15-t[i]);return a},Nu=new Qs(288);for(var Tn=0;Tn<144;++Tn)Nu[Tn]=8;for(var Tn=144;Tn<256;++Tn)Nu[Tn]=9;for(var Tn=256;Tn<280;++Tn)Nu[Tn]=7;for(var Tn=280;Tn<288;++Tn)Nu[Tn]=8;var Cm=new Qs(32);for(var Tn=0;Tn<32;++Tn)Cm[Tn]=5;var UM=cd(Nu,9,0),VM=cd(Cm,5,0),XA=function(t){return(t+7)/8|0},BM=function(t,e,n){return(n==null||n>t.length)&&(n=t.length),new Qs(t.subarray(e,n))},$o=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8},Fh=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8,t[r+2]|=n>>16},B0=function(t,e){for(var n=[],r=0;r<t.length;++r)t[r]&&n.push({s:r,f:t[r]});var i=n.length,s=n.slice();if(!i)return{t:eE,l:0};if(i==1){var o=new Qs(n[0].s+1);return o[n[0].s]=1,{t:o,l:1}}n.sort(function(z,Q){return z.f-Q.f}),n.push({s:-1,f:25001});var a=n[0],l=n[1],u=0,c=1,g=2;for(n[0]={s:-1,f:a.f+l.f,l:a,r:l};c!=i-1;)a=n[n[u].f<n[g].f?u++:g++],l=n[u!=c&&n[u].f<n[g].f?u++:g++],n[c++]={s:-1,f:a.f+l.f,l:a,r:l};for(var y=s[0].s,r=1;r<i;++r)s[r].s>y&&(y=s[r].s);var m=new ns(y+1),N=V2(n[c-1],m,0);if(N>e){var r=0,A=0,C=N-e,_=1<<C;for(s.sort(function(Q,j){return m[j.s]-m[Q.s]||Q.f-j.f});r<i;++r){var k=s[r].s;if(m[k]>e)A+=_-(1<<N-m[k]),m[k]=e;else break}for(A>>=C;A>0;){var R=s[r].s;m[R]<e?A-=1<<e-m[R]++-1:++r}for(;r>=0&&A;--r){var D=s[r].s;m[D]==e&&(--m[D],++A)}N=e}return{t:new Qs(m),l:N}},V2=function(t,e,n){return t.s==-1?Math.max(V2(t.l,e,n+1),V2(t.r,e,n+1)):e[t.s]=n},Y_=function(t){for(var e=t.length;e&&!t[--e];);for(var n=new ns(++e),r=0,i=t[0],s=1,o=function(l){n[r++]=l},a=1;a<=e;++a)if(t[a]==i&&a!=e)++s;else{if(!i&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(i),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(i);s=1,i=t[a]}return{c:n.subarray(0,r),n:e}},Mh=function(t,e){for(var n=0,r=0;r<e.length;++r)n+=t[r]*e[r];return n},ZA=function(t,e,n){var r=n.length,i=XA(e+2);t[i]=r&255,t[i+1]=r>>8,t[i+2]=t[i]^255,t[i+3]=t[i+1]^255;for(var s=0;s<r;++s)t[i+s+4]=n[s];return(i+4+r)*8},Q_=function(t,e,n,r,i,s,o,a,l,u,c){$o(e,c++,n),++i[256];for(var g=B0(i,15),y=g.t,m=g.l,N=B0(s,15),A=N.t,C=N.l,_=Y_(y),k=_.c,R=_.n,D=Y_(A),z=D.c,Q=D.n,j=new ns(19),E=0;E<k.length;++E)++j[k[E]&31];for(var E=0;E<z.length;++E)++j[z[E]&31];for(var I=B0(j,7),F=I.t,b=I.l,S=19;S>4&&!F[G_[S-1]];--S);var P=u+5<<3,J=Mh(i,Nu)+Mh(s,Cm)+o,le=Mh(i,y)+Mh(s,A)+o+14+3*S+Mh(j,F)+2*j[16]+3*j[17]+7*j[18];if(l>=0&&P<=J&&P<=le)return ZA(e,c,t.subarray(l,l+u));var we,xe,ne,ae;if($o(e,c,1+(le<J)),c+=2,le<J){we=cd(y,m,0),xe=y,ne=cd(A,C,0),ae=A;var _e=cd(F,b,0);$o(e,c,R-257),$o(e,c+5,Q-1),$o(e,c+10,S-4),c+=14;for(var E=0;E<S;++E)$o(e,c+3*E,F[G_[E]]);c+=3*S;for(var ge=[k,z],U=0;U<2;++U)for(var K=ge[U],E=0;E<K.length;++E){var W=K[E]&31;$o(e,c,_e[W]),c+=F[W],W>15&&($o(e,c,K[E]>>5&127),c+=K[E]>>12)}}else we=UM,xe=Nu,ne=VM,ae=Cm;for(var E=0;E<a;++E){var te=r[E];if(te>255){var W=te>>18&31;Fh(e,c,we[W+257]),c+=xe[W+257],W>7&&($o(e,c,te>>23&31),c+=l5[W]);var re=te&31;Fh(e,c,ne[re]),c+=ae[re],re>3&&(Fh(e,c,te>>5&8191),c+=u5[re])}else Fh(e,c,we[te]),c+=xe[te]}return Fh(e,c,we[256]),c+xe[256]},zM=new a5([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),eE=new Qs(0),qM=function(t,e,n,r,i,s){var o=s.z||t.length,a=new Qs(r+o+5*(1+Math.ceil(o/7e3))+i),l=a.subarray(r,a.length-i),u=s.l,c=(s.r||0)&7;if(e){c&&(l[0]=s.r>>3);for(var g=zM[e-1],y=g>>13,m=g&8191,N=(1<<n)-1,A=s.p||new ns(32768),C=s.h||new ns(N+1),_=Math.ceil(n/3),k=2*_,R=function(ze){return(t[ze]^t[ze+1]<<_^t[ze+2]<<k)&N},D=new a5(25e3),z=new ns(288),Q=new ns(32),j=0,E=0,I=s.i||0,F=0,b=s.w||0,S=0;I+2<o;++I){var P=R(I),J=I&32767,le=C[P];if(A[J]=le,C[P]=J,b<=I){var we=o-I;if((j>7e3||F>24576)&&(we>423||!u)){c=Q_(t,l,0,D,z,Q,E,F,S,I-S,c),F=j=E=0,S=I;for(var xe=0;xe<286;++xe)z[xe]=0;for(var xe=0;xe<30;++xe)Q[xe]=0}var ne=2,ae=0,_e=m,ge=J-le&32767;if(we>2&&P==R(I-ge))for(var U=Math.min(y,we)-1,K=Math.min(32767,I),W=Math.min(258,we);ge<=K&&--_e&&J!=le;){if(t[I+ne]==t[I+ne-ge]){for(var te=0;te<W&&t[I+te]==t[I+te-ge];++te);if(te>ne){if(ne=te,ae=ge,te>U)break;for(var re=Math.min(ge,te-2),$=0,xe=0;xe<re;++xe){var ue=I-ge+xe&32767,he=A[ue],de=ue-he&32767;de>$&&($=de,le=ue)}}}J=le,le=A[J],ge+=J-le&32767}if(ae){D[F++]=268435456|M2[ne]<<18|K_[ae];var Ne=M2[ne]&31,Re=K_[ae]&31;E+=l5[Ne]+u5[Re],++z[257+Ne],++Q[Re],b=I+ne,++j}else D[F++]=t[I],++z[t[I]]}}for(I=Math.max(I,b);I<o;++I)D[F++]=t[I],++z[t[I]];c=Q_(t,l,u,D,z,Q,E,F,S,I-S,c),u||(s.r=c&7|l[c/8|0]<<3,c-=7,s.h=C,s.p=A,s.i=I,s.w=b)}else{for(var I=s.w||0;I<o+u;I+=65535){var Pe=I+65535;Pe>=o&&(l[c/8|0]=u,Pe=o),c=ZA(l,c+1,t.subarray(I,Pe))}s.i=o}return BM(a,0,r+XA(c)+i)},tE=function(){var t=1,e=0;return{p:function(n){for(var r=t,i=e,s=n.length|0,o=0;o!=s;){for(var a=Math.min(o+2655,s);o<a;++o)i+=r+=n[o];r=(r&65535)+15*(r>>16),i=(i&65535)+15*(i>>16)}t=r,e=i},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},HM=function(t,e,n,r,i){if(!i&&(i={l:1},e.dictionary)){var s=e.dictionary.subarray(-32768),o=new Qs(s.length+t.length);o.set(s),o.set(t,s.length),t=o,i.w=s.length}return qM(t,e.level==null?6:e.level,e.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,n,r,i)},nE=function(t,e,n){for(;n;++e)t[e]=n,n>>>=8},WM=function(t,e){var n=e.level,r=n==0?0:n<6?1:n==9?3:2;if(t[0]=120,t[1]=r<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var i=tE();i.p(e.dictionary),nE(t,2,i.d())}};function B2(t,e){e||(e={});var n=tE();n.p(t);var r=HM(t,e,e.dictionary?6:2,4);return WM(r,e),nE(r,r.length-4,n.d()),r}var $M=typeof TextDecoder<"u"&&new TextDecoder,GM=0;try{$M.decode(eE,{stream:!0}),GM=1}catch{}function KM(t){if(Array.isArray(t))return t}function YM(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,o,a=[],l=!0,u=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(l=(r=s.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return a}}function J_(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function QM(t,e){if(t){if(typeof t=="string")return J_(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?J_(t,e):void 0}}function JM(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function X_(t,e){return KM(t)||YM(t,e)||QM(t,e)||JM()}function Z_(t,e="utf8"){return new TextDecoder(e).decode(t)}const XM=new TextEncoder;function ZM(t){return XM.encode(t)}const eU=1024*8,tU=(()=>{const t=new Uint8Array(4),e=new Uint32Array(t.buffer);return!((e[0]=1)&t[0])})(),z0={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class c5{constructor(e=eU,n={}){on(this,"buffer");on(this,"byteLength");on(this,"byteOffset");on(this,"length");on(this,"offset");on(this,"lastWrittenByte");on(this,"littleEndian");on(this,"_data");on(this,"_mark");on(this,"_marks");let r=!1;typeof e=="number"?e=new ArrayBuffer(e):(r=!0,this.lastWrittenByte=e.byteLength);const i=n.offset?n.offset>>>0:0,s=e.byteLength-i;let o=i;(ArrayBuffer.isView(e)||e instanceof c5)&&(e.byteLength!==e.buffer.byteLength&&(o=e.byteOffset+i),e=e.buffer),r?this.lastWrittenByte=s:this.lastWrittenByte=0,this.buffer=e,this.length=s,this.byteLength=s,this.byteOffset=o,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,o,s),this._mark=0,this._marks=[]}available(e=1){return this.offset+e<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(e=1){return this.offset+=e,this}back(e=1){return this.offset-=e,this}seek(e){return this.offset=e,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const e=this._marks.pop();if(e===void 0)throw new Error("Mark stack empty");return this.seek(e),this}rewind(){return this.offset=0,this}ensureAvailable(e=1){if(!this.available(e)){const r=(this.offset+e)*2,i=new Uint8Array(r);i.set(new Uint8Array(this.buffer)),this.buffer=i.buffer,this.length=r,this.byteLength=r,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(e=1){return this.readArray(e,"uint8")}readArray(e,n){const r=z0[n].BYTES_PER_ELEMENT*e,i=this.byteOffset+this.offset,s=this.buffer.slice(i,i+r);if(this.littleEndian===tU&&n!=="uint8"&&n!=="int8"){const a=new Uint8Array(this.buffer.slice(i,i+r));a.reverse();const l=new z0[n](a.buffer);return this.offset+=r,l.reverse(),l}const o=new z0[n](s);return this.offset+=r,o}readInt16(){const e=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}readUint16(){const e=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,e}readInt32(){const e=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}readUint32(){const e=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat32(){const e=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat64(){const e=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}readBigInt64(){const e=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,e}readBigUint64(){const e=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,e}readChar(){return String.fromCharCode(this.readInt8())}readChars(e=1){let n="";for(let r=0;r<e;r++)n+=this.readChar();return n}readUtf8(e=1){return Z_(this.readBytes(e))}decodeText(e=1,n="utf8"){return Z_(this.readBytes(e),n)}writeBoolean(e){return this.writeUint8(e?255:0),this}writeInt8(e){return this.ensureAvailable(1),this._data.setInt8(this.offset++,e),this._updateLastWrittenByte(),this}writeUint8(e){return this.ensureAvailable(1),this._data.setUint8(this.offset++,e),this._updateLastWrittenByte(),this}writeByte(e){return this.writeUint8(e)}writeBytes(e){this.ensureAvailable(e.length);for(let n=0;n<e.length;n++)this._data.setUint8(this.offset++,e[n]);return this._updateLastWrittenByte(),this}writeInt16(e){return this.ensureAvailable(2),this._data.setInt16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(e){return this.ensureAvailable(2),this._data.setUint16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(e){return this.ensureAvailable(4),this._data.setInt32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(e){return this.ensureAvailable(4),this._data.setUint32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(e){return this.ensureAvailable(4),this._data.setFloat32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(e){return this.ensureAvailable(8),this._data.setFloat64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(e){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(e){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(e){return this.writeUint8(e.charCodeAt(0))}writeChars(e){for(let n=0;n<e.length;n++)this.writeUint8(e.charCodeAt(n));return this}writeUtf8(e){return this.writeBytes(ZM(e))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function sh(t){let e=t.length;for(;--e>=0;)t[e]=0}const nU=3,rU=258,rE=29,iU=256,sU=iU+1+rE,iE=30,oU=512,aU=new Array((sU+2)*2);sh(aU);const lU=new Array(iE*2);sh(lU);const uU=new Array(oU);sh(uU);const cU=new Array(rU-nU+1);sh(cU);const hU=new Array(rE);sh(hU);const dU=new Array(iE);sh(dU);const fU=(t,e,n,r)=>{let i=t&65535|0,s=t>>>16&65535|0,o=0;for(;n!==0;){o=n>2e3?2e3:n,n-=o;do i=i+e[r++]|0,s=s+i|0;while(--o);i%=65521,s%=65521}return i|s<<16|0};var z2=fU;const pU=()=>{let t,e=[];for(var n=0;n<256;n++){t=n;for(var r=0;r<8;r++)t=t&1?3988292384^t>>>1:t>>>1;e[n]=t}return e},mU=new Uint32Array(pU()),gU=(t,e,n,r)=>{const i=mU,s=r+n;t^=-1;for(let o=r;o<s;o++)t=t>>>8^i[(t^e[o])&255];return t^-1};var mo=gU,q2={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},sE={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const yU=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var vU=function(t){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const n=e.shift();if(n){if(typeof n!="object")throw new TypeError(n+"must be non-object");for(const r in n)yU(n,r)&&(t[r]=n[r])}}return t},wU=t=>{let e=0;for(let r=0,i=t.length;r<i;r++)e+=t[r].length;const n=new Uint8Array(e);for(let r=0,i=0,s=t.length;r<s;r++){let o=t[r];n.set(o,i),i+=o.length}return n},oE={assign:vU,flattenChunks:wU};let aE=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{aE=!1}const Wd=new Uint8Array(256);for(let t=0;t<256;t++)Wd[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;Wd[254]=Wd[254]=1;var xU=t=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(t);let e,n,r,i,s,o=t.length,a=0;for(i=0;i<o;i++)n=t.charCodeAt(i),(n&64512)===55296&&i+1<o&&(r=t.charCodeAt(i+1),(r&64512)===56320&&(n=65536+(n-55296<<10)+(r-56320),i++)),a+=n<128?1:n<2048?2:n<65536?3:4;for(e=new Uint8Array(a),s=0,i=0;s<a;i++)n=t.charCodeAt(i),(n&64512)===55296&&i+1<o&&(r=t.charCodeAt(i+1),(r&64512)===56320&&(n=65536+(n-55296<<10)+(r-56320),i++)),n<128?e[s++]=n:n<2048?(e[s++]=192|n>>>6,e[s++]=128|n&63):n<65536?(e[s++]=224|n>>>12,e[s++]=128|n>>>6&63,e[s++]=128|n&63):(e[s++]=240|n>>>18,e[s++]=128|n>>>12&63,e[s++]=128|n>>>6&63,e[s++]=128|n&63);return e};const _U=(t,e)=>{if(e<65534&&t.subarray&&aE)return String.fromCharCode.apply(null,t.length===e?t:t.subarray(0,e));let n="";for(let r=0;r<e;r++)n+=String.fromCharCode(t[r]);return n};var bU=(t,e)=>{const n=e||t.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(t.subarray(0,e));let r,i;const s=new Array(n*2);for(i=0,r=0;r<n;){let o=t[r++];if(o<128){s[i++]=o;continue}let a=Wd[o];if(a>4){s[i++]=65533,r+=a-1;continue}for(o&=a===2?31:a===3?15:7;a>1&&r<n;)o=o<<6|t[r++]&63,a--;if(a>1){s[i++]=65533;continue}o<65536?s[i++]=o:(o-=65536,s[i++]=55296|o>>10&1023,s[i++]=56320|o&1023)}return _U(s,i)},NU=(t,e)=>{e=e||t.length,e>t.length&&(e=t.length);let n=e-1;for(;n>=0&&(t[n]&192)===128;)n--;return n<0||n===0?e:n+Wd[t[n]]>e?n:e},H2={string2buf:xU,buf2string:bU,utf8border:NU};function SU(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var AU=SU;const sp=16209,EU=16191;var TU=function(e,n){let r,i,s,o,a,l,u,c,g,y,m,N,A,C,_,k,R,D,z,Q,j,E,I,F;const b=e.state;r=e.next_in,I=e.input,i=r+(e.avail_in-5),s=e.next_out,F=e.output,o=s-(n-e.avail_out),a=s+(e.avail_out-257),l=b.dmax,u=b.wsize,c=b.whave,g=b.wnext,y=b.window,m=b.hold,N=b.bits,A=b.lencode,C=b.distcode,_=(1<<b.lenbits)-1,k=(1<<b.distbits)-1;e:do{N<15&&(m+=I[r++]<<N,N+=8,m+=I[r++]<<N,N+=8),R=A[m&_];t:for(;;){if(D=R>>>24,m>>>=D,N-=D,D=R>>>16&255,D===0)F[s++]=R&65535;else if(D&16){z=R&65535,D&=15,D&&(N<D&&(m+=I[r++]<<N,N+=8),z+=m&(1<<D)-1,m>>>=D,N-=D),N<15&&(m+=I[r++]<<N,N+=8,m+=I[r++]<<N,N+=8),R=C[m&k];n:for(;;){if(D=R>>>24,m>>>=D,N-=D,D=R>>>16&255,D&16){if(Q=R&65535,D&=15,N<D&&(m+=I[r++]<<N,N+=8,N<D&&(m+=I[r++]<<N,N+=8)),Q+=m&(1<<D)-1,Q>l){e.msg="invalid distance too far back",b.mode=sp;break e}if(m>>>=D,N-=D,D=s-o,Q>D){if(D=Q-D,D>c&&b.sane){e.msg="invalid distance too far back",b.mode=sp;break e}if(j=0,E=y,g===0){if(j+=u-D,D<z){z-=D;do F[s++]=y[j++];while(--D);j=s-Q,E=F}}else if(g<D){if(j+=u+g-D,D-=g,D<z){z-=D;do F[s++]=y[j++];while(--D);if(j=0,g<z){D=g,z-=D;do F[s++]=y[j++];while(--D);j=s-Q,E=F}}}else if(j+=g-D,D<z){z-=D;do F[s++]=y[j++];while(--D);j=s-Q,E=F}for(;z>2;)F[s++]=E[j++],F[s++]=E[j++],F[s++]=E[j++],z-=3;z&&(F[s++]=E[j++],z>1&&(F[s++]=E[j++]))}else{j=s-Q;do F[s++]=F[j++],F[s++]=F[j++],F[s++]=F[j++],z-=3;while(z>2);z&&(F[s++]=F[j++],z>1&&(F[s++]=F[j++]))}}else if(D&64){e.msg="invalid distance code",b.mode=sp;break e}else{R=C[(R&65535)+(m&(1<<D)-1)];continue n}break}}else if(D&64)if(D&32){b.mode=EU;break e}else{e.msg="invalid literal/length code",b.mode=sp;break e}else{R=A[(R&65535)+(m&(1<<D)-1)];continue t}break}}while(r<i&&s<a);z=N>>3,r-=z,N-=z<<3,m&=(1<<N)-1,e.next_in=r,e.next_out=s,e.avail_in=r<i?5+(i-r):5-(r-i),e.avail_out=s<a?257+(a-s):257-(s-a),b.hold=m,b.bits=N};const Yu=15,eb=852,tb=592,nb=0,q0=1,rb=2,IU=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),kU=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),PU=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),CU=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),LU=(t,e,n,r,i,s,o,a)=>{const l=a.bits;let u=0,c=0,g=0,y=0,m=0,N=0,A=0,C=0,_=0,k=0,R,D,z,Q,j,E=null,I;const F=new Uint16Array(Yu+1),b=new Uint16Array(Yu+1);let S=null,P,J,le;for(u=0;u<=Yu;u++)F[u]=0;for(c=0;c<r;c++)F[e[n+c]]++;for(m=l,y=Yu;y>=1&&F[y]===0;y--);if(m>y&&(m=y),y===0)return i[s++]=1<<24|64<<16|0,i[s++]=1<<24|64<<16|0,a.bits=1,0;for(g=1;g<y&&F[g]===0;g++);for(m<g&&(m=g),C=1,u=1;u<=Yu;u++)if(C<<=1,C-=F[u],C<0)return-1;if(C>0&&(t===nb||y!==1))return-1;for(b[1]=0,u=1;u<Yu;u++)b[u+1]=b[u]+F[u];for(c=0;c<r;c++)e[n+c]!==0&&(o[b[e[n+c]]++]=c);if(t===nb?(E=S=o,I=20):t===q0?(E=IU,S=kU,I=257):(E=PU,S=CU,I=0),k=0,c=0,u=g,j=s,N=m,A=0,z=-1,_=1<<m,Q=_-1,t===q0&&_>eb||t===rb&&_>tb)return 1;for(;;){P=u-A,o[c]+1<I?(J=0,le=o[c]):o[c]>=I?(J=S[o[c]-I],le=E[o[c]-I]):(J=96,le=0),R=1<<u-A,D=1<<N,g=D;do D-=R,i[j+(k>>A)+D]=P<<24|J<<16|le|0;while(D!==0);for(R=1<<u-1;k&R;)R>>=1;if(R!==0?(k&=R-1,k+=R):k=0,c++,--F[u]===0){if(u===y)break;u=e[n+o[c]]}if(u>m&&(k&Q)!==z){for(A===0&&(A=m),j+=g,N=u-A,C=1<<N;N+A<y&&(C-=F[N+A],!(C<=0));)N++,C<<=1;if(_+=1<<N,t===q0&&_>eb||t===rb&&_>tb)return 1;z=k&Q,i[z]=m<<24|N<<16|j-s|0}}return k!==0&&(i[j+k]=u-A<<24|64<<16|0),a.bits=m,0};var hd=LU;const RU=0,lE=1,uE=2,{Z_FINISH:ib,Z_BLOCK:jU,Z_TREES:op,Z_OK:Su,Z_STREAM_END:DU,Z_NEED_DICT:OU,Z_STREAM_ERROR:Is,Z_DATA_ERROR:cE,Z_MEM_ERROR:hE,Z_BUF_ERROR:FU,Z_DEFLATED:sb}=sE,Ig=16180,ob=16181,ab=16182,lb=16183,ub=16184,cb=16185,hb=16186,db=16187,fb=16188,pb=16189,Lm=16190,Go=16191,H0=16192,mb=16193,W0=16194,gb=16195,yb=16196,vb=16197,wb=16198,ap=16199,lp=16200,xb=16201,_b=16202,bb=16203,Nb=16204,Sb=16205,$0=16206,Ab=16207,Eb=16208,Cn=16209,dE=16210,fE=16211,MU=852,UU=592,VU=15,BU=VU,Tb=t=>(t>>>24&255)+(t>>>8&65280)+((t&65280)<<8)+((t&255)<<24);function zU(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Du=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||e.mode<Ig||e.mode>fE?1:0},pE=t=>{if(Du(t))return Is;const e=t.state;return t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=e.wrap&1),e.mode=Ig,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(MU),e.distcode=e.distdyn=new Int32Array(UU),e.sane=1,e.back=-1,Su},mE=t=>{if(Du(t))return Is;const e=t.state;return e.wsize=0,e.whave=0,e.wnext=0,pE(t)},gE=(t,e)=>{let n;if(Du(t))return Is;const r=t.state;return e<0?(n=0,e=-e):(n=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?Is:(r.window!==null&&r.wbits!==e&&(r.window=null),r.wrap=n,r.wbits=e,mE(t))},yE=(t,e)=>{if(!t)return Is;const n=new zU;t.state=n,n.strm=t,n.window=null,n.mode=Ig;const r=gE(t,e);return r!==Su&&(t.state=null),r},qU=t=>yE(t,BU);let Ib=!0,G0,K0;const HU=t=>{if(Ib){G0=new Int32Array(512),K0=new Int32Array(32);let e=0;for(;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(hd(lE,t.lens,0,288,G0,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;hd(uE,t.lens,0,32,K0,0,t.work,{bits:5}),Ib=!1}t.lencode=G0,t.lenbits=9,t.distcode=K0,t.distbits=5},vE=(t,e,n,r)=>{let i;const s=t.state;return s.window===null&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new Uint8Array(s.wsize)),r>=s.wsize?(s.window.set(e.subarray(n-s.wsize,n),0),s.wnext=0,s.whave=s.wsize):(i=s.wsize-s.wnext,i>r&&(i=r),s.window.set(e.subarray(n-r,n-r+i),s.wnext),r-=i,r?(s.window.set(e.subarray(n-r,n),0),s.wnext=r,s.whave=s.wsize):(s.wnext+=i,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=i))),0},WU=(t,e)=>{let n,r,i,s,o,a,l,u,c,g,y,m,N,A,C=0,_,k,R,D,z,Q,j,E;const I=new Uint8Array(4);let F,b;const S=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Du(t)||!t.output||!t.input&&t.avail_in!==0)return Is;n=t.state,n.mode===Go&&(n.mode=H0),o=t.next_out,i=t.output,l=t.avail_out,s=t.next_in,r=t.input,a=t.avail_in,u=n.hold,c=n.bits,g=a,y=l,E=Su;e:for(;;)switch(n.mode){case Ig:if(n.wrap===0){n.mode=H0;break}for(;c<16;){if(a===0)break e;a--,u+=r[s++]<<c,c+=8}if(n.wrap&2&&u===35615){n.wbits===0&&(n.wbits=15),n.check=0,I[0]=u&255,I[1]=u>>>8&255,n.check=mo(n.check,I,2,0),u=0,c=0,n.mode=ob;break}if(n.head&&(n.head.done=!1),!(n.wrap&1)||(((u&255)<<8)+(u>>8))%31){t.msg="incorrect header check",n.mode=Cn;break}if((u&15)!==sb){t.msg="unknown compression method",n.mode=Cn;break}if(u>>>=4,c-=4,j=(u&15)+8,n.wbits===0&&(n.wbits=j),j>15||j>n.wbits){t.msg="invalid window size",n.mode=Cn;break}n.dmax=1<<n.wbits,n.flags=0,t.adler=n.check=1,n.mode=u&512?pb:Go,u=0,c=0;break;case ob:for(;c<16;){if(a===0)break e;a--,u+=r[s++]<<c,c+=8}if(n.flags=u,(n.flags&255)!==sb){t.msg="unknown compression method",n.mode=Cn;break}if(n.flags&57344){t.msg="unknown header flags set",n.mode=Cn;break}n.head&&(n.head.text=u>>8&1),n.flags&512&&n.wrap&4&&(I[0]=u&255,I[1]=u>>>8&255,n.check=mo(n.check,I,2,0)),u=0,c=0,n.mode=ab;case ab:for(;c<32;){if(a===0)break e;a--,u+=r[s++]<<c,c+=8}n.head&&(n.head.time=u),n.flags&512&&n.wrap&4&&(I[0]=u&255,I[1]=u>>>8&255,I[2]=u>>>16&255,I[3]=u>>>24&255,n.check=mo(n.check,I,4,0)),u=0,c=0,n.mode=lb;case lb:for(;c<16;){if(a===0)break e;a--,u+=r[s++]<<c,c+=8}n.head&&(n.head.xflags=u&255,n.head.os=u>>8),n.flags&512&&n.wrap&4&&(I[0]=u&255,I[1]=u>>>8&255,n.check=mo(n.check,I,2,0)),u=0,c=0,n.mode=ub;case ub:if(n.flags&1024){for(;c<16;){if(a===0)break e;a--,u+=r[s++]<<c,c+=8}n.length=u,n.head&&(n.head.extra_len=u),n.flags&512&&n.wrap&4&&(I[0]=u&255,I[1]=u>>>8&255,n.check=mo(n.check,I,2,0)),u=0,c=0}else n.head&&(n.head.extra=null);n.mode=cb;case cb:if(n.flags&1024&&(m=n.length,m>a&&(m=a),m&&(n.head&&(j=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(r.subarray(s,s+m),j)),n.flags&512&&n.wrap&4&&(n.check=mo(n.check,r,m,s)),a-=m,s+=m,n.length-=m),n.length))break e;n.length=0,n.mode=hb;case hb:if(n.flags&2048){if(a===0)break e;m=0;do j=r[s+m++],n.head&&j&&n.length<65536&&(n.head.name+=String.fromCharCode(j));while(j&&m<a);if(n.flags&512&&n.wrap&4&&(n.check=mo(n.check,r,m,s)),a-=m,s+=m,j)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=db;case db:if(n.flags&4096){if(a===0)break e;m=0;do j=r[s+m++],n.head&&j&&n.length<65536&&(n.head.comment+=String.fromCharCode(j));while(j&&m<a);if(n.flags&512&&n.wrap&4&&(n.check=mo(n.check,r,m,s)),a-=m,s+=m,j)break e}else n.head&&(n.head.comment=null);n.mode=fb;case fb:if(n.flags&512){for(;c<16;){if(a===0)break e;a--,u+=r[s++]<<c,c+=8}if(n.wrap&4&&u!==(n.check&65535)){t.msg="header crc mismatch",n.mode=Cn;break}u=0,c=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),t.adler=n.check=0,n.mode=Go;break;case pb:for(;c<32;){if(a===0)break e;a--,u+=r[s++]<<c,c+=8}t.adler=n.check=Tb(u),u=0,c=0,n.mode=Lm;case Lm:if(n.havedict===0)return t.next_out=o,t.avail_out=l,t.next_in=s,t.avail_in=a,n.hold=u,n.bits=c,OU;t.adler=n.check=1,n.mode=Go;case Go:if(e===jU||e===op)break e;case H0:if(n.last){u>>>=c&7,c-=c&7,n.mode=$0;break}for(;c<3;){if(a===0)break e;a--,u+=r[s++]<<c,c+=8}switch(n.last=u&1,u>>>=1,c-=1,u&3){case 0:n.mode=mb;break;case 1:if(HU(n),n.mode=ap,e===op){u>>>=2,c-=2;break e}break;case 2:n.mode=yb;break;case 3:t.msg="invalid block type",n.mode=Cn}u>>>=2,c-=2;break;case mb:for(u>>>=c&7,c-=c&7;c<32;){if(a===0)break e;a--,u+=r[s++]<<c,c+=8}if((u&65535)!==(u>>>16^65535)){t.msg="invalid stored block lengths",n.mode=Cn;break}if(n.length=u&65535,u=0,c=0,n.mode=W0,e===op)break e;case W0:n.mode=gb;case gb:if(m=n.length,m){if(m>a&&(m=a),m>l&&(m=l),m===0)break e;i.set(r.subarray(s,s+m),o),a-=m,s+=m,l-=m,o+=m,n.length-=m;break}n.mode=Go;break;case yb:for(;c<14;){if(a===0)break e;a--,u+=r[s++]<<c,c+=8}if(n.nlen=(u&31)+257,u>>>=5,c-=5,n.ndist=(u&31)+1,u>>>=5,c-=5,n.ncode=(u&15)+4,u>>>=4,c-=4,n.nlen>286||n.ndist>30){t.msg="too many length or distance symbols",n.mode=Cn;break}n.have=0,n.mode=vb;case vb:for(;n.have<n.ncode;){for(;c<3;){if(a===0)break e;a--,u+=r[s++]<<c,c+=8}n.lens[S[n.have++]]=u&7,u>>>=3,c-=3}for(;n.have<19;)n.lens[S[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,F={bits:n.lenbits},E=hd(RU,n.lens,0,19,n.lencode,0,n.work,F),n.lenbits=F.bits,E){t.msg="invalid code lengths set",n.mode=Cn;break}n.have=0,n.mode=wb;case wb:for(;n.have<n.nlen+n.ndist;){for(;C=n.lencode[u&(1<<n.lenbits)-1],_=C>>>24,k=C>>>16&255,R=C&65535,!(_<=c);){if(a===0)break e;a--,u+=r[s++]<<c,c+=8}if(R<16)u>>>=_,c-=_,n.lens[n.have++]=R;else{if(R===16){for(b=_+2;c<b;){if(a===0)break e;a--,u+=r[s++]<<c,c+=8}if(u>>>=_,c-=_,n.have===0){t.msg="invalid bit length repeat",n.mode=Cn;break}j=n.lens[n.have-1],m=3+(u&3),u>>>=2,c-=2}else if(R===17){for(b=_+3;c<b;){if(a===0)break e;a--,u+=r[s++]<<c,c+=8}u>>>=_,c-=_,j=0,m=3+(u&7),u>>>=3,c-=3}else{for(b=_+7;c<b;){if(a===0)break e;a--,u+=r[s++]<<c,c+=8}u>>>=_,c-=_,j=0,m=11+(u&127),u>>>=7,c-=7}if(n.have+m>n.nlen+n.ndist){t.msg="invalid bit length repeat",n.mode=Cn;break}for(;m--;)n.lens[n.have++]=j}}if(n.mode===Cn)break;if(n.lens[256]===0){t.msg="invalid code -- missing end-of-block",n.mode=Cn;break}if(n.lenbits=9,F={bits:n.lenbits},E=hd(lE,n.lens,0,n.nlen,n.lencode,0,n.work,F),n.lenbits=F.bits,E){t.msg="invalid literal/lengths set",n.mode=Cn;break}if(n.distbits=6,n.distcode=n.distdyn,F={bits:n.distbits},E=hd(uE,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,F),n.distbits=F.bits,E){t.msg="invalid distances set",n.mode=Cn;break}if(n.mode=ap,e===op)break e;case ap:n.mode=lp;case lp:if(a>=6&&l>=258){t.next_out=o,t.avail_out=l,t.next_in=s,t.avail_in=a,n.hold=u,n.bits=c,TU(t,y),o=t.next_out,i=t.output,l=t.avail_out,s=t.next_in,r=t.input,a=t.avail_in,u=n.hold,c=n.bits,n.mode===Go&&(n.back=-1);break}for(n.back=0;C=n.lencode[u&(1<<n.lenbits)-1],_=C>>>24,k=C>>>16&255,R=C&65535,!(_<=c);){if(a===0)break e;a--,u+=r[s++]<<c,c+=8}if(k&&!(k&240)){for(D=_,z=k,Q=R;C=n.lencode[Q+((u&(1<<D+z)-1)>>D)],_=C>>>24,k=C>>>16&255,R=C&65535,!(D+_<=c);){if(a===0)break e;a--,u+=r[s++]<<c,c+=8}u>>>=D,c-=D,n.back+=D}if(u>>>=_,c-=_,n.back+=_,n.length=R,k===0){n.mode=Sb;break}if(k&32){n.back=-1,n.mode=Go;break}if(k&64){t.msg="invalid literal/length code",n.mode=Cn;break}n.extra=k&15,n.mode=xb;case xb:if(n.extra){for(b=n.extra;c<b;){if(a===0)break e;a--,u+=r[s++]<<c,c+=8}n.length+=u&(1<<n.extra)-1,u>>>=n.extra,c-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=_b;case _b:for(;C=n.distcode[u&(1<<n.distbits)-1],_=C>>>24,k=C>>>16&255,R=C&65535,!(_<=c);){if(a===0)break e;a--,u+=r[s++]<<c,c+=8}if(!(k&240)){for(D=_,z=k,Q=R;C=n.distcode[Q+((u&(1<<D+z)-1)>>D)],_=C>>>24,k=C>>>16&255,R=C&65535,!(D+_<=c);){if(a===0)break e;a--,u+=r[s++]<<c,c+=8}u>>>=D,c-=D,n.back+=D}if(u>>>=_,c-=_,n.back+=_,k&64){t.msg="invalid distance code",n.mode=Cn;break}n.offset=R,n.extra=k&15,n.mode=bb;case bb:if(n.extra){for(b=n.extra;c<b;){if(a===0)break e;a--,u+=r[s++]<<c,c+=8}n.offset+=u&(1<<n.extra)-1,u>>>=n.extra,c-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){t.msg="invalid distance too far back",n.mode=Cn;break}n.mode=Nb;case Nb:if(l===0)break e;if(m=y-l,n.offset>m){if(m=n.offset-m,m>n.whave&&n.sane){t.msg="invalid distance too far back",n.mode=Cn;break}m>n.wnext?(m-=n.wnext,N=n.wsize-m):N=n.wnext-m,m>n.length&&(m=n.length),A=n.window}else A=i,N=o-n.offset,m=n.length;m>l&&(m=l),l-=m,n.length-=m;do i[o++]=A[N++];while(--m);n.length===0&&(n.mode=lp);break;case Sb:if(l===0)break e;i[o++]=n.length,l--,n.mode=lp;break;case $0:if(n.wrap){for(;c<32;){if(a===0)break e;a--,u|=r[s++]<<c,c+=8}if(y-=l,t.total_out+=y,n.total+=y,n.wrap&4&&y&&(t.adler=n.check=n.flags?mo(n.check,i,y,o-y):z2(n.check,i,y,o-y)),y=l,n.wrap&4&&(n.flags?u:Tb(u))!==n.check){t.msg="incorrect data check",n.mode=Cn;break}u=0,c=0}n.mode=Ab;case Ab:if(n.wrap&&n.flags){for(;c<32;){if(a===0)break e;a--,u+=r[s++]<<c,c+=8}if(n.wrap&4&&u!==(n.total&4294967295)){t.msg="incorrect length check",n.mode=Cn;break}u=0,c=0}n.mode=Eb;case Eb:E=DU;break e;case Cn:E=cE;break e;case dE:return hE;case fE:default:return Is}return t.next_out=o,t.avail_out=l,t.next_in=s,t.avail_in=a,n.hold=u,n.bits=c,(n.wsize||y!==t.avail_out&&n.mode<Cn&&(n.mode<$0||e!==ib))&&vE(t,t.output,t.next_out,y-t.avail_out),g-=t.avail_in,y-=t.avail_out,t.total_in+=g,t.total_out+=y,n.total+=y,n.wrap&4&&y&&(t.adler=n.check=n.flags?mo(n.check,i,y,t.next_out-y):z2(n.check,i,y,t.next_out-y)),t.data_type=n.bits+(n.last?64:0)+(n.mode===Go?128:0)+(n.mode===ap||n.mode===W0?256:0),(g===0&&y===0||e===ib)&&E===Su&&(E=FU),E},$U=t=>{if(Du(t))return Is;let e=t.state;return e.window&&(e.window=null),t.state=null,Su},GU=(t,e)=>{if(Du(t))return Is;const n=t.state;return n.wrap&2?(n.head=e,e.done=!1,Su):Is},KU=(t,e)=>{const n=e.length;let r,i,s;return Du(t)||(r=t.state,r.wrap!==0&&r.mode!==Lm)?Is:r.mode===Lm&&(i=1,i=z2(i,e,n,0),i!==r.check)?cE:(s=vE(t,e,n,n),s?(r.mode=dE,hE):(r.havedict=1,Su))};var YU=mE,QU=gE,JU=pE,XU=qU,ZU=yE,eV=WU,tV=$U,nV=GU,rV=KU,iV="pako inflate (from Nodeca project)",Jo={inflateReset:YU,inflateReset2:QU,inflateResetKeep:JU,inflateInit:XU,inflateInit2:ZU,inflate:eV,inflateEnd:tV,inflateGetHeader:nV,inflateSetDictionary:rV,inflateInfo:iV};function sV(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var oV=sV;const wE=Object.prototype.toString,{Z_NO_FLUSH:aV,Z_FINISH:lV,Z_OK:$d,Z_STREAM_END:Y0,Z_NEED_DICT:Q0,Z_STREAM_ERROR:uV,Z_DATA_ERROR:kb,Z_MEM_ERROR:cV}=sE;function gf(t){this.options=oE.assign({chunkSize:1024*64,windowBits:15,to:""},t||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(t&&t.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15||(e.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new AU,this.strm.avail_out=0;let n=Jo.inflateInit2(this.strm,e.windowBits);if(n!==$d)throw new Error(q2[n]);if(this.header=new oV,Jo.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=H2.string2buf(e.dictionary):wE.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(n=Jo.inflateSetDictionary(this.strm,e.dictionary),n!==$d)))throw new Error(q2[n])}gf.prototype.push=function(t,e){const n=this.strm,r=this.options.chunkSize,i=this.options.dictionary;let s,o,a;if(this.ended)return!1;for(e===~~e?o=e:o=e===!0?lV:aV,wE.call(t)==="[object ArrayBuffer]"?n.input=new Uint8Array(t):n.input=t,n.next_in=0,n.avail_in=n.input.length;;){for(n.avail_out===0&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),s=Jo.inflate(n,o),s===Q0&&i&&(s=Jo.inflateSetDictionary(n,i),s===$d?s=Jo.inflate(n,o):s===kb&&(s=Q0));n.avail_in>0&&s===Y0&&n.state.wrap>0&&t[n.next_in]!==0;)Jo.inflateReset(n),s=Jo.inflate(n,o);switch(s){case uV:case kb:case Q0:case cV:return this.onEnd(s),this.ended=!0,!1}if(a=n.avail_out,n.next_out&&(n.avail_out===0||s===Y0))if(this.options.to==="string"){let l=H2.utf8border(n.output,n.next_out),u=n.next_out-l,c=H2.buf2string(n.output,l);n.next_out=u,n.avail_out=r-u,u&&n.output.set(n.output.subarray(l,l+u),0),this.onData(c)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(!(s===$d&&a===0)){if(s===Y0)return s=Jo.inflateEnd(this.strm),this.onEnd(s),this.ended=!0,!0;if(n.avail_in===0)break}}return!0};gf.prototype.onData=function(t){this.chunks.push(t)};gf.prototype.onEnd=function(t){t===$d&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=oE.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function hV(t,e){const n=new gf(e);if(n.push(t),n.err)throw n.msg||q2[n.err];return n.result}var dV=gf,fV=hV,pV={Inflate:dV,inflate:fV};const{Inflate:mV,inflate:gV}=pV;var Pb=mV,yV=gV;const xE=[];for(let t=0;t<256;t++){let e=t;for(let n=0;n<8;n++)e&1?e=3988292384^e>>>1:e=e>>>1;xE[t]=e}const Cb=4294967295;function vV(t,e,n){let r=t;for(let i=0;i<n;i++)r=xE[(r^e[i])&255]^r>>>8;return r}function wV(t,e){return(vV(Cb,t,e)^Cb)>>>0}function Lb(t,e,n){const r=t.readUint32(),i=wV(new Uint8Array(t.buffer,t.byteOffset+t.offset-e-4,e),e);if(i!==r)throw new Error(`CRC mismatch for chunk ${n}. Expected ${r}, found ${i}`)}function _E(t,e,n){for(let r=0;r<n;r++)e[r]=t[r]}function bE(t,e,n,r){let i=0;for(;i<r;i++)e[i]=t[i];for(;i<n;i++)e[i]=t[i]+e[i-r]&255}function NE(t,e,n,r){let i=0;if(n.length===0)for(;i<r;i++)e[i]=t[i];else for(;i<r;i++)e[i]=t[i]+n[i]&255}function SE(t,e,n,r,i){let s=0;if(n.length===0){for(;s<i;s++)e[s]=t[s];for(;s<r;s++)e[s]=t[s]+(e[s-i]>>1)&255}else{for(;s<i;s++)e[s]=t[s]+(n[s]>>1)&255;for(;s<r;s++)e[s]=t[s]+(e[s-i]+n[s]>>1)&255}}function AE(t,e,n,r,i){let s=0;if(n.length===0){for(;s<i;s++)e[s]=t[s];for(;s<r;s++)e[s]=t[s]+e[s-i]&255}else{for(;s<i;s++)e[s]=t[s]+n[s]&255;for(;s<r;s++)e[s]=t[s]+xV(e[s-i],n[s],n[s-i])&255}}function xV(t,e,n){const r=t+e-n,i=Math.abs(r-t),s=Math.abs(r-e),o=Math.abs(r-n);return i<=s&&i<=o?t:s<=o?e:n}function _V(t,e,n,r,i,s){switch(t){case 0:_E(e,n,i);break;case 1:bE(e,n,i,s);break;case 2:NE(e,n,r,i);break;case 3:SE(e,n,r,i,s);break;case 4:AE(e,n,r,i,s);break;default:throw new Error(`Unsupported filter: ${t}`)}}const bV=new Uint16Array([255]),NV=new Uint8Array(bV.buffer),SV=NV[0]===255;function AV(t){const{data:e,width:n,height:r,channels:i,depth:s}=t,o=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],a=Math.ceil(s/8)*i,l=new Uint8Array(r*n*a);let u=0;for(let c=0;c<7;c++){const g=o[c],y=Math.ceil((n-g.x)/g.xStep),m=Math.ceil((r-g.y)/g.yStep);if(y<=0||m<=0)continue;const N=y*a,A=new Uint8Array(N);for(let C=0;C<m;C++){const _=e[u++],k=e.subarray(u,u+N);u+=N;const R=new Uint8Array(N);_V(_,k,R,A,N,a),A.set(R);for(let D=0;D<y;D++){const z=g.x+D*g.xStep,Q=g.y+C*g.yStep;if(!(z>=n||Q>=r))for(let j=0;j<a;j++)l[(Q*n+z)*a+j]=R[D*a+j]}}}if(s===16){const c=new Uint16Array(l.buffer);if(SV)for(let g=0;g<c.length;g++)c[g]=EV(c[g]);return c}else return l}function EV(t){return(t&255)<<8|t>>8&255}const TV=new Uint16Array([255]),IV=new Uint8Array(TV.buffer),kV=IV[0]===255,PV=new Uint8Array(0);function Rb(t){const{data:e,width:n,height:r,channels:i,depth:s}=t,o=Math.ceil(s/8)*i,a=Math.ceil(s/8*i*n),l=new Uint8Array(r*a);let u=PV,c=0,g,y;for(let m=0;m<r;m++){switch(g=e.subarray(c+1,c+1+a),y=l.subarray(m*a,(m+1)*a),e[c]){case 0:_E(g,y,a);break;case 1:bE(g,y,a,o);break;case 2:NE(g,y,u,a);break;case 3:SE(g,y,u,a,o);break;case 4:AE(g,y,u,a,o);break;default:throw new Error(`Unsupported filter: ${e[c]}`)}u=y,c+=a+1}if(s===16){const m=new Uint16Array(l.buffer);if(kV)for(let N=0;N<m.length;N++)m[N]=CV(m[N]);return m}else return l}function CV(t){return(t&255)<<8|t>>8&255}const Dp=Uint8Array.of(137,80,78,71,13,10,26,10);function jb(t){if(!LV(t.readBytes(Dp.length)))throw new Error("wrong PNG signature")}function LV(t){if(t.length<Dp.length)return!1;for(let e=0;e<Dp.length;e++)if(t[e]!==Dp[e])return!1;return!0}const RV="tEXt",jV=0,EE=new TextDecoder("latin1");function DV(t){if(FV(t),t.length===0||t.length>79)throw new Error("keyword length must be between 1 and 79")}const OV=/^[\u0000-\u00FF]*$/;function FV(t){if(!OV.test(t))throw new Error("invalid latin1 text")}function MV(t,e,n){const r=TE(e);t[r]=UV(e,n-r.length-1)}function TE(t){for(t.mark();t.readByte()!==jV;);const e=t.offset;t.reset();const n=EE.decode(t.readBytes(e-t.offset-1));return t.skip(1),DV(n),n}function UV(t,e){return EE.decode(t.readBytes(e))}const Ji={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},J0={UNKNOWN:-1,DEFLATE:0},Db={UNKNOWN:-1,ADAPTIVE:0},X0={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},up={NONE:0,BACKGROUND:1,PREVIOUS:2},Z0={SOURCE:0,OVER:1};class VV extends c5{constructor(n,r={}){super(n);on(this,"_checkCrc");on(this,"_inflator");on(this,"_png");on(this,"_apng");on(this,"_end");on(this,"_hasPalette");on(this,"_palette");on(this,"_hasTransparency");on(this,"_transparency");on(this,"_compressionMethod");on(this,"_filterMethod");on(this,"_interlaceMethod");on(this,"_colorType");on(this,"_isAnimated");on(this,"_numberOfFrames");on(this,"_numberOfPlays");on(this,"_frames");on(this,"_writingDataChunks");const{checkCrc:i=!1}=r;this._checkCrc=i,this._inflator=new Pb,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=J0.UNKNOWN,this._filterMethod=Db.UNKNOWN,this._interlaceMethod=X0.UNKNOWN,this._colorType=Ji.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(jb(this);!this._end;){const n=this.readUint32(),r=this.readChars(4);this.decodeChunk(n,r)}return this.decodeImage(),this._png}decodeApng(){for(jb(this);!this._end;){const n=this.readUint32(),r=this.readChars(4);this.decodeApngChunk(n,r)}return this.decodeApngImage(),this._apng}decodeChunk(n,r){const i=this.offset;switch(r){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(n);break;case"IDAT":this.decodeIDAT(n);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(n);break;case"iCCP":this.decodeiCCP(n);break;case RV:MV(this._png.text,this,n);break;case"pHYs":this.decodepHYs();break;default:this.skip(n);break}if(this.offset-i!==n)throw new Error(`Length mismatch while decoding chunk ${r}`);this._checkCrc?Lb(this,n+4,r):this.skip(4)}decodeApngChunk(n,r){const i=this.offset;switch(r!=="fdAT"&&r!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),r){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(n);break;default:this.decodeChunk(n,r),this.offset=i+n;break}if(this.offset-i!==n)throw new Error(`Length mismatch while decoding chunk ${r}`);this._checkCrc?Lb(this,n+4,r):this.skip(4)}decodeIHDR(){const n=this._png;n.width=this.readUint32(),n.height=this.readUint32(),n.depth=BV(this.readUint8());const r=this.readUint8();this._colorType=r;let i;switch(r){case Ji.GREYSCALE:i=1;break;case Ji.TRUECOLOUR:i=3;break;case Ji.INDEXED_COLOUR:i=1;break;case Ji.GREYSCALE_ALPHA:i=2;break;case Ji.TRUECOLOUR_ALPHA:i=4;break;case Ji.UNKNOWN:default:throw new Error(`Unknown color type: ${r}`)}if(this._png.channels=i,this._compressionMethod=this.readUint8(),this._compressionMethod!==J0.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const n={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(n)}decodePLTE(n){if(n%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${n}`);const r=n/3;this._hasPalette=!0;const i=[];this._palette=i;for(let s=0;s<r;s++)i.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(n){this._writingDataChunks=!0;const r=n,i=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,i,r)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(n)}decodeFDAT(n){this._writingDataChunks=!0;let r=n,i=this.offset+this.byteOffset;if(i+=4,r-=4,this._inflator.push(new Uint8Array(this.buffer,i,r)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(n)}decodetRNS(n){switch(this._colorType){case Ji.GREYSCALE:case Ji.TRUECOLOUR:{if(n%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${n}`);if(n/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${n/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(n/2);for(let r=0;r<n/2;r++)this._transparency[r]=this.readUint16();break}case Ji.INDEXED_COLOUR:{if(n>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${n} vs ${this._palette.length})`);let r=0;for(;r<n;r++){const i=this.readByte();this._palette[r].push(i)}for(;r<this._palette.length;r++)this._palette[r].push(255);break}case Ji.UNKNOWN:case Ji.GREYSCALE_ALPHA:case Ji.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(n){const r=TE(this),i=this.readUint8();if(i!==J0.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${i}`);const s=this.readBytes(n-r.length-2);this._png.iccEmbeddedProfile={name:r,profile:yV(s)}}decodepHYs(){const n=this.readUint32(),r=this.readUint32(),i=this.readByte();this._png.resolution={x:n,y:r,unit:i}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let n=0;n<this._numberOfFrames;n++){const r={sequenceNumber:this._frames[n].sequenceNumber,delayNumber:this._frames[n].delayNumber,delayDenominator:this._frames[n].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},i=this._frames.at(n);if(i){if(i.data=Rb({data:i.data,width:i.width,height:i.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),n===0||i.xOffset===0&&i.yOffset===0&&i.width===this._png.width&&i.height===this._png.height)r.data=i.data;else{const s=this._apng.frames.at(n-1);this.disposeFrame(i,s,r),this.addFrameDataToCanvas(r,i)}this._apng.frames.push(r)}}return this._apng}disposeFrame(n,r,i){switch(n.disposeOp){case up.NONE:break;case up.BACKGROUND:for(let s=0;s<this._png.height;s++)for(let o=0;o<this._png.width;o++){const a=(s*n.width+o)*this._png.channels;for(let l=0;l<this._png.channels;l++)i.data[a+l]=0}break;case up.PREVIOUS:i.data.set(r.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(n,r){const i=1<<this._png.depth,s=(o,a)=>{const l=((o+r.yOffset)*this._png.width+r.xOffset+a)*this._png.channels,u=(o*r.width+a)*this._png.channels;return{index:l,frameIndex:u}};switch(r.blendOp){case Z0.SOURCE:for(let o=0;o<r.height;o++)for(let a=0;a<r.width;a++){const{index:l,frameIndex:u}=s(o,a);for(let c=0;c<this._png.channels;c++)n.data[l+c]=r.data[u+c]}break;case Z0.OVER:for(let o=0;o<r.height;o++)for(let a=0;a<r.width;a++){const{index:l,frameIndex:u}=s(o,a);for(let c=0;c<this._png.channels;c++){const g=r.data[u+this._png.channels-1]/i,y=c%(this._png.channels-1)===0?1:r.data[u+c],m=Math.floor(g*y+(1-g)*n.data[l+c]);n.data[l+c]+=m}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){var r;if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const n=this._isAnimated?((r=this._frames)==null?void 0:r.at(0)).data:this._inflator.result;if(this._filterMethod!==Db.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===X0.NO_INTERLACE)this._png.data=Rb({data:n,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===X0.ADAM7)this._png.data=AV({data:n,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const n=this._inflator.result,r=this._frames.at(-1);r?r.data=n:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:up.NONE,blendOp:Z0.SOURCE,data:n}),this._inflator=new Pb,this._writingDataChunks=!1}}function BV(t){if(t!==1&&t!==2&&t!==4&&t!==8&&t!==16)throw new Error(`invalid bit depth: ${t}`);return t}var Ob;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.METRE=1]="METRE"})(Ob||(Ob={}));function zV(t,e){return new VV(t,e).decode()}var gt=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function e1(){gt.console&&typeof gt.console.log=="function"&&gt.console.log.apply(gt.console,arguments)}var gn={log:e1,warn:function(t){gt.console&&(typeof gt.console.warn=="function"?gt.console.warn.apply(gt.console,arguments):e1.call(null,arguments))},error:function(t){gt.console&&(typeof gt.console.error=="function"?gt.console.error.apply(gt.console,arguments):e1(t))}};function t1(t,e,n){var r=new XMLHttpRequest;r.open("GET",t),r.responseType="blob",r.onload=function(){Ql(r.response,e,n)},r.onerror=function(){gn.error("could not download file")},r.send()}function Fb(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function cp(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var Ql=gt.saveAs||((typeof window>"u"?"undefined":an(window))!=="object"||window!==gt?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,n){var r=gt.URL||gt.webkitURL,i=document.createElement("a");e=e||t.name||"download",i.download=e,i.rel="noopener",typeof t=="string"?(i.href=t,i.origin!==location.origin?Fb(i.href)?t1(t,e,n):cp(i,i.target="_blank"):cp(i)):(i.href=r.createObjectURL(t),setTimeout(function(){r.revokeObjectURL(i.href)},4e4),setTimeout(function(){cp(i)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,n){if(e=e||t.name||"download",typeof t=="string")if(Fb(t))t1(t,e,n);else{var r=document.createElement("a");r.href=t,r.target="_blank",setTimeout(function(){cp(r)})}else navigator.msSaveOrOpenBlob(function(i,s){return s===void 0?s={autoBom:!1}:an(s)!=="object"&&(gn.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i}(t,n),e)}:function(t,e,n,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof t=="string")return t1(t,e,n);var i=t.type==="application/octet-stream",s=/constructor/i.test(gt.HTMLElement)||gt.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||i&&s)&&(typeof FileReader>"u"?"undefined":an(FileReader))==="object"){var a=new FileReader;a.onloadend=function(){var c=a.result;c=o?c:c.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=c:location=c,r=null},a.readAsDataURL(t)}else{var l=gt.URL||gt.webkitURL,u=l.createObjectURL(t);r?r.location=u:location.href=u,r=null,setTimeout(function(){l.revokeObjectURL(u)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function IE(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(a){return[parseInt(a[1]),parseInt(a[2]),parseInt(a[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}}],r=0;r<n.length;r++){var i=n[r].re,s=n[r].process,o=i.exec(t);o&&(e=s(o),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var a=this.r.toString(16),l=this.g.toString(16),u=this.b.toString(16);return a.length==1&&(a="0"+a),l.length==1&&(l="0"+l),u.length==1&&(u="0"+u),"#"+a+l+u}}var Op=gt.atob.bind(gt),Mb=gt.btoa.bind(gt);/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function n1(t,e){var n=t[0],r=t[1],i=t[2],s=t[3];n=Jr(n,r,i,s,e[0],7,-680876936),s=Jr(s,n,r,i,e[1],12,-389564586),i=Jr(i,s,n,r,e[2],17,606105819),r=Jr(r,i,s,n,e[3],22,-1044525330),n=Jr(n,r,i,s,e[4],7,-176418897),s=Jr(s,n,r,i,e[5],12,1200080426),i=Jr(i,s,n,r,e[6],17,-1473231341),r=Jr(r,i,s,n,e[7],22,-45705983),n=Jr(n,r,i,s,e[8],7,1770035416),s=Jr(s,n,r,i,e[9],12,-1958414417),i=Jr(i,s,n,r,e[10],17,-42063),r=Jr(r,i,s,n,e[11],22,-1990404162),n=Jr(n,r,i,s,e[12],7,1804603682),s=Jr(s,n,r,i,e[13],12,-40341101),i=Jr(i,s,n,r,e[14],17,-1502002290),n=Xr(n,r=Jr(r,i,s,n,e[15],22,1236535329),i,s,e[1],5,-165796510),s=Xr(s,n,r,i,e[6],9,-1069501632),i=Xr(i,s,n,r,e[11],14,643717713),r=Xr(r,i,s,n,e[0],20,-373897302),n=Xr(n,r,i,s,e[5],5,-701558691),s=Xr(s,n,r,i,e[10],9,38016083),i=Xr(i,s,n,r,e[15],14,-660478335),r=Xr(r,i,s,n,e[4],20,-405537848),n=Xr(n,r,i,s,e[9],5,568446438),s=Xr(s,n,r,i,e[14],9,-1019803690),i=Xr(i,s,n,r,e[3],14,-187363961),r=Xr(r,i,s,n,e[8],20,1163531501),n=Xr(n,r,i,s,e[13],5,-1444681467),s=Xr(s,n,r,i,e[2],9,-51403784),i=Xr(i,s,n,r,e[7],14,1735328473),n=Zr(n,r=Xr(r,i,s,n,e[12],20,-1926607734),i,s,e[5],4,-378558),s=Zr(s,n,r,i,e[8],11,-2022574463),i=Zr(i,s,n,r,e[11],16,1839030562),r=Zr(r,i,s,n,e[14],23,-35309556),n=Zr(n,r,i,s,e[1],4,-1530992060),s=Zr(s,n,r,i,e[4],11,1272893353),i=Zr(i,s,n,r,e[7],16,-155497632),r=Zr(r,i,s,n,e[10],23,-1094730640),n=Zr(n,r,i,s,e[13],4,681279174),s=Zr(s,n,r,i,e[0],11,-358537222),i=Zr(i,s,n,r,e[3],16,-722521979),r=Zr(r,i,s,n,e[6],23,76029189),n=Zr(n,r,i,s,e[9],4,-640364487),s=Zr(s,n,r,i,e[12],11,-421815835),i=Zr(i,s,n,r,e[15],16,530742520),n=ei(n,r=Zr(r,i,s,n,e[2],23,-995338651),i,s,e[0],6,-198630844),s=ei(s,n,r,i,e[7],10,1126891415),i=ei(i,s,n,r,e[14],15,-1416354905),r=ei(r,i,s,n,e[5],21,-57434055),n=ei(n,r,i,s,e[12],6,1700485571),s=ei(s,n,r,i,e[3],10,-1894986606),i=ei(i,s,n,r,e[10],15,-1051523),r=ei(r,i,s,n,e[1],21,-2054922799),n=ei(n,r,i,s,e[8],6,1873313359),s=ei(s,n,r,i,e[15],10,-30611744),i=ei(i,s,n,r,e[6],15,-1560198380),r=ei(r,i,s,n,e[13],21,1309151649),n=ei(n,r,i,s,e[4],6,-145523070),s=ei(s,n,r,i,e[11],10,-1120210379),i=ei(i,s,n,r,e[2],15,718787259),r=ei(r,i,s,n,e[9],21,-343485551),t[0]=sl(n,t[0]),t[1]=sl(r,t[1]),t[2]=sl(i,t[2]),t[3]=sl(s,t[3])}function kg(t,e,n,r,i,s){return e=sl(sl(e,t),sl(r,s)),sl(e<<i|e>>>32-i,n)}function Jr(t,e,n,r,i,s,o){return kg(e&n|~e&r,t,e,i,s,o)}function Xr(t,e,n,r,i,s,o){return kg(e&r|n&~r,t,e,i,s,o)}function Zr(t,e,n,r,i,s,o){return kg(e^n^r,t,e,i,s,o)}function ei(t,e,n,r,i,s,o){return kg(n^(e|~r),t,e,i,s,o)}function kE(t){var e,n=t.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)n1(r,qV(t.substring(e-64,e)));t=t.substring(e-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)i[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(n1(r,i),e=0;e<16;e++)i[e]=0;return i[14]=8*n,n1(r,i),r}function qV(t){var e,n=[];for(e=0;e<64;e+=4)n[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return n}var Ub="0123456789abcdef".split("");function HV(t){for(var e="",n=0;n<4;n++)e+=Ub[t>>8*n+4&15]+Ub[t>>8*n&15];return e}function WV(t){return String.fromCharCode(255&t,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function W2(t){return kE(t).map(WV).join("")}var $V=function(t){for(var e=0;e<t.length;e++)t[e]=HV(t[e]);return t.join("")}(kE("hello"))!="5d41402abc4b2a76b9719d911017c592";function sl(t,e){if($V){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function $2(t,e){var n,r,i,s;if(t!==n){for(var o=(i=t,s=1+(256/t.length|0),new Array(s+1).join(i)),a=[],l=0;l<256;l++)a[l]=l;var u=0;for(l=0;l<256;l++){var c=a[l];u=(u+c+o.charCodeAt(l))%256,a[l]=a[u],a[u]=c}n=t,r=a}else a=r;var g=e.length,y=0,m=0,N="";for(l=0;l<g;l++)m=(m+(c=a[y=(y+1)%256]))%256,a[y]=a[m],a[m]=c,o=a[(a[y]+a[m])%256],N+=String.fromCharCode(e.charCodeAt(l)^o);return N}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var Vb={print:4,modify:8,copy:16,"annot-forms":32};function tc(t,e,n,r){this.v=1,this.r=2;var i=192;t.forEach(function(a){if(Vb.perm!==void 0)throw new Error("Invalid permission: "+a);i+=Vb[a]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var s=(e+this.padding).substr(0,32),o=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,o),this.P=-(1+(255^i)),this.encryptionKey=W2(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=$2(this.encryptionKey,this.padding)}function nc(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",n=t.length,r=0;r<n;r++){var i=t.charCodeAt(r);e+=i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?"#"+("0"+i.toString(16)).slice(-2):t[r]}return e}function Bb(t){if(an(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(n,r,i){if(i=i||!1,typeof n!="string"||typeof r!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(n)||(e[n]={});var s=Math.random().toString(35);return e[n][s]=[r,!!i],s},this.unsubscribe=function(n){for(var r in e)if(e[r][n])return delete e[r][n],Object.keys(e[r]).length===0&&delete e[r],!0;return!1},this.publish=function(n){if(e.hasOwnProperty(n)){var r=Array.prototype.slice.call(arguments,1),i=[];for(var s in e[n]){var o=e[n][s];try{o[0].apply(t,r)}catch(a){gt.console&&gn.error("jsPDF PubSub Error",a.message,a)}o[1]&&i.push(s)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function Rm(t){if(!(this instanceof Rm))return new Rm(t);var e="opacity,stroke-opacity".split(",");for(var n in t)t.hasOwnProperty(n)&&e.indexOf(n)>=0&&(this[n]=t[n]);this.id="",this.objectNumber=-1}function PE(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function Jl(t,e,n,r,i){if(!(this instanceof Jl))return new Jl(t,e,n,r,i);this.type=t==="axial"?2:3,this.coords=e,this.colors=n,PE.call(this,r,i)}function gc(t,e,n,r,i){if(!(this instanceof gc))return new gc(t,e,n,r,i);this.boundingBox=t,this.xStep=e,this.yStep=n,this.stream="",this.cloneIndex=0,PE.call(this,r,i)}function rt(t){var e,n=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],i=arguments[2],s=arguments[3],o=[],a=1,l=16,u="S",c=null;an(t=t||{})==="object"&&(n=t.orientation,r=t.unit||r,i=t.format||i,s=t.compress||t.compressPdf||s,(c=t.encryption||null)!==null&&(c.userPassword=c.userPassword||"",c.ownerPassword=c.ownerPassword||"",c.userPermissions=c.userPermissions||[]),a=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(l=t.floatPrecision),u=t.defaultPathOperation||"S"),o=t.filters||(s===!0?["FlateEncode"]:o),r=r||"mm",n=(""+(n||"P")).toLowerCase();var g=t.putOnlyUsedFonts||!1,y={},m={internal:{},__private__:{}};m.__private__.PubSub=Bb;var N="1.3",A=m.__private__.getPdfVersion=function(){return N};m.__private__.setPdfVersion=function(v){N=v};var C={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};m.__private__.getPageFormats=function(){return C};var _=m.__private__.getPageFormat=function(v){return C[v]};i=i||"a4";var k="compat",R="advanced",D=k;function z(){this.saveGraphicsState(),Y(new ct(wt,0,0,-wt,0,ms()*wt).toString()+" cm"),this.setFontSize(this.getFontSize()/wt),u="n",D=R}function Q(){this.restoreGraphicsState(),u="S",D=k}var j=m.__private__.combineFontStyleAndFontWeight=function(v,O){if(v=="bold"&&O=="normal"||v=="bold"&&O==400||v=="normal"&&O=="italic"||v=="bold"&&O=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return O&&(v=O==400||O==="normal"?v==="italic"?"italic":"normal":O!=700&&O!=="bold"||v!=="normal"?(O==700?"bold":O)+""+v:"bold"),v};m.advancedAPI=function(v){var O=D===k;return O&&z.call(this),typeof v!="function"||(v(this),O&&Q.call(this)),this},m.compatAPI=function(v){var O=D===R;return O&&Q.call(this),typeof v!="function"||(v(this),O&&z.call(this)),this},m.isAdvancedAPI=function(){return D===R};var E,I=function(v){if(D!==R)throw new Error(v+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},F=m.roundToPrecision=m.__private__.roundToPrecision=function(v,O){var X=e||O;if(isNaN(v)||isNaN(X))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return v.toFixed(X).replace(/0+$/,"")};E=m.hpf=m.__private__.hpf=typeof l=="number"?function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.hpf");return F(v,l)}:l==="smart"?function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.hpf");return F(v,v>-1&&v<1?16:5)}:function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.hpf");return F(v,16)};var b=m.f2=m.__private__.f2=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.f2");return F(v,2)},S=m.__private__.f3=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.f3");return F(v,3)},P=m.scale=m.__private__.scale=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.scale");return D===k?v*wt:D===R?v:void 0},J=function(v){return P(function(O){return D===k?ms()-O:D===R?O:void 0}(v))};m.__private__.setPrecision=m.setPrecision=function(v){typeof parseInt(v,10)=="number"&&(e=parseInt(v,10))};var le,we="00000000000000000000000000000000",xe=m.__private__.getFileId=function(){return we},ne=m.__private__.setFileId=function(v){return we=v!==void 0&&/^[a-fA-F0-9]{32}$/.test(v)?v.toUpperCase():we.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),c!==null&&(fn=new tc(c.userPermissions,c.userPassword,c.ownerPassword,we)),we};m.setFileId=function(v){return ne(v),this},m.getFileId=function(){return xe()};var ae=m.__private__.convertDateToPDFDate=function(v){var O=v.getTimezoneOffset(),X=O<0?"+":"-",ie=Math.floor(Math.abs(O/60)),fe=Math.abs(O%60),Ae=[X,W(ie),"'",W(fe),"'"].join("");return["D:",v.getFullYear(),W(v.getMonth()+1),W(v.getDate()),W(v.getHours()),W(v.getMinutes()),W(v.getSeconds()),Ae].join("")},_e=m.__private__.convertPDFDateToDate=function(v){var O=parseInt(v.substr(2,4),10),X=parseInt(v.substr(6,2),10)-1,ie=parseInt(v.substr(8,2),10),fe=parseInt(v.substr(10,2),10),Ae=parseInt(v.substr(12,2),10),ke=parseInt(v.substr(14,2),10);return new Date(O,X,ie,fe,Ae,ke,0)},ge=m.__private__.setCreationDate=function(v){var O;if(v===void 0&&(v=new Date),v instanceof Date)O=ae(v);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(v))throw new Error("Invalid argument passed to jsPDF.setCreationDate");O=v}return le=O},U=m.__private__.getCreationDate=function(v){var O=le;return v==="jsDate"&&(O=_e(le)),O};m.setCreationDate=function(v){return ge(v),this},m.getCreationDate=function(v){return U(v)};var K,W=m.__private__.padd2=function(v){return("0"+parseInt(v)).slice(-2)},te=m.__private__.padd2Hex=function(v){return("00"+(v=v.toString())).substr(v.length)},re=0,$=[],ue=[],he=0,de=[],Ne=[],Re=!1,Pe=ue;m.__private__.setCustomOutputDestination=function(v){Re=!0,Pe=v};var ze=function(v){Re||(Pe=v)};m.__private__.resetCustomOutputDestination=function(){Re=!1,Pe=ue};var Y=m.__private__.out=function(v){return v=v.toString(),he+=v.length+1,Pe.push(v),Pe},Me=m.__private__.write=function(v){return Y(arguments.length===1?v.toString():Array.prototype.join.call(arguments," "))},_t=m.__private__.getArrayBuffer=function(v){for(var O=v.length,X=new ArrayBuffer(O),ie=new Uint8Array(X);O--;)ie[O]=v.charCodeAt(O);return X},it=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];m.__private__.getStandardFonts=function(){return it};var Le=t.fontSize||16;m.__private__.setFontSize=m.setFontSize=function(v){return Le=D===R?v/wt:v,this};var st,qe=m.__private__.getFontSize=m.getFontSize=function(){return D===k?Le:Le*wt},at=t.R2L||!1;m.__private__.setR2L=m.setR2L=function(v){return at=v,this},m.__private__.getR2L=m.getR2L=function(){return at};var tt,Wt=m.__private__.setZoomMode=function(v){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(v))st=v;else if(isNaN(v)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(v)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+v+'" is not recognized.');st=v}else st=parseInt(v,10)};m.__private__.getZoomMode=function(){return st};var Rt,Ze=m.__private__.setPageMode=function(v){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(v)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+v+'" is not recognized.');tt=v};m.__private__.getPageMode=function(){return tt};var ft=m.__private__.setLayoutMode=function(v){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(v)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+v+'" is not recognized.');Rt=v};m.__private__.getLayoutMode=function(){return Rt},m.__private__.setDisplayMode=m.setDisplayMode=function(v,O,X){return Wt(v),ft(O),Ze(X),this};var Pt={title:"",subject:"",author:"",keywords:"",creator:""};m.__private__.getDocumentProperty=function(v){if(Object.keys(Pt).indexOf(v)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Pt[v]},m.__private__.getDocumentProperties=function(){return Pt},m.__private__.setDocumentProperties=m.setProperties=m.setDocumentProperties=function(v){for(var O in Pt)Pt.hasOwnProperty(O)&&v[O]&&(Pt[O]=v[O]);return this},m.__private__.setDocumentProperty=function(v,O){if(Object.keys(Pt).indexOf(v)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Pt[v]=O};var Ke,wt,et,dn,Ft,It={},At={},wn=[],ot={},Zt={},ht={},yt={},en=null,kt=0,lt=[],jt=new Bb(m),eo=t.hotfixes||[],Xn={},as={},qr=[],ct=function v(O,X,ie,fe,Ae,ke){if(!(this instanceof v))return new v(O,X,ie,fe,Ae,ke);isNaN(O)&&(O=1),isNaN(X)&&(X=0),isNaN(ie)&&(ie=0),isNaN(fe)&&(fe=1),isNaN(Ae)&&(Ae=0),isNaN(ke)&&(ke=0),this._matrix=[O,X,ie,fe,Ae,ke]};Object.defineProperty(ct.prototype,"sx",{get:function(){return this._matrix[0]},set:function(v){this._matrix[0]=v}}),Object.defineProperty(ct.prototype,"shy",{get:function(){return this._matrix[1]},set:function(v){this._matrix[1]=v}}),Object.defineProperty(ct.prototype,"shx",{get:function(){return this._matrix[2]},set:function(v){this._matrix[2]=v}}),Object.defineProperty(ct.prototype,"sy",{get:function(){return this._matrix[3]},set:function(v){this._matrix[3]=v}}),Object.defineProperty(ct.prototype,"tx",{get:function(){return this._matrix[4]},set:function(v){this._matrix[4]=v}}),Object.defineProperty(ct.prototype,"ty",{get:function(){return this._matrix[5]},set:function(v){this._matrix[5]=v}}),Object.defineProperty(ct.prototype,"a",{get:function(){return this._matrix[0]},set:function(v){this._matrix[0]=v}}),Object.defineProperty(ct.prototype,"b",{get:function(){return this._matrix[1]},set:function(v){this._matrix[1]=v}}),Object.defineProperty(ct.prototype,"c",{get:function(){return this._matrix[2]},set:function(v){this._matrix[2]=v}}),Object.defineProperty(ct.prototype,"d",{get:function(){return this._matrix[3]},set:function(v){this._matrix[3]=v}}),Object.defineProperty(ct.prototype,"e",{get:function(){return this._matrix[4]},set:function(v){this._matrix[4]=v}}),Object.defineProperty(ct.prototype,"f",{get:function(){return this._matrix[5]},set:function(v){this._matrix[5]=v}}),Object.defineProperty(ct.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(ct.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(ct.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(ct.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),ct.prototype.join=function(v){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(E).join(v)},ct.prototype.multiply=function(v){var O=v.sx*this.sx+v.shy*this.shx,X=v.sx*this.shy+v.shy*this.sy,ie=v.shx*this.sx+v.sy*this.shx,fe=v.shx*this.shy+v.sy*this.sy,Ae=v.tx*this.sx+v.ty*this.shx+this.tx,ke=v.tx*this.shy+v.ty*this.sy+this.ty;return new ct(O,X,ie,fe,Ae,ke)},ct.prototype.decompose=function(){var v=this.sx,O=this.shy,X=this.shx,ie=this.sy,fe=this.tx,Ae=this.ty,ke=Math.sqrt(v*v+O*O),He=(v/=ke)*X+(O/=ke)*ie;X-=v*He,ie-=O*He;var Ye=Math.sqrt(X*X+ie*ie);return He/=Ye,v*(ie/=Ye)<O*(X/=Ye)&&(v=-v,O=-O,He=-He,ke=-ke),{scale:new ct(ke,0,0,Ye,0,0),translate:new ct(1,0,0,1,fe,Ae),rotate:new ct(v,O,-O,v,0,0),skew:new ct(1,0,He,1,0,0)}},ct.prototype.toString=function(v){return this.join(" ")},ct.prototype.inversed=function(){var v=this.sx,O=this.shy,X=this.shx,ie=this.sy,fe=this.tx,Ae=this.ty,ke=1/(v*ie-O*X),He=ie*ke,Ye=-O*ke,pt=-X*ke,xt=v*ke;return new ct(He,Ye,pt,xt,-He*fe-pt*Ae,-Ye*fe-xt*Ae)},ct.prototype.applyToPoint=function(v){var O=v.x*this.sx+v.y*this.shx+this.tx,X=v.x*this.shy+v.y*this.sy+this.ty;return new fs(O,X)},ct.prototype.applyToRectangle=function(v){var O=this.applyToPoint(v),X=this.applyToPoint(new fs(v.x+v.w,v.y+v.h));return new Ta(O.x,O.y,X.x-O.x,X.y-O.y)},ct.prototype.clone=function(){var v=this.sx,O=this.shy,X=this.shx,ie=this.sy,fe=this.tx,Ae=this.ty;return new ct(v,O,X,ie,fe,Ae)},m.Matrix=ct;var Nn=m.matrixMult=function(v,O){return O.multiply(v)},ls=new ct(1,0,0,1,0,0);m.unitMatrix=m.identityMatrix=ls;var br=function(v,O){if(!Zt[v]){var X=(O instanceof Jl?"Sh":"P")+(Object.keys(ot).length+1).toString(10);O.id=X,Zt[v]=X,ot[X]=O,jt.publish("addPattern",O)}};m.ShadingPattern=Jl,m.TilingPattern=gc,m.addShadingPattern=function(v,O){return I("addShadingPattern()"),br(v,O),this},m.beginTilingPattern=function(v){I("beginTilingPattern()"),lo(v.boundingBox[0],v.boundingBox[1],v.boundingBox[2]-v.boundingBox[0],v.boundingBox[3]-v.boundingBox[1],v.matrix)},m.endTilingPattern=function(v,O){I("endTilingPattern()"),O.stream=Ne[K].join(`
`),br(v,O),jt.publish("endTilingPattern",O),qr.pop().restore()};var Nr,kn=m.__private__.newObject=function(){var v=cr();return Pn(v,!0),v},cr=m.__private__.newObjectDeferred=function(){return re++,$[re]=function(){return he},re},Pn=function(v,O){return O=typeof O=="boolean"&&O,$[v]=he,O&&Y(v+" 0 obj"),v},Lo=m.__private__.newAdditionalObject=function(){var v={objId:cr(),content:""};return de.push(v),v},to=cr(),Hr=cr(),Fi=m.__private__.decodeColorString=function(v){var O=v.split(" ");if(O.length!==2||O[1]!=="g"&&O[1]!=="G")O.length!==5||O[4]!=="k"&&O[4]!=="K"||(O=[(1-O[0])*(1-O[3]),(1-O[1])*(1-O[3]),(1-O[2])*(1-O[3]),"r"]);else{var X=parseFloat(O[0]);O=[X,X,X,"r"]}for(var ie="#",fe=0;fe<3;fe++)ie+=("0"+Math.floor(255*parseFloat(O[fe])).toString(16)).slice(-2);return ie},li=m.__private__.encodeColorString=function(v){var O;typeof v=="string"&&(v={ch1:v});var X=v.ch1,ie=v.ch2,fe=v.ch3,Ae=v.ch4,ke=v.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof X=="string"&&X.charAt(0)!=="#"){var He=new IE(X);if(He.ok)X=He.toHex();else if(!/^\d*\.?\d*$/.test(X))throw new Error('Invalid color "'+X+'" passed to jsPDF.encodeColorString.')}if(typeof X=="string"&&/^#[0-9A-Fa-f]{3}$/.test(X)&&(X="#"+X[1]+X[1]+X[2]+X[2]+X[3]+X[3]),typeof X=="string"&&/^#[0-9A-Fa-f]{6}$/.test(X)){var Ye=parseInt(X.substr(1),16);X=Ye>>16&255,ie=Ye>>8&255,fe=255&Ye}if(ie===void 0||Ae===void 0&&X===ie&&ie===fe)O=typeof X=="string"?X+" "+ke[0]:v.precision===2?b(X/255)+" "+ke[0]:S(X/255)+" "+ke[0];else if(Ae===void 0||an(Ae)==="object"){if(Ae&&!isNaN(Ae.a)&&Ae.a===0)return["1.","1.","1.",ke[1]].join(" ");O=typeof X=="string"?[X,ie,fe,ke[1]].join(" "):v.precision===2?[b(X/255),b(ie/255),b(fe/255),ke[1]].join(" "):[S(X/255),S(ie/255),S(fe/255),ke[1]].join(" ")}else O=typeof X=="string"?[X,ie,fe,Ae,ke[2]].join(" "):v.precision===2?[b(X),b(ie),b(fe),b(Ae),ke[2]].join(" "):[S(X),S(ie),S(fe),S(Ae),ke[2]].join(" ");return O},Wr=m.__private__.getFilters=function(){return o},Zn=m.__private__.putStream=function(v){var O=(v=v||{}).data||"",X=v.filters||Wr(),ie=v.alreadyAppliedFilters||[],fe=v.addLength1||!1,Ae=O.length,ke=v.objectId,He=function(qn){return qn};if(c!==null&&ke===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");c!==null&&(He=fn.encryptor(ke,0));var Ye={};X===!0&&(X=["FlateEncode"]);var pt=v.additionalKeyValues||[],xt=(Ye=rt.API.processDataByFilters!==void 0?rt.API.processDataByFilters(O,X):{data:O,reverseChain:[]}).reverseChain+(Array.isArray(ie)?ie.join(" "):ie.toString());if(Ye.data.length!==0&&(pt.push({key:"Length",value:Ye.data.length}),fe===!0&&pt.push({key:"Length1",value:Ae})),xt.length!=0)if(xt.split("/").length-1==1)pt.push({key:"Filter",value:xt});else{pt.push({key:"Filter",value:"["+xt+"]"});for(var Ut=0;Ut<pt.length;Ut+=1)if(pt[Ut].key==="DecodeParms"){for(var Xt=[],Dn=0;Dn<Ye.reverseChain.split("/").length-1;Dn+=1)Xt.push("null");Xt.push(pt[Ut].value),pt[Ut].value="["+Xt.join(" ")+"]"}}Y("<<");for(var nn=0;nn<pt.length;nn++)Y("/"+pt[nn].key+" "+pt[nn].value);Y(">>"),Ye.data.length!==0&&(Y("stream"),Y(He(Ye.data)),Y("endstream"))},no=m.__private__.putPage=function(v){var O=v.number,X=v.data,ie=v.objId,fe=v.contentsObjId;Pn(ie,!0),Y("<</Type /Page"),Y("/Parent "+v.rootDictionaryObjId+" 0 R"),Y("/Resources "+v.resourceDictionaryObjId+" 0 R"),Y("/MediaBox ["+parseFloat(E(v.mediaBox.bottomLeftX))+" "+parseFloat(E(v.mediaBox.bottomLeftY))+" "+E(v.mediaBox.topRightX)+" "+E(v.mediaBox.topRightY)+"]"),v.cropBox!==null&&Y("/CropBox ["+E(v.cropBox.bottomLeftX)+" "+E(v.cropBox.bottomLeftY)+" "+E(v.cropBox.topRightX)+" "+E(v.cropBox.topRightY)+"]"),v.bleedBox!==null&&Y("/BleedBox ["+E(v.bleedBox.bottomLeftX)+" "+E(v.bleedBox.bottomLeftY)+" "+E(v.bleedBox.topRightX)+" "+E(v.bleedBox.topRightY)+"]"),v.trimBox!==null&&Y("/TrimBox ["+E(v.trimBox.bottomLeftX)+" "+E(v.trimBox.bottomLeftY)+" "+E(v.trimBox.topRightX)+" "+E(v.trimBox.topRightY)+"]"),v.artBox!==null&&Y("/ArtBox ["+E(v.artBox.bottomLeftX)+" "+E(v.artBox.bottomLeftY)+" "+E(v.artBox.topRightX)+" "+E(v.artBox.topRightY)+"]"),typeof v.userUnit=="number"&&v.userUnit!==1&&Y("/UserUnit "+v.userUnit),jt.publish("putPage",{objId:ie,pageContext:lt[O],pageNumber:O,page:X}),Y("/Contents "+fe+" 0 R"),Y(">>"),Y("endobj");var Ae=X.join(`
`);return D===R&&(Ae+=`
Q`),Pn(fe,!0),Zn({data:Ae,filters:Wr(),objectId:fe}),Y("endobj"),ie},Mi=m.__private__.putPages=function(){var v,O,X=[];for(v=1;v<=kt;v++)lt[v].objId=cr(),lt[v].contentsObjId=cr();for(v=1;v<=kt;v++)X.push(no({number:v,data:Ne[v],objId:lt[v].objId,contentsObjId:lt[v].contentsObjId,mediaBox:lt[v].mediaBox,cropBox:lt[v].cropBox,bleedBox:lt[v].bleedBox,trimBox:lt[v].trimBox,artBox:lt[v].artBox,userUnit:lt[v].userUnit,rootDictionaryObjId:to,resourceDictionaryObjId:Hr}));Pn(to,!0),Y("<</Type /Pages");var ie="/Kids [";for(O=0;O<kt;O++)ie+=X[O]+" 0 R ";Y(ie+"]"),Y("/Count "+kt),Y(">>"),Y("endobj"),jt.publish("postPutPages")},Cs=function(v){jt.publish("putFont",{font:v,out:Y,newObject:kn,putStream:Zn}),v.isAlreadyPutted!==!0&&(v.objectNumber=kn(),Y("<<"),Y("/Type /Font"),Y("/BaseFont /"+nc(v.postScriptName)),Y("/Subtype /Type1"),typeof v.encoding=="string"&&Y("/Encoding /"+v.encoding),Y("/FirstChar 32"),Y("/LastChar 255"),Y(">>"),Y("endobj"))},ro=function(v){v.objectNumber=kn();var O=[];O.push({key:"Type",value:"/XObject"}),O.push({key:"Subtype",value:"/Form"}),O.push({key:"BBox",value:"["+[E(v.x),E(v.y),E(v.x+v.width),E(v.y+v.height)].join(" ")+"]"}),O.push({key:"Matrix",value:"["+v.matrix.toString()+"]"});var X=v.pages[1].join(`
`);Zn({data:X,additionalKeyValues:O,objectId:v.objectNumber}),Y("endobj")},Ro=function(v,O){O||(O=21);var X=kn(),ie=function(ke,He){var Ye,pt=[],xt=1/(He-1);for(Ye=0;Ye<1;Ye+=xt)pt.push(Ye);if(pt.push(1),ke[0].offset!=0){var Ut={offset:0,color:ke[0].color};ke.unshift(Ut)}if(ke[ke.length-1].offset!=1){var Xt={offset:1,color:ke[ke.length-1].color};ke.push(Xt)}for(var Dn="",nn=0,qn=0;qn<pt.length;qn++){for(Ye=pt[qn];Ye>ke[nn+1].offset;)nn++;var On=ke[nn].offset,Hn=(Ye-On)/(ke[nn+1].offset-On),Fn=ke[nn].color,Si=ke[nn+1].color;Dn+=te(Math.round((1-Hn)*Fn[0]+Hn*Si[0]).toString(16))+te(Math.round((1-Hn)*Fn[1]+Hn*Si[1]).toString(16))+te(Math.round((1-Hn)*Fn[2]+Hn*Si[2]).toString(16))}return Dn.trim()}(v.colors,O),fe=[];fe.push({key:"FunctionType",value:"0"}),fe.push({key:"Domain",value:"[0.0 1.0]"}),fe.push({key:"Size",value:"["+O+"]"}),fe.push({key:"BitsPerSample",value:"8"}),fe.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),fe.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Zn({data:ie,additionalKeyValues:fe,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:X}),Y("endobj"),v.objectNumber=kn(),Y("<< /ShadingType "+v.type),Y("/ColorSpace /DeviceRGB");var Ae="/Coords ["+E(parseFloat(v.coords[0]))+" "+E(parseFloat(v.coords[1]))+" ";v.type===2?Ae+=E(parseFloat(v.coords[2]))+" "+E(parseFloat(v.coords[3])):Ae+=E(parseFloat(v.coords[2]))+" "+E(parseFloat(v.coords[3]))+" "+E(parseFloat(v.coords[4]))+" "+E(parseFloat(v.coords[5])),Y(Ae+="]"),v.matrix&&Y("/Matrix ["+v.matrix.toString()+"]"),Y("/Function "+X+" 0 R"),Y("/Extend [true true]"),Y(">>"),Y("endobj")},jo=function(v,O){var X=cr(),ie=kn();O.push({resourcesOid:X,objectOid:ie}),v.objectNumber=ie;var fe=[];fe.push({key:"Type",value:"/Pattern"}),fe.push({key:"PatternType",value:"1"}),fe.push({key:"PaintType",value:"1"}),fe.push({key:"TilingType",value:"1"}),fe.push({key:"BBox",value:"["+v.boundingBox.map(E).join(" ")+"]"}),fe.push({key:"XStep",value:E(v.xStep)}),fe.push({key:"YStep",value:E(v.yStep)}),fe.push({key:"Resources",value:X+" 0 R"}),v.matrix&&fe.push({key:"Matrix",value:"["+v.matrix.toString()+"]"}),Zn({data:v.stream,additionalKeyValues:fe,objectId:v.objectNumber}),Y("endobj")},oh=function(v){for(var O in v.objectNumber=kn(),Y("<<"),v)switch(O){case"opacity":Y("/ca "+b(v[O]));break;case"stroke-opacity":Y("/CA "+b(v[O]))}Y(">>"),Y("endobj")},io=function(v){Pn(v.resourcesOid,!0),Y("<<"),Y("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),function(){for(var O in Y("/Font <<"),It)It.hasOwnProperty(O)&&(g===!1||g===!0&&y.hasOwnProperty(O))&&Y("/"+O+" "+It[O].objectNumber+" 0 R");Y(">>")}(),function(){if(Object.keys(ot).length>0){for(var O in Y("/Shading <<"),ot)ot.hasOwnProperty(O)&&ot[O]instanceof Jl&&ot[O].objectNumber>=0&&Y("/"+O+" "+ot[O].objectNumber+" 0 R");jt.publish("putShadingPatternDict"),Y(">>")}}(),function(O){if(Object.keys(ot).length>0){for(var X in Y("/Pattern <<"),ot)ot.hasOwnProperty(X)&&ot[X]instanceof m.TilingPattern&&ot[X].objectNumber>=0&&ot[X].objectNumber<O&&Y("/"+X+" "+ot[X].objectNumber+" 0 R");jt.publish("putTilingPatternDict"),Y(">>")}}(v.objectOid),function(){if(Object.keys(ht).length>0){var O;for(O in Y("/ExtGState <<"),ht)ht.hasOwnProperty(O)&&ht[O].objectNumber>=0&&Y("/"+O+" "+ht[O].objectNumber+" 0 R");jt.publish("putGStateDict"),Y(">>")}}(),function(){for(var O in Y("/XObject <<"),Xn)Xn.hasOwnProperty(O)&&Xn[O].objectNumber>=0&&Y("/"+O+" "+Xn[O].objectNumber+" 0 R");jt.publish("putXobjectDict"),Y(">>")}(),Y(">>"),Y("endobj")},Ll=function(v){At[v.fontName]=At[v.fontName]||{},At[v.fontName][v.fontStyle]=v.id},_a=function(v,O,X,ie,fe){var Ae={id:"F"+(Object.keys(It).length+1).toString(10),postScriptName:v,fontName:O,fontStyle:X,encoding:ie,isStandardFont:fe||!1,metadata:{}};return jt.publish("addFont",{font:Ae,instance:this}),It[Ae.id]=Ae,Ll(Ae),Ae.id},Sr=m.__private__.pdfEscape=m.pdfEscape=function(v,O){return function(X,ie){var fe,Ae,ke,He,Ye,pt,xt,Ut,Xt;if(ke=(ie=ie||{}).sourceEncoding||"Unicode",Ye=ie.outputEncoding,(ie.autoencode||Ye)&&It[Ke].metadata&&It[Ke].metadata[ke]&&It[Ke].metadata[ke].encoding&&(He=It[Ke].metadata[ke].encoding,!Ye&&It[Ke].encoding&&(Ye=It[Ke].encoding),!Ye&&He.codePages&&(Ye=He.codePages[0]),typeof Ye=="string"&&(Ye=He[Ye]),Ye)){for(xt=!1,pt=[],fe=0,Ae=X.length;fe<Ae;fe++)(Ut=Ye[X.charCodeAt(fe)])?pt.push(String.fromCharCode(Ut)):pt.push(X[fe]),pt[fe].charCodeAt(0)>>8&&(xt=!0);X=pt.join("")}for(fe=X.length;xt===void 0&&fe!==0;)X.charCodeAt(fe-1)>>8&&(xt=!0),fe--;if(!xt)return X;for(pt=ie.noBOM?[]:[254,255],fe=0,Ae=X.length;fe<Ae;fe++){if((Xt=(Ut=X.charCodeAt(fe))>>8)>>8)throw new Error("Character at position "+fe+" of string '"+X+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");pt.push(Xt),pt.push(Ut-(Xt<<8))}return String.fromCharCode.apply(void 0,pt)}(v,O).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Ui=m.__private__.beginPage=function(v){Ne[++kt]=[],lt[kt]={objId:0,contentsObjId:0,userUnit:Number(a),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(v[0]),topRightY:Number(v[1])}},jl(kt),ze(Ne[K])},ba=function(v,O){var X,ie,fe;switch(n=O||n,typeof v=="string"&&(X=_(v.toLowerCase()),Array.isArray(X)&&(ie=X[0],fe=X[1])),Array.isArray(v)&&(ie=v[0]*wt,fe=v[1]*wt),isNaN(ie)&&(ie=i[0],fe=i[1]),(ie>14400||fe>14400)&&(gn.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),ie=Math.min(14400,ie),fe=Math.min(14400,fe)),i=[ie,fe],n.substr(0,1)){case"l":fe>ie&&(i=[fe,ie]);break;case"p":ie>fe&&(i=[fe,ie])}Ui(i),dt(Sa),Y(Rs),hn!==0&&Y(hn+" J"),Vl!==0&&Y(Vl+" j"),jt.publish("addPage",{pageNumber:kt})},Rl=function(v){v>0&&v<=kt&&(Ne.splice(v,1),lt.splice(v,1),kt--,K>kt&&(K=kt),this.setPage(K))},jl=function(v){v>0&&v<=kt&&(K=v)},Dl=m.__private__.getNumberOfPages=m.getNumberOfPages=function(){return Ne.length-1},Ol=function(v,O,X){var ie,fe=void 0;return X=X||{},v=v!==void 0?v:It[Ke].fontName,O=O!==void 0?O:It[Ke].fontStyle,ie=v.toLowerCase(),At[ie]!==void 0&&At[ie][O]!==void 0?fe=At[ie][O]:At[v]!==void 0&&At[v][O]!==void 0?fe=At[v][O]:X.disableWarning===!1&&gn.warn("Unable to look up font label for font '"+v+"', '"+O+"'. Refer to getFontList() for available fonts."),fe||X.noFallback||(fe=At.times[O])==null&&(fe=At.times.normal),fe},bi=m.__private__.putInfo=function(){var v=kn(),O=function(ie){return ie};for(var X in c!==null&&(O=fn.encryptor(v,0)),Y("<<"),Y("/Producer ("+Sr(O("jsPDF "+rt.version))+")"),Pt)Pt.hasOwnProperty(X)&&Pt[X]&&Y("/"+X.substr(0,1).toUpperCase()+X.substr(1)+" ("+Sr(O(Pt[X]))+")");Y("/CreationDate ("+Sr(O(le))+")"),Y(">>"),Y("endobj")},so=m.__private__.putCatalog=function(v){var O=(v=v||{}).rootDictionaryObjId||to;switch(kn(),Y("<<"),Y("/Type /Catalog"),Y("/Pages "+O+" 0 R"),st||(st="fullwidth"),st){case"fullwidth":Y("/OpenAction [3 0 R /FitH null]");break;case"fullheight":Y("/OpenAction [3 0 R /FitV null]");break;case"fullpage":Y("/OpenAction [3 0 R /Fit]");break;case"original":Y("/OpenAction [3 0 R /XYZ null null 1]");break;default:var X=""+st;X.substr(X.length-1)==="%"&&(st=parseInt(st)/100),typeof st=="number"&&Y("/OpenAction [3 0 R /XYZ null null "+b(st)+"]")}switch(Rt||(Rt="continuous"),Rt){case"continuous":Y("/PageLayout /OneColumn");break;case"single":Y("/PageLayout /SinglePage");break;case"two":case"twoleft":Y("/PageLayout /TwoColumnLeft");break;case"tworight":Y("/PageLayout /TwoColumnRight")}tt&&Y("/PageMode /"+tt),jt.publish("putCatalog"),Y(">>"),Y("endobj")},Fu=m.__private__.putTrailer=function(){Y("trailer"),Y("<<"),Y("/Size "+(re+1)),Y("/Root "+re+" 0 R"),Y("/Info "+(re-1)+" 0 R"),c!==null&&Y("/Encrypt "+fn.oid+" 0 R"),Y("/ID [ <"+we+"> <"+we+"> ]"),Y(">>")},jn=m.__private__.putHeader=function(){Y("%PDF-"+N),Y("%")},Mu=m.__private__.putXRef=function(){var v="0000000000";Y("xref"),Y("0 "+(re+1)),Y("0000000000 65535 f ");for(var O=1;O<=re;O++)typeof $[O]=="function"?Y((v+$[O]()).slice(-10)+" 00000 n "):$[O]!==void 0?Y((v+$[O]).slice(-10)+" 00000 n "):Y("0000000000 00000 n ")},us=m.__private__.buildDocument=function(){var v;re=0,he=0,ue=[],$=[],de=[],to=cr(),Hr=cr(),ze(ue),jt.publish("buildDocument"),jn(),Mi(),function(){jt.publish("putAdditionalObjects");for(var X=0;X<de.length;X++){var ie=de[X];Pn(ie.objId,!0),Y(ie.content),Y("endobj")}jt.publish("postPutAdditionalObjects")}(),v=[],function(){for(var X in It)It.hasOwnProperty(X)&&(g===!1||g===!0&&y.hasOwnProperty(X))&&Cs(It[X])}(),function(){var X;for(X in ht)ht.hasOwnProperty(X)&&oh(ht[X])}(),function(){for(var X in Xn)Xn.hasOwnProperty(X)&&ro(Xn[X])}(),function(X){var ie;for(ie in ot)ot.hasOwnProperty(ie)&&(ot[ie]instanceof Jl?Ro(ot[ie]):ot[ie]instanceof gc&&jo(ot[ie],X))}(v),jt.publish("putResources"),v.forEach(io),io({resourcesOid:Hr,objectOid:Number.MAX_SAFE_INTEGER}),jt.publish("postPutResources"),c!==null&&(fn.oid=kn(),Y("<<"),Y("/Filter /Standard"),Y("/V "+fn.v),Y("/R "+fn.r),Y("/U <"+fn.toHexString(fn.U)+">"),Y("/O <"+fn.toHexString(fn.O)+">"),Y("/P "+fn.P),Y(">>"),Y("endobj")),bi(),so();var O=he;return Mu(),Fu(),Y("startxref"),Y(""+O),Y("%%EOF"),ze(Ne[K]),ue.join(`
`)},Do=m.__private__.getBlob=function(v){return new Blob([_t(v)],{type:"application/pdf"})},Fl=m.output=m.__private__.output=(Nr=function(v,O){switch(typeof(O=O||{})=="string"?O={filename:O}:O.filename=O.filename||"generated.pdf",v){case void 0:return us();case"save":m.save(O.filename);break;case"arraybuffer":return _t(us());case"blob":return Do(us());case"bloburi":case"bloburl":if(gt.URL!==void 0&&typeof gt.URL.createObjectURL=="function")return gt.URL&&gt.URL.createObjectURL(Do(us()))||void 0;gn.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var X="",ie=us();try{X=Mb(ie)}catch{X=Mb(unescape(encodeURIComponent(ie)))}return"data:application/pdf;filename="+O.filename+";base64,"+X;case"pdfobjectnewwindow":if(Object.prototype.toString.call(gt)==="[object Window]"){var fe="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Ae=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';O.pdfObjectUrl&&(fe=O.pdfObjectUrl,Ae="");var ke='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+fe+'"'+Ae+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(O)+");<\/script></body></html>",He=gt.open();return He!==null&&He.document.write(ke),He}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(gt)==="[object Window]"){var Ye='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(O.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+O.filename+'" width="500px" height="400px" /></body></html>',pt=gt.open();if(pt!==null){pt.document.write(Ye);var xt=this;pt.document.documentElement.querySelector("#pdfViewer").onload=function(){pt.document.title=O.filename,pt.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(xt.output("bloburl"))}}return pt}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(gt)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Ut='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",O)+'"></iframe></body></html>',Xt=gt.open();if(Xt!==null&&(Xt.document.write(Ut),Xt.document.title=O.filename),Xt||typeof safari>"u")return Xt;break;case"datauri":case"dataurl":return gt.document.location.href=this.output("datauristring",O);default:return null}},Nr.foo=function(){try{return Nr.apply(this,arguments)}catch(X){var v=X.stack||"";~v.indexOf(" at ")&&(v=v.split(" at ")[1]);var O="Error in function "+v.split(`
`)[0].split("<")[0]+": "+X.message;if(!gt.console)throw new Error(O);gt.console.error(O,X),gt.alert&&alert(O)}},Nr.foo.bar=Nr,Nr.foo),Ni=function(v){return Array.isArray(eo)===!0&&eo.indexOf(v)>-1};switch(r){case"pt":wt=1;break;case"mm":wt=72/25.4;break;case"cm":wt=72/2.54;break;case"in":wt=72;break;case"px":wt=Ni("px_scaling")==1?.75:96/72;break;case"pc":case"em":wt=12;break;case"ex":wt=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);wt=r}var fn=null;ge(),ne();var mr=m.__private__.getPageInfo=m.getPageInfo=function(v){if(isNaN(v)||v%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:lt[v].objId,pageNumber:v,pageContext:lt[v]}},Oo=m.__private__.getPageInfoByObjId=function(v){if(isNaN(v)||v%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var O in lt)if(lt[O].objId===v)break;return mr(O)},Na=m.__private__.getCurrentPageInfo=m.getCurrentPageInfo=function(){return{objId:lt[K].objId,pageNumber:K,pageContext:lt[K]}};m.addPage=function(){return ba.apply(this,arguments),this},m.setPage=function(){return jl.apply(this,arguments),ze.call(this,Ne[K]),this},m.insertPage=function(v){return this.addPage(),this.movePage(K,v),this},m.movePage=function(v,O){var X,ie;if(v>O){X=Ne[v],ie=lt[v];for(var fe=v;fe>O;fe--)Ne[fe]=Ne[fe-1],lt[fe]=lt[fe-1];Ne[O]=X,lt[O]=ie,this.setPage(O)}else if(v<O){X=Ne[v],ie=lt[v];for(var Ae=v;Ae<O;Ae++)Ne[Ae]=Ne[Ae+1],lt[Ae]=lt[Ae+1];Ne[O]=X,lt[O]=ie,this.setPage(O)}return this},m.deletePage=function(){return Rl.apply(this,arguments),this},m.__private__.text=m.text=function(v,O,X,ie,fe){var Ae,ke,He,Ye,pt,xt,Ut,Xt,Dn,nn=(ie=ie||{}).scope||this;if(typeof v=="number"&&typeof O=="number"&&(typeof X=="string"||Array.isArray(X))){var qn=X;X=O,O=v,v=qn}if(arguments[3]instanceof ct==0?(He=arguments[4],Ye=arguments[5],an(Ut=arguments[3])==="object"&&Ut!==null||(typeof He=="string"&&(Ye=He,He=null),typeof Ut=="string"&&(Ye=Ut,Ut=null),typeof Ut=="number"&&(He=Ut,Ut=null),ie={flags:Ut,angle:He,align:Ye})):(I("The transform parameter of text() with a Matrix value"),Dn=fe),isNaN(O)||isNaN(X)||v==null)throw new Error("Invalid arguments passed to jsPDF.text");if(v.length===0)return nn;var On,Hn="",Fn=typeof ie.lineHeightFactor=="number"?ie.lineHeightFactor:ao,Si=nn.internal.scaleFactor;function gs(tn){return tn=tn.split("	").join(Array(ie.TabLen||9).join(" ")),Sr(tn,Ut)}function ys(tn){for(var pn,tr=tn.concat(),gr=[],zo=tr.length;zo--;)typeof(pn=tr.shift())=="string"?gr.push(pn):Array.isArray(tn)&&(pn.length===1||pn[1]===void 0&&pn[2]===void 0)?gr.push(pn[0]):gr.push([pn[0],pn[1],pn[2]]);return gr}function d(tn,pn){var tr;if(typeof tn=="string")tr=pn(tn)[0];else if(Array.isArray(tn)){for(var gr,zo,xh=tn.concat(),$u=[],vf=xh.length;vf--;)typeof(gr=xh.shift())=="string"?$u.push(pn(gr)[0]):Array.isArray(gr)&&typeof gr[0]=="string"&&(zo=pn(gr[0],gr[1],gr[2]),$u.push([zo[0],zo[1],zo[2]]));tr=$u}return tr}var x=!1,L=!0;if(typeof v=="string")x=!0;else if(Array.isArray(v)){var H=v.concat();ke=[];for(var pe,be=H.length;be--;)(typeof(pe=H.shift())!="string"||Array.isArray(pe)&&typeof pe[0]!="string")&&(L=!1);x=L}if(x===!1)throw new Error('Type of text must be string or Array. "'+v+'" is not recognized.');typeof v=="string"&&(v=v.match(/[\r?\n]/)?v.split(/\r\n|\r|\n/g):[v]);var Fe=Le/nn.internal.scaleFactor,Bt=Fe*(Fn-1);switch(ie.baseline){case"bottom":X-=Bt;break;case"top":X+=Fe-Bt;break;case"hanging":X+=Fe-2*Bt;break;case"middle":X+=Fe/2-Bt}if((xt=ie.maxWidth||0)>0&&(typeof v=="string"?v=nn.splitTextToSize(v,xt):Object.prototype.toString.call(v)==="[object Array]"&&(v=v.reduce(function(tn,pn){return tn.concat(nn.splitTextToSize(pn,xt))},[]))),Ae={text:v,x:O,y:X,options:ie,mutex:{pdfEscape:Sr,activeFontKey:Ke,fonts:It,activeFontSize:Le}},jt.publish("preProcessText",Ae),v=Ae.text,He=(ie=Ae.options).angle,Dn instanceof ct==0&&He&&typeof He=="number"){He*=Math.PI/180,ie.rotationDirection===0&&(He=-He),D===R&&(He=-He);var Mn=Math.cos(He),Dt=Math.sin(He);Dn=new ct(Mn,Dt,-Dt,Mn,0,0)}else He&&He instanceof ct&&(Dn=He);D!==R||Dn||(Dn=ls),(pt=ie.charSpace||ds)!==void 0&&(Hn+=E(P(pt))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Xt=ie.horizontalScale)!==void 0&&(Hn+=E(100*Xt)+` Tz
`),ie.lang;var Qt=-1,xn=ie.renderingMode!==void 0?ie.renderingMode:ie.stroke,Bi=nn.internal.getCurrentPageInfo().pageContext;switch(xn){case 0:case!1:case"fill":Qt=0;break;case 1:case!0:case"stroke":Qt=1;break;case 2:case"fillThenStroke":Qt=2;break;case 3:case"invisible":Qt=3;break;case 4:case"fillAndAddForClipping":Qt=4;break;case 5:case"strokeAndAddPathForClipping":Qt=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Qt=6;break;case 7:case"addToPathForClipping":Qt=7}var $r=Bi.usedRenderingMode!==void 0?Bi.usedRenderingMode:-1;Qt!==-1?Hn+=Qt+` Tr
`:$r!==-1&&(Hn+=`0 Tr
`),Qt!==-1&&(Bi.usedRenderingMode=Qt),Ye=ie.align||"left";var Cr,js=Le*Fn,fh=nn.internal.pageSize.getWidth(),ph=It[Ke];pt=ie.charSpace||ds,xt=ie.maxWidth||0,Ut=Object.assign({autoencode:!0,noBOM:!0},ie.flags);var ka=[],ql=function(tn){return nn.getStringUnitWidth(tn,{font:ph,charSpace:pt,fontSize:Le,doKerning:!1})*Le/Si};if(Object.prototype.toString.call(v)==="[object Array]"){var zi;ke=ys(v),Ye!=="left"&&(Cr=ke.map(ql));var qi,Pa=0;if(Ye==="right"){O-=Cr[0],v=[],be=ke.length;for(var Bo=0;Bo<be;Bo++)Bo===0?(qi=Ar(O),zi=Ls(X)):(qi=P(Pa-Cr[Bo]),zi=-js),v.push([ke[Bo],qi,zi]),Pa=Cr[Bo]}else if(Ye==="center"){O-=Cr[0]/2,v=[],be=ke.length;for(var Ca=0;Ca<be;Ca++)Ca===0?(qi=Ar(O),zi=Ls(X)):(qi=P((Pa-Cr[Ca])/2),zi=-js),v.push([ke[Ca],qi,zi]),Pa=Cr[Ca]}else if(Ye==="left"){v=[],be=ke.length;for(var mh=0;mh<be;mh++)v.push(ke[mh])}else if(Ye==="justify"&&ph.encoding==="Identity-H"){v=[],be=ke.length,xt=xt!==0?xt:fh;for(var Wu=0,er=0;er<be;er++)if(zi=er===0?Ls(X):-js,qi=er===0?Ar(O):Wu,er<be-1){var yf=P((xt-Cr[er])/(ke[er].split(" ").length-1)),co=ke[er].split(" ");v.push([co[0]+" ",qi,zi]),Wu=0;for(var ho=1;ho<co.length;ho++){var gh=(ql(co[ho-1]+" "+co[ho])-ql(co[ho]))*Si+yf;ho==co.length-1?v.push([co[ho],gh,0]):v.push([co[ho]+" ",gh,0]),Wu-=gh}}else v.push([ke[er],qi,zi]);v.push(["",Wu,0])}else{if(Ye!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(v=[],be=ke.length,xt=xt!==0?xt:fh,er=0;er<be;er++){zi=er===0?Ls(X):-js,qi=er===0?Ar(O):0;var yh=ke[er].split(" ").length-1,vh=yh>0?(xt-Cr[er])/yh:0;er<be-1?ka.push(E(P(vh))):ka.push(0),v.push([ke[er],qi,zi])}}}(typeof ie.R2L=="boolean"?ie.R2L:at)===!0&&(v=d(v,function(tn,pn,tr){return[tn.split("").reverse().join(""),pn,tr]})),Ae={text:v,x:O,y:X,options:ie,mutex:{pdfEscape:Sr,activeFontKey:Ke,fonts:It,activeFontSize:Le}},jt.publish("postProcessText",Ae),v=Ae.text,On=Ae.mutex.isHex||!1;var wh=It[Ke].encoding;wh!=="WinAnsiEncoding"&&wh!=="StandardEncoding"||(v=d(v,function(tn,pn,tr){return[gs(tn),pn,tr]})),ke=ys(v),v=[];for(var La,Ra,ja,Hl=Array.isArray(ke[0])?1:0,Da="",Wl=function(tn,pn,tr){var gr="";return tr instanceof ct?(tr=typeof ie.angle=="number"?Nn(tr,new ct(1,0,0,1,tn,pn)):Nn(new ct(1,0,0,1,tn,pn),tr),D===R&&(tr=Nn(new ct(1,0,0,-1,0,0),tr)),gr=tr.join(" ")+` Tm
`):gr=E(tn)+" "+E(pn)+` Td
`,gr},vs=0;vs<ke.length;vs++){switch(Da="",Hl){case 1:ja=(On?"<":"(")+ke[vs][0]+(On?">":")"),La=parseFloat(ke[vs][1]),Ra=parseFloat(ke[vs][2]);break;case 0:ja=(On?"<":"(")+ke[vs]+(On?">":")"),La=Ar(O),Ra=Ls(X)}ka!==void 0&&ka[vs]!==void 0&&(Da=ka[vs]+` Tw
`),vs===0?v.push(Da+Wl(La,Ra,Dn)+ja):Hl===0?v.push(Da+ja):Hl===1&&v.push(Da+Wl(La,Ra,Dn)+ja)}v=Hl===0?v.join(` Tj
T* `):v.join(` Tj
`),v+=` Tj
`;var fo=`BT
/`;return fo+=Ke+" "+Le+` Tf
`,fo+=E(Le*Fn)+` TL
`,fo+=Vi+`
`,fo+=Hn,fo+=v,Y(fo+="ET"),y[Ke]=!0,nn};var Uu=m.__private__.clip=m.clip=function(v){return Y(v==="evenodd"?"W*":"W"),this};m.clipEvenOdd=function(){return Uu("evenodd")},m.__private__.discardPath=m.discardPath=function(){return Y("n"),this};var Mt=m.__private__.isValidStyle=function(v){var O=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(v)!==-1&&(O=!0),O};m.__private__.setDefaultPathOperation=m.setDefaultPathOperation=function(v){return Mt(v)&&(u=v),this};var Fo=m.__private__.getStyle=m.getStyle=function(v){var O=u;switch(v){case"D":case"S":O="S";break;case"F":O="f";break;case"FD":case"DF":O="B";break;case"f":case"f*":case"B":case"B*":O=v}return O},oo=m.close=function(){return Y("h"),this};m.stroke=function(){return Y("S"),this},m.fill=function(v){return cs("f",v),this},m.fillEvenOdd=function(v){return cs("f*",v),this},m.fillStroke=function(v){return cs("B",v),this},m.fillStrokeEvenOdd=function(v){return cs("B*",v),this};var cs=function(v,O){an(O)==="object"?ah(O,v):Y(v)},Mo=function(v){v===null||D===R&&v===void 0||(v=Fo(v),Y(v))};function Vu(v,O,X,ie,fe){var Ae=new gc(O||this.boundingBox,X||this.xStep,ie||this.yStep,this.gState,fe||this.matrix);Ae.stream=this.stream;var ke=v+"$$"+this.cloneIndex+++"$$";return br(ke,Ae),Ae}var ah=function(v,O){var X=Zt[v.key],ie=ot[X];if(ie instanceof Jl)Y("q"),Y(lh(O)),ie.gState&&m.setGState(ie.gState),Y(v.matrix.toString()+" cm"),Y("/"+X+" sh"),Y("Q");else if(ie instanceof gc){var fe=new ct(1,0,0,-1,0,ms());v.matrix&&(fe=fe.multiply(v.matrix||ls),X=Vu.call(ie,v.key,v.boundingBox,v.xStep,v.yStep,fe).id),Y("q"),Y("/Pattern cs"),Y("/"+X+" scn"),ie.gState&&m.setGState(ie.gState),Y(O),Y("Q")}},lh=function(v){switch(v){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},Ml=m.moveTo=function(v,O){return Y(E(P(v))+" "+E(J(O))+" m"),this},Bu=m.lineTo=function(v,O){return Y(E(P(v))+" "+E(J(O))+" l"),this},Pr=m.curveTo=function(v,O,X,ie,fe,Ae){return Y([E(P(v)),E(J(O)),E(P(X)),E(J(ie)),E(P(fe)),E(J(Ae)),"c"].join(" ")),this};m.__private__.line=m.line=function(v,O,X,ie,fe){if(isNaN(v)||isNaN(O)||isNaN(X)||isNaN(ie)||!Mt(fe))throw new Error("Invalid arguments passed to jsPDF.line");return D===k?this.lines([[X-v,ie-O]],v,O,[1,1],fe||"S"):this.lines([[X-v,ie-O]],v,O,[1,1]).stroke()},m.__private__.lines=m.lines=function(v,O,X,ie,fe,Ae){var ke,He,Ye,pt,xt,Ut,Xt,Dn,nn,qn,On,Hn;if(typeof v=="number"&&(Hn=X,X=O,O=v,v=Hn),ie=ie||[1,1],Ae=Ae||!1,isNaN(O)||isNaN(X)||!Array.isArray(v)||!Array.isArray(ie)||!Mt(fe)||typeof Ae!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Ml(O,X),ke=ie[0],He=ie[1],pt=v.length,qn=O,On=X,Ye=0;Ye<pt;Ye++)(xt=v[Ye]).length===2?(qn=xt[0]*ke+qn,On=xt[1]*He+On,Bu(qn,On)):(Ut=xt[0]*ke+qn,Xt=xt[1]*He+On,Dn=xt[2]*ke+qn,nn=xt[3]*He+On,qn=xt[4]*ke+qn,On=xt[5]*He+On,Pr(Ut,Xt,Dn,nn,qn,On));return Ae&&oo(),Mo(fe),this},m.path=function(v){for(var O=0;O<v.length;O++){var X=v[O],ie=X.c;switch(X.op){case"m":Ml(ie[0],ie[1]);break;case"l":Bu(ie[0],ie[1]);break;case"c":Pr.apply(this,ie);break;case"h":oo()}}return this},m.__private__.rect=m.rect=function(v,O,X,ie,fe){if(isNaN(v)||isNaN(O)||isNaN(X)||isNaN(ie)||!Mt(fe))throw new Error("Invalid arguments passed to jsPDF.rect");return D===k&&(ie=-ie),Y([E(P(v)),E(J(O)),E(P(X)),E(P(ie)),"re"].join(" ")),Mo(fe),this},m.__private__.triangle=m.triangle=function(v,O,X,ie,fe,Ae,ke){if(isNaN(v)||isNaN(O)||isNaN(X)||isNaN(ie)||isNaN(fe)||isNaN(Ae)||!Mt(ke))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[X-v,ie-O],[fe-X,Ae-ie],[v-fe,O-Ae]],v,O,[1,1],ke,!0),this},m.__private__.roundedRect=m.roundedRect=function(v,O,X,ie,fe,Ae,ke){if(isNaN(v)||isNaN(O)||isNaN(X)||isNaN(ie)||isNaN(fe)||isNaN(Ae)||!Mt(ke))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var He=4/3*(Math.SQRT2-1);return fe=Math.min(fe,.5*X),Ae=Math.min(Ae,.5*ie),this.lines([[X-2*fe,0],[fe*He,0,fe,Ae-Ae*He,fe,Ae],[0,ie-2*Ae],[0,Ae*He,-fe*He,Ae,-fe,Ae],[2*fe-X,0],[-fe*He,0,-fe,-Ae*He,-fe,-Ae],[0,2*Ae-ie],[0,-Ae*He,fe*He,-Ae,fe,-Ae]],v+fe,O,[1,1],ke,!0),this},m.__private__.ellipse=m.ellipse=function(v,O,X,ie,fe){if(isNaN(v)||isNaN(O)||isNaN(X)||isNaN(ie)||!Mt(fe))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Ae=4/3*(Math.SQRT2-1)*X,ke=4/3*(Math.SQRT2-1)*ie;return Ml(v+X,O),Pr(v+X,O-ke,v+Ae,O-ie,v,O-ie),Pr(v-Ae,O-ie,v-X,O-ke,v-X,O),Pr(v-X,O+ke,v-Ae,O+ie,v,O+ie),Pr(v+Ae,O+ie,v+X,O+ke,v+X,O),Mo(fe),this},m.__private__.circle=m.circle=function(v,O,X,ie){if(isNaN(v)||isNaN(O)||isNaN(X)||!Mt(ie))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(v,O,X,X,ie)},m.setFont=function(v,O,X){return X&&(O=j(O,X)),Ke=Ol(v,O,{disableWarning:!1}),this};var hs=m.__private__.getFont=m.getFont=function(){return It[Ol.apply(m,arguments)]};m.__private__.getFontList=m.getFontList=function(){var v,O,X={};for(v in At)if(At.hasOwnProperty(v))for(O in X[v]=[],At[v])At[v].hasOwnProperty(O)&&X[v].push(O);return X},m.addFont=function(v,O,X,ie,fe){var Ae=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Ae.indexOf(arguments[3])!==-1?fe=arguments[3]:arguments[3]&&Ae.indexOf(arguments[3])==-1&&(X=j(X,ie)),_a.call(this,v,O,X,fe=fe||"Identity-H")};var ao,Sa=t.lineWidth||.200025,zu=m.__private__.getLineWidth=m.getLineWidth=function(){return Sa},dt=m.__private__.setLineWidth=m.setLineWidth=function(v){return Sa=v,Y(E(P(v))+" w"),this};m.__private__.setLineDash=rt.API.setLineDash=rt.API.setLineDashPattern=function(v,O){if(v=v||[],O=O||0,isNaN(O)||!Array.isArray(v))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return v=v.map(function(X){return E(P(X))}).join(" "),O=E(P(O)),Y("["+v+"] "+O+" d"),this};var uh=m.__private__.getLineHeight=m.getLineHeight=function(){return Le*ao};m.__private__.getLineHeight=m.getLineHeight=function(){return Le*ao};var ch=m.__private__.setLineHeightFactor=m.setLineHeightFactor=function(v){return typeof(v=v||1.15)=="number"&&(ao=v),this},hh=m.__private__.getLineHeightFactor=m.getLineHeightFactor=function(){return ao};ch(t.lineHeight);var Ar=m.__private__.getHorizontalCoordinate=function(v){return P(v)},Ls=m.__private__.getVerticalCoordinate=function(v){return D===R?v:lt[K].mediaBox.topRightY-lt[K].mediaBox.bottomLeftY-P(v)},dh=m.__private__.getHorizontalCoordinateString=m.getHorizontalCoordinateString=function(v){return E(Ar(v))},Aa=m.__private__.getVerticalCoordinateString=m.getVerticalCoordinateString=function(v){return E(Ls(v))},Rs=t.strokeColor||"0 G";m.__private__.getStrokeColor=m.getDrawColor=function(){return Fi(Rs)},m.__private__.setStrokeColor=m.setDrawColor=function(v,O,X,ie){return Rs=li({ch1:v,ch2:O,ch3:X,ch4:ie,pdfColorType:"draw",precision:2}),Y(Rs),this};var Ea=t.fillColor||"0 g";m.__private__.getFillColor=m.getFillColor=function(){return Fi(Ea)},m.__private__.setFillColor=m.setFillColor=function(v,O,X,ie){return Ea=li({ch1:v,ch2:O,ch3:X,ch4:ie,pdfColorType:"fill",precision:2}),Y(Ea),this};var Vi=t.textColor||"0 g",Uo=m.__private__.getTextColor=m.getTextColor=function(){return Fi(Vi)};m.__private__.setTextColor=m.setTextColor=function(v,O,X,ie){return Vi=li({ch1:v,ch2:O,ch3:X,ch4:ie,pdfColorType:"text",precision:3}),this};var ds=t.charSpace,Ul=m.__private__.getCharSpace=m.getCharSpace=function(){return parseFloat(ds||0)};m.__private__.setCharSpace=m.setCharSpace=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return ds=v,this};var hn=0;m.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},m.__private__.setLineCap=m.setLineCap=function(v){var O=m.CapJoinStyles[v];if(O===void 0)throw new Error("Line cap style of '"+v+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return hn=O,Y(O+" J"),this};var Vl=0;m.__private__.setLineJoin=m.setLineJoin=function(v){var O=m.CapJoinStyles[v];if(O===void 0)throw new Error("Line join style of '"+v+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Vl=O,Y(O+" j"),this},m.__private__.setLineMiterLimit=m.__private__.setMiterLimit=m.setLineMiterLimit=m.setMiterLimit=function(v){if(v=v||0,isNaN(v))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return Y(E(P(v))+" M"),this},m.GState=Rm,m.setGState=function(v){(v=typeof v=="string"?ht[yt[v]]:qu(null,v)).equals(en)||(Y("/"+v.id+" gs"),en=v)};var qu=function(v,O){if(!v||!yt[v]){var X=!1;for(var ie in ht)if(ht.hasOwnProperty(ie)&&ht[ie].equals(O)){X=!0;break}if(X)O=ht[ie];else{var fe="GS"+(Object.keys(ht).length+1).toString(10);ht[fe]=O,O.id=fe}return v&&(yt[v]=O.id),jt.publish("addGState",O),O}};m.addGState=function(v,O){return qu(v,O),this},m.saveGraphicsState=function(){return Y("q"),wn.push({key:Ke,size:Le,color:Vi}),this},m.restoreGraphicsState=function(){Y("Q");var v=wn.pop();return Ke=v.key,Le=v.size,Vi=v.color,en=null,this},m.setCurrentTransformationMatrix=function(v){return Y(v.toString()+" cm"),this},m.comment=function(v){return Y("#"+v),this};var fs=function(v,O){var X=v||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return X},set:function(Ae){isNaN(Ae)||(X=parseFloat(Ae))}});var ie=O||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return ie},set:function(Ae){isNaN(Ae)||(ie=parseFloat(Ae))}});var fe="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return fe},set:function(Ae){fe=Ae.toString()}}),this},Ta=function(v,O,X,ie){fs.call(this,v,O),this.type="rect";var fe=X||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return fe},set:function(ke){isNaN(ke)||(fe=parseFloat(ke))}});var Ae=ie||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Ae},set:function(ke){isNaN(ke)||(Ae=parseFloat(ke))}}),this},Vo=function(){this.page=kt,this.currentPage=K,this.pages=Ne.slice(0),this.pagesContext=lt.slice(0),this.x=et,this.y=dn,this.matrix=Ft,this.width=ui(K),this.height=Hu(K),this.outputDestination=Pe,this.id="",this.objectNumber=-1};Vo.prototype.restore=function(){kt=this.page,K=this.currentPage,lt=this.pagesContext,Ne=this.pages,et=this.x,dn=this.y,Ft=this.matrix,Bl(K,this.width),ci(K,this.height),Pe=this.outputDestination};var lo=function(v,O,X,ie,fe){qr.push(new Vo),kt=K=0,Ne=[],et=v,dn=O,Ft=fe,Ui([X,ie])};for(var uo in m.beginFormObject=function(v,O,X,ie,fe){return lo(v,O,X,ie,fe),this},m.endFormObject=function(v){return function(O){if(as[O])qr.pop().restore();else{var X=new Vo,ie="Xo"+(Object.keys(Xn).length+1).toString(10);X.id=ie,as[O]=ie,Xn[ie]=X,jt.publish("addFormObject",X),qr.pop().restore()}}(v),this},m.doFormObject=function(v,O){var X=Xn[as[v]];return Y("q"),Y(O.toString()+" cm"),Y("/"+X.id+" Do"),Y("Q"),this},m.getFormObject=function(v){var O=Xn[as[v]];return{x:O.x,y:O.y,width:O.width,height:O.height,matrix:O.matrix}},m.save=function(v,O){return v=v||"generated.pdf",(O=O||{}).returnPromise=O.returnPromise||!1,O.returnPromise===!1?(Ql(Do(us()),v),typeof Ql.unload=="function"&&gt.setTimeout&&setTimeout(Ql.unload,911),this):new Promise(function(X,ie){try{var fe=Ql(Do(us()),v);typeof Ql.unload=="function"&&gt.setTimeout&&setTimeout(Ql.unload,911),X(fe)}catch(Ae){ie(Ae.message)}})},rt.API)rt.API.hasOwnProperty(uo)&&(uo==="events"&&rt.API.events.length?function(v,O){var X,ie,fe;for(fe=O.length-1;fe!==-1;fe--)X=O[fe][0],ie=O[fe][1],v.subscribe.apply(v,[X].concat(typeof ie=="function"?[ie]:ie))}(jt,rt.API.events):m[uo]=rt.API[uo]);function ui(v){return lt[v].mediaBox.topRightX-lt[v].mediaBox.bottomLeftX}function Bl(v,O){lt[v].mediaBox.topRightX=O+lt[v].mediaBox.bottomLeftX}function Hu(v){return lt[v].mediaBox.topRightY-lt[v].mediaBox.bottomLeftY}function ci(v,O){lt[v].mediaBox.topRightY=O+lt[v].mediaBox.bottomLeftY}var ps=m.getPageWidth=function(v){return ui(v=v||K)/wt},Ia=m.setPageWidth=function(v,O){Bl(v,O*wt)},ms=m.getPageHeight=function(v){return Hu(v=v||K)/wt},zl=m.setPageHeight=function(v,O){ci(v,O*wt)};return m.internal={pdfEscape:Sr,getStyle:Fo,getFont:hs,getFontSize:qe,getCharSpace:Ul,getTextColor:Uo,getLineHeight:uh,getLineHeightFactor:hh,getLineWidth:zu,write:Me,getHorizontalCoordinate:Ar,getVerticalCoordinate:Ls,getCoordinateString:dh,getVerticalCoordinateString:Aa,collections:{},newObject:kn,newAdditionalObject:Lo,newObjectDeferred:cr,newObjectDeferredBegin:Pn,getFilters:Wr,putStream:Zn,events:jt,scaleFactor:wt,pageSize:{getWidth:function(){return ps(K)},setWidth:function(v){Ia(K,v)},getHeight:function(){return ms(K)},setHeight:function(v){zl(K,v)}},encryptionOptions:c,encryption:fn,getEncryptor:function(v){return c!==null?fn.encryptor(v,0):function(O){return O}},output:Fl,getNumberOfPages:Dl,get pages(){return Ne},out:Y,f2:b,f3:S,getPageInfo:mr,getPageInfoByObjId:Oo,getCurrentPageInfo:Na,getPDFVersion:A,Point:fs,Rectangle:Ta,Matrix:ct,hasHotfix:Ni},Object.defineProperty(m.internal.pageSize,"width",{get:function(){return ps(K)},set:function(v){Ia(K,v)},enumerable:!0,configurable:!0}),Object.defineProperty(m.internal.pageSize,"height",{get:function(){return ms(K)},set:function(v){zl(K,v)},enumerable:!0,configurable:!0}),(function(v){for(var O=0,X=it.length;O<X;O++){var ie=_a.call(this,v[O][0],v[O][1],v[O][2],it[O][3],!0);g===!1&&(y[ie]=!0);var fe=v[O][0].split("-");Ll({id:ie,fontName:fe[0],fontStyle:fe[1]||""})}jt.publish("addFonts",{fonts:It,dictionary:At})}).call(m,it),Ke="F1",ba(i,n),jt.publish("initialized"),m}tc.prototype.lsbFirstWord=function(t){return String.fromCharCode(255&t,t>>8&255,t>>16&255,t>>24&255)},tc.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},tc.prototype.hexToBytes=function(t){for(var e=[],n=0;n<t.length;n+=2)e.push(String.fromCharCode(parseInt(t.substr(n,2),16)));return e.join("")},tc.prototype.processOwnerPassword=function(t,e){return $2(W2(e).substr(0,5),t)},tc.prototype.encryptor=function(t,e){var n=W2(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(r){return $2(n,r)}},Rm.prototype.equals=function(t){var e,n="id,objectNumber,equals";if(!t||an(t)!==an(this))return!1;var r=0;for(e in this)if(!(n.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;r++}for(e in t)t.hasOwnProperty(e)&&n.indexOf(e)<0&&r--;return r===0},rt.API={events:[]},rt.version="3.0.4";var Kn=rt.API,h5=1,Ou=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Qu=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},bt=function(t){return t.toFixed(2)},Wa=function(t){return t.toFixed(5)};Kn.__acroform__={};var Oi=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},zb=function(t){return t*h5},go=function(t){var e=new LE,n=Ge.internal.getHeight(t)||0,r=Ge.internal.getWidth(t)||0;return e.BBox=[0,0,Number(bt(r)),Number(bt(n))],e},GV=Kn.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|1<<e},KV=Kn.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&~(1<<e)},YV=Kn.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return t&1<<e?1:0},or=Kn.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return YV(t,e-1)},ar=Kn.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return GV(t,e-1)},lr=Kn.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return KV(t,e-1)},QV=Kn.__acroform__.calculateCoordinates=function(t,e){var n=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,i=t[0],s=t[1],o=t[2],a=t[3],l={};return l.lowerLeft_X=n(i)||0,l.lowerLeft_Y=r(s+a)||0,l.upperRight_X=n(i+o)||0,l.upperRight_Y=r(s)||0,[Number(bt(l.lowerLeft_X)),Number(bt(l.lowerLeft_Y)),Number(bt(l.upperRight_X)),Number(bt(l.upperRight_Y))]},JV=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],n=t._V||t.DV,r=G2(t,n),i=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+i+" "+bt(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var s=go(t);return s.scope=t.scope,s.stream=e.join(`
`),s}},G2=function(t,e){var n=t.fontSize===0?t.maxFontSize:t.fontSize,r={text:"",fontSize:""},i=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");i=t.multiline?i.map(function(b){return b.split(`
`)}):i.map(function(b){return[b]});var s=n,o=Ge.internal.getHeight(t)||0;o=o<0?-o:o;var a=Ge.internal.getWidth(t)||0;a=a<0?-a:a;var l=function(b,S,P){if(b+1<i.length){var J=S+" "+i[b+1][0];return hp(J,t,P).width<=a-4}return!1};s++;e:for(;s>0;){e="",s--;var u,c,g=hp("3",t,s).height,y=t.multiline?o-s:(o-g)/2,m=y+=2,N=0,A=0,C=0;if(s<=0){e=`(...) Tj
`,e+="% Width of Text: "+hp(e,t,s=12).width+", FieldWidth:"+a+`
`;break}for(var _="",k=0,R=0;R<i.length;R++)if(i.hasOwnProperty(R)){var D=!1;if(i[R].length!==1&&C!==i[R].length-1){if((g+2)*(k+2)+2>o)continue e;_+=i[R][C],D=!0,A=R,R--}else{_=(_+=i[R][C]+" ").substr(_.length-1)==" "?_.substr(0,_.length-1):_;var z=parseInt(R),Q=l(z,_,s),j=R>=i.length-1;if(Q&&!j){_+=" ",C=0;continue}if(Q||j){if(j)A=z;else if(t.multiline&&(g+2)*(k+2)+2>o)continue e}else{if(!t.multiline||(g+2)*(k+2)+2>o)continue e;A=z}}for(var E="",I=N;I<=A;I++){var F=i[I];if(t.multiline){if(I===A){E+=F[C]+" ",C=(C+1)%F.length;continue}if(I===N){E+=F[F.length-1]+" ";continue}}E+=F[0]+" "}switch(E=E.substr(E.length-1)==" "?E.substr(0,E.length-1):E,c=hp(E,t,s).width,t.textAlign){case"right":u=a-c-2;break;case"center":u=(a-c)/2;break;default:u=2}e+=bt(u)+" "+bt(m)+` Td
`,e+="("+Ou(E)+`) Tj
`,e+=-bt(u)+` 0 Td
`,m=-(s+2),c=0,N=D?A:A+1,k++,_=""}break}return r.text=e,r.fontSize=s,r},hp=function(t,e,n){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),i=e.scope.getStringUnitWidth(t,{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:i}},XV={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},ZV=function(t,e){var n={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(r){return r.type===n.type&&r.object===n.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(n)},eB=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(Xs.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(XV)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");h5=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new RE,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(n){n.internal.events.unsubscribe(n.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete n.internal.acroformPlugin.acroFormDictionaryRoot._eventID,n.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(n){n.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=n.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in r)if(r.hasOwnProperty(i)){var s=r[i];s.objId=void 0,s.hasAnnotation&&ZV(s,n)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(n){if(n.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");n.internal.write("/AcroForm "+n.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(n){(function(r,i){var s=!r;for(var o in r||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(o)){var a=r[o],l=[],u=a.Rect;if(a.Rect&&(a.Rect=QV(a.Rect,i)),i.internal.newObjectDeferredBegin(a.objId,!0),a.DA=Ge.createDefaultAppearanceStream(a),an(a)==="object"&&typeof a.getKeyValueListForStream=="function"&&(l=a.getKeyValueListForStream()),a.Rect=u,a.hasAppearanceStream&&!a.appearanceStreamContent){var c=JV(a);l.push({key:"AP",value:"<</N "+c+">>"}),i.internal.acroformPlugin.xForms.push(c)}if(a.appearanceStreamContent){var g="";for(var y in a.appearanceStreamContent)if(a.appearanceStreamContent.hasOwnProperty(y)){var m=a.appearanceStreamContent[y];if(g+="/"+y+" ",g+="<<",Object.keys(m).length>=1||Array.isArray(m)){for(var o in m)if(m.hasOwnProperty(o)){var N=m[o];typeof N=="function"&&(N=N.call(i,a)),g+="/"+o+" "+N+" ",i.internal.acroformPlugin.xForms.indexOf(N)>=0||i.internal.acroformPlugin.xForms.push(N)}}else typeof(N=m)=="function"&&(N=N.call(i,a)),g+="/"+o+" "+N,i.internal.acroformPlugin.xForms.indexOf(N)>=0||i.internal.acroformPlugin.xForms.push(N);g+=">>"}l.push({key:"AP",value:`<<
`+g+">>"})}i.internal.putStream({additionalKeyValues:l,objectId:a.objId}),i.internal.out("endobj")}s&&function(A,C){for(var _ in A)if(A.hasOwnProperty(_)){var k=_,R=A[_];C.internal.newObjectDeferredBegin(R.objId,!0),an(R)==="object"&&typeof R.putStream=="function"&&R.putStream(),delete A[k]}}(i.internal.acroformPlugin.xForms,i)})(n,t)}),t.internal.acroformPlugin.isInitialized=!0}},CE=Kn.__acroform__.arrayToPdfArray=function(t,e,n){var r=function(o){return o};if(Array.isArray(t)){for(var i="[",s=0;s<t.length;s++)switch(s!==0&&(i+=" "),an(t[s])){case"boolean":case"number":case"object":i+=t[s].toString();break;case"string":t[s].substr(0,1)!=="/"?(e!==void 0&&n&&(r=n.internal.getEncryptor(e)),i+="("+Ou(r(t[s].toString()))+")"):i+=t[s].toString()}return i+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},r1=function(t,e,n){var r=function(i){return i};return e!==void 0&&n&&(r=n.internal.getEncryptor(e)),(t=t||"").toString(),"("+Ou(r(t))+")"},bo=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};bo.prototype.toString=function(){return this.objId+" 0 R"},bo.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},bo.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var n in e)if(Object.getOwnPropertyDescriptor(this,e[n]).configurable===!1){var r=e[n],i=this[r];i&&(Array.isArray(i)?t.push({key:r,value:CE(i,this.objId,this.scope)}):i instanceof bo?(i.scope=this.scope,t.push({key:r,value:i.objId+" 0 R"})):typeof i!="function"&&t.push({key:r,value:i}))}return t};var LE=function(){bo.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(n){t=n.trim()},get:function(){return t||null}})};Oi(LE,bo);var RE=function(){bo.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var n=function(r){return r};return this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),"("+Ou(n(t))+")"}},set:function(n){t=n}})};Oi(RE,bo);var Xs=function t(){bo.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(_){if(isNaN(_))throw new Error('Invalid value "'+_+'" for attribute F supplied.');e=_}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!or(e,3)},set:function(_){_?this.F=ar(e,3):this.F=lr(e,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(_){if(isNaN(_))throw new Error('Invalid value "'+_+'" for attribute Ff supplied.');n=_}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(_){r=_!==void 0?_:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(_){r[0]=_}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(_){r[1]=_}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(_){r[2]=_}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(_){r[3]=_}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(_){switch(_){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=_;break;default:throw new Error('Invalid value "'+_+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof jm)return;s="FieldObject"+t.FieldNum++}var _=function(k){return k};return this.scope&&(_=this.scope.internal.getEncryptor(this.objId)),"("+Ou(_(s))+")"},set:function(_){s=_.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(_){s=_}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(_){o=_}});var a="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return a},set:function(_){a=_}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(_){l=_}});var u=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return u===void 0?50/h5:u},set:function(_){u=_}});var c="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return c},set:function(_){c=_}});var g="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!g||this instanceof jm||this instanceof au))return r1(g,this.objId,this.scope)},set:function(_){_=_.toString(),g=_}});var y=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(y)return this instanceof Ir==0?r1(y,this.objId,this.scope):y},set:function(_){_=_.toString(),y=this instanceof Ir==0?_.substr(0,1)==="("?Qu(_.substr(1,_.length-2)):Qu(_):_}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Ir==1?Qu(y.substr(1,y.length-1)):y},set:function(_){_=_.toString(),y=this instanceof Ir==1?"/"+_:_}});var m=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(m)return m},set:function(_){this.V=_}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(m)return this instanceof Ir==0?r1(m,this.objId,this.scope):m},set:function(_){_=_.toString(),m=this instanceof Ir==0?_.substr(0,1)==="("?Qu(_.substr(1,_.length-2)):Qu(_):_}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Ir==1?Qu(m.substr(1,m.length-1)):m},set:function(_){_=_.toString(),m=this instanceof Ir==1?"/"+_:_}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var N,A=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return A},set:function(_){_=!!_,A=_}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(N)return N},set:function(_){N=_}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!or(this.Ff,1)},set:function(_){_?this.Ff=ar(this.Ff,1):this.Ff=lr(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!or(this.Ff,2)},set:function(_){_?this.Ff=ar(this.Ff,2):this.Ff=lr(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!or(this.Ff,3)},set:function(_){_?this.Ff=ar(this.Ff,3):this.Ff=lr(this.Ff,3)}});var C=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(C!==null)return C},set:function(_){if([0,1,2].indexOf(_)===-1)throw new Error('Invalid value "'+_+'" for attribute Q supplied.');C=_}}),Object.defineProperty(this,"textAlign",{get:function(){var _;switch(C){case 0:default:_="left";break;case 1:_="center";break;case 2:_="right"}return _},configurable:!0,enumerable:!0,set:function(_){switch(_){case"right":case 2:C=2;break;case"center":case 1:C=1;break;default:C=0}}})};Oi(Xs,bo);var Tc=function(){Xs.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(n){t=n}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return CE(e,this.objId,this.scope)},set:function(n){var r,i;i=[],typeof(r=n)=="string"&&(i=function(s,o,a){a||(a=1);for(var l,u=[];l=o.exec(s);)u.push(l[a]);return u}(r,/\((.*?)\)/g)),e=i}}),this.getOptions=function(){return e},this.setOptions=function(n){e=n,this.sort&&e.sort()},this.addOption=function(n){n=(n=n||"").toString(),e.push(n),this.sort&&e.sort()},this.removeOption=function(n,r){for(r=r||!1,n=(n=n||"").toString();e.indexOf(n)!==-1&&(e.splice(e.indexOf(n),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!or(this.Ff,18)},set:function(n){n?this.Ff=ar(this.Ff,18):this.Ff=lr(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!or(this.Ff,19)},set:function(n){this.combo===!0&&(n?this.Ff=ar(this.Ff,19):this.Ff=lr(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!or(this.Ff,20)},set:function(n){n?(this.Ff=ar(this.Ff,20),e.sort()):this.Ff=lr(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!or(this.Ff,22)},set:function(n){n?this.Ff=ar(this.Ff,22):this.Ff=lr(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!or(this.Ff,23)},set:function(n){n?this.Ff=ar(this.Ff,23):this.Ff=lr(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!or(this.Ff,27)},set:function(n){n?this.Ff=ar(this.Ff,27):this.Ff=lr(this.Ff,27)}}),this.hasAppearanceStream=!1};Oi(Tc,Xs);var Ic=function(){Tc.call(this),this.fontName="helvetica",this.combo=!1};Oi(Ic,Tc);var kc=function(){Ic.call(this),this.combo=!0};Oi(kc,Ic);var Fp=function(){kc.call(this),this.edit=!0};Oi(Fp,kc);var Ir=function(){Xs.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!or(this.Ff,15)},set:function(n){n?this.Ff=ar(this.Ff,15):this.Ff=lr(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!or(this.Ff,16)},set:function(n){n?this.Ff=ar(this.Ff,16):this.Ff=lr(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!or(this.Ff,17)},set:function(n){n?this.Ff=ar(this.Ff,17):this.Ff=lr(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!or(this.Ff,26)},set:function(n){n?this.Ff=ar(this.Ff,26):this.Ff=lr(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(s){return s};if(this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var r,i=[];for(r in i.push("<<"),e)i.push("/"+r+" ("+Ou(n(e[r]))+")");return i.push(">>"),i.join(`
`)}},set:function(n){an(n)==="object"&&(e=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(n){typeof n=="string"&&(e.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(n){t="/"+n}})};Oi(Ir,Xs);var Mp=function(){Ir.call(this),this.pushButton=!0};Oi(Mp,Ir);var Pc=function(){Ir.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};Oi(Pc,Ir);var jm=function(){var t,e;Xs.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(i){e=i}});var n,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(a){return a};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var s,o=[];for(s in o.push("<<"),r)o.push("/"+s+" ("+Ou(i(r[s]))+")");return o.push(">>"),o.join(`
`)},set:function(i){an(i)==="object"&&(r=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(i){typeof i=="string"&&(r.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(i){n=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(i){n="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Ge.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Oi(jm,Xs),Pc.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var n=this.Kids[e];n.appearanceStreamContent=t.createAppearanceStream(n.optionName),n.caption=t.getCA()}},Pc.prototype.createOption=function(t){var e=new jm;return e.Parent=this,e.optionName=t,this.Kids.push(e),tB.call(this.scope,e),e};var Up=function(){Ir.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Ge.CheckBox.createAppearanceStream()};Oi(Up,Ir);var au=function(){Xs.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!or(this.Ff,13)},set:function(e){e?this.Ff=ar(this.Ff,13):this.Ff=lr(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!or(this.Ff,21)},set:function(e){e?this.Ff=ar(this.Ff,21):this.Ff=lr(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!or(this.Ff,23)},set:function(e){e?this.Ff=ar(this.Ff,23):this.Ff=lr(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!or(this.Ff,24)},set:function(e){e?this.Ff=ar(this.Ff,24):this.Ff=lr(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!or(this.Ff,25)},set:function(e){e?this.Ff=ar(this.Ff,25):this.Ff=lr(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!or(this.Ff,26)},set:function(e){e?this.Ff=ar(this.Ff,26):this.Ff=lr(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Oi(au,Xs);var Vp=function(){au.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!or(this.Ff,14)},set:function(t){t?this.Ff=ar(this.Ff,14):this.Ff=lr(this.Ff,14)}}),this.password=!0};Oi(Vp,au);var Ge={CheckBox:{createAppearanceStream:function(){return{N:{On:Ge.CheckBox.YesNormal},D:{On:Ge.CheckBox.YesPushDown,Off:Ge.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=go(t);e.scope=t.scope;var n=[],r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,i=t.scope.__private__.encodeColorString(t.color),s=G2(t,t.caption);return n.push("0.749023 g"),n.push("0 0 "+bt(Ge.internal.getWidth(t))+" "+bt(Ge.internal.getHeight(t))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+r+" "+bt(s.fontSize)+" Tf "+i),n.push("BT"),n.push(s.text),n.push("ET"),n.push("Q"),n.push("EMC"),e.stream=n.join(`
`),e},YesNormal:function(t){var e=go(t);e.scope=t.scope;var n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color),i=[],s=Ge.internal.getHeight(t),o=Ge.internal.getWidth(t),a=G2(t,t.caption);return i.push("1 g"),i.push("0 0 "+bt(o)+" "+bt(s)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+bt(o-1)+" "+bt(s-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+n+" "+bt(a.fontSize)+" Tf "+r),i.push(a.text),i.push("ET"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(t){var e=go(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+bt(Ge.internal.getWidth(t))+" "+bt(Ge.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:Ge.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=Ge.RadioButton.Circle.YesNormal,e.D[t]=Ge.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=go(t);e.scope=t.scope;var n=[],r=Ge.internal.getWidth(t)<=Ge.internal.getHeight(t)?Ge.internal.getWidth(t)/4:Ge.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Ge.internal.Bezier_C,s=Number((r*i).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+Wa(Ge.internal.getWidth(t)/2)+" "+Wa(Ge.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),n.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),n.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),n.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=go(t);e.scope=t.scope;var n=[],r=Ge.internal.getWidth(t)<=Ge.internal.getHeight(t)?Ge.internal.getWidth(t)/4:Ge.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*Ge.internal.Bezier_C).toFixed(5)),o=Number((r*Ge.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+Wa(Ge.internal.getWidth(t)/2)+" "+Wa(Ge.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),n.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),n.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),n.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+Wa(Ge.internal.getWidth(t)/2)+" "+Wa(Ge.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+o+" "+o+" "+r+" 0 "+r+" c"),n.push("-"+o+" "+r+" -"+r+" "+o+" -"+r+" 0 c"),n.push("-"+r+" -"+o+" -"+o+" -"+r+" 0 -"+r+" c"),n.push(o+" -"+r+" "+r+" -"+o+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=go(t);e.scope=t.scope;var n=[],r=Ge.internal.getWidth(t)<=Ge.internal.getHeight(t)?Ge.internal.getWidth(t)/4:Ge.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*Ge.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+Wa(Ge.internal.getWidth(t)/2)+" "+Wa(Ge.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),n.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),n.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),n.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:Ge.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=Ge.RadioButton.Cross.YesNormal,e.D[t]=Ge.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=go(t);e.scope=t.scope;var n=[],r=Ge.internal.calculateCross(t);return n.push("q"),n.push("1 1 "+bt(Ge.internal.getWidth(t)-2)+" "+bt(Ge.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(bt(r.x1.x)+" "+bt(r.x1.y)+" m"),n.push(bt(r.x2.x)+" "+bt(r.x2.y)+" l"),n.push(bt(r.x4.x)+" "+bt(r.x4.y)+" m"),n.push(bt(r.x3.x)+" "+bt(r.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=go(t);e.scope=t.scope;var n=Ge.internal.calculateCross(t),r=[];return r.push("0.749023 g"),r.push("0 0 "+bt(Ge.internal.getWidth(t))+" "+bt(Ge.internal.getHeight(t))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+bt(Ge.internal.getWidth(t)-2)+" "+bt(Ge.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(bt(n.x1.x)+" "+bt(n.x1.y)+" m"),r.push(bt(n.x2.x)+" "+bt(n.x2.y)+" l"),r.push(bt(n.x4.x)+" "+bt(n.x4.y)+" m"),r.push(bt(n.x3.x)+" "+bt(n.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=go(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+bt(Ge.internal.getWidth(t))+" "+bt(Ge.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+n}};Ge.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=Ge.internal.getWidth(t),n=Ge.internal.getHeight(t),r=Math.min(e,n);return{x1:{x:(e-r)/2,y:(n-r)/2+r},x2:{x:(e-r)/2+r,y:(n-r)/2},x3:{x:(e-r)/2,y:(n-r)/2},x4:{x:(e-r)/2+r,y:(n-r)/2+r}}}},Ge.internal.getWidth=function(t){var e=0;return an(t)==="object"&&(e=zb(t.Rect[2])),e},Ge.internal.getHeight=function(t){var e=0;return an(t)==="object"&&(e=zb(t.Rect[3])),e};var tB=Kn.addField=function(t){if(eB(this,t),!(t instanceof Xs))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};Kn.AcroFormChoiceField=Tc,Kn.AcroFormListBox=Ic,Kn.AcroFormComboBox=kc,Kn.AcroFormEditBox=Fp,Kn.AcroFormButton=Ir,Kn.AcroFormPushButton=Mp,Kn.AcroFormRadioButton=Pc,Kn.AcroFormCheckBox=Up,Kn.AcroFormTextField=au,Kn.AcroFormPasswordField=Vp,Kn.AcroFormAppearance=Ge,Kn.AcroForm={ChoiceField:Tc,ListBox:Ic,ComboBox:kc,EditBox:Fp,Button:Ir,PushButton:Mp,RadioButton:Pc,CheckBox:Up,TextField:au,PasswordField:Vp,Appearance:Ge},rt.AcroForm={ChoiceField:Tc,ListBox:Ic,ComboBox:kc,EditBox:Fp,Button:Ir,PushButton:Mp,RadioButton:Pc,CheckBox:Up,TextField:au,PasswordField:Vp,Appearance:Ge};rt.AcroForm;function jE(t){return t.reduce(function(e,n,r){return e[n]=r,e},{})}(function(t){var e="addImage_";t.__addimage__={};var n="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},i=t.__addimage__.getImageFileTypeByImageData=function(b,S){var P,J,le,we,xe,ne=n;if((S=S||n)==="RGBA"||b.data!==void 0&&b.data instanceof Uint8ClampedArray&&"height"in b&&"width"in b)return"RGBA";if(Q(b))for(xe in r)for(le=r[xe],P=0;P<le.length;P+=1){for(we=!0,J=0;J<le[P].length;J+=1)if(le[P][J]!==void 0&&le[P][J]!==b[J]){we=!1;break}if(we===!0){ne=xe;break}}else for(xe in r)for(le=r[xe],P=0;P<le.length;P+=1){for(we=!0,J=0;J<le[P].length;J+=1)if(le[P][J]!==void 0&&le[P][J]!==b.charCodeAt(J)){we=!1;break}if(we===!0){ne=xe;break}}return ne===n&&S!==n&&(ne=S),ne},s=function b(S){for(var P=this.internal.write,J=this.internal.putStream,le=(0,this.internal.getFilters)();le.indexOf("FlateEncode")!==-1;)le.splice(le.indexOf("FlateEncode"),1);S.objectId=this.internal.newObject();var we=[];if(we.push({key:"Type",value:"/XObject"}),we.push({key:"Subtype",value:"/Image"}),we.push({key:"Width",value:S.width}),we.push({key:"Height",value:S.height}),S.colorSpace===_.INDEXED?we.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(S.palette.length/3-1)+" "+("sMask"in S&&S.sMask!==void 0?S.objectId+2:S.objectId+1)+" 0 R]"}):(we.push({key:"ColorSpace",value:"/"+S.colorSpace}),S.colorSpace===_.DEVICE_CMYK&&we.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),we.push({key:"BitsPerComponent",value:S.bitsPerComponent}),"decodeParameters"in S&&S.decodeParameters!==void 0&&we.push({key:"DecodeParms",value:"<<"+S.decodeParameters+">>"}),"transparency"in S&&Array.isArray(S.transparency)&&S.transparency.length>0){for(var xe="",ne=0,ae=S.transparency.length;ne<ae;ne++)xe+=S.transparency[ne]+" "+S.transparency[ne]+" ";we.push({key:"Mask",value:"["+xe+"]"})}S.sMask!==void 0&&we.push({key:"SMask",value:S.objectId+1+" 0 R"});var _e=S.filter!==void 0?["/"+S.filter]:void 0;if(J({data:S.data,additionalKeyValues:we,alreadyAppliedFilters:_e,objectId:S.objectId}),P("endobj"),"sMask"in S&&S.sMask!==void 0){var ge,U=(ge=S.sMaskBitsPerComponent)!==null&&ge!==void 0?ge:S.bitsPerComponent,K={width:S.width,height:S.height,colorSpace:"DeviceGray",bitsPerComponent:U,data:S.sMask};"filter"in S&&(K.decodeParameters="/Predictor ".concat(S.predictor," /Colors 1 /BitsPerComponent ").concat(U," /Columns ").concat(S.width),K.filter=S.filter),b.call(this,K)}if(S.colorSpace===_.INDEXED){var W=this.internal.newObject();J({data:E(new Uint8Array(S.palette)),objectId:W}),P("endobj")}},o=function(){var b=this.internal.collections[e+"images"];for(var S in b)s.call(this,b[S])},a=function(){var b,S=this.internal.collections[e+"images"],P=this.internal.write;for(var J in S)P("/I"+(b=S[J]).index,b.objectId,"0","R")},l=function(){this.internal.collections[e+"images"]||(this.internal.collections[e+"images"]={},this.internal.events.subscribe("putResources",o),this.internal.events.subscribe("putXobjectDict",a))},u=function(){var b=this.internal.collections[e+"images"];return l.call(this),b},c=function(){return Object.keys(this.internal.collections[e+"images"]).length},g=function(b){return typeof t["process"+b.toUpperCase()]=="function"},y=function(b){return an(b)==="object"&&b.nodeType===1},m=function(b,S){if(b.nodeName==="IMG"&&b.hasAttribute("src")){var P=""+b.getAttribute("src");if(P.indexOf("data:image/")===0)return Op(unescape(P).split("base64,").pop());var J=t.loadFile(P,!0);if(J!==void 0)return J}if(b.nodeName==="CANVAS"){if(b.width===0||b.height===0)throw new Error("Given canvas must have data. Canvas width: "+b.width+", height: "+b.height);var le;switch(S){case"PNG":le="image/png";break;case"WEBP":le="image/webp";break;default:le="image/jpeg"}return Op(b.toDataURL(le,1).split("base64,").pop())}},N=function(b){var S=this.internal.collections[e+"images"];if(S){for(var P in S)if(b===S[P].alias)return S[P]}},A=function(b,S,P){return b||S||(b=-96,S=-96),b<0&&(b=-1*P.width*72/b/this.internal.scaleFactor),S<0&&(S=-1*P.height*72/S/this.internal.scaleFactor),b===0&&(b=S*P.width/P.height),S===0&&(S=b*P.height/P.width),[b,S]},C=function(b,S,P,J,le,we){var xe=A.call(this,P,J,le),ne=this.internal.getCoordinateString,ae=this.internal.getVerticalCoordinateString,_e=u.call(this);if(P=xe[0],J=xe[1],_e[le.index]=le,we){we*=Math.PI/180;var ge=Math.cos(we),U=Math.sin(we),K=function(te){return te.toFixed(4)},W=[K(ge),K(U),K(-1*U),K(ge),0,0,"cm"]}this.internal.write("q"),we?(this.internal.write([1,"0","0",1,ne(b),ae(S+J),"cm"].join(" ")),this.internal.write(W.join(" ")),this.internal.write([ne(P),"0","0",ne(J),"0","0","cm"].join(" "))):this.internal.write([ne(P),"0","0",ne(J),ne(b),ae(S+J),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+le.index+" Do"),this.internal.write("Q")},_=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var k=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},R=t.__addimage__.sHashCode=function(b){var S,P,J=0;if(typeof b=="string")for(P=b.length,S=0;S<P;S++)J=(J<<5)-J+b.charCodeAt(S),J|=0;else if(Q(b))for(P=b.byteLength/2,S=0;S<P;S++)J=(J<<5)-J+b[S],J|=0;return J},D=t.__addimage__.validateStringAsBase64=function(b){(b=b||"").toString().trim();var S=!0;return b.length===0&&(S=!1),b.length%4!=0&&(S=!1),/^[A-Za-z0-9+/]+$/.test(b.substr(0,b.length-2))===!1&&(S=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(b.substr(-2))===!1&&(S=!1),S},z=t.__addimage__.extractImageFromDataUrl=function(b){if(b==null||!(b=b.trim()).startsWith("data:"))return null;var S=b.indexOf(",");return S<0?null:b.substring(0,S).trim().endsWith("base64")?b.substring(S+1):null};t.__addimage__.isArrayBuffer=function(b){return b instanceof ArrayBuffer};var Q=t.__addimage__.isArrayBufferView=function(b){return b instanceof Int8Array||b instanceof Uint8Array||b instanceof Uint8ClampedArray||b instanceof Int16Array||b instanceof Uint16Array||b instanceof Int32Array||b instanceof Uint32Array||b instanceof Float32Array||b instanceof Float64Array},j=t.__addimage__.binaryStringToUint8Array=function(b){for(var S=b.length,P=new Uint8Array(S),J=0;J<S;J++)P[J]=b.charCodeAt(J);return P},E=t.__addimage__.arrayBufferToBinaryString=function(b){for(var S="",P=Q(b)?b:new Uint8Array(b),J=0;J<P.length;J+=8192)S+=String.fromCharCode.apply(null,P.subarray(J,J+8192));return S};t.addImage=function(){var b,S,P,J,le,we,xe,ne,ae;if(typeof arguments[1]=="number"?(S=n,P=arguments[1],J=arguments[2],le=arguments[3],we=arguments[4],xe=arguments[5],ne=arguments[6],ae=arguments[7]):(S=arguments[1],P=arguments[2],J=arguments[3],le=arguments[4],we=arguments[5],xe=arguments[6],ne=arguments[7],ae=arguments[8]),an(b=arguments[0])==="object"&&!y(b)&&"imageData"in b){var _e=b;b=_e.imageData,S=_e.format||S||n,P=_e.x||P||0,J=_e.y||J||0,le=_e.w||_e.width||le,we=_e.h||_e.height||we,xe=_e.alias||xe,ne=_e.compression||ne,ae=_e.rotation||_e.angle||ae}var ge=this.internal.getFilters();if(ne===void 0&&ge.indexOf("FlateEncode")!==-1&&(ne="SLOW"),isNaN(P)||isNaN(J))throw new Error("Invalid coordinates passed to jsPDF.addImage");l.call(this);var U=I.call(this,b,S,xe,ne);return C.call(this,P,J,le,we,U,ae),this};var I=function(b,S,P,J){var le,we,xe;if(typeof b=="string"&&i(b)===n){b=unescape(b);var ne=F(b,!1);(ne!==""||(ne=t.loadFile(b,!0))!==void 0)&&(b=ne)}if(y(b)&&(b=m(b,S)),S=i(b,S),!g(S))throw new Error("addImage does not support files of type '"+S+"', please ensure that a plugin for '"+S+"' support is added.");if(((xe=P)==null||xe.length===0)&&(P=function(ae){return typeof ae=="string"||Q(ae)?R(ae):Q(ae.data)?R(ae.data):null}(b)),(le=N.call(this,P))||(b instanceof Uint8Array||S==="RGBA"||(we=b,b=j(b)),le=this["process"+S.toUpperCase()](b,c.call(this),P,function(ae){return ae&&typeof ae=="string"&&(ae=ae.toUpperCase()),ae in t.image_compression?ae:k.NONE}(J),we)),!le)throw new Error("An unknown error occurred whilst processing the image.");return le},F=t.__addimage__.convertBase64ToBinaryString=function(b,S){S=typeof S!="boolean"||S;var P,J="";if(typeof b=="string"){var le;P=(le=z(b))!==null&&le!==void 0?le:b;try{J=Op(P)}catch(we){if(S)throw D(P)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+we.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return J};t.getImageProperties=function(b){var S,P,J="";if(y(b)&&(b=m(b)),typeof b=="string"&&i(b)===n&&((J=F(b,!1))===""&&(J=t.loadFile(b)||""),b=J),P=i(b),!g(P))throw new Error("addImage does not support files of type '"+P+"', please ensure that a plugin for '"+P+"' support is added.");if(b instanceof Uint8Array||(b=j(b)),!(S=this["process"+P.toUpperCase()](b)))throw new Error("An unknown error occurred whilst processing the image");return S.fileType=P,S}})(rt.API),function(t){var e=function(n){if(n!==void 0&&n!="")return!0};rt.API.events.push(["addPage",function(n){this.internal.getPageInfo(n.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(n){for(var r,i,s,o=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString,l=this.internal.getPageInfoByObjId(n.objId),u=n.pageContext.annotations,c=!1,g=0;g<u.length&&!c;g++)switch((r=u[g]).type){case"link":(e(r.options.url)||e(r.options.pageNumber))&&(c=!0);break;case"reference":case"text":case"freetext":c=!0}if(c!=0){this.internal.write("/Annots [");for(var y=0;y<u.length;y++){r=u[y];var m=this.internal.pdfEscape,N=this.internal.getEncryptor(n.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var A=this.internal.newAdditionalObject(),C=this.internal.newAdditionalObject(),_=this.internal.getEncryptor(A.objId),k=r.title||"Note";s="<</Type /Annot /Subtype /Text "+(i="/Rect ["+o(r.bounds.x)+" "+a(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y)+"] ")+"/Contents ("+m(_(r.contents))+")",s+=" /Popup "+C.objId+" 0 R",s+=" /P "+l.objId+" 0 R",s+=" /T ("+m(_(k))+") >>",A.content=s;var R=A.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+o(r.bounds.x+30)+" "+a(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w+30)+" "+a(r.bounds.y)+"] ")+" /Parent "+R,r.open&&(s+=" /Open true"),s+=" >>",C.content=s,this.internal.write(A.objId,"0 R",C.objId,"0 R");break;case"freetext":i="/Rect ["+o(r.bounds.x)+" "+a(r.bounds.y)+" "+o(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y+r.bounds.h)+"] ";var D=r.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+m(N(r.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+D+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(r.options.name){var z=this.annotations._nameMap[r.options.name];r.options.pageNumber=z.page,r.options.top=z.y}else r.options.top||(r.options.top=0);if(i="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",s="",r.options.url)s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+m(N(r.options.url))+") >>";else if(r.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,s+=" /FitV "+r.options.left+"]";break;default:var Q=a(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),s+=" /XYZ "+r.options.left+" "+Q+" "+r.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),t.createAnnotation=function(n){var r=this.internal.getCurrentPageInfo();switch(n.type){case"link":this.link(n.bounds.x,n.bounds.y,n.bounds.w,n.bounds.h,n);break;case"text":case"freetext":r.pageContext.annotations.push(n)}},t.link=function(n,r,i,s,o){var a=this.internal.getCurrentPageInfo(),l=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString;a.pageContext.annotations.push({finalBounds:{x:l(n),y:u(r),w:l(n+i),h:u(r+s)},options:o,type:"link"})},t.textWithLink=function(n,r,i,s){var o,a,l=this.getTextWidth(n),u=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){a=s.maxWidth;var c=this.splitTextToSize(n,a).length;o=Math.ceil(u*c)}else a=l,o=u;return this.text(n,r,i,s),i+=.2*u,s.align==="center"&&(r-=l/2),s.align==="right"&&(r-=l),this.link(r,i-u,a,o,s),l},t.getTextWidth=function(n){var r=this.internal.getFontSize();return this.getStringUnitWidth(n)*r/this.internal.scaleFactor}}(rt.API),function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];t.__arabicParser__={};var s=t.__arabicParser__.isInArabicSubstitutionA=function(A){return e[A.charCodeAt(0)]!==void 0},o=t.__arabicParser__.isArabicLetter=function(A){return typeof A=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(A)},a=t.__arabicParser__.isArabicEndLetter=function(A){return o(A)&&s(A)&&e[A.charCodeAt(0)].length<=2},l=t.__arabicParser__.isArabicAlfLetter=function(A){return o(A)&&i.indexOf(A.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(A){return o(A)&&s(A)&&e[A.charCodeAt(0)].length>=1};var u=t.__arabicParser__.arabicLetterHasFinalForm=function(A){return o(A)&&s(A)&&e[A.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(A){return o(A)&&s(A)&&e[A.charCodeAt(0)].length>=3};var c=t.__arabicParser__.arabicLetterHasMedialForm=function(A){return o(A)&&s(A)&&e[A.charCodeAt(0)].length==4},g=t.__arabicParser__.resolveLigatures=function(A){var C=0,_=n,k="",R=0;for(C=0;C<A.length;C+=1)_[A.charCodeAt(C)]!==void 0?(R++,typeof(_=_[A.charCodeAt(C)])=="number"&&(k+=String.fromCharCode(_),_=n,R=0),C===A.length-1&&(_=n,k+=A.charAt(C-(R-1)),C-=R-1,R=0)):(_=n,k+=A.charAt(C-R),C-=R,R=0);return k};t.__arabicParser__.isArabicDiacritic=function(A){return A!==void 0&&r[A.charCodeAt(0)]!==void 0};var y=t.__arabicParser__.getCorrectForm=function(A,C,_){return o(A)?s(A)===!1?-1:!u(A)||!o(C)&&!o(_)||!o(_)&&a(C)||a(A)&&!o(C)||a(A)&&l(C)||a(A)&&a(C)?0:c(A)&&o(C)&&!a(C)&&o(_)&&u(_)?3:a(A)||!o(_)?1:2:-1},m=function(A){var C=0,_=0,k=0,R="",D="",z="",Q=(A=A||"").split("\\s+"),j=[];for(C=0;C<Q.length;C+=1){for(j.push(""),_=0;_<Q[C].length;_+=1)R=Q[C][_],D=Q[C][_-1],z=Q[C][_+1],o(R)?(k=y(R,D,z),j[C]+=k!==-1?String.fromCharCode(e[R.charCodeAt(0)][k]):R):j[C]+=R;j[C]=g(j[C])}return j.join(" ")},N=t.__arabicParser__.processArabic=t.processArabic=function(){var A,C=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,_=[];if(Array.isArray(C)){var k=0;for(_=[],k=0;k<C.length;k+=1)Array.isArray(C[k])?_.push([m(C[k][0]),C[k][1],C[k][2]]):_.push([m(C[k])]);A=_}else A=m(C);return typeof arguments[0]=="string"?A:(arguments[0].text=A,arguments[0])};t.events.push(["preProcessText",N])}(rt.API),rt.API.autoPrint=function(t){var e;return(t=t||{}).variant=t.variant||"non-conform",t.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})),this},function(t){var e=function(){var n=void 0;Object.defineProperty(this,"pdf",{get:function(){return n},set:function(a){n=a}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(a){r=isNaN(a)||Number.isInteger(a)===!1||a<0?150:a,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(a){i=isNaN(a)||Number.isInteger(a)===!1||a<0?300:a,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(a){s=a}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(a){o=a}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(n,r){var i;if((n=n||"2d")!=="2d")return null;for(i in r)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=r[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(rt.API),function(t){var e={left:0,top:0,bottom:0,right:0},n=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var l=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return l},set:function(A){l=A}});var u=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return u},set:function(A){u=A}});var c=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return c},set:function(A){c=A}});var g=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return g},set:function(A){g=A}});var y=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return y},set:function(A){y=A}});var m=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return m},set:function(A){m=A}});var N=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return N},set:function(A){N=A}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(l){return r.call(this),this.internal.__cell__.headerFunction=typeof l=="function"?l:void 0,this},t.getTextDimensions=function(l,u){r.call(this);var c=(u=u||{}).fontSize||this.getFontSize(),g=u.font||this.getFont(),y=u.scaleFactor||this.internal.scaleFactor,m=0,N=0,A=0,C=this;if(!Array.isArray(l)&&typeof l!="string"){if(typeof l!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");l=String(l)}var _=u.maxWidth;_>0?typeof l=="string"?l=this.splitTextToSize(l,_):Object.prototype.toString.call(l)==="[object Array]"&&(l=l.reduce(function(R,D){return R.concat(C.splitTextToSize(D,_))},[])):l=Array.isArray(l)?l:[l];for(var k=0;k<l.length;k++)m<(A=this.getStringUnitWidth(l[k],{font:g})*c)&&(m=A);return m!==0&&(N=l.length),{w:m/=y,h:Math.max((N*c*this.getLineHeightFactor()-c*(this.getLineHeightFactor()-1))/y,0)}},t.cellAddPage=function(){r.call(this),this.addPage();var l=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new s(l.left,l.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=t.cell=function(){var l;l=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]),r.call(this);var u=this.internal.__cell__.lastCell,c=this.internal.__cell__.padding,g=this.internal.__cell__.margins||e,y=this.internal.__cell__.tableHeaderRow,m=this.internal.__cell__.printHeaders;return u.lineNumber!==void 0&&(u.lineNumber===l.lineNumber?(l.x=(u.x||0)+(u.width||0),l.y=u.y||0):u.y+u.height+l.height+g.bottom>this.getPageHeight()?(this.cellAddPage(),l.y=g.top,m&&y&&(this.printHeaderRow(l.lineNumber,!0),l.y+=y[0].height)):l.y=u.y+u.height||l.y),l.text[0]!==void 0&&(this.rect(l.x,l.y,l.width,l.height,n===!0?"FD":void 0),l.align==="right"?this.text(l.text,l.x+l.width-c,l.y+c,{align:"right",baseline:"top"}):l.align==="center"?this.text(l.text,l.x+l.width/2,l.y+c,{align:"center",baseline:"top",maxWidth:l.width-c-c}):this.text(l.text,l.x+c,l.y+c,{align:"left",baseline:"top",maxWidth:l.width-c-c})),this.internal.__cell__.lastCell=l,this};t.table=function(l,u,c,g,y){if(r.call(this),!c)throw new Error("No data for PDF table.");var m,N,A,C,_=[],k=[],R=[],D={},z={},Q=[],j=[],E=(y=y||{}).autoSize||!1,I=y.printHeaders!==!1,F=y.css&&y.css["font-size"]!==void 0?16*y.css["font-size"]:y.fontSize||12,b=y.margins||Object.assign({width:this.getPageWidth()},e),S=typeof y.padding=="number"?y.padding:3,P=y.headerBackgroundColor||"#c8c8c8",J=y.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=I,this.internal.__cell__.margins=b,this.internal.__cell__.table_font_size=F,this.internal.__cell__.padding=S,this.internal.__cell__.headerBackgroundColor=P,this.internal.__cell__.headerTextColor=J,this.setFontSize(F),g==null)k=_=Object.keys(c[0]),R=_.map(function(){return"left"});else if(Array.isArray(g)&&an(g[0])==="object")for(_=g.map(function(_e){return _e.name}),k=g.map(function(_e){return _e.prompt||_e.name||""}),R=g.map(function(_e){return _e.align||"left"}),m=0;m<g.length;m+=1)z[g[m].name]=.7499990551181103*g[m].width;else Array.isArray(g)&&typeof g[0]=="string"&&(k=_=g,R=_.map(function(){return"left"}));if(E||Array.isArray(g)&&typeof g[0]=="string")for(m=0;m<_.length;m+=1){for(D[C=_[m]]=c.map(function(_e){return _e[C]}),this.setFont(void 0,"bold"),Q.push(this.getTextDimensions(k[m],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),N=D[C],this.setFont(void 0,"normal"),A=0;A<N.length;A+=1)Q.push(this.getTextDimensions(N[A],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);z[C]=Math.max.apply(null,Q)+S+S,Q=[]}if(I){var le={};for(m=0;m<_.length;m+=1)le[_[m]]={},le[_[m]].text=k[m],le[_[m]].align=R[m];var we=a.call(this,le,z);j=_.map(function(_e){return new s(l,u,z[_e],we,le[_e].text,void 0,le[_e].align)}),this.setTableHeaderRow(j),this.printHeaderRow(1,!1)}var xe=g.reduce(function(_e,ge){return _e[ge.name]=ge.align,_e},{});for(m=0;m<c.length;m+=1){"rowStart"in y&&y.rowStart instanceof Function&&y.rowStart({row:m,data:c[m]},this);var ne=a.call(this,c[m],z);for(A=0;A<_.length;A+=1){var ae=c[m][_[A]];"cellStart"in y&&y.cellStart instanceof Function&&y.cellStart({row:m,col:A,data:ae},this),o.call(this,new s(l,u,z[_[A]],ne,ae,m+2,xe[_[A]]))}}return this.internal.__cell__.table_x=l,this.internal.__cell__.table_y=u,this};var a=function(l,u){var c=this.internal.__cell__.padding,g=this.internal.__cell__.table_font_size,y=this.internal.scaleFactor;return Object.keys(l).map(function(m){var N=l[m];return this.splitTextToSize(N.hasOwnProperty("text")?N.text:N,u[m]-c-c)},this).map(function(m){return this.getLineHeightFactor()*m.length*g/y+c+c},this).reduce(function(m,N){return Math.max(m,N)},0)};t.setTableHeaderRow=function(l){r.call(this),this.internal.__cell__.tableHeaderRow=l},t.printHeaderRow=function(l,u){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var c;if(n=!0,typeof this.internal.__cell__.headerFunction=="function"){var g=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(g[0],g[1],g[2],g[3],void 0,-1)}this.setFont(void 0,"bold");for(var y=[],m=0;m<this.internal.__cell__.tableHeaderRow.length;m+=1){c=this.internal.__cell__.tableHeaderRow[m].clone(),u&&(c.y=this.internal.__cell__.margins.top||0,y.push(c)),c.lineNumber=l;var N=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,c),this.setTextColor(N)}y.length>0&&this.setTableHeaderRow(y),this.setFont(void 0,"normal"),n=!1}}(rt.API);var DE={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},OE=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],K2=jE(OE),FE=[100,200,300,400,500,600,700,800,900],nB=jE(FE);function i1(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),n=function(s){return DE[s=s||"normal"]?s:"normal"}(t.style),r=function(s){return s?typeof s=="number"?s>=100&&s<=900&&s%100==0?s:400:/^\d00$/.test(s)?parseInt(s):s==="bold"?700:400:400}(t.weight),i=function(s){return typeof K2[s=s||"normal"]=="number"?s:"normal"}(t.stretch);return{family:e,style:n,weight:r,stretch:i,src:t.src||[],ref:t.ref||{name:e,style:[i,n,r].join(" ")}}}function qb(t,e,n,r){var i;for(i=n;i>=0&&i<e.length;i+=r)if(t[e[i]])return t[e[i]];for(i=n;i>=0&&i<e.length;i-=r)if(t[e[i]])return t[e[i]]}var rB={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},Hb={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function Wb(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function $b(t){return t.trimLeft()}function iB(t,e){for(var n=0;n<t.length;){if(t.charAt(n)===e)return[t.substring(0,n),t.substring(n+1)];n+=1}return null}function sB(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var dp,Gb,Kb,Ju,fp,Yb,Qb,Jb,s1=["times"];function Xb(t,e,n,r,i){var s=4,o=e4;switch(i){case rt.API.image_compression.FAST:s=1,o=Zb;break;case rt.API.image_compression.MEDIUM:s=6,o=t4;break;case rt.API.image_compression.SLOW:s=9,o=n4}t=function(l,u,c,g){for(var y,m=l.length/u,N=new Uint8Array(l.length+m),A=[oB,Zb,e4,t4,n4],C=0;C<m;C+=1){var _=C*u,k=l.subarray(_,_+u);if(g)N.set(g(k,c,y),_+C);else{for(var R=A.length,D=[],z=0;z<R;z+=1)D[z]=A[z](k,c,y);var Q=lB(D.concat());N.set(D[Q],_+C)}y=k}return N}(t,e,Math.ceil(n*r/8),o);var a=B2(t,{level:s});return rt.API.__addimage__.arrayBufferToBinaryString(a)}function oB(t){var e=Array.apply([],t);return e.unshift(0),e}function Zb(t,e){var n=t.length,r=[];r[0]=1;for(var i=0;i<n;i+=1){var s=t[i-e]||0;r[i+1]=t[i]-s+256&255}return r}function e4(t,e,n){var r=t.length,i=[];i[0]=2;for(var s=0;s<r;s+=1){var o=n&&n[s]||0;i[s+1]=t[s]-o+256&255}return i}function t4(t,e,n){var r=t.length,i=[];i[0]=3;for(var s=0;s<r;s+=1){var o=t[s-e]||0,a=n&&n[s]||0;i[s+1]=t[s]+256-(o+a>>>1)&255}return i}function n4(t,e,n){var r=t.length,i=[];i[0]=4;for(var s=0;s<r;s+=1){var o=aB(t[s-e]||0,n&&n[s]||0,n&&n[s-e]||0);i[s+1]=t[s]-o+256&255}return i}function aB(t,e,n){if(t===e&&e===n)return t;var r=Math.abs(e-n),i=Math.abs(t-n),s=Math.abs(t+e-n-n);return r<=i&&r<=s?t:i<=s?e:n}function lB(t){var e=t.map(function(n){return n.reduce(function(r,i){return r+Math.abs(i)},0)});return e.indexOf(Math.min.apply(null,e))}function o1(t,e,n){var r=e*n,i=Math.floor(r/8),s=16-(r-8*i+n),o=(1<<n)-1;return ME(t,i)>>s&o}function r4(t,e,n,r){var i=n*r,s=Math.floor(i/8),o=16-(i-8*s+r),a=(1<<r)-1,l=(e&a)<<o;(function(u,c,g){if(c+1<u.byteLength)u.setUint16(c,g,!1);else{var y=g>>8&255;u.setUint8(c,y)}})(t,s,ME(t,s)&~(a<<o)&65535|l)}function ME(t,e){return e+1<t.byteLength?t.getUint16(e,!1):t.getUint8(e)<<8}function uB(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var n=t[e++]|t[e++]<<8,r=t[e++]|t[e++]<<8,i=t[e++],s=i>>7,o=1<<1+(7&i);t[e++],t[e++];var a=null,l=null;s&&(a=e,l=o,e+=3*o);var u=!0,c=[],g=0,y=null,m=0,N=null;for(this.width=n,this.height=r;u&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,N=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((b=t[e++])>=0))throw Error("Invalid block size");if(b===0)break;e+=b}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var A=t[e++];g=t[e++]|t[e++]<<8,y=t[e++],1&A||(y=null),m=A>>2&7,e++;break;case 254:for(;;){if(!((b=t[e++])>=0))throw Error("Invalid block size");if(b===0)break;e+=b}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var C=t[e++]|t[e++]<<8,_=t[e++]|t[e++]<<8,k=t[e++]|t[e++]<<8,R=t[e++]|t[e++]<<8,D=t[e++],z=D>>6&1,Q=1<<1+(7&D),j=a,E=l,I=!1;D>>7&&(I=!0,j=e,E=Q,e+=3*Q);var F=e;for(e++;;){var b;if(!((b=t[e++])>=0))throw Error("Invalid block size");if(b===0)break;e+=b}c.push({x:C,y:_,width:k,height:R,has_local_palette:I,palette_offset:j,palette_size:E,data_offset:F,data_length:e-F,transparent_index:y,interlaced:!!z,delay:g,disposal:m});break;case 59:u=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return c.length},this.loopCount=function(){return N},this.frameInfo=function(S){if(S<0||S>=c.length)throw new Error("Frame index out of range.");return c[S]},this.decodeAndBlitFrameBGRA=function(S,P){var J=this.frameInfo(S),le=J.width*J.height,we=new Uint8Array(le);i4(t,J.data_offset,we,le);var xe=J.palette_offset,ne=J.transparent_index;ne===null&&(ne=256);var ae=J.width,_e=n-ae,ge=ae,U=4*(J.y*n+J.x),K=4*((J.y+J.height)*n+J.x),W=U,te=4*_e;J.interlaced===!0&&(te+=4*n*7);for(var re=8,$=0,ue=we.length;$<ue;++$){var he=we[$];if(ge===0&&(ge=ae,(W+=te)>=K&&(te=4*_e+4*n*(re-1),W=U+(ae+_e)*(re<<1),re>>=1)),he===ne)W+=4;else{var de=t[xe+3*he],Ne=t[xe+3*he+1],Re=t[xe+3*he+2];P[W++]=Re,P[W++]=Ne,P[W++]=de,P[W++]=255}--ge}},this.decodeAndBlitFrameRGBA=function(S,P){var J=this.frameInfo(S),le=J.width*J.height,we=new Uint8Array(le);i4(t,J.data_offset,we,le);var xe=J.palette_offset,ne=J.transparent_index;ne===null&&(ne=256);var ae=J.width,_e=n-ae,ge=ae,U=4*(J.y*n+J.x),K=4*((J.y+J.height)*n+J.x),W=U,te=4*_e;J.interlaced===!0&&(te+=4*n*7);for(var re=8,$=0,ue=we.length;$<ue;++$){var he=we[$];if(ge===0&&(ge=ae,(W+=te)>=K&&(te=4*_e+4*n*(re-1),W=U+(ae+_e)*(re<<1),re>>=1)),he===ne)W+=4;else{var de=t[xe+3*he],Ne=t[xe+3*he+1],Re=t[xe+3*he+2];P[W++]=de,P[W++]=Ne,P[W++]=Re,P[W++]=255}--ge}}}function i4(t,e,n,r){for(var i=t[e++],s=1<<i,o=s+1,a=o+1,l=i+1,u=(1<<l)-1,c=0,g=0,y=0,m=t[e++],N=new Int32Array(4096),A=null;;){for(;c<16&&m!==0;)g|=t[e++]<<c,c+=8,m===1?m=t[e++]:--m;if(c<l)break;var C=g&u;if(g>>=l,c-=l,C!==s){if(C===o)break;for(var _=C<a?C:A,k=0,R=_;R>s;)R=N[R]>>8,++k;var D=R;if(y+k+(_!==C?1:0)>r)return void gn.log("Warning, gif stream longer than expected.");n[y++]=D;var z=y+=k;for(_!==C&&(n[y++]=D),R=_;k--;)R=N[R],n[--z]=255&R,R>>=8;A!==null&&a<4096&&(N[a++]=A<<8|D,a>=u+1&&l<12&&(++l,u=u<<1|1)),A=C}else a=o+1,u=(1<<(l=i+1))-1,A=null}return y!==r&&gn.log("Warning, gif stream shorter than expected."),n}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function a1(t){var e,n,r,i,s,o=Math.floor,a=new Array(64),l=new Array(64),u=new Array(64),c=new Array(64),g=new Array(65535),y=new Array(65535),m=new Array(64),N=new Array(64),A=[],C=0,_=7,k=new Array(64),R=new Array(64),D=new Array(64),z=new Array(256),Q=new Array(2048),j=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],E=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],I=[0,1,2,3,4,5,6,7,8,9,10,11],F=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],b=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],S=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],P=[0,1,2,3,4,5,6,7,8,9,10,11],J=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],le=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function we(U,K){for(var W=0,te=0,re=new Array,$=1;$<=16;$++){for(var ue=1;ue<=U[$];ue++)re[K[te]]=[],re[K[te]][0]=W,re[K[te]][1]=$,te++,W++;W*=2}return re}function xe(U){for(var K=U[0],W=U[1]-1;W>=0;)K&1<<W&&(C|=1<<_),W--,--_<0&&(C==255?(ne(255),ne(0)):ne(C),_=7,C=0)}function ne(U){A.push(U)}function ae(U){ne(U>>8&255),ne(255&U)}function _e(U,K,W,te,re){for(var $,ue=re[0],he=re[240],de=function(Le,st){var qe,at,tt,Wt,Rt,Ze,ft,Pt,Ke,wt,et=0;for(Ke=0;Ke<8;++Ke){qe=Le[et],at=Le[et+1],tt=Le[et+2],Wt=Le[et+3],Rt=Le[et+4],Ze=Le[et+5],ft=Le[et+6];var dn=qe+(Pt=Le[et+7]),Ft=qe-Pt,It=at+ft,At=at-ft,wn=tt+Ze,ot=tt-Ze,Zt=Wt+Rt,ht=Wt-Rt,yt=dn+Zt,en=dn-Zt,kt=It+wn,lt=It-wn;Le[et]=yt+kt,Le[et+4]=yt-kt;var jt=.707106781*(lt+en);Le[et+2]=en+jt,Le[et+6]=en-jt;var eo=.382683433*((yt=ht+ot)-(lt=At+Ft)),Xn=.5411961*yt+eo,as=1.306562965*lt+eo,qr=.707106781*(kt=ot+At),ct=Ft+qr,Nn=Ft-qr;Le[et+5]=Nn+Xn,Le[et+3]=Nn-Xn,Le[et+1]=ct+as,Le[et+7]=ct-as,et+=8}for(et=0,Ke=0;Ke<8;++Ke){qe=Le[et],at=Le[et+8],tt=Le[et+16],Wt=Le[et+24],Rt=Le[et+32],Ze=Le[et+40],ft=Le[et+48];var ls=qe+(Pt=Le[et+56]),br=qe-Pt,Nr=at+ft,kn=at-ft,cr=tt+Ze,Pn=tt-Ze,Lo=Wt+Rt,to=Wt-Rt,Hr=ls+Lo,Fi=ls-Lo,li=Nr+cr,Wr=Nr-cr;Le[et]=Hr+li,Le[et+32]=Hr-li;var Zn=.707106781*(Wr+Fi);Le[et+16]=Fi+Zn,Le[et+48]=Fi-Zn;var no=.382683433*((Hr=to+Pn)-(Wr=kn+br)),Mi=.5411961*Hr+no,Cs=1.306562965*Wr+no,ro=.707106781*(li=Pn+kn),Ro=br+ro,jo=br-ro;Le[et+40]=jo+Mi,Le[et+24]=jo-Mi,Le[et+8]=Ro+Cs,Le[et+56]=Ro-Cs,et++}for(Ke=0;Ke<64;++Ke)wt=Le[Ke]*st[Ke],m[Ke]=wt>0?wt+.5|0:wt-.5|0;return m}(U,K),Ne=0;Ne<64;++Ne)N[j[Ne]]=de[Ne];var Re=N[0]-W;W=N[0],Re==0?xe(te[0]):(xe(te[y[$=32767+Re]]),xe(g[$]));for(var Pe=63;Pe>0&&N[Pe]==0;)Pe--;if(Pe==0)return xe(ue),W;for(var ze,Y=1;Y<=Pe;){for(var Me=Y;N[Y]==0&&Y<=Pe;)++Y;var _t=Y-Me;if(_t>=16){ze=_t>>4;for(var it=1;it<=ze;++it)xe(he);_t&=15}$=32767+N[Y],xe(re[(_t<<4)+y[$]]),xe(g[$]),Y++}return Pe!=63&&xe(ue),W}function ge(U){U=Math.min(Math.max(U,1),100),s!=U&&(function(K){for(var W=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],te=0;te<64;te++){var re=o((W[te]*K+50)/100);re=Math.min(Math.max(re,1),255),a[j[te]]=re}for(var $=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],ue=0;ue<64;ue++){var he=o(($[ue]*K+50)/100);he=Math.min(Math.max(he,1),255),l[j[ue]]=he}for(var de=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Ne=0,Re=0;Re<8;Re++)for(var Pe=0;Pe<8;Pe++)u[Ne]=1/(a[j[Ne]]*de[Re]*de[Pe]*8),c[Ne]=1/(l[j[Ne]]*de[Re]*de[Pe]*8),Ne++}(U<50?Math.floor(5e3/U):Math.floor(200-2*U)),s=U)}this.encode=function(U,K){K&&ge(K),A=new Array,C=0,_=7,ae(65496),ae(65504),ae(16),ne(74),ne(70),ne(73),ne(70),ne(0),ne(1),ne(1),ne(0),ae(1),ae(1),ne(0),ne(0),function(){ae(65499),ae(132),ne(0);for(var at=0;at<64;at++)ne(a[at]);ne(1);for(var tt=0;tt<64;tt++)ne(l[tt])}(),function(at,tt){ae(65472),ae(17),ne(8),ae(tt),ae(at),ne(3),ne(1),ne(17),ne(0),ne(2),ne(17),ne(1),ne(3),ne(17),ne(1)}(U.width,U.height),function(){ae(65476),ae(418),ne(0);for(var at=0;at<16;at++)ne(E[at+1]);for(var tt=0;tt<=11;tt++)ne(I[tt]);ne(16);for(var Wt=0;Wt<16;Wt++)ne(F[Wt+1]);for(var Rt=0;Rt<=161;Rt++)ne(b[Rt]);ne(1);for(var Ze=0;Ze<16;Ze++)ne(S[Ze+1]);for(var ft=0;ft<=11;ft++)ne(P[ft]);ne(17);for(var Pt=0;Pt<16;Pt++)ne(J[Pt+1]);for(var Ke=0;Ke<=161;Ke++)ne(le[Ke])}(),ae(65498),ae(12),ne(3),ne(1),ne(0),ne(2),ne(17),ne(3),ne(17),ne(0),ne(63),ne(0);var W=0,te=0,re=0;C=0,_=7,this.encode.displayName="_encode_";for(var $,ue,he,de,Ne,Re,Pe,ze,Y,Me=U.data,_t=U.width,it=U.height,Le=4*_t,st=0;st<it;){for($=0;$<Le;){for(Ne=Le*st+$,Pe=-1,ze=0,Y=0;Y<64;Y++)Re=Ne+(ze=Y>>3)*Le+(Pe=4*(7&Y)),st+ze>=it&&(Re-=Le*(st+1+ze-it)),$+Pe>=Le&&(Re-=$+Pe-Le+4),ue=Me[Re++],he=Me[Re++],de=Me[Re++],k[Y]=(Q[ue]+Q[he+256|0]+Q[de+512|0]>>16)-128,R[Y]=(Q[ue+768|0]+Q[he+1024|0]+Q[de+1280|0]>>16)-128,D[Y]=(Q[ue+1280|0]+Q[he+1536|0]+Q[de+1792|0]>>16)-128;W=_e(k,u,W,e,r),te=_e(R,c,te,n,i),re=_e(D,c,re,n,i),$+=32}st+=8}if(_>=0){var qe=[];qe[1]=_+1,qe[0]=(1<<_+1)-1,xe(qe)}return ae(65497),new Uint8Array(A)},t=t||50,function(){for(var U=String.fromCharCode,K=0;K<256;K++)z[K]=U(K)}(),e=we(E,I),n=we(S,P),r=we(F,b),i=we(J,le),function(){for(var U=1,K=2,W=1;W<=15;W++){for(var te=U;te<K;te++)y[32767+te]=W,g[32767+te]=[],g[32767+te][1]=W,g[32767+te][0]=te;for(var re=-(K-1);re<=-U;re++)y[32767+re]=W,g[32767+re]=[],g[32767+re][1]=W,g[32767+re][0]=K-1+re;U<<=1,K<<=1}}(),function(){for(var U=0;U<256;U++)Q[U]=19595*U,Q[U+256|0]=38470*U,Q[U+512|0]=7471*U+32768,Q[U+768|0]=-11059*U,Q[U+1024|0]=-21709*U,Q[U+1280|0]=32768*U+8421375,Q[U+1536|0]=-27439*U,Q[U+1792|0]=-5329*U}(),ge(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Us(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function s4(t){function e(I){if(!I)throw Error("assert :P")}function n(I,F,b){for(var S=0;4>S;S++)if(I[F+S]!=b.charCodeAt(S))return!0;return!1}function r(I,F,b,S,P){for(var J=0;J<P;J++)I[F+J]=b[S+J]}function i(I,F,b,S){for(var P=0;P<S;P++)I[F+P]=b}function s(I){return new Int32Array(I)}function o(I,F){for(var b=[],S=0;S<I;S++)b.push(new F);return b}function a(I,F){var b=[];return function S(P,J,le){for(var we=le[J],xe=0;xe<we&&(P.push(le.length>J+1?[]:new F),!(le.length<J+1));xe++)S(P[xe],J+1,le)}(b,0,I),b}var l=function(){var I=this;function F(h,p){for(var w=1<<p-1>>>0;h&w;)w>>>=1;return w?(h&w-1)+w:h}function b(h,p,w,T,M){e(!(T%w));do h[p+(T-=w)]=M;while(0<T)}function S(h,p,w,T,M){if(e(2328>=M),512>=M)var V=s(512);else if((V=s(M))==null)return 0;return function(B,q,G,Z,oe,ve){var ee,ce,me=q,Se=1<<G,ye=s(16),Ee=s(16);for(e(oe!=0),e(Z!=null),e(B!=null),e(0<G),ce=0;ce<oe;++ce){if(15<Z[ce])return 0;++ye[Z[ce]]}if(ye[0]==oe)return 0;for(Ee[1]=0,ee=1;15>ee;++ee){if(ye[ee]>1<<ee)return 0;Ee[ee+1]=Ee[ee]+ye[ee]}for(ce=0;ce<oe;++ce)ee=Z[ce],0<Z[ce]&&(ve[Ee[ee]++]=ce);if(Ee[15]==1)return(Z=new P).g=0,Z.value=ve[0],b(B,me,1,Se,Z),Se;var Te,De=-1,Ce=Se-1,nt=0,$e=1,Ct=1,Je=1<<G;for(ce=0,ee=1,oe=2;ee<=G;++ee,oe<<=1){if($e+=Ct<<=1,0>(Ct-=ye[ee]))return 0;for(;0<ye[ee];--ye[ee])(Z=new P).g=ee,Z.value=ve[ce++],b(B,me+nt,oe,Je,Z),nt=F(nt,ee)}for(ee=G+1,oe=2;15>=ee;++ee,oe<<=1){if($e+=Ct<<=1,0>(Ct-=ye[ee]))return 0;for(;0<ye[ee];--ye[ee]){if(Z=new P,(nt&Ce)!=De){for(me+=Je,Te=1<<(De=ee)-G;15>De&&!(0>=(Te-=ye[De]));)++De,Te<<=1;Se+=Je=1<<(Te=De-G),B[q+(De=nt&Ce)].g=Te+G,B[q+De].value=me-q-De}Z.g=ee-G,Z.value=ve[ce++],b(B,me+(nt>>G),oe,Je,Z),nt=F(nt,ee)}}return $e!=2*Ee[15]-1?0:Se}(h,p,w,T,M,V)}function P(){this.value=this.g=0}function J(){this.value=this.g=0}function le(){this.G=o(5,P),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(ql,J)}function we(h,p,w,T){e(h!=null),e(p!=null),e(2147483648>T),h.Ca=254,h.I=0,h.b=-8,h.Ka=0,h.oa=p,h.pa=w,h.Jd=p,h.Yc=w+T,h.Zc=4<=T?w+T-4+1:w,ue(h)}function xe(h,p){for(var w=0;0<p--;)w|=de(h,128)<<p;return w}function ne(h,p){var w=xe(h,p);return he(h)?-w:w}function ae(h,p,w,T){var M,V=0;for(e(h!=null),e(p!=null),e(4294967288>T),h.Sb=T,h.Ra=0,h.u=0,h.h=0,4<T&&(T=4),M=0;M<T;++M)V+=p[w+M]<<8*M;h.Ra=V,h.bb=T,h.oa=p,h.pa=w}function _e(h){for(;8<=h.u&&h.bb<h.Sb;)h.Ra>>>=8,h.Ra+=h.oa[h.pa+h.bb]<<Pa-8>>>0,++h.bb,h.u-=8;te(h)&&(h.h=1,h.u=0)}function ge(h,p){if(e(0<=p),!h.h&&p<=qi){var w=W(h)&zi[p];return h.u+=p,_e(h),w}return h.h=1,h.u=0}function U(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function K(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function W(h){return h.Ra>>>(h.u&Pa-1)>>>0}function te(h){return e(h.bb<=h.Sb),h.h||h.bb==h.Sb&&h.u>Pa}function re(h,p){h.u=p,h.h=te(h)}function $(h){h.u>=Bo&&(e(h.u>=Bo),_e(h))}function ue(h){e(h!=null&&h.oa!=null),h.pa<h.Zc?(h.I=(h.oa[h.pa++]|h.I<<8)>>>0,h.b+=8):(e(h!=null&&h.oa!=null),h.pa<h.Yc?(h.b+=8,h.I=h.oa[h.pa++]|h.I<<8):h.Ka?h.b=0:(h.I<<=8,h.b+=8,h.Ka=1))}function he(h){return xe(h,1)}function de(h,p){var w=h.Ca;0>h.b&&ue(h);var T=h.b,M=w*p>>>8,V=(h.I>>>T>M)+0;for(V?(w-=M,h.I-=M+1<<T>>>0):w=M+1,T=w,M=0;256<=T;)M+=8,T>>=8;return T=7^M+Ca[T],h.b-=T,h.Ca=(w<<T)-1,V}function Ne(h,p,w){h[p+0]=w>>24&255,h[p+1]=w>>16&255,h[p+2]=w>>8&255,h[p+3]=255&w}function Re(h,p){return h[p+0]|h[p+1]<<8}function Pe(h,p){return Re(h,p)|h[p+2]<<16}function ze(h,p){return Re(h,p)|Re(h,p+2)<<16}function Y(h,p){var w=1<<p;return e(h!=null),e(0<p),h.X=s(w),h.X==null?0:(h.Mb=32-p,h.Xa=p,1)}function Me(h,p){e(h!=null),e(p!=null),e(h.Xa==p.Xa),r(p.X,0,h.X,0,1<<p.Xa)}function _t(){this.X=[],this.Xa=this.Mb=0}function it(h,p,w,T){e(w!=null),e(T!=null);var M=w[0],V=T[0];return M==0&&(M=(h*V+p/2)/p),V==0&&(V=(p*M+h/2)/h),0>=M||0>=V?0:(w[0]=M,T[0]=V,1)}function Le(h,p){return h+(1<<p)-1>>>p}function st(h,p){return((4278255360&h)+(4278255360&p)>>>0&4278255360)+((16711935&h)+(16711935&p)>>>0&16711935)>>>0}function qe(h,p){I[p]=function(w,T,M,V,B,q,G){var Z;for(Z=0;Z<B;++Z){var oe=I[h](q[G+Z-1],M,V+Z);q[G+Z]=st(w[T+Z],oe)}}}function at(){this.ud=this.hd=this.jd=0}function tt(h,p){return((4278124286&(h^p))>>>1)+(h&p)>>>0}function Wt(h){return 0<=h&&256>h?h:0>h?0:255<h?255:void 0}function Rt(h,p){return Wt(h+(h-p+.5>>1))}function Ze(h,p,w){return Math.abs(p-w)-Math.abs(h-w)}function ft(h,p,w,T,M,V,B){for(T=V[B-1],w=0;w<M;++w)V[B+w]=T=st(h[p+w],T)}function Pt(h,p,w,T,M){var V;for(V=0;V<w;++V){var B=h[p+V],q=B>>8&255,G=16711935&(G=(G=16711935&B)+((q<<16)+q));T[M+V]=(4278255360&B)+G>>>0}}function Ke(h,p){p.jd=255&h,p.hd=h>>8&255,p.ud=h>>16&255}function wt(h,p,w,T,M,V){var B;for(B=0;B<T;++B){var q=p[w+B],G=q>>>8,Z=q,oe=255&(oe=(oe=q>>>16)+((h.jd<<24>>24)*(G<<24>>24)>>>5));Z=255&(Z=(Z+=(h.hd<<24>>24)*(G<<24>>24)>>>5)+((h.ud<<24>>24)*(oe<<24>>24)>>>5)),M[V+B]=(4278255360&q)+(oe<<16)+Z}}function et(h,p,w,T,M){I[p]=function(V,B,q,G,Z,oe,ve,ee,ce){for(G=ve;G<ee;++G)for(ve=0;ve<ce;++ve)Z[oe++]=M(q[T(V[B++])])},I[h]=function(V,B,q,G,Z,oe,ve){var ee=8>>V.b,ce=V.Ea,me=V.K[0],Se=V.w;if(8>ee)for(V=(1<<V.b)-1,Se=(1<<ee)-1;B<q;++B){var ye,Ee=0;for(ye=0;ye<ce;++ye)ye&V||(Ee=T(G[Z++])),oe[ve++]=M(me[Ee&Se]),Ee>>=ee}else I["VP8LMapColor"+w](G,Z,me,Se,oe,ve,B,q,ce)}}function dn(h,p,w,T,M){for(w=p+w;p<w;){var V=h[p++];T[M++]=V>>16&255,T[M++]=V>>8&255,T[M++]=255&V}}function Ft(h,p,w,T,M){for(w=p+w;p<w;){var V=h[p++];T[M++]=V>>16&255,T[M++]=V>>8&255,T[M++]=255&V,T[M++]=V>>24&255}}function It(h,p,w,T,M){for(w=p+w;p<w;){var V=(B=h[p++])>>16&240|B>>12&15,B=240&B|B>>28&15;T[M++]=V,T[M++]=B}}function At(h,p,w,T,M){for(w=p+w;p<w;){var V=(B=h[p++])>>16&248|B>>13&7,B=B>>5&224|B>>3&31;T[M++]=V,T[M++]=B}}function wn(h,p,w,T,M){for(w=p+w;p<w;){var V=h[p++];T[M++]=255&V,T[M++]=V>>8&255,T[M++]=V>>16&255}}function ot(h,p,w,T,M,V){if(V==0)for(w=p+w;p<w;)Ne(T,((V=h[p++])[0]>>24|V[1]>>8&65280|V[2]<<8&16711680|V[3]<<24)>>>0),M+=32;else r(T,M,h,p,w)}function Zt(h,p){I[p][0]=I[h+"0"],I[p][1]=I[h+"1"],I[p][2]=I[h+"2"],I[p][3]=I[h+"3"],I[p][4]=I[h+"4"],I[p][5]=I[h+"5"],I[p][6]=I[h+"6"],I[p][7]=I[h+"7"],I[p][8]=I[h+"8"],I[p][9]=I[h+"9"],I[p][10]=I[h+"10"],I[p][11]=I[h+"11"],I[p][12]=I[h+"12"],I[p][13]=I[h+"13"],I[p][14]=I[h+"0"],I[p][15]=I[h+"0"]}function ht(h){return h==Rg||h==jg||h==Sf||h==Dg}function yt(){this.eb=[],this.size=this.A=this.fb=0}function en(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function kt(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new yt,this.f.kb=new en,this.sd=null}function lt(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function jt(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function eo(h){return alert("todo:WebPSamplerProcessPlane"),h.T}function Xn(h,p){var w=h.T,T=p.ba.f.RGBA,M=T.eb,V=T.fb+h.ka*T.A,B=xs[p.ba.S],q=h.y,G=h.O,Z=h.f,oe=h.N,ve=h.ea,ee=h.W,ce=p.cc,me=p.dc,Se=p.Mc,ye=p.Nc,Ee=h.ka,Te=h.ka+h.T,De=h.U,Ce=De+1>>1;for(Ee==0?B(q,G,null,null,Z,oe,ve,ee,Z,oe,ve,ee,M,V,null,null,De):(B(p.ec,p.fc,q,G,ce,me,Se,ye,Z,oe,ve,ee,M,V-T.A,M,V,De),++w);Ee+2<Te;Ee+=2)ce=Z,me=oe,Se=ve,ye=ee,oe+=h.Rc,ee+=h.Rc,V+=2*T.A,B(q,(G+=2*h.fa)-h.fa,q,G,ce,me,Se,ye,Z,oe,ve,ee,M,V-T.A,M,V,De);return G+=h.fa,h.j+Te<h.o?(r(p.ec,p.fc,q,G,De),r(p.cc,p.dc,Z,oe,Ce),r(p.Mc,p.Nc,ve,ee,Ce),w--):1&Te||B(q,G,null,null,Z,oe,ve,ee,Z,oe,ve,ee,M,V+T.A,null,null,De),w}function as(h,p,w){var T=h.F,M=[h.J];if(T!=null){var V=h.U,B=p.ba.S,q=B==Nf||B==Sf;p=p.ba.f.RGBA;var G=[0],Z=h.ka;G[0]=h.T,h.Kb&&(Z==0?--G[0]:(--Z,M[0]-=h.width),h.j+h.ka+h.T==h.o&&(G[0]=h.o-h.j-Z));var oe=p.eb;Z=p.fb+Z*p.A,h=w5(T,M[0],h.width,V,G,oe,Z+(q?0:3),p.A),e(w==G),h&&ht(B)&&_h(oe,Z,q,V,G,p.A)}return 0}function qr(h){var p=h.ma,w=p.ba.S,T=11>w,M=w==_f||w==bf||w==Nf||w==Lg||w==12||ht(w);if(p.memory=null,p.Ib=null,p.Jb=null,p.Nd=null,!fh(p.Oa,h,M?11:12))return 0;if(M&&ht(w)&&ys(),h.da)alert("todo:use_scaling");else{if(T){if(p.Ib=eo,h.Kb){if(w=h.U+1>>1,p.memory=s(h.U+2*w),p.memory==null)return 0;p.ec=p.memory,p.fc=0,p.cc=p.ec,p.dc=p.fc+h.U,p.Mc=p.cc,p.Nc=p.dc+w,p.Ib=Xn,ys()}}else alert("todo:EmitYUV");M&&(p.Jb=as,T&&Si())}if(T&&!D5){for(h=0;256>h;++h)xT[h]=89858*(h-128)+Ef>>Af,NT[h]=-22014*(h-128)+Ef,bT[h]=-45773*(h-128),_T[h]=113618*(h-128)+Ef>>Af;for(h=Nh;h<Mg;++h)p=76283*(h-16)+Ef>>Af,ST[h-Nh]=bi(p,255),AT[h-Nh]=bi(p+8>>4,15);D5=1}return 1}function ct(h){var p=h.ma,w=h.U,T=h.T;return e(!(1&h.ka)),0>=w||0>=T?0:(w=p.Ib(h,p),p.Jb!=null&&p.Jb(h,p,w),p.Dc+=w,1)}function Nn(h){h.ma.memory=null}function ls(h,p,w,T){return ge(h,8)!=47?0:(p[0]=ge(h,14)+1,w[0]=ge(h,14)+1,T[0]=ge(h,1),ge(h,3)!=0?0:!h.h)}function br(h,p){if(4>h)return h+1;var w=h-2>>1;return(2+(1&h)<<w)+ge(p,w)+1}function Nr(h,p){return 120<p?p-120:1<=(w=((w=oT[p-1])>>4)*h+(8-(15&w)))?w:1;var w}function kn(h,p,w){var T=W(w),M=h[p+=255&T].g-8;return 0<M&&(re(w,w.u+8),T=W(w),p+=h[p].value,p+=T&(1<<M)-1),re(w,w.u+h[p].g),h[p].value}function cr(h,p,w){return w.g+=h.g,w.value+=h.value<<p>>>0,e(8>=w.g),h.g}function Pn(h,p,w){var T=h.xc;return e((p=T==0?0:h.vc[h.md*(w>>T)+(p>>T)])<h.Wb),h.Ya[p]}function Lo(h,p,w,T){var M=h.ab,V=h.c*p,B=h.C;p=B+p;var q=w,G=T;for(T=h.Ta,w=h.Ua;0<M--;){var Z=h.gc[M],oe=B,ve=p,ee=q,ce=G,me=(G=T,q=w,Z.Ea);switch(e(oe<ve),e(ve<=Z.nc),Z.hc){case 2:er(ee,ce,(ve-oe)*me,G,q);break;case 0:var Se=oe,ye=ve,Ee=G,Te=q,De=(Je=Z).Ea;Se==0&&(mh(ee,ce,null,null,1,Ee,Te),ft(ee,ce+1,0,0,De-1,Ee,Te+1),ce+=De,Te+=De,++Se);for(var Ce=1<<Je.b,nt=Ce-1,$e=Le(De,Je.b),Ct=Je.K,Je=Je.w+(Se>>Je.b)*$e;Se<ye;){var zt=Ct,yr=Je,Lt=1;for(Wu(ee,ce,Ee,Te-De,1,Ee,Te);Lt<De;){var Xe=(Lt&~nt)+Ce;Xe>De&&(Xe=De),(0,yh[zt[yr++]>>8&15])(ee,ce+ +Lt,Ee,Te+Lt-De,Xe-Lt,Ee,Te+Lt),Lt=Xe}ce+=De,Te+=De,++Se&nt||(Je+=$e)}ve!=Z.nc&&r(G,q-me,G,q+(ve-oe-1)*me,me);break;case 1:for(me=ee,ye=ce,De=(ee=Z.Ea)-(Te=ee&~(Ee=(ce=1<<Z.b)-1)),Se=Le(ee,Z.b),Ce=Z.K,Z=Z.w+(oe>>Z.b)*Se;oe<ve;){for(nt=Ce,$e=Z,Ct=new at,Je=ye+Te,zt=ye+ee;ye<Je;)Ke(nt[$e++],Ct),vh(Ct,me,ye,ce,G,q),ye+=ce,q+=ce;ye<zt&&(Ke(nt[$e++],Ct),vh(Ct,me,ye,De,G,q),ye+=De,q+=De),++oe&Ee||(Z+=Se)}break;case 3:if(ee==G&&ce==q&&0<Z.b){for(ye=G,ee=me=q+(ve-oe)*me-(Te=(ve-oe)*Le(Z.Ea,Z.b)),ce=G,Ee=q,Se=[],Te=(De=Te)-1;0<=Te;--Te)Se[Te]=ce[Ee+Te];for(Te=De-1;0<=Te;--Te)ye[ee+Te]=Se[Te];yf(Z,oe,ve,G,me,G,q)}else yf(Z,oe,ve,ee,ce,G,q)}q=T,G=w}G!=w&&r(T,w,q,G,V)}function to(h,p){var w=h.V,T=h.Ba+h.c*h.C,M=p-h.C;if(e(p<=h.l.o),e(16>=M),0<M){var V=h.l,B=h.Ta,q=h.Ua,G=V.width;if(Lo(h,M,w,T),M=q=[q],e((w=h.C)<(T=p)),e(V.v<V.va),T>V.o&&(T=V.o),w<V.j){var Z=V.j-w;w=V.j,M[0]+=Z*G}if(w>=T?w=0:(M[0]+=4*V.v,V.ka=w-V.j,V.U=V.va-V.v,V.T=T-w,w=1),w){if(q=q[0],11>(w=h.ca).S){var oe=w.f.RGBA,ve=(T=w.S,M=V.U,V=V.T,Z=oe.eb,oe.A),ee=V;for(oe=oe.fb+h.Ma*oe.A;0<ee--;){var ce=B,me=q,Se=M,ye=Z,Ee=oe;switch(T){case xf:wh(ce,me,Se,ye,Ee);break;case _f:La(ce,me,Se,ye,Ee);break;case Rg:La(ce,me,Se,ye,Ee),_h(ye,Ee,0,Se,1,0);break;case E5:Hl(ce,me,Se,ye,Ee);break;case bf:ot(ce,me,Se,ye,Ee,1);break;case jg:ot(ce,me,Se,ye,Ee,1),_h(ye,Ee,0,Se,1,0);break;case Nf:ot(ce,me,Se,ye,Ee,0);break;case Sf:ot(ce,me,Se,ye,Ee,0),_h(ye,Ee,1,Se,1,0);break;case Lg:Ra(ce,me,Se,ye,Ee);break;case Dg:Ra(ce,me,Se,ye,Ee),v5(ye,Ee,Se,1,0);break;case T5:ja(ce,me,Se,ye,Ee);break;default:e(0)}q+=G,oe+=ve}h.Ma+=V}else alert("todo:EmitRescaledRowsYUVA");e(h.Ma<=w.height)}}h.C=p,e(h.C<=h.i)}function Hr(h){var p;if(0<h.ua)return 0;for(p=0;p<h.Wb;++p){var w=h.Ya[p].G,T=h.Ya[p].H;if(0<w[1][T[1]+0].g||0<w[2][T[2]+0].g||0<w[3][T[3]+0].g)return 0}return 1}function Fi(h,p,w,T,M,V){if(h.Z!=0){var B=h.qd,q=h.rd;for(e(Fa[h.Z]!=null);p<w;++p)Fa[h.Z](B,q,T,M,T,M,V),B=T,q=M,M+=V;h.qd=B,h.rd=q}}function li(h,p){var w=h.l.ma,T=w.Z==0||w.Z==1?h.l.j:h.C;if(T=h.C<T?T:h.C,e(p<=h.l.o),p>T){var M=h.l.width,V=w.ca,B=w.tb+M*T,q=h.V,G=h.Ba+h.c*T,Z=h.gc;e(h.ab==1),e(Z[0].hc==3),ho(Z[0],T,p,q,G,V,B),Fi(w,T,p,V,B,M)}h.C=h.Ma=p}function Wr(h,p,w,T,M,V,B){var q=h.$/T,G=h.$%T,Z=h.m,oe=h.s,ve=w+h.$,ee=ve;M=w+T*M;var ce=w+T*V,me=280+oe.ua,Se=h.Pb?q:16777216,ye=0<oe.ua?oe.Wa:null,Ee=oe.wc,Te=ve<ce?Pn(oe,G,q):null;e(h.C<V),e(ce<=M);var De=!1;e:for(;;){for(;De||ve<ce;){var Ce=0;if(q>=Se){var nt=ve-w;e((Se=h).Pb),Se.wd=Se.m,Se.xd=nt,0<Se.s.ua&&Me(Se.s.Wa,Se.s.vb),Se=q+lT}if(G&Ee||(Te=Pn(oe,G,q)),e(Te!=null),Te.Qb&&(p[ve]=Te.qb,De=!0),!De)if($(Z),Te.jc){Ce=Z,nt=p;var $e=ve,Ct=Te.pd[W(Ce)&ql-1];e(Te.jc),256>Ct.g?(re(Ce,Ce.u+Ct.g),nt[$e]=Ct.value,Ce=0):(re(Ce,Ce.u+Ct.g-256),e(256<=Ct.value),Ce=Ct.value),Ce==0&&(De=!0)}else Ce=kn(Te.G[0],Te.H[0],Z);if(Z.h)break;if(De||256>Ce){if(!De)if(Te.nd)p[ve]=(Te.qb|Ce<<8)>>>0;else{if($(Z),De=kn(Te.G[1],Te.H[1],Z),$(Z),nt=kn(Te.G[2],Te.H[2],Z),$e=kn(Te.G[3],Te.H[3],Z),Z.h)break;p[ve]=($e<<24|De<<16|Ce<<8|nt)>>>0}if(De=!1,++ve,++G>=T&&(G=0,++q,B!=null&&q<=V&&!(q%16)&&B(h,q),ye!=null))for(;ee<ve;)Ce=p[ee++],ye.X[(506832829*Ce&4294967295)>>>ye.Mb]=Ce}else if(280>Ce){if(Ce=br(Ce-256,Z),nt=kn(Te.G[4],Te.H[4],Z),$(Z),nt=Nr(T,nt=br(nt,Z)),Z.h)break;if(ve-w<nt||M-ve<Ce)break e;for($e=0;$e<Ce;++$e)p[ve+$e]=p[ve+$e-nt];for(ve+=Ce,G+=Ce;G>=T;)G-=T,++q,B!=null&&q<=V&&!(q%16)&&B(h,q);if(e(ve<=M),G&Ee&&(Te=Pn(oe,G,q)),ye!=null)for(;ee<ve;)Ce=p[ee++],ye.X[(506832829*Ce&4294967295)>>>ye.Mb]=Ce}else{if(!(Ce<me))break e;for(De=Ce-280,e(ye!=null);ee<ve;)Ce=p[ee++],ye.X[(506832829*Ce&4294967295)>>>ye.Mb]=Ce;Ce=ve,e(!(De>>>(nt=ye).Xa)),p[Ce]=nt.X[De],De=!0}De||e(Z.h==te(Z))}if(h.Pb&&Z.h&&ve<M)e(h.m.h),h.a=5,h.m=h.wd,h.$=h.xd,0<h.s.ua&&Me(h.s.vb,h.s.Wa);else{if(Z.h)break e;B!=null&&B(h,q>V?V:q),h.a=0,h.$=ve-w}return 1}return h.a=3,0}function Zn(h){e(h!=null),h.vc=null,h.yc=null,h.Ya=null;var p=h.Wa;p!=null&&(p.X=null),h.vb=null,e(h!=null)}function no(){var h=new pt;return h==null?null:(h.a=0,h.xb=P5,Zt("Predictor","VP8LPredictors"),Zt("Predictor","VP8LPredictors_C"),Zt("PredictorAdd","VP8LPredictorsAdd"),Zt("PredictorAdd","VP8LPredictorsAdd_C"),er=Pt,vh=wt,wh=dn,La=Ft,Ra=It,ja=At,Hl=wn,I.VP8LMapColor32b=co,I.VP8LMapColor8b=gh,h)}function Mi(h,p,w,T,M){var V=1,B=[h],q=[p],G=T.m,Z=T.s,oe=null,ve=0;e:for(;;){if(w)for(;V&&ge(G,1);){var ee=B,ce=q,me=T,Se=1,ye=me.m,Ee=me.gc[me.ab],Te=ge(ye,2);if(me.Oc&1<<Te)V=0;else{switch(me.Oc|=1<<Te,Ee.hc=Te,Ee.Ea=ee[0],Ee.nc=ce[0],Ee.K=[null],++me.ab,e(4>=me.ab),Te){case 0:case 1:Ee.b=ge(ye,3)+2,Se=Mi(Le(Ee.Ea,Ee.b),Le(Ee.nc,Ee.b),0,me,Ee.K),Ee.K=Ee.K[0];break;case 3:var De,Ce=ge(ye,8)+1,nt=16<Ce?0:4<Ce?1:2<Ce?2:3;if(ee[0]=Le(Ee.Ea,nt),Ee.b=nt,De=Se=Mi(Ce,1,0,me,Ee.K)){var $e,Ct=Ce,Je=Ee,zt=1<<(8>>Je.b),yr=s(zt);if(yr==null)De=0;else{var Lt=Je.K[0],Xe=Je.w;for(yr[0]=Je.K[0][0],$e=1;$e<1*Ct;++$e)yr[$e]=st(Lt[Xe+$e],yr[$e-1]);for(;$e<4*zt;++$e)yr[$e]=0;Je.K[0]=null,Je.K[0]=yr,De=1}}Se=De;break;case 2:break;default:e(0)}V=Se}}if(B=B[0],q=q[0],V&&ge(G,1)&&!(V=1<=(ve=ge(G,4))&&11>=ve)){T.a=3;break e}var Ue;if(Ue=V)t:{var nr,Et,$t,Sn=T,Lr=B,hi=q,Wn=ve,Gr=w,di=Sn.m,vr=Sn.s,Kt=[null],rn=1,$n=0,sn=aT[Wn];n:for(;;){if(Gr&&ge(di,1)){var Rr=ge(di,3)+2,Os=Le(Lr,Rr),rr=Le(hi,Rr),Ai=Os*rr;if(!Mi(Os,rr,0,Sn,Kt))break n;for(Kt=Kt[0],vr.xc=Rr,nr=0;nr<Ai;++nr){var mn=Kt[nr]>>8&65535;Kt[nr]=mn,mn>=rn&&(rn=mn+1)}}if(di.h)break n;for(Et=0;5>Et;++Et){var wr=I5[Et];!Et&&0<Wn&&(wr+=1<<Wn),$n<wr&&($n=wr)}var Wi=o(rn*sn,P),fi=rn,$i=o(fi,le);if($i==null)var Gi=null;else e(65536>=fi),Gi=$i;var Ei=s($n);if(Gi==null||Ei==null||Wi==null){Sn.a=1;break n}var Ki=Wi;for(nr=$t=0;nr<rn;++nr){var _n=Gi[nr],Yi=_n.G,Fs=_n.H,$l=0,Ho=1,jr=0;for(Et=0;5>Et;++Et){wr=I5[Et],Yi[Et]=Ki,Fs[Et]=$t,!Et&&0<Wn&&(wr+=1<<Wn);i:{var If,Ug=wr,kf=Sn,Sh=Ei,IT=Ki,kT=$t,Vg=0,Ma=kf.m,PT=ge(Ma,1);if(i(Sh,0,0,Ug),PT){var CT=ge(Ma,1)+1,LT=ge(Ma,1),M5=ge(Ma,LT==0?1:8);Sh[M5]=1,CT==2&&(Sh[M5=ge(Ma,8)]=1);var Pf=1}else{var U5=s(19),V5=ge(Ma,4)+4;if(19<V5){kf.a=3;var Cf=0;break i}for(If=0;If<V5;++If)U5[sT[If]]=ge(Ma,3);var Bg=void 0,Ah=void 0,B5=kf,RT=U5,Lf=Ug,z5=Sh,zg=0,Ua=B5.m,q5=8,H5=o(128,P);r:for(;S(H5,0,7,RT,19);){if(ge(Ua,1)){var jT=2+2*ge(Ua,3);if((Bg=2+ge(Ua,jT))>Lf)break r}else Bg=Lf;for(Ah=0;Ah<Lf&&Bg--;){$(Ua);var W5=H5[0+(127&W(Ua))];re(Ua,Ua.u+W5.g);var Gu=W5.value;if(16>Gu)z5[Ah++]=Gu,Gu!=0&&(q5=Gu);else{var DT=Gu==16,$5=Gu-16,OT=rT[$5],G5=ge(Ua,nT[$5])+OT;if(Ah+G5>Lf)break r;for(var FT=DT?q5:0;0<G5--;)z5[Ah++]=FT}}zg=1;break r}zg||(B5.a=3),Pf=zg}(Pf=Pf&&!Ma.h)&&(Vg=S(IT,kT,8,Sh,Ug)),Pf&&Vg!=0?Cf=Vg:(kf.a=3,Cf=0)}if(Cf==0)break n;if(Ho&&iT[Et]==1&&(Ho=Ki[$t].g==0),$l+=Ki[$t].g,$t+=Cf,3>=Et){var Eh,qg=Ei[0];for(Eh=1;Eh<wr;++Eh)Ei[Eh]>qg&&(qg=Ei[Eh]);jr+=qg}}if(_n.nd=Ho,_n.Qb=0,Ho&&(_n.qb=(Yi[3][Fs[3]+0].value<<24|Yi[1][Fs[1]+0].value<<16|Yi[2][Fs[2]+0].value)>>>0,$l==0&&256>Yi[0][Fs[0]+0].value&&(_n.Qb=1,_n.qb+=Yi[0][Fs[0]+0].value<<8)),_n.jc=!_n.Qb&&6>jr,_n.jc){var Rf,Wo=_n;for(Rf=0;Rf<ql;++Rf){var Va=Rf,Ba=Wo.pd[Va],jf=Wo.G[0][Wo.H[0]+Va];256<=jf.value?(Ba.g=jf.g+256,Ba.value=jf.value):(Ba.g=0,Ba.value=0,Va>>=cr(jf,8,Ba),Va>>=cr(Wo.G[1][Wo.H[1]+Va],16,Ba),Va>>=cr(Wo.G[2][Wo.H[2]+Va],0,Ba),cr(Wo.G[3][Wo.H[3]+Va],24,Ba))}}}vr.vc=Kt,vr.Wb=rn,vr.Ya=Gi,vr.yc=Wi,Ue=1;break t}Ue=0}if(!(V=Ue)){T.a=3;break e}if(0<ve){if(Z.ua=1<<ve,!Y(Z.Wa,ve)){T.a=1,V=0;break e}}else Z.ua=0;var Hg=T,K5=B,MT=q,Wg=Hg.s,$g=Wg.xc;if(Hg.c=K5,Hg.i=MT,Wg.md=Le(K5,$g),Wg.wc=$g==0?-1:(1<<$g)-1,w){T.xb=mT;break e}if((oe=s(B*q))==null){T.a=1,V=0;break e}V=(V=Wr(T,oe,0,B,q,q,null))&&!G.h;break e}return V?(M!=null?M[0]=oe:(e(oe==null),e(w)),T.$=0,w||Zn(Z)):Zn(Z),V}function Cs(h,p){var w=h.c*h.i,T=w+p+16*p;return e(h.c<=p),h.V=s(T),h.V==null?(h.Ta=null,h.Ua=0,h.a=1,0):(h.Ta=h.V,h.Ua=h.Ba+w+p,1)}function ro(h,p){var w=h.C,T=p-w,M=h.V,V=h.Ba+h.c*w;for(e(p<=h.l.o);0<T;){var B=16<T?16:T,q=h.l.ma,G=h.l.width,Z=G*B,oe=q.ca,ve=q.tb+G*w,ee=h.Ta,ce=h.Ua;Lo(h,B,M,V),x5(ee,ce,oe,ve,Z),Fi(q,w,w+B,oe,ve,G),T-=B,M+=B*h.c,w+=B}e(w==p),h.C=h.Ma=p}function Ro(){this.ub=this.yd=this.td=this.Rb=0}function jo(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function oh(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function io(){this.Yb=function(){var h=[];return function p(w,T,M){for(var V=M[T],B=0;B<V&&(w.push(M.length>T+1?[]:0),!(M.length<T+1));B++)p(w[B],T+1,M)}(h,0,[3,11]),h}()}function Ll(){this.jb=s(3),this.Wc=a([4,8],io),this.Xc=a([4,17],io)}function _a(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function Sr(){this.ld=this.La=this.dd=this.tc=0}function Ui(){this.Na=this.la=0}function ba(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Rl(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function jl(){this.uc=this.M=this.Nb=0,this.wa=Array(new Sr),this.Y=0,this.ya=Array(new Rl),this.aa=0,this.l=new so}function Dl(){this.y=s(16),this.f=s(8),this.ea=s(8)}function Ol(){this.cb=this.a=0,this.sc="",this.m=new U,this.Od=new Ro,this.Kc=new jo,this.ed=new _a,this.Qa=new oh,this.Ic=this.$c=this.Aa=0,this.D=new jl,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,U),this.ia=0,this.pb=o(4,ba),this.Pa=new Ll,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Dl),this.Hd=0,this.rb=Array(new Ui),this.sb=0,this.wa=Array(new Sr),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Rl),this.L=this.aa=0,this.gd=a([4,2],Sr),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function bi(h,p){return 0>h?0:h>p?p:h}function so(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Fu(){var h=new Ol;return h!=null&&(h.a=0,h.sc="OK",h.cb=0,h.Xb=0,bh||(bh=Do)),h}function jn(h,p,w){return h.a==0&&(h.a=p,h.sc=w,h.cb=0),0}function Mu(h,p,w){return 3<=w&&h[p+0]==157&&h[p+1]==1&&h[p+2]==42}function us(h,p){if(h==null)return 0;if(h.a=0,h.sc="OK",p==null)return jn(h,2,"null VP8Io passed to VP8GetHeaders()");var w=p.data,T=p.w,M=p.ha;if(4>M)return jn(h,7,"Truncated header.");var V=w[T+0]|w[T+1]<<8|w[T+2]<<16,B=h.Od;if(B.Rb=!(1&V),B.td=V>>1&7,B.yd=V>>4&1,B.ub=V>>5,3<B.td)return jn(h,3,"Incorrect keyframe parameters.");if(!B.yd)return jn(h,4,"Frame not displayable.");T+=3,M-=3;var q=h.Kc;if(B.Rb){if(7>M)return jn(h,7,"cannot parse picture header");if(!Mu(w,T,M))return jn(h,3,"Bad code word");q.c=16383&(w[T+4]<<8|w[T+3]),q.Td=w[T+4]>>6,q.i=16383&(w[T+6]<<8|w[T+5]),q.Ud=w[T+6]>>6,T+=7,M-=7,h.za=q.c+15>>4,h.Ub=q.i+15>>4,p.width=q.c,p.height=q.i,p.Da=0,p.j=0,p.v=0,p.va=p.width,p.o=p.height,p.da=0,p.ib=p.width,p.hb=p.height,p.U=p.width,p.T=p.height,i((V=h.Pa).jb,0,255,V.jb.length),e((V=h.Qa)!=null),V.Cb=0,V.Bb=0,V.Fb=1,i(V.Zb,0,0,V.Zb.length),i(V.Lb,0,0,V.Lb)}if(B.ub>M)return jn(h,7,"bad partition length");we(V=h.m,w,T,B.ub),T+=B.ub,M-=B.ub,B.Rb&&(q.Ld=he(V),q.Kd=he(V)),q=h.Qa;var G,Z=h.Pa;if(e(V!=null),e(q!=null),q.Cb=he(V),q.Cb){if(q.Bb=he(V),he(V)){for(q.Fb=he(V),G=0;4>G;++G)q.Zb[G]=he(V)?ne(V,7):0;for(G=0;4>G;++G)q.Lb[G]=he(V)?ne(V,6):0}if(q.Bb)for(G=0;3>G;++G)Z.jb[G]=he(V)?xe(V,8):255}else q.Bb=0;if(V.Ka)return jn(h,3,"cannot parse segment header");if((q=h.ed).zd=he(V),q.Tb=xe(V,6),q.wb=xe(V,3),q.Pc=he(V),q.Pc&&he(V)){for(Z=0;4>Z;++Z)he(V)&&(q.vd[Z]=ne(V,6));for(Z=0;4>Z;++Z)he(V)&&(q.od[Z]=ne(V,6))}if(h.L=q.Tb==0?0:q.zd?1:2,V.Ka)return jn(h,3,"cannot parse filter header");var oe=M;if(M=G=T,T=G+oe,q=oe,h.Xb=(1<<xe(h.m,2))-1,oe<3*(Z=h.Xb))w=7;else{for(G+=3*Z,q-=3*Z,oe=0;oe<Z;++oe){var ve=w[M+0]|w[M+1]<<8|w[M+2]<<16;ve>q&&(ve=q),we(h.Jc[+oe],w,G,ve),G+=ve,q-=ve,M+=3}we(h.Jc[+Z],w,G,q),w=G<T?0:5}if(w!=0)return jn(h,w,"cannot parse partitions");for(w=xe(G=h.m,7),M=he(G)?ne(G,4):0,T=he(G)?ne(G,4):0,q=he(G)?ne(G,4):0,Z=he(G)?ne(G,4):0,G=he(G)?ne(G,4):0,oe=h.Qa,ve=0;4>ve;++ve){if(oe.Cb){var ee=oe.Zb[ve];oe.Fb||(ee+=w)}else{if(0<ve){h.pb[ve]=h.pb[0];continue}ee=w}var ce=h.pb[ve];ce.Sc[0]=Og[bi(ee+M,127)],ce.Sc[1]=Fg[bi(ee+0,127)],ce.Eb[0]=2*Og[bi(ee+T,127)],ce.Eb[1]=101581*Fg[bi(ee+q,127)]>>16,8>ce.Eb[1]&&(ce.Eb[1]=8),ce.Qc[0]=Og[bi(ee+Z,117)],ce.Qc[1]=Fg[bi(ee+G,127)],ce.lc=ee+G}if(!B.Rb)return jn(h,4,"Not a key frame.");for(he(V),B=h.Pa,w=0;4>w;++w){for(M=0;8>M;++M)for(T=0;3>T;++T)for(q=0;11>q;++q)Z=de(V,fT[w][M][T][q])?xe(V,8):hT[w][M][T][q],B.Wc[w][M].Yb[T][q]=Z;for(M=0;17>M;++M)B.Xc[w][M]=B.Wc[w][pT[M]]}return h.kc=he(V),h.kc&&(h.Bd=xe(V,8)),h.cb=1}function Do(h,p,w,T,M,V,B){var q=p[M].Yb[w];for(w=0;16>M;++M){if(!de(h,q[w+0]))return M;for(;!de(h,q[w+1]);)if(q=p[++M].Yb[0],w=0,M==16)return 16;var G=p[M+1].Yb;if(de(h,q[w+2])){var Z=h,oe=0;if(de(Z,(ee=q)[(ve=w)+3]))if(de(Z,ee[ve+6])){for(q=0,ve=2*(oe=de(Z,ee[ve+8]))+(ee=de(Z,ee[ve+9+oe])),oe=0,ee=uT[ve];ee[q];++q)oe+=oe+de(Z,ee[q]);oe+=3+(8<<ve)}else de(Z,ee[ve+7])?(oe=7+2*de(Z,165),oe+=de(Z,145)):oe=5+de(Z,159);else oe=de(Z,ee[ve+4])?3+de(Z,ee[ve+5]):2;q=G[2]}else oe=1,q=G[1];G=B+cT[M],0>(Z=h).b&&ue(Z);var ve,ee=Z.b,ce=(ve=Z.Ca>>1)-(Z.I>>ee)>>31;--Z.b,Z.Ca+=ce,Z.Ca|=1,Z.I-=(ve+1&ce)<<ee,V[G]=((oe^ce)-ce)*T[(0<M)+0]}return 16}function Fl(h){var p=h.rb[h.sb-1];p.la=0,p.Na=0,i(h.zc,0,0,h.zc.length),h.ja=0}function Ni(h,p,w,T,M){M=h[p+w+32*T]+(M>>3),h[p+w+32*T]=-256&M?0>M?0:255:M}function fn(h,p,w,T,M,V){Ni(h,p,0,w,T+M),Ni(h,p,1,w,T+V),Ni(h,p,2,w,T-V),Ni(h,p,3,w,T-M)}function mr(h){return(20091*h>>16)+h}function Oo(h,p,w,T){var M,V=0,B=s(16);for(M=0;4>M;++M){var q=h[p+0]+h[p+8],G=h[p+0]-h[p+8],Z=(35468*h[p+4]>>16)-mr(h[p+12]),oe=mr(h[p+4])+(35468*h[p+12]>>16);B[V+0]=q+oe,B[V+1]=G+Z,B[V+2]=G-Z,B[V+3]=q-oe,V+=4,p++}for(M=V=0;4>M;++M)q=(h=B[V+0]+4)+B[V+8],G=h-B[V+8],Z=(35468*B[V+4]>>16)-mr(B[V+12]),Ni(w,T,0,0,q+(oe=mr(B[V+4])+(35468*B[V+12]>>16))),Ni(w,T,1,0,G+Z),Ni(w,T,2,0,G-Z),Ni(w,T,3,0,q-oe),V++,T+=32}function Na(h,p,w,T){var M=h[p+0]+4,V=35468*h[p+4]>>16,B=mr(h[p+4]),q=35468*h[p+1]>>16;fn(w,T,0,M+B,h=mr(h[p+1]),q),fn(w,T,1,M+V,h,q),fn(w,T,2,M-V,h,q),fn(w,T,3,M-B,h,q)}function Uu(h,p,w,T,M){Oo(h,p,w,T),M&&Oo(h,p+16,w,T+4)}function Mt(h,p,w,T){Wl(h,p+0,w,T,1),Wl(h,p+32,w,T+128,1)}function Fo(h,p,w,T){var M;for(h=h[p+0]+4,M=0;4>M;++M)for(p=0;4>p;++p)Ni(w,T,p,M,h)}function oo(h,p,w,T){h[p+0]&&tn(h,p+0,w,T),h[p+16]&&tn(h,p+16,w,T+4),h[p+32]&&tn(h,p+32,w,T+128),h[p+48]&&tn(h,p+48,w,T+128+4)}function cs(h,p,w,T){var M,V=s(16);for(M=0;4>M;++M){var B=h[p+0+M]+h[p+12+M],q=h[p+4+M]+h[p+8+M],G=h[p+4+M]-h[p+8+M],Z=h[p+0+M]-h[p+12+M];V[0+M]=B+q,V[8+M]=B-q,V[4+M]=Z+G,V[12+M]=Z-G}for(M=0;4>M;++M)B=(h=V[0+4*M]+3)+V[3+4*M],q=V[1+4*M]+V[2+4*M],G=V[1+4*M]-V[2+4*M],Z=h-V[3+4*M],w[T+0]=B+q>>3,w[T+16]=Z+G>>3,w[T+32]=B-q>>3,w[T+48]=Z-G>>3,T+=64}function Mo(h,p,w){var T,M=p-32,V=Hi,B=255-h[M-1];for(T=0;T<w;++T){var q,G=V,Z=B+h[p-1];for(q=0;q<w;++q)h[p+q]=G[Z+h[M+q]];p+=32}}function Vu(h,p){Mo(h,p,4)}function ah(h,p){Mo(h,p,8)}function lh(h,p){Mo(h,p,16)}function Ml(h,p){var w;for(w=0;16>w;++w)r(h,p+32*w,h,p-32,16)}function Bu(h,p){var w;for(w=16;0<w;--w)i(h,p,h[p-1],16),p+=32}function Pr(h,p,w){var T;for(T=0;16>T;++T)i(p,w+32*T,h,16)}function hs(h,p){var w,T=16;for(w=0;16>w;++w)T+=h[p-1+32*w]+h[p+w-32];Pr(T>>5,h,p)}function ao(h,p){var w,T=8;for(w=0;16>w;++w)T+=h[p-1+32*w];Pr(T>>4,h,p)}function Sa(h,p){var w,T=8;for(w=0;16>w;++w)T+=h[p+w-32];Pr(T>>4,h,p)}function zu(h,p){Pr(128,h,p)}function dt(h,p,w){return h+2*p+w+2>>2}function uh(h,p){var w,T=p-32;for(T=new Uint8Array([dt(h[T-1],h[T+0],h[T+1]),dt(h[T+0],h[T+1],h[T+2]),dt(h[T+1],h[T+2],h[T+3]),dt(h[T+2],h[T+3],h[T+4])]),w=0;4>w;++w)r(h,p+32*w,T,0,T.length)}function ch(h,p){var w=h[p-1],T=h[p-1+32],M=h[p-1+64],V=h[p-1+96];Ne(h,p+0,16843009*dt(h[p-1-32],w,T)),Ne(h,p+32,16843009*dt(w,T,M)),Ne(h,p+64,16843009*dt(T,M,V)),Ne(h,p+96,16843009*dt(M,V,V))}function hh(h,p){var w,T=4;for(w=0;4>w;++w)T+=h[p+w-32]+h[p-1+32*w];for(T>>=3,w=0;4>w;++w)i(h,p+32*w,T,4)}function Ar(h,p){var w=h[p-1+0],T=h[p-1+32],M=h[p-1+64],V=h[p-1-32],B=h[p+0-32],q=h[p+1-32],G=h[p+2-32],Z=h[p+3-32];h[p+0+96]=dt(T,M,h[p-1+96]),h[p+1+96]=h[p+0+64]=dt(w,T,M),h[p+2+96]=h[p+1+64]=h[p+0+32]=dt(V,w,T),h[p+3+96]=h[p+2+64]=h[p+1+32]=h[p+0+0]=dt(B,V,w),h[p+3+64]=h[p+2+32]=h[p+1+0]=dt(q,B,V),h[p+3+32]=h[p+2+0]=dt(G,q,B),h[p+3+0]=dt(Z,G,q)}function Ls(h,p){var w=h[p+1-32],T=h[p+2-32],M=h[p+3-32],V=h[p+4-32],B=h[p+5-32],q=h[p+6-32],G=h[p+7-32];h[p+0+0]=dt(h[p+0-32],w,T),h[p+1+0]=h[p+0+32]=dt(w,T,M),h[p+2+0]=h[p+1+32]=h[p+0+64]=dt(T,M,V),h[p+3+0]=h[p+2+32]=h[p+1+64]=h[p+0+96]=dt(M,V,B),h[p+3+32]=h[p+2+64]=h[p+1+96]=dt(V,B,q),h[p+3+64]=h[p+2+96]=dt(B,q,G),h[p+3+96]=dt(q,G,G)}function dh(h,p){var w=h[p-1+0],T=h[p-1+32],M=h[p-1+64],V=h[p-1-32],B=h[p+0-32],q=h[p+1-32],G=h[p+2-32],Z=h[p+3-32];h[p+0+0]=h[p+1+64]=V+B+1>>1,h[p+1+0]=h[p+2+64]=B+q+1>>1,h[p+2+0]=h[p+3+64]=q+G+1>>1,h[p+3+0]=G+Z+1>>1,h[p+0+96]=dt(M,T,w),h[p+0+64]=dt(T,w,V),h[p+0+32]=h[p+1+96]=dt(w,V,B),h[p+1+32]=h[p+2+96]=dt(V,B,q),h[p+2+32]=h[p+3+96]=dt(B,q,G),h[p+3+32]=dt(q,G,Z)}function Aa(h,p){var w=h[p+0-32],T=h[p+1-32],M=h[p+2-32],V=h[p+3-32],B=h[p+4-32],q=h[p+5-32],G=h[p+6-32],Z=h[p+7-32];h[p+0+0]=w+T+1>>1,h[p+1+0]=h[p+0+64]=T+M+1>>1,h[p+2+0]=h[p+1+64]=M+V+1>>1,h[p+3+0]=h[p+2+64]=V+B+1>>1,h[p+0+32]=dt(w,T,M),h[p+1+32]=h[p+0+96]=dt(T,M,V),h[p+2+32]=h[p+1+96]=dt(M,V,B),h[p+3+32]=h[p+2+96]=dt(V,B,q),h[p+3+64]=dt(B,q,G),h[p+3+96]=dt(q,G,Z)}function Rs(h,p){var w=h[p-1+0],T=h[p-1+32],M=h[p-1+64],V=h[p-1+96];h[p+0+0]=w+T+1>>1,h[p+2+0]=h[p+0+32]=T+M+1>>1,h[p+2+32]=h[p+0+64]=M+V+1>>1,h[p+1+0]=dt(w,T,M),h[p+3+0]=h[p+1+32]=dt(T,M,V),h[p+3+32]=h[p+1+64]=dt(M,V,V),h[p+3+64]=h[p+2+64]=h[p+0+96]=h[p+1+96]=h[p+2+96]=h[p+3+96]=V}function Ea(h,p){var w=h[p-1+0],T=h[p-1+32],M=h[p-1+64],V=h[p-1+96],B=h[p-1-32],q=h[p+0-32],G=h[p+1-32],Z=h[p+2-32];h[p+0+0]=h[p+2+32]=w+B+1>>1,h[p+0+32]=h[p+2+64]=T+w+1>>1,h[p+0+64]=h[p+2+96]=M+T+1>>1,h[p+0+96]=V+M+1>>1,h[p+3+0]=dt(q,G,Z),h[p+2+0]=dt(B,q,G),h[p+1+0]=h[p+3+32]=dt(w,B,q),h[p+1+32]=h[p+3+64]=dt(T,w,B),h[p+1+64]=h[p+3+96]=dt(M,T,w),h[p+1+96]=dt(V,M,T)}function Vi(h,p){var w;for(w=0;8>w;++w)r(h,p+32*w,h,p-32,8)}function Uo(h,p){var w;for(w=0;8>w;++w)i(h,p,h[p-1],8),p+=32}function ds(h,p,w){var T;for(T=0;8>T;++T)i(p,w+32*T,h,8)}function Ul(h,p){var w,T=8;for(w=0;8>w;++w)T+=h[p+w-32]+h[p-1+32*w];ds(T>>4,h,p)}function hn(h,p){var w,T=4;for(w=0;8>w;++w)T+=h[p+w-32];ds(T>>3,h,p)}function Vl(h,p){var w,T=4;for(w=0;8>w;++w)T+=h[p-1+32*w];ds(T>>3,h,p)}function qu(h,p){ds(128,h,p)}function fs(h,p,w){var T=h[p-w],M=h[p+0],V=3*(M-T)+Cg[1020+h[p-2*w]-h[p+w]],B=wf[112+(V+4>>3)];h[p-w]=Hi[255+T+wf[112+(V+3>>3)]],h[p+0]=Hi[255+M-B]}function Ta(h,p,w,T){var M=h[p+0],V=h[p+w];return ws[255+h[p-2*w]-h[p-w]]>T||ws[255+V-M]>T}function Vo(h,p,w,T){return 4*ws[255+h[p-w]-h[p+0]]+ws[255+h[p-2*w]-h[p+w]]<=T}function lo(h,p,w,T,M){var V=h[p-3*w],B=h[p-2*w],q=h[p-w],G=h[p+0],Z=h[p+w],oe=h[p+2*w],ve=h[p+3*w];return 4*ws[255+q-G]+ws[255+B-Z]>T?0:ws[255+h[p-4*w]-V]<=M&&ws[255+V-B]<=M&&ws[255+B-q]<=M&&ws[255+ve-oe]<=M&&ws[255+oe-Z]<=M&&ws[255+Z-G]<=M}function uo(h,p,w,T){var M=2*T+1;for(T=0;16>T;++T)Vo(h,p+T,w,M)&&fs(h,p+T,w)}function ui(h,p,w,T){var M=2*T+1;for(T=0;16>T;++T)Vo(h,p+T*w,1,M)&&fs(h,p+T*w,1)}function Bl(h,p,w,T){var M;for(M=3;0<M;--M)uo(h,p+=4*w,w,T)}function Hu(h,p,w,T){var M;for(M=3;0<M;--M)ui(h,p+=4,w,T)}function ci(h,p,w,T,M,V,B,q){for(V=2*V+1;0<M--;){if(lo(h,p,w,V,B))if(Ta(h,p,w,q))fs(h,p,w);else{var G=h,Z=p,oe=w,ve=G[Z-2*oe],ee=G[Z-oe],ce=G[Z+0],me=G[Z+oe],Se=G[Z+2*oe],ye=27*(Te=Cg[1020+3*(ce-ee)+Cg[1020+ve-me]])+63>>7,Ee=18*Te+63>>7,Te=9*Te+63>>7;G[Z-3*oe]=Hi[255+G[Z-3*oe]+Te],G[Z-2*oe]=Hi[255+ve+Ee],G[Z-oe]=Hi[255+ee+ye],G[Z+0]=Hi[255+ce-ye],G[Z+oe]=Hi[255+me-Ee],G[Z+2*oe]=Hi[255+Se-Te]}p+=T}}function ps(h,p,w,T,M,V,B,q){for(V=2*V+1;0<M--;){if(lo(h,p,w,V,B))if(Ta(h,p,w,q))fs(h,p,w);else{var G=h,Z=p,oe=w,ve=G[Z-oe],ee=G[Z+0],ce=G[Z+oe],me=wf[112+(4+(Se=3*(ee-ve))>>3)],Se=wf[112+(Se+3>>3)],ye=me+1>>1;G[Z-2*oe]=Hi[255+G[Z-2*oe]+ye],G[Z-oe]=Hi[255+ve+Se],G[Z+0]=Hi[255+ee-me],G[Z+oe]=Hi[255+ce-ye]}p+=T}}function Ia(h,p,w,T,M,V){ci(h,p,w,1,16,T,M,V)}function ms(h,p,w,T,M,V){ci(h,p,1,w,16,T,M,V)}function zl(h,p,w,T,M,V){var B;for(B=3;0<B;--B)ps(h,p+=4*w,w,1,16,T,M,V)}function v(h,p,w,T,M,V){var B;for(B=3;0<B;--B)ps(h,p+=4,1,w,16,T,M,V)}function O(h,p,w,T,M,V,B,q){ci(h,p,M,1,8,V,B,q),ci(w,T,M,1,8,V,B,q)}function X(h,p,w,T,M,V,B,q){ci(h,p,1,M,8,V,B,q),ci(w,T,1,M,8,V,B,q)}function ie(h,p,w,T,M,V,B,q){ps(h,p+4*M,M,1,8,V,B,q),ps(w,T+4*M,M,1,8,V,B,q)}function fe(h,p,w,T,M,V,B,q){ps(h,p+4,1,M,8,V,B,q),ps(w,T+4,1,M,8,V,B,q)}function Ae(){this.ba=new kt,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new jt,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function ke(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function He(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Ye(){this.ua=0,this.Wa=new _t,this.vb=new _t,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new le,this.yc=new P}function pt(){this.xb=this.a=0,this.l=new so,this.ca=new kt,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new K,this.Pb=0,this.wd=new K,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Ye,this.ab=0,this.gc=o(4,He),this.Oc=0}function xt(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new so,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Ut(h,p,w,T,M,V,B){for(h=h==null?0:h[p+0],p=0;p<B;++p)M[V+p]=h+w[T+p]&255,h=M[V+p]}function Xt(h,p,w,T,M,V,B){var q;if(h==null)Ut(null,null,w,T,M,V,B);else for(q=0;q<B;++q)M[V+q]=h[p+q]+w[T+q]&255}function Dn(h,p,w,T,M,V,B){if(h==null)Ut(null,null,w,T,M,V,B);else{var q,G=h[p+0],Z=G,oe=G;for(q=0;q<B;++q)Z=oe+(G=h[p+q])-Z,oe=w[T+q]+(-256&Z?0>Z?0:255:Z)&255,Z=G,M[V+q]=oe}}function nn(h,p,w,T){var M=p.width,V=p.o;if(e(h!=null&&p!=null),0>w||0>=T||w+T>V)return null;if(!h.Cc){if(h.ga==null){var B;if(h.ga=new xt,(B=h.ga==null)||(B=p.width*p.o,e(h.Gb.length==0),h.Gb=s(B),h.Uc=0,h.Gb==null?B=0:(h.mb=h.Gb,h.nb=h.Uc,h.rc=null,B=1),B=!B),!B){B=h.ga;var q=h.Fa,G=h.P,Z=h.qc,oe=h.mb,ve=h.nb,ee=G+1,ce=Z-1,me=B.l;if(e(q!=null&&oe!=null&&p!=null),Fa[0]=null,Fa[1]=Ut,Fa[2]=Xt,Fa[3]=Dn,B.ca=oe,B.tb=ve,B.c=p.width,B.i=p.height,e(0<B.c&&0<B.i),1>=Z)p=0;else if(B.$a=3&q[G+0],B.Z=q[G+0]>>2&3,B.Lc=q[G+0]>>4&3,G=q[G+0]>>6&3,0>B.$a||1<B.$a||4<=B.Z||1<B.Lc||G)p=0;else if(me.put=ct,me.ac=qr,me.bc=Nn,me.ma=B,me.width=p.width,me.height=p.height,me.Da=p.Da,me.v=p.v,me.va=p.va,me.j=p.j,me.o=p.o,B.$a)e:{e(B.$a==1),p=no();t:for(;;){if(p==null){p=0;break e}if(e(B!=null),B.mc=p,p.c=B.c,p.i=B.i,p.l=B.l,p.l.ma=B,p.l.width=B.c,p.l.height=B.i,p.a=0,ae(p.m,q,ee,ce),!Mi(B.c,B.i,1,p,null)||(p.ab==1&&p.gc[0].hc==3&&Hr(p.s)?(B.ic=1,q=p.c*p.i,p.Ta=null,p.Ua=0,p.V=s(q),p.Ba=0,p.V==null?(p.a=1,p=0):p=1):(B.ic=0,p=Cs(p,B.c)),!p))break t;p=1;break e}B.mc=null,p=0}else p=ce>=B.c*B.i;B=!p}if(B)return null;h.ga.Lc!=1?h.Ga=0:T=V-w}e(h.ga!=null),e(w+T<=V);e:{if(p=(q=h.ga).c,V=q.l.o,q.$a==0){if(ee=h.rc,ce=h.Vc,me=h.Fa,G=h.P+1+w*p,Z=h.mb,oe=h.nb+w*p,e(G<=h.P+h.qc),q.Z!=0)for(e(Fa[q.Z]!=null),B=0;B<T;++B)Fa[q.Z](ee,ce,me,G,Z,oe,p),ee=Z,ce=oe,oe+=p,G+=p;else for(B=0;B<T;++B)r(Z,oe,me,G,p),ee=Z,ce=oe,oe+=p,G+=p;h.rc=ee,h.Vc=ce}else{if(e(q.mc!=null),p=w+T,e((B=q.mc)!=null),e(p<=B.i),B.C>=p)p=1;else if(q.ic||Si(),q.ic){q=B.V,ee=B.Ba,ce=B.c;var Se=B.i,ye=(me=1,G=B.$/ce,Z=B.$%ce,oe=B.m,ve=B.s,B.$),Ee=ce*Se,Te=ce*p,De=ve.wc,Ce=ye<Te?Pn(ve,Z,G):null;e(ye<=Ee),e(p<=Se),e(Hr(ve));t:for(;;){for(;!oe.h&&ye<Te;){if(Z&De||(Ce=Pn(ve,Z,G)),e(Ce!=null),$(oe),256>(Se=kn(Ce.G[0],Ce.H[0],oe)))q[ee+ye]=Se,++ye,++Z>=ce&&(Z=0,++G<=p&&!(G%16)&&li(B,G));else{if(!(280>Se)){me=0;break t}Se=br(Se-256,oe);var nt,$e=kn(Ce.G[4],Ce.H[4],oe);if($(oe),!(ye>=($e=Nr(ce,$e=br($e,oe)))&&Ee-ye>=Se)){me=0;break t}for(nt=0;nt<Se;++nt)q[ee+ye+nt]=q[ee+ye+nt-$e];for(ye+=Se,Z+=Se;Z>=ce;)Z-=ce,++G<=p&&!(G%16)&&li(B,G);ye<Te&&Z&De&&(Ce=Pn(ve,Z,G))}e(oe.h==te(oe))}li(B,G>p?p:G);break t}!me||oe.h&&ye<Ee?(me=0,B.a=oe.h?5:3):B.$=ye,p=me}else p=Wr(B,B.V,B.Ba,B.c,B.i,p,ro);if(!p){T=0;break e}}w+T>=V&&(h.Cc=1),T=1}if(!T)return null;if(h.Cc&&((T=h.ga)!=null&&(T.mc=null),h.ga=null,0<h.Ga))return alert("todo:WebPDequantizeLevels"),null}return h.nb+w*M}function qn(h,p,w,T,M,V){for(;0<M--;){var B,q=h,G=p+(w?1:0),Z=h,oe=p+(w?0:3);for(B=0;B<T;++B){var ve=Z[oe+4*B];ve!=255&&(ve*=32897,q[G+4*B+0]=q[G+4*B+0]*ve>>23,q[G+4*B+1]=q[G+4*B+1]*ve>>23,q[G+4*B+2]=q[G+4*B+2]*ve>>23)}p+=V}}function On(h,p,w,T,M){for(;0<T--;){var V;for(V=0;V<w;++V){var B=h[p+2*V+0],q=15&(Z=h[p+2*V+1]),G=4369*q,Z=(240&Z|Z>>4)*G>>16;h[p+2*V+0]=(240&B|B>>4)*G>>16&240|(15&B|B<<4)*G>>16>>4&15,h[p+2*V+1]=240&Z|q}p+=M}}function Hn(h,p,w,T,M,V,B,q){var G,Z,oe=255;for(Z=0;Z<M;++Z){for(G=0;G<T;++G){var ve=h[p+G];V[B+4*G]=ve,oe&=ve}p+=w,B+=q}return oe!=255}function Fn(h,p,w,T,M){var V;for(V=0;V<M;++V)w[T+V]=h[p+V]>>8}function Si(){_h=qn,v5=On,w5=Hn,x5=Fn}function gs(h,p,w){I[h]=function(T,M,V,B,q,G,Z,oe,ve,ee,ce,me,Se,ye,Ee,Te,De){var Ce,nt=De-1>>1,$e=q[G+0]|Z[oe+0]<<16,Ct=ve[ee+0]|ce[me+0]<<16;e(T!=null);var Je=3*$e+Ct+131074>>2;for(p(T[M+0],255&Je,Je>>16,Se,ye),V!=null&&(Je=3*Ct+$e+131074>>2,p(V[B+0],255&Je,Je>>16,Ee,Te)),Ce=1;Ce<=nt;++Ce){var zt=q[G+Ce]|Z[oe+Ce]<<16,yr=ve[ee+Ce]|ce[me+Ce]<<16,Lt=$e+zt+Ct+yr+524296,Xe=Lt+2*(zt+Ct)>>3;Je=Xe+$e>>1,$e=(Lt=Lt+2*($e+yr)>>3)+zt>>1,p(T[M+2*Ce-1],255&Je,Je>>16,Se,ye+(2*Ce-1)*w),p(T[M+2*Ce-0],255&$e,$e>>16,Se,ye+(2*Ce-0)*w),V!=null&&(Je=Lt+Ct>>1,$e=Xe+yr>>1,p(V[B+2*Ce-1],255&Je,Je>>16,Ee,Te+(2*Ce-1)*w),p(V[B+2*Ce+0],255&$e,$e>>16,Ee,Te+(2*Ce+0)*w)),$e=zt,Ct=yr}1&De||(Je=3*$e+Ct+131074>>2,p(T[M+De-1],255&Je,Je>>16,Se,ye+(De-1)*w),V!=null&&(Je=3*Ct+$e+131074>>2,p(V[B+De-1],255&Je,Je>>16,Ee,Te+(De-1)*w)))}}function ys(){xs[xf]=gT,xs[_f]=C5,xs[E5]=yT,xs[bf]=L5,xs[Nf]=R5,xs[Lg]=j5,xs[T5]=vT,xs[Rg]=C5,xs[jg]=L5,xs[Sf]=R5,xs[Dg]=j5}function d(h){return h&-16384?0>h?0:255:h>>wT}function x(h,p){return d((19077*h>>8)+(26149*p>>8)-14234)}function L(h,p,w){return d((19077*h>>8)-(6419*p>>8)-(13320*w>>8)+8708)}function H(h,p){return d((19077*h>>8)+(33050*p>>8)-17685)}function pe(h,p,w,T,M){T[M+0]=x(h,w),T[M+1]=L(h,p,w),T[M+2]=H(h,p)}function be(h,p,w,T,M){T[M+0]=H(h,p),T[M+1]=L(h,p,w),T[M+2]=x(h,w)}function Fe(h,p,w,T,M){var V=L(h,p,w);p=V<<3&224|H(h,p)>>3,T[M+0]=248&x(h,w)|V>>5,T[M+1]=p}function Bt(h,p,w,T,M){var V=240&H(h,p)|15;T[M+0]=240&x(h,w)|L(h,p,w)>>4,T[M+1]=V}function Mn(h,p,w,T,M){T[M+0]=255,pe(h,p,w,T,M+1)}function Dt(h,p,w,T,M){be(h,p,w,T,M),T[M+3]=255}function Qt(h,p,w,T,M){pe(h,p,w,T,M),T[M+3]=255}function xn(h,p,w){I[h]=function(T,M,V,B,q,G,Z,oe,ve){for(var ee=oe+(-2&ve)*w;oe!=ee;)p(T[M+0],V[B+0],q[G+0],Z,oe),p(T[M+1],V[B+0],q[G+0],Z,oe+w),M+=2,++B,++G,oe+=2*w;1&ve&&p(T[M+0],V[B+0],q[G+0],Z,oe)}}function Bi(h,p,w){return w==0?h==0?p==0?6:5:p==0?4:0:w}function $r(h,p,w,T,M){switch(h>>>30){case 3:Wl(p,w,T,M,0);break;case 2:vs(p,w,T,M);break;case 1:tn(p,w,T,M)}}function Cr(h,p){var w,T,M=p.M,V=p.Nb,B=h.oc,q=h.pc+40,G=h.oc,Z=h.pc+584,oe=h.oc,ve=h.pc+600;for(w=0;16>w;++w)B[q+32*w-1]=129;for(w=0;8>w;++w)G[Z+32*w-1]=129,oe[ve+32*w-1]=129;for(0<M?B[q-1-32]=G[Z-1-32]=oe[ve-1-32]=129:(i(B,q-32-1,127,21),i(G,Z-32-1,127,9),i(oe,ve-32-1,127,9)),T=0;T<h.za;++T){var ee=p.ya[p.aa+T];if(0<T){for(w=-1;16>w;++w)r(B,q+32*w-4,B,q+32*w+12,4);for(w=-1;8>w;++w)r(G,Z+32*w-4,G,Z+32*w+4,4),r(oe,ve+32*w-4,oe,ve+32*w+4,4)}var ce=h.Gd,me=h.Hd+T,Se=ee.ad,ye=ee.Hc;if(0<M&&(r(B,q-32,ce[me].y,0,16),r(G,Z-32,ce[me].f,0,8),r(oe,ve-32,ce[me].ea,0,8)),ee.Za){var Ee=B,Te=q-32+16;for(0<M&&(T>=h.za-1?i(Ee,Te,ce[me].y[15],4):r(Ee,Te,ce[me+1].y,0,4)),w=0;4>w;w++)Ee[Te+128+w]=Ee[Te+256+w]=Ee[Te+384+w]=Ee[Te+0+w];for(w=0;16>w;++w,ye<<=2)Ee=B,Te=q+O5[w],Ds[ee.Ob[w]](Ee,Te),$r(ye,Se,16*+w,Ee,Te)}else if(Ee=Bi(T,M,ee.Ob[0]),Oa[Ee](B,q),ye!=0)for(w=0;16>w;++w,ye<<=2)$r(ye,Se,16*+w,B,q+O5[w]);for(w=ee.Gc,Ee=Bi(T,M,ee.Dd),qo[Ee](G,Z),qo[Ee](oe,ve),ye=Se,Ee=G,Te=Z,255&(ee=0|w)&&(170&ee?fo(ye,256,Ee,Te):pn(ye,256,Ee,Te)),ee=oe,ye=ve,255&(w>>=8)&&(170&w?fo(Se,320,ee,ye):pn(Se,320,ee,ye)),M<h.Ub-1&&(r(ce[me].y,0,B,q+480,16),r(ce[me].f,0,G,Z+224,8),r(ce[me].ea,0,oe,ve+224,8)),w=8*V*h.B,ce=h.sa,me=h.ta+16*T+16*V*h.R,Se=h.qa,ee=h.ra+8*T+w,ye=h.Ha,Ee=h.Ia+8*T+w,w=0;16>w;++w)r(ce,me+w*h.R,B,q+32*w,16);for(w=0;8>w;++w)r(Se,ee+w*h.B,G,Z+32*w,8),r(ye,Ee+w*h.B,oe,ve+32*w,8)}}function js(h,p,w,T,M,V,B,q,G){var Z=[0],oe=[0],ve=0,ee=G!=null?G.kd:0,ce=G??new ke;if(h==null||12>w)return 7;ce.data=h,ce.w=p,ce.ha=w,p=[p],w=[w],ce.gb=[ce.gb];e:{var me=p,Se=w,ye=ce.gb;if(e(h!=null),e(Se!=null),e(ye!=null),ye[0]=0,12<=Se[0]&&!n(h,me[0],"RIFF")){if(n(h,me[0]+8,"WEBP")){ye=3;break e}var Ee=ze(h,me[0]+4);if(12>Ee||4294967286<Ee){ye=3;break e}if(ee&&Ee>Se[0]-8){ye=7;break e}ye[0]=Ee,me[0]+=12,Se[0]-=12}ye=0}if(ye!=0)return ye;for(Ee=0<ce.gb[0],w=w[0];;){e:{var Te=h;Se=p,ye=w;var De=Z,Ce=oe,nt=me=[0];if((Je=ve=[ve])[0]=0,8>ye[0])ye=7;else{if(!n(Te,Se[0],"VP8X")){if(ze(Te,Se[0]+4)!=10){ye=3;break e}if(18>ye[0]){ye=7;break e}var $e=ze(Te,Se[0]+8),Ct=1+Pe(Te,Se[0]+12);if(2147483648<=Ct*(Te=1+Pe(Te,Se[0]+15))){ye=3;break e}nt!=null&&(nt[0]=$e),De!=null&&(De[0]=Ct),Ce!=null&&(Ce[0]=Te),Se[0]+=18,ye[0]-=18,Je[0]=1}ye=0}}if(ve=ve[0],me=me[0],ye!=0)return ye;if(Se=!!(2&me),!Ee&&ve)return 3;if(V!=null&&(V[0]=!!(16&me)),B!=null&&(B[0]=Se),q!=null&&(q[0]=0),B=Z[0],me=oe[0],ve&&Se&&G==null){ye=0;break}if(4>w){ye=7;break}if(Ee&&ve||!Ee&&!ve&&!n(h,p[0],"ALPH")){w=[w],ce.na=[ce.na],ce.P=[ce.P],ce.Sa=[ce.Sa];e:{$e=h,ye=p,Ee=w;var Je=ce.gb;De=ce.na,Ce=ce.P,nt=ce.Sa,Ct=22,e($e!=null),e(Ee!=null),Te=ye[0];var zt=Ee[0];for(e(De!=null),e(nt!=null),De[0]=null,Ce[0]=null,nt[0]=0;;){if(ye[0]=Te,Ee[0]=zt,8>zt){ye=7;break e}var yr=ze($e,Te+4);if(4294967286<yr){ye=3;break e}var Lt=8+yr+1&-2;if(Ct+=Lt,0<Je&&Ct>Je){ye=3;break e}if(!n($e,Te,"VP8 ")||!n($e,Te,"VP8L")){ye=0;break e}if(zt[0]<Lt){ye=7;break e}n($e,Te,"ALPH")||(De[0]=$e,Ce[0]=Te+8,nt[0]=yr),Te+=Lt,zt-=Lt}}if(w=w[0],ce.na=ce.na[0],ce.P=ce.P[0],ce.Sa=ce.Sa[0],ye!=0)break}w=[w],ce.Ja=[ce.Ja],ce.xa=[ce.xa];e:if(Je=h,ye=p,Ee=w,De=ce.gb[0],Ce=ce.Ja,nt=ce.xa,$e=ye[0],Te=!n(Je,$e,"VP8 "),Ct=!n(Je,$e,"VP8L"),e(Je!=null),e(Ee!=null),e(Ce!=null),e(nt!=null),8>Ee[0])ye=7;else{if(Te||Ct){if(Je=ze(Je,$e+4),12<=De&&Je>De-12){ye=3;break e}if(ee&&Je>Ee[0]-8){ye=7;break e}Ce[0]=Je,ye[0]+=8,Ee[0]-=8,nt[0]=Ct}else nt[0]=5<=Ee[0]&&Je[$e+0]==47&&!(Je[$e+4]>>5),Ce[0]=Ee[0];ye=0}if(w=w[0],ce.Ja=ce.Ja[0],ce.xa=ce.xa[0],p=p[0],ye!=0)break;if(4294967286<ce.Ja)return 3;if(q==null||Se||(q[0]=ce.xa?2:1),B=[B],me=[me],ce.xa){if(5>w){ye=7;break}q=B,ee=me,Se=V,h==null||5>w?h=0:5<=w&&h[p+0]==47&&!(h[p+4]>>5)?(Ee=[0],Je=[0],De=[0],ae(Ce=new K,h,p,w),ls(Ce,Ee,Je,De)?(q!=null&&(q[0]=Ee[0]),ee!=null&&(ee[0]=Je[0]),Se!=null&&(Se[0]=De[0]),h=1):h=0):h=0}else{if(10>w){ye=7;break}q=me,h==null||10>w||!Mu(h,p+3,w-3)?h=0:(ee=h[p+0]|h[p+1]<<8|h[p+2]<<16,Se=16383&(h[p+7]<<8|h[p+6]),h=16383&(h[p+9]<<8|h[p+8]),1&ee||3<(ee>>1&7)||!(ee>>4&1)||ee>>5>=ce.Ja||!Se||!h?h=0:(B&&(B[0]=Se),q&&(q[0]=h),h=1))}if(!h||(B=B[0],me=me[0],ve&&(Z[0]!=B||oe[0]!=me)))return 3;G!=null&&(G[0]=ce,G.offset=p-G.w,e(4294967286>p-G.w),e(G.offset==G.ha-w));break}return ye==0||ye==7&&ve&&G==null?(V!=null&&(V[0]|=ce.na!=null&&0<ce.na.length),T!=null&&(T[0]=B),M!=null&&(M[0]=me),0):ye}function fh(h,p,w){var T=p.width,M=p.height,V=0,B=0,q=T,G=M;if(p.Da=h!=null&&0<h.Da,p.Da&&(q=h.cd,G=h.bd,V=h.v,B=h.j,11>w||(V&=-2,B&=-2),0>V||0>B||0>=q||0>=G||V+q>T||B+G>M))return 0;if(p.v=V,p.j=B,p.va=V+q,p.o=B+G,p.U=q,p.T=G,p.da=h!=null&&0<h.da,p.da){if(!it(q,G,w=[h.ib],V=[h.hb]))return 0;p.ib=w[0],p.hb=V[0]}return p.ob=h!=null&&h.ob,p.Kb=h==null||!h.Sd,p.da&&(p.ob=p.ib<3*T/4&&p.hb<3*M/4,p.Kb=0),1}function ph(h){if(h==null)return 2;if(11>h.S){var p=h.f.RGBA;p.fb+=(h.height-1)*p.A,p.A=-p.A}else p=h.f.kb,h=h.height,p.O+=(h-1)*p.fa,p.fa=-p.fa,p.N+=(h-1>>1)*p.Ab,p.Ab=-p.Ab,p.W+=(h-1>>1)*p.Db,p.Db=-p.Db,p.F!=null&&(p.J+=(h-1)*p.lb,p.lb=-p.lb);return 0}function ka(h,p,w,T){if(T==null||0>=h||0>=p)return 2;if(w!=null){if(w.Da){var M=w.cd,V=w.bd,B=-2&w.v,q=-2&w.j;if(0>B||0>q||0>=M||0>=V||B+M>h||q+V>p)return 2;h=M,p=V}if(w.da){if(!it(h,p,M=[w.ib],V=[w.hb]))return 2;h=M[0],p=V[0]}}T.width=h,T.height=p;e:{var G=T.width,Z=T.height;if(h=T.S,0>=G||0>=Z||!(h>=xf&&13>h))h=2;else{if(0>=T.Rd&&T.sd==null){B=V=M=p=0;var oe=(q=G*F5[h])*Z;if(11>h||(V=(Z+1)/2*(p=(G+1)/2),h==12&&(B=(M=G)*Z)),(Z=s(oe+2*V+B))==null){h=1;break e}T.sd=Z,11>h?((G=T.f.RGBA).eb=Z,G.fb=0,G.A=q,G.size=oe):((G=T.f.kb).y=Z,G.O=0,G.fa=q,G.Fd=oe,G.f=Z,G.N=0+oe,G.Ab=p,G.Cd=V,G.ea=Z,G.W=0+oe+V,G.Db=p,G.Ed=V,h==12&&(G.F=Z,G.J=0+oe+2*V),G.Tc=B,G.lb=M)}if(p=1,M=T.S,V=T.width,B=T.height,M>=xf&&13>M)if(11>M)h=T.f.RGBA,p&=(q=Math.abs(h.A))*(B-1)+V<=h.size,p&=q>=V*F5[M],p&=h.eb!=null;else{h=T.f.kb,q=(V+1)/2,oe=(B+1)/2,G=Math.abs(h.fa),Z=Math.abs(h.Ab);var ve=Math.abs(h.Db),ee=Math.abs(h.lb),ce=ee*(B-1)+V;p&=G*(B-1)+V<=h.Fd,p&=Z*(oe-1)+q<=h.Cd,p=(p&=ve*(oe-1)+q<=h.Ed)&G>=V&Z>=q&ve>=q,p&=h.y!=null,p&=h.f!=null,p&=h.ea!=null,M==12&&(p&=ee>=V,p&=ce<=h.Tc,p&=h.F!=null)}else p=0;h=p?0:2}}return h!=0||w!=null&&w.fd&&(h=ph(T)),h}var ql=64,zi=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],qi=24,Pa=32,Bo=8,Ca=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];qe("Predictor0","PredictorAdd0"),I.Predictor0=function(){return 4278190080},I.Predictor1=function(h){return h},I.Predictor2=function(h,p,w){return p[w+0]},I.Predictor3=function(h,p,w){return p[w+1]},I.Predictor4=function(h,p,w){return p[w-1]},I.Predictor5=function(h,p,w){return tt(tt(h,p[w+1]),p[w+0])},I.Predictor6=function(h,p,w){return tt(h,p[w-1])},I.Predictor7=function(h,p,w){return tt(h,p[w+0])},I.Predictor8=function(h,p,w){return tt(p[w-1],p[w+0])},I.Predictor9=function(h,p,w){return tt(p[w+0],p[w+1])},I.Predictor10=function(h,p,w){return tt(tt(h,p[w-1]),tt(p[w+0],p[w+1]))},I.Predictor11=function(h,p,w){var T=p[w+0];return 0>=Ze(T>>24&255,h>>24&255,(p=p[w-1])>>24&255)+Ze(T>>16&255,h>>16&255,p>>16&255)+Ze(T>>8&255,h>>8&255,p>>8&255)+Ze(255&T,255&h,255&p)?T:h},I.Predictor12=function(h,p,w){var T=p[w+0];return(Wt((h>>24&255)+(T>>24&255)-((p=p[w-1])>>24&255))<<24|Wt((h>>16&255)+(T>>16&255)-(p>>16&255))<<16|Wt((h>>8&255)+(T>>8&255)-(p>>8&255))<<8|Wt((255&h)+(255&T)-(255&p)))>>>0},I.Predictor13=function(h,p,w){var T=p[w-1];return(Rt((h=tt(h,p[w+0]))>>24&255,T>>24&255)<<24|Rt(h>>16&255,T>>16&255)<<16|Rt(h>>8&255,T>>8&255)<<8|Rt(255&h,255&T))>>>0};var mh=I.PredictorAdd0;I.PredictorAdd1=ft,qe("Predictor2","PredictorAdd2"),qe("Predictor3","PredictorAdd3"),qe("Predictor4","PredictorAdd4"),qe("Predictor5","PredictorAdd5"),qe("Predictor6","PredictorAdd6"),qe("Predictor7","PredictorAdd7"),qe("Predictor8","PredictorAdd8"),qe("Predictor9","PredictorAdd9"),qe("Predictor10","PredictorAdd10"),qe("Predictor11","PredictorAdd11"),qe("Predictor12","PredictorAdd12"),qe("Predictor13","PredictorAdd13");var Wu=I.PredictorAdd2;et("ColorIndexInverseTransform","MapARGB","32b",function(h){return h>>8&255},function(h){return h}),et("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(h){return h},function(h){return h>>8&255});var er,yf=I.ColorIndexInverseTransform,co=I.MapARGB,ho=I.VP8LColorIndexInverseTransformAlpha,gh=I.MapAlpha,yh=I.VP8LPredictorsAdd=[];yh.length=16,(I.VP8LPredictors=[]).length=16,(I.VP8LPredictorsAdd_C=[]).length=16,(I.VP8LPredictors_C=[]).length=16;var vh,wh,La,Ra,ja,Hl,Da,Wl,vs,fo,tn,pn,tr,gr,zo,xh,$u,vf,d5,f5,p5,m5,g5,y5,_h,v5,w5,x5,_5=s(511),b5=s(2041),N5=s(225),S5=s(767),A5=0,Cg=b5,wf=N5,Hi=S5,ws=_5,xf=0,_f=1,E5=2,bf=3,Nf=4,Lg=5,T5=6,Rg=7,jg=8,Sf=9,Dg=10,nT=[2,3,7],rT=[3,3,11],I5=[280,256,256,256,40],iT=[0,1,1,1,0],sT=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],oT=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],aT=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],lT=8,Og=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Fg=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],bh=null,uT=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],cT=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],k5=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],hT=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],dT=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],fT=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],pT=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Oa=[],Ds=[],qo=[],mT=1,P5=2,Fa=[],xs=[];gs("UpsampleRgbLinePair",pe,3),gs("UpsampleBgrLinePair",be,3),gs("UpsampleRgbaLinePair",Qt,4),gs("UpsampleBgraLinePair",Dt,4),gs("UpsampleArgbLinePair",Mn,4),gs("UpsampleRgba4444LinePair",Bt,2),gs("UpsampleRgb565LinePair",Fe,2);var gT=I.UpsampleRgbLinePair,yT=I.UpsampleBgrLinePair,C5=I.UpsampleRgbaLinePair,L5=I.UpsampleBgraLinePair,R5=I.UpsampleArgbLinePair,j5=I.UpsampleRgba4444LinePair,vT=I.UpsampleRgb565LinePair,Af=16,Ef=1<<Af-1,Nh=-227,Mg=482,wT=6,D5=0,xT=s(256),_T=s(256),bT=s(256),NT=s(256),ST=s(Mg-Nh),AT=s(Mg-Nh);xn("YuvToRgbRow",pe,3),xn("YuvToBgrRow",be,3),xn("YuvToRgbaRow",Qt,4),xn("YuvToBgraRow",Dt,4),xn("YuvToArgbRow",Mn,4),xn("YuvToRgba4444Row",Bt,2),xn("YuvToRgb565Row",Fe,2);var O5=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Tf=[0,2,8],ET=[8,7,6,4,4,2,2,2,1,1,1,1],TT=1;this.WebPDecodeRGBA=function(h,p,w,T,M){var V=_f,B=new Ae,q=new kt;B.ba=q,q.S=V,q.width=[q.width],q.height=[q.height];var G=q.width,Z=q.height,oe=new lt;if(oe==null||h==null)var ve=2;else e(oe!=null),ve=js(h,p,w,oe.width,oe.height,oe.Pd,oe.Qd,oe.format,null);if(ve!=0?G=0:(G!=null&&(G[0]=oe.width[0]),Z!=null&&(Z[0]=oe.height[0]),G=1),G){q.width=q.width[0],q.height=q.height[0],T!=null&&(T[0]=q.width),M!=null&&(M[0]=q.height);e:{if(T=new so,(M=new ke).data=h,M.w=p,M.ha=w,M.kd=1,p=[0],e(M!=null),((h=js(M.data,M.w,M.ha,null,null,null,p,null,M))==0||h==7)&&p[0]&&(h=4),(p=h)==0){if(e(B!=null),T.data=M.data,T.w=M.w+M.offset,T.ha=M.ha-M.offset,T.put=ct,T.ac=qr,T.bc=Nn,T.ma=B,M.xa){if((h=no())==null){B=1;break e}if(function(ee,ce){var me=[0],Se=[0],ye=[0];t:for(;;){if(ee==null)return 0;if(ce==null)return ee.a=2,0;if(ee.l=ce,ee.a=0,ae(ee.m,ce.data,ce.w,ce.ha),!ls(ee.m,me,Se,ye)){ee.a=3;break t}if(ee.xb=P5,ce.width=me[0],ce.height=Se[0],!Mi(me[0],Se[0],1,ee,null))break t;return 1}return e(ee.a!=0),0}(h,T)){if(T=(p=ka(T.width,T.height,B.Oa,B.ba))==0){t:{T=h;n:for(;;){if(T==null){T=0;break t}if(e(T.s.yc!=null),e(T.s.Ya!=null),e(0<T.s.Wb),e((w=T.l)!=null),e((M=w.ma)!=null),T.xb!=0){if(T.ca=M.ba,T.tb=M.tb,e(T.ca!=null),!fh(M.Oa,w,bf)){T.a=2;break n}if(!Cs(T,w.width)||w.da)break n;if((w.da||ht(T.ca.S))&&Si(),11>T.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),T.ca.f.kb.F!=null&&Si()),T.Pb&&0<T.s.ua&&T.s.vb.X==null&&!Y(T.s.vb,T.s.Wa.Xa)){T.a=1;break n}T.xb=0}if(!Wr(T,T.V,T.Ba,T.c,T.i,w.o,to))break n;M.Dc=T.Ma,T=1;break t}e(T.a!=0),T=0}T=!T}T&&(p=h.a)}else p=h.a}else{if((h=new Fu)==null){B=1;break e}if(h.Fa=M.na,h.P=M.P,h.qc=M.Sa,us(h,T)){if((p=ka(T.width,T.height,B.Oa,B.ba))==0){if(h.Aa=0,w=B.Oa,e((M=h)!=null),w!=null){if(0<(G=0>(G=w.Md)?0:100<G?255:255*G/100)){for(Z=oe=0;4>Z;++Z)12>(ve=M.pb[Z]).lc&&(ve.ia=G*ET[0>ve.lc?0:ve.lc]>>3),oe|=ve.ia;oe&&(alert("todo:VP8InitRandom"),M.ia=1)}M.Ga=w.Id,100<M.Ga?M.Ga=100:0>M.Ga&&(M.Ga=0)}(function(ee,ce){if(ee==null)return 0;if(ce==null)return jn(ee,2,"NULL VP8Io parameter in VP8Decode().");if(!ee.cb&&!us(ee,ce))return 0;if(e(ee.cb),ce.ac==null||ce.ac(ce)){ce.ob&&(ee.L=0);var me=Tf[ee.L];if(ee.L==2?(ee.yb=0,ee.zb=0):(ee.yb=ce.v-me>>4,ee.zb=ce.j-me>>4,0>ee.yb&&(ee.yb=0),0>ee.zb&&(ee.zb=0)),ee.Va=ce.o+15+me>>4,ee.Hb=ce.va+15+me>>4,ee.Hb>ee.za&&(ee.Hb=ee.za),ee.Va>ee.Ub&&(ee.Va=ee.Ub),0<ee.L){var Se=ee.ed;for(me=0;4>me;++me){var ye;if(ee.Qa.Cb){var Ee=ee.Qa.Lb[me];ee.Qa.Fb||(Ee+=Se.Tb)}else Ee=Se.Tb;for(ye=0;1>=ye;++ye){var Te=ee.gd[me][ye],De=Ee;if(Se.Pc&&(De+=Se.vd[0],ye&&(De+=Se.od[0])),0<(De=0>De?0:63<De?63:De)){var Ce=De;0<Se.wb&&(Ce=4<Se.wb?Ce>>2:Ce>>1)>9-Se.wb&&(Ce=9-Se.wb),1>Ce&&(Ce=1),Te.dd=Ce,Te.tc=2*De+Ce,Te.ld=40<=De?2:15<=De?1:0}else Te.tc=0;Te.La=ye}}}me=0}else jn(ee,6,"Frame setup failed"),me=ee.a;if(me=me==0){if(me){ee.$c=0,0<ee.Aa||(ee.Ic=TT);t:{me=ee.Ic,Se=4*(Ce=ee.za);var nt=32*Ce,$e=Ce+1,Ct=0<ee.L?Ce*(0<ee.Aa?2:1):0,Je=(ee.Aa==2?2:1)*Ce;if((Te=Se+832+(ye=3*(16*me+Tf[ee.L])/2*nt)+(Ee=ee.Fa!=null&&0<ee.Fa.length?ee.Kc.c*ee.Kc.i:0))!=Te)me=0;else{if(Te>ee.Vb){if(ee.Vb=0,ee.Ec=s(Te),ee.Fc=0,ee.Ec==null){me=jn(ee,1,"no memory during frame initialization.");break t}ee.Vb=Te}Te=ee.Ec,De=ee.Fc,ee.Ac=Te,ee.Bc=De,De+=Se,ee.Gd=o(nt,Dl),ee.Hd=0,ee.rb=o($e+1,Ui),ee.sb=1,ee.wa=Ct?o(Ct,Sr):null,ee.Y=0,ee.D.Nb=0,ee.D.wa=ee.wa,ee.D.Y=ee.Y,0<ee.Aa&&(ee.D.Y+=Ce),e(!0),ee.oc=Te,ee.pc=De,De+=832,ee.ya=o(Je,Rl),ee.aa=0,ee.D.ya=ee.ya,ee.D.aa=ee.aa,ee.Aa==2&&(ee.D.aa+=Ce),ee.R=16*Ce,ee.B=8*Ce,Ce=(nt=Tf[ee.L])*ee.R,nt=nt/2*ee.B,ee.sa=Te,ee.ta=De+Ce,ee.qa=ee.sa,ee.ra=ee.ta+16*me*ee.R+nt,ee.Ha=ee.qa,ee.Ia=ee.ra+8*me*ee.B+nt,ee.$c=0,De+=ye,ee.mb=Ee?Te:null,ee.nb=Ee?De:null,e(De+Ee<=ee.Fc+ee.Vb),Fl(ee),i(ee.Ac,ee.Bc,0,Se),me=1}}if(me){if(ce.ka=0,ce.y=ee.sa,ce.O=ee.ta,ce.f=ee.qa,ce.N=ee.ra,ce.ea=ee.Ha,ce.Vd=ee.Ia,ce.fa=ee.R,ce.Rc=ee.B,ce.F=null,ce.J=0,!A5){for(me=-255;255>=me;++me)_5[255+me]=0>me?-me:me;for(me=-1020;1020>=me;++me)b5[1020+me]=-128>me?-128:127<me?127:me;for(me=-112;112>=me;++me)N5[112+me]=-16>me?-16:15<me?15:me;for(me=-255;510>=me;++me)S5[255+me]=0>me?0:255<me?255:me;A5=1}Da=cs,Wl=Uu,fo=Mt,tn=Fo,pn=oo,vs=Na,tr=Ia,gr=ms,zo=O,xh=X,$u=zl,vf=v,d5=ie,f5=fe,p5=uo,m5=ui,g5=Bl,y5=Hu,Ds[0]=hh,Ds[1]=Vu,Ds[2]=uh,Ds[3]=ch,Ds[4]=Ar,Ds[5]=dh,Ds[6]=Ls,Ds[7]=Aa,Ds[8]=Ea,Ds[9]=Rs,Oa[0]=hs,Oa[1]=lh,Oa[2]=Ml,Oa[3]=Bu,Oa[4]=ao,Oa[5]=Sa,Oa[6]=zu,qo[0]=Ul,qo[1]=ah,qo[2]=Vi,qo[3]=Uo,qo[4]=Vl,qo[5]=hn,qo[6]=qu,me=1}else me=0}me&&(me=function(zt,yr){for(zt.M=0;zt.M<zt.Va;++zt.M){var Lt,Xe=zt.Jc[zt.M&zt.Xb],Ue=zt.m,nr=zt;for(Lt=0;Lt<nr.za;++Lt){var Et=Ue,$t=nr,Sn=$t.Ac,Lr=$t.Bc+4*Lt,hi=$t.zc,Wn=$t.ya[$t.aa+Lt];if($t.Qa.Bb?Wn.$b=de(Et,$t.Pa.jb[0])?2+de(Et,$t.Pa.jb[2]):de(Et,$t.Pa.jb[1]):Wn.$b=0,$t.kc&&(Wn.Ad=de(Et,$t.Bd)),Wn.Za=!de(Et,145)+0,Wn.Za){var Gr=Wn.Ob,di=0;for($t=0;4>$t;++$t){var vr,Kt=hi[0+$t];for(vr=0;4>vr;++vr){Kt=dT[Sn[Lr+vr]][Kt];for(var rn=k5[de(Et,Kt[0])];0<rn;)rn=k5[2*rn+de(Et,Kt[rn])];Kt=-rn,Sn[Lr+vr]=Kt}r(Gr,di,Sn,Lr,4),di+=4,hi[0+$t]=Kt}}else Kt=de(Et,156)?de(Et,128)?1:3:de(Et,163)?2:0,Wn.Ob[0]=Kt,i(Sn,Lr,Kt,4),i(hi,0,Kt,4);Wn.Dd=de(Et,142)?de(Et,114)?de(Et,183)?1:3:2:0}if(nr.m.Ka)return jn(zt,7,"Premature end-of-partition0 encountered.");for(;zt.ja<zt.za;++zt.ja){if(nr=Xe,Et=(Ue=zt).rb[Ue.sb-1],Sn=Ue.rb[Ue.sb+Ue.ja],Lt=Ue.ya[Ue.aa+Ue.ja],Lr=Ue.kc?Lt.Ad:0)Et.la=Sn.la=0,Lt.Za||(Et.Na=Sn.Na=0),Lt.Hc=0,Lt.Gc=0,Lt.ia=0;else{var $n,sn;if(Et=Sn,Sn=nr,Lr=Ue.Pa.Xc,hi=Ue.ya[Ue.aa+Ue.ja],Wn=Ue.pb[hi.$b],$t=hi.ad,Gr=0,di=Ue.rb[Ue.sb-1],Kt=vr=0,i($t,Gr,0,384),hi.Za)var Rr=0,Os=Lr[3];else{rn=s(16);var rr=Et.Na+di.Na;if(rr=bh(Sn,Lr[1],rr,Wn.Eb,0,rn,0),Et.Na=di.Na=(0<rr)+0,1<rr)Da(rn,0,$t,Gr);else{var Ai=rn[0]+3>>3;for(rn=0;256>rn;rn+=16)$t[Gr+rn]=Ai}Rr=1,Os=Lr[0]}var mn=15&Et.la,wr=15&di.la;for(rn=0;4>rn;++rn){var Wi=1&wr;for(Ai=sn=0;4>Ai;++Ai)mn=mn>>1|(Wi=(rr=bh(Sn,Os,rr=Wi+(1&mn),Wn.Sc,Rr,$t,Gr))>Rr)<<7,sn=sn<<2|(3<rr?3:1<rr?2:$t[Gr+0]!=0),Gr+=16;mn>>=4,wr=wr>>1|Wi<<7,vr=(vr<<8|sn)>>>0}for(Os=mn,Rr=wr>>4,$n=0;4>$n;$n+=2){for(sn=0,mn=Et.la>>4+$n,wr=di.la>>4+$n,rn=0;2>rn;++rn){for(Wi=1&wr,Ai=0;2>Ai;++Ai)rr=Wi+(1&mn),mn=mn>>1|(Wi=0<(rr=bh(Sn,Lr[2],rr,Wn.Qc,0,$t,Gr)))<<3,sn=sn<<2|(3<rr?3:1<rr?2:$t[Gr+0]!=0),Gr+=16;mn>>=2,wr=wr>>1|Wi<<5}Kt|=sn<<4*$n,Os|=mn<<4<<$n,Rr|=(240&wr)<<$n}Et.la=Os,di.la=Rr,hi.Hc=vr,hi.Gc=Kt,hi.ia=43690&Kt?0:Wn.ia,Lr=!(vr|Kt)}if(0<Ue.L&&(Ue.wa[Ue.Y+Ue.ja]=Ue.gd[Lt.$b][Lt.Za],Ue.wa[Ue.Y+Ue.ja].La|=!Lr),nr.Ka)return jn(zt,7,"Premature end-of-file encountered.")}if(Fl(zt),Ue=yr,nr=1,Lt=(Xe=zt).D,Et=0<Xe.L&&Xe.M>=Xe.zb&&Xe.M<=Xe.Va,Xe.Aa==0)t:{if(Lt.M=Xe.M,Lt.uc=Et,Cr(Xe,Lt),nr=1,Lt=(sn=Xe.D).Nb,Et=(Kt=Tf[Xe.L])*Xe.R,Sn=Kt/2*Xe.B,rn=16*Lt*Xe.R,Ai=8*Lt*Xe.B,Lr=Xe.sa,hi=Xe.ta-Et+rn,Wn=Xe.qa,$t=Xe.ra-Sn+Ai,Gr=Xe.Ha,di=Xe.Ia-Sn+Ai,wr=(mn=sn.M)==0,vr=mn>=Xe.Va-1,Xe.Aa==2&&Cr(Xe,sn),sn.uc)for(Wi=(rr=Xe).D.M,e(rr.D.uc),sn=rr.yb;sn<rr.Hb;++sn){Rr=sn,Os=Wi;var fi=($i=(jr=rr).D).Nb;$n=jr.R;var $i=$i.wa[$i.Y+Rr],Gi=jr.sa,Ei=jr.ta+16*fi*$n+16*Rr,Ki=$i.dd,_n=$i.tc;if(_n!=0)if(e(3<=_n),jr.L==1)0<Rr&&m5(Gi,Ei,$n,_n+4),$i.La&&y5(Gi,Ei,$n,_n),0<Os&&p5(Gi,Ei,$n,_n+4),$i.La&&g5(Gi,Ei,$n,_n);else{var Yi=jr.B,Fs=jr.qa,$l=jr.ra+8*fi*Yi+8*Rr,Ho=jr.Ha,jr=jr.Ia+8*fi*Yi+8*Rr;fi=$i.ld,0<Rr&&(gr(Gi,Ei,$n,_n+4,Ki,fi),xh(Fs,$l,Ho,jr,Yi,_n+4,Ki,fi)),$i.La&&(vf(Gi,Ei,$n,_n,Ki,fi),f5(Fs,$l,Ho,jr,Yi,_n,Ki,fi)),0<Os&&(tr(Gi,Ei,$n,_n+4,Ki,fi),zo(Fs,$l,Ho,jr,Yi,_n+4,Ki,fi)),$i.La&&($u(Gi,Ei,$n,_n,Ki,fi),d5(Fs,$l,Ho,jr,Yi,_n,Ki,fi))}}if(Xe.ia&&alert("todo:DitherRow"),Ue.put!=null){if(sn=16*mn,mn=16*(mn+1),wr?(Ue.y=Xe.sa,Ue.O=Xe.ta+rn,Ue.f=Xe.qa,Ue.N=Xe.ra+Ai,Ue.ea=Xe.Ha,Ue.W=Xe.Ia+Ai):(sn-=Kt,Ue.y=Lr,Ue.O=hi,Ue.f=Wn,Ue.N=$t,Ue.ea=Gr,Ue.W=di),vr||(mn-=Kt),mn>Ue.o&&(mn=Ue.o),Ue.F=null,Ue.J=null,Xe.Fa!=null&&0<Xe.Fa.length&&sn<mn&&(Ue.J=nn(Xe,Ue,sn,mn-sn),Ue.F=Xe.mb,Ue.F==null&&Ue.F.length==0)){nr=jn(Xe,3,"Could not decode alpha data.");break t}sn<Ue.j&&(Kt=Ue.j-sn,sn=Ue.j,e(!(1&Kt)),Ue.O+=Xe.R*Kt,Ue.N+=Xe.B*(Kt>>1),Ue.W+=Xe.B*(Kt>>1),Ue.F!=null&&(Ue.J+=Ue.width*Kt)),sn<mn&&(Ue.O+=Ue.v,Ue.N+=Ue.v>>1,Ue.W+=Ue.v>>1,Ue.F!=null&&(Ue.J+=Ue.v),Ue.ka=sn-Ue.j,Ue.U=Ue.va-Ue.v,Ue.T=mn-sn,nr=Ue.put(Ue))}Lt+1!=Xe.Ic||vr||(r(Xe.sa,Xe.ta-Et,Lr,hi+16*Xe.R,Et),r(Xe.qa,Xe.ra-Sn,Wn,$t+8*Xe.B,Sn),r(Xe.Ha,Xe.Ia-Sn,Gr,di+8*Xe.B,Sn))}if(!nr)return jn(zt,6,"Output aborted.")}return 1}(ee,ce)),ce.bc!=null&&ce.bc(ce),me&=1}return me?(ee.cb=0,me):0})(h,T)||(p=h.a)}}else p=h.a}p==0&&B.Oa!=null&&B.Oa.fd&&(p=ph(B.ba))}B=p}V=B!=0?null:11>V?q.f.RGBA.eb:q.f.kb.y}else V=null;return V};var F5=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function u(I,F){for(var b="",S=0;S<4;S++)b+=String.fromCharCode(I[F++]);return b}function c(I,F){return I[F+0]|I[F+1]<<8}function g(I,F){return(I[F+0]|I[F+1]<<8|I[F+2]<<16)>>>0}function y(I,F){return(I[F+0]|I[F+1]<<8|I[F+2]<<16|I[F+3]<<24)>>>0}new l;var m=[0],N=[0],A=[],C=new l,_=t,k=function(I,F){var b={},S=0,P=!1,J=0,le=0;if(b.frames=[],!function(U,K){for(var W=0;W<4;W++)if(U[K+W]!="RIFF".charCodeAt(W))return!0;return!1}(I,F)){for(y(I,F+=4),F+=8;F<I.length;){var we=u(I,F),xe=y(I,F+=4);F+=4;var ne=xe+(1&xe);switch(we){case"VP8 ":case"VP8L":b.frames[S]===void 0&&(b.frames[S]={}),(ge=b.frames[S]).src_off=P?le:F-8,ge.src_size=J+xe+8,S++,P&&(P=!1,J=0,le=0);break;case"VP8X":(ge=b.header={}).feature_flags=I[F];var ae=F+4;ge.canvas_width=1+g(I,ae),ae+=3,ge.canvas_height=1+g(I,ae),ae+=3;break;case"ALPH":P=!0,J=ne+8,le=F-8;break;case"ANIM":(ge=b.header).bgcolor=y(I,F),ae=F+4,ge.loop_count=c(I,ae),ae+=2;break;case"ANMF":var _e,ge;(ge=b.frames[S]={}).offset_x=2*g(I,F),F+=3,ge.offset_y=2*g(I,F),F+=3,ge.width=1+g(I,F),F+=3,ge.height=1+g(I,F),F+=3,ge.duration=g(I,F),F+=3,_e=I[F++],ge.dispose=1&_e,ge.blend=_e>>1&1}we!="ANMF"&&(F+=ne)}return b}}(_,0);k.response=_,k.rgbaoutput=!0,k.dataurl=!1;var R=k.header?k.header:null,D=k.frames?k.frames:null;if(R){R.loop_counter=R.loop_count,m=[R.canvas_height],N=[R.canvas_width];for(var z=0;z<D.length&&D[z].blend!=0;z++);}var Q=D[0],j=C.WebPDecodeRGBA(_,Q.src_off,Q.src_size,N,m);Q.rgba=j,Q.imgwidth=N[0],Q.imgheight=m[0];for(var E=0;E<N[0]*m[0]*4;E++)A[E]=j[E];return this.width=N,this.height=m,this.data=A,this}(function(t){var e,n,r,i,s,o,a,l,u,c=function(U){return U=U||{},this.isStrokeTransparent=U.isStrokeTransparent||!1,this.strokeOpacity=U.strokeOpacity||1,this.strokeStyle=U.strokeStyle||"#000000",this.fillStyle=U.fillStyle||"#000000",this.isFillTransparent=U.isFillTransparent||!1,this.fillOpacity=U.fillOpacity||1,this.font=U.font||"10px sans-serif",this.textBaseline=U.textBaseline||"alphabetic",this.textAlign=U.textAlign||"left",this.lineWidth=U.lineWidth||1,this.lineJoin=U.lineJoin||"miter",this.lineCap=U.lineCap||"butt",this.path=U.path||[],this.transform=U.transform!==void 0?U.transform.clone():new l,this.globalCompositeOperation=U.globalCompositeOperation||"normal",this.globalAlpha=U.globalAlpha||1,this.clip_path=U.clip_path||[],this.currentPoint=U.currentPoint||new o,this.miterLimit=U.miterLimit||10,this.lastPoint=U.lastPoint||new o,this.lineDashOffset=U.lineDashOffset||0,this.lineDash=U.lineDash||[],this.margin=U.margin||[0,0,0,0],this.prevPageLastElemOffset=U.prevPageLastElemOffset||0,this.ignoreClearRect=typeof U.ignoreClearRect!="boolean"||U.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new g(this),e=this.internal.f2,n=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,o=this.internal.Point,a=this.internal.Rectangle,l=this.internal.Matrix,u=new c}]);var g=function(U){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var K=U;Object.defineProperty(this,"pdf",{get:function(){return K}});var W=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return W},set:function(Y){W=!!Y}});var te=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return te},set:function(Y){te=!!Y}});var re=0;Object.defineProperty(this,"posX",{get:function(){return re},set:function(Y){isNaN(Y)||(re=Y)}});var $=0;Object.defineProperty(this,"posY",{get:function(){return $},set:function(Y){isNaN(Y)||($=Y)}}),Object.defineProperty(this,"margin",{get:function(){return u.margin},set:function(Y){var Me;typeof Y=="number"?Me=[Y,Y,Y,Y]:((Me=new Array(4))[0]=Y[0],Me[1]=Y.length>=2?Y[1]:Me[0],Me[2]=Y.length>=3?Y[2]:Me[0],Me[3]=Y.length>=4?Y[3]:Me[1]),u.margin=Me}});var ue=!1;Object.defineProperty(this,"autoPaging",{get:function(){return ue},set:function(Y){ue=Y}});var he=0;Object.defineProperty(this,"lastBreak",{get:function(){return he},set:function(Y){he=Y}});var de=[];Object.defineProperty(this,"pageBreaks",{get:function(){return de},set:function(Y){de=Y}}),Object.defineProperty(this,"ctx",{get:function(){return u},set:function(Y){Y instanceof c&&(u=Y)}}),Object.defineProperty(this,"path",{get:function(){return u.path},set:function(Y){u.path=Y}});var Ne=[];Object.defineProperty(this,"ctxStack",{get:function(){return Ne},set:function(Y){Ne=Y}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Y){var Me;Me=y(Y),this.ctx.fillStyle=Me.style,this.ctx.isFillTransparent=Me.a===0,this.ctx.fillOpacity=Me.a,this.pdf.setFillColor(Me.r,Me.g,Me.b,{a:Me.a}),this.pdf.setTextColor(Me.r,Me.g,Me.b,{a:Me.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Y){var Me=y(Y);this.ctx.strokeStyle=Me.style,this.ctx.isStrokeTransparent=Me.a===0,this.ctx.strokeOpacity=Me.a,Me.a===0?this.pdf.setDrawColor(255,255,255):(Me.a,this.pdf.setDrawColor(Me.r,Me.g,Me.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Y){["butt","round","square"].indexOf(Y)!==-1&&(this.ctx.lineCap=Y,this.pdf.setLineCap(Y))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Y){isNaN(Y)||(this.ctx.lineWidth=Y,this.pdf.setLineWidth(Y))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Y){["bevel","round","miter"].indexOf(Y)!==-1&&(this.ctx.lineJoin=Y,this.pdf.setLineJoin(Y))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Y){isNaN(Y)||(this.ctx.miterLimit=Y,this.pdf.setMiterLimit(Y))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Y){this.ctx.textBaseline=Y}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Y){["right","end","center","left","start"].indexOf(Y)!==-1&&(this.ctx.textAlign=Y)}});var Re=null,Pe=null,ze=null;Object.defineProperty(this,"fontFaces",{get:function(){return ze},set:function(Y){Re=null,Pe=null,ze=Y}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Y){var Me;if(this.ctx.font=Y,(Me=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z0-9]+?)\s*$/i.exec(Y))!==null){var _t=Me[1];Me[2];var it=Me[3],Le=Me[4];Me[5];var st=Me[6],qe=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Le)[2];Le=Math.floor(qe==="px"?parseFloat(Le)*this.pdf.internal.scaleFactor:qe==="em"?parseFloat(Le)*this.pdf.getFontSize():parseFloat(Le)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Le);var at=function(et){var dn,Ft,It=[],At=et.trim();if(At==="")return s1;if(At in Hb)return[Hb[At]];for(;At!=="";){switch(Ft=null,dn=(At=$b(At)).charAt(0)){case'"':case"'":Ft=iB(At.substring(1),dn);break;default:Ft=sB(At)}if(Ft===null||(It.push(Ft[0]),(At=$b(Ft[1]))!==""&&At.charAt(0)!==","))return s1;At=At.replace(/^,/,"")}return It}(st);if(this.fontFaces){var tt=function(et,dn){var Ft=et.getFontList(),It=JSON.stringify(Ft);if(Re===null||Pe!==It){var At=function(wn){var ot=[];return Object.keys(wn).forEach(function(Zt){wn[Zt].forEach(function(ht){var yt=null;switch(ht){case"bold":yt={family:Zt,weight:"bold"};break;case"italic":yt={family:Zt,style:"italic"};break;case"bolditalic":yt={family:Zt,weight:"bold",style:"italic"};break;case"":case"normal":yt={family:Zt}}yt!==null&&(yt.ref={name:Zt,style:ht},ot.push(yt))})}),ot}(Ft);Re=function(wn){for(var ot={},Zt=0;Zt<wn.length;++Zt){var ht=i1(wn[Zt]),yt=ht.family,en=ht.stretch,kt=ht.style,lt=ht.weight;ot[yt]=ot[yt]||{},ot[yt][en]=ot[yt][en]||{},ot[yt][en][kt]=ot[yt][en][kt]||{},ot[yt][en][kt][lt]=ht}return ot}(At.concat(dn)),Pe=It}return Re}(this.pdf,this.fontFaces),Wt=at.map(function(et){return{family:et,stretch:"normal",weight:it,style:_t}}),Rt=function(et,dn,Ft){for(var It=(Ft=Ft||{}).defaultFontFamily||"times",At=Object.assign({},rB,Ft.genericFontFamilies||{}),wn=null,ot=null,Zt=0;Zt<dn.length;++Zt)if(At[(wn=i1(dn[Zt])).family]&&(wn.family=At[wn.family]),et.hasOwnProperty(wn.family)){ot=et[wn.family];break}if(!(ot=ot||et[It]))throw new Error("Could not find a font-family for the rule '"+Wb(wn)+"' and default family '"+It+"'.");if(ot=function(ht,yt){if(yt[ht])return yt[ht];var en=K2[ht],kt=en<=K2.normal?-1:1,lt=qb(yt,OE,en,kt);if(!lt)throw new Error("Could not find a matching font-stretch value for "+ht);return lt}(wn.stretch,ot),ot=function(ht,yt){if(yt[ht])return yt[ht];for(var en=DE[ht],kt=0;kt<en.length;++kt)if(yt[en[kt]])return yt[en[kt]];throw new Error("Could not find a matching font-style for "+ht)}(wn.style,ot),!(ot=function(ht,yt){if(yt[ht])return yt[ht];if(ht===400&&yt[500])return yt[500];if(ht===500&&yt[400])return yt[400];var en=nB[ht],kt=qb(yt,FE,en,ht<400?-1:1);if(!kt)throw new Error("Could not find a matching font-weight for value "+ht);return kt}(wn.weight,ot)))throw new Error("Failed to resolve a font for the rule '"+Wb(wn)+"'.");return ot}(tt,Wt);this.pdf.setFont(Rt.ref.name,Rt.ref.style)}else{var Ze="";(it==="bold"||parseInt(it,10)>=700||_t==="bold")&&(Ze="bold"),_t==="italic"&&(Ze+="italic"),Ze.length===0&&(Ze="normal");for(var ft="",Pt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Ke=0;Ke<at.length;Ke++){if(this.pdf.internal.getFont(at[Ke],Ze,{noFallback:!0,disableWarning:!0})!==void 0){ft=at[Ke];break}if(Ze==="bolditalic"&&this.pdf.internal.getFont(at[Ke],"bold",{noFallback:!0,disableWarning:!0})!==void 0)ft=at[Ke],Ze="bold";else if(this.pdf.internal.getFont(at[Ke],"normal",{noFallback:!0,disableWarning:!0})!==void 0){ft=at[Ke],Ze="normal";break}}if(ft===""){for(var wt=0;wt<at.length;wt++)if(Pt[at[wt]]){ft=Pt[at[wt]];break}}ft=ft===""?"Times":ft,this.pdf.setFont(ft,Ze)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Y){this.ctx.globalCompositeOperation=Y}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Y){this.ctx.globalAlpha=Y}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Y){this.ctx.lineDashOffset=Y,ge.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Y){this.ctx.lineDash=Y,ge.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Y){this.ctx.ignoreClearRect=!!Y}})};g.prototype.setLineDash=function(U){this.lineDash=U},g.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},g.prototype.fill=function(){D.call(this,"fill",!1)},g.prototype.stroke=function(){D.call(this,"stroke",!1)},g.prototype.beginPath=function(){this.path=[{type:"begin"}]},g.prototype.moveTo=function(U,K){if(isNaN(U)||isNaN(K))throw gn.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var W=this.ctx.transform.applyToPoint(new o(U,K));this.path.push({type:"mt",x:W.x,y:W.y}),this.ctx.lastPoint=new o(U,K)},g.prototype.closePath=function(){var U=new o(0,0),K=0;for(K=this.path.length-1;K!==-1;K--)if(this.path[K].type==="begin"&&an(this.path[K+1])==="object"&&typeof this.path[K+1].x=="number"){U=new o(this.path[K+1].x,this.path[K+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(U.x,U.y)},g.prototype.lineTo=function(U,K){if(isNaN(U)||isNaN(K))throw gn.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var W=this.ctx.transform.applyToPoint(new o(U,K));this.path.push({type:"lt",x:W.x,y:W.y}),this.ctx.lastPoint=new o(W.x,W.y)},g.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),D.call(this,null,!0)},g.prototype.quadraticCurveTo=function(U,K,W,te){if(isNaN(W)||isNaN(te)||isNaN(U)||isNaN(K))throw gn.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var re=this.ctx.transform.applyToPoint(new o(W,te)),$=this.ctx.transform.applyToPoint(new o(U,K));this.path.push({type:"qct",x1:$.x,y1:$.y,x:re.x,y:re.y}),this.ctx.lastPoint=new o(re.x,re.y)},g.prototype.bezierCurveTo=function(U,K,W,te,re,$){if(isNaN(re)||isNaN($)||isNaN(U)||isNaN(K)||isNaN(W)||isNaN(te))throw gn.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var ue=this.ctx.transform.applyToPoint(new o(re,$)),he=this.ctx.transform.applyToPoint(new o(U,K)),de=this.ctx.transform.applyToPoint(new o(W,te));this.path.push({type:"bct",x1:he.x,y1:he.y,x2:de.x,y2:de.y,x:ue.x,y:ue.y}),this.ctx.lastPoint=new o(ue.x,ue.y)},g.prototype.arc=function(U,K,W,te,re,$){if(isNaN(U)||isNaN(K)||isNaN(W)||isNaN(te)||isNaN(re))throw gn.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if($=!!$,!this.ctx.transform.isIdentity){var ue=this.ctx.transform.applyToPoint(new o(U,K));U=ue.x,K=ue.y;var he=this.ctx.transform.applyToPoint(new o(0,W)),de=this.ctx.transform.applyToPoint(new o(0,0));W=Math.sqrt(Math.pow(he.x-de.x,2)+Math.pow(he.y-de.y,2))}Math.abs(re-te)>=2*Math.PI&&(te=0,re=2*Math.PI),this.path.push({type:"arc",x:U,y:K,radius:W,startAngle:te,endAngle:re,counterclockwise:$})},g.prototype.arcTo=function(U,K,W,te,re){throw new Error("arcTo not implemented.")},g.prototype.rect=function(U,K,W,te){if(isNaN(U)||isNaN(K)||isNaN(W)||isNaN(te))throw gn.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(U,K),this.lineTo(U+W,K),this.lineTo(U+W,K+te),this.lineTo(U,K+te),this.lineTo(U,K),this.lineTo(U+W,K),this.lineTo(U,K)},g.prototype.fillRect=function(U,K,W,te){if(isNaN(U)||isNaN(K)||isNaN(W)||isNaN(te))throw gn.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!m.call(this)){var re={};this.lineCap!=="butt"&&(re.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(re.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(U,K,W,te),this.fill(),re.hasOwnProperty("lineCap")&&(this.lineCap=re.lineCap),re.hasOwnProperty("lineJoin")&&(this.lineJoin=re.lineJoin)}},g.prototype.strokeRect=function(U,K,W,te){if(isNaN(U)||isNaN(K)||isNaN(W)||isNaN(te))throw gn.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");N.call(this)||(this.beginPath(),this.rect(U,K,W,te),this.stroke())},g.prototype.clearRect=function(U,K,W,te){if(isNaN(U)||isNaN(K)||isNaN(W)||isNaN(te))throw gn.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(U,K,W,te))},g.prototype.save=function(U){U=typeof U!="boolean"||U;for(var K=this.pdf.internal.getCurrentPageInfo().pageNumber,W=0;W<this.pdf.internal.getNumberOfPages();W++)this.pdf.setPage(W+1),this.pdf.internal.out("q");if(this.pdf.setPage(K),U){this.ctx.fontSize=this.pdf.internal.getFontSize();var te=new c(this.ctx);this.ctxStack.push(this.ctx),this.ctx=te}},g.prototype.restore=function(U){U=typeof U!="boolean"||U;for(var K=this.pdf.internal.getCurrentPageInfo().pageNumber,W=0;W<this.pdf.internal.getNumberOfPages();W++)this.pdf.setPage(W+1),this.pdf.internal.out("Q");this.pdf.setPage(K),U&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},g.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var y=function(U){var K,W,te,re;if(U.isCanvasGradient===!0&&(U=U.getColor()),!U)return{r:0,g:0,b:0,a:0,style:U};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(U))K=0,W=0,te=0,re=0;else{var $=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(U);if($!==null)K=parseInt($[1]),W=parseInt($[2]),te=parseInt($[3]),re=1;else if(($=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(U))!==null)K=parseInt($[1]),W=parseInt($[2]),te=parseInt($[3]),re=parseFloat($[4]);else{if(re=1,typeof U=="string"&&U.charAt(0)!=="#"){var ue=new IE(U);U=ue.ok?ue.toHex():"#000000"}U.length===4?(K=U.substring(1,2),K+=K,W=U.substring(2,3),W+=W,te=U.substring(3,4),te+=te):(K=U.substring(1,3),W=U.substring(3,5),te=U.substring(5,7)),K=parseInt(K,16),W=parseInt(W,16),te=parseInt(te,16)}}return{r:K,g:W,b:te,a:re,style:U}},m=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},N=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};g.prototype.fillText=function(U,K,W,te){if(isNaN(K)||isNaN(W)||typeof U!="string")throw gn.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(te=isNaN(te)?void 0:te,!m.call(this)){var re=ne(this.ctx.transform.rotation),$=this.ctx.transform.scaleX;S.call(this,{text:U,x:K,y:W,scale:$,angle:re,align:this.textAlign,maxWidth:te})}},g.prototype.strokeText=function(U,K,W,te){if(isNaN(K)||isNaN(W)||typeof U!="string")throw gn.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!N.call(this)){te=isNaN(te)?void 0:te;var re=ne(this.ctx.transform.rotation),$=this.ctx.transform.scaleX;S.call(this,{text:U,x:K,y:W,scale:$,renderingMode:"stroke",angle:re,align:this.textAlign,maxWidth:te})}},g.prototype.measureText=function(U){if(typeof U!="string")throw gn.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var K=this.pdf,W=this.pdf.internal.scaleFactor,te=K.internal.getFontSize(),re=K.getStringUnitWidth(U)*te/K.internal.scaleFactor;return new function($){var ue=($=$||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return ue}}),this}({width:re*=Math.round(96*W/72*1e4)/1e4})},g.prototype.scale=function(U,K){if(isNaN(U)||isNaN(K))throw gn.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var W=new l(U,0,0,K,0,0);this.ctx.transform=this.ctx.transform.multiply(W)},g.prototype.rotate=function(U){if(isNaN(U))throw gn.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var K=new l(Math.cos(U),Math.sin(U),-Math.sin(U),Math.cos(U),0,0);this.ctx.transform=this.ctx.transform.multiply(K)},g.prototype.translate=function(U,K){if(isNaN(U)||isNaN(K))throw gn.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var W=new l(1,0,0,1,U,K);this.ctx.transform=this.ctx.transform.multiply(W)},g.prototype.transform=function(U,K,W,te,re,$){if(isNaN(U)||isNaN(K)||isNaN(W)||isNaN(te)||isNaN(re)||isNaN($))throw gn.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var ue=new l(U,K,W,te,re,$);this.ctx.transform=this.ctx.transform.multiply(ue)},g.prototype.setTransform=function(U,K,W,te,re,$){U=isNaN(U)?1:U,K=isNaN(K)?0:K,W=isNaN(W)?0:W,te=isNaN(te)?1:te,re=isNaN(re)?0:re,$=isNaN($)?0:$,this.ctx.transform=new l(U,K,W,te,re,$)};var A=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};g.prototype.drawImage=function(U,K,W,te,re,$,ue,he,de){var Ne=this.pdf.getImageProperties(U),Re=1,Pe=1,ze=1,Y=1;te!==void 0&&he!==void 0&&(ze=he/te,Y=de/re,Re=Ne.width/te*he/te,Pe=Ne.height/re*de/re),$===void 0&&($=K,ue=W,K=0,W=0),te!==void 0&&he===void 0&&(he=te,de=re),te===void 0&&he===void 0&&(he=Ne.width,de=Ne.height);var Me=this.ctx.transform.decompose(),_t=ne(Me.rotate.shx),it=new l,Le=(it=(it=(it=it.multiply(Me.translate)).multiply(Me.skew)).multiply(Me.scale)).applyToRectangle(new a($-K*ze,ue-W*Y,te*Re,re*Pe));if(this.autoPaging){for(var st,qe=C.call(this,Le),at=[],tt=0;tt<qe.length;tt+=1)at.indexOf(qe[tt])===-1&&at.push(qe[tt]);R(at);for(var Wt=at[0],Rt=at[at.length-1],Ze=Wt;Ze<Rt+1;Ze++){this.pdf.setPage(Ze);var ft=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Pt=Ze===1?this.posY+this.margin[0]:this.margin[0],Ke=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],wt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],et=Ze===1?0:Ke+(Ze-2)*wt;if(this.ctx.clip_path.length!==0){var dn=this.path;st=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=k(st,this.posX+this.margin[3],-et+Pt+this.ctx.prevPageLastElemOffset),z.call(this,"fill",!0),this.path=dn}var Ft=JSON.parse(JSON.stringify(Le));Ft=k([Ft],this.posX+this.margin[3],-et+Pt+this.ctx.prevPageLastElemOffset)[0];var It=(Ze>Wt||Ze<Rt)&&A.call(this);It&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ft,wt,null).clip().discardPath()),this.pdf.addImage(U,"JPEG",Ft.x,Ft.y,Ft.w,Ft.h,null,null,_t),It&&this.pdf.restoreGraphicsState()}}else this.pdf.addImage(U,"JPEG",Le.x,Le.y,Le.w,Le.h,null,null,_t)};var C=function(U,K,W){var te=[];K=K||this.pdf.internal.pageSize.width,W=W||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var re=this.posY+this.ctx.prevPageLastElemOffset;switch(U.type){default:case"mt":case"lt":te.push(Math.floor((U.y+re)/W)+1);break;case"arc":te.push(Math.floor((U.y+re-U.radius)/W)+1),te.push(Math.floor((U.y+re+U.radius)/W)+1);break;case"qct":var $=ae(this.ctx.lastPoint.x,this.ctx.lastPoint.y,U.x1,U.y1,U.x,U.y);te.push(Math.floor(($.y+re)/W)+1),te.push(Math.floor(($.y+$.h+re)/W)+1);break;case"bct":var ue=_e(this.ctx.lastPoint.x,this.ctx.lastPoint.y,U.x1,U.y1,U.x2,U.y2,U.x,U.y);te.push(Math.floor((ue.y+re)/W)+1),te.push(Math.floor((ue.y+ue.h+re)/W)+1);break;case"rect":te.push(Math.floor((U.y+re)/W)+1),te.push(Math.floor((U.y+U.h+re)/W)+1)}for(var he=0;he<te.length;he+=1)for(;this.pdf.internal.getNumberOfPages()<te[he];)_.call(this);return te},_=function(){var U=this.fillStyle,K=this.strokeStyle,W=this.font,te=this.lineCap,re=this.lineWidth,$=this.lineJoin;this.pdf.addPage(),this.fillStyle=U,this.strokeStyle=K,this.font=W,this.lineCap=te,this.lineWidth=re,this.lineJoin=$},k=function(U,K,W){for(var te=0;te<U.length;te++)switch(U[te].type){case"bct":U[te].x2+=K,U[te].y2+=W;case"qct":U[te].x1+=K,U[te].y1+=W;default:U[te].x+=K,U[te].y+=W}return U},R=function(U){return U.sort(function(K,W){return K-W})},D=function(U,K){var W=this.fillStyle,te=this.strokeStyle,re=this.lineCap,$=this.lineWidth,ue=Math.abs($*this.ctx.transform.scaleX),he=this.lineJoin;if(this.autoPaging){for(var de,Ne,Re=JSON.parse(JSON.stringify(this.path)),Pe=JSON.parse(JSON.stringify(this.path)),ze=[],Y=0;Y<Pe.length;Y++)if(Pe[Y].x!==void 0)for(var Me=C.call(this,Pe[Y]),_t=0;_t<Me.length;_t+=1)ze.indexOf(Me[_t])===-1&&ze.push(Me[_t]);for(var it=0;it<ze.length;it++)for(;this.pdf.internal.getNumberOfPages()<ze[it];)_.call(this);R(ze);for(var Le=ze[0],st=ze[ze.length-1],qe=Le;qe<st+1;qe++){this.pdf.setPage(qe),this.fillStyle=W,this.strokeStyle=te,this.lineCap=re,this.lineWidth=ue,this.lineJoin=he;var at=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],tt=qe===1?this.posY+this.margin[0]:this.margin[0],Wt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Rt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Ze=qe===1?0:Wt+(qe-2)*Rt;if(this.ctx.clip_path.length!==0){var ft=this.path;de=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=k(de,this.posX+this.margin[3],-Ze+tt+this.ctx.prevPageLastElemOffset),z.call(this,U,!0),this.path=ft}if(Ne=JSON.parse(JSON.stringify(Re)),this.path=k(Ne,this.posX+this.margin[3],-Ze+tt+this.ctx.prevPageLastElemOffset),K===!1||qe===0){var Pt=(qe>Le||qe<st)&&A.call(this);Pt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],at,Rt,null).clip().discardPath()),z.call(this,U,K),Pt&&this.pdf.restoreGraphicsState()}this.lineWidth=$}this.path=Re}else this.lineWidth=ue,z.call(this,U,K),this.lineWidth=$},z=function(U,K){if((U!=="stroke"||K||!N.call(this))&&(U==="stroke"||K||!m.call(this))){for(var W,te,re=[],$=this.path,ue=0;ue<$.length;ue++){var he=$[ue];switch(he.type){case"begin":re.push({begin:!0});break;case"close":re.push({close:!0});break;case"mt":re.push({start:he,deltas:[],abs:[]});break;case"lt":var de=re.length;if($[ue-1]&&!isNaN($[ue-1].x)&&(W=[he.x-$[ue-1].x,he.y-$[ue-1].y],de>0)){for(;de>=0;de--)if(re[de-1].close!==!0&&re[de-1].begin!==!0){re[de-1].deltas.push(W),re[de-1].abs.push(he);break}}break;case"bct":W=[he.x1-$[ue-1].x,he.y1-$[ue-1].y,he.x2-$[ue-1].x,he.y2-$[ue-1].y,he.x-$[ue-1].x,he.y-$[ue-1].y],re[re.length-1].deltas.push(W);break;case"qct":var Ne=$[ue-1].x+2/3*(he.x1-$[ue-1].x),Re=$[ue-1].y+2/3*(he.y1-$[ue-1].y),Pe=he.x+2/3*(he.x1-he.x),ze=he.y+2/3*(he.y1-he.y),Y=he.x,Me=he.y;W=[Ne-$[ue-1].x,Re-$[ue-1].y,Pe-$[ue-1].x,ze-$[ue-1].y,Y-$[ue-1].x,Me-$[ue-1].y],re[re.length-1].deltas.push(W);break;case"arc":re.push({deltas:[],abs:[],arc:!0}),Array.isArray(re[re.length-1].abs)&&re[re.length-1].abs.push(he)}}te=K?null:U==="stroke"?"stroke":"fill";for(var _t=!1,it=0;it<re.length;it++)if(re[it].arc)for(var Le=re[it].abs,st=0;st<Le.length;st++){var qe=Le[st];qe.type==="arc"?E.call(this,qe.x,qe.y,qe.radius,qe.startAngle,qe.endAngle,qe.counterclockwise,void 0,K,!_t):P.call(this,qe.x,qe.y),_t=!0}else if(re[it].close===!0)this.pdf.internal.out("h"),_t=!1;else if(re[it].begin!==!0){var at=re[it].start.x,tt=re[it].start.y;J.call(this,re[it].deltas,at,tt),_t=!0}te&&I.call(this,te),K&&F.call(this)}},Q=function(U){var K=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,W=K*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return U-W;case"top":return U+K-W;case"hanging":return U+K-2*W;case"middle":return U+K/2-W;default:return U}},j=function(U){return U+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};g.prototype.createLinearGradient=function(){var U=function(){};return U.colorStops=[],U.addColorStop=function(K,W){this.colorStops.push([K,W])},U.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},U.isCanvasGradient=!0,U},g.prototype.createPattern=function(){return this.createLinearGradient()},g.prototype.createRadialGradient=function(){return this.createLinearGradient()};var E=function(U,K,W,te,re,$,ue,he,de){for(var Ne=we.call(this,W,te,re,$),Re=0;Re<Ne.length;Re++){var Pe=Ne[Re];Re===0&&(de?b.call(this,Pe.x1+U,Pe.y1+K):P.call(this,Pe.x1+U,Pe.y1+K)),le.call(this,U,K,Pe.x2,Pe.y2,Pe.x3,Pe.y3,Pe.x4,Pe.y4)}he?F.call(this):I.call(this,ue)},I=function(U){switch(U){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},F=function(){this.pdf.clip(),this.pdf.discardPath()},b=function(U,K){this.pdf.internal.out(n(U)+" "+r(K)+" m")},S=function(U){var K;switch(U.align){case"right":case"end":K="right";break;case"center":K="center";break;default:K="left"}var W,te,re,$=this.pdf.getTextDimensions(U.text),ue=Q.call(this,U.y),he=j.call(this,ue)-$.h,de=this.ctx.transform.applyToPoint(new o(U.x,ue));if(this.autoPaging){var Ne=this.ctx.transform.decompose(),Re=new l;Re=(Re=(Re=Re.multiply(Ne.translate)).multiply(Ne.skew)).multiply(Ne.scale);for(var Pe=this.ctx.transform.applyToRectangle(new a(U.x,ue,$.w,$.h)),ze=Re.applyToRectangle(new a(U.x,he,$.w,$.h)),Y=C.call(this,ze),Me=[],_t=0;_t<Y.length;_t+=1)Me.indexOf(Y[_t])===-1&&Me.push(Y[_t]);R(Me);for(var it=Me[0],Le=Me[Me.length-1],st=it;st<Le+1;st++){this.pdf.setPage(st);var qe=st===1?this.posY+this.margin[0]:this.margin[0],at=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],tt=this.pdf.internal.pageSize.height-this.margin[2],Wt=tt-this.margin[0],Rt=this.pdf.internal.pageSize.width-this.margin[1],Ze=Rt-this.margin[3],ft=st===1?0:at+(st-2)*Wt;if(this.ctx.clip_path.length!==0){var Pt=this.path;W=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=k(W,this.posX+this.margin[3],-1*ft+qe),z.call(this,"fill",!0),this.path=Pt}var Ke=k([JSON.parse(JSON.stringify(ze))],this.posX+this.margin[3],-ft+qe+this.ctx.prevPageLastElemOffset)[0];U.scale>=.01&&(te=this.pdf.internal.getFontSize(),this.pdf.setFontSize(te*U.scale),re=this.lineWidth,this.lineWidth=re*U.scale);var wt=this.autoPaging!=="text";if(wt||Ke.y+Ke.h<=tt){if(wt||Ke.y>=qe&&Ke.x<=Rt){var et=wt?U.text:this.pdf.splitTextToSize(U.text,U.maxWidth||Rt-Ke.x)[0],dn=k([JSON.parse(JSON.stringify(Pe))],this.posX+this.margin[3],-ft+qe+this.ctx.prevPageLastElemOffset)[0],Ft=wt&&(st>it||st<Le)&&A.call(this);Ft&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ze,Wt,null).clip().discardPath()),this.pdf.text(et,dn.x,dn.y,{angle:U.angle,align:K,renderingMode:U.renderingMode}),Ft&&this.pdf.restoreGraphicsState()}}else Ke.y<tt&&(this.ctx.prevPageLastElemOffset+=tt-Ke.y);U.scale>=.01&&(this.pdf.setFontSize(te),this.lineWidth=re)}}else U.scale>=.01&&(te=this.pdf.internal.getFontSize(),this.pdf.setFontSize(te*U.scale),re=this.lineWidth,this.lineWidth=re*U.scale),this.pdf.text(U.text,de.x+this.posX,de.y+this.posY,{angle:U.angle,align:K,renderingMode:U.renderingMode,maxWidth:U.maxWidth}),U.scale>=.01&&(this.pdf.setFontSize(te),this.lineWidth=re)},P=function(U,K,W,te){W=W||0,te=te||0,this.pdf.internal.out(n(U+W)+" "+r(K+te)+" l")},J=function(U,K,W){return this.pdf.lines(U,K,W,null,null)},le=function(U,K,W,te,re,$,ue,he){this.pdf.internal.out([e(i(W+U)),e(s(te+K)),e(i(re+U)),e(s($+K)),e(i(ue+U)),e(s(he+K)),"c"].join(" "))},we=function(U,K,W,te){for(var re=2*Math.PI,$=Math.PI/2;K>W;)K-=re;var ue=Math.abs(W-K);ue<re&&te&&(ue=re-ue);for(var he=[],de=te?-1:1,Ne=K;ue>1e-5;){var Re=Ne+de*Math.min(ue,$);he.push(xe.call(this,U,Ne,Re)),ue-=Math.abs(Re-Ne),Ne=Re}return he},xe=function(U,K,W){var te=(W-K)/2,re=U*Math.cos(te),$=U*Math.sin(te),ue=re,he=-$,de=ue*ue+he*he,Ne=de+ue*re+he*$,Re=4/3*(Math.sqrt(2*de*Ne)-Ne)/(ue*$-he*re),Pe=ue-Re*he,ze=he+Re*ue,Y=Pe,Me=-ze,_t=te+K,it=Math.cos(_t),Le=Math.sin(_t);return{x1:U*Math.cos(K),y1:U*Math.sin(K),x2:Pe*it-ze*Le,y2:Pe*Le+ze*it,x3:Y*it-Me*Le,y3:Y*Le+Me*it,x4:U*Math.cos(W),y4:U*Math.sin(W)}},ne=function(U){return 180*U/Math.PI},ae=function(U,K,W,te,re,$){var ue=U+.5*(W-U),he=K+.5*(te-K),de=re+.5*(W-re),Ne=$+.5*(te-$),Re=Math.min(U,re,ue,de),Pe=Math.max(U,re,ue,de),ze=Math.min(K,$,he,Ne),Y=Math.max(K,$,he,Ne);return new a(Re,ze,Pe-Re,Y-ze)},_e=function(U,K,W,te,re,$,ue,he){var de,Ne,Re,Pe,ze,Y,Me,_t,it,Le,st,qe,at,tt,Wt=W-U,Rt=te-K,Ze=re-W,ft=$-te,Pt=ue-re,Ke=he-$;for(Ne=0;Ne<41;Ne++)it=(Me=(Re=U+(de=Ne/40)*Wt)+de*((ze=W+de*Ze)-Re))+de*(ze+de*(re+de*Pt-ze)-Me),Le=(_t=(Pe=K+de*Rt)+de*((Y=te+de*ft)-Pe))+de*(Y+de*($+de*Ke-Y)-_t),Ne==0?(st=it,qe=Le,at=it,tt=Le):(st=Math.min(st,it),qe=Math.min(qe,Le),at=Math.max(at,it),tt=Math.max(tt,Le));return new a(Math.round(st),Math.round(qe),Math.round(at-st),Math.round(tt-qe))},ge=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var U,K,W=(U=this.ctx.lineDash,K=this.ctx.lineDashOffset,JSON.stringify({lineDash:U,lineDashOffset:K}));this.prevLineDash!==W&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=W)}}})(rt.API),function(t){var e=function(o){var a,l,u,c,g,y,m,N,A,C;for(l=[],u=0,c=(o+=a="\0\0\0\0".slice(o.length%4||4)).length;c>u;u+=4)(g=(o.charCodeAt(u)<<24)+(o.charCodeAt(u+1)<<16)+(o.charCodeAt(u+2)<<8)+o.charCodeAt(u+3))!==0?(y=(g=((g=((g=((g=(g-(C=g%85))/85)-(A=g%85))/85)-(N=g%85))/85)-(m=g%85))/85)%85,l.push(y+33,m+33,N+33,A+33,C+33)):l.push(122);return function(_,k){for(var R=k;R>0;R--)_.pop()}(l,a.length),String.fromCharCode.apply(String,l)+"~>"},n=function(o){var a,l,u,c,g,y=String,m="length",N=255,A="charCodeAt",C="slice",_="replace";for(o[C](-2),o=o[C](0,-2)[_](/\s/g,"")[_]("z","!!!!!"),u=[],c=0,g=(o+=a="uuuuu"[C](o[m]%5||5))[m];g>c;c+=5)l=52200625*(o[A](c)-33)+614125*(o[A](c+1)-33)+7225*(o[A](c+2)-33)+85*(o[A](c+3)-33)+(o[A](c+4)-33),u.push(N&l>>24,N&l>>16,N&l>>8,N&l);return function(k,R){for(var D=R;D>0;D--)k.pop()}(u,a[m]),y.fromCharCode.apply(y,u)},r=function(o){return o.split("").map(function(a){return("0"+a.charCodeAt().toString(16)).slice(-2)}).join("")+">"},i=function(o){var a=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((o=o.replace(/\s/g,"")).indexOf(">")!==-1&&(o=o.substr(0,o.indexOf(">"))),o.length%2&&(o+="0"),a.test(o)===!1)return"";for(var l="",u=0;u<o.length;u+=2)l+=String.fromCharCode("0x"+(o[u]+o[u+1]));return l},s=function(o){for(var a=new Uint8Array(o.length),l=o.length;l--;)a[l]=o.charCodeAt(l);return(a=B2(a)).reduce(function(u,c){return u+String.fromCharCode(c)},"")};t.processDataByFilters=function(o,a){var l=0,u=o||"",c=[];for(typeof(a=a||[])=="string"&&(a=[a]),l=0;l<a.length;l+=1)switch(a[l]){case"ASCII85Decode":case"/ASCII85Decode":u=n(u),c.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":u=e(u),c.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":u=i(u),c.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":u=r(u),c.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":u=s(u),c.push("/FlateDecode");break;default:throw new Error('The filter: "'+a[l]+'" is not implemented')}return{data:u,reverseChain:c.reverse().join(" ")}}}(rt.API),function(t){t.loadFile=function(e,n,r){return function(i,s,o){s=s!==!1,o=typeof o=="function"?o:function(){};var a=void 0;try{a=function(l,u,c){var g=new XMLHttpRequest,y=0,m=function(N){var A=N.length,C=[],_=String.fromCharCode;for(y=0;y<A;y+=1)C.push(_(255&N.charCodeAt(y)));return C.join("")};if(g.open("GET",l,!u),g.overrideMimeType("text/plain; charset=x-user-defined"),u===!1&&(g.onload=function(){g.status===200?c(m(this.responseText)):c(void 0)}),g.send(null),u&&g.status===200)return m(g.responseText)}(i,s,o)}catch{}return a}(e,n,r)},t.loadImageFile=t.loadFile}(rt.API),function(t){function e(){return(gt.html2canvas?Promise.resolve(gt.html2canvas):V0(()=>import("./html2canvas.esm-CBrSDip1.js"),[])).catch(function(a){return Promise.reject(new Error("Could not load html2canvas: "+a))}).then(function(a){return a.default?a.default:a})}function n(){return(gt.DOMPurify?Promise.resolve(gt.DOMPurify):V0(()=>import("./purify.es-B9ZVCkUG.js"),[])).catch(function(a){return Promise.reject(new Error("Could not load dompurify: "+a))}).then(function(a){return a.default?a.default:a})}var r=function(a){var l=an(a);return l==="undefined"?"undefined":l==="string"||a instanceof String?"string":l==="number"||a instanceof Number?"number":l==="function"||a instanceof Function?"function":a&&a.constructor===Array?"array":a&&a.nodeType===1?"element":l==="object"?"object":"unknown"},i=function(a,l){var u=document.createElement(a);for(var c in l.className&&(u.className=l.className),l.innerHTML&&l.dompurify&&(u.innerHTML=l.dompurify.sanitize(l.innerHTML)),l.style)u.style[c]=l.style[c];return u},s=function a(l,u){for(var c=l.nodeType===3?document.createTextNode(l.nodeValue):l.cloneNode(!1),g=l.firstChild;g;g=g.nextSibling)u!==!0&&g.nodeType===1&&g.nodeName==="SCRIPT"||c.appendChild(a(g,u));return l.nodeType===1&&(l.nodeName==="CANVAS"?(c.width=l.width,c.height=l.height,c.getContext("2d").drawImage(l,0,0)):l.nodeName!=="TEXTAREA"&&l.nodeName!=="SELECT"||(c.value=l.value),c.addEventListener("load",function(){c.scrollTop=l.scrollTop,c.scrollLeft=l.scrollLeft},!0)),c},o=function a(l){var u=Object.assign(a.convert(Promise.resolve()),JSON.parse(JSON.stringify(a.template))),c=a.convert(Promise.resolve(),u);return(c=c.setProgress(1,a,1,[a])).set(l)};(o.prototype=Object.create(Promise.prototype)).constructor=o,o.convert=function(a,l){return a.__proto__=l||o.prototype,a},o.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},o.prototype.from=function(a,l){return this.then(function(){switch(l=l||function(u){switch(r(u)){case"string":return"string";case"element":return u.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(a),l){case"string":return this.then(n).then(function(u){return this.set({src:i("div",{innerHTML:a,dompurify:u})})});case"element":return this.set({src:a});case"canvas":return this.set({canvas:a});case"img":return this.set({img:a});default:return this.error("Unknown source type.")}})},o.prototype.to=function(a){switch(a){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},o.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var a={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},l=s(this.prop.src,this.opt.html2canvas.javascriptEnabled);l.tagName==="BODY"&&(a.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:a}),this.prop.container.appendChild(l),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},o.prototype.toCanvas=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(e).then(function(l){var u=Object.assign({},this.opt.html2canvas);return delete u.onrendered,l(this.prop.container,u)}).then(function(l){(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},o.prototype.toContext2d=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(e).then(function(l){var u=this.opt.jsPDF,c=this.opt.fontFaces,g=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,y=Object.assign({async:!0,allowTaint:!0,scale:g,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete y.onrendered,u.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,u.context2d.posX=this.opt.x,u.context2d.posY=this.opt.y,u.context2d.margin=this.opt.margin,u.context2d.fontFaces=c,c)for(var m=0;m<c.length;++m){var N=c[m],A=N.src.find(function(C){return C.format==="truetype"});A&&u.addFont(A.url,N.ref.name,N.ref.style)}return y.windowHeight=y.windowHeight||0,y.windowHeight=y.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):y.windowHeight,u.context2d.save(!0),l(this.prop.container,y)}).then(function(l){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},o.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var a=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=a})},o.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},o.prototype.output=function(a,l,u){return(u=u||"pdf").toLowerCase()==="img"||u.toLowerCase()==="image"?this.outputImg(a,l):this.outputPdf(a,l)},o.prototype.outputPdf=function(a,l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(a,l)})},o.prototype.outputImg=function(a){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(a){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+a+'" is not supported.'}})},o.prototype.save=function(a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(a?{filename:a}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},o.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},o.prototype.set=function(a){if(r(a)!=="object")return this;var l=Object.keys(a||{}).map(function(u){if(u in o.template.prop)return function(){this.prop[u]=a[u]};switch(u){case"margin":return this.setMargin.bind(this,a.margin);case"jsPDF":return function(){return this.opt.jsPDF=a.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,a.pageSize);default:return function(){this.opt[u]=a[u]}}},this);return this.then(function(){return this.thenList(l)})},o.prototype.get=function(a,l){return this.then(function(){var u=a in o.template.prop?this.prop[a]:this.opt[a];return l?l(u):u})},o.prototype.setMargin=function(a){return this.then(function(){switch(r(a)){case"number":a=[a,a,a,a];case"array":if(a.length===2&&(a=[a[0],a[1],a[0],a[1]]),a.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=a}).then(this.setPageSize)},o.prototype.setPageSize=function(a){function l(u,c){return Math.floor(u*c/72*96)}return this.then(function(){(a=a||rt.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(a.inner={width:a.width-this.opt.margin[1]-this.opt.margin[3],height:a.height-this.opt.margin[0]-this.opt.margin[2]},a.inner.px={width:l(a.inner.width,a.k),height:l(a.inner.height,a.k)},a.inner.ratio=a.inner.height/a.inner.width),this.prop.pageSize=a})},o.prototype.setProgress=function(a,l,u,c){return a!=null&&(this.progress.val=a),l!=null&&(this.progress.state=l),u!=null&&(this.progress.n=u),c!=null&&(this.progress.stack=c),this.progress.ratio=this.progress.val/this.progress.state,this},o.prototype.updateProgress=function(a,l,u,c){return this.setProgress(a?this.progress.val+a:null,l||null,u?this.progress.n+u:null,c?this.progress.stack.concat(c):null)},o.prototype.then=function(a,l){var u=this;return this.thenCore(a,l,function(c,g){return u.updateProgress(null,null,1,[c]),Promise.prototype.then.call(this,function(y){return u.updateProgress(null,c),y}).then(c,g).then(function(y){return u.updateProgress(1),y})})},o.prototype.thenCore=function(a,l,u){u=u||Promise.prototype.then;var c=this;a&&(a=a.bind(c)),l&&(l=l.bind(c));var g=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?c:o.convert(Object.assign({},c),Promise.prototype),y=u.call(g,a,l);return o.convert(y,c.__proto__)},o.prototype.thenExternal=function(a,l){return Promise.prototype.then.call(this,a,l)},o.prototype.thenList=function(a){var l=this;return a.forEach(function(u){l=l.thenCore(u)}),l},o.prototype.catch=function(a){a&&(a=a.bind(this));var l=Promise.prototype.catch.call(this,a);return o.convert(l,this)},o.prototype.catchExternal=function(a){return Promise.prototype.catch.call(this,a)},o.prototype.error=function(a){return this.then(function(){throw new Error(a)})},o.prototype.using=o.prototype.set,o.prototype.saveAs=o.prototype.save,o.prototype.export=o.prototype.output,o.prototype.run=o.prototype.then,rt.getPageSize=function(a,l,u){if(an(a)==="object"){var c=a;a=c.orientation,l=c.unit||l,u=c.format||u}l=l||"mm",u=u||"a4",a=(""+(a||"P")).toLowerCase();var g,y=(""+u).toLowerCase(),m={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(l){case"pt":g=1;break;case"mm":g=72/25.4;break;case"cm":g=72/2.54;break;case"in":g=72;break;case"px":g=.75;break;case"pc":case"em":g=12;break;case"ex":g=6;break;default:throw"Invalid unit: "+l}var N,A=0,C=0;if(m.hasOwnProperty(y))A=m[y][1]/g,C=m[y][0]/g;else try{A=u[1],C=u[0]}catch{throw new Error("Invalid format: "+u)}if(a==="p"||a==="portrait")a="p",C>A&&(N=C,C=A,A=N);else{if(a!=="l"&&a!=="landscape")throw"Invalid orientation: "+a;a="l",A>C&&(N=C,C=A,A=N)}return{width:C,height:A,unit:l,k:g,orientation:a}},t.html=function(a,l){(l=l||{}).callback=l.callback||function(){},l.html2canvas=l.html2canvas||{},l.html2canvas.canvas=l.html2canvas.canvas||this.canvas,l.jsPDF=l.jsPDF||this,l.fontFaces=l.fontFaces?l.fontFaces.map(i1):null;var u=new o(l);return l.worker?u:u.from(a).doCallback()}}(rt.API),rt.API.addJS=function(t){return Kb=t,this.internal.events.subscribe("postPutResources",function(){dp=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(dp+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),Gb=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+Kb+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){dp!==void 0&&Gb!==void 0&&this.internal.out("/Names <</JavaScript "+dp+" 0 R>>")}),this},function(t){var e;t.events.push(["postPutResources",function(){var n=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=n.outline.render().split(/\r\n/),s=0;s<i.length;s++){var o=i[s],a=r.exec(o);if(a!=null){var l=a[1];n.internal.newObjectDeferredBegin(l,!1)}n.internal.write(o)}if(this.outline.createNamedDestinations){var u=this.internal.pages.length,c=[];for(s=0;s<u;s++){var g=n.internal.newObject();c.push(g);var y=n.internal.getPageInfo(s+1);n.internal.write("<< /D["+y.objId+" 0 R /XYZ null null null]>> endobj")}var m=n.internal.newObject();for(n.internal.write("<< /Names [ "),s=0;s<c.length;s++)n.internal.write("(page_"+(s+1)+")"+c[s]+" 0 R");n.internal.write(" ] >>","endobj"),e=n.internal.newObject(),n.internal.write("<< /Dests "+m+" 0 R"),n.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){var n=this;n.outline.root.children.length>0&&(n.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&n.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var n=this;n.outline={createNamedDestinations:!1,root:{children:[]}},n.outline.add=function(r,i,s){var o={title:i,options:s,children:[]};return r==null&&(r=this.root),r.children.push(o),o},n.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=n,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},n.outline.genIds_r=function(r){r.id=n.internal.newObjectDeferred();for(var i=0;i<r.children.length;i++)this.genIds_r(r.children[i])},n.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},n.outline.renderItems=function(r){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<r.children.length;s++){var o=r.children[s];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(r)),s>0&&this.line("/Prev "+this.makeRef(r.children[s-1])),s<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[s+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var a=this.count=this.count_r({count:0},o);if(a>0&&this.line("/Count "+a),o.options&&o.options.pageNumber){var l=n.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+l.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var u=0;u<r.children.length;u++)this.renderItems(r.children[u])},n.outline.line=function(r){this.ctx.val+=r+`\r
`},n.outline.makeRef=function(r){return r.id+" 0 R"},n.outline.makeString=function(r){return"("+n.internal.pdfEscape(r)+")"},n.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},n.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},n.outline.count_r=function(r,i){for(var s=0;s<i.children.length;s++)r.count++,this.count_r(r,i.children[s]);return r.count}}])}(rt.API),function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(n,r,i,s,o,a){var l,u=this.decode.DCT_DECODE,c=null;if(typeof n=="string"||this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n)){switch(n=o||n,n=this.__addimage__.isArrayBuffer(n)?new Uint8Array(n):n,l=function(g){for(var y,m=256*g.charCodeAt(4)+g.charCodeAt(5),N=g.length,A={width:0,height:0,numcomponents:1},C=4;C<N;C+=2){if(C+=m,e.indexOf(g.charCodeAt(C+1))!==-1){y=256*g.charCodeAt(C+5)+g.charCodeAt(C+6),A={width:256*g.charCodeAt(C+7)+g.charCodeAt(C+8),height:y,numcomponents:g.charCodeAt(C+9)};break}m=256*g.charCodeAt(C+2)+g.charCodeAt(C+3)}return A}(n=this.__addimage__.isArrayBufferView(n)?this.__addimage__.arrayBufferToBinaryString(n):n),l.numcomponents){case 1:a=this.color_spaces.DEVICE_GRAY;break;case 4:a=this.color_spaces.DEVICE_CMYK;break;case 3:a=this.color_spaces.DEVICE_RGB}c={data:n,width:l.width,height:l.height,colorSpace:a,bitsPerComponent:8,filter:u,index:r,alias:i}}return c}}(rt.API),rt.API.processPNG=function(t,e,n,r){if(this.__addimage__.isArrayBuffer(t)&&(t=new Uint8Array(t)),this.__addimage__.isArrayBufferView(t)){var i,s=zV(t,{checkCrc:!0}),o=s.width,a=s.height,l=s.channels,u=s.palette,c=s.depth;i=u&&l===1?function(E){for(var I=E.width,F=E.height,b=E.data,S=E.palette,P=E.depth,J=!1,le=[],we=[],xe=void 0,ne=!1,ae=0,_e=0;_e<S.length;_e++){var ge=X_(S[_e],4),U=ge[0],K=ge[1],W=ge[2],te=ge[3];le.push(U,K,W),te!=null&&(te===0?(ae++,we.length<1&&we.push(_e)):te<255&&(ne=!0))}if(ne||ae>1){J=!0,we=void 0;var re=I*F;xe=new Uint8Array(re);for(var $=new DataView(b.buffer),ue=0;ue<re;ue++){var he=o1($,ue,P),de=X_(S[he],4)[3];xe[ue]=de}}else ae===0&&(we=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:J?8:void 0,colorBytes:b,alphaBytes:xe,needSMask:J,palette:le,mask:we}}(s):l===2||l===4?function(E){for(var I=E.data,F=E.width,b=E.height,S=E.channels,P=E.depth,J=S===2?"DeviceGray":"DeviceRGB",le=S-1,we=F*b,xe=le,ne=we*xe,ae=1*we,_e=Math.ceil(ne*P/8),ge=Math.ceil(ae*P/8),U=new Uint8Array(_e),K=new Uint8Array(ge),W=new DataView(I.buffer),te=new DataView(U.buffer),re=new DataView(K.buffer),$=!1,ue=0;ue<we;ue++){for(var he=ue*S,de=0;de<xe;de++)r4(te,o1(W,he+de,P),ue*xe+de,P);var Ne=o1(W,he+xe,P);Ne<(1<<P)-1&&($=!0),r4(re,Ne,1*ue,P)}return{colorSpace:J,colorsPerPixel:le,sMaskBitsPerComponent:$?P:void 0,colorBytes:U,alphaBytes:K,needSMask:$}}(s):function(E){var I=E.data,F=E.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:F,colorsPerPixel:F==="DeviceGray"?1:3,colorBytes:I instanceof Uint16Array?function(b){for(var S=b.length,P=new Uint8Array(2*S),J=new DataView(P.buffer,P.byteOffset,P.byteLength),le=0;le<S;le++)J.setUint16(2*le,b[le],!1);return P}(I):I,needSMask:!1}}(s);var g,y,m,N=i,A=N.colorSpace,C=N.colorsPerPixel,_=N.sMaskBitsPerComponent,k=N.colorBytes,R=N.alphaBytes,D=N.needSMask,z=N.palette,Q=N.mask,j=null;return r!==rt.API.image_compression.NONE&&typeof B2=="function"?(j=function(E){var I;switch(E){case rt.API.image_compression.FAST:I=11;break;case rt.API.image_compression.MEDIUM:I=13;break;case rt.API.image_compression.SLOW:I=14;break;default:I=12}return I}(r),g=this.decode.FLATE_DECODE,y="/Predictor ".concat(j," /Colors ").concat(C," /BitsPerComponent ").concat(c," /Columns ").concat(o),t=Xb(k,Math.ceil(o*C*c/8),C,c,r),D&&(m=Xb(R,Math.ceil(o*_/8),1,_,r))):(g=void 0,y=void 0,t=k,D&&(m=R)),(this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t))&&(t=this.__addimage__.arrayBufferToBinaryString(t)),(m&&this.__addimage__.isArrayBuffer(m)||this.__addimage__.isArrayBufferView(m))&&(m=this.__addimage__.arrayBufferToBinaryString(m)),{alias:n,data:t,index:e,filter:g,decodeParameters:y,transparency:Q,palette:z,sMask:m,predictor:j,width:o,height:a,bitsPerComponent:c,sMaskBitsPerComponent:_,colorSpace:A}}},function(t){t.processGIF89A=function(e,n,r,i){var s=new uB(e),o=s.width,a=s.height,l=[];s.decodeAndBlitFrameRGBA(0,l);var u={data:l,width:o,height:a},c=new a1(100).encode(u,100);return t.processJPEG.call(this,c,n,r,i)},t.processGIF87A=t.processGIF89A}(rt.API),Us.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:i,green:r,blue:n,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Us.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(n){gn.log("bit decode error:"+n)}},Us.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),n=e%4;for(t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<e;i++)for(var s=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+8*i*4,a=0;a<8&&8*i+a<this.width;a++){var l=this.palette[s>>7-a&1];this.data[o+4*a]=l.blue,this.data[o+4*a+1]=l.green,this.data[o+4*a+2]=l.red,this.data[o+4*a+3]=255}n!==0&&(this.pos+=4-n)}},Us.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<t;i++){var s=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+2*i*4,a=s>>4,l=15&s,u=this.palette[a];if(this.data[o]=u.blue,this.data[o+1]=u.green,this.data[o+2]=u.red,this.data[o+3]=255,2*i+1>=this.width)break;u=this.palette[l],this.data[o+4]=u.blue,this.data[o+4+1]=u.green,this.data[o+4+2]=u.red,this.data[o+4+3]=255}e!==0&&(this.pos+=4-e)}},Us.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),s=n*this.width*4+4*r;if(i<this.palette.length){var o=this.palette[i];this.data[s]=o.red,this.data[s+1]=o.green,this.data[s+2]=o.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}t!==0&&(this.pos+=4-t)}},Us.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(s&e)/e*255|0,a=(s>>5&e)/e*255|0,l=(s>>10&e)/e*255|0,u=s>>15?255:0,c=r*this.width*4+4*i;this.data[c]=l,this.data[c+1]=a,this.data[c+2]=o,this.data[c+3]=u}this.pos+=t}},Us.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),n=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,s=0;s<this.width;s++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(o&e)/e*255|0,l=(o>>5&n)/n*255|0,u=(o>>11)/e*255|0,c=i*this.width*4+4*s;this.data[c]=u,this.data[c+1]=l,this.data[c+2]=a,this.data[c+3]=255}this.pos+=t}},Us.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*n;this.data[o]=s,this.data[o+1]=i,this.data[o+2]=r,this.data[o+3]=255}this.pos+=this.width%4}},Us.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*n;this.data[a]=s,this.data[a+1]=i,this.data[a+2]=r,this.data[a+3]=o}},Us.prototype.getData=function(){return this.data},function(t){t.processBMP=function(e,n,r,i){var s=new Us(e,!1),o=s.width,a=s.height,l={data:s.getData(),width:o,height:a},u=new a1(100).encode(l,100);return t.processJPEG.call(this,u,n,r,i)}}(rt.API),s4.prototype.getData=function(){return this.data},function(t){t.processWEBP=function(e,n,r,i){var s=new s4(e),o=s.width,a=s.height,l={data:s.getData(),width:o,height:a},u=new a1(100).encode(l,100);return t.processJPEG.call(this,u,n,r,i)}}(rt.API),rt.API.processRGBA=function(t,e,n){for(var r=t.data,i=r.length,s=new Uint8Array(i/4*3),o=new Uint8Array(i/4),a=0,l=0,u=0;u<i;u+=4){var c=r[u],g=r[u+1],y=r[u+2],m=r[u+3];s[a++]=c,s[a++]=g,s[a++]=y,o[l++]=m}var N=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:N,index:e,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},rt.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Ju=rt.API,fp=Ju.getCharWidthsArray=function(t,e){var n,r,i=(e=e||{}).font||this.internal.getFont(),s=e.fontSize||this.internal.getFontSize(),o=e.charSpace||this.internal.getCharSpace(),a=e.widths?e.widths:i.metadata.Unicode.widths,l=a.fof?a.fof:1,u=e.kerning?e.kerning:i.metadata.Unicode.kerning,c=u.fof?u.fof:1,g=e.doKerning!==!1,y=0,m=t.length,N=0,A=a[0]||l,C=[];for(n=0;n<m;n++)r=t.charCodeAt(n),typeof i.metadata.widthOfString=="function"?C.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(r))+o*(1e3/s)||0)/1e3):(y=g&&an(u[r])==="object"&&!isNaN(parseInt(u[r][N],10))?u[r][N]/c:0,C.push((a[r]||A)/l+y)),N=r;return C},Yb=Ju.getStringUnitWidth=function(t,e){var n=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),i=e.charSpace||this.internal.getCharSpace();return Ju.processArabic&&(t=Ju.processArabic(t)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(t,n,i)/n:fp.apply(this,arguments).reduce(function(s,o){return s+o},0)},Qb=function(t,e,n,r){for(var i=[],s=0,o=t.length,a=0;s!==o&&a+e[s]<n;)a+=e[s],s++;i.push(t.slice(0,s));var l=s;for(a=0;s!==o;)a+e[s]>r&&(i.push(t.slice(l,s)),a=0,l=s),a+=e[s],s++;return l!==s&&i.push(t.slice(l,s)),i},Jb=function(t,e,n){n||(n={});var r,i,s,o,a,l,u,c=[],g=[c],y=n.textIndent||0,m=0,N=0,A=t.split(" "),C=fp.apply(this,[" ",n])[0];if(l=n.lineIndent===-1?A[0].length+2:n.lineIndent||0){var _=Array(l).join(" "),k=[];A.map(function(D){(D=D.split(/\s*\n/)).length>1?k=k.concat(D.map(function(z,Q){return(Q&&z.length?`
`:"")+z})):k.push(D[0])}),A=k,l=Yb.apply(this,[_,n])}for(s=0,o=A.length;s<o;s++){var R=0;if(r=A[s],l&&r[0]==`
`&&(r=r.substr(1),R=1),y+m+(N=(i=fp.apply(this,[r,n])).reduce(function(D,z){return D+z},0))>e||R){if(N>e){for(a=Qb.apply(this,[r,i,e-(y+m),e]),c.push(a.shift()),c=[a.pop()];a.length;)g.push([a.shift()]);N=i.slice(r.length-(c[0]?c[0].length:0)).reduce(function(D,z){return D+z},0)}else c=[r];g.push(c),y=N+l,m=C}else c.push(r),y+=m+N,m=C}return u=l?function(D,z){return(z?_:"")+D.join(" ")}:function(D){return D.join(" ")},g.map(u)},Ju.splitTextToSize=function(t,e,n){var r,i=(n=n||{}).fontSize||this.internal.getFontSize(),s=(function(c){if(c.widths&&c.kerning)return{widths:c.widths,kerning:c.kerning};var g=this.internal.getFont(c.fontName,c.fontStyle),y="Unicode";return g.metadata[y]?{widths:g.metadata[y].widths||{0:1},kerning:g.metadata[y].kerning||{}}:{font:g.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,n);r=Array.isArray(t)?t:String(t).split(/\r?\n/);var o=1*this.internal.scaleFactor*e/i;s.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/i:0,s.lineIndent=n.lineIndent;var a,l,u=[];for(a=0,l=r.length;a<l;a++)u=u.concat(Jb.apply(this,[r[a],o,s]));return u},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="0123456789abcdef",n="klmnopqrstuvwxyz",r={},i={},s=0;s<16;s++)r[n[s]]=e[s],i[e[s]]=n[s];var o=function(y){return"0x"+parseInt(y,10).toString(16)},a=t.__fontmetrics__.compress=function(y){var m,N,A,C,_=["{"];for(var k in y){if(m=y[k],isNaN(parseInt(k,10))?N="'"+k+"'":(k=parseInt(k,10),N=(N=o(k).slice(2)).slice(0,-1)+i[N.slice(-1)]),typeof m=="number")m<0?(A=o(m).slice(3),C="-"):(A=o(m).slice(2),C=""),A=C+A.slice(0,-1)+i[A.slice(-1)];else{if(an(m)!=="object")throw new Error("Don't know what to do with value type "+an(m)+".");A=a(m)}_.push(N+A)}return _.push("}"),_.join("")},l=t.__fontmetrics__.uncompress=function(y){if(typeof y!="string")throw new Error("Invalid argument passed to uncompress.");for(var m,N,A,C,_={},k=1,R=_,D=[],z="",Q="",j=y.length-1,E=1;E<j;E+=1)(C=y[E])=="'"?m?(A=m.join(""),m=void 0):m=[]:m?m.push(C):C=="{"?(D.push([R,A]),R={},A=void 0):C=="}"?((N=D.pop())[0][N[1]]=R,A=void 0,R=N[0]):C=="-"?k=-1:A===void 0?r.hasOwnProperty(C)?(z+=r[C],A=parseInt(z,16)*k,k=1,z=""):z+=C:r.hasOwnProperty(C)?(Q+=r[C],R[A]=parseInt(Q,16)*k,k=1,A=void 0,Q=""):Q+=C;return _},u={codePages:["WinAnsiEncoding"],WinAnsiEncoding:l("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},c={Unicode:{Courier:u,"Courier-Bold":u,"Courier-BoldOblique":u,"Courier-Oblique":u,Helvetica:u,"Helvetica-Bold":u,"Helvetica-BoldOblique":u,"Helvetica-Oblique":u,"Times-Roman":u,"Times-Bold":u,"Times-BoldItalic":u,"Times-Italic":u}},g={Unicode:{"Courier-Oblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":l("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":l("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:l("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:l("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":l("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":l("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(y){var m=y.font,N=g.Unicode[m.postScriptName];N&&(m.metadata.Unicode={},m.metadata.Unicode.widths=N.widths,m.metadata.Unicode.kerning=N.kerning);var A=c.Unicode[m.postScriptName];A&&(m.metadata.Unicode.encoding=A,m.encoding=A.codePages[0])}])}(rt.API),function(t){var e=function(n){for(var r=n.length,i=new Uint8Array(r),s=0;s<r;s++)i[s]=n.charCodeAt(s);return i};t.API.events.push(["addFont",function(n){var r=void 0,i=n.font,s=n.instance;if(!i.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(r=s.existsFileInVFS(i.postScriptName)===!1?s.loadFile(i.postScriptName):s.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(o,a){a=/^\x00\x01\x00\x00/.test(a)?e(a):e(Op(a)),o.metadata=t.API.TTFFont.open(a),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(i,r)}}])}(rt),rt.API.addSvgAsImage=function(t,e,n,r,i,s,o,a){if(isNaN(e)||isNaN(n))throw gn.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(r)||isNaN(i))throw gn.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var l=document.createElement("canvas");l.width=r,l.height=i;var u=l.getContext("2d");u.fillStyle="#fff",u.fillRect(0,0,l.width,l.height);var c={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},g=this;return(gt.canvg?Promise.resolve(gt.canvg):V0(()=>import("./index.es-Bivm9c-x.js"),[])).catch(function(y){return Promise.reject(new Error("Could not load canvg: "+y))}).then(function(y){return y.default?y.default:y}).then(function(y){return y.fromString(u,t,c)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(y){return y.render(c)}).then(function(){g.addImage(l.toDataURL("image/jpeg",1),e,n,r,i,o,a)})},rt.API.putTotalPages=function(t){var e,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),n=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var i=0;i<this.internal.pages[r].length;i++)this.internal.pages[r][i]=this.internal.pages[r][i].replace(e,n);return this},rt.API.viewerPreferences=function(t,e){var n;t=t||{},e=e||!1;var r,i,s,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},a=Object.keys(o),l=[],u=0,c=0,g=0;function y(N,A){var C,_=!1;for(C=0;C<N.length;C+=1)N[C]===A&&(_=!0);return _}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var m=a.length;for(g=0;g<m;g+=1)n[a[g]].value=n[a[g]].defaultValue,n[a[g]].explicitSet=!1}if(an(t)==="object"){for(i in t)if(s=t[i],y(a,i)&&s!==void 0){if(n[i].type==="boolean"&&typeof s=="boolean")n[i].value=s;else if(n[i].type==="name"&&y(n[i].valueSet,s))n[i].value=s;else if(n[i].type==="integer"&&Number.isInteger(s))n[i].value=s;else if(n[i].type==="array"){for(u=0;u<s.length;u+=1)if(r=!0,s[u].length===1&&typeof s[u][0]=="number")l.push(String(s[u]-1));else if(s[u].length>1){for(c=0;c<s[u].length;c+=1)typeof s[u][c]!="number"&&(r=!1);r===!0&&l.push([s[u][0]-1,s[u][1]-1].join(" "))}n[i].value="["+l.join(" ")+"]"}else n[i].value=n[i].defaultValue;n[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var N,A=[];for(N in n)n[N].explicitSet===!0&&(n[N].type==="name"?A.push("/"+N+" /"+n[N].value):A.push("/"+N+" "+n[N].value));A.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+A.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},function(t){var e=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(r)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),a=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),l=unescape(encodeURIComponent("</x:xmpmeta>")),u=s.length+o.length+a.length+i.length+l.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+u+" >>"),this.internal.write("stream"),this.internal.write(i+s+o+a+l),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(r,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",e)),this}}(rt.API),function(t){var e=t.API,n=e.pdfEscape16=function(s,o){for(var a,l=o.metadata.Unicode.widths,u=["","0","00","000","0000"],c=[""],g=0,y=s.length;g<y;++g){if(a=o.metadata.characterToGlyph(s.charCodeAt(g)),o.metadata.glyIdsUsed.push(a),o.metadata.toUnicode[a]=s.charCodeAt(g),l.indexOf(a)==-1&&(l.push(a),l.push([parseInt(o.metadata.widthOfGlyph(a),10)])),a=="0")return c.join("");a=a.toString(16),c.push(u[4-a.length],a)}return c.join("")},r=function(s){var o,a,l,u,c,g,y;for(c=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,l=[],g=0,y=(a=Object.keys(s).sort(function(m,N){return m-N})).length;g<y;g++)o=a[g],l.length>=100&&(c+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar`,l=[]),s[o]!==void 0&&s[o]!==null&&typeof s[o].toString=="function"&&(u=("0000"+s[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),l.push("<"+o+"><"+u+">"));return l.length&&(c+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar
`),c+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(s){(function(o){var a=o.font,l=o.out,u=o.newObject,c=o.putStream;if(a.metadata instanceof t.API.TTFFont&&a.encoding==="Identity-H"){for(var g=a.metadata.Unicode.widths,y=a.metadata.subset.encode(a.metadata.glyIdsUsed,1),m="",N=0;N<y.length;N++)m+=String.fromCharCode(y[N]);var A=u();c({data:m,addLength1:!0,objectId:A}),l("endobj");var C=u();c({data:r(a.metadata.toUnicode),addLength1:!0,objectId:C}),l("endobj");var _=u();l("<<"),l("/Type /FontDescriptor"),l("/FontName /"+nc(a.fontName)),l("/FontFile2 "+A+" 0 R"),l("/FontBBox "+t.API.PDFObject.convert(a.metadata.bbox)),l("/Flags "+a.metadata.flags),l("/StemV "+a.metadata.stemV),l("/ItalicAngle "+a.metadata.italicAngle),l("/Ascent "+a.metadata.ascender),l("/Descent "+a.metadata.decender),l("/CapHeight "+a.metadata.capHeight),l(">>"),l("endobj");var k=u();l("<<"),l("/Type /Font"),l("/BaseFont /"+nc(a.fontName)),l("/FontDescriptor "+_+" 0 R"),l("/W "+t.API.PDFObject.convert(g)),l("/CIDToGIDMap /Identity"),l("/DW 1000"),l("/Subtype /CIDFontType2"),l("/CIDSystemInfo"),l("<<"),l("/Supplement 0"),l("/Registry (Adobe)"),l("/Ordering ("+a.encoding+")"),l(">>"),l(">>"),l("endobj"),a.objectNumber=u(),l("<<"),l("/Type /Font"),l("/Subtype /Type0"),l("/ToUnicode "+C+" 0 R"),l("/BaseFont /"+nc(a.fontName)),l("/Encoding /"+a.encoding),l("/DescendantFonts ["+k+" 0 R]"),l(">>"),l("endobj"),a.isAlreadyPutted=!0}})(s)}]),e.events.push(["putFont",function(s){(function(o){var a=o.font,l=o.out,u=o.newObject,c=o.putStream;if(a.metadata instanceof t.API.TTFFont&&a.encoding==="WinAnsiEncoding"){for(var g=a.metadata.rawData,y="",m=0;m<g.length;m++)y+=String.fromCharCode(g[m]);var N=u();c({data:y,addLength1:!0,objectId:N}),l("endobj");var A=u();c({data:r(a.metadata.toUnicode),addLength1:!0,objectId:A}),l("endobj");var C=u();l("<<"),l("/Descent "+a.metadata.decender),l("/CapHeight "+a.metadata.capHeight),l("/StemV "+a.metadata.stemV),l("/Type /FontDescriptor"),l("/FontFile2 "+N+" 0 R"),l("/Flags 96"),l("/FontBBox "+t.API.PDFObject.convert(a.metadata.bbox)),l("/FontName /"+nc(a.fontName)),l("/ItalicAngle "+a.metadata.italicAngle),l("/Ascent "+a.metadata.ascender),l(">>"),l("endobj"),a.objectNumber=u();for(var _=0;_<a.metadata.hmtx.widths.length;_++)a.metadata.hmtx.widths[_]=parseInt(a.metadata.hmtx.widths[_]*(1e3/a.metadata.head.unitsPerEm));l("<</Subtype/TrueType/Type/Font/ToUnicode "+A+" 0 R/BaseFont/"+nc(a.fontName)+"/FontDescriptor "+C+" 0 R/Encoding/"+a.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(a.metadata.hmtx.widths)+">>"),l("endobj"),a.isAlreadyPutted=!0}})(s)}]);var i=function(s){var o,a=s.text||"",l=s.x,u=s.y,c=s.options||{},g=s.mutex||{},y=g.pdfEscape,m=g.activeFontKey,N=g.fonts,A=m,C="",_=0,k="",R=N[A].encoding;if(N[A].encoding!=="Identity-H")return{text:a,x:l,y:u,options:c,mutex:g};for(k=a,A=m,Array.isArray(a)&&(k=a[0]),_=0;_<k.length;_+=1)N[A].metadata.hasOwnProperty("cmap")&&(o=N[A].metadata.cmap.unicode.codeMap[k[_].charCodeAt(0)]),o||k[_].charCodeAt(0)<256&&N[A].metadata.hasOwnProperty("Unicode")?C+=k[_]:C+="";var D="";return parseInt(A.slice(1))<14||R==="WinAnsiEncoding"?D=y(C,A).split("").map(function(z){return z.charCodeAt(0).toString(16)}).join(""):R==="Identity-H"&&(D=n(C,N[A])),g.isHex=!0,{text:D,x:l,y:u,options:c,mutex:g}};e.events.push(["postProcessText",function(s){var o=s.text||"",a=[],l={text:o,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(o)){var u=0;for(u=0;u<o.length;u+=1)Array.isArray(o[u])&&o[u].length===3?a.push([i(Object.assign({},l,{text:o[u][0]})).text,o[u][1],o[u][2]]):a.push(i(Object.assign({},l,{text:o[u]})).text);s.text=a}else s.text=i(Object.assign({},l,{text:o})).text}])}(rt),function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0},t.addFileToVFS=function(n,r){return e.call(this),this.internal.vFS[n]=r,this},t.getFileFromVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0?this.internal.vFS[n]:null}}(rt.API),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(r){var i,s,o,a,l,u,c,g=e,y=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],m=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],N={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},A={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},C=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],_=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),k=!1,R=0;this.__bidiEngine__={};var D=function(b){var S=b.charCodeAt(),P=S>>8,J=A[P];return J!==void 0?g[256*J+(255&S)]:P===252||P===253?"AL":_.test(P)?"L":P===8?"R":"N"},z=function(b){for(var S,P=0;P<b.length;P++){if((S=D(b.charAt(P)))==="L")return!1;if(S==="R")return!0}return!1},Q=function(b,S,P,J){var le,we,xe,ne,ae=S[J];switch(ae){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":k=!1;break;case"N":case"AN":break;case"EN":k&&(ae="AN");break;case"AL":k=!0,ae="R";break;case"WS":case"BN":ae="N";break;case"CS":J<1||J+1>=S.length||(le=P[J-1])!=="EN"&&le!=="AN"||(we=S[J+1])!=="EN"&&we!=="AN"?ae="N":k&&(we="AN"),ae=we===le?we:"N";break;case"ES":ae=(le=J>0?P[J-1]:"B")==="EN"&&J+1<S.length&&S[J+1]==="EN"?"EN":"N";break;case"ET":if(J>0&&P[J-1]==="EN"){ae="EN";break}if(k){ae="N";break}for(xe=J+1,ne=S.length;xe<ne&&S[xe]==="ET";)xe++;ae=xe<ne&&S[xe]==="EN"?"EN":"N";break;case"NSM":if(o&&!a){for(ne=S.length,xe=J+1;xe<ne&&S[xe]==="NSM";)xe++;if(xe<ne){var _e=b[J],ge=_e>=1425&&_e<=2303||_e===64286;if(le=S[xe],ge&&(le==="R"||le==="AL")){ae="R";break}}}ae=J<1||(le=S[J-1])==="B"?"N":P[J-1];break;case"B":k=!1,i=!0,ae=R;break;case"S":s=!0,ae="N"}return ae},j=function(b,S,P){var J=b.split("");return P&&E(J,P,{hiLevel:R}),J.reverse(),S&&S.reverse(),J.join("")},E=function(b,S,P){var J,le,we,xe,ne,ae=-1,_e=b.length,ge=0,U=[],K=R?m:y,W=[];for(k=!1,i=!1,s=!1,le=0;le<_e;le++)W[le]=D(b[le]);for(we=0;we<_e;we++){if(ne=ge,U[we]=Q(b,W,U,we),J=240&(ge=K[ne][N[U[we]]]),ge&=15,S[we]=xe=K[ge][5],J>0)if(J===16){for(le=ae;le<we;le++)S[le]=1;ae=-1}else ae=-1;if(K[ge][6])ae===-1&&(ae=we);else if(ae>-1){for(le=ae;le<we;le++)S[le]=xe;ae=-1}W[we]==="B"&&(S[we]=0),P.hiLevel|=xe}s&&function(te,re,$){for(var ue=0;ue<$;ue++)if(te[ue]==="S"){re[ue]=R;for(var he=ue-1;he>=0&&te[he]==="WS";he--)re[he]=R}}(W,S,_e)},I=function(b,S,P,J,le){if(!(le.hiLevel<b)){if(b===1&&R===1&&!i)return S.reverse(),void(P&&P.reverse());for(var we,xe,ne,ae,_e=S.length,ge=0;ge<_e;){if(J[ge]>=b){for(ne=ge+1;ne<_e&&J[ne]>=b;)ne++;for(ae=ge,xe=ne-1;ae<xe;ae++,xe--)we=S[ae],S[ae]=S[xe],S[xe]=we,P&&(we=P[ae],P[ae]=P[xe],P[xe]=we);ge=ne}ge++}}},F=function(b,S,P){var J=b.split(""),le={hiLevel:R};return P||(P=[]),E(J,P,le),function(we,xe,ne){if(ne.hiLevel!==0&&c)for(var ae,_e=0;_e<we.length;_e++)xe[_e]===1&&(ae=C.indexOf(we[_e]))>=0&&(we[_e]=C[ae+1])}(J,P,le),I(2,J,S,P,le),I(1,J,S,P,le),J.join("")};return this.__bidiEngine__.doBidiReorder=function(b,S,P){if(function(le,we){if(we)for(var xe=0;xe<le.length;xe++)we[xe]=xe;a===void 0&&(a=z(le)),u===void 0&&(u=z(le))}(b,S),o||!l||u)if(o&&l&&a^u)R=a?1:0,b=j(b,S,P);else if(!o&&l&&u)R=a?1:0,b=F(b,S,P),b=j(b,S);else if(!o||a||l||u){if(o&&!l&&a^u)b=j(b,S),a?(R=0,b=F(b,S,P)):(R=1,b=F(b,S,P),b=j(b,S));else if(o&&a&&!l&&u)R=1,b=F(b,S,P),b=j(b,S);else if(!o&&!l&&a^u){var J=c;a?(R=1,b=F(b,S,P),R=0,c=!1,b=F(b,S,P),c=J):(R=0,b=F(b,S,P),b=j(b,S),R=1,c=!1,b=F(b,S,P),c=J,b=j(b,S))}}else R=0,b=F(b,S,P);else R=a?1:0,b=F(b,S,P);return b},this.__bidiEngine__.setOptions=function(b){b&&(o=b.isInputVisual,l=b.isOutputVisual,a=b.isInputRtl,u=b.isOutputRtl,c=b.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(r){var i=r.text;r.x,r.y;var s=r.options||{};r.mutex,s.lang;var o=[];if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,n.setOptions(s),Object.prototype.toString.call(i)==="[object Array]"){var a=0;for(o=[],a=0;a<i.length;a+=1)Object.prototype.toString.call(i[a])==="[object Array]"?o.push([n.doBidiReorder(i[a][0]),i[a][1],i[a][2]]):o.push([n.doBidiReorder(i[a])]);r.text=o}else r.text=n.doBidiReorder(i);n.setOptions({isInputVisual:!0})}])}(rt),rt.API.TTFFont=function(){function t(e){var n;if(this.rawData=e,n=this.contents=new Sl(e),this.contents.pos=4,n.readString(4)==="ttcf")throw new Error("TTCF not supported.");n.pos=0,this.parse(),this.subset=new SB(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new cB(this.contents),this.head=new dB(this),this.name=new yB(this),this.cmap=new UE(this),this.toUnicode={},this.hhea=new fB(this),this.maxp=new vB(this),this.hmtx=new wB(this),this.post=new mB(this),this.os2=new pB(this),this.loca=new NB(this),this.glyf=new xB(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,n,r,i,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,a,l,u;for(u=[],o=0,a=(l=this.bbox).length;o<a;o++)e=l[o],u.push(Math.round(e*this.scaleFactor));return u}).call(this),this.stemV=0,this.post.exists?(r=255&(i=this.post.italic_angle),32768&(n=i>>16)&&(n=-(1+(65535^n))),this.italicAngle=+(n+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var n;return((n=this.cmap.unicode)!=null?n.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var n;return n=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*n},t.prototype.widthOfString=function(e,n,r){var i,s,o,a;for(o=0,s=0,a=(e=""+e).length;0<=a?s<a:s>a;s=0<=a?++s:--s)i=e.charCodeAt(s),o+=this.widthOfGlyph(this.characterToGlyph(i))+r*(1e3/n)||0;return o*(n/1e3)},t.prototype.lineHeight=function(e,n){var r;return n==null&&(n=!1),r=n?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},t}();var Zs,Sl=function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var n,r;for(r=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)r[n]=String.fromCharCode(this.readByte());return r.join("")},t.prototype.writeString=function(e){var n,r,i;for(i=[],n=0,r=e.length;0<=r?n<r:n>r;n=0<=r?++n:--n)i.push(this.writeByte(e.charCodeAt(n)));return i},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,n,r,i,s,o,a,l;return e=this.readByte(),n=this.readByte(),r=this.readByte(),i=this.readByte(),s=this.readByte(),o=this.readByte(),a=this.readByte(),l=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^n)+1099511627776*(255^r)+4294967296*(255^i)+16777216*(255^s)+65536*(255^o)+256*(255^a)+(255^l)+1):72057594037927940*e+281474976710656*n+1099511627776*r+4294967296*i+16777216*s+65536*o+256*a+l},t.prototype.writeLongLong=function(e){var n,r;return n=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var n,r;for(n=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)n.push(this.readByte());return n},t.prototype.write=function(e){var n,r,i,s;for(s=[],r=0,i=e.length;r<i;r++)n=e[r],s.push(this.writeByte(n));return s},t}(),cB=function(){var t;function e(n){var r,i,s;for(this.scalarType=n.readInt(),this.tableCount=n.readShort(),this.searchRange=n.readShort(),this.entrySelector=n.readShort(),this.rangeShift=n.readShort(),this.tables={},i=0,s=this.tableCount;0<=s?i<s:i>s;i=0<=s?++i:--i)r={tag:n.readString(4),checksum:n.readInt(),offset:n.readInt(),length:n.readInt()},this.tables[r.tag]=r}return e.prototype.encode=function(n){var r,i,s,o,a,l,u,c,g,y,m,N,A;for(A in m=Object.keys(n).length,l=Math.log(2),g=16*Math.floor(Math.log(m)/l),o=Math.floor(g/l),c=16*m-g,(i=new Sl).writeInt(this.scalarType),i.writeShort(m),i.writeShort(g),i.writeShort(o),i.writeShort(c),s=16*m,u=i.pos+s,a=null,N=[],n)for(y=n[A],i.writeString(A),i.writeInt(t(y)),i.writeInt(u),i.writeInt(y.length),N=N.concat(y),A==="head"&&(a=u),u+=y.length;u%4;)N.push(0),u++;return i.write(N),r=2981146554-t(i.data),i.pos=a+8,i.writeUInt32(r),i.data},t=function(n){var r,i,s,o;for(n=VE.call(n);n.length%4;)n.push(0);for(s=new Sl(n),i=0,r=0,o=n.length;r<o;r=r+=4)i+=s.readUInt32();return 4294967295&i},e}(),hB={}.hasOwnProperty,Co=function(t,e){for(var n in e)hB.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};Zs=function(){function t(e){var n;this.file=e,n=this.file.directory.tables[this.tag],this.exists=!!n,n&&(this.offset=n.offset,this.length=n.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var dB=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Co(t,Zs),t.prototype.tag="head",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},t.prototype.encode=function(e){var n;return(n=new Sl).writeInt(this.version),n.writeInt(this.revision),n.writeInt(this.checkSumAdjustment),n.writeInt(this.magicNumber),n.writeShort(this.flags),n.writeShort(this.unitsPerEm),n.writeLongLong(this.created),n.writeLongLong(this.modified),n.writeShort(this.xMin),n.writeShort(this.yMin),n.writeShort(this.xMax),n.writeShort(this.yMax),n.writeShort(this.macStyle),n.writeShort(this.lowestRecPPEM),n.writeShort(this.fontDirectionHint),n.writeShort(e),n.writeShort(this.glyphDataFormat),n.data},t}(),o4=function(){function t(e,n){var r,i,s,o,a,l,u,c,g,y,m,N,A,C,_,k,R;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=n+e.readInt(),g=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(l=0;l<256;++l)this.codeMap[l]=e.readByte();break;case 4:for(m=e.readUInt16(),y=m/2,e.pos+=6,s=function(){var D,z;for(z=[],l=D=0;0<=y?D<y:D>y;l=0<=y?++D:--D)z.push(e.readUInt16());return z}(),e.pos+=2,A=function(){var D,z;for(z=[],l=D=0;0<=y?D<y:D>y;l=0<=y?++D:--D)z.push(e.readUInt16());return z}(),u=function(){var D,z;for(z=[],l=D=0;0<=y?D<y:D>y;l=0<=y?++D:--D)z.push(e.readUInt16());return z}(),c=function(){var D,z;for(z=[],l=D=0;0<=y?D<y:D>y;l=0<=y?++D:--D)z.push(e.readUInt16());return z}(),i=(this.length-e.pos+this.offset)/2,a=function(){var D,z;for(z=[],l=D=0;0<=i?D<i:D>i;l=0<=i?++D:--D)z.push(e.readUInt16());return z}(),l=_=0,R=s.length;_<R;l=++_)for(C=s[l],r=k=N=A[l];N<=C?k<=C:k>=C;r=N<=C?++k:--k)c[l]===0?o=r+u[l]:(o=a[c[l]/2+(r-N)-(y-l)]||0)!==0&&(o+=u[l]),this.codeMap[r]=65535&o}e.pos=g}return t.encode=function(e,n){var r,i,s,o,a,l,u,c,g,y,m,N,A,C,_,k,R,D,z,Q,j,E,I,F,b,S,P,J,le,we,xe,ne,ae,_e,ge,U,K,W,te,re,$,ue,he,de,Ne,Re;switch(J=new Sl,o=Object.keys(e).sort(function(Pe,ze){return Pe-ze}),n){case"macroman":for(A=0,C=function(){var Pe=[];for(N=0;N<256;++N)Pe.push(0);return Pe}(),k={0:0},s={},le=0,ae=o.length;le<ae;le++)k[he=e[i=o[le]]]==null&&(k[he]=++A),s[i]={old:e[i],new:k[e[i]]},C[i]=k[e[i]];return J.writeUInt16(1),J.writeUInt16(0),J.writeUInt32(12),J.writeUInt16(0),J.writeUInt16(262),J.writeUInt16(0),J.write(C),{charMap:s,subtable:J.data,maxGlyphID:A+1};case"unicode":for(S=[],g=[],R=0,k={},r={},_=u=null,we=0,_e=o.length;we<_e;we++)k[z=e[i=o[we]]]==null&&(k[z]=++R),r[i]={old:z,new:k[z]},a=k[z]-i,_!=null&&a===u||(_&&g.push(_),S.push(i),u=a),_=i;for(_&&g.push(_),g.push(65535),S.push(65535),F=2*(I=S.length),E=2*Math.pow(Math.log(I)/Math.LN2,2),y=Math.log(E/2)/Math.LN2,j=2*I-E,l=[],Q=[],m=[],N=xe=0,ge=S.length;xe<ge;N=++xe){if(b=S[N],c=g[N],b===65535){l.push(0),Q.push(0);break}if(b-(P=r[b].new)>=32768)for(l.push(0),Q.push(2*(m.length+I-N)),i=ne=b;b<=c?ne<=c:ne>=c;i=b<=c?++ne:--ne)m.push(r[i].new);else l.push(P-b),Q.push(0)}for(J.writeUInt16(3),J.writeUInt16(1),J.writeUInt32(12),J.writeUInt16(4),J.writeUInt16(16+8*I+2*m.length),J.writeUInt16(0),J.writeUInt16(F),J.writeUInt16(E),J.writeUInt16(y),J.writeUInt16(j),$=0,U=g.length;$<U;$++)i=g[$],J.writeUInt16(i);for(J.writeUInt16(0),ue=0,K=S.length;ue<K;ue++)i=S[ue],J.writeUInt16(i);for(de=0,W=l.length;de<W;de++)a=l[de],J.writeUInt16(a);for(Ne=0,te=Q.length;Ne<te;Ne++)D=Q[Ne],J.writeUInt16(D);for(Re=0,re=m.length;Re<re;Re++)A=m[Re],J.writeUInt16(A);return{charMap:r,subtable:J.data,maxGlyphID:R+1}}},t}(),UE=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Co(t,Zs),t.prototype.tag="cmap",t.prototype.parse=function(e){var n,r,i;for(e.pos=this.offset,this.version=e.readUInt16(),i=e.readUInt16(),this.tables=[],this.unicode=null,r=0;0<=i?r<i:r>i;r=0<=i?++r:--r)n=new o4(e,this.offset),this.tables.push(n),n.isUnicode&&this.unicode==null&&(this.unicode=n);return!0},t.encode=function(e,n){var r,i;return n==null&&(n="macroman"),r=o4.encode(e,n),(i=new Sl).writeUInt16(0),i.writeUInt16(1),r.table=i.data.concat(r.subtable),r},t}(),fB=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Co(t,Zs),t.prototype.tag="hhea",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},t}(),pB=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Co(t,Zs),t.prototype.tag="OS/2",t.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=function(){var n,r;for(r=[],n=0;n<10;++n)r.push(e.readByte());return r}(),this.charRange=function(){var n,r;for(r=[],n=0;n<4;++n)r.push(e.readInt());return r}(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=function(){var n,r;for(r=[],n=0;n<2;n=++n)r.push(e.readInt());return r}(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},t}(),mB=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Co(t,Zs),t.prototype.tag="post",t.prototype.parse=function(e){var n,r,i;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:case 196608:break;case 131072:var s;for(r=e.readUInt16(),this.glyphNameIndex=[],s=0;0<=r?s<r:s>r;s=0<=r?++s:--s)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],i=[];e.pos<this.offset+this.length;)n=e.readByte(),i.push(this.names.push(e.readString(n)));return i;case 151552:return r=e.readUInt16(),this.offsets=e.read(r);case 262144:return this.map=(function(){var o,a,l;for(l=[],s=o=0,a=this.file.maxp.numGlyphs;0<=a?o<a:o>a;s=0<=a?++o:--o)l.push(e.readUInt32());return l}).call(this)}},t}(),gB=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},yB=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Co(t,Zs),t.prototype.tag="name",t.prototype.parse=function(e){var n,r,i,s,o,a,l,u,c,g,y;for(e.pos=this.offset,e.readShort(),n=e.readShort(),a=e.readShort(),r=[],s=0;0<=n?s<n:s>n;s=0<=n?++s:--s)r.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+a+e.readShort()});for(l={},s=c=0,g=r.length;c<g;s=++c)i=r[s],e.pos=i.offset,u=e.readString(i.length),o=new gB(u,i),l[y=i.nameID]==null&&(l[y]=[]),l[i.nameID].push(o);this.strings=l,this.copyright=l[0],this.fontFamily=l[1],this.fontSubfamily=l[2],this.uniqueSubfamily=l[3],this.fontName=l[4],this.version=l[5];try{this.postscriptName=l[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=l[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=l[7],this.manufacturer=l[8],this.designer=l[9],this.description=l[10],this.vendorUrl=l[11],this.designerUrl=l[12],this.license=l[13],this.licenseUrl=l[14],this.preferredFamily=l[15],this.preferredSubfamily=l[17],this.compatibleFull=l[18],this.sampleText=l[19]},t}(),vB=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Co(t,Zs),t.prototype.tag="maxp",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},t}(),wB=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Co(t,Zs),t.prototype.tag="hmtx",t.prototype.parse=function(e){var n,r,i,s,o,a,l;for(e.pos=this.offset,this.metrics=[],n=0,a=this.file.hhea.numberOfMetrics;0<=a?n<a:n>a;n=0<=a?++n:--n)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(i=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var u,c;for(c=[],n=u=0;0<=i?u<i:u>i;n=0<=i?++u:--u)c.push(e.readInt16());return c}(),this.widths=(function(){var u,c,g,y;for(y=[],u=0,c=(g=this.metrics).length;u<c;u++)s=g[u],y.push(s.advance);return y}).call(this),r=this.widths[this.widths.length-1],l=[],n=o=0;0<=i?o<i:o>i;n=0<=i?++o:--o)l.push(this.widths.push(r));return l},t.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},t}(),VE=[].slice,xB=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Co(t,Zs),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(e){var n,r,i,s,o,a,l,u,c,g;return e in this.cache?this.cache[e]:(s=this.file.loca,n=this.file.contents,r=s.indexOf(e),(i=s.lengthOf(e))===0?this.cache[e]=null:(n.pos=this.offset+r,o=(a=new Sl(n.read(i))).readShort(),u=a.readShort(),g=a.readShort(),l=a.readShort(),c=a.readShort(),this.cache[e]=o===-1?new bB(a,u,g,l,c):new _B(a,o,u,g,l,c),this.cache[e]))},t.prototype.encode=function(e,n,r){var i,s,o,a,l;for(o=[],s=[],a=0,l=n.length;a<l;a++)i=e[n[a]],s.push(o.length),i&&(o=o.concat(i.encode(r)));return s.push(o.length),{table:o,offsets:s}},t}(),_B=function(){function t(e,n,r,i,s,o){this.raw=e,this.numberOfContours=n,this.xMin=r,this.yMin=i,this.xMax=s,this.yMax=o,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),bB=function(){function t(e,n,r,i,s){var o,a;for(this.raw=e,this.xMin=n,this.yMin=r,this.xMax=i,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;a=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&a;)o.pos+=1&a?4:2,128&a?o.pos+=8:64&a?o.pos+=4:8&a&&(o.pos+=2)}return t.prototype.encode=function(){var e,n,r;for(n=new Sl(VE.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)n.pos=this.glyphOffsets[e];return n.data},t}(),NB=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Co(t,Zs),t.prototype.tag="loca",t.prototype.parse=function(e){var n,r;return e.pos=this.offset,n=this.file.head.indexToLocFormat,this.offsets=n===0?(function(){var i,s;for(s=[],r=0,i=this.length;r<i;r+=2)s.push(2*e.readUInt16());return s}).call(this):(function(){var i,s;for(s=[],r=0,i=this.length;r<i;r+=4)s.push(e.readUInt32());return s}).call(this)},t.prototype.indexOf=function(e){return this.offsets[e]},t.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},t.prototype.encode=function(e,n){for(var r=new Uint32Array(this.offsets.length),i=0,s=0,o=0;o<r.length;++o)if(r[o]=i,s<n.length&&n[s]==o){++s,r[o]=i;var a=this.offsets[o],l=this.offsets[o+1]-a;l>0&&(i+=l)}for(var u=new Array(4*r.length),c=0;c<r.length;++c)u[4*c+3]=255&r[c],u[4*c+2]=(65280&r[c])>>8,u[4*c+1]=(16711680&r[c])>>16,u[4*c]=(4278190080&r[c])>>24;return u},t}(),SB=function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,n,r,i,s;for(n in i=this.font.cmap.tables[0].codeMap,e={},s=this.subset)r=s[n],e[n]=i[r];return e},t.prototype.glyphsFor=function(e){var n,r,i,s,o,a,l;for(i={},o=0,a=e.length;o<a;o++)i[s=e[o]]=this.font.glyf.glyphFor(s);for(s in n=[],i)(r=i[s])!=null&&r.compound&&n.push.apply(n,r.glyphIDs);if(n.length>0)for(s in l=this.glyphsFor(n))r=l[s],i[s]=r;return i},t.prototype.encode=function(e,n){var r,i,s,o,a,l,u,c,g,y,m,N,A,C,_;for(i in r=UE.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(e),m={0:0},_=r.charMap)m[(l=_[i]).old]=l.new;for(N in y=r.maxGlyphID,o)N in m||(m[N]=y++);return c=function(k){var R,D;for(R in D={},k)D[k[R]]=R;return D}(m),g=Object.keys(c).sort(function(k,R){return k-R}),A=function(){var k,R,D;for(D=[],k=0,R=g.length;k<R;k++)a=g[k],D.push(c[a]);return D}(),s=this.font.glyf.encode(o,A,m),u=this.font.loca.encode(s.offsets,A),C={cmap:this.font.cmap.raw(),glyf:s.table,loca:u,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(n)},this.font.os2.exists&&(C["OS/2"]=this.font.os2.raw()),this.font.directory.encode(C)},t}();rt.API.PDFObject=function(){var t;function e(){}return t=function(n,r){return(Array(r+1).join("0")+n).slice(-r)},e.convert=function(n){var r,i,s,o;if(Array.isArray(n))return"["+function(){var a,l,u;for(u=[],a=0,l=n.length;a<l;a++)r=n[a],u.push(e.convert(r));return u}().join(" ")+"]";if(typeof n=="string")return"/"+n;if(n!=null&&n.isString)return"("+n+")";if(n instanceof Date)return"(D:"+t(n.getUTCFullYear(),4)+t(n.getUTCMonth(),2)+t(n.getUTCDate(),2)+t(n.getUTCHours(),2)+t(n.getUTCMinutes(),2)+t(n.getUTCSeconds(),2)+"Z)";if({}.toString.call(n)==="[object Object]"){for(i in s=["<<"],n)o=n[i],s.push("/"+i+" "+e.convert(o));return s.push(">>"),s.join(`
`)}return""+n},e}();function BE(t,e,n,r,i){r=r||{};var s=1.15,o=i.internal.scaleFactor,a=i.internal.getFontSize()/o,l=i.getLineHeightFactor?i.getLineHeightFactor():s,u=a*l,c=/\r\n|\r|\n/g,g="",y=1;if((r.valign==="middle"||r.valign==="bottom"||r.halign==="center"||r.halign==="right")&&(g=typeof t=="string"?t.split(c):t,y=g.length||1),n+=a*(2-s),r.valign==="middle"?n-=y/2*u:r.valign==="bottom"&&(n-=y*u),r.halign==="center"||r.halign==="right"){var m=a;if(r.halign==="center"&&(m*=.5),g&&y>=1){for(var N=0;N<g.length;N++)i.text(g[N],e-i.getStringUnitWidth(g[N])*m,n),n+=u;return i}e-=i.getStringUnitWidth(t)*m}return r.halign==="justify"?i.text(t,e,n,{maxWidth:r.maxWidth||100,align:"justify"}):i.text(t,e,n),i}var a4={},Cc=function(){function t(e){this.jsPDFDocument=e,this.userStyles={textColor:e.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:e.internal.getFontSize(),fontStyle:e.internal.getFont().fontStyle,font:e.internal.getFont().fontName,lineWidth:e.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:e.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return t.setDefaults=function(e,n){n===void 0&&(n=null),n?n.__autoTableDocumentDefaults=e:a4=e},t.unifyColor=function(e){return Array.isArray(e)?e:typeof e=="number"?[e,e,e]:typeof e=="string"?[e]:null},t.prototype.applyStyles=function(e,n){var r,i,s;n===void 0&&(n=!1),e.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(e.fontStyle);var o=this.jsPDFDocument.internal.getFont(),a=o.fontStyle,l=o.fontName;if(e.font&&(l=e.font),e.fontStyle){a=e.fontStyle;var u=this.getFontList()[l];u&&u.indexOf(a)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(u[0]),a=u[0])}if(this.jsPDFDocument.setFont(l,a),e.fontSize&&this.jsPDFDocument.setFontSize(e.fontSize),!n){var c=t.unifyColor(e.fillColor);c&&(r=this.jsPDFDocument).setFillColor.apply(r,c),c=t.unifyColor(e.textColor),c&&(i=this.jsPDFDocument).setTextColor.apply(i,c),c=t.unifyColor(e.lineColor),c&&(s=this.jsPDFDocument).setDrawColor.apply(s,c),typeof e.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(e.lineWidth)}},t.prototype.splitTextToSize=function(e,n,r){return this.jsPDFDocument.splitTextToSize(e,n,r)},t.prototype.rect=function(e,n,r,i,s){return this.jsPDFDocument.rect(e,n,r,i,s)},t.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},t.prototype.getTextWidth=function(e){return this.jsPDFDocument.getTextWidth(e)},t.prototype.getDocument=function(){return this.jsPDFDocument},t.prototype.setPage=function(e){this.jsPDFDocument.setPage(e)},t.prototype.addPage=function(){return this.jsPDFDocument.addPage()},t.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},t.prototype.getGlobalOptions=function(){return a4||{}},t.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},t.prototype.pageSize=function(){var e=this.jsPDFDocument.internal.pageSize;return e.width==null&&(e={width:e.getWidth(),height:e.getHeight()}),e},t.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},t.prototype.getLineHeightFactor=function(){var e=this.jsPDFDocument;return e.getLineHeightFactor?e.getLineHeightFactor():1.15},t.prototype.getLineHeight=function(e){return e/this.scaleFactor()*this.getLineHeightFactor()},t.prototype.pageNumber=function(){var e=this.jsPDFDocument.internal.getCurrentPageInfo();return e?e.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},t}(),Y2=function(t,e){return Y2=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},Y2(t,e)};function zE(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Y2(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var qE=function(t){zE(e,t);function e(n){var r=t.call(this)||this;return r._element=n,r}return e}(Array);function AB(t){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/t,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function EB(t){var e={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return e[t]}function Dm(t,e,n){n.applyStyles(e,!0);var r=Array.isArray(t)?t:[t],i=r.map(function(s){return n.getTextWidth(s)}).reduce(function(s,o){return Math.max(s,o)},0);return i}function HE(t,e,n,r){var i=e.settings.tableLineWidth,s=e.settings.tableLineColor;t.applyStyles({lineWidth:i,lineColor:s});var o=WE(i,!1);o&&t.rect(n.x,n.y,e.getWidth(t.pageSize().width),r.y-n.y,o)}function WE(t,e){var n=t>0,r=e||e===0;return n&&r?"DF":n?"S":r?"F":null}function Pg(t,e){var n,r,i,s;if(t=t||e,Array.isArray(t)){if(t.length>=4)return{top:t[0],right:t[1],bottom:t[2],left:t[3]};if(t.length===3)return{top:t[0],right:t[1],bottom:t[2],left:t[1]};if(t.length===2)return{top:t[0],right:t[1],bottom:t[0],left:t[1]};t.length===1?t=t[0]:t=e}return typeof t=="object"?(typeof t.vertical=="number"&&(t.top=t.vertical,t.bottom=t.vertical),typeof t.horizontal=="number"&&(t.right=t.horizontal,t.left=t.horizontal),{left:(n=t.left)!==null&&n!==void 0?n:e,top:(r=t.top)!==null&&r!==void 0?r:e,right:(i=t.right)!==null&&i!==void 0?i:e,bottom:(s=t.bottom)!==null&&s!==void 0?s:e}):(typeof t!="number"&&(t=e),{top:t,right:t,bottom:t,left:t})}function $E(t,e){var n=Pg(e.settings.margin,0);return t.pageSize().width-(n.left+n.right)}function TB(t,e,n,r,i){var s={},o=1.3333333333333333,a=l1(e,function(R){return i.getComputedStyle(R).backgroundColor});a!=null&&(s.fillColor=a);var l=l1(e,function(R){return i.getComputedStyle(R).color});l!=null&&(s.textColor=l);var u=kB(r,n);u&&(s.cellPadding=u);var c="borderTopColor",g=o*n,y=r.borderTopWidth;if(r.borderBottomWidth===y&&r.borderRightWidth===y&&r.borderLeftWidth===y){var m=(parseFloat(y)||0)/g;m&&(s.lineWidth=m)}else s.lineWidth={top:(parseFloat(r.borderTopWidth)||0)/g,right:(parseFloat(r.borderRightWidth)||0)/g,bottom:(parseFloat(r.borderBottomWidth)||0)/g,left:(parseFloat(r.borderLeftWidth)||0)/g},s.lineWidth.top||(s.lineWidth.right?c="borderRightColor":s.lineWidth.bottom?c="borderBottomColor":s.lineWidth.left&&(c="borderLeftColor"));var N=l1(e,function(R){return i.getComputedStyle(R)[c]});N!=null&&(s.lineColor=N);var A=["left","right","center","justify"];A.indexOf(r.textAlign)!==-1&&(s.halign=r.textAlign),A=["middle","bottom","top"],A.indexOf(r.verticalAlign)!==-1&&(s.valign=r.verticalAlign);var C=parseInt(r.fontSize||"");isNaN(C)||(s.fontSize=C/o);var _=IB(r);_&&(s.fontStyle=_);var k=(r.fontFamily||"").toLowerCase();return t.indexOf(k)!==-1&&(s.font=k),s}function IB(t){var e="";return(t.fontWeight==="bold"||t.fontWeight==="bolder"||parseInt(t.fontWeight)>=700)&&(e="bold"),(t.fontStyle==="italic"||t.fontStyle==="oblique")&&(e+="italic"),e}function l1(t,e){var n=GE(t,e);if(!n)return null;var r=n.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!r||!Array.isArray(r))return null;var i=[parseInt(r[1]),parseInt(r[2]),parseInt(r[3])],s=parseInt(r[4]);return s===0||isNaN(i[0])||isNaN(i[1])||isNaN(i[2])?null:i}function GE(t,e){var n=e(t);return n==="rgba(0, 0, 0, 0)"||n==="transparent"||n==="initial"||n==="inherit"?t.parentElement==null?null:GE(t.parentElement,e):n}function kB(t,e){var n=[t.paddingTop,t.paddingRight,t.paddingBottom,t.paddingLeft],r=96/(72/e),i=(parseInt(t.lineHeight)-parseInt(t.fontSize))/e/2,s=n.map(function(a){return parseInt(a||"0")/r}),o=Pg(s,0);return i>o.top&&(o.top=i),i>o.bottom&&(o.bottom=i),o}function KE(t,e,n,r,i){var s,o;r===void 0&&(r=!1),i===void 0&&(i=!1);var a;typeof e=="string"?a=n.document.querySelector(e):a=e;var l=Object.keys(t.getFontList()),u=t.scaleFactor(),c=[],g=[],y=[];if(!a)return console.error("Html table could not be found with input: ",e),{head:c,body:g,foot:y};for(var m=0;m<a.rows.length;m++){var N=a.rows[m],A=(o=(s=N==null?void 0:N.parentElement)===null||s===void 0?void 0:s.tagName)===null||o===void 0?void 0:o.toLowerCase(),C=PB(l,u,n,N,r,i);C&&(A==="thead"?c.push(C):A==="tfoot"?y.push(C):g.push(C))}return{head:c,body:g,foot:y}}function PB(t,e,n,r,i,s){for(var o=new qE(r),a=0;a<r.cells.length;a++){var l=r.cells[a],u=n.getComputedStyle(l);if(i||u.display!=="none"){var c=void 0;s&&(c=TB(t,l,e,u,n)),o.push({rowSpan:l.rowSpan,colSpan:l.colSpan,styles:c,_element:l,content:CB(l)})}}var g=n.getComputedStyle(r);if(o.length>0&&(i||g.display!=="none"))return o}function CB(t){var e=t.cloneNode(!0);return e.innerHTML=e.innerHTML.replace(/\n/g,"").replace(/ +/g," "),e.innerHTML=e.innerHTML.split(/<br.*?>/).map(function(n){return n.trim()}).join(`
`),e.innerText||e.textContent||""}function LB(t,e,n){for(var r=0,i=[t,e,n];r<i.length;r++){var s=i[r];s&&typeof s!="object"&&console.error("The options parameter should be of type object, is: "+typeof s),s.startY&&typeof s.startY!="number"&&(console.error("Invalid value for startY option",s.startY),delete s.startY)}}function ra(t,e,n,r,i){if(t==null)throw new TypeError("Cannot convert undefined or null to object");for(var s=Object(t),o=1;o<arguments.length;o++){var a=arguments[o];if(a!=null)for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(s[l]=a[l])}return s}function YE(t,e){var n=new Cc(t),r=n.getDocumentOptions(),i=n.getGlobalOptions();LB(i,r,e);var s=ra({},i,r,e),o;typeof window<"u"&&(o=window);var a=RB(i,r,e),l=jB(i,r,e),u=DB(n,s),c=FB(n,s,o);return{id:e.tableId,content:c,hooks:l,styles:a,settings:u}}function RB(t,e,n){for(var r={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},i=function(l){if(l==="columnStyles"){var u=t[l],c=e[l],g=n[l];r.columnStyles=ra({},u,c,g)}else{var y=[t,e,n],m=y.map(function(N){return N[l]||{}});r[l]=ra({},m[0],m[1],m[2])}},s=0,o=Object.keys(r);s<o.length;s++){var a=o[s];i(a)}return r}function jB(t,e,n){for(var r=[t,e,n],i={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},s=0,o=r;s<o.length;s++){var a=o[s];a.didParseCell&&i.didParseCell.push(a.didParseCell),a.willDrawCell&&i.willDrawCell.push(a.willDrawCell),a.didDrawCell&&i.didDrawCell.push(a.didDrawCell),a.willDrawPage&&i.willDrawPage.push(a.willDrawPage),a.didDrawPage&&i.didDrawPage.push(a.didDrawPage)}return i}function DB(t,e){var n,r,i,s,o,a,l,u,c,g,y,m,N=Pg(e.margin,40/t.scaleFactor()),A=(n=OB(t,e.startY))!==null&&n!==void 0?n:N.top,C;e.showFoot===!0?C="everyPage":e.showFoot===!1?C="never":C=(r=e.showFoot)!==null&&r!==void 0?r:"everyPage";var _;e.showHead===!0?_="everyPage":e.showHead===!1?_="never":_=(i=e.showHead)!==null&&i!==void 0?i:"everyPage";var k=(s=e.useCss)!==null&&s!==void 0?s:!1,R=e.theme||(k?"plain":"striped"),D=!!e.horizontalPageBreak,z=(o=e.horizontalPageBreakRepeat)!==null&&o!==void 0?o:null;return{includeHiddenHtml:(a=e.includeHiddenHtml)!==null&&a!==void 0?a:!1,useCss:k,theme:R,startY:A,margin:N,pageBreak:(l=e.pageBreak)!==null&&l!==void 0?l:"auto",rowPageBreak:(u=e.rowPageBreak)!==null&&u!==void 0?u:"auto",tableWidth:(c=e.tableWidth)!==null&&c!==void 0?c:"auto",showHead:_,showFoot:C,tableLineWidth:(g=e.tableLineWidth)!==null&&g!==void 0?g:0,tableLineColor:(y=e.tableLineColor)!==null&&y!==void 0?y:200,horizontalPageBreak:D,horizontalPageBreakRepeat:z,horizontalPageBreakBehaviour:(m=e.horizontalPageBreakBehaviour)!==null&&m!==void 0?m:"afterAllRows"}}function OB(t,e){var n=t.getLastAutoTable(),r=t.scaleFactor(),i=t.pageNumber(),s=!1;if(n&&n.startPageNumber){var o=n.startPageNumber+n.pageNumber-1;s=o===i}return typeof e=="number"?e:(e==null||e===!1)&&s&&(n==null?void 0:n.finalY)!=null?n.finalY+20/r:null}function FB(t,e,n){var r=e.head||[],i=e.body||[],s=e.foot||[];if(e.html){var o=e.includeHiddenHtml;if(n){var a=KE(t,e.html,n,o,e.useCss)||{};r=a.head||r,i=a.body||r,s=a.foot||r}else console.error("Cannot parse html in non browser environment")}var l=e.columns||MB(r,i,s);return{columns:l,head:r,body:i,foot:s}}function MB(t,e,n){var r=t[0]||e[0]||n[0]||[],i=[];return Object.keys(r).filter(function(s){return s!=="_element"}).forEach(function(s){var o=1,a;Array.isArray(r)?a=r[parseInt(s)]:a=r[s],typeof a=="object"&&!Array.isArray(a)&&(o=(a==null?void 0:a.colSpan)||1);for(var l=0;l<o;l++){var u=void 0;Array.isArray(r)?u=i.length:u=s+(l>0?"_".concat(l):"");var c={dataKey:u};i.push(c)}}),i}var Q2=function(){function t(e,n,r){this.table=n,this.pageNumber=n.pageNumber,this.settings=n.settings,this.cursor=r,this.doc=e.getDocument()}return t}(),UB=function(t){zE(e,t);function e(n,r,i,s,o,a){var l=t.call(this,n,r,a)||this;return l.cell=i,l.row=s,l.column=o,l.section=s.section,l}return e}(Q2),VB=function(){function t(e,n){this.pageNumber=1,this.id=e.id,this.settings=e.settings,this.styles=e.styles,this.hooks=e.hooks,this.columns=n.columns,this.head=n.head,this.body=n.body,this.foot=n.foot}return t.prototype.getHeadHeight=function(e){return this.head.reduce(function(n,r){return n+r.getMaxCellHeight(e)},0)},t.prototype.getFootHeight=function(e){return this.foot.reduce(function(n,r){return n+r.getMaxCellHeight(e)},0)},t.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},t.prototype.callCellHooks=function(e,n,r,i,s,o){for(var a=0,l=n;a<l.length;a++){var u=l[a],c=new UB(e,this,r,i,s,o),g=u(c)===!1;if(r.text=Array.isArray(r.text)?r.text:[r.text],g)return!1}return!0},t.prototype.callEndPageHooks=function(e,n){e.applyStyles(e.userStyles);for(var r=0,i=this.hooks.didDrawPage;r<i.length;r++){var s=i[r];s(new Q2(e,this,n))}},t.prototype.callWillDrawPageHooks=function(e,n){for(var r=0,i=this.hooks.willDrawPage;r<i.length;r++){var s=i[r];s(new Q2(e,this,n))}},t.prototype.getWidth=function(e){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var n=this.columns.reduce(function(i,s){return i+s.wrappedWidth},0);return n}else{var r=this.settings.margin;return e-r.left-r.right}},t}(),QE=function(){function t(e,n,r,i,s){s===void 0&&(s=!1),this.height=0,this.raw=e,e instanceof qE&&(this.raw=e._element,this.element=e._element),this.index=n,this.section=r,this.cells=i,this.spansMultiplePages=s}return t.prototype.getMaxCellHeight=function(e){var n=this;return e.reduce(function(r,i){var s;return Math.max(r,((s=n.cells[i.index])===null||s===void 0?void 0:s.height)||0)},0)},t.prototype.hasRowSpan=function(e){var n=this;return e.filter(function(r){var i=n.cells[r.index];return i?i.rowSpan>1:!1}).length>0},t.prototype.canEntireRowFit=function(e,n){return this.getMaxCellHeight(n)<=e},t.prototype.getMinimumRowHeight=function(e,n){var r=this;return e.reduce(function(i,s){var o=r.cells[s.index];if(!o)return 0;var a=n.getLineHeight(o.styles.fontSize),l=o.padding("vertical"),u=l+a;return u>i?u:i},0)},t}(),JE=function(){function t(e,n,r){var i;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=n,this.section=r,this.raw=e;var s=e;e!=null&&typeof e=="object"&&!Array.isArray(e)?(this.rowSpan=e.rowSpan||1,this.colSpan=e.colSpan||1,s=(i=e.content)!==null&&i!==void 0?i:e,e._element&&(this.raw=e._element)):(this.rowSpan=1,this.colSpan=1);var o=s!=null?""+s:"",a=/\r\n|\r|\n/g;this.text=o.split(a)}return t.prototype.getTextPos=function(){var e;if(this.styles.valign==="top")e=this.y+this.padding("top");else if(this.styles.valign==="bottom")e=this.y+this.height-this.padding("bottom");else{var n=this.height-this.padding("vertical");e=this.y+n/2+this.padding("top")}var r;if(this.styles.halign==="right")r=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var i=this.width-this.padding("horizontal");r=this.x+i/2+this.padding("left")}else r=this.x+this.padding("left");return{x:r,y:e}},t.prototype.getContentHeight=function(e,n){n===void 0&&(n=1.15);var r=Array.isArray(this.text)?this.text.length:1,i=this.styles.fontSize/e*n,s=r*i+this.padding("vertical");return Math.max(s,this.styles.minCellHeight)},t.prototype.padding=function(e){var n=Pg(this.styles.cellPadding,0);return e==="vertical"?n.top+n.bottom:e==="horizontal"?n.left+n.right:n[e]},t}(),BB=function(){function t(e,n,r){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=e,this.raw=n,this.index=r}return t.prototype.getMaxCustomCellWidth=function(e){for(var n=0,r=0,i=e.allRows();r<i.length;r++){var s=i[r],o=s.cells[this.index];o&&typeof o.styles.cellWidth=="number"&&(n=Math.max(n,o.styles.cellWidth))}return n},t}();function zB(t,e){qB(t,e);var n=[],r=0;e.columns.forEach(function(s){var o=s.getMaxCustomCellWidth(e);o?s.width=o:(s.width=s.wrappedWidth,n.push(s)),r+=s.width});var i=e.getWidth(t.pageSize().width)-r;i&&(i=J2(n,i,function(s){return Math.max(s.minReadableWidth,s.minWidth)})),i&&(i=J2(n,i,function(s){return s.minWidth})),i=Math.abs(i),!e.settings.horizontalPageBreak&&i>.1/t.scaleFactor()&&(i=i<1?i:Math.round(i),console.warn("Of the table content, ".concat(i," units width could not fit page"))),WB(e),$B(e,t),HB(e)}function qB(t,e){var n=t.scaleFactor(),r=e.settings.horizontalPageBreak,i=$E(t,e);e.allRows().forEach(function(s){for(var o=0,a=e.columns;o<a.length;o++){var l=a[o],u=s.cells[l.index];if(u){var c=e.hooks.didParseCell;e.callCellHooks(t,c,u,s,l,null);var g=u.padding("horizontal");u.contentWidth=Dm(u.text,u.styles,t)+g;var y=Dm(u.text.join(" ").split(/[^\S\u00A0]+/),u.styles,t);if(u.minReadableWidth=y+u.padding("horizontal"),typeof u.styles.cellWidth=="number")u.minWidth=u.styles.cellWidth,u.wrappedWidth=u.styles.cellWidth;else if(u.styles.cellWidth==="wrap"||r===!0)u.contentWidth>i?(u.minWidth=i,u.wrappedWidth=i):(u.minWidth=u.contentWidth,u.wrappedWidth=u.contentWidth);else{var m=10/n;u.minWidth=u.styles.minCellWidth||m,u.wrappedWidth=u.contentWidth,u.minWidth>u.wrappedWidth&&(u.wrappedWidth=u.minWidth)}}}}),e.allRows().forEach(function(s){for(var o=0,a=e.columns;o<a.length;o++){var l=a[o],u=s.cells[l.index];if(u&&u.colSpan===1)l.wrappedWidth=Math.max(l.wrappedWidth,u.wrappedWidth),l.minWidth=Math.max(l.minWidth,u.minWidth),l.minReadableWidth=Math.max(l.minReadableWidth,u.minReadableWidth);else{var c=e.styles.columnStyles[l.dataKey]||e.styles.columnStyles[l.index]||{},g=c.cellWidth||c.minCellWidth;g&&typeof g=="number"&&(l.minWidth=g,l.wrappedWidth=g)}u&&(u.colSpan>1&&!l.minWidth&&(l.minWidth=u.minWidth),u.colSpan>1&&!l.wrappedWidth&&(l.wrappedWidth=u.minWidth))}})}function J2(t,e,n){for(var r=e,i=t.reduce(function(m,N){return m+N.wrappedWidth},0),s=0;s<t.length;s++){var o=t[s],a=o.wrappedWidth/i,l=r*a,u=o.width+l,c=n(o),g=u<c?c:u;e-=g-o.width,o.width=g}if(e=Math.round(e*1e10)/1e10,e){var y=t.filter(function(m){return e<0?m.width>n(m):!0});y.length&&(e=J2(y,e,n))}return e}function HB(t){for(var e={},n=1,r=t.allRows(),i=0;i<r.length;i++)for(var s=r[i],o=0,a=t.columns;o<a.length;o++){var l=a[o],u=e[l.index];if(n>1)n--,delete s.cells[l.index];else if(u)u.cell.height+=s.height,n=u.cell.colSpan,delete s.cells[l.index],u.left--,u.left<=1&&delete e[l.index];else{var c=s.cells[l.index];if(!c)continue;if(c.height=s.height,c.rowSpan>1){var g=r.length-i,y=c.rowSpan>g?g:c.rowSpan;e[l.index]={cell:c,left:y,row:s}}}}}function WB(t){for(var e=t.allRows(),n=0;n<e.length;n++)for(var r=e[n],i=null,s=0,o=0,a=0;a<t.columns.length;a++){var l=t.columns[a];if(o-=1,o>1&&t.columns[a+1])s+=l.width,delete r.cells[l.index];else if(i){var u=i;delete r.cells[l.index],i=null,u.width=l.width+s}else{var u=r.cells[l.index];if(!u)continue;if(o=u.colSpan,s=0,u.colSpan>1){i=u,s+=l.width;continue}u.width=l.width+s}}}function $B(t,e){for(var n={count:0,height:0},r=0,i=t.allRows();r<i.length;r++){for(var s=i[r],o=0,a=t.columns;o<a.length;o++){var l=a[o],u=s.cells[l.index];if(u){e.applyStyles(u.styles,!0);var c=u.width-u.padding("horizontal");if(u.styles.overflow==="linebreak")u.text=e.splitTextToSize(u.text,c+1/e.scaleFactor(),{fontSize:u.styles.fontSize});else if(u.styles.overflow==="ellipsize")u.text=l4(u.text,c,u.styles,e,"...");else if(u.styles.overflow==="hidden")u.text=l4(u.text,c,u.styles,e,"");else if(typeof u.styles.overflow=="function"){var g=u.styles.overflow(u.text,c);typeof g=="string"?u.text=[g]:u.text=g}u.contentHeight=u.getContentHeight(e.scaleFactor(),e.getLineHeightFactor());var y=u.contentHeight/u.rowSpan;u.rowSpan>1&&n.count*n.height<y*u.rowSpan?n={height:y,count:u.rowSpan}:n&&n.count>0&&n.height>y&&(y=n.height),y>s.height&&(s.height=y)}}n.count--}}function l4(t,e,n,r,i){return t.map(function(s){return GB(s,e,n,r,i)})}function GB(t,e,n,r,i){var s=1e4*r.scaleFactor();if(e=Math.ceil(e*s)/s,e>=Dm(t,n,r))return t;for(;e<Dm(t+i,n,r)&&!(t.length<=1);)t=t.substring(0,t.length-1);return t.trim()+i}function XE(t,e){var n=new Cc(t),r=KB(e,n.scaleFactor()),i=new VB(e,r);return zB(n,i),n.applyStyles(n.userStyles),i}function KB(t,e){var n=t.content,r=QB(n.columns);if(n.head.length===0){var i=u4(r,"head");i&&n.head.push(i)}if(n.foot.length===0){var i=u4(r,"foot");i&&n.foot.push(i)}var s=t.settings.theme,o=t.styles;return{columns:r,head:u1("head",n.head,r,o,s,e),body:u1("body",n.body,r,o,s,e),foot:u1("foot",n.foot,r,o,s,e)}}function u1(t,e,n,r,i,s){var o={},a=e.map(function(l,u){for(var c=0,g={},y=0,m=0,N=0,A=n;N<A.length;N++){var C=A[N];if(o[C.index]==null||o[C.index].left===0)if(m===0){var _=void 0;Array.isArray(l)?_=l[C.index-y-c]:_=l[C.dataKey];var k={};typeof _=="object"&&!Array.isArray(_)&&(k=(_==null?void 0:_.styles)||{});var R=JB(t,C,u,i,r,s,k),D=new JE(_,R,t);g[C.dataKey]=D,g[C.index]=D,m=D.colSpan-1,o[C.index]={left:D.rowSpan-1,times:m}}else m--,y++;else o[C.index].left--,m=o[C.index].times,c++}return new QE(l,u,t,g)});return a}function u4(t,e){var n={};return t.forEach(function(r){if(r.raw!=null){var i=YB(e,r.raw);i!=null&&(n[r.dataKey]=i)}}),Object.keys(n).length>0?n:null}function YB(t,e){if(t==="head"){if(typeof e=="object")return e.header||null;if(typeof e=="string"||typeof e=="number")return e}else if(t==="foot"&&typeof e=="object")return e.footer;return null}function QB(t){return t.map(function(e,n){var r,i;return typeof e=="object"?i=(r=e.dataKey)!==null&&r!==void 0?r:n:i=n,new BB(i,e,n)})}function JB(t,e,n,r,i,s,o){var a=EB(r),l;t==="head"?l=i.headStyles:t==="body"?l=i.bodyStyles:t==="foot"&&(l=i.footStyles);var u=ra({},a.table,a[t],i.styles,l),c=i.columnStyles[e.dataKey]||i.columnStyles[e.index]||{},g=t==="body"?c:{},y=t==="body"&&n%2===0?ra({},a.alternateRow,i.alternateRowStyles):{},m=AB(s),N=ra({},m,u,y,g);return ra(N,o)}function XB(t,e,n){var r;n===void 0&&(n={});var i=$E(t,e),s=new Map,o=[],a=[],l=[];Array.isArray(e.settings.horizontalPageBreakRepeat)?l=e.settings.horizontalPageBreakRepeat:(typeof e.settings.horizontalPageBreakRepeat=="string"||typeof e.settings.horizontalPageBreakRepeat=="number")&&(l=[e.settings.horizontalPageBreakRepeat]),l.forEach(function(y){var m=e.columns.find(function(N){return N.dataKey===y||N.index===y});m&&!s.has(m.index)&&(s.set(m.index,!0),o.push(m.index),a.push(e.columns[m.index]),i-=m.wrappedWidth)});for(var u=!0,c=(r=n==null?void 0:n.start)!==null&&r!==void 0?r:0;c<e.columns.length;){if(s.has(c)){c++;continue}var g=e.columns[c].wrappedWidth;if(u||i>=g)u=!1,o.push(c),a.push(e.columns[c]),i-=g;else break;c++}return{colIndexes:o,columns:a,lastIndex:c-1}}function ZB(t,e){for(var n=[],r=0;r<e.columns.length;r++){var i=XB(t,e,{start:r});i.columns.length&&(n.push(i),r=i.lastIndex)}return n}function ZE(t,e){var n=e.settings,r=n.startY,i=n.margin,s={x:i.left,y:r},o=e.getHeadHeight(e.columns)+e.getFootHeight(e.columns),a=r+i.bottom+o;if(n.pageBreak==="avoid"){var l=e.body,u=l.reduce(function(y,m){return y+m.height},0);a+=u}var c=new Cc(t);(n.pageBreak==="always"||n.startY!=null&&a>c.pageSize().height)&&(tT(c),s.y=i.top),e.callWillDrawPageHooks(c,s);var g=ra({},s);e.startPageNumber=c.pageNumber(),n.horizontalPageBreak?ez(c,e,g,s):(c.applyStyles(c.userStyles),(n.showHead==="firstPage"||n.showHead==="everyPage")&&e.head.forEach(function(y){return ya(c,e,y,s,e.columns)}),c.applyStyles(c.userStyles),e.body.forEach(function(y,m){var N=m===e.body.length-1;Om(c,e,y,N,g,s,e.columns)}),c.applyStyles(c.userStyles),(n.showFoot==="lastPage"||n.showFoot==="everyPage")&&e.foot.forEach(function(y){return ya(c,e,y,s,e.columns)})),HE(c,e,g,s),e.callEndPageHooks(c,s),e.finalY=s.y,t.lastAutoTable=e,c.applyStyles(c.userStyles)}function ez(t,e,n,r){var i=ZB(t,e),s=e.settings;if(s.horizontalPageBreakBehaviour==="afterAllRows")i.forEach(function(u,c){t.applyStyles(t.userStyles),c>0?dd(t,e,n,r,u.columns,!0):c4(t,e,r,u.columns),tz(t,e,n,r,u.columns),c1(t,e,r,u.columns)});else for(var o=-1,a=i[0],l=function(){var u=o;if(a){t.applyStyles(t.userStyles);var c=a.columns;o>=0?dd(t,e,n,r,c,!0):c4(t,e,r,c),u=h4(t,e,o+1,r,c),c1(t,e,r,c)}var g=u-o;i.slice(1).forEach(function(y){t.applyStyles(t.userStyles),dd(t,e,n,r,y.columns,!0),h4(t,e,o+1,r,y.columns,g),c1(t,e,r,y.columns)}),o=u};o<e.body.length-1;)l()}function c4(t,e,n,r){var i=e.settings;t.applyStyles(t.userStyles),(i.showHead==="firstPage"||i.showHead==="everyPage")&&e.head.forEach(function(s){return ya(t,e,s,n,r)})}function tz(t,e,n,r,i){t.applyStyles(t.userStyles),e.body.forEach(function(s,o){var a=o===e.body.length-1;Om(t,e,s,a,n,r,i)})}function h4(t,e,n,r,i,s){t.applyStyles(t.userStyles),s=s??e.body.length;var o=Math.min(n+s,e.body.length),a=-1;return e.body.slice(n,o).forEach(function(l,u){var c=n+u===e.body.length-1,g=eT(t,e,c,r);l.canEntireRowFit(g,i)&&(ya(t,e,l,r,i),a=n+u)}),a}function c1(t,e,n,r){var i=e.settings;t.applyStyles(t.userStyles),(i.showFoot==="lastPage"||i.showFoot==="everyPage")&&e.foot.forEach(function(s){return ya(t,e,s,n,r)})}function nz(t,e,n){var r=n.getLineHeight(t.styles.fontSize),i=t.padding("vertical"),s=Math.floor((e-i)/r);return Math.max(0,s)}function rz(t,e,n,r){var i={};t.spansMultiplePages=!0,t.height=0;for(var s=0,o=0,a=n.columns;o<a.length;o++){var l=a[o],u=t.cells[l.index];if(u){Array.isArray(u.text)||(u.text=[u.text]);var c=new JE(u.raw,u.styles,u.section);c=ra(c,u),c.text=[];var g=nz(u,e,r);u.text.length>g&&(c.text=u.text.splice(g,u.text.length));var y=r.scaleFactor(),m=r.getLineHeightFactor();u.contentHeight=u.getContentHeight(y,m),u.contentHeight>=e&&(u.contentHeight=e,c.styles.minCellHeight-=e),u.contentHeight>t.height&&(t.height=u.contentHeight),c.contentHeight=c.getContentHeight(y,m),c.contentHeight>s&&(s=c.contentHeight),i[l.index]=c}}var N=new QE(t.raw,-1,t.section,i,!0);N.height=s;for(var A=0,C=n.columns;A<C.length;A++){var l=C[A],c=N.cells[l.index];c&&(c.height=N.height);var u=t.cells[l.index];u&&(u.height=t.height)}return N}function iz(t,e,n,r){var i=t.pageSize().height,s=r.settings.margin,o=s.top+s.bottom,a=i-o;e.section==="body"&&(a-=r.getHeadHeight(r.columns)+r.getFootHeight(r.columns));var l=e.getMinimumRowHeight(r.columns,t),u=l<n;if(l>a)return console.error("Will not be able to print row ".concat(e.index," correctly since it's minimum height is larger than page height")),!0;if(!u)return!1;var c=e.hasRowSpan(r.columns),g=e.getMaxCellHeight(r.columns)>a;return g?(c&&console.error("The content of row ".concat(e.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(c||r.settings.rowPageBreak==="avoid")}function Om(t,e,n,r,i,s,o){var a=eT(t,e,r,s);if(n.canEntireRowFit(a,o))ya(t,e,n,s,o);else if(iz(t,n,a,e)){var l=rz(n,a,e,t);ya(t,e,n,s,o),dd(t,e,i,s,o),Om(t,e,l,r,i,s,o)}else dd(t,e,i,s,o),Om(t,e,n,r,i,s,o)}function ya(t,e,n,r,i){r.x=e.settings.margin.left;for(var s=0,o=i;s<o.length;s++){var a=o[s],l=n.cells[a.index];if(!l){r.x+=a.width;continue}t.applyStyles(l.styles),l.x=r.x,l.y=r.y;var u=e.callCellHooks(t,e.hooks.willDrawCell,l,n,a,r);if(u===!1){r.x+=a.width;continue}sz(t,l,r);var c=l.getTextPos();BE(l.text,c.x,c.y,{halign:l.styles.halign,valign:l.styles.valign,maxWidth:Math.ceil(l.width-l.padding("left")-l.padding("right"))},t.getDocument()),e.callCellHooks(t,e.hooks.didDrawCell,l,n,a,r),r.x+=a.width}r.y+=n.height}function sz(t,e,n){var r=e.styles;if(t.getDocument().setFillColor(t.getDocument().getFillColor()),typeof r.lineWidth=="number"){var i=WE(r.lineWidth,r.fillColor);i&&t.rect(e.x,n.y,e.width,e.height,i)}else typeof r.lineWidth=="object"&&(r.fillColor&&t.rect(e.x,n.y,e.width,e.height,"F"),oz(t,e,n,r.lineWidth))}function oz(t,e,n,r){var i,s,o,a;r.top&&(i=n.x,s=n.y,o=n.x+e.width,a=n.y,r.right&&(o+=.5*r.right),r.left&&(i-=.5*r.left),l(r.top,i,s,o,a)),r.bottom&&(i=n.x,s=n.y+e.height,o=n.x+e.width,a=n.y+e.height,r.right&&(o+=.5*r.right),r.left&&(i-=.5*r.left),l(r.bottom,i,s,o,a)),r.left&&(i=n.x,s=n.y,o=n.x,a=n.y+e.height,r.top&&(s-=.5*r.top),r.bottom&&(a+=.5*r.bottom),l(r.left,i,s,o,a)),r.right&&(i=n.x+e.width,s=n.y,o=n.x+e.width,a=n.y+e.height,r.top&&(s-=.5*r.top),r.bottom&&(a+=.5*r.bottom),l(r.right,i,s,o,a));function l(u,c,g,y,m){t.getDocument().setLineWidth(u),t.getDocument().line(c,g,y,m,"S")}}function eT(t,e,n,r){var i=e.settings.margin.bottom,s=e.settings.showFoot;return(s==="everyPage"||s==="lastPage"&&n)&&(i+=e.getFootHeight(e.columns)),t.pageSize().height-r.y-i}function dd(t,e,n,r,i,s){i===void 0&&(i=[]),s===void 0&&(s=!1),t.applyStyles(t.userStyles),e.settings.showFoot==="everyPage"&&!s&&e.foot.forEach(function(a){return ya(t,e,a,r,i)}),e.callEndPageHooks(t,r);var o=e.settings.margin;HE(t,e,n,r),tT(t),e.pageNumber++,r.x=o.left,r.y=o.top,n.y=o.top,e.callWillDrawPageHooks(t,r),e.settings.showHead==="everyPage"&&(e.head.forEach(function(a){return ya(t,e,a,r,i)}),t.applyStyles(t.userStyles))}function tT(t){var e=t.pageNumber();t.setPage(e+1);var n=t.pageNumber();return n===e?(t.addPage(),!0):!1}function az(t){t.API.autoTable=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=e[0],i=YE(this,r),s=XE(this,i);return ZE(this,s),this},t.API.lastAutoTable=!1,t.API.autoTableText=function(e,n,r,i){BE(e,n,r,i,this)},t.API.autoTableSetDefaults=function(e){return Cc.setDefaults(e,this),this},t.autoTableSetDefaults=function(e,n){Cc.setDefaults(e,n)},t.API.autoTableHtmlToJson=function(e,n){var r;if(n===void 0&&(n=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var i=new Cc(this),s=KE(i,e,window,n,!1),o=s.head,a=s.body,l=((r=o[0])===null||r===void 0?void 0:r.map(function(u){return u.content}))||[];return{columns:l,rows:a,data:a}}}var h1;function lz(t,e){var n=YE(t,e),r=XE(t,n);ZE(t,r)}try{if(typeof window<"u"&&window){var d4=window,f4=d4.jsPDF||((h1=d4.jspdf)===null||h1===void 0?void 0:h1.jsPDF);f4&&az(f4)}}catch(t){console.error("Could not apply autoTable plugin",t)}const uz=()=>{const[t,e]=se.useState([]),[n,r]=se.useState(null),[i,s]=se.useState(""),[o,a]=se.useState({}),[l,u]=se.useState(new Set);se.useEffect(()=>{(async()=>{try{const Q=await Rn(Tt(Ve,"users")),j={};Q.docs.forEach(E=>{j[E.id]=E.data()}),a(j)}catch(Q){console.error("Failed to load users",Q)}})()},[]),se.useEffect(()=>{(async()=>{try{const j=(await Rn(Tt(Ve,"works"))).docs.map(E=>{const I=E.data();return{id:E.id,title:I.title||"Video",description:I.description||"",workDate:I.date?new Date(I.date):null,postingDate:I.postingDate?I.postingDate.toDate():null,posted:!!I.posted,assignedUserDetails:I.assignedUserDetails||[]}});e(j)}catch(Q){console.error("Failed to load works",Q)}})()},[]);const c=(z,Q)=>{e(j=>j.map(E=>E.id===z?{...E,postingDate:Q?new Date(Q):null}:E))},g=async(z,Q)=>{try{r(z.id);const j=Ht(Ve,"works",z.id);await Mr(j,{posted:Q}),e(E=>E.map(I=>I.id===z.id?{...I,posted:Q}:I))}catch(j){console.error("Failed to update posted flag",j)}finally{r(null)}},y=async z=>{try{r(z.id);const Q=Ht(Ve,"works",z.id);await Mr(Q,{postingDate:z.postingDate?pr.fromDate(z.postingDate):null})}catch(Q){console.error("Failed to save posting date",Q)}finally{r(null)}},m=z=>{const Q=z.assignedUserDetails||[];return Q.length?Q.map(j=>{var b;const E=((b=o[j.userId])==null?void 0:b.name)||"Unknown",I=Array.isArray(j.roles)?j.roles:[],F=I.length?I.join(" & "):"";return{name:E,rolesText:F}}):[]},N=z=>{u(Q=>{const j=new Set(Q);return j.has(z)?j.delete(z):j.add(z),j})},A=()=>{u(z=>{const Q=new Set(t.map(E=>E.id)),j=new Set;return z.forEach(E=>{Q.has(E)&&j.add(E)}),j})},_=[...t].sort((z,Q)=>{const j=!!z.postingDate,E=!!Q.postingDate,I=j&&!z.posted,F=E&&!Q.posted;if(I&&!F)return-1;if(!I&&F)return 1;const b=!j,S=!E;return b&&!S?-1:!b&&S?1:j&&E?z.postingDate.getTime()-Q.postingDate.getTime():0}).filter(z=>z.title.toLowerCase().includes(i.toLowerCase())),k=z=>{if(!z)return"Not set";const Q=String(z.getDate()).padStart(2,"0"),E=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][z.getMonth()],I=z.getFullYear();return`${Q} ${E} ${I}`},R=_.filter(z=>l.has(z.id)),D=()=>{const z=R.length?R:_;if(!z.length)return;const Q=new rt;Q.setFontSize(14),Q.text("Video schedule",14,16);const j=z.map(E=>{const I=m(E).map(b=>b.rolesText?`${b.name} [${b.rolesText}]`:b.name),F=I.length?I.join(`
`):"No users found";return[E.title,E.description||"",k(E.postingDate),E.posted?"Posted":"Not posted",F]});lz(Q,{startY:22,head:[["Title","Description","Posting Date","Status","Member(s)"]],body:j,styles:{fontSize:8},headStyles:{fillColor:[33,150,243],halign:"center",valign:"middle"},columnStyles:{0:{cellWidth:50},1:{cellWidth:40},2:{cellWidth:23,halign:"center"},3:{cellWidth:20,halign:"center"},4:{cellWidth:"auto"}}}),Q.save("video-schedule.pdf")};return se.useEffect(()=>{A()},[t]),f.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50",children:[f.jsx(yn,{userType:"admin"}),f.jsxs("main",{className:"container mx-auto px-4 py-8 max-w-5xl",children:[f.jsxs("div",{className:"mb-6 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[f.jsxs("div",{children:[f.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-800",children:"Video schedule"}),f.jsx("p",{className:"text-sm text-gray-600",children:"Manage posting dates for videos / tasks."})]}),f.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:items-center",children:[f.jsx("input",{type:"text",value:i,onChange:z=>s(z.target.value),placeholder:"Search video",className:"w-full sm:w-64 px-3 py-2 rounded-lg border border-gray-300 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"}),f.jsx("button",{onClick:D,disabled:_.length===0,className:"px-4 py-2 text-sm font-semibold rounded-lg bg-purple-600 text-white hover:bg-purple-700 disabled:opacity-60 disabled:cursor-not-allowed",children:R.length?"Download selected as PDF":"Download all as PDF"})]})]}),_.length===0?f.jsx("p",{className:"text-gray-500 text-sm",children:"No works found."}):f.jsx("div",{className:"space-y-4",children:_.map(z=>f.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-4 flex flex-col gap-3",children:[f.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:[f.jsxs("div",{className:"max-w-xl",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[f.jsx("input",{type:"checkbox",checked:l.has(z.id),onChange:()=>N(z.id),className:"h-4 w-4"}),f.jsx("h2",{className:"text-sm sm:text-base font-semibold text-gray-800",children:z.title})]}),f.jsxs("p",{className:"text-xs text-gray-600",children:["Work date: ",k(z.workDate)]}),z.description&&f.jsxs("div",{className:"mt-1 bg-gray-50 rounded-md px-3 py-2",children:[f.jsx("p",{className:"text-xs font-semibold text-gray-600 mb-0.5",children:"Description"}),f.jsx("p",{className:"text-xs text-gray-700 leading-relaxed line-clamp-3",children:z.description})]}),f.jsxs("div",{className:"mt-1",children:[f.jsx("p",{className:"text-xs font-semibold text-gray-600",children:"Users"}),m(z).length===0?f.jsx("p",{className:"text-xs text-gray-500",children:"No users found"}):f.jsx("ul",{className:"mt-0.5 space-y-0.5",children:m(z).map((Q,j)=>f.jsx("li",{className:"text-xs text-gray-700",children:Q.rolesText?`${Q.name} [${Q.rolesText}]`:Q.name},j))})]})]}),f.jsx("div",{className:"text-xs font-semibold",children:z.postingDate?z.posted?f.jsxs("span",{className:"px-3 py-1 rounded-full bg-green-100 text-green-800",children:["Posted (",k(z.postingDate),")"]}):f.jsxs("span",{className:"px-3 py-1 rounded-full bg-yellow-100 text-yellow-800",children:["Scheduled (",k(z.postingDate),")"]}):f.jsx("span",{className:"px-3 py-1 rounded-full bg-gray-100 text-gray-600",children:"No posting date"})})]}),f.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2",children:[f.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[f.jsx("label",{className:"text-xs text-gray-600",children:"Posting date:"}),f.jsx("input",{type:"date",value:z.postingDate?z.postingDate.toISOString().slice(0,10):"",onChange:Q=>c(z.id,Q.target.value),className:"px-3 py-2 rounded-lg border border-gray-300 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"}),f.jsx("button",{onClick:()=>y(z),disabled:n===z.id,className:`px-3 py-2 text-xs font-semibold rounded-lg text-white ${n===z.id?"bg-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700"}`,children:n===z.id?"Saving":"Save date"})]}),f.jsx("div",{className:"flex items-center gap-2",children:f.jsx("button",{onClick:()=>g(z,!z.posted),disabled:!z.postingDate||n===z.id,className:`px-4 py-2 text-xs font-semibold rounded-lg ${z.posted?"bg-red-100 text-red-700 hover:bg-red-200":"bg-green-600 text-white hover:bg-green-700"} ${!z.postingDate||n===z.id?"opacity-60 cursor-not-allowed":""}`,children:z.posted?"Unmark posted":"Mark posted"})})]})]},z.id))})]})]})},cz=()=>{const[t,e]=se.useState([]),[n,r]=se.useState(!0),[i,s]=se.useState("all"),[o,a]=se.useState([]),[l,u]=se.useState(""),[c,g]=se.useState(""),[y,m]=se.useState(!1),[N,A]=se.useState(""),[C,_]=se.useState("");se.useEffect(()=>{(async()=>{try{const Q=(await Rn(Tt(Ve,"users"))).docs.map(j=>({id:j.id,...j.data()}));e(Q)}catch(z){console.error(z),_("Failed to load users.")}finally{r(!1)}})()},[]);const k=D=>{a(z=>z.includes(D)?z.filter(Q=>Q!==D):[...z,D])},R=async D=>{if(D.preventDefault(),_(""),A(""),!l.trim()||!c.trim()){_("Title and message are required.");return}if(i==="selected"&&o.length===0){_("Select at least one user.");return}m(!0);try{if(i==="all")await Ti(Tt(Ve,"notifications"),{title:l.trim(),body:c.trim(),target:"all",createdAt:vo()});else{const z=tA(Ve);o.forEach(Q=>{const j=Ht(Tt(Ve,"users",Q,"notifications"));z.set(j,{title:l.trim(),body:c.trim(),target:"user",userId:Q,createdAt:vo()})}),await z.commit()}A("Notification(s) sent successfully."),u(""),g(""),a([]),s("all")}catch(z){console.error(z),_("Failed to send notification.")}finally{m(!1)}};return f.jsxs("div",{className:"min-h-screen bg-gray-100",children:[f.jsx(yn,{userType:"admin"}),f.jsxs("main",{className:"container mx-auto px-4 py-6 sm:py-8 max-w-3xl",children:[f.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-800 mb-4",children:"Send notifications"}),f.jsxs("form",{onSubmit:R,className:"bg-white rounded-lg shadow-md p-4 sm:p-6 space-y-4",children:[C&&f.jsx("div",{className:"p-2 rounded bg-red-100 text-red-700 text-sm",children:C}),N&&f.jsx("div",{className:"p-2 rounded bg-green-100 text-green-700 text-sm",children:N}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Title"}),f.jsx("input",{type:"text",value:l,onChange:D=>u(D.target.value),className:"w-full px-3 py-2 border rounded text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Notification title"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Message"}),f.jsx("textarea",{value:c,onChange:D=>g(D.target.value),rows:4,className:"w-full px-3 py-2 border rounded text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Notification message"})]}),f.jsxs("div",{children:[f.jsx("p",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Send to"}),f.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[f.jsxs("label",{className:"inline-flex items-center gap-2 text-sm",children:[f.jsx("input",{type:"radio",name:"sendMode",value:"all",checked:i==="all",onChange:()=>s("all")}),f.jsx("span",{children:"All users"})]}),f.jsxs("label",{className:"inline-flex items-center gap-2 text-sm",children:[f.jsx("input",{type:"radio",name:"sendMode",value:"selected",checked:i==="selected",onChange:()=>s("selected")}),f.jsx("span",{children:"Selected users"})]})]})]}),i==="selected"&&f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Select users"}),n?f.jsxs("div",{className:"flex items-center gap-2 text-gray-600 text-sm",children:[f.jsx(Ps,{className:"animate-spin"}),f.jsx("span",{children:"Loading users..."})]}):f.jsxs("div",{className:"max-h-60 overflow-y-auto border rounded p-2 space-y-1 bg-gray-50",children:[t.length===0&&f.jsx("p",{className:"text-xs text-gray-600",children:"No users found."}),t.map(D=>f.jsxs("label",{className:"flex items-center gap-2 text-xs sm:text-sm cursor-pointer",children:[f.jsx("input",{type:"checkbox",checked:o.includes(D.id),onChange:()=>k(D.id)}),f.jsxs("span",{children:[D.name||"Unnamed"," (",D.email||"no email",")"]})]},D.id))]})]}),f.jsx("button",{type:"submit",disabled:y,className:"w-full sm:w-auto bg-blue-600 text-white px-4 py-2 rounded text-sm font-semibold hover:bg-blue-700 disabled:opacity-50",children:y?"Sending...":"Send notification"})]})]})]})},hz=()=>{const[t,e]=se.useState(null),[n,r]=se.useState([]),[i,s]=se.useState(!0),o=ks();se.useEffect(()=>{const l=Lu(Ci,u=>{e(u||null)});return()=>l()},[]),se.useEffect(()=>{if(!t)return;const l=vu(Tt(Ve,"users",t.uid,"notifications"),qv("createdAt","desc")),u=Tm(l,c=>{const g=c.docs.map(y=>({id:y.id,...y.data()}));r(g),s(!1)});return()=>u()},[t]);const a=async l=>{if(t){try{await Mr(Ht(Ve,"users",t.uid,"notifications",l.id),{read:!0})}catch(u){console.error("Failed to mark notif read",u)}o(`/notifications/${l.id}`)}};return f.jsxs("div",{className:"min-h-screen bg-gray-50",children:[f.jsx(yn,{userType:"user"}),f.jsxs("main",{className:"container mx-auto px-4 py-6 sm:py-8 max-w-2xl",children:[f.jsxs("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-800 mb-4 flex items-center gap-2",children:[f.jsx(s5,{className:"text-yellow-500"}),"Notifications"]}),i?f.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[f.jsx(Ps,{className:"animate-spin"}),f.jsx("span",{children:"Loading notifications..."})]}):n.length===0?f.jsx("p",{className:"text-gray-600 text-sm sm:text-base",children:"No notifications yet."}):f.jsx("div",{className:"bg-white rounded-lg shadow-md divide-y",children:n.map(l=>{var g;const u=(g=l.createdAt)!=null&&g.toDate?l.createdAt.toDate().toLocaleString():"",c=l.read===!1;return f.jsxs("button",{onClick:()=>a(l),className:`w-full text-left px-4 py-3 flex flex-col sm:flex-row sm:items-center sm:justify-between hover:bg-gray-50 ${c?"bg-yellow-50":""}`,children:[f.jsxs("div",{children:[f.jsx("p",{className:"font-semibold text-gray-800 text-sm sm:text-base",children:l.title||"Notification"}),l.message&&f.jsx("p",{className:"text-xs sm:text-sm text-gray-600",children:l.message}),u&&f.jsx("p",{className:"text-xs text-gray-400 mt-1",children:u})]}),c&&f.jsx("span",{className:"mt-2 sm:mt-0 inline-flex items-center text-xs font-semibold text-yellow-800 bg-yellow-100 px-2 py-0.5 rounded-full",children:"New"})]},l.id)})})]})]})},dz=()=>{var a;const{notifId:t}=tg(),[e,n]=se.useState(null),[r,i]=se.useState(null),[s,o]=se.useState(!0);return se.useEffect(()=>{const l=Lu(Ci,u=>{n(u||null)});return()=>l()},[]),se.useEffect(()=>{if(!e||!t)return;(async()=>{try{const u=Ht(Ve,"users",e.uid,"notifications",t),c=await Ws(u);if(c.exists()){const g=c.data();i({id:c.id,...g}),g.read===!1&&await Mr(u,{read:!0})}}catch(u){console.error("Failed to load notification",u)}finally{o(!1)}})()},[e,t]),f.jsxs("div",{className:"min-h-screen bg-gray-50",children:[f.jsx(yn,{userType:"user"}),f.jsx("main",{className:"container mx-auto px-4 py-6 sm:py-8 max-w-xl",children:s?f.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[f.jsx(Ps,{className:"animate-spin"}),f.jsx("span",{children:"Loading notification..."})]}):r?f.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 sm:p-6",children:[f.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-800 mb-2",children:r.title||"Notification"}),((a=r.createdAt)==null?void 0:a.toDate)&&f.jsx("p",{className:"text-xs text-gray-500 mb-4",children:r.createdAt.toDate().toLocaleString()}),r.message&&f.jsx("p",{className:"text-sm sm:text-base text-gray-700 mb-4",children:r.message}),r.type&&f.jsxs("p",{className:"text-xs text-gray-500",children:["Type: ",f.jsx("span",{className:"font-mono",children:r.type})]})]}):f.jsx("p",{className:"text-gray-600 text-sm sm:text-base",children:"Notification not found."})})]})},fz=()=>{const{notifId:t}=tg(),e=ks(),[n,r]=se.useState(null),[i,s]=se.useState(null),[o,a]=se.useState(null),[l,u]=se.useState(!0),[c,g]=se.useState("");if(se.useEffect(()=>{t&&(async()=>{u(!0),g("");try{const N=Ht(Ve,"notifications",t),A=await Ws(N);if(!A.exists()){g("Notification not found."),u(!1);return}const C={id:A.id,...A.data()};if(r(C),C.workId){const _=await Ws(Ht(Ve,"works",C.workId));_.exists()&&s({id:_.id,..._.data()})}if(C.userId){const _=await Ws(Ht(Ve,"users",C.userId));_.exists()&&a({id:_.id,..._.data()})}}catch(N){console.error("NotificationDetails load error",N),g("Failed to load notification details.")}finally{u(!1)}})()},[t]),l)return f.jsxs("div",{className:"min-h-screen bg-gray-100",children:[f.jsx(yn,{userType:"admin"}),f.jsx("main",{className:"container mx-auto px-4 py-6 max-w-3xl",children:f.jsx("p",{children:"Loading notification..."})})]});if(c)return f.jsxs("div",{className:"min-h-screen bg-gray-100",children:[f.jsx(yn,{userType:"admin"}),f.jsxs("main",{className:"container mx-auto px-4 py-6 max-w-3xl",children:[f.jsx("p",{className:"text-red-600 mb-4",children:c}),f.jsx("button",{onClick:()=>e(-1),className:"px-3 py-1 rounded bg-blue-600 text-white text-sm hover:bg-blue-700",children:"Back"})]})]});if(!n)return f.jsxs("div",{className:"min-h-screen bg-gray-100",children:[f.jsx(yn,{userType:"admin"}),f.jsx("main",{className:"container mx-auto px-4 py-6 max-w-3xl",children:f.jsx("p",{children:"No data."})})]});const y=(()=>{switch(n.type){case"accept":return"Work accepted";case"reject":return"Work rejected";case"done":return"Work marked done";case"undo-done":return"Work status changed";default:return"Notification"}})();return f.jsxs("div",{className:"min-h-screen bg-gray-100",children:[f.jsx(yn,{userType:"admin"}),f.jsxs("main",{className:"container mx-auto px-4 py-6 max-w-3xl",children:[f.jsxs("div",{className:"flex items-center justify-between mb-4",children:[f.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-800",children:"Notification details"}),f.jsx("button",{onClick:()=>e(-1),className:"px-3 py-1 rounded bg-gray-200 text-gray-800 text-sm hover:bg-gray-300",children:"Back"})]}),f.jsxs("section",{className:"mb-4 bg-white rounded-lg shadow p-4",children:[f.jsx("p",{className:"text-sm font-semibold text-gray-800 mb-1",children:y}),f.jsxs("p",{className:"text-xs text-gray-600 mb-1",children:["ID: ",n.id]}),n.createdAt&&f.jsxs("p",{className:"text-xs text-gray-600 flex items-center gap-1",children:[f.jsx(gi,{className:"text-gray-500"}),n.createdAt.toDate?n.createdAt.toDate().toLocaleString():""]})]}),f.jsxs("section",{className:"mb-4 bg-white rounded-lg shadow p-4",children:[f.jsx("h2",{className:"text-sm font-semibold text-gray-800 mb-2",children:"User"}),o?f.jsxs(f.Fragment,{children:[f.jsx("p",{className:"text-sm text-gray-800",children:o.name||"No name"}),o.email&&f.jsx("p",{className:"text-xs text-gray-600",children:o.email}),o.cardNumber&&f.jsxs("p",{className:"text-xs text-gray-600",children:["Card: ",o.cardNumber]})]}):f.jsx("p",{className:"text-xs text-gray-500",children:n.userName||"Unknown user"})]}),f.jsxs("section",{className:"mb-4 bg-white rounded-lg shadow p-4",children:[f.jsx("h2",{className:"text-sm font-semibold text-gray-800 mb-2",children:"Work"}),i?f.jsxs(f.Fragment,{children:[f.jsx("p",{className:"text-sm font-semibold text-gray-800",children:i.title||"No title"}),i.date&&f.jsxs("p",{className:"text-xs text-gray-600 flex items-center gap-1 mt-1",children:[f.jsx(gi,{className:"text-gray-500"}),new Date(i.date).toLocaleDateString()]}),i.description&&f.jsx("p",{className:"text-xs text-gray-600 mt-1",children:i.description})]}):f.jsxs("p",{className:"text-xs text-gray-500",children:["Work not found (id: ",n.workId||"",")."]})]}),n.message&&f.jsxs("section",{className:"mb-4 bg-white rounded-lg shadow p-4",children:[f.jsx("h2",{className:"text-sm font-semibold text-gray-800 mb-2",children:"Message"}),f.jsx("p",{className:"text-sm text-gray-700",children:n.message})]})]})]})};function pz(){return f.jsx(mP,{children:f.jsxs(lP,{children:[f.jsx(Gn,{path:"/",element:f.jsx(gM,{})}),f.jsx(Gn,{path:"/signup",element:f.jsx(wM,{})}),f.jsx(Gn,{path:"/home",element:f.jsx(fM,{})}),f.jsx(Gn,{path:"/admin-home",element:f.jsx(Qi,{children:f.jsx(dM,{})})}),f.jsx(Gn,{path:"/create-user",element:f.jsx(Qi,{children:f.jsx(xM,{})})}),f.jsx(Gn,{path:"/assign-work",element:f.jsx(Qi,{children:f.jsx(bM,{})})}),f.jsx(Gn,{path:"/work-list",element:f.jsx(Qi,{children:f.jsx(NM,{})})}),f.jsx(Gn,{path:"/profile",element:f.jsx(AM,{})}),f.jsx(Gn,{path:"/manage-users",element:f.jsx(Qi,{children:f.jsx(EM,{})})}),f.jsx(Gn,{path:"/users/:userId",element:f.jsx(Qi,{children:f.jsx(TM,{})})}),f.jsx(Gn,{path:"/tasks/:taskId",element:f.jsx(Qi,{children:f.jsx(PM,{})})}),f.jsx(Gn,{path:"/task-history",element:f.jsx(IM,{})}),f.jsx(Gn,{path:"/inventory",element:f.jsx(Qi,{children:f.jsx(CM,{})})}),f.jsx(Gn,{path:"/admin-reject-details",element:f.jsx(Qi,{children:f.jsx(LM,{})})}),f.jsx(Gn,{path:"/user-reject-details",element:f.jsx(RM,{})}),f.jsx(Gn,{path:"/posting-dates",element:f.jsx(Qi,{children:f.jsx(uz,{})})}),f.jsx(Gn,{path:"/notifications",element:f.jsx(Qi,{children:f.jsx(jM,{})})}),f.jsx(Gn,{path:"/admin/notifications",element:f.jsx(Qi,{children:f.jsx(cz,{})})}),f.jsx(Gn,{path:"/admin/notifications/:notifId",element:f.jsx(Qi,{children:f.jsx(fz,{})})}),f.jsx(Gn,{path:"/user/notifications",element:f.jsx(hz,{})}),f.jsx(Gn,{path:"/user/notifications/:notifId",element:f.jsx(dz,{})})]})})}const mz="BCDW2bDpR51kOUCYdebGFw4pHEU_h2159MHvkSEslEdrV0yI0AVUiQikAbClmXfS9EGHHQblUlKTC_To4SaQ7Hg";function gz(){return se.useEffect(()=>{(async()=>{if(!("serviceWorker"in navigator)||!("Notification"in window))return;const e=await navigator.serviceWorker.register("/firebase-messaging-sw.js");if(await Notification.requestPermission()!=="granted")return;const r=await HA(j2,{vapidKey:mz,serviceWorkerRegistration:e}),i=Ci.currentUser;i&&r&&await Mr(Ht(Ve,"users",i.uid),{fcmToken:r})})().catch(console.error)},[]),f.jsx(pz,{})}E6(document.getElementById("root")).render(f.jsx(se.StrictMode,{children:f.jsx(gz,{})}));export{an as _,vz as c,zT as g};
