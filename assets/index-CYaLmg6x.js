var cI=Object.defineProperty;var hI=(t,e,n)=>e in t?cI(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var sn=(t,e,n)=>hI(t,typeof e!="symbol"?e+"":e,n);function dI(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var tB=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function fI(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Yb={exports:{}},km={},Qb={exports:{}},Dt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Od=Symbol.for("react.element"),pI=Symbol.for("react.portal"),mI=Symbol.for("react.fragment"),gI=Symbol.for("react.strict_mode"),vI=Symbol.for("react.profiler"),yI=Symbol.for("react.provider"),wI=Symbol.for("react.context"),_I=Symbol.for("react.forward_ref"),xI=Symbol.for("react.suspense"),bI=Symbol.for("react.memo"),SI=Symbol.for("react.lazy"),P5=Symbol.iterator;function NI(t){return t===null||typeof t!="object"?null:(t=P5&&t[P5]||t["@@iterator"],typeof t=="function"?t:null)}var Jb={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Xb=Object.assign,Zb={};function Vc(t,e,n){this.props=t,this.context=e,this.refs=Zb,this.updater=n||Jb}Vc.prototype.isReactComponent={};Vc.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Vc.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function e4(){}e4.prototype=Vc.prototype;function B2(t,e,n){this.props=t,this.context=e,this.refs=Zb,this.updater=n||Jb}var z2=B2.prototype=new e4;z2.constructor=B2;Xb(z2,Vc.prototype);z2.isPureReactComponent=!0;var C5=Array.isArray,t4=Object.prototype.hasOwnProperty,q2={current:null},n4={key:!0,ref:!0,__self:!0,__source:!0};function r4(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)t4.call(e,r)&&!n4.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Od,type:t,key:s,ref:o,props:i,_owner:q2.current}}function AI(t,e){return{$$typeof:Od,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function H2(t){return typeof t=="object"&&t!==null&&t.$$typeof===Od}function EI(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var L5=/\/+/g;function Ug(t,e){return typeof t=="object"&&t!==null&&t.key!=null?EI(""+t.key):e.toString(36)}function sp(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Od:case pI:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Ug(o,0):r,C5(i)?(n="",t!=null&&(n=t.replace(L5,"$&/")+"/"),sp(i,e,n,"",function(u){return u})):i!=null&&(H2(i)&&(i=AI(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(L5,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",C5(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+Ug(s,a);o+=sp(s,e,n,l,i)}else if(l=NI(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+Ug(s,a++),o+=sp(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Ef(t,e,n){if(t==null)return t;var r=[],i=0;return sp(t,r,"","",function(s){return e.call(n,s,i++)}),r}function II(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var mi={current:null},op={transition:null},TI={ReactCurrentDispatcher:mi,ReactCurrentBatchConfig:op,ReactCurrentOwner:q2};function i4(){throw Error("act(...) is not supported in production builds of React.")}Dt.Children={map:Ef,forEach:function(t,e,n){Ef(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Ef(t,function(){e++}),e},toArray:function(t){return Ef(t,function(e){return e})||[]},only:function(t){if(!H2(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Dt.Component=Vc;Dt.Fragment=mI;Dt.Profiler=vI;Dt.PureComponent=B2;Dt.StrictMode=gI;Dt.Suspense=xI;Dt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=TI;Dt.act=i4;Dt.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Xb({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=q2.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)t4.call(e,l)&&!n4.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:Od,type:t.type,key:i,ref:s,props:r,_owner:o}};Dt.createContext=function(t){return t={$$typeof:wI,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:yI,_context:t},t.Consumer=t};Dt.createElement=r4;Dt.createFactory=function(t){var e=r4.bind(null,t);return e.type=t,e};Dt.createRef=function(){return{current:null}};Dt.forwardRef=function(t){return{$$typeof:_I,render:t}};Dt.isValidElement=H2;Dt.lazy=function(t){return{$$typeof:SI,_payload:{_status:-1,_result:t},_init:II}};Dt.memo=function(t,e){return{$$typeof:bI,type:t,compare:e===void 0?null:e}};Dt.startTransition=function(t){var e=op.transition;op.transition={};try{t()}finally{op.transition=e}};Dt.unstable_act=i4;Dt.useCallback=function(t,e){return mi.current.useCallback(t,e)};Dt.useContext=function(t){return mi.current.useContext(t)};Dt.useDebugValue=function(){};Dt.useDeferredValue=function(t){return mi.current.useDeferredValue(t)};Dt.useEffect=function(t,e){return mi.current.useEffect(t,e)};Dt.useId=function(){return mi.current.useId()};Dt.useImperativeHandle=function(t,e,n){return mi.current.useImperativeHandle(t,e,n)};Dt.useInsertionEffect=function(t,e){return mi.current.useInsertionEffect(t,e)};Dt.useLayoutEffect=function(t,e){return mi.current.useLayoutEffect(t,e)};Dt.useMemo=function(t,e){return mi.current.useMemo(t,e)};Dt.useReducer=function(t,e,n){return mi.current.useReducer(t,e,n)};Dt.useRef=function(t){return mi.current.useRef(t)};Dt.useState=function(t){return mi.current.useState(t)};Dt.useSyncExternalStore=function(t,e,n){return mi.current.useSyncExternalStore(t,e,n)};Dt.useTransition=function(){return mi.current.useTransition()};Dt.version="18.3.1";Qb.exports=Dt;var ue=Qb.exports;const tl=fI(ue),kI=dI({__proto__:null,default:tl},[ue]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var PI=ue,CI=Symbol.for("react.element"),LI=Symbol.for("react.fragment"),RI=Object.prototype.hasOwnProperty,jI=PI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,DI={key:!0,ref:!0,__self:!0,__source:!0};function s4(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)RI.call(e,r)&&!DI.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:CI,type:t,key:s,ref:o,props:i,_owner:jI.current}}km.Fragment=LI;km.jsx=s4;km.jsxs=s4;Yb.exports=km;var p=Yb.exports,o4={exports:{}},Xi={},a4={exports:{}},l4={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(Q,oe){var ae=Q.length;Q.push(oe);e:for(;0<ae;){var he=ae-1>>>1,F=Q[he];if(0<i(F,oe))Q[he]=oe,Q[ae]=F,ae=he;else break e}}function n(Q){return Q.length===0?null:Q[0]}function r(Q){if(Q.length===0)return null;var oe=Q[0],ae=Q.pop();if(ae!==oe){Q[0]=ae;e:for(var he=0,F=Q.length,G=F>>>1;he<G;){var B=2*(he+1)-1,Z=Q[B],ne=B+1,ie=Q[ne];if(0>i(Z,ae))ne<F&&0>i(ie,Z)?(Q[he]=ie,Q[ne]=ae,he=ne):(Q[he]=Z,Q[B]=ae,he=B);else if(ne<F&&0>i(ie,ae))Q[he]=ie,Q[ne]=ae,he=ne;else break e}}return oe}function i(Q,oe){var ae=Q.sortIndex-oe.sortIndex;return ae!==0?ae:Q.id-oe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],c=1,g=null,v=3,m=!1,S=!1,A=!1,L=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function j(Q){for(var oe=n(u);oe!==null;){if(oe.callback===null)r(u);else if(oe.startTime<=Q)r(u),oe.sortIndex=oe.expirationTime,e(l,oe);else break;oe=n(u)}}function U(Q){if(A=!1,j(Q),!S)if(n(l)!==null)S=!0,me(q);else{var oe=n(u);oe!==null&&ge(U,oe.startTime-Q)}}function q(Q,oe){S=!1,A&&(A=!1,b(N),N=-1),m=!0;var ae=v;try{for(j(oe),g=n(l);g!==null&&(!(g.expirationTime>oe)||Q&&!x());){var he=g.callback;if(typeof he=="function"){g.callback=null,v=g.priorityLevel;var F=he(g.expirationTime<=oe);oe=t.unstable_now(),typeof F=="function"?g.callback=F:g===n(l)&&r(l),j(oe)}else r(l);g=n(l)}if(g!==null)var G=!0;else{var B=n(u);B!==null&&ge(U,B.startTime-oe),G=!1}return G}finally{g=null,v=ae,m=!1}}var ee=!1,D=null,N=-1,I=5,R=-1;function x(){return!(t.unstable_now()-R<I)}function T(){if(D!==null){var Q=t.unstable_now();R=Q;var oe=!0;try{oe=D(!0,Q)}finally{oe?P():(ee=!1,D=null)}}else ee=!1}var P;if(typeof k=="function")P=function(){k(T)};else if(typeof MessageChannel<"u"){var te=new MessageChannel,de=te.port2;te.port1.onmessage=T,P=function(){de.postMessage(null)}}else P=function(){L(T,0)};function me(Q){D=Q,ee||(ee=!0,P())}function ge(Q,oe){N=L(function(){Q(t.unstable_now())},oe)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Q){Q.callback=null},t.unstable_continueExecution=function(){S||m||(S=!0,me(q))},t.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<Q?Math.floor(1e3/Q):5},t.unstable_getCurrentPriorityLevel=function(){return v},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(Q){switch(v){case 1:case 2:case 3:var oe=3;break;default:oe=v}var ae=v;v=oe;try{return Q()}finally{v=ae}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(Q,oe){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var ae=v;v=Q;try{return oe()}finally{v=ae}},t.unstable_scheduleCallback=function(Q,oe,ae){var he=t.unstable_now();switch(typeof ae=="object"&&ae!==null?(ae=ae.delay,ae=typeof ae=="number"&&0<ae?he+ae:he):ae=he,Q){case 1:var F=-1;break;case 2:F=250;break;case 5:F=1073741823;break;case 4:F=1e4;break;default:F=5e3}return F=ae+F,Q={id:c++,callback:oe,priorityLevel:Q,startTime:ae,expirationTime:F,sortIndex:-1},ae>he?(Q.sortIndex=ae,e(u,Q),n(l)===null&&Q===n(u)&&(A?(b(N),N=-1):A=!0,ge(U,ae-he))):(Q.sortIndex=F,e(l,Q),S||m||(S=!0,me(q))),Q},t.unstable_shouldYield=x,t.unstable_wrapCallback=function(Q){var oe=v;return function(){var ae=v;v=oe;try{return Q.apply(this,arguments)}finally{v=ae}}}})(l4);a4.exports=l4;var OI=a4.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var FI=ue,Ji=OI;function je(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var u4=new Set,rd={};function vu(t,e){Sc(t,e),Sc(t+"Capture",e)}function Sc(t,e){for(rd[t]=e,t=0;t<e.length;t++)u4.add(e[t])}var ra=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),r1=Object.prototype.hasOwnProperty,MI=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,R5={},j5={};function UI(t){return r1.call(j5,t)?!0:r1.call(R5,t)?!1:MI.test(t)?j5[t]=!0:(R5[t]=!0,!1)}function VI(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function BI(t,e,n,r){if(e===null||typeof e>"u"||VI(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function gi(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Mr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Mr[t]=new gi(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Mr[e]=new gi(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Mr[t]=new gi(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Mr[t]=new gi(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Mr[t]=new gi(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Mr[t]=new gi(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Mr[t]=new gi(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Mr[t]=new gi(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Mr[t]=new gi(t,5,!1,t.toLowerCase(),null,!1,!1)});var W2=/[\-:]([a-z])/g;function $2(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(W2,$2);Mr[e]=new gi(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(W2,$2);Mr[e]=new gi(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(W2,$2);Mr[e]=new gi(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Mr[t]=new gi(t,1,!1,t.toLowerCase(),null,!1,!1)});Mr.xlinkHref=new gi("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Mr[t]=new gi(t,1,!1,t.toLowerCase(),null,!0,!0)});function G2(t,e,n,r){var i=Mr.hasOwnProperty(e)?Mr[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(BI(e,n,i,r)&&(n=null),r||i===null?UI(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var da=FI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,If=Symbol.for("react.element"),Ku=Symbol.for("react.portal"),Yu=Symbol.for("react.fragment"),K2=Symbol.for("react.strict_mode"),i1=Symbol.for("react.profiler"),c4=Symbol.for("react.provider"),h4=Symbol.for("react.context"),Y2=Symbol.for("react.forward_ref"),s1=Symbol.for("react.suspense"),o1=Symbol.for("react.suspense_list"),Q2=Symbol.for("react.memo"),za=Symbol.for("react.lazy"),d4=Symbol.for("react.offscreen"),D5=Symbol.iterator;function wh(t){return t===null||typeof t!="object"?null:(t=D5&&t[D5]||t["@@iterator"],typeof t=="function"?t:null)}var Vn=Object.assign,Vg;function Ph(t){if(Vg===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Vg=e&&e[1]||""}return`
`+Vg+t}var Bg=!1;function zg(t,e){if(!t||Bg)return"";Bg=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Bg=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ph(t):""}function zI(t){switch(t.tag){case 5:return Ph(t.type);case 16:return Ph("Lazy");case 13:return Ph("Suspense");case 19:return Ph("SuspenseList");case 0:case 2:case 15:return t=zg(t.type,!1),t;case 11:return t=zg(t.type.render,!1),t;case 1:return t=zg(t.type,!0),t;default:return""}}function a1(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Yu:return"Fragment";case Ku:return"Portal";case i1:return"Profiler";case K2:return"StrictMode";case s1:return"Suspense";case o1:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case h4:return(t.displayName||"Context")+".Consumer";case c4:return(t._context.displayName||"Context")+".Provider";case Y2:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Q2:return e=t.displayName||null,e!==null?e:a1(t.type)||"Memo";case za:e=t._payload,t=t._init;try{return a1(t(e))}catch{}}return null}function qI(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return a1(e);case 8:return e===K2?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function fl(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function f4(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function HI(t){var e=f4(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Tf(t){t._valueTracker||(t._valueTracker=HI(t))}function p4(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=f4(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Lp(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function l1(t,e){var n=e.checked;return Vn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function O5(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=fl(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function m4(t,e){e=e.checked,e!=null&&G2(t,"checked",e,!1)}function u1(t,e){m4(t,e);var n=fl(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?c1(t,e.type,n):e.hasOwnProperty("defaultValue")&&c1(t,e.type,fl(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function F5(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function c1(t,e,n){(e!=="number"||Lp(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ch=Array.isArray;function lc(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+fl(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function h1(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(je(91));return Vn({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function M5(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(je(92));if(Ch(n)){if(1<n.length)throw Error(je(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:fl(n)}}function g4(t,e){var n=fl(e.value),r=fl(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function U5(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function v4(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function d1(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?v4(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var kf,y4=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(kf=kf||document.createElement("div"),kf.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=kf.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function id(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Vh={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},WI=["Webkit","ms","Moz","O"];Object.keys(Vh).forEach(function(t){WI.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Vh[e]=Vh[t]})});function w4(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Vh.hasOwnProperty(t)&&Vh[t]?(""+e).trim():e+"px"}function _4(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=w4(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var $I=Vn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function f1(t,e){if(e){if($I[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(je(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(je(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(je(61))}if(e.style!=null&&typeof e.style!="object")throw Error(je(62))}}function p1(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var m1=null;function J2(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var g1=null,uc=null,cc=null;function V5(t){if(t=Ud(t)){if(typeof g1!="function")throw Error(je(280));var e=t.stateNode;e&&(e=jm(e),g1(t.stateNode,t.type,e))}}function x4(t){uc?cc?cc.push(t):cc=[t]:uc=t}function b4(){if(uc){var t=uc,e=cc;if(cc=uc=null,V5(t),e)for(t=0;t<e.length;t++)V5(e[t])}}function S4(t,e){return t(e)}function N4(){}var qg=!1;function A4(t,e,n){if(qg)return t(e,n);qg=!0;try{return S4(t,e,n)}finally{qg=!1,(uc!==null||cc!==null)&&(N4(),b4())}}function sd(t,e){var n=t.stateNode;if(n===null)return null;var r=jm(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(je(231,e,typeof n));return n}var v1=!1;if(ra)try{var _h={};Object.defineProperty(_h,"passive",{get:function(){v1=!0}}),window.addEventListener("test",_h,_h),window.removeEventListener("test",_h,_h)}catch{v1=!1}function GI(t,e,n,r,i,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(c){this.onError(c)}}var Bh=!1,Rp=null,jp=!1,y1=null,KI={onError:function(t){Bh=!0,Rp=t}};function YI(t,e,n,r,i,s,o,a,l){Bh=!1,Rp=null,GI.apply(KI,arguments)}function QI(t,e,n,r,i,s,o,a,l){if(YI.apply(this,arguments),Bh){if(Bh){var u=Rp;Bh=!1,Rp=null}else throw Error(je(198));jp||(jp=!0,y1=u)}}function yu(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function E4(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function B5(t){if(yu(t)!==t)throw Error(je(188))}function JI(t){var e=t.alternate;if(!e){if(e=yu(t),e===null)throw Error(je(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return B5(i),t;if(s===r)return B5(i),e;s=s.sibling}throw Error(je(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(je(189))}}if(n.alternate!==r)throw Error(je(190))}if(n.tag!==3)throw Error(je(188));return n.stateNode.current===n?t:e}function I4(t){return t=JI(t),t!==null?T4(t):null}function T4(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=T4(t);if(e!==null)return e;t=t.sibling}return null}var k4=Ji.unstable_scheduleCallback,z5=Ji.unstable_cancelCallback,XI=Ji.unstable_shouldYield,ZI=Ji.unstable_requestPaint,tr=Ji.unstable_now,eT=Ji.unstable_getCurrentPriorityLevel,X2=Ji.unstable_ImmediatePriority,P4=Ji.unstable_UserBlockingPriority,Dp=Ji.unstable_NormalPriority,tT=Ji.unstable_LowPriority,C4=Ji.unstable_IdlePriority,Pm=null,po=null;function nT(t){if(po&&typeof po.onCommitFiberRoot=="function")try{po.onCommitFiberRoot(Pm,t,void 0,(t.current.flags&128)===128)}catch{}}var Os=Math.clz32?Math.clz32:sT,rT=Math.log,iT=Math.LN2;function sT(t){return t>>>=0,t===0?32:31-(rT(t)/iT|0)|0}var Pf=64,Cf=4194304;function Lh(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Op(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=Lh(a):(s&=o,s!==0&&(r=Lh(s)))}else o=n&~i,o!==0?r=Lh(o):s!==0&&(r=Lh(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Os(e),i=1<<n,r|=t[n],e&=~i;return r}function oT(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function aT(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Os(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=oT(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function w1(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function L4(){var t=Pf;return Pf<<=1,!(Pf&4194240)&&(Pf=64),t}function Hg(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Fd(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Os(e),t[e]=n}function lT(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Os(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function Z2(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Os(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var an=0;function R4(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var j4,ev,D4,O4,F4,_1=!1,Lf=[],nl=null,rl=null,il=null,od=new Map,ad=new Map,Ha=[],uT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function q5(t,e){switch(t){case"focusin":case"focusout":nl=null;break;case"dragenter":case"dragleave":rl=null;break;case"mouseover":case"mouseout":il=null;break;case"pointerover":case"pointerout":od.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ad.delete(e.pointerId)}}function xh(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Ud(e),e!==null&&ev(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function cT(t,e,n,r,i){switch(e){case"focusin":return nl=xh(nl,t,e,n,r,i),!0;case"dragenter":return rl=xh(rl,t,e,n,r,i),!0;case"mouseover":return il=xh(il,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return od.set(s,xh(od.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,ad.set(s,xh(ad.get(s)||null,t,e,n,r,i)),!0}return!1}function M4(t){var e=Gl(t.target);if(e!==null){var n=yu(e);if(n!==null){if(e=n.tag,e===13){if(e=E4(n),e!==null){t.blockedOn=e,F4(t.priority,function(){D4(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ap(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=x1(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);m1=r,n.target.dispatchEvent(r),m1=null}else return e=Ud(n),e!==null&&ev(e),t.blockedOn=n,!1;e.shift()}return!0}function H5(t,e,n){ap(t)&&n.delete(e)}function hT(){_1=!1,nl!==null&&ap(nl)&&(nl=null),rl!==null&&ap(rl)&&(rl=null),il!==null&&ap(il)&&(il=null),od.forEach(H5),ad.forEach(H5)}function bh(t,e){t.blockedOn===e&&(t.blockedOn=null,_1||(_1=!0,Ji.unstable_scheduleCallback(Ji.unstable_NormalPriority,hT)))}function ld(t){function e(i){return bh(i,t)}if(0<Lf.length){bh(Lf[0],t);for(var n=1;n<Lf.length;n++){var r=Lf[n];r.blockedOn===t&&(r.blockedOn=null)}}for(nl!==null&&bh(nl,t),rl!==null&&bh(rl,t),il!==null&&bh(il,t),od.forEach(e),ad.forEach(e),n=0;n<Ha.length;n++)r=Ha[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Ha.length&&(n=Ha[0],n.blockedOn===null);)M4(n),n.blockedOn===null&&Ha.shift()}var hc=da.ReactCurrentBatchConfig,Fp=!0;function dT(t,e,n,r){var i=an,s=hc.transition;hc.transition=null;try{an=1,tv(t,e,n,r)}finally{an=i,hc.transition=s}}function fT(t,e,n,r){var i=an,s=hc.transition;hc.transition=null;try{an=4,tv(t,e,n,r)}finally{an=i,hc.transition=s}}function tv(t,e,n,r){if(Fp){var i=x1(t,e,n,r);if(i===null)e0(t,e,r,Mp,n),q5(t,r);else if(cT(i,t,e,n,r))r.stopPropagation();else if(q5(t,r),e&4&&-1<uT.indexOf(t)){for(;i!==null;){var s=Ud(i);if(s!==null&&j4(s),s=x1(t,e,n,r),s===null&&e0(t,e,r,Mp,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else e0(t,e,r,null,n)}}var Mp=null;function x1(t,e,n,r){if(Mp=null,t=J2(r),t=Gl(t),t!==null)if(e=yu(t),e===null)t=null;else if(n=e.tag,n===13){if(t=E4(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Mp=t,null}function U4(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(eT()){case X2:return 1;case P4:return 4;case Dp:case tT:return 16;case C4:return 536870912;default:return 16}default:return 16}}var Qa=null,nv=null,lp=null;function V4(){if(lp)return lp;var t,e=nv,n=e.length,r,i="value"in Qa?Qa.value:Qa.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return lp=i.slice(t,1<r?1-r:void 0)}function up(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Rf(){return!0}function W5(){return!1}function Zi(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Rf:W5,this.isPropagationStopped=W5,this}return Vn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Rf)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Rf)},persist:function(){},isPersistent:Rf}),e}var Bc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},rv=Zi(Bc),Md=Vn({},Bc,{view:0,detail:0}),pT=Zi(Md),Wg,$g,Sh,Cm=Vn({},Md,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:iv,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Sh&&(Sh&&t.type==="mousemove"?(Wg=t.screenX-Sh.screenX,$g=t.screenY-Sh.screenY):$g=Wg=0,Sh=t),Wg)},movementY:function(t){return"movementY"in t?t.movementY:$g}}),$5=Zi(Cm),mT=Vn({},Cm,{dataTransfer:0}),gT=Zi(mT),vT=Vn({},Md,{relatedTarget:0}),Gg=Zi(vT),yT=Vn({},Bc,{animationName:0,elapsedTime:0,pseudoElement:0}),wT=Zi(yT),_T=Vn({},Bc,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),xT=Zi(_T),bT=Vn({},Bc,{data:0}),G5=Zi(bT),ST={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},NT={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},AT={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ET(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=AT[t])?!!e[t]:!1}function iv(){return ET}var IT=Vn({},Md,{key:function(t){if(t.key){var e=ST[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=up(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?NT[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:iv,charCode:function(t){return t.type==="keypress"?up(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?up(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),TT=Zi(IT),kT=Vn({},Cm,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),K5=Zi(kT),PT=Vn({},Md,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:iv}),CT=Zi(PT),LT=Vn({},Bc,{propertyName:0,elapsedTime:0,pseudoElement:0}),RT=Zi(LT),jT=Vn({},Cm,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),DT=Zi(jT),OT=[9,13,27,32],sv=ra&&"CompositionEvent"in window,zh=null;ra&&"documentMode"in document&&(zh=document.documentMode);var FT=ra&&"TextEvent"in window&&!zh,B4=ra&&(!sv||zh&&8<zh&&11>=zh),Y5=" ",Q5=!1;function z4(t,e){switch(t){case"keyup":return OT.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function q4(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Qu=!1;function MT(t,e){switch(t){case"compositionend":return q4(e);case"keypress":return e.which!==32?null:(Q5=!0,Y5);case"textInput":return t=e.data,t===Y5&&Q5?null:t;default:return null}}function UT(t,e){if(Qu)return t==="compositionend"||!sv&&z4(t,e)?(t=V4(),lp=nv=Qa=null,Qu=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return B4&&e.locale!=="ko"?null:e.data;default:return null}}var VT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function J5(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!VT[t.type]:e==="textarea"}function H4(t,e,n,r){x4(r),e=Up(e,"onChange"),0<e.length&&(n=new rv("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var qh=null,ud=null;function BT(t){t3(t,0)}function Lm(t){var e=Zu(t);if(p4(e))return t}function zT(t,e){if(t==="change")return e}var W4=!1;if(ra){var Kg;if(ra){var Yg="oninput"in document;if(!Yg){var X5=document.createElement("div");X5.setAttribute("oninput","return;"),Yg=typeof X5.oninput=="function"}Kg=Yg}else Kg=!1;W4=Kg&&(!document.documentMode||9<document.documentMode)}function Z5(){qh&&(qh.detachEvent("onpropertychange",$4),ud=qh=null)}function $4(t){if(t.propertyName==="value"&&Lm(ud)){var e=[];H4(e,ud,t,J2(t)),A4(BT,e)}}function qT(t,e,n){t==="focusin"?(Z5(),qh=e,ud=n,qh.attachEvent("onpropertychange",$4)):t==="focusout"&&Z5()}function HT(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Lm(ud)}function WT(t,e){if(t==="click")return Lm(e)}function $T(t,e){if(t==="input"||t==="change")return Lm(e)}function GT(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Us=typeof Object.is=="function"?Object.is:GT;function cd(t,e){if(Us(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!r1.call(e,i)||!Us(t[i],e[i]))return!1}return!0}function ew(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function tw(t,e){var n=ew(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=ew(n)}}function G4(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?G4(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function K4(){for(var t=window,e=Lp();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Lp(t.document)}return e}function ov(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function KT(t){var e=K4(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&G4(n.ownerDocument.documentElement,n)){if(r!==null&&ov(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=tw(n,s);var o=tw(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var YT=ra&&"documentMode"in document&&11>=document.documentMode,Ju=null,b1=null,Hh=null,S1=!1;function nw(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;S1||Ju==null||Ju!==Lp(r)||(r=Ju,"selectionStart"in r&&ov(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Hh&&cd(Hh,r)||(Hh=r,r=Up(b1,"onSelect"),0<r.length&&(e=new rv("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ju)))}function jf(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Xu={animationend:jf("Animation","AnimationEnd"),animationiteration:jf("Animation","AnimationIteration"),animationstart:jf("Animation","AnimationStart"),transitionend:jf("Transition","TransitionEnd")},Qg={},Y4={};ra&&(Y4=document.createElement("div").style,"AnimationEvent"in window||(delete Xu.animationend.animation,delete Xu.animationiteration.animation,delete Xu.animationstart.animation),"TransitionEvent"in window||delete Xu.transitionend.transition);function Rm(t){if(Qg[t])return Qg[t];if(!Xu[t])return t;var e=Xu[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Y4)return Qg[t]=e[n];return t}var Q4=Rm("animationend"),J4=Rm("animationiteration"),X4=Rm("animationstart"),Z4=Rm("transitionend"),e3=new Map,rw="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function _l(t,e){e3.set(t,e),vu(e,[t])}for(var Jg=0;Jg<rw.length;Jg++){var Xg=rw[Jg],QT=Xg.toLowerCase(),JT=Xg[0].toUpperCase()+Xg.slice(1);_l(QT,"on"+JT)}_l(Q4,"onAnimationEnd");_l(J4,"onAnimationIteration");_l(X4,"onAnimationStart");_l("dblclick","onDoubleClick");_l("focusin","onFocus");_l("focusout","onBlur");_l(Z4,"onTransitionEnd");Sc("onMouseEnter",["mouseout","mouseover"]);Sc("onMouseLeave",["mouseout","mouseover"]);Sc("onPointerEnter",["pointerout","pointerover"]);Sc("onPointerLeave",["pointerout","pointerover"]);vu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));vu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));vu("onBeforeInput",["compositionend","keypress","textInput","paste"]);vu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));vu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));vu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Rh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),XT=new Set("cancel close invalid load scroll toggle".split(" ").concat(Rh));function iw(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,QI(r,e,void 0,t),t.currentTarget=null}function t3(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;iw(i,a,u),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;iw(i,a,u),s=l}}}if(jp)throw t=y1,jp=!1,y1=null,t}function Nn(t,e){var n=e[T1];n===void 0&&(n=e[T1]=new Set);var r=t+"__bubble";n.has(r)||(n3(e,t,2,!1),n.add(r))}function Zg(t,e,n){var r=0;e&&(r|=4),n3(n,t,r,e)}var Df="_reactListening"+Math.random().toString(36).slice(2);function hd(t){if(!t[Df]){t[Df]=!0,u4.forEach(function(n){n!=="selectionchange"&&(XT.has(n)||Zg(n,!1,t),Zg(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Df]||(e[Df]=!0,Zg("selectionchange",!1,e))}}function n3(t,e,n,r){switch(U4(e)){case 1:var i=dT;break;case 4:i=fT;break;default:i=tv}n=i.bind(null,e,n,t),i=void 0,!v1||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function e0(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Gl(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}A4(function(){var u=s,c=J2(n),g=[];e:{var v=e3.get(t);if(v!==void 0){var m=rv,S=t;switch(t){case"keypress":if(up(n)===0)break e;case"keydown":case"keyup":m=TT;break;case"focusin":S="focus",m=Gg;break;case"focusout":S="blur",m=Gg;break;case"beforeblur":case"afterblur":m=Gg;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=$5;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=gT;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=CT;break;case Q4:case J4:case X4:m=wT;break;case Z4:m=RT;break;case"scroll":m=pT;break;case"wheel":m=DT;break;case"copy":case"cut":case"paste":m=xT;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=K5}var A=(e&4)!==0,L=!A&&t==="scroll",b=A?v!==null?v+"Capture":null:v;A=[];for(var k=u,j;k!==null;){j=k;var U=j.stateNode;if(j.tag===5&&U!==null&&(j=U,b!==null&&(U=sd(k,b),U!=null&&A.push(dd(k,U,j)))),L)break;k=k.return}0<A.length&&(v=new m(v,S,null,n,c),g.push({event:v,listeners:A}))}}if(!(e&7)){e:{if(v=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",v&&n!==m1&&(S=n.relatedTarget||n.fromElement)&&(Gl(S)||S[ia]))break e;if((m||v)&&(v=c.window===c?c:(v=c.ownerDocument)?v.defaultView||v.parentWindow:window,m?(S=n.relatedTarget||n.toElement,m=u,S=S?Gl(S):null,S!==null&&(L=yu(S),S!==L||S.tag!==5&&S.tag!==6)&&(S=null)):(m=null,S=u),m!==S)){if(A=$5,U="onMouseLeave",b="onMouseEnter",k="mouse",(t==="pointerout"||t==="pointerover")&&(A=K5,U="onPointerLeave",b="onPointerEnter",k="pointer"),L=m==null?v:Zu(m),j=S==null?v:Zu(S),v=new A(U,k+"leave",m,n,c),v.target=L,v.relatedTarget=j,U=null,Gl(c)===u&&(A=new A(b,k+"enter",S,n,c),A.target=j,A.relatedTarget=L,U=A),L=U,m&&S)t:{for(A=m,b=S,k=0,j=A;j;j=Uu(j))k++;for(j=0,U=b;U;U=Uu(U))j++;for(;0<k-j;)A=Uu(A),k--;for(;0<j-k;)b=Uu(b),j--;for(;k--;){if(A===b||b!==null&&A===b.alternate)break t;A=Uu(A),b=Uu(b)}A=null}else A=null;m!==null&&sw(g,v,m,A,!1),S!==null&&L!==null&&sw(g,L,S,A,!0)}}e:{if(v=u?Zu(u):window,m=v.nodeName&&v.nodeName.toLowerCase(),m==="select"||m==="input"&&v.type==="file")var q=zT;else if(J5(v))if(W4)q=$T;else{q=HT;var ee=qT}else(m=v.nodeName)&&m.toLowerCase()==="input"&&(v.type==="checkbox"||v.type==="radio")&&(q=WT);if(q&&(q=q(t,u))){H4(g,q,n,c);break e}ee&&ee(t,v,u),t==="focusout"&&(ee=v._wrapperState)&&ee.controlled&&v.type==="number"&&c1(v,"number",v.value)}switch(ee=u?Zu(u):window,t){case"focusin":(J5(ee)||ee.contentEditable==="true")&&(Ju=ee,b1=u,Hh=null);break;case"focusout":Hh=b1=Ju=null;break;case"mousedown":S1=!0;break;case"contextmenu":case"mouseup":case"dragend":S1=!1,nw(g,n,c);break;case"selectionchange":if(YT)break;case"keydown":case"keyup":nw(g,n,c)}var D;if(sv)e:{switch(t){case"compositionstart":var N="onCompositionStart";break e;case"compositionend":N="onCompositionEnd";break e;case"compositionupdate":N="onCompositionUpdate";break e}N=void 0}else Qu?z4(t,n)&&(N="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(N="onCompositionStart");N&&(B4&&n.locale!=="ko"&&(Qu||N!=="onCompositionStart"?N==="onCompositionEnd"&&Qu&&(D=V4()):(Qa=c,nv="value"in Qa?Qa.value:Qa.textContent,Qu=!0)),ee=Up(u,N),0<ee.length&&(N=new G5(N,t,null,n,c),g.push({event:N,listeners:ee}),D?N.data=D:(D=q4(n),D!==null&&(N.data=D)))),(D=FT?MT(t,n):UT(t,n))&&(u=Up(u,"onBeforeInput"),0<u.length&&(c=new G5("onBeforeInput","beforeinput",null,n,c),g.push({event:c,listeners:u}),c.data=D))}t3(g,e)})}function dd(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Up(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=sd(t,n),s!=null&&r.unshift(dd(t,s,i)),s=sd(t,e),s!=null&&r.push(dd(t,s,i))),t=t.return}return r}function Uu(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function sw(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,i?(l=sd(n,s),l!=null&&o.unshift(dd(n,l,a))):i||(l=sd(n,s),l!=null&&o.push(dd(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var ZT=/\r\n?/g,ek=/\u0000|\uFFFD/g;function ow(t){return(typeof t=="string"?t:""+t).replace(ZT,`
`).replace(ek,"")}function Of(t,e,n){if(e=ow(e),ow(t)!==e&&n)throw Error(je(425))}function Vp(){}var N1=null,A1=null;function E1(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var I1=typeof setTimeout=="function"?setTimeout:void 0,tk=typeof clearTimeout=="function"?clearTimeout:void 0,aw=typeof Promise=="function"?Promise:void 0,nk=typeof queueMicrotask=="function"?queueMicrotask:typeof aw<"u"?function(t){return aw.resolve(null).then(t).catch(rk)}:I1;function rk(t){setTimeout(function(){throw t})}function t0(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),ld(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);ld(e)}function sl(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function lw(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var zc=Math.random().toString(36).slice(2),co="__reactFiber$"+zc,fd="__reactProps$"+zc,ia="__reactContainer$"+zc,T1="__reactEvents$"+zc,ik="__reactListeners$"+zc,sk="__reactHandles$"+zc;function Gl(t){var e=t[co];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ia]||n[co]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=lw(t);t!==null;){if(n=t[co])return n;t=lw(t)}return e}t=n,n=t.parentNode}return null}function Ud(t){return t=t[co]||t[ia],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Zu(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(je(33))}function jm(t){return t[fd]||null}var k1=[],ec=-1;function xl(t){return{current:t}}function In(t){0>ec||(t.current=k1[ec],k1[ec]=null,ec--)}function _n(t,e){ec++,k1[ec]=t.current,t.current=e}var pl={},ri=xl(pl),Ai=xl(!1),nu=pl;function Nc(t,e){var n=t.type.contextTypes;if(!n)return pl;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Ei(t){return t=t.childContextTypes,t!=null}function Bp(){In(Ai),In(ri)}function uw(t,e,n){if(ri.current!==pl)throw Error(je(168));_n(ri,e),_n(Ai,n)}function r3(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(je(108,qI(t)||"Unknown",i));return Vn({},n,r)}function zp(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||pl,nu=ri.current,_n(ri,t),_n(Ai,Ai.current),!0}function cw(t,e,n){var r=t.stateNode;if(!r)throw Error(je(169));n?(t=r3(t,e,nu),r.__reactInternalMemoizedMergedChildContext=t,In(Ai),In(ri),_n(ri,t)):In(Ai),_n(Ai,n)}var qo=null,Dm=!1,n0=!1;function i3(t){qo===null?qo=[t]:qo.push(t)}function ok(t){Dm=!0,i3(t)}function bl(){if(!n0&&qo!==null){n0=!0;var t=0,e=an;try{var n=qo;for(an=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}qo=null,Dm=!1}catch(i){throw qo!==null&&(qo=qo.slice(t+1)),k4(X2,bl),i}finally{an=e,n0=!1}}return null}var tc=[],nc=0,qp=null,Hp=0,ps=[],ms=0,ru=null,Wo=1,$o="";function zl(t,e){tc[nc++]=Hp,tc[nc++]=qp,qp=t,Hp=e}function s3(t,e,n){ps[ms++]=Wo,ps[ms++]=$o,ps[ms++]=ru,ru=t;var r=Wo;t=$o;var i=32-Os(r)-1;r&=~(1<<i),n+=1;var s=32-Os(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Wo=1<<32-Os(e)+i|n<<i|r,$o=s+t}else Wo=1<<s|n<<i|r,$o=t}function av(t){t.return!==null&&(zl(t,1),s3(t,1,0))}function lv(t){for(;t===qp;)qp=tc[--nc],tc[nc]=null,Hp=tc[--nc],tc[nc]=null;for(;t===ru;)ru=ps[--ms],ps[ms]=null,$o=ps[--ms],ps[ms]=null,Wo=ps[--ms],ps[ms]=null}var Qi=null,$i=null,Cn=!1,js=null;function o3(t,e){var n=gs(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function hw(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Qi=t,$i=sl(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Qi=t,$i=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ru!==null?{id:Wo,overflow:$o}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=gs(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Qi=t,$i=null,!0):!1;default:return!1}}function P1(t){return(t.mode&1)!==0&&(t.flags&128)===0}function C1(t){if(Cn){var e=$i;if(e){var n=e;if(!hw(t,e)){if(P1(t))throw Error(je(418));e=sl(n.nextSibling);var r=Qi;e&&hw(t,e)?o3(r,n):(t.flags=t.flags&-4097|2,Cn=!1,Qi=t)}}else{if(P1(t))throw Error(je(418));t.flags=t.flags&-4097|2,Cn=!1,Qi=t}}}function dw(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Qi=t}function Ff(t){if(t!==Qi)return!1;if(!Cn)return dw(t),Cn=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!E1(t.type,t.memoizedProps)),e&&(e=$i)){if(P1(t))throw a3(),Error(je(418));for(;e;)o3(t,e),e=sl(e.nextSibling)}if(dw(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(je(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){$i=sl(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}$i=null}}else $i=Qi?sl(t.stateNode.nextSibling):null;return!0}function a3(){for(var t=$i;t;)t=sl(t.nextSibling)}function Ac(){$i=Qi=null,Cn=!1}function uv(t){js===null?js=[t]:js.push(t)}var ak=da.ReactCurrentBatchConfig;function Nh(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(je(309));var r=n.stateNode}if(!r)throw Error(je(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(je(284));if(!n._owner)throw Error(je(290,t))}return t}function Mf(t,e){throw t=Object.prototype.toString.call(e),Error(je(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function fw(t){var e=t._init;return e(t._payload)}function l3(t){function e(b,k){if(t){var j=b.deletions;j===null?(b.deletions=[k],b.flags|=16):j.push(k)}}function n(b,k){if(!t)return null;for(;k!==null;)e(b,k),k=k.sibling;return null}function r(b,k){for(b=new Map;k!==null;)k.key!==null?b.set(k.key,k):b.set(k.index,k),k=k.sibling;return b}function i(b,k){return b=ul(b,k),b.index=0,b.sibling=null,b}function s(b,k,j){return b.index=j,t?(j=b.alternate,j!==null?(j=j.index,j<k?(b.flags|=2,k):j):(b.flags|=2,k)):(b.flags|=1048576,k)}function o(b){return t&&b.alternate===null&&(b.flags|=2),b}function a(b,k,j,U){return k===null||k.tag!==6?(k=u0(j,b.mode,U),k.return=b,k):(k=i(k,j),k.return=b,k)}function l(b,k,j,U){var q=j.type;return q===Yu?c(b,k,j.props.children,U,j.key):k!==null&&(k.elementType===q||typeof q=="object"&&q!==null&&q.$$typeof===za&&fw(q)===k.type)?(U=i(k,j.props),U.ref=Nh(b,k,j),U.return=b,U):(U=gp(j.type,j.key,j.props,null,b.mode,U),U.ref=Nh(b,k,j),U.return=b,U)}function u(b,k,j,U){return k===null||k.tag!==4||k.stateNode.containerInfo!==j.containerInfo||k.stateNode.implementation!==j.implementation?(k=c0(j,b.mode,U),k.return=b,k):(k=i(k,j.children||[]),k.return=b,k)}function c(b,k,j,U,q){return k===null||k.tag!==7?(k=Zl(j,b.mode,U,q),k.return=b,k):(k=i(k,j),k.return=b,k)}function g(b,k,j){if(typeof k=="string"&&k!==""||typeof k=="number")return k=u0(""+k,b.mode,j),k.return=b,k;if(typeof k=="object"&&k!==null){switch(k.$$typeof){case If:return j=gp(k.type,k.key,k.props,null,b.mode,j),j.ref=Nh(b,null,k),j.return=b,j;case Ku:return k=c0(k,b.mode,j),k.return=b,k;case za:var U=k._init;return g(b,U(k._payload),j)}if(Ch(k)||wh(k))return k=Zl(k,b.mode,j,null),k.return=b,k;Mf(b,k)}return null}function v(b,k,j,U){var q=k!==null?k.key:null;if(typeof j=="string"&&j!==""||typeof j=="number")return q!==null?null:a(b,k,""+j,U);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case If:return j.key===q?l(b,k,j,U):null;case Ku:return j.key===q?u(b,k,j,U):null;case za:return q=j._init,v(b,k,q(j._payload),U)}if(Ch(j)||wh(j))return q!==null?null:c(b,k,j,U,null);Mf(b,j)}return null}function m(b,k,j,U,q){if(typeof U=="string"&&U!==""||typeof U=="number")return b=b.get(j)||null,a(k,b,""+U,q);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case If:return b=b.get(U.key===null?j:U.key)||null,l(k,b,U,q);case Ku:return b=b.get(U.key===null?j:U.key)||null,u(k,b,U,q);case za:var ee=U._init;return m(b,k,j,ee(U._payload),q)}if(Ch(U)||wh(U))return b=b.get(j)||null,c(k,b,U,q,null);Mf(k,U)}return null}function S(b,k,j,U){for(var q=null,ee=null,D=k,N=k=0,I=null;D!==null&&N<j.length;N++){D.index>N?(I=D,D=null):I=D.sibling;var R=v(b,D,j[N],U);if(R===null){D===null&&(D=I);break}t&&D&&R.alternate===null&&e(b,D),k=s(R,k,N),ee===null?q=R:ee.sibling=R,ee=R,D=I}if(N===j.length)return n(b,D),Cn&&zl(b,N),q;if(D===null){for(;N<j.length;N++)D=g(b,j[N],U),D!==null&&(k=s(D,k,N),ee===null?q=D:ee.sibling=D,ee=D);return Cn&&zl(b,N),q}for(D=r(b,D);N<j.length;N++)I=m(D,b,N,j[N],U),I!==null&&(t&&I.alternate!==null&&D.delete(I.key===null?N:I.key),k=s(I,k,N),ee===null?q=I:ee.sibling=I,ee=I);return t&&D.forEach(function(x){return e(b,x)}),Cn&&zl(b,N),q}function A(b,k,j,U){var q=wh(j);if(typeof q!="function")throw Error(je(150));if(j=q.call(j),j==null)throw Error(je(151));for(var ee=q=null,D=k,N=k=0,I=null,R=j.next();D!==null&&!R.done;N++,R=j.next()){D.index>N?(I=D,D=null):I=D.sibling;var x=v(b,D,R.value,U);if(x===null){D===null&&(D=I);break}t&&D&&x.alternate===null&&e(b,D),k=s(x,k,N),ee===null?q=x:ee.sibling=x,ee=x,D=I}if(R.done)return n(b,D),Cn&&zl(b,N),q;if(D===null){for(;!R.done;N++,R=j.next())R=g(b,R.value,U),R!==null&&(k=s(R,k,N),ee===null?q=R:ee.sibling=R,ee=R);return Cn&&zl(b,N),q}for(D=r(b,D);!R.done;N++,R=j.next())R=m(D,b,N,R.value,U),R!==null&&(t&&R.alternate!==null&&D.delete(R.key===null?N:R.key),k=s(R,k,N),ee===null?q=R:ee.sibling=R,ee=R);return t&&D.forEach(function(T){return e(b,T)}),Cn&&zl(b,N),q}function L(b,k,j,U){if(typeof j=="object"&&j!==null&&j.type===Yu&&j.key===null&&(j=j.props.children),typeof j=="object"&&j!==null){switch(j.$$typeof){case If:e:{for(var q=j.key,ee=k;ee!==null;){if(ee.key===q){if(q=j.type,q===Yu){if(ee.tag===7){n(b,ee.sibling),k=i(ee,j.props.children),k.return=b,b=k;break e}}else if(ee.elementType===q||typeof q=="object"&&q!==null&&q.$$typeof===za&&fw(q)===ee.type){n(b,ee.sibling),k=i(ee,j.props),k.ref=Nh(b,ee,j),k.return=b,b=k;break e}n(b,ee);break}else e(b,ee);ee=ee.sibling}j.type===Yu?(k=Zl(j.props.children,b.mode,U,j.key),k.return=b,b=k):(U=gp(j.type,j.key,j.props,null,b.mode,U),U.ref=Nh(b,k,j),U.return=b,b=U)}return o(b);case Ku:e:{for(ee=j.key;k!==null;){if(k.key===ee)if(k.tag===4&&k.stateNode.containerInfo===j.containerInfo&&k.stateNode.implementation===j.implementation){n(b,k.sibling),k=i(k,j.children||[]),k.return=b,b=k;break e}else{n(b,k);break}else e(b,k);k=k.sibling}k=c0(j,b.mode,U),k.return=b,b=k}return o(b);case za:return ee=j._init,L(b,k,ee(j._payload),U)}if(Ch(j))return S(b,k,j,U);if(wh(j))return A(b,k,j,U);Mf(b,j)}return typeof j=="string"&&j!==""||typeof j=="number"?(j=""+j,k!==null&&k.tag===6?(n(b,k.sibling),k=i(k,j),k.return=b,b=k):(n(b,k),k=u0(j,b.mode,U),k.return=b,b=k),o(b)):n(b,k)}return L}var Ec=l3(!0),u3=l3(!1),Wp=xl(null),$p=null,rc=null,cv=null;function hv(){cv=rc=$p=null}function dv(t){var e=Wp.current;In(Wp),t._currentValue=e}function L1(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function dc(t,e){$p=t,cv=rc=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ni=!0),t.firstContext=null)}function ys(t){var e=t._currentValue;if(cv!==t)if(t={context:t,memoizedValue:e,next:null},rc===null){if($p===null)throw Error(je(308));rc=t,$p.dependencies={lanes:0,firstContext:t}}else rc=rc.next=t;return e}var Kl=null;function fv(t){Kl===null?Kl=[t]:Kl.push(t)}function c3(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,fv(e)):(n.next=i.next,i.next=n),e.interleaved=n,sa(t,r)}function sa(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var qa=!1;function pv(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function h3(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Xo(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ol(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Kt&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,sa(t,n)}return i=r.interleaved,i===null?(e.next=e,fv(r)):(e.next=i.next,i.next=e),r.interleaved=e,sa(t,n)}function cp(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Z2(t,n)}}function pw(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Gp(t,e,n,r){var i=t.updateQueue;qa=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var c=t.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(s!==null){var g=i.baseState;o=0,c=u=l=null,a=s;do{var v=a.lane,m=a.eventTime;if((r&v)===v){c!==null&&(c=c.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var S=t,A=a;switch(v=e,m=n,A.tag){case 1:if(S=A.payload,typeof S=="function"){g=S.call(m,g,v);break e}g=S;break e;case 3:S.flags=S.flags&-65537|128;case 0:if(S=A.payload,v=typeof S=="function"?S.call(m,g,v):S,v==null)break e;g=Vn({},g,v);break e;case 2:qa=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,v=i.effects,v===null?i.effects=[a]:v.push(a))}else m={eventTime:m,lane:v,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(u=c=m,l=g):c=c.next=m,o|=v;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;v=a,a=v.next,v.next=null,i.lastBaseUpdate=v,i.shared.pending=null}}while(!0);if(c===null&&(l=g),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);su|=o,t.lanes=o,t.memoizedState=g}}function mw(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(je(191,i));i.call(r)}}}var Vd={},mo=xl(Vd),pd=xl(Vd),md=xl(Vd);function Yl(t){if(t===Vd)throw Error(je(174));return t}function mv(t,e){switch(_n(md,e),_n(pd,t),_n(mo,Vd),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:d1(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=d1(e,t)}In(mo),_n(mo,e)}function Ic(){In(mo),In(pd),In(md)}function d3(t){Yl(md.current);var e=Yl(mo.current),n=d1(e,t.type);e!==n&&(_n(pd,t),_n(mo,n))}function gv(t){pd.current===t&&(In(mo),In(pd))}var Fn=xl(0);function Kp(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var r0=[];function vv(){for(var t=0;t<r0.length;t++)r0[t]._workInProgressVersionPrimary=null;r0.length=0}var hp=da.ReactCurrentDispatcher,i0=da.ReactCurrentBatchConfig,iu=0,Mn=null,vr=null,Ar=null,Yp=!1,Wh=!1,gd=0,lk=0;function Wr(){throw Error(je(321))}function yv(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Us(t[n],e[n]))return!1;return!0}function wv(t,e,n,r,i,s){if(iu=s,Mn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,hp.current=t===null||t.memoizedState===null?dk:fk,t=n(r,i),Wh){s=0;do{if(Wh=!1,gd=0,25<=s)throw Error(je(301));s+=1,Ar=vr=null,e.updateQueue=null,hp.current=pk,t=n(r,i)}while(Wh)}if(hp.current=Qp,e=vr!==null&&vr.next!==null,iu=0,Ar=vr=Mn=null,Yp=!1,e)throw Error(je(300));return t}function _v(){var t=gd!==0;return gd=0,t}function uo(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ar===null?Mn.memoizedState=Ar=t:Ar=Ar.next=t,Ar}function ws(){if(vr===null){var t=Mn.alternate;t=t!==null?t.memoizedState:null}else t=vr.next;var e=Ar===null?Mn.memoizedState:Ar.next;if(e!==null)Ar=e,vr=t;else{if(t===null)throw Error(je(310));vr=t,t={memoizedState:vr.memoizedState,baseState:vr.baseState,baseQueue:vr.baseQueue,queue:vr.queue,next:null},Ar===null?Mn.memoizedState=Ar=t:Ar=Ar.next=t}return Ar}function vd(t,e){return typeof e=="function"?e(t):e}function s0(t){var e=ws(),n=e.queue;if(n===null)throw Error(je(311));n.lastRenderedReducer=t;var r=vr,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,u=s;do{var c=u.lane;if((iu&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var g={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=g,o=r):l=l.next=g,Mn.lanes|=c,su|=c}u=u.next}while(u!==null&&u!==s);l===null?o=r:l.next=a,Us(r,e.memoizedState)||(Ni=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Mn.lanes|=s,su|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function o0(t){var e=ws(),n=e.queue;if(n===null)throw Error(je(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Us(s,e.memoizedState)||(Ni=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function f3(){}function p3(t,e){var n=Mn,r=ws(),i=e(),s=!Us(r.memoizedState,i);if(s&&(r.memoizedState=i,Ni=!0),r=r.queue,xv(v3.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Ar!==null&&Ar.memoizedState.tag&1){if(n.flags|=2048,yd(9,g3.bind(null,n,r,i,e),void 0,null),Ir===null)throw Error(je(349));iu&30||m3(n,e,i)}return i}function m3(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Mn.updateQueue,e===null?(e={lastEffect:null,stores:null},Mn.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function g3(t,e,n,r){e.value=n,e.getSnapshot=r,y3(e)&&w3(t)}function v3(t,e,n){return n(function(){y3(e)&&w3(t)})}function y3(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Us(t,n)}catch{return!0}}function w3(t){var e=sa(t,1);e!==null&&Fs(e,t,1,-1)}function gw(t){var e=uo();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:vd,lastRenderedState:t},e.queue=t,t=t.dispatch=hk.bind(null,Mn,t),[e.memoizedState,t]}function yd(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Mn.updateQueue,e===null?(e={lastEffect:null,stores:null},Mn.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function _3(){return ws().memoizedState}function dp(t,e,n,r){var i=uo();Mn.flags|=t,i.memoizedState=yd(1|e,n,void 0,r===void 0?null:r)}function Om(t,e,n,r){var i=ws();r=r===void 0?null:r;var s=void 0;if(vr!==null){var o=vr.memoizedState;if(s=o.destroy,r!==null&&yv(r,o.deps)){i.memoizedState=yd(e,n,s,r);return}}Mn.flags|=t,i.memoizedState=yd(1|e,n,s,r)}function vw(t,e){return dp(8390656,8,t,e)}function xv(t,e){return Om(2048,8,t,e)}function x3(t,e){return Om(4,2,t,e)}function b3(t,e){return Om(4,4,t,e)}function S3(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function N3(t,e,n){return n=n!=null?n.concat([t]):null,Om(4,4,S3.bind(null,e,t),n)}function bv(){}function A3(t,e){var n=ws();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&yv(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function E3(t,e){var n=ws();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&yv(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function I3(t,e,n){return iu&21?(Us(n,e)||(n=L4(),Mn.lanes|=n,su|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ni=!0),t.memoizedState=n)}function uk(t,e){var n=an;an=n!==0&&4>n?n:4,t(!0);var r=i0.transition;i0.transition={};try{t(!1),e()}finally{an=n,i0.transition=r}}function T3(){return ws().memoizedState}function ck(t,e,n){var r=ll(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},k3(t))P3(e,n);else if(n=c3(t,e,n,r),n!==null){var i=di();Fs(n,t,r,i),C3(n,e,r)}}function hk(t,e,n){var r=ll(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(k3(t))P3(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Us(a,o)){var l=e.interleaved;l===null?(i.next=i,fv(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=c3(t,e,i,r),n!==null&&(i=di(),Fs(n,t,r,i),C3(n,e,r))}}function k3(t){var e=t.alternate;return t===Mn||e!==null&&e===Mn}function P3(t,e){Wh=Yp=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function C3(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Z2(t,n)}}var Qp={readContext:ys,useCallback:Wr,useContext:Wr,useEffect:Wr,useImperativeHandle:Wr,useInsertionEffect:Wr,useLayoutEffect:Wr,useMemo:Wr,useReducer:Wr,useRef:Wr,useState:Wr,useDebugValue:Wr,useDeferredValue:Wr,useTransition:Wr,useMutableSource:Wr,useSyncExternalStore:Wr,useId:Wr,unstable_isNewReconciler:!1},dk={readContext:ys,useCallback:function(t,e){return uo().memoizedState=[t,e===void 0?null:e],t},useContext:ys,useEffect:vw,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,dp(4194308,4,S3.bind(null,e,t),n)},useLayoutEffect:function(t,e){return dp(4194308,4,t,e)},useInsertionEffect:function(t,e){return dp(4,2,t,e)},useMemo:function(t,e){var n=uo();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=uo();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=ck.bind(null,Mn,t),[r.memoizedState,t]},useRef:function(t){var e=uo();return t={current:t},e.memoizedState=t},useState:gw,useDebugValue:bv,useDeferredValue:function(t){return uo().memoizedState=t},useTransition:function(){var t=gw(!1),e=t[0];return t=uk.bind(null,t[1]),uo().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Mn,i=uo();if(Cn){if(n===void 0)throw Error(je(407));n=n()}else{if(n=e(),Ir===null)throw Error(je(349));iu&30||m3(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,vw(v3.bind(null,r,s,t),[t]),r.flags|=2048,yd(9,g3.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=uo(),e=Ir.identifierPrefix;if(Cn){var n=$o,r=Wo;n=(r&~(1<<32-Os(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=gd++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=lk++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},fk={readContext:ys,useCallback:A3,useContext:ys,useEffect:xv,useImperativeHandle:N3,useInsertionEffect:x3,useLayoutEffect:b3,useMemo:E3,useReducer:s0,useRef:_3,useState:function(){return s0(vd)},useDebugValue:bv,useDeferredValue:function(t){var e=ws();return I3(e,vr.memoizedState,t)},useTransition:function(){var t=s0(vd)[0],e=ws().memoizedState;return[t,e]},useMutableSource:f3,useSyncExternalStore:p3,useId:T3,unstable_isNewReconciler:!1},pk={readContext:ys,useCallback:A3,useContext:ys,useEffect:xv,useImperativeHandle:N3,useInsertionEffect:x3,useLayoutEffect:b3,useMemo:E3,useReducer:o0,useRef:_3,useState:function(){return o0(vd)},useDebugValue:bv,useDeferredValue:function(t){var e=ws();return vr===null?e.memoizedState=t:I3(e,vr.memoizedState,t)},useTransition:function(){var t=o0(vd)[0],e=ws().memoizedState;return[t,e]},useMutableSource:f3,useSyncExternalStore:p3,useId:T3,unstable_isNewReconciler:!1};function Ls(t,e){if(t&&t.defaultProps){e=Vn({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function R1(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Vn({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Fm={isMounted:function(t){return(t=t._reactInternals)?yu(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=di(),i=ll(t),s=Xo(r,i);s.payload=e,n!=null&&(s.callback=n),e=ol(t,s,i),e!==null&&(Fs(e,t,i,r),cp(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=di(),i=ll(t),s=Xo(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=ol(t,s,i),e!==null&&(Fs(e,t,i,r),cp(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=di(),r=ll(t),i=Xo(n,r);i.tag=2,e!=null&&(i.callback=e),e=ol(t,i,r),e!==null&&(Fs(e,t,r,n),cp(e,t,r))}};function yw(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!cd(n,r)||!cd(i,s):!0}function L3(t,e,n){var r=!1,i=pl,s=e.contextType;return typeof s=="object"&&s!==null?s=ys(s):(i=Ei(e)?nu:ri.current,r=e.contextTypes,s=(r=r!=null)?Nc(t,i):pl),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Fm,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function ww(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Fm.enqueueReplaceState(e,e.state,null)}function j1(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},pv(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=ys(s):(s=Ei(e)?nu:ri.current,i.context=Nc(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(R1(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Fm.enqueueReplaceState(i,i.state,null),Gp(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Tc(t,e){try{var n="",r=e;do n+=zI(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function a0(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function D1(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var mk=typeof WeakMap=="function"?WeakMap:Map;function R3(t,e,n){n=Xo(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Xp||(Xp=!0,W1=r),D1(t,e)},n}function j3(t,e,n){n=Xo(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){D1(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){D1(t,e),typeof r!="function"&&(al===null?al=new Set([this]):al.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function _w(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new mk;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=kk.bind(null,t,e,n),e.then(t,t))}function xw(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function bw(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Xo(-1,1),e.tag=2,ol(n,e,1))),n.lanes|=1),t)}var gk=da.ReactCurrentOwner,Ni=!1;function hi(t,e,n,r){e.child=t===null?u3(e,null,n,r):Ec(e,t.child,n,r)}function Sw(t,e,n,r,i){n=n.render;var s=e.ref;return dc(e,i),r=wv(t,e,n,r,s,i),n=_v(),t!==null&&!Ni?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,oa(t,e,i)):(Cn&&n&&av(e),e.flags|=1,hi(t,e,r,i),e.child)}function Nw(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Pv(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,D3(t,e,s,r,i)):(t=gp(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:cd,n(o,r)&&t.ref===e.ref)return oa(t,e,i)}return e.flags|=1,t=ul(s,r),t.ref=e.ref,t.return=e,e.child=t}function D3(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(cd(s,r)&&t.ref===e.ref)if(Ni=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Ni=!0);else return e.lanes=t.lanes,oa(t,e,i)}return O1(t,e,n,r,i)}function O3(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},_n(sc,Wi),Wi|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,_n(sc,Wi),Wi|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,_n(sc,Wi),Wi|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,_n(sc,Wi),Wi|=r;return hi(t,e,i,n),e.child}function F3(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function O1(t,e,n,r,i){var s=Ei(n)?nu:ri.current;return s=Nc(e,s),dc(e,i),n=wv(t,e,n,r,s,i),r=_v(),t!==null&&!Ni?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,oa(t,e,i)):(Cn&&r&&av(e),e.flags|=1,hi(t,e,n,i),e.child)}function Aw(t,e,n,r,i){if(Ei(n)){var s=!0;zp(e)}else s=!1;if(dc(e,i),e.stateNode===null)fp(t,e),L3(e,n,r),j1(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=ys(u):(u=Ei(n)?nu:ri.current,u=Nc(e,u));var c=n.getDerivedStateFromProps,g=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";g||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&ww(e,o,r,u),qa=!1;var v=e.memoizedState;o.state=v,Gp(e,r,o,i),l=e.memoizedState,a!==r||v!==l||Ai.current||qa?(typeof c=="function"&&(R1(e,n,c,r),l=e.memoizedState),(a=qa||yw(e,n,a,r,v,l,u))?(g||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,h3(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:Ls(e.type,a),o.props=u,g=e.pendingProps,v=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=ys(l):(l=Ei(n)?nu:ri.current,l=Nc(e,l));var m=n.getDerivedStateFromProps;(c=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==g||v!==l)&&ww(e,o,r,l),qa=!1,v=e.memoizedState,o.state=v,Gp(e,r,o,i);var S=e.memoizedState;a!==g||v!==S||Ai.current||qa?(typeof m=="function"&&(R1(e,n,m,r),S=e.memoizedState),(u=qa||yw(e,n,u,r,v,S,l)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,S,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,S,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&v===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&v===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=S),o.props=r,o.state=S,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&v===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&v===t.memoizedState||(e.flags|=1024),r=!1)}return F1(t,e,n,r,s,i)}function F1(t,e,n,r,i,s){F3(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&cw(e,n,!1),oa(t,e,s);r=e.stateNode,gk.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Ec(e,t.child,null,s),e.child=Ec(e,null,a,s)):hi(t,e,a,s),e.memoizedState=r.state,i&&cw(e,n,!0),e.child}function M3(t){var e=t.stateNode;e.pendingContext?uw(t,e.pendingContext,e.pendingContext!==e.context):e.context&&uw(t,e.context,!1),mv(t,e.containerInfo)}function Ew(t,e,n,r,i){return Ac(),uv(i),e.flags|=256,hi(t,e,n,r),e.child}var M1={dehydrated:null,treeContext:null,retryLane:0};function U1(t){return{baseLanes:t,cachePool:null,transitions:null}}function U3(t,e,n){var r=e.pendingProps,i=Fn.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),_n(Fn,i&1),t===null)return C1(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Vm(o,r,0,null),t=Zl(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=U1(n),e.memoizedState=M1,t):Sv(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return vk(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=ul(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=ul(a,s):(s=Zl(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?U1(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=M1,r}return s=t.child,t=s.sibling,r=ul(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Sv(t,e){return e=Vm({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Uf(t,e,n,r){return r!==null&&uv(r),Ec(e,t.child,null,n),t=Sv(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function vk(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=a0(Error(je(422))),Uf(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Vm({mode:"visible",children:r.children},i,0,null),s=Zl(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Ec(e,t.child,null,o),e.child.memoizedState=U1(o),e.memoizedState=M1,s);if(!(e.mode&1))return Uf(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(je(419)),r=a0(s,r,void 0),Uf(t,e,o,r)}if(a=(o&t.childLanes)!==0,Ni||a){if(r=Ir,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,sa(t,i),Fs(r,t,i,-1))}return kv(),r=a0(Error(je(421))),Uf(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=Pk.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,$i=sl(i.nextSibling),Qi=e,Cn=!0,js=null,t!==null&&(ps[ms++]=Wo,ps[ms++]=$o,ps[ms++]=ru,Wo=t.id,$o=t.overflow,ru=e),e=Sv(e,r.children),e.flags|=4096,e)}function Iw(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),L1(t.return,e,n)}function l0(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function V3(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(hi(t,e,r.children,n),r=Fn.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Iw(t,n,e);else if(t.tag===19)Iw(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(_n(Fn,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Kp(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),l0(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Kp(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}l0(e,!0,n,null,s);break;case"together":l0(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function fp(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function oa(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),su|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(je(153));if(e.child!==null){for(t=e.child,n=ul(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ul(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function yk(t,e,n){switch(e.tag){case 3:M3(e),Ac();break;case 5:d3(e);break;case 1:Ei(e.type)&&zp(e);break;case 4:mv(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;_n(Wp,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(_n(Fn,Fn.current&1),e.flags|=128,null):n&e.child.childLanes?U3(t,e,n):(_n(Fn,Fn.current&1),t=oa(t,e,n),t!==null?t.sibling:null);_n(Fn,Fn.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return V3(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),_n(Fn,Fn.current),r)break;return null;case 22:case 23:return e.lanes=0,O3(t,e,n)}return oa(t,e,n)}var B3,V1,z3,q3;B3=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};V1=function(){};z3=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Yl(mo.current);var s=null;switch(n){case"input":i=l1(t,i),r=l1(t,r),s=[];break;case"select":i=Vn({},i,{value:void 0}),r=Vn({},r,{value:void 0}),s=[];break;case"textarea":i=h1(t,i),r=h1(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Vp)}f1(n,r);var o;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(rd.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var l=r[u];if(a=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(rd.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Nn("scroll",t),s||a===l||(s=[])):(s=s||[]).push(u,l))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};q3=function(t,e,n,r){n!==r&&(e.flags|=4)};function Ah(t,e){if(!Cn)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function $r(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function wk(t,e,n){var r=e.pendingProps;switch(lv(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $r(e),null;case 1:return Ei(e.type)&&Bp(),$r(e),null;case 3:return r=e.stateNode,Ic(),In(Ai),In(ri),vv(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Ff(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,js!==null&&(K1(js),js=null))),V1(t,e),$r(e),null;case 5:gv(e);var i=Yl(md.current);if(n=e.type,t!==null&&e.stateNode!=null)z3(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(je(166));return $r(e),null}if(t=Yl(mo.current),Ff(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[co]=e,r[fd]=s,t=(e.mode&1)!==0,n){case"dialog":Nn("cancel",r),Nn("close",r);break;case"iframe":case"object":case"embed":Nn("load",r);break;case"video":case"audio":for(i=0;i<Rh.length;i++)Nn(Rh[i],r);break;case"source":Nn("error",r);break;case"img":case"image":case"link":Nn("error",r),Nn("load",r);break;case"details":Nn("toggle",r);break;case"input":O5(r,s),Nn("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Nn("invalid",r);break;case"textarea":M5(r,s),Nn("invalid",r)}f1(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Of(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Of(r.textContent,a,t),i=["children",""+a]):rd.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Nn("scroll",r)}switch(n){case"input":Tf(r),F5(r,s,!0);break;case"textarea":Tf(r),U5(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Vp)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=v4(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[co]=e,t[fd]=r,B3(t,e,!1,!1),e.stateNode=t;e:{switch(o=p1(n,r),n){case"dialog":Nn("cancel",t),Nn("close",t),i=r;break;case"iframe":case"object":case"embed":Nn("load",t),i=r;break;case"video":case"audio":for(i=0;i<Rh.length;i++)Nn(Rh[i],t);i=r;break;case"source":Nn("error",t),i=r;break;case"img":case"image":case"link":Nn("error",t),Nn("load",t),i=r;break;case"details":Nn("toggle",t),i=r;break;case"input":O5(t,r),i=l1(t,r),Nn("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Vn({},r,{value:void 0}),Nn("invalid",t);break;case"textarea":M5(t,r),i=h1(t,r),Nn("invalid",t);break;default:i=r}f1(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?_4(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&y4(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&id(t,l):typeof l=="number"&&id(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(rd.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Nn("scroll",t):l!=null&&G2(t,s,l,o))}switch(n){case"input":Tf(t),F5(t,r,!1);break;case"textarea":Tf(t),U5(t);break;case"option":r.value!=null&&t.setAttribute("value",""+fl(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?lc(t,!!r.multiple,s,!1):r.defaultValue!=null&&lc(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Vp)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return $r(e),null;case 6:if(t&&e.stateNode!=null)q3(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(je(166));if(n=Yl(md.current),Yl(mo.current),Ff(e)){if(r=e.stateNode,n=e.memoizedProps,r[co]=e,(s=r.nodeValue!==n)&&(t=Qi,t!==null))switch(t.tag){case 3:Of(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Of(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[co]=e,e.stateNode=r}return $r(e),null;case 13:if(In(Fn),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Cn&&$i!==null&&e.mode&1&&!(e.flags&128))a3(),Ac(),e.flags|=98560,s=!1;else if(s=Ff(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(je(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(je(317));s[co]=e}else Ac(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;$r(e),s=!1}else js!==null&&(K1(js),js=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Fn.current&1?yr===0&&(yr=3):kv())),e.updateQueue!==null&&(e.flags|=4),$r(e),null);case 4:return Ic(),V1(t,e),t===null&&hd(e.stateNode.containerInfo),$r(e),null;case 10:return dv(e.type._context),$r(e),null;case 17:return Ei(e.type)&&Bp(),$r(e),null;case 19:if(In(Fn),s=e.memoizedState,s===null)return $r(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Ah(s,!1);else{if(yr!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Kp(t),o!==null){for(e.flags|=128,Ah(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return _n(Fn,Fn.current&1|2),e.child}t=t.sibling}s.tail!==null&&tr()>kc&&(e.flags|=128,r=!0,Ah(s,!1),e.lanes=4194304)}else{if(!r)if(t=Kp(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Ah(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Cn)return $r(e),null}else 2*tr()-s.renderingStartTime>kc&&n!==1073741824&&(e.flags|=128,r=!0,Ah(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=tr(),e.sibling=null,n=Fn.current,_n(Fn,r?n&1|2:n&1),e):($r(e),null);case 22:case 23:return Tv(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Wi&1073741824&&($r(e),e.subtreeFlags&6&&(e.flags|=8192)):$r(e),null;case 24:return null;case 25:return null}throw Error(je(156,e.tag))}function _k(t,e){switch(lv(e),e.tag){case 1:return Ei(e.type)&&Bp(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ic(),In(Ai),In(ri),vv(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return gv(e),null;case 13:if(In(Fn),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(je(340));Ac()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return In(Fn),null;case 4:return Ic(),null;case 10:return dv(e.type._context),null;case 22:case 23:return Tv(),null;case 24:return null;default:return null}}var Vf=!1,Zr=!1,xk=typeof WeakSet=="function"?WeakSet:Set,qe=null;function ic(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Gn(t,e,r)}else n.current=null}function B1(t,e,n){try{n()}catch(r){Gn(t,e,r)}}var Tw=!1;function bk(t,e){if(N1=Fp,t=K4(),ov(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,c=0,g=t,v=null;t:for(;;){for(var m;g!==n||i!==0&&g.nodeType!==3||(a=o+i),g!==s||r!==0&&g.nodeType!==3||(l=o+r),g.nodeType===3&&(o+=g.nodeValue.length),(m=g.firstChild)!==null;)v=g,g=m;for(;;){if(g===t)break t;if(v===n&&++u===i&&(a=o),v===s&&++c===r&&(l=o),(m=g.nextSibling)!==null)break;g=v,v=g.parentNode}g=m}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(A1={focusedElem:t,selectionRange:n},Fp=!1,qe=e;qe!==null;)if(e=qe,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,qe=t;else for(;qe!==null;){e=qe;try{var S=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(S!==null){var A=S.memoizedProps,L=S.memoizedState,b=e.stateNode,k=b.getSnapshotBeforeUpdate(e.elementType===e.type?A:Ls(e.type,A),L);b.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var j=e.stateNode.containerInfo;j.nodeType===1?j.textContent="":j.nodeType===9&&j.documentElement&&j.removeChild(j.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(je(163))}}catch(U){Gn(e,e.return,U)}if(t=e.sibling,t!==null){t.return=e.return,qe=t;break}qe=e.return}return S=Tw,Tw=!1,S}function $h(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&B1(e,n,s)}i=i.next}while(i!==r)}}function Mm(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function z1(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function H3(t){var e=t.alternate;e!==null&&(t.alternate=null,H3(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[co],delete e[fd],delete e[T1],delete e[ik],delete e[sk])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function W3(t){return t.tag===5||t.tag===3||t.tag===4}function kw(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||W3(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function q1(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Vp));else if(r!==4&&(t=t.child,t!==null))for(q1(t,e,n),t=t.sibling;t!==null;)q1(t,e,n),t=t.sibling}function H1(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(H1(t,e,n),t=t.sibling;t!==null;)H1(t,e,n),t=t.sibling}var Rr=null,Rs=!1;function Ma(t,e,n){for(n=n.child;n!==null;)$3(t,e,n),n=n.sibling}function $3(t,e,n){if(po&&typeof po.onCommitFiberUnmount=="function")try{po.onCommitFiberUnmount(Pm,n)}catch{}switch(n.tag){case 5:Zr||ic(n,e);case 6:var r=Rr,i=Rs;Rr=null,Ma(t,e,n),Rr=r,Rs=i,Rr!==null&&(Rs?(t=Rr,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Rr.removeChild(n.stateNode));break;case 18:Rr!==null&&(Rs?(t=Rr,n=n.stateNode,t.nodeType===8?t0(t.parentNode,n):t.nodeType===1&&t0(t,n),ld(t)):t0(Rr,n.stateNode));break;case 4:r=Rr,i=Rs,Rr=n.stateNode.containerInfo,Rs=!0,Ma(t,e,n),Rr=r,Rs=i;break;case 0:case 11:case 14:case 15:if(!Zr&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&B1(n,e,o),i=i.next}while(i!==r)}Ma(t,e,n);break;case 1:if(!Zr&&(ic(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Gn(n,e,a)}Ma(t,e,n);break;case 21:Ma(t,e,n);break;case 22:n.mode&1?(Zr=(r=Zr)||n.memoizedState!==null,Ma(t,e,n),Zr=r):Ma(t,e,n);break;default:Ma(t,e,n)}}function Pw(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new xk),e.forEach(function(r){var i=Ck.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function ks(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Rr=a.stateNode,Rs=!1;break e;case 3:Rr=a.stateNode.containerInfo,Rs=!0;break e;case 4:Rr=a.stateNode.containerInfo,Rs=!0;break e}a=a.return}if(Rr===null)throw Error(je(160));$3(s,o,i),Rr=null,Rs=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){Gn(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)G3(e,t),e=e.sibling}function G3(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ks(e,t),oo(t),r&4){try{$h(3,t,t.return),Mm(3,t)}catch(A){Gn(t,t.return,A)}try{$h(5,t,t.return)}catch(A){Gn(t,t.return,A)}}break;case 1:ks(e,t),oo(t),r&512&&n!==null&&ic(n,n.return);break;case 5:if(ks(e,t),oo(t),r&512&&n!==null&&ic(n,n.return),t.flags&32){var i=t.stateNode;try{id(i,"")}catch(A){Gn(t,t.return,A)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&m4(i,s),p1(a,o);var u=p1(a,s);for(o=0;o<l.length;o+=2){var c=l[o],g=l[o+1];c==="style"?_4(i,g):c==="dangerouslySetInnerHTML"?y4(i,g):c==="children"?id(i,g):G2(i,c,g,u)}switch(a){case"input":u1(i,s);break;case"textarea":g4(i,s);break;case"select":var v=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var m=s.value;m!=null?lc(i,!!s.multiple,m,!1):v!==!!s.multiple&&(s.defaultValue!=null?lc(i,!!s.multiple,s.defaultValue,!0):lc(i,!!s.multiple,s.multiple?[]:"",!1))}i[fd]=s}catch(A){Gn(t,t.return,A)}}break;case 6:if(ks(e,t),oo(t),r&4){if(t.stateNode===null)throw Error(je(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(A){Gn(t,t.return,A)}}break;case 3:if(ks(e,t),oo(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ld(e.containerInfo)}catch(A){Gn(t,t.return,A)}break;case 4:ks(e,t),oo(t);break;case 13:ks(e,t),oo(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Ev=tr())),r&4&&Pw(t);break;case 22:if(c=n!==null&&n.memoizedState!==null,t.mode&1?(Zr=(u=Zr)||c,ks(e,t),Zr=u):ks(e,t),oo(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!c&&t.mode&1)for(qe=t,c=t.child;c!==null;){for(g=qe=c;qe!==null;){switch(v=qe,m=v.child,v.tag){case 0:case 11:case 14:case 15:$h(4,v,v.return);break;case 1:ic(v,v.return);var S=v.stateNode;if(typeof S.componentWillUnmount=="function"){r=v,n=v.return;try{e=r,S.props=e.memoizedProps,S.state=e.memoizedState,S.componentWillUnmount()}catch(A){Gn(r,n,A)}}break;case 5:ic(v,v.return);break;case 22:if(v.memoizedState!==null){Lw(g);continue}}m!==null?(m.return=v,qe=m):Lw(g)}c=c.sibling}e:for(c=null,g=t;;){if(g.tag===5){if(c===null){c=g;try{i=g.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=g.stateNode,l=g.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=w4("display",o))}catch(A){Gn(t,t.return,A)}}}else if(g.tag===6){if(c===null)try{g.stateNode.nodeValue=u?"":g.memoizedProps}catch(A){Gn(t,t.return,A)}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===t)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===t)break e;for(;g.sibling===null;){if(g.return===null||g.return===t)break e;c===g&&(c=null),g=g.return}c===g&&(c=null),g.sibling.return=g.return,g=g.sibling}}break;case 19:ks(e,t),oo(t),r&4&&Pw(t);break;case 21:break;default:ks(e,t),oo(t)}}function oo(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(W3(n)){var r=n;break e}n=n.return}throw Error(je(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(id(i,""),r.flags&=-33);var s=kw(t);H1(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=kw(t);q1(t,a,o);break;default:throw Error(je(161))}}catch(l){Gn(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Sk(t,e,n){qe=t,K3(t)}function K3(t,e,n){for(var r=(t.mode&1)!==0;qe!==null;){var i=qe,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Vf;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Zr;a=Vf;var u=Zr;if(Vf=o,(Zr=l)&&!u)for(qe=i;qe!==null;)o=qe,l=o.child,o.tag===22&&o.memoizedState!==null?Rw(i):l!==null?(l.return=o,qe=l):Rw(i);for(;s!==null;)qe=s,K3(s),s=s.sibling;qe=i,Vf=a,Zr=u}Cw(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,qe=s):Cw(t)}}function Cw(t){for(;qe!==null;){var e=qe;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Zr||Mm(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Zr)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Ls(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&mw(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}mw(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var g=c.dehydrated;g!==null&&ld(g)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(je(163))}Zr||e.flags&512&&z1(e)}catch(v){Gn(e,e.return,v)}}if(e===t){qe=null;break}if(n=e.sibling,n!==null){n.return=e.return,qe=n;break}qe=e.return}}function Lw(t){for(;qe!==null;){var e=qe;if(e===t){qe=null;break}var n=e.sibling;if(n!==null){n.return=e.return,qe=n;break}qe=e.return}}function Rw(t){for(;qe!==null;){var e=qe;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Mm(4,e)}catch(l){Gn(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Gn(e,i,l)}}var s=e.return;try{z1(e)}catch(l){Gn(e,s,l)}break;case 5:var o=e.return;try{z1(e)}catch(l){Gn(e,o,l)}}}catch(l){Gn(e,e.return,l)}if(e===t){qe=null;break}var a=e.sibling;if(a!==null){a.return=e.return,qe=a;break}qe=e.return}}var Nk=Math.ceil,Jp=da.ReactCurrentDispatcher,Nv=da.ReactCurrentOwner,vs=da.ReactCurrentBatchConfig,Kt=0,Ir=null,lr=null,Or=0,Wi=0,sc=xl(0),yr=0,wd=null,su=0,Um=0,Av=0,Gh=null,bi=null,Ev=0,kc=1/0,Bo=null,Xp=!1,W1=null,al=null,Bf=!1,Ja=null,Zp=0,Kh=0,$1=null,pp=-1,mp=0;function di(){return Kt&6?tr():pp!==-1?pp:pp=tr()}function ll(t){return t.mode&1?Kt&2&&Or!==0?Or&-Or:ak.transition!==null?(mp===0&&(mp=L4()),mp):(t=an,t!==0||(t=window.event,t=t===void 0?16:U4(t.type)),t):1}function Fs(t,e,n,r){if(50<Kh)throw Kh=0,$1=null,Error(je(185));Fd(t,n,r),(!(Kt&2)||t!==Ir)&&(t===Ir&&(!(Kt&2)&&(Um|=n),yr===4&&Wa(t,Or)),Ii(t,r),n===1&&Kt===0&&!(e.mode&1)&&(kc=tr()+500,Dm&&bl()))}function Ii(t,e){var n=t.callbackNode;aT(t,e);var r=Op(t,t===Ir?Or:0);if(r===0)n!==null&&z5(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&z5(n),e===1)t.tag===0?ok(jw.bind(null,t)):i3(jw.bind(null,t)),nk(function(){!(Kt&6)&&bl()}),n=null;else{switch(R4(r)){case 1:n=X2;break;case 4:n=P4;break;case 16:n=Dp;break;case 536870912:n=C4;break;default:n=Dp}n=n6(n,Y3.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Y3(t,e){if(pp=-1,mp=0,Kt&6)throw Error(je(327));var n=t.callbackNode;if(fc()&&t.callbackNode!==n)return null;var r=Op(t,t===Ir?Or:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=em(t,r);else{e=r;var i=Kt;Kt|=2;var s=J3();(Ir!==t||Or!==e)&&(Bo=null,kc=tr()+500,Xl(t,e));do try{Ik();break}catch(a){Q3(t,a)}while(!0);hv(),Jp.current=s,Kt=i,lr!==null?e=0:(Ir=null,Or=0,e=yr)}if(e!==0){if(e===2&&(i=w1(t),i!==0&&(r=i,e=G1(t,i))),e===1)throw n=wd,Xl(t,0),Wa(t,r),Ii(t,tr()),n;if(e===6)Wa(t,r);else{if(i=t.current.alternate,!(r&30)&&!Ak(i)&&(e=em(t,r),e===2&&(s=w1(t),s!==0&&(r=s,e=G1(t,s))),e===1))throw n=wd,Xl(t,0),Wa(t,r),Ii(t,tr()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(je(345));case 2:ql(t,bi,Bo);break;case 3:if(Wa(t,r),(r&130023424)===r&&(e=Ev+500-tr(),10<e)){if(Op(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){di(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=I1(ql.bind(null,t,bi,Bo),e);break}ql(t,bi,Bo);break;case 4:if(Wa(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Os(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=tr()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Nk(r/1960))-r,10<r){t.timeoutHandle=I1(ql.bind(null,t,bi,Bo),r);break}ql(t,bi,Bo);break;case 5:ql(t,bi,Bo);break;default:throw Error(je(329))}}}return Ii(t,tr()),t.callbackNode===n?Y3.bind(null,t):null}function G1(t,e){var n=Gh;return t.current.memoizedState.isDehydrated&&(Xl(t,e).flags|=256),t=em(t,e),t!==2&&(e=bi,bi=n,e!==null&&K1(e)),t}function K1(t){bi===null?bi=t:bi.push.apply(bi,t)}function Ak(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Us(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Wa(t,e){for(e&=~Av,e&=~Um,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Os(e),r=1<<n;t[n]=-1,e&=~r}}function jw(t){if(Kt&6)throw Error(je(327));fc();var e=Op(t,0);if(!(e&1))return Ii(t,tr()),null;var n=em(t,e);if(t.tag!==0&&n===2){var r=w1(t);r!==0&&(e=r,n=G1(t,r))}if(n===1)throw n=wd,Xl(t,0),Wa(t,e),Ii(t,tr()),n;if(n===6)throw Error(je(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ql(t,bi,Bo),Ii(t,tr()),null}function Iv(t,e){var n=Kt;Kt|=1;try{return t(e)}finally{Kt=n,Kt===0&&(kc=tr()+500,Dm&&bl())}}function ou(t){Ja!==null&&Ja.tag===0&&!(Kt&6)&&fc();var e=Kt;Kt|=1;var n=vs.transition,r=an;try{if(vs.transition=null,an=1,t)return t()}finally{an=r,vs.transition=n,Kt=e,!(Kt&6)&&bl()}}function Tv(){Wi=sc.current,In(sc)}function Xl(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,tk(n)),lr!==null)for(n=lr.return;n!==null;){var r=n;switch(lv(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Bp();break;case 3:Ic(),In(Ai),In(ri),vv();break;case 5:gv(r);break;case 4:Ic();break;case 13:In(Fn);break;case 19:In(Fn);break;case 10:dv(r.type._context);break;case 22:case 23:Tv()}n=n.return}if(Ir=t,lr=t=ul(t.current,null),Or=Wi=e,yr=0,wd=null,Av=Um=su=0,bi=Gh=null,Kl!==null){for(e=0;e<Kl.length;e++)if(n=Kl[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Kl=null}return t}function Q3(t,e){do{var n=lr;try{if(hv(),hp.current=Qp,Yp){for(var r=Mn.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Yp=!1}if(iu=0,Ar=vr=Mn=null,Wh=!1,gd=0,Nv.current=null,n===null||n.return===null){yr=1,wd=e,lr=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=Or,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=a,g=c.tag;if(!(c.mode&1)&&(g===0||g===11||g===15)){var v=c.alternate;v?(c.updateQueue=v.updateQueue,c.memoizedState=v.memoizedState,c.lanes=v.lanes):(c.updateQueue=null,c.memoizedState=null)}var m=xw(o);if(m!==null){m.flags&=-257,bw(m,o,a,s,e),m.mode&1&&_w(s,u,e),e=m,l=u;var S=e.updateQueue;if(S===null){var A=new Set;A.add(l),e.updateQueue=A}else S.add(l);break e}else{if(!(e&1)){_w(s,u,e),kv();break e}l=Error(je(426))}}else if(Cn&&a.mode&1){var L=xw(o);if(L!==null){!(L.flags&65536)&&(L.flags|=256),bw(L,o,a,s,e),uv(Tc(l,a));break e}}s=l=Tc(l,a),yr!==4&&(yr=2),Gh===null?Gh=[s]:Gh.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var b=R3(s,l,e);pw(s,b);break e;case 1:a=l;var k=s.type,j=s.stateNode;if(!(s.flags&128)&&(typeof k.getDerivedStateFromError=="function"||j!==null&&typeof j.componentDidCatch=="function"&&(al===null||!al.has(j)))){s.flags|=65536,e&=-e,s.lanes|=e;var U=j3(s,a,e);pw(s,U);break e}}s=s.return}while(s!==null)}Z3(n)}catch(q){e=q,lr===n&&n!==null&&(lr=n=n.return);continue}break}while(!0)}function J3(){var t=Jp.current;return Jp.current=Qp,t===null?Qp:t}function kv(){(yr===0||yr===3||yr===2)&&(yr=4),Ir===null||!(su&268435455)&&!(Um&268435455)||Wa(Ir,Or)}function em(t,e){var n=Kt;Kt|=2;var r=J3();(Ir!==t||Or!==e)&&(Bo=null,Xl(t,e));do try{Ek();break}catch(i){Q3(t,i)}while(!0);if(hv(),Kt=n,Jp.current=r,lr!==null)throw Error(je(261));return Ir=null,Or=0,yr}function Ek(){for(;lr!==null;)X3(lr)}function Ik(){for(;lr!==null&&!XI();)X3(lr)}function X3(t){var e=t6(t.alternate,t,Wi);t.memoizedProps=t.pendingProps,e===null?Z3(t):lr=e,Nv.current=null}function Z3(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=_k(n,e),n!==null){n.flags&=32767,lr=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{yr=6,lr=null;return}}else if(n=wk(n,e,Wi),n!==null){lr=n;return}if(e=e.sibling,e!==null){lr=e;return}lr=e=t}while(e!==null);yr===0&&(yr=5)}function ql(t,e,n){var r=an,i=vs.transition;try{vs.transition=null,an=1,Tk(t,e,n,r)}finally{vs.transition=i,an=r}return null}function Tk(t,e,n,r){do fc();while(Ja!==null);if(Kt&6)throw Error(je(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(je(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(lT(t,s),t===Ir&&(lr=Ir=null,Or=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Bf||(Bf=!0,n6(Dp,function(){return fc(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=vs.transition,vs.transition=null;var o=an;an=1;var a=Kt;Kt|=4,Nv.current=null,bk(t,n),G3(n,t),KT(A1),Fp=!!N1,A1=N1=null,t.current=n,Sk(n),ZI(),Kt=a,an=o,vs.transition=s}else t.current=n;if(Bf&&(Bf=!1,Ja=t,Zp=i),s=t.pendingLanes,s===0&&(al=null),nT(n.stateNode),Ii(t,tr()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Xp)throw Xp=!1,t=W1,W1=null,t;return Zp&1&&t.tag!==0&&fc(),s=t.pendingLanes,s&1?t===$1?Kh++:(Kh=0,$1=t):Kh=0,bl(),null}function fc(){if(Ja!==null){var t=R4(Zp),e=vs.transition,n=an;try{if(vs.transition=null,an=16>t?16:t,Ja===null)var r=!1;else{if(t=Ja,Ja=null,Zp=0,Kt&6)throw Error(je(331));var i=Kt;for(Kt|=4,qe=t.current;qe!==null;){var s=qe,o=s.child;if(qe.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(qe=u;qe!==null;){var c=qe;switch(c.tag){case 0:case 11:case 15:$h(8,c,s)}var g=c.child;if(g!==null)g.return=c,qe=g;else for(;qe!==null;){c=qe;var v=c.sibling,m=c.return;if(H3(c),c===u){qe=null;break}if(v!==null){v.return=m,qe=v;break}qe=m}}}var S=s.alternate;if(S!==null){var A=S.child;if(A!==null){S.child=null;do{var L=A.sibling;A.sibling=null,A=L}while(A!==null)}}qe=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,qe=o;else e:for(;qe!==null;){if(s=qe,s.flags&2048)switch(s.tag){case 0:case 11:case 15:$h(9,s,s.return)}var b=s.sibling;if(b!==null){b.return=s.return,qe=b;break e}qe=s.return}}var k=t.current;for(qe=k;qe!==null;){o=qe;var j=o.child;if(o.subtreeFlags&2064&&j!==null)j.return=o,qe=j;else e:for(o=k;qe!==null;){if(a=qe,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Mm(9,a)}}catch(q){Gn(a,a.return,q)}if(a===o){qe=null;break e}var U=a.sibling;if(U!==null){U.return=a.return,qe=U;break e}qe=a.return}}if(Kt=i,bl(),po&&typeof po.onPostCommitFiberRoot=="function")try{po.onPostCommitFiberRoot(Pm,t)}catch{}r=!0}return r}finally{an=n,vs.transition=e}}return!1}function Dw(t,e,n){e=Tc(n,e),e=R3(t,e,1),t=ol(t,e,1),e=di(),t!==null&&(Fd(t,1,e),Ii(t,e))}function Gn(t,e,n){if(t.tag===3)Dw(t,t,n);else for(;e!==null;){if(e.tag===3){Dw(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(al===null||!al.has(r))){t=Tc(n,t),t=j3(e,t,1),e=ol(e,t,1),t=di(),e!==null&&(Fd(e,1,t),Ii(e,t));break}}e=e.return}}function kk(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=di(),t.pingedLanes|=t.suspendedLanes&n,Ir===t&&(Or&n)===n&&(yr===4||yr===3&&(Or&130023424)===Or&&500>tr()-Ev?Xl(t,0):Av|=n),Ii(t,e)}function e6(t,e){e===0&&(t.mode&1?(e=Cf,Cf<<=1,!(Cf&130023424)&&(Cf=4194304)):e=1);var n=di();t=sa(t,e),t!==null&&(Fd(t,e,n),Ii(t,n))}function Pk(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),e6(t,n)}function Ck(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(je(314))}r!==null&&r.delete(e),e6(t,n)}var t6;t6=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ai.current)Ni=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Ni=!1,yk(t,e,n);Ni=!!(t.flags&131072)}else Ni=!1,Cn&&e.flags&1048576&&s3(e,Hp,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;fp(t,e),t=e.pendingProps;var i=Nc(e,ri.current);dc(e,n),i=wv(null,e,r,t,i,n);var s=_v();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ei(r)?(s=!0,zp(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,pv(e),i.updater=Fm,e.stateNode=i,i._reactInternals=e,j1(e,r,t,n),e=F1(null,e,r,!0,s,n)):(e.tag=0,Cn&&s&&av(e),hi(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(fp(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=Rk(r),t=Ls(r,t),i){case 0:e=O1(null,e,r,t,n);break e;case 1:e=Aw(null,e,r,t,n);break e;case 11:e=Sw(null,e,r,t,n);break e;case 14:e=Nw(null,e,r,Ls(r.type,t),n);break e}throw Error(je(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ls(r,i),O1(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ls(r,i),Aw(t,e,r,i,n);case 3:e:{if(M3(e),t===null)throw Error(je(387));r=e.pendingProps,s=e.memoizedState,i=s.element,h3(t,e),Gp(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Tc(Error(je(423)),e),e=Ew(t,e,r,n,i);break e}else if(r!==i){i=Tc(Error(je(424)),e),e=Ew(t,e,r,n,i);break e}else for($i=sl(e.stateNode.containerInfo.firstChild),Qi=e,Cn=!0,js=null,n=u3(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ac(),r===i){e=oa(t,e,n);break e}hi(t,e,r,n)}e=e.child}return e;case 5:return d3(e),t===null&&C1(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,E1(r,i)?o=null:s!==null&&E1(r,s)&&(e.flags|=32),F3(t,e),hi(t,e,o,n),e.child;case 6:return t===null&&C1(e),null;case 13:return U3(t,e,n);case 4:return mv(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Ec(e,null,r,n):hi(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ls(r,i),Sw(t,e,r,i,n);case 7:return hi(t,e,e.pendingProps,n),e.child;case 8:return hi(t,e,e.pendingProps.children,n),e.child;case 12:return hi(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,_n(Wp,r._currentValue),r._currentValue=o,s!==null)if(Us(s.value,o)){if(s.children===i.children&&!Ai.current){e=oa(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Xo(-1,n&-n),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),L1(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(je(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),L1(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}hi(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,dc(e,n),i=ys(i),r=r(i),e.flags|=1,hi(t,e,r,n),e.child;case 14:return r=e.type,i=Ls(r,e.pendingProps),i=Ls(r.type,i),Nw(t,e,r,i,n);case 15:return D3(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ls(r,i),fp(t,e),e.tag=1,Ei(r)?(t=!0,zp(e)):t=!1,dc(e,n),L3(e,r,i),j1(e,r,i,n),F1(null,e,r,!0,t,n);case 19:return V3(t,e,n);case 22:return O3(t,e,n)}throw Error(je(156,e.tag))};function n6(t,e){return k4(t,e)}function Lk(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function gs(t,e,n,r){return new Lk(t,e,n,r)}function Pv(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Rk(t){if(typeof t=="function")return Pv(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Y2)return 11;if(t===Q2)return 14}return 2}function ul(t,e){var n=t.alternate;return n===null?(n=gs(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function gp(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")Pv(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Yu:return Zl(n.children,i,s,e);case K2:o=8,i|=8;break;case i1:return t=gs(12,n,e,i|2),t.elementType=i1,t.lanes=s,t;case s1:return t=gs(13,n,e,i),t.elementType=s1,t.lanes=s,t;case o1:return t=gs(19,n,e,i),t.elementType=o1,t.lanes=s,t;case d4:return Vm(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case c4:o=10;break e;case h4:o=9;break e;case Y2:o=11;break e;case Q2:o=14;break e;case za:o=16,r=null;break e}throw Error(je(130,t==null?t:typeof t,""))}return e=gs(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Zl(t,e,n,r){return t=gs(7,t,r,e),t.lanes=n,t}function Vm(t,e,n,r){return t=gs(22,t,r,e),t.elementType=d4,t.lanes=n,t.stateNode={isHidden:!1},t}function u0(t,e,n){return t=gs(6,t,null,e),t.lanes=n,t}function c0(t,e,n){return e=gs(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function jk(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Hg(0),this.expirationTimes=Hg(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Hg(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Cv(t,e,n,r,i,s,o,a,l){return t=new jk(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=gs(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},pv(s),t}function Dk(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ku,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function r6(t){if(!t)return pl;t=t._reactInternals;e:{if(yu(t)!==t||t.tag!==1)throw Error(je(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ei(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(je(171))}if(t.tag===1){var n=t.type;if(Ei(n))return r3(t,n,e)}return e}function i6(t,e,n,r,i,s,o,a,l){return t=Cv(n,r,!0,t,i,s,o,a,l),t.context=r6(null),n=t.current,r=di(),i=ll(n),s=Xo(r,i),s.callback=e??null,ol(n,s,i),t.current.lanes=i,Fd(t,i,r),Ii(t,r),t}function Bm(t,e,n,r){var i=e.current,s=di(),o=ll(i);return n=r6(n),e.context===null?e.context=n:e.pendingContext=n,e=Xo(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=ol(i,e,o),t!==null&&(Fs(t,i,o,s),cp(t,i,o)),o}function tm(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Ow(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Lv(t,e){Ow(t,e),(t=t.alternate)&&Ow(t,e)}function Ok(){return null}var s6=typeof reportError=="function"?reportError:function(t){console.error(t)};function Rv(t){this._internalRoot=t}zm.prototype.render=Rv.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(je(409));Bm(t,e,null,null)};zm.prototype.unmount=Rv.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ou(function(){Bm(null,t,null,null)}),e[ia]=null}};function zm(t){this._internalRoot=t}zm.prototype.unstable_scheduleHydration=function(t){if(t){var e=O4();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ha.length&&e!==0&&e<Ha[n].priority;n++);Ha.splice(n,0,t),n===0&&M4(t)}};function jv(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function qm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Fw(){}function Fk(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=tm(o);s.call(u)}}var o=i6(e,r,t,0,null,!1,!1,"",Fw);return t._reactRootContainer=o,t[ia]=o.current,hd(t.nodeType===8?t.parentNode:t),ou(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var u=tm(l);a.call(u)}}var l=Cv(t,0,!1,null,null,!1,!1,"",Fw);return t._reactRootContainer=l,t[ia]=l.current,hd(t.nodeType===8?t.parentNode:t),ou(function(){Bm(e,l,n,r)}),l}function Hm(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=tm(o);a.call(l)}}Bm(e,o,t,i)}else o=Fk(n,e,t,i,r);return tm(o)}j4=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Lh(e.pendingLanes);n!==0&&(Z2(e,n|1),Ii(e,tr()),!(Kt&6)&&(kc=tr()+500,bl()))}break;case 13:ou(function(){var r=sa(t,1);if(r!==null){var i=di();Fs(r,t,1,i)}}),Lv(t,1)}};ev=function(t){if(t.tag===13){var e=sa(t,134217728);if(e!==null){var n=di();Fs(e,t,134217728,n)}Lv(t,134217728)}};D4=function(t){if(t.tag===13){var e=ll(t),n=sa(t,e);if(n!==null){var r=di();Fs(n,t,e,r)}Lv(t,e)}};O4=function(){return an};F4=function(t,e){var n=an;try{return an=t,e()}finally{an=n}};g1=function(t,e,n){switch(e){case"input":if(u1(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=jm(r);if(!i)throw Error(je(90));p4(r),u1(r,i)}}}break;case"textarea":g4(t,n);break;case"select":e=n.value,e!=null&&lc(t,!!n.multiple,e,!1)}};S4=Iv;N4=ou;var Mk={usingClientEntryPoint:!1,Events:[Ud,Zu,jm,x4,b4,Iv]},Eh={findFiberByHostInstance:Gl,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Uk={bundleType:Eh.bundleType,version:Eh.version,rendererPackageName:Eh.rendererPackageName,rendererConfig:Eh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:da.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=I4(t),t===null?null:t.stateNode},findFiberByHostInstance:Eh.findFiberByHostInstance||Ok,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var zf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!zf.isDisabled&&zf.supportsFiber)try{Pm=zf.inject(Uk),po=zf}catch{}}Xi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Mk;Xi.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!jv(e))throw Error(je(200));return Dk(t,e,null,n)};Xi.createRoot=function(t,e){if(!jv(t))throw Error(je(299));var n=!1,r="",i=s6;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Cv(t,1,!1,null,null,n,!1,r,i),t[ia]=e.current,hd(t.nodeType===8?t.parentNode:t),new Rv(e)};Xi.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(je(188)):(t=Object.keys(t).join(","),Error(je(268,t)));return t=I4(e),t=t===null?null:t.stateNode,t};Xi.flushSync=function(t){return ou(t)};Xi.hydrate=function(t,e,n){if(!qm(e))throw Error(je(200));return Hm(null,t,e,!0,n)};Xi.hydrateRoot=function(t,e,n){if(!jv(t))throw Error(je(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=s6;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=i6(e,null,t,1,n??null,i,!1,s,o),t[ia]=e.current,hd(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new zm(e)};Xi.render=function(t,e,n){if(!qm(e))throw Error(je(200));return Hm(null,t,e,!1,n)};Xi.unmountComponentAtNode=function(t){if(!qm(t))throw Error(je(40));return t._reactRootContainer?(ou(function(){Hm(null,null,t,!1,function(){t._reactRootContainer=null,t[ia]=null})}),!0):!1};Xi.unstable_batchedUpdates=Iv;Xi.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!qm(n))throw Error(je(200));if(t==null||t._reactInternals===void 0)throw Error(je(38));return Hm(t,e,n,!1,r)};Xi.version="18.3.1-next-f1338f8080-20240426";function o6(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(o6)}catch(t){console.error(t)}}o6(),o4.exports=Xi;var Vk=o4.exports,a6,Mw=Vk;a6=Mw.createRoot,Mw.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _d(){return _d=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},_d.apply(this,arguments)}var Xa;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Xa||(Xa={}));const Uw="popstate";function Bk(t){t===void 0&&(t={});function e(i,s){let{pathname:o="/",search:a="",hash:l=""}=wu(i.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),Y1("",{pathname:o,search:a,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(i,s){let o=i.document.querySelector("base"),a="";if(o&&o.getAttribute("href")){let l=i.location.href,u=l.indexOf("#");a=u===-1?l:l.slice(0,u)}return a+"#"+(typeof s=="string"?s:nm(s))}function r(i,s){Wm(i.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(s)+")")}return qk(e,n,r,t)}function sr(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Wm(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function zk(){return Math.random().toString(36).substr(2,8)}function Vw(t,e){return{usr:t.state,key:t.key,idx:e}}function Y1(t,e,n,r){return n===void 0&&(n=null),_d({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?wu(e):e,{state:n,key:e&&e.key||r||zk()})}function nm(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function wu(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function qk(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=Xa.Pop,l=null,u=c();u==null&&(u=0,o.replaceState(_d({},o.state,{idx:u}),""));function c(){return(o.state||{idx:null}).idx}function g(){a=Xa.Pop;let L=c(),b=L==null?null:L-u;u=L,l&&l({action:a,location:A.location,delta:b})}function v(L,b){a=Xa.Push;let k=Y1(A.location,L,b);n&&n(k,L),u=c()+1;let j=Vw(k,u),U=A.createHref(k);try{o.pushState(j,"",U)}catch(q){if(q instanceof DOMException&&q.name==="DataCloneError")throw q;i.location.assign(U)}s&&l&&l({action:a,location:A.location,delta:1})}function m(L,b){a=Xa.Replace;let k=Y1(A.location,L,b);n&&n(k,L),u=c();let j=Vw(k,u),U=A.createHref(k);o.replaceState(j,"",U),s&&l&&l({action:a,location:A.location,delta:0})}function S(L){let b=i.location.origin!=="null"?i.location.origin:i.location.href,k=typeof L=="string"?L:nm(L);return k=k.replace(/ $/,"%20"),sr(b,"No window.location.(origin|href) available to create URL for href: "+k),new URL(k,b)}let A={get action(){return a},get location(){return t(i,o)},listen(L){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(Uw,g),l=L,()=>{i.removeEventListener(Uw,g),l=null}},createHref(L){return e(i,L)},createURL:S,encodeLocation(L){let b=S(L);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:v,replace:m,go(L){return o.go(L)}};return A}var Bw;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Bw||(Bw={}));function Hk(t,e,n){return n===void 0&&(n="/"),Wk(t,e,n)}function Wk(t,e,n,r){let i=typeof e=="string"?wu(e):e,s=Dv(i.pathname||"/",n);if(s==null)return null;let o=l6(t);$k(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let u=i8(s);a=t8(o[l],u)}return a}function l6(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(sr(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let u=cl([r,l.relativePath]),c=n.concat(l);s.children&&s.children.length>0&&(sr(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),l6(s.children,e,c,u)),!(s.path==null&&!s.index)&&e.push({path:u,score:Zk(u,s.index),routesMeta:c})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of u6(s.path))i(s,o,l)}),e}function u6(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=u6(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function $k(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:e8(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const Gk=/^:[\w-]+$/,Kk=3,Yk=2,Qk=1,Jk=10,Xk=-2,zw=t=>t==="*";function Zk(t,e){let n=t.split("/"),r=n.length;return n.some(zw)&&(r+=Xk),e&&(r+=Yk),n.filter(i=>!zw(i)).reduce((i,s)=>i+(Gk.test(s)?Kk:s===""?Qk:Jk),r)}function e8(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function t8(t,e,n){let{routesMeta:r}=t,i={},s="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],u=a===r.length-1,c=s==="/"?e:e.slice(s.length)||"/",g=n8({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},c),v=l.route;if(!g)return null;Object.assign(i,g.params),o.push({params:i,pathname:cl([s,g.pathname]),pathnameBase:u8(cl([s,g.pathnameBase])),route:v}),g.pathnameBase!=="/"&&(s=cl([s,g.pathnameBase]))}return o}function n8(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=r8(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((u,c,g)=>{let{paramName:v,isOptional:m}=c;if(v==="*"){let A=a[g]||"";o=s.slice(0,s.length-A.length).replace(/(.)\/+$/,"$1")}const S=a[g];return m&&!S?u[v]=void 0:u[v]=(S||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:o,pattern:t}}function r8(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Wm(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function i8(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Wm(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Dv(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const s8=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,o8=t=>s8.test(t);function a8(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?wu(t):t,s;if(n)if(o8(n))s=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),Wm(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+n))}n.startsWith("/")?s=qw(n.substring(1),"/"):s=qw(n,e)}else s=e;return{pathname:s,search:c8(r),hash:h8(i)}}function qw(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function h0(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function l8(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Ov(t,e){let n=l8(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Fv(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=wu(t):(i=_d({},t),sr(!i.pathname||!i.pathname.includes("?"),h0("?","pathname","search",i)),sr(!i.pathname||!i.pathname.includes("#"),h0("#","pathname","hash",i)),sr(!i.search||!i.search.includes("#"),h0("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let g=e.length-1;if(!r&&o.startsWith("..")){let v=o.split("/");for(;v[0]==="..";)v.shift(),g-=1;i.pathname=v.join("/")}a=g>=0?e[g]:"/"}let l=a8(i,a),u=o&&o!=="/"&&o.endsWith("/"),c=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||c)&&(l.pathname+="/"),l}const cl=t=>t.join("/").replace(/\/\/+/g,"/"),u8=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),c8=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,h8=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function d8(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const c6=["post","put","patch","delete"];new Set(c6);const f8=["get",...c6];new Set(f8);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function xd(){return xd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},xd.apply(this,arguments)}const Mv=ue.createContext(null),p8=ue.createContext(null),Sl=ue.createContext(null),$m=ue.createContext(null),fa=ue.createContext({outlet:null,matches:[],isDataRoute:!1}),h6=ue.createContext(null);function m8(t,e){let{relative:n}=e===void 0?{}:e;qc()||sr(!1);let{basename:r,navigator:i}=ue.useContext(Sl),{hash:s,pathname:o,search:a}=p6(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:cl([r,o])),i.createHref({pathname:l,search:a,hash:s})}function qc(){return ue.useContext($m)!=null}function Hc(){return qc()||sr(!1),ue.useContext($m).location}function d6(t){ue.useContext(Sl).static||ue.useLayoutEffect(t)}function pa(){let{isDataRoute:t}=ue.useContext(fa);return t?T8():g8()}function g8(){qc()||sr(!1);let t=ue.useContext(Mv),{basename:e,future:n,navigator:r}=ue.useContext(Sl),{matches:i}=ue.useContext(fa),{pathname:s}=Hc(),o=JSON.stringify(Ov(i,n.v7_relativeSplatPath)),a=ue.useRef(!1);return d6(()=>{a.current=!0}),ue.useCallback(function(u,c){if(c===void 0&&(c={}),!a.current)return;if(typeof u=="number"){r.go(u);return}let g=Fv(u,JSON.parse(o),s,c.relative==="path");t==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:cl([e,g.pathname])),(c.replace?r.replace:r.push)(g,c.state,c)},[e,r,o,s,t])}function f6(){let{matches:t}=ue.useContext(fa),e=t[t.length-1];return e?e.params:{}}function p6(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=ue.useContext(Sl),{matches:i}=ue.useContext(fa),{pathname:s}=Hc(),o=JSON.stringify(Ov(i,r.v7_relativeSplatPath));return ue.useMemo(()=>Fv(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function v8(t,e){return y8(t,e)}function y8(t,e,n,r){qc()||sr(!1);let{navigator:i}=ue.useContext(Sl),{matches:s}=ue.useContext(fa),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let u=Hc(),c;if(e){var g;let L=typeof e=="string"?wu(e):e;l==="/"||(g=L.pathname)!=null&&g.startsWith(l)||sr(!1),c=L}else c=u;let v=c.pathname||"/",m=v;if(l!=="/"){let L=l.replace(/^\//,"").split("/");m="/"+v.replace(/^\//,"").split("/").slice(L.length).join("/")}let S=Hk(t,{pathname:m}),A=S8(S&&S.map(L=>Object.assign({},L,{params:Object.assign({},a,L.params),pathname:cl([l,i.encodeLocation?i.encodeLocation(L.pathname).pathname:L.pathname]),pathnameBase:L.pathnameBase==="/"?l:cl([l,i.encodeLocation?i.encodeLocation(L.pathnameBase).pathname:L.pathnameBase])})),s,n,r);return e&&A?ue.createElement($m.Provider,{value:{location:xd({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:Xa.Pop}},A):A}function w8(){let t=I8(),e=d8(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return ue.createElement(ue.Fragment,null,ue.createElement("h2",null,"Unexpected Application Error!"),ue.createElement("h3",{style:{fontStyle:"italic"}},e),n?ue.createElement("pre",{style:i},n):null,null)}const _8=ue.createElement(w8,null);class x8 extends ue.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?ue.createElement(fa.Provider,{value:this.props.routeContext},ue.createElement(h6.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function b8(t){let{routeContext:e,match:n,children:r}=t,i=ue.useContext(Mv);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),ue.createElement(fa.Provider,{value:e},r)}function S8(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let c=o.findIndex(g=>g.route.id&&(a==null?void 0:a[g.route.id])!==void 0);c>=0||sr(!1),o=o.slice(0,Math.min(o.length,c+1))}let l=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let c=0;c<o.length;c++){let g=o[c];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(u=c),g.route.id){let{loaderData:v,errors:m}=n,S=g.route.loader&&v[g.route.id]===void 0&&(!m||m[g.route.id]===void 0);if(g.route.lazy||S){l=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((c,g,v)=>{let m,S=!1,A=null,L=null;n&&(m=a&&g.route.id?a[g.route.id]:void 0,A=g.route.errorElement||_8,l&&(u<0&&v===0?(k8("route-fallback"),S=!0,L=null):u===v&&(S=!0,L=g.route.hydrateFallbackElement||null)));let b=e.concat(o.slice(0,v+1)),k=()=>{let j;return m?j=A:S?j=L:g.route.Component?j=ue.createElement(g.route.Component,null):g.route.element?j=g.route.element:j=c,ue.createElement(b8,{match:g,routeContext:{outlet:c,matches:b,isDataRoute:n!=null},children:j})};return n&&(g.route.ErrorBoundary||g.route.errorElement||v===0)?ue.createElement(x8,{location:n.location,revalidation:n.revalidation,component:A,error:m,children:k(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):k()},null)}var m6=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(m6||{}),g6=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(g6||{});function N8(t){let e=ue.useContext(Mv);return e||sr(!1),e}function A8(t){let e=ue.useContext(p8);return e||sr(!1),e}function E8(t){let e=ue.useContext(fa);return e||sr(!1),e}function v6(t){let e=E8(),n=e.matches[e.matches.length-1];return n.route.id||sr(!1),n.route.id}function I8(){var t;let e=ue.useContext(h6),n=A8(),r=v6();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function T8(){let{router:t}=N8(m6.UseNavigateStable),e=v6(g6.UseNavigateStable),n=ue.useRef(!1);return d6(()=>{n.current=!0}),ue.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,xd({fromRouteId:e},s)))},[t,e])}const Hw={};function k8(t,e,n){Hw[t]||(Hw[t]=!0)}function P8(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function C8(t){let{to:e,replace:n,state:r,relative:i}=t;qc()||sr(!1);let{future:s,static:o}=ue.useContext(Sl),{matches:a}=ue.useContext(fa),{pathname:l}=Hc(),u=pa(),c=Fv(e,Ov(a,s.v7_relativeSplatPath),l,i==="path"),g=JSON.stringify(c);return ue.useEffect(()=>u(JSON.parse(g),{replace:n,state:r,relative:i}),[u,g,i,n,r]),null}function Sr(t){sr(!1)}function L8(t){let{basename:e="/",children:n=null,location:r,navigationType:i=Xa.Pop,navigator:s,static:o=!1,future:a}=t;qc()&&sr(!1);let l=e.replace(/^\/*/,"/"),u=ue.useMemo(()=>({basename:l,navigator:s,static:o,future:xd({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof r=="string"&&(r=wu(r));let{pathname:c="/",search:g="",hash:v="",state:m=null,key:S="default"}=r,A=ue.useMemo(()=>{let L=Dv(c,l);return L==null?null:{location:{pathname:L,search:g,hash:v,state:m,key:S},navigationType:i}},[l,c,g,v,m,S,i]);return A==null?null:ue.createElement(Sl.Provider,{value:u},ue.createElement($m.Provider,{children:n,value:A}))}function R8(t){let{children:e,location:n}=t;return v8(Q1(e),n)}new Promise(()=>{});function Q1(t,e){e===void 0&&(e=[]);let n=[];return ue.Children.forEach(t,(r,i)=>{if(!ue.isValidElement(r))return;let s=[...e,i];if(r.type===ue.Fragment){n.push.apply(n,Q1(r.props.children,s));return}r.type!==Sr&&sr(!1),!r.props.index||!r.props.children||sr(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Q1(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function J1(){return J1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},J1.apply(this,arguments)}function j8(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function D8(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function O8(t,e){return t.button===0&&(!e||e==="_self")&&!D8(t)}const F8=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],M8="6";try{window.__reactRouterVersion=M8}catch{}const U8="startTransition",Ww=kI[U8];function V8(t){let{basename:e,children:n,future:r,window:i}=t,s=ue.useRef();s.current==null&&(s.current=Bk({window:i,v5Compat:!0}));let o=s.current,[a,l]=ue.useState({action:o.action,location:o.location}),{v7_startTransition:u}=r||{},c=ue.useCallback(g=>{u&&Ww?Ww(()=>l(g)):l(g)},[l,u]);return ue.useLayoutEffect(()=>o.listen(c),[o,c]),ue.useEffect(()=>P8(r),[r]),ue.createElement(L8,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const B8=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",z8=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,$w=ue.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:l,to:u,preventScrollReset:c,viewTransition:g}=e,v=j8(e,F8),{basename:m}=ue.useContext(Sl),S,A=!1;if(typeof u=="string"&&z8.test(u)&&(S=u,B8))try{let j=new URL(window.location.href),U=u.startsWith("//")?new URL(j.protocol+u):new URL(u),q=Dv(U.pathname,m);U.origin===j.origin&&q!=null?u=q+U.search+U.hash:A=!0}catch{}let L=m8(u,{relative:i}),b=q8(u,{replace:o,state:a,target:l,preventScrollReset:c,relative:i,viewTransition:g});function k(j){r&&r(j),j.defaultPrevented||b(j)}return ue.createElement("a",J1({},v,{href:S||L,onClick:A||s?r:k,ref:n,target:l}))});var Gw;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Gw||(Gw={}));var Kw;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Kw||(Kw={}));function q8(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,viewTransition:a}=e===void 0?{}:e,l=pa(),u=Hc(),c=p6(t,{relative:o});return ue.useCallback(g=>{if(O8(g,n)){g.preventDefault();let v=r!==void 0?r:nm(u)===nm(c);l(t,{replace:v,state:i,preventScrollReset:s,relative:o,viewTransition:a})}},[u,l,c,r,i,n,t,s,o,a])}var Yw={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y6=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},H8=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},w6={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,u=l?t[i+2]:0,c=s>>2,g=(s&3)<<4|a>>4;let v=(a&15)<<2|u>>6,m=u&63;l||(m=64,o||(v=64)),r.push(n[c],n[g],n[v],n[m])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(y6(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):H8(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const u=i<t.length?n[t.charAt(i)]:64;++i;const g=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||u==null||g==null)throw new W8;const v=s<<2|a>>4;if(r.push(v),u!==64){const m=a<<4&240|u>>2;if(r.push(m),g!==64){const S=u<<6&192|g;r.push(S)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class W8 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const $8=function(t){const e=y6(t);return w6.encodeByteArray(e,!0)},rm=function(t){return $8(t).replace(/\./g,"")},_6=function(t){try{return w6.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G8(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K8=()=>G8().__FIREBASE_DEFAULTS__,Y8=()=>{if(typeof process>"u"||typeof Yw>"u")return;const t=Yw.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Q8=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&_6(t[1]);return e&&JSON.parse(e)},Gm=()=>{try{return K8()||Y8()||Q8()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},x6=t=>{var e,n;return(n=(e=Gm())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},b6=t=>{const e=x6(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},S6=()=>{var t;return(t=Gm())===null||t===void 0?void 0:t.config},N6=t=>{var e;return(e=Gm())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J8{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A6(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[rm(JSON.stringify(n)),rm(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ii(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function X8(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ii())}function Z8(){var t;const e=(t=Gm())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function eP(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function tP(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function nP(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function rP(){const t=ii();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function iP(){return!Z8()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function E6(){try{return typeof indexedDB=="object"}catch{return!1}}function I6(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}function sP(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oP="FirebaseError";class Hs extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=oP,Object.setPrototypeOf(this,Hs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,_u.prototype.create)}}class _u{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?aP(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Hs(i,a,r)}}function aP(t,e){return t.replace(lP,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const lP=/\{\$([^}]+)}/g;function uP(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function bd(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(Qw(s)&&Qw(o)){if(!bd(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Qw(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bd(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function jh(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Dh(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function cP(t,e){const n=new hP(t,e);return n.subscribe.bind(n)}class hP{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");dP(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=d0),i.error===void 0&&(i.error=d0),i.complete===void 0&&(i.complete=d0);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function dP(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function d0(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xn(t){return t&&t._delegate?t._delegate:t}class _s{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hl="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fP{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new J8;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(mP(e))try{this.getOrInitializeService({instanceIdentifier:Hl})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Hl){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Hl){return this.instances.has(e)}getOptions(e=Hl){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:pP(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Hl){return this.component?this.component.multipleInstances?e:Hl:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function pP(t){return t===Hl?void 0:t}function mP(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gP{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new fP(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var zt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(zt||(zt={}));const vP={debug:zt.DEBUG,verbose:zt.VERBOSE,info:zt.INFO,warn:zt.WARN,error:zt.ERROR,silent:zt.SILENT},yP=zt.INFO,wP={[zt.DEBUG]:"log",[zt.VERBOSE]:"log",[zt.INFO]:"info",[zt.WARN]:"warn",[zt.ERROR]:"error"},_P=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=wP[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Uv{constructor(e){this.name=e,this._logLevel=yP,this._logHandler=_P,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in zt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?vP[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,zt.DEBUG,...e),this._logHandler(this,zt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,zt.VERBOSE,...e),this._logHandler(this,zt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,zt.INFO,...e),this._logHandler(this,zt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,zt.WARN,...e),this._logHandler(this,zt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,zt.ERROR,...e),this._logHandler(this,zt.ERROR,...e)}}const xP=(t,e)=>e.some(n=>t instanceof n);let Jw,Xw;function bP(){return Jw||(Jw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function SP(){return Xw||(Xw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const T6=new WeakMap,X1=new WeakMap,k6=new WeakMap,f0=new WeakMap,Vv=new WeakMap;function NP(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Zo(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&T6.set(n,t)}).catch(()=>{}),Vv.set(e,t),e}function AP(t){if(X1.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});X1.set(t,e)}let Z1={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return X1.get(t);if(e==="objectStoreNames")return t.objectStoreNames||k6.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Zo(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function EP(t){Z1=t(Z1)}function IP(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(p0(this),e,...n);return k6.set(r,e.sort?e.sort():[e]),Zo(r)}:SP().includes(t)?function(...e){return t.apply(p0(this),e),Zo(T6.get(this))}:function(...e){return Zo(t.apply(p0(this),e))}}function TP(t){return typeof t=="function"?IP(t):(t instanceof IDBTransaction&&AP(t),xP(t,bP())?new Proxy(t,Z1):t)}function Zo(t){if(t instanceof IDBRequest)return NP(t);if(f0.has(t))return f0.get(t);const e=TP(t);return e!==t&&(f0.set(t,e),Vv.set(e,t)),e}const p0=t=>Vv.get(t);function Km(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=Zo(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Zo(o.result),l.oldVersion,l.newVersion,Zo(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}function m0(t,{blocked:e}={}){const n=indexedDB.deleteDatabase(t);return e&&n.addEventListener("blocked",r=>e(r.oldVersion,r)),Zo(n).then(()=>{})}const kP=["get","getKey","getAll","getAllKeys","count"],PP=["put","add","delete","clear"],g0=new Map;function Zw(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(g0.get(e))return g0.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=PP.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||kP.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),i&&l.done]))[0]};return g0.set(e,s),s}EP(t=>({...t,get:(e,n,r)=>Zw(e,n)||t.get(e,n,r),has:(e,n)=>!!Zw(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CP{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(LP(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function LP(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const e2="@firebase/app",e_="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aa=new Uv("@firebase/app"),RP="@firebase/app-compat",jP="@firebase/analytics-compat",DP="@firebase/analytics",OP="@firebase/app-check-compat",FP="@firebase/app-check",MP="@firebase/auth",UP="@firebase/auth-compat",VP="@firebase/database",BP="@firebase/data-connect",zP="@firebase/database-compat",qP="@firebase/functions",HP="@firebase/functions-compat",WP="@firebase/installations",$P="@firebase/installations-compat",GP="@firebase/messaging",KP="@firebase/messaging-compat",YP="@firebase/performance",QP="@firebase/performance-compat",JP="@firebase/remote-config",XP="@firebase/remote-config-compat",ZP="@firebase/storage",eC="@firebase/storage-compat",tC="@firebase/firestore",nC="@firebase/vertexai-preview",rC="@firebase/firestore-compat",iC="firebase",sC="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t2="[DEFAULT]",oC={[e2]:"fire-core",[RP]:"fire-core-compat",[DP]:"fire-analytics",[jP]:"fire-analytics-compat",[FP]:"fire-app-check",[OP]:"fire-app-check-compat",[MP]:"fire-auth",[UP]:"fire-auth-compat",[VP]:"fire-rtdb",[BP]:"fire-data-connect",[zP]:"fire-rtdb-compat",[qP]:"fire-fn",[HP]:"fire-fn-compat",[WP]:"fire-iid",[$P]:"fire-iid-compat",[GP]:"fire-fcm",[KP]:"fire-fcm-compat",[YP]:"fire-perf",[QP]:"fire-perf-compat",[JP]:"fire-rc",[XP]:"fire-rc-compat",[ZP]:"fire-gcs",[eC]:"fire-gcs-compat",[tC]:"fire-fst",[rC]:"fire-fst-compat",[nC]:"fire-vertex","fire-js":"fire-js",[iC]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const im=new Map,aC=new Map,n2=new Map;function t_(t,e){try{t.container.addComponent(e)}catch(n){aa.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Vs(t){const e=t.name;if(n2.has(e))return aa.debug(`There were multiple attempts to register component ${e}.`),!1;n2.set(e,t);for(const n of im.values())t_(n,t);for(const n of aC.values())t_(n,t);return!0}function xu(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function ho(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lC={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},hl=new _u("app","Firebase",lC);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uC{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new _s("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw hl.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bu=sC;function P6(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:t2,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw hl.create("bad-app-name",{appName:String(i)});if(n||(n=S6()),!n)throw hl.create("no-options");const s=im.get(i);if(s){if(bd(n,s.options)&&bd(r,s.config))return s;throw hl.create("duplicate-app",{appName:i})}const o=new gP(i);for(const l of n2.values())o.addComponent(l);const a=new uC(n,r,o);return im.set(i,a),a}function Ym(t=t2){const e=im.get(t);if(!e&&t===t2&&S6())return P6();if(!e)throw hl.create("no-app",{appName:t});return e}function Ti(t,e,n){var r;let i=(r=oC[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),aa.warn(a.join(" "));return}Vs(new _s(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cC="firebase-heartbeat-database",hC=1,Sd="firebase-heartbeat-store";let v0=null;function C6(){return v0||(v0=Km(cC,hC,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Sd)}catch(n){console.warn(n)}}}}).catch(t=>{throw hl.create("idb-open",{originalErrorMessage:t.message})})),v0}async function dC(t){try{const n=(await C6()).transaction(Sd),r=await n.objectStore(Sd).get(L6(t));return await n.done,r}catch(e){if(e instanceof Hs)aa.warn(e.message);else{const n=hl.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});aa.warn(n.message)}}}async function n_(t,e){try{const r=(await C6()).transaction(Sd,"readwrite");await r.objectStore(Sd).put(e,L6(t)),await r.done}catch(n){if(n instanceof Hs)aa.warn(n.message);else{const r=hl.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});aa.warn(r.message)}}}function L6(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fC=1024,pC=30*24*60*60*1e3;class mC{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new vC(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=r_();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=pC}),this._storage.overwrite(this._heartbeatsCache))}catch(r){aa.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=r_(),{heartbeatsToSend:r,unsentEntries:i}=gC(this._heartbeatsCache.heartbeats),s=rm(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return aa.warn(n),""}}}function r_(){return new Date().toISOString().substring(0,10)}function gC(t,e=fC){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),i_(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),i_(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class vC{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return E6()?I6().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await dC(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return n_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return n_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function i_(t){return rm(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yC(t){Vs(new _s("platform-logger",e=>new CP(e),"PRIVATE")),Vs(new _s("heartbeat",e=>new mC(e),"PRIVATE")),Ti(e2,e_,t),Ti(e2,e_,"esm2017"),Ti("fire-js","")}yC("");function Bv(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function R6(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const wC=R6,j6=new _u("auth","Firebase",R6());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sm=new Uv("@firebase/auth");function _C(t,...e){sm.logLevel<=zt.WARN&&sm.warn(`Auth (${bu}): ${t}`,...e)}function vp(t,...e){sm.logLevel<=zt.ERROR&&sm.error(`Auth (${bu}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bs(t,...e){throw zv(t,...e)}function go(t,...e){return zv(t,...e)}function D6(t,e,n){const r=Object.assign(Object.assign({},wC()),{[e]:n});return new _u("auth","Firebase",r).create(e,{appName:t.name})}function ea(t){return D6(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function zv(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return j6.create(t,...e)}function mt(t,e,...n){if(!t)throw zv(e,...n)}function Go(t){const e="INTERNAL ASSERTION FAILED: "+t;throw vp(e),new Error(e)}function la(t,e){t||Go(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r2(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function xC(){return s_()==="http:"||s_()==="https:"}function s_(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bC(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(xC()||tP()||"connection"in navigator)?navigator.onLine:!0}function SC(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zd{constructor(e,n){this.shortDelay=e,this.longDelay=n,la(n>e,"Short delay should be less than long delay!"),this.isMobile=X8()||nP()}get(){return bC()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qv(t,e){la(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O6{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Go("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Go("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Go("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NC={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AC=new zd(3e4,6e4);function Nl(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function ma(t,e,n,r,i={}){return F6(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=Bd(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const u=Object.assign({method:e,headers:l},s);return eP()||(u.referrerPolicy="no-referrer"),O6.fetch()(M6(t,t.config.apiHost,n,a),u)})}async function F6(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},NC),e);try{const i=new IC(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw qf(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw qf(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw qf(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw qf(t,"user-disabled",o);const c=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw D6(t,c,u);Bs(t,c)}}catch(i){if(i instanceof Hs)throw i;Bs(t,"network-request-failed",{message:String(i)})}}async function qd(t,e,n,r,i={}){const s=await ma(t,e,n,r,i);return"mfaPendingCredential"in s&&Bs(t,"multi-factor-auth-required",{_serverResponse:s}),s}function M6(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?qv(t.config,i):`${t.config.apiScheme}://${i}`}function EC(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class IC{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(go(this.auth,"network-request-failed")),AC.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function qf(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=go(t,e,r);return i.customData._tokenResponse=n,i}function o_(t){return t!==void 0&&t.enterprise!==void 0}class TC{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return EC(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function kC(t,e){return ma(t,"GET","/v2/recaptchaConfig",Nl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PC(t,e){return ma(t,"POST","/v1/accounts:delete",e)}async function U6(t,e){return ma(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yh(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function CC(t,e=!1){const n=xn(t),r=await n.getIdToken(e),i=Hv(r);mt(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Yh(y0(i.auth_time)),issuedAtTime:Yh(y0(i.iat)),expirationTime:Yh(y0(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function y0(t){return Number(t)*1e3}function Hv(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return vp("JWT malformed, contained fewer than 3 sections"),null;try{const i=_6(n);return i?JSON.parse(i):(vp("Failed to decode base64 JWT payload"),null)}catch(i){return vp("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function a_(t){const e=Hv(t);return mt(e,"internal-error"),mt(typeof e.exp<"u","internal-error"),mt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pc(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Hs&&LC(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function LC({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RC{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i2{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Yh(this.lastLoginAt),this.creationTime=Yh(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function om(t){var e;const n=t.auth,r=await t.getIdToken(),i=await Pc(t,U6(n,{idToken:r}));mt(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?V6(s.providerUserInfo):[],a=DC(t.providerData,o),l=t.isAnonymous,u=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),c=l?u:!1,g={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new i2(s.createdAt,s.lastLoginAt),isAnonymous:c};Object.assign(t,g)}async function jC(t){const e=xn(t);await om(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function DC(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function V6(t){return t.map(e=>{var{providerId:n}=e,r=Bv(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OC(t,e){const n=await F6(t,{},async()=>{const r=Bd({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=M6(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",O6.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function FC(t,e){return ma(t,"POST","/v2/accounts:revokeToken",Nl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){mt(e.idToken,"internal-error"),mt(typeof e.idToken<"u","internal-error"),mt(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):a_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){mt(e.length!==0,"internal-error");const n=a_(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(mt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await OC(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new pc;return r&&(mt(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(mt(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(mt(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new pc,this.toJSON())}_performRefresh(){return Go("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ua(t,e){mt(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Ko{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=Bv(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new RC(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new i2(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Pc(this,this.stsTokenManager.getToken(this.auth,e));return mt(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return CC(this,e)}reload(){return jC(this)}_assign(e){this!==e&&(mt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Ko(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){mt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await om(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ho(this.auth.app))return Promise.reject(ea(this.auth));const e=await this.getIdToken();return await Pc(this,PC(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,l,u,c;const g=(r=n.displayName)!==null&&r!==void 0?r:void 0,v=(i=n.email)!==null&&i!==void 0?i:void 0,m=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,S=(o=n.photoURL)!==null&&o!==void 0?o:void 0,A=(a=n.tenantId)!==null&&a!==void 0?a:void 0,L=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,b=(u=n.createdAt)!==null&&u!==void 0?u:void 0,k=(c=n.lastLoginAt)!==null&&c!==void 0?c:void 0,{uid:j,emailVerified:U,isAnonymous:q,providerData:ee,stsTokenManager:D}=n;mt(j&&D,e,"internal-error");const N=pc.fromJSON(this.name,D);mt(typeof j=="string",e,"internal-error"),Ua(g,e.name),Ua(v,e.name),mt(typeof U=="boolean",e,"internal-error"),mt(typeof q=="boolean",e,"internal-error"),Ua(m,e.name),Ua(S,e.name),Ua(A,e.name),Ua(L,e.name),Ua(b,e.name),Ua(k,e.name);const I=new Ko({uid:j,auth:e,email:v,emailVerified:U,displayName:g,isAnonymous:q,photoURL:S,phoneNumber:m,tenantId:A,stsTokenManager:N,createdAt:b,lastLoginAt:k});return ee&&Array.isArray(ee)&&(I.providerData=ee.map(R=>Object.assign({},R))),L&&(I._redirectEventId=L),I}static async _fromIdTokenResponse(e,n,r=!1){const i=new pc;i.updateFromServerResponse(n);const s=new Ko({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await om(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];mt(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?V6(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new pc;a.updateFromIdToken(r);const l=new Ko({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new i2(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,u),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l_=new Map;function Yo(t){la(t instanceof Function,"Expected a class definition");let e=l_.get(t);return e?(la(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,l_.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B6{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}B6.type="NONE";const u_=B6;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yp(t,e,n){return`firebase:${t}:${e}:${n}`}class mc{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=yp(this.userKey,i.apiKey,s),this.fullPersistenceKey=yp("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Ko._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new mc(Yo(u_),e,r);const i=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=i[0]||Yo(u_);const o=yp(r,e.config.apiKey,e.name);let a=null;for(const u of n)try{const c=await u._get(o);if(c){const g=Ko._fromJSON(e,c);u!==s&&(a=g),s=u;break}}catch{}const l=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new mc(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==s)try{await u._remove(o)}catch{}})),new mc(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c_(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(W6(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(z6(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(G6(e))return"Blackberry";if(K6(e))return"Webos";if(q6(e))return"Safari";if((e.includes("chrome/")||H6(e))&&!e.includes("edge/"))return"Chrome";if($6(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function z6(t=ii()){return/firefox\//i.test(t)}function q6(t=ii()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function H6(t=ii()){return/crios\//i.test(t)}function W6(t=ii()){return/iemobile/i.test(t)}function $6(t=ii()){return/android/i.test(t)}function G6(t=ii()){return/blackberry/i.test(t)}function K6(t=ii()){return/webos/i.test(t)}function Wv(t=ii()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function MC(t=ii()){var e;return Wv(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function UC(){return rP()&&document.documentMode===10}function Y6(t=ii()){return Wv(t)||$6(t)||K6(t)||G6(t)||/windows phone/i.test(t)||W6(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q6(t,e=[]){let n;switch(t){case"Browser":n=c_(ii());break;case"Worker":n=`${c_(ii())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${bu}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VC{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BC(t,e={}){return ma(t,"GET","/v2/passwordPolicy",Nl(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zC=6;class qC{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:zC,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HC{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new h_(this),this.idTokenSubscription=new h_(this),this.beforeStateQueue=new VC(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=j6,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Yo(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await mc.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await U6(this,{idToken:e}),r=await Ko._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(ho(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return mt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await om(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=SC()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ho(this.app))return Promise.reject(ea(this));const n=e?xn(e):null;return n&&mt(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&mt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ho(this.app)?Promise.reject(ea(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ho(this.app)?Promise.reject(ea(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Yo(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await BC(this),n=new qC(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new _u("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await FC(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Yo(e)||this._popupRedirectResolver;mt(n,this,"argument-error"),this.redirectPersistenceManager=await mc.create(this,[Yo(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(mt(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return mt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Q6(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&_C(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Su(t){return xn(t)}class h_{constructor(e){this.auth=e,this.observer=null,this.addObserver=cP(n=>this.observer=n)}get next(){return mt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function WC(t){Qm=t}function J6(t){return Qm.loadJS(t)}function $C(){return Qm.recaptchaEnterpriseScript}function GC(){return Qm.gapiScript}function KC(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const YC="recaptcha-enterprise",QC="NO_RECAPTCHA";class JC{constructor(e){this.type=YC,this.auth=Su(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{kC(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const u=new TC(l);return s.tenantId==null?s._agentRecaptchaConfig=u:s._tenantRecaptchaConfigs[s.tenantId]=u,o(u.siteKey)}}).catch(l=>{a(l)})})}function i(s,o,a){const l=window.grecaptcha;o_(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(u=>{o(u)}).catch(()=>{o(QC)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&o_(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=$C();l.length!==0&&(l+=a),J6(l).then(()=>{i(a,s,o)}).catch(u=>{o(u)})}}).catch(a=>{o(a)})})}}async function d_(t,e,n,r=!1){const i=new JC(t);let s;try{s=await i.verify(n)}catch{s=await i.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function s2(t,e,n,r){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await d_(t,e,n,n==="getOobCode");return r(t,s)}else return r(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await d_(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XC(t,e){const n=xu(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(bd(s,e??{}))return i;Bs(i,"already-initialized")}return n.initialize({options:e})}function ZC(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Yo);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function eL(t,e,n){const r=Su(t);mt(r._canInitEmulator,r,"emulator-config-failed"),mt(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=X6(e),{host:o,port:a}=tL(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),nL()}function X6(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function tL(t){const e=X6(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:f_(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:f_(o)}}}function f_(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function nL(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $v{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Go("not implemented")}_getIdTokenResponse(e){return Go("not implemented")}_linkToIdToken(e,n){return Go("not implemented")}_getReauthenticationResolver(e){return Go("not implemented")}}async function rL(t,e){return ma(t,"POST","/v1/accounts:update",e)}async function iL(t,e){return ma(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sL(t,e){return qd(t,"POST","/v1/accounts:signInWithPassword",Nl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oL(t,e){return qd(t,"POST","/v1/accounts:signInWithEmailLink",Nl(t,e))}async function aL(t,e){return qd(t,"POST","/v1/accounts:signInWithEmailLink",Nl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nd extends $v{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new Nd(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Nd(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return s2(e,n,"signInWithPassword",sL);case"emailLink":return oL(e,{email:this._email,oobCode:this._password});default:Bs(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return s2(e,r,"signUpPassword",iL);case"emailLink":return aL(e,{idToken:n,email:this._email,oobCode:this._password});default:Bs(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gc(t,e){return qd(t,"POST","/v1/accounts:signInWithIdp",Nl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lL="http://localhost";class au extends $v{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new au(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Bs("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=Bv(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new au(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return gc(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,gc(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,gc(e,n)}buildRequest(){const e={requestUri:lL,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Bd(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uL(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function cL(t){const e=jh(Dh(t)).link,n=e?jh(Dh(e)).deep_link_id:null,r=jh(Dh(t)).deep_link_id;return(r?jh(Dh(r)).link:null)||r||n||e||t}class Gv{constructor(e){var n,r,i,s,o,a;const l=jh(Dh(e)),u=(n=l.apiKey)!==null&&n!==void 0?n:null,c=(r=l.oobCode)!==null&&r!==void 0?r:null,g=uL((i=l.mode)!==null&&i!==void 0?i:null);mt(u&&c&&g,"argument-error"),this.apiKey=u,this.operation=g,this.code=c,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=cL(e);try{return new Gv(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wc{constructor(){this.providerId=Wc.PROVIDER_ID}static credential(e,n){return Nd._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Gv.parseLink(n);return mt(r,"argument-error"),Nd._fromEmailAndCode(e,r.code,r.tenantId)}}Wc.PROVIDER_ID="password";Wc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Wc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z6{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hd extends Z6{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $a extends Hd{constructor(){super("facebook.com")}static credential(e){return au._fromParams({providerId:$a.PROVIDER_ID,signInMethod:$a.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return $a.credentialFromTaggedObject(e)}static credentialFromError(e){return $a.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return $a.credential(e.oauthAccessToken)}catch{return null}}}$a.FACEBOOK_SIGN_IN_METHOD="facebook.com";$a.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ga extends Hd{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return au._fromParams({providerId:Ga.PROVIDER_ID,signInMethod:Ga.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Ga.credentialFromTaggedObject(e)}static credentialFromError(e){return Ga.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Ga.credential(n,r)}catch{return null}}}Ga.GOOGLE_SIGN_IN_METHOD="google.com";Ga.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ka extends Hd{constructor(){super("github.com")}static credential(e){return au._fromParams({providerId:Ka.PROVIDER_ID,signInMethod:Ka.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ka.credentialFromTaggedObject(e)}static credentialFromError(e){return Ka.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ka.credential(e.oauthAccessToken)}catch{return null}}}Ka.GITHUB_SIGN_IN_METHOD="github.com";Ka.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ya extends Hd{constructor(){super("twitter.com")}static credential(e,n){return au._fromParams({providerId:Ya.PROVIDER_ID,signInMethod:Ya.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ya.credentialFromTaggedObject(e)}static credentialFromError(e){return Ya.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Ya.credential(n,r)}catch{return null}}}Ya.TWITTER_SIGN_IN_METHOD="twitter.com";Ya.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hL(t,e){return qd(t,"POST","/v1/accounts:signUp",Nl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lu{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await Ko._fromIdTokenResponse(e,r,i),o=p_(r);return new lu({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=p_(r);return new lu({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function p_(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class am extends Hs{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,am.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new am(e,n,r,i)}}function eS(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?am._fromErrorAndOperation(t,s,e,r):s})}async function dL(t,e,n=!1){const r=await Pc(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return lu._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fL(t,e,n=!1){const{auth:r}=t;if(ho(r.app))return Promise.reject(ea(r));const i="reauthenticate";try{const s=await Pc(t,eS(r,i,e,t),n);mt(s.idToken,r,"internal-error");const o=Hv(s.idToken);mt(o,r,"internal-error");const{sub:a}=o;return mt(t.uid===a,r,"user-mismatch"),lu._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Bs(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tS(t,e,n=!1){if(ho(t.app))return Promise.reject(ea(t));const r="signIn",i=await eS(t,r,e),s=await lu._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function pL(t,e){return tS(Su(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nS(t){const e=Su(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function rS(t,e,n){if(ho(t.app))return Promise.reject(ea(t));const r=Su(t),o=await s2(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",hL).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&nS(t),l}),a=await lu._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function mL(t,e,n){return ho(t.app)?Promise.reject(ea(t)):pL(xn(t),Wc.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&nS(t),r})}function gL(t,e){return vL(xn(t),null,e)}async function vL(t,e,n){const{auth:r}=t,s={idToken:await t.getIdToken(),returnSecureToken:!0};n&&(s.password=n);const o=await Pc(t,rL(r,s));await t._updateTokensIfNecessary(o,!0)}function yL(t,e,n,r){return xn(t).onIdTokenChanged(e,n,r)}function wL(t,e,n){return xn(t).beforeAuthStateChanged(e,n)}function Wd(t,e,n,r){return xn(t).onAuthStateChanged(e,n,r)}function _L(t){return xn(t).signOut()}const lm="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iS{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(lm,"1"),this.storage.removeItem(lm),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xL=1e3,bL=10;class sS extends iS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Y6(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);UC()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,bL):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},xL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}sS.type="LOCAL";const SL=sS;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oS extends iS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}oS.type="SESSION";const aS=oS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NL(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jm{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Jm(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async u=>u(n.origin,s)),l=await NL(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Jm.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kv(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AL{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const u=Kv("",20);i.port1.start();const c=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(g){const v=g;if(v.data.eventId===u)switch(v.data.status){case"ack":clearTimeout(c),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(v.data.response);break;default:clearTimeout(c),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vo(){return window}function EL(t){vo().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lS(){return typeof vo().WorkerGlobalScope<"u"&&typeof vo().importScripts=="function"}async function IL(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function TL(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function kL(){return lS()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uS="firebaseLocalStorageDb",PL=1,um="firebaseLocalStorage",cS="fbase_key";class $d{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Xm(t,e){return t.transaction([um],e?"readwrite":"readonly").objectStore(um)}function CL(){const t=indexedDB.deleteDatabase(uS);return new $d(t).toPromise()}function o2(){const t=indexedDB.open(uS,PL);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(um,{keyPath:cS})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(um)?e(r):(r.close(),await CL(),e(await o2()))})})}async function m_(t,e,n){const r=Xm(t,!0).put({[cS]:e,value:n});return new $d(r).toPromise()}async function LL(t,e){const n=Xm(t,!1).get(e),r=await new $d(n).toPromise();return r===void 0?null:r.value}function g_(t,e){const n=Xm(t,!0).delete(e);return new $d(n).toPromise()}const RL=800,jL=3;class hS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await o2(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>jL)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return lS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Jm._getInstance(kL()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await IL(),!this.activeServiceWorker)return;this.sender=new AL(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||TL()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await o2();return await m_(e,lm,"1"),await g_(e,lm),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>m_(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>LL(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>g_(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Xm(i,!1).getAll();return new $d(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),RL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}hS.type="LOCAL";const DL=hS;new zd(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OL(t,e){return e?Yo(e):(mt(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yv extends $v{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return gc(e,this._buildIdpRequest())}_linkToIdToken(e,n){return gc(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return gc(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function FL(t){return tS(t.auth,new Yv(t),t.bypassAuthState)}function ML(t){const{auth:e,user:n}=t;return mt(n,e,"internal-error"),fL(n,new Yv(t),t.bypassAuthState)}async function UL(t){const{auth:e,user:n}=t;return mt(n,e,"internal-error"),dL(n,new Yv(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dS{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return FL;case"linkViaPopup":case"linkViaRedirect":return UL;case"reauthViaPopup":case"reauthViaRedirect":return ML;default:Bs(this.auth,"internal-error")}}resolve(e){la(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){la(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VL=new zd(2e3,1e4);class oc extends dS{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,oc.currentPopupAction&&oc.currentPopupAction.cancel(),oc.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return mt(e,this.auth,"internal-error"),e}async onExecution(){la(this.filter.length===1,"Popup operations only handle one event");const e=Kv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(go(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(go(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,oc.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(go(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,VL.get())};e()}}oc.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BL="pendingRedirect",wp=new Map;class zL extends dS{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=wp.get(this.auth._key());if(!e){try{const r=await qL(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}wp.set(this.auth._key(),e)}return this.bypassAuthState||wp.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function qL(t,e){const n=$L(e),r=WL(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function HL(t,e){wp.set(t._key(),e)}function WL(t){return Yo(t._redirectPersistence)}function $L(t){return yp(BL,t.config.apiKey,t.name)}async function GL(t,e,n=!1){if(ho(t.app))return Promise.reject(ea(t));const r=Su(t),i=OL(r,e),o=await new zL(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KL=10*60*1e3;class YL{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!QL(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!fS(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(go(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=KL&&this.cachedEventUids.clear(),this.cachedEventUids.has(v_(e))}saveEventToCache(e){this.cachedEventUids.add(v_(e)),this.lastProcessedEventTime=Date.now()}}function v_(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function fS({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function QL(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return fS(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JL(t,e={}){return ma(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XL=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ZL=/^https?/;async function eR(t){if(t.config.emulator)return;const{authorizedDomains:e}=await JL(t);for(const n of e)try{if(tR(n))return}catch{}Bs(t,"unauthorized-domain")}function tR(t){const e=r2(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!ZL.test(n))return!1;if(XL.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nR=new zd(3e4,6e4);function y_(){const t=vo().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function rR(t){return new Promise((e,n)=>{var r,i,s;function o(){y_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{y_(),n(go(t,"network-request-failed"))},timeout:nR.get()})}if(!((i=(r=vo().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=vo().gapi)===null||s===void 0)&&s.load)o();else{const a=KC("iframefcb");return vo()[a]=()=>{gapi.load?o():n(go(t,"network-request-failed"))},J6(`${GC()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw _p=null,e})}let _p=null;function iR(t){return _p=_p||rR(t),_p}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sR=new zd(5e3,15e3),oR="__/auth/iframe",aR="emulator/auth/iframe",lR={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},uR=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function cR(t){const e=t.config;mt(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?qv(e,aR):`https://${t.config.authDomain}/${oR}`,r={apiKey:e.apiKey,appName:t.name,v:bu},i=uR.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Bd(r).slice(1)}`}async function hR(t){const e=await iR(t),n=vo().gapi;return mt(n,t,"internal-error"),e.open({where:document.body,url:cR(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:lR,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=go(t,"network-request-failed"),a=vo().setTimeout(()=>{s(o)},sR.get());function l(){vo().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dR={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},fR=500,pR=600,mR="_blank",gR="http://localhost";class w_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function vR(t,e,n,r=fR,i=pR){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},dR),{width:r.toString(),height:i.toString(),top:s,left:o}),u=ii().toLowerCase();n&&(a=H6(u)?mR:n),z6(u)&&(e=e||gR,l.scrollbars="yes");const c=Object.entries(l).reduce((v,[m,S])=>`${v}${m}=${S},`,"");if(MC(u)&&a!=="_self")return yR(e||"",a),new w_(null);const g=window.open(e||"",a,c);mt(g,t,"popup-blocked");try{g.focus()}catch{}return new w_(g)}function yR(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wR="__/auth/handler",_R="emulator/auth/handler",xR=encodeURIComponent("fac");async function __(t,e,n,r,i,s){mt(t.config.authDomain,t,"auth-domain-config-required"),mt(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:bu,eventId:i};if(e instanceof Z6){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",uP(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[c,g]of Object.entries({}))o[c]=g}if(e instanceof Hd){const c=e.getScopes().filter(g=>g!=="");c.length>0&&(o.scopes=c.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const c of Object.keys(a))a[c]===void 0&&delete a[c];const l=await t._getAppCheckToken(),u=l?`#${xR}=${encodeURIComponent(l)}`:"";return`${bR(t)}?${Bd(a).slice(1)}${u}`}function bR({config:t}){return t.emulator?qv(t,_R):`https://${t.authDomain}/${wR}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w0="webStorageSupport";class SR{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=aS,this._completeRedirectFn=GL,this._overrideRedirectResult=HL}async _openPopup(e,n,r,i){var s;la((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await __(e,n,r,r2(),i);return vR(e,o,Kv())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await __(e,n,r,r2(),i);return EL(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(la(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await hR(e),r=new YL(e);return n.register("authEvent",i=>(mt(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(w0,{type:w0},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[w0];o!==void 0&&n(!!o),Bs(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=eR(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Y6()||q6()||Wv()}}const NR=SR;var x_="@firebase/auth",b_="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AR{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){mt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ER(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function IR(t){Vs(new _s("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;mt(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Q6(t)},u=new HC(r,i,s,l);return ZC(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Vs(new _s("auth-internal",e=>{const n=Su(e.getProvider("auth").getImmediate());return(r=>new AR(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ti(x_,b_,ER(t)),Ti(x_,b_,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TR=5*60,kR=N6("authIdTokenMaxAge")||TR;let S_=null;const PR=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>kR)return;const i=n==null?void 0:n.token;S_!==i&&(S_=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function CR(t=Ym()){const e=xu(t,"auth");if(e.isInitialized())return e.getImmediate();const n=XC(t,{popupRedirectResolver:NR,persistence:[DL,SL,aS]}),r=N6("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=PR(s.toString());wL(n,o,()=>o(n.currentUser)),yL(n,a=>o(a))}}const i=x6("auth");return i&&eL(n,`http://${i}`),n}function LR(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}WC({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=go("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",LR().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});IR("Browser");var N_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var eu,pS;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(D,N){function I(){}I.prototype=N.prototype,D.D=N.prototype,D.prototype=new I,D.prototype.constructor=D,D.C=function(R,x,T){for(var P=Array(arguments.length-2),te=2;te<arguments.length;te++)P[te-2]=arguments[te];return N.prototype[x].apply(R,P)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(D,N,I){I||(I=0);var R=Array(16);if(typeof N=="string")for(var x=0;16>x;++x)R[x]=N.charCodeAt(I++)|N.charCodeAt(I++)<<8|N.charCodeAt(I++)<<16|N.charCodeAt(I++)<<24;else for(x=0;16>x;++x)R[x]=N[I++]|N[I++]<<8|N[I++]<<16|N[I++]<<24;N=D.g[0],I=D.g[1],x=D.g[2];var T=D.g[3],P=N+(T^I&(x^T))+R[0]+3614090360&4294967295;N=I+(P<<7&4294967295|P>>>25),P=T+(x^N&(I^x))+R[1]+3905402710&4294967295,T=N+(P<<12&4294967295|P>>>20),P=x+(I^T&(N^I))+R[2]+606105819&4294967295,x=T+(P<<17&4294967295|P>>>15),P=I+(N^x&(T^N))+R[3]+3250441966&4294967295,I=x+(P<<22&4294967295|P>>>10),P=N+(T^I&(x^T))+R[4]+4118548399&4294967295,N=I+(P<<7&4294967295|P>>>25),P=T+(x^N&(I^x))+R[5]+1200080426&4294967295,T=N+(P<<12&4294967295|P>>>20),P=x+(I^T&(N^I))+R[6]+2821735955&4294967295,x=T+(P<<17&4294967295|P>>>15),P=I+(N^x&(T^N))+R[7]+4249261313&4294967295,I=x+(P<<22&4294967295|P>>>10),P=N+(T^I&(x^T))+R[8]+1770035416&4294967295,N=I+(P<<7&4294967295|P>>>25),P=T+(x^N&(I^x))+R[9]+2336552879&4294967295,T=N+(P<<12&4294967295|P>>>20),P=x+(I^T&(N^I))+R[10]+4294925233&4294967295,x=T+(P<<17&4294967295|P>>>15),P=I+(N^x&(T^N))+R[11]+2304563134&4294967295,I=x+(P<<22&4294967295|P>>>10),P=N+(T^I&(x^T))+R[12]+1804603682&4294967295,N=I+(P<<7&4294967295|P>>>25),P=T+(x^N&(I^x))+R[13]+4254626195&4294967295,T=N+(P<<12&4294967295|P>>>20),P=x+(I^T&(N^I))+R[14]+2792965006&4294967295,x=T+(P<<17&4294967295|P>>>15),P=I+(N^x&(T^N))+R[15]+1236535329&4294967295,I=x+(P<<22&4294967295|P>>>10),P=N+(x^T&(I^x))+R[1]+4129170786&4294967295,N=I+(P<<5&4294967295|P>>>27),P=T+(I^x&(N^I))+R[6]+3225465664&4294967295,T=N+(P<<9&4294967295|P>>>23),P=x+(N^I&(T^N))+R[11]+643717713&4294967295,x=T+(P<<14&4294967295|P>>>18),P=I+(T^N&(x^T))+R[0]+3921069994&4294967295,I=x+(P<<20&4294967295|P>>>12),P=N+(x^T&(I^x))+R[5]+3593408605&4294967295,N=I+(P<<5&4294967295|P>>>27),P=T+(I^x&(N^I))+R[10]+38016083&4294967295,T=N+(P<<9&4294967295|P>>>23),P=x+(N^I&(T^N))+R[15]+3634488961&4294967295,x=T+(P<<14&4294967295|P>>>18),P=I+(T^N&(x^T))+R[4]+3889429448&4294967295,I=x+(P<<20&4294967295|P>>>12),P=N+(x^T&(I^x))+R[9]+568446438&4294967295,N=I+(P<<5&4294967295|P>>>27),P=T+(I^x&(N^I))+R[14]+3275163606&4294967295,T=N+(P<<9&4294967295|P>>>23),P=x+(N^I&(T^N))+R[3]+4107603335&4294967295,x=T+(P<<14&4294967295|P>>>18),P=I+(T^N&(x^T))+R[8]+1163531501&4294967295,I=x+(P<<20&4294967295|P>>>12),P=N+(x^T&(I^x))+R[13]+2850285829&4294967295,N=I+(P<<5&4294967295|P>>>27),P=T+(I^x&(N^I))+R[2]+4243563512&4294967295,T=N+(P<<9&4294967295|P>>>23),P=x+(N^I&(T^N))+R[7]+1735328473&4294967295,x=T+(P<<14&4294967295|P>>>18),P=I+(T^N&(x^T))+R[12]+2368359562&4294967295,I=x+(P<<20&4294967295|P>>>12),P=N+(I^x^T)+R[5]+4294588738&4294967295,N=I+(P<<4&4294967295|P>>>28),P=T+(N^I^x)+R[8]+2272392833&4294967295,T=N+(P<<11&4294967295|P>>>21),P=x+(T^N^I)+R[11]+1839030562&4294967295,x=T+(P<<16&4294967295|P>>>16),P=I+(x^T^N)+R[14]+4259657740&4294967295,I=x+(P<<23&4294967295|P>>>9),P=N+(I^x^T)+R[1]+2763975236&4294967295,N=I+(P<<4&4294967295|P>>>28),P=T+(N^I^x)+R[4]+1272893353&4294967295,T=N+(P<<11&4294967295|P>>>21),P=x+(T^N^I)+R[7]+4139469664&4294967295,x=T+(P<<16&4294967295|P>>>16),P=I+(x^T^N)+R[10]+3200236656&4294967295,I=x+(P<<23&4294967295|P>>>9),P=N+(I^x^T)+R[13]+681279174&4294967295,N=I+(P<<4&4294967295|P>>>28),P=T+(N^I^x)+R[0]+3936430074&4294967295,T=N+(P<<11&4294967295|P>>>21),P=x+(T^N^I)+R[3]+3572445317&4294967295,x=T+(P<<16&4294967295|P>>>16),P=I+(x^T^N)+R[6]+76029189&4294967295,I=x+(P<<23&4294967295|P>>>9),P=N+(I^x^T)+R[9]+3654602809&4294967295,N=I+(P<<4&4294967295|P>>>28),P=T+(N^I^x)+R[12]+3873151461&4294967295,T=N+(P<<11&4294967295|P>>>21),P=x+(T^N^I)+R[15]+530742520&4294967295,x=T+(P<<16&4294967295|P>>>16),P=I+(x^T^N)+R[2]+3299628645&4294967295,I=x+(P<<23&4294967295|P>>>9),P=N+(x^(I|~T))+R[0]+4096336452&4294967295,N=I+(P<<6&4294967295|P>>>26),P=T+(I^(N|~x))+R[7]+1126891415&4294967295,T=N+(P<<10&4294967295|P>>>22),P=x+(N^(T|~I))+R[14]+2878612391&4294967295,x=T+(P<<15&4294967295|P>>>17),P=I+(T^(x|~N))+R[5]+4237533241&4294967295,I=x+(P<<21&4294967295|P>>>11),P=N+(x^(I|~T))+R[12]+1700485571&4294967295,N=I+(P<<6&4294967295|P>>>26),P=T+(I^(N|~x))+R[3]+2399980690&4294967295,T=N+(P<<10&4294967295|P>>>22),P=x+(N^(T|~I))+R[10]+4293915773&4294967295,x=T+(P<<15&4294967295|P>>>17),P=I+(T^(x|~N))+R[1]+2240044497&4294967295,I=x+(P<<21&4294967295|P>>>11),P=N+(x^(I|~T))+R[8]+1873313359&4294967295,N=I+(P<<6&4294967295|P>>>26),P=T+(I^(N|~x))+R[15]+4264355552&4294967295,T=N+(P<<10&4294967295|P>>>22),P=x+(N^(T|~I))+R[6]+2734768916&4294967295,x=T+(P<<15&4294967295|P>>>17),P=I+(T^(x|~N))+R[13]+1309151649&4294967295,I=x+(P<<21&4294967295|P>>>11),P=N+(x^(I|~T))+R[4]+4149444226&4294967295,N=I+(P<<6&4294967295|P>>>26),P=T+(I^(N|~x))+R[11]+3174756917&4294967295,T=N+(P<<10&4294967295|P>>>22),P=x+(N^(T|~I))+R[2]+718787259&4294967295,x=T+(P<<15&4294967295|P>>>17),P=I+(T^(x|~N))+R[9]+3951481745&4294967295,D.g[0]=D.g[0]+N&4294967295,D.g[1]=D.g[1]+(x+(P<<21&4294967295|P>>>11))&4294967295,D.g[2]=D.g[2]+x&4294967295,D.g[3]=D.g[3]+T&4294967295}r.prototype.u=function(D,N){N===void 0&&(N=D.length);for(var I=N-this.blockSize,R=this.B,x=this.h,T=0;T<N;){if(x==0)for(;T<=I;)i(this,D,T),T+=this.blockSize;if(typeof D=="string"){for(;T<N;)if(R[x++]=D.charCodeAt(T++),x==this.blockSize){i(this,R),x=0;break}}else for(;T<N;)if(R[x++]=D[T++],x==this.blockSize){i(this,R),x=0;break}}this.h=x,this.o+=N},r.prototype.v=function(){var D=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);D[0]=128;for(var N=1;N<D.length-8;++N)D[N]=0;var I=8*this.o;for(N=D.length-8;N<D.length;++N)D[N]=I&255,I/=256;for(this.u(D),D=Array(16),N=I=0;4>N;++N)for(var R=0;32>R;R+=8)D[I++]=this.g[N]>>>R&255;return D};function s(D,N){var I=a;return Object.prototype.hasOwnProperty.call(I,D)?I[D]:I[D]=N(D)}function o(D,N){this.h=N;for(var I=[],R=!0,x=D.length-1;0<=x;x--){var T=D[x]|0;R&&T==N||(I[x]=T,R=!1)}this.g=I}var a={};function l(D){return-128<=D&&128>D?s(D,function(N){return new o([N|0],0>N?-1:0)}):new o([D|0],0>D?-1:0)}function u(D){if(isNaN(D)||!isFinite(D))return g;if(0>D)return L(u(-D));for(var N=[],I=1,R=0;D>=I;R++)N[R]=D/I|0,I*=4294967296;return new o(N,0)}function c(D,N){if(D.length==0)throw Error("number format error: empty string");if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if(D.charAt(0)=="-")return L(c(D.substring(1),N));if(0<=D.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=u(Math.pow(N,8)),R=g,x=0;x<D.length;x+=8){var T=Math.min(8,D.length-x),P=parseInt(D.substring(x,x+T),N);8>T?(T=u(Math.pow(N,T)),R=R.j(T).add(u(P))):(R=R.j(I),R=R.add(u(P)))}return R}var g=l(0),v=l(1),m=l(16777216);t=o.prototype,t.m=function(){if(A(this))return-L(this).m();for(var D=0,N=1,I=0;I<this.g.length;I++){var R=this.i(I);D+=(0<=R?R:4294967296+R)*N,N*=4294967296}return D},t.toString=function(D){if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(S(this))return"0";if(A(this))return"-"+L(this).toString(D);for(var N=u(Math.pow(D,6)),I=this,R="";;){var x=U(I,N).g;I=b(I,x.j(N));var T=((0<I.g.length?I.g[0]:I.h)>>>0).toString(D);if(I=x,S(I))return T+R;for(;6>T.length;)T="0"+T;R=T+R}},t.i=function(D){return 0>D?0:D<this.g.length?this.g[D]:this.h};function S(D){if(D.h!=0)return!1;for(var N=0;N<D.g.length;N++)if(D.g[N]!=0)return!1;return!0}function A(D){return D.h==-1}t.l=function(D){return D=b(this,D),A(D)?-1:S(D)?0:1};function L(D){for(var N=D.g.length,I=[],R=0;R<N;R++)I[R]=~D.g[R];return new o(I,~D.h).add(v)}t.abs=function(){return A(this)?L(this):this},t.add=function(D){for(var N=Math.max(this.g.length,D.g.length),I=[],R=0,x=0;x<=N;x++){var T=R+(this.i(x)&65535)+(D.i(x)&65535),P=(T>>>16)+(this.i(x)>>>16)+(D.i(x)>>>16);R=P>>>16,T&=65535,P&=65535,I[x]=P<<16|T}return new o(I,I[I.length-1]&-2147483648?-1:0)};function b(D,N){return D.add(L(N))}t.j=function(D){if(S(this)||S(D))return g;if(A(this))return A(D)?L(this).j(L(D)):L(L(this).j(D));if(A(D))return L(this.j(L(D)));if(0>this.l(m)&&0>D.l(m))return u(this.m()*D.m());for(var N=this.g.length+D.g.length,I=[],R=0;R<2*N;R++)I[R]=0;for(R=0;R<this.g.length;R++)for(var x=0;x<D.g.length;x++){var T=this.i(R)>>>16,P=this.i(R)&65535,te=D.i(x)>>>16,de=D.i(x)&65535;I[2*R+2*x]+=P*de,k(I,2*R+2*x),I[2*R+2*x+1]+=T*de,k(I,2*R+2*x+1),I[2*R+2*x+1]+=P*te,k(I,2*R+2*x+1),I[2*R+2*x+2]+=T*te,k(I,2*R+2*x+2)}for(R=0;R<N;R++)I[R]=I[2*R+1]<<16|I[2*R];for(R=N;R<2*N;R++)I[R]=0;return new o(I,0)};function k(D,N){for(;(D[N]&65535)!=D[N];)D[N+1]+=D[N]>>>16,D[N]&=65535,N++}function j(D,N){this.g=D,this.h=N}function U(D,N){if(S(N))throw Error("division by zero");if(S(D))return new j(g,g);if(A(D))return N=U(L(D),N),new j(L(N.g),L(N.h));if(A(N))return N=U(D,L(N)),new j(L(N.g),N.h);if(30<D.g.length){if(A(D)||A(N))throw Error("slowDivide_ only works with positive integers.");for(var I=v,R=N;0>=R.l(D);)I=q(I),R=q(R);var x=ee(I,1),T=ee(R,1);for(R=ee(R,2),I=ee(I,2);!S(R);){var P=T.add(R);0>=P.l(D)&&(x=x.add(I),T=P),R=ee(R,1),I=ee(I,1)}return N=b(D,x.j(N)),new j(x,N)}for(x=g;0<=D.l(N);){for(I=Math.max(1,Math.floor(D.m()/N.m())),R=Math.ceil(Math.log(I)/Math.LN2),R=48>=R?1:Math.pow(2,R-48),T=u(I),P=T.j(N);A(P)||0<P.l(D);)I-=R,T=u(I),P=T.j(N);S(T)&&(T=v),x=x.add(T),D=b(D,P)}return new j(x,D)}t.A=function(D){return U(this,D).h},t.and=function(D){for(var N=Math.max(this.g.length,D.g.length),I=[],R=0;R<N;R++)I[R]=this.i(R)&D.i(R);return new o(I,this.h&D.h)},t.or=function(D){for(var N=Math.max(this.g.length,D.g.length),I=[],R=0;R<N;R++)I[R]=this.i(R)|D.i(R);return new o(I,this.h|D.h)},t.xor=function(D){for(var N=Math.max(this.g.length,D.g.length),I=[],R=0;R<N;R++)I[R]=this.i(R)^D.i(R);return new o(I,this.h^D.h)};function q(D){for(var N=D.g.length+1,I=[],R=0;R<N;R++)I[R]=D.i(R)<<1|D.i(R-1)>>>31;return new o(I,D.h)}function ee(D,N){var I=N>>5;N%=32;for(var R=D.g.length-I,x=[],T=0;T<R;T++)x[T]=0<N?D.i(T+I)>>>N|D.i(T+I+1)<<32-N:D.i(T+I);return new o(x,D.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,pS=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=c,eu=o}).apply(typeof N_<"u"?N_:typeof self<"u"?self:typeof window<"u"?window:{});var Hf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var mS,Oh,gS,xp,a2,vS,yS,wS;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(d,_,C){return d==Array.prototype||d==Object.prototype||(d[_]=C.value),d};function n(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof Hf=="object"&&Hf];for(var _=0;_<d.length;++_){var C=d[_];if(C&&C.Math==Math)return C}throw Error("Cannot find global object")}var r=n(this);function i(d,_){if(_)e:{var C=r;d=d.split(".");for(var W=0;W<d.length-1;W++){var fe=d[W];if(!(fe in C))break e;C=C[fe]}d=d[d.length-1],W=C[d],_=_(W),_!=W&&_!=null&&e(C,d,{configurable:!0,writable:!0,value:_})}}function s(d,_){d instanceof String&&(d+="");var C=0,W=!1,fe={next:function(){if(!W&&C<d.length){var be=C++;return{value:_(be,d[be]),done:!1}}return W=!0,{done:!0,value:void 0}}};return fe[Symbol.iterator]=function(){return fe},fe}i("Array.prototype.values",function(d){return d||function(){return s(this,function(_,C){return C})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(d){var _=typeof d;return _=_!="object"?_:d?Array.isArray(d)?"array":_:"null",_=="array"||_=="object"&&typeof d.length=="number"}function u(d){var _=typeof d;return _=="object"&&d!=null||_=="function"}function c(d,_,C){return d.call.apply(d.bind,arguments)}function g(d,_,C){if(!d)throw Error();if(2<arguments.length){var W=Array.prototype.slice.call(arguments,2);return function(){var fe=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(fe,W),d.apply(_,fe)}}return function(){return d.apply(_,arguments)}}function v(d,_,C){return v=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?c:g,v.apply(null,arguments)}function m(d,_){var C=Array.prototype.slice.call(arguments,1);return function(){var W=C.slice();return W.push.apply(W,arguments),d.apply(this,W)}}function S(d,_){function C(){}C.prototype=_.prototype,d.aa=_.prototype,d.prototype=new C,d.prototype.constructor=d,d.Qb=function(W,fe,be){for(var Oe=Array(arguments.length-2),Vt=2;Vt<arguments.length;Vt++)Oe[Vt-2]=arguments[Vt];return _.prototype[fe].apply(W,Oe)}}function A(d){const _=d.length;if(0<_){const C=Array(_);for(let W=0;W<_;W++)C[W]=d[W];return C}return[]}function L(d,_){for(let C=1;C<arguments.length;C++){const W=arguments[C];if(l(W)){const fe=d.length||0,be=W.length||0;d.length=fe+be;for(let Oe=0;Oe<be;Oe++)d[fe+Oe]=W[Oe]}else d.push(W)}}class b{constructor(_,C){this.i=_,this.j=C,this.h=0,this.g=null}get(){let _;return 0<this.h?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function k(d){return/^[\s\xa0]*$/.test(d)}function j(){var d=a.navigator;return d&&(d=d.userAgent)?d:""}function U(d){return U[" "](d),d}U[" "]=function(){};var q=j().indexOf("Gecko")!=-1&&!(j().toLowerCase().indexOf("webkit")!=-1&&j().indexOf("Edge")==-1)&&!(j().indexOf("Trident")!=-1||j().indexOf("MSIE")!=-1)&&j().indexOf("Edge")==-1;function ee(d,_,C){for(const W in d)_.call(C,d[W],W,d)}function D(d,_){for(const C in d)_.call(void 0,d[C],C,d)}function N(d){const _={};for(const C in d)_[C]=d[C];return _}const I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function R(d,_){let C,W;for(let fe=1;fe<arguments.length;fe++){W=arguments[fe];for(C in W)d[C]=W[C];for(let be=0;be<I.length;be++)C=I[be],Object.prototype.hasOwnProperty.call(W,C)&&(d[C]=W[C])}}function x(d){var _=1;d=d.split(":");const C=[];for(;0<_&&d.length;)C.push(d.shift()),_--;return d.length&&C.push(d.join(":")),C}function T(d){a.setTimeout(()=>{throw d},0)}function P(){var d=oe;let _=null;return d.g&&(_=d.g,d.g=d.g.next,d.g||(d.h=null),_.next=null),_}class te{constructor(){this.h=this.g=null}add(_,C){const W=de.get();W.set(_,C),this.h?this.h.next=W:this.g=W,this.h=W}}var de=new b(()=>new me,d=>d.reset());class me{constructor(){this.next=this.g=this.h=null}set(_,C){this.h=_,this.g=C,this.next=null}reset(){this.next=this.g=this.h=null}}let ge,Q=!1,oe=new te,ae=()=>{const d=a.Promise.resolve(void 0);ge=()=>{d.then(he)}};var he=()=>{for(var d;d=P();){try{d.h.call(d.g)}catch(C){T(C)}var _=de;_.j(d),100>_.h&&(_.h++,d.next=_.g,_.g=d)}Q=!1};function F(){this.s=this.s,this.C=this.C}F.prototype.s=!1,F.prototype.ma=function(){this.s||(this.s=!0,this.N())},F.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function G(d,_){this.type=d,this.g=this.target=_,this.defaultPrevented=!1}G.prototype.h=function(){this.defaultPrevented=!0};var B=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var d=!1,_=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const C=()=>{};a.addEventListener("test",C,_),a.removeEventListener("test",C,_)}catch{}return d}();function Z(d,_){if(G.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d){var C=this.type=d.type,W=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;if(this.target=d.target||d.srcElement,this.g=_,_=d.relatedTarget){if(q){e:{try{U(_.nodeName);var fe=!0;break e}catch{}fe=!1}fe||(_=null)}}else C=="mouseover"?_=d.fromElement:C=="mouseout"&&(_=d.toElement);this.relatedTarget=_,W?(this.clientX=W.clientX!==void 0?W.clientX:W.pageX,this.clientY=W.clientY!==void 0?W.clientY:W.pageY,this.screenX=W.screenX||0,this.screenY=W.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=typeof d.pointerType=="string"?d.pointerType:ne[d.pointerType]||"",this.state=d.state,this.i=d,d.defaultPrevented&&Z.aa.h.call(this)}}S(Z,G);var ne={2:"touch",3:"pen",4:"mouse"};Z.prototype.h=function(){Z.aa.h.call(this);var d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var ie="closure_listenable_"+(1e6*Math.random()|0),ve=0;function _e(d,_,C,W,fe){this.listener=d,this.proxy=null,this.src=_,this.type=C,this.capture=!!W,this.ha=fe,this.key=++ve,this.da=this.fa=!1}function xe(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function ke(d){this.src=d,this.g={},this.h=0}ke.prototype.add=function(d,_,C,W,fe){var be=d.toString();d=this.g[be],d||(d=this.g[be]=[],this.h++);var Oe=De(d,_,W,fe);return-1<Oe?(_=d[Oe],C||(_.fa=!1)):(_=new _e(_,this.src,be,!!W,fe),_.fa=C,d.push(_)),_};function Fe(d,_){var C=_.type;if(C in d.g){var W=d.g[C],fe=Array.prototype.indexOf.call(W,_,void 0),be;(be=0<=fe)&&Array.prototype.splice.call(W,fe,1),be&&(xe(_),d.g[C].length==0&&(delete d.g[C],d.h--))}}function De(d,_,C,W){for(var fe=0;fe<d.length;++fe){var be=d[fe];if(!be.da&&be.listener==_&&be.capture==!!C&&be.ha==W)return fe}return-1}var $e="closure_lm_"+(1e6*Math.random()|0),K={};function Ue(d,_,C,W,fe){if(Array.isArray(_)){for(var be=0;be<_.length;be++)Ue(d,_[be],C,W,fe);return null}return C=Lt(C),d&&d[ie]?d.K(_,C,u(W)?!!W.capture:!1,fe):Et(d,_,C,!1,W,fe)}function Et(d,_,C,W,fe,be){if(!_)throw Error("Invalid event type");var Oe=u(fe)?!!fe.capture:!!fe,Vt=tt(d);if(Vt||(d[$e]=Vt=new ke(d)),C=Vt.add(_,C,W,Oe,be),C.proxy)return C;if(W=ut(),C.proxy=W,W.src=d,W.listener=C,d.addEventListener)B||(fe=Oe),fe===void 0&&(fe=!1),d.addEventListener(_.toString(),W,fe);else if(d.attachEvent)d.attachEvent(Be(_.toString()),W);else if(d.addListener&&d.removeListener)d.addListener(W);else throw Error("addEventListener and attachEvent are unavailable.");return C}function ut(){function d(C){return _.call(d.src,d.listener,C)}const _=ot;return d}function Ce(d,_,C,W,fe){if(Array.isArray(_))for(var be=0;be<_.length;be++)Ce(d,_[be],C,W,fe);else W=u(W)?!!W.capture:!!W,C=Lt(C),d&&d[ie]?(d=d.i,_=String(_).toString(),_ in d.g&&(be=d.g[_],C=De(be,C,W,fe),-1<C&&(xe(be[C]),Array.prototype.splice.call(be,C,1),be.length==0&&(delete d.g[_],d.h--)))):d&&(d=tt(d))&&(_=d.g[_.toString()],d=-1,_&&(d=De(_,C,W,fe)),(C=-1<d?_[d]:null)&&it(C))}function it(d){if(typeof d!="number"&&d&&!d.da){var _=d.src;if(_&&_[ie])Fe(_.i,d);else{var C=d.type,W=d.proxy;_.removeEventListener?_.removeEventListener(C,W,d.capture):_.detachEvent?_.detachEvent(Be(C),W):_.addListener&&_.removeListener&&_.removeListener(W),(C=tt(_))?(Fe(C,d),C.h==0&&(C.src=null,_[$e]=null)):xe(d)}}}function Be(d){return d in K?K[d]:K[d]="on"+d}function ot(d,_){if(d.da)d=!0;else{_=new Z(_,this);var C=d.listener,W=d.ha||d.src;d.fa&&it(d),d=C.call(W,_)}return d}function tt(d){return d=d[$e],d instanceof ke?d:null}var qt="__closure_events_fn_"+(1e9*Math.random()>>>0);function Lt(d){return typeof d=="function"?d:(d[qt]||(d[qt]=function(_){return d.handleEvent(_)}),d[qt])}function Ze(){F.call(this),this.i=new ke(this),this.M=this,this.F=null}S(Ze,F),Ze.prototype[ie]=!0,Ze.prototype.removeEventListener=function(d,_,C,W){Ce(this,d,_,C,W)};function ft(d,_){var C,W=d.F;if(W)for(C=[];W;W=W.F)C.push(W);if(d=d.M,W=_.type||_,typeof _=="string")_=new G(_,d);else if(_ instanceof G)_.target=_.target||d;else{var fe=_;_=new G(W,d),R(_,fe)}if(fe=!0,C)for(var be=C.length-1;0<=be;be--){var Oe=_.g=C[be];fe=kt(Oe,W,!0,_)&&fe}if(Oe=_.g=d,fe=kt(Oe,W,!0,_)&&fe,fe=kt(Oe,W,!1,_)&&fe,C)for(be=0;be<C.length;be++)Oe=_.g=C[be],fe=kt(Oe,W,!1,_)&&fe}Ze.prototype.N=function(){if(Ze.aa.N.call(this),this.i){var d=this.i,_;for(_ in d.g){for(var C=d.g[_],W=0;W<C.length;W++)xe(C[W]);delete d.g[_],d.h--}}this.F=null},Ze.prototype.K=function(d,_,C,W){return this.i.add(String(d),_,!1,C,W)},Ze.prototype.L=function(d,_,C,W){return this.i.add(String(d),_,!0,C,W)};function kt(d,_,C,W){if(_=d.i.g[String(_)],!_)return!0;_=_.concat();for(var fe=!0,be=0;be<_.length;++be){var Oe=_[be];if(Oe&&!Oe.da&&Oe.capture==C){var Vt=Oe.listener,On=Oe.ha||Oe.src;Oe.fa&&Fe(d.i,Oe),fe=Vt.call(On,W)!==!1&&fe}}return fe&&!W.defaultPrevented}function Ge(d,_,C){if(typeof d=="function")C&&(d=v(d,C));else if(d&&typeof d.handleEvent=="function")d=v(d.handleEvent,d);else throw Error("Invalid listener argument");return 2147483647<Number(_)?-1:a.setTimeout(d,_||0)}function wt(d){d.g=Ge(()=>{d.g=null,d.i&&(d.i=!1,wt(d))},d.l);const _=d.h;d.h=null,d.m.apply(null,_)}class et extends F{constructor(_,C){super(),this.m=_,this.l=C,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:wt(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function hn(d){F.call(this),this.h=d,this.g={}}S(hn,F);var Ot=[];function It(d){ee(d.g,function(_,C){this.g.hasOwnProperty(C)&&it(_)},d),d.g={}}hn.prototype.N=function(){hn.aa.N.call(this),It(this)},hn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Nt=a.JSON.stringify,vn=a.JSON.parse,st=class{stringify(d){return a.JSON.stringify(d,void 0)}parse(d){return a.JSON.parse(d,void 0)}};function Xt(){}Xt.prototype.h=null;function ht(d){return d.h||(d.h=d.i())}function vt(){}var Zt={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Tt(){G.call(this,"d")}S(Tt,G);function at(){G.call(this,"c")}S(at,G);var Rt={},Gs=null;function Kn(){return Gs=Gs||new Ze}Rt.La="serverreachability";function es(d){G.call(this,Rt.La,d)}S(es,G);function Vr(d){const _=Kn();ft(_,new es(_))}Rt.STAT_EVENT="statevent";function ct(d,_){G.call(this,Rt.STAT_EVENT,d),this.stat=_}S(ct,G);function bn(d){const _=Kn();ft(_,new ct(_,d))}Rt.Ma="timingevent";function ts(d,_){G.call(this,Rt.Ma,d),this.size=_}S(ts,G);function wr(d,_){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){d()},_)}function _r(){this.g=!0}_r.prototype.xa=function(){this.g=!1};function Tn(d,_,C,W,fe,be){d.info(function(){if(d.g)if(be)for(var Oe="",Vt=be.split("&"),On=0;On<Vt.length;On++){var jt=Vt[On].split("=");if(1<jt.length){var Yt=jt[0];jt=jt[1];var yn=Yt.split("_");Oe=2<=yn.length&&yn[1]=="type"?Oe+(Yt+"="+jt+"&"):Oe+(Yt+"=redacted&")}}else Oe=null;else Oe=be;return"XMLHTTP REQ ("+W+") [attempt "+fe+"]: "+_+`
`+C+`
`+Oe})}function or(d,_,C,W,fe,be,Oe){d.info(function(){return"XMLHTTP RESP ("+W+") [ attempt "+fe+"]: "+_+`
`+C+`
`+be+" "+Oe})}function kn(d,_,C,W){d.info(function(){return"XMLHTTP TEXT ("+_+"): "+Ks(d,C)+(W?" "+W:"")})}function Ao(d,_){d.info(function(){return"TIMEOUT: "+_})}_r.prototype.info=function(){};function Ks(d,_){if(!d.g)return _;if(!_)return null;try{var C=JSON.parse(_);if(C){for(d=0;d<C.length;d++)if(Array.isArray(C[d])){var W=C[d];if(!(2>W.length)){var fe=W[1];if(Array.isArray(fe)&&!(1>fe.length)){var be=fe[0];if(be!="noop"&&be!="stop"&&be!="close")for(var Oe=1;Oe<fe.length;Oe++)fe[Oe]=""}}}}return Nt(C)}catch{return _}}var Br={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ci={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},si;function zr(){}S(zr,Xt),zr.prototype.g=function(){return new XMLHttpRequest},zr.prototype.i=function(){return{}},si=new zr;function Yn(d,_,C,W){this.j=d,this.i=_,this.l=C,this.R=W||1,this.U=new hn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ys}function Ys(){this.i=null,this.g="",this.h=!1}var Li={},bs={};function Qs(d,_,C){d.L=1,d.v=Po(dr(_)),d.m=C,d.P=!0,Eo(d,null)}function Eo(d,_){d.F=Date.now(),Js(d),d.A=dr(d.v);var C=d.A,W=d.R;Array.isArray(W)||(W=[String(W)]),Ru(C.i,"t",W),d.C=0,C=d.j.J,d.h=new Ys,d.g=zn(d.j,C?_:null,!d.m),0<d.O&&(d.M=new et(v(d.Y,d,d.g),d.O)),_=d.U,C=d.g,W=d.ca;var fe="readystatechange";Array.isArray(fe)||(fe&&(Ot[0]=fe.toString()),fe=Ot);for(var be=0;be<fe.length;be++){var Oe=Ue(C,fe[be],W||_.handleEvent,!1,_.h||_);if(!Oe)break;_.g[Oe.key]=Oe}_=d.H?N(d.H):{},d.m?(d.u||(d.u="POST"),_["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.A,d.u,d.m,_)):(d.u="GET",d.g.ea(d.A,d.u,null,_)),Vr(),Tn(d.i,d.u,d.A,d.l,d.R,d.m)}Yn.prototype.ca=function(d){d=d.target;const _=this.M;_&&oi(d)==3?_.j():this.Y(d)},Yn.prototype.Y=function(d){try{if(d==this.g)e:{const yn=oi(this.g);var _=this.g.Ba();const Di=this.g.Z();if(!(3>yn)&&(yn!=3||this.g&&(this.h.h||this.g.oa()||Ol(this.g)))){this.J||yn!=4||_==7||(_==8||0>=Di?Vr(3):Vr(2)),va(this);var C=this.g.Z();this.X=C;t:if(Io(this)){var W=Ol(this.g);d="";var fe=W.length,be=oi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ri(this),xr(this);var Oe="";break t}this.h.i=new a.TextDecoder}for(_=0;_<fe;_++)this.h.h=!0,d+=this.h.i.decode(W[_],{stream:!(be&&_==fe-1)});W.length=0,this.h.g+=d,this.C=0,Oe=this.h.g}else Oe=this.g.oa();if(this.o=C==200,or(this.i,this.u,this.A,this.l,this.R,yn,C),this.o){if(this.T&&!this.K){t:{if(this.g){var Vt,On=this.g;if((Vt=On.g?On.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!k(Vt)){var jt=Vt;break t}}jt=null}if(C=jt)kn(this.i,this.l,C,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ya(this,C);else{this.o=!1,this.s=3,bn(12),Ri(this),xr(this);break e}}if(this.P){C=!0;let qr;for(;!this.J&&this.C<Oe.length;)if(qr=Xc(this,Oe),qr==bs){yn==4&&(this.s=4,bn(14),C=!1),kn(this.i,this.l,null,"[Incomplete Response]");break}else if(qr==Li){this.s=4,bn(15),kn(this.i,this.l,Oe,"[Invalid Chunk]"),C=!1;break}else kn(this.i,this.l,qr,null),ya(this,qr);if(Io(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),yn!=4||Oe.length!=0||this.h.h||(this.s=1,bn(16),C=!1),this.o=this.o&&C,!C)kn(this.i,this.l,Oe,"[Invalid Chunked Response]"),Ri(this),xr(this);else if(0<Oe.length&&!this.W){this.W=!0;var Yt=this.j;Yt.g==this&&Yt.ba&&!Yt.M&&(Yt.j.info("Great, no buffering proxy detected. Bytes received: "+Oe.length),ze(Yt),Yt.M=!0,bn(11))}}else kn(this.i,this.l,Oe,null),ya(this,Oe);yn==4&&Ri(this),this.o&&!this.J&&(yn==4?_t(this.j,this):(this.o=!1,Js(this)))}else Du(this.g),C==400&&0<Oe.indexOf("Unknown SID")?(this.s=3,bn(12)):(this.s=0,bn(13)),Ri(this),xr(this)}}}catch{}finally{}};function Io(d){return d.g?d.u=="GET"&&d.L!=2&&d.j.Ca:!1}function Xc(d,_){var C=d.C,W=_.indexOf(`
`,C);return W==-1?bs:(C=Number(_.substring(C,W)),isNaN(C)?Li:(W+=1,W+C>_.length?bs:(_=_.slice(W,W+C),d.C=W+C,_)))}Yn.prototype.cancel=function(){this.J=!0,Ri(this)};function Js(d){d.S=Date.now()+d.I,Il(d,d.I)}function Il(d,_){if(d.B!=null)throw Error("WatchDog timer not null");d.B=wr(v(d.ba,d),_)}function va(d){d.B&&(a.clearTimeout(d.B),d.B=null)}Yn.prototype.ba=function(){this.B=null;const d=Date.now();0<=d-this.S?(Ao(this.i,this.A),this.L!=2&&(Vr(),bn(17)),Ri(this),this.s=2,xr(this)):Il(this,this.S-d)};function xr(d){d.j.G==0||d.J||_t(d.j,d)}function Ri(d){va(d);var _=d.M;_&&typeof _.ma=="function"&&_.ma(),d.M=null,It(d.U),d.g&&(_=d.g,d.g=null,_.abort(),_.ma())}function ya(d,_){try{var C=d.j;if(C.G!=0&&(C.g==d||vi(C.h,d))){if(!d.K&&vi(C.h,d)&&C.G==3){try{var W=C.Da.g.parse(_)}catch{W=null}if(Array.isArray(W)&&W.length==3){var fe=W;if(fe[0]==0){e:if(!C.u){if(C.g)if(C.g.F+3e3<d.F)pt(C),ls(C);else break e;Te(C),bn(18)}}else C.za=fe[1],0<C.za-C.T&&37500>fe[2]&&C.F&&C.v==0&&!C.C&&(C.C=wr(v(C.Za,C),6e3));if(1>=Cl(C.h)&&C.ca){try{C.ca()}catch{}C.ca=void 0}}else Jt(C,11)}else if((d.K||C.g==d)&&pt(C),!k(_))for(fe=C.Da.g.parse(_),_=0;_<fe.length;_++){let jt=fe[_];if(C.T=jt[0],jt=jt[1],C.G==2)if(jt[0]=="c"){C.K=jt[1],C.ia=jt[2];const Yt=jt[3];Yt!=null&&(C.la=Yt,C.j.info("VER="+C.la));const yn=jt[4];yn!=null&&(C.Aa=yn,C.j.info("SVER="+C.Aa));const Di=jt[5];Di!=null&&typeof Di=="number"&&0<Di&&(W=1.5*Di,C.L=W,C.j.info("backChannelRequestTimeoutMs_="+W)),W=C;const qr=d.g;if(qr){const kr=qr.g?qr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(kr){var be=W.h;be.g||kr.indexOf("spdy")==-1&&kr.indexOf("quic")==-1&&kr.indexOf("h2")==-1||(be.j=be.l,be.g=new Set,be.h&&(Xs(be,be.h),be.h=null))}if(W.D){const As=qr.g?qr.g.getResponseHeader("X-HTTP-Session-Id"):null;As&&(W.ya=As,Ft(W.I,W.D,As))}}C.G=3,C.l&&C.l.ua(),C.ba&&(C.R=Date.now()-d.F,C.j.info("Handshake RTT: "+C.R+"ms")),W=C;var Oe=d;if(W.qa=tn(W,W.J?W.ia:null,W.W),Oe.K){Tu(W.h,Oe);var Vt=Oe,On=W.L;On&&(Vt.I=On),Vt.B&&(va(Vt),Js(Vt)),W.g=Oe}else Ne(W);0<C.i.length&&y(C)}else jt[0]!="stop"&&jt[0]!="close"||Jt(C,7);else C.G==3&&(jt[0]=="stop"||jt[0]=="close"?jt[0]=="stop"?Jt(C,7):Na(C):jt[0]!="noop"&&C.l&&C.l.ta(jt),C.v=0)}}Vr(4)}catch{}}var Tl=class{constructor(d,_){this.g=d,this.map=_}};function kl(d){this.l=d||10,a.PerformanceNavigationTiming?(d=a.performance.getEntriesByType("navigation"),d=0<d.length&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Pl(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function Cl(d){return d.h?1:d.g?d.g.size:0}function vi(d,_){return d.h?d.h==_:d.g?d.g.has(_):!1}function Xs(d,_){d.g?d.g.add(_):d.h=_}function Tu(d,_){d.h&&d.h==_?d.h=null:d.g&&d.g.has(_)&&d.g.delete(_)}kl.prototype.cancel=function(){if(this.i=Ln(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function Ln(d){if(d.h!=null)return d.i.concat(d.h.D);if(d.g!=null&&d.g.size!==0){let _=d.i;for(const C of d.g.values())_=_.concat(C.D);return _}return A(d.i)}function ku(d){if(d.V&&typeof d.V=="function")return d.V();if(typeof Map<"u"&&d instanceof Map||typeof Set<"u"&&d instanceof Set)return Array.from(d.values());if(typeof d=="string")return d.split("");if(l(d)){for(var _=[],C=d.length,W=0;W<C;W++)_.push(d[W]);return _}_=[],C=0;for(W in d)_[C++]=d[W];return _}function ns(d){if(d.na&&typeof d.na=="function")return d.na();if(!d.V||typeof d.V!="function"){if(typeof Map<"u"&&d instanceof Map)return Array.from(d.keys());if(!(typeof Set<"u"&&d instanceof Set)){if(l(d)||typeof d=="string"){var _=[];d=d.length;for(var C=0;C<d;C++)_.push(C);return _}_=[],C=0;for(const W in d)_[C++]=W;return _}}}function To(d,_){if(d.forEach&&typeof d.forEach=="function")d.forEach(_,void 0);else if(l(d)||typeof d=="string")Array.prototype.forEach.call(d,_,void 0);else for(var C=ns(d),W=ku(d),fe=W.length,be=0;be<fe;be++)_.call(void 0,W[be],C&&C[be],d)}var Ll=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function yi(d,_){if(d){d=d.split("&");for(var C=0;C<d.length;C++){var W=d[C].indexOf("="),fe=null;if(0<=W){var be=d[C].substring(0,W);fe=d[C].substring(W+1)}else be=d[C];_(be,fe?decodeURIComponent(fe.replace(/\+/g," ")):"")}}}function dn(d){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,d instanceof dn){this.h=d.h,ko(this,d.j),this.o=d.o,this.g=d.g,wa(this,d.s),this.l=d.l;var _=d.i,C=new Tr;C.i=_.i,_.g&&(C.g=new Map(_.g),C.h=_.h),Pu(this,C),this.m=d.m}else d&&(_=String(d).match(Ll))?(this.h=!1,ko(this,_[1]||"",!0),this.o=Zs(_[2]||""),this.g=Zs(_[3]||"",!0),wa(this,_[4]),this.l=Zs(_[5]||"",!0),Pu(this,_[6]||"",!0),this.m=Zs(_[7]||"")):(this.h=!1,this.i=new Tr(null,this.h))}dn.prototype.toString=function(){var d=[],_=this.j;_&&d.push(rs(_,Cu,!0),":");var C=this.g;return(C||_=="file")&&(d.push("//"),(_=this.o)&&d.push(rs(_,Cu,!0),"@"),d.push(encodeURIComponent(String(C)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),C=this.s,C!=null&&d.push(":",String(C))),(C=this.l)&&(this.g&&C.charAt(0)!="/"&&d.push("/"),d.push(rs(C,C.charAt(0)=="/"?eh:Zc,!0))),(C=this.i.toString())&&d.push("?",C),(C=this.m)&&d.push("#",rs(C,Lu)),d.join("")};function dr(d){return new dn(d)}function ko(d,_,C){d.j=C?Zs(_,!0):_,d.j&&(d.j=d.j.replace(/:$/,""))}function wa(d,_){if(_){if(_=Number(_),isNaN(_)||0>_)throw Error("Bad port number "+_);d.s=_}else d.s=null}function Pu(d,_,C){_ instanceof Tr?(d.i=_,th(d.i,d.h)):(C||(_=rs(_,Rl)),d.i=new Tr(_,d.h))}function Ft(d,_,C){d.i.set(_,C)}function Po(d){return Ft(d,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),d}function Zs(d,_){return d?_?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function rs(d,_,C){return typeof d=="string"?(d=encodeURI(d).replace(_,Co),C&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function Co(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var Cu=/[#\/\?@]/g,Zc=/[#\?:]/g,eh=/[#\?]/g,Rl=/[#\?@]/g,Lu=/#/g;function Tr(d,_){this.h=this.g=null,this.i=d||null,this.j=!!_}function is(d){d.g||(d.g=new Map,d.h=0,d.i&&yi(d.i,function(_,C){d.add(decodeURIComponent(_.replace(/\+/g," ")),C)}))}t=Tr.prototype,t.add=function(d,_){is(this),this.i=null,d=dt(this,d);var C=this.g.get(d);return C||this.g.set(d,C=[]),C.push(_),this.h+=1,this};function eo(d,_){is(d),_=dt(d,_),d.g.has(_)&&(d.i=null,d.h-=d.g.get(_).length,d.g.delete(_))}function _a(d,_){return is(d),_=dt(d,_),d.g.has(_)}t.forEach=function(d,_){is(this),this.g.forEach(function(C,W){C.forEach(function(fe){d.call(_,fe,W,this)},this)},this)},t.na=function(){is(this);const d=Array.from(this.g.values()),_=Array.from(this.g.keys()),C=[];for(let W=0;W<_.length;W++){const fe=d[W];for(let be=0;be<fe.length;be++)C.push(_[W])}return C},t.V=function(d){is(this);let _=[];if(typeof d=="string")_a(this,d)&&(_=_.concat(this.g.get(dt(this,d))));else{d=Array.from(this.g.values());for(let C=0;C<d.length;C++)_=_.concat(d[C])}return _},t.set=function(d,_){return is(this),this.i=null,d=dt(this,d),_a(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[_]),this.h+=1,this},t.get=function(d,_){return d?(d=this.V(d),0<d.length?String(d[0]):_):_};function Ru(d,_,C){eo(d,_),0<C.length&&(d.i=null,d.g.set(dt(d,_),A(C)),d.h+=C.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],_=Array.from(this.g.keys());for(var C=0;C<_.length;C++){var W=_[C];const be=encodeURIComponent(String(W)),Oe=this.V(W);for(W=0;W<Oe.length;W++){var fe=be;Oe[W]!==""&&(fe+="="+encodeURIComponent(String(Oe[W]))),d.push(fe)}}return this.i=d.join("&")};function dt(d,_){return _=String(_),d.j&&(_=_.toLowerCase()),_}function th(d,_){_&&!d.j&&(is(d),d.i=null,d.g.forEach(function(C,W){var fe=W.toLowerCase();W!=fe&&(eo(this,W),Ru(this,fe,C))},d)),d.j=_}function nh(d,_){const C=new _r;if(a.Image){const W=new Image;W.onload=m(br,C,"TestLoadImage: loaded",!0,_,W),W.onerror=m(br,C,"TestLoadImage: error",!1,_,W),W.onabort=m(br,C,"TestLoadImage: abort",!1,_,W),W.ontimeout=m(br,C,"TestLoadImage: timeout",!1,_,W),a.setTimeout(function(){W.ontimeout&&W.ontimeout()},1e4),W.src=d}else _(!1)}function rh(d,_){const C=new _r,W=new AbortController,fe=setTimeout(()=>{W.abort(),br(C,"TestPingServer: timeout",!1,_)},1e4);fetch(d,{signal:W.signal}).then(be=>{clearTimeout(fe),be.ok?br(C,"TestPingServer: ok",!0,_):br(C,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(fe),br(C,"TestPingServer: error",!1,_)})}function br(d,_,C,W,fe){try{fe&&(fe.onload=null,fe.onerror=null,fe.onabort=null,fe.ontimeout=null),W(C)}catch{}}function Ss(){this.g=new st}function ih(d,_,C){const W=C||"";try{To(d,function(fe,be){let Oe=fe;u(fe)&&(Oe=Nt(fe)),_.push(W+be+"="+encodeURIComponent(Oe))})}catch(fe){throw _.push(W+"type="+encodeURIComponent("_badmap")),fe}}function xa(d){this.l=d.Ub||null,this.j=d.eb||!1}S(xa,Xt),xa.prototype.g=function(){return new Ns(this.l,this.j)},xa.prototype.i=function(d){return function(){return d}}({});function Ns(d,_){Ze.call(this),this.D=d,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}S(Ns,Ze),t=Ns.prototype,t.open=function(d,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=d,this.A=_,this.readyState=1,Lo(this)},t.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const _={headers:this.u,method:this.B,credentials:this.m,cache:void 0};d&&(_.body=d),(this.D||a).fetch(new Request(this.A,_)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ji(this)),this.readyState=0},t.Sa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,Lo(this)),this.g&&(this.readyState=3,Lo(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ba(this)}else d.text().then(this.Ra.bind(this),this.ga.bind(this))};function ba(d){d.j.read().then(d.Pa.bind(d)).catch(d.ga.bind(d))}t.Pa=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var _=d.value?d.value:new Uint8Array(0);(_=this.v.decode(_,{stream:!d.done}))&&(this.response=this.responseText+=_)}d.done?ji(this):Lo(this),this.readyState==3&&ba(this)}},t.Ra=function(d){this.g&&(this.response=this.responseText=d,ji(this))},t.Qa=function(d){this.g&&(this.response=d,ji(this))},t.ga=function(){this.g&&ji(this)};function ji(d){d.readyState=4,d.l=null,d.j=null,d.v=null,Lo(d)}t.setRequestHeader=function(d,_){this.u.append(d,_)},t.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],_=this.h.entries();for(var C=_.next();!C.done;)C=C.value,d.push(C[0]+": "+C[1]),C=_.next();return d.join(`\r
`)};function Lo(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(Ns.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function ss(d){let _="";return ee(d,function(C,W){_+=W,_+=":",_+=C,_+=`\r
`}),_}function jl(d,_,C){e:{for(W in C){var W=!1;break e}W=!0}W||(C=ss(C),typeof d=="string"?C!=null&&encodeURIComponent(String(C)):Ft(d,_,C))}function un(d){Ze.call(this),this.headers=new Map,this.o=d||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}S(un,Ze);var Dl=/^https?$/i,ju=["POST","PUT"];t=un.prototype,t.Ha=function(d){this.J=d},t.ea=function(d,_,C,W){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);_=_?_.toUpperCase():"GET",this.D=d,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():si.g(),this.v=this.o?ht(this.o):ht(si),this.g.onreadystatechange=v(this.Ea,this);try{this.B=!0,this.g.open(_,String(d),!0),this.B=!1}catch(be){os(this,be);return}if(d=C||"",C=new Map(this.headers),W)if(Object.getPrototypeOf(W)===Object.prototype)for(var fe in W)C.set(fe,W[fe]);else if(typeof W.keys=="function"&&typeof W.get=="function")for(const be of W.keys())C.set(be,W.get(be));else throw Error("Unknown input type for opt_headers: "+String(W));W=Array.from(C.keys()).find(be=>be.toLowerCase()=="content-type"),fe=a.FormData&&d instanceof a.FormData,!(0<=Array.prototype.indexOf.call(ju,_,void 0))||W||fe||C.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[be,Oe]of C)this.g.setRequestHeader(be,Oe);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{no(this),this.u=!0,this.g.send(d),this.u=!1}catch(be){os(this,be)}};function os(d,_){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=_,d.m=5,Sa(d),to(d)}function Sa(d){d.A||(d.A=!0,ft(d,"complete"),ft(d,"error"))}t.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=d||7,ft(this,"complete"),ft(this,"abort"),to(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),to(this,!0)),un.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Ro(this):this.bb())},t.bb=function(){Ro(this)};function Ro(d){if(d.h&&typeof o<"u"&&(!d.v[1]||oi(d)!=4||d.Z()!=2)){if(d.u&&oi(d)==4)Ge(d.Ea,0,d);else if(ft(d,"readystatechange"),oi(d)==4){d.h=!1;try{const Oe=d.Z();e:switch(Oe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var C;if(!(C=_)){var W;if(W=Oe===0){var fe=String(d.D).match(Ll)[1]||null;!fe&&a.self&&a.self.location&&(fe=a.self.location.protocol.slice(0,-1)),W=!Dl.test(fe?fe.toLowerCase():"")}C=W}if(C)ft(d,"complete"),ft(d,"success");else{d.m=6;try{var be=2<oi(d)?d.g.statusText:""}catch{be=""}d.l=be+" ["+d.Z()+"]",Sa(d)}}finally{to(d)}}}}function to(d,_){if(d.g){no(d);const C=d.g,W=d.v[0]?()=>{}:null;d.g=null,d.v=null,_||ft(d,"ready");try{C.onreadystatechange=W}catch{}}}function no(d){d.I&&(a.clearTimeout(d.I),d.I=null)}t.isActive=function(){return!!this.g};function oi(d){return d.g?d.g.readyState:0}t.Z=function(){try{return 2<oi(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(d){if(this.g){var _=this.g.responseText;return d&&_.indexOf(d)==0&&(_=_.substring(d.length)),vn(_)}};function Ol(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.H){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function Du(d){const _={};d=(d.g&&2<=oi(d)&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let W=0;W<d.length;W++){if(k(d[W]))continue;var C=x(d[W]);const fe=C[0];if(C=C[1],typeof C!="string")continue;C=C.trim();const be=_[fe]||[];_[fe]=be,be.push(C)}D(_,function(W){return W.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ai(d,_,C){return C&&C.internalChannelParams&&C.internalChannelParams[d]||_}function as(d){this.Aa=0,this.i=[],this.j=new _r,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ai("failFast",!1,d),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ai("baseRetryDelayMs",5e3,d),this.cb=ai("retryDelaySeedMs",1e4,d),this.Wa=ai("forwardChannelMaxRetries",2,d),this.wa=ai("forwardChannelRequestTimeoutMs",2e4,d),this.pa=d&&d.xmlHttpFactory||void 0,this.Xa=d&&d.Tb||void 0,this.Ca=d&&d.useFetchStreams||!1,this.L=void 0,this.J=d&&d.supportsCrossDomainXhr||!1,this.K="",this.h=new kl(d&&d.concurrentRequestLimit),this.Da=new Ss,this.P=d&&d.fastHandshake||!1,this.O=d&&d.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=d&&d.Rb||!1,d&&d.xa&&this.j.xa(),d&&d.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&d&&d.detectBufferingProxy||!1,this.ja=void 0,d&&d.longPollingTimeout&&0<d.longPollingTimeout&&(this.ja=d.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=as.prototype,t.la=8,t.G=1,t.connect=function(d,_,C,W){bn(0),this.W=d,this.H=_||{},C&&W!==void 0&&(this.H.OSID=C,this.H.OAID=W),this.F=this.X,this.I=tn(this,null,this.W),y(this)};function Na(d){if(Fl(d),d.G==3){var _=d.U++,C=dr(d.I);if(Ft(C,"SID",d.K),Ft(C,"RID",_),Ft(C,"TYPE","terminate"),re(d,C),_=new Yn(d,d.j,_),_.L=2,_.v=Po(dr(C)),C=!1,a.navigator&&a.navigator.sendBeacon)try{C=a.navigator.sendBeacon(_.v.toString(),"")}catch{}!C&&a.Image&&(new Image().src=_.v,C=!0),C||(_.g=zn(_.j,null),_.g.ea(_.v)),_.F=Date.now(),Js(_)}Rn(d)}function ls(d){d.g&&(ze(d),d.g.cancel(),d.g=null)}function Fl(d){ls(d),d.u&&(a.clearTimeout(d.u),d.u=null),pt(d),d.h.cancel(),d.s&&(typeof d.s=="number"&&a.clearTimeout(d.s),d.s=null)}function y(d){if(!Pl(d.h)&&!d.s){d.s=!0;var _=d.Ga;ge||ae(),Q||(ge(),Q=!0),oe.add(_,d),d.B=0}}function O(d,_){return Cl(d.h)>=d.h.j-(d.s?1:0)?!1:d.s?(d.i=_.D.concat(d.i),!0):d.G==1||d.G==2||d.B>=(d.Va?0:d.Wa)?!1:(d.s=wr(v(d.Ga,d,_),Mt(d,d.B)),d.B++,!0)}t.Ga=function(d){if(this.s)if(this.s=null,this.G==1){if(!d){this.U=Math.floor(1e5*Math.random()),d=this.U++;const fe=new Yn(this,this.j,d);let be=this.o;if(this.S&&(be?(be=N(be),R(be,this.S)):be=this.S),this.m!==null||this.O||(fe.H=be,be=null),this.P)e:{for(var _=0,C=0;C<this.i.length;C++){t:{var W=this.i[C];if("__data__"in W.map&&(W=W.map.__data__,typeof W=="string")){W=W.length;break t}W=void 0}if(W===void 0)break;if(_+=W,4096<_){_=C;break e}if(_===4096||C===this.i.length-1){_=C+1;break e}}_=1e3}else _=1e3;_=ce(this,fe,_),C=dr(this.I),Ft(C,"RID",d),Ft(C,"CVER",22),this.D&&Ft(C,"X-HTTP-Session-Id",this.D),re(this,C),be&&(this.O?_="headers="+encodeURIComponent(String(ss(be)))+"&"+_:this.m&&jl(C,this.m,be)),Xs(this.h,fe),this.Ua&&Ft(C,"TYPE","init"),this.P?(Ft(C,"$req",_),Ft(C,"SID","null"),fe.T=!0,Qs(fe,C,null)):Qs(fe,C,_),this.G=2}}else this.G==3&&(d?Y(this,d):this.i.length==0||Pl(this.h)||Y(this))};function Y(d,_){var C;_?C=_.l:C=d.U++;const W=dr(d.I);Ft(W,"SID",d.K),Ft(W,"RID",C),Ft(W,"AID",d.T),re(d,W),d.m&&d.o&&jl(W,d.m,d.o),C=new Yn(d,d.j,C,d.B+1),d.m===null&&(C.H=d.o),_&&(d.i=_.D.concat(d.i)),_=ce(d,C,1e3),C.I=Math.round(.5*d.wa)+Math.round(.5*d.wa*Math.random()),Xs(d.h,C),Qs(C,W,_)}function re(d,_){d.H&&ee(d.H,function(C,W){Ft(_,W,C)}),d.l&&To({},function(C,W){Ft(_,W,C)})}function ce(d,_,C){C=Math.min(d.i.length,C);var W=d.l?v(d.l.Na,d.l,d):null;e:{var fe=d.i;let be=-1;for(;;){const Oe=["count="+C];be==-1?0<C?(be=fe[0].g,Oe.push("ofs="+be)):be=0:Oe.push("ofs="+be);let Vt=!0;for(let On=0;On<C;On++){let jt=fe[On].g;const Yt=fe[On].map;if(jt-=be,0>jt)be=Math.max(0,fe[On].g-100),Vt=!1;else try{ih(Yt,Oe,"req"+jt+"_")}catch{W&&W(Yt)}}if(Vt){W=Oe.join("&");break e}}}return d=d.i.splice(0,C),_.D=d,W}function Ne(d){if(!d.g&&!d.u){d.Y=1;var _=d.Fa;ge||ae(),Q||(ge(),Q=!0),oe.add(_,d),d.v=0}}function Te(d){return d.g||d.u||3<=d.v?!1:(d.Y++,d.u=wr(v(d.Fa,d),Mt(d,d.v)),d.v++,!0)}t.Fa=function(){if(this.u=null,Ke(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var d=2*this.R;this.j.info("BP detection timer enabled: "+d),this.A=wr(v(this.ab,this),d)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,bn(10),ls(this),Ke(this))};function ze(d){d.A!=null&&(a.clearTimeout(d.A),d.A=null)}function Ke(d){d.g=new Yn(d,d.j,"rpc",d.Y),d.m===null&&(d.g.H=d.o),d.g.O=0;var _=dr(d.qa);Ft(_,"RID","rpc"),Ft(_,"SID",d.K),Ft(_,"AID",d.T),Ft(_,"CI",d.F?"0":"1"),!d.F&&d.ja&&Ft(_,"TO",d.ja),Ft(_,"TYPE","xmlhttp"),re(d,_),d.m&&d.o&&jl(_,d.m,d.o),d.L&&(d.g.I=d.L);var C=d.g;d=d.ia,C.L=1,C.v=Po(dr(_)),C.m=null,C.P=!0,Eo(C,d)}t.Za=function(){this.C!=null&&(this.C=null,ls(this),Te(this),bn(19))};function pt(d){d.C!=null&&(a.clearTimeout(d.C),d.C=null)}function _t(d,_){var C=null;if(d.g==_){pt(d),ze(d),d.g=null;var W=2}else if(vi(d.h,_))C=_.D,Tu(d.h,_),W=1;else return;if(d.G!=0){if(_.o)if(W==1){C=_.m?_.m.length:0,_=Date.now()-_.F;var fe=d.B;W=Kn(),ft(W,new ts(W,C)),y(d)}else Ne(d);else if(fe=_.s,fe==3||fe==0&&0<_.X||!(W==1&&O(d,_)||W==2&&Te(d)))switch(C&&0<C.length&&(_=d.h,_.i=_.i.concat(C)),fe){case 1:Jt(d,5);break;case 4:Jt(d,10);break;case 3:Jt(d,6);break;default:Jt(d,2)}}}function Mt(d,_){let C=d.Ta+Math.floor(Math.random()*d.cb);return d.isActive()||(C*=2),C*_}function Jt(d,_){if(d.j.info("Error code "+_),_==2){var C=v(d.fb,d),W=d.Xa;const fe=!W;W=new dn(W||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||ko(W,"https"),Po(W),fe?nh(W.toString(),C):rh(W.toString(),C)}else bn(2);d.G=0,d.l&&d.l.sa(_),Rn(d),Fl(d)}t.fb=function(d){d?(this.j.info("Successfully pinged google.com"),bn(2)):(this.j.info("Failed to ping google.com"),bn(1))};function Rn(d){if(d.G=0,d.ka=[],d.l){const _=Ln(d.h);(_.length!=0||d.i.length!=0)&&(L(d.ka,_),L(d.ka,d.i),d.h.i.length=0,A(d.i),d.i.length=0),d.l.ra()}}function tn(d,_,C){var W=C instanceof dn?dr(C):new dn(C);if(W.g!="")_&&(W.g=_+"."+W.g),wa(W,W.s);else{var fe=a.location;W=fe.protocol,_=_?_+"."+fe.hostname:fe.hostname,fe=+fe.port;var be=new dn(null);W&&ko(be,W),_&&(be.g=_),fe&&wa(be,fe),C&&(be.l=C),W=be}return C=d.D,_=d.ya,C&&_&&Ft(W,C,_),Ft(W,"VER",d.la),re(d,W),W}function zn(d,_,C){if(_&&!d.J)throw Error("Can't create secondary domain capable XhrIo object.");return _=d.Ca&&!d.pa?new un(new xa({eb:C})):new un(d.pa),_.Ha(d.J),_}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function jn(){}t=jn.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function qn(){}qn.prototype.g=function(d,_){return new Dn(d,_)};function Dn(d,_){Ze.call(this),this.g=new as(_),this.l=d,this.h=_&&_.messageUrlParams||null,d=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(d?d["X-WebChannel-Content-Type"]=_.messageContentType:d={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.va&&(d?d["X-WebChannel-Client-Profile"]=_.va:d={"X-WebChannel-Client-Profile":_.va}),this.g.S=d,(d=_&&_.Sb)&&!k(d)&&(this.g.m=d),this.v=_&&_.supportsCrossDomainXhr||!1,this.u=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!k(_)&&(this.g.D=_,d=this.h,d!==null&&_ in d&&(d=this.h,_ in d&&delete d[_])),this.j=new cs(this)}S(Dn,Ze),Dn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Dn.prototype.close=function(){Na(this.g)},Dn.prototype.o=function(d){var _=this.g;if(typeof d=="string"){var C={};C.__data__=d,d=C}else this.u&&(C={},C.__data__=Nt(d),d=C);_.i.push(new Tl(_.Ya++,d)),_.G==3&&y(_)},Dn.prototype.N=function(){this.g.l=null,delete this.j,Na(this.g),delete this.g,Dn.aa.N.call(this)};function wi(d){Tt.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var _=d.__sm__;if(_){e:{for(const C in _){d=C;break e}d=void 0}(this.i=d)&&(d=this.i,_=_!==null&&d in _?_[d]:void 0),this.data=_}else this.data=d}S(wi,Tt);function us(){at.call(this),this.status=1}S(us,at);function cs(d){this.g=d}S(cs,jn),cs.prototype.ua=function(){ft(this.g,"a")},cs.prototype.ta=function(d){ft(this.g,new wi(d))},cs.prototype.sa=function(d){ft(this.g,new us)},cs.prototype.ra=function(){ft(this.g,"b")},qn.prototype.createWebChannel=qn.prototype.g,Dn.prototype.send=Dn.prototype.o,Dn.prototype.open=Dn.prototype.m,Dn.prototype.close=Dn.prototype.close,wS=function(){return new qn},yS=function(){return Kn()},vS=Rt,a2={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Br.NO_ERROR=0,Br.TIMEOUT=8,Br.HTTP_ERROR=6,xp=Br,Ci.COMPLETE="complete",gS=Ci,vt.EventType=Zt,Zt.OPEN="a",Zt.CLOSE="b",Zt.ERROR="c",Zt.MESSAGE="d",Ze.prototype.listen=Ze.prototype.K,Oh=vt,un.prototype.listenOnce=un.prototype.L,un.prototype.getLastError=un.prototype.Ka,un.prototype.getLastErrorCode=un.prototype.Ba,un.prototype.getStatus=un.prototype.Z,un.prototype.getResponseJson=un.prototype.Oa,un.prototype.getResponseText=un.prototype.oa,un.prototype.send=un.prototype.ea,un.prototype.setWithCredentials=un.prototype.Ha,mS=un}).apply(typeof Hf<"u"?Hf:typeof self<"u"?self:typeof window<"u"?window:{});const A_="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xr{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Xr.UNAUTHENTICATED=new Xr(null),Xr.GOOGLE_CREDENTIALS=new Xr("google-credentials-uid"),Xr.FIRST_PARTY=new Xr("first-party-uid"),Xr.MOCK_USER=new Xr("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $c="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uu=new Uv("@firebase/firestore");function Ih(){return uu.logLevel}function Ye(t,...e){if(uu.logLevel<=zt.DEBUG){const n=e.map(Qv);uu.debug(`Firestore (${$c}): ${t}`,...n)}}function ua(t,...e){if(uu.logLevel<=zt.ERROR){const n=e.map(Qv);uu.error(`Firestore (${$c}): ${t}`,...n)}}function Cc(t,...e){if(uu.logLevel<=zt.WARN){const n=e.map(Qv);uu.warn(`Firestore (${$c}): ${t}`,...n)}}function Qv(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yt(t="Unexpected state"){const e=`FIRESTORE (${$c}) INTERNAL ASSERTION FAILED: `+t;throw ua(e),new Error(e)}function ln(t,e){t||yt()}function St(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ie={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ve extends Hs{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ta{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _S{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class RR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Xr.UNAUTHENTICATED))}shutdown(){}}class jR{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class DR{constructor(e){this.t=e,this.currentUser=Xr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ln(this.o===void 0);let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new ta;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new ta,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{Ye("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(Ye("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new ta)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Ye("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ln(typeof r.accessToken=="string"),new _S(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ln(e===null||typeof e=="string"),new Xr(e)}}class OR{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Xr.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class FR{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new OR(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Xr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class MR{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class UR{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){ln(this.o===void 0);const r=s=>{s.error!=null&&Ye("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,Ye("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{Ye("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):Ye("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ln(typeof n.token=="string"),this.R=n.token,new MR(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VR(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xS{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=VR(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function Qt(t,e){return t<e?-1:t>e?1:0}function Lc(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cr{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Ve(Ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Ve(Ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new Ve(Ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ve(Ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return cr.fromMillis(Date.now())}static fromDate(e){return cr.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new cr(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Qt(this.nanoseconds,e.nanoseconds):Qt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new bt(e)}static min(){return new bt(new cr(0,0))}static max(){return new bt(new cr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ad{constructor(e,n,r){n===void 0?n=0:n>e.length&&yt(),r===void 0?r=e.length-n:r>e.length-n&&yt(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Ad.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ad?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class An extends Ad{construct(e,n,r){return new An(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ve(Ie.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new An(n)}static emptyPath(){return new An([])}}const BR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Dr extends Ad{construct(e,n,r){return new Dr(e,n,r)}static isValidIdentifier(e){return BR.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Dr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Dr(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new Ve(Ie.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new Ve(Ie.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new Ve(Ie.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new Ve(Ie.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Dr(n)}static emptyPath(){return new Dr([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lt{constructor(e){this.path=e}static fromPath(e){return new lt(An.fromString(e))}static fromName(e){return new lt(An.fromString(e).popFirst(5))}static empty(){return new lt(An.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&An.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return An.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new lt(new An(e.slice()))}}function zR(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=bt.fromTimestamp(r===1e9?new cr(n+1,0):new cr(n,r));return new ml(i,lt.empty(),e)}function qR(t){return new ml(t.readTime,t.key,-1)}class ml{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new ml(bt.min(),lt.empty(),-1)}static max(){return new ml(bt.max(),lt.empty(),-1)}}function HR(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=lt.comparator(t.documentKey,e.documentKey),n!==0?n:Qt(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class $R{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gd(t){if(t.code!==Ie.FAILED_PRECONDITION||t.message!==WR)throw t;Ye("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Le{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&yt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Le((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof Le?n:Le.resolve(n)}catch(n){return Le.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):Le.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):Le.reject(n)}static resolve(e){return new Le((n,r)=>{n(e)})}static reject(e){return new Le((n,r)=>{r(e)})}static waitFor(e){return new Le((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=Le.resolve(!1);for(const r of e)n=n.next(i=>i?Le.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new Le((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const u=l;n(e[u]).next(c=>{o[u]=c,++a,a===s&&r(o)},c=>i(c))}})}static doWhile(e,n){return new Le((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function GR(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Kd(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jv{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Jv.oe=-1;function Zm(t){return t==null}function cm(t){return t===0&&1/t==-1/0}function KR(t){return typeof t=="number"&&Number.isInteger(t)&&!cm(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E_(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Nu(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function bS(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn{constructor(e,n){this.comparator=e,this.root=n||jr.EMPTY}insert(e,n){return new Bn(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,jr.BLACK,null,null))}remove(e){return new Bn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,jr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Wf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Wf(this.root,e,this.comparator,!1)}getReverseIterator(){return new Wf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Wf(this.root,e,this.comparator,!0)}}class Wf{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class jr{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??jr.RED,this.left=i??jr.EMPTY,this.right=s??jr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new jr(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return jr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return jr.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,jr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,jr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw yt();const e=this.left.check();if(e!==this.right.check())throw yt();return e+(this.isRed()?0:1)}}jr.EMPTY=null,jr.RED=!0,jr.BLACK=!1;jr.EMPTY=new class{constructor(){this.size=0}get key(){throw yt()}get value(){throw yt()}get color(){throw yt()}get left(){throw yt()}get right(){throw yt()}copy(e,n,r,i,s){return this}insert(e,n,r){return new jr(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fr{constructor(e){this.comparator=e,this.data=new Bn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new I_(this.data.getIterator())}getIteratorFrom(e){return new I_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Fr)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Fr(this.comparator);return n.data=e,n}}class I_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi{constructor(e){this.fields=e,e.sort(Dr.comparator)}static empty(){return new Gi([])}unionWith(e){let n=new Fr(Dr.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Gi(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Lc(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new SS("Invalid base64 string: "+s):s}}(e);return new Ur(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new Ur(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Qt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ur.EMPTY_BYTE_STRING=new Ur("");const YR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function gl(t){if(ln(!!t),typeof t=="string"){let e=0;const n=YR.exec(t);if(ln(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:er(t.seconds),nanos:er(t.nanos)}}function er(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function cu(t){return typeof t=="string"?Ur.fromBase64String(t):Ur.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xv(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Zv(t){const e=t.mapValue.fields.__previous_value__;return Xv(e)?Zv(e):e}function Ed(t){const e=gl(t.mapValue.fields.__local_write_time__.timestampValue);return new cr(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QR{constructor(e,n,r,i,s,o,a,l,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u}}class Id{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Id("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Id&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $f={mapValue:{}};function hu(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Xv(t)?4:XR(t)?9007199254740991:JR(t)?10:11:yt()}function _o(t,e){if(t===e)return!0;const n=hu(t);if(n!==hu(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ed(t).isEqual(Ed(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=gl(i.timestampValue),a=gl(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return cu(i.bytesValue).isEqual(cu(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return er(i.geoPointValue.latitude)===er(s.geoPointValue.latitude)&&er(i.geoPointValue.longitude)===er(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return er(i.integerValue)===er(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=er(i.doubleValue),a=er(s.doubleValue);return o===a?cm(o)===cm(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Lc(t.arrayValue.values||[],e.arrayValue.values||[],_o);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(E_(o)!==E_(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!_o(o[l],a[l])))return!1;return!0}(t,e);default:return yt()}}function Td(t,e){return(t.values||[]).find(n=>_o(n,e))!==void 0}function Rc(t,e){if(t===e)return 0;const n=hu(t),r=hu(e);if(n!==r)return Qt(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Qt(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=er(s.integerValue||s.doubleValue),l=er(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return T_(t.timestampValue,e.timestampValue);case 4:return T_(Ed(t),Ed(e));case 5:return Qt(t.stringValue,e.stringValue);case 6:return function(s,o){const a=cu(s),l=cu(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let u=0;u<a.length&&u<l.length;u++){const c=Qt(a[u],l[u]);if(c!==0)return c}return Qt(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=Qt(er(s.latitude),er(o.latitude));return a!==0?a:Qt(er(s.longitude),er(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return k_(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,l,u,c;const g=s.fields||{},v=o.fields||{},m=(a=g.value)===null||a===void 0?void 0:a.arrayValue,S=(l=v.value)===null||l===void 0?void 0:l.arrayValue,A=Qt(((u=m==null?void 0:m.values)===null||u===void 0?void 0:u.length)||0,((c=S==null?void 0:S.values)===null||c===void 0?void 0:c.length)||0);return A!==0?A:k_(m,S)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===$f.mapValue&&o===$f.mapValue)return 0;if(s===$f.mapValue)return 1;if(o===$f.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),u=o.fields||{},c=Object.keys(u);l.sort(),c.sort();for(let g=0;g<l.length&&g<c.length;++g){const v=Qt(l[g],c[g]);if(v!==0)return v;const m=Rc(a[l[g]],u[c[g]]);if(m!==0)return m}return Qt(l.length,c.length)}(t.mapValue,e.mapValue);default:throw yt()}}function T_(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Qt(t,e);const n=gl(t),r=gl(e),i=Qt(n.seconds,r.seconds);return i!==0?i:Qt(n.nanos,r.nanos)}function k_(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=Rc(n[i],r[i]);if(s)return s}return Qt(n.length,r.length)}function jc(t){return l2(t)}function l2(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=gl(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return cu(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return lt.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=l2(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${l2(n.fields[o])}`;return i+"}"}(t.mapValue):yt()}function P_(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function u2(t){return!!t&&"integerValue"in t}function ey(t){return!!t&&"arrayValue"in t}function C_(t){return!!t&&"nullValue"in t}function L_(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function bp(t){return!!t&&"mapValue"in t}function JR(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Qh(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Nu(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Qh(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Qh(t.arrayValue.values[n]);return e}return Object.assign({},t)}function XR(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si{constructor(e){this.value=e}static empty(){return new Si({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!bp(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Qh(n)}setAll(e){let n=Dr.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=Qh(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());bp(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return _o(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];bp(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Nu(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Si(Qh(this.value))}}function NS(t){const e=[];return Nu(t.fields,(n,r)=>{const i=new Dr([n]);if(bp(r)){const s=NS(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Gi(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ei{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new ei(e,0,bt.min(),bt.min(),bt.min(),Si.empty(),0)}static newFoundDocument(e,n,r,i){return new ei(e,1,n,bt.min(),r,i,0)}static newNoDocument(e,n){return new ei(e,2,n,bt.min(),bt.min(),Si.empty(),0)}static newUnknownDocument(e,n){return new ei(e,3,n,bt.min(),bt.min(),Si.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(bt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Si.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Si.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=bt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ei&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ei(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hm{constructor(e,n){this.position=e,this.inclusive=n}}function R_(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=lt.comparator(lt.fromName(o.referenceValue),n.key):r=Rc(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function j_(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!_o(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kd{constructor(e,n="asc"){this.field=e,this.dir=n}}function ZR(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AS{}class ur extends AS{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new t7(e,n,r):n==="array-contains"?new i7(e,r):n==="in"?new s7(e,r):n==="not-in"?new o7(e,r):n==="array-contains-any"?new a7(e,r):new ur(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new n7(e,r):new r7(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Rc(n,this.value)):n!==null&&hu(this.value)===hu(n)&&this.matchesComparison(Rc(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return yt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class zs extends AS{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new zs(e,n)}matches(e){return ES(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function ES(t){return t.op==="and"}function IS(t){return e7(t)&&ES(t)}function e7(t){for(const e of t.filters)if(e instanceof zs)return!1;return!0}function c2(t){if(t instanceof ur)return t.field.canonicalString()+t.op.toString()+jc(t.value);if(IS(t))return t.filters.map(e=>c2(e)).join(",");{const e=t.filters.map(n=>c2(n)).join(",");return`${t.op}(${e})`}}function TS(t,e){return t instanceof ur?function(r,i){return i instanceof ur&&r.op===i.op&&r.field.isEqual(i.field)&&_o(r.value,i.value)}(t,e):t instanceof zs?function(r,i){return i instanceof zs&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&TS(o,i.filters[a]),!0):!1}(t,e):void yt()}function kS(t){return t instanceof ur?function(n){return`${n.field.canonicalString()} ${n.op} ${jc(n.value)}`}(t):t instanceof zs?function(n){return n.op.toString()+" {"+n.getFilters().map(kS).join(" ,")+"}"}(t):"Filter"}class t7 extends ur{constructor(e,n,r){super(e,n,r),this.key=lt.fromName(r.referenceValue)}matches(e){const n=lt.comparator(e.key,this.key);return this.matchesComparison(n)}}class n7 extends ur{constructor(e,n){super(e,"in",n),this.keys=PS("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class r7 extends ur{constructor(e,n){super(e,"not-in",n),this.keys=PS("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function PS(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>lt.fromName(r.referenceValue))}class i7 extends ur{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return ey(n)&&Td(n.arrayValue,this.value)}}class s7 extends ur{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Td(this.value.arrayValue,n)}}class o7 extends ur{constructor(e,n){super(e,"not-in",n)}matches(e){if(Td(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Td(this.value.arrayValue,n)}}class a7 extends ur{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!ey(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Td(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l7{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function D_(t,e=null,n=[],r=[],i=null,s=null,o=null){return new l7(t,e,n,r,i,s,o)}function ty(t){const e=St(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>c2(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Zm(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>jc(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>jc(r)).join(",")),e.ue=n}return e.ue}function ny(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!ZR(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!TS(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!j_(t.startAt,e.startAt)&&j_(t.endAt,e.endAt)}function h2(t){return lt.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gc{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function u7(t,e,n,r,i,s,o,a){return new Gc(t,e,n,r,i,s,o,a)}function eg(t){return new Gc(t)}function O_(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function CS(t){return t.collectionGroup!==null}function Jh(t){const e=St(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Fr(Dr.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new kd(s,r))}),n.has(Dr.keyField().canonicalString())||e.ce.push(new kd(Dr.keyField(),r))}return e.ce}function yo(t){const e=St(t);return e.le||(e.le=c7(e,Jh(t))),e.le}function c7(t,e){if(t.limitType==="F")return D_(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new kd(i.field,s)});const n=t.endAt?new hm(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new hm(t.startAt.position,t.startAt.inclusive):null;return D_(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function d2(t,e){const n=t.filters.concat([e]);return new Gc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function f2(t,e,n){return new Gc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function tg(t,e){return ny(yo(t),yo(e))&&t.limitType===e.limitType}function LS(t){return`${ty(yo(t))}|lt:${t.limitType}`}function qu(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>kS(i)).join(", ")}]`),Zm(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>jc(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>jc(i)).join(",")),`Target(${r})`}(yo(t))}; limitType=${t.limitType})`}function ng(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):lt.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of Jh(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const u=R_(o,a,l);return o.inclusive?u<=0:u<0}(r.startAt,Jh(r),i)||r.endAt&&!function(o,a,l){const u=R_(o,a,l);return o.inclusive?u>=0:u>0}(r.endAt,Jh(r),i))}(t,e)}function h7(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function RS(t){return(e,n)=>{let r=!1;for(const i of Jh(t)){const s=d7(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function d7(t,e,n){const r=t.field.isKeyField()?lt.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),u=a.data.field(s);return l!==null&&u!==null?Rc(l,u):yt()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return yt()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kc{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Nu(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return bS(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f7=new Bn(lt.comparator);function ca(){return f7}const jS=new Bn(lt.comparator);function Fh(...t){let e=jS;for(const n of t)e=e.insert(n.key,n);return e}function DS(t){let e=jS;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Ql(){return Xh()}function OS(){return Xh()}function Xh(){return new Kc(t=>t.toString(),(t,e)=>t.isEqual(e))}const p7=new Bn(lt.comparator),m7=new Fr(lt.comparator);function Ut(...t){let e=m7;for(const n of t)e=e.add(n);return e}const g7=new Fr(Qt);function v7(){return g7}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ry(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:cm(e)?"-0":e}}function FS(t){return{integerValue:""+t}}function y7(t,e){return KR(e)?FS(e):ry(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rg{constructor(){this._=void 0}}function w7(t,e,n){return t instanceof Pd?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Xv(s)&&(s=Zv(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof Dc?US(t,e):t instanceof Cd?VS(t,e):function(i,s){const o=MS(i,s),a=F_(o)+F_(i.Pe);return u2(o)&&u2(i.Pe)?FS(a):ry(i.serializer,a)}(t,e)}function _7(t,e,n){return t instanceof Dc?US(t,e):t instanceof Cd?VS(t,e):n}function MS(t,e){return t instanceof dm?function(r){return u2(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Pd extends rg{}class Dc extends rg{constructor(e){super(),this.elements=e}}function US(t,e){const n=BS(e);for(const r of t.elements)n.some(i=>_o(i,r))||n.push(r);return{arrayValue:{values:n}}}class Cd extends rg{constructor(e){super(),this.elements=e}}function VS(t,e){let n=BS(e);for(const r of t.elements)n=n.filter(i=>!_o(i,r));return{arrayValue:{values:n}}}class dm extends rg{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function F_(t){return er(t.integerValue||t.doubleValue)}function BS(t){return ey(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zS{constructor(e,n){this.field=e,this.transform=n}}function x7(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Dc&&i instanceof Dc||r instanceof Cd&&i instanceof Cd?Lc(r.elements,i.elements,_o):r instanceof dm&&i instanceof dm?_o(r.Pe,i.Pe):r instanceof Pd&&i instanceof Pd}(t.transform,e.transform)}class b7{constructor(e,n){this.version=e,this.transformResults=n}}class fi{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new fi}static exists(e){return new fi(void 0,e)}static updateTime(e){return new fi(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Sp(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class ig{}function qS(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new sg(t.key,fi.none()):new Yd(t.key,t.data,fi.none());{const n=t.data,r=Si.empty();let i=new Fr(Dr.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Al(t.key,r,new Gi(i.toArray()),fi.none())}}function S7(t,e,n){t instanceof Yd?function(i,s,o){const a=i.value.clone(),l=U_(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Al?function(i,s,o){if(!Sp(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=U_(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(HS(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Zh(t,e,n,r){return t instanceof Yd?function(s,o,a,l){if(!Sp(s.precondition,o))return a;const u=s.value.clone(),c=V_(s.fieldTransforms,l,o);return u.setAll(c),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof Al?function(s,o,a,l){if(!Sp(s.precondition,o))return a;const u=V_(s.fieldTransforms,l,o),c=o.data;return c.setAll(HS(s)),c.setAll(u),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(g=>g.field))}(t,e,n,r):function(s,o,a){return Sp(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function N7(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=MS(r.transform,i||null);s!=null&&(n===null&&(n=Si.empty()),n.set(r.field,s))}return n||null}function M_(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Lc(r,i,(s,o)=>x7(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Yd extends ig{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Al extends ig{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function HS(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function U_(t,e,n){const r=new Map;ln(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,_7(o,a,n[i]))}return r}function V_(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,w7(s,o,e))}return r}class sg extends ig{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class A7 extends ig{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E7{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&S7(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Zh(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Zh(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=OS();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=qS(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(bt.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ut())}isEqual(e){return this.batchId===e.batchId&&Lc(this.mutations,e.mutations,(n,r)=>M_(n,r))&&Lc(this.baseMutations,e.baseMutations,(n,r)=>M_(n,r))}}class iy{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){ln(e.mutations.length===r.length);let i=function(){return p7}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new iy(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I7{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T7{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ar,Wt;function k7(t){switch(t){default:return yt();case Ie.CANCELLED:case Ie.UNKNOWN:case Ie.DEADLINE_EXCEEDED:case Ie.RESOURCE_EXHAUSTED:case Ie.INTERNAL:case Ie.UNAVAILABLE:case Ie.UNAUTHENTICATED:return!1;case Ie.INVALID_ARGUMENT:case Ie.NOT_FOUND:case Ie.ALREADY_EXISTS:case Ie.PERMISSION_DENIED:case Ie.FAILED_PRECONDITION:case Ie.ABORTED:case Ie.OUT_OF_RANGE:case Ie.UNIMPLEMENTED:case Ie.DATA_LOSS:return!0}}function WS(t){if(t===void 0)return ua("GRPC error has no .code"),Ie.UNKNOWN;switch(t){case ar.OK:return Ie.OK;case ar.CANCELLED:return Ie.CANCELLED;case ar.UNKNOWN:return Ie.UNKNOWN;case ar.DEADLINE_EXCEEDED:return Ie.DEADLINE_EXCEEDED;case ar.RESOURCE_EXHAUSTED:return Ie.RESOURCE_EXHAUSTED;case ar.INTERNAL:return Ie.INTERNAL;case ar.UNAVAILABLE:return Ie.UNAVAILABLE;case ar.UNAUTHENTICATED:return Ie.UNAUTHENTICATED;case ar.INVALID_ARGUMENT:return Ie.INVALID_ARGUMENT;case ar.NOT_FOUND:return Ie.NOT_FOUND;case ar.ALREADY_EXISTS:return Ie.ALREADY_EXISTS;case ar.PERMISSION_DENIED:return Ie.PERMISSION_DENIED;case ar.FAILED_PRECONDITION:return Ie.FAILED_PRECONDITION;case ar.ABORTED:return Ie.ABORTED;case ar.OUT_OF_RANGE:return Ie.OUT_OF_RANGE;case ar.UNIMPLEMENTED:return Ie.UNIMPLEMENTED;case ar.DATA_LOSS:return Ie.DATA_LOSS;default:return yt()}}(Wt=ar||(ar={}))[Wt.OK=0]="OK",Wt[Wt.CANCELLED=1]="CANCELLED",Wt[Wt.UNKNOWN=2]="UNKNOWN",Wt[Wt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Wt[Wt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Wt[Wt.NOT_FOUND=5]="NOT_FOUND",Wt[Wt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Wt[Wt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Wt[Wt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Wt[Wt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Wt[Wt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Wt[Wt.ABORTED=10]="ABORTED",Wt[Wt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Wt[Wt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Wt[Wt.INTERNAL=13]="INTERNAL",Wt[Wt.UNAVAILABLE=14]="UNAVAILABLE",Wt[Wt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P7(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C7=new eu([4294967295,4294967295],0);function B_(t){const e=P7().encode(t),n=new pS;return n.update(e),new Uint8Array(n.digest())}function z_(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new eu([n,r],0),new eu([i,s],0)]}class sy{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Mh(`Invalid padding: ${n}`);if(r<0)throw new Mh(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Mh(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Mh(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=eu.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(eu.fromNumber(r)));return i.compare(C7)===1&&(i=new eu([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=B_(e),[r,i]=z_(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new sy(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=B_(e),[r,i]=z_(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Mh extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class og{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Qd.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new og(bt.min(),i,new Bn(Qt),ca(),Ut())}}class Qd{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Qd(r,n,Ut(),Ut(),Ut())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Np{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class $S{constructor(e,n){this.targetId=e,this.me=n}}class GS{constructor(e,n,r=Ur.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class q_{constructor(){this.fe=0,this.ge=W_(),this.pe=Ur.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Ut(),n=Ut(),r=Ut();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:yt()}}),new Qd(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=W_()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ln(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class L7{constructor(e){this.Le=e,this.Be=new Map,this.ke=ca(),this.qe=H_(),this.Qe=new Bn(Qt)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:yt()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const s=i.target;if(h2(s))if(r===0){const o=new lt(s.path);this.Ue(n,o,ei.newNoDocument(o,bt.min()))}else ln(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(n);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,u)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=cu(r).toUint8Array()}catch(l){if(l instanceof SS)return Cc("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new sy(o,i,s)}catch(l){return Cc(l instanceof Mh?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&h2(a.target)){const l=new lt(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,ei.newNoDocument(l,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=Ut();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const u=this.Je(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new og(e,n,this.Qe,this.ke,r);return this.ke=ca(),this.qe=H_(),this.Qe=new Bn(Qt),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new q_,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Fr(Qt),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||Ye("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new q_),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function H_(){return new Bn(lt.comparator)}function W_(){return new Bn(lt.comparator)}const R7={asc:"ASCENDING",desc:"DESCENDING"},j7={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},D7={and:"AND",or:"OR"};class O7{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function p2(t,e){return t.useProto3Json||Zm(e)?e:{value:e}}function fm(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function KS(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function F7(t,e){return fm(t,e.toTimestamp())}function wo(t){return ln(!!t),bt.fromTimestamp(function(n){const r=gl(n);return new cr(r.seconds,r.nanos)}(t))}function oy(t,e){return m2(t,e).canonicalString()}function m2(t,e){const n=function(i){return new An(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function YS(t){const e=An.fromString(t);return ln(eN(e)),e}function g2(t,e){return oy(t.databaseId,e.path)}function _0(t,e){const n=YS(e);if(n.get(1)!==t.databaseId.projectId)throw new Ve(Ie.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Ve(Ie.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new lt(JS(n))}function QS(t,e){return oy(t.databaseId,e)}function M7(t){const e=YS(t);return e.length===4?An.emptyPath():JS(e)}function v2(t){return new An(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function JS(t){return ln(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function $_(t,e,n){return{name:g2(t,e),fields:n.value.mapValue.fields}}function U7(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:yt()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(u,c){return u.useProto3Json?(ln(c===void 0||typeof c=="string"),Ur.fromBase64String(c||"")):(ln(c===void 0||c instanceof Buffer||c instanceof Uint8Array),Ur.fromUint8Array(c||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const c=u.code===void 0?Ie.UNKNOWN:WS(u.code);return new Ve(c,u.message||"")}(o);n=new GS(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=_0(t,r.document.name),s=wo(r.document.updateTime),o=r.document.createTime?wo(r.document.createTime):bt.min(),a=new Si({mapValue:{fields:r.document.fields}}),l=ei.newFoundDocument(i,s,o,a),u=r.targetIds||[],c=r.removedTargetIds||[];n=new Np(u,c,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=_0(t,r.document),s=r.readTime?wo(r.readTime):bt.min(),o=ei.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Np([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=_0(t,r.document),s=r.removedTargetIds||[];n=new Np([],s,i,null)}else{if(!("filter"in e))return yt();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new T7(i,s),a=r.targetId;n=new $S(a,o)}}return n}function V7(t,e){let n;if(e instanceof Yd)n={update:$_(t,e.key,e.value)};else if(e instanceof sg)n={delete:g2(t,e.key)};else if(e instanceof Al)n={update:$_(t,e.key,e.data),updateMask:Y7(e.fieldMask)};else{if(!(e instanceof A7))return yt();n={verify:g2(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof Pd)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Dc)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Cd)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof dm)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw yt()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:F7(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:yt()}(t,e.precondition)),n}function B7(t,e){return t&&t.length>0?(ln(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?wo(i.updateTime):wo(s);return o.isEqual(bt.min())&&(o=wo(s)),new b7(o,i.transformResults||[])}(n,e))):[]}function z7(t,e){return{documents:[QS(t,e.path)]}}function q7(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=QS(t,i);const s=function(u){if(u.length!==0)return ZS(zs.create(u,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(u){if(u.length!==0)return u.map(c=>function(v){return{field:Hu(v.field),direction:$7(v.dir)}}(c))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=p2(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{_t:n,parent:i}}function H7(t){let e=M7(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){ln(r===1);const c=n.from[0];c.allDescendants?i=c.collectionId:e=e.child(c.collectionId)}let s=[];n.where&&(s=function(g){const v=XS(g);return v instanceof zs&&IS(v)?v.getFilters():[v]}(n.where));let o=[];n.orderBy&&(o=function(g){return g.map(v=>function(S){return new kd(Wu(S.field),function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction))}(v))}(n.orderBy));let a=null;n.limit&&(a=function(g){let v;return v=typeof g=="object"?g.value:g,Zm(v)?null:v}(n.limit));let l=null;n.startAt&&(l=function(g){const v=!!g.before,m=g.values||[];return new hm(m,v)}(n.startAt));let u=null;return n.endAt&&(u=function(g){const v=!g.before,m=g.values||[];return new hm(m,v)}(n.endAt)),u7(e,i,o,s,a,"F",l,u)}function W7(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return yt()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function XS(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Wu(n.unaryFilter.field);return ur.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Wu(n.unaryFilter.field);return ur.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Wu(n.unaryFilter.field);return ur.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Wu(n.unaryFilter.field);return ur.create(o,"!=",{nullValue:"NULL_VALUE"});default:return yt()}}(t):t.fieldFilter!==void 0?function(n){return ur.create(Wu(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return yt()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return zs.create(n.compositeFilter.filters.map(r=>XS(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return yt()}}(n.compositeFilter.op))}(t):yt()}function $7(t){return R7[t]}function G7(t){return j7[t]}function K7(t){return D7[t]}function Hu(t){return{fieldPath:t.canonicalString()}}function Wu(t){return Dr.fromServerFormat(t.fieldPath)}function ZS(t){return t instanceof ur?function(n){if(n.op==="=="){if(L_(n.value))return{unaryFilter:{field:Hu(n.field),op:"IS_NAN"}};if(C_(n.value))return{unaryFilter:{field:Hu(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(L_(n.value))return{unaryFilter:{field:Hu(n.field),op:"IS_NOT_NAN"}};if(C_(n.value))return{unaryFilter:{field:Hu(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Hu(n.field),op:G7(n.op),value:n.value}}}(t):t instanceof zs?function(n){const r=n.getFilters().map(i=>ZS(i));return r.length===1?r[0]:{compositeFilter:{op:K7(n.op),filters:r}}}(t):yt()}function Y7(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function eN(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Za{constructor(e,n,r,i,s=bt.min(),o=bt.min(),a=Ur.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Za(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Za(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Za(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Za(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q7{constructor(e){this.ct=e}}function J7(t){const e=H7({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?f2(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X7{constructor(){this.un=new Z7}addToCollectionParentIndex(e,n){return this.un.add(n),Le.resolve()}getCollectionParents(e,n){return Le.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return Le.resolve()}deleteFieldIndex(e,n){return Le.resolve()}deleteAllFieldIndexes(e){return Le.resolve()}createTargetIndexes(e,n){return Le.resolve()}getDocumentsMatchingTarget(e,n){return Le.resolve(null)}getIndexType(e,n){return Le.resolve(0)}getFieldIndexes(e,n){return Le.resolve([])}getNextCollectionGroupToUpdate(e){return Le.resolve(null)}getMinOffset(e,n){return Le.resolve(ml.min())}getMinOffsetFromCollectionGroup(e,n){return Le.resolve(ml.min())}updateCollectionGroup(e,n,r){return Le.resolve()}updateIndexEntries(e,n){return Le.resolve()}}class Z7{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Fr(An.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Fr(An.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oc{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Oc(0)}static kn(){return new Oc(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ej{constructor(){this.changes=new Kc(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ei.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?Le.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tj{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nj{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Zh(r.mutation,i,Gi.empty(),cr.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Ut()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Ut()){const i=Ql();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Fh();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Ql();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Ut()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=ca();const o=Xh(),a=function(){return Xh()}();return n.forEach((l,u)=>{const c=r.get(u.key);i.has(u.key)&&(c===void 0||c.mutation instanceof Al)?s=s.insert(u.key,u):c!==void 0?(o.set(u.key,c.mutation.getFieldMask()),Zh(c.mutation,u,c.mutation.getFieldMask(),cr.now())):o.set(u.key,Gi.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((u,c)=>o.set(u,c)),n.forEach((u,c)=>{var g;return a.set(u,new tj(c,(g=o.get(u))!==null&&g!==void 0?g:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Xh();let i=new Bn((o,a)=>o-a),s=Ut();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const u=n.get(l);if(u===null)return;let c=r.get(l)||Gi.empty();c=a.applyToLocalView(u,c),r.set(l,c);const g=(i.get(a.batchId)||Ut()).add(l);i=i.insert(a.batchId,g)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,c=l.value,g=OS();c.forEach(v=>{if(!s.has(v)){const m=qS(n.get(v),r.get(v));m!==null&&g.set(v,m),s=s.add(v)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,g))}return Le.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return lt.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):CS(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):Le.resolve(Ql());let a=-1,l=s;return o.next(u=>Le.forEach(u,(c,g)=>(a<g.largestBatchId&&(a=g.largestBatchId),s.get(c)?Le.resolve():this.remoteDocumentCache.getEntry(e,c).next(v=>{l=l.insert(c,v)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,l,u,Ut())).next(c=>({batchId:a,changes:DS(c)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new lt(n)).next(r=>{let i=Fh();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=Fh();return this.indexManager.getCollectionParents(e,s).next(a=>Le.forEach(a,l=>{const u=function(g,v){return new Gc(v,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(c=>{c.forEach((g,v)=>{o=o.insert(g,v)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((l,u)=>{const c=u.getKey();o.get(c)===null&&(o=o.insert(c,ei.newInvalidDocument(c)))});let a=Fh();return o.forEach((l,u)=>{const c=s.get(l);c!==void 0&&Zh(c.mutation,u,Gi.empty(),cr.now()),ng(n,u)&&(a=a.insert(l,u))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rj{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return Le.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:wo(i.createTime)}}(n)),Le.resolve()}getNamedQuery(e,n){return Le.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:J7(i.bundledQuery),readTime:wo(i.readTime)}}(n)),Le.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ij{constructor(){this.overlays=new Bn(lt.comparator),this.Ir=new Map}getOverlay(e,n){return Le.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Ql();return Le.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),Le.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),Le.resolve()}getOverlaysForCollection(e,n,r){const i=Ql(),s=n.length+1,o=new lt(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return Le.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Bn((u,c)=>u-c);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let c=s.get(u.largestBatchId);c===null&&(c=Ql(),s=s.insert(u.largestBatchId,c)),c.set(u.getKey(),u)}}const a=Ql(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,c)=>a.set(u,c)),!(a.size()>=i)););return Le.resolve(a)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new I7(n,r));let s=this.Ir.get(n);s===void 0&&(s=Ut(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sj{constructor(){this.sessionToken=Ur.EMPTY_BYTE_STRING}getSessionToken(e){return Le.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,Le.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ay{constructor(){this.Tr=new Fr(Nr.Er),this.dr=new Fr(Nr.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new Nr(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Nr(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new lt(new An([])),r=new Nr(n,e),i=new Nr(n,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new lt(new An([])),r=new Nr(n,e),i=new Nr(n,e+1);let s=Ut();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new Nr(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Nr{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return lt.comparator(e.key,n.key)||Qt(e.wr,n.wr)}static Ar(e,n){return Qt(e.wr,n.wr)||lt.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oj{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Fr(Nr.Er)}checkEmpty(e){return Le.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new E7(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.br=this.br.add(new Nr(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return Le.resolve(o)}lookupMutationBatch(e,n){return Le.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),s=i<0?0:i;return Le.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Le.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return Le.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Nr(n,0),i=new Nr(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{const a=this.Dr(o.wr);s.push(a)}),Le.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Fr(Qt);return n.forEach(i=>{const s=new Nr(i,0),o=new Nr(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),Le.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;lt.isDocumentKey(s)||(s=s.child(""));const o=new Nr(new lt(s),0);let a=new Fr(Qt);return this.br.forEachWhile(l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(l.wr)),!0)},o),Le.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){ln(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return Le.forEach(n.mutations,i=>{const s=new Nr(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new Nr(n,0),i=this.br.firstAfterOrEqual(r);return Le.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,Le.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aj{constructor(e){this.Mr=e,this.docs=function(){return new Bn(lt.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return Le.resolve(r?r.document.mutableCopy():ei.newInvalidDocument(n))}getEntries(e,n){let r=ca();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():ei.newInvalidDocument(i))}),Le.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=ca();const o=n.path,a=new lt(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:c}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||HR(qR(c),r)<=0||(i.has(c.key)||ng(n,c))&&(s=s.insert(c.key,c.mutableCopy()))}return Le.resolve(s)}getAllFromCollectionGroup(e,n,r,i){yt()}Or(e,n){return Le.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new lj(this)}getSize(e){return Le.resolve(this.size)}}class lj extends ej{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),Le.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uj{constructor(e){this.persistence=e,this.Nr=new Kc(n=>ty(n),ny),this.lastRemoteSnapshotVersion=bt.min(),this.highestTargetId=0,this.Lr=0,this.Br=new ay,this.targetCount=0,this.kr=Oc.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),Le.resolve()}getLastRemoteSnapshotVersion(e){return Le.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Le.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),Le.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),Le.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Oc(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,Le.resolve()}updateTargetData(e,n){return this.Kn(n),Le.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,Le.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),Le.waitFor(s).next(()=>i)}getTargetCount(e){return Le.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return Le.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),Le.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),Le.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),Le.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return Le.resolve(r)}containsKey(e,n){return Le.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cj{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Jv(0),this.Kr=!1,this.Kr=!0,this.$r=new sj,this.referenceDelegate=e(this),this.Ur=new uj(this),this.indexManager=new X7,this.remoteDocumentCache=function(i){return new aj(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new Q7(n),this.Gr=new rj(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new ij,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new oj(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){Ye("MemoryPersistence","Starting transaction:",e);const i=new hj(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return Le.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class hj extends $R{constructor(e){super(),this.currentSequenceNumber=e}}class ly{constructor(e){this.persistence=e,this.Jr=new ay,this.Yr=null}static Zr(e){return new ly(e)}get Xr(){if(this.Yr)return this.Yr;throw yt()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),Le.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),Le.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),Le.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Le.forEach(this.Xr,r=>{const i=lt.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,bt.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return Le.or([()=>Le.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uy{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=Ut(),i=Ut();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new uy(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dj{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fj{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return iP()?8:GR(ii())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new dj;return this.Xi(e,n,o).next(a=>{if(s.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(Ih()<=zt.DEBUG&&Ye("QueryEngine","SDK will not create cache indexes for query:",qu(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Le.resolve()):(Ih()<=zt.DEBUG&&Ye("QueryEngine","Query:",qu(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Ih()<=zt.DEBUG&&Ye("QueryEngine","The SDK decides to create cache indexes for query:",qu(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,yo(n))):Le.resolve())}Yi(e,n){if(O_(n))return Le.resolve(null);let r=yo(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=f2(n,null,"F"),r=yo(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=Ut(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const u=this.ts(n,a);return this.ns(n,u,o,l.readTime)?this.Yi(e,f2(n,null,"F")):this.rs(e,u,n,l)}))})))}Zi(e,n,r,i){return O_(n)||i.isEqual(bt.min())?Le.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const o=this.ts(n,s);return this.ns(n,o,r,i)?Le.resolve(null):(Ih()<=zt.DEBUG&&Ye("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),qu(n)),this.rs(e,o,n,zR(i,-1)).next(a=>a))})}ts(e,n){let r=new Fr(RS(e));return n.forEach((i,s)=>{ng(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return Ih()<=zt.DEBUG&&Ye("QueryEngine","Using full collection scan to execute query:",qu(n)),this.Ji.getDocumentsMatchingQuery(e,n,ml.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pj{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new Bn(Qt),this._s=new Kc(s=>ty(s),ny),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new nj(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function mj(t,e,n,r){return new pj(t,e,n,r)}async function tN(t,e){const n=St(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=Ut();for(const u of i){o.push(u.batchId);for(const c of u.mutations)l=l.add(c.key)}for(const u of s){a.push(u.batchId);for(const c of u.mutations)l=l.add(c.key)}return n.localDocuments.getDocuments(r,l).next(u=>({hs:u,removedBatchIds:o,addedBatchIds:a}))})})}function gj(t,e){const n=St(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,u,c){const g=u.batch,v=g.keys();let m=Le.resolve();return v.forEach(S=>{m=m.next(()=>c.getEntry(l,S)).next(A=>{const L=u.docVersions.get(S);ln(L!==null),A.version.compareTo(L)<0&&(g.applyToRemoteDocument(A,u),A.isValidDocument()&&(A.setReadTime(u.commitVersion),c.addEntry(A)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(l,g))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=Ut();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function nN(t){const e=St(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function vj(t,e){const n=St(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const a=[];e.targetChanges.forEach((c,g)=>{const v=i.get(g);if(!v)return;a.push(n.Ur.removeMatchingKeys(s,c.removedDocuments,g).next(()=>n.Ur.addMatchingKeys(s,c.addedDocuments,g)));let m=v.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(g)!==null?m=m.withResumeToken(Ur.EMPTY_BYTE_STRING,bt.min()).withLastLimboFreeSnapshotVersion(bt.min()):c.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(c.resumeToken,r)),i=i.insert(g,m),function(A,L,b){return A.resumeToken.approximateByteSize()===0||L.snapshotVersion.toMicroseconds()-A.snapshotVersion.toMicroseconds()>=3e8?!0:b.addedDocuments.size+b.modifiedDocuments.size+b.removedDocuments.size>0}(v,m,c)&&a.push(n.Ur.updateTargetData(s,m))});let l=ca(),u=Ut();if(e.documentUpdates.forEach(c=>{e.resolvedLimboDocuments.has(c)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,c))}),a.push(yj(s,o,e.documentUpdates).next(c=>{l=c.Ps,u=c.Is})),!r.isEqual(bt.min())){const c=n.Ur.getLastRemoteSnapshotVersion(s).next(g=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(c)}return Le.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,u)).next(()=>l)}).then(s=>(n.os=i,s))}function yj(t,e,n){let r=Ut(),i=Ut();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=ca();return n.forEach((a,l)=>{const u=s.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(bt.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):Ye("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{Ps:o,Is:i}})}function wj(t,e){const n=St(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function _j(t,e){const n=St(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,Le.resolve(i)):n.Ur.allocateTargetId(r).next(o=>(i=new Za(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function y2(t,e,n){const r=St(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Kd(o))throw o;Ye("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function G_(t,e,n){const r=St(t);let i=bt.min(),s=Ut();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,u,c){const g=St(l),v=g._s.get(c);return v!==void 0?Le.resolve(g.os.get(v)):g.Ur.getTargetData(u,c)}(r,o,yo(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?i:bt.min(),n?s:Ut())).next(a=>(xj(r,h7(e),a),{documents:a,Ts:s})))}function xj(t,e,n){let r=t.us.get(e)||bt.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}class K_{constructor(){this.activeTargetIds=v7()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class bj{constructor(){this.so=new K_,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new K_,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sj{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y_{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Ye("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){Ye("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gf=null;function x0(){return Gf===null?Gf=function(){return 268435456+Math.round(2147483648*Math.random())}():Gf++,"0x"+Gf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nj={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aj{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gr="WebChannelConnection";class Ej extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,o){const a=x0(),l=this.xo(n,r.toUriEncodedString());Ye("RestConnection",`Sending RPC '${n}' ${a}:`,l,i);const u={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(u,s,o),this.No(n,l,u,i).then(c=>(Ye("RestConnection",`Received RPC '${n}' ${a}: `,c),c),c=>{throw Cc("RestConnection",`RPC '${n}' ${a} failed with error: `,c,"url: ",l,"request:",i),c})}Lo(n,r,i,s,o,a){return this.Mo(n,r,i,s,o)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+$c}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}xo(n,r){const i=Nj[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const s=x0();return new Promise((o,a)=>{const l=new mS;l.setWithCredentials(!0),l.listenOnce(gS.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case xp.NO_ERROR:const c=l.getResponseJson();Ye(Gr,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(c)),o(c);break;case xp.TIMEOUT:Ye(Gr,`RPC '${e}' ${s} timed out`),a(new Ve(Ie.DEADLINE_EXCEEDED,"Request time out"));break;case xp.HTTP_ERROR:const g=l.getStatus();if(Ye(Gr,`RPC '${e}' ${s} failed with status:`,g,"response text:",l.getResponseText()),g>0){let v=l.getResponseJson();Array.isArray(v)&&(v=v[0]);const m=v==null?void 0:v.error;if(m&&m.status&&m.message){const S=function(L){const b=L.toLowerCase().replace(/_/g,"-");return Object.values(Ie).indexOf(b)>=0?b:Ie.UNKNOWN}(m.status);a(new Ve(S,m.message))}else a(new Ve(Ie.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new Ve(Ie.UNAVAILABLE,"Connection failed."));break;default:yt()}}finally{Ye(Gr,`RPC '${e}' ${s} completed.`)}});const u=JSON.stringify(i);Ye(Gr,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",u,r,15)})}Bo(e,n,r){const i=x0(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=wS(),a=yS(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const c=s.join("");Ye(Gr,`Creating RPC '${e}' stream ${i}: ${c}`,l);const g=o.createWebChannel(c,l);let v=!1,m=!1;const S=new Aj({Io:L=>{m?Ye(Gr,`Not sending because RPC '${e}' stream ${i} is closed:`,L):(v||(Ye(Gr,`Opening RPC '${e}' stream ${i} transport.`),g.open(),v=!0),Ye(Gr,`RPC '${e}' stream ${i} sending:`,L),g.send(L))},To:()=>g.close()}),A=(L,b,k)=>{L.listen(b,j=>{try{k(j)}catch(U){setTimeout(()=>{throw U},0)}})};return A(g,Oh.EventType.OPEN,()=>{m||(Ye(Gr,`RPC '${e}' stream ${i} transport opened.`),S.yo())}),A(g,Oh.EventType.CLOSE,()=>{m||(m=!0,Ye(Gr,`RPC '${e}' stream ${i} transport closed`),S.So())}),A(g,Oh.EventType.ERROR,L=>{m||(m=!0,Cc(Gr,`RPC '${e}' stream ${i} transport errored:`,L),S.So(new Ve(Ie.UNAVAILABLE,"The operation could not be completed")))}),A(g,Oh.EventType.MESSAGE,L=>{var b;if(!m){const k=L.data[0];ln(!!k);const j=k,U=j.error||((b=j[0])===null||b===void 0?void 0:b.error);if(U){Ye(Gr,`RPC '${e}' stream ${i} received error:`,U);const q=U.status;let ee=function(I){const R=ar[I];if(R!==void 0)return WS(R)}(q),D=U.message;ee===void 0&&(ee=Ie.INTERNAL,D="Unknown error status: "+q+" with message "+U.message),m=!0,S.So(new Ve(ee,D)),g.close()}else Ye(Gr,`RPC '${e}' stream ${i} received:`,k),S.bo(k)}}),A(a,vS.STAT_EVENT,L=>{L.stat===a2.PROXY?Ye(Gr,`RPC '${e}' stream ${i} detected buffering proxy`):L.stat===a2.NOPROXY&&Ye(Gr,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{S.wo()},0),S}}function b0(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ag(t){return new O7(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rN{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&Ye("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iN{constructor(e,n,r,i,s,o,a,l){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new rN(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===Ie.RESOURCE_EXHAUSTED?(ua(n.toString()),ua("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===Ie.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new Ve(Ie.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return Ye("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(Ye("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Ij extends iN{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=U7(this.serializer,e),r=function(s){if(!("targetChange"in s))return bt.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?bt.min():o.readTime?wo(o.readTime):bt.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=v2(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=h2(l)?{documents:z7(s,l)}:{query:q7(s,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=KS(s,o.resumeToken);const u=p2(s,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(bt.min())>0){a.readTime=fm(s,o.snapshotVersion.toTimestamp());const u=p2(s,o.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);const r=W7(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=v2(this.serializer),n.removeTarget=e,this.a_(n)}}class Tj extends iN{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return ln(!!e.streamToken),this.lastStreamToken=e.streamToken,ln(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){ln(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=B7(e.writeResults,e.commitTime),r=wo(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=v2(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>V7(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kj extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new Ve(Ie.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,m2(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===Ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Ve(Ie.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,m2(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Ve(Ie.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class Pj{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(ua(n),this.D_=!1):Ye("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cj{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(async()=>{Au(this)&&(Ye("RemoteStore","Restarting streams for network reachability change."),await async function(l){const u=St(l);u.L_.add(4),await Jd(u),u.q_.set("Unknown"),u.L_.delete(4),await lg(u)}(this))})}),this.q_=new Pj(r,i)}}async function lg(t){if(Au(t))for(const e of t.B_)await e(!0)}async function Jd(t){for(const e of t.B_)await e(!1)}function sN(t,e){const n=St(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),fy(n)?dy(n):Yc(n).r_()&&hy(n,e))}function cy(t,e){const n=St(t),r=Yc(n);n.N_.delete(e),r.r_()&&oN(n,e),n.N_.size===0&&(r.r_()?r.o_():Au(n)&&n.q_.set("Unknown"))}function hy(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(bt.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Yc(t).A_(e)}function oN(t,e){t.Q_.xe(e),Yc(t).R_(e)}function dy(t){t.Q_=new L7({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Yc(t).start(),t.q_.v_()}function fy(t){return Au(t)&&!Yc(t).n_()&&t.N_.size>0}function Au(t){return St(t).L_.size===0}function aN(t){t.Q_=void 0}async function Lj(t){t.q_.set("Online")}async function Rj(t){t.N_.forEach((e,n)=>{hy(t,e)})}async function jj(t,e){aN(t),fy(t)?(t.q_.M_(e),dy(t)):t.q_.set("Unknown")}async function Dj(t,e,n){if(t.q_.set("Online"),e instanceof GS&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.N_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.N_.delete(a),i.Q_.removeTarget(a))}(t,e)}catch(r){Ye("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await pm(t,r)}else if(e instanceof Np?t.Q_.Ke(e):e instanceof $S?t.Q_.He(e):t.Q_.We(e),!n.isEqual(bt.min()))try{const r=await nN(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.Q_.rt(o);return a.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const c=s.N_.get(u);c&&s.N_.set(u,c.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,u)=>{const c=s.N_.get(l);if(!c)return;s.N_.set(l,c.withResumeToken(Ur.EMPTY_BYTE_STRING,c.snapshotVersion)),oN(s,l);const g=new Za(c.target,l,u,c.sequenceNumber);hy(s,g)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){Ye("RemoteStore","Failed to raise snapshot:",r),await pm(t,r)}}async function pm(t,e,n){if(!Kd(e))throw e;t.L_.add(1),await Jd(t),t.q_.set("Offline"),n||(n=()=>nN(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Ye("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await lg(t)})}function lN(t,e){return e().catch(n=>pm(t,n,e))}async function ug(t){const e=St(t),n=vl(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;Oj(e);)try{const i=await wj(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,Fj(e,i)}catch(i){await pm(e,i)}uN(e)&&cN(e)}function Oj(t){return Au(t)&&t.O_.length<10}function Fj(t,e){t.O_.push(e);const n=vl(t);n.r_()&&n.V_&&n.m_(e.mutations)}function uN(t){return Au(t)&&!vl(t).n_()&&t.O_.length>0}function cN(t){vl(t).start()}async function Mj(t){vl(t).p_()}async function Uj(t){const e=vl(t);for(const n of t.O_)e.m_(n.mutations)}async function Vj(t,e,n){const r=t.O_.shift(),i=iy.from(r,e,n);await lN(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await ug(t)}async function Bj(t,e){e&&vl(t).V_&&await async function(r,i){if(function(o){return k7(o)&&o!==Ie.ABORTED}(i.code)){const s=r.O_.shift();vl(r).s_(),await lN(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await ug(r)}}(t,e),uN(t)&&cN(t)}async function Q_(t,e){const n=St(t);n.asyncQueue.verifyOperationInProgress(),Ye("RemoteStore","RemoteStore received new credentials");const r=Au(n);n.L_.add(3),await Jd(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await lg(n)}async function zj(t,e){const n=St(t);e?(n.L_.delete(2),await lg(n)):e||(n.L_.add(2),await Jd(n),n.q_.set("Unknown"))}function Yc(t){return t.K_||(t.K_=function(n,r,i){const s=St(n);return s.w_(),new Ij(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:Lj.bind(null,t),Ro:Rj.bind(null,t),mo:jj.bind(null,t),d_:Dj.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),fy(t)?dy(t):t.q_.set("Unknown")):(await t.K_.stop(),aN(t))})),t.K_}function vl(t){return t.U_||(t.U_=function(n,r,i){const s=St(n);return s.w_(),new Tj(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:Mj.bind(null,t),mo:Bj.bind(null,t),f_:Uj.bind(null,t),g_:Vj.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await ug(t)):(await t.U_.stop(),t.O_.length>0&&(Ye("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class py{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new ta,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new py(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ve(Ie.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function my(t,e){if(ua("AsyncQueue",`${e}: ${t}`),Kd(t))return new Ve(Ie.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vc{constructor(e){this.comparator=e?(n,r)=>e(n,r)||lt.comparator(n.key,r.key):(n,r)=>lt.comparator(n.key,r.key),this.keyedMap=Fh(),this.sortedSet=new Bn(this.comparator)}static emptySet(e){return new vc(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof vc)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new vc;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J_{constructor(){this.W_=new Bn(lt.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):yt():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Fc{constructor(e,n,r,i,s,o,a,l,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Fc(e,n,vc.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&tg(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qj{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class Hj{constructor(){this.queries=X_(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=St(n),s=i.queries;i.queries=X_(),s.forEach((o,a)=>{for(const l of a.j_)l.onError(r)})})(this,new Ve(Ie.ABORTED,"Firestore shutting down"))}}function X_(){return new Kc(t=>LS(t),tg)}async function gy(t,e){const n=St(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new qj,r=e.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(i,!0);break;case 1:s.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=my(o,`Initialization of query '${qu(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&yy(n)}async function vy(t,e){const n=St(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Wj(t,e){const n=St(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&yy(n)}function $j(t,e,n){const r=St(t),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(n);r.queries.delete(e)}function yy(t){t.Y_.forEach(e=>{e.next()})}var w2,Z_;(Z_=w2||(w2={})).ea="default",Z_.Cache="cache";class wy{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Fc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Fc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==w2.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hN{constructor(e){this.key=e}}class dN{constructor(e){this.key=e}}class Gj{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Ut(),this.mutatedKeys=Ut(),this.Aa=RS(e),this.Ra=new vc(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new J_,i=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((c,g)=>{const v=i.get(c),m=ng(this.query,g)?g:null,S=!!v&&this.mutatedKeys.has(v.key),A=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let L=!1;v&&m?v.data.isEqual(m.data)?S!==A&&(r.track({type:3,doc:m}),L=!0):this.ga(v,m)||(r.track({type:2,doc:m}),L=!0,(l&&this.Aa(m,l)>0||u&&this.Aa(m,u)<0)&&(a=!0)):!v&&m?(r.track({type:0,doc:m}),L=!0):v&&!m&&(r.track({type:1,doc:v}),L=!0,(l||u)&&(a=!0)),L&&(m?(o=o.add(m),s=A?s.add(c):s.delete(c)):(o=o.delete(c),s=s.delete(c)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const c=this.query.limitType==="F"?o.last():o.first();o=o.delete(c.key),s=s.delete(c.key),r.track({type:1,doc:c})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((c,g)=>function(m,S){const A=L=>{switch(L){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return yt()}};return A(m)-A(S)}(c.type,g.type)||this.Aa(c.doc,g.doc)),this.pa(r),i=i!=null&&i;const a=n&&!i?this.ya():[],l=this.da.size===0&&this.current&&!i?1:0,u=l!==this.Ea;return this.Ea=l,o.length!==0||u?{snapshot:new Fc(this.query,e.Ra,s,o,e.mutatedKeys,l===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new J_,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Ut(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new dN(r))}),this.da.forEach(r=>{e.has(r)||n.push(new hN(r))}),n}ba(e){this.Ta=e.Ts,this.da=Ut();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Fc.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class Kj{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class Yj{constructor(e){this.key=e,this.va=!1}}class Qj{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Kc(a=>LS(a),tg),this.Ma=new Map,this.xa=new Set,this.Oa=new Bn(lt.comparator),this.Na=new Map,this.La=new ay,this.Ba={},this.ka=new Map,this.qa=Oc.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function Jj(t,e,n=!0){const r=yN(t);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await fN(r,e,n,!0),i}async function Xj(t,e){const n=yN(t);await fN(n,e,!0,!1)}async function fN(t,e,n,r){const i=await _j(t.localStore,yo(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await Zj(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&sN(t.remoteStore,i),a}async function Zj(t,e,n,r,i){t.Ka=(g,v,m)=>async function(A,L,b,k){let j=L.view.ma(b);j.ns&&(j=await G_(A.localStore,L.query,!1).then(({documents:D})=>L.view.ma(D,j)));const U=k&&k.targetChanges.get(L.targetId),q=k&&k.targetMismatches.get(L.targetId)!=null,ee=L.view.applyChanges(j,A.isPrimaryClient,U,q);return tx(A,L.targetId,ee.wa),ee.snapshot}(t,g,v,m);const s=await G_(t.localStore,e,!0),o=new Gj(e,s.Ts),a=o.ma(s.documents),l=Qd.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),u=o.applyChanges(a,t.isPrimaryClient,l);tx(t,n,u.wa);const c=new Kj(e,n,o);return t.Fa.set(e,c),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),u.snapshot}async function eD(t,e,n){const r=St(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!tg(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await y2(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&cy(r.remoteStore,i.targetId),_2(r,i.targetId)}).catch(Gd)):(_2(r,i.targetId),await y2(r.localStore,i.targetId,!0))}async function tD(t,e){const n=St(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),cy(n.remoteStore,r.targetId))}async function nD(t,e,n){const r=uD(t);try{const i=await function(o,a){const l=St(o),u=cr.now(),c=a.reduce((m,S)=>m.add(S.key),Ut());let g,v;return l.persistence.runTransaction("Locally write mutations","readwrite",m=>{let S=ca(),A=Ut();return l.cs.getEntries(m,c).next(L=>{S=L,S.forEach((b,k)=>{k.isValidDocument()||(A=A.add(b))})}).next(()=>l.localDocuments.getOverlayedDocuments(m,S)).next(L=>{g=L;const b=[];for(const k of a){const j=N7(k,g.get(k.key).overlayedDocument);j!=null&&b.push(new Al(k.key,j,NS(j.value.mapValue),fi.exists(!0)))}return l.mutationQueue.addMutationBatch(m,u,b,a)}).next(L=>{v=L;const b=L.applyToLocalDocumentSet(g,A);return l.documentOverlayCache.saveOverlays(m,L.batchId,b)})}).then(()=>({batchId:v.batchId,changes:DS(g)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let u=o.Ba[o.currentUser.toKey()];u||(u=new Bn(Qt)),u=u.insert(a,l),o.Ba[o.currentUser.toKey()]=u}(r,i.batchId,n),await Xd(r,i.changes),await ug(r.remoteStore)}catch(i){const s=my(i,"Failed to persist write");n.reject(s)}}async function pN(t,e){const n=St(t);try{const r=await vj(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Na.get(s);o&&(ln(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?ln(o.va):i.removedDocuments.size>0&&(ln(o.va),o.va=!1))}),await Xd(n,r,e)}catch(r){await Gd(r)}}function ex(t,e,n){const r=St(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((s,o)=>{const a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=St(o);l.onlineState=a;let u=!1;l.queries.forEach((c,g)=>{for(const v of g.j_)v.Z_(a)&&(u=!0)}),u&&yy(l)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function rD(t,e,n){const r=St(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),s=i&&i.key;if(s){let o=new Bn(lt.comparator);o=o.insert(s,ei.newNoDocument(s,bt.min()));const a=Ut().add(s),l=new og(bt.min(),new Map,new Bn(Qt),o,a);await pN(r,l),r.Oa=r.Oa.remove(s),r.Na.delete(e),_y(r)}else await y2(r.localStore,e,!1).then(()=>_2(r,e,n)).catch(Gd)}async function iD(t,e){const n=St(t),r=e.batch.batchId;try{const i=await gj(n.localStore,e);gN(n,r,null),mN(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Xd(n,i)}catch(i){await Gd(i)}}async function sD(t,e,n){const r=St(t);try{const i=await function(o,a){const l=St(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let c;return l.mutationQueue.lookupMutationBatch(u,a).next(g=>(ln(g!==null),c=g.keys(),l.mutationQueue.removeMutationBatch(u,g))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,c,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,c)).next(()=>l.localDocuments.getDocuments(u,c))})}(r.localStore,e);gN(r,e,n),mN(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Xd(r,i)}catch(i){await Gd(i)}}function mN(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function gN(t,e,n){const r=St(t);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function _2(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||vN(t,r)})}function vN(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(cy(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),_y(t))}function tx(t,e,n){for(const r of n)r instanceof hN?(t.La.addReference(r.key,e),oD(t,r)):r instanceof dN?(Ye("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||vN(t,r.key)):yt()}function oD(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(Ye("SyncEngine","New document in limbo: "+n),t.xa.add(r),_y(t))}function _y(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new lt(An.fromString(e)),r=t.qa.next();t.Na.set(r,new Yj(n)),t.Oa=t.Oa.insert(n,r),sN(t.remoteStore,new Za(yo(eg(n.path)),r,"TargetPurposeLimboResolution",Jv.oe))}}async function Xd(t,e,n){const r=St(t),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,l)=>{o.push(r.Ka(l,e,n).then(u=>{var c;if((u||n)&&r.isPrimaryClient){const g=u?!u.fromCache:(c=n==null?void 0:n.targetChanges.get(l.targetId))===null||c===void 0?void 0:c.current;r.sharedClientState.updateQueryState(l.targetId,g?"current":"not-current")}if(u){i.push(u);const g=uy.Wi(l.targetId,u);s.push(g)}}))}),await Promise.all(o),r.Ca.d_(i),await async function(l,u){const c=St(l);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>Le.forEach(u,v=>Le.forEach(v.$i,m=>c.persistence.referenceDelegate.addReference(g,v.targetId,m)).next(()=>Le.forEach(v.Ui,m=>c.persistence.referenceDelegate.removeReference(g,v.targetId,m)))))}catch(g){if(!Kd(g))throw g;Ye("LocalStore","Failed to update sequence numbers: "+g)}for(const g of u){const v=g.targetId;if(!g.fromCache){const m=c.os.get(v),S=m.snapshotVersion,A=m.withLastLimboFreeSnapshotVersion(S);c.os=c.os.insert(v,A)}}}(r.localStore,s))}async function aD(t,e){const n=St(t);if(!n.currentUser.isEqual(e)){Ye("SyncEngine","User change. New user:",e.toKey());const r=await tN(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(l=>{l.reject(new Ve(Ie.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Xd(n,r.hs)}}function lD(t,e){const n=St(t),r=n.Na.get(e);if(r&&r.va)return Ut().add(r.key);{let i=Ut();const s=n.Ma.get(e);if(!s)return i;for(const o of s){const a=n.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}function yN(t){const e=St(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=pN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=lD.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=rD.bind(null,e),e.Ca.d_=Wj.bind(null,e.eventManager),e.Ca.$a=$j.bind(null,e.eventManager),e}function uD(t){const e=St(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=iD.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=sD.bind(null,e),e}class mm{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ag(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return mj(this.persistence,new fj,e.initialUser,this.serializer)}Ga(e){return new cj(ly.Zr,this.serializer)}Wa(e){return new bj}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}mm.provider={build:()=>new mm};class x2{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>ex(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=aD.bind(null,this.syncEngine),await zj(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Hj}()}createDatastore(e){const n=ag(e.databaseInfo.databaseId),r=function(s){return new Ej(s)}(e.databaseInfo);return function(s,o,a,l){return new kj(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new Cj(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>ex(this.syncEngine,n,0),function(){return Y_.D()?new Y_:new Sj}())}createSyncEngine(e,n){return function(i,s,o,a,l,u,c){const g=new Qj(i,s,o,a,l,u);return c&&(g.Qa=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=St(i);Ye("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await Jd(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}x2.provider={build:()=>new x2};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xy{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):ua("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cD{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Xr.UNAUTHENTICATED,this.clientId=xS.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{Ye("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(Ye("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ta;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=my(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function S0(t,e){t.asyncQueue.verifyOperationInProgress(),Ye("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await tN(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function nx(t,e){t.asyncQueue.verifyOperationInProgress();const n=await hD(t);Ye("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Q_(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>Q_(e.remoteStore,i)),t._onlineComponents=e}async function hD(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Ye("FirestoreClient","Using user provided OfflineComponentProvider");try{await S0(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===Ie.FAILED_PRECONDITION||i.code===Ie.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Cc("Error using user provided cache. Falling back to memory cache: "+n),await S0(t,new mm)}}else Ye("FirestoreClient","Using default OfflineComponentProvider"),await S0(t,new mm);return t._offlineComponents}async function wN(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Ye("FirestoreClient","Using user provided OnlineComponentProvider"),await nx(t,t._uninitializedComponentsProvider._online)):(Ye("FirestoreClient","Using default OnlineComponentProvider"),await nx(t,new x2))),t._onlineComponents}function dD(t){return wN(t).then(e=>e.syncEngine)}async function gm(t){const e=await wN(t),n=e.eventManager;return n.onListen=Jj.bind(null,e.syncEngine),n.onUnlisten=eD.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Xj.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=tD.bind(null,e.syncEngine),n}function fD(t,e,n={}){const r=new ta;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,u){const c=new xy({next:v=>{c.Za(),o.enqueueAndForget(()=>vy(s,g));const m=v.docs.has(a);!m&&v.fromCache?u.reject(new Ve(Ie.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&v.fromCache&&l&&l.source==="server"?u.reject(new Ve(Ie.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(v)},error:v=>u.reject(v)}),g=new wy(eg(a.path),c,{includeMetadataChanges:!0,_a:!0});return gy(s,g)}(await gm(t),t.asyncQueue,e,n,r)),r.promise}function pD(t,e,n={}){const r=new ta;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,u){const c=new xy({next:v=>{c.Za(),o.enqueueAndForget(()=>vy(s,g)),v.fromCache&&l.source==="server"?u.reject(new Ve(Ie.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(v)},error:v=>u.reject(v)}),g=new wy(a,c,{includeMetadataChanges:!0,_a:!0});return gy(s,g)}(await gm(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _N(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rx=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xN(t,e,n){if(!n)throw new Ve(Ie.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function mD(t,e,n,r){if(e===!0&&r===!0)throw new Ve(Ie.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function ix(t){if(!lt.isDocumentKey(t))throw new Ve(Ie.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function sx(t){if(lt.isDocumentKey(t))throw new Ve(Ie.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function cg(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":yt()}function pi(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Ve(Ie.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=cg(t);throw new Ve(Ie.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ox{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Ve(Ie.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Ve(Ie.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}mD("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=_N((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Ve(Ie.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Ve(Ie.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Ve(Ie.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class hg{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ox({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ve(Ie.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ve(Ie.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ox(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new RR;switch(r.type){case"firstParty":return new FR(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Ve(Ie.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=rx.get(n);r&&(Ye("ComponentProvider","Removing Datastore"),rx.delete(n),r.terminate())}(this),Promise.resolve()}}function gD(t,e,n,r={}){var i;const s=(t=pi(t,hg))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Cc("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=Xr.MOCK_USER;else{a=A6(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new Ve(Ie.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Xr(u)}t._authCredentials=new jR(new _S(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new El(this.firestore,e,this._query)}}class ti{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new dl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ti(this.firestore,e,this._key)}}class dl extends El{constructor(e,n,r){super(e,n,eg(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ti(this.firestore,null,new lt(e))}withConverter(e){return new dl(this.firestore,e,this._path)}}function $t(t,e,...n){if(t=xn(t),xN("collection","path",e),t instanceof hg){const r=An.fromString(e,...n);return sx(r),new dl(t,null,r)}{if(!(t instanceof ti||t instanceof dl))throw new Ve(Ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(An.fromString(e,...n));return sx(r),new dl(t.firestore,null,r)}}function cn(t,e,...n){if(t=xn(t),arguments.length===1&&(e=xS.newId()),xN("doc","path",e),t instanceof hg){const r=An.fromString(e,...n);return ix(r),new ti(t,null,new lt(r))}{if(!(t instanceof ti||t instanceof dl))throw new Ve(Ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(An.fromString(e,...n));return ix(r),new ti(t.firestore,t instanceof dl?t.converter:null,new lt(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ax{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new rN(this,"async_queue_retry"),this.Vu=()=>{const r=b0();r&&Ye("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=b0();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=b0();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new ta;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Kd(e))throw e;Ye("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw ua("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=py.createAndSchedule(this,e,n,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&yt()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function lx(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class xo extends hg{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new ax,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new ax(e),this._firestoreClient=void 0,await e}}}function vD(t,e){const n=typeof t=="object"?t:Ym(),r=typeof t=="string"?t:"(default)",i=xu(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=b6("firestore");s&&gD(i,...s)}return i}function Zd(t){if(t._terminated)throw new Ve(Ie.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||yD(t),t._firestoreClient}function yD(t){var e,n,r;const i=t._freezeSettings(),s=function(a,l,u,c){return new QR(a,l,u,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,_N(c.experimentalLongPollingOptions),c.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new cD(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Mc(Ur.fromBase64String(e))}catch(n){throw new Ve(Ie.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Mc(Ur.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ef{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Ve(Ie.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Dr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tf{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class by{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Ve(Ie.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Ve(Ie.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Qt(this._lat,e._lat)||Qt(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sy{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wD=/^__.*__$/;class _D{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Al(e,this.data,this.fieldMask,n,this.fieldTransforms):new Yd(e,this.data,n,this.fieldTransforms)}}class bN{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Al(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function SN(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw yt()}}class dg{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new dg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return vm(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(SN(this.Cu)&&wD.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class xD{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||ag(e)}Qu(e,n,r,i=!1){return new dg({Cu:e,methodName:n,qu:r,path:Dr.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function nf(t){const e=t._freezeSettings(),n=ag(t._databaseId);return new xD(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Ny(t,e,n,r,i,s={}){const o=t.Qu(s.merge||s.mergeFields?2:0,e,n,i);Iy("Data must be an object, but it was:",o,r);const a=EN(r,o);let l,u;if(s.merge)l=new Gi(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const c=[];for(const g of s.mergeFields){const v=b2(e,g,n);if(!o.contains(v))throw new Ve(Ie.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);TN(c,v)||c.push(v)}l=new Gi(c),u=o.fieldTransforms.filter(g=>l.covers(g.field))}else l=null,u=o.fieldTransforms;return new _D(new Si(a),l,u)}class fg extends tf{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof fg}}function bD(t,e,n){return new dg({Cu:3,qu:e.settings.qu,methodName:t._methodName,xu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Ay extends tf{_toFieldTransform(e){return new zS(e.path,new Pd)}isEqual(e){return e instanceof Ay}}class Ey extends tf{constructor(e,n){super(e),this.Ku=n}_toFieldTransform(e){const n=bD(this,e,!0),r=this.Ku.map(s=>Qc(s,n)),i=new Dc(r);return new zS(e.path,i)}isEqual(e){return e instanceof Ey&&bd(this.Ku,e.Ku)}}function NN(t,e,n,r){const i=t.Qu(1,e,n);Iy("Data must be an object, but it was:",i,r);const s=[],o=Si.empty();Nu(r,(l,u)=>{const c=Ty(e,l,n);u=xn(u);const g=i.Nu(c);if(u instanceof fg)s.push(c);else{const v=Qc(u,g);v!=null&&(s.push(c),o.set(c,v))}});const a=new Gi(s);return new bN(o,a,i.fieldTransforms)}function AN(t,e,n,r,i,s){const o=t.Qu(1,e,n),a=[b2(e,r,n)],l=[i];if(s.length%2!=0)throw new Ve(Ie.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let v=0;v<s.length;v+=2)a.push(b2(e,s[v])),l.push(s[v+1]);const u=[],c=Si.empty();for(let v=a.length-1;v>=0;--v)if(!TN(u,a[v])){const m=a[v];let S=l[v];S=xn(S);const A=o.Nu(m);if(S instanceof fg)u.push(m);else{const L=Qc(S,A);L!=null&&(u.push(m),c.set(m,L))}}const g=new Gi(u);return new bN(c,g,o.fieldTransforms)}function SD(t,e,n,r=!1){return Qc(n,t.Qu(r?4:3,e))}function Qc(t,e){if(IN(t=xn(t)))return Iy("Unsupported field value:",e,t),EN(t,e);if(t instanceof tf)return function(r,i){if(!SN(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=Qc(a,i.Lu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=xn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return y7(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=cr.fromDate(r);return{timestampValue:fm(i.serializer,s)}}if(r instanceof cr){const s=new cr(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:fm(i.serializer,s)}}if(r instanceof by)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Mc)return{bytesValue:KS(i.serializer,r._byteString)};if(r instanceof ti){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:oy(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Sy)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.Bu("VectorValues must only contain numeric values.");return ry(a.serializer,l)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${cg(r)}`)}(t,e)}function EN(t,e){const n={};return bS(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Nu(t,(r,i)=>{const s=Qc(i,e.Mu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function IN(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof cr||t instanceof by||t instanceof Mc||t instanceof ti||t instanceof tf||t instanceof Sy)}function Iy(t,e,n){if(!IN(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=cg(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function b2(t,e,n){if((e=xn(e))instanceof ef)return e._internalPath;if(typeof e=="string")return Ty(t,e);throw vm("Field path arguments must be of type string or ",t,!1,void 0,n)}const ND=new RegExp("[~\\*/\\[\\]]");function Ty(t,e,n){if(e.search(ND)>=0)throw vm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new ef(...e.split("."))._internalPath}catch{throw vm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function vm(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new Ve(Ie.INVALID_ARGUMENT,a+t+l)}function TN(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kN{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new ti(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new AD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(pg("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class AD extends kN{data(){return super.data()}}function pg(t,e){return typeof e=="string"?Ty(t,e):e instanceof ef?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PN(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Ve(Ie.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ky{}class CN extends ky{}function rf(t,e,...n){let r=[];e instanceof ky&&r.push(e),r=r.concat(n),function(s){const o=s.filter(l=>l instanceof Py).length,a=s.filter(l=>l instanceof mg).length;if(o>1||o>0&&a>0)throw new Ve(Ie.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class mg extends CN{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new mg(e,n,r)}_apply(e){const n=this._parse(e);return RN(e._query,n),new El(e.firestore,e.converter,d2(e._query,n))}_parse(e){const n=nf(e.firestore);return function(s,o,a,l,u,c,g){let v;if(u.isKeyField()){if(c==="array-contains"||c==="array-contains-any")throw new Ve(Ie.INVALID_ARGUMENT,`Invalid Query. You can't perform '${c}' queries on documentId().`);if(c==="in"||c==="not-in"){cx(g,c);const m=[];for(const S of g)m.push(ux(l,s,S));v={arrayValue:{values:m}}}else v=ux(l,s,g)}else c!=="in"&&c!=="not-in"&&c!=="array-contains-any"||cx(g,c),v=SD(a,o,g,c==="in"||c==="not-in");return ur.create(u,c,v)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function gg(t,e,n){const r=e,i=pg("where",t);return mg._create(i,r,n)}class Py extends ky{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Py(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:zs.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)RN(o,l),o=d2(o,l)}(e._query,n),new El(e.firestore,e.converter,d2(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Cy extends CN{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Cy(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new Ve(Ie.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new Ve(Ie.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new kd(s,o)}(e._query,this._field,this._direction);return new El(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new Gc(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function LN(t,e="asc"){const n=e,r=pg("orderBy",t);return Cy._create(r,n)}function ux(t,e,n){if(typeof(n=xn(n))=="string"){if(n==="")throw new Ve(Ie.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!CS(e)&&n.indexOf("/")!==-1)throw new Ve(Ie.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(An.fromString(n));if(!lt.isDocumentKey(r))throw new Ve(Ie.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return P_(t,new lt(r))}if(n instanceof ti)return P_(t,n._key);throw new Ve(Ie.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${cg(n)}.`)}function cx(t,e){if(!Array.isArray(t)||t.length===0)throw new Ve(Ie.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function RN(t,e){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Ve(Ie.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ve(Ie.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class ED{convertValue(e,n="none"){switch(hu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return er(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(cu(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw yt()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Nu(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>er(o.doubleValue));return new Sy(s)}convertGeoPoint(e){return new by(er(e.latitude),er(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Zv(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Ed(e));default:return null}}convertTimestamp(e){const n=gl(e);return new cr(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=An.fromString(e);ln(eN(r));const i=new Id(r.get(1),r.get(3)),s=new lt(r.popFirst(5));return i.isEqual(n)||ua(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ly(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uh{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class jN extends kN{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Ap(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(pg("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Ap extends jN{data(e={}){return super.data(e)}}class DN{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Uh(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Ap(this._firestore,this._userDataWriter,r.key,r,new Uh(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Ve(Ie.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new Ap(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Uh(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new Ap(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Uh(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,c=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),c=o.indexOf(a.doc.key)),{type:ID(a.type),doc:l,oldIndex:u,newIndex:c}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function ID(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return yt()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function du(t){t=pi(t,ti);const e=pi(t.firestore,xo);return fD(Zd(e),t._key).then(n=>MN(e,t,n))}class Ry extends ED{constructor(e){super(),this.firestore=e}convertBytes(e){return new Mc(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new ti(this.firestore,null,n)}}function Un(t){t=pi(t,El);const e=pi(t.firestore,xo),n=Zd(e),r=new Ry(e);return PN(t._query),pD(n,t._query).then(i=>new DN(e,r,t,i))}function jy(t,e,n){t=pi(t,ti);const r=pi(t.firestore,xo),i=Ly(t.converter,e,n);return sf(r,[Ny(nf(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,fi.none())])}function ki(t,e,n,...r){t=pi(t,ti);const i=pi(t.firestore,xo),s=nf(i);let o;return o=typeof(e=xn(e))=="string"||e instanceof ef?AN(s,"updateDoc",t._key,e,n,r):NN(s,"updateDoc",t._key,e),sf(i,[o.toMutation(t._key,fi.exists(!0))])}function ON(t){return sf(pi(t.firestore,xo),[new sg(t._key,fi.none())])}function Qo(t,e){const n=pi(t.firestore,xo),r=cn(t),i=Ly(t.converter,e);return sf(n,[Ny(nf(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,fi.exists(!1))]).then(()=>r)}function FN(t,...e){var n,r,i;t=xn(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||lx(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(lx(e[o])){const g=e[o];e[o]=(n=g.next)===null||n===void 0?void 0:n.bind(g),e[o+1]=(r=g.error)===null||r===void 0?void 0:r.bind(g),e[o+2]=(i=g.complete)===null||i===void 0?void 0:i.bind(g)}let l,u,c;if(t instanceof ti)u=pi(t.firestore,xo),c=eg(t._key.path),l={next:g=>{e[o]&&e[o](MN(u,t,g))},error:e[o+1],complete:e[o+2]};else{const g=pi(t,El);u=pi(g.firestore,xo),c=g._query;const v=new Ry(u);l={next:m=>{e[o]&&e[o](new DN(u,v,g,m))},error:e[o+1],complete:e[o+2]},PN(t._query)}return function(v,m,S,A){const L=new xy(A),b=new wy(m,L,S);return v.asyncQueue.enqueueAndForget(async()=>gy(await gm(v),b)),()=>{L.Za(),v.asyncQueue.enqueueAndForget(async()=>vy(await gm(v),b))}}(Zd(u),c,a,l)}function sf(t,e){return function(r,i){const s=new ta;return r.asyncQueue.enqueueAndForget(async()=>nD(await dD(r),i,s)),s.promise}(Zd(t),e)}function MN(t,e,n){const r=n.docs.get(e._key),i=new Ry(t);return new jN(t,i,e._key,r,new Uh(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TD{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=nf(e)}set(e,n,r){this._verifyNotCommitted();const i=N0(e,this._firestore),s=Ly(i.converter,n,r),o=Ny(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,fi.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const s=N0(e,this._firestore);let o;return o=typeof(n=xn(n))=="string"||n instanceof ef?AN(this._dataReader,"WriteBatch.update",s._key,n,r,i):NN(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,fi.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=N0(e,this._firestore);return this._mutations=this._mutations.concat(new sg(n._key,fi.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ve(Ie.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function N0(t,e){if((t=xn(t)).firestore!==e)throw new Ve(Ie.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function Kf(){return new Ay("serverTimestamp")}function kD(...t){return new Ey("arrayUnion",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PD(t){return Zd(t=pi(t,xo)),new TD(t,e=>sf(t,e))}(function(e,n=!0){(function(i){$c=i})(bu),Vs(new _s("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new xo(new DR(r.getProvider("auth-internal")),new UR(r.getProvider("app-check-internal")),function(u,c){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new Ve(Ie.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Id(u.options.projectId,c)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Ti(A_,"4.7.3",e),Ti(A_,"4.7.3","esm2017")})();var CD="firebase",LD="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ti(CD,LD,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UN="firebasestorage.googleapis.com",RD="storageBucket",jD=2*60*1e3,DD=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So extends Hs{constructor(e,n,r=0){super(A0(e),`Firebase Storage: ${n} (${A0(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,So.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return A0(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var bo;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(bo||(bo={}));function A0(t){return"storage/"+t}function OD(){const t="An unknown error occurred, please check the error payload for server response.";return new So(bo.UNKNOWN,t)}function FD(){return new So(bo.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function MD(){return new So(bo.CANCELED,"User canceled the upload/download.")}function UD(t){return new So(bo.INVALID_URL,"Invalid URL '"+t+"'.")}function VD(t){return new So(bo.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function hx(t){return new So(bo.INVALID_ARGUMENT,t)}function VN(){return new So(bo.APP_DELETED,"The Firebase app was deleted.")}function BD(t){return new So(bo.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ds{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Ds.makeFromUrl(e,n)}catch{return new Ds(e,"")}if(r.path==="")return r;throw VD(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(U){U.path.charAt(U.path.length-1)==="/"&&(U.path_=U.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),l={bucket:1,path:3};function u(U){U.path_=decodeURIComponent(U.path)}const c="v[A-Za-z0-9_]+",g=n.replace(/[.]/g,"\\."),v="(/([^?#]*).*)?$",m=new RegExp(`^https?://${g}/${c}/b/${i}/o${v}`,"i"),S={bucket:1,path:3},A=n===UN?"(?:storage.googleapis.com|storage.cloud.google.com)":n,L="([^?#]*)",b=new RegExp(`^https?://${A}/${i}/${L}`,"i"),j=[{regex:a,indices:l,postModify:s},{regex:m,indices:S,postModify:u},{regex:b,indices:{bucket:1,path:2},postModify:u}];for(let U=0;U<j.length;U++){const q=j[U],ee=q.regex.exec(e);if(ee){const D=ee[q.indices.bucket];let N=ee[q.indices.path];N||(N=""),r=new Ds(D,N),q.postModify(r);break}}if(r==null)throw UD(e);return r}}class zD{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qD(t,e,n){let r=1,i=null,s=null,o=!1,a=0;function l(){return a===2}let u=!1;function c(...L){u||(u=!0,e.apply(null,L))}function g(L){i=setTimeout(()=>{i=null,t(m,l())},L)}function v(){s&&clearTimeout(s)}function m(L,...b){if(u){v();return}if(L){v(),c.call(null,L,...b);return}if(l()||o){v(),c.call(null,L,...b);return}r<64&&(r*=2);let j;a===1?(a=2,j=0):j=(r+Math.random())*1e3,g(j)}let S=!1;function A(L){S||(S=!0,v(),!u&&(i!==null?(L||(a=2),clearTimeout(i),g(0)):L||(a=1)))}return g(0),s=setTimeout(()=>{o=!0,A(!0)},n),A}function HD(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WD(t){return t!==void 0}function dx(t,e,n,r){if(r<e)throw hx(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw hx(`Invalid value for '${t}'. Expected ${n} or less.`)}function $D(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var ym;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(ym||(ym={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GD(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KD{constructor(e,n,r,i,s,o,a,l,u,c,g,v=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=u,this.progressCallback_=c,this.connectionFactory_=g,this.retry=v,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((m,S)=>{this.resolve_=m,this.reject_=S,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new Yf(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const l=a.loaded,u=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,u)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===ym.NO_ERROR,l=s.getStatus();if(!a||GD(l,this.additionalRetryCodes_)&&this.retry){const c=s.getErrorCode()===ym.ABORT;r(!1,new Yf(!1,null,c));return}const u=this.successCodes_.indexOf(l)!==-1;r(!0,new Yf(u,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());WD(l)?s(l):s()}catch(l){o(l)}else if(a!==null){const l=OD();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(i.canceled){const l=this.appDelete_?VN():MD();o(l)}else{const l=FD();o(l)}};this.canceled_?n(!1,new Yf(!1,null,!0)):this.backoffId_=qD(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&HD(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Yf{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function YD(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function QD(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function JD(t,e){e&&(t["X-Firebase-GMPID"]=e)}function XD(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function ZD(t,e,n,r,i,s,o=!0){const a=$D(t.urlParams),l=t.url+a,u=Object.assign({},t.headers);return JD(u,e),YD(u,n),QD(u,s),XD(u,r),new KD(l,t.method,u,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e9(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function t9(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wm{constructor(e,n){this._service=e,n instanceof Ds?this._location=n:this._location=Ds.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new wm(e,n)}get root(){const e=new Ds(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return t9(this._location.path)}get storage(){return this._service}get parent(){const e=e9(this._location.path);if(e===null)return null;const n=new Ds(this._location.bucket,e);return new wm(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw BD(e)}}function fx(t,e){const n=e==null?void 0:e[RD];return n==null?null:Ds.makeFromBucketSpec(n,t)}function n9(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:A6(i,t.app.options.projectId))}class r9{constructor(e,n,r,i,s){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=UN,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=jD,this._maxUploadRetryTime=DD,this._requests=new Set,i!=null?this._bucket=Ds.makeFromBucketSpec(i,this._host):this._bucket=fx(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Ds.makeFromBucketSpec(this._url,e):this._bucket=fx(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){dx("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){dx("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new wm(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new zD(VN());{const o=ZD(e,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const px="@firebase/storage",mx="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BN="storage";function i9(t=Ym(),e){t=xn(t);const r=xu(t,BN).getImmediate({identifier:e}),i=b6("storage");return i&&s9(r,...i),r}function s9(t,e,n,r={}){n9(t,e,n,r)}function o9(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new r9(n,r,i,e,bu)}function a9(){Vs(new _s(BN,o9,"PUBLIC").setMultipleInstances(!0)),Ti(px,mx,""),Ti(px,mx,"esm2017")}a9();const zN="@firebase/installations",Dy="0.6.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qN=1e4,HN=`w:${Dy}`,WN="FIS_v2",l9="https://firebaseinstallations.googleapis.com/v1",u9=60*60*1e3,c9="installations",h9="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d9={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},fu=new _u(c9,h9,d9);function $N(t){return t instanceof Hs&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GN({projectId:t}){return`${l9}/projects/${t}/installations`}function KN(t){return{token:t.token,requestStatus:2,expiresIn:p9(t.expiresIn),creationTime:Date.now()}}async function YN(t,e){const r=(await e.json()).error;return fu.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function QN({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function f9(t,{refreshToken:e}){const n=QN(t);return n.append("Authorization",m9(e)),n}async function JN(t){const e=await t();return e.status>=500&&e.status<600?t():e}function p9(t){return Number(t.replace("s","000"))}function m9(t){return`${WN} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function g9({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=GN(t),i=QN(t),s=e.getImmediate({optional:!0});if(s){const u=await s.getHeartbeatsHeader();u&&i.append("x-firebase-client",u)}const o={fid:n,authVersion:WN,appId:t.appId,sdkVersion:HN},a={method:"POST",headers:i,body:JSON.stringify(o)},l=await JN(()=>fetch(r,a));if(l.ok){const u=await l.json();return{fid:u.fid||n,registrationStatus:2,refreshToken:u.refreshToken,authToken:KN(u.authToken)}}else throw await YN("Create Installation",l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XN(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v9(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y9=/^[cdef][\w-]{21}$/,S2="";function w9(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=_9(t);return y9.test(n)?n:S2}catch{return S2}}function _9(t){return v9(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vg(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZN=new Map;function eA(t,e){const n=vg(t);tA(n,e),x9(n,e)}function tA(t,e){const n=ZN.get(t);if(n)for(const r of n)r(e)}function x9(t,e){const n=b9();n&&n.postMessage({key:t,fid:e}),S9()}let Jl=null;function b9(){return!Jl&&"BroadcastChannel"in self&&(Jl=new BroadcastChannel("[Firebase] FID Change"),Jl.onmessage=t=>{tA(t.data.key,t.data.fid)}),Jl}function S9(){ZN.size===0&&Jl&&(Jl.close(),Jl=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N9="firebase-installations-database",A9=1,pu="firebase-installations-store";let E0=null;function Oy(){return E0||(E0=Km(N9,A9,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(pu)}}})),E0}async function _m(t,e){const n=vg(t),i=(await Oy()).transaction(pu,"readwrite"),s=i.objectStore(pu),o=await s.get(n);return await s.put(e,n),await i.done,(!o||o.fid!==e.fid)&&eA(t,e.fid),e}async function nA(t){const e=vg(t),r=(await Oy()).transaction(pu,"readwrite");await r.objectStore(pu).delete(e),await r.done}async function yg(t,e){const n=vg(t),i=(await Oy()).transaction(pu,"readwrite"),s=i.objectStore(pu),o=await s.get(n),a=e(o);return a===void 0?await s.delete(n):await s.put(a,n),await i.done,a&&(!o||o.fid!==a.fid)&&eA(t,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fy(t){let e;const n=await yg(t.appConfig,r=>{const i=E9(r),s=I9(t,i);return e=s.registrationPromise,s.installationEntry});return n.fid===S2?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function E9(t){const e=t||{fid:w9(),registrationStatus:0};return rA(e)}function I9(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(fu.create("app-offline"));return{installationEntry:e,registrationPromise:i}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=T9(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:k9(t)}:{installationEntry:e}}async function T9(t,e){try{const n=await g9(t,e);return _m(t.appConfig,n)}catch(n){throw $N(n)&&n.customData.serverCode===409?await nA(t.appConfig):await _m(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function k9(t){let e=await gx(t.appConfig);for(;e.registrationStatus===1;)await XN(100),e=await gx(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await Fy(t);return r||n}return e}function gx(t){return yg(t,e=>{if(!e)throw fu.create("installation-not-found");return rA(e)})}function rA(t){return P9(t)?{fid:t.fid,registrationStatus:0}:t}function P9(t){return t.registrationStatus===1&&t.registrationTime+qN<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function C9({appConfig:t,heartbeatServiceProvider:e},n){const r=L9(t,n),i=f9(t,n),s=e.getImmediate({optional:!0});if(s){const u=await s.getHeartbeatsHeader();u&&i.append("x-firebase-client",u)}const o={installation:{sdkVersion:HN,appId:t.appId}},a={method:"POST",headers:i,body:JSON.stringify(o)},l=await JN(()=>fetch(r,a));if(l.ok){const u=await l.json();return KN(u)}else throw await YN("Generate Auth Token",l)}function L9(t,{fid:e}){return`${GN(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function My(t,e=!1){let n;const r=await yg(t.appConfig,s=>{if(!iA(s))throw fu.create("not-registered");const o=s.authToken;if(!e&&D9(o))return s;if(o.requestStatus===1)return n=R9(t,e),s;{if(!navigator.onLine)throw fu.create("app-offline");const a=F9(s);return n=j9(t,a),a}});return n?await n:r.authToken}async function R9(t,e){let n=await vx(t.appConfig);for(;n.authToken.requestStatus===1;)await XN(100),n=await vx(t.appConfig);const r=n.authToken;return r.requestStatus===0?My(t,e):r}function vx(t){return yg(t,e=>{if(!iA(e))throw fu.create("not-registered");const n=e.authToken;return M9(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function j9(t,e){try{const n=await C9(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return await _m(t.appConfig,r),n}catch(n){if($N(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await nA(t.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await _m(t.appConfig,r)}throw n}}function iA(t){return t!==void 0&&t.registrationStatus===2}function D9(t){return t.requestStatus===2&&!O9(t)}function O9(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+u9}function F9(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function M9(t){return t.requestStatus===1&&t.requestTime+qN<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function U9(t){const e=t,{installationEntry:n,registrationPromise:r}=await Fy(e);return r?r.catch(console.error):My(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function V9(t,e=!1){const n=t;return await B9(n),(await My(n,e)).token}async function B9(t){const{registrationPromise:e}=await Fy(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z9(t){if(!t||!t.options)throw I0("App Configuration");if(!t.name)throw I0("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw I0(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function I0(t){return fu.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sA="installations",q9="installations-internal",H9=t=>{const e=t.getProvider("app").getImmediate(),n=z9(e),r=xu(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},W9=t=>{const e=t.getProvider("app").getImmediate(),n=xu(e,sA).getImmediate();return{getId:()=>U9(n),getToken:i=>V9(n,i)}};function $9(){Vs(new _s(sA,H9,"PUBLIC")),Vs(new _s(q9,W9,"PRIVATE"))}$9();Ti(zN,Dy);Ti(zN,Dy,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G9="/firebase-messaging-sw.js",K9="/firebase-cloud-messaging-push-scope",oA="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Y9="https://fcmregistrations.googleapis.com/v1",aA="google.c.a.c_id",Q9="google.c.a.c_l",J9="google.c.a.ts",X9="google.c.a.e";var yx;(function(t){t[t.DATA_MESSAGE=1]="DATA_MESSAGE",t[t.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"})(yx||(yx={}));/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License. You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under the License
 * is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
 * or implied. See the License for the specific language governing permissions and limitations under
 * the License.
 */var Ld;(function(t){t.PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked"})(Ld||(Ld={}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zo(t){const e=new Uint8Array(t);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Z9(t){const e="=".repeat((4-t.length%4)%4),n=(t+e).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(n),i=new Uint8Array(r.length);for(let s=0;s<r.length;++s)i[s]=r.charCodeAt(s);return i}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T0="fcm_token_details_db",eO=5,wx="fcm_token_object_Store";async function tO(t){if("databases"in indexedDB&&!(await indexedDB.databases()).map(s=>s.name).includes(T0))return null;let e=null;return(await Km(T0,eO,{upgrade:async(r,i,s,o)=>{var a;if(i<2||!r.objectStoreNames.contains(wx))return;const l=o.objectStore(wx),u=await l.index("fcmSenderId").get(t);if(await l.clear(),!!u){if(i===2){const c=u;if(!c.auth||!c.p256dh||!c.endpoint)return;e={token:c.fcmToken,createTime:(a=c.createTime)!==null&&a!==void 0?a:Date.now(),subscriptionOptions:{auth:c.auth,p256dh:c.p256dh,endpoint:c.endpoint,swScope:c.swScope,vapidKey:typeof c.vapidKey=="string"?c.vapidKey:zo(c.vapidKey)}}}else if(i===3){const c=u;e={token:c.fcmToken,createTime:c.createTime,subscriptionOptions:{auth:zo(c.auth),p256dh:zo(c.p256dh),endpoint:c.endpoint,swScope:c.swScope,vapidKey:zo(c.vapidKey)}}}else if(i===4){const c=u;e={token:c.fcmToken,createTime:c.createTime,subscriptionOptions:{auth:zo(c.auth),p256dh:zo(c.p256dh),endpoint:c.endpoint,swScope:c.swScope,vapidKey:zo(c.vapidKey)}}}}}})).close(),await m0(T0),await m0("fcm_vapid_details_db"),await m0("undefined"),nO(e)?e:null}function nO(t){if(!t||!t.subscriptionOptions)return!1;const{subscriptionOptions:e}=t;return typeof t.createTime=="number"&&t.createTime>0&&typeof t.token=="string"&&t.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rO="firebase-messaging-database",iO=1,Rd="firebase-messaging-store";let k0=null;function lA(){return k0||(k0=Km(rO,iO,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Rd)}}})),k0}async function sO(t){const e=uA(t),r=await(await lA()).transaction(Rd).objectStore(Rd).get(e);if(r)return r;{const i=await tO(t.appConfig.senderId);if(i)return await Uy(t,i),i}}async function Uy(t,e){const n=uA(t),i=(await lA()).transaction(Rd,"readwrite");return await i.objectStore(Rd).put(e,n),await i.done,e}function uA({appConfig:t}){return t.appId}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oO={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},ni=new _u("messaging","Messaging",oO);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aO(t,e){const n=await By(t),r=cA(e),i={method:"POST",headers:n,body:JSON.stringify(r)};let s;try{s=await(await fetch(Vy(t.appConfig),i)).json()}catch(o){throw ni.create("token-subscribe-failed",{errorInfo:o==null?void 0:o.toString()})}if(s.error){const o=s.error.message;throw ni.create("token-subscribe-failed",{errorInfo:o})}if(!s.token)throw ni.create("token-subscribe-no-token");return s.token}async function lO(t,e){const n=await By(t),r=cA(e.subscriptionOptions),i={method:"PATCH",headers:n,body:JSON.stringify(r)};let s;try{s=await(await fetch(`${Vy(t.appConfig)}/${e.token}`,i)).json()}catch(o){throw ni.create("token-update-failed",{errorInfo:o==null?void 0:o.toString()})}if(s.error){const o=s.error.message;throw ni.create("token-update-failed",{errorInfo:o})}if(!s.token)throw ni.create("token-update-no-token");return s.token}async function uO(t,e){const r={method:"DELETE",headers:await By(t)};try{const s=await(await fetch(`${Vy(t.appConfig)}/${e}`,r)).json();if(s.error){const o=s.error.message;throw ni.create("token-unsubscribe-failed",{errorInfo:o})}}catch(i){throw ni.create("token-unsubscribe-failed",{errorInfo:i==null?void 0:i.toString()})}}function Vy({projectId:t}){return`${Y9}/projects/${t}/registrations`}async function By({appConfig:t,installations:e}){const n=await e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":`FIS ${n}`})}function cA({p256dh:t,auth:e,endpoint:n,vapidKey:r}){const i={web:{endpoint:n,auth:e,p256dh:t}};return r!==oA&&(i.web.applicationPubKey=r),i}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cO=7*24*60*60*1e3;async function hO(t){const e=await fO(t.swRegistration,t.vapidKey),n={vapidKey:t.vapidKey,swScope:t.swRegistration.scope,endpoint:e.endpoint,auth:zo(e.getKey("auth")),p256dh:zo(e.getKey("p256dh"))},r=await sO(t.firebaseDependencies);if(r){if(pO(r.subscriptionOptions,n))return Date.now()>=r.createTime+cO?dO(t,{token:r.token,createTime:Date.now(),subscriptionOptions:n}):r.token;try{await uO(t.firebaseDependencies,r.token)}catch(i){console.warn(i)}return _x(t.firebaseDependencies,n)}else return _x(t.firebaseDependencies,n)}async function dO(t,e){try{const n=await lO(t.firebaseDependencies,e),r=Object.assign(Object.assign({},e),{token:n,createTime:Date.now()});return await Uy(t.firebaseDependencies,r),n}catch(n){throw n}}async function _x(t,e){const r={token:await aO(t,e),createTime:Date.now(),subscriptionOptions:e};return await Uy(t,r),r.token}async function fO(t,e){const n=await t.pushManager.getSubscription();return n||t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Z9(e)})}function pO(t,e){const n=e.vapidKey===t.vapidKey,r=e.endpoint===t.endpoint,i=e.auth===t.auth,s=e.p256dh===t.p256dh;return n&&r&&i&&s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xx(t){const e={from:t.from,collapseKey:t.collapse_key,messageId:t.fcmMessageId};return mO(e,t),gO(e,t),vO(e,t),e}function mO(t,e){if(!e.notification)return;t.notification={};const n=e.notification.title;n&&(t.notification.title=n);const r=e.notification.body;r&&(t.notification.body=r);const i=e.notification.image;i&&(t.notification.image=i);const s=e.notification.icon;s&&(t.notification.icon=s)}function gO(t,e){e.data&&(t.data=e.data)}function vO(t,e){var n,r,i,s,o;if(!e.fcmOptions&&!(!((n=e.notification)===null||n===void 0)&&n.click_action))return;t.fcmOptions={};const a=(i=(r=e.fcmOptions)===null||r===void 0?void 0:r.link)!==null&&i!==void 0?i:(s=e.notification)===null||s===void 0?void 0:s.click_action;a&&(t.fcmOptions.link=a);const l=(o=e.fcmOptions)===null||o===void 0?void 0:o.analytics_label;l&&(t.fcmOptions.analyticsLabel=l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yO(t){return typeof t=="object"&&!!t&&aA in t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wO(t){if(!t||!t.options)throw P0("App Configuration Object");if(!t.name)throw P0("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:n}=t;for(const r of e)if(!n[r])throw P0(r);return{appName:t.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}function P0(t){return ni.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _O{constructor(e,n,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const i=wO(e);this.firebaseDependencies={app:e,appConfig:i,installations:n,analyticsProvider:r}}_delete(){return Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xO(t){try{t.swRegistration=await navigator.serviceWorker.register(G9,{scope:K9}),t.swRegistration.update().catch(()=>{})}catch(e){throw ni.create("failed-service-worker-registration",{browserErrorMessage:e==null?void 0:e.message})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bO(t,e){if(!e&&!t.swRegistration&&await xO(t),!(!e&&t.swRegistration)){if(!(e instanceof ServiceWorkerRegistration))throw ni.create("invalid-sw-registration");t.swRegistration=e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SO(t,e){e?t.vapidKey=e:t.vapidKey||(t.vapidKey=oA)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hA(t,e){if(!navigator)throw ni.create("only-available-in-window");if(Notification.permission==="default"&&await Notification.requestPermission(),Notification.permission!=="granted")throw ni.create("permission-blocked");return await SO(t,e==null?void 0:e.vapidKey),await bO(t,e==null?void 0:e.serviceWorkerRegistration),hO(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NO(t,e,n){const r=AO(e);(await t.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:n[aA],message_name:n[Q9],message_time:n[J9],message_device_time:Math.floor(Date.now()/1e3)})}function AO(t){switch(t){case Ld.NOTIFICATION_CLICKED:return"notification_open";case Ld.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EO(t,e){const n=e.data;if(!n.isFirebaseMessaging)return;t.onMessageHandler&&n.messageType===Ld.PUSH_RECEIVED&&(typeof t.onMessageHandler=="function"?t.onMessageHandler(xx(n)):t.onMessageHandler.next(xx(n)));const r=n.data;yO(r)&&r[X9]==="1"&&await NO(t,n.messageType,r)}const bx="@firebase/messaging",Sx="0.12.12";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IO=t=>{const e=new _O(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),t.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",n=>EO(e,n)),e},TO=t=>{const e=t.getProvider("messaging").getImmediate();return{getToken:r=>hA(e,r)}};function kO(){Vs(new _s("messaging",IO,"PUBLIC")),Vs(new _s("messaging-internal",TO,"PRIVATE")),Ti(bx,Sx),Ti(bx,Sx,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PO(){try{await I6()}catch{return!1}return typeof window<"u"&&E6()&&sP()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CO(t,e){if(!navigator)throw ni.create("only-available-in-window");return t.onMessageHandler=e,()=>{t.onMessageHandler=null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LO(t=Ym()){return PO().then(e=>{if(!e)throw ni.create("unsupported-browser")},e=>{throw ni.create("indexed-db-unsupported")}),xu(xn(t),"messaging").getImmediate()}async function dA(t,e){return t=xn(t),hA(t,e)}function RO(t,e){return t=xn(t),CO(t,e)}kO();const jO={apiKey:"AIzaSyCKPrE1B2ikGlnr6PmTq4JVLlBDlOe50Co",authDomain:"tmv1-7fc4f.firebaseapp.com",projectId:"tmv1-7fc4f",storageBucket:"tmv1-7fc4f.firebasestorage.app",messagingSenderId:"377085834114",appId:"1:377085834114:web:aeb2ca19e51abe8fc5959b",measurementId:"G-8J8CDN3QFF"},wg=P6(jO),Ms=CR(wg),Qe=vD(wg);i9(wg);const N2=LO(wg),Ps=({children:t})=>{const[e,n]=ue.useState("checking");return ue.useEffect(()=>{const r=Wd(Ms,async i=>{if(!i){n("denied");return}try{const s=await du(cn(Qe,"users",i.uid));(s.exists()?s.data():{}).userType==="admin"?n("allowed"):n("denied")}catch{n("denied")}});return()=>r()},[]),e==="checking"?null:e==="denied"?p.jsx(C8,{to:"/home",replace:!0}):t};var fA={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Nx=tl.createContext&&tl.createContext(fA),DO=["attr","size","title"];function OO(t,e){if(t==null)return{};var n=FO(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function FO(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function xm(){return xm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},xm.apply(this,arguments)}function Ax(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function bm(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Ax(Object(n),!0).forEach(function(r){MO(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ax(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function MO(t,e,n){return e=UO(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function UO(t){var e=VO(t,"string");return typeof e=="symbol"?e:e+""}function VO(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function pA(t){return t&&t.map((e,n)=>tl.createElement(e.tag,bm({key:n},e.attr),pA(e.child)))}function gn(t){return e=>tl.createElement(BO,xm({attr:bm({},t.attr)},e),pA(t.child))}function BO(t){var e=n=>{var{attr:r,size:i,title:s}=t,o=OO(t,DO),a=i||n.size||"1em",l;return n.className&&(l=n.className),t.className&&(l=(l?l+" ":"")+t.className),tl.createElement("svg",xm({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,o,{className:l,style:bm(bm({color:t.color||n.color},n.style),t.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),s&&tl.createElement("title",null,s),t.children)};return Nx!==void 0?tl.createElement(Nx.Consumer,null,n=>e(n)):e(fA)}function zO(t){return gn({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M12.83 352h262.34A12.82 12.82 0 0 0 288 339.17v-38.34A12.82 12.82 0 0 0 275.17 288H12.83A12.82 12.82 0 0 0 0 300.83v38.34A12.82 12.82 0 0 0 12.83 352zm0-256h262.34A12.82 12.82 0 0 0 288 83.17V44.83A12.82 12.82 0 0 0 275.17 32H12.83A12.82 12.82 0 0 0 0 44.83v38.34A12.82 12.82 0 0 0 12.83 96zM432 160H16a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zm0 256H16a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16z"},child:[]}]})(t)}function qO(t){return gn({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"},child:[]}]})(t)}function mA(t){return gn({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 512c35.32 0 63.97-28.65 63.97-64H160.03c0 35.35 28.65 64 63.97 64zm215.39-149.71c-19.32-20.76-55.47-51.99-55.47-154.29 0-77.7-54.48-139.9-127.94-155.16V32c0-17.67-14.32-32-31.98-32s-31.98 14.33-31.98 32v20.84C118.56 68.1 64.08 130.3 64.08 208c0 102.3-36.15 133.53-55.47 154.29-6 6.45-8.66 14.16-8.61 21.71.11 16.4 12.98 32 32.1 32h383.8c19.12 0 32-15.6 32.1-32 .05-7.55-2.61-15.27-8.61-21.71z"},child:[]}]})(t)}function of(t){return gn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M509.5 184.6L458.9 32.8C452.4 13.2 434.1 0 413.4 0H272v192h238.7c-.4-2.5-.4-5-1.2-7.4zM240 0H98.6c-20.7 0-39 13.2-45.5 32.8L2.5 184.6c-.8 2.4-.8 4.9-1.2 7.4H240V0zM0 224v240c0 26.5 21.5 48 48 48h416c26.5 0 48-21.5 48-48V224H0z"},child:[]}]})(t)}function Ki(t){return gn({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M0 464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V192H0v272zm320-196c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zM192 268c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zM64 268c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40zM400 64h-48V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48H160V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48H48C21.5 64 0 85.5 0 112v48h448v-48c0-26.5-21.5-48-48-48z"},child:[]}]})(t)}function A2(t){return gn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z"},child:[]}]})(t)}function na(t){return gn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"},child:[]}]})(t)}function HO(t){return gn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8z"},child:[]}]})(t)}function WO(t){return gn({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M402.6 83.2l90.2 90.2c3.8 3.8 3.8 10 0 13.8L274.4 405.6l-92.8 10.3c-12.4 1.4-22.9-9.1-21.5-21.5l10.3-92.8L388.8 83.2c3.8-3.8 10-3.8 13.8 0zm162-22.9l-48.8-48.8c-15.2-15.2-39.9-15.2-55.2 0l-35.4 35.4c-3.8 3.8-3.8 10 0 13.8l90.2 90.2c3.8 3.8 10 3.8 13.8 0l35.4-35.4c15.2-15.3 15.2-40 0-55.2zM384 346.2V448H64V128h229.8c3.2 0 6.2-1.3 8.5-3.5l40-40c7.6-7.6 2.2-20.5-8.5-20.5H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V306.2c0-10.7-12.9-16-20.5-8.5l-40 40c-2.2 2.3-3.5 5.3-3.5 8.5z"},child:[]}]})(t)}function $O(t){return gn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M502.3 190.8c3.9-3.1 9.7-.2 9.7 4.7V400c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V195.6c0-5 5.7-7.8 9.7-4.7 22.4 17.4 52.1 39.5 154.1 113.6 21.1 15.4 56.7 47.8 92.2 47.6 35.7.3 72-32.8 92.3-47.6 102-74.1 131.6-96.3 154-113.7zM256 320c23.2.4 56.6-29.2 73.4-41.4 132.7-96.3 142.8-104.7 173.4-128.7 5.8-4.5 9.2-11.5 9.2-18.9v-19c0-26.5-21.5-48-48-48H48C21.5 64 0 85.5 0 112v19c0 7.4 3.4 14.3 9.2 18.9 30.6 23.9 40.7 32.4 173.4 128.7 16.8 12.2 50.2 41.8 73.4 41.4z"},child:[]}]})(t)}function GO(t){return gn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zm-248 50c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"},child:[]}]})(t)}function KO(t){return gn({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"},child:[]}]})(t)}function YO(t){return gn({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M224 136V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zm64 236c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12v8zm0-64c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12v8zm0-72v8c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12zm96-114.1v6.1H256V0h6.1c6.4 0 12.5 2.5 17 7l97.9 98c4.5 4.5 7 10.6 7 16.9z"},child:[]}]})(t)}function QO(t){return gn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 255.531c.253 136.64-111.18 248.372-247.82 248.468-59.015.042-113.223-20.53-155.822-54.911-11.077-8.94-11.905-25.541-1.839-35.607l11.267-11.267c8.609-8.609 22.353-9.551 31.891-1.984C173.062 425.135 212.781 440 256 440c101.705 0 184-82.311 184-184 0-101.705-82.311-184-184-184-48.814 0-93.149 18.969-126.068 49.932l50.754 50.754c10.08 10.08 2.941 27.314-11.313 27.314H24c-8.837 0-16-7.163-16-16V38.627c0-14.254 17.234-21.393 27.314-11.314l49.372 49.372C129.209 34.136 189.552 8 256 8c136.81 0 247.747 110.78 248 247.531zm-180.912 78.784l9.823-12.63c8.138-10.463 6.253-25.542-4.21-33.679L288 256.349V152c0-13.255-10.745-24-24-24h-16c-13.255 0-24 10.745-24 24v135.651l65.409 50.874c10.463 8.137 25.541 6.253 33.679-4.21z"},child:[]}]})(t)}function JO(t){return gn({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M280.37 148.26L96 300.11V464a16 16 0 0 0 16 16l112.06-.29a16 16 0 0 0 15.92-16V368a16 16 0 0 1 16-16h64a16 16 0 0 1 16 16v95.64a16 16 0 0 0 16 16.05L464 480a16 16 0 0 0 16-16V300L295.67 148.26a12.19 12.19 0 0 0-15.3 0zM571.6 251.47L488 182.56V44.05a12 12 0 0 0-12-12h-56a12 12 0 0 0-12 12v72.61L318.47 43a48 48 0 0 0-61 0L4.34 251.47a12 12 0 0 0-1.6 16.9l25.5 31A12 12 0 0 0 45.15 301l235.22-193.74a12.19 12.19 0 0 1 15.3 0L530.9 301a12 12 0 0 0 16.9-1.6l25.5-31a12 12 0 0 0-1.7-16.93z"},child:[]}]})(t)}function E2(t){return gn({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M360 0H24C10.745 0 0 10.745 0 24v16c0 13.255 10.745 24 24 24 0 90.965 51.016 167.734 120.842 192C75.016 280.266 24 357.035 24 448c-13.255 0-24 10.745-24 24v16c0 13.255 10.745 24 24 24h336c13.255 0 24-10.745 24-24v-16c0-13.255-10.745-24-24-24 0-90.965-51.016-167.734-120.842-192C308.984 231.734 360 154.965 360 64c13.255 0 24-10.745 24-24V24c0-13.255-10.745-24-24-24zm-75.078 384H99.08c17.059-46.797 52.096-80 92.92-80 40.821 0 75.862 33.196 92.922 80zm.019-256H99.078C91.988 108.548 88 86.748 88 64h208c0 22.805-3.987 44.587-11.059 64z"},child:[]}]})(t)}function XO(t){return gn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M80 368H16a16 16 0 0 0-16 16v64a16 16 0 0 0 16 16h64a16 16 0 0 0 16-16v-64a16 16 0 0 0-16-16zm0-320H16A16 16 0 0 0 0 64v64a16 16 0 0 0 16 16h64a16 16 0 0 0 16-16V64a16 16 0 0 0-16-16zm0 160H16a16 16 0 0 0-16 16v64a16 16 0 0 0 16 16h64a16 16 0 0 0 16-16v-64a16 16 0 0 0-16-16zm416 176H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zm0-320H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16V80a16 16 0 0 0-16-16zm0 160H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16z"},child:[]}]})(t)}function ZO(t){return gn({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"},child:[]}]})(t)}function Uc(t){return gn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"},child:[]}]})(t)}function ga(t){return gn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M304 48c0 26.51-21.49 48-48 48s-48-21.49-48-48 21.49-48 48-48 48 21.49 48 48zm-48 368c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zm208-208c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zM96 256c0-26.51-21.49-48-48-48S0 229.49 0 256s21.49 48 48 48 48-21.49 48-48zm12.922 99.078c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.491-48-48-48zm294.156 0c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.49-48-48-48zM108.922 60.922c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.491-48-48-48z"},child:[]}]})(t)}function gA(t){return gn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M139.61 35.5a12 12 0 0 0-17 0L58.93 98.81l-22.7-22.12a12 12 0 0 0-17 0L3.53 92.41a12 12 0 0 0 0 17l47.59 47.4a12.78 12.78 0 0 0 17.61 0l15.59-15.62L156.52 69a12.09 12.09 0 0 0 .09-17zm0 159.19a12 12 0 0 0-17 0l-63.68 63.72-22.7-22.1a12 12 0 0 0-17 0L3.53 252a12 12 0 0 0 0 17L51 316.5a12.77 12.77 0 0 0 17.6 0l15.7-15.69 72.2-72.22a12 12 0 0 0 .09-16.9zM64 368c-26.49 0-48.59 21.5-48.59 48S37.53 464 64 464a48 48 0 0 0 0-96zm432 16H208a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h288a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zm0-320H208a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h288a16 16 0 0 0 16-16V80a16 16 0 0 0-16-16zm0 160H208a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h288a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16z"},child:[]}]})(t)}function yl(t){return gn({attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"},child:[]}]})(t)}function vA(t){return gn({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z"},child:[]}]})(t)}function Ex(t){return gn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M212.333 224.333H12c-6.627 0-12-5.373-12-12V12C0 5.373 5.373 0 12 0h48c6.627 0 12 5.373 12 12v78.112C117.773 39.279 184.26 7.47 258.175 8.007c136.906.994 246.448 111.623 246.157 248.532C504.041 393.258 393.12 504 256.333 504c-64.089 0-122.496-24.313-166.51-64.215-5.099-4.622-5.334-12.554-.467-17.42l33.967-33.967c4.474-4.474 11.662-4.717 16.401-.525C170.76 415.336 211.58 432 256.333 432c97.268 0 176-78.716 176-176 0-97.267-78.716-176-176-176-58.496 0-110.28 28.476-142.274 72.333h98.274c6.627 0 12 5.373 12 12v48c0 6.627-5.373 12-12 12z"},child:[]}]})(t)}function yA(t){return gn({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M624 208h-64v-64c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v64h-64c-8.8 0-16 7.2-16 16v32c0 8.8 7.2 16 16 16h64v64c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16v-64h64c8.8 0 16-7.2 16-16v-32c0-8.8-7.2-16-16-16zm-400 48c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"},child:[]}]})(t)}function wA(t){return gn({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"},child:[]}]})(t)}function _A(t){return gn({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M96 224c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm448 0c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm32 32h-64c-17.6 0-33.5 7.1-45.1 18.6 40.3 22.1 68.9 62 75.1 109.4h66c17.7 0 32-14.3 32-32v-32c0-35.3-28.7-64-64-64zm-256 0c61.9 0 112-50.1 112-112S381.9 32 320 32 208 82.1 208 144s50.1 112 112 112zm76.8 32h-8.3c-20.8 10-43.9 16-68.5 16s-47.6-6-68.5-16h-8.3C179.6 288 128 339.6 128 403.2V432c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48v-28.8c0-63.6-51.6-115.2-115.2-115.2zm-223.7-13.4C161.5 263.1 145.6 256 128 256H64c-35.3 0-64 28.7-64 64v32c0 17.7 14.3 32 32 32h65.9c6.3-47.4 34.9-87.3 75.2-109.4z"},child:[]}]})(t)}const hr=({userType:t})=>{const e=Hc(),[n,r]=ue.useState(!1),i=a=>e.pathname===a,o=[{path:t==="admin"?"/admin-home":"/home",label:"Home",icon:p.jsx(JO,{})},{path:"/profile",label:"Profile",icon:p.jsx(wA,{})}];return t==="user"&&o.push({path:"/task-history",label:"Task History",icon:p.jsx(QO,{})},{path:"/user-reject-details",label:"My Rejections",icon:p.jsx(yl,{})}),t==="admin"&&o.push({path:"/manage-users",label:"Manage Users",icon:p.jsx(yA,{})},{path:"/assign-work",label:"Assign Work",icon:p.jsx(gA,{})},{path:"/work-list",label:"Work List",icon:p.jsx(XO,{})},{path:"/inventory",label:"Inventory",icon:p.jsx(of,{})},{path:"/notifications",label:"Notifications",icon:p.jsx(mA,{})}),p.jsx("header",{className:"bg-blue-600 text-white shadow-lg",children:p.jsxs("nav",{className:"container mx-auto px-4 py-4",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("h1",{className:"text-lg sm:text-xl md:text-2xl font-bold",children:"Videography Manager"}),p.jsx("button",{onClick:()=>r(!n),className:"lg:hidden text-2xl focus:outline-none","aria-label":"Toggle menu",children:n?p.jsx(yl,{}):p.jsx(qO,{})}),p.jsx("ul",{className:"hidden lg:flex space-x-6",children:o.map(a=>p.jsx("li",{children:p.jsxs($w,{to:a.path,className:`flex items-center gap-2 hover:text-blue-200 transition ${i(a.path)?"font-bold border-b-2 border-white pb-1":""}`,children:[a.icon,p.jsx("span",{children:a.label})]})},a.path))})]}),n&&p.jsx("ul",{className:"lg:hidden mt-4 space-y-2 pb-2",children:o.map(a=>p.jsx("li",{children:p.jsxs($w,{to:a.path,onClick:()=>r(!1),className:`flex items-center gap-3 p-3 rounded hover:bg-blue-700 transition ${i(a.path)?"bg-blue-700 font-bold":""}`,children:[p.jsx("span",{className:"text-xl",children:a.icon}),p.jsx("span",{children:a.label})]})},a.path))})]})})},eF=()=>{const t=pa(),[e,n]=ue.useState(null);ue.useEffect(()=>{(async()=>{try{const o=await Un($t(Qe,"notifications"));console.log("Notifications count:",o.size),o.forEach(a=>console.log("Notif doc:",a.id,a.data()))}catch(o){console.error("Test read of notifications failed:",o)}})()},[]),ue.useEffect(()=>{console.log("Admin notification listener mounted");const s=rf($t(Qe,"notifications"),gg("read","==",!1),LN("createdAt","desc")),o=FN(s,a=>{console.log("Notification snapshot size:",a.size),a.docChanges().forEach(l=>{if(console.log("Notif change:",l.type,l.doc.id),l.type==="added"){const u=l.doc.data();n({id:l.doc.id,...u})}})},a=>{console.error("Notification listener error:",a)});return()=>{console.log("Admin notification listener unsubscribed"),o()}},[]);const r=async()=>{if(!e)return;try{await ki(cn(Qe,"notifications",e.id),{read:!0})}catch(o){console.error("Failed to mark notification read",o)}const s=e.workId;n(null),t(`/tasks/${s}`)},i=()=>{if(!e)return"";const s=e.userName||"A user";return e.type==="accept"?`${s} accepted a work.`:e.type==="reject"?`${s} rejected a work.`:e.type==="done"?`${s} marked their work as done.`:e.type==="undo-done"?`${s} undid a done task.`:"New activity on a work."};return p.jsxs("div",{className:"min-h-screen bg-gray-100",children:[p.jsx(hr,{userType:"admin"}),e&&p.jsxs("button",{onClick:r,className:"fixed bottom-4 right-4 z-50 max-w-xs text-left bg-white shadow-xl rounded-xl border border-gray-200 px-4 py-3 text-sm hover:bg-gray-50",children:[p.jsx("p",{className:"font-semibold text-gray-800 mb-1",children:i()}),p.jsx("p",{className:"text-gray-500 text-xs",children:"Click to view details"})]}),p.jsx("main",{className:"container mx-auto px-4 py-6 sm:py-8",children:p.jsxs("div",{className:"max-w-4xl mx-auto",children:[p.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-gray-800 mb-6 sm:mb-8",children:"Admin Dashboard"}),p.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-6",children:[p.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 hover:shadow-xl transition",children:[p.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[p.jsx(gA,{className:"text-3xl sm:text-4xl text-blue-600"}),p.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-blue-600",children:"Work List"})]}),p.jsx("p",{className:"text-gray-600 mb-4 text-sm sm:text-base",children:"View all works, see user acceptance and progress, and manage task status."}),p.jsx("button",{onClick:()=>t("/work-list"),className:"w-full bg-blue-600 text-white py-2 sm:py-3 px-4 rounded hover:bg-blue-700 transition font-medium",children:"Go to Work List"})]}),p.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 hover:shadow-xl transition",children:[p.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[p.jsx(yA,{className:"text-3xl sm:text-4xl text-green-600"}),p.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-green-600",children:"Work Assignment"})]}),p.jsx("p",{className:"text-gray-600 mb-4 text-sm sm:text-base",children:"Create new work projects and assign team members to tasks."}),p.jsx("button",{onClick:()=>t("/assign-work"),className:"w-full bg-green-600 text-white py-2 sm:py-3 px-4 rounded hover:bg-green-700 transition font-medium",children:"Go to Assign Work"})]}),p.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 hover:shadow-xl transition",children:[p.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[p.jsx(Ki,{className:"text-3xl sm:text-4xl text-purple-600"}),p.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-purple-600",children:"Schedule Posting"})]}),p.jsx("p",{className:"text-gray-600 mb-4 text-sm sm:text-base",children:"Set posting dates, mark videos as posted, and view the posting queue."}),p.jsx("button",{onClick:()=>t("/posting-dates"),className:"w-full bg-purple-600 text-white py-2 sm:py-3 px-4 rounded hover:bg-purple-700 transition font-medium",children:"Go to Schedule Posting"})]})]})]})})]})},tF=()=>{const[t,e]=ue.useState(null),[n,r]=ue.useState([]),[i,s]=ue.useState({}),[o,a]=ue.useState({}),[l,u]=ue.useState(!0),[c,g]=ue.useState(!1),[v,m]=ue.useState(""),[S,A]=ue.useState(!1),[L,b]=ue.useState(""),[k,j]=ue.useState(null),[U,q]=ue.useState(!0),ee="user";ue.useEffect(()=>{const B=Wd(Ms,Z=>{e(Z||null),u(!1)});return()=>B()},[]),ue.useEffect(()=>{if(!t)return;(async()=>{g(!0);try{const ie=(await Un($t(Qe,"works"))).docs.map(xe=>({id:xe.id,...xe.data()})).filter(xe=>Array.isArray(xe.assignedUsers)&&xe.assignedUsers.includes(t.uid));ie.sort((xe,ke)=>{const Fe=xe.date?new Date(xe.date).getTime():0;return(ke.date?new Date(ke.date).getTime():0)-Fe}),r(ie);const ve=await Un($t(Qe,"inventory")),_e={};ve.docs.forEach(xe=>{_e[xe.id]=xe.data()}),s(_e)}catch(Z){console.error("Error loading user tasks:",Z)}finally{g(!1)}})()},[t]),ue.useEffect(()=>{(async()=>{try{const Z=await Un($t(Qe,"users")),ne={};Z.docs.forEach(ie=>{ne[ie.id]=ie.data()}),a(ne)}catch(Z){console.error("Error loading users:",Z)}})()},[]);const D=B=>{m(B),setTimeout(()=>m(""),4e3)};ue.useEffect(()=>{if(!t)return;const B=rf($t(Qe,"works"),gg("assignedUsers","array-contains",t.uid)),Z=FN(B,ne=>{ne.docChanges().forEach(ie=>{if(ie.type==="added"){const ve=ie.doc.data();r(_e=>_e.some(Fe=>Fe.id===ie.doc.id)?_e:[{id:ie.doc.id,...ve},..._e].sort((Fe,De)=>{const $e=Fe.date?new Date(Fe.date).getTime():0;return(De.date?new Date(De.date).getTime():0)-$e}))}else if(ie.type==="modified"){const ve=ie.doc.data();r(_e=>_e.map(xe=>xe.id===ie.doc.id?{...xe,...ve}:xe).sort((xe,ke)=>{const Fe=xe.date?new Date(xe.date).getTime():0;return(ke.date?new Date(ke.date).getTime():0)-Fe}))}else ie.type==="removed"&&r(ve=>ve.filter(_e=>_e.id!==ie.doc.id))})});return()=>Z()},[t]);const N=B=>B.status||"incomplete",I=B=>(B.userAcceptance||{})[t.uid]||"pending",R=async B=>{try{const Z=B.userAcceptance||{};Z[t.uid]="accepted";const ne=cn(Qe,"works",B.id);await ki(ne,{userAcceptance:Z}),r(ie=>ie.map(ve=>ve.id===B.id?{...ve,userAcceptance:Z}:ve)),D("Work accepted successfully!"),await Qo($t(Qe,"notifications"),{type:"accept",workId:B.id,userId:t.uid,userName:t.displayName||"",createdAt:Kf(),read:!1})}catch(Z){console.error("Failed to accept:",Z)}},x=B=>{j(B),b(""),A(!0)},T=async()=>{if(!L.trim()){D("Please provide a reason for rejection.");return}try{const B=k.userAcceptance||{};B[t.uid]="rejected";const Z=k.rejections||{};Z[t.uid]={reason:L.trim(),timestamp:new Date().toISOString(),approved:!1};const ne=cn(Qe,"works",k.id);await ki(ne,{userAcceptance:B,rejections:Z}),r(ie=>ie.map(ve=>ve.id===k.id?{...ve,userAcceptance:B,rejections:Z}:ve)),D("Work rejected."),A(!1),j(null),await Qo($t(Qe,"notifications"),{type:"reject",workId:k.id,userId:t.uid,userName:t.displayName||"",createdAt:Kf(),read:!1})}catch(B){console.error("Failed to reject:",B)}},P=B=>{if(!t)return[];const ne=(B.assignedUserDetails||[]).find(ie=>ie.userId===t.uid);return(ne==null?void 0:ne.roles)||[]},te=(B,Z)=>{const ne=`${t.uid}_${Z}`;return(B.roleCompletion||{})[ne]==="done"},de=B=>{const Z=P(B);return Z.length?Z.every(ne=>te(B,ne)):!1},me=async(B,Z)=>{if(N(B)==="complete")return;const ne=`${t.uid}_${Z}`,ie=B.roleCompletion||{},ve=ie[ne]==="done",_e={...ie};ve?delete _e[ne]:_e[ne]="done";const xe=P(B),ke=xe.length>0&&xe.every(De=>_e[`${t.uid}_${De}`]==="done"),Fe=xe.length>0&&xe.every(De=>(B.roleCompletion||{})[`${t.uid}_${De}`]==="done");try{ke&&!Fe?await Qo($t(Qe,"notifications"),{type:"done",workId:B.id,userId:t.uid,userName:t.displayName||"",createdAt:Kf(),read:!1}):!ke&&Fe&&await Qo($t(Qe,"notifications"),{type:"undo-done",workId:B.id,userId:t.uid,userName:t.displayName||"",createdAt:Kf(),read:!1});const De=cn(Qe,"works",B.id);await ki(De,{roleCompletion:_e}),r($e=>$e.map(K=>K.id===B.id?{...K,roleCompletion:_e}:K))}catch(De){console.error("Failed to update role status:",De)}},ge=B=>{const Z=B.assignedItems||[];return Z.length?p.jsxs("div",{className:"mt-3",children:[p.jsx("p",{className:"text-xs sm:text-sm font-semibold text-gray-700 mb-1",children:"Assigned items:"}),p.jsx("div",{className:"flex flex-wrap gap-2",children:Z.map(ne=>{const ie=i[ne];return ie?p.jsxs("span",{className:"px-2 py-1 rounded-full bg-blue-50 text-xs sm:text-sm text-blue-800 border border-blue-100",children:[ie.itemName||"Item",ie.itemNo?` (${ie.itemNo})`:""]},ne):p.jsx("span",{className:"px-2 py-1 rounded-full bg-gray-100 text-xs text-gray-500",children:"Unknown item"},ne)})})]}):null},Q=B=>{const ne=(B.assignedUsers||[]).filter(ie=>ie!==t.uid);return ne.length===0?p.jsx("div",{className:"mt-3",children:p.jsx("p",{className:"text-xs text-gray-500 italic",children:"You are working on this alone"})}):p.jsxs("div",{className:"mt-3",children:[p.jsx("p",{className:"text-xs sm:text-sm font-semibold text-gray-700 mb-2",children:"Working with:"}),p.jsx("div",{className:"flex flex-wrap gap-2",children:ne.map(ie=>{const ve=o[ie];if(!ve)return p.jsxs("span",{className:"inline-flex items-center gap-2 px-3 py-1.5 rounded-full bg-gray-100 text-xs text-gray-500",children:[p.jsx("div",{className:"w-6 h-6 rounded-full bg-gray-300 flex items-center justify-center text-xs font-bold text-white",children:"?"}),"Unknown User"]},ie);const xe=(B.assignedUserDetails||[]).find(ke=>ke.userId===ie);return xe!=null&&xe.roles,p.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1.5 rounded-full bg-gradient-to-r from-blue-50 to-purple-50 border border-blue-100",children:[p.jsx("div",{className:"w-6 h-6 rounded-full bg-gradient-to-r from-blue-500 to-purple-600 flex items-center justify-center text-xs font-bold text-white",children:(ve.name||"U").charAt(0).toUpperCase()}),p.jsx("div",{className:"flex flex-col",children:p.jsx("span",{className:"text-xs sm:text-sm font-semibold text-gray-800",children:ve.name||"User"})})]},ie)})})]})},oe=n.filter(B=>N(B)!=="complete"),ae=oe.filter(B=>I(B)==="pending"),he=oe.filter(B=>I(B)==="rejected"),F=oe.filter(B=>I(B)==="accepted"&&!de(B)),G=oe.filter(B=>I(B)==="accepted"&&de(B));return p.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50",children:[p.jsx(hr,{userType:ee}),v&&p.jsx("div",{className:"fixed top-20 right-4 z-50 bg-gradient-to-r from-blue-600 to-purple-600 text-white text-sm px-5 py-3 rounded-lg shadow-2xl animate-slide-in",children:v}),S&&p.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:p.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full p-6",children:[p.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-4",children:"Reject Work"}),p.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Please provide a reason for rejecting this work:"}),p.jsx("textarea",{value:L,onChange:B=>b(B.target.value),rows:"4",className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-red-500 text-sm",placeholder:"Enter your reason..."}),p.jsxs("div",{className:"flex gap-3 mt-4",children:[p.jsx("button",{onClick:T,className:"flex-1 bg-gradient-to-r from-red-500 to-rose-600 text-white py-2.5 px-4 rounded-xl font-semibold hover:from-red-600 hover:to-rose-700 transition-all",children:"Submit Rejection"}),p.jsx("button",{onClick:()=>{A(!1),j(null)},className:"flex-1 bg-gray-200 text-gray-800 py-2.5 px-4 rounded-xl font-semibold hover:bg-gray-300 transition-all",children:"Cancel"})]})]})}),p.jsxs("main",{className:"container mx-auto px-4 py-8 max-w-5xl",children:[p.jsxs("div",{className:"mb-8",children:[p.jsx("h1",{className:"text-3xl sm:text-4xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-purple-600 mb-2",children:"Welcome Back"}),p.jsx("p",{className:"text-gray-600 text-sm sm:text-base",children:"Manage your tasks efficiently. Accept new assignments and track your progress."})]}),l||c?p.jsxs("div",{className:"flex flex-col items-center justify-center py-20",children:[p.jsx(ga,{className:"animate-spin text-5xl text-blue-600 mb-4"}),p.jsx("p",{className:"text-gray-600",children:"Loading your tasks..."})]}):oe.length===0?p.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-12 text-center border border-gray-100",children:[p.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-blue-100 to-purple-100 rounded-full flex items-center justify-center mx-auto mb-4",children:p.jsx(A2,{className:"text-4xl text-blue-600"})}),p.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:"All Clear!"}),p.jsx("p",{className:"text-gray-600",children:"You have no active tasks at the moment."})]}):p.jsxs(p.Fragment,{children:[ae.length>0&&p.jsxs("section",{className:"mb-8",children:[p.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[p.jsx("div",{className:"w-1 h-6 bg-gradient-to-b from-yellow-400 to-orange-500 rounded-full"}),p.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-gray-800",children:"Pending Acceptance"}),p.jsx("span",{className:"bg-gradient-to-r from-yellow-400 to-orange-500 text-white text-xs font-bold px-3 py-1 rounded-full",children:ae.length})]}),p.jsx("div",{className:"space-y-4",children:ae.map(B=>p.jsxs("div",{className:"bg-white rounded-2xl shadow-md hover:shadow-xl transition-all p-5 sm:p-6 border border-yellow-100",children:[p.jsxs("div",{className:"flex items-start justify-between mb-3",children:[p.jsxs("div",{className:"flex-1",children:[p.jsx("h3",{className:"text-lg sm:text-xl font-bold text-gray-800 mb-1",children:B.title||"Task"}),B.date&&p.jsxs("p",{className:"flex items-center gap-2 text-xs sm:text-sm text-gray-500",children:[p.jsx(Ki,{}),new Date(B.date).toLocaleDateString()]})]}),p.jsxs("span",{className:"bg-yellow-100 text-yellow-800 text-xs font-semibold px-3 py-1.5 rounded-full flex items-center gap-1",children:[p.jsx(E2,{}),"Pending"]})]}),B.description&&p.jsx("p",{className:"text-gray-700 text-sm mb-2",children:B.description}),ge(B),Q(B),p.jsxs("div",{className:"flex gap-3 mt-4",children:[p.jsxs("button",{onClick:()=>R(B),className:"flex-1 bg-gradient-to-r from-green-500 to-emerald-600 text-white py-2.5 px-4 rounded-xl font-semibold hover:from-green-600 hover:to-emerald-700 transition-all shadow-md flex items-center justify-center gap-2",children:[p.jsx(na,{}),"Accept"]}),p.jsxs("button",{onClick:()=>x(B),className:"flex-1 bg-gradient-to-r from-red-500 to-rose-600 text-white py-2.5 px-4 rounded-xl font-semibold hover:from-red-600 hover:to-rose-700 transition-all shadow-md flex items-center justify-center gap-2",children:[p.jsx(yl,{}),"Reject"]})]})]},B.id))})]}),he.length>0&&p.jsxs("section",{className:"mb-8",children:[p.jsxs("div",{className:"flex items-center justify-between mb-4",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:"w-1 h-6 bg-gradient-to-b from-orange-500 to-red-500 rounded-full"}),p.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-gray-800",children:"Pending Rejection Approval"}),p.jsx("span",{className:"bg-gradient-to-r from-orange-500 to-red-500 text-white text-xs font-bold px-3 py-1 rounded-full",children:he.length})]}),p.jsx("button",{onClick:()=>q(B=>!B),className:"text-sm font-semibold text-gray-600 hover:text-gray-800 transition px-3 py-1.5 rounded-lg hover:bg-gray-100",children:U?"Hide":"Show"})]}),U&&p.jsx("div",{className:"space-y-4",children:he.map(B=>{const Z=(B.rejections||{})[t.uid]||{};return p.jsxs("div",{className:"bg-white rounded-2xl shadow-md p-5 sm:p-6 border border-orange-100",children:[p.jsxs("div",{className:"flex items-start justify-between mb-3",children:[p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg sm:text-xl font-bold text-gray-800 mb-1",children:B.title||"Task"}),B.date&&p.jsxs("p",{className:"flex items-center gap-2 text-xs sm:text-sm text-gray-500",children:[p.jsx(Ki,{}),new Date(B.date).toLocaleDateString()]})]}),p.jsxs("span",{className:"bg-orange-100 text-orange-800 text-xs font-semibold px-3 py-1.5 rounded-full flex items-center gap-1",children:[p.jsx(E2,{}),"Pending Approval"]})]}),ge(B),Q(B),p.jsxs("div",{className:"bg-orange-50 rounded-xl p-4 mt-3",children:[p.jsx("p",{className:"text-xs font-semibold text-orange-800 mb-1",children:"Your Rejection Reason:"}),p.jsx("p",{className:"text-sm text-gray-700",children:Z.reason||"-"}),p.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Waiting for admin to approve your rejection request"})]})]},B.id)})})]}),F.length>0&&p.jsxs("section",{className:"mb-8",children:[p.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[p.jsx("div",{className:"w-1 h-6 bg-gradient-to-b from-blue-500 to-purple-600 rounded-full"}),p.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-gray-800",children:"Active Tasks"}),p.jsx("span",{className:"bg-gradient-to-r from-blue-500 to-purple-600 text-white text-xs font-bold px-3 py-1 rounded-full",children:F.length})]}),p.jsx("div",{className:"space-y-4",children:F.map(B=>{const Z=P(B);return p.jsxs("div",{className:"bg-white rounded-2xl shadow-md hover:shadow-xl transition-all p-5 sm:p-6 border border-blue-100",children:[p.jsx("h3",{className:"text-lg sm:text-xl font-bold text-gray-800 mb-1",children:B.title||"Task"}),B.date&&p.jsxs("p",{className:"flex items-center gap-2 text-xs sm:text-sm text-gray-500 mb-3",children:[p.jsx(Ki,{}),new Date(B.date).toLocaleDateString()]}),B.description&&p.jsx("p",{className:"text-gray-700 text-sm mb-2",children:B.description}),ge(B),Q(B),p.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 rounded-xl p-4 mt-3",children:[p.jsx("p",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Your Work Types:"}),p.jsx("div",{className:"flex flex-wrap gap-2",children:Z.map(ne=>{const ie=te(B,ne);return p.jsx("button",{type:"button",onClick:()=>me(B,ne),className:`inline-flex items-center gap-2 px-4 py-2 rounded-xl text-sm font-semibold transition-all shadow-sm ${ie?"bg-gradient-to-r from-green-500 to-emerald-600 text-white hover:from-green-600 hover:to-emerald-700":"bg-white text-gray-700 border-2 border-gray-200 hover:border-blue-400"}`,children:ie?p.jsxs(p.Fragment,{children:[p.jsx(Ex,{}),"Undo ",ne]}):p.jsxs(p.Fragment,{children:[p.jsx(na,{}),"Mark ",ne," as done"]})},ne)})})]})]},B.id)})})]}),G.length>0&&p.jsxs("section",{children:[p.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[p.jsx("div",{className:"w-1 h-6 bg-gradient-to-b from-green-500 to-emerald-600 rounded-full"}),p.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-gray-800",children:"Completed"}),p.jsx("span",{className:"bg-gradient-to-r from-green-500 to-emerald-600 text-white text-xs font-bold px-3 py-1 rounded-full",children:G.length})]}),p.jsx("div",{className:"space-y-4",children:G.map(B=>{const Z=P(B);return p.jsxs("div",{className:"bg-white rounded-2xl shadow-md p-5 sm:p-6 border border-green-100",children:[p.jsxs("div",{className:"flex items-start justify-between mb-3",children:[p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg sm:text-xl font-bold text-gray-800 mb-1",children:B.title||"Task"}),B.date&&p.jsxs("p",{className:"flex items-center gap-2 text-xs sm:text-sm text-gray-500",children:[p.jsx(Ki,{}),new Date(B.date).toLocaleDateString()]})]}),p.jsx(A2,{className:"text-3xl text-green-500"})]}),B.description&&p.jsx("p",{className:"text-gray-700 text-sm mb-2",children:B.description}),ge(B),Q(B),p.jsx("div",{className:"flex flex-wrap gap-2 mb-3 mt-3",children:Z.map(ne=>p.jsxs("button",{onClick:()=>me(B,ne),className:"inline-flex items-center gap-1 px-3 py-1.5 rounded-full text-xs font-semibold bg-green-100 text-green-800 hover:bg-green-200 transition",children:[p.jsx(Ex,{className:"text-xs"}),"Undo ",ne]},ne))}),p.jsx("p",{className:"text-sm text-green-700 font-semibold bg-green-50 px-4 py-2 rounded-lg",children:" All work completed. Waiting for admin review."})]},B.id)})})]})]})]})]})},nF="BCDW2bDpR51kOUCYdebGFw4pHEU_h2159MHvkSEslEdrV0yI0AVUiQikAbClmXfS9EGHHQblUlKTC_To4SaQ7Hg";async function rF(t){if(!t)return;if(!("Notification"in window)){console.log("Notifications not supported");return}if(await Notification.requestPermission()!=="granted"){console.log("Notification permission not granted");return}"serviceWorker"in navigator&&await navigator.serviceWorker.register("/firebase-messaging-sw.js");const n=await dA(N2,{vapidKey:nF});if(!n){console.log("No FCM token");return}await jy(cn(Qe,"users",t),{fcmTokens:kD(n)},{merge:!0}),RO(N2,r=>{var o,a;const i=(o=r.notification)==null?void 0:o.title,s=(a=r.notification)==null?void 0:a.body;i&&new Notification(i,{body:s,icon:"/icon-192.png"})})}const iF=()=>{const t=pa(),[e,n]=ue.useState({email:"",password:""}),[r,i]=ue.useState(!1),[s,o]=ue.useState(""),a=u=>{n(c=>({...c,[u.target.name]:u.target.value}))},l=async u=>{u.preventDefault(),o(""),i(!0);try{const g=(await mL(Ms,e.email,e.password)).user;await rF(g.uid);const v=cn(Qe,"users",g.uid),m=await du(v);let S="user";m.exists()&&(S=m.data().userType||"user"),t(S==="admin"?"/admin-home":"/home")}catch(c){o(c.message||"Failed to log in.")}finally{i(!1)}};return p.jsx("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center px-4",children:p.jsxs("div",{className:"w-full max-w-md bg-white rounded-lg shadow-md p-4 sm:p-6",children:[p.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-800 mb-4",children:"Log In"}),s&&p.jsx("div",{className:"mb-4 p-3 rounded bg-red-100 text-red-700 text-sm",children:s}),p.jsxs("form",{onSubmit:l,className:"space-y-3 sm:space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Email"}),p.jsx("input",{type:"email",name:"email",value:e.email,onChange:a,required:!0,className:"w-full px-3 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Password"}),p.jsx("input",{type:"password",name:"password",value:e.password,onChange:a,required:!0,className:"w-full px-3 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm"})]}),p.jsx("button",{type:"submit",disabled:r,className:"w-full bg-blue-600 text-white py-2 rounded font-semibold text-sm hover:bg-blue-700 disabled:opacity-50",children:r?"Logging in...":"Log In"}),p.jsxs("p",{className:"mt-3 text-center text-xs sm:text-sm text-gray-600",children:["Do not have an account?"," ",p.jsx("span",{onClick:()=>t("/signup"),className:"text-blue-600 font-semibold cursor-pointer hover:underline",children:"Sign up"})]})]})]})})},sF="mihirudahanayake@gmail.com",oF=["videography","photography"],aF=()=>{const t=pa(),[e,n]=ue.useState({name:"",email:"",phoneNo:"",departments:["videography"],firstPriority:"videography",batch:"20/21",studyDepartment:"ITT",gender:"male",registrationNumber:"",cardNumber:"",birthday:"",password:"",confirmPassword:""}),[r,i]=ue.useState(!1),[s,o]=ue.useState(""),a=g=>{n(v=>({...v,[g.target.name]:g.target.value}))},l=g=>{n(v=>{const S=v.departments.includes(g)?v.departments.filter(L=>L!==g):[...v.departments,g];let A=v.firstPriority;return S.includes(A)||(A=S[0]||""),{...v,departments:S,firstPriority:A}})},u=async g=>{if(g.preventDefault(),o(""),e.password!==e.confirmPassword){o("Password and confirm password do not match.");return}if(e.departments.length===0){o("Please select at least one work department.");return}i(!0);try{const m=(await rS(Ms,e.email,e.password)).user,S=m.email===sF?"admin":"user";await jy(cn(Qe,"users",m.uid),{name:e.name,email:e.email,phoneNo:e.phoneNo,departments:e.departments,firstPriority:e.firstPriority,batch:e.batch,studyDepartment:e.studyDepartment,gender:e.gender,registrationNumber:e.registrationNumber,cardNumber:e.cardNumber||null,birthday:e.birthday||null,userType:S,createdAt:new Date().toISOString()}),t(S==="admin"?"/admin-home":"/home")}catch(v){o(v.message||"Failed to sign up.")}finally{i(!1)}},c=g=>e.departments.includes(g);return p.jsx("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center px-4",children:p.jsxs("div",{className:"w-full max-w-md bg-white rounded-lg shadow-md p-4 sm:p-6",children:[p.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-800 mb-4",children:"Sign Up"}),s&&p.jsx("div",{className:"mb-4 p-3 rounded bg-red-100 text-red-700 text-sm",children:s}),p.jsxs("form",{onSubmit:u,className:"space-y-3 sm:space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Name"}),p.jsx("input",{type:"text",name:"name",value:e.name,onChange:a,required:!0,className:"w-full px-3 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Email"}),p.jsx("input",{type:"email",name:"email",value:e.email,onChange:a,required:!0,className:"w-full px-3 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Phone number"}),p.jsx("input",{type:"tel",name:"phoneNo",value:e.phoneNo,onChange:a,required:!0,className:"w-full px-3 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Batch"}),p.jsxs("select",{name:"batch",value:e.batch,onChange:a,className:"w-full px-3 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm",children:[p.jsx("option",{value:"20/21",children:"20/21"}),p.jsx("option",{value:"21/22",children:"21/22"}),p.jsx("option",{value:"22/23",children:"22/23"}),p.jsx("option",{value:"23/24",children:"23/24"})]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Department in study"}),p.jsxs("select",{name:"studyDepartment",value:e.studyDepartment,onChange:a,className:"w-full px-3 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm",children:[p.jsx("option",{value:"ITT",children:"ITT"}),p.jsx("option",{value:"EET",children:"EET"}),p.jsx("option",{value:"MTT",children:"MTT"}),p.jsx("option",{value:"BPT",children:"BPT"}),p.jsx("option",{value:"Food",children:"Food"})]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Gender"}),p.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[p.jsxs("label",{className:"flex items-center gap-2",children:[p.jsx("input",{type:"radio",name:"gender",value:"male",checked:e.gender==="male",onChange:a}),p.jsx("span",{children:"Male"})]}),p.jsxs("label",{className:"flex items-center gap-2",children:[p.jsx("input",{type:"radio",name:"gender",value:"female",checked:e.gender==="female",onChange:a}),p.jsx("span",{children:"Female"})]})]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Registration number"}),p.jsx("input",{type:"text",name:"registrationNumber",value:e.registrationNumber,onChange:a,required:!0,className:"w-full px-3 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Card (if have)"}),p.jsx("input",{type:"text",name:"cardNumber",value:e.cardNumber,onChange:a,placeholder:"Optional",className:"w-full px-3 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Birthday"}),p.jsx("input",{type:"date",name:"birthday",value:e.birthday,onChange:a,className:"w-full px-3 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Departments (work)"}),p.jsx("div",{className:"bg-gray-50 border rounded p-2 flex flex-col gap-1",children:oF.map(g=>p.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[p.jsx("input",{type:"checkbox",checked:c(g),onChange:()=>l(g)}),p.jsx("span",{className:"capitalize",children:g})]},g))}),p.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"You can select one or more departments."})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"First priority department (work)"}),p.jsx("select",{name:"firstPriority",value:e.firstPriority,onChange:a,className:"w-full px-3 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm",children:e.departments.map(g=>p.jsx("option",{value:g,children:g},g))})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Password"}),p.jsx("input",{type:"password",name:"password",value:e.password,onChange:a,required:!0,minLength:6,className:"w-full px-3 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Confirm password"}),p.jsx("input",{type:"password",name:"confirmPassword",value:e.confirmPassword,onChange:a,required:!0,minLength:6,className:"w-full px-3 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm"})]}),p.jsx("button",{type:"submit",disabled:r,className:"w-full bg-blue-600 text-white py-2 rounded font-semibold text-sm hover:bg-blue-700 disabled:opacity-50",children:r?"Creating account...":"Sign Up"}),p.jsxs("p",{className:"mt-3 text-center text-xs sm:text-sm text-gray-600",children:["Already have an account?"," ",p.jsx("span",{onClick:()=>t("/"),className:"text-blue-600 font-semibold cursor-pointer hover:underline",children:"Log in"})]})]})]})})},lF=()=>{const[t,e]=ue.useState({name:"",email:"",password:"",phone:"",specialty:""}),[n,r]=ue.useState(!1),[i,s]=ue.useState({type:"",text:""}),o=l=>{e(u=>({...u,[l.target.name]:l.target.value}))},a=async l=>{l.preventDefault(),r(!0),s({type:"",text:""});try{const u=await rS(Ms,t.email,t.password),c=t.email==="mihirudahanayake@gmail.com"?"admin":"user";await jy(cn(Qe,"users",u.user.uid),{name:t.name,email:t.email,phone:t.phone,specialty:t.specialty,role:c,createdAt:new Date().toISOString()}),s({type:"success",text:"User created successfully."}),e({name:"",email:"",password:"",phone:"",specialty:""})}catch(u){s({type:"error",text:u.message})}finally{r(!1)}};return p.jsxs("div",{className:"min-h-screen bg-gray-100",children:[p.jsx(hr,{userType:"admin"}),p.jsx("main",{className:"container mx-auto px-4 py-6 sm:py-8",children:p.jsxs("div",{className:"max-w-2xl mx-auto bg-white rounded-lg shadow-md p-4 sm:p-8",children:[p.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-gray-800 mb-4 sm:mb-6",children:"Create New User Account"}),i.text&&p.jsx("div",{className:`mb-4 p-3 sm:p-4 rounded text-sm sm:text-base ${i.type==="success"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:i.text}),p.jsxs("form",{onSubmit:a,className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-gray-700 font-semibold mb-2 text-sm sm:text-base",children:"Name"}),p.jsx("input",{type:"text",name:"name",value:t.name,onChange:o,required:!0,className:"w-full px-3 sm:px-4 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm sm:text-base"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-gray-700 font-semibold mb-2 text-sm sm:text-base",children:"Email"}),p.jsx("input",{type:"email",name:"email",value:t.email,onChange:o,required:!0,className:"w-full px-3 sm:px-4 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm sm:text-base"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-gray-700 font-semibold mb-2 text-sm sm:text-base",children:"Password"}),p.jsx("input",{type:"password",name:"password",value:t.password,onChange:o,required:!0,minLength:6,className:"w-full px-3 sm:px-4 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm sm:text-base"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-gray-700 font-semibold mb-2 text-sm sm:text-base",children:"Phone"}),p.jsx("input",{type:"tel",name:"phone",value:t.phone,onChange:o,className:"w-full px-3 sm:px-4 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm sm:text-base"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-gray-700 font-semibold mb-2 text-sm sm:text-base",children:"Specialty"}),p.jsx("input",{type:"text",name:"specialty",value:t.specialty,onChange:o,className:"w-full px-3 sm:px-4 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm sm:text-base"})]}),p.jsx("button",{type:"submit",disabled:n,className:"w-full bg-blue-600 text-white py-2 sm:py-3 px-4 rounded font-semibold hover:bg-blue-700 transition disabled:opacity-50 text-sm sm:text-base",children:n?"Creating user...":"Create User"})]})]})})]})},uF=["videography","editing"],cF=()=>{const[t,e]=ue.useState([]),[n,r]=ue.useState([]),[i,s]=ue.useState({title:"",description:"",date:"",priority:"medium",assignedUsers:[],assignedItems:[]}),[o,a]=ue.useState(!1),[l,u]=ue.useState({type:"",text:""}),[c,g]=ue.useState(""),[v,m]=ue.useState("");ue.useEffect(()=>{S(),A()},[]);const S=async()=>{try{const T=(await Un($t(Qe,"users"))).docs.map(P=>({id:P.id,...P.data()}));e(T)}catch(x){console.error("Error fetching users:",x)}},A=async()=>{try{const T=(await Un($t(Qe,"inventory"))).docs.map(P=>({id:P.id,...P.data()}));T.sort((P,te)=>{const de=(P.itemName||"").toLowerCase(),me=(te.itemName||"").toLowerCase();return de.localeCompare(me)}),r(T)}catch(x){console.error("Error fetching inventory:",x)}},L=x=>{s(T=>({...T,[x.target.name]:x.target.value}))},b=x=>{s(T=>T.assignedUsers.find(te=>te.userId===x)?{...T,assignedUsers:T.assignedUsers.filter(te=>te.userId!==x)}:{...T,assignedUsers:[...T.assignedUsers,{userId:x,roles:["videography"]}]})},k=(x,T)=>{s(P=>{const te=P.assignedUsers.map(de=>{if(de.userId!==x)return de;const ge=de.roles.includes(T)?de.roles.filter(Q=>Q!==T):[...de.roles,T];return{...de,roles:ge.length?ge:[T]}});return{...P,assignedUsers:te}})},j=x=>{s(T=>({...T,assignedItems:T.assignedItems.includes(x)?T.assignedItems.filter(P=>P!==x):[...T.assignedItems,x]}))},U=async x=>{x.preventDefault(),a(!0),u({type:"",text:""});try{await Qo($t(Qe,"works"),{title:i.title,description:i.description,date:i.date,priority:i.priority,assignedUsers:i.assignedUsers.map(te=>te.userId),assignedUserDetails:i.assignedUsers,assignedItems:i.assignedItems,createdAt:new Date().toISOString(),status:"pending"});const T=i.assignedUsers.map(async({userId:te})=>{const me=(await du(cn(Qe,"users",te))).data();return(me==null?void 0:me.email)||null}),P=(await Promise.all(T)).filter(Boolean);P.length>0&&await Qo($t(Qe,"mail"),{to:P,message:{subject:`New work assigned: ${i.title}`,text:`You have been assigned to a new work:

Title: ${i.title}
Date: ${i.date}
Description: ${i.description}`,html:`<p>Hello,</p> <p>You have been assigned a new work. Please find the details below:</p> 
          <p><b>Title:</b> ${i.title}</p> 
          <p><b>Date:</b> ${i.date}</p> 
          <p><b>Description :</b> ${i.description}</p>
          <p>Kindly review and confirm the work by visiting the <a href="https://tmv.fotmv.online/">Videography Manager</a> Website</p> 
          <p>If you encounter any issues or need further assistance, feel free to contact me.</p> 
          <p>Thank you.</p> 
          
          <p>Best regards,</p>

          <p style="color:#A3A9AD">
            <strong>Mihiru Dahanayake</strong><br>
            <i>Acting Videography Department Head<br>FOT Media<br>Faculty Of Technology<br>Rajarata University of Sri Lanka<br>
            <a href="tel:+94703426554" style="color:#0066cc; text-decoration:none;">070 342 6554</a><br>
            <a href="mailto:mihirudahanayake@gmail.com" style="color:#0066cc; text-decoration:none;">mihiru.online@gmail.com</a></i><br>
          </p>`}}),u({type:"success",text:"Work assigned successfully!"}),s({title:"",description:"",date:"",priority:"medium",assignedUsers:[],assignedItems:[]})}catch(T){u({type:"error",text:T.message})}finally{a(!1)}},q=x=>i.assignedUsers.some(T=>T.userId===x),ee=x=>{var T;return((T=i.assignedUsers.find(P=>P.userId===x))==null?void 0:T.roles)||[]},D=c.trim().toLowerCase(),N=t.filter(x=>{if(!D)return!0;const T=(x.name||"").toLowerCase(),P=(x.cardNumber||"").toLowerCase();return T.includes(D)||P.includes(D)}),I=v.trim().toLowerCase(),R=n.filter(x=>{if(!I)return!0;const T=(x.itemName||"").toLowerCase(),P=(x.itemNo||"").toLowerCase();return T.includes(I)||P.includes(I)});return p.jsxs("div",{className:"min-h-screen bg-gray-100",children:[p.jsx(hr,{userType:"admin"}),p.jsx("main",{className:"container mx-auto px-4 py-6 sm:py-8",children:p.jsxs("div",{className:"max-w-3xl mx-auto bg-white rounded-lg shadow-md p-4 sm:p-8",children:[p.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-gray-800 mb-4 sm:mb-6",children:"Create and Assign Work"}),l.text&&p.jsx("div",{className:`mb-4 p-3 sm:p-4 rounded text-sm sm:text-base ${l.type==="success"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:l.text}),p.jsxs("form",{onSubmit:U,className:"space-y-4",children:[p.jsxs("div",{children:[p.jsxs("label",{className:"flex items-center gap-2 text-gray-700 font-semibold mb-2 text-sm sm:text-base",children:[p.jsx(YO,{}),p.jsx("span",{children:"Work Title"})]}),p.jsx("input",{type:"text",name:"title",value:i.title,onChange:L,required:!0,className:"w-full px-3 sm:px-4 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-green-500 text-sm sm:text-base"})]}),p.jsxs("div",{children:[p.jsxs("label",{className:"flex items-center gap-2 text-gray-700 font-semibold mb-2 text-sm sm:text-base",children:[p.jsx(zO,{}),p.jsx("span",{children:"Description"})]}),p.jsx("textarea",{name:"description",value:i.description,onChange:L,required:!0,rows:"4",className:"w-full px-3 sm:px-4 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-green-500 text-sm sm:text-base"})]}),p.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[p.jsxs("div",{children:[p.jsxs("label",{className:"flex items-center gap-2 text-gray-700 font-semibold mb-2 text-sm sm:text-base",children:[p.jsx(Ki,{}),p.jsx("span",{children:"Date"})]}),p.jsx("input",{type:"date",name:"date",value:i.date,onChange:L,required:!0,className:"w-full px-3 sm:px-4 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-green-500 text-sm sm:text-base"})]}),p.jsxs("div",{children:[p.jsxs("label",{className:"flex items-center gap-2 text-gray-700 font-semibold mb-2 text-sm sm:text-base",children:[p.jsx(GO,{}),p.jsx("span",{children:"Priority"})]}),p.jsxs("select",{name:"priority",value:i.priority,onChange:L,className:"w-full px-3 sm:px-4 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-green-500 text-sm sm:text-base",children:[p.jsx("option",{value:"low",children:"Low"}),p.jsx("option",{value:"medium",children:"Medium"}),p.jsx("option",{value:"high",children:"High"}),p.jsx("option",{value:"urgent",children:"Urgent"})]})]})]}),p.jsxs("div",{children:[p.jsxs("label",{className:"flex items-center gap-2 text-gray-700 font-semibold mb-2 text-sm sm:text-base",children:[p.jsx(_A,{}),p.jsx("span",{children:"Assign Team Members"})]}),p.jsxs("div",{className:"relative mb-2",children:[p.jsx(Uc,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 text-xs"}),p.jsx("input",{type:"text",placeholder:"Search by name or card...",value:c,onChange:x=>g(x.target.value),className:"w-full pl-8 pr-3 py-2 border border-gray-300 rounded text-sm focus:outline-none focus:ring-2 focus:ring-green-500"})]}),p.jsx("div",{className:"border border-gray-300 rounded p-3 sm:p-4 max-h-60 overflow-y-auto",children:N.length===0?p.jsx("p",{className:"text-gray-500 text-sm sm:text-base",children:"No users found"}):N.map(x=>{const T=q(x.id),P=ee(x.id);return p.jsxs("div",{className:"mb-2 p-2 rounded hover:bg-gray-50",children:[p.jsxs("label",{className:"flex items-center cursor-pointer",children:[p.jsx("input",{type:"checkbox",checked:T,onChange:()=>b(x.id),className:"mr-3 w-4 h-4"}),p.jsx("div",{className:"flex-1",children:p.jsxs("p",{className:"text-gray-700 text-sm sm:text-base",children:[x.name," ",p.jsxs("span",{className:"text-xs text-gray-500",children:["(",x.cardNumber||"-",")"]})]})})]}),T&&p.jsx("div",{className:"mt-1 ml-7 flex flex-wrap gap-2 text-xs sm:text-sm",children:uF.map(te=>p.jsx("button",{type:"button",onClick:()=>k(x.id,te),className:`px-2 py-1 rounded border ${P.includes(te)?"bg-green-600 text-white border-green-600":"bg-white text-gray-700 border-gray-300"}`,children:te},te))})]},x.id)})}),p.jsxs("p",{className:"text-xs sm:text-sm text-gray-500 mt-2",children:["Selected: ",i.assignedUsers.length," member(s)"]})]}),p.jsxs("div",{children:[p.jsxs("label",{className:"flex items-center gap-2 text-gray-700 font-semibold mb-2 text-sm sm:text-base",children:[p.jsx(of,{}),p.jsx("span",{children:"Assign Inventory Items (Optional)"})]}),p.jsxs("div",{className:"relative mb-2",children:[p.jsx(Uc,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 text-xs"}),p.jsx("input",{type:"text",placeholder:"Search by item name or number...",value:v,onChange:x=>m(x.target.value),className:"w-full pl-8 pr-3 py-2 border border-gray-300 rounded text-sm focus:outline-none focus:ring-2 focus:ring-green-500"})]}),p.jsx("div",{className:"border border-gray-300 rounded p-3 sm:p-4 max-h-60 overflow-y-auto",children:R.length===0?p.jsx("p",{className:"text-gray-500 text-sm sm:text-base",children:"No items found"}):R.map(x=>p.jsxs("label",{className:"flex items-center mb-2 cursor-pointer hover:bg-gray-50 p-2 rounded",children:[p.jsx("input",{type:"checkbox",checked:i.assignedItems.includes(x.id),onChange:()=>j(x.id),className:"mr-3 w-4 h-4"}),p.jsxs("div",{className:"flex-1",children:[p.jsxs("p",{className:"text-gray-700 text-sm sm:text-base",children:[x.itemName," ",p.jsxs("span",{className:"text-xs text-gray-500",children:["(",x.itemNo,")"]})]}),x.details&&p.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:x.details})]})]},x.id))}),p.jsxs("p",{className:"text-xs sm:text-sm text-gray-500 mt-2",children:["Selected: ",i.assignedItems.length," item(s)"]})]}),p.jsx("button",{type:"submit",disabled:o||i.assignedUsers.length===0,className:"w-full bg-green-600 text-white py-2 sm:py-3 px-4 rounded font-semibold hover:bg-green-700 transition disabled:opacity-50 text-sm sm:text-base",children:o?"Creating Work...":"Create and Assign Work"})]})]})})]})},hF=()=>{const[t,e]=ue.useState([]),[n,r]=ue.useState({}),[i,s]=ue.useState({}),[o,a]=ue.useState(!0),[l,u]=ue.useState(""),[c,g]=ue.useState(""),[v,m]=ue.useState(""),S=pa();ue.useEffect(()=>{A()},[]);const A=async()=>{a(!0);try{const R=await Un($t(Qe,"users")),x={};R.docs.forEach(me=>{x[me.id]=me.data()}),r(x);const T=await Un($t(Qe,"inventory")),P={};T.docs.forEach(me=>{P[me.id]=me.data()}),s(P);const de=(await Un($t(Qe,"works"))).docs.map(me=>({id:me.id,...me.data()}));e(de)}catch(R){console.error("Error fetching data:",R)}finally{a(!1)}},L=async R=>{try{const x=cn(Qe,"works",R);await ki(x,{status:"complete"}),e(T=>T.map(P=>P.id===R?{...P,status:"complete"}:P))}catch(x){console.error("Failed to mark task complete:",x)}},b=l.trim().toLowerCase(),k=t.filter(R=>{if(c||v){if(!R.date)return!1;const Q=new Date(R.date),oe=new Date(Q.getTime()-Q.getTimezoneOffset()*6e4).toISOString().slice(0,10);if(c&&oe<c||v&&oe>v)return!1}if(!b)return!0;const x=(R.title||"").toLowerCase(),T=(R.assignedUsers||[]).map(Q=>n[Q]||{}),P=T.map(Q=>(Q.name||"").toLowerCase()),te=T.map(Q=>(Q.cardNumber||"").toLowerCase()),de=x.includes(b),me=P.some(Q=>Q.includes(b)),ge=te.some(Q=>Q.includes(b));return de||me||ge}).sort((R,x)=>{const T=R.date?new Date(R.date).getTime():0;return(x.date?new Date(x.date).getTime():0)-T}),j=k.filter(R=>(R.status||"incomplete")!=="complete"),U=k.filter(R=>(R.status||"incomplete")==="complete");if(o)return p.jsxs("div",{className:"min-h-screen bg-gray-100",children:[p.jsx(hr,{userType:"admin"}),p.jsxs("div",{className:"flex flex-col justify-center items-center h-64",children:[p.jsx(ga,{className:"animate-spin text-4xl text-blue-600 mb-4"}),p.jsx("p",{className:"text-gray-600",children:"Loading tasks..."})]})]});const q=R=>{const x={pending:"bg-red-100 text-red-800",accepted:"bg-orange-100 text-orange-800",done:"bg-blue-100 text-blue-800",completed:"bg-green-100 text-green-800"};return x[R]||x.pending},ee=R=>{if((R.status||"").toLowerCase()==="complete")return"completed";const x=R.assignedUserDetails||[],T=R.roleCompletion||{},P=R.userAcceptance||{};return!x.length||!x.every(me=>P[me.userId]==="accepted")?"pending":x.every(me=>(me.roles||[]).every(ge=>T[`${me.userId}_${ge}`]==="done"))?"done":"accepted"},D=(R,x)=>{const P=(R.userAcceptance||{})[x]||"pending";return P==="accepted"?p.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-green-100 text-green-800 text-[11px] font-semibold",children:[p.jsx(na,{className:"text-[10px]"}),"Accepted"]}):P==="rejected"?p.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-red-100 text-red-800 text-[11px] font-semibold",children:[p.jsx(yl,{className:"text-[10px]"}),"Rejected"]}):p.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-yellow-100 text-yellow-800 text-[11px] font-semibold",children:[p.jsx(E2,{className:"text-[10px]"}),"Pending"]})},N=(R,x=!1)=>{var me;const T=ee(R),P=R.assignedUserDetails||[],te=R.roleCompletion||{},de=R.assignedItems||[];return p.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 sm:p-6 hover:shadow-xl transition cursor-pointer",onClick:()=>S(`/tasks/${R.id}`),children:[p.jsxs("div",{className:"flex justify-between items-start mb-3",children:[p.jsxs("div",{className:"flex-1 pr-2",children:[p.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-gray-800",children:R.title||"Task"}),p.jsxs("p",{className:"mt-1 text-xs sm:text-sm text-gray-500 capitalize",children:["Priority: ",R.priority||"medium"]})]}),p.jsx("span",{className:`px-2 sm:px-3 py-1 rounded-full text-xs font-semibold ${q(T)}`,children:T})]}),R.description&&p.jsx("p",{className:"text-gray-600 mb-4 text-sm sm:text-base line-clamp-3",children:R.description}),R.date&&p.jsx("div",{className:"mb-3",children:p.jsxs("div",{className:"flex items-center gap-2 text-xs sm:text-sm text-gray-500",children:[p.jsx(Ki,{}),p.jsxs("span",{children:["Date: ",new Date(R.date).toLocaleDateString()]})]})}),p.jsxs("div",{className:"mb-3",children:[p.jsx("div",{className:"flex items-center justify-between mb-2",children:p.jsxs("div",{className:"flex items-center gap-2 text-xs sm:text-sm font-semibold text-gray-700",children:[p.jsx(_A,{}),p.jsx("span",{children:"Assigned to:"})]})}),p.jsxs("div",{className:"space-y-2",children:[P.map(ge=>{var he;const Q=ge.userId,oe=ge.roles||[],ae=((he=n[Q])==null?void 0:he.name)||"Unknown";return p.jsxs("div",{className:"bg-gray-50 px-2 py-1 rounded text-xs sm:text-sm",children:[p.jsxs("div",{className:"flex items-center justify-between gap-2",children:[p.jsx("p",{className:"font-semibold text-gray-800",children:ae}),D(R,Q)]}),p.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:oe.map(F=>{const G=`${Q}_${F}`,B=te[G]==="done";return p.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 rounded text-xs ${B?"bg-green-100 text-green-800":"bg-gray-200 text-gray-700"}`,children:[B&&p.jsx(na,{className:"text-xs"}),F]},F)})})]},Q)}),P.length===0&&((me=R.assignedUsers)==null?void 0:me.map(ge=>{var Q;return p.jsxs("div",{className:"bg-gray-50 px-2 py-1 rounded text-xs sm:text-sm flex items-center justify-between",children:[p.jsx("span",{className:"text-gray-700",children:((Q=n[ge])==null?void 0:Q.name)||"Unknown"}),D(R,ge)]},ge)}))]})]}),de.length>0&&p.jsxs("div",{className:"mb-3",children:[p.jsxs("div",{className:"flex items-center gap-2 text-xs sm:text-sm font-semibold text-gray-700 mb-2",children:[p.jsx(of,{}),p.jsx("span",{children:"Items:"})]}),p.jsx("div",{className:"flex flex-wrap gap-2",children:de.map(ge=>{const Q=i[ge];return p.jsx("span",{className:"bg-blue-50 px-2 py-1 rounded text-xs sm:text-sm text-blue-800",children:Q?`${Q.itemName} (${Q.itemNo})`:"Unknown item"},ge)})})]}),!x&&p.jsxs("button",{type:"button",onClick:ge=>{ge.stopPropagation(),L(R.id)},className:"mt-2 inline-flex items-center gap-2 px-3 py-1.5 rounded bg-green-600 text-white text-xs sm:text-sm hover:bg-green-700",children:[p.jsx(na,{}),"Mark as complete"]}),x&&p.jsx("p",{className:"mt-2 text-xs sm:text-sm text-green-700 font-semibold",children:"Completed"})]},R.id)},I=j.length>0||U.length>0;return p.jsxs("div",{className:"min-h-screen bg-gray-100",children:[p.jsx(hr,{userType:"admin"}),p.jsxs("main",{className:"container mx-auto px-4 py-6 sm:py-8",children:[p.jsxs("div",{className:"flex flex-col gap-3 mb-4 sm:mb-6",children:[p.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-gray-800",children:"All Tasks"}),p.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3",children:[p.jsxs("div",{className:"relative flex-1 min-w-0",children:[p.jsx(Uc,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 text-sm"}),p.jsx("input",{type:"text",placeholder:"Search title, user name, or card...",value:l,onChange:R=>u(R.target.value),className:"w-full pl-9 pr-3 py-2 border rounded text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),p.jsxs("div",{className:"grid grid-cols-2 gap-2 sm:flex sm:gap-2 w-full sm:w-auto",children:[p.jsx("input",{type:"date",value:c,onChange:R=>g(R.target.value),className:"w-full px-2 py-2 border rounded text-xs sm:text-sm focus:outline-none focus:ring-2 focus:ring-blue-500","aria-label":"Start date"}),p.jsx("input",{type:"date",value:v,onChange:R=>m(R.target.value),className:"w-full px-2 py-2 border rounded text-xs sm:text-sm focus:outline-none focus:ring-2 focus:ring-blue-500","aria-label":"End date"})]})]})]}),I?p.jsxs(p.Fragment,{children:[j.length>0&&p.jsxs("section",{className:"mb-6",children:[p.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-gray-800 mb-3",children:"Incomplete / waiting for admin"}),p.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:j.map(R=>N(R,!1))})]}),U.length>0&&p.jsxs("section",{children:[p.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-gray-800 mb-3",children:"Completed tasks"}),p.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:U.map(R=>N(R,!0))})]})]}):p.jsx("div",{className:"bg-white rounded-lg shadow-md p-6 sm:p-8 text-center",children:p.jsx("p",{className:"text-gray-600 text-sm sm:text-base",children:"No tasks match your filters."})})]})]})},dF=()=>{const[t,e]=ue.useState(null),[n,r]=ue.useState(null),[i,s]=ue.useState("loading"),[o,a]=ue.useState(!1),[l,u]=ue.useState(!1),[c,g]=ue.useState(!1),[v,m]=ue.useState(!1),[S,A]=ue.useState(""),[L,b]=ue.useState(""),[k,j]=ue.useState(""),[U,q]=ue.useState(""),[ee,D]=ue.useState({newPassword:"",confirmPassword:""}),N=pa();ue.useEffect(()=>{const oe=Wd(Ms,async ae=>{if(!ae){s("no-auth"),e(null);return}try{const he=await du(cn(Qe,"users",ae.uid));if(he.exists()){const F={id:ae.uid,...he.data(),email:ae.email||""};e(F),r(F)}s("ready")}catch(he){console.error(he),s("error")}});return()=>oe()},[]);const I=async()=>{await _L(Ms),N("/")},R=oe=>{if(!o)return;const{name:ae,value:he}=oe.target;e(F=>({...F,[ae]:he}))},x=()=>{A(""),b(""),r(t),a(!0)},T=()=>{A(""),b(""),e(n),a(!1)},P=async oe=>{if(oe.preventDefault(),!!(t!=null&&t.id)){g(!0),A(""),b("");try{const ae=cn(Qe,"users",t.id),{id:he,userType:F,createdAt:G,email:B,...Z}=t;await ki(ae,Z),b("Profile updated successfully."),a(!1),r(t)}catch(ae){console.error(ae),A("Failed to update profile.")}finally{g(!1)}}},te=()=>{j(""),q(""),D({newPassword:"",confirmPassword:""}),u(!0)},de=()=>{j(""),q(""),D({newPassword:"",confirmPassword:""}),u(!1)},me=async oe=>{if(oe.preventDefault(),j(""),q(""),ee.newPassword.length<6){j("New password must be at least 6 characters.");return}if(ee.newPassword!==ee.confirmPassword){j("New password and confirm password do not match.");return}const ae=Ms.currentUser;if(!ae){j("You are not logged in.");return}m(!0);try{await gL(ae,ee.newPassword),q("Password updated successfully."),u(!1),D({newPassword:"",confirmPassword:""})}catch(he){console.error(he),j(he.message||"Failed to update password.")}finally{m(!1)}},ge=(t==null?void 0:t.userType)==="admin"?"admin":"user",Q="w-full px-3 py-2 border rounded text-sm focus:outline-none focus:ring-2 focus:ring-blue-500";return p.jsxs("div",{className:"min-h-screen bg-gray-100",children:[p.jsx(hr,{userType:ge}),p.jsxs("main",{className:"container mx-auto px-4 py-6 sm:py-8 max-w-2xl",children:[p.jsxs("div",{className:"flex items-center justify-between mb-6",children:[p.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-800",children:"Profile"}),p.jsx("button",{onClick:I,className:"text-xs sm:text-sm px-3 py-1 rounded bg-red-600 text-white hover:bg-red-700",children:"Logout"})]}),i==="loading"&&p.jsx("p",{className:"text-gray-600 text-sm sm:text-base",children:"Loading profile..."}),i==="no-auth"&&p.jsx("p",{className:"text-gray-600 text-sm sm:text-base",children:"You are not logged in."}),i==="error"&&p.jsx("p",{className:"text-red-600 text-sm sm:text-base",children:"Failed to load profile information."}),i==="ready"&&t&&p.jsxs(p.Fragment,{children:[p.jsxs("form",{onSubmit:P,className:"bg-white rounded-lg shadow-md p-4 sm:p-6 space-y-3 mb-6",children:[p.jsxs("div",{className:"flex justify-between items-center mb-2",children:[p.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"Profile details"}),o?p.jsxs("div",{className:"flex gap-2",children:[p.jsx("button",{type:"submit",disabled:c,className:"text-sm px-3 py-1 rounded bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-50",children:c?"Saving...":"Save"}),p.jsx("button",{type:"button",onClick:T,className:"text-sm px-3 py-1 rounded bg-gray-300 text-gray-800 hover:bg-gray-400",children:"Cancel"})]}):p.jsx("button",{type:"button",onClick:x,className:"text-sm px-3 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",children:"Edit"})]}),S&&p.jsx("div",{className:"p-2 rounded bg-red-100 text-red-700 text-sm",children:S}),L&&p.jsx("div",{className:"p-2 rounded bg-green-100 text-green-700 text-sm",children:L}),p.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Name"}),p.jsx("input",{type:"text",name:"name",value:t.name||"",onChange:R,className:Q,disabled:!o})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Email"}),p.jsx("input",{type:"email",name:"email",value:t.email||"",onChange:R,className:Q,disabled:!0})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Phone"}),p.jsx("input",{type:"tel",name:"phoneNo",value:t.phoneNo||"",onChange:R,className:Q,disabled:!o})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Batch"}),p.jsxs("select",{name:"batch",value:t.batch||"20/21",onChange:R,className:Q,disabled:!o,children:[p.jsx("option",{value:"20/21",children:"20/21"}),p.jsx("option",{value:"21/22",children:"21/22"}),p.jsx("option",{value:"22/23",children:"22/23"}),p.jsx("option",{value:"23/24",children:"23/24"})]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Study department"}),p.jsxs("select",{name:"studyDepartment",value:t.studyDepartment||"ITT",onChange:R,className:Q,disabled:!o,children:[p.jsx("option",{value:"ITT",children:"ITT"}),p.jsx("option",{value:"EET",children:"EET"}),p.jsx("option",{value:"MTT",children:"MTT"}),p.jsx("option",{value:"BPT",children:"BPT"}),p.jsx("option",{value:"Food",children:"Food"})]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Gender"}),p.jsxs("select",{name:"gender",value:t.gender||"male",onChange:R,className:Q,disabled:!o,children:[p.jsx("option",{value:"male",children:"Male"}),p.jsx("option",{value:"female",children:"Female"})]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Registration number"}),p.jsx("input",{type:"text",name:"registrationNumber",value:t.registrationNumber||"",onChange:R,className:Q,disabled:!o})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Card"}),p.jsx("input",{type:"text",name:"cardNumber",value:t.cardNumber||"",onChange:R,className:Q,disabled:!o})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Birthday"}),p.jsx("input",{type:"date",name:"birthday",value:t.birthday||"",onChange:R,className:Q,disabled:!o})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Work department"}),p.jsxs("select",{name:"department",value:t.department||"videography",onChange:R,className:Q,disabled:!o,children:[p.jsx("option",{value:"videography",children:"Videography"}),p.jsx("option",{value:"photography",children:"Photography"})]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"First priority (work)"}),p.jsxs("select",{name:"firstPriority",value:t.firstPriority||"videography",onChange:R,className:Q,disabled:!o,children:[p.jsx("option",{value:"videography",children:"Videography"}),p.jsx("option",{value:"photography",children:"Photography"})]})]})]})]}),p.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 sm:p-6 space-y-3",children:[p.jsxs("div",{className:"flex justify-between items-center mb-1",children:[p.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"Change password"}),l?p.jsx("button",{type:"button",onClick:de,className:"text-sm px-3 py-1 rounded bg-gray-300 text-gray-800 hover:bg-gray-400",children:"Cancel"}):p.jsx("button",{type:"button",onClick:te,className:"text-sm px-3 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",children:"Change"})]}),k&&p.jsx("div",{className:"p-2 rounded bg-red-100 text-red-700 text-sm",children:k}),U&&p.jsx("div",{className:"p-2 rounded bg-green-100 text-green-700 text-sm",children:U}),l&&p.jsxs("form",{onSubmit:me,className:"space-y-3 mt-2",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"New password"}),p.jsx("input",{type:"password",name:"newPassword",value:ee.newPassword,onChange:oe=>D(ae=>({...ae,newPassword:oe.target.value})),className:Q,minLength:6,required:!0})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Confirm new password"}),p.jsx("input",{type:"password",name:"confirmPassword",value:ee.confirmPassword,onChange:oe=>D(ae=>({...ae,confirmPassword:oe.target.value})),className:Q,minLength:6,required:!0})]}),p.jsx("button",{type:"submit",disabled:v,className:"w-full bg-blue-600 text-white py-2 rounded font-semibold text-sm hover:bg-blue-700 disabled:opacity-50",children:v?"Updating...":"Update password"})]})]})]})]})]})},fF=()=>{const[t,e]=ue.useState([]),[n,r]=ue.useState(!0),[i,s]=ue.useState(""),[o,a]=ue.useState("all"),l=pa();ue.useEffect(()=>{(async()=>{try{const m=(await Un($t(Qe,"users"))).docs.map(S=>({id:S.id,...S.data()}));e(m)}catch(v){console.error("Error loading users:",v)}finally{r(!1)}})()},[]);const u=i.trim().toLowerCase(),c=t.filter(g=>{if(o!=="all"&&(g.batch||"")!==o)return!1;if(!u)return!0;const v=(g.name||"").toLowerCase(),m=(g.cardNumber||"").toLowerCase();return v.includes(u)||m.includes(u)});return p.jsxs("div",{className:"min-h-screen bg-gray-100",children:[p.jsx(hr,{userType:"admin"}),p.jsxs("main",{className:"container mx-auto px-4 py-6 sm:py-8 max-w-4xl",children:[p.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-800 mb-4",children:"Manage users"}),p.jsxs("div",{className:"mb-4 flex flex-col sm:flex-row gap-3 sm:items-center",children:[p.jsxs("div",{className:"flex-1 relative",children:[p.jsx(Uc,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 text-sm"}),p.jsx("input",{type:"text",placeholder:"Search by name or card...",value:i,onChange:g=>s(g.target.value),className:"w-full pl-9 pr-3 py-2 border rounded text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),p.jsx("div",{className:"w-full sm:w-40",children:p.jsxs("select",{value:o,onChange:g=>a(g.target.value),className:"w-full px-3 py-2 border rounded text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[p.jsx("option",{value:"all",children:"All batches"}),p.jsx("option",{value:"20/21",children:"20/21"}),p.jsx("option",{value:"21/22",children:"21/22"}),p.jsx("option",{value:"22/23",children:"22/23"}),p.jsx("option",{value:"23/24",children:"23/24"})]})})]}),n?p.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[p.jsx(ga,{className:"animate-spin"}),p.jsx("span",{children:"Loading users..."})]}):c.length===0?p.jsx("p",{className:"text-gray-600 text-sm sm:text-base",children:"No users match your search."}):p.jsx("div",{className:"bg-white rounded-lg shadow-md divide-y",children:c.map(g=>p.jsxs("button",{onClick:()=>l(`/users/${g.id}`),className:"w-full text-left px-4 py-3 flex items-center justify-between hover:bg-gray-50",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center text-blue-600",children:p.jsx(wA,{})}),p.jsxs("div",{children:[p.jsx("p",{className:"font-semibold text-gray-800 text-sm sm:text-base",children:g.name||"No name"}),p.jsxs("p",{className:"flex items-center gap-1 text-xs sm:text-sm text-gray-600",children:[p.jsx($O,{})," ",g.email]}),p.jsxs("p",{className:"text-xs text-gray-500",children:["Card: ",g.cardNumber||"-","  Batch: ",g.batch||"-"]})]})]}),p.jsx("span",{className:"text-xs sm:text-sm text-gray-500",children:g.userType||"user"})]},g.id))})]})]})},pF=()=>{const{userId:t}=f6(),[e,n]=ue.useState(null),[r,i]=ue.useState([]),[s,o]=ue.useState(!0);ue.useEffect(()=>{(async()=>{try{const c=await du(cn(Qe,"users",t));c.exists()&&n({id:t,...c.data()});const m=(await Un($t(Qe,"works"))).docs.map(S=>({id:S.id,...S.data()})).filter(S=>S.assignedUsers?Array.isArray(S.assignedUsers)?S.assignedUsers.includes(t):S.assignedUsers===t:!1);m.sort((S,A)=>{const L=S.date?new Date(S.date).getTime():0;return(A.date?new Date(A.date).getTime():0)-L}),i(m)}catch(c){console.error("Error loading user details:",c)}finally{o(!1)}})()},[t]);const a=u=>{const g=(u.assignedUserDetails||[]).find(v=>v.userId===t);return(g==null?void 0:g.roles)||[]},l=(u,c)=>{const g=`${t}_${c}`;return(u.roleCompletion||{})[g]==="done"};return p.jsxs("div",{className:"min-h-screen bg-gray-100",children:[p.jsx(hr,{userType:"admin"}),p.jsxs("main",{className:"container mx-auto px-4 py-6 sm:py-8 max-w-4xl",children:[s&&p.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[p.jsx(ga,{className:"animate-spin"}),p.jsx("span",{children:"Loading user..."})]}),!s&&!e&&p.jsx("p",{className:"text-gray-600 text-sm sm:text-base",children:"User not found."}),!s&&e&&p.jsxs(p.Fragment,{children:[p.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-800 mb-2",children:e.name||"User details"}),p.jsx("p",{className:"text-sm sm:text-base text-gray-600 mb-4",children:e.email}),p.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 sm:p-6 mb-6 text-sm sm:text-base space-y-2",children:[p.jsxs("p",{children:[p.jsx("span",{className:"font-semibold",children:"Phone:"})," ",e.phoneNo||"-"]}),p.jsxs("p",{children:[p.jsx("span",{className:"font-semibold",children:"Batch:"})," ",e.batch||"-"]}),p.jsxs("p",{children:[p.jsx("span",{className:"font-semibold",children:"Study department:"})," ",e.studyDepartment||"-"]}),p.jsxs("p",{children:[p.jsx("span",{className:"font-semibold",children:"Gender:"})," ",e.gender||"-"]}),p.jsxs("p",{children:[p.jsx("span",{className:"font-semibold",children:"Registration no:"})," ",e.registrationNumber||"-"]}),p.jsxs("p",{children:[p.jsx("span",{className:"font-semibold",children:"Card:"})," ",e.cardNumber||"-"]}),p.jsxs("p",{children:[p.jsx("span",{className:"font-semibold",children:"Work departments:"})," ",Array.isArray(e.departments)?e.departments.join(", "):e.department||"-"]}),p.jsxs("p",{children:[p.jsx("span",{className:"font-semibold",children:"First priority:"})," ",e.firstPriority||"-"]}),p.jsxs("p",{children:[p.jsx("span",{className:"font-semibold",children:"User type:"})," ",e.userType||"user"]})]}),p.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-3",children:"Task history"}),r.length===0?p.jsx("p",{className:"text-gray-600 text-sm sm:text-base",children:"No tasks for this user."}):p.jsx("div",{className:"space-y-3",children:r.map(u=>{const c=a(u),g=u.status||"incomplete";return p.jsxs("div",{className:"bg-white rounded-lg shadow p-3 sm:p-4 text-sm sm:text-base",children:[p.jsxs("div",{className:"flex justify-between items-start mb-2",children:[p.jsxs("div",{className:"flex-1",children:[p.jsx("h3",{className:"font-semibold text-gray-800",children:u.title||"Untitled task"}),u.date&&p.jsxs("span",{className:"flex items-center gap-1 text-xs text-gray-500 mt-1",children:[p.jsx(Ki,{})," ",new Date(u.date).toLocaleDateString()]})]}),p.jsx("span",{className:`px-2 py-1 rounded text-xs font-semibold capitalize ${g==="complete"?"bg-green-100 text-green-800":g==="done"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:g})]}),u.description&&p.jsx("p",{className:"text-gray-700 text-sm mb-2",children:u.description}),c.length>0&&p.jsxs("div",{className:"mt-2",children:[p.jsx("p",{className:"text-xs font-semibold text-gray-700 mb-1",children:"Assigned work types:"}),p.jsx("div",{className:"flex flex-wrap gap-1",children:c.map(v=>{const m=l(u,v);return p.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 rounded text-xs ${m?"bg-green-100 text-green-800":"bg-gray-100 text-gray-700"}`,children:[m&&p.jsx(na,{className:"text-xs"}),v]},v)})})]})]},u.id)})})]})]})]})},mF=()=>{const[t,e]=ue.useState(null),[n,r]=ue.useState([]),[i,s]=ue.useState([]),[o,a]=ue.useState(!0);ue.useEffect(()=>{const u=Wd(Ms,c=>{e(c||null)});return()=>u()},[]),ue.useEffect(()=>{if(!t)return;(async()=>{a(!0);try{const v=(await Un($t(Qe,"works"))).docs.map(A=>({id:A.id,...A.data()})).filter(A=>A.status==="complete"&&Array.isArray(A.assignedUsers)&&A.assignedUsers.includes(t.uid));v.sort((A,L)=>{const b=A.date?new Date(A.date).getTime():0;return(L.date?new Date(L.date).getTime():0)-b}),r(v);const S=(await Un(rf($t(Qe,"rejectedWorks"),gg("userId","==",t.uid)))).docs.map(A=>({id:A.id,...A.data()}));S.sort((A,L)=>{const b=A.approvedAt?new Date(A.approvedAt).getTime():0;return(L.approvedAt?new Date(L.approvedAt).getTime():0)-b}),s(S)}catch(c){console.error("Error loading task history:",c)}finally{a(!1)}})()},[t]);const l=u=>{if(!t)return[];const g=(u.assignedUserDetails||[]).find(v=>v.userId===t.uid);return(g==null?void 0:g.roles)||[]};return p.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50",children:[p.jsx(hr,{userType:"user"}),p.jsxs("main",{className:"container mx-auto px-4 py-8 max-w-4xl",children:[p.jsxs("div",{className:"mb-8",children:[p.jsx("h1",{className:"text-3xl sm:text-4xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-purple-600 mb-2",children:"Task History"}),p.jsx("p",{className:"text-gray-600 text-sm sm:text-base",children:"View all your completed and rejected tasks"})]}),o?p.jsxs("div",{className:"flex flex-col items-center justify-center py-20",children:[p.jsx(ga,{className:"animate-spin text-5xl text-blue-600 mb-4"}),p.jsx("p",{className:"text-gray-600",children:"Loading history..."})]}):n.length===0&&i.length===0?p.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-12 text-center border border-gray-100",children:[p.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-blue-100 to-purple-100 rounded-full flex items-center justify-center mx-auto mb-4",children:p.jsx(Ki,{className:"text-4xl text-blue-600"})}),p.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:"No History"}),p.jsx("p",{className:"text-gray-600",children:"You have no completed or rejected tasks yet."})]}):p.jsxs(p.Fragment,{children:[n.length>0&&p.jsxs("section",{className:"mb-8",children:[p.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[p.jsx("div",{className:"w-1 h-6 bg-gradient-to-b from-green-500 to-emerald-600 rounded-full"}),p.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-gray-800",children:"Completed Tasks"}),p.jsx("span",{className:"bg-gradient-to-r from-green-500 to-emerald-600 text-white text-xs font-bold px-3 py-1 rounded-full",children:n.length})]}),p.jsx("div",{className:"space-y-4",children:n.map(u=>{const c=l(u);return p.jsxs("div",{className:"bg-white rounded-2xl shadow-md p-5 border border-green-100",children:[p.jsxs("div",{className:"flex items-start justify-between mb-3",children:[p.jsxs("div",{className:"flex-1",children:[p.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-1",children:u.title||"Task"}),u.date&&p.jsxs("p",{className:"flex items-center gap-2 text-xs text-gray-500",children:[p.jsx(Ki,{}),new Date(u.date).toLocaleDateString()]})]}),p.jsxs("div",{className:"flex items-center gap-2 text-green-600",children:[p.jsx(na,{className:"text-2xl"}),p.jsx("span",{className:"text-xs font-semibold",children:"Completed"})]})]}),u.description&&p.jsx("p",{className:"text-gray-700 text-sm mb-3",children:u.description}),p.jsx("div",{className:"flex flex-wrap gap-2",children:c.map(g=>p.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-semibold bg-green-100 text-green-800",children:g},g))})]},u.id)})})]}),i.length>0&&p.jsxs("section",{children:[p.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[p.jsx("div",{className:"w-1 h-6 bg-gradient-to-b from-red-500 to-rose-600 rounded-full"}),p.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-gray-800",children:"Rejected Tasks"}),p.jsx("span",{className:"bg-gradient-to-r from-red-500 to-rose-600 text-white text-xs font-bold px-3 py-1 rounded-full",children:i.length})]}),p.jsx("div",{className:"space-y-4",children:i.map(u=>p.jsxs("div",{className:"bg-white rounded-2xl shadow-md p-5 border border-red-100",children:[p.jsxs("div",{className:"flex items-start justify-between mb-3",children:[p.jsxs("div",{className:"flex-1",children:[p.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-1",children:u.title||"Task"}),u.date&&p.jsxs("p",{className:"flex items-center gap-2 text-xs text-gray-500",children:[p.jsx(Ki,{}),new Date(u.date).toLocaleDateString()]})]}),p.jsxs("div",{className:"flex items-center gap-2 text-red-600",children:[p.jsx(yl,{className:"text-2xl"}),p.jsx("span",{className:"text-xs font-semibold",children:"You Rejected"})]})]}),u.description&&p.jsx("p",{className:"text-gray-700 text-sm mb-3",children:u.description}),p.jsxs("div",{className:"bg-red-50 rounded-xl p-4 border border-red-100",children:[p.jsxs("div",{className:"flex items-start gap-2 mb-2",children:[p.jsx(KO,{className:"text-red-600 mt-0.5"}),p.jsxs("div",{className:"flex-1",children:[p.jsx("p",{className:"text-xs font-semibold text-red-800 mb-1",children:"Rejection Reason:"}),p.jsx("p",{className:"text-sm text-gray-700",children:u.rejectionReason||"-"})]})]}),p.jsxs("div",{className:"text-xs text-gray-500 mt-2 flex flex-col gap-1",children:[p.jsxs("p",{children:["Rejected: ",new Date(u.rejectedAt).toLocaleString()]}),p.jsxs("p",{children:["Approved: ",new Date(u.approvedAt).toLocaleString()]})]})]})]},u.id))})]})]})]})]})},gF=["videography","editing"],vF=()=>{const{taskId:t}=f6(),e=pa(),[n,r]=ue.useState(null),[i,s]=ue.useState([]),[o,a]=ue.useState([]),[l,u]=ue.useState([]),[c,g]=ue.useState([]),[v,m]=ue.useState(!0),[S,A]=ue.useState(!1),[L,b]=ue.useState(!1),[k,j]=ue.useState(!1),[U,q]=ue.useState(""),[ee,D]=ue.useState(""),[N,I]=ue.useState("");ue.useEffect(()=>{(async()=>{m(!0);try{const F=(await Un($t(Qe,"users"))).docs.map(ne=>({id:ne.id,...ne.data()}));s(F);const B=(await Un($t(Qe,"inventory"))).docs.map(ne=>({id:ne.id,...ne.data()}));B.sort((ne,ie)=>{const ve=(ne.itemName||"").toLowerCase(),_e=(ie.itemName||"").toLowerCase();return ve.localeCompare(_e)}),a(B);const Z=await du(cn(Qe,"works",t));if(Z.exists()){const ne={id:Z.id,...Z.data()};r(ne),u(ne.assignedUserDetails||[]),g(ne.assignedItems||[])}else q("Task not found.")}catch(he){console.error(he),q("Failed to load task.")}finally{m(!1)}})()},[t]);const R=ae=>{if(!k)return;const he=l.find(F=>F.userId===ae);u(he?F=>F.filter(G=>G.userId!==ae):F=>[...F,{userId:ae,roles:["videography"]}])},x=(ae,he)=>{k&&u(F=>F.map(G=>{if(G.userId!==ae)return G;const Z=G.roles.includes(he)?G.roles.filter(ne=>ne!==he):[...G.roles,he];return{...G,roles:Z.length?Z:[he]}}))},T=ae=>{k&&g(he=>he.includes(ae)?he.filter(F=>F!==ae):[...he,ae])},P=ae=>{if(!k)return;const{name:he,value:F}=ae.target;r(G=>({...G,[he]:F}))},te=async ae=>{if(ae.preventDefault(),!!n){A(!0),q(""),D("");try{const{id:he,...F}=n,G=n.assignedUsers||[],B=l.map(ne=>ne.userId);await ki(cn(Qe,"works",n.id),{...F,assignedUsers:B,assignedUserDetails:l,assignedItems:c});const Z=B.filter(ne=>!G.includes(ne));if(Z.length>0){const ne=Z.map(async ve=>{const xe=(await du(cn(Qe,"users",ve))).data();return(xe==null?void 0:xe.email)||null}),ie=(await Promise.all(ne)).filter(Boolean);ie.length>0&&await Qo($t(Qe,"mail"),{to:ie,message:{subject:`You were assigned to a work: ${n.title}`,text:`You have been assigned to the work "${n.title}".

Date: ${n.date}
Description: ${n.description}`,html:`<p>Hello,</p> <p>You have been assigned a work. Please find the details below:</p> 
          <p><b>Title:</b> ${n.title}</p> 
          <p><b>Date:</b> ${n.date}</p>
          <p><b>Description:</b> ${n.description}</p> 
          <p>Kindly review and confirm the work by visiting the <a href="https://tmv.fotmv.online/">Videography Manager</a> Website</p> 
          <p>If you encounter any issues or need further assistance, feel free to contact me.</p> 
          <p>Thank you.</p> 
          
          <p>Best regards,</p>

          <p style="color:#A3A9AD">
            <strong>Mihiru Dahanayake</strong><br>
            <i>Acting Videography Department Head<br>FOT Media<br>Faculty Of Technology<br>Rajarata University of Sri Lanka<br>
            <a href="tel:+94703426554" style="color:#0066cc; text-decoration:none;">070 342 6554</a><br>
            <a href="mailto:mihirudahanayake@gmail.com" style="color:#0066cc; text-decoration:none;">mihiru.online@gmail.com</a></i><br>
          </p>`}})}D("Task updated successfully."),j(!1)}catch(he){console.error(he),q("Failed to update task.")}finally{A(!1)}}},de=async()=>{if(window.confirm("Are you sure you want to delete this task?")){b(!0),q(""),D("");try{await ON(cn(Qe,"works",t)),D("Task deleted successfully."),setTimeout(()=>e("/work-list"),1500)}catch(ae){console.error(ae),q("Failed to delete task.")}finally{b(!1)}}};if(v)return p.jsxs("div",{className:"min-h-screen bg-gray-100",children:[p.jsx(hr,{userType:"admin"}),p.jsxs("div",{className:"flex flex-col justify-center items-center h-64",children:[p.jsx(ga,{className:"animate-spin text-4xl text-blue-600 mb-4"}),p.jsx("p",{className:"text-gray-600",children:"Loading task..."})]})]});if(!n)return p.jsxs("div",{className:"min-h-screen bg-gray-100",children:[p.jsx(hr,{userType:"admin"}),p.jsxs("main",{className:"container mx-auto px-4 py-6 sm:py-8 max-w-3xl",children:[p.jsx("p",{className:"text-gray-600 mb-4",children:U||"Task not found."}),p.jsx("button",{onClick:()=>e(-1),className:"px-4 py-2 rounded bg-blue-600 text-white text-sm hover:bg-blue-700",children:"Back"})]})]});const me=ae=>l.some(he=>he.userId===ae),ge=ae=>{var he;return((he=l.find(F=>F.userId===ae))==null?void 0:he.roles)||[]},Q=N.trim().toLowerCase(),oe=o.filter(ae=>{if(!Q)return!0;const he=(ae.itemName||"").toLowerCase(),F=(ae.itemNo||"").toLowerCase();return he.includes(Q)||F.includes(Q)});return p.jsxs("div",{className:"min-h-screen bg-gray-100",children:[p.jsx(hr,{userType:"admin"}),p.jsxs("main",{className:"container mx-auto px-4 py-6 sm:py-8 max-w-3xl",children:[p.jsxs("div",{className:"flex items-center justify-between mb-4",children:[p.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-800",children:"Task details"}),p.jsxs("div",{className:"flex gap-2",children:[k?p.jsxs(p.Fragment,{children:[p.jsx("button",{onClick:te,disabled:S,className:"px-3 py-1 rounded bg-blue-600 text-white text-sm hover:bg-blue-700 disabled:opacity-50",children:S?"Saving...":"Save"}),p.jsx("button",{onClick:()=>{j(!1),D(""),q(""),u(n.assignedUserDetails||[]),g(n.assignedItems||[])},className:"px-3 py-1 rounded bg-gray-300 text-gray-800 text-sm hover:bg-gray-400",children:"Cancel"})]}):p.jsxs(p.Fragment,{children:[p.jsx("button",{onClick:()=>{j(!0),q(""),D("")},className:"px-3 py-1 rounded bg-blue-600 text-white text-sm hover:bg-blue-700",children:"Edit"}),p.jsxs("button",{onClick:de,disabled:L,className:"px-3 py-1 rounded bg-red-600 text-white text-sm hover:bg-red-700 disabled:opacity-50 inline-flex items-center gap-1",children:[p.jsx(vA,{}),L?"Deleting...":"Delete"]})]}),p.jsx("button",{onClick:()=>e(-1),className:"px-3 py-1 rounded bg-gray-200 text-gray-800 text-sm hover:bg-gray-300",children:"Back"})]})]}),U&&p.jsx("div",{className:"mb-3 p-2 rounded bg-red-100 text-red-700 text-sm",children:U}),ee&&p.jsx("div",{className:"mb-3 p-2 rounded bg-green-100 text-green-700 text-sm",children:ee}),p.jsxs("form",{className:"space-y-4",onSubmit:te,children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Title"}),p.jsx("input",{type:"text",name:"title",value:n.title||"",onChange:P,disabled:!k,className:"w-full px-3 py-2 border rounded text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Description"}),p.jsx("textarea",{name:"description",value:n.description||"",onChange:P,disabled:!k,rows:3,className:"w-full px-3 py-2 border rounded text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),p.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Date"}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(Ki,{className:"text-gray-500"}),p.jsx("input",{type:"date",name:"date",value:n.date?new Date(n.date).toISOString().slice(0,10):"",onChange:P,disabled:!k,className:"flex-1 px-3 py-2 border rounded text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Priority"}),p.jsxs("select",{name:"priority",value:n.priority||"medium",onChange:P,disabled:!k,className:"w-full px-3 py-2 border rounded text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[p.jsx("option",{value:"low",children:"Low"}),p.jsx("option",{value:"medium",children:"Medium"}),p.jsx("option",{value:"high",children:"High"}),p.jsx("option",{value:"urgent",children:"Urgent"})]})]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Assigned users and work types"}),p.jsxs("div",{className:"bg-white rounded border p-3 max-h-80 overflow-y-auto",children:[i.map(ae=>{const he=me(ae.id),F=ge(ae.id);return p.jsxs("div",{className:"mb-2 p-2 rounded hover:bg-gray-50",children:[p.jsxs("label",{className:"flex items-center cursor-pointer",children:[p.jsx("input",{type:"checkbox",checked:he,onChange:()=>R(ae.id),disabled:!k,className:"mr-3 w-4 h-4"}),p.jsx("div",{className:"flex-1",children:p.jsxs("p",{className:"text-sm",children:[ae.name||"No name"," ",p.jsxs("span",{className:"text-xs text-gray-500",children:["(",ae.cardNumber||"-",")"]})]})})]}),he&&p.jsx("div",{className:"mt-1 ml-7 flex flex-wrap gap-2 text-xs sm:text-sm",children:gF.map(G=>p.jsx("button",{type:"button",onClick:()=>x(ae.id,G),disabled:!k,className:`px-2 py-1 rounded border ${F.includes(G)?"bg-green-600 text-white border-green-600":"bg-white text-gray-700 border-gray-300"} ${k?"cursor-pointer":"cursor-default"}`,children:G},G))})]},ae.id)}),i.length===0&&p.jsx("p",{className:"text-xs text-gray-500",children:"No users found."})]})]}),p.jsxs("div",{children:[p.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:[p.jsx(of,{className:"inline mr-2"}),"Assigned inventory items"]}),k&&p.jsxs("div",{className:"relative mb-2",children:[p.jsx(Uc,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 text-xs"}),p.jsx("input",{type:"text",placeholder:"Search by item name or number...",value:N,onChange:ae=>I(ae.target.value),className:"w-full pl-8 pr-3 py-2 border rounded text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),p.jsx("div",{className:"bg-white rounded border p-3 max-h-60 overflow-y-auto",children:oe.length===0?p.jsx("p",{className:"text-xs text-gray-500",children:"No items available."}):oe.map(ae=>p.jsxs("label",{className:"flex items-center mb-2 cursor-pointer hover:bg-gray-50 p-2 rounded",children:[p.jsx("input",{type:"checkbox",checked:c.includes(ae.id),onChange:()=>T(ae.id),disabled:!k,className:"mr-3 w-4 h-4"}),p.jsxs("div",{className:"flex-1",children:[p.jsxs("p",{className:"text-sm",children:[ae.itemName," ",p.jsxs("span",{className:"text-xs text-gray-500",children:["(",ae.itemNo,")"]})]}),ae.details&&p.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:ae.details})]})]},ae.id))}),p.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Selected: ",c.length," item(s)"]})]})]})]})]})},yF=()=>{const[t,e]=ue.useState([]),[n,r]=ue.useState(!0),[i,s]=ue.useState(!1),[o,a]=ue.useState(""),[l,u]=ue.useState(!1),[c,g]=ue.useState(null),[v,m]=ue.useState({type:"",text:""}),[S,A]=ue.useState({itemNo:"",itemName:"",details:""});ue.useEffect(()=>{L()},[]);const L=async()=>{r(!0);try{const I=(await Un($t(Qe,"inventory"))).docs.map(R=>({id:R.id,...R.data()}));I.sort((R,x)=>{const T=(R.itemName||"").toLowerCase(),P=(x.itemName||"").toLowerCase();return T.localeCompare(P)}),e(I)}catch(N){console.error("Error fetching inventory:",N),m({type:"error",text:"Failed to load inventory."})}finally{r(!1)}},b=N=>{A(I=>({...I,[N.target.name]:N.target.value}))},k=async N=>{N.preventDefault(),s(!0),m({type:"",text:""});try{if(c){const I=cn(Qe,"inventory",c.id);await ki(I,{...S,updatedAt:new Date().toISOString()}),m({type:"success",text:"Item updated successfully!"})}else await Qo($t(Qe,"inventory"),{...S,createdAt:new Date().toISOString()}),m({type:"success",text:"Item added successfully!"});A({itemNo:"",itemName:"",details:""}),u(!1),g(null),await L()}catch(I){console.error("Error saving item:",I),m({type:"error",text:c?"Failed to update item.":"Failed to add item."})}finally{s(!1)}},j=N=>{g(N),A({itemNo:N.itemNo,itemName:N.itemName,details:N.details||""}),u(!0),m({type:"",text:""}),window.scrollTo({top:0,behavior:"smooth"})},U=async(N,I)=>{if(window.confirm(`Are you sure you want to delete "${I}"?`))try{await ON(cn(Qe,"inventory",N)),m({type:"success",text:"Item deleted successfully!"}),await L()}catch(R){console.error("Error deleting item:",R),m({type:"error",text:"Failed to delete item."})}},q=()=>{g(null),A({itemNo:"",itemName:"",details:""}),u(!1),m({type:"",text:""})},ee=o.trim().toLowerCase(),D=t.filter(N=>{if(!ee)return!0;const I=(N.itemName||"").toLowerCase(),R=(N.itemNo||"").toLowerCase();return I.includes(ee)||R.includes(ee)});return p.jsxs("div",{className:"min-h-screen bg-gray-100",children:[p.jsx(hr,{userType:"admin"}),p.jsxs("main",{className:"container mx-auto px-4 py-6 sm:py-8",children:[p.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3 mb-4 sm:mb-6",children:[p.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-800",children:"Inventory"}),p.jsxs("button",{onClick:()=>{l&&!c?u(!1):(q(),u(!l))},className:"self-start sm:self-auto inline-flex items-center gap-2 px-4 py-2 rounded bg-green-600 text-white text-sm font-semibold hover:bg-green-700",children:[p.jsx(ZO,{}),l?"Cancel":"Add Item"]})]}),v.text&&p.jsx("div",{className:`mb-4 p-3 rounded text-sm ${v.type==="success"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:v.text}),l&&p.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 sm:p-6 mb-6",children:[p.jsxs("div",{className:"flex items-center justify-between mb-4",children:[p.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-gray-800",children:c?"Edit Item":"Add New Item"}),c&&p.jsx("button",{onClick:q,className:"text-gray-500 hover:text-gray-700",title:"Cancel editing",children:p.jsx(yl,{className:"text-xl"})})]}),p.jsxs("form",{onSubmit:k,className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Item No"}),p.jsx("input",{type:"text",name:"itemNo",value:S.itemNo,onChange:b,required:!0,className:"w-full px-3 py-2 border rounded text-sm focus:outline-none focus:ring-2 focus:ring-green-500"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Item Name"}),p.jsx("input",{type:"text",name:"itemName",value:S.itemName,onChange:b,required:!0,className:"w-full px-3 py-2 border rounded text-sm focus:outline-none focus:ring-2 focus:ring-green-500"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Details"}),p.jsx("textarea",{name:"details",value:S.details,onChange:b,rows:"3",className:"w-full px-3 py-2 border rounded text-sm focus:outline-none focus:ring-2 focus:ring-green-500"})]}),p.jsxs("div",{className:"flex gap-2",children:[p.jsx("button",{type:"submit",disabled:i,className:"flex-1 bg-green-600 text-white py-2 px-4 rounded font-semibold hover:bg-green-700 transition disabled:opacity-50 text-sm",children:i?c?"Updating...":"Adding...":c?"Update Item":"Add Item"}),c&&p.jsx("button",{type:"button",onClick:q,className:"px-4 py-2 border border-gray-300 rounded text-gray-700 font-semibold hover:bg-gray-100 transition text-sm",children:"Cancel"})]})]})]}),p.jsxs("div",{className:"relative mb-4",children:[p.jsx(Uc,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 text-sm"}),p.jsx("input",{type:"text",placeholder:"Search by item name or number...",value:o,onChange:N=>a(N.target.value),className:"w-full pl-9 pr-3 py-2 border rounded text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),n?p.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[p.jsx(ga,{className:"animate-spin text-xl text-blue-600"}),p.jsx("span",{children:"Loading inventory..."})]}):D.length===0?p.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 text-center",children:[p.jsx(of,{className:"mx-auto text-4xl text-gray-400 mb-2"}),p.jsx("p",{className:"text-gray-600 text-sm",children:o?"No items match your search.":"No items in inventory."})]}):p.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:D.map(N=>p.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 hover:shadow-lg transition",children:[p.jsxs("div",{className:"flex items-start justify-between mb-2",children:[p.jsx("h3",{className:"font-semibold text-gray-800 text-sm sm:text-base flex-1",children:N.itemName}),p.jsx("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded ml-2",children:N.itemNo})]}),N.details&&p.jsx("p",{className:"text-gray-600 text-xs sm:text-sm mb-3",children:N.details}),p.jsxs("div",{className:"flex gap-2 mt-3 pt-3 border-t",children:[p.jsxs("button",{onClick:()=>j(N),className:"flex-1 inline-flex items-center justify-center gap-1 px-3 py-1.5 bg-blue-600 text-white text-xs font-semibold rounded hover:bg-blue-700 transition",children:[p.jsx(WO,{}),"Edit"]}),p.jsxs("button",{onClick:()=>U(N.id,N.itemName),className:"flex-1 inline-flex items-center justify-center gap-1 px-3 py-1.5 bg-red-600 text-white text-xs font-semibold rounded hover:bg-red-700 transition",children:[p.jsx(vA,{}),"Delete"]})]})]},N.id))})]})]})},wF=()=>{const[t,e]=ue.useState([]),[n,r]=ue.useState({}),[i,s]=ue.useState([]),[o,a]=ue.useState(!0);ue.useEffect(()=>{l()},[]);const l=async()=>{a(!0);try{const m=await Un($t(Qe,"users")),S={};m.docs.forEach(U=>{S[U.id]=U.data()}),r(S);const b=(await Un($t(Qe,"works"))).docs.map(U=>({id:U.id,...U.data()})).filter(U=>{const q=U.rejections||{};return Object.keys(q).some(ee=>!q[ee].approved)});e(b);const j=(await Un($t(Qe,"rejectedWorks"))).docs.map(U=>({id:U.id,...U.data()}));j.sort((U,q)=>{const ee=U.approvedAt?new Date(U.approvedAt).getTime():0;return(q.approvedAt?new Date(q.approvedAt).getTime():0)-ee}),s(j)}catch(m){console.error("Error fetching data:",m)}finally{a(!1)}},u=async(m,S)=>{try{const A=t.find(D=>D.id===m),L=(A.rejections||{})[S];await Qo($t(Qe,"rejectedWorks"),{workId:m,userId:S,title:A.title,description:A.description,date:A.date,priority:A.priority,assignedUserDetails:A.assignedUserDetails,assignedItems:A.assignedItems,rejectionReason:L.reason,rejectedAt:L.timestamp,approvedAt:new Date().toISOString()});const b=cn(Qe,"works",m),k=(A.assignedUsers||[]).filter(D=>D!==S),j=(A.assignedUserDetails||[]).filter(D=>D.userId!==S),U={...A.rejections||{}};delete U[S];const q={...A.userAcceptance||{}};delete q[S];const ee={...A.roleCompletion||{}};Object.keys(ee).forEach(D=>{D.startsWith(`${S}_`)&&delete ee[D]}),await ki(b,{assignedUsers:k,assignedUserDetails:j,rejections:U,userAcceptance:q,roleCompletion:ee}),await l()}catch(A){console.error("Failed to approve:",A)}},c=async(m,S)=>{try{const A=t.find(j=>j.id===m),L=cn(Qe,"works",m),b={...A.rejections||{}},k={...A.userAcceptance||{}};delete b[S],k[S]="pending",await ki(L,{rejections:b,userAcceptance:k}),await l()}catch(A){console.error("Failed to cancel rejection:",A)}};if(o)return p.jsxs("div",{className:"min-h-screen bg-gray-100",children:[p.jsx(hr,{userType:"admin"}),p.jsxs("div",{className:"flex flex-col items-center justify-center h-64",children:[p.jsx(ga,{className:"animate-spin text-4xl text-blue-600 mb-4"}),p.jsx("p",{className:"text-gray-600",children:"Loading rejections..."})]})]});const g=i.reduce((m,S)=>{const A=S.workId||S.id;return m[A]||(m[A]={workId:A,title:S.title,items:[]}),m[A].items.push(S),m},{}),v=Object.values(g);return p.jsxs("div",{className:"min-h-screen bg-gray-100",children:[p.jsx(hr,{userType:"admin"}),p.jsxs("main",{className:"container mx-auto px-4 py-6 sm:py-8 max-w-4xl",children:[p.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-800 mb-6",children:"Pending Rejection Approvals"}),t.length===0?p.jsx("div",{className:"bg-white rounded-lg shadow-md p-6 text-center mb-8",children:p.jsx("p",{className:"text-gray-600",children:"No pending rejections."})}):p.jsx("div",{className:"space-y-4 mb-10",children:t.map(m=>{const S=m.rejections||{};return p.jsxs("div",{className:"bg-white rounded-lg shadow-md p-5",children:[p.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-3",children:m.title||"Task"}),Object.entries(S).filter(([,A])=>!A.approved).map(([A,L])=>{var b;return p.jsxs("div",{className:"mb-3 p-4 bg-red-50 rounded-lg border border-red-100",children:[p.jsxs("div",{className:"flex items-start justify-between mb-2",children:[p.jsxs("div",{children:[p.jsx("p",{className:"font-semibold text-gray-800 text-sm",children:((b=n[A])==null?void 0:b.name)||"Unknown User"}),p.jsx("p",{className:"text-xs text-gray-500",children:new Date(L.timestamp).toLocaleString()})]}),p.jsxs("div",{className:"flex gap-2",children:[p.jsxs("button",{onClick:()=>u(m.id,A),className:"bg-blue-600 text-white text-xs font-semibold px-3 py-1.5 rounded-lg hover:bg-blue-700 flex items-center gap-1",children:[p.jsx(na,{}),"Approve"]}),p.jsxs("button",{onClick:()=>c(m.id,A),className:"bg-gray-200 text-gray-800 text-xs font-semibold px-3 py-1.5 rounded-lg hover:bg-gray-300 flex items-center gap-1",children:[p.jsx(yl,{}),"Cancel"]})]})]}),p.jsxs("p",{className:"text-sm text-gray-700 bg-white p-3 rounded",children:[p.jsx("span",{className:"font-semibold",children:"Reason: "}),L.reason]})]},A)})]},m.id)})}),p.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-gray-800 mb-4",children:"Approved Rejections"}),v.length===0?p.jsx("div",{className:"bg-white rounded-lg shadow-md p-6 text-center",children:p.jsx("p",{className:"text-gray-600",children:"No approved rejections yet."})}):p.jsx("div",{className:"space-y-4",children:v.map(m=>p.jsxs("div",{className:"bg-white rounded-lg shadow-md p-5 border border-green-100",children:[p.jsxs("div",{className:"flex items-start justify-between mb-3",children:[p.jsx("h3",{className:"text-lg font-bold text-gray-800",children:m.title||"Task"}),p.jsxs("span",{className:"bg-green-100 text-green-800 text-xs font-semibold px-3 py-1.5 rounded-full flex items-center gap-1",children:[p.jsx(na,{}),"Approved"]})]}),p.jsx("div",{className:"space-y-3",children:m.items.map(S=>{var A;return p.jsxs("div",{className:"p-3 rounded border border-green-100 bg-green-50",children:[p.jsx("p",{className:"text-sm font-semibold text-gray-800 mb-1",children:((A=n[S.userId])==null?void 0:A.name)||"Unknown User"}),p.jsxs("p",{className:"text-xs text-gray-500 mb-1",children:["Rejected:"," ",S.rejectedAt?new Date(S.rejectedAt).toLocaleString():"-",p.jsx("br",{}),"Approved:"," ",S.approvedAt?new Date(S.approvedAt).toLocaleString():"-"]}),p.jsxs("p",{className:"text-sm text-gray-700",children:[p.jsx("span",{className:"font-semibold",children:"Reason: "}),S.rejectionReason||"-"]})]},S.id)})})]},m.workId))})]})]})},_F=()=>{const[t,e]=ue.useState(null),[n,r]=ue.useState([]),[i,s]=ue.useState(!0);return ue.useEffect(()=>{const o=Wd(Ms,a=>{e(a||null)});return()=>o()},[]),ue.useEffect(()=>{if(!t)return;(async()=>{s(!0);try{const a=rf($t(Qe,"rejectedWorks"),gg("userId","==",t.uid)),u=(await Un(a)).docs.map(c=>({id:c.id,...c.data()}));u.sort((c,g)=>{const v=c.approvedAt?new Date(c.approvedAt).getTime():0;return(g.approvedAt?new Date(g.approvedAt).getTime():0)-v}),r(u)}catch(a){console.error("Error fetching rejected works:",a)}finally{s(!1)}})()},[t]),i?p.jsxs("div",{className:"min-h-screen bg-gray-100",children:[p.jsx(hr,{userType:"user"}),p.jsxs("div",{className:"flex flex-col items-center justify-center h-64",children:[p.jsx(ga,{className:"animate-spin text-4xl text-blue-600 mb-4"}),p.jsx("p",{className:"text-gray-600",children:"Loading rejected works..."})]})]}):p.jsxs("div",{className:"min-h-screen bg-gray-100",children:[p.jsx(hr,{userType:"user"}),p.jsxs("main",{className:"container mx-auto px-4 py-6 sm:py-8 max-w-3xl",children:[p.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-800 mb-6",children:"My Rejected Works"}),n.length===0?p.jsx("div",{className:"bg-white rounded-lg shadow-md p-6 text-center",children:p.jsx("p",{className:"text-gray-600",children:"You have no rejected works."})}):p.jsx("div",{className:"space-y-4",children:n.map(o=>p.jsxs("div",{className:"bg-white rounded-lg shadow-md p-5",children:[p.jsxs("div",{className:"flex items-start justify-between mb-3",children:[p.jsxs("div",{className:"flex-1",children:[p.jsx("h3",{className:"text-lg font-bold text-gray-800",children:o.title||"Task"}),o.date&&p.jsxs("p",{className:"flex items-center gap-1 text-xs text-gray-500 mt-1",children:[p.jsx(Ki,{}),p.jsx("span",{children:new Date(o.date).toLocaleDateString()})]})]}),p.jsxs("span",{className:"bg-red-100 text-red-800 text-xs font-semibold px-3 py-1.5 rounded-full flex items-center gap-1",children:[p.jsx(yl,{}),"You rejected"]})]}),p.jsxs("div",{className:"bg-red-50 rounded-lg p-4",children:[o.description&&p.jsx("p",{className:"text-sm text-gray-700 mb-3",children:o.description}),p.jsx("p",{className:"text-xs font-semibold text-red-800 mb-1",children:"Your reason:"}),p.jsx("p",{className:"text-sm text-gray-700",children:o.rejectionReason||"-"}),p.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Rejected: ",o.rejectedAt?new Date(o.rejectedAt).toLocaleString():"-",p.jsx("br",{}),"Approved by admin: ",o.approvedAt?new Date(o.approvedAt).toLocaleString():"-"]})]})]},o.id))})]})]})},xF=()=>{const[t,e]=ue.useState([]),[n,r]=ue.useState(!0),[i,s]=ue.useState(!1),o=async()=>{r(!0);try{const v=rf($t(Qe,"notifications"),LN("createdAt","desc")),S=(await Un(v)).docs.map(A=>({id:A.id,...A.data()}));e(S)}catch(v){console.error("Failed to load notifications",v)}finally{r(!1)}};ue.useEffect(()=>{o()},[]);const a=v=>{const m=v.userName||"A user";return v.type==="accept"?`${m} accepted a work`:v.type==="reject"?`${m} rejected a work`:v.type==="done"?`${m} marked their work as done`:v.type==="undo-done"?`${m} undid a done task`:`${m} did something`},l=v=>v?(v.toDate?v.toDate():new Date(v)).toLocaleString():"",u=async v=>{try{s(!0),await ki(cn(Qe,"notifications",v),{read:!0}),e(m=>m.map(S=>S.id===v?{...S,read:!0}:S))}catch(m){console.error("Failed to mark read",m)}finally{s(!1)}},c=async()=>{const v=t.filter(m=>!m.read);if(v.length!==0)try{s(!0);const m=PD(Qe);v.forEach(S=>{m.update(cn(Qe,"notifications",S.id),{read:!0})}),await m.commit(),e(S=>S.map(A=>({...A,read:!0})))}catch(m){console.error("Failed to mark all read",m)}finally{s(!1)}},g=t.filter(v=>!v.read).length;return p.jsxs("div",{className:"min-h-screen bg-gray-100",children:[p.jsx(hr,{userType:"admin"}),p.jsxs("main",{className:"container mx-auto px-4 py-6 sm:py-8 max-w-4xl",children:[p.jsxs("div",{className:"flex items-center justify-between mb-6",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(mA,{className:"text-2xl text-blue-600"}),p.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-800",children:"Notification History"})]}),p.jsxs("button",{onClick:c,disabled:i||g===0,className:`px-4 py-2 rounded text-sm font-semibold ${g===0?"bg-gray-300 text-gray-600 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"}`,children:["Mark all read (",g,")"]})]}),n?p.jsx("p",{className:"text-gray-600",children:"Loading notifications..."}):t.length===0?p.jsx("p",{className:"text-gray-600",children:"No notifications yet."}):p.jsx("ul",{className:"space-y-3",children:t.map(v=>p.jsxs("li",{className:"bg-white rounded-lg shadow border border-gray-100 p-4 flex items-start gap-3 justify-between",children:[p.jsxs("div",{className:"flex items-start gap-3",children:[p.jsx("div",{className:"mt-1",children:v.read?p.jsx(A2,{className:"text-green-500"}):p.jsx(HO,{className:"text-blue-500 text-xs"})}),p.jsxs("div",{children:[p.jsx("p",{className:"font-semibold text-gray-800",children:a(v)}),p.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Work ID:"," ",p.jsx("span",{className:"font-mono break-all",children:v.workId})]}),p.jsxs("p",{className:"text-xs text-gray-500",children:["At: ",l(v.createdAt)]})]})]}),!v.read&&p.jsx("button",{onClick:()=>u(v.id),disabled:i,className:"text-xs px-3 py-1 rounded border border-blue-500 text-blue-600 hover:bg-blue-50 h-fit",children:"Mark read"})]},v.id))})]})]})},bF="modulepreload",SF=function(t){return"https://tmv.fotmv.online/"+t},Ix={},C0=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(n.map(l=>{if(l=SF(l),l in Ix)return;Ix[l]=!0;const u=l.endsWith(".css"),c=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${c}`))return;const g=document.createElement("link");if(g.rel=u?"stylesheet":bF,u||(g.as="script"),g.crossOrigin="",g.href=l,a&&g.setAttribute("nonce",a),document.head.appendChild(g),u)return new Promise((v,m)=>{g.addEventListener("load",v),g.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})};function on(t){"@babel/helpers - typeof";return on=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},on(t)}var qs=Uint8Array,Yi=Uint16Array,zy=Int32Array,qy=new qs([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Hy=new qs([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Tx=new qs([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),xA=function(t,e){for(var n=new Yi(31),r=0;r<31;++r)n[r]=e+=1<<t[r-1];for(var i=new zy(n[30]),r=1;r<30;++r)for(var s=n[r];s<n[r+1];++s)i[s]=s-n[r]<<5|r;return{b:n,r:i}},bA=xA(qy,2),NF=bA.b,I2=bA.r;NF[28]=258,I2[258]=28;var AF=xA(Hy,0),kx=AF.r,T2=new Yi(32768);for(var En=0;En<32768;++En){var Va=(En&43690)>>1|(En&21845)<<1;Va=(Va&52428)>>2|(Va&13107)<<2,Va=(Va&61680)>>4|(Va&3855)<<4,T2[En]=((Va&65280)>>8|(Va&255)<<8)>>1}var ed=function(t,e,n){for(var r=t.length,i=0,s=new Yi(e);i<r;++i)t[i]&&++s[t[i]-1];var o=new Yi(e);for(i=1;i<e;++i)o[i]=o[i-1]+s[i-1]<<1;var a;if(n){a=new Yi(1<<e);var l=15-e;for(i=0;i<r;++i)if(t[i])for(var u=i<<4|t[i],c=e-t[i],g=o[t[i]-1]++<<c,v=g|(1<<c)-1;g<=v;++g)a[T2[g]>>l]=u}else for(a=new Yi(r),i=0;i<r;++i)t[i]&&(a[i]=T2[o[t[i]-1]++]>>15-t[i]);return a},mu=new qs(288);for(var En=0;En<144;++En)mu[En]=8;for(var En=144;En<256;++En)mu[En]=9;for(var En=256;En<280;++En)mu[En]=7;for(var En=280;En<288;++En)mu[En]=8;var Sm=new qs(32);for(var En=0;En<32;++En)Sm[En]=5;var EF=ed(mu,9,0),IF=ed(Sm,5,0),SA=function(t){return(t+7)/8|0},TF=function(t,e,n){return(n==null||n>t.length)&&(n=t.length),new qs(t.subarray(e,n))},Uo=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8},Th=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8,t[r+2]|=n>>16},L0=function(t,e){for(var n=[],r=0;r<t.length;++r)t[r]&&n.push({s:r,f:t[r]});var i=n.length,s=n.slice();if(!i)return{t:AA,l:0};if(i==1){var o=new qs(n[0].s+1);return o[n[0].s]=1,{t:o,l:1}}n.sort(function(q,ee){return q.f-ee.f}),n.push({s:-1,f:25001});var a=n[0],l=n[1],u=0,c=1,g=2;for(n[0]={s:-1,f:a.f+l.f,l:a,r:l};c!=i-1;)a=n[n[u].f<n[g].f?u++:g++],l=n[u!=c&&n[u].f<n[g].f?u++:g++],n[c++]={s:-1,f:a.f+l.f,l:a,r:l};for(var v=s[0].s,r=1;r<i;++r)s[r].s>v&&(v=s[r].s);var m=new Yi(v+1),S=k2(n[c-1],m,0);if(S>e){var r=0,A=0,L=S-e,b=1<<L;for(s.sort(function(ee,D){return m[D.s]-m[ee.s]||ee.f-D.f});r<i;++r){var k=s[r].s;if(m[k]>e)A+=b-(1<<S-m[k]),m[k]=e;else break}for(A>>=L;A>0;){var j=s[r].s;m[j]<e?A-=1<<e-m[j]++-1:++r}for(;r>=0&&A;--r){var U=s[r].s;m[U]==e&&(--m[U],++A)}S=e}return{t:new qs(m),l:S}},k2=function(t,e,n){return t.s==-1?Math.max(k2(t.l,e,n+1),k2(t.r,e,n+1)):e[t.s]=n},Px=function(t){for(var e=t.length;e&&!t[--e];);for(var n=new Yi(++e),r=0,i=t[0],s=1,o=function(l){n[r++]=l},a=1;a<=e;++a)if(t[a]==i&&a!=e)++s;else{if(!i&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(i),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(i);s=1,i=t[a]}return{c:n.subarray(0,r),n:e}},kh=function(t,e){for(var n=0,r=0;r<e.length;++r)n+=t[r]*e[r];return n},NA=function(t,e,n){var r=n.length,i=SA(e+2);t[i]=r&255,t[i+1]=r>>8,t[i+2]=t[i]^255,t[i+3]=t[i+1]^255;for(var s=0;s<r;++s)t[i+s+4]=n[s];return(i+4+r)*8},Cx=function(t,e,n,r,i,s,o,a,l,u,c){Uo(e,c++,n),++i[256];for(var g=L0(i,15),v=g.t,m=g.l,S=L0(s,15),A=S.t,L=S.l,b=Px(v),k=b.c,j=b.n,U=Px(A),q=U.c,ee=U.n,D=new Yi(19),N=0;N<k.length;++N)++D[k[N]&31];for(var N=0;N<q.length;++N)++D[q[N]&31];for(var I=L0(D,7),R=I.t,x=I.l,T=19;T>4&&!R[Tx[T-1]];--T);var P=u+5<<3,te=kh(i,mu)+kh(s,Sm)+o,de=kh(i,v)+kh(s,A)+o+14+3*T+kh(D,R)+2*D[16]+3*D[17]+7*D[18];if(l>=0&&P<=te&&P<=de)return NA(e,c,t.subarray(l,l+u));var me,ge,Q,oe;if(Uo(e,c,1+(de<te)),c+=2,de<te){me=ed(v,m,0),ge=v,Q=ed(A,L,0),oe=A;var ae=ed(R,x,0);Uo(e,c,j-257),Uo(e,c+5,ee-1),Uo(e,c+10,T-4),c+=14;for(var N=0;N<T;++N)Uo(e,c+3*N,R[Tx[N]]);c+=3*T;for(var he=[k,q],F=0;F<2;++F)for(var G=he[F],N=0;N<G.length;++N){var B=G[N]&31;Uo(e,c,ae[B]),c+=R[B],B>15&&(Uo(e,c,G[N]>>5&127),c+=G[N]>>12)}}else me=EF,ge=mu,Q=IF,oe=Sm;for(var N=0;N<a;++N){var Z=r[N];if(Z>255){var B=Z>>18&31;Th(e,c,me[B+257]),c+=ge[B+257],B>7&&(Uo(e,c,Z>>23&31),c+=qy[B]);var ne=Z&31;Th(e,c,Q[ne]),c+=oe[ne],ne>3&&(Th(e,c,Z>>5&8191),c+=Hy[ne])}else Th(e,c,me[Z]),c+=ge[Z]}return Th(e,c,me[256]),c+ge[256]},kF=new zy([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),AA=new qs(0),PF=function(t,e,n,r,i,s){var o=s.z||t.length,a=new qs(r+o+5*(1+Math.ceil(o/7e3))+i),l=a.subarray(r,a.length-i),u=s.l,c=(s.r||0)&7;if(e){c&&(l[0]=s.r>>3);for(var g=kF[e-1],v=g>>13,m=g&8191,S=(1<<n)-1,A=s.p||new Yi(32768),L=s.h||new Yi(S+1),b=Math.ceil(n/3),k=2*b,j=function($e){return(t[$e]^t[$e+1]<<b^t[$e+2]<<k)&S},U=new zy(25e3),q=new Yi(288),ee=new Yi(32),D=0,N=0,I=s.i||0,R=0,x=s.w||0,T=0;I+2<o;++I){var P=j(I),te=I&32767,de=L[P];if(A[te]=de,L[P]=te,x<=I){var me=o-I;if((D>7e3||R>24576)&&(me>423||!u)){c=Cx(t,l,0,U,q,ee,N,R,T,I-T,c),R=D=N=0,T=I;for(var ge=0;ge<286;++ge)q[ge]=0;for(var ge=0;ge<30;++ge)ee[ge]=0}var Q=2,oe=0,ae=m,he=te-de&32767;if(me>2&&P==j(I-he))for(var F=Math.min(v,me)-1,G=Math.min(32767,I),B=Math.min(258,me);he<=G&&--ae&&te!=de;){if(t[I+Q]==t[I+Q-he]){for(var Z=0;Z<B&&t[I+Z]==t[I+Z-he];++Z);if(Z>Q){if(Q=Z,oe=he,Z>F)break;for(var ne=Math.min(he,Z-2),ie=0,ge=0;ge<ne;++ge){var ve=I-he+ge&32767,_e=A[ve],xe=ve-_e&32767;xe>ie&&(ie=xe,de=ve)}}}te=de,de=A[te],he+=te-de&32767}if(oe){U[R++]=268435456|I2[Q]<<18|kx[oe];var ke=I2[Q]&31,Fe=kx[oe]&31;N+=qy[ke]+Hy[Fe],++q[257+ke],++ee[Fe],x=I+Q,++D}else U[R++]=t[I],++q[t[I]]}}for(I=Math.max(I,x);I<o;++I)U[R++]=t[I],++q[t[I]];c=Cx(t,l,u,U,q,ee,N,R,T,I-T,c),u||(s.r=c&7|l[c/8|0]<<3,c-=7,s.h=L,s.p=A,s.i=I,s.w=x)}else{for(var I=s.w||0;I<o+u;I+=65535){var De=I+65535;De>=o&&(l[c/8|0]=u,De=o),c=NA(l,c+1,t.subarray(I,De))}s.i=o}return TF(a,0,r+SA(c)+i)},EA=function(){var t=1,e=0;return{p:function(n){for(var r=t,i=e,s=n.length|0,o=0;o!=s;){for(var a=Math.min(o+2655,s);o<a;++o)i+=r+=n[o];r=(r&65535)+15*(r>>16),i=(i&65535)+15*(i>>16)}t=r,e=i},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},CF=function(t,e,n,r,i){if(!i&&(i={l:1},e.dictionary)){var s=e.dictionary.subarray(-32768),o=new qs(s.length+t.length);o.set(s),o.set(t,s.length),t=o,i.w=s.length}return PF(t,e.level==null?6:e.level,e.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,n,r,i)},IA=function(t,e,n){for(;n;++e)t[e]=n,n>>>=8},LF=function(t,e){var n=e.level,r=n==0?0:n<6?1:n==9?3:2;if(t[0]=120,t[1]=r<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var i=EA();i.p(e.dictionary),IA(t,2,i.d())}};function P2(t,e){e||(e={});var n=EA();n.p(t);var r=CF(t,e,e.dictionary?6:2,4);return LF(r,e),IA(r,r.length-4,n.d()),r}var RF=typeof TextDecoder<"u"&&new TextDecoder,jF=0;try{RF.decode(AA,{stream:!0}),jF=1}catch{}function DF(t){if(Array.isArray(t))return t}function OF(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,o,a=[],l=!0,u=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(l=(r=s.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return a}}function Lx(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function FF(t,e){if(t){if(typeof t=="string")return Lx(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Lx(t,e):void 0}}function MF(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Rx(t,e){return DF(t)||OF(t,e)||FF(t,e)||MF()}function jx(t,e="utf8"){return new TextDecoder(e).decode(t)}const UF=new TextEncoder;function VF(t){return UF.encode(t)}const BF=1024*8,zF=(()=>{const t=new Uint8Array(4),e=new Uint32Array(t.buffer);return!((e[0]=1)&t[0])})(),R0={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class Wy{constructor(e=BF,n={}){sn(this,"buffer");sn(this,"byteLength");sn(this,"byteOffset");sn(this,"length");sn(this,"offset");sn(this,"lastWrittenByte");sn(this,"littleEndian");sn(this,"_data");sn(this,"_mark");sn(this,"_marks");let r=!1;typeof e=="number"?e=new ArrayBuffer(e):(r=!0,this.lastWrittenByte=e.byteLength);const i=n.offset?n.offset>>>0:0,s=e.byteLength-i;let o=i;(ArrayBuffer.isView(e)||e instanceof Wy)&&(e.byteLength!==e.buffer.byteLength&&(o=e.byteOffset+i),e=e.buffer),r?this.lastWrittenByte=s:this.lastWrittenByte=0,this.buffer=e,this.length=s,this.byteLength=s,this.byteOffset=o,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,o,s),this._mark=0,this._marks=[]}available(e=1){return this.offset+e<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(e=1){return this.offset+=e,this}back(e=1){return this.offset-=e,this}seek(e){return this.offset=e,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const e=this._marks.pop();if(e===void 0)throw new Error("Mark stack empty");return this.seek(e),this}rewind(){return this.offset=0,this}ensureAvailable(e=1){if(!this.available(e)){const r=(this.offset+e)*2,i=new Uint8Array(r);i.set(new Uint8Array(this.buffer)),this.buffer=i.buffer,this.length=r,this.byteLength=r,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(e=1){return this.readArray(e,"uint8")}readArray(e,n){const r=R0[n].BYTES_PER_ELEMENT*e,i=this.byteOffset+this.offset,s=this.buffer.slice(i,i+r);if(this.littleEndian===zF&&n!=="uint8"&&n!=="int8"){const a=new Uint8Array(this.buffer.slice(i,i+r));a.reverse();const l=new R0[n](a.buffer);return this.offset+=r,l.reverse(),l}const o=new R0[n](s);return this.offset+=r,o}readInt16(){const e=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}readUint16(){const e=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,e}readInt32(){const e=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}readUint32(){const e=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat32(){const e=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat64(){const e=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}readBigInt64(){const e=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,e}readBigUint64(){const e=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,e}readChar(){return String.fromCharCode(this.readInt8())}readChars(e=1){let n="";for(let r=0;r<e;r++)n+=this.readChar();return n}readUtf8(e=1){return jx(this.readBytes(e))}decodeText(e=1,n="utf8"){return jx(this.readBytes(e),n)}writeBoolean(e){return this.writeUint8(e?255:0),this}writeInt8(e){return this.ensureAvailable(1),this._data.setInt8(this.offset++,e),this._updateLastWrittenByte(),this}writeUint8(e){return this.ensureAvailable(1),this._data.setUint8(this.offset++,e),this._updateLastWrittenByte(),this}writeByte(e){return this.writeUint8(e)}writeBytes(e){this.ensureAvailable(e.length);for(let n=0;n<e.length;n++)this._data.setUint8(this.offset++,e[n]);return this._updateLastWrittenByte(),this}writeInt16(e){return this.ensureAvailable(2),this._data.setInt16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(e){return this.ensureAvailable(2),this._data.setUint16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(e){return this.ensureAvailable(4),this._data.setInt32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(e){return this.ensureAvailable(4),this._data.setUint32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(e){return this.ensureAvailable(4),this._data.setFloat32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(e){return this.ensureAvailable(8),this._data.setFloat64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(e){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(e){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(e){return this.writeUint8(e.charCodeAt(0))}writeChars(e){for(let n=0;n<e.length;n++)this.writeUint8(e.charCodeAt(n));return this}writeUtf8(e){return this.writeBytes(VF(e))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function Jc(t){let e=t.length;for(;--e>=0;)t[e]=0}const qF=3,HF=258,TA=29,WF=256,$F=WF+1+TA,kA=30,GF=512,KF=new Array(($F+2)*2);Jc(KF);const YF=new Array(kA*2);Jc(YF);const QF=new Array(GF);Jc(QF);const JF=new Array(HF-qF+1);Jc(JF);const XF=new Array(TA);Jc(XF);const ZF=new Array(kA);Jc(ZF);const eM=(t,e,n,r)=>{let i=t&65535|0,s=t>>>16&65535|0,o=0;for(;n!==0;){o=n>2e3?2e3:n,n-=o;do i=i+e[r++]|0,s=s+i|0;while(--o);i%=65521,s%=65521}return i|s<<16|0};var C2=eM;const tM=()=>{let t,e=[];for(var n=0;n<256;n++){t=n;for(var r=0;r<8;r++)t=t&1?3988292384^t>>>1:t>>>1;e[n]=t}return e},nM=new Uint32Array(tM()),rM=(t,e,n,r)=>{const i=nM,s=r+n;t^=-1;for(let o=r;o<s;o++)t=t>>>8^i[(t^e[o])&255];return t^-1};var ao=rM,L2={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},PA={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const iM=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var sM=function(t){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const n=e.shift();if(n){if(typeof n!="object")throw new TypeError(n+"must be non-object");for(const r in n)iM(n,r)&&(t[r]=n[r])}}return t},oM=t=>{let e=0;for(let r=0,i=t.length;r<i;r++)e+=t[r].length;const n=new Uint8Array(e);for(let r=0,i=0,s=t.length;r<s;r++){let o=t[r];n.set(o,i),i+=o.length}return n},CA={assign:sM,flattenChunks:oM};let LA=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{LA=!1}const jd=new Uint8Array(256);for(let t=0;t<256;t++)jd[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;jd[254]=jd[254]=1;var aM=t=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(t);let e,n,r,i,s,o=t.length,a=0;for(i=0;i<o;i++)n=t.charCodeAt(i),(n&64512)===55296&&i+1<o&&(r=t.charCodeAt(i+1),(r&64512)===56320&&(n=65536+(n-55296<<10)+(r-56320),i++)),a+=n<128?1:n<2048?2:n<65536?3:4;for(e=new Uint8Array(a),s=0,i=0;s<a;i++)n=t.charCodeAt(i),(n&64512)===55296&&i+1<o&&(r=t.charCodeAt(i+1),(r&64512)===56320&&(n=65536+(n-55296<<10)+(r-56320),i++)),n<128?e[s++]=n:n<2048?(e[s++]=192|n>>>6,e[s++]=128|n&63):n<65536?(e[s++]=224|n>>>12,e[s++]=128|n>>>6&63,e[s++]=128|n&63):(e[s++]=240|n>>>18,e[s++]=128|n>>>12&63,e[s++]=128|n>>>6&63,e[s++]=128|n&63);return e};const lM=(t,e)=>{if(e<65534&&t.subarray&&LA)return String.fromCharCode.apply(null,t.length===e?t:t.subarray(0,e));let n="";for(let r=0;r<e;r++)n+=String.fromCharCode(t[r]);return n};var uM=(t,e)=>{const n=e||t.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(t.subarray(0,e));let r,i;const s=new Array(n*2);for(i=0,r=0;r<n;){let o=t[r++];if(o<128){s[i++]=o;continue}let a=jd[o];if(a>4){s[i++]=65533,r+=a-1;continue}for(o&=a===2?31:a===3?15:7;a>1&&r<n;)o=o<<6|t[r++]&63,a--;if(a>1){s[i++]=65533;continue}o<65536?s[i++]=o:(o-=65536,s[i++]=55296|o>>10&1023,s[i++]=56320|o&1023)}return lM(s,i)},cM=(t,e)=>{e=e||t.length,e>t.length&&(e=t.length);let n=e-1;for(;n>=0&&(t[n]&192)===128;)n--;return n<0||n===0?e:n+jd[t[n]]>e?n:e},R2={string2buf:aM,buf2string:uM,utf8border:cM};function hM(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var dM=hM;const Qf=16209,fM=16191;var pM=function(e,n){let r,i,s,o,a,l,u,c,g,v,m,S,A,L,b,k,j,U,q,ee,D,N,I,R;const x=e.state;r=e.next_in,I=e.input,i=r+(e.avail_in-5),s=e.next_out,R=e.output,o=s-(n-e.avail_out),a=s+(e.avail_out-257),l=x.dmax,u=x.wsize,c=x.whave,g=x.wnext,v=x.window,m=x.hold,S=x.bits,A=x.lencode,L=x.distcode,b=(1<<x.lenbits)-1,k=(1<<x.distbits)-1;e:do{S<15&&(m+=I[r++]<<S,S+=8,m+=I[r++]<<S,S+=8),j=A[m&b];t:for(;;){if(U=j>>>24,m>>>=U,S-=U,U=j>>>16&255,U===0)R[s++]=j&65535;else if(U&16){q=j&65535,U&=15,U&&(S<U&&(m+=I[r++]<<S,S+=8),q+=m&(1<<U)-1,m>>>=U,S-=U),S<15&&(m+=I[r++]<<S,S+=8,m+=I[r++]<<S,S+=8),j=L[m&k];n:for(;;){if(U=j>>>24,m>>>=U,S-=U,U=j>>>16&255,U&16){if(ee=j&65535,U&=15,S<U&&(m+=I[r++]<<S,S+=8,S<U&&(m+=I[r++]<<S,S+=8)),ee+=m&(1<<U)-1,ee>l){e.msg="invalid distance too far back",x.mode=Qf;break e}if(m>>>=U,S-=U,U=s-o,ee>U){if(U=ee-U,U>c&&x.sane){e.msg="invalid distance too far back",x.mode=Qf;break e}if(D=0,N=v,g===0){if(D+=u-U,U<q){q-=U;do R[s++]=v[D++];while(--U);D=s-ee,N=R}}else if(g<U){if(D+=u+g-U,U-=g,U<q){q-=U;do R[s++]=v[D++];while(--U);if(D=0,g<q){U=g,q-=U;do R[s++]=v[D++];while(--U);D=s-ee,N=R}}}else if(D+=g-U,U<q){q-=U;do R[s++]=v[D++];while(--U);D=s-ee,N=R}for(;q>2;)R[s++]=N[D++],R[s++]=N[D++],R[s++]=N[D++],q-=3;q&&(R[s++]=N[D++],q>1&&(R[s++]=N[D++]))}else{D=s-ee;do R[s++]=R[D++],R[s++]=R[D++],R[s++]=R[D++],q-=3;while(q>2);q&&(R[s++]=R[D++],q>1&&(R[s++]=R[D++]))}}else if(U&64){e.msg="invalid distance code",x.mode=Qf;break e}else{j=L[(j&65535)+(m&(1<<U)-1)];continue n}break}}else if(U&64)if(U&32){x.mode=fM;break e}else{e.msg="invalid literal/length code",x.mode=Qf;break e}else{j=A[(j&65535)+(m&(1<<U)-1)];continue t}break}}while(r<i&&s<a);q=S>>3,r-=q,S-=q<<3,m&=(1<<S)-1,e.next_in=r,e.next_out=s,e.avail_in=r<i?5+(i-r):5-(r-i),e.avail_out=s<a?257+(a-s):257-(s-a),x.hold=m,x.bits=S};const Vu=15,Dx=852,Ox=592,Fx=0,j0=1,Mx=2,mM=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),gM=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),vM=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),yM=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),wM=(t,e,n,r,i,s,o,a)=>{const l=a.bits;let u=0,c=0,g=0,v=0,m=0,S=0,A=0,L=0,b=0,k=0,j,U,q,ee,D,N=null,I;const R=new Uint16Array(Vu+1),x=new Uint16Array(Vu+1);let T=null,P,te,de;for(u=0;u<=Vu;u++)R[u]=0;for(c=0;c<r;c++)R[e[n+c]]++;for(m=l,v=Vu;v>=1&&R[v]===0;v--);if(m>v&&(m=v),v===0)return i[s++]=1<<24|64<<16|0,i[s++]=1<<24|64<<16|0,a.bits=1,0;for(g=1;g<v&&R[g]===0;g++);for(m<g&&(m=g),L=1,u=1;u<=Vu;u++)if(L<<=1,L-=R[u],L<0)return-1;if(L>0&&(t===Fx||v!==1))return-1;for(x[1]=0,u=1;u<Vu;u++)x[u+1]=x[u]+R[u];for(c=0;c<r;c++)e[n+c]!==0&&(o[x[e[n+c]]++]=c);if(t===Fx?(N=T=o,I=20):t===j0?(N=mM,T=gM,I=257):(N=vM,T=yM,I=0),k=0,c=0,u=g,D=s,S=m,A=0,q=-1,b=1<<m,ee=b-1,t===j0&&b>Dx||t===Mx&&b>Ox)return 1;for(;;){P=u-A,o[c]+1<I?(te=0,de=o[c]):o[c]>=I?(te=T[o[c]-I],de=N[o[c]-I]):(te=96,de=0),j=1<<u-A,U=1<<S,g=U;do U-=j,i[D+(k>>A)+U]=P<<24|te<<16|de|0;while(U!==0);for(j=1<<u-1;k&j;)j>>=1;if(j!==0?(k&=j-1,k+=j):k=0,c++,--R[u]===0){if(u===v)break;u=e[n+o[c]]}if(u>m&&(k&ee)!==q){for(A===0&&(A=m),D+=g,S=u-A,L=1<<S;S+A<v&&(L-=R[S+A],!(L<=0));)S++,L<<=1;if(b+=1<<S,t===j0&&b>Dx||t===Mx&&b>Ox)return 1;q=k&ee,i[q]=m<<24|S<<16|D-s|0}}return k!==0&&(i[D+k]=u-A<<24|64<<16|0),a.bits=m,0};var td=wM;const _M=0,RA=1,jA=2,{Z_FINISH:Ux,Z_BLOCK:xM,Z_TREES:Jf,Z_OK:gu,Z_STREAM_END:bM,Z_NEED_DICT:SM,Z_STREAM_ERROR:xs,Z_DATA_ERROR:DA,Z_MEM_ERROR:OA,Z_BUF_ERROR:NM,Z_DEFLATED:Vx}=PA,_g=16180,Bx=16181,zx=16182,qx=16183,Hx=16184,Wx=16185,$x=16186,Gx=16187,Kx=16188,Yx=16189,Nm=16190,Vo=16191,D0=16192,Qx=16193,O0=16194,Jx=16195,Xx=16196,Zx=16197,eb=16198,Xf=16199,Zf=16200,tb=16201,nb=16202,rb=16203,ib=16204,sb=16205,F0=16206,ob=16207,ab=16208,Pn=16209,FA=16210,MA=16211,AM=852,EM=592,IM=15,TM=IM,lb=t=>(t>>>24&255)+(t>>>8&65280)+((t&65280)<<8)+((t&255)<<24);function kM(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Eu=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||e.mode<_g||e.mode>MA?1:0},UA=t=>{if(Eu(t))return xs;const e=t.state;return t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=e.wrap&1),e.mode=_g,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(AM),e.distcode=e.distdyn=new Int32Array(EM),e.sane=1,e.back=-1,gu},VA=t=>{if(Eu(t))return xs;const e=t.state;return e.wsize=0,e.whave=0,e.wnext=0,UA(t)},BA=(t,e)=>{let n;if(Eu(t))return xs;const r=t.state;return e<0?(n=0,e=-e):(n=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?xs:(r.window!==null&&r.wbits!==e&&(r.window=null),r.wrap=n,r.wbits=e,VA(t))},zA=(t,e)=>{if(!t)return xs;const n=new kM;t.state=n,n.strm=t,n.window=null,n.mode=_g;const r=BA(t,e);return r!==gu&&(t.state=null),r},PM=t=>zA(t,TM);let ub=!0,M0,U0;const CM=t=>{if(ub){M0=new Int32Array(512),U0=new Int32Array(32);let e=0;for(;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(td(RA,t.lens,0,288,M0,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;td(jA,t.lens,0,32,U0,0,t.work,{bits:5}),ub=!1}t.lencode=M0,t.lenbits=9,t.distcode=U0,t.distbits=5},qA=(t,e,n,r)=>{let i;const s=t.state;return s.window===null&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new Uint8Array(s.wsize)),r>=s.wsize?(s.window.set(e.subarray(n-s.wsize,n),0),s.wnext=0,s.whave=s.wsize):(i=s.wsize-s.wnext,i>r&&(i=r),s.window.set(e.subarray(n-r,n-r+i),s.wnext),r-=i,r?(s.window.set(e.subarray(n-r,n),0),s.wnext=r,s.whave=s.wsize):(s.wnext+=i,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=i))),0},LM=(t,e)=>{let n,r,i,s,o,a,l,u,c,g,v,m,S,A,L=0,b,k,j,U,q,ee,D,N;const I=new Uint8Array(4);let R,x;const T=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Eu(t)||!t.output||!t.input&&t.avail_in!==0)return xs;n=t.state,n.mode===Vo&&(n.mode=D0),o=t.next_out,i=t.output,l=t.avail_out,s=t.next_in,r=t.input,a=t.avail_in,u=n.hold,c=n.bits,g=a,v=l,N=gu;e:for(;;)switch(n.mode){case _g:if(n.wrap===0){n.mode=D0;break}for(;c<16;){if(a===0)break e;a--,u+=r[s++]<<c,c+=8}if(n.wrap&2&&u===35615){n.wbits===0&&(n.wbits=15),n.check=0,I[0]=u&255,I[1]=u>>>8&255,n.check=ao(n.check,I,2,0),u=0,c=0,n.mode=Bx;break}if(n.head&&(n.head.done=!1),!(n.wrap&1)||(((u&255)<<8)+(u>>8))%31){t.msg="incorrect header check",n.mode=Pn;break}if((u&15)!==Vx){t.msg="unknown compression method",n.mode=Pn;break}if(u>>>=4,c-=4,D=(u&15)+8,n.wbits===0&&(n.wbits=D),D>15||D>n.wbits){t.msg="invalid window size",n.mode=Pn;break}n.dmax=1<<n.wbits,n.flags=0,t.adler=n.check=1,n.mode=u&512?Yx:Vo,u=0,c=0;break;case Bx:for(;c<16;){if(a===0)break e;a--,u+=r[s++]<<c,c+=8}if(n.flags=u,(n.flags&255)!==Vx){t.msg="unknown compression method",n.mode=Pn;break}if(n.flags&57344){t.msg="unknown header flags set",n.mode=Pn;break}n.head&&(n.head.text=u>>8&1),n.flags&512&&n.wrap&4&&(I[0]=u&255,I[1]=u>>>8&255,n.check=ao(n.check,I,2,0)),u=0,c=0,n.mode=zx;case zx:for(;c<32;){if(a===0)break e;a--,u+=r[s++]<<c,c+=8}n.head&&(n.head.time=u),n.flags&512&&n.wrap&4&&(I[0]=u&255,I[1]=u>>>8&255,I[2]=u>>>16&255,I[3]=u>>>24&255,n.check=ao(n.check,I,4,0)),u=0,c=0,n.mode=qx;case qx:for(;c<16;){if(a===0)break e;a--,u+=r[s++]<<c,c+=8}n.head&&(n.head.xflags=u&255,n.head.os=u>>8),n.flags&512&&n.wrap&4&&(I[0]=u&255,I[1]=u>>>8&255,n.check=ao(n.check,I,2,0)),u=0,c=0,n.mode=Hx;case Hx:if(n.flags&1024){for(;c<16;){if(a===0)break e;a--,u+=r[s++]<<c,c+=8}n.length=u,n.head&&(n.head.extra_len=u),n.flags&512&&n.wrap&4&&(I[0]=u&255,I[1]=u>>>8&255,n.check=ao(n.check,I,2,0)),u=0,c=0}else n.head&&(n.head.extra=null);n.mode=Wx;case Wx:if(n.flags&1024&&(m=n.length,m>a&&(m=a),m&&(n.head&&(D=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(r.subarray(s,s+m),D)),n.flags&512&&n.wrap&4&&(n.check=ao(n.check,r,m,s)),a-=m,s+=m,n.length-=m),n.length))break e;n.length=0,n.mode=$x;case $x:if(n.flags&2048){if(a===0)break e;m=0;do D=r[s+m++],n.head&&D&&n.length<65536&&(n.head.name+=String.fromCharCode(D));while(D&&m<a);if(n.flags&512&&n.wrap&4&&(n.check=ao(n.check,r,m,s)),a-=m,s+=m,D)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=Gx;case Gx:if(n.flags&4096){if(a===0)break e;m=0;do D=r[s+m++],n.head&&D&&n.length<65536&&(n.head.comment+=String.fromCharCode(D));while(D&&m<a);if(n.flags&512&&n.wrap&4&&(n.check=ao(n.check,r,m,s)),a-=m,s+=m,D)break e}else n.head&&(n.head.comment=null);n.mode=Kx;case Kx:if(n.flags&512){for(;c<16;){if(a===0)break e;a--,u+=r[s++]<<c,c+=8}if(n.wrap&4&&u!==(n.check&65535)){t.msg="header crc mismatch",n.mode=Pn;break}u=0,c=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),t.adler=n.check=0,n.mode=Vo;break;case Yx:for(;c<32;){if(a===0)break e;a--,u+=r[s++]<<c,c+=8}t.adler=n.check=lb(u),u=0,c=0,n.mode=Nm;case Nm:if(n.havedict===0)return t.next_out=o,t.avail_out=l,t.next_in=s,t.avail_in=a,n.hold=u,n.bits=c,SM;t.adler=n.check=1,n.mode=Vo;case Vo:if(e===xM||e===Jf)break e;case D0:if(n.last){u>>>=c&7,c-=c&7,n.mode=F0;break}for(;c<3;){if(a===0)break e;a--,u+=r[s++]<<c,c+=8}switch(n.last=u&1,u>>>=1,c-=1,u&3){case 0:n.mode=Qx;break;case 1:if(CM(n),n.mode=Xf,e===Jf){u>>>=2,c-=2;break e}break;case 2:n.mode=Xx;break;case 3:t.msg="invalid block type",n.mode=Pn}u>>>=2,c-=2;break;case Qx:for(u>>>=c&7,c-=c&7;c<32;){if(a===0)break e;a--,u+=r[s++]<<c,c+=8}if((u&65535)!==(u>>>16^65535)){t.msg="invalid stored block lengths",n.mode=Pn;break}if(n.length=u&65535,u=0,c=0,n.mode=O0,e===Jf)break e;case O0:n.mode=Jx;case Jx:if(m=n.length,m){if(m>a&&(m=a),m>l&&(m=l),m===0)break e;i.set(r.subarray(s,s+m),o),a-=m,s+=m,l-=m,o+=m,n.length-=m;break}n.mode=Vo;break;case Xx:for(;c<14;){if(a===0)break e;a--,u+=r[s++]<<c,c+=8}if(n.nlen=(u&31)+257,u>>>=5,c-=5,n.ndist=(u&31)+1,u>>>=5,c-=5,n.ncode=(u&15)+4,u>>>=4,c-=4,n.nlen>286||n.ndist>30){t.msg="too many length or distance symbols",n.mode=Pn;break}n.have=0,n.mode=Zx;case Zx:for(;n.have<n.ncode;){for(;c<3;){if(a===0)break e;a--,u+=r[s++]<<c,c+=8}n.lens[T[n.have++]]=u&7,u>>>=3,c-=3}for(;n.have<19;)n.lens[T[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,R={bits:n.lenbits},N=td(_M,n.lens,0,19,n.lencode,0,n.work,R),n.lenbits=R.bits,N){t.msg="invalid code lengths set",n.mode=Pn;break}n.have=0,n.mode=eb;case eb:for(;n.have<n.nlen+n.ndist;){for(;L=n.lencode[u&(1<<n.lenbits)-1],b=L>>>24,k=L>>>16&255,j=L&65535,!(b<=c);){if(a===0)break e;a--,u+=r[s++]<<c,c+=8}if(j<16)u>>>=b,c-=b,n.lens[n.have++]=j;else{if(j===16){for(x=b+2;c<x;){if(a===0)break e;a--,u+=r[s++]<<c,c+=8}if(u>>>=b,c-=b,n.have===0){t.msg="invalid bit length repeat",n.mode=Pn;break}D=n.lens[n.have-1],m=3+(u&3),u>>>=2,c-=2}else if(j===17){for(x=b+3;c<x;){if(a===0)break e;a--,u+=r[s++]<<c,c+=8}u>>>=b,c-=b,D=0,m=3+(u&7),u>>>=3,c-=3}else{for(x=b+7;c<x;){if(a===0)break e;a--,u+=r[s++]<<c,c+=8}u>>>=b,c-=b,D=0,m=11+(u&127),u>>>=7,c-=7}if(n.have+m>n.nlen+n.ndist){t.msg="invalid bit length repeat",n.mode=Pn;break}for(;m--;)n.lens[n.have++]=D}}if(n.mode===Pn)break;if(n.lens[256]===0){t.msg="invalid code -- missing end-of-block",n.mode=Pn;break}if(n.lenbits=9,R={bits:n.lenbits},N=td(RA,n.lens,0,n.nlen,n.lencode,0,n.work,R),n.lenbits=R.bits,N){t.msg="invalid literal/lengths set",n.mode=Pn;break}if(n.distbits=6,n.distcode=n.distdyn,R={bits:n.distbits},N=td(jA,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,R),n.distbits=R.bits,N){t.msg="invalid distances set",n.mode=Pn;break}if(n.mode=Xf,e===Jf)break e;case Xf:n.mode=Zf;case Zf:if(a>=6&&l>=258){t.next_out=o,t.avail_out=l,t.next_in=s,t.avail_in=a,n.hold=u,n.bits=c,pM(t,v),o=t.next_out,i=t.output,l=t.avail_out,s=t.next_in,r=t.input,a=t.avail_in,u=n.hold,c=n.bits,n.mode===Vo&&(n.back=-1);break}for(n.back=0;L=n.lencode[u&(1<<n.lenbits)-1],b=L>>>24,k=L>>>16&255,j=L&65535,!(b<=c);){if(a===0)break e;a--,u+=r[s++]<<c,c+=8}if(k&&!(k&240)){for(U=b,q=k,ee=j;L=n.lencode[ee+((u&(1<<U+q)-1)>>U)],b=L>>>24,k=L>>>16&255,j=L&65535,!(U+b<=c);){if(a===0)break e;a--,u+=r[s++]<<c,c+=8}u>>>=U,c-=U,n.back+=U}if(u>>>=b,c-=b,n.back+=b,n.length=j,k===0){n.mode=sb;break}if(k&32){n.back=-1,n.mode=Vo;break}if(k&64){t.msg="invalid literal/length code",n.mode=Pn;break}n.extra=k&15,n.mode=tb;case tb:if(n.extra){for(x=n.extra;c<x;){if(a===0)break e;a--,u+=r[s++]<<c,c+=8}n.length+=u&(1<<n.extra)-1,u>>>=n.extra,c-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=nb;case nb:for(;L=n.distcode[u&(1<<n.distbits)-1],b=L>>>24,k=L>>>16&255,j=L&65535,!(b<=c);){if(a===0)break e;a--,u+=r[s++]<<c,c+=8}if(!(k&240)){for(U=b,q=k,ee=j;L=n.distcode[ee+((u&(1<<U+q)-1)>>U)],b=L>>>24,k=L>>>16&255,j=L&65535,!(U+b<=c);){if(a===0)break e;a--,u+=r[s++]<<c,c+=8}u>>>=U,c-=U,n.back+=U}if(u>>>=b,c-=b,n.back+=b,k&64){t.msg="invalid distance code",n.mode=Pn;break}n.offset=j,n.extra=k&15,n.mode=rb;case rb:if(n.extra){for(x=n.extra;c<x;){if(a===0)break e;a--,u+=r[s++]<<c,c+=8}n.offset+=u&(1<<n.extra)-1,u>>>=n.extra,c-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){t.msg="invalid distance too far back",n.mode=Pn;break}n.mode=ib;case ib:if(l===0)break e;if(m=v-l,n.offset>m){if(m=n.offset-m,m>n.whave&&n.sane){t.msg="invalid distance too far back",n.mode=Pn;break}m>n.wnext?(m-=n.wnext,S=n.wsize-m):S=n.wnext-m,m>n.length&&(m=n.length),A=n.window}else A=i,S=o-n.offset,m=n.length;m>l&&(m=l),l-=m,n.length-=m;do i[o++]=A[S++];while(--m);n.length===0&&(n.mode=Zf);break;case sb:if(l===0)break e;i[o++]=n.length,l--,n.mode=Zf;break;case F0:if(n.wrap){for(;c<32;){if(a===0)break e;a--,u|=r[s++]<<c,c+=8}if(v-=l,t.total_out+=v,n.total+=v,n.wrap&4&&v&&(t.adler=n.check=n.flags?ao(n.check,i,v,o-v):C2(n.check,i,v,o-v)),v=l,n.wrap&4&&(n.flags?u:lb(u))!==n.check){t.msg="incorrect data check",n.mode=Pn;break}u=0,c=0}n.mode=ob;case ob:if(n.wrap&&n.flags){for(;c<32;){if(a===0)break e;a--,u+=r[s++]<<c,c+=8}if(n.wrap&4&&u!==(n.total&4294967295)){t.msg="incorrect length check",n.mode=Pn;break}u=0,c=0}n.mode=ab;case ab:N=bM;break e;case Pn:N=DA;break e;case FA:return OA;case MA:default:return xs}return t.next_out=o,t.avail_out=l,t.next_in=s,t.avail_in=a,n.hold=u,n.bits=c,(n.wsize||v!==t.avail_out&&n.mode<Pn&&(n.mode<F0||e!==Ux))&&qA(t,t.output,t.next_out,v-t.avail_out),g-=t.avail_in,v-=t.avail_out,t.total_in+=g,t.total_out+=v,n.total+=v,n.wrap&4&&v&&(t.adler=n.check=n.flags?ao(n.check,i,v,t.next_out-v):C2(n.check,i,v,t.next_out-v)),t.data_type=n.bits+(n.last?64:0)+(n.mode===Vo?128:0)+(n.mode===Xf||n.mode===O0?256:0),(g===0&&v===0||e===Ux)&&N===gu&&(N=NM),N},RM=t=>{if(Eu(t))return xs;let e=t.state;return e.window&&(e.window=null),t.state=null,gu},jM=(t,e)=>{if(Eu(t))return xs;const n=t.state;return n.wrap&2?(n.head=e,e.done=!1,gu):xs},DM=(t,e)=>{const n=e.length;let r,i,s;return Eu(t)||(r=t.state,r.wrap!==0&&r.mode!==Nm)?xs:r.mode===Nm&&(i=1,i=C2(i,e,n,0),i!==r.check)?DA:(s=qA(t,e,n,n),s?(r.mode=FA,OA):(r.havedict=1,gu))};var OM=VA,FM=BA,MM=UA,UM=PM,VM=zA,BM=LM,zM=RM,qM=jM,HM=DM,WM="pako inflate (from Nodeca project)",Ho={inflateReset:OM,inflateReset2:FM,inflateResetKeep:MM,inflateInit:UM,inflateInit2:VM,inflate:BM,inflateEnd:zM,inflateGetHeader:qM,inflateSetDictionary:HM,inflateInfo:WM};function $M(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var GM=$M;const HA=Object.prototype.toString,{Z_NO_FLUSH:KM,Z_FINISH:YM,Z_OK:Dd,Z_STREAM_END:V0,Z_NEED_DICT:B0,Z_STREAM_ERROR:QM,Z_DATA_ERROR:cb,Z_MEM_ERROR:JM}=PA;function af(t){this.options=CA.assign({chunkSize:1024*64,windowBits:15,to:""},t||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(t&&t.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15||(e.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new dM,this.strm.avail_out=0;let n=Ho.inflateInit2(this.strm,e.windowBits);if(n!==Dd)throw new Error(L2[n]);if(this.header=new GM,Ho.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=R2.string2buf(e.dictionary):HA.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(n=Ho.inflateSetDictionary(this.strm,e.dictionary),n!==Dd)))throw new Error(L2[n])}af.prototype.push=function(t,e){const n=this.strm,r=this.options.chunkSize,i=this.options.dictionary;let s,o,a;if(this.ended)return!1;for(e===~~e?o=e:o=e===!0?YM:KM,HA.call(t)==="[object ArrayBuffer]"?n.input=new Uint8Array(t):n.input=t,n.next_in=0,n.avail_in=n.input.length;;){for(n.avail_out===0&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),s=Ho.inflate(n,o),s===B0&&i&&(s=Ho.inflateSetDictionary(n,i),s===Dd?s=Ho.inflate(n,o):s===cb&&(s=B0));n.avail_in>0&&s===V0&&n.state.wrap>0&&t[n.next_in]!==0;)Ho.inflateReset(n),s=Ho.inflate(n,o);switch(s){case QM:case cb:case B0:case JM:return this.onEnd(s),this.ended=!0,!1}if(a=n.avail_out,n.next_out&&(n.avail_out===0||s===V0))if(this.options.to==="string"){let l=R2.utf8border(n.output,n.next_out),u=n.next_out-l,c=R2.buf2string(n.output,l);n.next_out=u,n.avail_out=r-u,u&&n.output.set(n.output.subarray(l,l+u),0),this.onData(c)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(!(s===Dd&&a===0)){if(s===V0)return s=Ho.inflateEnd(this.strm),this.onEnd(s),this.ended=!0,!0;if(n.avail_in===0)break}}return!0};af.prototype.onData=function(t){this.chunks.push(t)};af.prototype.onEnd=function(t){t===Dd&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=CA.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function XM(t,e){const n=new af(e);if(n.push(t),n.err)throw n.msg||L2[n.err];return n.result}var ZM=af,eU=XM,tU={Inflate:ZM,inflate:eU};const{Inflate:nU,inflate:rU}=tU;var hb=nU,iU=rU;const WA=[];for(let t=0;t<256;t++){let e=t;for(let n=0;n<8;n++)e&1?e=3988292384^e>>>1:e=e>>>1;WA[t]=e}const db=4294967295;function sU(t,e,n){let r=t;for(let i=0;i<n;i++)r=WA[(r^e[i])&255]^r>>>8;return r}function oU(t,e){return(sU(db,t,e)^db)>>>0}function fb(t,e,n){const r=t.readUint32(),i=oU(new Uint8Array(t.buffer,t.byteOffset+t.offset-e-4,e),e);if(i!==r)throw new Error(`CRC mismatch for chunk ${n}. Expected ${r}, found ${i}`)}function $A(t,e,n){for(let r=0;r<n;r++)e[r]=t[r]}function GA(t,e,n,r){let i=0;for(;i<r;i++)e[i]=t[i];for(;i<n;i++)e[i]=t[i]+e[i-r]&255}function KA(t,e,n,r){let i=0;if(n.length===0)for(;i<r;i++)e[i]=t[i];else for(;i<r;i++)e[i]=t[i]+n[i]&255}function YA(t,e,n,r,i){let s=0;if(n.length===0){for(;s<i;s++)e[s]=t[s];for(;s<r;s++)e[s]=t[s]+(e[s-i]>>1)&255}else{for(;s<i;s++)e[s]=t[s]+(n[s]>>1)&255;for(;s<r;s++)e[s]=t[s]+(e[s-i]+n[s]>>1)&255}}function QA(t,e,n,r,i){let s=0;if(n.length===0){for(;s<i;s++)e[s]=t[s];for(;s<r;s++)e[s]=t[s]+e[s-i]&255}else{for(;s<i;s++)e[s]=t[s]+n[s]&255;for(;s<r;s++)e[s]=t[s]+aU(e[s-i],n[s],n[s-i])&255}}function aU(t,e,n){const r=t+e-n,i=Math.abs(r-t),s=Math.abs(r-e),o=Math.abs(r-n);return i<=s&&i<=o?t:s<=o?e:n}function lU(t,e,n,r,i,s){switch(t){case 0:$A(e,n,i);break;case 1:GA(e,n,i,s);break;case 2:KA(e,n,r,i);break;case 3:YA(e,n,r,i,s);break;case 4:QA(e,n,r,i,s);break;default:throw new Error(`Unsupported filter: ${t}`)}}const uU=new Uint16Array([255]),cU=new Uint8Array(uU.buffer),hU=cU[0]===255;function dU(t){const{data:e,width:n,height:r,channels:i,depth:s}=t,o=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],a=Math.ceil(s/8)*i,l=new Uint8Array(r*n*a);let u=0;for(let c=0;c<7;c++){const g=o[c],v=Math.ceil((n-g.x)/g.xStep),m=Math.ceil((r-g.y)/g.yStep);if(v<=0||m<=0)continue;const S=v*a,A=new Uint8Array(S);for(let L=0;L<m;L++){const b=e[u++],k=e.subarray(u,u+S);u+=S;const j=new Uint8Array(S);lU(b,k,j,A,S,a),A.set(j);for(let U=0;U<v;U++){const q=g.x+U*g.xStep,ee=g.y+L*g.yStep;if(!(q>=n||ee>=r))for(let D=0;D<a;D++)l[(ee*n+q)*a+D]=j[U*a+D]}}}if(s===16){const c=new Uint16Array(l.buffer);if(hU)for(let g=0;g<c.length;g++)c[g]=fU(c[g]);return c}else return l}function fU(t){return(t&255)<<8|t>>8&255}const pU=new Uint16Array([255]),mU=new Uint8Array(pU.buffer),gU=mU[0]===255,vU=new Uint8Array(0);function pb(t){const{data:e,width:n,height:r,channels:i,depth:s}=t,o=Math.ceil(s/8)*i,a=Math.ceil(s/8*i*n),l=new Uint8Array(r*a);let u=vU,c=0,g,v;for(let m=0;m<r;m++){switch(g=e.subarray(c+1,c+1+a),v=l.subarray(m*a,(m+1)*a),e[c]){case 0:$A(g,v,a);break;case 1:GA(g,v,a,o);break;case 2:KA(g,v,u,a);break;case 3:YA(g,v,u,a,o);break;case 4:QA(g,v,u,a,o);break;default:throw new Error(`Unsupported filter: ${e[c]}`)}u=v,c+=a+1}if(s===16){const m=new Uint16Array(l.buffer);if(gU)for(let S=0;S<m.length;S++)m[S]=yU(m[S]);return m}else return l}function yU(t){return(t&255)<<8|t>>8&255}const Ep=Uint8Array.of(137,80,78,71,13,10,26,10);function mb(t){if(!wU(t.readBytes(Ep.length)))throw new Error("wrong PNG signature")}function wU(t){if(t.length<Ep.length)return!1;for(let e=0;e<Ep.length;e++)if(t[e]!==Ep[e])return!1;return!0}const _U="tEXt",xU=0,JA=new TextDecoder("latin1");function bU(t){if(NU(t),t.length===0||t.length>79)throw new Error("keyword length must be between 1 and 79")}const SU=/^[\u0000-\u00FF]*$/;function NU(t){if(!SU.test(t))throw new Error("invalid latin1 text")}function AU(t,e,n){const r=XA(e);t[r]=EU(e,n-r.length-1)}function XA(t){for(t.mark();t.readByte()!==xU;);const e=t.offset;t.reset();const n=JA.decode(t.readBytes(e-t.offset-1));return t.skip(1),bU(n),n}function EU(t,e){return JA.decode(t.readBytes(e))}const Hi={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},z0={UNKNOWN:-1,DEFLATE:0},gb={UNKNOWN:-1,ADAPTIVE:0},q0={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},ep={NONE:0,BACKGROUND:1,PREVIOUS:2},H0={SOURCE:0,OVER:1};class IU extends Wy{constructor(n,r={}){super(n);sn(this,"_checkCrc");sn(this,"_inflator");sn(this,"_png");sn(this,"_apng");sn(this,"_end");sn(this,"_hasPalette");sn(this,"_palette");sn(this,"_hasTransparency");sn(this,"_transparency");sn(this,"_compressionMethod");sn(this,"_filterMethod");sn(this,"_interlaceMethod");sn(this,"_colorType");sn(this,"_isAnimated");sn(this,"_numberOfFrames");sn(this,"_numberOfPlays");sn(this,"_frames");sn(this,"_writingDataChunks");const{checkCrc:i=!1}=r;this._checkCrc=i,this._inflator=new hb,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=z0.UNKNOWN,this._filterMethod=gb.UNKNOWN,this._interlaceMethod=q0.UNKNOWN,this._colorType=Hi.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(mb(this);!this._end;){const n=this.readUint32(),r=this.readChars(4);this.decodeChunk(n,r)}return this.decodeImage(),this._png}decodeApng(){for(mb(this);!this._end;){const n=this.readUint32(),r=this.readChars(4);this.decodeApngChunk(n,r)}return this.decodeApngImage(),this._apng}decodeChunk(n,r){const i=this.offset;switch(r){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(n);break;case"IDAT":this.decodeIDAT(n);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(n);break;case"iCCP":this.decodeiCCP(n);break;case _U:AU(this._png.text,this,n);break;case"pHYs":this.decodepHYs();break;default:this.skip(n);break}if(this.offset-i!==n)throw new Error(`Length mismatch while decoding chunk ${r}`);this._checkCrc?fb(this,n+4,r):this.skip(4)}decodeApngChunk(n,r){const i=this.offset;switch(r!=="fdAT"&&r!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),r){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(n);break;default:this.decodeChunk(n,r),this.offset=i+n;break}if(this.offset-i!==n)throw new Error(`Length mismatch while decoding chunk ${r}`);this._checkCrc?fb(this,n+4,r):this.skip(4)}decodeIHDR(){const n=this._png;n.width=this.readUint32(),n.height=this.readUint32(),n.depth=TU(this.readUint8());const r=this.readUint8();this._colorType=r;let i;switch(r){case Hi.GREYSCALE:i=1;break;case Hi.TRUECOLOUR:i=3;break;case Hi.INDEXED_COLOUR:i=1;break;case Hi.GREYSCALE_ALPHA:i=2;break;case Hi.TRUECOLOUR_ALPHA:i=4;break;case Hi.UNKNOWN:default:throw new Error(`Unknown color type: ${r}`)}if(this._png.channels=i,this._compressionMethod=this.readUint8(),this._compressionMethod!==z0.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const n={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(n)}decodePLTE(n){if(n%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${n}`);const r=n/3;this._hasPalette=!0;const i=[];this._palette=i;for(let s=0;s<r;s++)i.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(n){this._writingDataChunks=!0;const r=n,i=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,i,r)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(n)}decodeFDAT(n){this._writingDataChunks=!0;let r=n,i=this.offset+this.byteOffset;if(i+=4,r-=4,this._inflator.push(new Uint8Array(this.buffer,i,r)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(n)}decodetRNS(n){switch(this._colorType){case Hi.GREYSCALE:case Hi.TRUECOLOUR:{if(n%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${n}`);if(n/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${n/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(n/2);for(let r=0;r<n/2;r++)this._transparency[r]=this.readUint16();break}case Hi.INDEXED_COLOUR:{if(n>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${n} vs ${this._palette.length})`);let r=0;for(;r<n;r++){const i=this.readByte();this._palette[r].push(i)}for(;r<this._palette.length;r++)this._palette[r].push(255);break}case Hi.UNKNOWN:case Hi.GREYSCALE_ALPHA:case Hi.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(n){const r=XA(this),i=this.readUint8();if(i!==z0.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${i}`);const s=this.readBytes(n-r.length-2);this._png.iccEmbeddedProfile={name:r,profile:iU(s)}}decodepHYs(){const n=this.readUint32(),r=this.readUint32(),i=this.readByte();this._png.resolution={x:n,y:r,unit:i}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let n=0;n<this._numberOfFrames;n++){const r={sequenceNumber:this._frames[n].sequenceNumber,delayNumber:this._frames[n].delayNumber,delayDenominator:this._frames[n].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},i=this._frames.at(n);if(i){if(i.data=pb({data:i.data,width:i.width,height:i.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),n===0||i.xOffset===0&&i.yOffset===0&&i.width===this._png.width&&i.height===this._png.height)r.data=i.data;else{const s=this._apng.frames.at(n-1);this.disposeFrame(i,s,r),this.addFrameDataToCanvas(r,i)}this._apng.frames.push(r)}}return this._apng}disposeFrame(n,r,i){switch(n.disposeOp){case ep.NONE:break;case ep.BACKGROUND:for(let s=0;s<this._png.height;s++)for(let o=0;o<this._png.width;o++){const a=(s*n.width+o)*this._png.channels;for(let l=0;l<this._png.channels;l++)i.data[a+l]=0}break;case ep.PREVIOUS:i.data.set(r.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(n,r){const i=1<<this._png.depth,s=(o,a)=>{const l=((o+r.yOffset)*this._png.width+r.xOffset+a)*this._png.channels,u=(o*r.width+a)*this._png.channels;return{index:l,frameIndex:u}};switch(r.blendOp){case H0.SOURCE:for(let o=0;o<r.height;o++)for(let a=0;a<r.width;a++){const{index:l,frameIndex:u}=s(o,a);for(let c=0;c<this._png.channels;c++)n.data[l+c]=r.data[u+c]}break;case H0.OVER:for(let o=0;o<r.height;o++)for(let a=0;a<r.width;a++){const{index:l,frameIndex:u}=s(o,a);for(let c=0;c<this._png.channels;c++){const g=r.data[u+this._png.channels-1]/i,v=c%(this._png.channels-1)===0?1:r.data[u+c],m=Math.floor(g*v+(1-g)*n.data[l+c]);n.data[l+c]+=m}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){var r;if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const n=this._isAnimated?((r=this._frames)==null?void 0:r.at(0)).data:this._inflator.result;if(this._filterMethod!==gb.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===q0.NO_INTERLACE)this._png.data=pb({data:n,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===q0.ADAM7)this._png.data=dU({data:n,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const n=this._inflator.result,r=this._frames.at(-1);r?r.data=n:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:ep.NONE,blendOp:H0.SOURCE,data:n}),this._inflator=new hb,this._writingDataChunks=!1}}function TU(t){if(t!==1&&t!==2&&t!==4&&t!==8&&t!==16)throw new Error(`invalid bit depth: ${t}`);return t}var vb;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.METRE=1]="METRE"})(vb||(vb={}));function kU(t,e){return new IU(t,e).decode()}var gt=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function W0(){gt.console&&typeof gt.console.log=="function"&&gt.console.log.apply(gt.console,arguments)}var mn={log:W0,warn:function(t){gt.console&&(typeof gt.console.warn=="function"?gt.console.warn.apply(gt.console,arguments):W0.call(null,arguments))},error:function(t){gt.console&&(typeof gt.console.error=="function"?gt.console.error.apply(gt.console,arguments):W0(t))}};function $0(t,e,n){var r=new XMLHttpRequest;r.open("GET",t),r.responseType="blob",r.onload=function(){Wl(r.response,e,n)},r.onerror=function(){mn.error("could not download file")},r.send()}function yb(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function tp(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var Wl=gt.saveAs||((typeof window>"u"?"undefined":on(window))!=="object"||window!==gt?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,n){var r=gt.URL||gt.webkitURL,i=document.createElement("a");e=e||t.name||"download",i.download=e,i.rel="noopener",typeof t=="string"?(i.href=t,i.origin!==location.origin?yb(i.href)?$0(t,e,n):tp(i,i.target="_blank"):tp(i)):(i.href=r.createObjectURL(t),setTimeout(function(){r.revokeObjectURL(i.href)},4e4),setTimeout(function(){tp(i)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,n){if(e=e||t.name||"download",typeof t=="string")if(yb(t))$0(t,e,n);else{var r=document.createElement("a");r.href=t,r.target="_blank",setTimeout(function(){tp(r)})}else navigator.msSaveOrOpenBlob(function(i,s){return s===void 0?s={autoBom:!1}:on(s)!=="object"&&(mn.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i}(t,n),e)}:function(t,e,n,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof t=="string")return $0(t,e,n);var i=t.type==="application/octet-stream",s=/constructor/i.test(gt.HTMLElement)||gt.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||i&&s)&&(typeof FileReader>"u"?"undefined":on(FileReader))==="object"){var a=new FileReader;a.onloadend=function(){var c=a.result;c=o?c:c.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=c:location=c,r=null},a.readAsDataURL(t)}else{var l=gt.URL||gt.webkitURL,u=l.createObjectURL(t);r?r.location=u:location.href=u,r=null,setTimeout(function(){l.revokeObjectURL(u)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function ZA(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(a){return[parseInt(a[1]),parseInt(a[2]),parseInt(a[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}}],r=0;r<n.length;r++){var i=n[r].re,s=n[r].process,o=i.exec(t);o&&(e=s(o),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var a=this.r.toString(16),l=this.g.toString(16),u=this.b.toString(16);return a.length==1&&(a="0"+a),l.length==1&&(l="0"+l),u.length==1&&(u="0"+u),"#"+a+l+u}}var Ip=gt.atob.bind(gt),wb=gt.btoa.bind(gt);/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function G0(t,e){var n=t[0],r=t[1],i=t[2],s=t[3];n=Kr(n,r,i,s,e[0],7,-680876936),s=Kr(s,n,r,i,e[1],12,-389564586),i=Kr(i,s,n,r,e[2],17,606105819),r=Kr(r,i,s,n,e[3],22,-1044525330),n=Kr(n,r,i,s,e[4],7,-176418897),s=Kr(s,n,r,i,e[5],12,1200080426),i=Kr(i,s,n,r,e[6],17,-1473231341),r=Kr(r,i,s,n,e[7],22,-45705983),n=Kr(n,r,i,s,e[8],7,1770035416),s=Kr(s,n,r,i,e[9],12,-1958414417),i=Kr(i,s,n,r,e[10],17,-42063),r=Kr(r,i,s,n,e[11],22,-1990404162),n=Kr(n,r,i,s,e[12],7,1804603682),s=Kr(s,n,r,i,e[13],12,-40341101),i=Kr(i,s,n,r,e[14],17,-1502002290),n=Yr(n,r=Kr(r,i,s,n,e[15],22,1236535329),i,s,e[1],5,-165796510),s=Yr(s,n,r,i,e[6],9,-1069501632),i=Yr(i,s,n,r,e[11],14,643717713),r=Yr(r,i,s,n,e[0],20,-373897302),n=Yr(n,r,i,s,e[5],5,-701558691),s=Yr(s,n,r,i,e[10],9,38016083),i=Yr(i,s,n,r,e[15],14,-660478335),r=Yr(r,i,s,n,e[4],20,-405537848),n=Yr(n,r,i,s,e[9],5,568446438),s=Yr(s,n,r,i,e[14],9,-1019803690),i=Yr(i,s,n,r,e[3],14,-187363961),r=Yr(r,i,s,n,e[8],20,1163531501),n=Yr(n,r,i,s,e[13],5,-1444681467),s=Yr(s,n,r,i,e[2],9,-51403784),i=Yr(i,s,n,r,e[7],14,1735328473),n=Qr(n,r=Yr(r,i,s,n,e[12],20,-1926607734),i,s,e[5],4,-378558),s=Qr(s,n,r,i,e[8],11,-2022574463),i=Qr(i,s,n,r,e[11],16,1839030562),r=Qr(r,i,s,n,e[14],23,-35309556),n=Qr(n,r,i,s,e[1],4,-1530992060),s=Qr(s,n,r,i,e[4],11,1272893353),i=Qr(i,s,n,r,e[7],16,-155497632),r=Qr(r,i,s,n,e[10],23,-1094730640),n=Qr(n,r,i,s,e[13],4,681279174),s=Qr(s,n,r,i,e[0],11,-358537222),i=Qr(i,s,n,r,e[3],16,-722521979),r=Qr(r,i,s,n,e[6],23,76029189),n=Qr(n,r,i,s,e[9],4,-640364487),s=Qr(s,n,r,i,e[12],11,-421815835),i=Qr(i,s,n,r,e[15],16,530742520),n=Jr(n,r=Qr(r,i,s,n,e[2],23,-995338651),i,s,e[0],6,-198630844),s=Jr(s,n,r,i,e[7],10,1126891415),i=Jr(i,s,n,r,e[14],15,-1416354905),r=Jr(r,i,s,n,e[5],21,-57434055),n=Jr(n,r,i,s,e[12],6,1700485571),s=Jr(s,n,r,i,e[3],10,-1894986606),i=Jr(i,s,n,r,e[10],15,-1051523),r=Jr(r,i,s,n,e[1],21,-2054922799),n=Jr(n,r,i,s,e[8],6,1873313359),s=Jr(s,n,r,i,e[15],10,-30611744),i=Jr(i,s,n,r,e[6],15,-1560198380),r=Jr(r,i,s,n,e[13],21,1309151649),n=Jr(n,r,i,s,e[4],6,-145523070),s=Jr(s,n,r,i,e[11],10,-1120210379),i=Jr(i,s,n,r,e[2],15,718787259),r=Jr(r,i,s,n,e[9],21,-343485551),t[0]=el(n,t[0]),t[1]=el(r,t[1]),t[2]=el(i,t[2]),t[3]=el(s,t[3])}function xg(t,e,n,r,i,s){return e=el(el(e,t),el(r,s)),el(e<<i|e>>>32-i,n)}function Kr(t,e,n,r,i,s,o){return xg(e&n|~e&r,t,e,i,s,o)}function Yr(t,e,n,r,i,s,o){return xg(e&r|n&~r,t,e,i,s,o)}function Qr(t,e,n,r,i,s,o){return xg(e^n^r,t,e,i,s,o)}function Jr(t,e,n,r,i,s,o){return xg(n^(e|~r),t,e,i,s,o)}function eE(t){var e,n=t.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)G0(r,PU(t.substring(e-64,e)));t=t.substring(e-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)i[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(G0(r,i),e=0;e<16;e++)i[e]=0;return i[14]=8*n,G0(r,i),r}function PU(t){var e,n=[];for(e=0;e<64;e+=4)n[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return n}var _b="0123456789abcdef".split("");function CU(t){for(var e="",n=0;n<4;n++)e+=_b[t>>8*n+4&15]+_b[t>>8*n&15];return e}function LU(t){return String.fromCharCode(255&t,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function j2(t){return eE(t).map(LU).join("")}var RU=function(t){for(var e=0;e<t.length;e++)t[e]=CU(t[e]);return t.join("")}(eE("hello"))!="5d41402abc4b2a76b9719d911017c592";function el(t,e){if(RU){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function D2(t,e){var n,r,i,s;if(t!==n){for(var o=(i=t,s=1+(256/t.length|0),new Array(s+1).join(i)),a=[],l=0;l<256;l++)a[l]=l;var u=0;for(l=0;l<256;l++){var c=a[l];u=(u+c+o.charCodeAt(l))%256,a[l]=a[u],a[u]=c}n=t,r=a}else a=r;var g=e.length,v=0,m=0,S="";for(l=0;l<g;l++)m=(m+(c=a[v=(v+1)%256]))%256,a[v]=a[m],a[m]=c,o=a[(a[v]+a[m])%256],S+=String.fromCharCode(e.charCodeAt(l)^o);return S}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var xb={print:4,modify:8,copy:16,"annot-forms":32};function $u(t,e,n,r){this.v=1,this.r=2;var i=192;t.forEach(function(a){if(xb.perm!==void 0)throw new Error("Invalid permission: "+a);i+=xb[a]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var s=(e+this.padding).substr(0,32),o=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,o),this.P=-(1+(255^i)),this.encryptionKey=j2(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=D2(this.encryptionKey,this.padding)}function Gu(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",n=t.length,r=0;r<n;r++){var i=t.charCodeAt(r);e+=i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?"#"+("0"+i.toString(16)).slice(-2):t[r]}return e}function bb(t){if(on(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(n,r,i){if(i=i||!1,typeof n!="string"||typeof r!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(n)||(e[n]={});var s=Math.random().toString(35);return e[n][s]=[r,!!i],s},this.unsubscribe=function(n){for(var r in e)if(e[r][n])return delete e[r][n],Object.keys(e[r]).length===0&&delete e[r],!0;return!1},this.publish=function(n){if(e.hasOwnProperty(n)){var r=Array.prototype.slice.call(arguments,1),i=[];for(var s in e[n]){var o=e[n][s];try{o[0].apply(t,r)}catch(a){gt.console&&mn.error("jsPDF PubSub Error",a.message,a)}o[1]&&i.push(s)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function Am(t){if(!(this instanceof Am))return new Am(t);var e="opacity,stroke-opacity".split(",");for(var n in t)t.hasOwnProperty(n)&&e.indexOf(n)>=0&&(this[n]=t[n]);this.id="",this.objectNumber=-1}function tE(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function $l(t,e,n,r,i){if(!(this instanceof $l))return new $l(t,e,n,r,i);this.type=t==="axial"?2:3,this.coords=e,this.colors=n,tE.call(this,r,i)}function ac(t,e,n,r,i){if(!(this instanceof ac))return new ac(t,e,n,r,i);this.boundingBox=t,this.xStep=e,this.yStep=n,this.stream="",this.cloneIndex=0,tE.call(this,r,i)}function rt(t){var e,n=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],i=arguments[2],s=arguments[3],o=[],a=1,l=16,u="S",c=null;on(t=t||{})==="object"&&(n=t.orientation,r=t.unit||r,i=t.format||i,s=t.compress||t.compressPdf||s,(c=t.encryption||null)!==null&&(c.userPassword=c.userPassword||"",c.ownerPassword=c.ownerPassword||"",c.userPermissions=c.userPermissions||[]),a=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(l=t.floatPrecision),u=t.defaultPathOperation||"S"),o=t.filters||(s===!0?["FlateEncode"]:o),r=r||"mm",n=(""+(n||"P")).toLowerCase();var g=t.putOnlyUsedFonts||!1,v={},m={internal:{},__private__:{}};m.__private__.PubSub=bb;var S="1.3",A=m.__private__.getPdfVersion=function(){return S};m.__private__.setPdfVersion=function(y){S=y};var L={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};m.__private__.getPageFormats=function(){return L};var b=m.__private__.getPageFormat=function(y){return L[y]};i=i||"a4";var k="compat",j="advanced",U=k;function q(){this.saveGraphicsState(),K(new ct(wt,0,0,-wt,0,ls()*wt).toString()+" cm"),this.setFontSize(this.getFontSize()/wt),u="n",U=j}function ee(){this.restoreGraphicsState(),u="S",U=k}var D=m.__private__.combineFontStyleAndFontWeight=function(y,O){if(y=="bold"&&O=="normal"||y=="bold"&&O==400||y=="normal"&&O=="italic"||y=="bold"&&O=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return O&&(y=O==400||O==="normal"?y==="italic"?"italic":"normal":O!=700&&O!=="bold"||y!=="normal"?(O==700?"bold":O)+""+y:"bold"),y};m.advancedAPI=function(y){var O=U===k;return O&&q.call(this),typeof y!="function"||(y(this),O&&ee.call(this)),this},m.compatAPI=function(y){var O=U===j;return O&&ee.call(this),typeof y!="function"||(y(this),O&&q.call(this)),this},m.isAdvancedAPI=function(){return U===j};var N,I=function(y){if(U!==j)throw new Error(y+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},R=m.roundToPrecision=m.__private__.roundToPrecision=function(y,O){var Y=e||O;if(isNaN(y)||isNaN(Y))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return y.toFixed(Y).replace(/0+$/,"")};N=m.hpf=m.__private__.hpf=typeof l=="number"?function(y){if(isNaN(y))throw new Error("Invalid argument passed to jsPDF.hpf");return R(y,l)}:l==="smart"?function(y){if(isNaN(y))throw new Error("Invalid argument passed to jsPDF.hpf");return R(y,y>-1&&y<1?16:5)}:function(y){if(isNaN(y))throw new Error("Invalid argument passed to jsPDF.hpf");return R(y,16)};var x=m.f2=m.__private__.f2=function(y){if(isNaN(y))throw new Error("Invalid argument passed to jsPDF.f2");return R(y,2)},T=m.__private__.f3=function(y){if(isNaN(y))throw new Error("Invalid argument passed to jsPDF.f3");return R(y,3)},P=m.scale=m.__private__.scale=function(y){if(isNaN(y))throw new Error("Invalid argument passed to jsPDF.scale");return U===k?y*wt:U===j?y:void 0},te=function(y){return P(function(O){return U===k?ls()-O:U===j?O:void 0}(y))};m.__private__.setPrecision=m.setPrecision=function(y){typeof parseInt(y,10)=="number"&&(e=parseInt(y,10))};var de,me="00000000000000000000000000000000",ge=m.__private__.getFileId=function(){return me},Q=m.__private__.setFileId=function(y){return me=y!==void 0&&/^[a-fA-F0-9]{32}$/.test(y)?y.toUpperCase():me.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),c!==null&&(dn=new $u(c.userPermissions,c.userPassword,c.ownerPassword,me)),me};m.setFileId=function(y){return Q(y),this},m.getFileId=function(){return ge()};var oe=m.__private__.convertDateToPDFDate=function(y){var O=y.getTimezoneOffset(),Y=O<0?"+":"-",re=Math.floor(Math.abs(O/60)),ce=Math.abs(O%60),Ne=[Y,B(re),"'",B(ce),"'"].join("");return["D:",y.getFullYear(),B(y.getMonth()+1),B(y.getDate()),B(y.getHours()),B(y.getMinutes()),B(y.getSeconds()),Ne].join("")},ae=m.__private__.convertPDFDateToDate=function(y){var O=parseInt(y.substr(2,4),10),Y=parseInt(y.substr(6,2),10)-1,re=parseInt(y.substr(8,2),10),ce=parseInt(y.substr(10,2),10),Ne=parseInt(y.substr(12,2),10),Te=parseInt(y.substr(14,2),10);return new Date(O,Y,re,ce,Ne,Te,0)},he=m.__private__.setCreationDate=function(y){var O;if(y===void 0&&(y=new Date),y instanceof Date)O=oe(y);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(y))throw new Error("Invalid argument passed to jsPDF.setCreationDate");O=y}return de=O},F=m.__private__.getCreationDate=function(y){var O=de;return y==="jsDate"&&(O=ae(de)),O};m.setCreationDate=function(y){return he(y),this},m.getCreationDate=function(y){return F(y)};var G,B=m.__private__.padd2=function(y){return("0"+parseInt(y)).slice(-2)},Z=m.__private__.padd2Hex=function(y){return("00"+(y=y.toString())).substr(y.length)},ne=0,ie=[],ve=[],_e=0,xe=[],ke=[],Fe=!1,De=ve;m.__private__.setCustomOutputDestination=function(y){Fe=!0,De=y};var $e=function(y){Fe||(De=y)};m.__private__.resetCustomOutputDestination=function(){Fe=!1,De=ve};var K=m.__private__.out=function(y){return y=y.toString(),_e+=y.length+1,De.push(y),De},Ue=m.__private__.write=function(y){return K(arguments.length===1?y.toString():Array.prototype.join.call(arguments," "))},Et=m.__private__.getArrayBuffer=function(y){for(var O=y.length,Y=new ArrayBuffer(O),re=new Uint8Array(Y);O--;)re[O]=y.charCodeAt(O);return Y},ut=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];m.__private__.getStandardFonts=function(){return ut};var Ce=t.fontSize||16;m.__private__.setFontSize=m.setFontSize=function(y){return Ce=U===j?y/wt:y,this};var it,Be=m.__private__.getFontSize=m.getFontSize=function(){return U===k?Ce:Ce*wt},ot=t.R2L||!1;m.__private__.setR2L=m.setR2L=function(y){return ot=y,this},m.__private__.getR2L=m.getR2L=function(){return ot};var tt,qt=m.__private__.setZoomMode=function(y){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(y))it=y;else if(isNaN(y)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(y)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+y+'" is not recognized.');it=y}else it=parseInt(y,10)};m.__private__.getZoomMode=function(){return it};var Lt,Ze=m.__private__.setPageMode=function(y){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(y)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+y+'" is not recognized.');tt=y};m.__private__.getPageMode=function(){return tt};var ft=m.__private__.setLayoutMode=function(y){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(y)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+y+'" is not recognized.');Lt=y};m.__private__.getLayoutMode=function(){return Lt},m.__private__.setDisplayMode=m.setDisplayMode=function(y,O,Y){return qt(y),ft(O),Ze(Y),this};var kt={title:"",subject:"",author:"",keywords:"",creator:""};m.__private__.getDocumentProperty=function(y){if(Object.keys(kt).indexOf(y)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return kt[y]},m.__private__.getDocumentProperties=function(){return kt},m.__private__.setDocumentProperties=m.setProperties=m.setDocumentProperties=function(y){for(var O in kt)kt.hasOwnProperty(O)&&y[O]&&(kt[O]=y[O]);return this},m.__private__.setDocumentProperty=function(y,O){if(Object.keys(kt).indexOf(y)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return kt[y]=O};var Ge,wt,et,hn,Ot,It={},Nt={},vn=[],st={},Xt={},ht={},vt={},Zt=null,Tt=0,at=[],Rt=new bb(m),Gs=t.hotfixes||[],Kn={},es={},Vr=[],ct=function y(O,Y,re,ce,Ne,Te){if(!(this instanceof y))return new y(O,Y,re,ce,Ne,Te);isNaN(O)&&(O=1),isNaN(Y)&&(Y=0),isNaN(re)&&(re=0),isNaN(ce)&&(ce=1),isNaN(Ne)&&(Ne=0),isNaN(Te)&&(Te=0),this._matrix=[O,Y,re,ce,Ne,Te]};Object.defineProperty(ct.prototype,"sx",{get:function(){return this._matrix[0]},set:function(y){this._matrix[0]=y}}),Object.defineProperty(ct.prototype,"shy",{get:function(){return this._matrix[1]},set:function(y){this._matrix[1]=y}}),Object.defineProperty(ct.prototype,"shx",{get:function(){return this._matrix[2]},set:function(y){this._matrix[2]=y}}),Object.defineProperty(ct.prototype,"sy",{get:function(){return this._matrix[3]},set:function(y){this._matrix[3]=y}}),Object.defineProperty(ct.prototype,"tx",{get:function(){return this._matrix[4]},set:function(y){this._matrix[4]=y}}),Object.defineProperty(ct.prototype,"ty",{get:function(){return this._matrix[5]},set:function(y){this._matrix[5]=y}}),Object.defineProperty(ct.prototype,"a",{get:function(){return this._matrix[0]},set:function(y){this._matrix[0]=y}}),Object.defineProperty(ct.prototype,"b",{get:function(){return this._matrix[1]},set:function(y){this._matrix[1]=y}}),Object.defineProperty(ct.prototype,"c",{get:function(){return this._matrix[2]},set:function(y){this._matrix[2]=y}}),Object.defineProperty(ct.prototype,"d",{get:function(){return this._matrix[3]},set:function(y){this._matrix[3]=y}}),Object.defineProperty(ct.prototype,"e",{get:function(){return this._matrix[4]},set:function(y){this._matrix[4]=y}}),Object.defineProperty(ct.prototype,"f",{get:function(){return this._matrix[5]},set:function(y){this._matrix[5]=y}}),Object.defineProperty(ct.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(ct.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(ct.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(ct.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),ct.prototype.join=function(y){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(N).join(y)},ct.prototype.multiply=function(y){var O=y.sx*this.sx+y.shy*this.shx,Y=y.sx*this.shy+y.shy*this.sy,re=y.shx*this.sx+y.sy*this.shx,ce=y.shx*this.shy+y.sy*this.sy,Ne=y.tx*this.sx+y.ty*this.shx+this.tx,Te=y.tx*this.shy+y.ty*this.sy+this.ty;return new ct(O,Y,re,ce,Ne,Te)},ct.prototype.decompose=function(){var y=this.sx,O=this.shy,Y=this.shx,re=this.sy,ce=this.tx,Ne=this.ty,Te=Math.sqrt(y*y+O*O),ze=(y/=Te)*Y+(O/=Te)*re;Y-=y*ze,re-=O*ze;var Ke=Math.sqrt(Y*Y+re*re);return ze/=Ke,y*(re/=Ke)<O*(Y/=Ke)&&(y=-y,O=-O,ze=-ze,Te=-Te),{scale:new ct(Te,0,0,Ke,0,0),translate:new ct(1,0,0,1,ce,Ne),rotate:new ct(y,O,-O,y,0,0),skew:new ct(1,0,ze,1,0,0)}},ct.prototype.toString=function(y){return this.join(" ")},ct.prototype.inversed=function(){var y=this.sx,O=this.shy,Y=this.shx,re=this.sy,ce=this.tx,Ne=this.ty,Te=1/(y*re-O*Y),ze=re*Te,Ke=-O*Te,pt=-Y*Te,_t=y*Te;return new ct(ze,Ke,pt,_t,-ze*ce-pt*Ne,-Ke*ce-_t*Ne)},ct.prototype.applyToPoint=function(y){var O=y.x*this.sx+y.y*this.shx+this.tx,Y=y.x*this.shy+y.y*this.sy+this.ty;return new os(O,Y)},ct.prototype.applyToRectangle=function(y){var O=this.applyToPoint(y),Y=this.applyToPoint(new os(y.x+y.w,y.y+y.h));return new Sa(O.x,O.y,Y.x-O.x,Y.y-O.y)},ct.prototype.clone=function(){var y=this.sx,O=this.shy,Y=this.shx,re=this.sy,ce=this.tx,Ne=this.ty;return new ct(y,O,Y,re,ce,Ne)},m.Matrix=ct;var bn=m.matrixMult=function(y,O){return O.multiply(y)},ts=new ct(1,0,0,1,0,0);m.unitMatrix=m.identityMatrix=ts;var wr=function(y,O){if(!Xt[y]){var Y=(O instanceof $l?"Sh":"P")+(Object.keys(st).length+1).toString(10);O.id=Y,Xt[y]=Y,st[Y]=O,Rt.publish("addPattern",O)}};m.ShadingPattern=$l,m.TilingPattern=ac,m.addShadingPattern=function(y,O){return I("addShadingPattern()"),wr(y,O),this},m.beginTilingPattern=function(y){I("beginTilingPattern()"),to(y.boundingBox[0],y.boundingBox[1],y.boundingBox[2]-y.boundingBox[0],y.boundingBox[3]-y.boundingBox[1],y.matrix)},m.endTilingPattern=function(y,O){I("endTilingPattern()"),O.stream=ke[G].join(`
`),wr(y,O),Rt.publish("endTilingPattern",O),Vr.pop().restore()};var _r,Tn=m.__private__.newObject=function(){var y=or();return kn(y,!0),y},or=m.__private__.newObjectDeferred=function(){return ne++,ie[ne]=function(){return _e},ne},kn=function(y,O){return O=typeof O=="boolean"&&O,ie[y]=_e,O&&K(y+" 0 obj"),y},Ao=m.__private__.newAdditionalObject=function(){var y={objId:or(),content:""};return xe.push(y),y},Ks=or(),Br=or(),Ci=m.__private__.decodeColorString=function(y){var O=y.split(" ");if(O.length!==2||O[1]!=="g"&&O[1]!=="G")O.length!==5||O[4]!=="k"&&O[4]!=="K"||(O=[(1-O[0])*(1-O[3]),(1-O[1])*(1-O[3]),(1-O[2])*(1-O[3]),"r"]);else{var Y=parseFloat(O[0]);O=[Y,Y,Y,"r"]}for(var re="#",ce=0;ce<3;ce++)re+=("0"+Math.floor(255*parseFloat(O[ce])).toString(16)).slice(-2);return re},si=m.__private__.encodeColorString=function(y){var O;typeof y=="string"&&(y={ch1:y});var Y=y.ch1,re=y.ch2,ce=y.ch3,Ne=y.ch4,Te=y.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Y=="string"&&Y.charAt(0)!=="#"){var ze=new ZA(Y);if(ze.ok)Y=ze.toHex();else if(!/^\d*\.?\d*$/.test(Y))throw new Error('Invalid color "'+Y+'" passed to jsPDF.encodeColorString.')}if(typeof Y=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Y)&&(Y="#"+Y[1]+Y[1]+Y[2]+Y[2]+Y[3]+Y[3]),typeof Y=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Y)){var Ke=parseInt(Y.substr(1),16);Y=Ke>>16&255,re=Ke>>8&255,ce=255&Ke}if(re===void 0||Ne===void 0&&Y===re&&re===ce)O=typeof Y=="string"?Y+" "+Te[0]:y.precision===2?x(Y/255)+" "+Te[0]:T(Y/255)+" "+Te[0];else if(Ne===void 0||on(Ne)==="object"){if(Ne&&!isNaN(Ne.a)&&Ne.a===0)return["1.","1.","1.",Te[1]].join(" ");O=typeof Y=="string"?[Y,re,ce,Te[1]].join(" "):y.precision===2?[x(Y/255),x(re/255),x(ce/255),Te[1]].join(" "):[T(Y/255),T(re/255),T(ce/255),Te[1]].join(" ")}else O=typeof Y=="string"?[Y,re,ce,Ne,Te[2]].join(" "):y.precision===2?[x(Y),x(re),x(ce),x(Ne),Te[2]].join(" "):[T(Y),T(re),T(ce),T(Ne),Te[2]].join(" ");return O},zr=m.__private__.getFilters=function(){return o},Yn=m.__private__.putStream=function(y){var O=(y=y||{}).data||"",Y=y.filters||zr(),re=y.alreadyAppliedFilters||[],ce=y.addLength1||!1,Ne=O.length,Te=y.objectId,ze=function(zn){return zn};if(c!==null&&Te===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");c!==null&&(ze=dn.encryptor(Te,0));var Ke={};Y===!0&&(Y=["FlateEncode"]);var pt=y.additionalKeyValues||[],_t=(Ke=rt.API.processDataByFilters!==void 0?rt.API.processDataByFilters(O,Y):{data:O,reverseChain:[]}).reverseChain+(Array.isArray(re)?re.join(" "):re.toString());if(Ke.data.length!==0&&(pt.push({key:"Length",value:Ke.data.length}),ce===!0&&pt.push({key:"Length1",value:Ne})),_t.length!=0)if(_t.split("/").length-1==1)pt.push({key:"Filter",value:_t});else{pt.push({key:"Filter",value:"["+_t+"]"});for(var Mt=0;Mt<pt.length;Mt+=1)if(pt[Mt].key==="DecodeParms"){for(var Jt=[],Rn=0;Rn<Ke.reverseChain.split("/").length-1;Rn+=1)Jt.push("null");Jt.push(pt[Mt].value),pt[Mt].value="["+Jt.join(" ")+"]"}}K("<<");for(var tn=0;tn<pt.length;tn++)K("/"+pt[tn].key+" "+pt[tn].value);K(">>"),Ke.data.length!==0&&(K("stream"),K(ze(Ke.data)),K("endstream"))},Ys=m.__private__.putPage=function(y){var O=y.number,Y=y.data,re=y.objId,ce=y.contentsObjId;kn(re,!0),K("<</Type /Page"),K("/Parent "+y.rootDictionaryObjId+" 0 R"),K("/Resources "+y.resourceDictionaryObjId+" 0 R"),K("/MediaBox ["+parseFloat(N(y.mediaBox.bottomLeftX))+" "+parseFloat(N(y.mediaBox.bottomLeftY))+" "+N(y.mediaBox.topRightX)+" "+N(y.mediaBox.topRightY)+"]"),y.cropBox!==null&&K("/CropBox ["+N(y.cropBox.bottomLeftX)+" "+N(y.cropBox.bottomLeftY)+" "+N(y.cropBox.topRightX)+" "+N(y.cropBox.topRightY)+"]"),y.bleedBox!==null&&K("/BleedBox ["+N(y.bleedBox.bottomLeftX)+" "+N(y.bleedBox.bottomLeftY)+" "+N(y.bleedBox.topRightX)+" "+N(y.bleedBox.topRightY)+"]"),y.trimBox!==null&&K("/TrimBox ["+N(y.trimBox.bottomLeftX)+" "+N(y.trimBox.bottomLeftY)+" "+N(y.trimBox.topRightX)+" "+N(y.trimBox.topRightY)+"]"),y.artBox!==null&&K("/ArtBox ["+N(y.artBox.bottomLeftX)+" "+N(y.artBox.bottomLeftY)+" "+N(y.artBox.topRightX)+" "+N(y.artBox.topRightY)+"]"),typeof y.userUnit=="number"&&y.userUnit!==1&&K("/UserUnit "+y.userUnit),Rt.publish("putPage",{objId:re,pageContext:at[O],pageNumber:O,page:Y}),K("/Contents "+ce+" 0 R"),K(">>"),K("endobj");var Ne=Y.join(`
`);return U===j&&(Ne+=`
Q`),kn(ce,!0),Yn({data:Ne,filters:zr(),objectId:ce}),K("endobj"),re},Li=m.__private__.putPages=function(){var y,O,Y=[];for(y=1;y<=Tt;y++)at[y].objId=or(),at[y].contentsObjId=or();for(y=1;y<=Tt;y++)Y.push(Ys({number:y,data:ke[y],objId:at[y].objId,contentsObjId:at[y].contentsObjId,mediaBox:at[y].mediaBox,cropBox:at[y].cropBox,bleedBox:at[y].bleedBox,trimBox:at[y].trimBox,artBox:at[y].artBox,userUnit:at[y].userUnit,rootDictionaryObjId:Ks,resourceDictionaryObjId:Br}));kn(Ks,!0),K("<</Type /Pages");var re="/Kids [";for(O=0;O<Tt;O++)re+=Y[O]+" 0 R ";K(re+"]"),K("/Count "+Tt),K(">>"),K("endobj"),Rt.publish("postPutPages")},bs=function(y){Rt.publish("putFont",{font:y,out:K,newObject:Tn,putStream:Yn}),y.isAlreadyPutted!==!0&&(y.objectNumber=Tn(),K("<<"),K("/Type /Font"),K("/BaseFont /"+Gu(y.postScriptName)),K("/Subtype /Type1"),typeof y.encoding=="string"&&K("/Encoding /"+y.encoding),K("/FirstChar 32"),K("/LastChar 255"),K(">>"),K("endobj"))},Qs=function(y){y.objectNumber=Tn();var O=[];O.push({key:"Type",value:"/XObject"}),O.push({key:"Subtype",value:"/Form"}),O.push({key:"BBox",value:"["+[N(y.x),N(y.y),N(y.x+y.width),N(y.y+y.height)].join(" ")+"]"}),O.push({key:"Matrix",value:"["+y.matrix.toString()+"]"});var Y=y.pages[1].join(`
`);Yn({data:Y,additionalKeyValues:O,objectId:y.objectNumber}),K("endobj")},Eo=function(y,O){O||(O=21);var Y=Tn(),re=function(Te,ze){var Ke,pt=[],_t=1/(ze-1);for(Ke=0;Ke<1;Ke+=_t)pt.push(Ke);if(pt.push(1),Te[0].offset!=0){var Mt={offset:0,color:Te[0].color};Te.unshift(Mt)}if(Te[Te.length-1].offset!=1){var Jt={offset:1,color:Te[Te.length-1].color};Te.push(Jt)}for(var Rn="",tn=0,zn=0;zn<pt.length;zn++){for(Ke=pt[zn];Ke>Te[tn+1].offset;)tn++;var jn=Te[tn].offset,qn=(Ke-jn)/(Te[tn+1].offset-jn),Dn=Te[tn].color,wi=Te[tn+1].color;Rn+=Z(Math.round((1-qn)*Dn[0]+qn*wi[0]).toString(16))+Z(Math.round((1-qn)*Dn[1]+qn*wi[1]).toString(16))+Z(Math.round((1-qn)*Dn[2]+qn*wi[2]).toString(16))}return Rn.trim()}(y.colors,O),ce=[];ce.push({key:"FunctionType",value:"0"}),ce.push({key:"Domain",value:"[0.0 1.0]"}),ce.push({key:"Size",value:"["+O+"]"}),ce.push({key:"BitsPerSample",value:"8"}),ce.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ce.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Yn({data:re,additionalKeyValues:ce,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Y}),K("endobj"),y.objectNumber=Tn(),K("<< /ShadingType "+y.type),K("/ColorSpace /DeviceRGB");var Ne="/Coords ["+N(parseFloat(y.coords[0]))+" "+N(parseFloat(y.coords[1]))+" ";y.type===2?Ne+=N(parseFloat(y.coords[2]))+" "+N(parseFloat(y.coords[3])):Ne+=N(parseFloat(y.coords[2]))+" "+N(parseFloat(y.coords[3]))+" "+N(parseFloat(y.coords[4]))+" "+N(parseFloat(y.coords[5])),K(Ne+="]"),y.matrix&&K("/Matrix ["+y.matrix.toString()+"]"),K("/Function "+Y+" 0 R"),K("/Extend [true true]"),K(">>"),K("endobj")},Io=function(y,O){var Y=or(),re=Tn();O.push({resourcesOid:Y,objectOid:re}),y.objectNumber=re;var ce=[];ce.push({key:"Type",value:"/Pattern"}),ce.push({key:"PatternType",value:"1"}),ce.push({key:"PaintType",value:"1"}),ce.push({key:"TilingType",value:"1"}),ce.push({key:"BBox",value:"["+y.boundingBox.map(N).join(" ")+"]"}),ce.push({key:"XStep",value:N(y.xStep)}),ce.push({key:"YStep",value:N(y.yStep)}),ce.push({key:"Resources",value:Y+" 0 R"}),y.matrix&&ce.push({key:"Matrix",value:"["+y.matrix.toString()+"]"}),Yn({data:y.stream,additionalKeyValues:ce,objectId:y.objectNumber}),K("endobj")},Xc=function(y){for(var O in y.objectNumber=Tn(),K("<<"),y)switch(O){case"opacity":K("/ca "+x(y[O]));break;case"stroke-opacity":K("/CA "+x(y[O]))}K(">>"),K("endobj")},Js=function(y){kn(y.resourcesOid,!0),K("<<"),K("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),function(){for(var O in K("/Font <<"),It)It.hasOwnProperty(O)&&(g===!1||g===!0&&v.hasOwnProperty(O))&&K("/"+O+" "+It[O].objectNumber+" 0 R");K(">>")}(),function(){if(Object.keys(st).length>0){for(var O in K("/Shading <<"),st)st.hasOwnProperty(O)&&st[O]instanceof $l&&st[O].objectNumber>=0&&K("/"+O+" "+st[O].objectNumber+" 0 R");Rt.publish("putShadingPatternDict"),K(">>")}}(),function(O){if(Object.keys(st).length>0){for(var Y in K("/Pattern <<"),st)st.hasOwnProperty(Y)&&st[Y]instanceof m.TilingPattern&&st[Y].objectNumber>=0&&st[Y].objectNumber<O&&K("/"+Y+" "+st[Y].objectNumber+" 0 R");Rt.publish("putTilingPatternDict"),K(">>")}}(y.objectOid),function(){if(Object.keys(ht).length>0){var O;for(O in K("/ExtGState <<"),ht)ht.hasOwnProperty(O)&&ht[O].objectNumber>=0&&K("/"+O+" "+ht[O].objectNumber+" 0 R");Rt.publish("putGStateDict"),K(">>")}}(),function(){for(var O in K("/XObject <<"),Kn)Kn.hasOwnProperty(O)&&Kn[O].objectNumber>=0&&K("/"+O+" "+Kn[O].objectNumber+" 0 R");Rt.publish("putXobjectDict"),K(">>")}(),K(">>"),K("endobj")},Il=function(y){Nt[y.fontName]=Nt[y.fontName]||{},Nt[y.fontName][y.fontStyle]=y.id},va=function(y,O,Y,re,ce){var Ne={id:"F"+(Object.keys(It).length+1).toString(10),postScriptName:y,fontName:O,fontStyle:Y,encoding:re,isStandardFont:ce||!1,metadata:{}};return Rt.publish("addFont",{font:Ne,instance:this}),It[Ne.id]=Ne,Il(Ne),Ne.id},xr=m.__private__.pdfEscape=m.pdfEscape=function(y,O){return function(Y,re){var ce,Ne,Te,ze,Ke,pt,_t,Mt,Jt;if(Te=(re=re||{}).sourceEncoding||"Unicode",Ke=re.outputEncoding,(re.autoencode||Ke)&&It[Ge].metadata&&It[Ge].metadata[Te]&&It[Ge].metadata[Te].encoding&&(ze=It[Ge].metadata[Te].encoding,!Ke&&It[Ge].encoding&&(Ke=It[Ge].encoding),!Ke&&ze.codePages&&(Ke=ze.codePages[0]),typeof Ke=="string"&&(Ke=ze[Ke]),Ke)){for(_t=!1,pt=[],ce=0,Ne=Y.length;ce<Ne;ce++)(Mt=Ke[Y.charCodeAt(ce)])?pt.push(String.fromCharCode(Mt)):pt.push(Y[ce]),pt[ce].charCodeAt(0)>>8&&(_t=!0);Y=pt.join("")}for(ce=Y.length;_t===void 0&&ce!==0;)Y.charCodeAt(ce-1)>>8&&(_t=!0),ce--;if(!_t)return Y;for(pt=re.noBOM?[]:[254,255],ce=0,Ne=Y.length;ce<Ne;ce++){if((Jt=(Mt=Y.charCodeAt(ce))>>8)>>8)throw new Error("Character at position "+ce+" of string '"+Y+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");pt.push(Jt),pt.push(Mt-(Jt<<8))}return String.fromCharCode.apply(void 0,pt)}(y,O).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Ri=m.__private__.beginPage=function(y){ke[++Tt]=[],at[Tt]={objId:0,contentsObjId:0,userUnit:Number(a),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(y[0]),topRightY:Number(y[1])}},kl(Tt),$e(ke[G])},ya=function(y,O){var Y,re,ce;switch(n=O||n,typeof y=="string"&&(Y=b(y.toLowerCase()),Array.isArray(Y)&&(re=Y[0],ce=Y[1])),Array.isArray(y)&&(re=y[0]*wt,ce=y[1]*wt),isNaN(re)&&(re=i[0],ce=i[1]),(re>14400||ce>14400)&&(mn.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),re=Math.min(14400,re),ce=Math.min(14400,ce)),i=[re,ce],n.substr(0,1)){case"l":ce>re&&(i=[ce,re]);break;case"p":re>ce&&(i=[ce,re])}Ri(i),dt(_a),K(Ns),un!==0&&K(un+" J"),Dl!==0&&K(Dl+" j"),Rt.publish("addPage",{pageNumber:Tt})},Tl=function(y){y>0&&y<=Tt&&(ke.splice(y,1),at.splice(y,1),Tt--,G>Tt&&(G=Tt),this.setPage(G))},kl=function(y){y>0&&y<=Tt&&(G=y)},Pl=m.__private__.getNumberOfPages=m.getNumberOfPages=function(){return ke.length-1},Cl=function(y,O,Y){var re,ce=void 0;return Y=Y||{},y=y!==void 0?y:It[Ge].fontName,O=O!==void 0?O:It[Ge].fontStyle,re=y.toLowerCase(),Nt[re]!==void 0&&Nt[re][O]!==void 0?ce=Nt[re][O]:Nt[y]!==void 0&&Nt[y][O]!==void 0?ce=Nt[y][O]:Y.disableWarning===!1&&mn.warn("Unable to look up font label for font '"+y+"', '"+O+"'. Refer to getFontList() for available fonts."),ce||Y.noFallback||(ce=Nt.times[O])==null&&(ce=Nt.times.normal),ce},vi=m.__private__.putInfo=function(){var y=Tn(),O=function(re){return re};for(var Y in c!==null&&(O=dn.encryptor(y,0)),K("<<"),K("/Producer ("+xr(O("jsPDF "+rt.version))+")"),kt)kt.hasOwnProperty(Y)&&kt[Y]&&K("/"+Y.substr(0,1).toUpperCase()+Y.substr(1)+" ("+xr(O(kt[Y]))+")");K("/CreationDate ("+xr(O(de))+")"),K(">>"),K("endobj")},Xs=m.__private__.putCatalog=function(y){var O=(y=y||{}).rootDictionaryObjId||Ks;switch(Tn(),K("<<"),K("/Type /Catalog"),K("/Pages "+O+" 0 R"),it||(it="fullwidth"),it){case"fullwidth":K("/OpenAction [3 0 R /FitH null]");break;case"fullheight":K("/OpenAction [3 0 R /FitV null]");break;case"fullpage":K("/OpenAction [3 0 R /Fit]");break;case"original":K("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Y=""+it;Y.substr(Y.length-1)==="%"&&(it=parseInt(it)/100),typeof it=="number"&&K("/OpenAction [3 0 R /XYZ null null "+x(it)+"]")}switch(Lt||(Lt="continuous"),Lt){case"continuous":K("/PageLayout /OneColumn");break;case"single":K("/PageLayout /SinglePage");break;case"two":case"twoleft":K("/PageLayout /TwoColumnLeft");break;case"tworight":K("/PageLayout /TwoColumnRight")}tt&&K("/PageMode /"+tt),Rt.publish("putCatalog"),K(">>"),K("endobj")},Tu=m.__private__.putTrailer=function(){K("trailer"),K("<<"),K("/Size "+(ne+1)),K("/Root "+ne+" 0 R"),K("/Info "+(ne-1)+" 0 R"),c!==null&&K("/Encrypt "+dn.oid+" 0 R"),K("/ID [ <"+me+"> <"+me+"> ]"),K(">>")},Ln=m.__private__.putHeader=function(){K("%PDF-"+S),K("%")},ku=m.__private__.putXRef=function(){var y="0000000000";K("xref"),K("0 "+(ne+1)),K("0000000000 65535 f ");for(var O=1;O<=ne;O++)typeof ie[O]=="function"?K((y+ie[O]()).slice(-10)+" 00000 n "):ie[O]!==void 0?K((y+ie[O]).slice(-10)+" 00000 n "):K("0000000000 00000 n ")},ns=m.__private__.buildDocument=function(){var y;ne=0,_e=0,ve=[],ie=[],xe=[],Ks=or(),Br=or(),$e(ve),Rt.publish("buildDocument"),Ln(),Li(),function(){Rt.publish("putAdditionalObjects");for(var Y=0;Y<xe.length;Y++){var re=xe[Y];kn(re.objId,!0),K(re.content),K("endobj")}Rt.publish("postPutAdditionalObjects")}(),y=[],function(){for(var Y in It)It.hasOwnProperty(Y)&&(g===!1||g===!0&&v.hasOwnProperty(Y))&&bs(It[Y])}(),function(){var Y;for(Y in ht)ht.hasOwnProperty(Y)&&Xc(ht[Y])}(),function(){for(var Y in Kn)Kn.hasOwnProperty(Y)&&Qs(Kn[Y])}(),function(Y){var re;for(re in st)st.hasOwnProperty(re)&&(st[re]instanceof $l?Eo(st[re]):st[re]instanceof ac&&Io(st[re],Y))}(y),Rt.publish("putResources"),y.forEach(Js),Js({resourcesOid:Br,objectOid:Number.MAX_SAFE_INTEGER}),Rt.publish("postPutResources"),c!==null&&(dn.oid=Tn(),K("<<"),K("/Filter /Standard"),K("/V "+dn.v),K("/R "+dn.r),K("/U <"+dn.toHexString(dn.U)+">"),K("/O <"+dn.toHexString(dn.O)+">"),K("/P "+dn.P),K(">>"),K("endobj")),vi(),Xs();var O=_e;return ku(),Tu(),K("startxref"),K(""+O),K("%%EOF"),$e(ke[G]),ve.join(`
`)},To=m.__private__.getBlob=function(y){return new Blob([Et(y)],{type:"application/pdf"})},Ll=m.output=m.__private__.output=(_r=function(y,O){switch(typeof(O=O||{})=="string"?O={filename:O}:O.filename=O.filename||"generated.pdf",y){case void 0:return ns();case"save":m.save(O.filename);break;case"arraybuffer":return Et(ns());case"blob":return To(ns());case"bloburi":case"bloburl":if(gt.URL!==void 0&&typeof gt.URL.createObjectURL=="function")return gt.URL&&gt.URL.createObjectURL(To(ns()))||void 0;mn.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Y="",re=ns();try{Y=wb(re)}catch{Y=wb(unescape(encodeURIComponent(re)))}return"data:application/pdf;filename="+O.filename+";base64,"+Y;case"pdfobjectnewwindow":if(Object.prototype.toString.call(gt)==="[object Window]"){var ce="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Ne=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';O.pdfObjectUrl&&(ce=O.pdfObjectUrl,Ne="");var Te='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+ce+'"'+Ne+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(O)+");<\/script></body></html>",ze=gt.open();return ze!==null&&ze.document.write(Te),ze}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(gt)==="[object Window]"){var Ke='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(O.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+O.filename+'" width="500px" height="400px" /></body></html>',pt=gt.open();if(pt!==null){pt.document.write(Ke);var _t=this;pt.document.documentElement.querySelector("#pdfViewer").onload=function(){pt.document.title=O.filename,pt.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(_t.output("bloburl"))}}return pt}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(gt)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Mt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",O)+'"></iframe></body></html>',Jt=gt.open();if(Jt!==null&&(Jt.document.write(Mt),Jt.document.title=O.filename),Jt||typeof safari>"u")return Jt;break;case"datauri":case"dataurl":return gt.document.location.href=this.output("datauristring",O);default:return null}},_r.foo=function(){try{return _r.apply(this,arguments)}catch(Y){var y=Y.stack||"";~y.indexOf(" at ")&&(y=y.split(" at ")[1]);var O="Error in function "+y.split(`
`)[0].split("<")[0]+": "+Y.message;if(!gt.console)throw new Error(O);gt.console.error(O,Y),gt.alert&&alert(O)}},_r.foo.bar=_r,_r.foo),yi=function(y){return Array.isArray(Gs)===!0&&Gs.indexOf(y)>-1};switch(r){case"pt":wt=1;break;case"mm":wt=72/25.4;break;case"cm":wt=72/2.54;break;case"in":wt=72;break;case"px":wt=yi("px_scaling")==1?.75:96/72;break;case"pc":case"em":wt=12;break;case"ex":wt=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);wt=r}var dn=null;he(),Q();var dr=m.__private__.getPageInfo=m.getPageInfo=function(y){if(isNaN(y)||y%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:at[y].objId,pageNumber:y,pageContext:at[y]}},ko=m.__private__.getPageInfoByObjId=function(y){if(isNaN(y)||y%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var O in at)if(at[O].objId===y)break;return dr(O)},wa=m.__private__.getCurrentPageInfo=m.getCurrentPageInfo=function(){return{objId:at[G].objId,pageNumber:G,pageContext:at[G]}};m.addPage=function(){return ya.apply(this,arguments),this},m.setPage=function(){return kl.apply(this,arguments),$e.call(this,ke[G]),this},m.insertPage=function(y){return this.addPage(),this.movePage(G,y),this},m.movePage=function(y,O){var Y,re;if(y>O){Y=ke[y],re=at[y];for(var ce=y;ce>O;ce--)ke[ce]=ke[ce-1],at[ce]=at[ce-1];ke[O]=Y,at[O]=re,this.setPage(O)}else if(y<O){Y=ke[y],re=at[y];for(var Ne=y;Ne<O;Ne++)ke[Ne]=ke[Ne+1],at[Ne]=at[Ne+1];ke[O]=Y,at[O]=re,this.setPage(O)}return this},m.deletePage=function(){return Tl.apply(this,arguments),this},m.__private__.text=m.text=function(y,O,Y,re,ce){var Ne,Te,ze,Ke,pt,_t,Mt,Jt,Rn,tn=(re=re||{}).scope||this;if(typeof y=="number"&&typeof O=="number"&&(typeof Y=="string"||Array.isArray(Y))){var zn=Y;Y=O,O=y,y=zn}if(arguments[3]instanceof ct==0?(ze=arguments[4],Ke=arguments[5],on(Mt=arguments[3])==="object"&&Mt!==null||(typeof ze=="string"&&(Ke=ze,ze=null),typeof Mt=="string"&&(Ke=Mt,Mt=null),typeof Mt=="number"&&(ze=Mt,Mt=null),re={flags:Mt,angle:ze,align:Ke})):(I("The transform parameter of text() with a Matrix value"),Rn=ce),isNaN(O)||isNaN(Y)||y==null)throw new Error("Invalid arguments passed to jsPDF.text");if(y.length===0)return tn;var jn,qn="",Dn=typeof re.lineHeightFactor=="number"?re.lineHeightFactor:eo,wi=tn.internal.scaleFactor;function us(en){return en=en.split("	").join(Array(re.TabLen||9).join(" ")),xr(en,Mt)}function cs(en){for(var fn,Jn=en.concat(),fr=[],Do=Jn.length;Do--;)typeof(fn=Jn.shift())=="string"?fr.push(fn):Array.isArray(en)&&(fn.length===1||fn[1]===void 0&&fn[2]===void 0)?fr.push(fn[0]):fr.push([fn[0],fn[1],fn[2]]);return fr}function d(en,fn){var Jn;if(typeof en=="string")Jn=fn(en)[0];else if(Array.isArray(en)){for(var fr,Do,dh=en.concat(),Fu=[],uf=dh.length;uf--;)typeof(fr=dh.shift())=="string"?Fu.push(fn(fr)[0]):Array.isArray(fr)&&typeof fr[0]=="string"&&(Do=fn(fr[0],fr[1],fr[2]),Fu.push([Do[0],Do[1],Do[2]]));Jn=Fu}return Jn}var _=!1,C=!0;if(typeof y=="string")_=!0;else if(Array.isArray(y)){var W=y.concat();Te=[];for(var fe,be=W.length;be--;)(typeof(fe=W.shift())!="string"||Array.isArray(fe)&&typeof fe[0]!="string")&&(C=!1);_=C}if(_===!1)throw new Error('Type of text must be string or Array. "'+y+'" is not recognized.');typeof y=="string"&&(y=y.match(/[\r?\n]/)?y.split(/\r\n|\r|\n/g):[y]);var Oe=Ce/tn.internal.scaleFactor,Vt=Oe*(Dn-1);switch(re.baseline){case"bottom":Y-=Vt;break;case"top":Y+=Oe-Vt;break;case"hanging":Y+=Oe-2*Vt;break;case"middle":Y+=Oe/2-Vt}if((_t=re.maxWidth||0)>0&&(typeof y=="string"?y=tn.splitTextToSize(y,_t):Object.prototype.toString.call(y)==="[object Array]"&&(y=y.reduce(function(en,fn){return en.concat(tn.splitTextToSize(fn,_t))},[]))),Ne={text:y,x:O,y:Y,options:re,mutex:{pdfEscape:xr,activeFontKey:Ge,fonts:It,activeFontSize:Ce}},Rt.publish("preProcessText",Ne),y=Ne.text,ze=(re=Ne.options).angle,Rn instanceof ct==0&&ze&&typeof ze=="number"){ze*=Math.PI/180,re.rotationDirection===0&&(ze=-ze),U===j&&(ze=-ze);var On=Math.cos(ze),jt=Math.sin(ze);Rn=new ct(On,jt,-jt,On,0,0)}else ze&&ze instanceof ct&&(Rn=ze);U!==j||Rn||(Rn=ts),(pt=re.charSpace||ss)!==void 0&&(qn+=N(P(pt))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Jt=re.horizontalScale)!==void 0&&(qn+=N(100*Jt)+` Tz
`),re.lang;var Yt=-1,yn=re.renderingMode!==void 0?re.renderingMode:re.stroke,Di=tn.internal.getCurrentPageInfo().pageContext;switch(yn){case 0:case!1:case"fill":Yt=0;break;case 1:case!0:case"stroke":Yt=1;break;case 2:case"fillThenStroke":Yt=2;break;case 3:case"invisible":Yt=3;break;case 4:case"fillAndAddForClipping":Yt=4;break;case 5:case"strokeAndAddPathForClipping":Yt=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Yt=6;break;case 7:case"addToPathForClipping":Yt=7}var qr=Di.usedRenderingMode!==void 0?Di.usedRenderingMode:-1;Yt!==-1?qn+=Yt+` Tr
`:qr!==-1&&(qn+=`0 Tr
`),Yt!==-1&&(Di.usedRenderingMode=Yt),Ke=re.align||"left";var kr,As=Ce*Dn,sh=tn.internal.pageSize.getWidth(),oh=It[Ge];pt=re.charSpace||ss,_t=re.maxWidth||0,Mt=Object.assign({autoencode:!0,noBOM:!0},re.flags);var Aa=[],Ml=function(en){return tn.getStringUnitWidth(en,{font:oh,charSpace:pt,fontSize:Ce,doKerning:!1})*Ce/wi};if(Object.prototype.toString.call(y)==="[object Array]"){var Oi;Te=cs(y),Ke!=="left"&&(kr=Te.map(Ml));var Fi,Ea=0;if(Ke==="right"){O-=kr[0],y=[],be=Te.length;for(var jo=0;jo<be;jo++)jo===0?(Fi=br(O),Oi=Ss(Y)):(Fi=P(Ea-kr[jo]),Oi=-As),y.push([Te[jo],Fi,Oi]),Ea=kr[jo]}else if(Ke==="center"){O-=kr[0]/2,y=[],be=Te.length;for(var Ia=0;Ia<be;Ia++)Ia===0?(Fi=br(O),Oi=Ss(Y)):(Fi=P((Ea-kr[Ia])/2),Oi=-As),y.push([Te[Ia],Fi,Oi]),Ea=kr[Ia]}else if(Ke==="left"){y=[],be=Te.length;for(var ah=0;ah<be;ah++)y.push(Te[ah])}else if(Ke==="justify"&&oh.encoding==="Identity-H"){y=[],be=Te.length,_t=_t!==0?_t:sh;for(var Ou=0,Qn=0;Qn<be;Qn++)if(Oi=Qn===0?Ss(Y):-As,Fi=Qn===0?br(O):Ou,Qn<be-1){var lf=P((_t-kr[Qn])/(Te[Qn].split(" ").length-1)),ro=Te[Qn].split(" ");y.push([ro[0]+" ",Fi,Oi]),Ou=0;for(var io=1;io<ro.length;io++){var lh=(Ml(ro[io-1]+" "+ro[io])-Ml(ro[io]))*wi+lf;io==ro.length-1?y.push([ro[io],lh,0]):y.push([ro[io]+" ",lh,0]),Ou-=lh}}else y.push([Te[Qn],Fi,Oi]);y.push(["",Ou,0])}else{if(Ke!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(y=[],be=Te.length,_t=_t!==0?_t:sh,Qn=0;Qn<be;Qn++){Oi=Qn===0?Ss(Y):-As,Fi=Qn===0?br(O):0;var uh=Te[Qn].split(" ").length-1,ch=uh>0?(_t-kr[Qn])/uh:0;Qn<be-1?Aa.push(N(P(ch))):Aa.push(0),y.push([Te[Qn],Fi,Oi])}}}(typeof re.R2L=="boolean"?re.R2L:ot)===!0&&(y=d(y,function(en,fn,Jn){return[en.split("").reverse().join(""),fn,Jn]})),Ne={text:y,x:O,y:Y,options:re,mutex:{pdfEscape:xr,activeFontKey:Ge,fonts:It,activeFontSize:Ce}},Rt.publish("postProcessText",Ne),y=Ne.text,jn=Ne.mutex.isHex||!1;var hh=It[Ge].encoding;hh!=="WinAnsiEncoding"&&hh!=="StandardEncoding"||(y=d(y,function(en,fn,Jn){return[us(en),fn,Jn]})),Te=cs(y),y=[];for(var Ta,ka,Pa,Ul=Array.isArray(Te[0])?1:0,Ca="",Vl=function(en,fn,Jn){var fr="";return Jn instanceof ct?(Jn=typeof re.angle=="number"?bn(Jn,new ct(1,0,0,1,en,fn)):bn(new ct(1,0,0,1,en,fn),Jn),U===j&&(Jn=bn(new ct(1,0,0,-1,0,0),Jn)),fr=Jn.join(" ")+` Tm
`):fr=N(en)+" "+N(fn)+` Td
`,fr},hs=0;hs<Te.length;hs++){switch(Ca="",Ul){case 1:Pa=(jn?"<":"(")+Te[hs][0]+(jn?">":")"),Ta=parseFloat(Te[hs][1]),ka=parseFloat(Te[hs][2]);break;case 0:Pa=(jn?"<":"(")+Te[hs]+(jn?">":")"),Ta=br(O),ka=Ss(Y)}Aa!==void 0&&Aa[hs]!==void 0&&(Ca=Aa[hs]+` Tw
`),hs===0?y.push(Ca+Vl(Ta,ka,Rn)+Pa):Ul===0?y.push(Ca+Pa):Ul===1&&y.push(Ca+Vl(Ta,ka,Rn)+Pa)}y=Ul===0?y.join(` Tj
T* `):y.join(` Tj
`),y+=` Tj
`;var so=`BT
/`;return so+=Ge+" "+Ce+` Tf
`,so+=N(Ce*Dn)+` TL
`,so+=ji+`
`,so+=qn,so+=y,K(so+="ET"),v[Ge]=!0,tn};var Pu=m.__private__.clip=m.clip=function(y){return K(y==="evenodd"?"W*":"W"),this};m.clipEvenOdd=function(){return Pu("evenodd")},m.__private__.discardPath=m.discardPath=function(){return K("n"),this};var Ft=m.__private__.isValidStyle=function(y){var O=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(y)!==-1&&(O=!0),O};m.__private__.setDefaultPathOperation=m.setDefaultPathOperation=function(y){return Ft(y)&&(u=y),this};var Po=m.__private__.getStyle=m.getStyle=function(y){var O=u;switch(y){case"D":case"S":O="S";break;case"F":O="f";break;case"FD":case"DF":O="B";break;case"f":case"f*":case"B":case"B*":O=y}return O},Zs=m.close=function(){return K("h"),this};m.stroke=function(){return K("S"),this},m.fill=function(y){return rs("f",y),this},m.fillEvenOdd=function(y){return rs("f*",y),this},m.fillStroke=function(y){return rs("B",y),this},m.fillStrokeEvenOdd=function(y){return rs("B*",y),this};var rs=function(y,O){on(O)==="object"?Zc(O,y):K(y)},Co=function(y){y===null||U===j&&y===void 0||(y=Po(y),K(y))};function Cu(y,O,Y,re,ce){var Ne=new ac(O||this.boundingBox,Y||this.xStep,re||this.yStep,this.gState,ce||this.matrix);Ne.stream=this.stream;var Te=y+"$$"+this.cloneIndex+++"$$";return wr(Te,Ne),Ne}var Zc=function(y,O){var Y=Xt[y.key],re=st[Y];if(re instanceof $l)K("q"),K(eh(O)),re.gState&&m.setGState(re.gState),K(y.matrix.toString()+" cm"),K("/"+Y+" sh"),K("Q");else if(re instanceof ac){var ce=new ct(1,0,0,-1,0,ls());y.matrix&&(ce=ce.multiply(y.matrix||ts),Y=Cu.call(re,y.key,y.boundingBox,y.xStep,y.yStep,ce).id),K("q"),K("/Pattern cs"),K("/"+Y+" scn"),re.gState&&m.setGState(re.gState),K(O),K("Q")}},eh=function(y){switch(y){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},Rl=m.moveTo=function(y,O){return K(N(P(y))+" "+N(te(O))+" m"),this},Lu=m.lineTo=function(y,O){return K(N(P(y))+" "+N(te(O))+" l"),this},Tr=m.curveTo=function(y,O,Y,re,ce,Ne){return K([N(P(y)),N(te(O)),N(P(Y)),N(te(re)),N(P(ce)),N(te(Ne)),"c"].join(" ")),this};m.__private__.line=m.line=function(y,O,Y,re,ce){if(isNaN(y)||isNaN(O)||isNaN(Y)||isNaN(re)||!Ft(ce))throw new Error("Invalid arguments passed to jsPDF.line");return U===k?this.lines([[Y-y,re-O]],y,O,[1,1],ce||"S"):this.lines([[Y-y,re-O]],y,O,[1,1]).stroke()},m.__private__.lines=m.lines=function(y,O,Y,re,ce,Ne){var Te,ze,Ke,pt,_t,Mt,Jt,Rn,tn,zn,jn,qn;if(typeof y=="number"&&(qn=Y,Y=O,O=y,y=qn),re=re||[1,1],Ne=Ne||!1,isNaN(O)||isNaN(Y)||!Array.isArray(y)||!Array.isArray(re)||!Ft(ce)||typeof Ne!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Rl(O,Y),Te=re[0],ze=re[1],pt=y.length,zn=O,jn=Y,Ke=0;Ke<pt;Ke++)(_t=y[Ke]).length===2?(zn=_t[0]*Te+zn,jn=_t[1]*ze+jn,Lu(zn,jn)):(Mt=_t[0]*Te+zn,Jt=_t[1]*ze+jn,Rn=_t[2]*Te+zn,tn=_t[3]*ze+jn,zn=_t[4]*Te+zn,jn=_t[5]*ze+jn,Tr(Mt,Jt,Rn,tn,zn,jn));return Ne&&Zs(),Co(ce),this},m.path=function(y){for(var O=0;O<y.length;O++){var Y=y[O],re=Y.c;switch(Y.op){case"m":Rl(re[0],re[1]);break;case"l":Lu(re[0],re[1]);break;case"c":Tr.apply(this,re);break;case"h":Zs()}}return this},m.__private__.rect=m.rect=function(y,O,Y,re,ce){if(isNaN(y)||isNaN(O)||isNaN(Y)||isNaN(re)||!Ft(ce))throw new Error("Invalid arguments passed to jsPDF.rect");return U===k&&(re=-re),K([N(P(y)),N(te(O)),N(P(Y)),N(P(re)),"re"].join(" ")),Co(ce),this},m.__private__.triangle=m.triangle=function(y,O,Y,re,ce,Ne,Te){if(isNaN(y)||isNaN(O)||isNaN(Y)||isNaN(re)||isNaN(ce)||isNaN(Ne)||!Ft(Te))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Y-y,re-O],[ce-Y,Ne-re],[y-ce,O-Ne]],y,O,[1,1],Te,!0),this},m.__private__.roundedRect=m.roundedRect=function(y,O,Y,re,ce,Ne,Te){if(isNaN(y)||isNaN(O)||isNaN(Y)||isNaN(re)||isNaN(ce)||isNaN(Ne)||!Ft(Te))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var ze=4/3*(Math.SQRT2-1);return ce=Math.min(ce,.5*Y),Ne=Math.min(Ne,.5*re),this.lines([[Y-2*ce,0],[ce*ze,0,ce,Ne-Ne*ze,ce,Ne],[0,re-2*Ne],[0,Ne*ze,-ce*ze,Ne,-ce,Ne],[2*ce-Y,0],[-ce*ze,0,-ce,-Ne*ze,-ce,-Ne],[0,2*Ne-re],[0,-Ne*ze,ce*ze,-Ne,ce,-Ne]],y+ce,O,[1,1],Te,!0),this},m.__private__.ellipse=m.ellipse=function(y,O,Y,re,ce){if(isNaN(y)||isNaN(O)||isNaN(Y)||isNaN(re)||!Ft(ce))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Ne=4/3*(Math.SQRT2-1)*Y,Te=4/3*(Math.SQRT2-1)*re;return Rl(y+Y,O),Tr(y+Y,O-Te,y+Ne,O-re,y,O-re),Tr(y-Ne,O-re,y-Y,O-Te,y-Y,O),Tr(y-Y,O+Te,y-Ne,O+re,y,O+re),Tr(y+Ne,O+re,y+Y,O+Te,y+Y,O),Co(ce),this},m.__private__.circle=m.circle=function(y,O,Y,re){if(isNaN(y)||isNaN(O)||isNaN(Y)||!Ft(re))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(y,O,Y,Y,re)},m.setFont=function(y,O,Y){return Y&&(O=D(O,Y)),Ge=Cl(y,O,{disableWarning:!1}),this};var is=m.__private__.getFont=m.getFont=function(){return It[Cl.apply(m,arguments)]};m.__private__.getFontList=m.getFontList=function(){var y,O,Y={};for(y in Nt)if(Nt.hasOwnProperty(y))for(O in Y[y]=[],Nt[y])Nt[y].hasOwnProperty(O)&&Y[y].push(O);return Y},m.addFont=function(y,O,Y,re,ce){var Ne=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Ne.indexOf(arguments[3])!==-1?ce=arguments[3]:arguments[3]&&Ne.indexOf(arguments[3])==-1&&(Y=D(Y,re)),va.call(this,y,O,Y,ce=ce||"Identity-H")};var eo,_a=t.lineWidth||.200025,Ru=m.__private__.getLineWidth=m.getLineWidth=function(){return _a},dt=m.__private__.setLineWidth=m.setLineWidth=function(y){return _a=y,K(N(P(y))+" w"),this};m.__private__.setLineDash=rt.API.setLineDash=rt.API.setLineDashPattern=function(y,O){if(y=y||[],O=O||0,isNaN(O)||!Array.isArray(y))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return y=y.map(function(Y){return N(P(Y))}).join(" "),O=N(P(O)),K("["+y+"] "+O+" d"),this};var th=m.__private__.getLineHeight=m.getLineHeight=function(){return Ce*eo};m.__private__.getLineHeight=m.getLineHeight=function(){return Ce*eo};var nh=m.__private__.setLineHeightFactor=m.setLineHeightFactor=function(y){return typeof(y=y||1.15)=="number"&&(eo=y),this},rh=m.__private__.getLineHeightFactor=m.getLineHeightFactor=function(){return eo};nh(t.lineHeight);var br=m.__private__.getHorizontalCoordinate=function(y){return P(y)},Ss=m.__private__.getVerticalCoordinate=function(y){return U===j?y:at[G].mediaBox.topRightY-at[G].mediaBox.bottomLeftY-P(y)},ih=m.__private__.getHorizontalCoordinateString=m.getHorizontalCoordinateString=function(y){return N(br(y))},xa=m.__private__.getVerticalCoordinateString=m.getVerticalCoordinateString=function(y){return N(Ss(y))},Ns=t.strokeColor||"0 G";m.__private__.getStrokeColor=m.getDrawColor=function(){return Ci(Ns)},m.__private__.setStrokeColor=m.setDrawColor=function(y,O,Y,re){return Ns=si({ch1:y,ch2:O,ch3:Y,ch4:re,pdfColorType:"draw",precision:2}),K(Ns),this};var ba=t.fillColor||"0 g";m.__private__.getFillColor=m.getFillColor=function(){return Ci(ba)},m.__private__.setFillColor=m.setFillColor=function(y,O,Y,re){return ba=si({ch1:y,ch2:O,ch3:Y,ch4:re,pdfColorType:"fill",precision:2}),K(ba),this};var ji=t.textColor||"0 g",Lo=m.__private__.getTextColor=m.getTextColor=function(){return Ci(ji)};m.__private__.setTextColor=m.setTextColor=function(y,O,Y,re){return ji=si({ch1:y,ch2:O,ch3:Y,ch4:re,pdfColorType:"text",precision:3}),this};var ss=t.charSpace,jl=m.__private__.getCharSpace=m.getCharSpace=function(){return parseFloat(ss||0)};m.__private__.setCharSpace=m.setCharSpace=function(y){if(isNaN(y))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return ss=y,this};var un=0;m.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},m.__private__.setLineCap=m.setLineCap=function(y){var O=m.CapJoinStyles[y];if(O===void 0)throw new Error("Line cap style of '"+y+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return un=O,K(O+" J"),this};var Dl=0;m.__private__.setLineJoin=m.setLineJoin=function(y){var O=m.CapJoinStyles[y];if(O===void 0)throw new Error("Line join style of '"+y+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Dl=O,K(O+" j"),this},m.__private__.setLineMiterLimit=m.__private__.setMiterLimit=m.setLineMiterLimit=m.setMiterLimit=function(y){if(y=y||0,isNaN(y))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return K(N(P(y))+" M"),this},m.GState=Am,m.setGState=function(y){(y=typeof y=="string"?ht[vt[y]]:ju(null,y)).equals(Zt)||(K("/"+y.id+" gs"),Zt=y)};var ju=function(y,O){if(!y||!vt[y]){var Y=!1;for(var re in ht)if(ht.hasOwnProperty(re)&&ht[re].equals(O)){Y=!0;break}if(Y)O=ht[re];else{var ce="GS"+(Object.keys(ht).length+1).toString(10);ht[ce]=O,O.id=ce}return y&&(vt[y]=O.id),Rt.publish("addGState",O),O}};m.addGState=function(y,O){return ju(y,O),this},m.saveGraphicsState=function(){return K("q"),vn.push({key:Ge,size:Ce,color:ji}),this},m.restoreGraphicsState=function(){K("Q");var y=vn.pop();return Ge=y.key,Ce=y.size,ji=y.color,Zt=null,this},m.setCurrentTransformationMatrix=function(y){return K(y.toString()+" cm"),this},m.comment=function(y){return K("#"+y),this};var os=function(y,O){var Y=y||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Y},set:function(Ne){isNaN(Ne)||(Y=parseFloat(Ne))}});var re=O||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return re},set:function(Ne){isNaN(Ne)||(re=parseFloat(Ne))}});var ce="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return ce},set:function(Ne){ce=Ne.toString()}}),this},Sa=function(y,O,Y,re){os.call(this,y,O),this.type="rect";var ce=Y||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return ce},set:function(Te){isNaN(Te)||(ce=parseFloat(Te))}});var Ne=re||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Ne},set:function(Te){isNaN(Te)||(Ne=parseFloat(Te))}}),this},Ro=function(){this.page=Tt,this.currentPage=G,this.pages=ke.slice(0),this.pagesContext=at.slice(0),this.x=et,this.y=hn,this.matrix=Ot,this.width=oi(G),this.height=Du(G),this.outputDestination=De,this.id="",this.objectNumber=-1};Ro.prototype.restore=function(){Tt=this.page,G=this.currentPage,at=this.pagesContext,ke=this.pages,et=this.x,hn=this.y,Ot=this.matrix,Ol(G,this.width),ai(G,this.height),De=this.outputDestination};var to=function(y,O,Y,re,ce){Vr.push(new Ro),Tt=G=0,ke=[],et=y,hn=O,Ot=ce,Ri([Y,re])};for(var no in m.beginFormObject=function(y,O,Y,re,ce){return to(y,O,Y,re,ce),this},m.endFormObject=function(y){return function(O){if(es[O])Vr.pop().restore();else{var Y=new Ro,re="Xo"+(Object.keys(Kn).length+1).toString(10);Y.id=re,es[O]=re,Kn[re]=Y,Rt.publish("addFormObject",Y),Vr.pop().restore()}}(y),this},m.doFormObject=function(y,O){var Y=Kn[es[y]];return K("q"),K(O.toString()+" cm"),K("/"+Y.id+" Do"),K("Q"),this},m.getFormObject=function(y){var O=Kn[es[y]];return{x:O.x,y:O.y,width:O.width,height:O.height,matrix:O.matrix}},m.save=function(y,O){return y=y||"generated.pdf",(O=O||{}).returnPromise=O.returnPromise||!1,O.returnPromise===!1?(Wl(To(ns()),y),typeof Wl.unload=="function"&&gt.setTimeout&&setTimeout(Wl.unload,911),this):new Promise(function(Y,re){try{var ce=Wl(To(ns()),y);typeof Wl.unload=="function"&&gt.setTimeout&&setTimeout(Wl.unload,911),Y(ce)}catch(Ne){re(Ne.message)}})},rt.API)rt.API.hasOwnProperty(no)&&(no==="events"&&rt.API.events.length?function(y,O){var Y,re,ce;for(ce=O.length-1;ce!==-1;ce--)Y=O[ce][0],re=O[ce][1],y.subscribe.apply(y,[Y].concat(typeof re=="function"?[re]:re))}(Rt,rt.API.events):m[no]=rt.API[no]);function oi(y){return at[y].mediaBox.topRightX-at[y].mediaBox.bottomLeftX}function Ol(y,O){at[y].mediaBox.topRightX=O+at[y].mediaBox.bottomLeftX}function Du(y){return at[y].mediaBox.topRightY-at[y].mediaBox.bottomLeftY}function ai(y,O){at[y].mediaBox.topRightY=O+at[y].mediaBox.bottomLeftY}var as=m.getPageWidth=function(y){return oi(y=y||G)/wt},Na=m.setPageWidth=function(y,O){Ol(y,O*wt)},ls=m.getPageHeight=function(y){return Du(y=y||G)/wt},Fl=m.setPageHeight=function(y,O){ai(y,O*wt)};return m.internal={pdfEscape:xr,getStyle:Po,getFont:is,getFontSize:Be,getCharSpace:jl,getTextColor:Lo,getLineHeight:th,getLineHeightFactor:rh,getLineWidth:Ru,write:Ue,getHorizontalCoordinate:br,getVerticalCoordinate:Ss,getCoordinateString:ih,getVerticalCoordinateString:xa,collections:{},newObject:Tn,newAdditionalObject:Ao,newObjectDeferred:or,newObjectDeferredBegin:kn,getFilters:zr,putStream:Yn,events:Rt,scaleFactor:wt,pageSize:{getWidth:function(){return as(G)},setWidth:function(y){Na(G,y)},getHeight:function(){return ls(G)},setHeight:function(y){Fl(G,y)}},encryptionOptions:c,encryption:dn,getEncryptor:function(y){return c!==null?dn.encryptor(y,0):function(O){return O}},output:Ll,getNumberOfPages:Pl,get pages(){return ke},out:K,f2:x,f3:T,getPageInfo:dr,getPageInfoByObjId:ko,getCurrentPageInfo:wa,getPDFVersion:A,Point:os,Rectangle:Sa,Matrix:ct,hasHotfix:yi},Object.defineProperty(m.internal.pageSize,"width",{get:function(){return as(G)},set:function(y){Na(G,y)},enumerable:!0,configurable:!0}),Object.defineProperty(m.internal.pageSize,"height",{get:function(){return ls(G)},set:function(y){Fl(G,y)},enumerable:!0,configurable:!0}),(function(y){for(var O=0,Y=ut.length;O<Y;O++){var re=va.call(this,y[O][0],y[O][1],y[O][2],ut[O][3],!0);g===!1&&(v[re]=!0);var ce=y[O][0].split("-");Il({id:re,fontName:ce[0],fontStyle:ce[1]||""})}Rt.publish("addFonts",{fonts:It,dictionary:Nt})}).call(m,ut),Ge="F1",ya(i,n),Rt.publish("initialized"),m}$u.prototype.lsbFirstWord=function(t){return String.fromCharCode(255&t,t>>8&255,t>>16&255,t>>24&255)},$u.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},$u.prototype.hexToBytes=function(t){for(var e=[],n=0;n<t.length;n+=2)e.push(String.fromCharCode(parseInt(t.substr(n,2),16)));return e.join("")},$u.prototype.processOwnerPassword=function(t,e){return D2(j2(e).substr(0,5),t)},$u.prototype.encryptor=function(t,e){var n=j2(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(r){return D2(n,r)}},Am.prototype.equals=function(t){var e,n="id,objectNumber,equals";if(!t||on(t)!==on(this))return!1;var r=0;for(e in this)if(!(n.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;r++}for(e in t)t.hasOwnProperty(e)&&n.indexOf(e)<0&&r--;return r===0},rt.API={events:[]},rt.version="3.0.4";var $n=rt.API,$y=1,Iu=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Bu=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},xt=function(t){return t.toFixed(2)},Ba=function(t){return t.toFixed(5)};$n.__acroform__={};var Pi=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},Sb=function(t){return t*$y},lo=function(t){var e=new rE,n=We.internal.getHeight(t)||0,r=We.internal.getWidth(t)||0;return e.BBox=[0,0,Number(xt(r)),Number(xt(n))],e},jU=$n.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|1<<e},DU=$n.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&~(1<<e)},OU=$n.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return t&1<<e?1:0},nr=$n.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return OU(t,e-1)},rr=$n.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return jU(t,e-1)},ir=$n.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return DU(t,e-1)},FU=$n.__acroform__.calculateCoordinates=function(t,e){var n=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,i=t[0],s=t[1],o=t[2],a=t[3],l={};return l.lowerLeft_X=n(i)||0,l.lowerLeft_Y=r(s+a)||0,l.upperRight_X=n(i+o)||0,l.upperRight_Y=r(s)||0,[Number(xt(l.lowerLeft_X)),Number(xt(l.lowerLeft_Y)),Number(xt(l.upperRight_X)),Number(xt(l.upperRight_Y))]},MU=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],n=t._V||t.DV,r=O2(t,n),i=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+i+" "+xt(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var s=lo(t);return s.scope=t.scope,s.stream=e.join(`
`),s}},O2=function(t,e){var n=t.fontSize===0?t.maxFontSize:t.fontSize,r={text:"",fontSize:""},i=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");i=t.multiline?i.map(function(x){return x.split(`
`)}):i.map(function(x){return[x]});var s=n,o=We.internal.getHeight(t)||0;o=o<0?-o:o;var a=We.internal.getWidth(t)||0;a=a<0?-a:a;var l=function(x,T,P){if(x+1<i.length){var te=T+" "+i[x+1][0];return np(te,t,P).width<=a-4}return!1};s++;e:for(;s>0;){e="",s--;var u,c,g=np("3",t,s).height,v=t.multiline?o-s:(o-g)/2,m=v+=2,S=0,A=0,L=0;if(s<=0){e=`(...) Tj
`,e+="% Width of Text: "+np(e,t,s=12).width+", FieldWidth:"+a+`
`;break}for(var b="",k=0,j=0;j<i.length;j++)if(i.hasOwnProperty(j)){var U=!1;if(i[j].length!==1&&L!==i[j].length-1){if((g+2)*(k+2)+2>o)continue e;b+=i[j][L],U=!0,A=j,j--}else{b=(b+=i[j][L]+" ").substr(b.length-1)==" "?b.substr(0,b.length-1):b;var q=parseInt(j),ee=l(q,b,s),D=j>=i.length-1;if(ee&&!D){b+=" ",L=0;continue}if(ee||D){if(D)A=q;else if(t.multiline&&(g+2)*(k+2)+2>o)continue e}else{if(!t.multiline||(g+2)*(k+2)+2>o)continue e;A=q}}for(var N="",I=S;I<=A;I++){var R=i[I];if(t.multiline){if(I===A){N+=R[L]+" ",L=(L+1)%R.length;continue}if(I===S){N+=R[R.length-1]+" ";continue}}N+=R[0]+" "}switch(N=N.substr(N.length-1)==" "?N.substr(0,N.length-1):N,c=np(N,t,s).width,t.textAlign){case"right":u=a-c-2;break;case"center":u=(a-c)/2;break;default:u=2}e+=xt(u)+" "+xt(m)+` Td
`,e+="("+Iu(N)+`) Tj
`,e+=-xt(u)+` 0 Td
`,m=-(s+2),c=0,S=U?A:A+1,k++,b=""}break}return r.text=e,r.fontSize=s,r},np=function(t,e,n){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),i=e.scope.getStringUnitWidth(t,{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:i}},UU={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},VU=function(t,e){var n={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(r){return r.type===n.type&&r.object===n.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(n)},BU=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(Ws.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(UU)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");$y=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new iE,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(n){n.internal.events.unsubscribe(n.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete n.internal.acroformPlugin.acroFormDictionaryRoot._eventID,n.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(n){n.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=n.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in r)if(r.hasOwnProperty(i)){var s=r[i];s.objId=void 0,s.hasAnnotation&&VU(s,n)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(n){if(n.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");n.internal.write("/AcroForm "+n.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(n){(function(r,i){var s=!r;for(var o in r||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(o)){var a=r[o],l=[],u=a.Rect;if(a.Rect&&(a.Rect=FU(a.Rect,i)),i.internal.newObjectDeferredBegin(a.objId,!0),a.DA=We.createDefaultAppearanceStream(a),on(a)==="object"&&typeof a.getKeyValueListForStream=="function"&&(l=a.getKeyValueListForStream()),a.Rect=u,a.hasAppearanceStream&&!a.appearanceStreamContent){var c=MU(a);l.push({key:"AP",value:"<</N "+c+">>"}),i.internal.acroformPlugin.xForms.push(c)}if(a.appearanceStreamContent){var g="";for(var v in a.appearanceStreamContent)if(a.appearanceStreamContent.hasOwnProperty(v)){var m=a.appearanceStreamContent[v];if(g+="/"+v+" ",g+="<<",Object.keys(m).length>=1||Array.isArray(m)){for(var o in m)if(m.hasOwnProperty(o)){var S=m[o];typeof S=="function"&&(S=S.call(i,a)),g+="/"+o+" "+S+" ",i.internal.acroformPlugin.xForms.indexOf(S)>=0||i.internal.acroformPlugin.xForms.push(S)}}else typeof(S=m)=="function"&&(S=S.call(i,a)),g+="/"+o+" "+S,i.internal.acroformPlugin.xForms.indexOf(S)>=0||i.internal.acroformPlugin.xForms.push(S);g+=">>"}l.push({key:"AP",value:`<<
`+g+">>"})}i.internal.putStream({additionalKeyValues:l,objectId:a.objId}),i.internal.out("endobj")}s&&function(A,L){for(var b in A)if(A.hasOwnProperty(b)){var k=b,j=A[b];L.internal.newObjectDeferredBegin(j.objId,!0),on(j)==="object"&&typeof j.putStream=="function"&&j.putStream(),delete A[k]}}(i.internal.acroformPlugin.xForms,i)})(n,t)}),t.internal.acroformPlugin.isInitialized=!0}},nE=$n.__acroform__.arrayToPdfArray=function(t,e,n){var r=function(o){return o};if(Array.isArray(t)){for(var i="[",s=0;s<t.length;s++)switch(s!==0&&(i+=" "),on(t[s])){case"boolean":case"number":case"object":i+=t[s].toString();break;case"string":t[s].substr(0,1)!=="/"?(e!==void 0&&n&&(r=n.internal.getEncryptor(e)),i+="("+Iu(r(t[s].toString()))+")"):i+=t[s].toString()}return i+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},K0=function(t,e,n){var r=function(i){return i};return e!==void 0&&n&&(r=n.internal.getEncryptor(e)),(t=t||"").toString(),"("+Iu(r(t))+")"},fo=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};fo.prototype.toString=function(){return this.objId+" 0 R"},fo.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},fo.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var n in e)if(Object.getOwnPropertyDescriptor(this,e[n]).configurable===!1){var r=e[n],i=this[r];i&&(Array.isArray(i)?t.push({key:r,value:nE(i,this.objId,this.scope)}):i instanceof fo?(i.scope=this.scope,t.push({key:r,value:i.objId+" 0 R"})):typeof i!="function"&&t.push({key:r,value:i}))}return t};var rE=function(){fo.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(n){t=n.trim()},get:function(){return t||null}})};Pi(rE,fo);var iE=function(){fo.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var n=function(r){return r};return this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),"("+Iu(n(t))+")"}},set:function(n){t=n}})};Pi(iE,fo);var Ws=function t(){fo.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(b){if(isNaN(b))throw new Error('Invalid value "'+b+'" for attribute F supplied.');e=b}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!nr(e,3)},set:function(b){b?this.F=rr(e,3):this.F=ir(e,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(b){if(isNaN(b))throw new Error('Invalid value "'+b+'" for attribute Ff supplied.');n=b}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(b){r=b!==void 0?b:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(b){r[0]=b}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(b){r[1]=b}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(b){r[2]=b}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(b){r[3]=b}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(b){switch(b){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=b;break;default:throw new Error('Invalid value "'+b+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof Em)return;s="FieldObject"+t.FieldNum++}var b=function(k){return k};return this.scope&&(b=this.scope.internal.getEncryptor(this.objId)),"("+Iu(b(s))+")"},set:function(b){s=b.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(b){s=b}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(b){o=b}});var a="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return a},set:function(b){a=b}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(b){l=b}});var u=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return u===void 0?50/$y:u},set:function(b){u=b}});var c="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return c},set:function(b){c=b}});var g="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!g||this instanceof Em||this instanceof tu))return K0(g,this.objId,this.scope)},set:function(b){b=b.toString(),g=b}});var v=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(v)return this instanceof Er==0?K0(v,this.objId,this.scope):v},set:function(b){b=b.toString(),v=this instanceof Er==0?b.substr(0,1)==="("?Bu(b.substr(1,b.length-2)):Bu(b):b}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Er==1?Bu(v.substr(1,v.length-1)):v},set:function(b){b=b.toString(),v=this instanceof Er==1?"/"+b:b}});var m=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(m)return m},set:function(b){this.V=b}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(m)return this instanceof Er==0?K0(m,this.objId,this.scope):m},set:function(b){b=b.toString(),m=this instanceof Er==0?b.substr(0,1)==="("?Bu(b.substr(1,b.length-2)):Bu(b):b}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Er==1?Bu(m.substr(1,m.length-1)):m},set:function(b){b=b.toString(),m=this instanceof Er==1?"/"+b:b}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var S,A=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return A},set:function(b){b=!!b,A=b}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(S)return S},set:function(b){S=b}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!nr(this.Ff,1)},set:function(b){b?this.Ff=rr(this.Ff,1):this.Ff=ir(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!nr(this.Ff,2)},set:function(b){b?this.Ff=rr(this.Ff,2):this.Ff=ir(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!nr(this.Ff,3)},set:function(b){b?this.Ff=rr(this.Ff,3):this.Ff=ir(this.Ff,3)}});var L=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(L!==null)return L},set:function(b){if([0,1,2].indexOf(b)===-1)throw new Error('Invalid value "'+b+'" for attribute Q supplied.');L=b}}),Object.defineProperty(this,"textAlign",{get:function(){var b;switch(L){case 0:default:b="left";break;case 1:b="center";break;case 2:b="right"}return b},configurable:!0,enumerable:!0,set:function(b){switch(b){case"right":case 2:L=2;break;case"center":case 1:L=1;break;default:L=0}}})};Pi(Ws,fo);var yc=function(){Ws.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(n){t=n}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return nE(e,this.objId,this.scope)},set:function(n){var r,i;i=[],typeof(r=n)=="string"&&(i=function(s,o,a){a||(a=1);for(var l,u=[];l=o.exec(s);)u.push(l[a]);return u}(r,/\((.*?)\)/g)),e=i}}),this.getOptions=function(){return e},this.setOptions=function(n){e=n,this.sort&&e.sort()},this.addOption=function(n){n=(n=n||"").toString(),e.push(n),this.sort&&e.sort()},this.removeOption=function(n,r){for(r=r||!1,n=(n=n||"").toString();e.indexOf(n)!==-1&&(e.splice(e.indexOf(n),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!nr(this.Ff,18)},set:function(n){n?this.Ff=rr(this.Ff,18):this.Ff=ir(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!nr(this.Ff,19)},set:function(n){this.combo===!0&&(n?this.Ff=rr(this.Ff,19):this.Ff=ir(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!nr(this.Ff,20)},set:function(n){n?(this.Ff=rr(this.Ff,20),e.sort()):this.Ff=ir(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!nr(this.Ff,22)},set:function(n){n?this.Ff=rr(this.Ff,22):this.Ff=ir(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!nr(this.Ff,23)},set:function(n){n?this.Ff=rr(this.Ff,23):this.Ff=ir(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!nr(this.Ff,27)},set:function(n){n?this.Ff=rr(this.Ff,27):this.Ff=ir(this.Ff,27)}}),this.hasAppearanceStream=!1};Pi(yc,Ws);var wc=function(){yc.call(this),this.fontName="helvetica",this.combo=!1};Pi(wc,yc);var _c=function(){wc.call(this),this.combo=!0};Pi(_c,wc);var Tp=function(){_c.call(this),this.edit=!0};Pi(Tp,_c);var Er=function(){Ws.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!nr(this.Ff,15)},set:function(n){n?this.Ff=rr(this.Ff,15):this.Ff=ir(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!nr(this.Ff,16)},set:function(n){n?this.Ff=rr(this.Ff,16):this.Ff=ir(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!nr(this.Ff,17)},set:function(n){n?this.Ff=rr(this.Ff,17):this.Ff=ir(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!nr(this.Ff,26)},set:function(n){n?this.Ff=rr(this.Ff,26):this.Ff=ir(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(s){return s};if(this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var r,i=[];for(r in i.push("<<"),e)i.push("/"+r+" ("+Iu(n(e[r]))+")");return i.push(">>"),i.join(`
`)}},set:function(n){on(n)==="object"&&(e=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(n){typeof n=="string"&&(e.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(n){t="/"+n}})};Pi(Er,Ws);var kp=function(){Er.call(this),this.pushButton=!0};Pi(kp,Er);var xc=function(){Er.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};Pi(xc,Er);var Em=function(){var t,e;Ws.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(i){e=i}});var n,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(a){return a};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var s,o=[];for(s in o.push("<<"),r)o.push("/"+s+" ("+Iu(i(r[s]))+")");return o.push(">>"),o.join(`
`)},set:function(i){on(i)==="object"&&(r=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(i){typeof i=="string"&&(r.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(i){n=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(i){n="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=We.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Pi(Em,Ws),xc.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var n=this.Kids[e];n.appearanceStreamContent=t.createAppearanceStream(n.optionName),n.caption=t.getCA()}},xc.prototype.createOption=function(t){var e=new Em;return e.Parent=this,e.optionName=t,this.Kids.push(e),zU.call(this.scope,e),e};var Pp=function(){Er.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=We.CheckBox.createAppearanceStream()};Pi(Pp,Er);var tu=function(){Ws.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!nr(this.Ff,13)},set:function(e){e?this.Ff=rr(this.Ff,13):this.Ff=ir(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!nr(this.Ff,21)},set:function(e){e?this.Ff=rr(this.Ff,21):this.Ff=ir(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!nr(this.Ff,23)},set:function(e){e?this.Ff=rr(this.Ff,23):this.Ff=ir(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!nr(this.Ff,24)},set:function(e){e?this.Ff=rr(this.Ff,24):this.Ff=ir(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!nr(this.Ff,25)},set:function(e){e?this.Ff=rr(this.Ff,25):this.Ff=ir(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!nr(this.Ff,26)},set:function(e){e?this.Ff=rr(this.Ff,26):this.Ff=ir(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Pi(tu,Ws);var Cp=function(){tu.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!nr(this.Ff,14)},set:function(t){t?this.Ff=rr(this.Ff,14):this.Ff=ir(this.Ff,14)}}),this.password=!0};Pi(Cp,tu);var We={CheckBox:{createAppearanceStream:function(){return{N:{On:We.CheckBox.YesNormal},D:{On:We.CheckBox.YesPushDown,Off:We.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=lo(t);e.scope=t.scope;var n=[],r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,i=t.scope.__private__.encodeColorString(t.color),s=O2(t,t.caption);return n.push("0.749023 g"),n.push("0 0 "+xt(We.internal.getWidth(t))+" "+xt(We.internal.getHeight(t))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+r+" "+xt(s.fontSize)+" Tf "+i),n.push("BT"),n.push(s.text),n.push("ET"),n.push("Q"),n.push("EMC"),e.stream=n.join(`
`),e},YesNormal:function(t){var e=lo(t);e.scope=t.scope;var n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color),i=[],s=We.internal.getHeight(t),o=We.internal.getWidth(t),a=O2(t,t.caption);return i.push("1 g"),i.push("0 0 "+xt(o)+" "+xt(s)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+xt(o-1)+" "+xt(s-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+n+" "+xt(a.fontSize)+" Tf "+r),i.push(a.text),i.push("ET"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(t){var e=lo(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+xt(We.internal.getWidth(t))+" "+xt(We.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:We.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=We.RadioButton.Circle.YesNormal,e.D[t]=We.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=lo(t);e.scope=t.scope;var n=[],r=We.internal.getWidth(t)<=We.internal.getHeight(t)?We.internal.getWidth(t)/4:We.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=We.internal.Bezier_C,s=Number((r*i).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+Ba(We.internal.getWidth(t)/2)+" "+Ba(We.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),n.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),n.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),n.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=lo(t);e.scope=t.scope;var n=[],r=We.internal.getWidth(t)<=We.internal.getHeight(t)?We.internal.getWidth(t)/4:We.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*We.internal.Bezier_C).toFixed(5)),o=Number((r*We.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+Ba(We.internal.getWidth(t)/2)+" "+Ba(We.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),n.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),n.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),n.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+Ba(We.internal.getWidth(t)/2)+" "+Ba(We.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+o+" "+o+" "+r+" 0 "+r+" c"),n.push("-"+o+" "+r+" -"+r+" "+o+" -"+r+" 0 c"),n.push("-"+r+" -"+o+" -"+o+" -"+r+" 0 -"+r+" c"),n.push(o+" -"+r+" "+r+" -"+o+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=lo(t);e.scope=t.scope;var n=[],r=We.internal.getWidth(t)<=We.internal.getHeight(t)?We.internal.getWidth(t)/4:We.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*We.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+Ba(We.internal.getWidth(t)/2)+" "+Ba(We.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),n.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),n.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),n.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:We.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=We.RadioButton.Cross.YesNormal,e.D[t]=We.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=lo(t);e.scope=t.scope;var n=[],r=We.internal.calculateCross(t);return n.push("q"),n.push("1 1 "+xt(We.internal.getWidth(t)-2)+" "+xt(We.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(xt(r.x1.x)+" "+xt(r.x1.y)+" m"),n.push(xt(r.x2.x)+" "+xt(r.x2.y)+" l"),n.push(xt(r.x4.x)+" "+xt(r.x4.y)+" m"),n.push(xt(r.x3.x)+" "+xt(r.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=lo(t);e.scope=t.scope;var n=We.internal.calculateCross(t),r=[];return r.push("0.749023 g"),r.push("0 0 "+xt(We.internal.getWidth(t))+" "+xt(We.internal.getHeight(t))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+xt(We.internal.getWidth(t)-2)+" "+xt(We.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(xt(n.x1.x)+" "+xt(n.x1.y)+" m"),r.push(xt(n.x2.x)+" "+xt(n.x2.y)+" l"),r.push(xt(n.x4.x)+" "+xt(n.x4.y)+" m"),r.push(xt(n.x3.x)+" "+xt(n.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=lo(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+xt(We.internal.getWidth(t))+" "+xt(We.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+n}};We.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=We.internal.getWidth(t),n=We.internal.getHeight(t),r=Math.min(e,n);return{x1:{x:(e-r)/2,y:(n-r)/2+r},x2:{x:(e-r)/2+r,y:(n-r)/2},x3:{x:(e-r)/2,y:(n-r)/2},x4:{x:(e-r)/2+r,y:(n-r)/2+r}}}},We.internal.getWidth=function(t){var e=0;return on(t)==="object"&&(e=Sb(t.Rect[2])),e},We.internal.getHeight=function(t){var e=0;return on(t)==="object"&&(e=Sb(t.Rect[3])),e};var zU=$n.addField=function(t){if(BU(this,t),!(t instanceof Ws))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};$n.AcroFormChoiceField=yc,$n.AcroFormListBox=wc,$n.AcroFormComboBox=_c,$n.AcroFormEditBox=Tp,$n.AcroFormButton=Er,$n.AcroFormPushButton=kp,$n.AcroFormRadioButton=xc,$n.AcroFormCheckBox=Pp,$n.AcroFormTextField=tu,$n.AcroFormPasswordField=Cp,$n.AcroFormAppearance=We,$n.AcroForm={ChoiceField:yc,ListBox:wc,ComboBox:_c,EditBox:Tp,Button:Er,PushButton:kp,RadioButton:xc,CheckBox:Pp,TextField:tu,PasswordField:Cp,Appearance:We},rt.AcroForm={ChoiceField:yc,ListBox:wc,ComboBox:_c,EditBox:Tp,Button:Er,PushButton:kp,RadioButton:xc,CheckBox:Pp,TextField:tu,PasswordField:Cp,Appearance:We};rt.AcroForm;function sE(t){return t.reduce(function(e,n,r){return e[n]=r,e},{})}(function(t){var e="addImage_";t.__addimage__={};var n="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},i=t.__addimage__.getImageFileTypeByImageData=function(x,T){var P,te,de,me,ge,Q=n;if((T=T||n)==="RGBA"||x.data!==void 0&&x.data instanceof Uint8ClampedArray&&"height"in x&&"width"in x)return"RGBA";if(ee(x))for(ge in r)for(de=r[ge],P=0;P<de.length;P+=1){for(me=!0,te=0;te<de[P].length;te+=1)if(de[P][te]!==void 0&&de[P][te]!==x[te]){me=!1;break}if(me===!0){Q=ge;break}}else for(ge in r)for(de=r[ge],P=0;P<de.length;P+=1){for(me=!0,te=0;te<de[P].length;te+=1)if(de[P][te]!==void 0&&de[P][te]!==x.charCodeAt(te)){me=!1;break}if(me===!0){Q=ge;break}}return Q===n&&T!==n&&(Q=T),Q},s=function x(T){for(var P=this.internal.write,te=this.internal.putStream,de=(0,this.internal.getFilters)();de.indexOf("FlateEncode")!==-1;)de.splice(de.indexOf("FlateEncode"),1);T.objectId=this.internal.newObject();var me=[];if(me.push({key:"Type",value:"/XObject"}),me.push({key:"Subtype",value:"/Image"}),me.push({key:"Width",value:T.width}),me.push({key:"Height",value:T.height}),T.colorSpace===b.INDEXED?me.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(T.palette.length/3-1)+" "+("sMask"in T&&T.sMask!==void 0?T.objectId+2:T.objectId+1)+" 0 R]"}):(me.push({key:"ColorSpace",value:"/"+T.colorSpace}),T.colorSpace===b.DEVICE_CMYK&&me.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),me.push({key:"BitsPerComponent",value:T.bitsPerComponent}),"decodeParameters"in T&&T.decodeParameters!==void 0&&me.push({key:"DecodeParms",value:"<<"+T.decodeParameters+">>"}),"transparency"in T&&Array.isArray(T.transparency)&&T.transparency.length>0){for(var ge="",Q=0,oe=T.transparency.length;Q<oe;Q++)ge+=T.transparency[Q]+" "+T.transparency[Q]+" ";me.push({key:"Mask",value:"["+ge+"]"})}T.sMask!==void 0&&me.push({key:"SMask",value:T.objectId+1+" 0 R"});var ae=T.filter!==void 0?["/"+T.filter]:void 0;if(te({data:T.data,additionalKeyValues:me,alreadyAppliedFilters:ae,objectId:T.objectId}),P("endobj"),"sMask"in T&&T.sMask!==void 0){var he,F=(he=T.sMaskBitsPerComponent)!==null&&he!==void 0?he:T.bitsPerComponent,G={width:T.width,height:T.height,colorSpace:"DeviceGray",bitsPerComponent:F,data:T.sMask};"filter"in T&&(G.decodeParameters="/Predictor ".concat(T.predictor," /Colors 1 /BitsPerComponent ").concat(F," /Columns ").concat(T.width),G.filter=T.filter),x.call(this,G)}if(T.colorSpace===b.INDEXED){var B=this.internal.newObject();te({data:N(new Uint8Array(T.palette)),objectId:B}),P("endobj")}},o=function(){var x=this.internal.collections[e+"images"];for(var T in x)s.call(this,x[T])},a=function(){var x,T=this.internal.collections[e+"images"],P=this.internal.write;for(var te in T)P("/I"+(x=T[te]).index,x.objectId,"0","R")},l=function(){this.internal.collections[e+"images"]||(this.internal.collections[e+"images"]={},this.internal.events.subscribe("putResources",o),this.internal.events.subscribe("putXobjectDict",a))},u=function(){var x=this.internal.collections[e+"images"];return l.call(this),x},c=function(){return Object.keys(this.internal.collections[e+"images"]).length},g=function(x){return typeof t["process"+x.toUpperCase()]=="function"},v=function(x){return on(x)==="object"&&x.nodeType===1},m=function(x,T){if(x.nodeName==="IMG"&&x.hasAttribute("src")){var P=""+x.getAttribute("src");if(P.indexOf("data:image/")===0)return Ip(unescape(P).split("base64,").pop());var te=t.loadFile(P,!0);if(te!==void 0)return te}if(x.nodeName==="CANVAS"){if(x.width===0||x.height===0)throw new Error("Given canvas must have data. Canvas width: "+x.width+", height: "+x.height);var de;switch(T){case"PNG":de="image/png";break;case"WEBP":de="image/webp";break;default:de="image/jpeg"}return Ip(x.toDataURL(de,1).split("base64,").pop())}},S=function(x){var T=this.internal.collections[e+"images"];if(T){for(var P in T)if(x===T[P].alias)return T[P]}},A=function(x,T,P){return x||T||(x=-96,T=-96),x<0&&(x=-1*P.width*72/x/this.internal.scaleFactor),T<0&&(T=-1*P.height*72/T/this.internal.scaleFactor),x===0&&(x=T*P.width/P.height),T===0&&(T=x*P.height/P.width),[x,T]},L=function(x,T,P,te,de,me){var ge=A.call(this,P,te,de),Q=this.internal.getCoordinateString,oe=this.internal.getVerticalCoordinateString,ae=u.call(this);if(P=ge[0],te=ge[1],ae[de.index]=de,me){me*=Math.PI/180;var he=Math.cos(me),F=Math.sin(me),G=function(Z){return Z.toFixed(4)},B=[G(he),G(F),G(-1*F),G(he),0,0,"cm"]}this.internal.write("q"),me?(this.internal.write([1,"0","0",1,Q(x),oe(T+te),"cm"].join(" ")),this.internal.write(B.join(" ")),this.internal.write([Q(P),"0","0",Q(te),"0","0","cm"].join(" "))):this.internal.write([Q(P),"0","0",Q(te),Q(x),oe(T+te),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+de.index+" Do"),this.internal.write("Q")},b=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var k=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},j=t.__addimage__.sHashCode=function(x){var T,P,te=0;if(typeof x=="string")for(P=x.length,T=0;T<P;T++)te=(te<<5)-te+x.charCodeAt(T),te|=0;else if(ee(x))for(P=x.byteLength/2,T=0;T<P;T++)te=(te<<5)-te+x[T],te|=0;return te},U=t.__addimage__.validateStringAsBase64=function(x){(x=x||"").toString().trim();var T=!0;return x.length===0&&(T=!1),x.length%4!=0&&(T=!1),/^[A-Za-z0-9+/]+$/.test(x.substr(0,x.length-2))===!1&&(T=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(x.substr(-2))===!1&&(T=!1),T},q=t.__addimage__.extractImageFromDataUrl=function(x){if(x==null||!(x=x.trim()).startsWith("data:"))return null;var T=x.indexOf(",");return T<0?null:x.substring(0,T).trim().endsWith("base64")?x.substring(T+1):null};t.__addimage__.isArrayBuffer=function(x){return x instanceof ArrayBuffer};var ee=t.__addimage__.isArrayBufferView=function(x){return x instanceof Int8Array||x instanceof Uint8Array||x instanceof Uint8ClampedArray||x instanceof Int16Array||x instanceof Uint16Array||x instanceof Int32Array||x instanceof Uint32Array||x instanceof Float32Array||x instanceof Float64Array},D=t.__addimage__.binaryStringToUint8Array=function(x){for(var T=x.length,P=new Uint8Array(T),te=0;te<T;te++)P[te]=x.charCodeAt(te);return P},N=t.__addimage__.arrayBufferToBinaryString=function(x){for(var T="",P=ee(x)?x:new Uint8Array(x),te=0;te<P.length;te+=8192)T+=String.fromCharCode.apply(null,P.subarray(te,te+8192));return T};t.addImage=function(){var x,T,P,te,de,me,ge,Q,oe;if(typeof arguments[1]=="number"?(T=n,P=arguments[1],te=arguments[2],de=arguments[3],me=arguments[4],ge=arguments[5],Q=arguments[6],oe=arguments[7]):(T=arguments[1],P=arguments[2],te=arguments[3],de=arguments[4],me=arguments[5],ge=arguments[6],Q=arguments[7],oe=arguments[8]),on(x=arguments[0])==="object"&&!v(x)&&"imageData"in x){var ae=x;x=ae.imageData,T=ae.format||T||n,P=ae.x||P||0,te=ae.y||te||0,de=ae.w||ae.width||de,me=ae.h||ae.height||me,ge=ae.alias||ge,Q=ae.compression||Q,oe=ae.rotation||ae.angle||oe}var he=this.internal.getFilters();if(Q===void 0&&he.indexOf("FlateEncode")!==-1&&(Q="SLOW"),isNaN(P)||isNaN(te))throw new Error("Invalid coordinates passed to jsPDF.addImage");l.call(this);var F=I.call(this,x,T,ge,Q);return L.call(this,P,te,de,me,F,oe),this};var I=function(x,T,P,te){var de,me,ge;if(typeof x=="string"&&i(x)===n){x=unescape(x);var Q=R(x,!1);(Q!==""||(Q=t.loadFile(x,!0))!==void 0)&&(x=Q)}if(v(x)&&(x=m(x,T)),T=i(x,T),!g(T))throw new Error("addImage does not support files of type '"+T+"', please ensure that a plugin for '"+T+"' support is added.");if(((ge=P)==null||ge.length===0)&&(P=function(oe){return typeof oe=="string"||ee(oe)?j(oe):ee(oe.data)?j(oe.data):null}(x)),(de=S.call(this,P))||(x instanceof Uint8Array||T==="RGBA"||(me=x,x=D(x)),de=this["process"+T.toUpperCase()](x,c.call(this),P,function(oe){return oe&&typeof oe=="string"&&(oe=oe.toUpperCase()),oe in t.image_compression?oe:k.NONE}(te),me)),!de)throw new Error("An unknown error occurred whilst processing the image.");return de},R=t.__addimage__.convertBase64ToBinaryString=function(x,T){T=typeof T!="boolean"||T;var P,te="";if(typeof x=="string"){var de;P=(de=q(x))!==null&&de!==void 0?de:x;try{te=Ip(P)}catch(me){if(T)throw U(P)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+me.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return te};t.getImageProperties=function(x){var T,P,te="";if(v(x)&&(x=m(x)),typeof x=="string"&&i(x)===n&&((te=R(x,!1))===""&&(te=t.loadFile(x)||""),x=te),P=i(x),!g(P))throw new Error("addImage does not support files of type '"+P+"', please ensure that a plugin for '"+P+"' support is added.");if(x instanceof Uint8Array||(x=D(x)),!(T=this["process"+P.toUpperCase()](x)))throw new Error("An unknown error occurred whilst processing the image");return T.fileType=P,T}})(rt.API),function(t){var e=function(n){if(n!==void 0&&n!="")return!0};rt.API.events.push(["addPage",function(n){this.internal.getPageInfo(n.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(n){for(var r,i,s,o=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString,l=this.internal.getPageInfoByObjId(n.objId),u=n.pageContext.annotations,c=!1,g=0;g<u.length&&!c;g++)switch((r=u[g]).type){case"link":(e(r.options.url)||e(r.options.pageNumber))&&(c=!0);break;case"reference":case"text":case"freetext":c=!0}if(c!=0){this.internal.write("/Annots [");for(var v=0;v<u.length;v++){r=u[v];var m=this.internal.pdfEscape,S=this.internal.getEncryptor(n.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var A=this.internal.newAdditionalObject(),L=this.internal.newAdditionalObject(),b=this.internal.getEncryptor(A.objId),k=r.title||"Note";s="<</Type /Annot /Subtype /Text "+(i="/Rect ["+o(r.bounds.x)+" "+a(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y)+"] ")+"/Contents ("+m(b(r.contents))+")",s+=" /Popup "+L.objId+" 0 R",s+=" /P "+l.objId+" 0 R",s+=" /T ("+m(b(k))+") >>",A.content=s;var j=A.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+o(r.bounds.x+30)+" "+a(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w+30)+" "+a(r.bounds.y)+"] ")+" /Parent "+j,r.open&&(s+=" /Open true"),s+=" >>",L.content=s,this.internal.write(A.objId,"0 R",L.objId,"0 R");break;case"freetext":i="/Rect ["+o(r.bounds.x)+" "+a(r.bounds.y)+" "+o(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y+r.bounds.h)+"] ";var U=r.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+m(S(r.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+U+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(r.options.name){var q=this.annotations._nameMap[r.options.name];r.options.pageNumber=q.page,r.options.top=q.y}else r.options.top||(r.options.top=0);if(i="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",s="",r.options.url)s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+m(S(r.options.url))+") >>";else if(r.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,s+=" /FitV "+r.options.left+"]";break;default:var ee=a(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),s+=" /XYZ "+r.options.left+" "+ee+" "+r.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),t.createAnnotation=function(n){var r=this.internal.getCurrentPageInfo();switch(n.type){case"link":this.link(n.bounds.x,n.bounds.y,n.bounds.w,n.bounds.h,n);break;case"text":case"freetext":r.pageContext.annotations.push(n)}},t.link=function(n,r,i,s,o){var a=this.internal.getCurrentPageInfo(),l=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString;a.pageContext.annotations.push({finalBounds:{x:l(n),y:u(r),w:l(n+i),h:u(r+s)},options:o,type:"link"})},t.textWithLink=function(n,r,i,s){var o,a,l=this.getTextWidth(n),u=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){a=s.maxWidth;var c=this.splitTextToSize(n,a).length;o=Math.ceil(u*c)}else a=l,o=u;return this.text(n,r,i,s),i+=.2*u,s.align==="center"&&(r-=l/2),s.align==="right"&&(r-=l),this.link(r,i-u,a,o,s),l},t.getTextWidth=function(n){var r=this.internal.getFontSize();return this.getStringUnitWidth(n)*r/this.internal.scaleFactor}}(rt.API),function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];t.__arabicParser__={};var s=t.__arabicParser__.isInArabicSubstitutionA=function(A){return e[A.charCodeAt(0)]!==void 0},o=t.__arabicParser__.isArabicLetter=function(A){return typeof A=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(A)},a=t.__arabicParser__.isArabicEndLetter=function(A){return o(A)&&s(A)&&e[A.charCodeAt(0)].length<=2},l=t.__arabicParser__.isArabicAlfLetter=function(A){return o(A)&&i.indexOf(A.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(A){return o(A)&&s(A)&&e[A.charCodeAt(0)].length>=1};var u=t.__arabicParser__.arabicLetterHasFinalForm=function(A){return o(A)&&s(A)&&e[A.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(A){return o(A)&&s(A)&&e[A.charCodeAt(0)].length>=3};var c=t.__arabicParser__.arabicLetterHasMedialForm=function(A){return o(A)&&s(A)&&e[A.charCodeAt(0)].length==4},g=t.__arabicParser__.resolveLigatures=function(A){var L=0,b=n,k="",j=0;for(L=0;L<A.length;L+=1)b[A.charCodeAt(L)]!==void 0?(j++,typeof(b=b[A.charCodeAt(L)])=="number"&&(k+=String.fromCharCode(b),b=n,j=0),L===A.length-1&&(b=n,k+=A.charAt(L-(j-1)),L-=j-1,j=0)):(b=n,k+=A.charAt(L-j),L-=j,j=0);return k};t.__arabicParser__.isArabicDiacritic=function(A){return A!==void 0&&r[A.charCodeAt(0)]!==void 0};var v=t.__arabicParser__.getCorrectForm=function(A,L,b){return o(A)?s(A)===!1?-1:!u(A)||!o(L)&&!o(b)||!o(b)&&a(L)||a(A)&&!o(L)||a(A)&&l(L)||a(A)&&a(L)?0:c(A)&&o(L)&&!a(L)&&o(b)&&u(b)?3:a(A)||!o(b)?1:2:-1},m=function(A){var L=0,b=0,k=0,j="",U="",q="",ee=(A=A||"").split("\\s+"),D=[];for(L=0;L<ee.length;L+=1){for(D.push(""),b=0;b<ee[L].length;b+=1)j=ee[L][b],U=ee[L][b-1],q=ee[L][b+1],o(j)?(k=v(j,U,q),D[L]+=k!==-1?String.fromCharCode(e[j.charCodeAt(0)][k]):j):D[L]+=j;D[L]=g(D[L])}return D.join(" ")},S=t.__arabicParser__.processArabic=t.processArabic=function(){var A,L=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,b=[];if(Array.isArray(L)){var k=0;for(b=[],k=0;k<L.length;k+=1)Array.isArray(L[k])?b.push([m(L[k][0]),L[k][1],L[k][2]]):b.push([m(L[k])]);A=b}else A=m(L);return typeof arguments[0]=="string"?A:(arguments[0].text=A,arguments[0])};t.events.push(["preProcessText",S])}(rt.API),rt.API.autoPrint=function(t){var e;return(t=t||{}).variant=t.variant||"non-conform",t.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})),this},function(t){var e=function(){var n=void 0;Object.defineProperty(this,"pdf",{get:function(){return n},set:function(a){n=a}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(a){r=isNaN(a)||Number.isInteger(a)===!1||a<0?150:a,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(a){i=isNaN(a)||Number.isInteger(a)===!1||a<0?300:a,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(a){s=a}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(a){o=a}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(n,r){var i;if((n=n||"2d")!=="2d")return null;for(i in r)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=r[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(rt.API),function(t){var e={left:0,top:0,bottom:0,right:0},n=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var l=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return l},set:function(A){l=A}});var u=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return u},set:function(A){u=A}});var c=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return c},set:function(A){c=A}});var g=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return g},set:function(A){g=A}});var v=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return v},set:function(A){v=A}});var m=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return m},set:function(A){m=A}});var S=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return S},set:function(A){S=A}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(l){return r.call(this),this.internal.__cell__.headerFunction=typeof l=="function"?l:void 0,this},t.getTextDimensions=function(l,u){r.call(this);var c=(u=u||{}).fontSize||this.getFontSize(),g=u.font||this.getFont(),v=u.scaleFactor||this.internal.scaleFactor,m=0,S=0,A=0,L=this;if(!Array.isArray(l)&&typeof l!="string"){if(typeof l!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");l=String(l)}var b=u.maxWidth;b>0?typeof l=="string"?l=this.splitTextToSize(l,b):Object.prototype.toString.call(l)==="[object Array]"&&(l=l.reduce(function(j,U){return j.concat(L.splitTextToSize(U,b))},[])):l=Array.isArray(l)?l:[l];for(var k=0;k<l.length;k++)m<(A=this.getStringUnitWidth(l[k],{font:g})*c)&&(m=A);return m!==0&&(S=l.length),{w:m/=v,h:Math.max((S*c*this.getLineHeightFactor()-c*(this.getLineHeightFactor()-1))/v,0)}},t.cellAddPage=function(){r.call(this),this.addPage();var l=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new s(l.left,l.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=t.cell=function(){var l;l=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]),r.call(this);var u=this.internal.__cell__.lastCell,c=this.internal.__cell__.padding,g=this.internal.__cell__.margins||e,v=this.internal.__cell__.tableHeaderRow,m=this.internal.__cell__.printHeaders;return u.lineNumber!==void 0&&(u.lineNumber===l.lineNumber?(l.x=(u.x||0)+(u.width||0),l.y=u.y||0):u.y+u.height+l.height+g.bottom>this.getPageHeight()?(this.cellAddPage(),l.y=g.top,m&&v&&(this.printHeaderRow(l.lineNumber,!0),l.y+=v[0].height)):l.y=u.y+u.height||l.y),l.text[0]!==void 0&&(this.rect(l.x,l.y,l.width,l.height,n===!0?"FD":void 0),l.align==="right"?this.text(l.text,l.x+l.width-c,l.y+c,{align:"right",baseline:"top"}):l.align==="center"?this.text(l.text,l.x+l.width/2,l.y+c,{align:"center",baseline:"top",maxWidth:l.width-c-c}):this.text(l.text,l.x+c,l.y+c,{align:"left",baseline:"top",maxWidth:l.width-c-c})),this.internal.__cell__.lastCell=l,this};t.table=function(l,u,c,g,v){if(r.call(this),!c)throw new Error("No data for PDF table.");var m,S,A,L,b=[],k=[],j=[],U={},q={},ee=[],D=[],N=(v=v||{}).autoSize||!1,I=v.printHeaders!==!1,R=v.css&&v.css["font-size"]!==void 0?16*v.css["font-size"]:v.fontSize||12,x=v.margins||Object.assign({width:this.getPageWidth()},e),T=typeof v.padding=="number"?v.padding:3,P=v.headerBackgroundColor||"#c8c8c8",te=v.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=I,this.internal.__cell__.margins=x,this.internal.__cell__.table_font_size=R,this.internal.__cell__.padding=T,this.internal.__cell__.headerBackgroundColor=P,this.internal.__cell__.headerTextColor=te,this.setFontSize(R),g==null)k=b=Object.keys(c[0]),j=b.map(function(){return"left"});else if(Array.isArray(g)&&on(g[0])==="object")for(b=g.map(function(ae){return ae.name}),k=g.map(function(ae){return ae.prompt||ae.name||""}),j=g.map(function(ae){return ae.align||"left"}),m=0;m<g.length;m+=1)q[g[m].name]=.7499990551181103*g[m].width;else Array.isArray(g)&&typeof g[0]=="string"&&(k=b=g,j=b.map(function(){return"left"}));if(N||Array.isArray(g)&&typeof g[0]=="string")for(m=0;m<b.length;m+=1){for(U[L=b[m]]=c.map(function(ae){return ae[L]}),this.setFont(void 0,"bold"),ee.push(this.getTextDimensions(k[m],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),S=U[L],this.setFont(void 0,"normal"),A=0;A<S.length;A+=1)ee.push(this.getTextDimensions(S[A],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);q[L]=Math.max.apply(null,ee)+T+T,ee=[]}if(I){var de={};for(m=0;m<b.length;m+=1)de[b[m]]={},de[b[m]].text=k[m],de[b[m]].align=j[m];var me=a.call(this,de,q);D=b.map(function(ae){return new s(l,u,q[ae],me,de[ae].text,void 0,de[ae].align)}),this.setTableHeaderRow(D),this.printHeaderRow(1,!1)}var ge=g.reduce(function(ae,he){return ae[he.name]=he.align,ae},{});for(m=0;m<c.length;m+=1){"rowStart"in v&&v.rowStart instanceof Function&&v.rowStart({row:m,data:c[m]},this);var Q=a.call(this,c[m],q);for(A=0;A<b.length;A+=1){var oe=c[m][b[A]];"cellStart"in v&&v.cellStart instanceof Function&&v.cellStart({row:m,col:A,data:oe},this),o.call(this,new s(l,u,q[b[A]],Q,oe,m+2,ge[b[A]]))}}return this.internal.__cell__.table_x=l,this.internal.__cell__.table_y=u,this};var a=function(l,u){var c=this.internal.__cell__.padding,g=this.internal.__cell__.table_font_size,v=this.internal.scaleFactor;return Object.keys(l).map(function(m){var S=l[m];return this.splitTextToSize(S.hasOwnProperty("text")?S.text:S,u[m]-c-c)},this).map(function(m){return this.getLineHeightFactor()*m.length*g/v+c+c},this).reduce(function(m,S){return Math.max(m,S)},0)};t.setTableHeaderRow=function(l){r.call(this),this.internal.__cell__.tableHeaderRow=l},t.printHeaderRow=function(l,u){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var c;if(n=!0,typeof this.internal.__cell__.headerFunction=="function"){var g=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(g[0],g[1],g[2],g[3],void 0,-1)}this.setFont(void 0,"bold");for(var v=[],m=0;m<this.internal.__cell__.tableHeaderRow.length;m+=1){c=this.internal.__cell__.tableHeaderRow[m].clone(),u&&(c.y=this.internal.__cell__.margins.top||0,v.push(c)),c.lineNumber=l;var S=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,c),this.setTextColor(S)}v.length>0&&this.setTableHeaderRow(v),this.setFont(void 0,"normal"),n=!1}}(rt.API);var oE={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},aE=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],F2=sE(aE),lE=[100,200,300,400,500,600,700,800,900],qU=sE(lE);function Y0(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),n=function(s){return oE[s=s||"normal"]?s:"normal"}(t.style),r=function(s){return s?typeof s=="number"?s>=100&&s<=900&&s%100==0?s:400:/^\d00$/.test(s)?parseInt(s):s==="bold"?700:400:400}(t.weight),i=function(s){return typeof F2[s=s||"normal"]=="number"?s:"normal"}(t.stretch);return{family:e,style:n,weight:r,stretch:i,src:t.src||[],ref:t.ref||{name:e,style:[i,n,r].join(" ")}}}function Nb(t,e,n,r){var i;for(i=n;i>=0&&i<e.length;i+=r)if(t[e[i]])return t[e[i]];for(i=n;i>=0&&i<e.length;i-=r)if(t[e[i]])return t[e[i]]}var HU={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},Ab={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function Eb(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function Ib(t){return t.trimLeft()}function WU(t,e){for(var n=0;n<t.length;){if(t.charAt(n)===e)return[t.substring(0,n),t.substring(n+1)];n+=1}return null}function $U(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var rp,Tb,kb,zu,ip,Pb,Cb,Lb,Q0=["times"];function Rb(t,e,n,r,i){var s=4,o=Db;switch(i){case rt.API.image_compression.FAST:s=1,o=jb;break;case rt.API.image_compression.MEDIUM:s=6,o=Ob;break;case rt.API.image_compression.SLOW:s=9,o=Fb}t=function(l,u,c,g){for(var v,m=l.length/u,S=new Uint8Array(l.length+m),A=[GU,jb,Db,Ob,Fb],L=0;L<m;L+=1){var b=L*u,k=l.subarray(b,b+u);if(g)S.set(g(k,c,v),b+L);else{for(var j=A.length,U=[],q=0;q<j;q+=1)U[q]=A[q](k,c,v);var ee=YU(U.concat());S.set(U[ee],b+L)}v=k}return S}(t,e,Math.ceil(n*r/8),o);var a=P2(t,{level:s});return rt.API.__addimage__.arrayBufferToBinaryString(a)}function GU(t){var e=Array.apply([],t);return e.unshift(0),e}function jb(t,e){var n=t.length,r=[];r[0]=1;for(var i=0;i<n;i+=1){var s=t[i-e]||0;r[i+1]=t[i]-s+256&255}return r}function Db(t,e,n){var r=t.length,i=[];i[0]=2;for(var s=0;s<r;s+=1){var o=n&&n[s]||0;i[s+1]=t[s]-o+256&255}return i}function Ob(t,e,n){var r=t.length,i=[];i[0]=3;for(var s=0;s<r;s+=1){var o=t[s-e]||0,a=n&&n[s]||0;i[s+1]=t[s]+256-(o+a>>>1)&255}return i}function Fb(t,e,n){var r=t.length,i=[];i[0]=4;for(var s=0;s<r;s+=1){var o=KU(t[s-e]||0,n&&n[s]||0,n&&n[s-e]||0);i[s+1]=t[s]-o+256&255}return i}function KU(t,e,n){if(t===e&&e===n)return t;var r=Math.abs(e-n),i=Math.abs(t-n),s=Math.abs(t+e-n-n);return r<=i&&r<=s?t:i<=s?e:n}function YU(t){var e=t.map(function(n){return n.reduce(function(r,i){return r+Math.abs(i)},0)});return e.indexOf(Math.min.apply(null,e))}function J0(t,e,n){var r=e*n,i=Math.floor(r/8),s=16-(r-8*i+n),o=(1<<n)-1;return uE(t,i)>>s&o}function Mb(t,e,n,r){var i=n*r,s=Math.floor(i/8),o=16-(i-8*s+r),a=(1<<r)-1,l=(e&a)<<o;(function(u,c,g){if(c+1<u.byteLength)u.setUint16(c,g,!1);else{var v=g>>8&255;u.setUint8(c,v)}})(t,s,uE(t,s)&~(a<<o)&65535|l)}function uE(t,e){return e+1<t.byteLength?t.getUint16(e,!1):t.getUint8(e)<<8}function QU(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var n=t[e++]|t[e++]<<8,r=t[e++]|t[e++]<<8,i=t[e++],s=i>>7,o=1<<1+(7&i);t[e++],t[e++];var a=null,l=null;s&&(a=e,l=o,e+=3*o);var u=!0,c=[],g=0,v=null,m=0,S=null;for(this.width=n,this.height=r;u&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,S=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((x=t[e++])>=0))throw Error("Invalid block size");if(x===0)break;e+=x}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var A=t[e++];g=t[e++]|t[e++]<<8,v=t[e++],1&A||(v=null),m=A>>2&7,e++;break;case 254:for(;;){if(!((x=t[e++])>=0))throw Error("Invalid block size");if(x===0)break;e+=x}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var L=t[e++]|t[e++]<<8,b=t[e++]|t[e++]<<8,k=t[e++]|t[e++]<<8,j=t[e++]|t[e++]<<8,U=t[e++],q=U>>6&1,ee=1<<1+(7&U),D=a,N=l,I=!1;U>>7&&(I=!0,D=e,N=ee,e+=3*ee);var R=e;for(e++;;){var x;if(!((x=t[e++])>=0))throw Error("Invalid block size");if(x===0)break;e+=x}c.push({x:L,y:b,width:k,height:j,has_local_palette:I,palette_offset:D,palette_size:N,data_offset:R,data_length:e-R,transparent_index:v,interlaced:!!q,delay:g,disposal:m});break;case 59:u=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return c.length},this.loopCount=function(){return S},this.frameInfo=function(T){if(T<0||T>=c.length)throw new Error("Frame index out of range.");return c[T]},this.decodeAndBlitFrameBGRA=function(T,P){var te=this.frameInfo(T),de=te.width*te.height,me=new Uint8Array(de);Ub(t,te.data_offset,me,de);var ge=te.palette_offset,Q=te.transparent_index;Q===null&&(Q=256);var oe=te.width,ae=n-oe,he=oe,F=4*(te.y*n+te.x),G=4*((te.y+te.height)*n+te.x),B=F,Z=4*ae;te.interlaced===!0&&(Z+=4*n*7);for(var ne=8,ie=0,ve=me.length;ie<ve;++ie){var _e=me[ie];if(he===0&&(he=oe,(B+=Z)>=G&&(Z=4*ae+4*n*(ne-1),B=F+(oe+ae)*(ne<<1),ne>>=1)),_e===Q)B+=4;else{var xe=t[ge+3*_e],ke=t[ge+3*_e+1],Fe=t[ge+3*_e+2];P[B++]=Fe,P[B++]=ke,P[B++]=xe,P[B++]=255}--he}},this.decodeAndBlitFrameRGBA=function(T,P){var te=this.frameInfo(T),de=te.width*te.height,me=new Uint8Array(de);Ub(t,te.data_offset,me,de);var ge=te.palette_offset,Q=te.transparent_index;Q===null&&(Q=256);var oe=te.width,ae=n-oe,he=oe,F=4*(te.y*n+te.x),G=4*((te.y+te.height)*n+te.x),B=F,Z=4*ae;te.interlaced===!0&&(Z+=4*n*7);for(var ne=8,ie=0,ve=me.length;ie<ve;++ie){var _e=me[ie];if(he===0&&(he=oe,(B+=Z)>=G&&(Z=4*ae+4*n*(ne-1),B=F+(oe+ae)*(ne<<1),ne>>=1)),_e===Q)B+=4;else{var xe=t[ge+3*_e],ke=t[ge+3*_e+1],Fe=t[ge+3*_e+2];P[B++]=xe,P[B++]=ke,P[B++]=Fe,P[B++]=255}--he}}}function Ub(t,e,n,r){for(var i=t[e++],s=1<<i,o=s+1,a=o+1,l=i+1,u=(1<<l)-1,c=0,g=0,v=0,m=t[e++],S=new Int32Array(4096),A=null;;){for(;c<16&&m!==0;)g|=t[e++]<<c,c+=8,m===1?m=t[e++]:--m;if(c<l)break;var L=g&u;if(g>>=l,c-=l,L!==s){if(L===o)break;for(var b=L<a?L:A,k=0,j=b;j>s;)j=S[j]>>8,++k;var U=j;if(v+k+(b!==L?1:0)>r)return void mn.log("Warning, gif stream longer than expected.");n[v++]=U;var q=v+=k;for(b!==L&&(n[v++]=U),j=b;k--;)j=S[j],n[--q]=255&j,j>>=8;A!==null&&a<4096&&(S[a++]=A<<8|U,a>=u+1&&l<12&&(++l,u=u<<1|1)),A=L}else a=o+1,u=(1<<(l=i+1))-1,A=null}return v!==r&&mn.log("Warning, gif stream shorter than expected."),n}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function X0(t){var e,n,r,i,s,o=Math.floor,a=new Array(64),l=new Array(64),u=new Array(64),c=new Array(64),g=new Array(65535),v=new Array(65535),m=new Array(64),S=new Array(64),A=[],L=0,b=7,k=new Array(64),j=new Array(64),U=new Array(64),q=new Array(256),ee=new Array(2048),D=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],N=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],I=[0,1,2,3,4,5,6,7,8,9,10,11],R=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],x=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],T=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],P=[0,1,2,3,4,5,6,7,8,9,10,11],te=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],de=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function me(F,G){for(var B=0,Z=0,ne=new Array,ie=1;ie<=16;ie++){for(var ve=1;ve<=F[ie];ve++)ne[G[Z]]=[],ne[G[Z]][0]=B,ne[G[Z]][1]=ie,Z++,B++;B*=2}return ne}function ge(F){for(var G=F[0],B=F[1]-1;B>=0;)G&1<<B&&(L|=1<<b),B--,--b<0&&(L==255?(Q(255),Q(0)):Q(L),b=7,L=0)}function Q(F){A.push(F)}function oe(F){Q(F>>8&255),Q(255&F)}function ae(F,G,B,Z,ne){for(var ie,ve=ne[0],_e=ne[240],xe=function(Ce,it){var Be,ot,tt,qt,Lt,Ze,ft,kt,Ge,wt,et=0;for(Ge=0;Ge<8;++Ge){Be=Ce[et],ot=Ce[et+1],tt=Ce[et+2],qt=Ce[et+3],Lt=Ce[et+4],Ze=Ce[et+5],ft=Ce[et+6];var hn=Be+(kt=Ce[et+7]),Ot=Be-kt,It=ot+ft,Nt=ot-ft,vn=tt+Ze,st=tt-Ze,Xt=qt+Lt,ht=qt-Lt,vt=hn+Xt,Zt=hn-Xt,Tt=It+vn,at=It-vn;Ce[et]=vt+Tt,Ce[et+4]=vt-Tt;var Rt=.707106781*(at+Zt);Ce[et+2]=Zt+Rt,Ce[et+6]=Zt-Rt;var Gs=.382683433*((vt=ht+st)-(at=Nt+Ot)),Kn=.5411961*vt+Gs,es=1.306562965*at+Gs,Vr=.707106781*(Tt=st+Nt),ct=Ot+Vr,bn=Ot-Vr;Ce[et+5]=bn+Kn,Ce[et+3]=bn-Kn,Ce[et+1]=ct+es,Ce[et+7]=ct-es,et+=8}for(et=0,Ge=0;Ge<8;++Ge){Be=Ce[et],ot=Ce[et+8],tt=Ce[et+16],qt=Ce[et+24],Lt=Ce[et+32],Ze=Ce[et+40],ft=Ce[et+48];var ts=Be+(kt=Ce[et+56]),wr=Be-kt,_r=ot+ft,Tn=ot-ft,or=tt+Ze,kn=tt-Ze,Ao=qt+Lt,Ks=qt-Lt,Br=ts+Ao,Ci=ts-Ao,si=_r+or,zr=_r-or;Ce[et]=Br+si,Ce[et+32]=Br-si;var Yn=.707106781*(zr+Ci);Ce[et+16]=Ci+Yn,Ce[et+48]=Ci-Yn;var Ys=.382683433*((Br=Ks+kn)-(zr=Tn+wr)),Li=.5411961*Br+Ys,bs=1.306562965*zr+Ys,Qs=.707106781*(si=kn+Tn),Eo=wr+Qs,Io=wr-Qs;Ce[et+40]=Io+Li,Ce[et+24]=Io-Li,Ce[et+8]=Eo+bs,Ce[et+56]=Eo-bs,et++}for(Ge=0;Ge<64;++Ge)wt=Ce[Ge]*it[Ge],m[Ge]=wt>0?wt+.5|0:wt-.5|0;return m}(F,G),ke=0;ke<64;++ke)S[D[ke]]=xe[ke];var Fe=S[0]-B;B=S[0],Fe==0?ge(Z[0]):(ge(Z[v[ie=32767+Fe]]),ge(g[ie]));for(var De=63;De>0&&S[De]==0;)De--;if(De==0)return ge(ve),B;for(var $e,K=1;K<=De;){for(var Ue=K;S[K]==0&&K<=De;)++K;var Et=K-Ue;if(Et>=16){$e=Et>>4;for(var ut=1;ut<=$e;++ut)ge(_e);Et&=15}ie=32767+S[K],ge(ne[(Et<<4)+v[ie]]),ge(g[ie]),K++}return De!=63&&ge(ve),B}function he(F){F=Math.min(Math.max(F,1),100),s!=F&&(function(G){for(var B=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],Z=0;Z<64;Z++){var ne=o((B[Z]*G+50)/100);ne=Math.min(Math.max(ne,1),255),a[D[Z]]=ne}for(var ie=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],ve=0;ve<64;ve++){var _e=o((ie[ve]*G+50)/100);_e=Math.min(Math.max(_e,1),255),l[D[ve]]=_e}for(var xe=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],ke=0,Fe=0;Fe<8;Fe++)for(var De=0;De<8;De++)u[ke]=1/(a[D[ke]]*xe[Fe]*xe[De]*8),c[ke]=1/(l[D[ke]]*xe[Fe]*xe[De]*8),ke++}(F<50?Math.floor(5e3/F):Math.floor(200-2*F)),s=F)}this.encode=function(F,G){G&&he(G),A=new Array,L=0,b=7,oe(65496),oe(65504),oe(16),Q(74),Q(70),Q(73),Q(70),Q(0),Q(1),Q(1),Q(0),oe(1),oe(1),Q(0),Q(0),function(){oe(65499),oe(132),Q(0);for(var ot=0;ot<64;ot++)Q(a[ot]);Q(1);for(var tt=0;tt<64;tt++)Q(l[tt])}(),function(ot,tt){oe(65472),oe(17),Q(8),oe(tt),oe(ot),Q(3),Q(1),Q(17),Q(0),Q(2),Q(17),Q(1),Q(3),Q(17),Q(1)}(F.width,F.height),function(){oe(65476),oe(418),Q(0);for(var ot=0;ot<16;ot++)Q(N[ot+1]);for(var tt=0;tt<=11;tt++)Q(I[tt]);Q(16);for(var qt=0;qt<16;qt++)Q(R[qt+1]);for(var Lt=0;Lt<=161;Lt++)Q(x[Lt]);Q(1);for(var Ze=0;Ze<16;Ze++)Q(T[Ze+1]);for(var ft=0;ft<=11;ft++)Q(P[ft]);Q(17);for(var kt=0;kt<16;kt++)Q(te[kt+1]);for(var Ge=0;Ge<=161;Ge++)Q(de[Ge])}(),oe(65498),oe(12),Q(3),Q(1),Q(0),Q(2),Q(17),Q(3),Q(17),Q(0),Q(63),Q(0);var B=0,Z=0,ne=0;L=0,b=7,this.encode.displayName="_encode_";for(var ie,ve,_e,xe,ke,Fe,De,$e,K,Ue=F.data,Et=F.width,ut=F.height,Ce=4*Et,it=0;it<ut;){for(ie=0;ie<Ce;){for(ke=Ce*it+ie,De=-1,$e=0,K=0;K<64;K++)Fe=ke+($e=K>>3)*Ce+(De=4*(7&K)),it+$e>=ut&&(Fe-=Ce*(it+1+$e-ut)),ie+De>=Ce&&(Fe-=ie+De-Ce+4),ve=Ue[Fe++],_e=Ue[Fe++],xe=Ue[Fe++],k[K]=(ee[ve]+ee[_e+256|0]+ee[xe+512|0]>>16)-128,j[K]=(ee[ve+768|0]+ee[_e+1024|0]+ee[xe+1280|0]>>16)-128,U[K]=(ee[ve+1280|0]+ee[_e+1536|0]+ee[xe+1792|0]>>16)-128;B=ae(k,u,B,e,r),Z=ae(j,c,Z,n,i),ne=ae(U,c,ne,n,i),ie+=32}it+=8}if(b>=0){var Be=[];Be[1]=b+1,Be[0]=(1<<b+1)-1,ge(Be)}return oe(65497),new Uint8Array(A)},t=t||50,function(){for(var F=String.fromCharCode,G=0;G<256;G++)q[G]=F(G)}(),e=me(N,I),n=me(T,P),r=me(R,x),i=me(te,de),function(){for(var F=1,G=2,B=1;B<=15;B++){for(var Z=F;Z<G;Z++)v[32767+Z]=B,g[32767+Z]=[],g[32767+Z][1]=B,g[32767+Z][0]=Z;for(var ne=-(G-1);ne<=-F;ne++)v[32767+ne]=B,g[32767+ne]=[],g[32767+ne][1]=B,g[32767+ne][0]=G-1+ne;F<<=1,G<<=1}}(),function(){for(var F=0;F<256;F++)ee[F]=19595*F,ee[F+256|0]=38470*F,ee[F+512|0]=7471*F+32768,ee[F+768|0]=-11059*F,ee[F+1024|0]=-21709*F,ee[F+1280|0]=32768*F+8421375,ee[F+1536|0]=-27439*F,ee[F+1792|0]=-5329*F}(),he(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Cs(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function Vb(t){function e(I){if(!I)throw Error("assert :P")}function n(I,R,x){for(var T=0;4>T;T++)if(I[R+T]!=x.charCodeAt(T))return!0;return!1}function r(I,R,x,T,P){for(var te=0;te<P;te++)I[R+te]=x[T+te]}function i(I,R,x,T){for(var P=0;P<T;P++)I[R+P]=x}function s(I){return new Int32Array(I)}function o(I,R){for(var x=[],T=0;T<I;T++)x.push(new R);return x}function a(I,R){var x=[];return function T(P,te,de){for(var me=de[te],ge=0;ge<me&&(P.push(de.length>te+1?[]:new R),!(de.length<te+1));ge++)T(P[ge],te+1,de)}(x,0,I),x}var l=function(){var I=this;function R(h,f){for(var w=1<<f-1>>>0;h&w;)w>>>=1;return w?(h&w-1)+w:h}function x(h,f,w,E,M){e(!(E%w));do h[f+(E-=w)]=M;while(0<E)}function T(h,f,w,E,M){if(e(2328>=M),512>=M)var V=s(512);else if((V=s(M))==null)return 0;return function(z,H,$,J,se,we){var X,le,pe=H,Se=1<<$,ye=s(16),Ae=s(16);for(e(se!=0),e(J!=null),e(z!=null),e(0<$),le=0;le<se;++le){if(15<J[le])return 0;++ye[J[le]]}if(ye[0]==se)return 0;for(Ae[1]=0,X=1;15>X;++X){if(ye[X]>1<<X)return 0;Ae[X+1]=Ae[X]+ye[X]}for(le=0;le<se;++le)X=J[le],0<J[le]&&(we[Ae[X]++]=le);if(Ae[15]==1)return(J=new P).g=0,J.value=we[0],x(z,pe,1,Se,J),Se;var Ee,Re=-1,Pe=Se-1,nt=0,He=1,Pt=1,Je=1<<$;for(le=0,X=1,se=2;X<=$;++X,se<<=1){if(He+=Pt<<=1,0>(Pt-=ye[X]))return 0;for(;0<ye[X];--ye[X])(J=new P).g=X,J.value=we[le++],x(z,pe+nt,se,Je,J),nt=R(nt,X)}for(X=$+1,se=2;15>=X;++X,se<<=1){if(He+=Pt<<=1,0>(Pt-=ye[X]))return 0;for(;0<ye[X];--ye[X]){if(J=new P,(nt&Pe)!=Re){for(pe+=Je,Ee=1<<(Re=X)-$;15>Re&&!(0>=(Ee-=ye[Re]));)++Re,Ee<<=1;Se+=Je=1<<(Ee=Re-$),z[H+(Re=nt&Pe)].g=Ee+$,z[H+Re].value=pe-H-Re}J.g=X-$,J.value=we[le++],x(z,pe+(nt>>$),se,Je,J),nt=R(nt,X)}}return He!=2*Ae[15]-1?0:Se}(h,f,w,E,M,V)}function P(){this.value=this.g=0}function te(){this.value=this.g=0}function de(){this.G=o(5,P),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(Ml,te)}function me(h,f,w,E){e(h!=null),e(f!=null),e(2147483648>E),h.Ca=254,h.I=0,h.b=-8,h.Ka=0,h.oa=f,h.pa=w,h.Jd=f,h.Yc=w+E,h.Zc=4<=E?w+E-4+1:w,ve(h)}function ge(h,f){for(var w=0;0<f--;)w|=xe(h,128)<<f;return w}function Q(h,f){var w=ge(h,f);return _e(h)?-w:w}function oe(h,f,w,E){var M,V=0;for(e(h!=null),e(f!=null),e(4294967288>E),h.Sb=E,h.Ra=0,h.u=0,h.h=0,4<E&&(E=4),M=0;M<E;++M)V+=f[w+M]<<8*M;h.Ra=V,h.bb=E,h.oa=f,h.pa=w}function ae(h){for(;8<=h.u&&h.bb<h.Sb;)h.Ra>>>=8,h.Ra+=h.oa[h.pa+h.bb]<<Ea-8>>>0,++h.bb,h.u-=8;Z(h)&&(h.h=1,h.u=0)}function he(h,f){if(e(0<=f),!h.h&&f<=Fi){var w=B(h)&Oi[f];return h.u+=f,ae(h),w}return h.h=1,h.u=0}function F(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function G(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function B(h){return h.Ra>>>(h.u&Ea-1)>>>0}function Z(h){return e(h.bb<=h.Sb),h.h||h.bb==h.Sb&&h.u>Ea}function ne(h,f){h.u=f,h.h=Z(h)}function ie(h){h.u>=jo&&(e(h.u>=jo),ae(h))}function ve(h){e(h!=null&&h.oa!=null),h.pa<h.Zc?(h.I=(h.oa[h.pa++]|h.I<<8)>>>0,h.b+=8):(e(h!=null&&h.oa!=null),h.pa<h.Yc?(h.b+=8,h.I=h.oa[h.pa++]|h.I<<8):h.Ka?h.b=0:(h.I<<=8,h.b+=8,h.Ka=1))}function _e(h){return ge(h,1)}function xe(h,f){var w=h.Ca;0>h.b&&ve(h);var E=h.b,M=w*f>>>8,V=(h.I>>>E>M)+0;for(V?(w-=M,h.I-=M+1<<E>>>0):w=M+1,E=w,M=0;256<=E;)M+=8,E>>=8;return E=7^M+Ia[E],h.b-=E,h.Ca=(w<<E)-1,V}function ke(h,f,w){h[f+0]=w>>24&255,h[f+1]=w>>16&255,h[f+2]=w>>8&255,h[f+3]=255&w}function Fe(h,f){return h[f+0]|h[f+1]<<8}function De(h,f){return Fe(h,f)|h[f+2]<<16}function $e(h,f){return Fe(h,f)|Fe(h,f+2)<<16}function K(h,f){var w=1<<f;return e(h!=null),e(0<f),h.X=s(w),h.X==null?0:(h.Mb=32-f,h.Xa=f,1)}function Ue(h,f){e(h!=null),e(f!=null),e(h.Xa==f.Xa),r(f.X,0,h.X,0,1<<f.Xa)}function Et(){this.X=[],this.Xa=this.Mb=0}function ut(h,f,w,E){e(w!=null),e(E!=null);var M=w[0],V=E[0];return M==0&&(M=(h*V+f/2)/f),V==0&&(V=(f*M+h/2)/h),0>=M||0>=V?0:(w[0]=M,E[0]=V,1)}function Ce(h,f){return h+(1<<f)-1>>>f}function it(h,f){return((4278255360&h)+(4278255360&f)>>>0&4278255360)+((16711935&h)+(16711935&f)>>>0&16711935)>>>0}function Be(h,f){I[f]=function(w,E,M,V,z,H,$){var J;for(J=0;J<z;++J){var se=I[h](H[$+J-1],M,V+J);H[$+J]=it(w[E+J],se)}}}function ot(){this.ud=this.hd=this.jd=0}function tt(h,f){return((4278124286&(h^f))>>>1)+(h&f)>>>0}function qt(h){return 0<=h&&256>h?h:0>h?0:255<h?255:void 0}function Lt(h,f){return qt(h+(h-f+.5>>1))}function Ze(h,f,w){return Math.abs(f-w)-Math.abs(h-w)}function ft(h,f,w,E,M,V,z){for(E=V[z-1],w=0;w<M;++w)V[z+w]=E=it(h[f+w],E)}function kt(h,f,w,E,M){var V;for(V=0;V<w;++V){var z=h[f+V],H=z>>8&255,$=16711935&($=($=16711935&z)+((H<<16)+H));E[M+V]=(4278255360&z)+$>>>0}}function Ge(h,f){f.jd=255&h,f.hd=h>>8&255,f.ud=h>>16&255}function wt(h,f,w,E,M,V){var z;for(z=0;z<E;++z){var H=f[w+z],$=H>>>8,J=H,se=255&(se=(se=H>>>16)+((h.jd<<24>>24)*($<<24>>24)>>>5));J=255&(J=(J+=(h.hd<<24>>24)*($<<24>>24)>>>5)+((h.ud<<24>>24)*(se<<24>>24)>>>5)),M[V+z]=(4278255360&H)+(se<<16)+J}}function et(h,f,w,E,M){I[f]=function(V,z,H,$,J,se,we,X,le){for($=we;$<X;++$)for(we=0;we<le;++we)J[se++]=M(H[E(V[z++])])},I[h]=function(V,z,H,$,J,se,we){var X=8>>V.b,le=V.Ea,pe=V.K[0],Se=V.w;if(8>X)for(V=(1<<V.b)-1,Se=(1<<X)-1;z<H;++z){var ye,Ae=0;for(ye=0;ye<le;++ye)ye&V||(Ae=E($[J++])),se[we++]=M(pe[Ae&Se]),Ae>>=X}else I["VP8LMapColor"+w]($,J,pe,Se,se,we,z,H,le)}}function hn(h,f,w,E,M){for(w=f+w;f<w;){var V=h[f++];E[M++]=V>>16&255,E[M++]=V>>8&255,E[M++]=255&V}}function Ot(h,f,w,E,M){for(w=f+w;f<w;){var V=h[f++];E[M++]=V>>16&255,E[M++]=V>>8&255,E[M++]=255&V,E[M++]=V>>24&255}}function It(h,f,w,E,M){for(w=f+w;f<w;){var V=(z=h[f++])>>16&240|z>>12&15,z=240&z|z>>28&15;E[M++]=V,E[M++]=z}}function Nt(h,f,w,E,M){for(w=f+w;f<w;){var V=(z=h[f++])>>16&248|z>>13&7,z=z>>5&224|z>>3&31;E[M++]=V,E[M++]=z}}function vn(h,f,w,E,M){for(w=f+w;f<w;){var V=h[f++];E[M++]=255&V,E[M++]=V>>8&255,E[M++]=V>>16&255}}function st(h,f,w,E,M,V){if(V==0)for(w=f+w;f<w;)ke(E,((V=h[f++])[0]>>24|V[1]>>8&65280|V[2]<<8&16711680|V[3]<<24)>>>0),M+=32;else r(E,M,h,f,w)}function Xt(h,f){I[f][0]=I[h+"0"],I[f][1]=I[h+"1"],I[f][2]=I[h+"2"],I[f][3]=I[h+"3"],I[f][4]=I[h+"4"],I[f][5]=I[h+"5"],I[f][6]=I[h+"6"],I[f][7]=I[h+"7"],I[f][8]=I[h+"8"],I[f][9]=I[h+"9"],I[f][10]=I[h+"10"],I[f][11]=I[h+"11"],I[f][12]=I[h+"12"],I[f][13]=I[h+"13"],I[f][14]=I[h+"0"],I[f][15]=I[h+"0"]}function ht(h){return h==Ag||h==Eg||h==mf||h==Ig}function vt(){this.eb=[],this.size=this.A=this.fb=0}function Zt(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Tt(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new vt,this.f.kb=new Zt,this.sd=null}function at(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Rt(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Gs(h){return alert("todo:WebPSamplerProcessPlane"),h.T}function Kn(h,f){var w=h.T,E=f.ba.f.RGBA,M=E.eb,V=E.fb+h.ka*E.A,z=fs[f.ba.S],H=h.y,$=h.O,J=h.f,se=h.N,we=h.ea,X=h.W,le=f.cc,pe=f.dc,Se=f.Mc,ye=f.Nc,Ae=h.ka,Ee=h.ka+h.T,Re=h.U,Pe=Re+1>>1;for(Ae==0?z(H,$,null,null,J,se,we,X,J,se,we,X,M,V,null,null,Re):(z(f.ec,f.fc,H,$,le,pe,Se,ye,J,se,we,X,M,V-E.A,M,V,Re),++w);Ae+2<Ee;Ae+=2)le=J,pe=se,Se=we,ye=X,se+=h.Rc,X+=h.Rc,V+=2*E.A,z(H,($+=2*h.fa)-h.fa,H,$,le,pe,Se,ye,J,se,we,X,M,V-E.A,M,V,Re);return $+=h.fa,h.j+Ee<h.o?(r(f.ec,f.fc,H,$,Re),r(f.cc,f.dc,J,se,Pe),r(f.Mc,f.Nc,we,X,Pe),w--):1&Ee||z(H,$,null,null,J,se,we,X,J,se,we,X,M,V+E.A,null,null,Re),w}function es(h,f,w){var E=h.F,M=[h.J];if(E!=null){var V=h.U,z=f.ba.S,H=z==pf||z==mf;f=f.ba.f.RGBA;var $=[0],J=h.ka;$[0]=h.T,h.Kb&&(J==0?--$[0]:(--J,M[0]-=h.width),h.j+h.ka+h.T==h.o&&($[0]=h.o-h.j-J));var se=f.eb;J=f.fb+J*f.A,h=e5(E,M[0],h.width,V,$,se,J+(H?0:3),f.A),e(w==$),h&&ht(z)&&fh(se,J,H,V,$,f.A)}return 0}function Vr(h){var f=h.ma,w=f.ba.S,E=11>w,M=w==df||w==ff||w==pf||w==Ng||w==12||ht(w);if(f.memory=null,f.Ib=null,f.Jb=null,f.Nd=null,!sh(f.Oa,h,M?11:12))return 0;if(M&&ht(w)&&cs(),h.da)alert("todo:use_scaling");else{if(E){if(f.Ib=Gs,h.Kb){if(w=h.U+1>>1,f.memory=s(h.U+2*w),f.memory==null)return 0;f.ec=f.memory,f.fc=0,f.cc=f.ec,f.dc=f.fc+h.U,f.Mc=f.cc,f.Nc=f.dc+w,f.Ib=Kn,cs()}}else alert("todo:EmitYUV");M&&(f.Jb=es,E&&wi())}if(E&&!g5){for(h=0;256>h;++h)WE[h]=89858*(h-128)+vf>>gf,KE[h]=-22014*(h-128)+vf,GE[h]=-45773*(h-128),$E[h]=113618*(h-128)+vf>>gf;for(h=mh;h<Pg;++h)f=76283*(h-16)+vf>>gf,YE[h-mh]=vi(f,255),QE[h-mh]=vi(f+8>>4,15);g5=1}return 1}function ct(h){var f=h.ma,w=h.U,E=h.T;return e(!(1&h.ka)),0>=w||0>=E?0:(w=f.Ib(h,f),f.Jb!=null&&f.Jb(h,f,w),f.Dc+=w,1)}function bn(h){h.ma.memory=null}function ts(h,f,w,E){return he(h,8)!=47?0:(f[0]=he(h,14)+1,w[0]=he(h,14)+1,E[0]=he(h,1),he(h,3)!=0?0:!h.h)}function wr(h,f){if(4>h)return h+1;var w=h-2>>1;return(2+(1&h)<<w)+he(f,w)+1}function _r(h,f){return 120<f?f-120:1<=(w=((w=CE[f-1])>>4)*h+(8-(15&w)))?w:1;var w}function Tn(h,f,w){var E=B(w),M=h[f+=255&E].g-8;return 0<M&&(ne(w,w.u+8),E=B(w),f+=h[f].value,f+=E&(1<<M)-1),ne(w,w.u+h[f].g),h[f].value}function or(h,f,w){return w.g+=h.g,w.value+=h.value<<f>>>0,e(8>=w.g),h.g}function kn(h,f,w){var E=h.xc;return e((f=E==0?0:h.vc[h.md*(w>>E)+(f>>E)])<h.Wb),h.Ya[f]}function Ao(h,f,w,E){var M=h.ab,V=h.c*f,z=h.C;f=z+f;var H=w,$=E;for(E=h.Ta,w=h.Ua;0<M--;){var J=h.gc[M],se=z,we=f,X=H,le=$,pe=($=E,H=w,J.Ea);switch(e(se<we),e(we<=J.nc),J.hc){case 2:Qn(X,le,(we-se)*pe,$,H);break;case 0:var Se=se,ye=we,Ae=$,Ee=H,Re=(Je=J).Ea;Se==0&&(ah(X,le,null,null,1,Ae,Ee),ft(X,le+1,0,0,Re-1,Ae,Ee+1),le+=Re,Ee+=Re,++Se);for(var Pe=1<<Je.b,nt=Pe-1,He=Ce(Re,Je.b),Pt=Je.K,Je=Je.w+(Se>>Je.b)*He;Se<ye;){var Bt=Pt,pr=Je,Ct=1;for(Ou(X,le,Ae,Ee-Re,1,Ae,Ee);Ct<Re;){var Xe=(Ct&~nt)+Pe;Xe>Re&&(Xe=Re),(0,uh[Bt[pr++]>>8&15])(X,le+ +Ct,Ae,Ee+Ct-Re,Xe-Ct,Ae,Ee+Ct),Ct=Xe}le+=Re,Ee+=Re,++Se&nt||(Je+=He)}we!=J.nc&&r($,H-pe,$,H+(we-se-1)*pe,pe);break;case 1:for(pe=X,ye=le,Re=(X=J.Ea)-(Ee=X&~(Ae=(le=1<<J.b)-1)),Se=Ce(X,J.b),Pe=J.K,J=J.w+(se>>J.b)*Se;se<we;){for(nt=Pe,He=J,Pt=new ot,Je=ye+Ee,Bt=ye+X;ye<Je;)Ge(nt[He++],Pt),ch(Pt,pe,ye,le,$,H),ye+=le,H+=le;ye<Bt&&(Ge(nt[He++],Pt),ch(Pt,pe,ye,Re,$,H),ye+=Re,H+=Re),++se&Ae||(J+=Se)}break;case 3:if(X==$&&le==H&&0<J.b){for(ye=$,X=pe=H+(we-se)*pe-(Ee=(we-se)*Ce(J.Ea,J.b)),le=$,Ae=H,Se=[],Ee=(Re=Ee)-1;0<=Ee;--Ee)Se[Ee]=le[Ae+Ee];for(Ee=Re-1;0<=Ee;--Ee)ye[X+Ee]=Se[Ee];lf(J,se,we,$,pe,$,H)}else lf(J,se,we,X,le,$,H)}H=E,$=w}$!=w&&r(E,w,H,$,V)}function Ks(h,f){var w=h.V,E=h.Ba+h.c*h.C,M=f-h.C;if(e(f<=h.l.o),e(16>=M),0<M){var V=h.l,z=h.Ta,H=h.Ua,$=V.width;if(Ao(h,M,w,E),M=H=[H],e((w=h.C)<(E=f)),e(V.v<V.va),E>V.o&&(E=V.o),w<V.j){var J=V.j-w;w=V.j,M[0]+=J*$}if(w>=E?w=0:(M[0]+=4*V.v,V.ka=w-V.j,V.U=V.va-V.v,V.T=E-w,w=1),w){if(H=H[0],11>(w=h.ca).S){var se=w.f.RGBA,we=(E=w.S,M=V.U,V=V.T,J=se.eb,se.A),X=V;for(se=se.fb+h.Ma*se.A;0<X--;){var le=z,pe=H,Se=M,ye=J,Ae=se;switch(E){case hf:hh(le,pe,Se,ye,Ae);break;case df:Ta(le,pe,Se,ye,Ae);break;case Ag:Ta(le,pe,Se,ye,Ae),fh(ye,Ae,0,Se,1,0);break;case a5:Ul(le,pe,Se,ye,Ae);break;case ff:st(le,pe,Se,ye,Ae,1);break;case Eg:st(le,pe,Se,ye,Ae,1),fh(ye,Ae,0,Se,1,0);break;case pf:st(le,pe,Se,ye,Ae,0);break;case mf:st(le,pe,Se,ye,Ae,0),fh(ye,Ae,1,Se,1,0);break;case Ng:ka(le,pe,Se,ye,Ae);break;case Ig:ka(le,pe,Se,ye,Ae),Zy(ye,Ae,Se,1,0);break;case l5:Pa(le,pe,Se,ye,Ae);break;default:e(0)}H+=$,se+=we}h.Ma+=V}else alert("todo:EmitRescaledRowsYUVA");e(h.Ma<=w.height)}}h.C=f,e(h.C<=h.i)}function Br(h){var f;if(0<h.ua)return 0;for(f=0;f<h.Wb;++f){var w=h.Ya[f].G,E=h.Ya[f].H;if(0<w[1][E[1]+0].g||0<w[2][E[2]+0].g||0<w[3][E[3]+0].g)return 0}return 1}function Ci(h,f,w,E,M,V){if(h.Z!=0){var z=h.qd,H=h.rd;for(e(Ra[h.Z]!=null);f<w;++f)Ra[h.Z](z,H,E,M,E,M,V),z=E,H=M,M+=V;h.qd=z,h.rd=H}}function si(h,f){var w=h.l.ma,E=w.Z==0||w.Z==1?h.l.j:h.C;if(E=h.C<E?E:h.C,e(f<=h.l.o),f>E){var M=h.l.width,V=w.ca,z=w.tb+M*E,H=h.V,$=h.Ba+h.c*E,J=h.gc;e(h.ab==1),e(J[0].hc==3),io(J[0],E,f,H,$,V,z),Ci(w,E,f,V,z,M)}h.C=h.Ma=f}function zr(h,f,w,E,M,V,z){var H=h.$/E,$=h.$%E,J=h.m,se=h.s,we=w+h.$,X=we;M=w+E*M;var le=w+E*V,pe=280+se.ua,Se=h.Pb?H:16777216,ye=0<se.ua?se.Wa:null,Ae=se.wc,Ee=we<le?kn(se,$,H):null;e(h.C<V),e(le<=M);var Re=!1;e:for(;;){for(;Re||we<le;){var Pe=0;if(H>=Se){var nt=we-w;e((Se=h).Pb),Se.wd=Se.m,Se.xd=nt,0<Se.s.ua&&Ue(Se.s.Wa,Se.s.vb),Se=H+RE}if($&Ae||(Ee=kn(se,$,H)),e(Ee!=null),Ee.Qb&&(f[we]=Ee.qb,Re=!0),!Re)if(ie(J),Ee.jc){Pe=J,nt=f;var He=we,Pt=Ee.pd[B(Pe)&Ml-1];e(Ee.jc),256>Pt.g?(ne(Pe,Pe.u+Pt.g),nt[He]=Pt.value,Pe=0):(ne(Pe,Pe.u+Pt.g-256),e(256<=Pt.value),Pe=Pt.value),Pe==0&&(Re=!0)}else Pe=Tn(Ee.G[0],Ee.H[0],J);if(J.h)break;if(Re||256>Pe){if(!Re)if(Ee.nd)f[we]=(Ee.qb|Pe<<8)>>>0;else{if(ie(J),Re=Tn(Ee.G[1],Ee.H[1],J),ie(J),nt=Tn(Ee.G[2],Ee.H[2],J),He=Tn(Ee.G[3],Ee.H[3],J),J.h)break;f[we]=(He<<24|Re<<16|Pe<<8|nt)>>>0}if(Re=!1,++we,++$>=E&&($=0,++H,z!=null&&H<=V&&!(H%16)&&z(h,H),ye!=null))for(;X<we;)Pe=f[X++],ye.X[(506832829*Pe&4294967295)>>>ye.Mb]=Pe}else if(280>Pe){if(Pe=wr(Pe-256,J),nt=Tn(Ee.G[4],Ee.H[4],J),ie(J),nt=_r(E,nt=wr(nt,J)),J.h)break;if(we-w<nt||M-we<Pe)break e;for(He=0;He<Pe;++He)f[we+He]=f[we+He-nt];for(we+=Pe,$+=Pe;$>=E;)$-=E,++H,z!=null&&H<=V&&!(H%16)&&z(h,H);if(e(we<=M),$&Ae&&(Ee=kn(se,$,H)),ye!=null)for(;X<we;)Pe=f[X++],ye.X[(506832829*Pe&4294967295)>>>ye.Mb]=Pe}else{if(!(Pe<pe))break e;for(Re=Pe-280,e(ye!=null);X<we;)Pe=f[X++],ye.X[(506832829*Pe&4294967295)>>>ye.Mb]=Pe;Pe=we,e(!(Re>>>(nt=ye).Xa)),f[Pe]=nt.X[Re],Re=!0}Re||e(J.h==Z(J))}if(h.Pb&&J.h&&we<M)e(h.m.h),h.a=5,h.m=h.wd,h.$=h.xd,0<h.s.ua&&Ue(h.s.vb,h.s.Wa);else{if(J.h)break e;z!=null&&z(h,H>V?V:H),h.a=0,h.$=we-w}return 1}return h.a=3,0}function Yn(h){e(h!=null),h.vc=null,h.yc=null,h.Ya=null;var f=h.Wa;f!=null&&(f.X=null),h.vb=null,e(h!=null)}function Ys(){var h=new pt;return h==null?null:(h.a=0,h.xb=h5,Xt("Predictor","VP8LPredictors"),Xt("Predictor","VP8LPredictors_C"),Xt("PredictorAdd","VP8LPredictorsAdd"),Xt("PredictorAdd","VP8LPredictorsAdd_C"),Qn=kt,ch=wt,hh=hn,Ta=Ot,ka=It,Pa=Nt,Ul=vn,I.VP8LMapColor32b=ro,I.VP8LMapColor8b=lh,h)}function Li(h,f,w,E,M){var V=1,z=[h],H=[f],$=E.m,J=E.s,se=null,we=0;e:for(;;){if(w)for(;V&&he($,1);){var X=z,le=H,pe=E,Se=1,ye=pe.m,Ae=pe.gc[pe.ab],Ee=he(ye,2);if(pe.Oc&1<<Ee)V=0;else{switch(pe.Oc|=1<<Ee,Ae.hc=Ee,Ae.Ea=X[0],Ae.nc=le[0],Ae.K=[null],++pe.ab,e(4>=pe.ab),Ee){case 0:case 1:Ae.b=he(ye,3)+2,Se=Li(Ce(Ae.Ea,Ae.b),Ce(Ae.nc,Ae.b),0,pe,Ae.K),Ae.K=Ae.K[0];break;case 3:var Re,Pe=he(ye,8)+1,nt=16<Pe?0:4<Pe?1:2<Pe?2:3;if(X[0]=Ce(Ae.Ea,nt),Ae.b=nt,Re=Se=Li(Pe,1,0,pe,Ae.K)){var He,Pt=Pe,Je=Ae,Bt=1<<(8>>Je.b),pr=s(Bt);if(pr==null)Re=0;else{var Ct=Je.K[0],Xe=Je.w;for(pr[0]=Je.K[0][0],He=1;He<1*Pt;++He)pr[He]=it(Ct[Xe+He],pr[He-1]);for(;He<4*Bt;++He)pr[He]=0;Je.K[0]=null,Je.K[0]=pr,Re=1}}Se=Re;break;case 2:break;default:e(0)}V=Se}}if(z=z[0],H=H[0],V&&he($,1)&&!(V=1<=(we=he($,4))&&11>=we)){E.a=3;break e}var Me;if(Me=V)t:{var Xn,At,Ht,Sn=E,Pr=z,li=H,Hn=we,Hr=w,ui=Sn.m,mr=Sn.s,Gt=[null],nn=1,Wn=0,rn=LE[Hn];n:for(;;){if(Hr&&he(ui,1)){var Cr=he(ui,3)+2,Is=Ce(Pr,Cr),Zn=Ce(li,Cr),_i=Is*Zn;if(!Li(Is,Zn,0,Sn,Gt))break n;for(Gt=Gt[0],mr.xc=Cr,Xn=0;Xn<_i;++Xn){var pn=Gt[Xn]>>8&65535;Gt[Xn]=pn,pn>=nn&&(nn=pn+1)}}if(ui.h)break n;for(At=0;5>At;++At){var gr=u5[At];!At&&0<Hn&&(gr+=1<<Hn),Wn<gr&&(Wn=gr)}var Ui=o(nn*rn,P),ci=nn,Vi=o(ci,de);if(Vi==null)var Bi=null;else e(65536>=ci),Bi=Vi;var xi=s(Wn);if(Bi==null||xi==null||Ui==null){Sn.a=1;break n}var zi=Ui;for(Xn=Ht=0;Xn<nn;++Xn){var wn=Bi[Xn],qi=wn.G,Ts=wn.H,Bl=0,Fo=1,Lr=0;for(At=0;5>At;++At){gr=u5[At],qi[At]=zi,Ts[At]=Ht,!At&&0<Hn&&(gr+=1<<Hn);i:{var wf,Cg=gr,_f=Sn,gh=xi,ZE=zi,eI=Ht,Lg=0,ja=_f.m,tI=he(ja,1);if(i(gh,0,0,Cg),tI){var nI=he(ja,1)+1,rI=he(ja,1),w5=he(ja,rI==0?1:8);gh[w5]=1,nI==2&&(gh[w5=he(ja,8)]=1);var xf=1}else{var _5=s(19),x5=he(ja,4)+4;if(19<x5){_f.a=3;var bf=0;break i}for(wf=0;wf<x5;++wf)_5[PE[wf]]=he(ja,3);var Rg=void 0,vh=void 0,b5=_f,iI=_5,Sf=Cg,S5=gh,jg=0,Da=b5.m,N5=8,A5=o(128,P);r:for(;T(A5,0,7,iI,19);){if(he(Da,1)){var sI=2+2*he(Da,3);if((Rg=2+he(Da,sI))>Sf)break r}else Rg=Sf;for(vh=0;vh<Sf&&Rg--;){ie(Da);var E5=A5[0+(127&B(Da))];ne(Da,Da.u+E5.g);var Mu=E5.value;if(16>Mu)S5[vh++]=Mu,Mu!=0&&(N5=Mu);else{var oI=Mu==16,I5=Mu-16,aI=TE[I5],T5=he(Da,IE[I5])+aI;if(vh+T5>Sf)break r;for(var lI=oI?N5:0;0<T5--;)S5[vh++]=lI}}jg=1;break r}jg||(b5.a=3),xf=jg}(xf=xf&&!ja.h)&&(Lg=T(ZE,eI,8,gh,Cg)),xf&&Lg!=0?bf=Lg:(_f.a=3,bf=0)}if(bf==0)break n;if(Fo&&kE[At]==1&&(Fo=zi[Ht].g==0),Bl+=zi[Ht].g,Ht+=bf,3>=At){var yh,Dg=xi[0];for(yh=1;yh<gr;++yh)xi[yh]>Dg&&(Dg=xi[yh]);Lr+=Dg}}if(wn.nd=Fo,wn.Qb=0,Fo&&(wn.qb=(qi[3][Ts[3]+0].value<<24|qi[1][Ts[1]+0].value<<16|qi[2][Ts[2]+0].value)>>>0,Bl==0&&256>qi[0][Ts[0]+0].value&&(wn.Qb=1,wn.qb+=qi[0][Ts[0]+0].value<<8)),wn.jc=!wn.Qb&&6>Lr,wn.jc){var Nf,Mo=wn;for(Nf=0;Nf<Ml;++Nf){var Oa=Nf,Fa=Mo.pd[Oa],Af=Mo.G[0][Mo.H[0]+Oa];256<=Af.value?(Fa.g=Af.g+256,Fa.value=Af.value):(Fa.g=0,Fa.value=0,Oa>>=or(Af,8,Fa),Oa>>=or(Mo.G[1][Mo.H[1]+Oa],16,Fa),Oa>>=or(Mo.G[2][Mo.H[2]+Oa],0,Fa),or(Mo.G[3][Mo.H[3]+Oa],24,Fa))}}}mr.vc=Gt,mr.Wb=nn,mr.Ya=Bi,mr.yc=Ui,Me=1;break t}Me=0}if(!(V=Me)){E.a=3;break e}if(0<we){if(J.ua=1<<we,!K(J.Wa,we)){E.a=1,V=0;break e}}else J.ua=0;var Og=E,k5=z,uI=H,Fg=Og.s,Mg=Fg.xc;if(Og.c=k5,Og.i=uI,Fg.md=Ce(k5,Mg),Fg.wc=Mg==0?-1:(1<<Mg)-1,w){E.xb=VE;break e}if((se=s(z*H))==null){E.a=1,V=0;break e}V=(V=zr(E,se,0,z,H,H,null))&&!$.h;break e}return V?(M!=null?M[0]=se:(e(se==null),e(w)),E.$=0,w||Yn(J)):Yn(J),V}function bs(h,f){var w=h.c*h.i,E=w+f+16*f;return e(h.c<=f),h.V=s(E),h.V==null?(h.Ta=null,h.Ua=0,h.a=1,0):(h.Ta=h.V,h.Ua=h.Ba+w+f,1)}function Qs(h,f){var w=h.C,E=f-w,M=h.V,V=h.Ba+h.c*w;for(e(f<=h.l.o);0<E;){var z=16<E?16:E,H=h.l.ma,$=h.l.width,J=$*z,se=H.ca,we=H.tb+$*w,X=h.Ta,le=h.Ua;Ao(h,z,M,V),t5(X,le,se,we,J),Ci(H,w,w+z,se,we,$),E-=z,M+=z*h.c,w+=z}e(w==f),h.C=h.Ma=f}function Eo(){this.ub=this.yd=this.td=this.Rb=0}function Io(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Xc(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function Js(){this.Yb=function(){var h=[];return function f(w,E,M){for(var V=M[E],z=0;z<V&&(w.push(M.length>E+1?[]:0),!(M.length<E+1));z++)f(w[z],E+1,M)}(h,0,[3,11]),h}()}function Il(){this.jb=s(3),this.Wc=a([4,8],Js),this.Xc=a([4,17],Js)}function va(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function xr(){this.ld=this.La=this.dd=this.tc=0}function Ri(){this.Na=this.la=0}function ya(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Tl(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function kl(){this.uc=this.M=this.Nb=0,this.wa=Array(new xr),this.Y=0,this.ya=Array(new Tl),this.aa=0,this.l=new Xs}function Pl(){this.y=s(16),this.f=s(8),this.ea=s(8)}function Cl(){this.cb=this.a=0,this.sc="",this.m=new F,this.Od=new Eo,this.Kc=new Io,this.ed=new va,this.Qa=new Xc,this.Ic=this.$c=this.Aa=0,this.D=new kl,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,F),this.ia=0,this.pb=o(4,ya),this.Pa=new Il,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Pl),this.Hd=0,this.rb=Array(new Ri),this.sb=0,this.wa=Array(new xr),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Tl),this.L=this.aa=0,this.gd=a([4,2],xr),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function vi(h,f){return 0>h?0:h>f?f:h}function Xs(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Tu(){var h=new Cl;return h!=null&&(h.a=0,h.sc="OK",h.cb=0,h.Xb=0,ph||(ph=To)),h}function Ln(h,f,w){return h.a==0&&(h.a=f,h.sc=w,h.cb=0),0}function ku(h,f,w){return 3<=w&&h[f+0]==157&&h[f+1]==1&&h[f+2]==42}function ns(h,f){if(h==null)return 0;if(h.a=0,h.sc="OK",f==null)return Ln(h,2,"null VP8Io passed to VP8GetHeaders()");var w=f.data,E=f.w,M=f.ha;if(4>M)return Ln(h,7,"Truncated header.");var V=w[E+0]|w[E+1]<<8|w[E+2]<<16,z=h.Od;if(z.Rb=!(1&V),z.td=V>>1&7,z.yd=V>>4&1,z.ub=V>>5,3<z.td)return Ln(h,3,"Incorrect keyframe parameters.");if(!z.yd)return Ln(h,4,"Frame not displayable.");E+=3,M-=3;var H=h.Kc;if(z.Rb){if(7>M)return Ln(h,7,"cannot parse picture header");if(!ku(w,E,M))return Ln(h,3,"Bad code word");H.c=16383&(w[E+4]<<8|w[E+3]),H.Td=w[E+4]>>6,H.i=16383&(w[E+6]<<8|w[E+5]),H.Ud=w[E+6]>>6,E+=7,M-=7,h.za=H.c+15>>4,h.Ub=H.i+15>>4,f.width=H.c,f.height=H.i,f.Da=0,f.j=0,f.v=0,f.va=f.width,f.o=f.height,f.da=0,f.ib=f.width,f.hb=f.height,f.U=f.width,f.T=f.height,i((V=h.Pa).jb,0,255,V.jb.length),e((V=h.Qa)!=null),V.Cb=0,V.Bb=0,V.Fb=1,i(V.Zb,0,0,V.Zb.length),i(V.Lb,0,0,V.Lb)}if(z.ub>M)return Ln(h,7,"bad partition length");me(V=h.m,w,E,z.ub),E+=z.ub,M-=z.ub,z.Rb&&(H.Ld=_e(V),H.Kd=_e(V)),H=h.Qa;var $,J=h.Pa;if(e(V!=null),e(H!=null),H.Cb=_e(V),H.Cb){if(H.Bb=_e(V),_e(V)){for(H.Fb=_e(V),$=0;4>$;++$)H.Zb[$]=_e(V)?Q(V,7):0;for($=0;4>$;++$)H.Lb[$]=_e(V)?Q(V,6):0}if(H.Bb)for($=0;3>$;++$)J.jb[$]=_e(V)?ge(V,8):255}else H.Bb=0;if(V.Ka)return Ln(h,3,"cannot parse segment header");if((H=h.ed).zd=_e(V),H.Tb=ge(V,6),H.wb=ge(V,3),H.Pc=_e(V),H.Pc&&_e(V)){for(J=0;4>J;++J)_e(V)&&(H.vd[J]=Q(V,6));for(J=0;4>J;++J)_e(V)&&(H.od[J]=Q(V,6))}if(h.L=H.Tb==0?0:H.zd?1:2,V.Ka)return Ln(h,3,"cannot parse filter header");var se=M;if(M=$=E,E=$+se,H=se,h.Xb=(1<<ge(h.m,2))-1,se<3*(J=h.Xb))w=7;else{for($+=3*J,H-=3*J,se=0;se<J;++se){var we=w[M+0]|w[M+1]<<8|w[M+2]<<16;we>H&&(we=H),me(h.Jc[+se],w,$,we),$+=we,H-=we,M+=3}me(h.Jc[+J],w,$,H),w=$<E?0:5}if(w!=0)return Ln(h,w,"cannot parse partitions");for(w=ge($=h.m,7),M=_e($)?Q($,4):0,E=_e($)?Q($,4):0,H=_e($)?Q($,4):0,J=_e($)?Q($,4):0,$=_e($)?Q($,4):0,se=h.Qa,we=0;4>we;++we){if(se.Cb){var X=se.Zb[we];se.Fb||(X+=w)}else{if(0<we){h.pb[we]=h.pb[0];continue}X=w}var le=h.pb[we];le.Sc[0]=Tg[vi(X+M,127)],le.Sc[1]=kg[vi(X+0,127)],le.Eb[0]=2*Tg[vi(X+E,127)],le.Eb[1]=101581*kg[vi(X+H,127)]>>16,8>le.Eb[1]&&(le.Eb[1]=8),le.Qc[0]=Tg[vi(X+J,117)],le.Qc[1]=kg[vi(X+$,127)],le.lc=X+$}if(!z.Rb)return Ln(h,4,"Not a key frame.");for(_e(V),z=h.Pa,w=0;4>w;++w){for(M=0;8>M;++M)for(E=0;3>E;++E)for(H=0;11>H;++H)J=xe(V,ME[w][M][E][H])?ge(V,8):OE[w][M][E][H],z.Wc[w][M].Yb[E][H]=J;for(M=0;17>M;++M)z.Xc[w][M]=z.Wc[w][UE[M]]}return h.kc=_e(V),h.kc&&(h.Bd=ge(V,8)),h.cb=1}function To(h,f,w,E,M,V,z){var H=f[M].Yb[w];for(w=0;16>M;++M){if(!xe(h,H[w+0]))return M;for(;!xe(h,H[w+1]);)if(H=f[++M].Yb[0],w=0,M==16)return 16;var $=f[M+1].Yb;if(xe(h,H[w+2])){var J=h,se=0;if(xe(J,(X=H)[(we=w)+3]))if(xe(J,X[we+6])){for(H=0,we=2*(se=xe(J,X[we+8]))+(X=xe(J,X[we+9+se])),se=0,X=jE[we];X[H];++H)se+=se+xe(J,X[H]);se+=3+(8<<we)}else xe(J,X[we+7])?(se=7+2*xe(J,165),se+=xe(J,145)):se=5+xe(J,159);else se=xe(J,X[we+4])?3+xe(J,X[we+5]):2;H=$[2]}else se=1,H=$[1];$=z+DE[M],0>(J=h).b&&ve(J);var we,X=J.b,le=(we=J.Ca>>1)-(J.I>>X)>>31;--J.b,J.Ca+=le,J.Ca|=1,J.I-=(we+1&le)<<X,V[$]=((se^le)-le)*E[(0<M)+0]}return 16}function Ll(h){var f=h.rb[h.sb-1];f.la=0,f.Na=0,i(h.zc,0,0,h.zc.length),h.ja=0}function yi(h,f,w,E,M){M=h[f+w+32*E]+(M>>3),h[f+w+32*E]=-256&M?0>M?0:255:M}function dn(h,f,w,E,M,V){yi(h,f,0,w,E+M),yi(h,f,1,w,E+V),yi(h,f,2,w,E-V),yi(h,f,3,w,E-M)}function dr(h){return(20091*h>>16)+h}function ko(h,f,w,E){var M,V=0,z=s(16);for(M=0;4>M;++M){var H=h[f+0]+h[f+8],$=h[f+0]-h[f+8],J=(35468*h[f+4]>>16)-dr(h[f+12]),se=dr(h[f+4])+(35468*h[f+12]>>16);z[V+0]=H+se,z[V+1]=$+J,z[V+2]=$-J,z[V+3]=H-se,V+=4,f++}for(M=V=0;4>M;++M)H=(h=z[V+0]+4)+z[V+8],$=h-z[V+8],J=(35468*z[V+4]>>16)-dr(z[V+12]),yi(w,E,0,0,H+(se=dr(z[V+4])+(35468*z[V+12]>>16))),yi(w,E,1,0,$+J),yi(w,E,2,0,$-J),yi(w,E,3,0,H-se),V++,E+=32}function wa(h,f,w,E){var M=h[f+0]+4,V=35468*h[f+4]>>16,z=dr(h[f+4]),H=35468*h[f+1]>>16;dn(w,E,0,M+z,h=dr(h[f+1]),H),dn(w,E,1,M+V,h,H),dn(w,E,2,M-V,h,H),dn(w,E,3,M-z,h,H)}function Pu(h,f,w,E,M){ko(h,f,w,E),M&&ko(h,f+16,w,E+4)}function Ft(h,f,w,E){Vl(h,f+0,w,E,1),Vl(h,f+32,w,E+128,1)}function Po(h,f,w,E){var M;for(h=h[f+0]+4,M=0;4>M;++M)for(f=0;4>f;++f)yi(w,E,f,M,h)}function Zs(h,f,w,E){h[f+0]&&en(h,f+0,w,E),h[f+16]&&en(h,f+16,w,E+4),h[f+32]&&en(h,f+32,w,E+128),h[f+48]&&en(h,f+48,w,E+128+4)}function rs(h,f,w,E){var M,V=s(16);for(M=0;4>M;++M){var z=h[f+0+M]+h[f+12+M],H=h[f+4+M]+h[f+8+M],$=h[f+4+M]-h[f+8+M],J=h[f+0+M]-h[f+12+M];V[0+M]=z+H,V[8+M]=z-H,V[4+M]=J+$,V[12+M]=J-$}for(M=0;4>M;++M)z=(h=V[0+4*M]+3)+V[3+4*M],H=V[1+4*M]+V[2+4*M],$=V[1+4*M]-V[2+4*M],J=h-V[3+4*M],w[E+0]=z+H>>3,w[E+16]=J+$>>3,w[E+32]=z-H>>3,w[E+48]=J-$>>3,E+=64}function Co(h,f,w){var E,M=f-32,V=Mi,z=255-h[M-1];for(E=0;E<w;++E){var H,$=V,J=z+h[f-1];for(H=0;H<w;++H)h[f+H]=$[J+h[M+H]];f+=32}}function Cu(h,f){Co(h,f,4)}function Zc(h,f){Co(h,f,8)}function eh(h,f){Co(h,f,16)}function Rl(h,f){var w;for(w=0;16>w;++w)r(h,f+32*w,h,f-32,16)}function Lu(h,f){var w;for(w=16;0<w;--w)i(h,f,h[f-1],16),f+=32}function Tr(h,f,w){var E;for(E=0;16>E;++E)i(f,w+32*E,h,16)}function is(h,f){var w,E=16;for(w=0;16>w;++w)E+=h[f-1+32*w]+h[f+w-32];Tr(E>>5,h,f)}function eo(h,f){var w,E=8;for(w=0;16>w;++w)E+=h[f-1+32*w];Tr(E>>4,h,f)}function _a(h,f){var w,E=8;for(w=0;16>w;++w)E+=h[f+w-32];Tr(E>>4,h,f)}function Ru(h,f){Tr(128,h,f)}function dt(h,f,w){return h+2*f+w+2>>2}function th(h,f){var w,E=f-32;for(E=new Uint8Array([dt(h[E-1],h[E+0],h[E+1]),dt(h[E+0],h[E+1],h[E+2]),dt(h[E+1],h[E+2],h[E+3]),dt(h[E+2],h[E+3],h[E+4])]),w=0;4>w;++w)r(h,f+32*w,E,0,E.length)}function nh(h,f){var w=h[f-1],E=h[f-1+32],M=h[f-1+64],V=h[f-1+96];ke(h,f+0,16843009*dt(h[f-1-32],w,E)),ke(h,f+32,16843009*dt(w,E,M)),ke(h,f+64,16843009*dt(E,M,V)),ke(h,f+96,16843009*dt(M,V,V))}function rh(h,f){var w,E=4;for(w=0;4>w;++w)E+=h[f+w-32]+h[f-1+32*w];for(E>>=3,w=0;4>w;++w)i(h,f+32*w,E,4)}function br(h,f){var w=h[f-1+0],E=h[f-1+32],M=h[f-1+64],V=h[f-1-32],z=h[f+0-32],H=h[f+1-32],$=h[f+2-32],J=h[f+3-32];h[f+0+96]=dt(E,M,h[f-1+96]),h[f+1+96]=h[f+0+64]=dt(w,E,M),h[f+2+96]=h[f+1+64]=h[f+0+32]=dt(V,w,E),h[f+3+96]=h[f+2+64]=h[f+1+32]=h[f+0+0]=dt(z,V,w),h[f+3+64]=h[f+2+32]=h[f+1+0]=dt(H,z,V),h[f+3+32]=h[f+2+0]=dt($,H,z),h[f+3+0]=dt(J,$,H)}function Ss(h,f){var w=h[f+1-32],E=h[f+2-32],M=h[f+3-32],V=h[f+4-32],z=h[f+5-32],H=h[f+6-32],$=h[f+7-32];h[f+0+0]=dt(h[f+0-32],w,E),h[f+1+0]=h[f+0+32]=dt(w,E,M),h[f+2+0]=h[f+1+32]=h[f+0+64]=dt(E,M,V),h[f+3+0]=h[f+2+32]=h[f+1+64]=h[f+0+96]=dt(M,V,z),h[f+3+32]=h[f+2+64]=h[f+1+96]=dt(V,z,H),h[f+3+64]=h[f+2+96]=dt(z,H,$),h[f+3+96]=dt(H,$,$)}function ih(h,f){var w=h[f-1+0],E=h[f-1+32],M=h[f-1+64],V=h[f-1-32],z=h[f+0-32],H=h[f+1-32],$=h[f+2-32],J=h[f+3-32];h[f+0+0]=h[f+1+64]=V+z+1>>1,h[f+1+0]=h[f+2+64]=z+H+1>>1,h[f+2+0]=h[f+3+64]=H+$+1>>1,h[f+3+0]=$+J+1>>1,h[f+0+96]=dt(M,E,w),h[f+0+64]=dt(E,w,V),h[f+0+32]=h[f+1+96]=dt(w,V,z),h[f+1+32]=h[f+2+96]=dt(V,z,H),h[f+2+32]=h[f+3+96]=dt(z,H,$),h[f+3+32]=dt(H,$,J)}function xa(h,f){var w=h[f+0-32],E=h[f+1-32],M=h[f+2-32],V=h[f+3-32],z=h[f+4-32],H=h[f+5-32],$=h[f+6-32],J=h[f+7-32];h[f+0+0]=w+E+1>>1,h[f+1+0]=h[f+0+64]=E+M+1>>1,h[f+2+0]=h[f+1+64]=M+V+1>>1,h[f+3+0]=h[f+2+64]=V+z+1>>1,h[f+0+32]=dt(w,E,M),h[f+1+32]=h[f+0+96]=dt(E,M,V),h[f+2+32]=h[f+1+96]=dt(M,V,z),h[f+3+32]=h[f+2+96]=dt(V,z,H),h[f+3+64]=dt(z,H,$),h[f+3+96]=dt(H,$,J)}function Ns(h,f){var w=h[f-1+0],E=h[f-1+32],M=h[f-1+64],V=h[f-1+96];h[f+0+0]=w+E+1>>1,h[f+2+0]=h[f+0+32]=E+M+1>>1,h[f+2+32]=h[f+0+64]=M+V+1>>1,h[f+1+0]=dt(w,E,M),h[f+3+0]=h[f+1+32]=dt(E,M,V),h[f+3+32]=h[f+1+64]=dt(M,V,V),h[f+3+64]=h[f+2+64]=h[f+0+96]=h[f+1+96]=h[f+2+96]=h[f+3+96]=V}function ba(h,f){var w=h[f-1+0],E=h[f-1+32],M=h[f-1+64],V=h[f-1+96],z=h[f-1-32],H=h[f+0-32],$=h[f+1-32],J=h[f+2-32];h[f+0+0]=h[f+2+32]=w+z+1>>1,h[f+0+32]=h[f+2+64]=E+w+1>>1,h[f+0+64]=h[f+2+96]=M+E+1>>1,h[f+0+96]=V+M+1>>1,h[f+3+0]=dt(H,$,J),h[f+2+0]=dt(z,H,$),h[f+1+0]=h[f+3+32]=dt(w,z,H),h[f+1+32]=h[f+3+64]=dt(E,w,z),h[f+1+64]=h[f+3+96]=dt(M,E,w),h[f+1+96]=dt(V,M,E)}function ji(h,f){var w;for(w=0;8>w;++w)r(h,f+32*w,h,f-32,8)}function Lo(h,f){var w;for(w=0;8>w;++w)i(h,f,h[f-1],8),f+=32}function ss(h,f,w){var E;for(E=0;8>E;++E)i(f,w+32*E,h,8)}function jl(h,f){var w,E=8;for(w=0;8>w;++w)E+=h[f+w-32]+h[f-1+32*w];ss(E>>4,h,f)}function un(h,f){var w,E=4;for(w=0;8>w;++w)E+=h[f+w-32];ss(E>>3,h,f)}function Dl(h,f){var w,E=4;for(w=0;8>w;++w)E+=h[f-1+32*w];ss(E>>3,h,f)}function ju(h,f){ss(128,h,f)}function os(h,f,w){var E=h[f-w],M=h[f+0],V=3*(M-E)+Sg[1020+h[f-2*w]-h[f+w]],z=cf[112+(V+4>>3)];h[f-w]=Mi[255+E+cf[112+(V+3>>3)]],h[f+0]=Mi[255+M-z]}function Sa(h,f,w,E){var M=h[f+0],V=h[f+w];return ds[255+h[f-2*w]-h[f-w]]>E||ds[255+V-M]>E}function Ro(h,f,w,E){return 4*ds[255+h[f-w]-h[f+0]]+ds[255+h[f-2*w]-h[f+w]]<=E}function to(h,f,w,E,M){var V=h[f-3*w],z=h[f-2*w],H=h[f-w],$=h[f+0],J=h[f+w],se=h[f+2*w],we=h[f+3*w];return 4*ds[255+H-$]+ds[255+z-J]>E?0:ds[255+h[f-4*w]-V]<=M&&ds[255+V-z]<=M&&ds[255+z-H]<=M&&ds[255+we-se]<=M&&ds[255+se-J]<=M&&ds[255+J-$]<=M}function no(h,f,w,E){var M=2*E+1;for(E=0;16>E;++E)Ro(h,f+E,w,M)&&os(h,f+E,w)}function oi(h,f,w,E){var M=2*E+1;for(E=0;16>E;++E)Ro(h,f+E*w,1,M)&&os(h,f+E*w,1)}function Ol(h,f,w,E){var M;for(M=3;0<M;--M)no(h,f+=4*w,w,E)}function Du(h,f,w,E){var M;for(M=3;0<M;--M)oi(h,f+=4,w,E)}function ai(h,f,w,E,M,V,z,H){for(V=2*V+1;0<M--;){if(to(h,f,w,V,z))if(Sa(h,f,w,H))os(h,f,w);else{var $=h,J=f,se=w,we=$[J-2*se],X=$[J-se],le=$[J+0],pe=$[J+se],Se=$[J+2*se],ye=27*(Ee=Sg[1020+3*(le-X)+Sg[1020+we-pe]])+63>>7,Ae=18*Ee+63>>7,Ee=9*Ee+63>>7;$[J-3*se]=Mi[255+$[J-3*se]+Ee],$[J-2*se]=Mi[255+we+Ae],$[J-se]=Mi[255+X+ye],$[J+0]=Mi[255+le-ye],$[J+se]=Mi[255+pe-Ae],$[J+2*se]=Mi[255+Se-Ee]}f+=E}}function as(h,f,w,E,M,V,z,H){for(V=2*V+1;0<M--;){if(to(h,f,w,V,z))if(Sa(h,f,w,H))os(h,f,w);else{var $=h,J=f,se=w,we=$[J-se],X=$[J+0],le=$[J+se],pe=cf[112+(4+(Se=3*(X-we))>>3)],Se=cf[112+(Se+3>>3)],ye=pe+1>>1;$[J-2*se]=Mi[255+$[J-2*se]+ye],$[J-se]=Mi[255+we+Se],$[J+0]=Mi[255+X-pe],$[J+se]=Mi[255+le-ye]}f+=E}}function Na(h,f,w,E,M,V){ai(h,f,w,1,16,E,M,V)}function ls(h,f,w,E,M,V){ai(h,f,1,w,16,E,M,V)}function Fl(h,f,w,E,M,V){var z;for(z=3;0<z;--z)as(h,f+=4*w,w,1,16,E,M,V)}function y(h,f,w,E,M,V){var z;for(z=3;0<z;--z)as(h,f+=4,1,w,16,E,M,V)}function O(h,f,w,E,M,V,z,H){ai(h,f,M,1,8,V,z,H),ai(w,E,M,1,8,V,z,H)}function Y(h,f,w,E,M,V,z,H){ai(h,f,1,M,8,V,z,H),ai(w,E,1,M,8,V,z,H)}function re(h,f,w,E,M,V,z,H){as(h,f+4*M,M,1,8,V,z,H),as(w,E+4*M,M,1,8,V,z,H)}function ce(h,f,w,E,M,V,z,H){as(h,f+4,1,M,8,V,z,H),as(w,E+4,1,M,8,V,z,H)}function Ne(){this.ba=new Tt,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Rt,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Te(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function ze(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Ke(){this.ua=0,this.Wa=new Et,this.vb=new Et,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new de,this.yc=new P}function pt(){this.xb=this.a=0,this.l=new Xs,this.ca=new Tt,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new G,this.Pb=0,this.wd=new G,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Ke,this.ab=0,this.gc=o(4,ze),this.Oc=0}function _t(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Xs,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Mt(h,f,w,E,M,V,z){for(h=h==null?0:h[f+0],f=0;f<z;++f)M[V+f]=h+w[E+f]&255,h=M[V+f]}function Jt(h,f,w,E,M,V,z){var H;if(h==null)Mt(null,null,w,E,M,V,z);else for(H=0;H<z;++H)M[V+H]=h[f+H]+w[E+H]&255}function Rn(h,f,w,E,M,V,z){if(h==null)Mt(null,null,w,E,M,V,z);else{var H,$=h[f+0],J=$,se=$;for(H=0;H<z;++H)J=se+($=h[f+H])-J,se=w[E+H]+(-256&J?0>J?0:255:J)&255,J=$,M[V+H]=se}}function tn(h,f,w,E){var M=f.width,V=f.o;if(e(h!=null&&f!=null),0>w||0>=E||w+E>V)return null;if(!h.Cc){if(h.ga==null){var z;if(h.ga=new _t,(z=h.ga==null)||(z=f.width*f.o,e(h.Gb.length==0),h.Gb=s(z),h.Uc=0,h.Gb==null?z=0:(h.mb=h.Gb,h.nb=h.Uc,h.rc=null,z=1),z=!z),!z){z=h.ga;var H=h.Fa,$=h.P,J=h.qc,se=h.mb,we=h.nb,X=$+1,le=J-1,pe=z.l;if(e(H!=null&&se!=null&&f!=null),Ra[0]=null,Ra[1]=Mt,Ra[2]=Jt,Ra[3]=Rn,z.ca=se,z.tb=we,z.c=f.width,z.i=f.height,e(0<z.c&&0<z.i),1>=J)f=0;else if(z.$a=3&H[$+0],z.Z=H[$+0]>>2&3,z.Lc=H[$+0]>>4&3,$=H[$+0]>>6&3,0>z.$a||1<z.$a||4<=z.Z||1<z.Lc||$)f=0;else if(pe.put=ct,pe.ac=Vr,pe.bc=bn,pe.ma=z,pe.width=f.width,pe.height=f.height,pe.Da=f.Da,pe.v=f.v,pe.va=f.va,pe.j=f.j,pe.o=f.o,z.$a)e:{e(z.$a==1),f=Ys();t:for(;;){if(f==null){f=0;break e}if(e(z!=null),z.mc=f,f.c=z.c,f.i=z.i,f.l=z.l,f.l.ma=z,f.l.width=z.c,f.l.height=z.i,f.a=0,oe(f.m,H,X,le),!Li(z.c,z.i,1,f,null)||(f.ab==1&&f.gc[0].hc==3&&Br(f.s)?(z.ic=1,H=f.c*f.i,f.Ta=null,f.Ua=0,f.V=s(H),f.Ba=0,f.V==null?(f.a=1,f=0):f=1):(z.ic=0,f=bs(f,z.c)),!f))break t;f=1;break e}z.mc=null,f=0}else f=le>=z.c*z.i;z=!f}if(z)return null;h.ga.Lc!=1?h.Ga=0:E=V-w}e(h.ga!=null),e(w+E<=V);e:{if(f=(H=h.ga).c,V=H.l.o,H.$a==0){if(X=h.rc,le=h.Vc,pe=h.Fa,$=h.P+1+w*f,J=h.mb,se=h.nb+w*f,e($<=h.P+h.qc),H.Z!=0)for(e(Ra[H.Z]!=null),z=0;z<E;++z)Ra[H.Z](X,le,pe,$,J,se,f),X=J,le=se,se+=f,$+=f;else for(z=0;z<E;++z)r(J,se,pe,$,f),X=J,le=se,se+=f,$+=f;h.rc=X,h.Vc=le}else{if(e(H.mc!=null),f=w+E,e((z=H.mc)!=null),e(f<=z.i),z.C>=f)f=1;else if(H.ic||wi(),H.ic){H=z.V,X=z.Ba,le=z.c;var Se=z.i,ye=(pe=1,$=z.$/le,J=z.$%le,se=z.m,we=z.s,z.$),Ae=le*Se,Ee=le*f,Re=we.wc,Pe=ye<Ee?kn(we,J,$):null;e(ye<=Ae),e(f<=Se),e(Br(we));t:for(;;){for(;!se.h&&ye<Ee;){if(J&Re||(Pe=kn(we,J,$)),e(Pe!=null),ie(se),256>(Se=Tn(Pe.G[0],Pe.H[0],se)))H[X+ye]=Se,++ye,++J>=le&&(J=0,++$<=f&&!($%16)&&si(z,$));else{if(!(280>Se)){pe=0;break t}Se=wr(Se-256,se);var nt,He=Tn(Pe.G[4],Pe.H[4],se);if(ie(se),!(ye>=(He=_r(le,He=wr(He,se)))&&Ae-ye>=Se)){pe=0;break t}for(nt=0;nt<Se;++nt)H[X+ye+nt]=H[X+ye+nt-He];for(ye+=Se,J+=Se;J>=le;)J-=le,++$<=f&&!($%16)&&si(z,$);ye<Ee&&J&Re&&(Pe=kn(we,J,$))}e(se.h==Z(se))}si(z,$>f?f:$);break t}!pe||se.h&&ye<Ae?(pe=0,z.a=se.h?5:3):z.$=ye,f=pe}else f=zr(z,z.V,z.Ba,z.c,z.i,f,Qs);if(!f){E=0;break e}}w+E>=V&&(h.Cc=1),E=1}if(!E)return null;if(h.Cc&&((E=h.ga)!=null&&(E.mc=null),h.ga=null,0<h.Ga))return alert("todo:WebPDequantizeLevels"),null}return h.nb+w*M}function zn(h,f,w,E,M,V){for(;0<M--;){var z,H=h,$=f+(w?1:0),J=h,se=f+(w?0:3);for(z=0;z<E;++z){var we=J[se+4*z];we!=255&&(we*=32897,H[$+4*z+0]=H[$+4*z+0]*we>>23,H[$+4*z+1]=H[$+4*z+1]*we>>23,H[$+4*z+2]=H[$+4*z+2]*we>>23)}f+=V}}function jn(h,f,w,E,M){for(;0<E--;){var V;for(V=0;V<w;++V){var z=h[f+2*V+0],H=15&(J=h[f+2*V+1]),$=4369*H,J=(240&J|J>>4)*$>>16;h[f+2*V+0]=(240&z|z>>4)*$>>16&240|(15&z|z<<4)*$>>16>>4&15,h[f+2*V+1]=240&J|H}f+=M}}function qn(h,f,w,E,M,V,z,H){var $,J,se=255;for(J=0;J<M;++J){for($=0;$<E;++$){var we=h[f+$];V[z+4*$]=we,se&=we}f+=w,z+=H}return se!=255}function Dn(h,f,w,E,M){var V;for(V=0;V<M;++V)w[E+V]=h[f+V]>>8}function wi(){fh=zn,Zy=jn,e5=qn,t5=Dn}function us(h,f,w){I[h]=function(E,M,V,z,H,$,J,se,we,X,le,pe,Se,ye,Ae,Ee,Re){var Pe,nt=Re-1>>1,He=H[$+0]|J[se+0]<<16,Pt=we[X+0]|le[pe+0]<<16;e(E!=null);var Je=3*He+Pt+131074>>2;for(f(E[M+0],255&Je,Je>>16,Se,ye),V!=null&&(Je=3*Pt+He+131074>>2,f(V[z+0],255&Je,Je>>16,Ae,Ee)),Pe=1;Pe<=nt;++Pe){var Bt=H[$+Pe]|J[se+Pe]<<16,pr=we[X+Pe]|le[pe+Pe]<<16,Ct=He+Bt+Pt+pr+524296,Xe=Ct+2*(Bt+Pt)>>3;Je=Xe+He>>1,He=(Ct=Ct+2*(He+pr)>>3)+Bt>>1,f(E[M+2*Pe-1],255&Je,Je>>16,Se,ye+(2*Pe-1)*w),f(E[M+2*Pe-0],255&He,He>>16,Se,ye+(2*Pe-0)*w),V!=null&&(Je=Ct+Pt>>1,He=Xe+pr>>1,f(V[z+2*Pe-1],255&Je,Je>>16,Ae,Ee+(2*Pe-1)*w),f(V[z+2*Pe+0],255&He,He>>16,Ae,Ee+(2*Pe+0)*w)),He=Bt,Pt=pr}1&Re||(Je=3*He+Pt+131074>>2,f(E[M+Re-1],255&Je,Je>>16,Se,ye+(Re-1)*w),V!=null&&(Je=3*Pt+He+131074>>2,f(V[z+Re-1],255&Je,Je>>16,Ae,Ee+(Re-1)*w)))}}function cs(){fs[hf]=BE,fs[df]=d5,fs[a5]=zE,fs[ff]=f5,fs[pf]=p5,fs[Ng]=m5,fs[l5]=qE,fs[Ag]=d5,fs[Eg]=f5,fs[mf]=p5,fs[Ig]=m5}function d(h){return h&-16384?0>h?0:255:h>>HE}function _(h,f){return d((19077*h>>8)+(26149*f>>8)-14234)}function C(h,f,w){return d((19077*h>>8)-(6419*f>>8)-(13320*w>>8)+8708)}function W(h,f){return d((19077*h>>8)+(33050*f>>8)-17685)}function fe(h,f,w,E,M){E[M+0]=_(h,w),E[M+1]=C(h,f,w),E[M+2]=W(h,f)}function be(h,f,w,E,M){E[M+0]=W(h,f),E[M+1]=C(h,f,w),E[M+2]=_(h,w)}function Oe(h,f,w,E,M){var V=C(h,f,w);f=V<<3&224|W(h,f)>>3,E[M+0]=248&_(h,w)|V>>5,E[M+1]=f}function Vt(h,f,w,E,M){var V=240&W(h,f)|15;E[M+0]=240&_(h,w)|C(h,f,w)>>4,E[M+1]=V}function On(h,f,w,E,M){E[M+0]=255,fe(h,f,w,E,M+1)}function jt(h,f,w,E,M){be(h,f,w,E,M),E[M+3]=255}function Yt(h,f,w,E,M){fe(h,f,w,E,M),E[M+3]=255}function yn(h,f,w){I[h]=function(E,M,V,z,H,$,J,se,we){for(var X=se+(-2&we)*w;se!=X;)f(E[M+0],V[z+0],H[$+0],J,se),f(E[M+1],V[z+0],H[$+0],J,se+w),M+=2,++z,++$,se+=2*w;1&we&&f(E[M+0],V[z+0],H[$+0],J,se)}}function Di(h,f,w){return w==0?h==0?f==0?6:5:f==0?4:0:w}function qr(h,f,w,E,M){switch(h>>>30){case 3:Vl(f,w,E,M,0);break;case 2:hs(f,w,E,M);break;case 1:en(f,w,E,M)}}function kr(h,f){var w,E,M=f.M,V=f.Nb,z=h.oc,H=h.pc+40,$=h.oc,J=h.pc+584,se=h.oc,we=h.pc+600;for(w=0;16>w;++w)z[H+32*w-1]=129;for(w=0;8>w;++w)$[J+32*w-1]=129,se[we+32*w-1]=129;for(0<M?z[H-1-32]=$[J-1-32]=se[we-1-32]=129:(i(z,H-32-1,127,21),i($,J-32-1,127,9),i(se,we-32-1,127,9)),E=0;E<h.za;++E){var X=f.ya[f.aa+E];if(0<E){for(w=-1;16>w;++w)r(z,H+32*w-4,z,H+32*w+12,4);for(w=-1;8>w;++w)r($,J+32*w-4,$,J+32*w+4,4),r(se,we+32*w-4,se,we+32*w+4,4)}var le=h.Gd,pe=h.Hd+E,Se=X.ad,ye=X.Hc;if(0<M&&(r(z,H-32,le[pe].y,0,16),r($,J-32,le[pe].f,0,8),r(se,we-32,le[pe].ea,0,8)),X.Za){var Ae=z,Ee=H-32+16;for(0<M&&(E>=h.za-1?i(Ae,Ee,le[pe].y[15],4):r(Ae,Ee,le[pe+1].y,0,4)),w=0;4>w;w++)Ae[Ee+128+w]=Ae[Ee+256+w]=Ae[Ee+384+w]=Ae[Ee+0+w];for(w=0;16>w;++w,ye<<=2)Ae=z,Ee=H+v5[w],Es[X.Ob[w]](Ae,Ee),qr(ye,Se,16*+w,Ae,Ee)}else if(Ae=Di(E,M,X.Ob[0]),La[Ae](z,H),ye!=0)for(w=0;16>w;++w,ye<<=2)qr(ye,Se,16*+w,z,H+v5[w]);for(w=X.Gc,Ae=Di(E,M,X.Dd),Oo[Ae]($,J),Oo[Ae](se,we),ye=Se,Ae=$,Ee=J,255&(X=0|w)&&(170&X?so(ye,256,Ae,Ee):fn(ye,256,Ae,Ee)),X=se,ye=we,255&(w>>=8)&&(170&w?so(Se,320,X,ye):fn(Se,320,X,ye)),M<h.Ub-1&&(r(le[pe].y,0,z,H+480,16),r(le[pe].f,0,$,J+224,8),r(le[pe].ea,0,se,we+224,8)),w=8*V*h.B,le=h.sa,pe=h.ta+16*E+16*V*h.R,Se=h.qa,X=h.ra+8*E+w,ye=h.Ha,Ae=h.Ia+8*E+w,w=0;16>w;++w)r(le,pe+w*h.R,z,H+32*w,16);for(w=0;8>w;++w)r(Se,X+w*h.B,$,J+32*w,8),r(ye,Ae+w*h.B,se,we+32*w,8)}}function As(h,f,w,E,M,V,z,H,$){var J=[0],se=[0],we=0,X=$!=null?$.kd:0,le=$??new Te;if(h==null||12>w)return 7;le.data=h,le.w=f,le.ha=w,f=[f],w=[w],le.gb=[le.gb];e:{var pe=f,Se=w,ye=le.gb;if(e(h!=null),e(Se!=null),e(ye!=null),ye[0]=0,12<=Se[0]&&!n(h,pe[0],"RIFF")){if(n(h,pe[0]+8,"WEBP")){ye=3;break e}var Ae=$e(h,pe[0]+4);if(12>Ae||4294967286<Ae){ye=3;break e}if(X&&Ae>Se[0]-8){ye=7;break e}ye[0]=Ae,pe[0]+=12,Se[0]-=12}ye=0}if(ye!=0)return ye;for(Ae=0<le.gb[0],w=w[0];;){e:{var Ee=h;Se=f,ye=w;var Re=J,Pe=se,nt=pe=[0];if((Je=we=[we])[0]=0,8>ye[0])ye=7;else{if(!n(Ee,Se[0],"VP8X")){if($e(Ee,Se[0]+4)!=10){ye=3;break e}if(18>ye[0]){ye=7;break e}var He=$e(Ee,Se[0]+8),Pt=1+De(Ee,Se[0]+12);if(2147483648<=Pt*(Ee=1+De(Ee,Se[0]+15))){ye=3;break e}nt!=null&&(nt[0]=He),Re!=null&&(Re[0]=Pt),Pe!=null&&(Pe[0]=Ee),Se[0]+=18,ye[0]-=18,Je[0]=1}ye=0}}if(we=we[0],pe=pe[0],ye!=0)return ye;if(Se=!!(2&pe),!Ae&&we)return 3;if(V!=null&&(V[0]=!!(16&pe)),z!=null&&(z[0]=Se),H!=null&&(H[0]=0),z=J[0],pe=se[0],we&&Se&&$==null){ye=0;break}if(4>w){ye=7;break}if(Ae&&we||!Ae&&!we&&!n(h,f[0],"ALPH")){w=[w],le.na=[le.na],le.P=[le.P],le.Sa=[le.Sa];e:{He=h,ye=f,Ae=w;var Je=le.gb;Re=le.na,Pe=le.P,nt=le.Sa,Pt=22,e(He!=null),e(Ae!=null),Ee=ye[0];var Bt=Ae[0];for(e(Re!=null),e(nt!=null),Re[0]=null,Pe[0]=null,nt[0]=0;;){if(ye[0]=Ee,Ae[0]=Bt,8>Bt){ye=7;break e}var pr=$e(He,Ee+4);if(4294967286<pr){ye=3;break e}var Ct=8+pr+1&-2;if(Pt+=Ct,0<Je&&Pt>Je){ye=3;break e}if(!n(He,Ee,"VP8 ")||!n(He,Ee,"VP8L")){ye=0;break e}if(Bt[0]<Ct){ye=7;break e}n(He,Ee,"ALPH")||(Re[0]=He,Pe[0]=Ee+8,nt[0]=pr),Ee+=Ct,Bt-=Ct}}if(w=w[0],le.na=le.na[0],le.P=le.P[0],le.Sa=le.Sa[0],ye!=0)break}w=[w],le.Ja=[le.Ja],le.xa=[le.xa];e:if(Je=h,ye=f,Ae=w,Re=le.gb[0],Pe=le.Ja,nt=le.xa,He=ye[0],Ee=!n(Je,He,"VP8 "),Pt=!n(Je,He,"VP8L"),e(Je!=null),e(Ae!=null),e(Pe!=null),e(nt!=null),8>Ae[0])ye=7;else{if(Ee||Pt){if(Je=$e(Je,He+4),12<=Re&&Je>Re-12){ye=3;break e}if(X&&Je>Ae[0]-8){ye=7;break e}Pe[0]=Je,ye[0]+=8,Ae[0]-=8,nt[0]=Pt}else nt[0]=5<=Ae[0]&&Je[He+0]==47&&!(Je[He+4]>>5),Pe[0]=Ae[0];ye=0}if(w=w[0],le.Ja=le.Ja[0],le.xa=le.xa[0],f=f[0],ye!=0)break;if(4294967286<le.Ja)return 3;if(H==null||Se||(H[0]=le.xa?2:1),z=[z],pe=[pe],le.xa){if(5>w){ye=7;break}H=z,X=pe,Se=V,h==null||5>w?h=0:5<=w&&h[f+0]==47&&!(h[f+4]>>5)?(Ae=[0],Je=[0],Re=[0],oe(Pe=new G,h,f,w),ts(Pe,Ae,Je,Re)?(H!=null&&(H[0]=Ae[0]),X!=null&&(X[0]=Je[0]),Se!=null&&(Se[0]=Re[0]),h=1):h=0):h=0}else{if(10>w){ye=7;break}H=pe,h==null||10>w||!ku(h,f+3,w-3)?h=0:(X=h[f+0]|h[f+1]<<8|h[f+2]<<16,Se=16383&(h[f+7]<<8|h[f+6]),h=16383&(h[f+9]<<8|h[f+8]),1&X||3<(X>>1&7)||!(X>>4&1)||X>>5>=le.Ja||!Se||!h?h=0:(z&&(z[0]=Se),H&&(H[0]=h),h=1))}if(!h||(z=z[0],pe=pe[0],we&&(J[0]!=z||se[0]!=pe)))return 3;$!=null&&($[0]=le,$.offset=f-$.w,e(4294967286>f-$.w),e($.offset==$.ha-w));break}return ye==0||ye==7&&we&&$==null?(V!=null&&(V[0]|=le.na!=null&&0<le.na.length),E!=null&&(E[0]=z),M!=null&&(M[0]=pe),0):ye}function sh(h,f,w){var E=f.width,M=f.height,V=0,z=0,H=E,$=M;if(f.Da=h!=null&&0<h.Da,f.Da&&(H=h.cd,$=h.bd,V=h.v,z=h.j,11>w||(V&=-2,z&=-2),0>V||0>z||0>=H||0>=$||V+H>E||z+$>M))return 0;if(f.v=V,f.j=z,f.va=V+H,f.o=z+$,f.U=H,f.T=$,f.da=h!=null&&0<h.da,f.da){if(!ut(H,$,w=[h.ib],V=[h.hb]))return 0;f.ib=w[0],f.hb=V[0]}return f.ob=h!=null&&h.ob,f.Kb=h==null||!h.Sd,f.da&&(f.ob=f.ib<3*E/4&&f.hb<3*M/4,f.Kb=0),1}function oh(h){if(h==null)return 2;if(11>h.S){var f=h.f.RGBA;f.fb+=(h.height-1)*f.A,f.A=-f.A}else f=h.f.kb,h=h.height,f.O+=(h-1)*f.fa,f.fa=-f.fa,f.N+=(h-1>>1)*f.Ab,f.Ab=-f.Ab,f.W+=(h-1>>1)*f.Db,f.Db=-f.Db,f.F!=null&&(f.J+=(h-1)*f.lb,f.lb=-f.lb);return 0}function Aa(h,f,w,E){if(E==null||0>=h||0>=f)return 2;if(w!=null){if(w.Da){var M=w.cd,V=w.bd,z=-2&w.v,H=-2&w.j;if(0>z||0>H||0>=M||0>=V||z+M>h||H+V>f)return 2;h=M,f=V}if(w.da){if(!ut(h,f,M=[w.ib],V=[w.hb]))return 2;h=M[0],f=V[0]}}E.width=h,E.height=f;e:{var $=E.width,J=E.height;if(h=E.S,0>=$||0>=J||!(h>=hf&&13>h))h=2;else{if(0>=E.Rd&&E.sd==null){z=V=M=f=0;var se=(H=$*y5[h])*J;if(11>h||(V=(J+1)/2*(f=($+1)/2),h==12&&(z=(M=$)*J)),(J=s(se+2*V+z))==null){h=1;break e}E.sd=J,11>h?(($=E.f.RGBA).eb=J,$.fb=0,$.A=H,$.size=se):(($=E.f.kb).y=J,$.O=0,$.fa=H,$.Fd=se,$.f=J,$.N=0+se,$.Ab=f,$.Cd=V,$.ea=J,$.W=0+se+V,$.Db=f,$.Ed=V,h==12&&($.F=J,$.J=0+se+2*V),$.Tc=z,$.lb=M)}if(f=1,M=E.S,V=E.width,z=E.height,M>=hf&&13>M)if(11>M)h=E.f.RGBA,f&=(H=Math.abs(h.A))*(z-1)+V<=h.size,f&=H>=V*y5[M],f&=h.eb!=null;else{h=E.f.kb,H=(V+1)/2,se=(z+1)/2,$=Math.abs(h.fa),J=Math.abs(h.Ab);var we=Math.abs(h.Db),X=Math.abs(h.lb),le=X*(z-1)+V;f&=$*(z-1)+V<=h.Fd,f&=J*(se-1)+H<=h.Cd,f=(f&=we*(se-1)+H<=h.Ed)&$>=V&J>=H&we>=H,f&=h.y!=null,f&=h.f!=null,f&=h.ea!=null,M==12&&(f&=X>=V,f&=le<=h.Tc,f&=h.F!=null)}else f=0;h=f?0:2}}return h!=0||w!=null&&w.fd&&(h=oh(E)),h}var Ml=64,Oi=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Fi=24,Ea=32,jo=8,Ia=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Be("Predictor0","PredictorAdd0"),I.Predictor0=function(){return 4278190080},I.Predictor1=function(h){return h},I.Predictor2=function(h,f,w){return f[w+0]},I.Predictor3=function(h,f,w){return f[w+1]},I.Predictor4=function(h,f,w){return f[w-1]},I.Predictor5=function(h,f,w){return tt(tt(h,f[w+1]),f[w+0])},I.Predictor6=function(h,f,w){return tt(h,f[w-1])},I.Predictor7=function(h,f,w){return tt(h,f[w+0])},I.Predictor8=function(h,f,w){return tt(f[w-1],f[w+0])},I.Predictor9=function(h,f,w){return tt(f[w+0],f[w+1])},I.Predictor10=function(h,f,w){return tt(tt(h,f[w-1]),tt(f[w+0],f[w+1]))},I.Predictor11=function(h,f,w){var E=f[w+0];return 0>=Ze(E>>24&255,h>>24&255,(f=f[w-1])>>24&255)+Ze(E>>16&255,h>>16&255,f>>16&255)+Ze(E>>8&255,h>>8&255,f>>8&255)+Ze(255&E,255&h,255&f)?E:h},I.Predictor12=function(h,f,w){var E=f[w+0];return(qt((h>>24&255)+(E>>24&255)-((f=f[w-1])>>24&255))<<24|qt((h>>16&255)+(E>>16&255)-(f>>16&255))<<16|qt((h>>8&255)+(E>>8&255)-(f>>8&255))<<8|qt((255&h)+(255&E)-(255&f)))>>>0},I.Predictor13=function(h,f,w){var E=f[w-1];return(Lt((h=tt(h,f[w+0]))>>24&255,E>>24&255)<<24|Lt(h>>16&255,E>>16&255)<<16|Lt(h>>8&255,E>>8&255)<<8|Lt(255&h,255&E))>>>0};var ah=I.PredictorAdd0;I.PredictorAdd1=ft,Be("Predictor2","PredictorAdd2"),Be("Predictor3","PredictorAdd3"),Be("Predictor4","PredictorAdd4"),Be("Predictor5","PredictorAdd5"),Be("Predictor6","PredictorAdd6"),Be("Predictor7","PredictorAdd7"),Be("Predictor8","PredictorAdd8"),Be("Predictor9","PredictorAdd9"),Be("Predictor10","PredictorAdd10"),Be("Predictor11","PredictorAdd11"),Be("Predictor12","PredictorAdd12"),Be("Predictor13","PredictorAdd13");var Ou=I.PredictorAdd2;et("ColorIndexInverseTransform","MapARGB","32b",function(h){return h>>8&255},function(h){return h}),et("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(h){return h},function(h){return h>>8&255});var Qn,lf=I.ColorIndexInverseTransform,ro=I.MapARGB,io=I.VP8LColorIndexInverseTransformAlpha,lh=I.MapAlpha,uh=I.VP8LPredictorsAdd=[];uh.length=16,(I.VP8LPredictors=[]).length=16,(I.VP8LPredictorsAdd_C=[]).length=16,(I.VP8LPredictors_C=[]).length=16;var ch,hh,Ta,ka,Pa,Ul,Ca,Vl,hs,so,en,fn,Jn,fr,Do,dh,Fu,uf,Gy,Ky,Yy,Qy,Jy,Xy,fh,Zy,e5,t5,n5=s(511),r5=s(2041),i5=s(225),s5=s(767),o5=0,Sg=r5,cf=i5,Mi=s5,ds=n5,hf=0,df=1,a5=2,ff=3,pf=4,Ng=5,l5=6,Ag=7,Eg=8,mf=9,Ig=10,IE=[2,3,7],TE=[3,3,11],u5=[280,256,256,256,40],kE=[0,1,1,1,0],PE=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],CE=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],LE=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],RE=8,Tg=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],kg=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],ph=null,jE=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],DE=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],c5=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],OE=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],FE=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],ME=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],UE=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],La=[],Es=[],Oo=[],VE=1,h5=2,Ra=[],fs=[];us("UpsampleRgbLinePair",fe,3),us("UpsampleBgrLinePair",be,3),us("UpsampleRgbaLinePair",Yt,4),us("UpsampleBgraLinePair",jt,4),us("UpsampleArgbLinePair",On,4),us("UpsampleRgba4444LinePair",Vt,2),us("UpsampleRgb565LinePair",Oe,2);var BE=I.UpsampleRgbLinePair,zE=I.UpsampleBgrLinePair,d5=I.UpsampleRgbaLinePair,f5=I.UpsampleBgraLinePair,p5=I.UpsampleArgbLinePair,m5=I.UpsampleRgba4444LinePair,qE=I.UpsampleRgb565LinePair,gf=16,vf=1<<gf-1,mh=-227,Pg=482,HE=6,g5=0,WE=s(256),$E=s(256),GE=s(256),KE=s(256),YE=s(Pg-mh),QE=s(Pg-mh);yn("YuvToRgbRow",fe,3),yn("YuvToBgrRow",be,3),yn("YuvToRgbaRow",Yt,4),yn("YuvToBgraRow",jt,4),yn("YuvToArgbRow",On,4),yn("YuvToRgba4444Row",Vt,2),yn("YuvToRgb565Row",Oe,2);var v5=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],yf=[0,2,8],JE=[8,7,6,4,4,2,2,2,1,1,1,1],XE=1;this.WebPDecodeRGBA=function(h,f,w,E,M){var V=df,z=new Ne,H=new Tt;z.ba=H,H.S=V,H.width=[H.width],H.height=[H.height];var $=H.width,J=H.height,se=new at;if(se==null||h==null)var we=2;else e(se!=null),we=As(h,f,w,se.width,se.height,se.Pd,se.Qd,se.format,null);if(we!=0?$=0:($!=null&&($[0]=se.width[0]),J!=null&&(J[0]=se.height[0]),$=1),$){H.width=H.width[0],H.height=H.height[0],E!=null&&(E[0]=H.width),M!=null&&(M[0]=H.height);e:{if(E=new Xs,(M=new Te).data=h,M.w=f,M.ha=w,M.kd=1,f=[0],e(M!=null),((h=As(M.data,M.w,M.ha,null,null,null,f,null,M))==0||h==7)&&f[0]&&(h=4),(f=h)==0){if(e(z!=null),E.data=M.data,E.w=M.w+M.offset,E.ha=M.ha-M.offset,E.put=ct,E.ac=Vr,E.bc=bn,E.ma=z,M.xa){if((h=Ys())==null){z=1;break e}if(function(X,le){var pe=[0],Se=[0],ye=[0];t:for(;;){if(X==null)return 0;if(le==null)return X.a=2,0;if(X.l=le,X.a=0,oe(X.m,le.data,le.w,le.ha),!ts(X.m,pe,Se,ye)){X.a=3;break t}if(X.xb=h5,le.width=pe[0],le.height=Se[0],!Li(pe[0],Se[0],1,X,null))break t;return 1}return e(X.a!=0),0}(h,E)){if(E=(f=Aa(E.width,E.height,z.Oa,z.ba))==0){t:{E=h;n:for(;;){if(E==null){E=0;break t}if(e(E.s.yc!=null),e(E.s.Ya!=null),e(0<E.s.Wb),e((w=E.l)!=null),e((M=w.ma)!=null),E.xb!=0){if(E.ca=M.ba,E.tb=M.tb,e(E.ca!=null),!sh(M.Oa,w,ff)){E.a=2;break n}if(!bs(E,w.width)||w.da)break n;if((w.da||ht(E.ca.S))&&wi(),11>E.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),E.ca.f.kb.F!=null&&wi()),E.Pb&&0<E.s.ua&&E.s.vb.X==null&&!K(E.s.vb,E.s.Wa.Xa)){E.a=1;break n}E.xb=0}if(!zr(E,E.V,E.Ba,E.c,E.i,w.o,Ks))break n;M.Dc=E.Ma,E=1;break t}e(E.a!=0),E=0}E=!E}E&&(f=h.a)}else f=h.a}else{if((h=new Tu)==null){z=1;break e}if(h.Fa=M.na,h.P=M.P,h.qc=M.Sa,ns(h,E)){if((f=Aa(E.width,E.height,z.Oa,z.ba))==0){if(h.Aa=0,w=z.Oa,e((M=h)!=null),w!=null){if(0<($=0>($=w.Md)?0:100<$?255:255*$/100)){for(J=se=0;4>J;++J)12>(we=M.pb[J]).lc&&(we.ia=$*JE[0>we.lc?0:we.lc]>>3),se|=we.ia;se&&(alert("todo:VP8InitRandom"),M.ia=1)}M.Ga=w.Id,100<M.Ga?M.Ga=100:0>M.Ga&&(M.Ga=0)}(function(X,le){if(X==null)return 0;if(le==null)return Ln(X,2,"NULL VP8Io parameter in VP8Decode().");if(!X.cb&&!ns(X,le))return 0;if(e(X.cb),le.ac==null||le.ac(le)){le.ob&&(X.L=0);var pe=yf[X.L];if(X.L==2?(X.yb=0,X.zb=0):(X.yb=le.v-pe>>4,X.zb=le.j-pe>>4,0>X.yb&&(X.yb=0),0>X.zb&&(X.zb=0)),X.Va=le.o+15+pe>>4,X.Hb=le.va+15+pe>>4,X.Hb>X.za&&(X.Hb=X.za),X.Va>X.Ub&&(X.Va=X.Ub),0<X.L){var Se=X.ed;for(pe=0;4>pe;++pe){var ye;if(X.Qa.Cb){var Ae=X.Qa.Lb[pe];X.Qa.Fb||(Ae+=Se.Tb)}else Ae=Se.Tb;for(ye=0;1>=ye;++ye){var Ee=X.gd[pe][ye],Re=Ae;if(Se.Pc&&(Re+=Se.vd[0],ye&&(Re+=Se.od[0])),0<(Re=0>Re?0:63<Re?63:Re)){var Pe=Re;0<Se.wb&&(Pe=4<Se.wb?Pe>>2:Pe>>1)>9-Se.wb&&(Pe=9-Se.wb),1>Pe&&(Pe=1),Ee.dd=Pe,Ee.tc=2*Re+Pe,Ee.ld=40<=Re?2:15<=Re?1:0}else Ee.tc=0;Ee.La=ye}}}pe=0}else Ln(X,6,"Frame setup failed"),pe=X.a;if(pe=pe==0){if(pe){X.$c=0,0<X.Aa||(X.Ic=XE);t:{pe=X.Ic,Se=4*(Pe=X.za);var nt=32*Pe,He=Pe+1,Pt=0<X.L?Pe*(0<X.Aa?2:1):0,Je=(X.Aa==2?2:1)*Pe;if((Ee=Se+832+(ye=3*(16*pe+yf[X.L])/2*nt)+(Ae=X.Fa!=null&&0<X.Fa.length?X.Kc.c*X.Kc.i:0))!=Ee)pe=0;else{if(Ee>X.Vb){if(X.Vb=0,X.Ec=s(Ee),X.Fc=0,X.Ec==null){pe=Ln(X,1,"no memory during frame initialization.");break t}X.Vb=Ee}Ee=X.Ec,Re=X.Fc,X.Ac=Ee,X.Bc=Re,Re+=Se,X.Gd=o(nt,Pl),X.Hd=0,X.rb=o(He+1,Ri),X.sb=1,X.wa=Pt?o(Pt,xr):null,X.Y=0,X.D.Nb=0,X.D.wa=X.wa,X.D.Y=X.Y,0<X.Aa&&(X.D.Y+=Pe),e(!0),X.oc=Ee,X.pc=Re,Re+=832,X.ya=o(Je,Tl),X.aa=0,X.D.ya=X.ya,X.D.aa=X.aa,X.Aa==2&&(X.D.aa+=Pe),X.R=16*Pe,X.B=8*Pe,Pe=(nt=yf[X.L])*X.R,nt=nt/2*X.B,X.sa=Ee,X.ta=Re+Pe,X.qa=X.sa,X.ra=X.ta+16*pe*X.R+nt,X.Ha=X.qa,X.Ia=X.ra+8*pe*X.B+nt,X.$c=0,Re+=ye,X.mb=Ae?Ee:null,X.nb=Ae?Re:null,e(Re+Ae<=X.Fc+X.Vb),Ll(X),i(X.Ac,X.Bc,0,Se),pe=1}}if(pe){if(le.ka=0,le.y=X.sa,le.O=X.ta,le.f=X.qa,le.N=X.ra,le.ea=X.Ha,le.Vd=X.Ia,le.fa=X.R,le.Rc=X.B,le.F=null,le.J=0,!o5){for(pe=-255;255>=pe;++pe)n5[255+pe]=0>pe?-pe:pe;for(pe=-1020;1020>=pe;++pe)r5[1020+pe]=-128>pe?-128:127<pe?127:pe;for(pe=-112;112>=pe;++pe)i5[112+pe]=-16>pe?-16:15<pe?15:pe;for(pe=-255;510>=pe;++pe)s5[255+pe]=0>pe?0:255<pe?255:pe;o5=1}Ca=rs,Vl=Pu,so=Ft,en=Po,fn=Zs,hs=wa,Jn=Na,fr=ls,Do=O,dh=Y,Fu=Fl,uf=y,Gy=re,Ky=ce,Yy=no,Qy=oi,Jy=Ol,Xy=Du,Es[0]=rh,Es[1]=Cu,Es[2]=th,Es[3]=nh,Es[4]=br,Es[5]=ih,Es[6]=Ss,Es[7]=xa,Es[8]=ba,Es[9]=Ns,La[0]=is,La[1]=eh,La[2]=Rl,La[3]=Lu,La[4]=eo,La[5]=_a,La[6]=Ru,Oo[0]=jl,Oo[1]=Zc,Oo[2]=ji,Oo[3]=Lo,Oo[4]=Dl,Oo[5]=un,Oo[6]=ju,pe=1}else pe=0}pe&&(pe=function(Bt,pr){for(Bt.M=0;Bt.M<Bt.Va;++Bt.M){var Ct,Xe=Bt.Jc[Bt.M&Bt.Xb],Me=Bt.m,Xn=Bt;for(Ct=0;Ct<Xn.za;++Ct){var At=Me,Ht=Xn,Sn=Ht.Ac,Pr=Ht.Bc+4*Ct,li=Ht.zc,Hn=Ht.ya[Ht.aa+Ct];if(Ht.Qa.Bb?Hn.$b=xe(At,Ht.Pa.jb[0])?2+xe(At,Ht.Pa.jb[2]):xe(At,Ht.Pa.jb[1]):Hn.$b=0,Ht.kc&&(Hn.Ad=xe(At,Ht.Bd)),Hn.Za=!xe(At,145)+0,Hn.Za){var Hr=Hn.Ob,ui=0;for(Ht=0;4>Ht;++Ht){var mr,Gt=li[0+Ht];for(mr=0;4>mr;++mr){Gt=FE[Sn[Pr+mr]][Gt];for(var nn=c5[xe(At,Gt[0])];0<nn;)nn=c5[2*nn+xe(At,Gt[nn])];Gt=-nn,Sn[Pr+mr]=Gt}r(Hr,ui,Sn,Pr,4),ui+=4,li[0+Ht]=Gt}}else Gt=xe(At,156)?xe(At,128)?1:3:xe(At,163)?2:0,Hn.Ob[0]=Gt,i(Sn,Pr,Gt,4),i(li,0,Gt,4);Hn.Dd=xe(At,142)?xe(At,114)?xe(At,183)?1:3:2:0}if(Xn.m.Ka)return Ln(Bt,7,"Premature end-of-partition0 encountered.");for(;Bt.ja<Bt.za;++Bt.ja){if(Xn=Xe,At=(Me=Bt).rb[Me.sb-1],Sn=Me.rb[Me.sb+Me.ja],Ct=Me.ya[Me.aa+Me.ja],Pr=Me.kc?Ct.Ad:0)At.la=Sn.la=0,Ct.Za||(At.Na=Sn.Na=0),Ct.Hc=0,Ct.Gc=0,Ct.ia=0;else{var Wn,rn;if(At=Sn,Sn=Xn,Pr=Me.Pa.Xc,li=Me.ya[Me.aa+Me.ja],Hn=Me.pb[li.$b],Ht=li.ad,Hr=0,ui=Me.rb[Me.sb-1],Gt=mr=0,i(Ht,Hr,0,384),li.Za)var Cr=0,Is=Pr[3];else{nn=s(16);var Zn=At.Na+ui.Na;if(Zn=ph(Sn,Pr[1],Zn,Hn.Eb,0,nn,0),At.Na=ui.Na=(0<Zn)+0,1<Zn)Ca(nn,0,Ht,Hr);else{var _i=nn[0]+3>>3;for(nn=0;256>nn;nn+=16)Ht[Hr+nn]=_i}Cr=1,Is=Pr[0]}var pn=15&At.la,gr=15&ui.la;for(nn=0;4>nn;++nn){var Ui=1&gr;for(_i=rn=0;4>_i;++_i)pn=pn>>1|(Ui=(Zn=ph(Sn,Is,Zn=Ui+(1&pn),Hn.Sc,Cr,Ht,Hr))>Cr)<<7,rn=rn<<2|(3<Zn?3:1<Zn?2:Ht[Hr+0]!=0),Hr+=16;pn>>=4,gr=gr>>1|Ui<<7,mr=(mr<<8|rn)>>>0}for(Is=pn,Cr=gr>>4,Wn=0;4>Wn;Wn+=2){for(rn=0,pn=At.la>>4+Wn,gr=ui.la>>4+Wn,nn=0;2>nn;++nn){for(Ui=1&gr,_i=0;2>_i;++_i)Zn=Ui+(1&pn),pn=pn>>1|(Ui=0<(Zn=ph(Sn,Pr[2],Zn,Hn.Qc,0,Ht,Hr)))<<3,rn=rn<<2|(3<Zn?3:1<Zn?2:Ht[Hr+0]!=0),Hr+=16;pn>>=2,gr=gr>>1|Ui<<5}Gt|=rn<<4*Wn,Is|=pn<<4<<Wn,Cr|=(240&gr)<<Wn}At.la=Is,ui.la=Cr,li.Hc=mr,li.Gc=Gt,li.ia=43690&Gt?0:Hn.ia,Pr=!(mr|Gt)}if(0<Me.L&&(Me.wa[Me.Y+Me.ja]=Me.gd[Ct.$b][Ct.Za],Me.wa[Me.Y+Me.ja].La|=!Pr),Xn.Ka)return Ln(Bt,7,"Premature end-of-file encountered.")}if(Ll(Bt),Me=pr,Xn=1,Ct=(Xe=Bt).D,At=0<Xe.L&&Xe.M>=Xe.zb&&Xe.M<=Xe.Va,Xe.Aa==0)t:{if(Ct.M=Xe.M,Ct.uc=At,kr(Xe,Ct),Xn=1,Ct=(rn=Xe.D).Nb,At=(Gt=yf[Xe.L])*Xe.R,Sn=Gt/2*Xe.B,nn=16*Ct*Xe.R,_i=8*Ct*Xe.B,Pr=Xe.sa,li=Xe.ta-At+nn,Hn=Xe.qa,Ht=Xe.ra-Sn+_i,Hr=Xe.Ha,ui=Xe.Ia-Sn+_i,gr=(pn=rn.M)==0,mr=pn>=Xe.Va-1,Xe.Aa==2&&kr(Xe,rn),rn.uc)for(Ui=(Zn=Xe).D.M,e(Zn.D.uc),rn=Zn.yb;rn<Zn.Hb;++rn){Cr=rn,Is=Ui;var ci=(Vi=(Lr=Zn).D).Nb;Wn=Lr.R;var Vi=Vi.wa[Vi.Y+Cr],Bi=Lr.sa,xi=Lr.ta+16*ci*Wn+16*Cr,zi=Vi.dd,wn=Vi.tc;if(wn!=0)if(e(3<=wn),Lr.L==1)0<Cr&&Qy(Bi,xi,Wn,wn+4),Vi.La&&Xy(Bi,xi,Wn,wn),0<Is&&Yy(Bi,xi,Wn,wn+4),Vi.La&&Jy(Bi,xi,Wn,wn);else{var qi=Lr.B,Ts=Lr.qa,Bl=Lr.ra+8*ci*qi+8*Cr,Fo=Lr.Ha,Lr=Lr.Ia+8*ci*qi+8*Cr;ci=Vi.ld,0<Cr&&(fr(Bi,xi,Wn,wn+4,zi,ci),dh(Ts,Bl,Fo,Lr,qi,wn+4,zi,ci)),Vi.La&&(uf(Bi,xi,Wn,wn,zi,ci),Ky(Ts,Bl,Fo,Lr,qi,wn,zi,ci)),0<Is&&(Jn(Bi,xi,Wn,wn+4,zi,ci),Do(Ts,Bl,Fo,Lr,qi,wn+4,zi,ci)),Vi.La&&(Fu(Bi,xi,Wn,wn,zi,ci),Gy(Ts,Bl,Fo,Lr,qi,wn,zi,ci))}}if(Xe.ia&&alert("todo:DitherRow"),Me.put!=null){if(rn=16*pn,pn=16*(pn+1),gr?(Me.y=Xe.sa,Me.O=Xe.ta+nn,Me.f=Xe.qa,Me.N=Xe.ra+_i,Me.ea=Xe.Ha,Me.W=Xe.Ia+_i):(rn-=Gt,Me.y=Pr,Me.O=li,Me.f=Hn,Me.N=Ht,Me.ea=Hr,Me.W=ui),mr||(pn-=Gt),pn>Me.o&&(pn=Me.o),Me.F=null,Me.J=null,Xe.Fa!=null&&0<Xe.Fa.length&&rn<pn&&(Me.J=tn(Xe,Me,rn,pn-rn),Me.F=Xe.mb,Me.F==null&&Me.F.length==0)){Xn=Ln(Xe,3,"Could not decode alpha data.");break t}rn<Me.j&&(Gt=Me.j-rn,rn=Me.j,e(!(1&Gt)),Me.O+=Xe.R*Gt,Me.N+=Xe.B*(Gt>>1),Me.W+=Xe.B*(Gt>>1),Me.F!=null&&(Me.J+=Me.width*Gt)),rn<pn&&(Me.O+=Me.v,Me.N+=Me.v>>1,Me.W+=Me.v>>1,Me.F!=null&&(Me.J+=Me.v),Me.ka=rn-Me.j,Me.U=Me.va-Me.v,Me.T=pn-rn,Xn=Me.put(Me))}Ct+1!=Xe.Ic||mr||(r(Xe.sa,Xe.ta-At,Pr,li+16*Xe.R,At),r(Xe.qa,Xe.ra-Sn,Hn,Ht+8*Xe.B,Sn),r(Xe.Ha,Xe.Ia-Sn,Hr,ui+8*Xe.B,Sn))}if(!Xn)return Ln(Bt,6,"Output aborted.")}return 1}(X,le)),le.bc!=null&&le.bc(le),pe&=1}return pe?(X.cb=0,pe):0})(h,E)||(f=h.a)}}else f=h.a}f==0&&z.Oa!=null&&z.Oa.fd&&(f=oh(z.ba))}z=f}V=z!=0?null:11>V?H.f.RGBA.eb:H.f.kb.y}else V=null;return V};var y5=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function u(I,R){for(var x="",T=0;T<4;T++)x+=String.fromCharCode(I[R++]);return x}function c(I,R){return I[R+0]|I[R+1]<<8}function g(I,R){return(I[R+0]|I[R+1]<<8|I[R+2]<<16)>>>0}function v(I,R){return(I[R+0]|I[R+1]<<8|I[R+2]<<16|I[R+3]<<24)>>>0}new l;var m=[0],S=[0],A=[],L=new l,b=t,k=function(I,R){var x={},T=0,P=!1,te=0,de=0;if(x.frames=[],!function(F,G){for(var B=0;B<4;B++)if(F[G+B]!="RIFF".charCodeAt(B))return!0;return!1}(I,R)){for(v(I,R+=4),R+=8;R<I.length;){var me=u(I,R),ge=v(I,R+=4);R+=4;var Q=ge+(1&ge);switch(me){case"VP8 ":case"VP8L":x.frames[T]===void 0&&(x.frames[T]={}),(he=x.frames[T]).src_off=P?de:R-8,he.src_size=te+ge+8,T++,P&&(P=!1,te=0,de=0);break;case"VP8X":(he=x.header={}).feature_flags=I[R];var oe=R+4;he.canvas_width=1+g(I,oe),oe+=3,he.canvas_height=1+g(I,oe),oe+=3;break;case"ALPH":P=!0,te=Q+8,de=R-8;break;case"ANIM":(he=x.header).bgcolor=v(I,R),oe=R+4,he.loop_count=c(I,oe),oe+=2;break;case"ANMF":var ae,he;(he=x.frames[T]={}).offset_x=2*g(I,R),R+=3,he.offset_y=2*g(I,R),R+=3,he.width=1+g(I,R),R+=3,he.height=1+g(I,R),R+=3,he.duration=g(I,R),R+=3,ae=I[R++],he.dispose=1&ae,he.blend=ae>>1&1}me!="ANMF"&&(R+=Q)}return x}}(b,0);k.response=b,k.rgbaoutput=!0,k.dataurl=!1;var j=k.header?k.header:null,U=k.frames?k.frames:null;if(j){j.loop_counter=j.loop_count,m=[j.canvas_height],S=[j.canvas_width];for(var q=0;q<U.length&&U[q].blend!=0;q++);}var ee=U[0],D=L.WebPDecodeRGBA(b,ee.src_off,ee.src_size,S,m);ee.rgba=D,ee.imgwidth=S[0],ee.imgheight=m[0];for(var N=0;N<S[0]*m[0]*4;N++)A[N]=D[N];return this.width=S,this.height=m,this.data=A,this}(function(t){var e,n,r,i,s,o,a,l,u,c=function(F){return F=F||{},this.isStrokeTransparent=F.isStrokeTransparent||!1,this.strokeOpacity=F.strokeOpacity||1,this.strokeStyle=F.strokeStyle||"#000000",this.fillStyle=F.fillStyle||"#000000",this.isFillTransparent=F.isFillTransparent||!1,this.fillOpacity=F.fillOpacity||1,this.font=F.font||"10px sans-serif",this.textBaseline=F.textBaseline||"alphabetic",this.textAlign=F.textAlign||"left",this.lineWidth=F.lineWidth||1,this.lineJoin=F.lineJoin||"miter",this.lineCap=F.lineCap||"butt",this.path=F.path||[],this.transform=F.transform!==void 0?F.transform.clone():new l,this.globalCompositeOperation=F.globalCompositeOperation||"normal",this.globalAlpha=F.globalAlpha||1,this.clip_path=F.clip_path||[],this.currentPoint=F.currentPoint||new o,this.miterLimit=F.miterLimit||10,this.lastPoint=F.lastPoint||new o,this.lineDashOffset=F.lineDashOffset||0,this.lineDash=F.lineDash||[],this.margin=F.margin||[0,0,0,0],this.prevPageLastElemOffset=F.prevPageLastElemOffset||0,this.ignoreClearRect=typeof F.ignoreClearRect!="boolean"||F.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new g(this),e=this.internal.f2,n=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,o=this.internal.Point,a=this.internal.Rectangle,l=this.internal.Matrix,u=new c}]);var g=function(F){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var G=F;Object.defineProperty(this,"pdf",{get:function(){return G}});var B=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return B},set:function(K){B=!!K}});var Z=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return Z},set:function(K){Z=!!K}});var ne=0;Object.defineProperty(this,"posX",{get:function(){return ne},set:function(K){isNaN(K)||(ne=K)}});var ie=0;Object.defineProperty(this,"posY",{get:function(){return ie},set:function(K){isNaN(K)||(ie=K)}}),Object.defineProperty(this,"margin",{get:function(){return u.margin},set:function(K){var Ue;typeof K=="number"?Ue=[K,K,K,K]:((Ue=new Array(4))[0]=K[0],Ue[1]=K.length>=2?K[1]:Ue[0],Ue[2]=K.length>=3?K[2]:Ue[0],Ue[3]=K.length>=4?K[3]:Ue[1]),u.margin=Ue}});var ve=!1;Object.defineProperty(this,"autoPaging",{get:function(){return ve},set:function(K){ve=K}});var _e=0;Object.defineProperty(this,"lastBreak",{get:function(){return _e},set:function(K){_e=K}});var xe=[];Object.defineProperty(this,"pageBreaks",{get:function(){return xe},set:function(K){xe=K}}),Object.defineProperty(this,"ctx",{get:function(){return u},set:function(K){K instanceof c&&(u=K)}}),Object.defineProperty(this,"path",{get:function(){return u.path},set:function(K){u.path=K}});var ke=[];Object.defineProperty(this,"ctxStack",{get:function(){return ke},set:function(K){ke=K}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(K){var Ue;Ue=v(K),this.ctx.fillStyle=Ue.style,this.ctx.isFillTransparent=Ue.a===0,this.ctx.fillOpacity=Ue.a,this.pdf.setFillColor(Ue.r,Ue.g,Ue.b,{a:Ue.a}),this.pdf.setTextColor(Ue.r,Ue.g,Ue.b,{a:Ue.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(K){var Ue=v(K);this.ctx.strokeStyle=Ue.style,this.ctx.isStrokeTransparent=Ue.a===0,this.ctx.strokeOpacity=Ue.a,Ue.a===0?this.pdf.setDrawColor(255,255,255):(Ue.a,this.pdf.setDrawColor(Ue.r,Ue.g,Ue.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(K){["butt","round","square"].indexOf(K)!==-1&&(this.ctx.lineCap=K,this.pdf.setLineCap(K))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(K){isNaN(K)||(this.ctx.lineWidth=K,this.pdf.setLineWidth(K))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(K){["bevel","round","miter"].indexOf(K)!==-1&&(this.ctx.lineJoin=K,this.pdf.setLineJoin(K))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(K){isNaN(K)||(this.ctx.miterLimit=K,this.pdf.setMiterLimit(K))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(K){this.ctx.textBaseline=K}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(K){["right","end","center","left","start"].indexOf(K)!==-1&&(this.ctx.textAlign=K)}});var Fe=null,De=null,$e=null;Object.defineProperty(this,"fontFaces",{get:function(){return $e},set:function(K){Fe=null,De=null,$e=K}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(K){var Ue;if(this.ctx.font=K,(Ue=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z0-9]+?)\s*$/i.exec(K))!==null){var Et=Ue[1];Ue[2];var ut=Ue[3],Ce=Ue[4];Ue[5];var it=Ue[6],Be=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Ce)[2];Ce=Math.floor(Be==="px"?parseFloat(Ce)*this.pdf.internal.scaleFactor:Be==="em"?parseFloat(Ce)*this.pdf.getFontSize():parseFloat(Ce)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Ce);var ot=function(et){var hn,Ot,It=[],Nt=et.trim();if(Nt==="")return Q0;if(Nt in Ab)return[Ab[Nt]];for(;Nt!=="";){switch(Ot=null,hn=(Nt=Ib(Nt)).charAt(0)){case'"':case"'":Ot=WU(Nt.substring(1),hn);break;default:Ot=$U(Nt)}if(Ot===null||(It.push(Ot[0]),(Nt=Ib(Ot[1]))!==""&&Nt.charAt(0)!==","))return Q0;Nt=Nt.replace(/^,/,"")}return It}(it);if(this.fontFaces){var tt=function(et,hn){var Ot=et.getFontList(),It=JSON.stringify(Ot);if(Fe===null||De!==It){var Nt=function(vn){var st=[];return Object.keys(vn).forEach(function(Xt){vn[Xt].forEach(function(ht){var vt=null;switch(ht){case"bold":vt={family:Xt,weight:"bold"};break;case"italic":vt={family:Xt,style:"italic"};break;case"bolditalic":vt={family:Xt,weight:"bold",style:"italic"};break;case"":case"normal":vt={family:Xt}}vt!==null&&(vt.ref={name:Xt,style:ht},st.push(vt))})}),st}(Ot);Fe=function(vn){for(var st={},Xt=0;Xt<vn.length;++Xt){var ht=Y0(vn[Xt]),vt=ht.family,Zt=ht.stretch,Tt=ht.style,at=ht.weight;st[vt]=st[vt]||{},st[vt][Zt]=st[vt][Zt]||{},st[vt][Zt][Tt]=st[vt][Zt][Tt]||{},st[vt][Zt][Tt][at]=ht}return st}(Nt.concat(hn)),De=It}return Fe}(this.pdf,this.fontFaces),qt=ot.map(function(et){return{family:et,stretch:"normal",weight:ut,style:Et}}),Lt=function(et,hn,Ot){for(var It=(Ot=Ot||{}).defaultFontFamily||"times",Nt=Object.assign({},HU,Ot.genericFontFamilies||{}),vn=null,st=null,Xt=0;Xt<hn.length;++Xt)if(Nt[(vn=Y0(hn[Xt])).family]&&(vn.family=Nt[vn.family]),et.hasOwnProperty(vn.family)){st=et[vn.family];break}if(!(st=st||et[It]))throw new Error("Could not find a font-family for the rule '"+Eb(vn)+"' and default family '"+It+"'.");if(st=function(ht,vt){if(vt[ht])return vt[ht];var Zt=F2[ht],Tt=Zt<=F2.normal?-1:1,at=Nb(vt,aE,Zt,Tt);if(!at)throw new Error("Could not find a matching font-stretch value for "+ht);return at}(vn.stretch,st),st=function(ht,vt){if(vt[ht])return vt[ht];for(var Zt=oE[ht],Tt=0;Tt<Zt.length;++Tt)if(vt[Zt[Tt]])return vt[Zt[Tt]];throw new Error("Could not find a matching font-style for "+ht)}(vn.style,st),!(st=function(ht,vt){if(vt[ht])return vt[ht];if(ht===400&&vt[500])return vt[500];if(ht===500&&vt[400])return vt[400];var Zt=qU[ht],Tt=Nb(vt,lE,Zt,ht<400?-1:1);if(!Tt)throw new Error("Could not find a matching font-weight for value "+ht);return Tt}(vn.weight,st)))throw new Error("Failed to resolve a font for the rule '"+Eb(vn)+"'.");return st}(tt,qt);this.pdf.setFont(Lt.ref.name,Lt.ref.style)}else{var Ze="";(ut==="bold"||parseInt(ut,10)>=700||Et==="bold")&&(Ze="bold"),Et==="italic"&&(Ze+="italic"),Ze.length===0&&(Ze="normal");for(var ft="",kt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Ge=0;Ge<ot.length;Ge++){if(this.pdf.internal.getFont(ot[Ge],Ze,{noFallback:!0,disableWarning:!0})!==void 0){ft=ot[Ge];break}if(Ze==="bolditalic"&&this.pdf.internal.getFont(ot[Ge],"bold",{noFallback:!0,disableWarning:!0})!==void 0)ft=ot[Ge],Ze="bold";else if(this.pdf.internal.getFont(ot[Ge],"normal",{noFallback:!0,disableWarning:!0})!==void 0){ft=ot[Ge],Ze="normal";break}}if(ft===""){for(var wt=0;wt<ot.length;wt++)if(kt[ot[wt]]){ft=kt[ot[wt]];break}}ft=ft===""?"Times":ft,this.pdf.setFont(ft,Ze)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(K){this.ctx.globalCompositeOperation=K}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(K){this.ctx.globalAlpha=K}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(K){this.ctx.lineDashOffset=K,he.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(K){this.ctx.lineDash=K,he.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(K){this.ctx.ignoreClearRect=!!K}})};g.prototype.setLineDash=function(F){this.lineDash=F},g.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},g.prototype.fill=function(){U.call(this,"fill",!1)},g.prototype.stroke=function(){U.call(this,"stroke",!1)},g.prototype.beginPath=function(){this.path=[{type:"begin"}]},g.prototype.moveTo=function(F,G){if(isNaN(F)||isNaN(G))throw mn.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var B=this.ctx.transform.applyToPoint(new o(F,G));this.path.push({type:"mt",x:B.x,y:B.y}),this.ctx.lastPoint=new o(F,G)},g.prototype.closePath=function(){var F=new o(0,0),G=0;for(G=this.path.length-1;G!==-1;G--)if(this.path[G].type==="begin"&&on(this.path[G+1])==="object"&&typeof this.path[G+1].x=="number"){F=new o(this.path[G+1].x,this.path[G+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(F.x,F.y)},g.prototype.lineTo=function(F,G){if(isNaN(F)||isNaN(G))throw mn.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var B=this.ctx.transform.applyToPoint(new o(F,G));this.path.push({type:"lt",x:B.x,y:B.y}),this.ctx.lastPoint=new o(B.x,B.y)},g.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),U.call(this,null,!0)},g.prototype.quadraticCurveTo=function(F,G,B,Z){if(isNaN(B)||isNaN(Z)||isNaN(F)||isNaN(G))throw mn.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var ne=this.ctx.transform.applyToPoint(new o(B,Z)),ie=this.ctx.transform.applyToPoint(new o(F,G));this.path.push({type:"qct",x1:ie.x,y1:ie.y,x:ne.x,y:ne.y}),this.ctx.lastPoint=new o(ne.x,ne.y)},g.prototype.bezierCurveTo=function(F,G,B,Z,ne,ie){if(isNaN(ne)||isNaN(ie)||isNaN(F)||isNaN(G)||isNaN(B)||isNaN(Z))throw mn.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var ve=this.ctx.transform.applyToPoint(new o(ne,ie)),_e=this.ctx.transform.applyToPoint(new o(F,G)),xe=this.ctx.transform.applyToPoint(new o(B,Z));this.path.push({type:"bct",x1:_e.x,y1:_e.y,x2:xe.x,y2:xe.y,x:ve.x,y:ve.y}),this.ctx.lastPoint=new o(ve.x,ve.y)},g.prototype.arc=function(F,G,B,Z,ne,ie){if(isNaN(F)||isNaN(G)||isNaN(B)||isNaN(Z)||isNaN(ne))throw mn.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(ie=!!ie,!this.ctx.transform.isIdentity){var ve=this.ctx.transform.applyToPoint(new o(F,G));F=ve.x,G=ve.y;var _e=this.ctx.transform.applyToPoint(new o(0,B)),xe=this.ctx.transform.applyToPoint(new o(0,0));B=Math.sqrt(Math.pow(_e.x-xe.x,2)+Math.pow(_e.y-xe.y,2))}Math.abs(ne-Z)>=2*Math.PI&&(Z=0,ne=2*Math.PI),this.path.push({type:"arc",x:F,y:G,radius:B,startAngle:Z,endAngle:ne,counterclockwise:ie})},g.prototype.arcTo=function(F,G,B,Z,ne){throw new Error("arcTo not implemented.")},g.prototype.rect=function(F,G,B,Z){if(isNaN(F)||isNaN(G)||isNaN(B)||isNaN(Z))throw mn.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(F,G),this.lineTo(F+B,G),this.lineTo(F+B,G+Z),this.lineTo(F,G+Z),this.lineTo(F,G),this.lineTo(F+B,G),this.lineTo(F,G)},g.prototype.fillRect=function(F,G,B,Z){if(isNaN(F)||isNaN(G)||isNaN(B)||isNaN(Z))throw mn.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!m.call(this)){var ne={};this.lineCap!=="butt"&&(ne.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(ne.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(F,G,B,Z),this.fill(),ne.hasOwnProperty("lineCap")&&(this.lineCap=ne.lineCap),ne.hasOwnProperty("lineJoin")&&(this.lineJoin=ne.lineJoin)}},g.prototype.strokeRect=function(F,G,B,Z){if(isNaN(F)||isNaN(G)||isNaN(B)||isNaN(Z))throw mn.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");S.call(this)||(this.beginPath(),this.rect(F,G,B,Z),this.stroke())},g.prototype.clearRect=function(F,G,B,Z){if(isNaN(F)||isNaN(G)||isNaN(B)||isNaN(Z))throw mn.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(F,G,B,Z))},g.prototype.save=function(F){F=typeof F!="boolean"||F;for(var G=this.pdf.internal.getCurrentPageInfo().pageNumber,B=0;B<this.pdf.internal.getNumberOfPages();B++)this.pdf.setPage(B+1),this.pdf.internal.out("q");if(this.pdf.setPage(G),F){this.ctx.fontSize=this.pdf.internal.getFontSize();var Z=new c(this.ctx);this.ctxStack.push(this.ctx),this.ctx=Z}},g.prototype.restore=function(F){F=typeof F!="boolean"||F;for(var G=this.pdf.internal.getCurrentPageInfo().pageNumber,B=0;B<this.pdf.internal.getNumberOfPages();B++)this.pdf.setPage(B+1),this.pdf.internal.out("Q");this.pdf.setPage(G),F&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},g.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var v=function(F){var G,B,Z,ne;if(F.isCanvasGradient===!0&&(F=F.getColor()),!F)return{r:0,g:0,b:0,a:0,style:F};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(F))G=0,B=0,Z=0,ne=0;else{var ie=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(F);if(ie!==null)G=parseInt(ie[1]),B=parseInt(ie[2]),Z=parseInt(ie[3]),ne=1;else if((ie=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(F))!==null)G=parseInt(ie[1]),B=parseInt(ie[2]),Z=parseInt(ie[3]),ne=parseFloat(ie[4]);else{if(ne=1,typeof F=="string"&&F.charAt(0)!=="#"){var ve=new ZA(F);F=ve.ok?ve.toHex():"#000000"}F.length===4?(G=F.substring(1,2),G+=G,B=F.substring(2,3),B+=B,Z=F.substring(3,4),Z+=Z):(G=F.substring(1,3),B=F.substring(3,5),Z=F.substring(5,7)),G=parseInt(G,16),B=parseInt(B,16),Z=parseInt(Z,16)}}return{r:G,g:B,b:Z,a:ne,style:F}},m=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},S=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};g.prototype.fillText=function(F,G,B,Z){if(isNaN(G)||isNaN(B)||typeof F!="string")throw mn.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(Z=isNaN(Z)?void 0:Z,!m.call(this)){var ne=Q(this.ctx.transform.rotation),ie=this.ctx.transform.scaleX;T.call(this,{text:F,x:G,y:B,scale:ie,angle:ne,align:this.textAlign,maxWidth:Z})}},g.prototype.strokeText=function(F,G,B,Z){if(isNaN(G)||isNaN(B)||typeof F!="string")throw mn.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!S.call(this)){Z=isNaN(Z)?void 0:Z;var ne=Q(this.ctx.transform.rotation),ie=this.ctx.transform.scaleX;T.call(this,{text:F,x:G,y:B,scale:ie,renderingMode:"stroke",angle:ne,align:this.textAlign,maxWidth:Z})}},g.prototype.measureText=function(F){if(typeof F!="string")throw mn.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var G=this.pdf,B=this.pdf.internal.scaleFactor,Z=G.internal.getFontSize(),ne=G.getStringUnitWidth(F)*Z/G.internal.scaleFactor;return new function(ie){var ve=(ie=ie||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return ve}}),this}({width:ne*=Math.round(96*B/72*1e4)/1e4})},g.prototype.scale=function(F,G){if(isNaN(F)||isNaN(G))throw mn.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var B=new l(F,0,0,G,0,0);this.ctx.transform=this.ctx.transform.multiply(B)},g.prototype.rotate=function(F){if(isNaN(F))throw mn.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var G=new l(Math.cos(F),Math.sin(F),-Math.sin(F),Math.cos(F),0,0);this.ctx.transform=this.ctx.transform.multiply(G)},g.prototype.translate=function(F,G){if(isNaN(F)||isNaN(G))throw mn.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var B=new l(1,0,0,1,F,G);this.ctx.transform=this.ctx.transform.multiply(B)},g.prototype.transform=function(F,G,B,Z,ne,ie){if(isNaN(F)||isNaN(G)||isNaN(B)||isNaN(Z)||isNaN(ne)||isNaN(ie))throw mn.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var ve=new l(F,G,B,Z,ne,ie);this.ctx.transform=this.ctx.transform.multiply(ve)},g.prototype.setTransform=function(F,G,B,Z,ne,ie){F=isNaN(F)?1:F,G=isNaN(G)?0:G,B=isNaN(B)?0:B,Z=isNaN(Z)?1:Z,ne=isNaN(ne)?0:ne,ie=isNaN(ie)?0:ie,this.ctx.transform=new l(F,G,B,Z,ne,ie)};var A=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};g.prototype.drawImage=function(F,G,B,Z,ne,ie,ve,_e,xe){var ke=this.pdf.getImageProperties(F),Fe=1,De=1,$e=1,K=1;Z!==void 0&&_e!==void 0&&($e=_e/Z,K=xe/ne,Fe=ke.width/Z*_e/Z,De=ke.height/ne*xe/ne),ie===void 0&&(ie=G,ve=B,G=0,B=0),Z!==void 0&&_e===void 0&&(_e=Z,xe=ne),Z===void 0&&_e===void 0&&(_e=ke.width,xe=ke.height);var Ue=this.ctx.transform.decompose(),Et=Q(Ue.rotate.shx),ut=new l,Ce=(ut=(ut=(ut=ut.multiply(Ue.translate)).multiply(Ue.skew)).multiply(Ue.scale)).applyToRectangle(new a(ie-G*$e,ve-B*K,Z*Fe,ne*De));if(this.autoPaging){for(var it,Be=L.call(this,Ce),ot=[],tt=0;tt<Be.length;tt+=1)ot.indexOf(Be[tt])===-1&&ot.push(Be[tt]);j(ot);for(var qt=ot[0],Lt=ot[ot.length-1],Ze=qt;Ze<Lt+1;Ze++){this.pdf.setPage(Ze);var ft=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],kt=Ze===1?this.posY+this.margin[0]:this.margin[0],Ge=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],wt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],et=Ze===1?0:Ge+(Ze-2)*wt;if(this.ctx.clip_path.length!==0){var hn=this.path;it=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=k(it,this.posX+this.margin[3],-et+kt+this.ctx.prevPageLastElemOffset),q.call(this,"fill",!0),this.path=hn}var Ot=JSON.parse(JSON.stringify(Ce));Ot=k([Ot],this.posX+this.margin[3],-et+kt+this.ctx.prevPageLastElemOffset)[0];var It=(Ze>qt||Ze<Lt)&&A.call(this);It&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ft,wt,null).clip().discardPath()),this.pdf.addImage(F,"JPEG",Ot.x,Ot.y,Ot.w,Ot.h,null,null,Et),It&&this.pdf.restoreGraphicsState()}}else this.pdf.addImage(F,"JPEG",Ce.x,Ce.y,Ce.w,Ce.h,null,null,Et)};var L=function(F,G,B){var Z=[];G=G||this.pdf.internal.pageSize.width,B=B||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var ne=this.posY+this.ctx.prevPageLastElemOffset;switch(F.type){default:case"mt":case"lt":Z.push(Math.floor((F.y+ne)/B)+1);break;case"arc":Z.push(Math.floor((F.y+ne-F.radius)/B)+1),Z.push(Math.floor((F.y+ne+F.radius)/B)+1);break;case"qct":var ie=oe(this.ctx.lastPoint.x,this.ctx.lastPoint.y,F.x1,F.y1,F.x,F.y);Z.push(Math.floor((ie.y+ne)/B)+1),Z.push(Math.floor((ie.y+ie.h+ne)/B)+1);break;case"bct":var ve=ae(this.ctx.lastPoint.x,this.ctx.lastPoint.y,F.x1,F.y1,F.x2,F.y2,F.x,F.y);Z.push(Math.floor((ve.y+ne)/B)+1),Z.push(Math.floor((ve.y+ve.h+ne)/B)+1);break;case"rect":Z.push(Math.floor((F.y+ne)/B)+1),Z.push(Math.floor((F.y+F.h+ne)/B)+1)}for(var _e=0;_e<Z.length;_e+=1)for(;this.pdf.internal.getNumberOfPages()<Z[_e];)b.call(this);return Z},b=function(){var F=this.fillStyle,G=this.strokeStyle,B=this.font,Z=this.lineCap,ne=this.lineWidth,ie=this.lineJoin;this.pdf.addPage(),this.fillStyle=F,this.strokeStyle=G,this.font=B,this.lineCap=Z,this.lineWidth=ne,this.lineJoin=ie},k=function(F,G,B){for(var Z=0;Z<F.length;Z++)switch(F[Z].type){case"bct":F[Z].x2+=G,F[Z].y2+=B;case"qct":F[Z].x1+=G,F[Z].y1+=B;default:F[Z].x+=G,F[Z].y+=B}return F},j=function(F){return F.sort(function(G,B){return G-B})},U=function(F,G){var B=this.fillStyle,Z=this.strokeStyle,ne=this.lineCap,ie=this.lineWidth,ve=Math.abs(ie*this.ctx.transform.scaleX),_e=this.lineJoin;if(this.autoPaging){for(var xe,ke,Fe=JSON.parse(JSON.stringify(this.path)),De=JSON.parse(JSON.stringify(this.path)),$e=[],K=0;K<De.length;K++)if(De[K].x!==void 0)for(var Ue=L.call(this,De[K]),Et=0;Et<Ue.length;Et+=1)$e.indexOf(Ue[Et])===-1&&$e.push(Ue[Et]);for(var ut=0;ut<$e.length;ut++)for(;this.pdf.internal.getNumberOfPages()<$e[ut];)b.call(this);j($e);for(var Ce=$e[0],it=$e[$e.length-1],Be=Ce;Be<it+1;Be++){this.pdf.setPage(Be),this.fillStyle=B,this.strokeStyle=Z,this.lineCap=ne,this.lineWidth=ve,this.lineJoin=_e;var ot=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],tt=Be===1?this.posY+this.margin[0]:this.margin[0],qt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Lt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Ze=Be===1?0:qt+(Be-2)*Lt;if(this.ctx.clip_path.length!==0){var ft=this.path;xe=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=k(xe,this.posX+this.margin[3],-Ze+tt+this.ctx.prevPageLastElemOffset),q.call(this,F,!0),this.path=ft}if(ke=JSON.parse(JSON.stringify(Fe)),this.path=k(ke,this.posX+this.margin[3],-Ze+tt+this.ctx.prevPageLastElemOffset),G===!1||Be===0){var kt=(Be>Ce||Be<it)&&A.call(this);kt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ot,Lt,null).clip().discardPath()),q.call(this,F,G),kt&&this.pdf.restoreGraphicsState()}this.lineWidth=ie}this.path=Fe}else this.lineWidth=ve,q.call(this,F,G),this.lineWidth=ie},q=function(F,G){if((F!=="stroke"||G||!S.call(this))&&(F==="stroke"||G||!m.call(this))){for(var B,Z,ne=[],ie=this.path,ve=0;ve<ie.length;ve++){var _e=ie[ve];switch(_e.type){case"begin":ne.push({begin:!0});break;case"close":ne.push({close:!0});break;case"mt":ne.push({start:_e,deltas:[],abs:[]});break;case"lt":var xe=ne.length;if(ie[ve-1]&&!isNaN(ie[ve-1].x)&&(B=[_e.x-ie[ve-1].x,_e.y-ie[ve-1].y],xe>0)){for(;xe>=0;xe--)if(ne[xe-1].close!==!0&&ne[xe-1].begin!==!0){ne[xe-1].deltas.push(B),ne[xe-1].abs.push(_e);break}}break;case"bct":B=[_e.x1-ie[ve-1].x,_e.y1-ie[ve-1].y,_e.x2-ie[ve-1].x,_e.y2-ie[ve-1].y,_e.x-ie[ve-1].x,_e.y-ie[ve-1].y],ne[ne.length-1].deltas.push(B);break;case"qct":var ke=ie[ve-1].x+2/3*(_e.x1-ie[ve-1].x),Fe=ie[ve-1].y+2/3*(_e.y1-ie[ve-1].y),De=_e.x+2/3*(_e.x1-_e.x),$e=_e.y+2/3*(_e.y1-_e.y),K=_e.x,Ue=_e.y;B=[ke-ie[ve-1].x,Fe-ie[ve-1].y,De-ie[ve-1].x,$e-ie[ve-1].y,K-ie[ve-1].x,Ue-ie[ve-1].y],ne[ne.length-1].deltas.push(B);break;case"arc":ne.push({deltas:[],abs:[],arc:!0}),Array.isArray(ne[ne.length-1].abs)&&ne[ne.length-1].abs.push(_e)}}Z=G?null:F==="stroke"?"stroke":"fill";for(var Et=!1,ut=0;ut<ne.length;ut++)if(ne[ut].arc)for(var Ce=ne[ut].abs,it=0;it<Ce.length;it++){var Be=Ce[it];Be.type==="arc"?N.call(this,Be.x,Be.y,Be.radius,Be.startAngle,Be.endAngle,Be.counterclockwise,void 0,G,!Et):P.call(this,Be.x,Be.y),Et=!0}else if(ne[ut].close===!0)this.pdf.internal.out("h"),Et=!1;else if(ne[ut].begin!==!0){var ot=ne[ut].start.x,tt=ne[ut].start.y;te.call(this,ne[ut].deltas,ot,tt),Et=!0}Z&&I.call(this,Z),G&&R.call(this)}},ee=function(F){var G=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,B=G*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return F-B;case"top":return F+G-B;case"hanging":return F+G-2*B;case"middle":return F+G/2-B;default:return F}},D=function(F){return F+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};g.prototype.createLinearGradient=function(){var F=function(){};return F.colorStops=[],F.addColorStop=function(G,B){this.colorStops.push([G,B])},F.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},F.isCanvasGradient=!0,F},g.prototype.createPattern=function(){return this.createLinearGradient()},g.prototype.createRadialGradient=function(){return this.createLinearGradient()};var N=function(F,G,B,Z,ne,ie,ve,_e,xe){for(var ke=me.call(this,B,Z,ne,ie),Fe=0;Fe<ke.length;Fe++){var De=ke[Fe];Fe===0&&(xe?x.call(this,De.x1+F,De.y1+G):P.call(this,De.x1+F,De.y1+G)),de.call(this,F,G,De.x2,De.y2,De.x3,De.y3,De.x4,De.y4)}_e?R.call(this):I.call(this,ve)},I=function(F){switch(F){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},R=function(){this.pdf.clip(),this.pdf.discardPath()},x=function(F,G){this.pdf.internal.out(n(F)+" "+r(G)+" m")},T=function(F){var G;switch(F.align){case"right":case"end":G="right";break;case"center":G="center";break;default:G="left"}var B,Z,ne,ie=this.pdf.getTextDimensions(F.text),ve=ee.call(this,F.y),_e=D.call(this,ve)-ie.h,xe=this.ctx.transform.applyToPoint(new o(F.x,ve));if(this.autoPaging){var ke=this.ctx.transform.decompose(),Fe=new l;Fe=(Fe=(Fe=Fe.multiply(ke.translate)).multiply(ke.skew)).multiply(ke.scale);for(var De=this.ctx.transform.applyToRectangle(new a(F.x,ve,ie.w,ie.h)),$e=Fe.applyToRectangle(new a(F.x,_e,ie.w,ie.h)),K=L.call(this,$e),Ue=[],Et=0;Et<K.length;Et+=1)Ue.indexOf(K[Et])===-1&&Ue.push(K[Et]);j(Ue);for(var ut=Ue[0],Ce=Ue[Ue.length-1],it=ut;it<Ce+1;it++){this.pdf.setPage(it);var Be=it===1?this.posY+this.margin[0]:this.margin[0],ot=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],tt=this.pdf.internal.pageSize.height-this.margin[2],qt=tt-this.margin[0],Lt=this.pdf.internal.pageSize.width-this.margin[1],Ze=Lt-this.margin[3],ft=it===1?0:ot+(it-2)*qt;if(this.ctx.clip_path.length!==0){var kt=this.path;B=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=k(B,this.posX+this.margin[3],-1*ft+Be),q.call(this,"fill",!0),this.path=kt}var Ge=k([JSON.parse(JSON.stringify($e))],this.posX+this.margin[3],-ft+Be+this.ctx.prevPageLastElemOffset)[0];F.scale>=.01&&(Z=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Z*F.scale),ne=this.lineWidth,this.lineWidth=ne*F.scale);var wt=this.autoPaging!=="text";if(wt||Ge.y+Ge.h<=tt){if(wt||Ge.y>=Be&&Ge.x<=Lt){var et=wt?F.text:this.pdf.splitTextToSize(F.text,F.maxWidth||Lt-Ge.x)[0],hn=k([JSON.parse(JSON.stringify(De))],this.posX+this.margin[3],-ft+Be+this.ctx.prevPageLastElemOffset)[0],Ot=wt&&(it>ut||it<Ce)&&A.call(this);Ot&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ze,qt,null).clip().discardPath()),this.pdf.text(et,hn.x,hn.y,{angle:F.angle,align:G,renderingMode:F.renderingMode}),Ot&&this.pdf.restoreGraphicsState()}}else Ge.y<tt&&(this.ctx.prevPageLastElemOffset+=tt-Ge.y);F.scale>=.01&&(this.pdf.setFontSize(Z),this.lineWidth=ne)}}else F.scale>=.01&&(Z=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Z*F.scale),ne=this.lineWidth,this.lineWidth=ne*F.scale),this.pdf.text(F.text,xe.x+this.posX,xe.y+this.posY,{angle:F.angle,align:G,renderingMode:F.renderingMode,maxWidth:F.maxWidth}),F.scale>=.01&&(this.pdf.setFontSize(Z),this.lineWidth=ne)},P=function(F,G,B,Z){B=B||0,Z=Z||0,this.pdf.internal.out(n(F+B)+" "+r(G+Z)+" l")},te=function(F,G,B){return this.pdf.lines(F,G,B,null,null)},de=function(F,G,B,Z,ne,ie,ve,_e){this.pdf.internal.out([e(i(B+F)),e(s(Z+G)),e(i(ne+F)),e(s(ie+G)),e(i(ve+F)),e(s(_e+G)),"c"].join(" "))},me=function(F,G,B,Z){for(var ne=2*Math.PI,ie=Math.PI/2;G>B;)G-=ne;var ve=Math.abs(B-G);ve<ne&&Z&&(ve=ne-ve);for(var _e=[],xe=Z?-1:1,ke=G;ve>1e-5;){var Fe=ke+xe*Math.min(ve,ie);_e.push(ge.call(this,F,ke,Fe)),ve-=Math.abs(Fe-ke),ke=Fe}return _e},ge=function(F,G,B){var Z=(B-G)/2,ne=F*Math.cos(Z),ie=F*Math.sin(Z),ve=ne,_e=-ie,xe=ve*ve+_e*_e,ke=xe+ve*ne+_e*ie,Fe=4/3*(Math.sqrt(2*xe*ke)-ke)/(ve*ie-_e*ne),De=ve-Fe*_e,$e=_e+Fe*ve,K=De,Ue=-$e,Et=Z+G,ut=Math.cos(Et),Ce=Math.sin(Et);return{x1:F*Math.cos(G),y1:F*Math.sin(G),x2:De*ut-$e*Ce,y2:De*Ce+$e*ut,x3:K*ut-Ue*Ce,y3:K*Ce+Ue*ut,x4:F*Math.cos(B),y4:F*Math.sin(B)}},Q=function(F){return 180*F/Math.PI},oe=function(F,G,B,Z,ne,ie){var ve=F+.5*(B-F),_e=G+.5*(Z-G),xe=ne+.5*(B-ne),ke=ie+.5*(Z-ie),Fe=Math.min(F,ne,ve,xe),De=Math.max(F,ne,ve,xe),$e=Math.min(G,ie,_e,ke),K=Math.max(G,ie,_e,ke);return new a(Fe,$e,De-Fe,K-$e)},ae=function(F,G,B,Z,ne,ie,ve,_e){var xe,ke,Fe,De,$e,K,Ue,Et,ut,Ce,it,Be,ot,tt,qt=B-F,Lt=Z-G,Ze=ne-B,ft=ie-Z,kt=ve-ne,Ge=_e-ie;for(ke=0;ke<41;ke++)ut=(Ue=(Fe=F+(xe=ke/40)*qt)+xe*(($e=B+xe*Ze)-Fe))+xe*($e+xe*(ne+xe*kt-$e)-Ue),Ce=(Et=(De=G+xe*Lt)+xe*((K=Z+xe*ft)-De))+xe*(K+xe*(ie+xe*Ge-K)-Et),ke==0?(it=ut,Be=Ce,ot=ut,tt=Ce):(it=Math.min(it,ut),Be=Math.min(Be,Ce),ot=Math.max(ot,ut),tt=Math.max(tt,Ce));return new a(Math.round(it),Math.round(Be),Math.round(ot-it),Math.round(tt-Be))},he=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var F,G,B=(F=this.ctx.lineDash,G=this.ctx.lineDashOffset,JSON.stringify({lineDash:F,lineDashOffset:G}));this.prevLineDash!==B&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=B)}}})(rt.API),function(t){var e=function(o){var a,l,u,c,g,v,m,S,A,L;for(l=[],u=0,c=(o+=a="\0\0\0\0".slice(o.length%4||4)).length;c>u;u+=4)(g=(o.charCodeAt(u)<<24)+(o.charCodeAt(u+1)<<16)+(o.charCodeAt(u+2)<<8)+o.charCodeAt(u+3))!==0?(v=(g=((g=((g=((g=(g-(L=g%85))/85)-(A=g%85))/85)-(S=g%85))/85)-(m=g%85))/85)%85,l.push(v+33,m+33,S+33,A+33,L+33)):l.push(122);return function(b,k){for(var j=k;j>0;j--)b.pop()}(l,a.length),String.fromCharCode.apply(String,l)+"~>"},n=function(o){var a,l,u,c,g,v=String,m="length",S=255,A="charCodeAt",L="slice",b="replace";for(o[L](-2),o=o[L](0,-2)[b](/\s/g,"")[b]("z","!!!!!"),u=[],c=0,g=(o+=a="uuuuu"[L](o[m]%5||5))[m];g>c;c+=5)l=52200625*(o[A](c)-33)+614125*(o[A](c+1)-33)+7225*(o[A](c+2)-33)+85*(o[A](c+3)-33)+(o[A](c+4)-33),u.push(S&l>>24,S&l>>16,S&l>>8,S&l);return function(k,j){for(var U=j;U>0;U--)k.pop()}(u,a[m]),v.fromCharCode.apply(v,u)},r=function(o){return o.split("").map(function(a){return("0"+a.charCodeAt().toString(16)).slice(-2)}).join("")+">"},i=function(o){var a=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((o=o.replace(/\s/g,"")).indexOf(">")!==-1&&(o=o.substr(0,o.indexOf(">"))),o.length%2&&(o+="0"),a.test(o)===!1)return"";for(var l="",u=0;u<o.length;u+=2)l+=String.fromCharCode("0x"+(o[u]+o[u+1]));return l},s=function(o){for(var a=new Uint8Array(o.length),l=o.length;l--;)a[l]=o.charCodeAt(l);return(a=P2(a)).reduce(function(u,c){return u+String.fromCharCode(c)},"")};t.processDataByFilters=function(o,a){var l=0,u=o||"",c=[];for(typeof(a=a||[])=="string"&&(a=[a]),l=0;l<a.length;l+=1)switch(a[l]){case"ASCII85Decode":case"/ASCII85Decode":u=n(u),c.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":u=e(u),c.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":u=i(u),c.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":u=r(u),c.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":u=s(u),c.push("/FlateDecode");break;default:throw new Error('The filter: "'+a[l]+'" is not implemented')}return{data:u,reverseChain:c.reverse().join(" ")}}}(rt.API),function(t){t.loadFile=function(e,n,r){return function(i,s,o){s=s!==!1,o=typeof o=="function"?o:function(){};var a=void 0;try{a=function(l,u,c){var g=new XMLHttpRequest,v=0,m=function(S){var A=S.length,L=[],b=String.fromCharCode;for(v=0;v<A;v+=1)L.push(b(255&S.charCodeAt(v)));return L.join("")};if(g.open("GET",l,!u),g.overrideMimeType("text/plain; charset=x-user-defined"),u===!1&&(g.onload=function(){g.status===200?c(m(this.responseText)):c(void 0)}),g.send(null),u&&g.status===200)return m(g.responseText)}(i,s,o)}catch{}return a}(e,n,r)},t.loadImageFile=t.loadFile}(rt.API),function(t){function e(){return(gt.html2canvas?Promise.resolve(gt.html2canvas):C0(()=>import("./html2canvas.esm-CBrSDip1.js"),[])).catch(function(a){return Promise.reject(new Error("Could not load html2canvas: "+a))}).then(function(a){return a.default?a.default:a})}function n(){return(gt.DOMPurify?Promise.resolve(gt.DOMPurify):C0(()=>import("./purify.es-B9ZVCkUG.js"),[])).catch(function(a){return Promise.reject(new Error("Could not load dompurify: "+a))}).then(function(a){return a.default?a.default:a})}var r=function(a){var l=on(a);return l==="undefined"?"undefined":l==="string"||a instanceof String?"string":l==="number"||a instanceof Number?"number":l==="function"||a instanceof Function?"function":a&&a.constructor===Array?"array":a&&a.nodeType===1?"element":l==="object"?"object":"unknown"},i=function(a,l){var u=document.createElement(a);for(var c in l.className&&(u.className=l.className),l.innerHTML&&l.dompurify&&(u.innerHTML=l.dompurify.sanitize(l.innerHTML)),l.style)u.style[c]=l.style[c];return u},s=function a(l,u){for(var c=l.nodeType===3?document.createTextNode(l.nodeValue):l.cloneNode(!1),g=l.firstChild;g;g=g.nextSibling)u!==!0&&g.nodeType===1&&g.nodeName==="SCRIPT"||c.appendChild(a(g,u));return l.nodeType===1&&(l.nodeName==="CANVAS"?(c.width=l.width,c.height=l.height,c.getContext("2d").drawImage(l,0,0)):l.nodeName!=="TEXTAREA"&&l.nodeName!=="SELECT"||(c.value=l.value),c.addEventListener("load",function(){c.scrollTop=l.scrollTop,c.scrollLeft=l.scrollLeft},!0)),c},o=function a(l){var u=Object.assign(a.convert(Promise.resolve()),JSON.parse(JSON.stringify(a.template))),c=a.convert(Promise.resolve(),u);return(c=c.setProgress(1,a,1,[a])).set(l)};(o.prototype=Object.create(Promise.prototype)).constructor=o,o.convert=function(a,l){return a.__proto__=l||o.prototype,a},o.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},o.prototype.from=function(a,l){return this.then(function(){switch(l=l||function(u){switch(r(u)){case"string":return"string";case"element":return u.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(a),l){case"string":return this.then(n).then(function(u){return this.set({src:i("div",{innerHTML:a,dompurify:u})})});case"element":return this.set({src:a});case"canvas":return this.set({canvas:a});case"img":return this.set({img:a});default:return this.error("Unknown source type.")}})},o.prototype.to=function(a){switch(a){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},o.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var a={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},l=s(this.prop.src,this.opt.html2canvas.javascriptEnabled);l.tagName==="BODY"&&(a.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:a}),this.prop.container.appendChild(l),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},o.prototype.toCanvas=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(e).then(function(l){var u=Object.assign({},this.opt.html2canvas);return delete u.onrendered,l(this.prop.container,u)}).then(function(l){(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},o.prototype.toContext2d=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(e).then(function(l){var u=this.opt.jsPDF,c=this.opt.fontFaces,g=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,v=Object.assign({async:!0,allowTaint:!0,scale:g,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete v.onrendered,u.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,u.context2d.posX=this.opt.x,u.context2d.posY=this.opt.y,u.context2d.margin=this.opt.margin,u.context2d.fontFaces=c,c)for(var m=0;m<c.length;++m){var S=c[m],A=S.src.find(function(L){return L.format==="truetype"});A&&u.addFont(A.url,S.ref.name,S.ref.style)}return v.windowHeight=v.windowHeight||0,v.windowHeight=v.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):v.windowHeight,u.context2d.save(!0),l(this.prop.container,v)}).then(function(l){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},o.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var a=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=a})},o.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},o.prototype.output=function(a,l,u){return(u=u||"pdf").toLowerCase()==="img"||u.toLowerCase()==="image"?this.outputImg(a,l):this.outputPdf(a,l)},o.prototype.outputPdf=function(a,l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(a,l)})},o.prototype.outputImg=function(a){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(a){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+a+'" is not supported.'}})},o.prototype.save=function(a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(a?{filename:a}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},o.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},o.prototype.set=function(a){if(r(a)!=="object")return this;var l=Object.keys(a||{}).map(function(u){if(u in o.template.prop)return function(){this.prop[u]=a[u]};switch(u){case"margin":return this.setMargin.bind(this,a.margin);case"jsPDF":return function(){return this.opt.jsPDF=a.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,a.pageSize);default:return function(){this.opt[u]=a[u]}}},this);return this.then(function(){return this.thenList(l)})},o.prototype.get=function(a,l){return this.then(function(){var u=a in o.template.prop?this.prop[a]:this.opt[a];return l?l(u):u})},o.prototype.setMargin=function(a){return this.then(function(){switch(r(a)){case"number":a=[a,a,a,a];case"array":if(a.length===2&&(a=[a[0],a[1],a[0],a[1]]),a.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=a}).then(this.setPageSize)},o.prototype.setPageSize=function(a){function l(u,c){return Math.floor(u*c/72*96)}return this.then(function(){(a=a||rt.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(a.inner={width:a.width-this.opt.margin[1]-this.opt.margin[3],height:a.height-this.opt.margin[0]-this.opt.margin[2]},a.inner.px={width:l(a.inner.width,a.k),height:l(a.inner.height,a.k)},a.inner.ratio=a.inner.height/a.inner.width),this.prop.pageSize=a})},o.prototype.setProgress=function(a,l,u,c){return a!=null&&(this.progress.val=a),l!=null&&(this.progress.state=l),u!=null&&(this.progress.n=u),c!=null&&(this.progress.stack=c),this.progress.ratio=this.progress.val/this.progress.state,this},o.prototype.updateProgress=function(a,l,u,c){return this.setProgress(a?this.progress.val+a:null,l||null,u?this.progress.n+u:null,c?this.progress.stack.concat(c):null)},o.prototype.then=function(a,l){var u=this;return this.thenCore(a,l,function(c,g){return u.updateProgress(null,null,1,[c]),Promise.prototype.then.call(this,function(v){return u.updateProgress(null,c),v}).then(c,g).then(function(v){return u.updateProgress(1),v})})},o.prototype.thenCore=function(a,l,u){u=u||Promise.prototype.then;var c=this;a&&(a=a.bind(c)),l&&(l=l.bind(c));var g=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?c:o.convert(Object.assign({},c),Promise.prototype),v=u.call(g,a,l);return o.convert(v,c.__proto__)},o.prototype.thenExternal=function(a,l){return Promise.prototype.then.call(this,a,l)},o.prototype.thenList=function(a){var l=this;return a.forEach(function(u){l=l.thenCore(u)}),l},o.prototype.catch=function(a){a&&(a=a.bind(this));var l=Promise.prototype.catch.call(this,a);return o.convert(l,this)},o.prototype.catchExternal=function(a){return Promise.prototype.catch.call(this,a)},o.prototype.error=function(a){return this.then(function(){throw new Error(a)})},o.prototype.using=o.prototype.set,o.prototype.saveAs=o.prototype.save,o.prototype.export=o.prototype.output,o.prototype.run=o.prototype.then,rt.getPageSize=function(a,l,u){if(on(a)==="object"){var c=a;a=c.orientation,l=c.unit||l,u=c.format||u}l=l||"mm",u=u||"a4",a=(""+(a||"P")).toLowerCase();var g,v=(""+u).toLowerCase(),m={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(l){case"pt":g=1;break;case"mm":g=72/25.4;break;case"cm":g=72/2.54;break;case"in":g=72;break;case"px":g=.75;break;case"pc":case"em":g=12;break;case"ex":g=6;break;default:throw"Invalid unit: "+l}var S,A=0,L=0;if(m.hasOwnProperty(v))A=m[v][1]/g,L=m[v][0]/g;else try{A=u[1],L=u[0]}catch{throw new Error("Invalid format: "+u)}if(a==="p"||a==="portrait")a="p",L>A&&(S=L,L=A,A=S);else{if(a!=="l"&&a!=="landscape")throw"Invalid orientation: "+a;a="l",A>L&&(S=L,L=A,A=S)}return{width:L,height:A,unit:l,k:g,orientation:a}},t.html=function(a,l){(l=l||{}).callback=l.callback||function(){},l.html2canvas=l.html2canvas||{},l.html2canvas.canvas=l.html2canvas.canvas||this.canvas,l.jsPDF=l.jsPDF||this,l.fontFaces=l.fontFaces?l.fontFaces.map(Y0):null;var u=new o(l);return l.worker?u:u.from(a).doCallback()}}(rt.API),rt.API.addJS=function(t){return kb=t,this.internal.events.subscribe("postPutResources",function(){rp=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(rp+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),Tb=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+kb+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){rp!==void 0&&Tb!==void 0&&this.internal.out("/Names <</JavaScript "+rp+" 0 R>>")}),this},function(t){var e;t.events.push(["postPutResources",function(){var n=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=n.outline.render().split(/\r\n/),s=0;s<i.length;s++){var o=i[s],a=r.exec(o);if(a!=null){var l=a[1];n.internal.newObjectDeferredBegin(l,!1)}n.internal.write(o)}if(this.outline.createNamedDestinations){var u=this.internal.pages.length,c=[];for(s=0;s<u;s++){var g=n.internal.newObject();c.push(g);var v=n.internal.getPageInfo(s+1);n.internal.write("<< /D["+v.objId+" 0 R /XYZ null null null]>> endobj")}var m=n.internal.newObject();for(n.internal.write("<< /Names [ "),s=0;s<c.length;s++)n.internal.write("(page_"+(s+1)+")"+c[s]+" 0 R");n.internal.write(" ] >>","endobj"),e=n.internal.newObject(),n.internal.write("<< /Dests "+m+" 0 R"),n.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){var n=this;n.outline.root.children.length>0&&(n.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&n.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var n=this;n.outline={createNamedDestinations:!1,root:{children:[]}},n.outline.add=function(r,i,s){var o={title:i,options:s,children:[]};return r==null&&(r=this.root),r.children.push(o),o},n.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=n,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},n.outline.genIds_r=function(r){r.id=n.internal.newObjectDeferred();for(var i=0;i<r.children.length;i++)this.genIds_r(r.children[i])},n.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},n.outline.renderItems=function(r){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<r.children.length;s++){var o=r.children[s];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(r)),s>0&&this.line("/Prev "+this.makeRef(r.children[s-1])),s<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[s+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var a=this.count=this.count_r({count:0},o);if(a>0&&this.line("/Count "+a),o.options&&o.options.pageNumber){var l=n.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+l.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var u=0;u<r.children.length;u++)this.renderItems(r.children[u])},n.outline.line=function(r){this.ctx.val+=r+`\r
`},n.outline.makeRef=function(r){return r.id+" 0 R"},n.outline.makeString=function(r){return"("+n.internal.pdfEscape(r)+")"},n.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},n.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},n.outline.count_r=function(r,i){for(var s=0;s<i.children.length;s++)r.count++,this.count_r(r,i.children[s]);return r.count}}])}(rt.API),function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(n,r,i,s,o,a){var l,u=this.decode.DCT_DECODE,c=null;if(typeof n=="string"||this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n)){switch(n=o||n,n=this.__addimage__.isArrayBuffer(n)?new Uint8Array(n):n,l=function(g){for(var v,m=256*g.charCodeAt(4)+g.charCodeAt(5),S=g.length,A={width:0,height:0,numcomponents:1},L=4;L<S;L+=2){if(L+=m,e.indexOf(g.charCodeAt(L+1))!==-1){v=256*g.charCodeAt(L+5)+g.charCodeAt(L+6),A={width:256*g.charCodeAt(L+7)+g.charCodeAt(L+8),height:v,numcomponents:g.charCodeAt(L+9)};break}m=256*g.charCodeAt(L+2)+g.charCodeAt(L+3)}return A}(n=this.__addimage__.isArrayBufferView(n)?this.__addimage__.arrayBufferToBinaryString(n):n),l.numcomponents){case 1:a=this.color_spaces.DEVICE_GRAY;break;case 4:a=this.color_spaces.DEVICE_CMYK;break;case 3:a=this.color_spaces.DEVICE_RGB}c={data:n,width:l.width,height:l.height,colorSpace:a,bitsPerComponent:8,filter:u,index:r,alias:i}}return c}}(rt.API),rt.API.processPNG=function(t,e,n,r){if(this.__addimage__.isArrayBuffer(t)&&(t=new Uint8Array(t)),this.__addimage__.isArrayBufferView(t)){var i,s=kU(t,{checkCrc:!0}),o=s.width,a=s.height,l=s.channels,u=s.palette,c=s.depth;i=u&&l===1?function(N){for(var I=N.width,R=N.height,x=N.data,T=N.palette,P=N.depth,te=!1,de=[],me=[],ge=void 0,Q=!1,oe=0,ae=0;ae<T.length;ae++){var he=Rx(T[ae],4),F=he[0],G=he[1],B=he[2],Z=he[3];de.push(F,G,B),Z!=null&&(Z===0?(oe++,me.length<1&&me.push(ae)):Z<255&&(Q=!0))}if(Q||oe>1){te=!0,me=void 0;var ne=I*R;ge=new Uint8Array(ne);for(var ie=new DataView(x.buffer),ve=0;ve<ne;ve++){var _e=J0(ie,ve,P),xe=Rx(T[_e],4)[3];ge[ve]=xe}}else oe===0&&(me=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:te?8:void 0,colorBytes:x,alphaBytes:ge,needSMask:te,palette:de,mask:me}}(s):l===2||l===4?function(N){for(var I=N.data,R=N.width,x=N.height,T=N.channels,P=N.depth,te=T===2?"DeviceGray":"DeviceRGB",de=T-1,me=R*x,ge=de,Q=me*ge,oe=1*me,ae=Math.ceil(Q*P/8),he=Math.ceil(oe*P/8),F=new Uint8Array(ae),G=new Uint8Array(he),B=new DataView(I.buffer),Z=new DataView(F.buffer),ne=new DataView(G.buffer),ie=!1,ve=0;ve<me;ve++){for(var _e=ve*T,xe=0;xe<ge;xe++)Mb(Z,J0(B,_e+xe,P),ve*ge+xe,P);var ke=J0(B,_e+ge,P);ke<(1<<P)-1&&(ie=!0),Mb(ne,ke,1*ve,P)}return{colorSpace:te,colorsPerPixel:de,sMaskBitsPerComponent:ie?P:void 0,colorBytes:F,alphaBytes:G,needSMask:ie}}(s):function(N){var I=N.data,R=N.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:R,colorsPerPixel:R==="DeviceGray"?1:3,colorBytes:I instanceof Uint16Array?function(x){for(var T=x.length,P=new Uint8Array(2*T),te=new DataView(P.buffer,P.byteOffset,P.byteLength),de=0;de<T;de++)te.setUint16(2*de,x[de],!1);return P}(I):I,needSMask:!1}}(s);var g,v,m,S=i,A=S.colorSpace,L=S.colorsPerPixel,b=S.sMaskBitsPerComponent,k=S.colorBytes,j=S.alphaBytes,U=S.needSMask,q=S.palette,ee=S.mask,D=null;return r!==rt.API.image_compression.NONE&&typeof P2=="function"?(D=function(N){var I;switch(N){case rt.API.image_compression.FAST:I=11;break;case rt.API.image_compression.MEDIUM:I=13;break;case rt.API.image_compression.SLOW:I=14;break;default:I=12}return I}(r),g=this.decode.FLATE_DECODE,v="/Predictor ".concat(D," /Colors ").concat(L," /BitsPerComponent ").concat(c," /Columns ").concat(o),t=Rb(k,Math.ceil(o*L*c/8),L,c,r),U&&(m=Rb(j,Math.ceil(o*b/8),1,b,r))):(g=void 0,v=void 0,t=k,U&&(m=j)),(this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t))&&(t=this.__addimage__.arrayBufferToBinaryString(t)),(m&&this.__addimage__.isArrayBuffer(m)||this.__addimage__.isArrayBufferView(m))&&(m=this.__addimage__.arrayBufferToBinaryString(m)),{alias:n,data:t,index:e,filter:g,decodeParameters:v,transparency:ee,palette:q,sMask:m,predictor:D,width:o,height:a,bitsPerComponent:c,sMaskBitsPerComponent:b,colorSpace:A}}},function(t){t.processGIF89A=function(e,n,r,i){var s=new QU(e),o=s.width,a=s.height,l=[];s.decodeAndBlitFrameRGBA(0,l);var u={data:l,width:o,height:a},c=new X0(100).encode(u,100);return t.processJPEG.call(this,c,n,r,i)},t.processGIF87A=t.processGIF89A}(rt.API),Cs.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:i,green:r,blue:n,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Cs.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(n){mn.log("bit decode error:"+n)}},Cs.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),n=e%4;for(t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<e;i++)for(var s=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+8*i*4,a=0;a<8&&8*i+a<this.width;a++){var l=this.palette[s>>7-a&1];this.data[o+4*a]=l.blue,this.data[o+4*a+1]=l.green,this.data[o+4*a+2]=l.red,this.data[o+4*a+3]=255}n!==0&&(this.pos+=4-n)}},Cs.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<t;i++){var s=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+2*i*4,a=s>>4,l=15&s,u=this.palette[a];if(this.data[o]=u.blue,this.data[o+1]=u.green,this.data[o+2]=u.red,this.data[o+3]=255,2*i+1>=this.width)break;u=this.palette[l],this.data[o+4]=u.blue,this.data[o+4+1]=u.green,this.data[o+4+2]=u.red,this.data[o+4+3]=255}e!==0&&(this.pos+=4-e)}},Cs.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),s=n*this.width*4+4*r;if(i<this.palette.length){var o=this.palette[i];this.data[s]=o.red,this.data[s+1]=o.green,this.data[s+2]=o.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}t!==0&&(this.pos+=4-t)}},Cs.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(s&e)/e*255|0,a=(s>>5&e)/e*255|0,l=(s>>10&e)/e*255|0,u=s>>15?255:0,c=r*this.width*4+4*i;this.data[c]=l,this.data[c+1]=a,this.data[c+2]=o,this.data[c+3]=u}this.pos+=t}},Cs.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),n=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,s=0;s<this.width;s++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(o&e)/e*255|0,l=(o>>5&n)/n*255|0,u=(o>>11)/e*255|0,c=i*this.width*4+4*s;this.data[c]=u,this.data[c+1]=l,this.data[c+2]=a,this.data[c+3]=255}this.pos+=t}},Cs.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*n;this.data[o]=s,this.data[o+1]=i,this.data[o+2]=r,this.data[o+3]=255}this.pos+=this.width%4}},Cs.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*n;this.data[a]=s,this.data[a+1]=i,this.data[a+2]=r,this.data[a+3]=o}},Cs.prototype.getData=function(){return this.data},function(t){t.processBMP=function(e,n,r,i){var s=new Cs(e,!1),o=s.width,a=s.height,l={data:s.getData(),width:o,height:a},u=new X0(100).encode(l,100);return t.processJPEG.call(this,u,n,r,i)}}(rt.API),Vb.prototype.getData=function(){return this.data},function(t){t.processWEBP=function(e,n,r,i){var s=new Vb(e),o=s.width,a=s.height,l={data:s.getData(),width:o,height:a},u=new X0(100).encode(l,100);return t.processJPEG.call(this,u,n,r,i)}}(rt.API),rt.API.processRGBA=function(t,e,n){for(var r=t.data,i=r.length,s=new Uint8Array(i/4*3),o=new Uint8Array(i/4),a=0,l=0,u=0;u<i;u+=4){var c=r[u],g=r[u+1],v=r[u+2],m=r[u+3];s[a++]=c,s[a++]=g,s[a++]=v,o[l++]=m}var S=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:S,index:e,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},rt.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},zu=rt.API,ip=zu.getCharWidthsArray=function(t,e){var n,r,i=(e=e||{}).font||this.internal.getFont(),s=e.fontSize||this.internal.getFontSize(),o=e.charSpace||this.internal.getCharSpace(),a=e.widths?e.widths:i.metadata.Unicode.widths,l=a.fof?a.fof:1,u=e.kerning?e.kerning:i.metadata.Unicode.kerning,c=u.fof?u.fof:1,g=e.doKerning!==!1,v=0,m=t.length,S=0,A=a[0]||l,L=[];for(n=0;n<m;n++)r=t.charCodeAt(n),typeof i.metadata.widthOfString=="function"?L.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(r))+o*(1e3/s)||0)/1e3):(v=g&&on(u[r])==="object"&&!isNaN(parseInt(u[r][S],10))?u[r][S]/c:0,L.push((a[r]||A)/l+v)),S=r;return L},Pb=zu.getStringUnitWidth=function(t,e){var n=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),i=e.charSpace||this.internal.getCharSpace();return zu.processArabic&&(t=zu.processArabic(t)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(t,n,i)/n:ip.apply(this,arguments).reduce(function(s,o){return s+o},0)},Cb=function(t,e,n,r){for(var i=[],s=0,o=t.length,a=0;s!==o&&a+e[s]<n;)a+=e[s],s++;i.push(t.slice(0,s));var l=s;for(a=0;s!==o;)a+e[s]>r&&(i.push(t.slice(l,s)),a=0,l=s),a+=e[s],s++;return l!==s&&i.push(t.slice(l,s)),i},Lb=function(t,e,n){n||(n={});var r,i,s,o,a,l,u,c=[],g=[c],v=n.textIndent||0,m=0,S=0,A=t.split(" "),L=ip.apply(this,[" ",n])[0];if(l=n.lineIndent===-1?A[0].length+2:n.lineIndent||0){var b=Array(l).join(" "),k=[];A.map(function(U){(U=U.split(/\s*\n/)).length>1?k=k.concat(U.map(function(q,ee){return(ee&&q.length?`
`:"")+q})):k.push(U[0])}),A=k,l=Pb.apply(this,[b,n])}for(s=0,o=A.length;s<o;s++){var j=0;if(r=A[s],l&&r[0]==`
`&&(r=r.substr(1),j=1),v+m+(S=(i=ip.apply(this,[r,n])).reduce(function(U,q){return U+q},0))>e||j){if(S>e){for(a=Cb.apply(this,[r,i,e-(v+m),e]),c.push(a.shift()),c=[a.pop()];a.length;)g.push([a.shift()]);S=i.slice(r.length-(c[0]?c[0].length:0)).reduce(function(U,q){return U+q},0)}else c=[r];g.push(c),v=S+l,m=L}else c.push(r),v+=m+S,m=L}return u=l?function(U,q){return(q?b:"")+U.join(" ")}:function(U){return U.join(" ")},g.map(u)},zu.splitTextToSize=function(t,e,n){var r,i=(n=n||{}).fontSize||this.internal.getFontSize(),s=(function(c){if(c.widths&&c.kerning)return{widths:c.widths,kerning:c.kerning};var g=this.internal.getFont(c.fontName,c.fontStyle),v="Unicode";return g.metadata[v]?{widths:g.metadata[v].widths||{0:1},kerning:g.metadata[v].kerning||{}}:{font:g.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,n);r=Array.isArray(t)?t:String(t).split(/\r?\n/);var o=1*this.internal.scaleFactor*e/i;s.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/i:0,s.lineIndent=n.lineIndent;var a,l,u=[];for(a=0,l=r.length;a<l;a++)u=u.concat(Lb.apply(this,[r[a],o,s]));return u},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="0123456789abcdef",n="klmnopqrstuvwxyz",r={},i={},s=0;s<16;s++)r[n[s]]=e[s],i[e[s]]=n[s];var o=function(v){return"0x"+parseInt(v,10).toString(16)},a=t.__fontmetrics__.compress=function(v){var m,S,A,L,b=["{"];for(var k in v){if(m=v[k],isNaN(parseInt(k,10))?S="'"+k+"'":(k=parseInt(k,10),S=(S=o(k).slice(2)).slice(0,-1)+i[S.slice(-1)]),typeof m=="number")m<0?(A=o(m).slice(3),L="-"):(A=o(m).slice(2),L=""),A=L+A.slice(0,-1)+i[A.slice(-1)];else{if(on(m)!=="object")throw new Error("Don't know what to do with value type "+on(m)+".");A=a(m)}b.push(S+A)}return b.push("}"),b.join("")},l=t.__fontmetrics__.uncompress=function(v){if(typeof v!="string")throw new Error("Invalid argument passed to uncompress.");for(var m,S,A,L,b={},k=1,j=b,U=[],q="",ee="",D=v.length-1,N=1;N<D;N+=1)(L=v[N])=="'"?m?(A=m.join(""),m=void 0):m=[]:m?m.push(L):L=="{"?(U.push([j,A]),j={},A=void 0):L=="}"?((S=U.pop())[0][S[1]]=j,A=void 0,j=S[0]):L=="-"?k=-1:A===void 0?r.hasOwnProperty(L)?(q+=r[L],A=parseInt(q,16)*k,k=1,q=""):q+=L:r.hasOwnProperty(L)?(ee+=r[L],j[A]=parseInt(ee,16)*k,k=1,A=void 0,ee=""):ee+=L;return b},u={codePages:["WinAnsiEncoding"],WinAnsiEncoding:l("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},c={Unicode:{Courier:u,"Courier-Bold":u,"Courier-BoldOblique":u,"Courier-Oblique":u,Helvetica:u,"Helvetica-Bold":u,"Helvetica-BoldOblique":u,"Helvetica-Oblique":u,"Times-Roman":u,"Times-Bold":u,"Times-BoldItalic":u,"Times-Italic":u}},g={Unicode:{"Courier-Oblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":l("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":l("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:l("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:l("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":l("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":l("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(v){var m=v.font,S=g.Unicode[m.postScriptName];S&&(m.metadata.Unicode={},m.metadata.Unicode.widths=S.widths,m.metadata.Unicode.kerning=S.kerning);var A=c.Unicode[m.postScriptName];A&&(m.metadata.Unicode.encoding=A,m.encoding=A.codePages[0])}])}(rt.API),function(t){var e=function(n){for(var r=n.length,i=new Uint8Array(r),s=0;s<r;s++)i[s]=n.charCodeAt(s);return i};t.API.events.push(["addFont",function(n){var r=void 0,i=n.font,s=n.instance;if(!i.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(r=s.existsFileInVFS(i.postScriptName)===!1?s.loadFile(i.postScriptName):s.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(o,a){a=/^\x00\x01\x00\x00/.test(a)?e(a):e(Ip(a)),o.metadata=t.API.TTFFont.open(a),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(i,r)}}])}(rt),rt.API.addSvgAsImage=function(t,e,n,r,i,s,o,a){if(isNaN(e)||isNaN(n))throw mn.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(r)||isNaN(i))throw mn.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var l=document.createElement("canvas");l.width=r,l.height=i;var u=l.getContext("2d");u.fillStyle="#fff",u.fillRect(0,0,l.width,l.height);var c={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},g=this;return(gt.canvg?Promise.resolve(gt.canvg):C0(()=>import("./index.es-D9btwNHh.js"),[])).catch(function(v){return Promise.reject(new Error("Could not load canvg: "+v))}).then(function(v){return v.default?v.default:v}).then(function(v){return v.fromString(u,t,c)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(v){return v.render(c)}).then(function(){g.addImage(l.toDataURL("image/jpeg",1),e,n,r,i,o,a)})},rt.API.putTotalPages=function(t){var e,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),n=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var i=0;i<this.internal.pages[r].length;i++)this.internal.pages[r][i]=this.internal.pages[r][i].replace(e,n);return this},rt.API.viewerPreferences=function(t,e){var n;t=t||{},e=e||!1;var r,i,s,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},a=Object.keys(o),l=[],u=0,c=0,g=0;function v(S,A){var L,b=!1;for(L=0;L<S.length;L+=1)S[L]===A&&(b=!0);return b}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var m=a.length;for(g=0;g<m;g+=1)n[a[g]].value=n[a[g]].defaultValue,n[a[g]].explicitSet=!1}if(on(t)==="object"){for(i in t)if(s=t[i],v(a,i)&&s!==void 0){if(n[i].type==="boolean"&&typeof s=="boolean")n[i].value=s;else if(n[i].type==="name"&&v(n[i].valueSet,s))n[i].value=s;else if(n[i].type==="integer"&&Number.isInteger(s))n[i].value=s;else if(n[i].type==="array"){for(u=0;u<s.length;u+=1)if(r=!0,s[u].length===1&&typeof s[u][0]=="number")l.push(String(s[u]-1));else if(s[u].length>1){for(c=0;c<s[u].length;c+=1)typeof s[u][c]!="number"&&(r=!1);r===!0&&l.push([s[u][0]-1,s[u][1]-1].join(" "))}n[i].value="["+l.join(" ")+"]"}else n[i].value=n[i].defaultValue;n[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var S,A=[];for(S in n)n[S].explicitSet===!0&&(n[S].type==="name"?A.push("/"+S+" /"+n[S].value):A.push("/"+S+" "+n[S].value));A.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+A.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},function(t){var e=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(r)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),a=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),l=unescape(encodeURIComponent("</x:xmpmeta>")),u=s.length+o.length+a.length+i.length+l.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+u+" >>"),this.internal.write("stream"),this.internal.write(i+s+o+a+l),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(r,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",e)),this}}(rt.API),function(t){var e=t.API,n=e.pdfEscape16=function(s,o){for(var a,l=o.metadata.Unicode.widths,u=["","0","00","000","0000"],c=[""],g=0,v=s.length;g<v;++g){if(a=o.metadata.characterToGlyph(s.charCodeAt(g)),o.metadata.glyIdsUsed.push(a),o.metadata.toUnicode[a]=s.charCodeAt(g),l.indexOf(a)==-1&&(l.push(a),l.push([parseInt(o.metadata.widthOfGlyph(a),10)])),a=="0")return c.join("");a=a.toString(16),c.push(u[4-a.length],a)}return c.join("")},r=function(s){var o,a,l,u,c,g,v;for(c=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,l=[],g=0,v=(a=Object.keys(s).sort(function(m,S){return m-S})).length;g<v;g++)o=a[g],l.length>=100&&(c+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar`,l=[]),s[o]!==void 0&&s[o]!==null&&typeof s[o].toString=="function"&&(u=("0000"+s[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),l.push("<"+o+"><"+u+">"));return l.length&&(c+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar
`),c+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(s){(function(o){var a=o.font,l=o.out,u=o.newObject,c=o.putStream;if(a.metadata instanceof t.API.TTFFont&&a.encoding==="Identity-H"){for(var g=a.metadata.Unicode.widths,v=a.metadata.subset.encode(a.metadata.glyIdsUsed,1),m="",S=0;S<v.length;S++)m+=String.fromCharCode(v[S]);var A=u();c({data:m,addLength1:!0,objectId:A}),l("endobj");var L=u();c({data:r(a.metadata.toUnicode),addLength1:!0,objectId:L}),l("endobj");var b=u();l("<<"),l("/Type /FontDescriptor"),l("/FontName /"+Gu(a.fontName)),l("/FontFile2 "+A+" 0 R"),l("/FontBBox "+t.API.PDFObject.convert(a.metadata.bbox)),l("/Flags "+a.metadata.flags),l("/StemV "+a.metadata.stemV),l("/ItalicAngle "+a.metadata.italicAngle),l("/Ascent "+a.metadata.ascender),l("/Descent "+a.metadata.decender),l("/CapHeight "+a.metadata.capHeight),l(">>"),l("endobj");var k=u();l("<<"),l("/Type /Font"),l("/BaseFont /"+Gu(a.fontName)),l("/FontDescriptor "+b+" 0 R"),l("/W "+t.API.PDFObject.convert(g)),l("/CIDToGIDMap /Identity"),l("/DW 1000"),l("/Subtype /CIDFontType2"),l("/CIDSystemInfo"),l("<<"),l("/Supplement 0"),l("/Registry (Adobe)"),l("/Ordering ("+a.encoding+")"),l(">>"),l(">>"),l("endobj"),a.objectNumber=u(),l("<<"),l("/Type /Font"),l("/Subtype /Type0"),l("/ToUnicode "+L+" 0 R"),l("/BaseFont /"+Gu(a.fontName)),l("/Encoding /"+a.encoding),l("/DescendantFonts ["+k+" 0 R]"),l(">>"),l("endobj"),a.isAlreadyPutted=!0}})(s)}]),e.events.push(["putFont",function(s){(function(o){var a=o.font,l=o.out,u=o.newObject,c=o.putStream;if(a.metadata instanceof t.API.TTFFont&&a.encoding==="WinAnsiEncoding"){for(var g=a.metadata.rawData,v="",m=0;m<g.length;m++)v+=String.fromCharCode(g[m]);var S=u();c({data:v,addLength1:!0,objectId:S}),l("endobj");var A=u();c({data:r(a.metadata.toUnicode),addLength1:!0,objectId:A}),l("endobj");var L=u();l("<<"),l("/Descent "+a.metadata.decender),l("/CapHeight "+a.metadata.capHeight),l("/StemV "+a.metadata.stemV),l("/Type /FontDescriptor"),l("/FontFile2 "+S+" 0 R"),l("/Flags 96"),l("/FontBBox "+t.API.PDFObject.convert(a.metadata.bbox)),l("/FontName /"+Gu(a.fontName)),l("/ItalicAngle "+a.metadata.italicAngle),l("/Ascent "+a.metadata.ascender),l(">>"),l("endobj"),a.objectNumber=u();for(var b=0;b<a.metadata.hmtx.widths.length;b++)a.metadata.hmtx.widths[b]=parseInt(a.metadata.hmtx.widths[b]*(1e3/a.metadata.head.unitsPerEm));l("<</Subtype/TrueType/Type/Font/ToUnicode "+A+" 0 R/BaseFont/"+Gu(a.fontName)+"/FontDescriptor "+L+" 0 R/Encoding/"+a.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(a.metadata.hmtx.widths)+">>"),l("endobj"),a.isAlreadyPutted=!0}})(s)}]);var i=function(s){var o,a=s.text||"",l=s.x,u=s.y,c=s.options||{},g=s.mutex||{},v=g.pdfEscape,m=g.activeFontKey,S=g.fonts,A=m,L="",b=0,k="",j=S[A].encoding;if(S[A].encoding!=="Identity-H")return{text:a,x:l,y:u,options:c,mutex:g};for(k=a,A=m,Array.isArray(a)&&(k=a[0]),b=0;b<k.length;b+=1)S[A].metadata.hasOwnProperty("cmap")&&(o=S[A].metadata.cmap.unicode.codeMap[k[b].charCodeAt(0)]),o||k[b].charCodeAt(0)<256&&S[A].metadata.hasOwnProperty("Unicode")?L+=k[b]:L+="";var U="";return parseInt(A.slice(1))<14||j==="WinAnsiEncoding"?U=v(L,A).split("").map(function(q){return q.charCodeAt(0).toString(16)}).join(""):j==="Identity-H"&&(U=n(L,S[A])),g.isHex=!0,{text:U,x:l,y:u,options:c,mutex:g}};e.events.push(["postProcessText",function(s){var o=s.text||"",a=[],l={text:o,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(o)){var u=0;for(u=0;u<o.length;u+=1)Array.isArray(o[u])&&o[u].length===3?a.push([i(Object.assign({},l,{text:o[u][0]})).text,o[u][1],o[u][2]]):a.push(i(Object.assign({},l,{text:o[u]})).text);s.text=a}else s.text=i(Object.assign({},l,{text:o})).text}])}(rt),function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0},t.addFileToVFS=function(n,r){return e.call(this),this.internal.vFS[n]=r,this},t.getFileFromVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0?this.internal.vFS[n]:null}}(rt.API),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(r){var i,s,o,a,l,u,c,g=e,v=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],m=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],S={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},A={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},L=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],b=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),k=!1,j=0;this.__bidiEngine__={};var U=function(x){var T=x.charCodeAt(),P=T>>8,te=A[P];return te!==void 0?g[256*te+(255&T)]:P===252||P===253?"AL":b.test(P)?"L":P===8?"R":"N"},q=function(x){for(var T,P=0;P<x.length;P++){if((T=U(x.charAt(P)))==="L")return!1;if(T==="R")return!0}return!1},ee=function(x,T,P,te){var de,me,ge,Q,oe=T[te];switch(oe){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":k=!1;break;case"N":case"AN":break;case"EN":k&&(oe="AN");break;case"AL":k=!0,oe="R";break;case"WS":case"BN":oe="N";break;case"CS":te<1||te+1>=T.length||(de=P[te-1])!=="EN"&&de!=="AN"||(me=T[te+1])!=="EN"&&me!=="AN"?oe="N":k&&(me="AN"),oe=me===de?me:"N";break;case"ES":oe=(de=te>0?P[te-1]:"B")==="EN"&&te+1<T.length&&T[te+1]==="EN"?"EN":"N";break;case"ET":if(te>0&&P[te-1]==="EN"){oe="EN";break}if(k){oe="N";break}for(ge=te+1,Q=T.length;ge<Q&&T[ge]==="ET";)ge++;oe=ge<Q&&T[ge]==="EN"?"EN":"N";break;case"NSM":if(o&&!a){for(Q=T.length,ge=te+1;ge<Q&&T[ge]==="NSM";)ge++;if(ge<Q){var ae=x[te],he=ae>=1425&&ae<=2303||ae===64286;if(de=T[ge],he&&(de==="R"||de==="AL")){oe="R";break}}}oe=te<1||(de=T[te-1])==="B"?"N":P[te-1];break;case"B":k=!1,i=!0,oe=j;break;case"S":s=!0,oe="N"}return oe},D=function(x,T,P){var te=x.split("");return P&&N(te,P,{hiLevel:j}),te.reverse(),T&&T.reverse(),te.join("")},N=function(x,T,P){var te,de,me,ge,Q,oe=-1,ae=x.length,he=0,F=[],G=j?m:v,B=[];for(k=!1,i=!1,s=!1,de=0;de<ae;de++)B[de]=U(x[de]);for(me=0;me<ae;me++){if(Q=he,F[me]=ee(x,B,F,me),te=240&(he=G[Q][S[F[me]]]),he&=15,T[me]=ge=G[he][5],te>0)if(te===16){for(de=oe;de<me;de++)T[de]=1;oe=-1}else oe=-1;if(G[he][6])oe===-1&&(oe=me);else if(oe>-1){for(de=oe;de<me;de++)T[de]=ge;oe=-1}B[me]==="B"&&(T[me]=0),P.hiLevel|=ge}s&&function(Z,ne,ie){for(var ve=0;ve<ie;ve++)if(Z[ve]==="S"){ne[ve]=j;for(var _e=ve-1;_e>=0&&Z[_e]==="WS";_e--)ne[_e]=j}}(B,T,ae)},I=function(x,T,P,te,de){if(!(de.hiLevel<x)){if(x===1&&j===1&&!i)return T.reverse(),void(P&&P.reverse());for(var me,ge,Q,oe,ae=T.length,he=0;he<ae;){if(te[he]>=x){for(Q=he+1;Q<ae&&te[Q]>=x;)Q++;for(oe=he,ge=Q-1;oe<ge;oe++,ge--)me=T[oe],T[oe]=T[ge],T[ge]=me,P&&(me=P[oe],P[oe]=P[ge],P[ge]=me);he=Q}he++}}},R=function(x,T,P){var te=x.split(""),de={hiLevel:j};return P||(P=[]),N(te,P,de),function(me,ge,Q){if(Q.hiLevel!==0&&c)for(var oe,ae=0;ae<me.length;ae++)ge[ae]===1&&(oe=L.indexOf(me[ae]))>=0&&(me[ae]=L[oe+1])}(te,P,de),I(2,te,T,P,de),I(1,te,T,P,de),te.join("")};return this.__bidiEngine__.doBidiReorder=function(x,T,P){if(function(de,me){if(me)for(var ge=0;ge<de.length;ge++)me[ge]=ge;a===void 0&&(a=q(de)),u===void 0&&(u=q(de))}(x,T),o||!l||u)if(o&&l&&a^u)j=a?1:0,x=D(x,T,P);else if(!o&&l&&u)j=a?1:0,x=R(x,T,P),x=D(x,T);else if(!o||a||l||u){if(o&&!l&&a^u)x=D(x,T),a?(j=0,x=R(x,T,P)):(j=1,x=R(x,T,P),x=D(x,T));else if(o&&a&&!l&&u)j=1,x=R(x,T,P),x=D(x,T);else if(!o&&!l&&a^u){var te=c;a?(j=1,x=R(x,T,P),j=0,c=!1,x=R(x,T,P),c=te):(j=0,x=R(x,T,P),x=D(x,T),j=1,c=!1,x=R(x,T,P),c=te,x=D(x,T))}}else j=0,x=R(x,T,P);else j=a?1:0,x=R(x,T,P);return x},this.__bidiEngine__.setOptions=function(x){x&&(o=x.isInputVisual,l=x.isOutputVisual,a=x.isInputRtl,u=x.isOutputRtl,c=x.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(r){var i=r.text;r.x,r.y;var s=r.options||{};r.mutex,s.lang;var o=[];if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,n.setOptions(s),Object.prototype.toString.call(i)==="[object Array]"){var a=0;for(o=[],a=0;a<i.length;a+=1)Object.prototype.toString.call(i[a])==="[object Array]"?o.push([n.doBidiReorder(i[a][0]),i[a][1],i[a][2]]):o.push([n.doBidiReorder(i[a])]);r.text=o}else r.text=n.doBidiReorder(i);n.setOptions({isInputVisual:!0})}])}(rt),rt.API.TTFFont=function(){function t(e){var n;if(this.rawData=e,n=this.contents=new wl(e),this.contents.pos=4,n.readString(4)==="ttcf")throw new Error("TTCF not supported.");n.pos=0,this.parse(),this.subset=new hV(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new JU(this.contents),this.head=new ZU(this),this.name=new iV(this),this.cmap=new cE(this),this.toUnicode={},this.hhea=new eV(this),this.maxp=new sV(this),this.hmtx=new oV(this),this.post=new nV(this),this.os2=new tV(this),this.loca=new cV(this),this.glyf=new aV(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,n,r,i,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,a,l,u;for(u=[],o=0,a=(l=this.bbox).length;o<a;o++)e=l[o],u.push(Math.round(e*this.scaleFactor));return u}).call(this),this.stemV=0,this.post.exists?(r=255&(i=this.post.italic_angle),32768&(n=i>>16)&&(n=-(1+(65535^n))),this.italicAngle=+(n+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var n;return((n=this.cmap.unicode)!=null?n.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var n;return n=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*n},t.prototype.widthOfString=function(e,n,r){var i,s,o,a;for(o=0,s=0,a=(e=""+e).length;0<=a?s<a:s>a;s=0<=a?++s:--s)i=e.charCodeAt(s),o+=this.widthOfGlyph(this.characterToGlyph(i))+r*(1e3/n)||0;return o*(n/1e3)},t.prototype.lineHeight=function(e,n){var r;return n==null&&(n=!1),r=n?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},t}();var $s,wl=function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var n,r;for(r=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)r[n]=String.fromCharCode(this.readByte());return r.join("")},t.prototype.writeString=function(e){var n,r,i;for(i=[],n=0,r=e.length;0<=r?n<r:n>r;n=0<=r?++n:--n)i.push(this.writeByte(e.charCodeAt(n)));return i},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,n,r,i,s,o,a,l;return e=this.readByte(),n=this.readByte(),r=this.readByte(),i=this.readByte(),s=this.readByte(),o=this.readByte(),a=this.readByte(),l=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^n)+1099511627776*(255^r)+4294967296*(255^i)+16777216*(255^s)+65536*(255^o)+256*(255^a)+(255^l)+1):72057594037927940*e+281474976710656*n+1099511627776*r+4294967296*i+16777216*s+65536*o+256*a+l},t.prototype.writeLongLong=function(e){var n,r;return n=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var n,r;for(n=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)n.push(this.readByte());return n},t.prototype.write=function(e){var n,r,i,s;for(s=[],r=0,i=e.length;r<i;r++)n=e[r],s.push(this.writeByte(n));return s},t}(),JU=function(){var t;function e(n){var r,i,s;for(this.scalarType=n.readInt(),this.tableCount=n.readShort(),this.searchRange=n.readShort(),this.entrySelector=n.readShort(),this.rangeShift=n.readShort(),this.tables={},i=0,s=this.tableCount;0<=s?i<s:i>s;i=0<=s?++i:--i)r={tag:n.readString(4),checksum:n.readInt(),offset:n.readInt(),length:n.readInt()},this.tables[r.tag]=r}return e.prototype.encode=function(n){var r,i,s,o,a,l,u,c,g,v,m,S,A;for(A in m=Object.keys(n).length,l=Math.log(2),g=16*Math.floor(Math.log(m)/l),o=Math.floor(g/l),c=16*m-g,(i=new wl).writeInt(this.scalarType),i.writeShort(m),i.writeShort(g),i.writeShort(o),i.writeShort(c),s=16*m,u=i.pos+s,a=null,S=[],n)for(v=n[A],i.writeString(A),i.writeInt(t(v)),i.writeInt(u),i.writeInt(v.length),S=S.concat(v),A==="head"&&(a=u),u+=v.length;u%4;)S.push(0),u++;return i.write(S),r=2981146554-t(i.data),i.pos=a+8,i.writeUInt32(r),i.data},t=function(n){var r,i,s,o;for(n=hE.call(n);n.length%4;)n.push(0);for(s=new wl(n),i=0,r=0,o=n.length;r<o;r=r+=4)i+=s.readUInt32();return 4294967295&i},e}(),XU={}.hasOwnProperty,No=function(t,e){for(var n in e)XU.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};$s=function(){function t(e){var n;this.file=e,n=this.file.directory.tables[this.tag],this.exists=!!n,n&&(this.offset=n.offset,this.length=n.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var ZU=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return No(t,$s),t.prototype.tag="head",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},t.prototype.encode=function(e){var n;return(n=new wl).writeInt(this.version),n.writeInt(this.revision),n.writeInt(this.checkSumAdjustment),n.writeInt(this.magicNumber),n.writeShort(this.flags),n.writeShort(this.unitsPerEm),n.writeLongLong(this.created),n.writeLongLong(this.modified),n.writeShort(this.xMin),n.writeShort(this.yMin),n.writeShort(this.xMax),n.writeShort(this.yMax),n.writeShort(this.macStyle),n.writeShort(this.lowestRecPPEM),n.writeShort(this.fontDirectionHint),n.writeShort(e),n.writeShort(this.glyphDataFormat),n.data},t}(),Bb=function(){function t(e,n){var r,i,s,o,a,l,u,c,g,v,m,S,A,L,b,k,j;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=n+e.readInt(),g=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(l=0;l<256;++l)this.codeMap[l]=e.readByte();break;case 4:for(m=e.readUInt16(),v=m/2,e.pos+=6,s=function(){var U,q;for(q=[],l=U=0;0<=v?U<v:U>v;l=0<=v?++U:--U)q.push(e.readUInt16());return q}(),e.pos+=2,A=function(){var U,q;for(q=[],l=U=0;0<=v?U<v:U>v;l=0<=v?++U:--U)q.push(e.readUInt16());return q}(),u=function(){var U,q;for(q=[],l=U=0;0<=v?U<v:U>v;l=0<=v?++U:--U)q.push(e.readUInt16());return q}(),c=function(){var U,q;for(q=[],l=U=0;0<=v?U<v:U>v;l=0<=v?++U:--U)q.push(e.readUInt16());return q}(),i=(this.length-e.pos+this.offset)/2,a=function(){var U,q;for(q=[],l=U=0;0<=i?U<i:U>i;l=0<=i?++U:--U)q.push(e.readUInt16());return q}(),l=b=0,j=s.length;b<j;l=++b)for(L=s[l],r=k=S=A[l];S<=L?k<=L:k>=L;r=S<=L?++k:--k)c[l]===0?o=r+u[l]:(o=a[c[l]/2+(r-S)-(v-l)]||0)!==0&&(o+=u[l]),this.codeMap[r]=65535&o}e.pos=g}return t.encode=function(e,n){var r,i,s,o,a,l,u,c,g,v,m,S,A,L,b,k,j,U,q,ee,D,N,I,R,x,T,P,te,de,me,ge,Q,oe,ae,he,F,G,B,Z,ne,ie,ve,_e,xe,ke,Fe;switch(te=new wl,o=Object.keys(e).sort(function(De,$e){return De-$e}),n){case"macroman":for(A=0,L=function(){var De=[];for(S=0;S<256;++S)De.push(0);return De}(),k={0:0},s={},de=0,oe=o.length;de<oe;de++)k[_e=e[i=o[de]]]==null&&(k[_e]=++A),s[i]={old:e[i],new:k[e[i]]},L[i]=k[e[i]];return te.writeUInt16(1),te.writeUInt16(0),te.writeUInt32(12),te.writeUInt16(0),te.writeUInt16(262),te.writeUInt16(0),te.write(L),{charMap:s,subtable:te.data,maxGlyphID:A+1};case"unicode":for(T=[],g=[],j=0,k={},r={},b=u=null,me=0,ae=o.length;me<ae;me++)k[q=e[i=o[me]]]==null&&(k[q]=++j),r[i]={old:q,new:k[q]},a=k[q]-i,b!=null&&a===u||(b&&g.push(b),T.push(i),u=a),b=i;for(b&&g.push(b),g.push(65535),T.push(65535),R=2*(I=T.length),N=2*Math.pow(Math.log(I)/Math.LN2,2),v=Math.log(N/2)/Math.LN2,D=2*I-N,l=[],ee=[],m=[],S=ge=0,he=T.length;ge<he;S=++ge){if(x=T[S],c=g[S],x===65535){l.push(0),ee.push(0);break}if(x-(P=r[x].new)>=32768)for(l.push(0),ee.push(2*(m.length+I-S)),i=Q=x;x<=c?Q<=c:Q>=c;i=x<=c?++Q:--Q)m.push(r[i].new);else l.push(P-x),ee.push(0)}for(te.writeUInt16(3),te.writeUInt16(1),te.writeUInt32(12),te.writeUInt16(4),te.writeUInt16(16+8*I+2*m.length),te.writeUInt16(0),te.writeUInt16(R),te.writeUInt16(N),te.writeUInt16(v),te.writeUInt16(D),ie=0,F=g.length;ie<F;ie++)i=g[ie],te.writeUInt16(i);for(te.writeUInt16(0),ve=0,G=T.length;ve<G;ve++)i=T[ve],te.writeUInt16(i);for(xe=0,B=l.length;xe<B;xe++)a=l[xe],te.writeUInt16(a);for(ke=0,Z=ee.length;ke<Z;ke++)U=ee[ke],te.writeUInt16(U);for(Fe=0,ne=m.length;Fe<ne;Fe++)A=m[Fe],te.writeUInt16(A);return{charMap:r,subtable:te.data,maxGlyphID:j+1}}},t}(),cE=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return No(t,$s),t.prototype.tag="cmap",t.prototype.parse=function(e){var n,r,i;for(e.pos=this.offset,this.version=e.readUInt16(),i=e.readUInt16(),this.tables=[],this.unicode=null,r=0;0<=i?r<i:r>i;r=0<=i?++r:--r)n=new Bb(e,this.offset),this.tables.push(n),n.isUnicode&&this.unicode==null&&(this.unicode=n);return!0},t.encode=function(e,n){var r,i;return n==null&&(n="macroman"),r=Bb.encode(e,n),(i=new wl).writeUInt16(0),i.writeUInt16(1),r.table=i.data.concat(r.subtable),r},t}(),eV=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return No(t,$s),t.prototype.tag="hhea",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},t}(),tV=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return No(t,$s),t.prototype.tag="OS/2",t.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=function(){var n,r;for(r=[],n=0;n<10;++n)r.push(e.readByte());return r}(),this.charRange=function(){var n,r;for(r=[],n=0;n<4;++n)r.push(e.readInt());return r}(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=function(){var n,r;for(r=[],n=0;n<2;n=++n)r.push(e.readInt());return r}(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},t}(),nV=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return No(t,$s),t.prototype.tag="post",t.prototype.parse=function(e){var n,r,i;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:case 196608:break;case 131072:var s;for(r=e.readUInt16(),this.glyphNameIndex=[],s=0;0<=r?s<r:s>r;s=0<=r?++s:--s)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],i=[];e.pos<this.offset+this.length;)n=e.readByte(),i.push(this.names.push(e.readString(n)));return i;case 151552:return r=e.readUInt16(),this.offsets=e.read(r);case 262144:return this.map=(function(){var o,a,l;for(l=[],s=o=0,a=this.file.maxp.numGlyphs;0<=a?o<a:o>a;s=0<=a?++o:--o)l.push(e.readUInt32());return l}).call(this)}},t}(),rV=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},iV=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return No(t,$s),t.prototype.tag="name",t.prototype.parse=function(e){var n,r,i,s,o,a,l,u,c,g,v;for(e.pos=this.offset,e.readShort(),n=e.readShort(),a=e.readShort(),r=[],s=0;0<=n?s<n:s>n;s=0<=n?++s:--s)r.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+a+e.readShort()});for(l={},s=c=0,g=r.length;c<g;s=++c)i=r[s],e.pos=i.offset,u=e.readString(i.length),o=new rV(u,i),l[v=i.nameID]==null&&(l[v]=[]),l[i.nameID].push(o);this.strings=l,this.copyright=l[0],this.fontFamily=l[1],this.fontSubfamily=l[2],this.uniqueSubfamily=l[3],this.fontName=l[4],this.version=l[5];try{this.postscriptName=l[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=l[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=l[7],this.manufacturer=l[8],this.designer=l[9],this.description=l[10],this.vendorUrl=l[11],this.designerUrl=l[12],this.license=l[13],this.licenseUrl=l[14],this.preferredFamily=l[15],this.preferredSubfamily=l[17],this.compatibleFull=l[18],this.sampleText=l[19]},t}(),sV=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return No(t,$s),t.prototype.tag="maxp",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},t}(),oV=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return No(t,$s),t.prototype.tag="hmtx",t.prototype.parse=function(e){var n,r,i,s,o,a,l;for(e.pos=this.offset,this.metrics=[],n=0,a=this.file.hhea.numberOfMetrics;0<=a?n<a:n>a;n=0<=a?++n:--n)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(i=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var u,c;for(c=[],n=u=0;0<=i?u<i:u>i;n=0<=i?++u:--u)c.push(e.readInt16());return c}(),this.widths=(function(){var u,c,g,v;for(v=[],u=0,c=(g=this.metrics).length;u<c;u++)s=g[u],v.push(s.advance);return v}).call(this),r=this.widths[this.widths.length-1],l=[],n=o=0;0<=i?o<i:o>i;n=0<=i?++o:--o)l.push(this.widths.push(r));return l},t.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},t}(),hE=[].slice,aV=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return No(t,$s),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(e){var n,r,i,s,o,a,l,u,c,g;return e in this.cache?this.cache[e]:(s=this.file.loca,n=this.file.contents,r=s.indexOf(e),(i=s.lengthOf(e))===0?this.cache[e]=null:(n.pos=this.offset+r,o=(a=new wl(n.read(i))).readShort(),u=a.readShort(),g=a.readShort(),l=a.readShort(),c=a.readShort(),this.cache[e]=o===-1?new uV(a,u,g,l,c):new lV(a,o,u,g,l,c),this.cache[e]))},t.prototype.encode=function(e,n,r){var i,s,o,a,l;for(o=[],s=[],a=0,l=n.length;a<l;a++)i=e[n[a]],s.push(o.length),i&&(o=o.concat(i.encode(r)));return s.push(o.length),{table:o,offsets:s}},t}(),lV=function(){function t(e,n,r,i,s,o){this.raw=e,this.numberOfContours=n,this.xMin=r,this.yMin=i,this.xMax=s,this.yMax=o,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),uV=function(){function t(e,n,r,i,s){var o,a;for(this.raw=e,this.xMin=n,this.yMin=r,this.xMax=i,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;a=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&a;)o.pos+=1&a?4:2,128&a?o.pos+=8:64&a?o.pos+=4:8&a&&(o.pos+=2)}return t.prototype.encode=function(){var e,n,r;for(n=new wl(hE.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)n.pos=this.glyphOffsets[e];return n.data},t}(),cV=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return No(t,$s),t.prototype.tag="loca",t.prototype.parse=function(e){var n,r;return e.pos=this.offset,n=this.file.head.indexToLocFormat,this.offsets=n===0?(function(){var i,s;for(s=[],r=0,i=this.length;r<i;r+=2)s.push(2*e.readUInt16());return s}).call(this):(function(){var i,s;for(s=[],r=0,i=this.length;r<i;r+=4)s.push(e.readUInt32());return s}).call(this)},t.prototype.indexOf=function(e){return this.offsets[e]},t.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},t.prototype.encode=function(e,n){for(var r=new Uint32Array(this.offsets.length),i=0,s=0,o=0;o<r.length;++o)if(r[o]=i,s<n.length&&n[s]==o){++s,r[o]=i;var a=this.offsets[o],l=this.offsets[o+1]-a;l>0&&(i+=l)}for(var u=new Array(4*r.length),c=0;c<r.length;++c)u[4*c+3]=255&r[c],u[4*c+2]=(65280&r[c])>>8,u[4*c+1]=(16711680&r[c])>>16,u[4*c]=(4278190080&r[c])>>24;return u},t}(),hV=function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,n,r,i,s;for(n in i=this.font.cmap.tables[0].codeMap,e={},s=this.subset)r=s[n],e[n]=i[r];return e},t.prototype.glyphsFor=function(e){var n,r,i,s,o,a,l;for(i={},o=0,a=e.length;o<a;o++)i[s=e[o]]=this.font.glyf.glyphFor(s);for(s in n=[],i)(r=i[s])!=null&&r.compound&&n.push.apply(n,r.glyphIDs);if(n.length>0)for(s in l=this.glyphsFor(n))r=l[s],i[s]=r;return i},t.prototype.encode=function(e,n){var r,i,s,o,a,l,u,c,g,v,m,S,A,L,b;for(i in r=cE.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(e),m={0:0},b=r.charMap)m[(l=b[i]).old]=l.new;for(S in v=r.maxGlyphID,o)S in m||(m[S]=v++);return c=function(k){var j,U;for(j in U={},k)U[k[j]]=j;return U}(m),g=Object.keys(c).sort(function(k,j){return k-j}),A=function(){var k,j,U;for(U=[],k=0,j=g.length;k<j;k++)a=g[k],U.push(c[a]);return U}(),s=this.font.glyf.encode(o,A,m),u=this.font.loca.encode(s.offsets,A),L={cmap:this.font.cmap.raw(),glyf:s.table,loca:u,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(n)},this.font.os2.exists&&(L["OS/2"]=this.font.os2.raw()),this.font.directory.encode(L)},t}();rt.API.PDFObject=function(){var t;function e(){}return t=function(n,r){return(Array(r+1).join("0")+n).slice(-r)},e.convert=function(n){var r,i,s,o;if(Array.isArray(n))return"["+function(){var a,l,u;for(u=[],a=0,l=n.length;a<l;a++)r=n[a],u.push(e.convert(r));return u}().join(" ")+"]";if(typeof n=="string")return"/"+n;if(n!=null&&n.isString)return"("+n+")";if(n instanceof Date)return"(D:"+t(n.getUTCFullYear(),4)+t(n.getUTCMonth(),2)+t(n.getUTCDate(),2)+t(n.getUTCHours(),2)+t(n.getUTCMinutes(),2)+t(n.getUTCSeconds(),2)+"Z)";if({}.toString.call(n)==="[object Object]"){for(i in s=["<<"],n)o=n[i],s.push("/"+i+" "+e.convert(o));return s.push(">>"),s.join(`
`)}return""+n},e}();function dE(t,e,n,r,i){r=r||{};var s=1.15,o=i.internal.scaleFactor,a=i.internal.getFontSize()/o,l=i.getLineHeightFactor?i.getLineHeightFactor():s,u=a*l,c=/\r\n|\r|\n/g,g="",v=1;if((r.valign==="middle"||r.valign==="bottom"||r.halign==="center"||r.halign==="right")&&(g=typeof t=="string"?t.split(c):t,v=g.length||1),n+=a*(2-s),r.valign==="middle"?n-=v/2*u:r.valign==="bottom"&&(n-=v*u),r.halign==="center"||r.halign==="right"){var m=a;if(r.halign==="center"&&(m*=.5),g&&v>=1){for(var S=0;S<g.length;S++)i.text(g[S],e-i.getStringUnitWidth(g[S])*m,n),n+=u;return i}e-=i.getStringUnitWidth(t)*m}return r.halign==="justify"?i.text(t,e,n,{maxWidth:r.maxWidth||100,align:"justify"}):i.text(t,e,n),i}var zb={},bc=function(){function t(e){this.jsPDFDocument=e,this.userStyles={textColor:e.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:e.internal.getFontSize(),fontStyle:e.internal.getFont().fontStyle,font:e.internal.getFont().fontName,lineWidth:e.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:e.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return t.setDefaults=function(e,n){n===void 0&&(n=null),n?n.__autoTableDocumentDefaults=e:zb=e},t.unifyColor=function(e){return Array.isArray(e)?e:typeof e=="number"?[e,e,e]:typeof e=="string"?[e]:null},t.prototype.applyStyles=function(e,n){var r,i,s;n===void 0&&(n=!1),e.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(e.fontStyle);var o=this.jsPDFDocument.internal.getFont(),a=o.fontStyle,l=o.fontName;if(e.font&&(l=e.font),e.fontStyle){a=e.fontStyle;var u=this.getFontList()[l];u&&u.indexOf(a)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(u[0]),a=u[0])}if(this.jsPDFDocument.setFont(l,a),e.fontSize&&this.jsPDFDocument.setFontSize(e.fontSize),!n){var c=t.unifyColor(e.fillColor);c&&(r=this.jsPDFDocument).setFillColor.apply(r,c),c=t.unifyColor(e.textColor),c&&(i=this.jsPDFDocument).setTextColor.apply(i,c),c=t.unifyColor(e.lineColor),c&&(s=this.jsPDFDocument).setDrawColor.apply(s,c),typeof e.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(e.lineWidth)}},t.prototype.splitTextToSize=function(e,n,r){return this.jsPDFDocument.splitTextToSize(e,n,r)},t.prototype.rect=function(e,n,r,i,s){return this.jsPDFDocument.rect(e,n,r,i,s)},t.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},t.prototype.getTextWidth=function(e){return this.jsPDFDocument.getTextWidth(e)},t.prototype.getDocument=function(){return this.jsPDFDocument},t.prototype.setPage=function(e){this.jsPDFDocument.setPage(e)},t.prototype.addPage=function(){return this.jsPDFDocument.addPage()},t.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},t.prototype.getGlobalOptions=function(){return zb||{}},t.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},t.prototype.pageSize=function(){var e=this.jsPDFDocument.internal.pageSize;return e.width==null&&(e={width:e.getWidth(),height:e.getHeight()}),e},t.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},t.prototype.getLineHeightFactor=function(){var e=this.jsPDFDocument;return e.getLineHeightFactor?e.getLineHeightFactor():1.15},t.prototype.getLineHeight=function(e){return e/this.scaleFactor()*this.getLineHeightFactor()},t.prototype.pageNumber=function(){var e=this.jsPDFDocument.internal.getCurrentPageInfo();return e?e.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},t}(),M2=function(t,e){return M2=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},M2(t,e)};function fE(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");M2(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var pE=function(t){fE(e,t);function e(n){var r=t.call(this)||this;return r._element=n,r}return e}(Array);function dV(t){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/t,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function fV(t){var e={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return e[t]}function Im(t,e,n){n.applyStyles(e,!0);var r=Array.isArray(t)?t:[t],i=r.map(function(s){return n.getTextWidth(s)}).reduce(function(s,o){return Math.max(s,o)},0);return i}function mE(t,e,n,r){var i=e.settings.tableLineWidth,s=e.settings.tableLineColor;t.applyStyles({lineWidth:i,lineColor:s});var o=gE(i,!1);o&&t.rect(n.x,n.y,e.getWidth(t.pageSize().width),r.y-n.y,o)}function gE(t,e){var n=t>0,r=e||e===0;return n&&r?"DF":n?"S":r?"F":null}function bg(t,e){var n,r,i,s;if(t=t||e,Array.isArray(t)){if(t.length>=4)return{top:t[0],right:t[1],bottom:t[2],left:t[3]};if(t.length===3)return{top:t[0],right:t[1],bottom:t[2],left:t[1]};if(t.length===2)return{top:t[0],right:t[1],bottom:t[0],left:t[1]};t.length===1?t=t[0]:t=e}return typeof t=="object"?(typeof t.vertical=="number"&&(t.top=t.vertical,t.bottom=t.vertical),typeof t.horizontal=="number"&&(t.right=t.horizontal,t.left=t.horizontal),{left:(n=t.left)!==null&&n!==void 0?n:e,top:(r=t.top)!==null&&r!==void 0?r:e,right:(i=t.right)!==null&&i!==void 0?i:e,bottom:(s=t.bottom)!==null&&s!==void 0?s:e}):(typeof t!="number"&&(t=e),{top:t,right:t,bottom:t,left:t})}function vE(t,e){var n=bg(e.settings.margin,0);return t.pageSize().width-(n.left+n.right)}function pV(t,e,n,r,i){var s={},o=1.3333333333333333,a=Z0(e,function(j){return i.getComputedStyle(j).backgroundColor});a!=null&&(s.fillColor=a);var l=Z0(e,function(j){return i.getComputedStyle(j).color});l!=null&&(s.textColor=l);var u=gV(r,n);u&&(s.cellPadding=u);var c="borderTopColor",g=o*n,v=r.borderTopWidth;if(r.borderBottomWidth===v&&r.borderRightWidth===v&&r.borderLeftWidth===v){var m=(parseFloat(v)||0)/g;m&&(s.lineWidth=m)}else s.lineWidth={top:(parseFloat(r.borderTopWidth)||0)/g,right:(parseFloat(r.borderRightWidth)||0)/g,bottom:(parseFloat(r.borderBottomWidth)||0)/g,left:(parseFloat(r.borderLeftWidth)||0)/g},s.lineWidth.top||(s.lineWidth.right?c="borderRightColor":s.lineWidth.bottom?c="borderBottomColor":s.lineWidth.left&&(c="borderLeftColor"));var S=Z0(e,function(j){return i.getComputedStyle(j)[c]});S!=null&&(s.lineColor=S);var A=["left","right","center","justify"];A.indexOf(r.textAlign)!==-1&&(s.halign=r.textAlign),A=["middle","bottom","top"],A.indexOf(r.verticalAlign)!==-1&&(s.valign=r.verticalAlign);var L=parseInt(r.fontSize||"");isNaN(L)||(s.fontSize=L/o);var b=mV(r);b&&(s.fontStyle=b);var k=(r.fontFamily||"").toLowerCase();return t.indexOf(k)!==-1&&(s.font=k),s}function mV(t){var e="";return(t.fontWeight==="bold"||t.fontWeight==="bolder"||parseInt(t.fontWeight)>=700)&&(e="bold"),(t.fontStyle==="italic"||t.fontStyle==="oblique")&&(e+="italic"),e}function Z0(t,e){var n=yE(t,e);if(!n)return null;var r=n.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!r||!Array.isArray(r))return null;var i=[parseInt(r[1]),parseInt(r[2]),parseInt(r[3])],s=parseInt(r[4]);return s===0||isNaN(i[0])||isNaN(i[1])||isNaN(i[2])?null:i}function yE(t,e){var n=e(t);return n==="rgba(0, 0, 0, 0)"||n==="transparent"||n==="initial"||n==="inherit"?t.parentElement==null?null:yE(t.parentElement,e):n}function gV(t,e){var n=[t.paddingTop,t.paddingRight,t.paddingBottom,t.paddingLeft],r=96/(72/e),i=(parseInt(t.lineHeight)-parseInt(t.fontSize))/e/2,s=n.map(function(a){return parseInt(a||"0")/r}),o=bg(s,0);return i>o.top&&(o.top=i),i>o.bottom&&(o.bottom=i),o}function wE(t,e,n,r,i){var s,o;r===void 0&&(r=!1),i===void 0&&(i=!1);var a;typeof e=="string"?a=n.document.querySelector(e):a=e;var l=Object.keys(t.getFontList()),u=t.scaleFactor(),c=[],g=[],v=[];if(!a)return console.error("Html table could not be found with input: ",e),{head:c,body:g,foot:v};for(var m=0;m<a.rows.length;m++){var S=a.rows[m],A=(o=(s=S==null?void 0:S.parentElement)===null||s===void 0?void 0:s.tagName)===null||o===void 0?void 0:o.toLowerCase(),L=vV(l,u,n,S,r,i);L&&(A==="thead"?c.push(L):A==="tfoot"?v.push(L):g.push(L))}return{head:c,body:g,foot:v}}function vV(t,e,n,r,i,s){for(var o=new pE(r),a=0;a<r.cells.length;a++){var l=r.cells[a],u=n.getComputedStyle(l);if(i||u.display!=="none"){var c=void 0;s&&(c=pV(t,l,e,u,n)),o.push({rowSpan:l.rowSpan,colSpan:l.colSpan,styles:c,_element:l,content:yV(l)})}}var g=n.getComputedStyle(r);if(o.length>0&&(i||g.display!=="none"))return o}function yV(t){var e=t.cloneNode(!0);return e.innerHTML=e.innerHTML.replace(/\n/g,"").replace(/ +/g," "),e.innerHTML=e.innerHTML.split(/<br.*?>/).map(function(n){return n.trim()}).join(`
`),e.innerText||e.textContent||""}function wV(t,e,n){for(var r=0,i=[t,e,n];r<i.length;r++){var s=i[r];s&&typeof s!="object"&&console.error("The options parameter should be of type object, is: "+typeof s),s.startY&&typeof s.startY!="number"&&(console.error("Invalid value for startY option",s.startY),delete s.startY)}}function Jo(t,e,n,r,i){if(t==null)throw new TypeError("Cannot convert undefined or null to object");for(var s=Object(t),o=1;o<arguments.length;o++){var a=arguments[o];if(a!=null)for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(s[l]=a[l])}return s}function _E(t,e){var n=new bc(t),r=n.getDocumentOptions(),i=n.getGlobalOptions();wV(i,r,e);var s=Jo({},i,r,e),o;typeof window<"u"&&(o=window);var a=_V(i,r,e),l=xV(i,r,e),u=bV(n,s),c=NV(n,s,o);return{id:e.tableId,content:c,hooks:l,styles:a,settings:u}}function _V(t,e,n){for(var r={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},i=function(l){if(l==="columnStyles"){var u=t[l],c=e[l],g=n[l];r.columnStyles=Jo({},u,c,g)}else{var v=[t,e,n],m=v.map(function(S){return S[l]||{}});r[l]=Jo({},m[0],m[1],m[2])}},s=0,o=Object.keys(r);s<o.length;s++){var a=o[s];i(a)}return r}function xV(t,e,n){for(var r=[t,e,n],i={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},s=0,o=r;s<o.length;s++){var a=o[s];a.didParseCell&&i.didParseCell.push(a.didParseCell),a.willDrawCell&&i.willDrawCell.push(a.willDrawCell),a.didDrawCell&&i.didDrawCell.push(a.didDrawCell),a.willDrawPage&&i.willDrawPage.push(a.willDrawPage),a.didDrawPage&&i.didDrawPage.push(a.didDrawPage)}return i}function bV(t,e){var n,r,i,s,o,a,l,u,c,g,v,m,S=bg(e.margin,40/t.scaleFactor()),A=(n=SV(t,e.startY))!==null&&n!==void 0?n:S.top,L;e.showFoot===!0?L="everyPage":e.showFoot===!1?L="never":L=(r=e.showFoot)!==null&&r!==void 0?r:"everyPage";var b;e.showHead===!0?b="everyPage":e.showHead===!1?b="never":b=(i=e.showHead)!==null&&i!==void 0?i:"everyPage";var k=(s=e.useCss)!==null&&s!==void 0?s:!1,j=e.theme||(k?"plain":"striped"),U=!!e.horizontalPageBreak,q=(o=e.horizontalPageBreakRepeat)!==null&&o!==void 0?o:null;return{includeHiddenHtml:(a=e.includeHiddenHtml)!==null&&a!==void 0?a:!1,useCss:k,theme:j,startY:A,margin:S,pageBreak:(l=e.pageBreak)!==null&&l!==void 0?l:"auto",rowPageBreak:(u=e.rowPageBreak)!==null&&u!==void 0?u:"auto",tableWidth:(c=e.tableWidth)!==null&&c!==void 0?c:"auto",showHead:b,showFoot:L,tableLineWidth:(g=e.tableLineWidth)!==null&&g!==void 0?g:0,tableLineColor:(v=e.tableLineColor)!==null&&v!==void 0?v:200,horizontalPageBreak:U,horizontalPageBreakRepeat:q,horizontalPageBreakBehaviour:(m=e.horizontalPageBreakBehaviour)!==null&&m!==void 0?m:"afterAllRows"}}function SV(t,e){var n=t.getLastAutoTable(),r=t.scaleFactor(),i=t.pageNumber(),s=!1;if(n&&n.startPageNumber){var o=n.startPageNumber+n.pageNumber-1;s=o===i}return typeof e=="number"?e:(e==null||e===!1)&&s&&(n==null?void 0:n.finalY)!=null?n.finalY+20/r:null}function NV(t,e,n){var r=e.head||[],i=e.body||[],s=e.foot||[];if(e.html){var o=e.includeHiddenHtml;if(n){var a=wE(t,e.html,n,o,e.useCss)||{};r=a.head||r,i=a.body||r,s=a.foot||r}else console.error("Cannot parse html in non browser environment")}var l=e.columns||AV(r,i,s);return{columns:l,head:r,body:i,foot:s}}function AV(t,e,n){var r=t[0]||e[0]||n[0]||[],i=[];return Object.keys(r).filter(function(s){return s!=="_element"}).forEach(function(s){var o=1,a;Array.isArray(r)?a=r[parseInt(s)]:a=r[s],typeof a=="object"&&!Array.isArray(a)&&(o=(a==null?void 0:a.colSpan)||1);for(var l=0;l<o;l++){var u=void 0;Array.isArray(r)?u=i.length:u=s+(l>0?"_".concat(l):"");var c={dataKey:u};i.push(c)}}),i}var U2=function(){function t(e,n,r){this.table=n,this.pageNumber=n.pageNumber,this.settings=n.settings,this.cursor=r,this.doc=e.getDocument()}return t}(),EV=function(t){fE(e,t);function e(n,r,i,s,o,a){var l=t.call(this,n,r,a)||this;return l.cell=i,l.row=s,l.column=o,l.section=s.section,l}return e}(U2),IV=function(){function t(e,n){this.pageNumber=1,this.id=e.id,this.settings=e.settings,this.styles=e.styles,this.hooks=e.hooks,this.columns=n.columns,this.head=n.head,this.body=n.body,this.foot=n.foot}return t.prototype.getHeadHeight=function(e){return this.head.reduce(function(n,r){return n+r.getMaxCellHeight(e)},0)},t.prototype.getFootHeight=function(e){return this.foot.reduce(function(n,r){return n+r.getMaxCellHeight(e)},0)},t.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},t.prototype.callCellHooks=function(e,n,r,i,s,o){for(var a=0,l=n;a<l.length;a++){var u=l[a],c=new EV(e,this,r,i,s,o),g=u(c)===!1;if(r.text=Array.isArray(r.text)?r.text:[r.text],g)return!1}return!0},t.prototype.callEndPageHooks=function(e,n){e.applyStyles(e.userStyles);for(var r=0,i=this.hooks.didDrawPage;r<i.length;r++){var s=i[r];s(new U2(e,this,n))}},t.prototype.callWillDrawPageHooks=function(e,n){for(var r=0,i=this.hooks.willDrawPage;r<i.length;r++){var s=i[r];s(new U2(e,this,n))}},t.prototype.getWidth=function(e){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var n=this.columns.reduce(function(i,s){return i+s.wrappedWidth},0);return n}else{var r=this.settings.margin;return e-r.left-r.right}},t}(),xE=function(){function t(e,n,r,i,s){s===void 0&&(s=!1),this.height=0,this.raw=e,e instanceof pE&&(this.raw=e._element,this.element=e._element),this.index=n,this.section=r,this.cells=i,this.spansMultiplePages=s}return t.prototype.getMaxCellHeight=function(e){var n=this;return e.reduce(function(r,i){var s;return Math.max(r,((s=n.cells[i.index])===null||s===void 0?void 0:s.height)||0)},0)},t.prototype.hasRowSpan=function(e){var n=this;return e.filter(function(r){var i=n.cells[r.index];return i?i.rowSpan>1:!1}).length>0},t.prototype.canEntireRowFit=function(e,n){return this.getMaxCellHeight(n)<=e},t.prototype.getMinimumRowHeight=function(e,n){var r=this;return e.reduce(function(i,s){var o=r.cells[s.index];if(!o)return 0;var a=n.getLineHeight(o.styles.fontSize),l=o.padding("vertical"),u=l+a;return u>i?u:i},0)},t}(),bE=function(){function t(e,n,r){var i;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=n,this.section=r,this.raw=e;var s=e;e!=null&&typeof e=="object"&&!Array.isArray(e)?(this.rowSpan=e.rowSpan||1,this.colSpan=e.colSpan||1,s=(i=e.content)!==null&&i!==void 0?i:e,e._element&&(this.raw=e._element)):(this.rowSpan=1,this.colSpan=1);var o=s!=null?""+s:"",a=/\r\n|\r|\n/g;this.text=o.split(a)}return t.prototype.getTextPos=function(){var e;if(this.styles.valign==="top")e=this.y+this.padding("top");else if(this.styles.valign==="bottom")e=this.y+this.height-this.padding("bottom");else{var n=this.height-this.padding("vertical");e=this.y+n/2+this.padding("top")}var r;if(this.styles.halign==="right")r=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var i=this.width-this.padding("horizontal");r=this.x+i/2+this.padding("left")}else r=this.x+this.padding("left");return{x:r,y:e}},t.prototype.getContentHeight=function(e,n){n===void 0&&(n=1.15);var r=Array.isArray(this.text)?this.text.length:1,i=this.styles.fontSize/e*n,s=r*i+this.padding("vertical");return Math.max(s,this.styles.minCellHeight)},t.prototype.padding=function(e){var n=bg(this.styles.cellPadding,0);return e==="vertical"?n.top+n.bottom:e==="horizontal"?n.left+n.right:n[e]},t}(),TV=function(){function t(e,n,r){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=e,this.raw=n,this.index=r}return t.prototype.getMaxCustomCellWidth=function(e){for(var n=0,r=0,i=e.allRows();r<i.length;r++){var s=i[r],o=s.cells[this.index];o&&typeof o.styles.cellWidth=="number"&&(n=Math.max(n,o.styles.cellWidth))}return n},t}();function kV(t,e){PV(t,e);var n=[],r=0;e.columns.forEach(function(s){var o=s.getMaxCustomCellWidth(e);o?s.width=o:(s.width=s.wrappedWidth,n.push(s)),r+=s.width});var i=e.getWidth(t.pageSize().width)-r;i&&(i=V2(n,i,function(s){return Math.max(s.minReadableWidth,s.minWidth)})),i&&(i=V2(n,i,function(s){return s.minWidth})),i=Math.abs(i),!e.settings.horizontalPageBreak&&i>.1/t.scaleFactor()&&(i=i<1?i:Math.round(i),console.warn("Of the table content, ".concat(i," units width could not fit page"))),LV(e),RV(e,t),CV(e)}function PV(t,e){var n=t.scaleFactor(),r=e.settings.horizontalPageBreak,i=vE(t,e);e.allRows().forEach(function(s){for(var o=0,a=e.columns;o<a.length;o++){var l=a[o],u=s.cells[l.index];if(u){var c=e.hooks.didParseCell;e.callCellHooks(t,c,u,s,l,null);var g=u.padding("horizontal");u.contentWidth=Im(u.text,u.styles,t)+g;var v=Im(u.text.join(" ").split(/[^\S\u00A0]+/),u.styles,t);if(u.minReadableWidth=v+u.padding("horizontal"),typeof u.styles.cellWidth=="number")u.minWidth=u.styles.cellWidth,u.wrappedWidth=u.styles.cellWidth;else if(u.styles.cellWidth==="wrap"||r===!0)u.contentWidth>i?(u.minWidth=i,u.wrappedWidth=i):(u.minWidth=u.contentWidth,u.wrappedWidth=u.contentWidth);else{var m=10/n;u.minWidth=u.styles.minCellWidth||m,u.wrappedWidth=u.contentWidth,u.minWidth>u.wrappedWidth&&(u.wrappedWidth=u.minWidth)}}}}),e.allRows().forEach(function(s){for(var o=0,a=e.columns;o<a.length;o++){var l=a[o],u=s.cells[l.index];if(u&&u.colSpan===1)l.wrappedWidth=Math.max(l.wrappedWidth,u.wrappedWidth),l.minWidth=Math.max(l.minWidth,u.minWidth),l.minReadableWidth=Math.max(l.minReadableWidth,u.minReadableWidth);else{var c=e.styles.columnStyles[l.dataKey]||e.styles.columnStyles[l.index]||{},g=c.cellWidth||c.minCellWidth;g&&typeof g=="number"&&(l.minWidth=g,l.wrappedWidth=g)}u&&(u.colSpan>1&&!l.minWidth&&(l.minWidth=u.minWidth),u.colSpan>1&&!l.wrappedWidth&&(l.wrappedWidth=u.minWidth))}})}function V2(t,e,n){for(var r=e,i=t.reduce(function(m,S){return m+S.wrappedWidth},0),s=0;s<t.length;s++){var o=t[s],a=o.wrappedWidth/i,l=r*a,u=o.width+l,c=n(o),g=u<c?c:u;e-=g-o.width,o.width=g}if(e=Math.round(e*1e10)/1e10,e){var v=t.filter(function(m){return e<0?m.width>n(m):!0});v.length&&(e=V2(v,e,n))}return e}function CV(t){for(var e={},n=1,r=t.allRows(),i=0;i<r.length;i++)for(var s=r[i],o=0,a=t.columns;o<a.length;o++){var l=a[o],u=e[l.index];if(n>1)n--,delete s.cells[l.index];else if(u)u.cell.height+=s.height,n=u.cell.colSpan,delete s.cells[l.index],u.left--,u.left<=1&&delete e[l.index];else{var c=s.cells[l.index];if(!c)continue;if(c.height=s.height,c.rowSpan>1){var g=r.length-i,v=c.rowSpan>g?g:c.rowSpan;e[l.index]={cell:c,left:v,row:s}}}}}function LV(t){for(var e=t.allRows(),n=0;n<e.length;n++)for(var r=e[n],i=null,s=0,o=0,a=0;a<t.columns.length;a++){var l=t.columns[a];if(o-=1,o>1&&t.columns[a+1])s+=l.width,delete r.cells[l.index];else if(i){var u=i;delete r.cells[l.index],i=null,u.width=l.width+s}else{var u=r.cells[l.index];if(!u)continue;if(o=u.colSpan,s=0,u.colSpan>1){i=u,s+=l.width;continue}u.width=l.width+s}}}function RV(t,e){for(var n={count:0,height:0},r=0,i=t.allRows();r<i.length;r++){for(var s=i[r],o=0,a=t.columns;o<a.length;o++){var l=a[o],u=s.cells[l.index];if(u){e.applyStyles(u.styles,!0);var c=u.width-u.padding("horizontal");if(u.styles.overflow==="linebreak")u.text=e.splitTextToSize(u.text,c+1/e.scaleFactor(),{fontSize:u.styles.fontSize});else if(u.styles.overflow==="ellipsize")u.text=qb(u.text,c,u.styles,e,"...");else if(u.styles.overflow==="hidden")u.text=qb(u.text,c,u.styles,e,"");else if(typeof u.styles.overflow=="function"){var g=u.styles.overflow(u.text,c);typeof g=="string"?u.text=[g]:u.text=g}u.contentHeight=u.getContentHeight(e.scaleFactor(),e.getLineHeightFactor());var v=u.contentHeight/u.rowSpan;u.rowSpan>1&&n.count*n.height<v*u.rowSpan?n={height:v,count:u.rowSpan}:n&&n.count>0&&n.height>v&&(v=n.height),v>s.height&&(s.height=v)}}n.count--}}function qb(t,e,n,r,i){return t.map(function(s){return jV(s,e,n,r,i)})}function jV(t,e,n,r,i){var s=1e4*r.scaleFactor();if(e=Math.ceil(e*s)/s,e>=Im(t,n,r))return t;for(;e<Im(t+i,n,r)&&!(t.length<=1);)t=t.substring(0,t.length-1);return t.trim()+i}function SE(t,e){var n=new bc(t),r=DV(e,n.scaleFactor()),i=new IV(e,r);return kV(n,i),n.applyStyles(n.userStyles),i}function DV(t,e){var n=t.content,r=FV(n.columns);if(n.head.length===0){var i=Hb(r,"head");i&&n.head.push(i)}if(n.foot.length===0){var i=Hb(r,"foot");i&&n.foot.push(i)}var s=t.settings.theme,o=t.styles;return{columns:r,head:e1("head",n.head,r,o,s,e),body:e1("body",n.body,r,o,s,e),foot:e1("foot",n.foot,r,o,s,e)}}function e1(t,e,n,r,i,s){var o={},a=e.map(function(l,u){for(var c=0,g={},v=0,m=0,S=0,A=n;S<A.length;S++){var L=A[S];if(o[L.index]==null||o[L.index].left===0)if(m===0){var b=void 0;Array.isArray(l)?b=l[L.index-v-c]:b=l[L.dataKey];var k={};typeof b=="object"&&!Array.isArray(b)&&(k=(b==null?void 0:b.styles)||{});var j=MV(t,L,u,i,r,s,k),U=new bE(b,j,t);g[L.dataKey]=U,g[L.index]=U,m=U.colSpan-1,o[L.index]={left:U.rowSpan-1,times:m}}else m--,v++;else o[L.index].left--,m=o[L.index].times,c++}return new xE(l,u,t,g)});return a}function Hb(t,e){var n={};return t.forEach(function(r){if(r.raw!=null){var i=OV(e,r.raw);i!=null&&(n[r.dataKey]=i)}}),Object.keys(n).length>0?n:null}function OV(t,e){if(t==="head"){if(typeof e=="object")return e.header||null;if(typeof e=="string"||typeof e=="number")return e}else if(t==="foot"&&typeof e=="object")return e.footer;return null}function FV(t){return t.map(function(e,n){var r,i;return typeof e=="object"?i=(r=e.dataKey)!==null&&r!==void 0?r:n:i=n,new TV(i,e,n)})}function MV(t,e,n,r,i,s,o){var a=fV(r),l;t==="head"?l=i.headStyles:t==="body"?l=i.bodyStyles:t==="foot"&&(l=i.footStyles);var u=Jo({},a.table,a[t],i.styles,l),c=i.columnStyles[e.dataKey]||i.columnStyles[e.index]||{},g=t==="body"?c:{},v=t==="body"&&n%2===0?Jo({},a.alternateRow,i.alternateRowStyles):{},m=dV(s),S=Jo({},m,u,v,g);return Jo(S,o)}function UV(t,e,n){var r;n===void 0&&(n={});var i=vE(t,e),s=new Map,o=[],a=[],l=[];Array.isArray(e.settings.horizontalPageBreakRepeat)?l=e.settings.horizontalPageBreakRepeat:(typeof e.settings.horizontalPageBreakRepeat=="string"||typeof e.settings.horizontalPageBreakRepeat=="number")&&(l=[e.settings.horizontalPageBreakRepeat]),l.forEach(function(v){var m=e.columns.find(function(S){return S.dataKey===v||S.index===v});m&&!s.has(m.index)&&(s.set(m.index,!0),o.push(m.index),a.push(e.columns[m.index]),i-=m.wrappedWidth)});for(var u=!0,c=(r=n==null?void 0:n.start)!==null&&r!==void 0?r:0;c<e.columns.length;){if(s.has(c)){c++;continue}var g=e.columns[c].wrappedWidth;if(u||i>=g)u=!1,o.push(c),a.push(e.columns[c]),i-=g;else break;c++}return{colIndexes:o,columns:a,lastIndex:c-1}}function VV(t,e){for(var n=[],r=0;r<e.columns.length;r++){var i=UV(t,e,{start:r});i.columns.length&&(n.push(i),r=i.lastIndex)}return n}function NE(t,e){var n=e.settings,r=n.startY,i=n.margin,s={x:i.left,y:r},o=e.getHeadHeight(e.columns)+e.getFootHeight(e.columns),a=r+i.bottom+o;if(n.pageBreak==="avoid"){var l=e.body,u=l.reduce(function(v,m){return v+m.height},0);a+=u}var c=new bc(t);(n.pageBreak==="always"||n.startY!=null&&a>c.pageSize().height)&&(EE(c),s.y=i.top),e.callWillDrawPageHooks(c,s);var g=Jo({},s);e.startPageNumber=c.pageNumber(),n.horizontalPageBreak?BV(c,e,g,s):(c.applyStyles(c.userStyles),(n.showHead==="firstPage"||n.showHead==="everyPage")&&e.head.forEach(function(v){return ha(c,e,v,s,e.columns)}),c.applyStyles(c.userStyles),e.body.forEach(function(v,m){var S=m===e.body.length-1;Tm(c,e,v,S,g,s,e.columns)}),c.applyStyles(c.userStyles),(n.showFoot==="lastPage"||n.showFoot==="everyPage")&&e.foot.forEach(function(v){return ha(c,e,v,s,e.columns)})),mE(c,e,g,s),e.callEndPageHooks(c,s),e.finalY=s.y,t.lastAutoTable=e,c.applyStyles(c.userStyles)}function BV(t,e,n,r){var i=VV(t,e),s=e.settings;if(s.horizontalPageBreakBehaviour==="afterAllRows")i.forEach(function(u,c){t.applyStyles(t.userStyles),c>0?nd(t,e,n,r,u.columns,!0):Wb(t,e,r,u.columns),zV(t,e,n,r,u.columns),t1(t,e,r,u.columns)});else for(var o=-1,a=i[0],l=function(){var u=o;if(a){t.applyStyles(t.userStyles);var c=a.columns;o>=0?nd(t,e,n,r,c,!0):Wb(t,e,r,c),u=$b(t,e,o+1,r,c),t1(t,e,r,c)}var g=u-o;i.slice(1).forEach(function(v){t.applyStyles(t.userStyles),nd(t,e,n,r,v.columns,!0),$b(t,e,o+1,r,v.columns,g),t1(t,e,r,v.columns)}),o=u};o<e.body.length-1;)l()}function Wb(t,e,n,r){var i=e.settings;t.applyStyles(t.userStyles),(i.showHead==="firstPage"||i.showHead==="everyPage")&&e.head.forEach(function(s){return ha(t,e,s,n,r)})}function zV(t,e,n,r,i){t.applyStyles(t.userStyles),e.body.forEach(function(s,o){var a=o===e.body.length-1;Tm(t,e,s,a,n,r,i)})}function $b(t,e,n,r,i,s){t.applyStyles(t.userStyles),s=s??e.body.length;var o=Math.min(n+s,e.body.length),a=-1;return e.body.slice(n,o).forEach(function(l,u){var c=n+u===e.body.length-1,g=AE(t,e,c,r);l.canEntireRowFit(g,i)&&(ha(t,e,l,r,i),a=n+u)}),a}function t1(t,e,n,r){var i=e.settings;t.applyStyles(t.userStyles),(i.showFoot==="lastPage"||i.showFoot==="everyPage")&&e.foot.forEach(function(s){return ha(t,e,s,n,r)})}function qV(t,e,n){var r=n.getLineHeight(t.styles.fontSize),i=t.padding("vertical"),s=Math.floor((e-i)/r);return Math.max(0,s)}function HV(t,e,n,r){var i={};t.spansMultiplePages=!0,t.height=0;for(var s=0,o=0,a=n.columns;o<a.length;o++){var l=a[o],u=t.cells[l.index];if(u){Array.isArray(u.text)||(u.text=[u.text]);var c=new bE(u.raw,u.styles,u.section);c=Jo(c,u),c.text=[];var g=qV(u,e,r);u.text.length>g&&(c.text=u.text.splice(g,u.text.length));var v=r.scaleFactor(),m=r.getLineHeightFactor();u.contentHeight=u.getContentHeight(v,m),u.contentHeight>=e&&(u.contentHeight=e,c.styles.minCellHeight-=e),u.contentHeight>t.height&&(t.height=u.contentHeight),c.contentHeight=c.getContentHeight(v,m),c.contentHeight>s&&(s=c.contentHeight),i[l.index]=c}}var S=new xE(t.raw,-1,t.section,i,!0);S.height=s;for(var A=0,L=n.columns;A<L.length;A++){var l=L[A],c=S.cells[l.index];c&&(c.height=S.height);var u=t.cells[l.index];u&&(u.height=t.height)}return S}function WV(t,e,n,r){var i=t.pageSize().height,s=r.settings.margin,o=s.top+s.bottom,a=i-o;e.section==="body"&&(a-=r.getHeadHeight(r.columns)+r.getFootHeight(r.columns));var l=e.getMinimumRowHeight(r.columns,t),u=l<n;if(l>a)return console.error("Will not be able to print row ".concat(e.index," correctly since it's minimum height is larger than page height")),!0;if(!u)return!1;var c=e.hasRowSpan(r.columns),g=e.getMaxCellHeight(r.columns)>a;return g?(c&&console.error("The content of row ".concat(e.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(c||r.settings.rowPageBreak==="avoid")}function Tm(t,e,n,r,i,s,o){var a=AE(t,e,r,s);if(n.canEntireRowFit(a,o))ha(t,e,n,s,o);else if(WV(t,n,a,e)){var l=HV(n,a,e,t);ha(t,e,n,s,o),nd(t,e,i,s,o),Tm(t,e,l,r,i,s,o)}else nd(t,e,i,s,o),Tm(t,e,n,r,i,s,o)}function ha(t,e,n,r,i){r.x=e.settings.margin.left;for(var s=0,o=i;s<o.length;s++){var a=o[s],l=n.cells[a.index];if(!l){r.x+=a.width;continue}t.applyStyles(l.styles),l.x=r.x,l.y=r.y;var u=e.callCellHooks(t,e.hooks.willDrawCell,l,n,a,r);if(u===!1){r.x+=a.width;continue}$V(t,l,r);var c=l.getTextPos();dE(l.text,c.x,c.y,{halign:l.styles.halign,valign:l.styles.valign,maxWidth:Math.ceil(l.width-l.padding("left")-l.padding("right"))},t.getDocument()),e.callCellHooks(t,e.hooks.didDrawCell,l,n,a,r),r.x+=a.width}r.y+=n.height}function $V(t,e,n){var r=e.styles;if(t.getDocument().setFillColor(t.getDocument().getFillColor()),typeof r.lineWidth=="number"){var i=gE(r.lineWidth,r.fillColor);i&&t.rect(e.x,n.y,e.width,e.height,i)}else typeof r.lineWidth=="object"&&(r.fillColor&&t.rect(e.x,n.y,e.width,e.height,"F"),GV(t,e,n,r.lineWidth))}function GV(t,e,n,r){var i,s,o,a;r.top&&(i=n.x,s=n.y,o=n.x+e.width,a=n.y,r.right&&(o+=.5*r.right),r.left&&(i-=.5*r.left),l(r.top,i,s,o,a)),r.bottom&&(i=n.x,s=n.y+e.height,o=n.x+e.width,a=n.y+e.height,r.right&&(o+=.5*r.right),r.left&&(i-=.5*r.left),l(r.bottom,i,s,o,a)),r.left&&(i=n.x,s=n.y,o=n.x,a=n.y+e.height,r.top&&(s-=.5*r.top),r.bottom&&(a+=.5*r.bottom),l(r.left,i,s,o,a)),r.right&&(i=n.x+e.width,s=n.y,o=n.x+e.width,a=n.y+e.height,r.top&&(s-=.5*r.top),r.bottom&&(a+=.5*r.bottom),l(r.right,i,s,o,a));function l(u,c,g,v,m){t.getDocument().setLineWidth(u),t.getDocument().line(c,g,v,m,"S")}}function AE(t,e,n,r){var i=e.settings.margin.bottom,s=e.settings.showFoot;return(s==="everyPage"||s==="lastPage"&&n)&&(i+=e.getFootHeight(e.columns)),t.pageSize().height-r.y-i}function nd(t,e,n,r,i,s){i===void 0&&(i=[]),s===void 0&&(s=!1),t.applyStyles(t.userStyles),e.settings.showFoot==="everyPage"&&!s&&e.foot.forEach(function(a){return ha(t,e,a,r,i)}),e.callEndPageHooks(t,r);var o=e.settings.margin;mE(t,e,n,r),EE(t),e.pageNumber++,r.x=o.left,r.y=o.top,n.y=o.top,e.callWillDrawPageHooks(t,r),e.settings.showHead==="everyPage"&&(e.head.forEach(function(a){return ha(t,e,a,r,i)}),t.applyStyles(t.userStyles))}function EE(t){var e=t.pageNumber();t.setPage(e+1);var n=t.pageNumber();return n===e?(t.addPage(),!0):!1}function KV(t){t.API.autoTable=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=e[0],i=_E(this,r),s=SE(this,i);return NE(this,s),this},t.API.lastAutoTable=!1,t.API.autoTableText=function(e,n,r,i){dE(e,n,r,i,this)},t.API.autoTableSetDefaults=function(e){return bc.setDefaults(e,this),this},t.autoTableSetDefaults=function(e,n){bc.setDefaults(e,n)},t.API.autoTableHtmlToJson=function(e,n){var r;if(n===void 0&&(n=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var i=new bc(this),s=wE(i,e,window,n,!1),o=s.head,a=s.body,l=((r=o[0])===null||r===void 0?void 0:r.map(function(u){return u.content}))||[];return{columns:l,rows:a,data:a}}}var n1;function YV(t,e){var n=_E(t,e),r=SE(t,n);NE(t,r)}try{if(typeof window<"u"&&window){var Gb=window,Kb=Gb.jsPDF||((n1=Gb.jspdf)===null||n1===void 0?void 0:n1.jsPDF);Kb&&KV(Kb)}}catch(t){console.error("Could not apply autoTable plugin",t)}const QV=()=>{const[t,e]=ue.useState([]),[n,r]=ue.useState(null),[i,s]=ue.useState(""),[o,a]=ue.useState({}),[l,u]=ue.useState(new Set);ue.useEffect(()=>{(async()=>{try{const ee=await Un($t(Qe,"users")),D={};ee.docs.forEach(N=>{D[N.id]=N.data()}),a(D)}catch(ee){console.error("Failed to load users",ee)}})()},[]),ue.useEffect(()=>{(async()=>{try{const D=(await Un($t(Qe,"works"))).docs.map(N=>{const I=N.data();return{id:N.id,title:I.title||"Video",description:I.description||"",workDate:I.date?new Date(I.date):null,postingDate:I.postingDate?I.postingDate.toDate():null,posted:!!I.posted,assignedUserDetails:I.assignedUserDetails||[]}});e(D)}catch(ee){console.error("Failed to load works",ee)}})()},[]);const c=(q,ee)=>{e(D=>D.map(N=>N.id===q?{...N,postingDate:ee?new Date(ee):null}:N))},g=async(q,ee)=>{try{r(q.id);const D=cn(Qe,"works",q.id);await ki(D,{posted:ee}),e(N=>N.map(I=>I.id===q.id?{...I,posted:ee}:I))}catch(D){console.error("Failed to update posted flag",D)}finally{r(null)}},v=async q=>{try{r(q.id);const ee=cn(Qe,"works",q.id);await ki(ee,{postingDate:q.postingDate?cr.fromDate(q.postingDate):null})}catch(ee){console.error("Failed to save posting date",ee)}finally{r(null)}},m=q=>{const ee=q.assignedUserDetails||[];return ee.length?ee.map(D=>{var x;const N=((x=o[D.userId])==null?void 0:x.name)||"Unknown",I=Array.isArray(D.roles)?D.roles:[],R=I.length?I.join(" & "):"";return{name:N,rolesText:R}}):[]},S=q=>{u(ee=>{const D=new Set(ee);return D.has(q)?D.delete(q):D.add(q),D})},A=()=>{u(q=>{const ee=new Set(t.map(N=>N.id)),D=new Set;return q.forEach(N=>{ee.has(N)&&D.add(N)}),D})},b=[...t].sort((q,ee)=>{const D=!!q.postingDate,N=!!ee.postingDate,I=D&&!q.posted,R=N&&!ee.posted;if(I&&!R)return-1;if(!I&&R)return 1;const x=!D,T=!N;return x&&!T?-1:!x&&T?1:D&&N?q.postingDate.getTime()-ee.postingDate.getTime():0}).filter(q=>q.title.toLowerCase().includes(i.toLowerCase())),k=q=>{if(!q)return"Not set";const ee=String(q.getDate()).padStart(2,"0"),N=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][q.getMonth()],I=q.getFullYear();return`${ee} ${N} ${I}`},j=b.filter(q=>l.has(q.id)),U=()=>{const q=j.length?j:b;if(!q.length)return;const ee=new rt;ee.setFontSize(14),ee.text("Video schedule",14,16);const D=q.map(N=>{const I=m(N).map(x=>x.rolesText?`${x.name} [${x.rolesText}]`:x.name),R=I.length?I.join(`
`):"No users found";return[N.title,N.description||"",k(N.postingDate),N.posted?"Posted":"Not posted",R]});YV(ee,{startY:22,head:[["Title","Description","Posting Date","Status","Member(s)"]],body:D,styles:{fontSize:8},headStyles:{fillColor:[33,150,243],halign:"center",valign:"middle"},columnStyles:{0:{cellWidth:50},1:{cellWidth:40},2:{cellWidth:23,halign:"center"},3:{cellWidth:20,halign:"center"},4:{cellWidth:"auto"}}}),ee.save("video-schedule.pdf")};return ue.useEffect(()=>{A()},[t]),p.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50",children:[p.jsx(hr,{userType:"admin"}),p.jsxs("main",{className:"container mx-auto px-4 py-8 max-w-5xl",children:[p.jsxs("div",{className:"mb-6 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[p.jsxs("div",{children:[p.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-800",children:"Video schedule"}),p.jsx("p",{className:"text-sm text-gray-600",children:"Manage posting dates for videos / tasks."})]}),p.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:items-center",children:[p.jsx("input",{type:"text",value:i,onChange:q=>s(q.target.value),placeholder:"Search video",className:"w-full sm:w-64 px-3 py-2 rounded-lg border border-gray-300 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"}),p.jsx("button",{onClick:U,disabled:b.length===0,className:"px-4 py-2 text-sm font-semibold rounded-lg bg-purple-600 text-white hover:bg-purple-700 disabled:opacity-60 disabled:cursor-not-allowed",children:j.length?"Download selected as PDF":"Download all as PDF"})]})]}),b.length===0?p.jsx("p",{className:"text-gray-500 text-sm",children:"No works found."}):p.jsx("div",{className:"space-y-4",children:b.map(q=>p.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-4 flex flex-col gap-3",children:[p.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:[p.jsxs("div",{className:"max-w-xl",children:[p.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[p.jsx("input",{type:"checkbox",checked:l.has(q.id),onChange:()=>S(q.id),className:"h-4 w-4"}),p.jsx("h2",{className:"text-sm sm:text-base font-semibold text-gray-800",children:q.title})]}),p.jsxs("p",{className:"text-xs text-gray-600",children:["Work date: ",k(q.workDate)]}),q.description&&p.jsxs("div",{className:"mt-1 bg-gray-50 rounded-md px-3 py-2",children:[p.jsx("p",{className:"text-xs font-semibold text-gray-600 mb-0.5",children:"Description"}),p.jsx("p",{className:"text-xs text-gray-700 leading-relaxed line-clamp-3",children:q.description})]}),p.jsxs("div",{className:"mt-1",children:[p.jsx("p",{className:"text-xs font-semibold text-gray-600",children:"Users"}),m(q).length===0?p.jsx("p",{className:"text-xs text-gray-500",children:"No users found"}):p.jsx("ul",{className:"mt-0.5 space-y-0.5",children:m(q).map((ee,D)=>p.jsx("li",{className:"text-xs text-gray-700",children:ee.rolesText?`${ee.name} [${ee.rolesText}]`:ee.name},D))})]})]}),p.jsx("div",{className:"text-xs font-semibold",children:q.postingDate?q.posted?p.jsxs("span",{className:"px-3 py-1 rounded-full bg-green-100 text-green-800",children:["Posted (",k(q.postingDate),")"]}):p.jsxs("span",{className:"px-3 py-1 rounded-full bg-yellow-100 text-yellow-800",children:["Scheduled (",k(q.postingDate),")"]}):p.jsx("span",{className:"px-3 py-1 rounded-full bg-gray-100 text-gray-600",children:"No posting date"})})]}),p.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2",children:[p.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[p.jsx("label",{className:"text-xs text-gray-600",children:"Posting date:"}),p.jsx("input",{type:"date",value:q.postingDate?q.postingDate.toISOString().slice(0,10):"",onChange:ee=>c(q.id,ee.target.value),className:"px-3 py-2 rounded-lg border border-gray-300 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"}),p.jsx("button",{onClick:()=>v(q),disabled:n===q.id,className:`px-3 py-2 text-xs font-semibold rounded-lg text-white ${n===q.id?"bg-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700"}`,children:n===q.id?"Saving":"Save date"})]}),p.jsx("div",{className:"flex items-center gap-2",children:p.jsx("button",{onClick:()=>g(q,!q.posted),disabled:!q.postingDate||n===q.id,className:`px-4 py-2 text-xs font-semibold rounded-lg ${q.posted?"bg-red-100 text-red-700 hover:bg-red-200":"bg-green-600 text-white hover:bg-green-700"} ${!q.postingDate||n===q.id?"opacity-60 cursor-not-allowed":""}`,children:q.posted?"Unmark posted":"Mark posted"})})]})]},q.id))})]})]})};function JV(){return p.jsx(V8,{children:p.jsxs(R8,{children:[p.jsx(Sr,{path:"/",element:p.jsx(iF,{})}),p.jsx(Sr,{path:"/signup",element:p.jsx(aF,{})}),p.jsx(Sr,{path:"/home",element:p.jsx(tF,{})}),p.jsx(Sr,{path:"/admin-home",element:p.jsx(Ps,{children:p.jsx(eF,{})})}),p.jsx(Sr,{path:"/create-user",element:p.jsx(Ps,{children:p.jsx(lF,{})})}),p.jsx(Sr,{path:"/assign-work",element:p.jsx(Ps,{children:p.jsx(cF,{})})}),p.jsx(Sr,{path:"/work-list",element:p.jsx(Ps,{children:p.jsx(hF,{})})}),p.jsx(Sr,{path:"/profile",element:p.jsx(dF,{})}),p.jsx(Sr,{path:"/manage-users",element:p.jsx(Ps,{children:p.jsx(fF,{})})}),p.jsx(Sr,{path:"/users/:userId",element:p.jsx(Ps,{children:p.jsx(pF,{})})}),p.jsx(Sr,{path:"/tasks/:taskId",element:p.jsx(Ps,{children:p.jsx(vF,{})})}),p.jsx(Sr,{path:"/task-history",element:p.jsx(mF,{})}),p.jsx(Sr,{path:"/inventory",element:p.jsx(Ps,{children:p.jsx(yF,{})})}),p.jsx(Sr,{path:"/admin-reject-details",element:p.jsx(Ps,{children:p.jsx(wF,{})})}),p.jsx(Sr,{path:"/user-reject-details",element:p.jsx(_F,{})}),p.jsx(Sr,{path:"/notifications",element:p.jsx(Ps,{children:p.jsx(xF,{})})}),p.jsx(Sr,{path:"/posting-dates",element:p.jsx(Ps,{children:p.jsx(QV,{})})})]})})}const XV="BCDW2bDpR51kOUCYdebGFw4pHEU_h2159MHvkSEslEdrV0yI0AVUiQikAbClmXfS9EGHHQblUlKTC_To4SaQ7Hg";function ZV(){return ue.useEffect(()=>{(async()=>{if(!("serviceWorker"in navigator)||!("Notification"in window))return;const e=await navigator.serviceWorker.register("/firebase-messaging-sw.js");if(await Notification.requestPermission()!=="granted")return;const r=await dA(N2,{vapidKey:XV,serviceWorkerRegistration:e}),i=Ms.currentUser;i&&r&&await ki(cn(Qe,"users",i.uid),{fcmToken:r})})().catch(console.error)},[]),p.jsx(JV,{})}a6(document.getElementById("root")).render(p.jsx(ue.StrictMode,{children:p.jsx(ZV,{})}));export{on as _,tB as c,fI as g};
