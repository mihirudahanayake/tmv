var GT=Object.defineProperty;var KT=(t,e,n)=>e in t?GT(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var yn=(t,e,n)=>KT(t,typeof e!="symbol"?e+"":e,n);function YT(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var Cz=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function QT(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var w4={exports:{}},Um={},x4={exports:{}},$t={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yd=Symbol.for("react.element"),XT=Symbol.for("react.portal"),JT=Symbol.for("react.fragment"),ZT=Symbol.for("react.strict_mode"),ek=Symbol.for("react.profiler"),tk=Symbol.for("react.provider"),nk=Symbol.for("react.context"),rk=Symbol.for("react.forward_ref"),ik=Symbol.for("react.suspense"),sk=Symbol.for("react.memo"),ok=Symbol.for("react.lazy"),J5=Symbol.iterator;function ak(t){return t===null||typeof t!="object"?null:(t=J5&&t[J5]||t["@@iterator"],typeof t=="function"?t:null)}var b4={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_4=Object.assign,N4={};function Ku(t,e,n){this.props=t,this.context=e,this.refs=N4,this.updater=n||b4}Ku.prototype.isReactComponent={};Ku.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ku.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function S4(){}S4.prototype=Ku.prototype;function ty(t,e,n){this.props=t,this.context=e,this.refs=N4,this.updater=n||b4}var ny=ty.prototype=new S4;ny.constructor=ty;_4(ny,Ku.prototype);ny.isPureReactComponent=!0;var Z5=Array.isArray,A4=Object.prototype.hasOwnProperty,ry={current:null},E4={key:!0,ref:!0,__self:!0,__source:!0};function T4(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)A4.call(e,r)&&!E4.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Yd,type:t,key:s,ref:o,props:i,_owner:ry.current}}function lk(t,e){return{$$typeof:Yd,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function iy(t){return typeof t=="object"&&t!==null&&t.$$typeof===Yd}function ck(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var ew=/\/+/g;function Qg(t,e){return typeof t=="object"&&t!==null&&t.key!=null?ck(""+t.key):e.toString(36)}function gp(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Yd:case XT:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Qg(o,0):r,Z5(i)?(n="",t!=null&&(n=t.replace(ew,"$&/")+"/"),gp(i,e,n,"",function(c){return c})):i!=null&&(iy(i)&&(i=lk(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(ew,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",Z5(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+Qg(s,a);o+=gp(s,e,n,l,i)}else if(l=ak(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+Qg(s,a++),o+=gp(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Mf(t,e,n){if(t==null)return t;var r=[],i=0;return gp(t,r,"","",function(s){return e.call(n,s,i++)}),r}function uk(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ri={current:null},yp={transition:null},hk={ReactCurrentDispatcher:Ri,ReactCurrentBatchConfig:yp,ReactCurrentOwner:ry};function k4(){throw Error("act(...) is not supported in production builds of React.")}$t.Children={map:Mf,forEach:function(t,e,n){Mf(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Mf(t,function(){e++}),e},toArray:function(t){return Mf(t,function(e){return e})||[]},only:function(t){if(!iy(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};$t.Component=Ku;$t.Fragment=JT;$t.Profiler=ek;$t.PureComponent=ty;$t.StrictMode=ZT;$t.Suspense=ik;$t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=hk;$t.act=k4;$t.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=_4({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=ry.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)A4.call(e,l)&&!E4.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Yd,type:t.type,key:i,ref:s,props:r,_owner:o}};$t.createContext=function(t){return t={$$typeof:nk,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:tk,_context:t},t.Consumer=t};$t.createElement=T4;$t.createFactory=function(t){var e=T4.bind(null,t);return e.type=t,e};$t.createRef=function(){return{current:null}};$t.forwardRef=function(t){return{$$typeof:rk,render:t}};$t.isValidElement=iy;$t.lazy=function(t){return{$$typeof:ok,_payload:{_status:-1,_result:t},_init:uk}};$t.memo=function(t,e){return{$$typeof:sk,type:t,compare:e===void 0?null:e}};$t.startTransition=function(t){var e=yp.transition;yp.transition={};try{t()}finally{yp.transition=e}};$t.unstable_act=k4;$t.useCallback=function(t,e){return Ri.current.useCallback(t,e)};$t.useContext=function(t){return Ri.current.useContext(t)};$t.useDebugValue=function(){};$t.useDeferredValue=function(t){return Ri.current.useDeferredValue(t)};$t.useEffect=function(t,e){return Ri.current.useEffect(t,e)};$t.useId=function(){return Ri.current.useId()};$t.useImperativeHandle=function(t,e,n){return Ri.current.useImperativeHandle(t,e,n)};$t.useInsertionEffect=function(t,e){return Ri.current.useInsertionEffect(t,e)};$t.useLayoutEffect=function(t,e){return Ri.current.useLayoutEffect(t,e)};$t.useMemo=function(t,e){return Ri.current.useMemo(t,e)};$t.useReducer=function(t,e,n){return Ri.current.useReducer(t,e,n)};$t.useRef=function(t){return Ri.current.useRef(t)};$t.useState=function(t){return Ri.current.useState(t)};$t.useSyncExternalStore=function(t,e,n){return Ri.current.useSyncExternalStore(t,e,n)};$t.useTransition=function(){return Ri.current.useTransition()};$t.version="18.3.1";x4.exports=$t;var se=x4.exports;const ol=QT(se),dk=YT({__proto__:null,default:ol},[se]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fk=se,pk=Symbol.for("react.element"),mk=Symbol.for("react.fragment"),gk=Object.prototype.hasOwnProperty,yk=fk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,vk={key:!0,ref:!0,__self:!0,__source:!0};function I4(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)gk.call(e,r)&&!vk.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:pk,type:t,key:s,ref:o,props:i,_owner:yk.current}}Um.Fragment=mk;Um.jsx=I4;Um.jsxs=I4;w4.exports=Um;var u=w4.exports,C4={exports:{}},ps={},P4={exports:{}},L4={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(J,le){var xe=J.length;J.push(le);e:for(;0<xe;){var we=xe-1>>>1,O=J[we];if(0<i(O,le))J[we]=le,J[xe]=O,xe=we;else break e}}function n(J){return J.length===0?null:J[0]}function r(J){if(J.length===0)return null;var le=J[0],xe=J.pop();if(xe!==le){J[0]=xe;e:for(var we=0,O=J.length,W=O>>>1;we<W;){var Y=2*(we+1)-1,K=J[Y],re=Y+1,ae=J[re];if(0>i(K,xe))re<O&&0>i(ae,K)?(J[we]=ae,J[re]=xe,we=re):(J[we]=K,J[Y]=xe,we=Y);else if(re<O&&0>i(ae,xe))J[we]=ae,J[re]=xe,we=re;else break e}}return le}function i(J,le){var xe=J.sortIndex-le.sortIndex;return xe!==0?xe:J.id-le.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],h=1,g=null,y=3,p=!1,_=!1,N=!1,C=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function R(J){for(var le=n(c);le!==null;){if(le.callback===null)r(c);else if(le.startTime<=J)r(c),le.sortIndex=le.expirationTime,e(l,le);else break;le=n(c)}}function j(J){if(N=!1,R(J),!_)if(n(l)!==null)_=!0,ue(q);else{var le=n(c);le!==null&&fe(j,le.startTime-J)}}function q(J,le){_=!1,N&&(N=!1,x(S),S=-1),p=!0;var xe=y;try{for(R(le),g=n(l);g!==null&&(!(g.expirationTime>le)||J&&!A());){var we=g.callback;if(typeof we=="function"){g.callback=null,y=g.priorityLevel;var O=we(g.expirationTime<=le);le=t.unstable_now(),typeof O=="function"?g.callback=O:g===n(l)&&r(l),R(le)}else r(l);g=n(l)}if(g!==null)var W=!0;else{var Y=n(c);Y!==null&&fe(j,Y.startTime-le),W=!1}return W}finally{g=null,y=xe,p=!1}}var Q=!1,D=null,S=-1,T=5,F=-1;function A(){return!(t.unstable_now()-F<T)}function I(){if(D!==null){var J=t.unstable_now();F=J;var le=!0;try{le=D(!0,J)}finally{le?L():(Q=!1,D=null)}}else Q=!1}var L;if(typeof k=="function")L=function(){k(I)};else if(typeof MessageChannel<"u"){var ne=new MessageChannel,ie=ne.port2;ne.port1.onmessage=I,L=function(){ie.postMessage(null)}}else L=function(){C(I,0)};function ue(J){D=J,Q||(Q=!0,L())}function fe(J,le){S=C(function(){J(t.unstable_now())},le)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(J){J.callback=null},t.unstable_continueExecution=function(){_||p||(_=!0,ue(q))},t.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<J?Math.floor(1e3/J):5},t.unstable_getCurrentPriorityLevel=function(){return y},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(J){switch(y){case 1:case 2:case 3:var le=3;break;default:le=y}var xe=y;y=le;try{return J()}finally{y=xe}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(J,le){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var xe=y;y=J;try{return le()}finally{y=xe}},t.unstable_scheduleCallback=function(J,le,xe){var we=t.unstable_now();switch(typeof xe=="object"&&xe!==null?(xe=xe.delay,xe=typeof xe=="number"&&0<xe?we+xe:we):xe=we,J){case 1:var O=-1;break;case 2:O=250;break;case 5:O=1073741823;break;case 4:O=1e4;break;default:O=5e3}return O=xe+O,J={id:h++,callback:le,priorityLevel:J,startTime:xe,expirationTime:O,sortIndex:-1},xe>we?(J.sortIndex=xe,e(c,J),n(l)===null&&J===n(c)&&(N?(x(S),S=-1):N=!0,fe(j,xe-we))):(J.sortIndex=O,e(l,J),_||p||(_=!0,ue(q))),J},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(J){var le=y;return function(){var xe=y;y=le;try{return J.apply(this,arguments)}finally{y=xe}}}})(L4);P4.exports=L4;var wk=P4.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xk=se,fs=wk;function Fe(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var R4=new Set,fd={};function Ac(t,e){Lu(t,e),Lu(t+"Capture",e)}function Lu(t,e){for(fd[t]=e,t=0;t<e.length;t++)R4.add(e[t])}var ca=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),m1=Object.prototype.hasOwnProperty,bk=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,tw={},nw={};function _k(t){return m1.call(nw,t)?!0:m1.call(tw,t)?!1:bk.test(t)?nw[t]=!0:(tw[t]=!0,!1)}function Nk(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Sk(t,e,n,r){if(e===null||typeof e>"u"||Nk(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function ji(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var ei={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ei[t]=new ji(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ei[e]=new ji(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ei[t]=new ji(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ei[t]=new ji(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ei[t]=new ji(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ei[t]=new ji(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ei[t]=new ji(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ei[t]=new ji(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ei[t]=new ji(t,5,!1,t.toLowerCase(),null,!1,!1)});var sy=/[\-:]([a-z])/g;function oy(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(sy,oy);ei[e]=new ji(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(sy,oy);ei[e]=new ji(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(sy,oy);ei[e]=new ji(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ei[t]=new ji(t,1,!1,t.toLowerCase(),null,!1,!1)});ei.xlinkHref=new ji("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ei[t]=new ji(t,1,!1,t.toLowerCase(),null,!0,!0)});function ay(t,e,n,r){var i=ei.hasOwnProperty(e)?ei[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Sk(e,n,i,r)&&(n=null),r||i===null?_k(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var va=xk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ff=Symbol.for("react.element"),ru=Symbol.for("react.portal"),iu=Symbol.for("react.fragment"),ly=Symbol.for("react.strict_mode"),g1=Symbol.for("react.profiler"),j4=Symbol.for("react.provider"),D4=Symbol.for("react.context"),cy=Symbol.for("react.forward_ref"),y1=Symbol.for("react.suspense"),v1=Symbol.for("react.suspense_list"),uy=Symbol.for("react.memo"),Wa=Symbol.for("react.lazy"),O4=Symbol.for("react.offscreen"),rw=Symbol.iterator;function Th(t){return t===null||typeof t!="object"?null:(t=rw&&t[rw]||t["@@iterator"],typeof t=="function"?t:null)}var Jn=Object.assign,Xg;function Uh(t){if(Xg===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Xg=e&&e[1]||""}return`
`+Xg+t}var Jg=!1;function Zg(t,e){if(!t||Jg)return"";Jg=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Jg=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Uh(t):""}function Ak(t){switch(t.tag){case 5:return Uh(t.type);case 16:return Uh("Lazy");case 13:return Uh("Suspense");case 19:return Uh("SuspenseList");case 0:case 2:case 15:return t=Zg(t.type,!1),t;case 11:return t=Zg(t.type.render,!1),t;case 1:return t=Zg(t.type,!0),t;default:return""}}function w1(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case iu:return"Fragment";case ru:return"Portal";case g1:return"Profiler";case ly:return"StrictMode";case y1:return"Suspense";case v1:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case D4:return(t.displayName||"Context")+".Consumer";case j4:return(t._context.displayName||"Context")+".Provider";case cy:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case uy:return e=t.displayName||null,e!==null?e:w1(t.type)||"Memo";case Wa:e=t._payload,t=t._init;try{return w1(t(e))}catch{}}return null}function Ek(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return w1(e);case 8:return e===ly?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function vl(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function M4(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Tk(t){var e=M4(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Uf(t){t._valueTracker||(t._valueTracker=Tk(t))}function F4(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=M4(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function qp(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function x1(t,e){var n=e.checked;return Jn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function iw(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=vl(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function U4(t,e){e=e.checked,e!=null&&ay(t,"checked",e,!1)}function b1(t,e){U4(t,e);var n=vl(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?_1(t,e.type,n):e.hasOwnProperty("defaultValue")&&_1(t,e.type,vl(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function sw(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function _1(t,e,n){(e!=="number"||qp(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Vh=Array.isArray;function yu(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+vl(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function N1(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Fe(91));return Jn({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function ow(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Fe(92));if(Vh(n)){if(1<n.length)throw Error(Fe(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:vl(n)}}function V4(t,e){var n=vl(e.value),r=vl(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function aw(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function B4(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function S1(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?B4(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Vf,z4=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Vf=Vf||document.createElement("div"),Vf.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Vf.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function pd(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Yh={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},kk=["Webkit","ms","Moz","O"];Object.keys(Yh).forEach(function(t){kk.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Yh[e]=Yh[t]})});function q4(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Yh.hasOwnProperty(t)&&Yh[t]?(""+e).trim():e+"px"}function H4(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=q4(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var Ik=Jn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function A1(t,e){if(e){if(Ik[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Fe(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Fe(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Fe(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Fe(62))}}function E1(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var T1=null;function hy(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var k1=null,vu=null,wu=null;function lw(t){if(t=Jd(t)){if(typeof k1!="function")throw Error(Fe(280));var e=t.stateNode;e&&(e=Hm(e),k1(t.stateNode,t.type,e))}}function $4(t){vu?wu?wu.push(t):wu=[t]:vu=t}function W4(){if(vu){var t=vu,e=wu;if(wu=vu=null,lw(t),e)for(t=0;t<e.length;t++)lw(e[t])}}function G4(t,e){return t(e)}function K4(){}var e0=!1;function Y4(t,e,n){if(e0)return t(e,n);e0=!0;try{return G4(t,e,n)}finally{e0=!1,(vu!==null||wu!==null)&&(K4(),W4())}}function md(t,e){var n=t.stateNode;if(n===null)return null;var r=Hm(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Fe(231,e,typeof n));return n}var I1=!1;if(ca)try{var kh={};Object.defineProperty(kh,"passive",{get:function(){I1=!0}}),window.addEventListener("test",kh,kh),window.removeEventListener("test",kh,kh)}catch{I1=!1}function Ck(t,e,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(h){this.onError(h)}}var Qh=!1,Hp=null,$p=!1,C1=null,Pk={onError:function(t){Qh=!0,Hp=t}};function Lk(t,e,n,r,i,s,o,a,l){Qh=!1,Hp=null,Ck.apply(Pk,arguments)}function Rk(t,e,n,r,i,s,o,a,l){if(Lk.apply(this,arguments),Qh){if(Qh){var c=Hp;Qh=!1,Hp=null}else throw Error(Fe(198));$p||($p=!0,C1=c)}}function Ec(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Q4(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function cw(t){if(Ec(t)!==t)throw Error(Fe(188))}function jk(t){var e=t.alternate;if(!e){if(e=Ec(t),e===null)throw Error(Fe(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return cw(i),t;if(s===r)return cw(i),e;s=s.sibling}throw Error(Fe(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(Fe(189))}}if(n.alternate!==r)throw Error(Fe(190))}if(n.tag!==3)throw Error(Fe(188));return n.stateNode.current===n?t:e}function X4(t){return t=jk(t),t!==null?J4(t):null}function J4(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=J4(t);if(e!==null)return e;t=t.sibling}return null}var Z4=fs.unstable_scheduleCallback,uw=fs.unstable_cancelCallback,Dk=fs.unstable_shouldYield,Ok=fs.unstable_requestPaint,pr=fs.unstable_now,Mk=fs.unstable_getCurrentPriorityLevel,dy=fs.unstable_ImmediatePriority,e3=fs.unstable_UserBlockingPriority,Wp=fs.unstable_NormalPriority,Fk=fs.unstable_LowPriority,t3=fs.unstable_IdlePriority,Vm=null,Ao=null;function Uk(t){if(Ao&&typeof Ao.onCommitFiberRoot=="function")try{Ao.onCommitFiberRoot(Vm,t,void 0,(t.current.flags&128)===128)}catch{}}var Ys=Math.clz32?Math.clz32:zk,Vk=Math.log,Bk=Math.LN2;function zk(t){return t>>>=0,t===0?32:31-(Vk(t)/Bk|0)|0}var Bf=64,zf=4194304;function Bh(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Gp(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=Bh(a):(s&=o,s!==0&&(r=Bh(s)))}else o=n&~i,o!==0?r=Bh(o):s!==0&&(r=Bh(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Ys(e),i=1<<n,r|=t[n],e&=~i;return r}function qk(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Hk(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Ys(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=qk(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function P1(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function n3(){var t=Bf;return Bf<<=1,!(Bf&4194240)&&(Bf=64),t}function t0(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Qd(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Ys(e),t[e]=n}function $k(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Ys(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function fy(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Ys(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var wn=0;function r3(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var i3,py,s3,o3,a3,L1=!1,qf=[],al=null,ll=null,cl=null,gd=new Map,yd=new Map,Ka=[],Wk="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function hw(t,e){switch(t){case"focusin":case"focusout":al=null;break;case"dragenter":case"dragleave":ll=null;break;case"mouseover":case"mouseout":cl=null;break;case"pointerover":case"pointerout":gd.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":yd.delete(e.pointerId)}}function Ih(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Jd(e),e!==null&&py(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function Gk(t,e,n,r,i){switch(e){case"focusin":return al=Ih(al,t,e,n,r,i),!0;case"dragenter":return ll=Ih(ll,t,e,n,r,i),!0;case"mouseover":return cl=Ih(cl,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return gd.set(s,Ih(gd.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,yd.set(s,Ih(yd.get(s)||null,t,e,n,r,i)),!0}return!1}function l3(t){var e=Jl(t.target);if(e!==null){var n=Ec(e);if(n!==null){if(e=n.tag,e===13){if(e=Q4(n),e!==null){t.blockedOn=e,a3(t.priority,function(){s3(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function vp(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=R1(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);T1=r,n.target.dispatchEvent(r),T1=null}else return e=Jd(n),e!==null&&py(e),t.blockedOn=n,!1;e.shift()}return!0}function dw(t,e,n){vp(t)&&n.delete(e)}function Kk(){L1=!1,al!==null&&vp(al)&&(al=null),ll!==null&&vp(ll)&&(ll=null),cl!==null&&vp(cl)&&(cl=null),gd.forEach(dw),yd.forEach(dw)}function Ch(t,e){t.blockedOn===e&&(t.blockedOn=null,L1||(L1=!0,fs.unstable_scheduleCallback(fs.unstable_NormalPriority,Kk)))}function vd(t){function e(i){return Ch(i,t)}if(0<qf.length){Ch(qf[0],t);for(var n=1;n<qf.length;n++){var r=qf[n];r.blockedOn===t&&(r.blockedOn=null)}}for(al!==null&&Ch(al,t),ll!==null&&Ch(ll,t),cl!==null&&Ch(cl,t),gd.forEach(e),yd.forEach(e),n=0;n<Ka.length;n++)r=Ka[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Ka.length&&(n=Ka[0],n.blockedOn===null);)l3(n),n.blockedOn===null&&Ka.shift()}var xu=va.ReactCurrentBatchConfig,Kp=!0;function Yk(t,e,n,r){var i=wn,s=xu.transition;xu.transition=null;try{wn=1,my(t,e,n,r)}finally{wn=i,xu.transition=s}}function Qk(t,e,n,r){var i=wn,s=xu.transition;xu.transition=null;try{wn=4,my(t,e,n,r)}finally{wn=i,xu.transition=s}}function my(t,e,n,r){if(Kp){var i=R1(t,e,n,r);if(i===null)h0(t,e,r,Yp,n),hw(t,r);else if(Gk(i,t,e,n,r))r.stopPropagation();else if(hw(t,r),e&4&&-1<Wk.indexOf(t)){for(;i!==null;){var s=Jd(i);if(s!==null&&i3(s),s=R1(t,e,n,r),s===null&&h0(t,e,r,Yp,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else h0(t,e,r,null,n)}}var Yp=null;function R1(t,e,n,r){if(Yp=null,t=hy(r),t=Jl(t),t!==null)if(e=Ec(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Q4(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Yp=t,null}function c3(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Mk()){case dy:return 1;case e3:return 4;case Wp:case Fk:return 16;case t3:return 536870912;default:return 16}default:return 16}}var tl=null,gy=null,wp=null;function u3(){if(wp)return wp;var t,e=gy,n=e.length,r,i="value"in tl?tl.value:tl.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return wp=i.slice(t,1<r?1-r:void 0)}function xp(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Hf(){return!0}function fw(){return!1}function ms(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Hf:fw,this.isPropagationStopped=fw,this}return Jn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Hf)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Hf)},persist:function(){},isPersistent:Hf}),e}var Yu={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},yy=ms(Yu),Xd=Jn({},Yu,{view:0,detail:0}),Xk=ms(Xd),n0,r0,Ph,Bm=Jn({},Xd,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:vy,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ph&&(Ph&&t.type==="mousemove"?(n0=t.screenX-Ph.screenX,r0=t.screenY-Ph.screenY):r0=n0=0,Ph=t),n0)},movementY:function(t){return"movementY"in t?t.movementY:r0}}),pw=ms(Bm),Jk=Jn({},Bm,{dataTransfer:0}),Zk=ms(Jk),eI=Jn({},Xd,{relatedTarget:0}),i0=ms(eI),tI=Jn({},Yu,{animationName:0,elapsedTime:0,pseudoElement:0}),nI=ms(tI),rI=Jn({},Yu,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),iI=ms(rI),sI=Jn({},Yu,{data:0}),mw=ms(sI),oI={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},aI={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},lI={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function cI(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=lI[t])?!!e[t]:!1}function vy(){return cI}var uI=Jn({},Xd,{key:function(t){if(t.key){var e=oI[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=xp(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?aI[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:vy,charCode:function(t){return t.type==="keypress"?xp(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?xp(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),hI=ms(uI),dI=Jn({},Bm,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),gw=ms(dI),fI=Jn({},Xd,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:vy}),pI=ms(fI),mI=Jn({},Yu,{propertyName:0,elapsedTime:0,pseudoElement:0}),gI=ms(mI),yI=Jn({},Bm,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),vI=ms(yI),wI=[9,13,27,32],wy=ca&&"CompositionEvent"in window,Xh=null;ca&&"documentMode"in document&&(Xh=document.documentMode);var xI=ca&&"TextEvent"in window&&!Xh,h3=ca&&(!wy||Xh&&8<Xh&&11>=Xh),yw=" ",vw=!1;function d3(t,e){switch(t){case"keyup":return wI.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function f3(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var su=!1;function bI(t,e){switch(t){case"compositionend":return f3(e);case"keypress":return e.which!==32?null:(vw=!0,yw);case"textInput":return t=e.data,t===yw&&vw?null:t;default:return null}}function _I(t,e){if(su)return t==="compositionend"||!wy&&d3(t,e)?(t=u3(),wp=gy=tl=null,su=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return h3&&e.locale!=="ko"?null:e.data;default:return null}}var NI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ww(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!NI[t.type]:e==="textarea"}function p3(t,e,n,r){$4(r),e=Qp(e,"onChange"),0<e.length&&(n=new yy("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Jh=null,wd=null;function SI(t){A3(t,0)}function zm(t){var e=lu(t);if(F4(e))return t}function AI(t,e){if(t==="change")return e}var m3=!1;if(ca){var s0;if(ca){var o0="oninput"in document;if(!o0){var xw=document.createElement("div");xw.setAttribute("oninput","return;"),o0=typeof xw.oninput=="function"}s0=o0}else s0=!1;m3=s0&&(!document.documentMode||9<document.documentMode)}function bw(){Jh&&(Jh.detachEvent("onpropertychange",g3),wd=Jh=null)}function g3(t){if(t.propertyName==="value"&&zm(wd)){var e=[];p3(e,wd,t,hy(t)),Y4(SI,e)}}function EI(t,e,n){t==="focusin"?(bw(),Jh=e,wd=n,Jh.attachEvent("onpropertychange",g3)):t==="focusout"&&bw()}function TI(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return zm(wd)}function kI(t,e){if(t==="click")return zm(e)}function II(t,e){if(t==="input"||t==="change")return zm(e)}function CI(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Js=typeof Object.is=="function"?Object.is:CI;function xd(t,e){if(Js(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!m1.call(e,i)||!Js(t[i],e[i]))return!1}return!0}function _w(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Nw(t,e){var n=_w(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=_w(n)}}function y3(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?y3(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function v3(){for(var t=window,e=qp();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=qp(t.document)}return e}function xy(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function PI(t){var e=v3(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&y3(n.ownerDocument.documentElement,n)){if(r!==null&&xy(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=Nw(n,s);var o=Nw(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var LI=ca&&"documentMode"in document&&11>=document.documentMode,ou=null,j1=null,Zh=null,D1=!1;function Sw(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;D1||ou==null||ou!==qp(r)||(r=ou,"selectionStart"in r&&xy(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Zh&&xd(Zh,r)||(Zh=r,r=Qp(j1,"onSelect"),0<r.length&&(e=new yy("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=ou)))}function $f(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var au={animationend:$f("Animation","AnimationEnd"),animationiteration:$f("Animation","AnimationIteration"),animationstart:$f("Animation","AnimationStart"),transitionend:$f("Transition","TransitionEnd")},a0={},w3={};ca&&(w3=document.createElement("div").style,"AnimationEvent"in window||(delete au.animationend.animation,delete au.animationiteration.animation,delete au.animationstart.animation),"TransitionEvent"in window||delete au.transitionend.transition);function qm(t){if(a0[t])return a0[t];if(!au[t])return t;var e=au[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in w3)return a0[t]=e[n];return t}var x3=qm("animationend"),b3=qm("animationiteration"),_3=qm("animationstart"),N3=qm("transitionend"),S3=new Map,Aw="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Al(t,e){S3.set(t,e),Ac(e,[t])}for(var l0=0;l0<Aw.length;l0++){var c0=Aw[l0],RI=c0.toLowerCase(),jI=c0[0].toUpperCase()+c0.slice(1);Al(RI,"on"+jI)}Al(x3,"onAnimationEnd");Al(b3,"onAnimationIteration");Al(_3,"onAnimationStart");Al("dblclick","onDoubleClick");Al("focusin","onFocus");Al("focusout","onBlur");Al(N3,"onTransitionEnd");Lu("onMouseEnter",["mouseout","mouseover"]);Lu("onMouseLeave",["mouseout","mouseover"]);Lu("onPointerEnter",["pointerout","pointerover"]);Lu("onPointerLeave",["pointerout","pointerover"]);Ac("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ac("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ac("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ac("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ac("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ac("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var zh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),DI=new Set("cancel close invalid load scroll toggle".split(" ").concat(zh));function Ew(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Rk(r,e,void 0,t),t.currentTarget=null}function A3(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;Ew(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;Ew(i,a,c),s=l}}}if($p)throw t=C1,$p=!1,C1=null,t}function jn(t,e){var n=e[V1];n===void 0&&(n=e[V1]=new Set);var r=t+"__bubble";n.has(r)||(E3(e,t,2,!1),n.add(r))}function u0(t,e,n){var r=0;e&&(r|=4),E3(n,t,r,e)}var Wf="_reactListening"+Math.random().toString(36).slice(2);function bd(t){if(!t[Wf]){t[Wf]=!0,R4.forEach(function(n){n!=="selectionchange"&&(DI.has(n)||u0(n,!1,t),u0(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Wf]||(e[Wf]=!0,u0("selectionchange",!1,e))}}function E3(t,e,n,r){switch(c3(e)){case 1:var i=Yk;break;case 4:i=Qk;break;default:i=my}n=i.bind(null,e,n,t),i=void 0,!I1||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function h0(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Jl(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}Y4(function(){var c=s,h=hy(n),g=[];e:{var y=S3.get(t);if(y!==void 0){var p=yy,_=t;switch(t){case"keypress":if(xp(n)===0)break e;case"keydown":case"keyup":p=hI;break;case"focusin":_="focus",p=i0;break;case"focusout":_="blur",p=i0;break;case"beforeblur":case"afterblur":p=i0;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=pw;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=Zk;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=pI;break;case x3:case b3:case _3:p=nI;break;case N3:p=gI;break;case"scroll":p=Xk;break;case"wheel":p=vI;break;case"copy":case"cut":case"paste":p=iI;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=gw}var N=(e&4)!==0,C=!N&&t==="scroll",x=N?y!==null?y+"Capture":null:y;N=[];for(var k=c,R;k!==null;){R=k;var j=R.stateNode;if(R.tag===5&&j!==null&&(R=j,x!==null&&(j=md(k,x),j!=null&&N.push(_d(k,j,R)))),C)break;k=k.return}0<N.length&&(y=new p(y,_,null,n,h),g.push({event:y,listeners:N}))}}if(!(e&7)){e:{if(y=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",y&&n!==T1&&(_=n.relatedTarget||n.fromElement)&&(Jl(_)||_[ua]))break e;if((p||y)&&(y=h.window===h?h:(y=h.ownerDocument)?y.defaultView||y.parentWindow:window,p?(_=n.relatedTarget||n.toElement,p=c,_=_?Jl(_):null,_!==null&&(C=Ec(_),_!==C||_.tag!==5&&_.tag!==6)&&(_=null)):(p=null,_=c),p!==_)){if(N=pw,j="onMouseLeave",x="onMouseEnter",k="mouse",(t==="pointerout"||t==="pointerover")&&(N=gw,j="onPointerLeave",x="onPointerEnter",k="pointer"),C=p==null?y:lu(p),R=_==null?y:lu(_),y=new N(j,k+"leave",p,n,h),y.target=C,y.relatedTarget=R,j=null,Jl(h)===c&&(N=new N(x,k+"enter",_,n,h),N.target=R,N.relatedTarget=C,j=N),C=j,p&&_)t:{for(N=p,x=_,k=0,R=N;R;R=Kc(R))k++;for(R=0,j=x;j;j=Kc(j))R++;for(;0<k-R;)N=Kc(N),k--;for(;0<R-k;)x=Kc(x),R--;for(;k--;){if(N===x||x!==null&&N===x.alternate)break t;N=Kc(N),x=Kc(x)}N=null}else N=null;p!==null&&Tw(g,y,p,N,!1),_!==null&&C!==null&&Tw(g,C,_,N,!0)}}e:{if(y=c?lu(c):window,p=y.nodeName&&y.nodeName.toLowerCase(),p==="select"||p==="input"&&y.type==="file")var q=AI;else if(ww(y))if(m3)q=II;else{q=TI;var Q=EI}else(p=y.nodeName)&&p.toLowerCase()==="input"&&(y.type==="checkbox"||y.type==="radio")&&(q=kI);if(q&&(q=q(t,c))){p3(g,q,n,h);break e}Q&&Q(t,y,c),t==="focusout"&&(Q=y._wrapperState)&&Q.controlled&&y.type==="number"&&_1(y,"number",y.value)}switch(Q=c?lu(c):window,t){case"focusin":(ww(Q)||Q.contentEditable==="true")&&(ou=Q,j1=c,Zh=null);break;case"focusout":Zh=j1=ou=null;break;case"mousedown":D1=!0;break;case"contextmenu":case"mouseup":case"dragend":D1=!1,Sw(g,n,h);break;case"selectionchange":if(LI)break;case"keydown":case"keyup":Sw(g,n,h)}var D;if(wy)e:{switch(t){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else su?d3(t,n)&&(S="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(S="onCompositionStart");S&&(h3&&n.locale!=="ko"&&(su||S!=="onCompositionStart"?S==="onCompositionEnd"&&su&&(D=u3()):(tl=h,gy="value"in tl?tl.value:tl.textContent,su=!0)),Q=Qp(c,S),0<Q.length&&(S=new mw(S,t,null,n,h),g.push({event:S,listeners:Q}),D?S.data=D:(D=f3(n),D!==null&&(S.data=D)))),(D=xI?bI(t,n):_I(t,n))&&(c=Qp(c,"onBeforeInput"),0<c.length&&(h=new mw("onBeforeInput","beforeinput",null,n,h),g.push({event:h,listeners:c}),h.data=D))}A3(g,e)})}function _d(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Qp(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=md(t,n),s!=null&&r.unshift(_d(t,s,i)),s=md(t,e),s!=null&&r.push(_d(t,s,i))),t=t.return}return r}function Kc(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Tw(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=md(n,s),l!=null&&o.unshift(_d(n,l,a))):i||(l=md(n,s),l!=null&&o.push(_d(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var OI=/\r\n?/g,MI=/\u0000|\uFFFD/g;function kw(t){return(typeof t=="string"?t:""+t).replace(OI,`
`).replace(MI,"")}function Gf(t,e,n){if(e=kw(e),kw(t)!==e&&n)throw Error(Fe(425))}function Xp(){}var O1=null,M1=null;function F1(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var U1=typeof setTimeout=="function"?setTimeout:void 0,FI=typeof clearTimeout=="function"?clearTimeout:void 0,Iw=typeof Promise=="function"?Promise:void 0,UI=typeof queueMicrotask=="function"?queueMicrotask:typeof Iw<"u"?function(t){return Iw.resolve(null).then(t).catch(VI)}:U1;function VI(t){setTimeout(function(){throw t})}function d0(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),vd(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);vd(e)}function ul(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Cw(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Qu=Math.random().toString(36).slice(2),bo="__reactFiber$"+Qu,Nd="__reactProps$"+Qu,ua="__reactContainer$"+Qu,V1="__reactEvents$"+Qu,BI="__reactListeners$"+Qu,zI="__reactHandles$"+Qu;function Jl(t){var e=t[bo];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ua]||n[bo]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Cw(t);t!==null;){if(n=t[bo])return n;t=Cw(t)}return e}t=n,n=t.parentNode}return null}function Jd(t){return t=t[bo]||t[ua],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function lu(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Fe(33))}function Hm(t){return t[Nd]||null}var B1=[],cu=-1;function El(t){return{current:t}}function Mn(t){0>cu||(t.current=B1[cu],B1[cu]=null,cu--)}function Ln(t,e){cu++,B1[cu]=t.current,t.current=e}var wl={},vi=El(wl),qi=El(!1),lc=wl;function Ru(t,e){var n=t.type.contextTypes;if(!n)return wl;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Hi(t){return t=t.childContextTypes,t!=null}function Jp(){Mn(qi),Mn(vi)}function Pw(t,e,n){if(vi.current!==wl)throw Error(Fe(168));Ln(vi,e),Ln(qi,n)}function T3(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(Fe(108,Ek(t)||"Unknown",i));return Jn({},n,r)}function Zp(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||wl,lc=vi.current,Ln(vi,t),Ln(qi,qi.current),!0}function Lw(t,e,n){var r=t.stateNode;if(!r)throw Error(Fe(169));n?(t=T3(t,e,lc),r.__reactInternalMemoizedMergedChildContext=t,Mn(qi),Mn(vi),Ln(vi,t)):Mn(qi),Ln(qi,n)}var Qo=null,$m=!1,f0=!1;function k3(t){Qo===null?Qo=[t]:Qo.push(t)}function qI(t){$m=!0,k3(t)}function Tl(){if(!f0&&Qo!==null){f0=!0;var t=0,e=wn;try{var n=Qo;for(wn=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Qo=null,$m=!1}catch(i){throw Qo!==null&&(Qo=Qo.slice(t+1)),Z4(dy,Tl),i}finally{wn=e,f0=!1}}return null}var uu=[],hu=0,em=null,tm=0,Is=[],Cs=0,cc=null,Jo=1,Zo="";function Gl(t,e){uu[hu++]=tm,uu[hu++]=em,em=t,tm=e}function I3(t,e,n){Is[Cs++]=Jo,Is[Cs++]=Zo,Is[Cs++]=cc,cc=t;var r=Jo;t=Zo;var i=32-Ys(r)-1;r&=~(1<<i),n+=1;var s=32-Ys(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Jo=1<<32-Ys(e)+i|n<<i|r,Zo=s+t}else Jo=1<<s|n<<i|r,Zo=t}function by(t){t.return!==null&&(Gl(t,1),I3(t,1,0))}function _y(t){for(;t===em;)em=uu[--hu],uu[hu]=null,tm=uu[--hu],uu[hu]=null;for(;t===cc;)cc=Is[--Cs],Is[Cs]=null,Zo=Is[--Cs],Is[Cs]=null,Jo=Is[--Cs],Is[Cs]=null}var ds=null,ls=null,Bn=!1,Ks=null;function C3(t,e){var n=Ps(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Rw(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,ds=t,ls=ul(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,ds=t,ls=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=cc!==null?{id:Jo,overflow:Zo}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Ps(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,ds=t,ls=null,!0):!1;default:return!1}}function z1(t){return(t.mode&1)!==0&&(t.flags&128)===0}function q1(t){if(Bn){var e=ls;if(e){var n=e;if(!Rw(t,e)){if(z1(t))throw Error(Fe(418));e=ul(n.nextSibling);var r=ds;e&&Rw(t,e)?C3(r,n):(t.flags=t.flags&-4097|2,Bn=!1,ds=t)}}else{if(z1(t))throw Error(Fe(418));t.flags=t.flags&-4097|2,Bn=!1,ds=t}}}function jw(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;ds=t}function Kf(t){if(t!==ds)return!1;if(!Bn)return jw(t),Bn=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!F1(t.type,t.memoizedProps)),e&&(e=ls)){if(z1(t))throw P3(),Error(Fe(418));for(;e;)C3(t,e),e=ul(e.nextSibling)}if(jw(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Fe(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){ls=ul(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}ls=null}}else ls=ds?ul(t.stateNode.nextSibling):null;return!0}function P3(){for(var t=ls;t;)t=ul(t.nextSibling)}function ju(){ls=ds=null,Bn=!1}function Ny(t){Ks===null?Ks=[t]:Ks.push(t)}var HI=va.ReactCurrentBatchConfig;function Lh(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Fe(309));var r=n.stateNode}if(!r)throw Error(Fe(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(Fe(284));if(!n._owner)throw Error(Fe(290,t))}return t}function Yf(t,e){throw t=Object.prototype.toString.call(e),Error(Fe(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Dw(t){var e=t._init;return e(t._payload)}function L3(t){function e(x,k){if(t){var R=x.deletions;R===null?(x.deletions=[k],x.flags|=16):R.push(k)}}function n(x,k){if(!t)return null;for(;k!==null;)e(x,k),k=k.sibling;return null}function r(x,k){for(x=new Map;k!==null;)k.key!==null?x.set(k.key,k):x.set(k.index,k),k=k.sibling;return x}function i(x,k){return x=pl(x,k),x.index=0,x.sibling=null,x}function s(x,k,R){return x.index=R,t?(R=x.alternate,R!==null?(R=R.index,R<k?(x.flags|=2,k):R):(x.flags|=2,k)):(x.flags|=1048576,k)}function o(x){return t&&x.alternate===null&&(x.flags|=2),x}function a(x,k,R,j){return k===null||k.tag!==6?(k=x0(R,x.mode,j),k.return=x,k):(k=i(k,R),k.return=x,k)}function l(x,k,R,j){var q=R.type;return q===iu?h(x,k,R.props.children,j,R.key):k!==null&&(k.elementType===q||typeof q=="object"&&q!==null&&q.$$typeof===Wa&&Dw(q)===k.type)?(j=i(k,R.props),j.ref=Lh(x,k,R),j.return=x,j):(j=Tp(R.type,R.key,R.props,null,x.mode,j),j.ref=Lh(x,k,R),j.return=x,j)}function c(x,k,R,j){return k===null||k.tag!==4||k.stateNode.containerInfo!==R.containerInfo||k.stateNode.implementation!==R.implementation?(k=b0(R,x.mode,j),k.return=x,k):(k=i(k,R.children||[]),k.return=x,k)}function h(x,k,R,j,q){return k===null||k.tag!==7?(k=ic(R,x.mode,j,q),k.return=x,k):(k=i(k,R),k.return=x,k)}function g(x,k,R){if(typeof k=="string"&&k!==""||typeof k=="number")return k=x0(""+k,x.mode,R),k.return=x,k;if(typeof k=="object"&&k!==null){switch(k.$$typeof){case Ff:return R=Tp(k.type,k.key,k.props,null,x.mode,R),R.ref=Lh(x,null,k),R.return=x,R;case ru:return k=b0(k,x.mode,R),k.return=x,k;case Wa:var j=k._init;return g(x,j(k._payload),R)}if(Vh(k)||Th(k))return k=ic(k,x.mode,R,null),k.return=x,k;Yf(x,k)}return null}function y(x,k,R,j){var q=k!==null?k.key:null;if(typeof R=="string"&&R!==""||typeof R=="number")return q!==null?null:a(x,k,""+R,j);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case Ff:return R.key===q?l(x,k,R,j):null;case ru:return R.key===q?c(x,k,R,j):null;case Wa:return q=R._init,y(x,k,q(R._payload),j)}if(Vh(R)||Th(R))return q!==null?null:h(x,k,R,j,null);Yf(x,R)}return null}function p(x,k,R,j,q){if(typeof j=="string"&&j!==""||typeof j=="number")return x=x.get(R)||null,a(k,x,""+j,q);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case Ff:return x=x.get(j.key===null?R:j.key)||null,l(k,x,j,q);case ru:return x=x.get(j.key===null?R:j.key)||null,c(k,x,j,q);case Wa:var Q=j._init;return p(x,k,R,Q(j._payload),q)}if(Vh(j)||Th(j))return x=x.get(R)||null,h(k,x,j,q,null);Yf(k,j)}return null}function _(x,k,R,j){for(var q=null,Q=null,D=k,S=k=0,T=null;D!==null&&S<R.length;S++){D.index>S?(T=D,D=null):T=D.sibling;var F=y(x,D,R[S],j);if(F===null){D===null&&(D=T);break}t&&D&&F.alternate===null&&e(x,D),k=s(F,k,S),Q===null?q=F:Q.sibling=F,Q=F,D=T}if(S===R.length)return n(x,D),Bn&&Gl(x,S),q;if(D===null){for(;S<R.length;S++)D=g(x,R[S],j),D!==null&&(k=s(D,k,S),Q===null?q=D:Q.sibling=D,Q=D);return Bn&&Gl(x,S),q}for(D=r(x,D);S<R.length;S++)T=p(D,x,S,R[S],j),T!==null&&(t&&T.alternate!==null&&D.delete(T.key===null?S:T.key),k=s(T,k,S),Q===null?q=T:Q.sibling=T,Q=T);return t&&D.forEach(function(A){return e(x,A)}),Bn&&Gl(x,S),q}function N(x,k,R,j){var q=Th(R);if(typeof q!="function")throw Error(Fe(150));if(R=q.call(R),R==null)throw Error(Fe(151));for(var Q=q=null,D=k,S=k=0,T=null,F=R.next();D!==null&&!F.done;S++,F=R.next()){D.index>S?(T=D,D=null):T=D.sibling;var A=y(x,D,F.value,j);if(A===null){D===null&&(D=T);break}t&&D&&A.alternate===null&&e(x,D),k=s(A,k,S),Q===null?q=A:Q.sibling=A,Q=A,D=T}if(F.done)return n(x,D),Bn&&Gl(x,S),q;if(D===null){for(;!F.done;S++,F=R.next())F=g(x,F.value,j),F!==null&&(k=s(F,k,S),Q===null?q=F:Q.sibling=F,Q=F);return Bn&&Gl(x,S),q}for(D=r(x,D);!F.done;S++,F=R.next())F=p(D,x,S,F.value,j),F!==null&&(t&&F.alternate!==null&&D.delete(F.key===null?S:F.key),k=s(F,k,S),Q===null?q=F:Q.sibling=F,Q=F);return t&&D.forEach(function(I){return e(x,I)}),Bn&&Gl(x,S),q}function C(x,k,R,j){if(typeof R=="object"&&R!==null&&R.type===iu&&R.key===null&&(R=R.props.children),typeof R=="object"&&R!==null){switch(R.$$typeof){case Ff:e:{for(var q=R.key,Q=k;Q!==null;){if(Q.key===q){if(q=R.type,q===iu){if(Q.tag===7){n(x,Q.sibling),k=i(Q,R.props.children),k.return=x,x=k;break e}}else if(Q.elementType===q||typeof q=="object"&&q!==null&&q.$$typeof===Wa&&Dw(q)===Q.type){n(x,Q.sibling),k=i(Q,R.props),k.ref=Lh(x,Q,R),k.return=x,x=k;break e}n(x,Q);break}else e(x,Q);Q=Q.sibling}R.type===iu?(k=ic(R.props.children,x.mode,j,R.key),k.return=x,x=k):(j=Tp(R.type,R.key,R.props,null,x.mode,j),j.ref=Lh(x,k,R),j.return=x,x=j)}return o(x);case ru:e:{for(Q=R.key;k!==null;){if(k.key===Q)if(k.tag===4&&k.stateNode.containerInfo===R.containerInfo&&k.stateNode.implementation===R.implementation){n(x,k.sibling),k=i(k,R.children||[]),k.return=x,x=k;break e}else{n(x,k);break}else e(x,k);k=k.sibling}k=b0(R,x.mode,j),k.return=x,x=k}return o(x);case Wa:return Q=R._init,C(x,k,Q(R._payload),j)}if(Vh(R))return _(x,k,R,j);if(Th(R))return N(x,k,R,j);Yf(x,R)}return typeof R=="string"&&R!==""||typeof R=="number"?(R=""+R,k!==null&&k.tag===6?(n(x,k.sibling),k=i(k,R),k.return=x,x=k):(n(x,k),k=x0(R,x.mode,j),k.return=x,x=k),o(x)):n(x,k)}return C}var Du=L3(!0),R3=L3(!1),nm=El(null),rm=null,du=null,Sy=null;function Ay(){Sy=du=rm=null}function Ey(t){var e=nm.current;Mn(nm),t._currentValue=e}function H1(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function bu(t,e){rm=t,Sy=du=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(zi=!0),t.firstContext=null)}function Rs(t){var e=t._currentValue;if(Sy!==t)if(t={context:t,memoizedValue:e,next:null},du===null){if(rm===null)throw Error(Fe(308));du=t,rm.dependencies={lanes:0,firstContext:t}}else du=du.next=t;return e}var Zl=null;function Ty(t){Zl===null?Zl=[t]:Zl.push(t)}function j3(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Ty(e)):(n.next=i.next,i.next=n),e.interleaved=n,ha(t,r)}function ha(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Ga=!1;function ky(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function D3(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ia(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function hl(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,on&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,ha(t,n)}return i=r.interleaved,i===null?(e.next=e,Ty(r)):(e.next=i.next,i.next=e),r.interleaved=e,ha(t,n)}function bp(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,fy(t,n)}}function Ow(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function im(t,e,n,r){var i=t.updateQueue;Ga=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=c:a.next=c,h.lastBaseUpdate=l))}if(s!==null){var g=i.baseState;o=0,h=c=l=null,a=s;do{var y=a.lane,p=a.eventTime;if((r&y)===y){h!==null&&(h=h.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var _=t,N=a;switch(y=e,p=n,N.tag){case 1:if(_=N.payload,typeof _=="function"){g=_.call(p,g,y);break e}g=_;break e;case 3:_.flags=_.flags&-65537|128;case 0:if(_=N.payload,y=typeof _=="function"?_.call(p,g,y):_,y==null)break e;g=Jn({},g,y);break e;case 2:Ga=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,y=i.effects,y===null?i.effects=[a]:y.push(a))}else p={eventTime:p,lane:y,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(c=h=p,l=g):h=h.next=p,o|=y;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;y=a,a=y.next,y.next=null,i.lastBaseUpdate=y,i.shared.pending=null}}while(!0);if(h===null&&(l=g),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);hc|=o,t.lanes=o,t.memoizedState=g}}function Mw(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(Fe(191,i));i.call(r)}}}var Zd={},Eo=El(Zd),Sd=El(Zd),Ad=El(Zd);function ec(t){if(t===Zd)throw Error(Fe(174));return t}function Iy(t,e){switch(Ln(Ad,e),Ln(Sd,t),Ln(Eo,Zd),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:S1(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=S1(e,t)}Mn(Eo),Ln(Eo,e)}function Ou(){Mn(Eo),Mn(Sd),Mn(Ad)}function O3(t){ec(Ad.current);var e=ec(Eo.current),n=S1(e,t.type);e!==n&&(Ln(Sd,t),Ln(Eo,n))}function Cy(t){Sd.current===t&&(Mn(Eo),Mn(Sd))}var Qn=El(0);function sm(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var p0=[];function Py(){for(var t=0;t<p0.length;t++)p0[t]._workInProgressVersionPrimary=null;p0.length=0}var _p=va.ReactCurrentDispatcher,m0=va.ReactCurrentBatchConfig,uc=0,Xn=null,Rr=null,Ur=null,om=!1,ed=!1,Ed=0,$I=0;function si(){throw Error(Fe(321))}function Ly(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Js(t[n],e[n]))return!1;return!0}function Ry(t,e,n,r,i,s){if(uc=s,Xn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,_p.current=t===null||t.memoizedState===null?YI:QI,t=n(r,i),ed){s=0;do{if(ed=!1,Ed=0,25<=s)throw Error(Fe(301));s+=1,Ur=Rr=null,e.updateQueue=null,_p.current=XI,t=n(r,i)}while(ed)}if(_p.current=am,e=Rr!==null&&Rr.next!==null,uc=0,Ur=Rr=Xn=null,om=!1,e)throw Error(Fe(300));return t}function jy(){var t=Ed!==0;return Ed=0,t}function wo(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ur===null?Xn.memoizedState=Ur=t:Ur=Ur.next=t,Ur}function js(){if(Rr===null){var t=Xn.alternate;t=t!==null?t.memoizedState:null}else t=Rr.next;var e=Ur===null?Xn.memoizedState:Ur.next;if(e!==null)Ur=e,Rr=t;else{if(t===null)throw Error(Fe(310));Rr=t,t={memoizedState:Rr.memoizedState,baseState:Rr.baseState,baseQueue:Rr.baseQueue,queue:Rr.queue,next:null},Ur===null?Xn.memoizedState=Ur=t:Ur=Ur.next=t}return Ur}function Td(t,e){return typeof e=="function"?e(t):e}function g0(t){var e=js(),n=e.queue;if(n===null)throw Error(Fe(311));n.lastRenderedReducer=t;var r=Rr,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var h=c.lane;if((uc&h)===h)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var g={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=g,o=r):l=l.next=g,Xn.lanes|=h,hc|=h}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,Js(r,e.memoizedState)||(zi=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Xn.lanes|=s,hc|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function y0(t){var e=js(),n=e.queue;if(n===null)throw Error(Fe(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Js(s,e.memoizedState)||(zi=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function M3(){}function F3(t,e){var n=Xn,r=js(),i=e(),s=!Js(r.memoizedState,i);if(s&&(r.memoizedState=i,zi=!0),r=r.queue,Dy(B3.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Ur!==null&&Ur.memoizedState.tag&1){if(n.flags|=2048,kd(9,V3.bind(null,n,r,i,e),void 0,null),Br===null)throw Error(Fe(349));uc&30||U3(n,e,i)}return i}function U3(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Xn.updateQueue,e===null?(e={lastEffect:null,stores:null},Xn.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function V3(t,e,n,r){e.value=n,e.getSnapshot=r,z3(e)&&q3(t)}function B3(t,e,n){return n(function(){z3(e)&&q3(t)})}function z3(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Js(t,n)}catch{return!0}}function q3(t){var e=ha(t,1);e!==null&&Qs(e,t,1,-1)}function Fw(t){var e=wo();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Td,lastRenderedState:t},e.queue=t,t=t.dispatch=KI.bind(null,Xn,t),[e.memoizedState,t]}function kd(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Xn.updateQueue,e===null?(e={lastEffect:null,stores:null},Xn.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function H3(){return js().memoizedState}function Np(t,e,n,r){var i=wo();Xn.flags|=t,i.memoizedState=kd(1|e,n,void 0,r===void 0?null:r)}function Wm(t,e,n,r){var i=js();r=r===void 0?null:r;var s=void 0;if(Rr!==null){var o=Rr.memoizedState;if(s=o.destroy,r!==null&&Ly(r,o.deps)){i.memoizedState=kd(e,n,s,r);return}}Xn.flags|=t,i.memoizedState=kd(1|e,n,s,r)}function Uw(t,e){return Np(8390656,8,t,e)}function Dy(t,e){return Wm(2048,8,t,e)}function $3(t,e){return Wm(4,2,t,e)}function W3(t,e){return Wm(4,4,t,e)}function G3(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function K3(t,e,n){return n=n!=null?n.concat([t]):null,Wm(4,4,G3.bind(null,e,t),n)}function Oy(){}function Y3(t,e){var n=js();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Ly(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Q3(t,e){var n=js();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Ly(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function X3(t,e,n){return uc&21?(Js(n,e)||(n=n3(),Xn.lanes|=n,hc|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,zi=!0),t.memoizedState=n)}function WI(t,e){var n=wn;wn=n!==0&&4>n?n:4,t(!0);var r=m0.transition;m0.transition={};try{t(!1),e()}finally{wn=n,m0.transition=r}}function J3(){return js().memoizedState}function GI(t,e,n){var r=fl(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Z3(t))e6(e,n);else if(n=j3(t,e,n,r),n!==null){var i=Ci();Qs(n,t,r,i),t6(n,e,r)}}function KI(t,e,n){var r=fl(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Z3(t))e6(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Js(a,o)){var l=e.interleaved;l===null?(i.next=i,Ty(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=j3(t,e,i,r),n!==null&&(i=Ci(),Qs(n,t,r,i),t6(n,e,r))}}function Z3(t){var e=t.alternate;return t===Xn||e!==null&&e===Xn}function e6(t,e){ed=om=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function t6(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,fy(t,n)}}var am={readContext:Rs,useCallback:si,useContext:si,useEffect:si,useImperativeHandle:si,useInsertionEffect:si,useLayoutEffect:si,useMemo:si,useReducer:si,useRef:si,useState:si,useDebugValue:si,useDeferredValue:si,useTransition:si,useMutableSource:si,useSyncExternalStore:si,useId:si,unstable_isNewReconciler:!1},YI={readContext:Rs,useCallback:function(t,e){return wo().memoizedState=[t,e===void 0?null:e],t},useContext:Rs,useEffect:Uw,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Np(4194308,4,G3.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Np(4194308,4,t,e)},useInsertionEffect:function(t,e){return Np(4,2,t,e)},useMemo:function(t,e){var n=wo();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=wo();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=GI.bind(null,Xn,t),[r.memoizedState,t]},useRef:function(t){var e=wo();return t={current:t},e.memoizedState=t},useState:Fw,useDebugValue:Oy,useDeferredValue:function(t){return wo().memoizedState=t},useTransition:function(){var t=Fw(!1),e=t[0];return t=WI.bind(null,t[1]),wo().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Xn,i=wo();if(Bn){if(n===void 0)throw Error(Fe(407));n=n()}else{if(n=e(),Br===null)throw Error(Fe(349));uc&30||U3(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,Uw(B3.bind(null,r,s,t),[t]),r.flags|=2048,kd(9,V3.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=wo(),e=Br.identifierPrefix;if(Bn){var n=Zo,r=Jo;n=(r&~(1<<32-Ys(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ed++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=$I++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},QI={readContext:Rs,useCallback:Y3,useContext:Rs,useEffect:Dy,useImperativeHandle:K3,useInsertionEffect:$3,useLayoutEffect:W3,useMemo:Q3,useReducer:g0,useRef:H3,useState:function(){return g0(Td)},useDebugValue:Oy,useDeferredValue:function(t){var e=js();return X3(e,Rr.memoizedState,t)},useTransition:function(){var t=g0(Td)[0],e=js().memoizedState;return[t,e]},useMutableSource:M3,useSyncExternalStore:F3,useId:J3,unstable_isNewReconciler:!1},XI={readContext:Rs,useCallback:Y3,useContext:Rs,useEffect:Dy,useImperativeHandle:K3,useInsertionEffect:$3,useLayoutEffect:W3,useMemo:Q3,useReducer:y0,useRef:H3,useState:function(){return y0(Td)},useDebugValue:Oy,useDeferredValue:function(t){var e=js();return Rr===null?e.memoizedState=t:X3(e,Rr.memoizedState,t)},useTransition:function(){var t=y0(Td)[0],e=js().memoizedState;return[t,e]},useMutableSource:M3,useSyncExternalStore:F3,useId:J3,unstable_isNewReconciler:!1};function Ws(t,e){if(t&&t.defaultProps){e=Jn({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function $1(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Jn({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Gm={isMounted:function(t){return(t=t._reactInternals)?Ec(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Ci(),i=fl(t),s=ia(r,i);s.payload=e,n!=null&&(s.callback=n),e=hl(t,s,i),e!==null&&(Qs(e,t,i,r),bp(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Ci(),i=fl(t),s=ia(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=hl(t,s,i),e!==null&&(Qs(e,t,i,r),bp(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ci(),r=fl(t),i=ia(n,r);i.tag=2,e!=null&&(i.callback=e),e=hl(t,i,r),e!==null&&(Qs(e,t,r,n),bp(e,t,r))}};function Vw(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!xd(n,r)||!xd(i,s):!0}function n6(t,e,n){var r=!1,i=wl,s=e.contextType;return typeof s=="object"&&s!==null?s=Rs(s):(i=Hi(e)?lc:vi.current,r=e.contextTypes,s=(r=r!=null)?Ru(t,i):wl),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Gm,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function Bw(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Gm.enqueueReplaceState(e,e.state,null)}function W1(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},ky(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Rs(s):(s=Hi(e)?lc:vi.current,i.context=Ru(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&($1(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Gm.enqueueReplaceState(i,i.state,null),im(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Mu(t,e){try{var n="",r=e;do n+=Ak(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function v0(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function G1(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var JI=typeof WeakMap=="function"?WeakMap:Map;function r6(t,e,n){n=ia(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){cm||(cm=!0,r2=r),G1(t,e)},n}function i6(t,e,n){n=ia(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){G1(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){G1(t,e),typeof r!="function"&&(dl===null?dl=new Set([this]):dl.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function zw(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new JI;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=d8.bind(null,t,e,n),e.then(t,t))}function qw(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Hw(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=ia(-1,1),e.tag=2,hl(n,e,1))),n.lanes|=1),t)}var ZI=va.ReactCurrentOwner,zi=!1;function ki(t,e,n,r){e.child=t===null?R3(e,null,n,r):Du(e,t.child,n,r)}function $w(t,e,n,r,i){n=n.render;var s=e.ref;return bu(e,i),r=Ry(t,e,n,r,s,i),n=jy(),t!==null&&!zi?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,da(t,e,i)):(Bn&&n&&by(e),e.flags|=1,ki(t,e,r,i),e.child)}function Ww(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Hy(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,s6(t,e,s,r,i)):(t=Tp(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:xd,n(o,r)&&t.ref===e.ref)return da(t,e,i)}return e.flags|=1,t=pl(s,r),t.ref=e.ref,t.return=e,e.child=t}function s6(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(xd(s,r)&&t.ref===e.ref)if(zi=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(zi=!0);else return e.lanes=t.lanes,da(t,e,i)}return K1(t,e,n,r,i)}function o6(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ln(pu,as),as|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ln(pu,as),as|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Ln(pu,as),as|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Ln(pu,as),as|=r;return ki(t,e,i,n),e.child}function a6(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function K1(t,e,n,r,i){var s=Hi(n)?lc:vi.current;return s=Ru(e,s),bu(e,i),n=Ry(t,e,n,r,s,i),r=jy(),t!==null&&!zi?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,da(t,e,i)):(Bn&&r&&by(e),e.flags|=1,ki(t,e,n,i),e.child)}function Gw(t,e,n,r,i){if(Hi(n)){var s=!0;Zp(e)}else s=!1;if(bu(e,i),e.stateNode===null)Sp(t,e),n6(e,n,r),W1(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Rs(c):(c=Hi(n)?lc:vi.current,c=Ru(e,c));var h=n.getDerivedStateFromProps,g=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";g||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&Bw(e,o,r,c),Ga=!1;var y=e.memoizedState;o.state=y,im(e,r,o,i),l=e.memoizedState,a!==r||y!==l||qi.current||Ga?(typeof h=="function"&&($1(e,n,h,r),l=e.memoizedState),(a=Ga||Vw(e,n,a,r,y,l,c))?(g||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,D3(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Ws(e.type,a),o.props=c,g=e.pendingProps,y=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Rs(l):(l=Hi(n)?lc:vi.current,l=Ru(e,l));var p=n.getDerivedStateFromProps;(h=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==g||y!==l)&&Bw(e,o,r,l),Ga=!1,y=e.memoizedState,o.state=y,im(e,r,o,i);var _=e.memoizedState;a!==g||y!==_||qi.current||Ga?(typeof p=="function"&&($1(e,n,p,r),_=e.memoizedState),(c=Ga||Vw(e,n,c,r,y,_,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,_,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,_,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&y===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&y===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=_),o.props=r,o.state=_,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&y===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&y===t.memoizedState||(e.flags|=1024),r=!1)}return Y1(t,e,n,r,s,i)}function Y1(t,e,n,r,i,s){a6(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&Lw(e,n,!1),da(t,e,s);r=e.stateNode,ZI.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Du(e,t.child,null,s),e.child=Du(e,null,a,s)):ki(t,e,a,s),e.memoizedState=r.state,i&&Lw(e,n,!0),e.child}function l6(t){var e=t.stateNode;e.pendingContext?Pw(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Pw(t,e.context,!1),Iy(t,e.containerInfo)}function Kw(t,e,n,r,i){return ju(),Ny(i),e.flags|=256,ki(t,e,n,r),e.child}var Q1={dehydrated:null,treeContext:null,retryLane:0};function X1(t){return{baseLanes:t,cachePool:null,transitions:null}}function c6(t,e,n){var r=e.pendingProps,i=Qn.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Ln(Qn,i&1),t===null)return q1(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Qm(o,r,0,null),t=ic(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=X1(n),e.memoizedState=Q1,t):My(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return e8(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=pl(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=pl(a,s):(s=ic(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?X1(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Q1,r}return s=t.child,t=s.sibling,r=pl(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function My(t,e){return e=Qm({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Qf(t,e,n,r){return r!==null&&Ny(r),Du(e,t.child,null,n),t=My(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function e8(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=v0(Error(Fe(422))),Qf(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Qm({mode:"visible",children:r.children},i,0,null),s=ic(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Du(e,t.child,null,o),e.child.memoizedState=X1(o),e.memoizedState=Q1,s);if(!(e.mode&1))return Qf(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(Fe(419)),r=v0(s,r,void 0),Qf(t,e,o,r)}if(a=(o&t.childLanes)!==0,zi||a){if(r=Br,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,ha(t,i),Qs(r,t,i,-1))}return qy(),r=v0(Error(Fe(421))),Qf(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=f8.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,ls=ul(i.nextSibling),ds=e,Bn=!0,Ks=null,t!==null&&(Is[Cs++]=Jo,Is[Cs++]=Zo,Is[Cs++]=cc,Jo=t.id,Zo=t.overflow,cc=e),e=My(e,r.children),e.flags|=4096,e)}function Yw(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),H1(t.return,e,n)}function w0(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function u6(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(ki(t,e,r.children,n),r=Qn.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Yw(t,n,e);else if(t.tag===19)Yw(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ln(Qn,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&sm(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),w0(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&sm(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}w0(e,!0,n,null,s);break;case"together":w0(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Sp(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function da(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),hc|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Fe(153));if(e.child!==null){for(t=e.child,n=pl(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=pl(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function t8(t,e,n){switch(e.tag){case 3:l6(e),ju();break;case 5:O3(e);break;case 1:Hi(e.type)&&Zp(e);break;case 4:Iy(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Ln(nm,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ln(Qn,Qn.current&1),e.flags|=128,null):n&e.child.childLanes?c6(t,e,n):(Ln(Qn,Qn.current&1),t=da(t,e,n),t!==null?t.sibling:null);Ln(Qn,Qn.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return u6(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ln(Qn,Qn.current),r)break;return null;case 22:case 23:return e.lanes=0,o6(t,e,n)}return da(t,e,n)}var h6,J1,d6,f6;h6=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};J1=function(){};d6=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,ec(Eo.current);var s=null;switch(n){case"input":i=x1(t,i),r=x1(t,r),s=[];break;case"select":i=Jn({},i,{value:void 0}),r=Jn({},r,{value:void 0}),s=[];break;case"textarea":i=N1(t,i),r=N1(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Xp)}A1(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(fd.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(fd.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&jn("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};f6=function(t,e,n,r){n!==r&&(e.flags|=4)};function Rh(t,e){if(!Bn)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function oi(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function n8(t,e,n){var r=e.pendingProps;switch(_y(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return oi(e),null;case 1:return Hi(e.type)&&Jp(),oi(e),null;case 3:return r=e.stateNode,Ou(),Mn(qi),Mn(vi),Py(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Kf(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ks!==null&&(o2(Ks),Ks=null))),J1(t,e),oi(e),null;case 5:Cy(e);var i=ec(Ad.current);if(n=e.type,t!==null&&e.stateNode!=null)d6(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Fe(166));return oi(e),null}if(t=ec(Eo.current),Kf(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[bo]=e,r[Nd]=s,t=(e.mode&1)!==0,n){case"dialog":jn("cancel",r),jn("close",r);break;case"iframe":case"object":case"embed":jn("load",r);break;case"video":case"audio":for(i=0;i<zh.length;i++)jn(zh[i],r);break;case"source":jn("error",r);break;case"img":case"image":case"link":jn("error",r),jn("load",r);break;case"details":jn("toggle",r);break;case"input":iw(r,s),jn("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},jn("invalid",r);break;case"textarea":ow(r,s),jn("invalid",r)}A1(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Gf(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Gf(r.textContent,a,t),i=["children",""+a]):fd.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&jn("scroll",r)}switch(n){case"input":Uf(r),sw(r,s,!0);break;case"textarea":Uf(r),aw(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Xp)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=B4(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[bo]=e,t[Nd]=r,h6(t,e,!1,!1),e.stateNode=t;e:{switch(o=E1(n,r),n){case"dialog":jn("cancel",t),jn("close",t),i=r;break;case"iframe":case"object":case"embed":jn("load",t),i=r;break;case"video":case"audio":for(i=0;i<zh.length;i++)jn(zh[i],t);i=r;break;case"source":jn("error",t),i=r;break;case"img":case"image":case"link":jn("error",t),jn("load",t),i=r;break;case"details":jn("toggle",t),i=r;break;case"input":iw(t,r),i=x1(t,r),jn("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Jn({},r,{value:void 0}),jn("invalid",t);break;case"textarea":ow(t,r),i=N1(t,r),jn("invalid",t);break;default:i=r}A1(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?H4(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&z4(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&pd(t,l):typeof l=="number"&&pd(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(fd.hasOwnProperty(s)?l!=null&&s==="onScroll"&&jn("scroll",t):l!=null&&ay(t,s,l,o))}switch(n){case"input":Uf(t),sw(t,r,!1);break;case"textarea":Uf(t),aw(t);break;case"option":r.value!=null&&t.setAttribute("value",""+vl(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?yu(t,!!r.multiple,s,!1):r.defaultValue!=null&&yu(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Xp)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return oi(e),null;case 6:if(t&&e.stateNode!=null)f6(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Fe(166));if(n=ec(Ad.current),ec(Eo.current),Kf(e)){if(r=e.stateNode,n=e.memoizedProps,r[bo]=e,(s=r.nodeValue!==n)&&(t=ds,t!==null))switch(t.tag){case 3:Gf(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Gf(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[bo]=e,e.stateNode=r}return oi(e),null;case 13:if(Mn(Qn),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Bn&&ls!==null&&e.mode&1&&!(e.flags&128))P3(),ju(),e.flags|=98560,s=!1;else if(s=Kf(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(Fe(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Fe(317));s[bo]=e}else ju(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;oi(e),s=!1}else Ks!==null&&(o2(Ks),Ks=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Qn.current&1?jr===0&&(jr=3):qy())),e.updateQueue!==null&&(e.flags|=4),oi(e),null);case 4:return Ou(),J1(t,e),t===null&&bd(e.stateNode.containerInfo),oi(e),null;case 10:return Ey(e.type._context),oi(e),null;case 17:return Hi(e.type)&&Jp(),oi(e),null;case 19:if(Mn(Qn),s=e.memoizedState,s===null)return oi(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Rh(s,!1);else{if(jr!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=sm(t),o!==null){for(e.flags|=128,Rh(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ln(Qn,Qn.current&1|2),e.child}t=t.sibling}s.tail!==null&&pr()>Fu&&(e.flags|=128,r=!0,Rh(s,!1),e.lanes=4194304)}else{if(!r)if(t=sm(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Rh(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Bn)return oi(e),null}else 2*pr()-s.renderingStartTime>Fu&&n!==1073741824&&(e.flags|=128,r=!0,Rh(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=pr(),e.sibling=null,n=Qn.current,Ln(Qn,r?n&1|2:n&1),e):(oi(e),null);case 22:case 23:return zy(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?as&1073741824&&(oi(e),e.subtreeFlags&6&&(e.flags|=8192)):oi(e),null;case 24:return null;case 25:return null}throw Error(Fe(156,e.tag))}function r8(t,e){switch(_y(e),e.tag){case 1:return Hi(e.type)&&Jp(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ou(),Mn(qi),Mn(vi),Py(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Cy(e),null;case 13:if(Mn(Qn),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Fe(340));ju()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Mn(Qn),null;case 4:return Ou(),null;case 10:return Ey(e.type._context),null;case 22:case 23:return zy(),null;case 24:return null;default:return null}}var Xf=!1,pi=!1,i8=typeof WeakSet=="function"?WeakSet:Set,st=null;function fu(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){sr(t,e,r)}else n.current=null}function Z1(t,e,n){try{n()}catch(r){sr(t,e,r)}}var Qw=!1;function s8(t,e){if(O1=Kp,t=v3(),xy(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,h=0,g=t,y=null;t:for(;;){for(var p;g!==n||i!==0&&g.nodeType!==3||(a=o+i),g!==s||r!==0&&g.nodeType!==3||(l=o+r),g.nodeType===3&&(o+=g.nodeValue.length),(p=g.firstChild)!==null;)y=g,g=p;for(;;){if(g===t)break t;if(y===n&&++c===i&&(a=o),y===s&&++h===r&&(l=o),(p=g.nextSibling)!==null)break;g=y,y=g.parentNode}g=p}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(M1={focusedElem:t,selectionRange:n},Kp=!1,st=e;st!==null;)if(e=st,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,st=t;else for(;st!==null;){e=st;try{var _=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(_!==null){var N=_.memoizedProps,C=_.memoizedState,x=e.stateNode,k=x.getSnapshotBeforeUpdate(e.elementType===e.type?N:Ws(e.type,N),C);x.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var R=e.stateNode.containerInfo;R.nodeType===1?R.textContent="":R.nodeType===9&&R.documentElement&&R.removeChild(R.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Fe(163))}}catch(j){sr(e,e.return,j)}if(t=e.sibling,t!==null){t.return=e.return,st=t;break}st=e.return}return _=Qw,Qw=!1,_}function td(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Z1(e,n,s)}i=i.next}while(i!==r)}}function Km(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function e2(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function p6(t){var e=t.alternate;e!==null&&(t.alternate=null,p6(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[bo],delete e[Nd],delete e[V1],delete e[BI],delete e[zI])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function m6(t){return t.tag===5||t.tag===3||t.tag===4}function Xw(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||m6(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function t2(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Xp));else if(r!==4&&(t=t.child,t!==null))for(t2(t,e,n),t=t.sibling;t!==null;)t2(t,e,n),t=t.sibling}function n2(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(n2(t,e,n),t=t.sibling;t!==null;)n2(t,e,n),t=t.sibling}var Kr=null,Gs=!1;function za(t,e,n){for(n=n.child;n!==null;)g6(t,e,n),n=n.sibling}function g6(t,e,n){if(Ao&&typeof Ao.onCommitFiberUnmount=="function")try{Ao.onCommitFiberUnmount(Vm,n)}catch{}switch(n.tag){case 5:pi||fu(n,e);case 6:var r=Kr,i=Gs;Kr=null,za(t,e,n),Kr=r,Gs=i,Kr!==null&&(Gs?(t=Kr,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Kr.removeChild(n.stateNode));break;case 18:Kr!==null&&(Gs?(t=Kr,n=n.stateNode,t.nodeType===8?d0(t.parentNode,n):t.nodeType===1&&d0(t,n),vd(t)):d0(Kr,n.stateNode));break;case 4:r=Kr,i=Gs,Kr=n.stateNode.containerInfo,Gs=!0,za(t,e,n),Kr=r,Gs=i;break;case 0:case 11:case 14:case 15:if(!pi&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Z1(n,e,o),i=i.next}while(i!==r)}za(t,e,n);break;case 1:if(!pi&&(fu(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){sr(n,e,a)}za(t,e,n);break;case 21:za(t,e,n);break;case 22:n.mode&1?(pi=(r=pi)||n.memoizedState!==null,za(t,e,n),pi=r):za(t,e,n);break;default:za(t,e,n)}}function Jw(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new i8),e.forEach(function(r){var i=p8.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Hs(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Kr=a.stateNode,Gs=!1;break e;case 3:Kr=a.stateNode.containerInfo,Gs=!0;break e;case 4:Kr=a.stateNode.containerInfo,Gs=!0;break e}a=a.return}if(Kr===null)throw Error(Fe(160));g6(s,o,i),Kr=null,Gs=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){sr(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)y6(e,t),e=e.sibling}function y6(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Hs(e,t),go(t),r&4){try{td(3,t,t.return),Km(3,t)}catch(N){sr(t,t.return,N)}try{td(5,t,t.return)}catch(N){sr(t,t.return,N)}}break;case 1:Hs(e,t),go(t),r&512&&n!==null&&fu(n,n.return);break;case 5:if(Hs(e,t),go(t),r&512&&n!==null&&fu(n,n.return),t.flags&32){var i=t.stateNode;try{pd(i,"")}catch(N){sr(t,t.return,N)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&U4(i,s),E1(a,o);var c=E1(a,s);for(o=0;o<l.length;o+=2){var h=l[o],g=l[o+1];h==="style"?H4(i,g):h==="dangerouslySetInnerHTML"?z4(i,g):h==="children"?pd(i,g):ay(i,h,g,c)}switch(a){case"input":b1(i,s);break;case"textarea":V4(i,s);break;case"select":var y=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var p=s.value;p!=null?yu(i,!!s.multiple,p,!1):y!==!!s.multiple&&(s.defaultValue!=null?yu(i,!!s.multiple,s.defaultValue,!0):yu(i,!!s.multiple,s.multiple?[]:"",!1))}i[Nd]=s}catch(N){sr(t,t.return,N)}}break;case 6:if(Hs(e,t),go(t),r&4){if(t.stateNode===null)throw Error(Fe(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(N){sr(t,t.return,N)}}break;case 3:if(Hs(e,t),go(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{vd(e.containerInfo)}catch(N){sr(t,t.return,N)}break;case 4:Hs(e,t),go(t);break;case 13:Hs(e,t),go(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Vy=pr())),r&4&&Jw(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(pi=(c=pi)||h,Hs(e,t),pi=c):Hs(e,t),go(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!h&&t.mode&1)for(st=t,h=t.child;h!==null;){for(g=st=h;st!==null;){switch(y=st,p=y.child,y.tag){case 0:case 11:case 14:case 15:td(4,y,y.return);break;case 1:fu(y,y.return);var _=y.stateNode;if(typeof _.componentWillUnmount=="function"){r=y,n=y.return;try{e=r,_.props=e.memoizedProps,_.state=e.memoizedState,_.componentWillUnmount()}catch(N){sr(r,n,N)}}break;case 5:fu(y,y.return);break;case 22:if(y.memoizedState!==null){ex(g);continue}}p!==null?(p.return=y,st=p):ex(g)}h=h.sibling}e:for(h=null,g=t;;){if(g.tag===5){if(h===null){h=g;try{i=g.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=g.stateNode,l=g.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=q4("display",o))}catch(N){sr(t,t.return,N)}}}else if(g.tag===6){if(h===null)try{g.stateNode.nodeValue=c?"":g.memoizedProps}catch(N){sr(t,t.return,N)}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===t)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===t)break e;for(;g.sibling===null;){if(g.return===null||g.return===t)break e;h===g&&(h=null),g=g.return}h===g&&(h=null),g.sibling.return=g.return,g=g.sibling}}break;case 19:Hs(e,t),go(t),r&4&&Jw(t);break;case 21:break;default:Hs(e,t),go(t)}}function go(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(m6(n)){var r=n;break e}n=n.return}throw Error(Fe(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(pd(i,""),r.flags&=-33);var s=Xw(t);n2(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=Xw(t);t2(t,a,o);break;default:throw Error(Fe(161))}}catch(l){sr(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function o8(t,e,n){st=t,v6(t)}function v6(t,e,n){for(var r=(t.mode&1)!==0;st!==null;){var i=st,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Xf;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||pi;a=Xf;var c=pi;if(Xf=o,(pi=l)&&!c)for(st=i;st!==null;)o=st,l=o.child,o.tag===22&&o.memoizedState!==null?tx(i):l!==null?(l.return=o,st=l):tx(i);for(;s!==null;)st=s,v6(s),s=s.sibling;st=i,Xf=a,pi=c}Zw(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,st=s):Zw(t)}}function Zw(t){for(;st!==null;){var e=st;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:pi||Km(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!pi)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Ws(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&Mw(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Mw(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var h=c.memoizedState;if(h!==null){var g=h.dehydrated;g!==null&&vd(g)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Fe(163))}pi||e.flags&512&&e2(e)}catch(y){sr(e,e.return,y)}}if(e===t){st=null;break}if(n=e.sibling,n!==null){n.return=e.return,st=n;break}st=e.return}}function ex(t){for(;st!==null;){var e=st;if(e===t){st=null;break}var n=e.sibling;if(n!==null){n.return=e.return,st=n;break}st=e.return}}function tx(t){for(;st!==null;){var e=st;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Km(4,e)}catch(l){sr(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){sr(e,i,l)}}var s=e.return;try{e2(e)}catch(l){sr(e,s,l)}break;case 5:var o=e.return;try{e2(e)}catch(l){sr(e,o,l)}}}catch(l){sr(e,e.return,l)}if(e===t){st=null;break}var a=e.sibling;if(a!==null){a.return=e.return,st=a;break}st=e.return}}var a8=Math.ceil,lm=va.ReactCurrentDispatcher,Fy=va.ReactCurrentOwner,Ls=va.ReactCurrentBatchConfig,on=0,Br=null,xr=null,Jr=0,as=0,pu=El(0),jr=0,Id=null,hc=0,Ym=0,Uy=0,nd=null,Vi=null,Vy=0,Fu=1/0,Ko=null,cm=!1,r2=null,dl=null,Jf=!1,nl=null,um=0,rd=0,i2=null,Ap=-1,Ep=0;function Ci(){return on&6?pr():Ap!==-1?Ap:Ap=pr()}function fl(t){return t.mode&1?on&2&&Jr!==0?Jr&-Jr:HI.transition!==null?(Ep===0&&(Ep=n3()),Ep):(t=wn,t!==0||(t=window.event,t=t===void 0?16:c3(t.type)),t):1}function Qs(t,e,n,r){if(50<rd)throw rd=0,i2=null,Error(Fe(185));Qd(t,n,r),(!(on&2)||t!==Br)&&(t===Br&&(!(on&2)&&(Ym|=n),jr===4&&Ya(t,Jr)),$i(t,r),n===1&&on===0&&!(e.mode&1)&&(Fu=pr()+500,$m&&Tl()))}function $i(t,e){var n=t.callbackNode;Hk(t,e);var r=Gp(t,t===Br?Jr:0);if(r===0)n!==null&&uw(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&uw(n),e===1)t.tag===0?qI(nx.bind(null,t)):k3(nx.bind(null,t)),UI(function(){!(on&6)&&Tl()}),n=null;else{switch(r3(r)){case 1:n=dy;break;case 4:n=e3;break;case 16:n=Wp;break;case 536870912:n=t3;break;default:n=Wp}n=E6(n,w6.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function w6(t,e){if(Ap=-1,Ep=0,on&6)throw Error(Fe(327));var n=t.callbackNode;if(_u()&&t.callbackNode!==n)return null;var r=Gp(t,t===Br?Jr:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=hm(t,r);else{e=r;var i=on;on|=2;var s=b6();(Br!==t||Jr!==e)&&(Ko=null,Fu=pr()+500,rc(t,e));do try{u8();break}catch(a){x6(t,a)}while(!0);Ay(),lm.current=s,on=i,xr!==null?e=0:(Br=null,Jr=0,e=jr)}if(e!==0){if(e===2&&(i=P1(t),i!==0&&(r=i,e=s2(t,i))),e===1)throw n=Id,rc(t,0),Ya(t,r),$i(t,pr()),n;if(e===6)Ya(t,r);else{if(i=t.current.alternate,!(r&30)&&!l8(i)&&(e=hm(t,r),e===2&&(s=P1(t),s!==0&&(r=s,e=s2(t,s))),e===1))throw n=Id,rc(t,0),Ya(t,r),$i(t,pr()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(Fe(345));case 2:Kl(t,Vi,Ko);break;case 3:if(Ya(t,r),(r&130023424)===r&&(e=Vy+500-pr(),10<e)){if(Gp(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Ci(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=U1(Kl.bind(null,t,Vi,Ko),e);break}Kl(t,Vi,Ko);break;case 4:if(Ya(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Ys(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=pr()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*a8(r/1960))-r,10<r){t.timeoutHandle=U1(Kl.bind(null,t,Vi,Ko),r);break}Kl(t,Vi,Ko);break;case 5:Kl(t,Vi,Ko);break;default:throw Error(Fe(329))}}}return $i(t,pr()),t.callbackNode===n?w6.bind(null,t):null}function s2(t,e){var n=nd;return t.current.memoizedState.isDehydrated&&(rc(t,e).flags|=256),t=hm(t,e),t!==2&&(e=Vi,Vi=n,e!==null&&o2(e)),t}function o2(t){Vi===null?Vi=t:Vi.push.apply(Vi,t)}function l8(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Js(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ya(t,e){for(e&=~Uy,e&=~Ym,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Ys(e),r=1<<n;t[n]=-1,e&=~r}}function nx(t){if(on&6)throw Error(Fe(327));_u();var e=Gp(t,0);if(!(e&1))return $i(t,pr()),null;var n=hm(t,e);if(t.tag!==0&&n===2){var r=P1(t);r!==0&&(e=r,n=s2(t,r))}if(n===1)throw n=Id,rc(t,0),Ya(t,e),$i(t,pr()),n;if(n===6)throw Error(Fe(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Kl(t,Vi,Ko),$i(t,pr()),null}function By(t,e){var n=on;on|=1;try{return t(e)}finally{on=n,on===0&&(Fu=pr()+500,$m&&Tl())}}function dc(t){nl!==null&&nl.tag===0&&!(on&6)&&_u();var e=on;on|=1;var n=Ls.transition,r=wn;try{if(Ls.transition=null,wn=1,t)return t()}finally{wn=r,Ls.transition=n,on=e,!(on&6)&&Tl()}}function zy(){as=pu.current,Mn(pu)}function rc(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,FI(n)),xr!==null)for(n=xr.return;n!==null;){var r=n;switch(_y(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Jp();break;case 3:Ou(),Mn(qi),Mn(vi),Py();break;case 5:Cy(r);break;case 4:Ou();break;case 13:Mn(Qn);break;case 19:Mn(Qn);break;case 10:Ey(r.type._context);break;case 22:case 23:zy()}n=n.return}if(Br=t,xr=t=pl(t.current,null),Jr=as=e,jr=0,Id=null,Uy=Ym=hc=0,Vi=nd=null,Zl!==null){for(e=0;e<Zl.length;e++)if(n=Zl[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Zl=null}return t}function x6(t,e){do{var n=xr;try{if(Ay(),_p.current=am,om){for(var r=Xn.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}om=!1}if(uc=0,Ur=Rr=Xn=null,ed=!1,Ed=0,Fy.current=null,n===null||n.return===null){jr=1,Id=e,xr=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=Jr,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,h=a,g=h.tag;if(!(h.mode&1)&&(g===0||g===11||g===15)){var y=h.alternate;y?(h.updateQueue=y.updateQueue,h.memoizedState=y.memoizedState,h.lanes=y.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=qw(o);if(p!==null){p.flags&=-257,Hw(p,o,a,s,e),p.mode&1&&zw(s,c,e),e=p,l=c;var _=e.updateQueue;if(_===null){var N=new Set;N.add(l),e.updateQueue=N}else _.add(l);break e}else{if(!(e&1)){zw(s,c,e),qy();break e}l=Error(Fe(426))}}else if(Bn&&a.mode&1){var C=qw(o);if(C!==null){!(C.flags&65536)&&(C.flags|=256),Hw(C,o,a,s,e),Ny(Mu(l,a));break e}}s=l=Mu(l,a),jr!==4&&(jr=2),nd===null?nd=[s]:nd.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var x=r6(s,l,e);Ow(s,x);break e;case 1:a=l;var k=s.type,R=s.stateNode;if(!(s.flags&128)&&(typeof k.getDerivedStateFromError=="function"||R!==null&&typeof R.componentDidCatch=="function"&&(dl===null||!dl.has(R)))){s.flags|=65536,e&=-e,s.lanes|=e;var j=i6(s,a,e);Ow(s,j);break e}}s=s.return}while(s!==null)}N6(n)}catch(q){e=q,xr===n&&n!==null&&(xr=n=n.return);continue}break}while(!0)}function b6(){var t=lm.current;return lm.current=am,t===null?am:t}function qy(){(jr===0||jr===3||jr===2)&&(jr=4),Br===null||!(hc&268435455)&&!(Ym&268435455)||Ya(Br,Jr)}function hm(t,e){var n=on;on|=2;var r=b6();(Br!==t||Jr!==e)&&(Ko=null,rc(t,e));do try{c8();break}catch(i){x6(t,i)}while(!0);if(Ay(),on=n,lm.current=r,xr!==null)throw Error(Fe(261));return Br=null,Jr=0,jr}function c8(){for(;xr!==null;)_6(xr)}function u8(){for(;xr!==null&&!Dk();)_6(xr)}function _6(t){var e=A6(t.alternate,t,as);t.memoizedProps=t.pendingProps,e===null?N6(t):xr=e,Fy.current=null}function N6(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=r8(n,e),n!==null){n.flags&=32767,xr=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{jr=6,xr=null;return}}else if(n=n8(n,e,as),n!==null){xr=n;return}if(e=e.sibling,e!==null){xr=e;return}xr=e=t}while(e!==null);jr===0&&(jr=5)}function Kl(t,e,n){var r=wn,i=Ls.transition;try{Ls.transition=null,wn=1,h8(t,e,n,r)}finally{Ls.transition=i,wn=r}return null}function h8(t,e,n,r){do _u();while(nl!==null);if(on&6)throw Error(Fe(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Fe(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if($k(t,s),t===Br&&(xr=Br=null,Jr=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Jf||(Jf=!0,E6(Wp,function(){return _u(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Ls.transition,Ls.transition=null;var o=wn;wn=1;var a=on;on|=4,Fy.current=null,s8(t,n),y6(n,t),PI(M1),Kp=!!O1,M1=O1=null,t.current=n,o8(n),Ok(),on=a,wn=o,Ls.transition=s}else t.current=n;if(Jf&&(Jf=!1,nl=t,um=i),s=t.pendingLanes,s===0&&(dl=null),Uk(n.stateNode),$i(t,pr()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(cm)throw cm=!1,t=r2,r2=null,t;return um&1&&t.tag!==0&&_u(),s=t.pendingLanes,s&1?t===i2?rd++:(rd=0,i2=t):rd=0,Tl(),null}function _u(){if(nl!==null){var t=r3(um),e=Ls.transition,n=wn;try{if(Ls.transition=null,wn=16>t?16:t,nl===null)var r=!1;else{if(t=nl,nl=null,um=0,on&6)throw Error(Fe(331));var i=on;for(on|=4,st=t.current;st!==null;){var s=st,o=s.child;if(st.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(st=c;st!==null;){var h=st;switch(h.tag){case 0:case 11:case 15:td(8,h,s)}var g=h.child;if(g!==null)g.return=h,st=g;else for(;st!==null;){h=st;var y=h.sibling,p=h.return;if(p6(h),h===c){st=null;break}if(y!==null){y.return=p,st=y;break}st=p}}}var _=s.alternate;if(_!==null){var N=_.child;if(N!==null){_.child=null;do{var C=N.sibling;N.sibling=null,N=C}while(N!==null)}}st=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,st=o;else e:for(;st!==null;){if(s=st,s.flags&2048)switch(s.tag){case 0:case 11:case 15:td(9,s,s.return)}var x=s.sibling;if(x!==null){x.return=s.return,st=x;break e}st=s.return}}var k=t.current;for(st=k;st!==null;){o=st;var R=o.child;if(o.subtreeFlags&2064&&R!==null)R.return=o,st=R;else e:for(o=k;st!==null;){if(a=st,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Km(9,a)}}catch(q){sr(a,a.return,q)}if(a===o){st=null;break e}var j=a.sibling;if(j!==null){j.return=a.return,st=j;break e}st=a.return}}if(on=i,Tl(),Ao&&typeof Ao.onPostCommitFiberRoot=="function")try{Ao.onPostCommitFiberRoot(Vm,t)}catch{}r=!0}return r}finally{wn=n,Ls.transition=e}}return!1}function rx(t,e,n){e=Mu(n,e),e=r6(t,e,1),t=hl(t,e,1),e=Ci(),t!==null&&(Qd(t,1,e),$i(t,e))}function sr(t,e,n){if(t.tag===3)rx(t,t,n);else for(;e!==null;){if(e.tag===3){rx(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(dl===null||!dl.has(r))){t=Mu(n,t),t=i6(e,t,1),e=hl(e,t,1),t=Ci(),e!==null&&(Qd(e,1,t),$i(e,t));break}}e=e.return}}function d8(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Ci(),t.pingedLanes|=t.suspendedLanes&n,Br===t&&(Jr&n)===n&&(jr===4||jr===3&&(Jr&130023424)===Jr&&500>pr()-Vy?rc(t,0):Uy|=n),$i(t,e)}function S6(t,e){e===0&&(t.mode&1?(e=zf,zf<<=1,!(zf&130023424)&&(zf=4194304)):e=1);var n=Ci();t=ha(t,e),t!==null&&(Qd(t,e,n),$i(t,n))}function f8(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),S6(t,n)}function p8(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Fe(314))}r!==null&&r.delete(e),S6(t,n)}var A6;A6=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||qi.current)zi=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return zi=!1,t8(t,e,n);zi=!!(t.flags&131072)}else zi=!1,Bn&&e.flags&1048576&&I3(e,tm,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Sp(t,e),t=e.pendingProps;var i=Ru(e,vi.current);bu(e,n),i=Ry(null,e,r,t,i,n);var s=jy();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Hi(r)?(s=!0,Zp(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,ky(e),i.updater=Gm,e.stateNode=i,i._reactInternals=e,W1(e,r,t,n),e=Y1(null,e,r,!0,s,n)):(e.tag=0,Bn&&s&&by(e),ki(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Sp(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=g8(r),t=Ws(r,t),i){case 0:e=K1(null,e,r,t,n);break e;case 1:e=Gw(null,e,r,t,n);break e;case 11:e=$w(null,e,r,t,n);break e;case 14:e=Ww(null,e,r,Ws(r.type,t),n);break e}throw Error(Fe(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ws(r,i),K1(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ws(r,i),Gw(t,e,r,i,n);case 3:e:{if(l6(e),t===null)throw Error(Fe(387));r=e.pendingProps,s=e.memoizedState,i=s.element,D3(t,e),im(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Mu(Error(Fe(423)),e),e=Kw(t,e,r,n,i);break e}else if(r!==i){i=Mu(Error(Fe(424)),e),e=Kw(t,e,r,n,i);break e}else for(ls=ul(e.stateNode.containerInfo.firstChild),ds=e,Bn=!0,Ks=null,n=R3(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ju(),r===i){e=da(t,e,n);break e}ki(t,e,r,n)}e=e.child}return e;case 5:return O3(e),t===null&&q1(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,F1(r,i)?o=null:s!==null&&F1(r,s)&&(e.flags|=32),a6(t,e),ki(t,e,o,n),e.child;case 6:return t===null&&q1(e),null;case 13:return c6(t,e,n);case 4:return Iy(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Du(e,null,r,n):ki(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ws(r,i),$w(t,e,r,i,n);case 7:return ki(t,e,e.pendingProps,n),e.child;case 8:return ki(t,e,e.pendingProps.children,n),e.child;case 12:return ki(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Ln(nm,r._currentValue),r._currentValue=o,s!==null)if(Js(s.value,o)){if(s.children===i.children&&!qi.current){e=da(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=ia(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var h=c.pending;h===null?l.next=l:(l.next=h.next,h.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),H1(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(Fe(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),H1(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}ki(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,bu(e,n),i=Rs(i),r=r(i),e.flags|=1,ki(t,e,r,n),e.child;case 14:return r=e.type,i=Ws(r,e.pendingProps),i=Ws(r.type,i),Ww(t,e,r,i,n);case 15:return s6(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ws(r,i),Sp(t,e),e.tag=1,Hi(r)?(t=!0,Zp(e)):t=!1,bu(e,n),n6(e,r,i),W1(e,r,i,n),Y1(null,e,r,!0,t,n);case 19:return u6(t,e,n);case 22:return o6(t,e,n)}throw Error(Fe(156,e.tag))};function E6(t,e){return Z4(t,e)}function m8(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ps(t,e,n,r){return new m8(t,e,n,r)}function Hy(t){return t=t.prototype,!(!t||!t.isReactComponent)}function g8(t){if(typeof t=="function")return Hy(t)?1:0;if(t!=null){if(t=t.$$typeof,t===cy)return 11;if(t===uy)return 14}return 2}function pl(t,e){var n=t.alternate;return n===null?(n=Ps(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Tp(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")Hy(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case iu:return ic(n.children,i,s,e);case ly:o=8,i|=8;break;case g1:return t=Ps(12,n,e,i|2),t.elementType=g1,t.lanes=s,t;case y1:return t=Ps(13,n,e,i),t.elementType=y1,t.lanes=s,t;case v1:return t=Ps(19,n,e,i),t.elementType=v1,t.lanes=s,t;case O4:return Qm(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case j4:o=10;break e;case D4:o=9;break e;case cy:o=11;break e;case uy:o=14;break e;case Wa:o=16,r=null;break e}throw Error(Fe(130,t==null?t:typeof t,""))}return e=Ps(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function ic(t,e,n,r){return t=Ps(7,t,r,e),t.lanes=n,t}function Qm(t,e,n,r){return t=Ps(22,t,r,e),t.elementType=O4,t.lanes=n,t.stateNode={isHidden:!1},t}function x0(t,e,n){return t=Ps(6,t,null,e),t.lanes=n,t}function b0(t,e,n){return e=Ps(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function y8(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=t0(0),this.expirationTimes=t0(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=t0(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function $y(t,e,n,r,i,s,o,a,l){return t=new y8(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Ps(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},ky(s),t}function v8(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ru,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function T6(t){if(!t)return wl;t=t._reactInternals;e:{if(Ec(t)!==t||t.tag!==1)throw Error(Fe(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Hi(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Fe(171))}if(t.tag===1){var n=t.type;if(Hi(n))return T3(t,n,e)}return e}function k6(t,e,n,r,i,s,o,a,l){return t=$y(n,r,!0,t,i,s,o,a,l),t.context=T6(null),n=t.current,r=Ci(),i=fl(n),s=ia(r,i),s.callback=e??null,hl(n,s,i),t.current.lanes=i,Qd(t,i,r),$i(t,r),t}function Xm(t,e,n,r){var i=e.current,s=Ci(),o=fl(i);return n=T6(n),e.context===null?e.context=n:e.pendingContext=n,e=ia(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=hl(i,e,o),t!==null&&(Qs(t,i,o,s),bp(t,i,o)),o}function dm(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function ix(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Wy(t,e){ix(t,e),(t=t.alternate)&&ix(t,e)}function w8(){return null}var I6=typeof reportError=="function"?reportError:function(t){console.error(t)};function Gy(t){this._internalRoot=t}Jm.prototype.render=Gy.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Fe(409));Xm(t,e,null,null)};Jm.prototype.unmount=Gy.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;dc(function(){Xm(null,t,null,null)}),e[ua]=null}};function Jm(t){this._internalRoot=t}Jm.prototype.unstable_scheduleHydration=function(t){if(t){var e=o3();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ka.length&&e!==0&&e<Ka[n].priority;n++);Ka.splice(n,0,t),n===0&&l3(t)}};function Ky(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Zm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function sx(){}function x8(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=dm(o);s.call(c)}}var o=k6(e,r,t,0,null,!1,!1,"",sx);return t._reactRootContainer=o,t[ua]=o.current,bd(t.nodeType===8?t.parentNode:t),dc(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=dm(l);a.call(c)}}var l=$y(t,0,!1,null,null,!1,!1,"",sx);return t._reactRootContainer=l,t[ua]=l.current,bd(t.nodeType===8?t.parentNode:t),dc(function(){Xm(e,l,n,r)}),l}function eg(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=dm(o);a.call(l)}}Xm(e,o,t,i)}else o=x8(n,e,t,i,r);return dm(o)}i3=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Bh(e.pendingLanes);n!==0&&(fy(e,n|1),$i(e,pr()),!(on&6)&&(Fu=pr()+500,Tl()))}break;case 13:dc(function(){var r=ha(t,1);if(r!==null){var i=Ci();Qs(r,t,1,i)}}),Wy(t,1)}};py=function(t){if(t.tag===13){var e=ha(t,134217728);if(e!==null){var n=Ci();Qs(e,t,134217728,n)}Wy(t,134217728)}};s3=function(t){if(t.tag===13){var e=fl(t),n=ha(t,e);if(n!==null){var r=Ci();Qs(n,t,e,r)}Wy(t,e)}};o3=function(){return wn};a3=function(t,e){var n=wn;try{return wn=t,e()}finally{wn=n}};k1=function(t,e,n){switch(e){case"input":if(b1(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Hm(r);if(!i)throw Error(Fe(90));F4(r),b1(r,i)}}}break;case"textarea":V4(t,n);break;case"select":e=n.value,e!=null&&yu(t,!!n.multiple,e,!1)}};G4=By;K4=dc;var b8={usingClientEntryPoint:!1,Events:[Jd,lu,Hm,$4,W4,By]},jh={findFiberByHostInstance:Jl,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},_8={bundleType:jh.bundleType,version:jh.version,rendererPackageName:jh.rendererPackageName,rendererConfig:jh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:va.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=X4(t),t===null?null:t.stateNode},findFiberByHostInstance:jh.findFiberByHostInstance||w8,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Zf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Zf.isDisabled&&Zf.supportsFiber)try{Vm=Zf.inject(_8),Ao=Zf}catch{}}ps.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=b8;ps.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ky(e))throw Error(Fe(200));return v8(t,e,null,n)};ps.createRoot=function(t,e){if(!Ky(t))throw Error(Fe(299));var n=!1,r="",i=I6;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=$y(t,1,!1,null,null,n,!1,r,i),t[ua]=e.current,bd(t.nodeType===8?t.parentNode:t),new Gy(e)};ps.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Fe(188)):(t=Object.keys(t).join(","),Error(Fe(268,t)));return t=X4(e),t=t===null?null:t.stateNode,t};ps.flushSync=function(t){return dc(t)};ps.hydrate=function(t,e,n){if(!Zm(e))throw Error(Fe(200));return eg(null,t,e,!0,n)};ps.hydrateRoot=function(t,e,n){if(!Ky(t))throw Error(Fe(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=I6;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=k6(e,null,t,1,n??null,i,!1,s,o),t[ua]=e.current,bd(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Jm(e)};ps.render=function(t,e,n){if(!Zm(e))throw Error(Fe(200));return eg(null,t,e,!1,n)};ps.unmountComponentAtNode=function(t){if(!Zm(t))throw Error(Fe(40));return t._reactRootContainer?(dc(function(){eg(null,null,t,!1,function(){t._reactRootContainer=null,t[ua]=null})}),!0):!1};ps.unstable_batchedUpdates=By;ps.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Zm(n))throw Error(Fe(200));if(t==null||t._reactInternals===void 0)throw Error(Fe(38));return eg(t,e,n,!1,r)};ps.version="18.3.1-next-f1338f8080-20240426";function C6(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(C6)}catch(t){console.error(t)}}C6(),C4.exports=ps;var N8=C4.exports,P6,ox=N8;P6=ox.createRoot,ox.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Cd(){return Cd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Cd.apply(this,arguments)}var rl;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(rl||(rl={}));const ax="popstate";function S8(t){t===void 0&&(t={});function e(i,s){let{pathname:o="/",search:a="",hash:l=""}=Tc(i.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),a2("",{pathname:o,search:a,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(i,s){let o=i.document.querySelector("base"),a="";if(o&&o.getAttribute("href")){let l=i.location.href,c=l.indexOf("#");a=c===-1?l:l.slice(0,c)}return a+"#"+(typeof s=="string"?s:fm(s))}function r(i,s){tg(i.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(s)+")")}return E8(e,n,r,t)}function vr(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function tg(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function A8(){return Math.random().toString(36).substr(2,8)}function lx(t,e){return{usr:t.state,key:t.key,idx:e}}function a2(t,e,n,r){return n===void 0&&(n=null),Cd({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Tc(e):e,{state:n,key:e&&e.key||r||A8()})}function fm(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Tc(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function E8(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=rl.Pop,l=null,c=h();c==null&&(c=0,o.replaceState(Cd({},o.state,{idx:c}),""));function h(){return(o.state||{idx:null}).idx}function g(){a=rl.Pop;let C=h(),x=C==null?null:C-c;c=C,l&&l({action:a,location:N.location,delta:x})}function y(C,x){a=rl.Push;let k=a2(N.location,C,x);n&&n(k,C),c=h()+1;let R=lx(k,c),j=N.createHref(k);try{o.pushState(R,"",j)}catch(q){if(q instanceof DOMException&&q.name==="DataCloneError")throw q;i.location.assign(j)}s&&l&&l({action:a,location:N.location,delta:1})}function p(C,x){a=rl.Replace;let k=a2(N.location,C,x);n&&n(k,C),c=h();let R=lx(k,c),j=N.createHref(k);o.replaceState(R,"",j),s&&l&&l({action:a,location:N.location,delta:0})}function _(C){let x=i.location.origin!=="null"?i.location.origin:i.location.href,k=typeof C=="string"?C:fm(C);return k=k.replace(/ $/,"%20"),vr(x,"No window.location.(origin|href) available to create URL for href: "+k),new URL(k,x)}let N={get action(){return a},get location(){return t(i,o)},listen(C){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(ax,g),l=C,()=>{i.removeEventListener(ax,g),l=null}},createHref(C){return e(i,C)},createURL:_,encodeLocation(C){let x=_(C);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:y,replace:p,go(C){return o.go(C)}};return N}var cx;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(cx||(cx={}));function T8(t,e,n){return n===void 0&&(n="/"),k8(t,e,n)}function k8(t,e,n,r){let i=typeof e=="string"?Tc(e):e,s=Yy(i.pathname||"/",n);if(s==null)return null;let o=L6(t);I8(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=B8(s);a=F8(o[l],c)}return a}function L6(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(vr(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=ml([r,l.relativePath]),h=n.concat(l);s.children&&s.children.length>0&&(vr(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),L6(s.children,e,h,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:O8(c,s.index),routesMeta:h})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of R6(s.path))i(s,o,l)}),e}function R6(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=R6(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function I8(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:M8(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const C8=/^:[\w-]+$/,P8=3,L8=2,R8=1,j8=10,D8=-2,ux=t=>t==="*";function O8(t,e){let n=t.split("/"),r=n.length;return n.some(ux)&&(r+=D8),e&&(r+=L8),n.filter(i=>!ux(i)).reduce((i,s)=>i+(C8.test(s)?P8:s===""?R8:j8),r)}function M8(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function F8(t,e,n){let{routesMeta:r}=t,i={},s="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,h=s==="/"?e:e.slice(s.length)||"/",g=U8({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},h),y=l.route;if(!g)return null;Object.assign(i,g.params),o.push({params:i,pathname:ml([s,g.pathname]),pathnameBase:W8(ml([s,g.pathnameBase])),route:y}),g.pathnameBase!=="/"&&(s=ml([s,g.pathnameBase]))}return o}function U8(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=V8(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((c,h,g)=>{let{paramName:y,isOptional:p}=h;if(y==="*"){let N=a[g]||"";o=s.slice(0,s.length-N.length).replace(/(.)\/+$/,"$1")}const _=a[g];return p&&!_?c[y]=void 0:c[y]=(_||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:t}}function V8(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),tg(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function B8(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return tg(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Yy(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const z8=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,q8=t=>z8.test(t);function H8(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Tc(t):t,s;if(n)if(q8(n))s=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),tg(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+n))}n.startsWith("/")?s=hx(n.substring(1),"/"):s=hx(n,e)}else s=e;return{pathname:s,search:G8(r),hash:K8(i)}}function hx(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function _0(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function $8(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Qy(t,e){let n=$8(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Xy(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=Tc(t):(i=Cd({},t),vr(!i.pathname||!i.pathname.includes("?"),_0("?","pathname","search",i)),vr(!i.pathname||!i.pathname.includes("#"),_0("#","pathname","hash",i)),vr(!i.search||!i.search.includes("#"),_0("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let g=e.length-1;if(!r&&o.startsWith("..")){let y=o.split("/");for(;y[0]==="..";)y.shift(),g-=1;i.pathname=y.join("/")}a=g>=0?e[g]:"/"}let l=H8(i,a),c=o&&o!=="/"&&o.endsWith("/"),h=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||h)&&(l.pathname+="/"),l}const ml=t=>t.join("/").replace(/\/\/+/g,"/"),W8=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),G8=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,K8=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Y8(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const j6=["post","put","patch","delete"];new Set(j6);const Q8=["get",...j6];new Set(Q8);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Pd(){return Pd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Pd.apply(this,arguments)}const Jy=se.createContext(null),X8=se.createContext(null),kl=se.createContext(null),ng=se.createContext(null),wa=se.createContext({outlet:null,matches:[],isDataRoute:!1}),D6=se.createContext(null);function J8(t,e){let{relative:n}=e===void 0?{}:e;Xu()||vr(!1);let{basename:r,navigator:i}=se.useContext(kl),{hash:s,pathname:o,search:a}=M6(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:ml([r,o])),i.createHref({pathname:l,search:a,hash:s})}function Xu(){return se.useContext(ng)!=null}function Ju(){return Xu()||vr(!1),se.useContext(ng).location}function O6(t){se.useContext(kl).static||se.useLayoutEffect(t)}function xi(){let{isDataRoute:t}=se.useContext(wa);return t?hC():Z8()}function Z8(){Xu()||vr(!1);let t=se.useContext(Jy),{basename:e,future:n,navigator:r}=se.useContext(kl),{matches:i}=se.useContext(wa),{pathname:s}=Ju(),o=JSON.stringify(Qy(i,n.v7_relativeSplatPath)),a=se.useRef(!1);return O6(()=>{a.current=!0}),se.useCallback(function(c,h){if(h===void 0&&(h={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let g=Xy(c,JSON.parse(o),s,h.relative==="path");t==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:ml([e,g.pathname])),(h.replace?r.replace:r.push)(g,h.state,h)},[e,r,o,s,t])}function rg(){let{matches:t}=se.useContext(wa),e=t[t.length-1];return e?e.params:{}}function M6(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=se.useContext(kl),{matches:i}=se.useContext(wa),{pathname:s}=Ju(),o=JSON.stringify(Qy(i,r.v7_relativeSplatPath));return se.useMemo(()=>Xy(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function eC(t,e){return tC(t,e)}function tC(t,e,n,r){Xu()||vr(!1);let{navigator:i}=se.useContext(kl),{matches:s}=se.useContext(wa),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=Ju(),h;if(e){var g;let C=typeof e=="string"?Tc(e):e;l==="/"||(g=C.pathname)!=null&&g.startsWith(l)||vr(!1),h=C}else h=c;let y=h.pathname||"/",p=y;if(l!=="/"){let C=l.replace(/^\//,"").split("/");p="/"+y.replace(/^\//,"").split("/").slice(C.length).join("/")}let _=T8(t,{pathname:p}),N=oC(_&&_.map(C=>Object.assign({},C,{params:Object.assign({},a,C.params),pathname:ml([l,i.encodeLocation?i.encodeLocation(C.pathname).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?l:ml([l,i.encodeLocation?i.encodeLocation(C.pathnameBase).pathname:C.pathnameBase])})),s,n,r);return e&&N?se.createElement(ng.Provider,{value:{location:Pd({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:rl.Pop}},N):N}function nC(){let t=uC(),e=Y8(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return se.createElement(se.Fragment,null,se.createElement("h2",null,"Unexpected Application Error!"),se.createElement("h3",{style:{fontStyle:"italic"}},e),n?se.createElement("pre",{style:i},n):null,null)}const rC=se.createElement(nC,null);class iC extends se.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?se.createElement(wa.Provider,{value:this.props.routeContext},se.createElement(D6.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function sC(t){let{routeContext:e,match:n,children:r}=t,i=se.useContext(Jy);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),se.createElement(wa.Provider,{value:e},r)}function oC(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let h=o.findIndex(g=>g.route.id&&(a==null?void 0:a[g.route.id])!==void 0);h>=0||vr(!1),o=o.slice(0,Math.min(o.length,h+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let h=0;h<o.length;h++){let g=o[h];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(c=h),g.route.id){let{loaderData:y,errors:p}=n,_=g.route.loader&&y[g.route.id]===void 0&&(!p||p[g.route.id]===void 0);if(g.route.lazy||_){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((h,g,y)=>{let p,_=!1,N=null,C=null;n&&(p=a&&g.route.id?a[g.route.id]:void 0,N=g.route.errorElement||rC,l&&(c<0&&y===0?(dC("route-fallback"),_=!0,C=null):c===y&&(_=!0,C=g.route.hydrateFallbackElement||null)));let x=e.concat(o.slice(0,y+1)),k=()=>{let R;return p?R=N:_?R=C:g.route.Component?R=se.createElement(g.route.Component,null):g.route.element?R=g.route.element:R=h,se.createElement(sC,{match:g,routeContext:{outlet:h,matches:x,isDataRoute:n!=null},children:R})};return n&&(g.route.ErrorBoundary||g.route.errorElement||y===0)?se.createElement(iC,{location:n.location,revalidation:n.revalidation,component:N,error:p,children:k(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):k()},null)}var F6=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(F6||{}),U6=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(U6||{});function aC(t){let e=se.useContext(Jy);return e||vr(!1),e}function lC(t){let e=se.useContext(X8);return e||vr(!1),e}function cC(t){let e=se.useContext(wa);return e||vr(!1),e}function V6(t){let e=cC(),n=e.matches[e.matches.length-1];return n.route.id||vr(!1),n.route.id}function uC(){var t;let e=se.useContext(D6),n=lC(),r=V6();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function hC(){let{router:t}=aC(F6.UseNavigateStable),e=V6(U6.UseNavigateStable),n=se.useRef(!1);return O6(()=>{n.current=!0}),se.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,Pd({fromRouteId:e},s)))},[t,e])}const dx={};function dC(t,e,n){dx[t]||(dx[t]=!0)}function fC(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function pC(t){let{to:e,replace:n,state:r,relative:i}=t;Xu()||vr(!1);let{future:s,static:o}=se.useContext(kl),{matches:a}=se.useContext(wa),{pathname:l}=Ju(),c=xi(),h=Xy(e,Qy(a,s.v7_relativeSplatPath),l,i==="path"),g=JSON.stringify(h);return se.useEffect(()=>c(JSON.parse(g),{replace:n,state:r,relative:i}),[c,g,i,n,r]),null}function Yn(t){vr(!1)}function mC(t){let{basename:e="/",children:n=null,location:r,navigationType:i=rl.Pop,navigator:s,static:o=!1,future:a}=t;Xu()&&vr(!1);let l=e.replace(/^\/*/,"/"),c=se.useMemo(()=>({basename:l,navigator:s,static:o,future:Pd({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof r=="string"&&(r=Tc(r));let{pathname:h="/",search:g="",hash:y="",state:p=null,key:_="default"}=r,N=se.useMemo(()=>{let C=Yy(h,l);return C==null?null:{location:{pathname:C,search:g,hash:y,state:p,key:_},navigationType:i}},[l,h,g,y,p,_,i]);return N==null?null:se.createElement(kl.Provider,{value:c},se.createElement(ng.Provider,{children:n,value:N}))}function gC(t){let{children:e,location:n}=t;return eC(l2(e),n)}new Promise(()=>{});function l2(t,e){e===void 0&&(e=[]);let n=[];return se.Children.forEach(t,(r,i)=>{if(!se.isValidElement(r))return;let s=[...e,i];if(r.type===se.Fragment){n.push.apply(n,l2(r.props.children,s));return}r.type!==Yn&&vr(!1),!r.props.index||!r.props.children||vr(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=l2(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function c2(){return c2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},c2.apply(this,arguments)}function yC(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function vC(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function wC(t,e){return t.button===0&&(!e||e==="_self")&&!vC(t)}const xC=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],bC="6";try{window.__reactRouterVersion=bC}catch{}const _C="startTransition",fx=dk[_C];function NC(t){let{basename:e,children:n,future:r,window:i}=t,s=se.useRef();s.current==null&&(s.current=S8({window:i,v5Compat:!0}));let o=s.current,[a,l]=se.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},h=se.useCallback(g=>{c&&fx?fx(()=>l(g)):l(g)},[l,c]);return se.useLayoutEffect(()=>o.listen(h),[o,h]),se.useEffect(()=>fC(r),[r]),se.createElement(mC,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const SC=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",AC=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,px=se.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:l,to:c,preventScrollReset:h,viewTransition:g}=e,y=yC(e,xC),{basename:p}=se.useContext(kl),_,N=!1;if(typeof c=="string"&&AC.test(c)&&(_=c,SC))try{let R=new URL(window.location.href),j=c.startsWith("//")?new URL(R.protocol+c):new URL(c),q=Yy(j.pathname,p);j.origin===R.origin&&q!=null?c=q+j.search+j.hash:N=!0}catch{}let C=J8(c,{relative:i}),x=EC(c,{replace:o,state:a,target:l,preventScrollReset:h,relative:i,viewTransition:g});function k(R){r&&r(R),R.defaultPrevented||x(R)}return se.createElement("a",c2({},y,{href:_||C,onClick:N||s?r:k,ref:n,target:l}))});var mx;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(mx||(mx={}));var gx;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(gx||(gx={}));function EC(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,viewTransition:a}=e===void 0?{}:e,l=xi(),c=Ju(),h=M6(t,{relative:o});return se.useCallback(g=>{if(wC(g,n)){g.preventDefault();let y=r!==void 0?r:fm(c)===fm(h);l(t,{replace:y,state:i,preventScrollReset:s,relative:o,viewTransition:a})}},[c,l,h,r,i,n,t,s,o,a])}var yx={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B6=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},TC=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},z6={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,c=l?t[i+2]:0,h=s>>2,g=(s&3)<<4|a>>4;let y=(a&15)<<2|c>>6,p=c&63;l||(p=64,o||(y=64)),r.push(n[h],n[g],n[y],n[p])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(B6(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):TC(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const g=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||c==null||g==null)throw new kC;const y=s<<2|a>>4;if(r.push(y),c!==64){const p=a<<4&240|c>>2;if(r.push(p),g!==64){const _=c<<6&192|g;r.push(_)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class kC extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const IC=function(t){const e=B6(t);return z6.encodeByteArray(e,!0)},pm=function(t){return IC(t).replace(/\./g,"")},q6=function(t){try{return z6.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PC=()=>CC().__FIREBASE_DEFAULTS__,LC=()=>{if(typeof process>"u"||typeof yx>"u")return;const t=yx.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},RC=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&q6(t[1]);return e&&JSON.parse(e)},ig=()=>{try{return PC()||LC()||RC()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},H6=t=>{var e,n;return(n=(e=ig())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},$6=t=>{const e=H6(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},W6=()=>{var t;return(t=ig())===null||t===void 0?void 0:t.config},G6=t=>{var e;return(e=ig())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jC{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K6(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[pm(JSON.stringify(n)),pm(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wi(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function DC(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(wi())}function OC(){var t;const e=(t=ig())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function MC(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function FC(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function UC(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function VC(){const t=wi();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function BC(){return!OC()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Y6(){try{return typeof indexedDB=="object"}catch{return!1}}function Q6(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}function zC(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qC="FirebaseError";class ro extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=qC,Object.setPrototypeOf(this,ro.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,kc.prototype.create)}}class kc{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?HC(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new ro(i,a,r)}}function HC(t,e){return t.replace($C,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const $C=/\{\$([^}]+)}/g;function WC(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ld(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(vx(s)&&vx(o)){if(!Ld(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function vx(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ef(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function qh(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Hh(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function GC(t,e){const n=new KC(t,e);return n.subscribe.bind(n)}class KC{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");YC(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=N0),i.error===void 0&&(i.error=N0),i.complete===void 0&&(i.complete=N0);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function YC(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function N0(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bn(t){return t&&t._delegate?t._delegate:t}class Ds{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yl="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QC{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new jC;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(JC(e))try{this.getOrInitializeService({instanceIdentifier:Yl})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Yl){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Yl){return this.instances.has(e)}getOptions(e=Yl){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:XC(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Yl){return this.component?this.component.multipleInstances?e:Yl:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function XC(t){return t===Yl?void 0:t}function JC(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZC{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new QC(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Jt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Jt||(Jt={}));const eP={debug:Jt.DEBUG,verbose:Jt.VERBOSE,info:Jt.INFO,warn:Jt.WARN,error:Jt.ERROR,silent:Jt.SILENT},tP=Jt.INFO,nP={[Jt.DEBUG]:"log",[Jt.VERBOSE]:"log",[Jt.INFO]:"info",[Jt.WARN]:"warn",[Jt.ERROR]:"error"},rP=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=nP[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Zy{constructor(e){this.name=e,this._logLevel=tP,this._logHandler=rP,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Jt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?eP[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Jt.DEBUG,...e),this._logHandler(this,Jt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Jt.VERBOSE,...e),this._logHandler(this,Jt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Jt.INFO,...e),this._logHandler(this,Jt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Jt.WARN,...e),this._logHandler(this,Jt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Jt.ERROR,...e),this._logHandler(this,Jt.ERROR,...e)}}const iP=(t,e)=>e.some(n=>t instanceof n);let wx,xx;function sP(){return wx||(wx=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function oP(){return xx||(xx=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const X6=new WeakMap,u2=new WeakMap,J6=new WeakMap,S0=new WeakMap,ev=new WeakMap;function aP(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(sa(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&X6.set(n,t)}).catch(()=>{}),ev.set(e,t),e}function lP(t){if(u2.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});u2.set(t,e)}let h2={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return u2.get(t);if(e==="objectStoreNames")return t.objectStoreNames||J6.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return sa(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function cP(t){h2=t(h2)}function uP(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(A0(this),e,...n);return J6.set(r,e.sort?e.sort():[e]),sa(r)}:oP().includes(t)?function(...e){return t.apply(A0(this),e),sa(X6.get(this))}:function(...e){return sa(t.apply(A0(this),e))}}function hP(t){return typeof t=="function"?uP(t):(t instanceof IDBTransaction&&lP(t),iP(t,sP())?new Proxy(t,h2):t)}function sa(t){if(t instanceof IDBRequest)return aP(t);if(S0.has(t))return S0.get(t);const e=hP(t);return e!==t&&(S0.set(t,e),ev.set(e,t)),e}const A0=t=>ev.get(t);function sg(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=sa(o);return r&&o.addEventListener("upgradeneeded",l=>{r(sa(o.result),l.oldVersion,l.newVersion,sa(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}function E0(t,{blocked:e}={}){const n=indexedDB.deleteDatabase(t);return e&&n.addEventListener("blocked",r=>e(r.oldVersion,r)),sa(n).then(()=>{})}const dP=["get","getKey","getAll","getAllKeys","count"],fP=["put","add","delete","clear"],T0=new Map;function bx(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(T0.get(e))return T0.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=fP.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||dP.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),i&&l.done]))[0]};return T0.set(e,s),s}cP(t=>({...t,get:(e,n,r)=>bx(e,n)||t.get(e,n,r),has:(e,n)=>!!bx(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pP{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(mP(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function mP(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const d2="@firebase/app",_x="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fa=new Zy("@firebase/app"),gP="@firebase/app-compat",yP="@firebase/analytics-compat",vP="@firebase/analytics",wP="@firebase/app-check-compat",xP="@firebase/app-check",bP="@firebase/auth",_P="@firebase/auth-compat",NP="@firebase/database",SP="@firebase/data-connect",AP="@firebase/database-compat",EP="@firebase/functions",TP="@firebase/functions-compat",kP="@firebase/installations",IP="@firebase/installations-compat",CP="@firebase/messaging",PP="@firebase/messaging-compat",LP="@firebase/performance",RP="@firebase/performance-compat",jP="@firebase/remote-config",DP="@firebase/remote-config-compat",OP="@firebase/storage",MP="@firebase/storage-compat",FP="@firebase/firestore",UP="@firebase/vertexai-preview",VP="@firebase/firestore-compat",BP="firebase",zP="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f2="[DEFAULT]",qP={[d2]:"fire-core",[gP]:"fire-core-compat",[vP]:"fire-analytics",[yP]:"fire-analytics-compat",[xP]:"fire-app-check",[wP]:"fire-app-check-compat",[bP]:"fire-auth",[_P]:"fire-auth-compat",[NP]:"fire-rtdb",[SP]:"fire-data-connect",[AP]:"fire-rtdb-compat",[EP]:"fire-fn",[TP]:"fire-fn-compat",[kP]:"fire-iid",[IP]:"fire-iid-compat",[CP]:"fire-fcm",[PP]:"fire-fcm-compat",[LP]:"fire-perf",[RP]:"fire-perf-compat",[jP]:"fire-rc",[DP]:"fire-rc-compat",[OP]:"fire-gcs",[MP]:"fire-gcs-compat",[FP]:"fire-fst",[VP]:"fire-fst-compat",[UP]:"fire-vertex","fire-js":"fire-js",[BP]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mm=new Map,HP=new Map,p2=new Map;function Nx(t,e){try{t.container.addComponent(e)}catch(n){fa.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Zs(t){const e=t.name;if(p2.has(e))return fa.debug(`There were multiple attempts to register component ${e}.`),!1;p2.set(e,t);for(const n of mm.values())Nx(n,t);for(const n of HP.values())Nx(n,t);return!0}function Ic(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function _o(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $P={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},gl=new kc("app","Firebase",$P);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WP{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ds("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw gl.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cc=zP;function Z6(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:f2,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw gl.create("bad-app-name",{appName:String(i)});if(n||(n=W6()),!n)throw gl.create("no-options");const s=mm.get(i);if(s){if(Ld(n,s.options)&&Ld(r,s.config))return s;throw gl.create("duplicate-app",{appName:i})}const o=new ZC(i);for(const l of p2.values())o.addComponent(l);const a=new WP(n,r,o);return mm.set(i,a),a}function og(t=f2){const e=mm.get(t);if(!e&&t===f2&&W6())return Z6();if(!e)throw gl.create("no-app",{appName:t});return e}function Wi(t,e,n){var r;let i=(r=qP[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),fa.warn(a.join(" "));return}Zs(new Ds(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GP="firebase-heartbeat-database",KP=1,Rd="firebase-heartbeat-store";let k0=null;function eN(){return k0||(k0=sg(GP,KP,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Rd)}catch(n){console.warn(n)}}}}).catch(t=>{throw gl.create("idb-open",{originalErrorMessage:t.message})})),k0}async function YP(t){try{const n=(await eN()).transaction(Rd),r=await n.objectStore(Rd).get(tN(t));return await n.done,r}catch(e){if(e instanceof ro)fa.warn(e.message);else{const n=gl.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});fa.warn(n.message)}}}async function Sx(t,e){try{const r=(await eN()).transaction(Rd,"readwrite");await r.objectStore(Rd).put(e,tN(t)),await r.done}catch(n){if(n instanceof ro)fa.warn(n.message);else{const r=gl.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});fa.warn(r.message)}}}function tN(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QP=1024,XP=30*24*60*60*1e3;class JP{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new e7(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Ax();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=XP}),this._storage.overwrite(this._heartbeatsCache))}catch(r){fa.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Ax(),{heartbeatsToSend:r,unsentEntries:i}=ZP(this._heartbeatsCache.heartbeats),s=pm(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return fa.warn(n),""}}}function Ax(){return new Date().toISOString().substring(0,10)}function ZP(t,e=QP){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),Ex(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Ex(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class e7{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Y6()?Q6().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await YP(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Sx(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Sx(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Ex(t){return pm(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t7(t){Zs(new Ds("platform-logger",e=>new pP(e),"PRIVATE")),Zs(new Ds("heartbeat",e=>new JP(e),"PRIVATE")),Wi(d2,_x,t),Wi(d2,_x,"esm2017"),Wi("fire-js","")}t7("");function tv(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function nN(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const n7=nN,rN=new kc("auth","Firebase",nN());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gm=new Zy("@firebase/auth");function r7(t,...e){gm.logLevel<=Jt.WARN&&gm.warn(`Auth (${Cc}): ${t}`,...e)}function kp(t,...e){gm.logLevel<=Jt.ERROR&&gm.error(`Auth (${Cc}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eo(t,...e){throw nv(t,...e)}function To(t,...e){return nv(t,...e)}function iN(t,e,n){const r=Object.assign(Object.assign({},n7()),{[e]:n});return new kc("auth","Firebase",r).create(e,{appName:t.name})}function oa(t){return iN(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function nv(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return rN.create(t,...e)}function At(t,e,...n){if(!t)throw nv(e,...n)}function ea(t){const e="INTERNAL ASSERTION FAILED: "+t;throw kp(e),new Error(e)}function pa(t,e){t||ea(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m2(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function i7(){return Tx()==="http:"||Tx()==="https:"}function Tx(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s7(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(i7()||FC()||"connection"in navigator)?navigator.onLine:!0}function o7(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tf{constructor(e,n){this.shortDelay=e,this.longDelay=n,pa(n>e,"Short delay should be less than long delay!"),this.isMobile=DC()||UC()}get(){return s7()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rv(t,e){pa(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sN{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ea("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ea("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ea("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a7={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l7=new tf(3e4,6e4);function Il(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function xa(t,e,n,r,i={}){return oN(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=ef(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:l},s);return MC()||(c.referrerPolicy="no-referrer"),sN.fetch()(aN(t,t.config.apiHost,n,a),c)})}async function oN(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},a7),e);try{const i=new u7(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw ep(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw ep(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw ep(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw ep(t,"user-disabled",o);const h=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw iN(t,h,c);eo(t,h)}}catch(i){if(i instanceof ro)throw i;eo(t,"network-request-failed",{message:String(i)})}}async function nf(t,e,n,r,i={}){const s=await xa(t,e,n,r,i);return"mfaPendingCredential"in s&&eo(t,"multi-factor-auth-required",{_serverResponse:s}),s}function aN(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?rv(t.config,i):`${t.config.apiScheme}://${i}`}function c7(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class u7{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(To(this.auth,"network-request-failed")),l7.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function ep(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=To(t,e,r);return i.customData._tokenResponse=n,i}function kx(t){return t!==void 0&&t.enterprise!==void 0}class h7{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return c7(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function d7(t,e){return xa(t,"GET","/v2/recaptchaConfig",Il(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function f7(t,e){return xa(t,"POST","/v1/accounts:delete",e)}async function lN(t,e){return xa(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function id(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function p7(t,e=!1){const n=bn(t),r=await n.getIdToken(e),i=iv(r);At(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:id(I0(i.auth_time)),issuedAtTime:id(I0(i.iat)),expirationTime:id(I0(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function I0(t){return Number(t)*1e3}function iv(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return kp("JWT malformed, contained fewer than 3 sections"),null;try{const i=q6(n);return i?JSON.parse(i):(kp("Failed to decode base64 JWT payload"),null)}catch(i){return kp("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function Ix(t){const e=iv(t);return At(e,"internal-error"),At(typeof e.exp<"u","internal-error"),At(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uu(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof ro&&m7(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function m7({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g7{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g2{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=id(this.lastLoginAt),this.creationTime=id(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ym(t){var e;const n=t.auth,r=await t.getIdToken(),i=await Uu(t,lN(n,{idToken:r}));At(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?cN(s.providerUserInfo):[],a=v7(t.providerData,o),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),h=l?c:!1,g={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new g2(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(t,g)}async function y7(t){const e=bn(t);await ym(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function v7(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function cN(t){return t.map(e=>{var{providerId:n}=e,r=tv(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function w7(t,e){const n=await oN(t,{},async()=>{const r=ef({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=aN(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",sN.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function x7(t,e){return xa(t,"POST","/v2/accounts:revokeToken",Il(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nu{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){At(e.idToken,"internal-error"),At(typeof e.idToken<"u","internal-error"),At(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Ix(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){At(e.length!==0,"internal-error");const n=Ix(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(At(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await w7(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new Nu;return r&&(At(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(At(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(At(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Nu,this.toJSON())}_performRefresh(){return ea("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qa(t,e){At(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class ta{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=tv(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new g7(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new g2(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Uu(this,this.stsTokenManager.getToken(this.auth,e));return At(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return p7(this,e)}reload(){return y7(this)}_assign(e){this!==e&&(At(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ta(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){At(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await ym(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(_o(this.auth.app))return Promise.reject(oa(this.auth));const e=await this.getIdToken();return await Uu(this,f7(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,l,c,h;const g=(r=n.displayName)!==null&&r!==void 0?r:void 0,y=(i=n.email)!==null&&i!==void 0?i:void 0,p=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,_=(o=n.photoURL)!==null&&o!==void 0?o:void 0,N=(a=n.tenantId)!==null&&a!==void 0?a:void 0,C=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,x=(c=n.createdAt)!==null&&c!==void 0?c:void 0,k=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:R,emailVerified:j,isAnonymous:q,providerData:Q,stsTokenManager:D}=n;At(R&&D,e,"internal-error");const S=Nu.fromJSON(this.name,D);At(typeof R=="string",e,"internal-error"),qa(g,e.name),qa(y,e.name),At(typeof j=="boolean",e,"internal-error"),At(typeof q=="boolean",e,"internal-error"),qa(p,e.name),qa(_,e.name),qa(N,e.name),qa(C,e.name),qa(x,e.name),qa(k,e.name);const T=new ta({uid:R,auth:e,email:y,emailVerified:j,displayName:g,isAnonymous:q,photoURL:_,phoneNumber:p,tenantId:N,stsTokenManager:S,createdAt:x,lastLoginAt:k});return Q&&Array.isArray(Q)&&(T.providerData=Q.map(F=>Object.assign({},F))),C&&(T._redirectEventId=C),T}static async _fromIdTokenResponse(e,n,r=!1){const i=new Nu;i.updateFromServerResponse(n);const s=new ta({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await ym(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];At(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?cN(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new Nu;a.updateFromIdToken(r);const l=new ta({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new g2(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cx=new Map;function na(t){pa(t instanceof Function,"Expected a class definition");let e=Cx.get(t);return e?(pa(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Cx.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uN{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}uN.type="NONE";const Px=uN;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ip(t,e,n){return`firebase:${t}:${e}:${n}`}class Su{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Ip(this.userKey,i.apiKey,s),this.fullPersistenceKey=Ip("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?ta._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Su(na(Px),e,r);const i=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||na(Px);const o=Ip(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const h=await c._get(o);if(h){const g=ta._fromJSON(e,h);c!==s&&(a=g),s=c;break}}catch{}const l=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new Su(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new Su(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lx(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(pN(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(hN(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(gN(e))return"Blackberry";if(yN(e))return"Webos";if(dN(e))return"Safari";if((e.includes("chrome/")||fN(e))&&!e.includes("edge/"))return"Chrome";if(mN(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function hN(t=wi()){return/firefox\//i.test(t)}function dN(t=wi()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function fN(t=wi()){return/crios\//i.test(t)}function pN(t=wi()){return/iemobile/i.test(t)}function mN(t=wi()){return/android/i.test(t)}function gN(t=wi()){return/blackberry/i.test(t)}function yN(t=wi()){return/webos/i.test(t)}function sv(t=wi()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function b7(t=wi()){var e;return sv(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function _7(){return VC()&&document.documentMode===10}function vN(t=wi()){return sv(t)||mN(t)||yN(t)||gN(t)||/windows phone/i.test(t)||pN(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wN(t,e=[]){let n;switch(t){case"Browser":n=Lx(wi());break;case"Worker":n=`${Lx(wi())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Cc}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N7{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function S7(t,e={}){return xa(t,"GET","/v2/passwordPolicy",Il(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A7=6;class E7{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:A7,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T7{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Rx(this),this.idTokenSubscription=new Rx(this),this.beforeStateQueue=new N7(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=rN,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=na(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Su.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await lN(this,{idToken:e}),r=await ta._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(_o(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return At(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await ym(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=o7()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(_o(this.app))return Promise.reject(oa(this));const n=e?bn(e):null;return n&&At(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&At(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return _o(this.app)?Promise.reject(oa(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return _o(this.app)?Promise.reject(oa(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(na(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await S7(this),n=new E7(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new kc("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await x7(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&na(e)||this._popupRedirectResolver;At(n,this,"argument-error"),this.redirectPersistenceManager=await Su.create(this,[na(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(At(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return At(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=wN(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&r7(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Pc(t){return bn(t)}class Rx{constructor(e){this.auth=e,this.observer=null,this.addObserver=GC(n=>this.observer=n)}get next(){return At(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ag={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function k7(t){ag=t}function xN(t){return ag.loadJS(t)}function I7(){return ag.recaptchaEnterpriseScript}function C7(){return ag.gapiScript}function P7(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const L7="recaptcha-enterprise",R7="NO_RECAPTCHA";class j7{constructor(e){this.type=L7,this.auth=Pc(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{d7(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new h7(l);return s.tenantId==null?s._agentRecaptchaConfig=c:s._tenantRecaptchaConfigs[s.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function i(s,o,a){const l=window.grecaptcha;kx(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(c=>{o(c)}).catch(()=>{o(R7)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&kx(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=I7();l.length!==0&&(l+=a),xN(l).then(()=>{i(a,s,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function jx(t,e,n,r=!1){const i=new j7(t);let s;try{s=await i.verify(n)}catch{s=await i.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function y2(t,e,n,r){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await jx(t,e,n,n==="getOobCode");return r(t,s)}else return r(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await jx(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D7(t,e){const n=Ic(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(Ld(s,e??{}))return i;eo(i,"already-initialized")}return n.initialize({options:e})}function O7(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(na);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function M7(t,e,n){const r=Pc(t);At(r._canInitEmulator,r,"emulator-config-failed"),At(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=bN(e),{host:o,port:a}=F7(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),U7()}function bN(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function F7(t){const e=bN(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:Dx(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:Dx(o)}}}function Dx(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function U7(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ov{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ea("not implemented")}_getIdTokenResponse(e){return ea("not implemented")}_linkToIdToken(e,n){return ea("not implemented")}_getReauthenticationResolver(e){return ea("not implemented")}}async function V7(t,e){return xa(t,"POST","/v1/accounts:update",e)}async function B7(t,e){return xa(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function z7(t,e){return nf(t,"POST","/v1/accounts:signInWithPassword",Il(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function q7(t,e){return nf(t,"POST","/v1/accounts:signInWithEmailLink",Il(t,e))}async function H7(t,e){return nf(t,"POST","/v1/accounts:signInWithEmailLink",Il(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jd extends ov{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new jd(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new jd(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return y2(e,n,"signInWithPassword",z7);case"emailLink":return q7(e,{email:this._email,oobCode:this._password});default:eo(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return y2(e,r,"signUpPassword",B7);case"emailLink":return H7(e,{idToken:n,email:this._email,oobCode:this._password});default:eo(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Au(t,e){return nf(t,"POST","/v1/accounts:signInWithIdp",Il(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $7="http://localhost";class fc extends ov{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new fc(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):eo("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=tv(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new fc(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Au(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Au(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Au(e,n)}buildRequest(){const e={requestUri:$7,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=ef(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W7(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function G7(t){const e=qh(Hh(t)).link,n=e?qh(Hh(e)).deep_link_id:null,r=qh(Hh(t)).deep_link_id;return(r?qh(Hh(r)).link:null)||r||n||e||t}class av{constructor(e){var n,r,i,s,o,a;const l=qh(Hh(e)),c=(n=l.apiKey)!==null&&n!==void 0?n:null,h=(r=l.oobCode)!==null&&r!==void 0?r:null,g=W7((i=l.mode)!==null&&i!==void 0?i:null);At(c&&h&&g,"argument-error"),this.apiKey=c,this.operation=g,this.code=h,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=G7(e);try{return new av(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zu{constructor(){this.providerId=Zu.PROVIDER_ID}static credential(e,n){return jd._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=av.parseLink(n);return At(r,"argument-error"),jd._fromEmailAndCode(e,r.code,r.tenantId)}}Zu.PROVIDER_ID="password";Zu.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Zu.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _N{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rf extends _N{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qa extends rf{constructor(){super("facebook.com")}static credential(e){return fc._fromParams({providerId:Qa.PROVIDER_ID,signInMethod:Qa.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Qa.credentialFromTaggedObject(e)}static credentialFromError(e){return Qa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Qa.credential(e.oauthAccessToken)}catch{return null}}}Qa.FACEBOOK_SIGN_IN_METHOD="facebook.com";Qa.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xa extends rf{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return fc._fromParams({providerId:Xa.PROVIDER_ID,signInMethod:Xa.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Xa.credentialFromTaggedObject(e)}static credentialFromError(e){return Xa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Xa.credential(n,r)}catch{return null}}}Xa.GOOGLE_SIGN_IN_METHOD="google.com";Xa.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ja extends rf{constructor(){super("github.com")}static credential(e){return fc._fromParams({providerId:Ja.PROVIDER_ID,signInMethod:Ja.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ja.credentialFromTaggedObject(e)}static credentialFromError(e){return Ja.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ja.credential(e.oauthAccessToken)}catch{return null}}}Ja.GITHUB_SIGN_IN_METHOD="github.com";Ja.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Za extends rf{constructor(){super("twitter.com")}static credential(e,n){return fc._fromParams({providerId:Za.PROVIDER_ID,signInMethod:Za.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Za.credentialFromTaggedObject(e)}static credentialFromError(e){return Za.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Za.credential(n,r)}catch{return null}}}Za.TWITTER_SIGN_IN_METHOD="twitter.com";Za.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function K7(t,e){return nf(t,"POST","/v1/accounts:signUp",Il(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await ta._fromIdTokenResponse(e,r,i),o=Ox(r);return new pc({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=Ox(r);return new pc({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function Ox(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vm extends ro{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,vm.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new vm(e,n,r,i)}}function NN(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?vm._fromErrorAndOperation(t,s,e,r):s})}async function Y7(t,e,n=!1){const r=await Uu(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return pc._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Q7(t,e,n=!1){const{auth:r}=t;if(_o(r.app))return Promise.reject(oa(r));const i="reauthenticate";try{const s=await Uu(t,NN(r,i,e,t),n);At(s.idToken,r,"internal-error");const o=iv(s.idToken);At(o,r,"internal-error");const{sub:a}=o;return At(t.uid===a,r,"user-mismatch"),pc._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&eo(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SN(t,e,n=!1){if(_o(t.app))return Promise.reject(oa(t));const r="signIn",i=await NN(t,r,e),s=await pc._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function X7(t,e){return SN(Pc(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AN(t){const e=Pc(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function EN(t,e,n){if(_o(t.app))return Promise.reject(oa(t));const r=Pc(t),o=await y2(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",K7).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&AN(t),l}),a=await pc._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function J7(t,e,n){return _o(t.app)?Promise.reject(oa(t)):X7(bn(t),Zu.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&AN(t),r})}function Z7(t,e){return eL(bn(t),null,e)}async function eL(t,e,n){const{auth:r}=t,s={idToken:await t.getIdToken(),returnSecureToken:!0};n&&(s.password=n);const o=await Uu(t,V7(r,s));await t._updateTokensIfNecessary(o,!0)}function tL(t,e,n,r){return bn(t).onIdTokenChanged(e,n,r)}function nL(t,e,n){return bn(t).beforeAuthStateChanged(e,n)}function Lc(t,e,n,r){return bn(t).onAuthStateChanged(e,n,r)}function TN(t){return bn(t).signOut()}const wm="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kN{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(wm,"1"),this.storage.removeItem(wm),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rL=1e3,iL=10;class IN extends kN{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=vN(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);_7()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,iL):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},rL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}IN.type="LOCAL";const sL=IN;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CN extends kN{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}CN.type="SESSION";const PN=CN;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oL(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lg{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new lg(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async c=>c(n.origin,s)),l=await oL(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}lg.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lv(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aL{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const c=lv("",20);i.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(g){const y=g;if(y.data.eventId===c)switch(y.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(y.data.response);break;default:clearTimeout(h),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ko(){return window}function lL(t){ko().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LN(){return typeof ko().WorkerGlobalScope<"u"&&typeof ko().importScripts=="function"}async function cL(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function uL(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function hL(){return LN()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RN="firebaseLocalStorageDb",dL=1,xm="firebaseLocalStorage",jN="fbase_key";class sf{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function cg(t,e){return t.transaction([xm],e?"readwrite":"readonly").objectStore(xm)}function fL(){const t=indexedDB.deleteDatabase(RN);return new sf(t).toPromise()}function v2(){const t=indexedDB.open(RN,dL);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(xm,{keyPath:jN})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(xm)?e(r):(r.close(),await fL(),e(await v2()))})})}async function Mx(t,e,n){const r=cg(t,!0).put({[jN]:e,value:n});return new sf(r).toPromise()}async function pL(t,e){const n=cg(t,!1).get(e),r=await new sf(n).toPromise();return r===void 0?null:r.value}function Fx(t,e){const n=cg(t,!0).delete(e);return new sf(n).toPromise()}const mL=800,gL=3;class DN{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await v2(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>gL)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return LN()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=lg._getInstance(hL()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await cL(),!this.activeServiceWorker)return;this.sender=new aL(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||uL()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await v2();return await Mx(e,wm,"1"),await Fx(e,wm),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Mx(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>pL(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Fx(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=cg(i,!1).getAll();return new sf(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),mL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}DN.type="LOCAL";const yL=DN;new tf(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vL(t,e){return e?na(e):(At(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cv extends ov{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Au(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Au(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Au(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function wL(t){return SN(t.auth,new cv(t),t.bypassAuthState)}function xL(t){const{auth:e,user:n}=t;return At(n,e,"internal-error"),Q7(n,new cv(t),t.bypassAuthState)}async function bL(t){const{auth:e,user:n}=t;return At(n,e,"internal-error"),Y7(n,new cv(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ON{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return wL;case"linkViaPopup":case"linkViaRedirect":return bL;case"reauthViaPopup":case"reauthViaRedirect":return xL;default:eo(this.auth,"internal-error")}}resolve(e){pa(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){pa(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _L=new tf(2e3,1e4);class mu extends ON{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,mu.currentPopupAction&&mu.currentPopupAction.cancel(),mu.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return At(e,this.auth,"internal-error"),e}async onExecution(){pa(this.filter.length===1,"Popup operations only handle one event");const e=lv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(To(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(To(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,mu.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(To(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,_L.get())};e()}}mu.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NL="pendingRedirect",Cp=new Map;class SL extends ON{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Cp.get(this.auth._key());if(!e){try{const r=await AL(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Cp.set(this.auth._key(),e)}return this.bypassAuthState||Cp.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function AL(t,e){const n=kL(e),r=TL(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function EL(t,e){Cp.set(t._key(),e)}function TL(t){return na(t._redirectPersistence)}function kL(t){return Ip(NL,t.config.apiKey,t.name)}async function IL(t,e,n=!1){if(_o(t.app))return Promise.reject(oa(t));const r=Pc(t),i=vL(r,e),o=await new SL(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CL=10*60*1e3;class PL{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!LL(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!MN(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(To(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=CL&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ux(e))}saveEventToCache(e){this.cachedEventUids.add(Ux(e)),this.lastProcessedEventTime=Date.now()}}function Ux(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function MN({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function LL(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return MN(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RL(t,e={}){return xa(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jL=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,DL=/^https?/;async function OL(t){if(t.config.emulator)return;const{authorizedDomains:e}=await RL(t);for(const n of e)try{if(ML(n))return}catch{}eo(t,"unauthorized-domain")}function ML(t){const e=m2(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!DL.test(n))return!1;if(jL.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FL=new tf(3e4,6e4);function Vx(){const t=ko().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function UL(t){return new Promise((e,n)=>{var r,i,s;function o(){Vx(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Vx(),n(To(t,"network-request-failed"))},timeout:FL.get()})}if(!((i=(r=ko().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=ko().gapi)===null||s===void 0)&&s.load)o();else{const a=P7("iframefcb");return ko()[a]=()=>{gapi.load?o():n(To(t,"network-request-failed"))},xN(`${C7()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw Pp=null,e})}let Pp=null;function VL(t){return Pp=Pp||UL(t),Pp}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BL=new tf(5e3,15e3),zL="__/auth/iframe",qL="emulator/auth/iframe",HL={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},$L=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function WL(t){const e=t.config;At(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?rv(e,qL):`https://${t.config.authDomain}/${zL}`,r={apiKey:e.apiKey,appName:t.name,v:Cc},i=$L.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${ef(r).slice(1)}`}async function GL(t){const e=await VL(t),n=ko().gapi;return At(n,t,"internal-error"),e.open({where:document.body,url:WL(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:HL,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=To(t,"network-request-failed"),a=ko().setTimeout(()=>{s(o)},BL.get());function l(){ko().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KL={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},YL=500,QL=600,XL="_blank",JL="http://localhost";class Bx{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function ZL(t,e,n,r=YL,i=QL){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},KL),{width:r.toString(),height:i.toString(),top:s,left:o}),c=wi().toLowerCase();n&&(a=fN(c)?XL:n),hN(c)&&(e=e||JL,l.scrollbars="yes");const h=Object.entries(l).reduce((y,[p,_])=>`${y}${p}=${_},`,"");if(b7(c)&&a!=="_self")return eR(e||"",a),new Bx(null);const g=window.open(e||"",a,h);At(g,t,"popup-blocked");try{g.focus()}catch{}return new Bx(g)}function eR(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tR="__/auth/handler",nR="emulator/auth/handler",rR=encodeURIComponent("fac");async function zx(t,e,n,r,i,s){At(t.config.authDomain,t,"auth-domain-config-required"),At(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Cc,eventId:i};if(e instanceof _N){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",WC(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,g]of Object.entries({}))o[h]=g}if(e instanceof rf){const h=e.getScopes().filter(g=>g!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const l=await t._getAppCheckToken(),c=l?`#${rR}=${encodeURIComponent(l)}`:"";return`${iR(t)}?${ef(a).slice(1)}${c}`}function iR({config:t}){return t.emulator?rv(t,nR):`https://${t.authDomain}/${tR}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C0="webStorageSupport";class sR{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=PN,this._completeRedirectFn=IL,this._overrideRedirectResult=EL}async _openPopup(e,n,r,i){var s;pa((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await zx(e,n,r,m2(),i);return ZL(e,o,lv())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await zx(e,n,r,m2(),i);return lL(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(pa(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await GL(e),r=new PL(e);return n.register("authEvent",i=>(At(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(C0,{type:C0},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[C0];o!==void 0&&n(!!o),eo(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=OL(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return vN()||dN()||sv()}}const oR=sR;var qx="@firebase/auth",Hx="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aR{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){At(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lR(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function cR(t){Zs(new Ds("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;At(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:wN(t)},c=new T7(r,i,s,l);return O7(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Zs(new Ds("auth-internal",e=>{const n=Pc(e.getProvider("auth").getImmediate());return(r=>new aR(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Wi(qx,Hx,lR(t)),Wi(qx,Hx,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uR=5*60,hR=G6("authIdTokenMaxAge")||uR;let $x=null;const dR=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>hR)return;const i=n==null?void 0:n.token;$x!==i&&($x=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function fR(t=og()){const e=Ic(t,"auth");if(e.isInitialized())return e.getImmediate();const n=D7(t,{popupRedirectResolver:oR,persistence:[yL,sL,PN]}),r=G6("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=dR(s.toString());nL(n,o,()=>o(n.currentUser)),tL(n,a=>o(a))}}const i=H6("auth");return i&&M7(n,`http://${i}`),n}function pR(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}k7({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=To("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",pR().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});cR("Browser");var mR="firebase",gR="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Wi(mR,gR,"app");var Wx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var sc,FN;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(D,S){function T(){}T.prototype=S.prototype,D.D=S.prototype,D.prototype=new T,D.prototype.constructor=D,D.C=function(F,A,I){for(var L=Array(arguments.length-2),ne=2;ne<arguments.length;ne++)L[ne-2]=arguments[ne];return S.prototype[A].apply(F,L)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(D,S,T){T||(T=0);var F=Array(16);if(typeof S=="string")for(var A=0;16>A;++A)F[A]=S.charCodeAt(T++)|S.charCodeAt(T++)<<8|S.charCodeAt(T++)<<16|S.charCodeAt(T++)<<24;else for(A=0;16>A;++A)F[A]=S[T++]|S[T++]<<8|S[T++]<<16|S[T++]<<24;S=D.g[0],T=D.g[1],A=D.g[2];var I=D.g[3],L=S+(I^T&(A^I))+F[0]+3614090360&4294967295;S=T+(L<<7&4294967295|L>>>25),L=I+(A^S&(T^A))+F[1]+3905402710&4294967295,I=S+(L<<12&4294967295|L>>>20),L=A+(T^I&(S^T))+F[2]+606105819&4294967295,A=I+(L<<17&4294967295|L>>>15),L=T+(S^A&(I^S))+F[3]+3250441966&4294967295,T=A+(L<<22&4294967295|L>>>10),L=S+(I^T&(A^I))+F[4]+4118548399&4294967295,S=T+(L<<7&4294967295|L>>>25),L=I+(A^S&(T^A))+F[5]+1200080426&4294967295,I=S+(L<<12&4294967295|L>>>20),L=A+(T^I&(S^T))+F[6]+2821735955&4294967295,A=I+(L<<17&4294967295|L>>>15),L=T+(S^A&(I^S))+F[7]+4249261313&4294967295,T=A+(L<<22&4294967295|L>>>10),L=S+(I^T&(A^I))+F[8]+1770035416&4294967295,S=T+(L<<7&4294967295|L>>>25),L=I+(A^S&(T^A))+F[9]+2336552879&4294967295,I=S+(L<<12&4294967295|L>>>20),L=A+(T^I&(S^T))+F[10]+4294925233&4294967295,A=I+(L<<17&4294967295|L>>>15),L=T+(S^A&(I^S))+F[11]+2304563134&4294967295,T=A+(L<<22&4294967295|L>>>10),L=S+(I^T&(A^I))+F[12]+1804603682&4294967295,S=T+(L<<7&4294967295|L>>>25),L=I+(A^S&(T^A))+F[13]+4254626195&4294967295,I=S+(L<<12&4294967295|L>>>20),L=A+(T^I&(S^T))+F[14]+2792965006&4294967295,A=I+(L<<17&4294967295|L>>>15),L=T+(S^A&(I^S))+F[15]+1236535329&4294967295,T=A+(L<<22&4294967295|L>>>10),L=S+(A^I&(T^A))+F[1]+4129170786&4294967295,S=T+(L<<5&4294967295|L>>>27),L=I+(T^A&(S^T))+F[6]+3225465664&4294967295,I=S+(L<<9&4294967295|L>>>23),L=A+(S^T&(I^S))+F[11]+643717713&4294967295,A=I+(L<<14&4294967295|L>>>18),L=T+(I^S&(A^I))+F[0]+3921069994&4294967295,T=A+(L<<20&4294967295|L>>>12),L=S+(A^I&(T^A))+F[5]+3593408605&4294967295,S=T+(L<<5&4294967295|L>>>27),L=I+(T^A&(S^T))+F[10]+38016083&4294967295,I=S+(L<<9&4294967295|L>>>23),L=A+(S^T&(I^S))+F[15]+3634488961&4294967295,A=I+(L<<14&4294967295|L>>>18),L=T+(I^S&(A^I))+F[4]+3889429448&4294967295,T=A+(L<<20&4294967295|L>>>12),L=S+(A^I&(T^A))+F[9]+568446438&4294967295,S=T+(L<<5&4294967295|L>>>27),L=I+(T^A&(S^T))+F[14]+3275163606&4294967295,I=S+(L<<9&4294967295|L>>>23),L=A+(S^T&(I^S))+F[3]+4107603335&4294967295,A=I+(L<<14&4294967295|L>>>18),L=T+(I^S&(A^I))+F[8]+1163531501&4294967295,T=A+(L<<20&4294967295|L>>>12),L=S+(A^I&(T^A))+F[13]+2850285829&4294967295,S=T+(L<<5&4294967295|L>>>27),L=I+(T^A&(S^T))+F[2]+4243563512&4294967295,I=S+(L<<9&4294967295|L>>>23),L=A+(S^T&(I^S))+F[7]+1735328473&4294967295,A=I+(L<<14&4294967295|L>>>18),L=T+(I^S&(A^I))+F[12]+2368359562&4294967295,T=A+(L<<20&4294967295|L>>>12),L=S+(T^A^I)+F[5]+4294588738&4294967295,S=T+(L<<4&4294967295|L>>>28),L=I+(S^T^A)+F[8]+2272392833&4294967295,I=S+(L<<11&4294967295|L>>>21),L=A+(I^S^T)+F[11]+1839030562&4294967295,A=I+(L<<16&4294967295|L>>>16),L=T+(A^I^S)+F[14]+4259657740&4294967295,T=A+(L<<23&4294967295|L>>>9),L=S+(T^A^I)+F[1]+2763975236&4294967295,S=T+(L<<4&4294967295|L>>>28),L=I+(S^T^A)+F[4]+1272893353&4294967295,I=S+(L<<11&4294967295|L>>>21),L=A+(I^S^T)+F[7]+4139469664&4294967295,A=I+(L<<16&4294967295|L>>>16),L=T+(A^I^S)+F[10]+3200236656&4294967295,T=A+(L<<23&4294967295|L>>>9),L=S+(T^A^I)+F[13]+681279174&4294967295,S=T+(L<<4&4294967295|L>>>28),L=I+(S^T^A)+F[0]+3936430074&4294967295,I=S+(L<<11&4294967295|L>>>21),L=A+(I^S^T)+F[3]+3572445317&4294967295,A=I+(L<<16&4294967295|L>>>16),L=T+(A^I^S)+F[6]+76029189&4294967295,T=A+(L<<23&4294967295|L>>>9),L=S+(T^A^I)+F[9]+3654602809&4294967295,S=T+(L<<4&4294967295|L>>>28),L=I+(S^T^A)+F[12]+3873151461&4294967295,I=S+(L<<11&4294967295|L>>>21),L=A+(I^S^T)+F[15]+530742520&4294967295,A=I+(L<<16&4294967295|L>>>16),L=T+(A^I^S)+F[2]+3299628645&4294967295,T=A+(L<<23&4294967295|L>>>9),L=S+(A^(T|~I))+F[0]+4096336452&4294967295,S=T+(L<<6&4294967295|L>>>26),L=I+(T^(S|~A))+F[7]+1126891415&4294967295,I=S+(L<<10&4294967295|L>>>22),L=A+(S^(I|~T))+F[14]+2878612391&4294967295,A=I+(L<<15&4294967295|L>>>17),L=T+(I^(A|~S))+F[5]+4237533241&4294967295,T=A+(L<<21&4294967295|L>>>11),L=S+(A^(T|~I))+F[12]+1700485571&4294967295,S=T+(L<<6&4294967295|L>>>26),L=I+(T^(S|~A))+F[3]+2399980690&4294967295,I=S+(L<<10&4294967295|L>>>22),L=A+(S^(I|~T))+F[10]+4293915773&4294967295,A=I+(L<<15&4294967295|L>>>17),L=T+(I^(A|~S))+F[1]+2240044497&4294967295,T=A+(L<<21&4294967295|L>>>11),L=S+(A^(T|~I))+F[8]+1873313359&4294967295,S=T+(L<<6&4294967295|L>>>26),L=I+(T^(S|~A))+F[15]+4264355552&4294967295,I=S+(L<<10&4294967295|L>>>22),L=A+(S^(I|~T))+F[6]+2734768916&4294967295,A=I+(L<<15&4294967295|L>>>17),L=T+(I^(A|~S))+F[13]+1309151649&4294967295,T=A+(L<<21&4294967295|L>>>11),L=S+(A^(T|~I))+F[4]+4149444226&4294967295,S=T+(L<<6&4294967295|L>>>26),L=I+(T^(S|~A))+F[11]+3174756917&4294967295,I=S+(L<<10&4294967295|L>>>22),L=A+(S^(I|~T))+F[2]+718787259&4294967295,A=I+(L<<15&4294967295|L>>>17),L=T+(I^(A|~S))+F[9]+3951481745&4294967295,D.g[0]=D.g[0]+S&4294967295,D.g[1]=D.g[1]+(A+(L<<21&4294967295|L>>>11))&4294967295,D.g[2]=D.g[2]+A&4294967295,D.g[3]=D.g[3]+I&4294967295}r.prototype.u=function(D,S){S===void 0&&(S=D.length);for(var T=S-this.blockSize,F=this.B,A=this.h,I=0;I<S;){if(A==0)for(;I<=T;)i(this,D,I),I+=this.blockSize;if(typeof D=="string"){for(;I<S;)if(F[A++]=D.charCodeAt(I++),A==this.blockSize){i(this,F),A=0;break}}else for(;I<S;)if(F[A++]=D[I++],A==this.blockSize){i(this,F),A=0;break}}this.h=A,this.o+=S},r.prototype.v=function(){var D=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);D[0]=128;for(var S=1;S<D.length-8;++S)D[S]=0;var T=8*this.o;for(S=D.length-8;S<D.length;++S)D[S]=T&255,T/=256;for(this.u(D),D=Array(16),S=T=0;4>S;++S)for(var F=0;32>F;F+=8)D[T++]=this.g[S]>>>F&255;return D};function s(D,S){var T=a;return Object.prototype.hasOwnProperty.call(T,D)?T[D]:T[D]=S(D)}function o(D,S){this.h=S;for(var T=[],F=!0,A=D.length-1;0<=A;A--){var I=D[A]|0;F&&I==S||(T[A]=I,F=!1)}this.g=T}var a={};function l(D){return-128<=D&&128>D?s(D,function(S){return new o([S|0],0>S?-1:0)}):new o([D|0],0>D?-1:0)}function c(D){if(isNaN(D)||!isFinite(D))return g;if(0>D)return C(c(-D));for(var S=[],T=1,F=0;D>=T;F++)S[F]=D/T|0,T*=4294967296;return new o(S,0)}function h(D,S){if(D.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(D.charAt(0)=="-")return C(h(D.substring(1),S));if(0<=D.indexOf("-"))throw Error('number format error: interior "-" character');for(var T=c(Math.pow(S,8)),F=g,A=0;A<D.length;A+=8){var I=Math.min(8,D.length-A),L=parseInt(D.substring(A,A+I),S);8>I?(I=c(Math.pow(S,I)),F=F.j(I).add(c(L))):(F=F.j(T),F=F.add(c(L)))}return F}var g=l(0),y=l(1),p=l(16777216);t=o.prototype,t.m=function(){if(N(this))return-C(this).m();for(var D=0,S=1,T=0;T<this.g.length;T++){var F=this.i(T);D+=(0<=F?F:4294967296+F)*S,S*=4294967296}return D},t.toString=function(D){if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(_(this))return"0";if(N(this))return"-"+C(this).toString(D);for(var S=c(Math.pow(D,6)),T=this,F="";;){var A=j(T,S).g;T=x(T,A.j(S));var I=((0<T.g.length?T.g[0]:T.h)>>>0).toString(D);if(T=A,_(T))return I+F;for(;6>I.length;)I="0"+I;F=I+F}},t.i=function(D){return 0>D?0:D<this.g.length?this.g[D]:this.h};function _(D){if(D.h!=0)return!1;for(var S=0;S<D.g.length;S++)if(D.g[S]!=0)return!1;return!0}function N(D){return D.h==-1}t.l=function(D){return D=x(this,D),N(D)?-1:_(D)?0:1};function C(D){for(var S=D.g.length,T=[],F=0;F<S;F++)T[F]=~D.g[F];return new o(T,~D.h).add(y)}t.abs=function(){return N(this)?C(this):this},t.add=function(D){for(var S=Math.max(this.g.length,D.g.length),T=[],F=0,A=0;A<=S;A++){var I=F+(this.i(A)&65535)+(D.i(A)&65535),L=(I>>>16)+(this.i(A)>>>16)+(D.i(A)>>>16);F=L>>>16,I&=65535,L&=65535,T[A]=L<<16|I}return new o(T,T[T.length-1]&-2147483648?-1:0)};function x(D,S){return D.add(C(S))}t.j=function(D){if(_(this)||_(D))return g;if(N(this))return N(D)?C(this).j(C(D)):C(C(this).j(D));if(N(D))return C(this.j(C(D)));if(0>this.l(p)&&0>D.l(p))return c(this.m()*D.m());for(var S=this.g.length+D.g.length,T=[],F=0;F<2*S;F++)T[F]=0;for(F=0;F<this.g.length;F++)for(var A=0;A<D.g.length;A++){var I=this.i(F)>>>16,L=this.i(F)&65535,ne=D.i(A)>>>16,ie=D.i(A)&65535;T[2*F+2*A]+=L*ie,k(T,2*F+2*A),T[2*F+2*A+1]+=I*ie,k(T,2*F+2*A+1),T[2*F+2*A+1]+=L*ne,k(T,2*F+2*A+1),T[2*F+2*A+2]+=I*ne,k(T,2*F+2*A+2)}for(F=0;F<S;F++)T[F]=T[2*F+1]<<16|T[2*F];for(F=S;F<2*S;F++)T[F]=0;return new o(T,0)};function k(D,S){for(;(D[S]&65535)!=D[S];)D[S+1]+=D[S]>>>16,D[S]&=65535,S++}function R(D,S){this.g=D,this.h=S}function j(D,S){if(_(S))throw Error("division by zero");if(_(D))return new R(g,g);if(N(D))return S=j(C(D),S),new R(C(S.g),C(S.h));if(N(S))return S=j(D,C(S)),new R(C(S.g),S.h);if(30<D.g.length){if(N(D)||N(S))throw Error("slowDivide_ only works with positive integers.");for(var T=y,F=S;0>=F.l(D);)T=q(T),F=q(F);var A=Q(T,1),I=Q(F,1);for(F=Q(F,2),T=Q(T,2);!_(F);){var L=I.add(F);0>=L.l(D)&&(A=A.add(T),I=L),F=Q(F,1),T=Q(T,1)}return S=x(D,A.j(S)),new R(A,S)}for(A=g;0<=D.l(S);){for(T=Math.max(1,Math.floor(D.m()/S.m())),F=Math.ceil(Math.log(T)/Math.LN2),F=48>=F?1:Math.pow(2,F-48),I=c(T),L=I.j(S);N(L)||0<L.l(D);)T-=F,I=c(T),L=I.j(S);_(I)&&(I=y),A=A.add(I),D=x(D,L)}return new R(A,D)}t.A=function(D){return j(this,D).h},t.and=function(D){for(var S=Math.max(this.g.length,D.g.length),T=[],F=0;F<S;F++)T[F]=this.i(F)&D.i(F);return new o(T,this.h&D.h)},t.or=function(D){for(var S=Math.max(this.g.length,D.g.length),T=[],F=0;F<S;F++)T[F]=this.i(F)|D.i(F);return new o(T,this.h|D.h)},t.xor=function(D){for(var S=Math.max(this.g.length,D.g.length),T=[],F=0;F<S;F++)T[F]=this.i(F)^D.i(F);return new o(T,this.h^D.h)};function q(D){for(var S=D.g.length+1,T=[],F=0;F<S;F++)T[F]=D.i(F)<<1|D.i(F-1)>>>31;return new o(T,D.h)}function Q(D,S){var T=S>>5;S%=32;for(var F=D.g.length-T,A=[],I=0;I<F;I++)A[I]=0<S?D.i(I+T)>>>S|D.i(I+T+1)<<32-S:D.i(I+T);return new o(A,D.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,FN=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=h,sc=o}).apply(typeof Wx<"u"?Wx:typeof self<"u"?self:typeof window<"u"?window:{});var tp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var UN,$h,VN,Lp,w2,BN,zN,qN;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(f,b,P){return f==Array.prototype||f==Object.prototype||(f[b]=P.value),f};function n(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof tp=="object"&&tp];for(var b=0;b<f.length;++b){var P=f[b];if(P&&P.Math==Math)return P}throw Error("Cannot find global object")}var r=n(this);function i(f,b){if(b)e:{var P=r;f=f.split(".");for(var $=0;$<f.length-1;$++){var me=f[$];if(!(me in P))break e;P=P[me]}f=f[f.length-1],$=P[f],b=b($),b!=$&&b!=null&&e(P,f,{configurable:!0,writable:!0,value:b})}}function s(f,b){f instanceof String&&(f+="");var P=0,$=!1,me={next:function(){if(!$&&P<f.length){var Ne=P++;return{value:b(Ne,f[Ne]),done:!1}}return $=!0,{done:!0,value:void 0}}};return me[Symbol.iterator]=function(){return me},me}i("Array.prototype.values",function(f){return f||function(){return s(this,function(b,P){return P})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(f){var b=typeof f;return b=b!="object"?b:f?Array.isArray(f)?"array":b:"null",b=="array"||b=="object"&&typeof f.length=="number"}function c(f){var b=typeof f;return b=="object"&&f!=null||b=="function"}function h(f,b,P){return f.call.apply(f.bind,arguments)}function g(f,b,P){if(!f)throw Error();if(2<arguments.length){var $=Array.prototype.slice.call(arguments,2);return function(){var me=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(me,$),f.apply(b,me)}}return function(){return f.apply(b,arguments)}}function y(f,b,P){return y=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:g,y.apply(null,arguments)}function p(f,b){var P=Array.prototype.slice.call(arguments,1);return function(){var $=P.slice();return $.push.apply($,arguments),f.apply(this,$)}}function _(f,b){function P(){}P.prototype=b.prototype,f.aa=b.prototype,f.prototype=new P,f.prototype.constructor=f,f.Qb=function($,me,Ne){for(var Be=Array(arguments.length-2),Qt=2;Qt<arguments.length;Qt++)Be[Qt-2]=arguments[Qt];return b.prototype[me].apply($,Be)}}function N(f){const b=f.length;if(0<b){const P=Array(b);for(let $=0;$<b;$++)P[$]=f[$];return P}return[]}function C(f,b){for(let P=1;P<arguments.length;P++){const $=arguments[P];if(l($)){const me=f.length||0,Ne=$.length||0;f.length=me+Ne;for(let Be=0;Be<Ne;Be++)f[me+Be]=$[Be]}else f.push($)}}class x{constructor(b,P){this.i=b,this.j=P,this.h=0,this.g=null}get(){let b;return 0<this.h?(this.h--,b=this.g,this.g=b.next,b.next=null):b=this.i(),b}}function k(f){return/^[\s\xa0]*$/.test(f)}function R(){var f=a.navigator;return f&&(f=f.userAgent)?f:""}function j(f){return j[" "](f),f}j[" "]=function(){};var q=R().indexOf("Gecko")!=-1&&!(R().toLowerCase().indexOf("webkit")!=-1&&R().indexOf("Edge")==-1)&&!(R().indexOf("Trident")!=-1||R().indexOf("MSIE")!=-1)&&R().indexOf("Edge")==-1;function Q(f,b,P){for(const $ in f)b.call(P,f[$],$,f)}function D(f,b){for(const P in f)b.call(void 0,f[P],P,f)}function S(f){const b={};for(const P in f)b[P]=f[P];return b}const T="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function F(f,b){let P,$;for(let me=1;me<arguments.length;me++){$=arguments[me];for(P in $)f[P]=$[P];for(let Ne=0;Ne<T.length;Ne++)P=T[Ne],Object.prototype.hasOwnProperty.call($,P)&&(f[P]=$[P])}}function A(f){var b=1;f=f.split(":");const P=[];for(;0<b&&f.length;)P.push(f.shift()),b--;return f.length&&P.push(f.join(":")),P}function I(f){a.setTimeout(()=>{throw f},0)}function L(){var f=le;let b=null;return f.g&&(b=f.g,f.g=f.g.next,f.g||(f.h=null),b.next=null),b}class ne{constructor(){this.h=this.g=null}add(b,P){const $=ie.get();$.set(b,P),this.h?this.h.next=$:this.g=$,this.h=$}}var ie=new x(()=>new ue,f=>f.reset());class ue{constructor(){this.next=this.g=this.h=null}set(b,P){this.h=b,this.g=P,this.next=null}reset(){this.next=this.g=this.h=null}}let fe,J=!1,le=new ne,xe=()=>{const f=a.Promise.resolve(void 0);fe=()=>{f.then(we)}};var we=()=>{for(var f;f=L();){try{f.h.call(f.g)}catch(P){I(P)}var b=ie;b.j(f),100>b.h&&(b.h++,f.next=b.g,b.g=f)}J=!1};function O(){this.s=this.s,this.C=this.C}O.prototype.s=!1,O.prototype.ma=function(){this.s||(this.s=!0,this.N())},O.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function W(f,b){this.type=f,this.g=this.target=b,this.defaultPrevented=!1}W.prototype.h=function(){this.defaultPrevented=!0};var Y=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var f=!1,b=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const P=()=>{};a.addEventListener("test",P,b),a.removeEventListener("test",P,b)}catch{}return f}();function K(f,b){if(W.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f){var P=this.type=f.type,$=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;if(this.target=f.target||f.srcElement,this.g=b,b=f.relatedTarget){if(q){e:{try{j(b.nodeName);var me=!0;break e}catch{}me=!1}me||(b=null)}}else P=="mouseover"?b=f.fromElement:P=="mouseout"&&(b=f.toElement);this.relatedTarget=b,$?(this.clientX=$.clientX!==void 0?$.clientX:$.pageX,this.clientY=$.clientY!==void 0?$.clientY:$.pageY,this.screenX=$.screenX||0,this.screenY=$.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=typeof f.pointerType=="string"?f.pointerType:re[f.pointerType]||"",this.state=f.state,this.i=f,f.defaultPrevented&&K.aa.h.call(this)}}_(K,W);var re={2:"touch",3:"pen",4:"mouse"};K.prototype.h=function(){K.aa.h.call(this);var f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var ae="closure_listenable_"+(1e6*Math.random()|0),ve=0;function te(f,b,P,$,me){this.listener=f,this.proxy=null,this.src=b,this.type=P,this.capture=!!$,this.ha=me,this.key=++ve,this.da=this.fa=!1}function de(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function ge(f){this.src=f,this.g={},this.h=0}ge.prototype.add=function(f,b,P,$,me){var Ne=f.toString();f=this.g[Ne],f||(f=this.g[Ne]=[],this.h++);var Be=Te(f,b,$,me);return-1<Be?(b=f[Be],P||(b.fa=!1)):(b=new te(b,this.src,Ne,!!$,me),b.fa=P,f.push(b)),b};function Se(f,b){var P=b.type;if(P in f.g){var $=f.g[P],me=Array.prototype.indexOf.call($,b,void 0),Ne;(Ne=0<=me)&&Array.prototype.splice.call($,me,1),Ne&&(de(b),f.g[P].length==0&&(delete f.g[P],f.h--))}}function Te(f,b,P,$){for(var me=0;me<f.length;++me){var Ne=f[me];if(!Ne.da&&Ne.listener==b&&Ne.capture==!!P&&Ne.ha==$)return me}return-1}var Ue="closure_lm_"+(1e6*Math.random()|0),V={};function De(f,b,P,$,me){if(Array.isArray(b)){for(var Ne=0;Ne<b.length;Ne++)De(f,b[Ne],P,$,me);return null}return P=gt(P),f&&f[ae]?f.K(b,P,c($)?!!$.capture:!1,me):Ze(f,b,P,!1,$,me)}function Ze(f,b,P,$,me,Ne){if(!b)throw Error("Invalid event type");var Be=c(me)?!!me.capture:!!me,Qt=Ae(f);if(Qt||(f[Ue]=Qt=new ge(f)),P=Qt.add(b,P,$,Be,Ne),P.proxy)return P;if($=Ve(),P.proxy=$,$.src=f,$.listener=P,f.addEventListener)Y||(me=Be),me===void 0&&(me=!1),f.addEventListener(b.toString(),$,me);else if(f.attachEvent)f.attachEvent(qe(b.toString()),$);else if(f.addListener&&f.removeListener)f.addListener($);else throw Error("addEventListener and attachEvent are unavailable.");return P}function Ve(){function f(P){return b.call(f.src,f.listener,P)}const b=it;return f}function Ce(f,b,P,$,me){if(Array.isArray(b))for(var Ne=0;Ne<b.length;Ne++)Ce(f,b[Ne],P,$,me);else $=c($)?!!$.capture:!!$,P=gt(P),f&&f[ae]?(f=f.i,b=String(b).toString(),b in f.g&&(Ne=f.g[b],P=Te(Ne,P,$,me),-1<P&&(de(Ne[P]),Array.prototype.splice.call(Ne,P,1),Ne.length==0&&(delete f.g[b],f.h--)))):f&&(f=Ae(f))&&(b=f.g[b.toString()],f=-1,b&&(f=Te(b,P,$,me)),(P=-1<f?b[f]:null)&&Xe(P))}function Xe(f){if(typeof f!="number"&&f&&!f.da){var b=f.src;if(b&&b[ae])Se(b.i,f);else{var P=f.type,$=f.proxy;b.removeEventListener?b.removeEventListener(P,$,f.capture):b.detachEvent?b.detachEvent(qe(P),$):b.addListener&&b.removeListener&&b.removeListener($),(P=Ae(b))?(Se(P,f),P.h==0&&(P.src=null,b[Ue]=null)):de(f)}}}function qe(f){return f in V?V[f]:V[f]="on"+f}function it(f,b){if(f.da)f=!0;else{b=new K(b,this);var P=f.listener,$=f.ha||f.src;f.fa&&Xe(f),f=P.call($,b)}return f}function Ae(f){return f=f[Ue],f instanceof ge?f:null}var bt="__closure_events_fn_"+(1e9*Math.random()>>>0);function gt(f){return typeof f=="function"?f:(f[bt]||(f[bt]=function(b){return f.handleEvent(b)}),f[bt])}function $e(){O.call(this),this.i=new ge(this),this.M=this,this.F=null}_($e,O),$e.prototype[ae]=!0,$e.prototype.removeEventListener=function(f,b,P,$){Ce(this,f,b,P,$)};function ot(f,b){var P,$=f.F;if($)for(P=[];$;$=$.F)P.push($);if(f=f.M,$=b.type||b,typeof b=="string")b=new W(b,f);else if(b instanceof W)b.target=b.target||f;else{var me=b;b=new W($,f),F(b,me)}if(me=!0,P)for(var Ne=P.length-1;0<=Ne;Ne--){var Be=b.g=P[Ne];me=Nt(Be,$,!0,b)&&me}if(Be=b.g=f,me=Nt(Be,$,!0,b)&&me,me=Nt(Be,$,!1,b)&&me,P)for(Ne=0;Ne<P.length;Ne++)Be=b.g=P[Ne],me=Nt(Be,$,!1,b)&&me}$e.prototype.N=function(){if($e.aa.N.call(this),this.i){var f=this.i,b;for(b in f.g){for(var P=f.g[b],$=0;$<P.length;$++)de(P[$]);delete f.g[b],f.h--}}this.F=null},$e.prototype.K=function(f,b,P,$){return this.i.add(String(f),b,!1,P,$)},$e.prototype.L=function(f,b,P,$){return this.i.add(String(f),b,!0,P,$)};function Nt(f,b,P,$){if(b=f.i.g[String(b)],!b)return!0;b=b.concat();for(var me=!0,Ne=0;Ne<b.length;++Ne){var Be=b[Ne];if(Be&&!Be.da&&Be.capture==P){var Qt=Be.listener,Kn=Be.ha||Be.src;Be.fa&&Se(f.i,Be),me=Qt.call(Kn,$)!==!1&&me}}return me&&!$.defaultPrevented}function Ye(f,b,P){if(typeof f=="function")P&&(f=y(f,P));else if(f&&typeof f.handleEvent=="function")f=y(f.handleEvent,f);else throw Error("Invalid listener argument");return 2147483647<Number(b)?-1:a.setTimeout(f,b||0)}function wt(f){f.g=Ye(()=>{f.g=null,f.i&&(f.i=!1,wt(f))},f.l);const b=f.h;f.h=null,f.m.apply(null,b)}class et extends O{constructor(b,P){super(),this.m=b,this.l=P,this.h=null,this.i=!1,this.g=null}j(b){this.h=arguments,this.g?this.i=!0:wt(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ot(f){O.call(this),this.h=f,this.g={}}_(Ot,O);var Ft=[];function Ge(f){Q(f.g,function(b,P){this.g.hasOwnProperty(P)&&Xe(b)},f),f.g={}}Ot.prototype.N=function(){Ot.aa.N.call(this),Ge(this)},Ot.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ft=a.JSON.stringify,Et=a.JSON.parse,at=class{stringify(f){return a.JSON.stringify(f,void 0)}parse(f){return a.JSON.parse(f,void 0)}};function Ct(){}Ct.prototype.h=null;function Qe(f){return f.h||(f.h=f.i())}function tt(){}var kt={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ze(){W.call(this,"d")}_(ze,W);function Ke(){W.call(this,"c")}_(Ke,W);var ut={},qn=null;function zt(){return qn=qn||new $e}ut.La="serverreachability";function en(f){W.call(this,ut.La,f)}_(en,W);function qt(f){const b=zt();ot(b,new en(b))}ut.STAT_EVENT="statevent";function nt(f,b){W.call(this,ut.STAT_EVENT,f),this.stat=b}_(nt,W);function Ut(f){const b=zt();ot(b,new nt(b,f))}ut.Ma="timingevent";function Fn(f,b){W.call(this,ut.Ma,f),this.size=b}_(Fn,W);function Sn(f,b){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){f()},b)}function _n(){this.g=!0}_n.prototype.xa=function(){this.g=!1};function an(f,b,P,$,me,Ne){f.info(function(){if(f.g)if(Ne)for(var Be="",Qt=Ne.split("&"),Kn=0;Kn<Qt.length;Kn++){var Ht=Qt[Kn].split("=");if(1<Ht.length){var ln=Ht[0];Ht=Ht[1];var Cn=ln.split("_");Be=2<=Cn.length&&Cn[1]=="type"?Be+(ln+"="+Ht+"&"):Be+(ln+"=redacted&")}}else Be=null;else Be=Ne;return"XMLHTTP REQ ("+$+") [attempt "+me+"]: "+b+`
`+P+`
`+Be})}function tn(f,b,P,$,me,Ne,Be){f.info(function(){return"XMLHTTP RESP ("+$+") [ attempt "+me+"]: "+b+`
`+P+`
`+Ne+" "+Be})}function Wt(f,b,P,$){f.info(function(){return"XMLHTTP TEXT ("+b+"): "+Nr(f,P)+($?" "+$:"")})}function ni(f,b){f.info(function(){return"TIMEOUT: "+b})}_n.prototype.info=function(){};function Nr(f,b){if(!f.g)return b;if(!b)return null;try{var P=JSON.parse(b);if(P){for(f=0;f<P.length;f++)if(Array.isArray(P[f])){var $=P[f];if(!(2>$.length)){var me=$[1];if(Array.isArray(me)&&!(1>me.length)){var Ne=me[0];if(Ne!="noop"&&Ne!="stop"&&Ne!="close")for(var Be=1;Be<me.length;Be++)me[Be]=""}}}}return ft(P)}catch{return b}}var Un={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Sr={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ar;function Er(){}_(Er,Ct),Er.prototype.g=function(){return new XMLHttpRequest},Er.prototype.i=function(){return{}},Ar=new Er;function dn(f,b,P,$){this.j=f,this.i=b,this.l=P,this.R=$||1,this.U=new Ot(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Tr}function Tr(){this.i=null,this.g="",this.h=!1}var Dr={},zr={};function bi(f,b,P){f.L=1,f.v=Mo(kr(b)),f.m=P,f.P=!0,gs(f,null)}function gs(f,b){f.F=Date.now(),oo(f),f.A=kr(f.v);var P=f.A,$=f.R;Array.isArray($)||($=[String($)]),zc(P.i,"t",$),f.C=0,P=f.j.J,f.h=new Tr,f.g=er(f.j,P?b:null,!f.m),0<f.O&&(f.M=new et(y(f.Y,f,f.g),f.O)),b=f.U,P=f.g,$=f.ca;var me="readystatechange";Array.isArray(me)||(me&&(Ft[0]=me.toString()),me=Ft);for(var Ne=0;Ne<me.length;Ne++){var Be=De(P,me[Ne],$||b.handleEvent,!1,b.h||b);if(!Be)break;b.g[Be.key]=Be}b=f.H?S(f.H):{},f.m?(f.u||(f.u="POST"),b["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.A,f.u,f.m,b)):(f.u="GET",f.g.ea(f.A,f.u,null,b)),qt(),an(f.i,f.u,f.A,f.l,f.R,f.m)}dn.prototype.ca=function(f){f=f.target;const b=this.M;b&&_i(f)==3?b.j():this.Y(f)},dn.prototype.Y=function(f){try{if(f==this.g)e:{const Cn=_i(this.g);var b=this.g.Ba();const Qi=this.g.Z();if(!(3>Cn)&&(Cn!=3||this.g&&(this.h.h||this.g.oa()||Bl(this.g)))){this.J||Cn!=4||b==7||(b==8||0>=Qi?qt(3):qt(2)),ba(this);var P=this.g.Z();this.X=P;t:if(jo(this)){var $=Bl(this.g);f="";var me=$.length,Ne=_i(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ki(this),Or(this);var Be="";break t}this.h.i=new a.TextDecoder}for(b=0;b<me;b++)this.h.h=!0,f+=this.h.i.decode($[b],{stream:!(Ne&&b==me-1)});$.length=0,this.h.g+=f,this.C=0,Be=this.h.g}else Be=this.g.oa();if(this.o=P==200,tn(this.i,this.u,this.A,this.l,this.R,Cn,P),this.o){if(this.T&&!this.K){t:{if(this.g){var Qt,Kn=this.g;if((Qt=Kn.g?Kn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!k(Qt)){var Ht=Qt;break t}}Ht=null}if(P=Ht)Wt(this.i,this.l,P,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,_a(this,P);else{this.o=!1,this.s=3,Ut(12),Ki(this),Or(this);break e}}if(this.P){P=!0;let ri;for(;!this.J&&this.C<Be.length;)if(ri=oh(this,Be),ri==zr){Cn==4&&(this.s=4,Ut(14),P=!1),Wt(this.i,this.l,null,"[Incomplete Response]");break}else if(ri==Dr){this.s=4,Ut(15),Wt(this.i,this.l,Be,"[Invalid Chunk]"),P=!1;break}else Wt(this.i,this.l,ri,null),_a(this,ri);if(jo(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Cn!=4||Be.length!=0||this.h.h||(this.s=1,Ut(16),P=!1),this.o=this.o&&P,!P)Wt(this.i,this.l,Be,"[Invalid Chunked Response]"),Ki(this),Or(this);else if(0<Be.length&&!this.W){this.W=!0;var ln=this.j;ln.g==this&&ln.ba&&!ln.M&&(ln.j.info("Great, no buffering proxy detected. Bytes received: "+Be.length),rt(ln),ln.M=!0,Ut(11))}}else Wt(this.i,this.l,Be,null),_a(this,Be);Cn==4&&Ki(this),this.o&&!this.J&&(Cn==4?Pt(this.j,this):(this.o=!1,oo(this)))}else Hc(this.g),P==400&&0<Be.indexOf("Unknown SID")?(this.s=3,Ut(12)):(this.s=0,Ut(13)),Ki(this),Or(this)}}}catch{}finally{}};function jo(f){return f.g?f.u=="GET"&&f.L!=2&&f.j.Ca:!1}function oh(f,b){var P=f.C,$=b.indexOf(`
`,P);return $==-1?zr:(P=Number(b.substring(P,$)),isNaN(P)?Dr:($+=1,$+P>b.length?zr:(b=b.slice($,$+P),f.C=$+P,b)))}dn.prototype.cancel=function(){this.J=!0,Ki(this)};function oo(f){f.S=Date.now()+f.I,Ll(f,f.I)}function Ll(f,b){if(f.B!=null)throw Error("WatchDog timer not null");f.B=Sn(y(f.ba,f),b)}function ba(f){f.B&&(a.clearTimeout(f.B),f.B=null)}dn.prototype.ba=function(){this.B=null;const f=Date.now();0<=f-this.S?(ni(this.i,this.A),this.L!=2&&(qt(),Ut(17)),Ki(this),this.s=2,Or(this)):Ll(this,this.S-f)};function Or(f){f.j.G==0||f.J||Pt(f.j,f)}function Ki(f){ba(f);var b=f.M;b&&typeof b.ma=="function"&&b.ma(),f.M=null,Ge(f.U),f.g&&(b=f.g,f.g=null,b.abort(),b.ma())}function _a(f,b){try{var P=f.j;if(P.G!=0&&(P.g==f||Di(P.h,f))){if(!f.K&&Di(P.h,f)&&P.G==3){try{var $=P.Da.g.parse(b)}catch{$=null}if(Array.isArray($)&&$.length==3){var me=$;if(me[0]==0){e:if(!P.u){if(P.g)if(P.g.F+3e3<f.F)St(P),Ns(P);else break e;Re(P),Ut(18)}}else P.za=me[1],0<P.za-P.T&&37500>me[2]&&P.F&&P.v==0&&!P.C&&(P.C=Sn(y(P.Za,P),6e3));if(1>=Ol(P.h)&&P.ca){try{P.ca()}catch{}P.ca=void 0}}else hn(P,11)}else if((f.K||P.g==f)&&St(P),!k(b))for(me=P.Da.g.parse(b),b=0;b<me.length;b++){let Ht=me[b];if(P.T=Ht[0],Ht=Ht[1],P.G==2)if(Ht[0]=="c"){P.K=Ht[1],P.ia=Ht[2];const ln=Ht[3];ln!=null&&(P.la=ln,P.j.info("VER="+P.la));const Cn=Ht[4];Cn!=null&&(P.Aa=Cn,P.j.info("SVER="+P.Aa));const Qi=Ht[5];Qi!=null&&typeof Qi=="number"&&0<Qi&&($=1.5*Qi,P.L=$,P.j.info("backChannelRequestTimeoutMs_="+$)),$=P;const ri=f.g;if(ri){const Hr=ri.g?ri.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Hr){var Ne=$.h;Ne.g||Hr.indexOf("spdy")==-1&&Hr.indexOf("quic")==-1&&Hr.indexOf("h2")==-1||(Ne.j=Ne.l,Ne.g=new Set,Ne.h&&(ao(Ne,Ne.h),Ne.h=null))}if($.D){const Vs=ri.g?ri.g.getResponseHeader("X-HTTP-Session-Id"):null;Vs&&($.ya=Vs,Gt($.I,$.D,Vs))}}P.G=3,P.l&&P.l.ua(),P.ba&&(P.R=Date.now()-f.F,P.j.info("Handshake RTT: "+P.R+"ms")),$=P;var Be=f;if($.qa=pn($,$.J?$.ia:null,$.W),Be.K){Mc($.h,Be);var Qt=Be,Kn=$.L;Kn&&(Qt.I=Kn),Qt.B&&(ba(Qt),oo(Qt)),$.g=Be}else ke($);0<P.i.length&&v(P)}else Ht[0]!="stop"&&Ht[0]!="close"||hn(P,7);else P.G==3&&(Ht[0]=="stop"||Ht[0]=="close"?Ht[0]=="stop"?hn(P,7):ka(P):Ht[0]!="noop"&&P.l&&P.l.ta(Ht),P.v=0)}}qt(4)}catch{}}var Rl=class{constructor(f,b){this.g=f,this.map=b}};function jl(f){this.l=f||10,a.PerformanceNavigationTiming?(f=a.performance.getEntriesByType("navigation"),f=0<f.length&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Dl(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function Ol(f){return f.h?1:f.g?f.g.size:0}function Di(f,b){return f.h?f.h==b:f.g?f.g.has(b):!1}function ao(f,b){f.g?f.g.add(b):f.h=b}function Mc(f,b){f.h&&f.h==b?f.h=null:f.g&&f.g.has(b)&&f.g.delete(b)}jl.prototype.cancel=function(){if(this.i=Hn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function Hn(f){if(f.h!=null)return f.i.concat(f.h.D);if(f.g!=null&&f.g.size!==0){let b=f.i;for(const P of f.g.values())b=b.concat(P.D);return b}return N(f.i)}function Fc(f){if(f.V&&typeof f.V=="function")return f.V();if(typeof Map<"u"&&f instanceof Map||typeof Set<"u"&&f instanceof Set)return Array.from(f.values());if(typeof f=="string")return f.split("");if(l(f)){for(var b=[],P=f.length,$=0;$<P;$++)b.push(f[$]);return b}b=[],P=0;for($ in f)b[P++]=f[$];return b}function ys(f){if(f.na&&typeof f.na=="function")return f.na();if(!f.V||typeof f.V!="function"){if(typeof Map<"u"&&f instanceof Map)return Array.from(f.keys());if(!(typeof Set<"u"&&f instanceof Set)){if(l(f)||typeof f=="string"){var b=[];f=f.length;for(var P=0;P<f;P++)b.push(P);return b}b=[],P=0;for(const $ in f)b[P++]=$;return b}}}function Do(f,b){if(f.forEach&&typeof f.forEach=="function")f.forEach(b,void 0);else if(l(f)||typeof f=="string")Array.prototype.forEach.call(f,b,void 0);else for(var P=ys(f),$=Fc(f),me=$.length,Ne=0;Ne<me;Ne++)b.call(void 0,$[Ne],P&&P[Ne],f)}var Ml=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Oi(f,b){if(f){f=f.split("&");for(var P=0;P<f.length;P++){var $=f[P].indexOf("="),me=null;if(0<=$){var Ne=f[P].substring(0,$);me=f[P].substring($+1)}else Ne=f[P];b(Ne,me?decodeURIComponent(me.replace(/\+/g," ")):"")}}}function An(f){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,f instanceof An){this.h=f.h,Oo(this,f.j),this.o=f.o,this.g=f.g,Na(this,f.s),this.l=f.l;var b=f.i,P=new qr;P.i=b.i,b.g&&(P.g=new Map(b.g),P.h=b.h),Uc(this,P),this.m=f.m}else f&&(b=String(f).match(Ml))?(this.h=!1,Oo(this,b[1]||"",!0),this.o=lo(b[2]||""),this.g=lo(b[3]||"",!0),Na(this,b[4]),this.l=lo(b[5]||"",!0),Uc(this,b[6]||"",!0),this.m=lo(b[7]||"")):(this.h=!1,this.i=new qr(null,this.h))}An.prototype.toString=function(){var f=[],b=this.j;b&&f.push(vs(b,Vc,!0),":");var P=this.g;return(P||b=="file")&&(f.push("//"),(b=this.o)&&f.push(vs(b,Vc,!0),"@"),f.push(encodeURIComponent(String(P)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),P=this.s,P!=null&&f.push(":",String(P))),(P=this.l)&&(this.g&&P.charAt(0)!="/"&&f.push("/"),f.push(vs(P,P.charAt(0)=="/"?lh:ah,!0))),(P=this.i.toString())&&f.push("?",P),(P=this.m)&&f.push("#",vs(P,Bc)),f.join("")};function kr(f){return new An(f)}function Oo(f,b,P){f.j=P?lo(b,!0):b,f.j&&(f.j=f.j.replace(/:$/,""))}function Na(f,b){if(b){if(b=Number(b),isNaN(b)||0>b)throw Error("Bad port number "+b);f.s=b}else f.s=null}function Uc(f,b,P){b instanceof qr?(f.i=b,ch(f.i,f.h)):(P||(b=vs(b,Fl)),f.i=new qr(b,f.h))}function Gt(f,b,P){f.i.set(b,P)}function Mo(f){return Gt(f,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),f}function lo(f,b){return f?b?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function vs(f,b,P){return typeof f=="string"?(f=encodeURI(f).replace(b,Fo),P&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function Fo(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var Vc=/[#\/\?@]/g,ah=/[#\?:]/g,lh=/[#\?]/g,Fl=/[#\?@]/g,Bc=/#/g;function qr(f,b){this.h=this.g=null,this.i=f||null,this.j=!!b}function ws(f){f.g||(f.g=new Map,f.h=0,f.i&&Oi(f.i,function(b,P){f.add(decodeURIComponent(b.replace(/\+/g," ")),P)}))}t=qr.prototype,t.add=function(f,b){ws(this),this.i=null,f=_t(this,f);var P=this.g.get(f);return P||this.g.set(f,P=[]),P.push(b),this.h+=1,this};function co(f,b){ws(f),b=_t(f,b),f.g.has(b)&&(f.i=null,f.h-=f.g.get(b).length,f.g.delete(b))}function Sa(f,b){return ws(f),b=_t(f,b),f.g.has(b)}t.forEach=function(f,b){ws(this),this.g.forEach(function(P,$){P.forEach(function(me){f.call(b,me,$,this)},this)},this)},t.na=function(){ws(this);const f=Array.from(this.g.values()),b=Array.from(this.g.keys()),P=[];for(let $=0;$<b.length;$++){const me=f[$];for(let Ne=0;Ne<me.length;Ne++)P.push(b[$])}return P},t.V=function(f){ws(this);let b=[];if(typeof f=="string")Sa(this,f)&&(b=b.concat(this.g.get(_t(this,f))));else{f=Array.from(this.g.values());for(let P=0;P<f.length;P++)b=b.concat(f[P])}return b},t.set=function(f,b){return ws(this),this.i=null,f=_t(this,f),Sa(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[b]),this.h+=1,this},t.get=function(f,b){return f?(f=this.V(f),0<f.length?String(f[0]):b):b};function zc(f,b,P){co(f,b),0<P.length&&(f.i=null,f.g.set(_t(f,b),N(P)),f.h+=P.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],b=Array.from(this.g.keys());for(var P=0;P<b.length;P++){var $=b[P];const Ne=encodeURIComponent(String($)),Be=this.V($);for($=0;$<Be.length;$++){var me=Ne;Be[$]!==""&&(me+="="+encodeURIComponent(String(Be[$]))),f.push(me)}}return this.i=f.join("&")};function _t(f,b){return b=String(b),f.j&&(b=b.toLowerCase()),b}function ch(f,b){b&&!f.j&&(ws(f),f.i=null,f.g.forEach(function(P,$){var me=$.toLowerCase();$!=me&&(co(this,$),zc(this,me,P))},f)),f.j=b}function uh(f,b){const P=new _n;if(a.Image){const $=new Image;$.onload=p(Mr,P,"TestLoadImage: loaded",!0,b,$),$.onerror=p(Mr,P,"TestLoadImage: error",!1,b,$),$.onabort=p(Mr,P,"TestLoadImage: abort",!1,b,$),$.ontimeout=p(Mr,P,"TestLoadImage: timeout",!1,b,$),a.setTimeout(function(){$.ontimeout&&$.ontimeout()},1e4),$.src=f}else b(!1)}function hh(f,b){const P=new _n,$=new AbortController,me=setTimeout(()=>{$.abort(),Mr(P,"TestPingServer: timeout",!1,b)},1e4);fetch(f,{signal:$.signal}).then(Ne=>{clearTimeout(me),Ne.ok?Mr(P,"TestPingServer: ok",!0,b):Mr(P,"TestPingServer: server error",!1,b)}).catch(()=>{clearTimeout(me),Mr(P,"TestPingServer: error",!1,b)})}function Mr(f,b,P,$,me){try{me&&(me.onload=null,me.onerror=null,me.onabort=null,me.ontimeout=null),$(P)}catch{}}function Fs(){this.g=new at}function dh(f,b,P){const $=P||"";try{Do(f,function(me,Ne){let Be=me;c(me)&&(Be=ft(me)),b.push($+Ne+"="+encodeURIComponent(Be))})}catch(me){throw b.push($+"type="+encodeURIComponent("_badmap")),me}}function Aa(f){this.l=f.Ub||null,this.j=f.eb||!1}_(Aa,Ct),Aa.prototype.g=function(){return new Us(this.l,this.j)},Aa.prototype.i=function(f){return function(){return f}}({});function Us(f,b){$e.call(this),this.D=f,this.o=b,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}_(Us,$e),t=Us.prototype,t.open=function(f,b){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=f,this.A=b,this.readyState=1,Uo(this)},t.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const b={headers:this.u,method:this.B,credentials:this.m,cache:void 0};f&&(b.body=f),(this.D||a).fetch(new Request(this.A,b)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Yi(this)),this.readyState=0},t.Sa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,Uo(this)),this.g&&(this.readyState=3,Uo(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ea(this)}else f.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ea(f){f.j.read().then(f.Pa.bind(f)).catch(f.ga.bind(f))}t.Pa=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var b=f.value?f.value:new Uint8Array(0);(b=this.v.decode(b,{stream:!f.done}))&&(this.response=this.responseText+=b)}f.done?Yi(this):Uo(this),this.readyState==3&&Ea(this)}},t.Ra=function(f){this.g&&(this.response=this.responseText=f,Yi(this))},t.Qa=function(f){this.g&&(this.response=f,Yi(this))},t.ga=function(){this.g&&Yi(this)};function Yi(f){f.readyState=4,f.l=null,f.j=null,f.v=null,Uo(f)}t.setRequestHeader=function(f,b){this.u.append(f,b)},t.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],b=this.h.entries();for(var P=b.next();!P.done;)P=P.value,f.push(P[0]+": "+P[1]),P=b.next();return f.join(`\r
`)};function Uo(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(Us.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function xs(f){let b="";return Q(f,function(P,$){b+=$,b+=":",b+=P,b+=`\r
`}),b}function Ul(f,b,P){e:{for($ in P){var $=!1;break e}$=!0}$||(P=xs(P),typeof f=="string"?P!=null&&encodeURIComponent(String(P)):Gt(f,b,P))}function Nn(f){$e.call(this),this.headers=new Map,this.o=f||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}_(Nn,$e);var Vl=/^https?$/i,qc=["POST","PUT"];t=Nn.prototype,t.Ha=function(f){this.J=f},t.ea=function(f,b,P,$){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);b=b?b.toUpperCase():"GET",this.D=f,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ar.g(),this.v=this.o?Qe(this.o):Qe(Ar),this.g.onreadystatechange=y(this.Ea,this);try{this.B=!0,this.g.open(b,String(f),!0),this.B=!1}catch(Ne){bs(this,Ne);return}if(f=P||"",P=new Map(this.headers),$)if(Object.getPrototypeOf($)===Object.prototype)for(var me in $)P.set(me,$[me]);else if(typeof $.keys=="function"&&typeof $.get=="function")for(const Ne of $.keys())P.set(Ne,$.get(Ne));else throw Error("Unknown input type for opt_headers: "+String($));$=Array.from(P.keys()).find(Ne=>Ne.toLowerCase()=="content-type"),me=a.FormData&&f instanceof a.FormData,!(0<=Array.prototype.indexOf.call(qc,b,void 0))||$||me||P.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Ne,Be]of P)this.g.setRequestHeader(Ne,Be);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ho(this),this.u=!0,this.g.send(f),this.u=!1}catch(Ne){bs(this,Ne)}};function bs(f,b){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=b,f.m=5,Ta(f),uo(f)}function Ta(f){f.A||(f.A=!0,ot(f,"complete"),ot(f,"error"))}t.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=f||7,ot(this,"complete"),ot(this,"abort"),uo(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),uo(this,!0)),Nn.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Vo(this):this.bb())},t.bb=function(){Vo(this)};function Vo(f){if(f.h&&typeof o<"u"&&(!f.v[1]||_i(f)!=4||f.Z()!=2)){if(f.u&&_i(f)==4)Ye(f.Ea,0,f);else if(ot(f,"readystatechange"),_i(f)==4){f.h=!1;try{const Be=f.Z();e:switch(Be){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var b=!0;break e;default:b=!1}var P;if(!(P=b)){var $;if($=Be===0){var me=String(f.D).match(Ml)[1]||null;!me&&a.self&&a.self.location&&(me=a.self.location.protocol.slice(0,-1)),$=!Vl.test(me?me.toLowerCase():"")}P=$}if(P)ot(f,"complete"),ot(f,"success");else{f.m=6;try{var Ne=2<_i(f)?f.g.statusText:""}catch{Ne=""}f.l=Ne+" ["+f.Z()+"]",Ta(f)}}finally{uo(f)}}}}function uo(f,b){if(f.g){ho(f);const P=f.g,$=f.v[0]?()=>{}:null;f.g=null,f.v=null,b||ot(f,"ready");try{P.onreadystatechange=$}catch{}}}function ho(f){f.I&&(a.clearTimeout(f.I),f.I=null)}t.isActive=function(){return!!this.g};function _i(f){return f.g?f.g.readyState:0}t.Z=function(){try{return 2<_i(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(f){if(this.g){var b=this.g.responseText;return f&&b.indexOf(f)==0&&(b=b.substring(f.length)),Et(b)}};function Bl(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.H){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function Hc(f){const b={};f=(f.g&&2<=_i(f)&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let $=0;$<f.length;$++){if(k(f[$]))continue;var P=A(f[$]);const me=P[0];if(P=P[1],typeof P!="string")continue;P=P.trim();const Ne=b[me]||[];b[me]=Ne,Ne.push(P)}D(b,function($){return $.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ni(f,b,P){return P&&P.internalChannelParams&&P.internalChannelParams[f]||b}function _s(f){this.Aa=0,this.i=[],this.j=new _n,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ni("failFast",!1,f),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ni("baseRetryDelayMs",5e3,f),this.cb=Ni("retryDelaySeedMs",1e4,f),this.Wa=Ni("forwardChannelMaxRetries",2,f),this.wa=Ni("forwardChannelRequestTimeoutMs",2e4,f),this.pa=f&&f.xmlHttpFactory||void 0,this.Xa=f&&f.Tb||void 0,this.Ca=f&&f.useFetchStreams||!1,this.L=void 0,this.J=f&&f.supportsCrossDomainXhr||!1,this.K="",this.h=new jl(f&&f.concurrentRequestLimit),this.Da=new Fs,this.P=f&&f.fastHandshake||!1,this.O=f&&f.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=f&&f.Rb||!1,f&&f.xa&&this.j.xa(),f&&f.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&f&&f.detectBufferingProxy||!1,this.ja=void 0,f&&f.longPollingTimeout&&0<f.longPollingTimeout&&(this.ja=f.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=_s.prototype,t.la=8,t.G=1,t.connect=function(f,b,P,$){Ut(0),this.W=f,this.H=b||{},P&&$!==void 0&&(this.H.OSID=P,this.H.OAID=$),this.F=this.X,this.I=pn(this,null,this.W),v(this)};function ka(f){if(zl(f),f.G==3){var b=f.U++,P=kr(f.I);if(Gt(P,"SID",f.K),Gt(P,"RID",b),Gt(P,"TYPE","terminate"),oe(f,P),b=new dn(f,f.j,b),b.L=2,b.v=Mo(kr(P)),P=!1,a.navigator&&a.navigator.sendBeacon)try{P=a.navigator.sendBeacon(b.v.toString(),"")}catch{}!P&&a.Image&&(new Image().src=b.v,P=!0),P||(b.g=er(b.j,null),b.g.ea(b.v)),b.F=Date.now(),oo(b)}$n(f)}function Ns(f){f.g&&(rt(f),f.g.cancel(),f.g=null)}function zl(f){Ns(f),f.u&&(a.clearTimeout(f.u),f.u=null),St(f),f.h.cancel(),f.s&&(typeof f.s=="number"&&a.clearTimeout(f.s),f.s=null)}function v(f){if(!Dl(f.h)&&!f.s){f.s=!0;var b=f.Ga;fe||xe(),J||(fe(),J=!0),le.add(b,f),f.B=0}}function M(f,b){return Ol(f.h)>=f.h.j-(f.s?1:0)?!1:f.s?(f.i=b.D.concat(f.i),!0):f.G==1||f.G==2||f.B>=(f.Va?0:f.Wa)?!1:(f.s=Sn(y(f.Ga,f,b),Kt(f,f.B)),f.B++,!0)}t.Ga=function(f){if(this.s)if(this.s=null,this.G==1){if(!f){this.U=Math.floor(1e5*Math.random()),f=this.U++;const me=new dn(this,this.j,f);let Ne=this.o;if(this.S&&(Ne?(Ne=S(Ne),F(Ne,this.S)):Ne=this.S),this.m!==null||this.O||(me.H=Ne,Ne=null),this.P)e:{for(var b=0,P=0;P<this.i.length;P++){t:{var $=this.i[P];if("__data__"in $.map&&($=$.map.__data__,typeof $=="string")){$=$.length;break t}$=void 0}if($===void 0)break;if(b+=$,4096<b){b=P;break e}if(b===4096||P===this.i.length-1){b=P+1;break e}}b=1e3}else b=1e3;b=pe(this,me,b),P=kr(this.I),Gt(P,"RID",f),Gt(P,"CVER",22),this.D&&Gt(P,"X-HTTP-Session-Id",this.D),oe(this,P),Ne&&(this.O?b="headers="+encodeURIComponent(String(xs(Ne)))+"&"+b:this.m&&Ul(P,this.m,Ne)),ao(this.h,me),this.Ua&&Gt(P,"TYPE","init"),this.P?(Gt(P,"$req",b),Gt(P,"SID","null"),me.T=!0,bi(me,P,null)):bi(me,P,b),this.G=2}}else this.G==3&&(f?X(this,f):this.i.length==0||Dl(this.h)||X(this))};function X(f,b){var P;b?P=b.l:P=f.U++;const $=kr(f.I);Gt($,"SID",f.K),Gt($,"RID",P),Gt($,"AID",f.T),oe(f,$),f.m&&f.o&&Ul($,f.m,f.o),P=new dn(f,f.j,P,f.B+1),f.m===null&&(P.H=f.o),b&&(f.i=b.D.concat(f.i)),b=pe(f,P,1e3),P.I=Math.round(.5*f.wa)+Math.round(.5*f.wa*Math.random()),ao(f.h,P),bi(P,$,b)}function oe(f,b){f.H&&Q(f.H,function(P,$){Gt(b,$,P)}),f.l&&Do({},function(P,$){Gt(b,$,P)})}function pe(f,b,P){P=Math.min(f.i.length,P);var $=f.l?y(f.l.Na,f.l,f):null;e:{var me=f.i;let Ne=-1;for(;;){const Be=["count="+P];Ne==-1?0<P?(Ne=me[0].g,Be.push("ofs="+Ne)):Ne=0:Be.push("ofs="+Ne);let Qt=!0;for(let Kn=0;Kn<P;Kn++){let Ht=me[Kn].g;const ln=me[Kn].map;if(Ht-=Ne,0>Ht)Ne=Math.max(0,me[Kn].g-100),Qt=!1;else try{dh(ln,Be,"req"+Ht+"_")}catch{$&&$(ln)}}if(Qt){$=Be.join("&");break e}}}return f=f.i.splice(0,P),b.D=f,$}function ke(f){if(!f.g&&!f.u){f.Y=1;var b=f.Fa;fe||xe(),J||(fe(),J=!0),le.add(b,f),f.v=0}}function Re(f){return f.g||f.u||3<=f.v?!1:(f.Y++,f.u=Sn(y(f.Fa,f),Kt(f,f.v)),f.v++,!0)}t.Fa=function(){if(this.u=null,ht(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var f=2*this.R;this.j.info("BP detection timer enabled: "+f),this.A=Sn(y(this.ab,this),f)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ut(10),Ns(this),ht(this))};function rt(f){f.A!=null&&(a.clearTimeout(f.A),f.A=null)}function ht(f){f.g=new dn(f,f.j,"rpc",f.Y),f.m===null&&(f.g.H=f.o),f.g.O=0;var b=kr(f.qa);Gt(b,"RID","rpc"),Gt(b,"SID",f.K),Gt(b,"AID",f.T),Gt(b,"CI",f.F?"0":"1"),!f.F&&f.ja&&Gt(b,"TO",f.ja),Gt(b,"TYPE","xmlhttp"),oe(f,b),f.m&&f.o&&Ul(b,f.m,f.o),f.L&&(f.g.I=f.L);var P=f.g;f=f.ia,P.L=1,P.v=Mo(kr(b)),P.m=null,P.P=!0,gs(P,f)}t.Za=function(){this.C!=null&&(this.C=null,Ns(this),Re(this),Ut(19))};function St(f){f.C!=null&&(a.clearTimeout(f.C),f.C=null)}function Pt(f,b){var P=null;if(f.g==b){St(f),rt(f),f.g=null;var $=2}else if(Di(f.h,b))P=b.D,Mc(f.h,b),$=1;else return;if(f.G!=0){if(b.o)if($==1){P=b.m?b.m.length:0,b=Date.now()-b.F;var me=f.B;$=zt(),ot($,new Fn($,P)),v(f)}else ke(f);else if(me=b.s,me==3||me==0&&0<b.X||!($==1&&M(f,b)||$==2&&Re(f)))switch(P&&0<P.length&&(b=f.h,b.i=b.i.concat(P)),me){case 1:hn(f,5);break;case 4:hn(f,10);break;case 3:hn(f,6);break;default:hn(f,2)}}}function Kt(f,b){let P=f.Ta+Math.floor(Math.random()*f.cb);return f.isActive()||(P*=2),P*b}function hn(f,b){if(f.j.info("Error code "+b),b==2){var P=y(f.fb,f),$=f.Xa;const me=!$;$=new An($||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Oo($,"https"),Mo($),me?uh($.toString(),P):hh($.toString(),P)}else Ut(2);f.G=0,f.l&&f.l.sa(b),$n(f),zl(f)}t.fb=function(f){f?(this.j.info("Successfully pinged google.com"),Ut(2)):(this.j.info("Failed to ping google.com"),Ut(1))};function $n(f){if(f.G=0,f.ka=[],f.l){const b=Hn(f.h);(b.length!=0||f.i.length!=0)&&(C(f.ka,b),C(f.ka,f.i),f.h.i.length=0,N(f.i),f.i.length=0),f.l.ra()}}function pn(f,b,P){var $=P instanceof An?kr(P):new An(P);if($.g!="")b&&($.g=b+"."+$.g),Na($,$.s);else{var me=a.location;$=me.protocol,b=b?b+"."+me.hostname:me.hostname,me=+me.port;var Ne=new An(null);$&&Oo(Ne,$),b&&(Ne.g=b),me&&Na(Ne,me),P&&(Ne.l=P),$=Ne}return P=f.D,b=f.ya,P&&b&&Gt($,P,b),Gt($,"VER",f.la),oe(f,$),$}function er(f,b,P){if(b&&!f.J)throw Error("Can't create secondary domain capable XhrIo object.");return b=f.Ca&&!f.pa?new Nn(new Aa({eb:P})):new Nn(f.pa),b.Ha(f.J),b}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Wn(){}t=Wn.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function tr(){}tr.prototype.g=function(f,b){return new Gn(f,b)};function Gn(f,b){$e.call(this),this.g=new _s(b),this.l=f,this.h=b&&b.messageUrlParams||null,f=b&&b.messageHeaders||null,b&&b.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=b&&b.initMessageHeaders||null,b&&b.messageContentType&&(f?f["X-WebChannel-Content-Type"]=b.messageContentType:f={"X-WebChannel-Content-Type":b.messageContentType}),b&&b.va&&(f?f["X-WebChannel-Client-Profile"]=b.va:f={"X-WebChannel-Client-Profile":b.va}),this.g.S=f,(f=b&&b.Sb)&&!k(f)&&(this.g.m=f),this.v=b&&b.supportsCrossDomainXhr||!1,this.u=b&&b.sendRawJson||!1,(b=b&&b.httpSessionIdParam)&&!k(b)&&(this.g.D=b,f=this.h,f!==null&&b in f&&(f=this.h,b in f&&delete f[b])),this.j=new As(this)}_(Gn,$e),Gn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Gn.prototype.close=function(){ka(this.g)},Gn.prototype.o=function(f){var b=this.g;if(typeof f=="string"){var P={};P.__data__=f,f=P}else this.u&&(P={},P.__data__=ft(f),f=P);b.i.push(new Rl(b.Ya++,f)),b.G==3&&v(b)},Gn.prototype.N=function(){this.g.l=null,delete this.j,ka(this.g),delete this.g,Gn.aa.N.call(this)};function Mi(f){ze.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var b=f.__sm__;if(b){e:{for(const P in b){f=P;break e}f=void 0}(this.i=f)&&(f=this.i,b=b!==null&&f in b?b[f]:void 0),this.data=b}else this.data=f}_(Mi,ze);function Ss(){Ke.call(this),this.status=1}_(Ss,Ke);function As(f){this.g=f}_(As,Wn),As.prototype.ua=function(){ot(this.g,"a")},As.prototype.ta=function(f){ot(this.g,new Mi(f))},As.prototype.sa=function(f){ot(this.g,new Ss)},As.prototype.ra=function(){ot(this.g,"b")},tr.prototype.createWebChannel=tr.prototype.g,Gn.prototype.send=Gn.prototype.o,Gn.prototype.open=Gn.prototype.m,Gn.prototype.close=Gn.prototype.close,qN=function(){return new tr},zN=function(){return zt()},BN=ut,w2={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Un.NO_ERROR=0,Un.TIMEOUT=8,Un.HTTP_ERROR=6,Lp=Un,Sr.COMPLETE="complete",VN=Sr,tt.EventType=kt,kt.OPEN="a",kt.CLOSE="b",kt.ERROR="c",kt.MESSAGE="d",$e.prototype.listen=$e.prototype.K,$h=tt,Nn.prototype.listenOnce=Nn.prototype.L,Nn.prototype.getLastError=Nn.prototype.Ka,Nn.prototype.getLastErrorCode=Nn.prototype.Ba,Nn.prototype.getStatus=Nn.prototype.Z,Nn.prototype.getResponseJson=Nn.prototype.Oa,Nn.prototype.getResponseText=Nn.prototype.oa,Nn.prototype.send=Nn.prototype.ea,Nn.prototype.setWithCredentials=Nn.prototype.Ha,UN=Nn}).apply(typeof tp<"u"?tp:typeof self<"u"?self:typeof window<"u"?window:{});const Gx="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}di.UNAUTHENTICATED=new di(null),di.GOOGLE_CREDENTIALS=new di("google-credentials-uid"),di.FIRST_PARTY=new di("first-party-uid"),di.MOCK_USER=new di("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let eh="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mc=new Zy("@firebase/firestore");function Dh(){return mc.logLevel}function dt(t,...e){if(mc.logLevel<=Jt.DEBUG){const n=e.map(uv);mc.debug(`Firestore (${eh}): ${t}`,...n)}}function ma(t,...e){if(mc.logLevel<=Jt.ERROR){const n=e.map(uv);mc.error(`Firestore (${eh}): ${t}`,...n)}}function Vu(t,...e){if(mc.logLevel<=Jt.WARN){const n=e.map(uv);mc.warn(`Firestore (${eh}): ${t}`,...n)}}function uv(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function It(t="Unexpected state"){const e=`FIRESTORE (${eh}) INTERNAL ASSERTION FAILED: `+t;throw ma(e),new Error(e)}function xn(t,e){t||It()}function Dt(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Le={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Je extends ro{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aa{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HN{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class yR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(di.UNAUTHENTICATED))}shutdown(){}}class vR{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class wR{constructor(e){this.t=e,this.currentUser=di.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){xn(this.o===void 0);let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new aa;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new aa,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{dt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(dt("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new aa)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(dt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(xn(typeof r.accessToken=="string"),new HN(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return xn(e===null||typeof e=="string"),new di(e)}}class xR{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=di.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class bR{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new xR(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(di.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class _R{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class NR{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){xn(this.o===void 0);const r=s=>{s.error!=null&&dt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,dt("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{dt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):dt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(xn(typeof n.token=="string"),this.R=n.token,new _R(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SR(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $N{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=SR(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function cn(t,e){return t<e?-1:t>e?1:0}function Bu(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Je(Le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Je(Le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new Je(Le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Je(Le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return _r.fromMillis(Date.now())}static fromDate(e){return _r.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new _r(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?cn(this.nanoseconds,e.nanoseconds):cn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new jt(e)}static min(){return new jt(new _r(0,0))}static max(){return new jt(new _r(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dd{constructor(e,n,r){n===void 0?n=0:n>e.length&&It(),r===void 0?r=e.length-n:r>e.length-n&&It(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Dd.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Dd?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Dn extends Dd{construct(e,n,r){return new Dn(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Je(Le.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Dn(n)}static emptyPath(){return new Dn([])}}const AR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Qr extends Dd{construct(e,n,r){return new Qr(e,n,r)}static isValidIdentifier(e){return AR.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Qr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Qr(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new Je(Le.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new Je(Le.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new Je(Le.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new Je(Le.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Qr(n)}static emptyPath(){return new Qr([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(e){this.path=e}static fromPath(e){return new xt(Dn.fromString(e))}static fromName(e){return new xt(Dn.fromString(e).popFirst(5))}static empty(){return new xt(Dn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Dn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Dn.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new xt(new Dn(e.slice()))}}function ER(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=jt.fromTimestamp(r===1e9?new _r(n+1,0):new _r(n,r));return new xl(i,xt.empty(),e)}function TR(t){return new xl(t.readTime,t.key,-1)}class xl{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new xl(jt.min(),xt.empty(),-1)}static max(){return new xl(jt.max(),xt.empty(),-1)}}function kR(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=xt.comparator(t.documentKey,e.documentKey),n!==0?n:cn(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class CR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function of(t){if(t.code!==Le.FAILED_PRECONDITION||t.message!==IR)throw t;dt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&It(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Oe((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof Oe?n:Oe.resolve(n)}catch(n){return Oe.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):Oe.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):Oe.reject(n)}static resolve(e){return new Oe((n,r)=>{n(e)})}static reject(e){return new Oe((n,r)=>{r(e)})}static waitFor(e){return new Oe((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=Oe.resolve(!1);for(const r of e)n=n.next(i=>i?Oe.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new Oe((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;n(e[c]).next(h=>{o[c]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,n){return new Oe((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function PR(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function af(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hv{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}hv.oe=-1;function ug(t){return t==null}function bm(t){return t===0&&1/t==-1/0}function LR(t){return typeof t=="number"&&Number.isInteger(t)&&!bm(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kx(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Rc(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function WN(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn{constructor(e,n){this.comparator=e,this.root=n||Yr.EMPTY}insert(e,n){return new Zn(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Yr.BLACK,null,null))}remove(e){return new Zn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Yr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new np(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new np(this.root,e,this.comparator,!1)}getReverseIterator(){return new np(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new np(this.root,e,this.comparator,!0)}}class np{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Yr{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Yr.RED,this.left=i??Yr.EMPTY,this.right=s??Yr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new Yr(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Yr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Yr.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Yr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Yr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw It();const e=this.left.check();if(e!==this.right.check())throw It();return e+(this.isRed()?0:1)}}Yr.EMPTY=null,Yr.RED=!0,Yr.BLACK=!1;Yr.EMPTY=new class{constructor(){this.size=0}get key(){throw It()}get value(){throw It()}get color(){throw It()}get left(){throw It()}get right(){throw It()}copy(e,n,r,i,s){return this}insert(e,n,r){return new Yr(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zr{constructor(e){this.comparator=e,this.data=new Zn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Yx(this.data.getIterator())}getIteratorFrom(e){return new Yx(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Zr)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Zr(this.comparator);return n.data=e,n}}class Yx{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs{constructor(e){this.fields=e,e.sort(Qr.comparator)}static empty(){return new cs([])}unionWith(e){let n=new Zr(Qr.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new cs(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Bu(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GN extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ti{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new GN("Invalid base64 string: "+s):s}}(e);return new ti(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new ti(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return cn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ti.EMPTY_BYTE_STRING=new ti("");const RR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function bl(t){if(xn(!!t),typeof t=="string"){let e=0;const n=RR.exec(t);if(xn(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:dr(t.seconds),nanos:dr(t.nanos)}}function dr(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function gc(t){return typeof t=="string"?ti.fromBase64String(t):ti.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dv(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function fv(t){const e=t.mapValue.fields.__previous_value__;return dv(e)?fv(e):e}function Od(t){const e=bl(t.mapValue.fields.__local_write_time__.timestampValue);return new _r(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jR{constructor(e,n,r,i,s,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class Md{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Md("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Md&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rp={mapValue:{}};function yc(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?dv(t)?4:OR(t)?9007199254740991:DR(t)?10:11:It()}function Po(t,e){if(t===e)return!0;const n=yc(t);if(n!==yc(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Od(t).isEqual(Od(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=bl(i.timestampValue),a=bl(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return gc(i.bytesValue).isEqual(gc(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return dr(i.geoPointValue.latitude)===dr(s.geoPointValue.latitude)&&dr(i.geoPointValue.longitude)===dr(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return dr(i.integerValue)===dr(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=dr(i.doubleValue),a=dr(s.doubleValue);return o===a?bm(o)===bm(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Bu(t.arrayValue.values||[],e.arrayValue.values||[],Po);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(Kx(o)!==Kx(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Po(o[l],a[l])))return!1;return!0}(t,e);default:return It()}}function Fd(t,e){return(t.values||[]).find(n=>Po(n,e))!==void 0}function zu(t,e){if(t===e)return 0;const n=yc(t),r=yc(e);if(n!==r)return cn(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return cn(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=dr(s.integerValue||s.doubleValue),l=dr(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return Qx(t.timestampValue,e.timestampValue);case 4:return Qx(Od(t),Od(e));case 5:return cn(t.stringValue,e.stringValue);case 6:return function(s,o){const a=gc(s),l=gc(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const h=cn(a[c],l[c]);if(h!==0)return h}return cn(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=cn(dr(s.latitude),dr(o.latitude));return a!==0?a:cn(dr(s.longitude),dr(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Xx(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,l,c,h;const g=s.fields||{},y=o.fields||{},p=(a=g.value)===null||a===void 0?void 0:a.arrayValue,_=(l=y.value)===null||l===void 0?void 0:l.arrayValue,N=cn(((c=p==null?void 0:p.values)===null||c===void 0?void 0:c.length)||0,((h=_==null?void 0:_.values)===null||h===void 0?void 0:h.length)||0);return N!==0?N:Xx(p,_)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===rp.mapValue&&o===rp.mapValue)return 0;if(s===rp.mapValue)return 1;if(o===rp.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=o.fields||{},h=Object.keys(c);l.sort(),h.sort();for(let g=0;g<l.length&&g<h.length;++g){const y=cn(l[g],h[g]);if(y!==0)return y;const p=zu(a[l[g]],c[h[g]]);if(p!==0)return p}return cn(l.length,h.length)}(t.mapValue,e.mapValue);default:throw It()}}function Qx(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return cn(t,e);const n=bl(t),r=bl(e),i=cn(n.seconds,r.seconds);return i!==0?i:cn(n.nanos,r.nanos)}function Xx(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=zu(n[i],r[i]);if(s)return s}return cn(n.length,r.length)}function qu(t){return x2(t)}function x2(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=bl(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return gc(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return xt.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=x2(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${x2(n.fields[o])}`;return i+"}"}(t.mapValue):It()}function Jx(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function b2(t){return!!t&&"integerValue"in t}function pv(t){return!!t&&"arrayValue"in t}function Zx(t){return!!t&&"nullValue"in t}function eb(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Rp(t){return!!t&&"mapValue"in t}function DR(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function sd(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Rc(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=sd(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=sd(t.arrayValue.values[n]);return e}return Object.assign({},t)}function OR(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi{constructor(e){this.value=e}static empty(){return new Bi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Rp(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=sd(n)}setAll(e){let n=Qr.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=sd(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Rp(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Po(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Rp(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Rc(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Bi(sd(this.value))}}function KN(t){const e=[];return Rc(t.fields,(n,r)=>{const i=new Qr([n]);if(Rp(r)){const s=KN(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new cs(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new mi(e,0,jt.min(),jt.min(),jt.min(),Bi.empty(),0)}static newFoundDocument(e,n,r,i){return new mi(e,1,n,jt.min(),r,i,0)}static newNoDocument(e,n){return new mi(e,2,n,jt.min(),jt.min(),Bi.empty(),0)}static newUnknownDocument(e,n){return new mi(e,3,n,jt.min(),jt.min(),Bi.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(jt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Bi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Bi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=jt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof mi&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new mi(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _m{constructor(e,n){this.position=e,this.inclusive=n}}function tb(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=xt.comparator(xt.fromName(o.referenceValue),n.key):r=zu(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function nb(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Po(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ud{constructor(e,n="asc"){this.field=e,this.dir=n}}function MR(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YN{}class br extends YN{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new UR(e,n,r):n==="array-contains"?new zR(e,r):n==="in"?new qR(e,r):n==="not-in"?new HR(e,r):n==="array-contains-any"?new $R(e,r):new br(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new VR(e,r):new BR(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(zu(n,this.value)):n!==null&&yc(this.value)===yc(n)&&this.matchesComparison(zu(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return It()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class to extends YN{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new to(e,n)}matches(e){return QN(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function QN(t){return t.op==="and"}function XN(t){return FR(t)&&QN(t)}function FR(t){for(const e of t.filters)if(e instanceof to)return!1;return!0}function _2(t){if(t instanceof br)return t.field.canonicalString()+t.op.toString()+qu(t.value);if(XN(t))return t.filters.map(e=>_2(e)).join(",");{const e=t.filters.map(n=>_2(n)).join(",");return`${t.op}(${e})`}}function JN(t,e){return t instanceof br?function(r,i){return i instanceof br&&r.op===i.op&&r.field.isEqual(i.field)&&Po(r.value,i.value)}(t,e):t instanceof to?function(r,i){return i instanceof to&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&JN(o,i.filters[a]),!0):!1}(t,e):void It()}function ZN(t){return t instanceof br?function(n){return`${n.field.canonicalString()} ${n.op} ${qu(n.value)}`}(t):t instanceof to?function(n){return n.op.toString()+" {"+n.getFilters().map(ZN).join(" ,")+"}"}(t):"Filter"}class UR extends br{constructor(e,n,r){super(e,n,r),this.key=xt.fromName(r.referenceValue)}matches(e){const n=xt.comparator(e.key,this.key);return this.matchesComparison(n)}}class VR extends br{constructor(e,n){super(e,"in",n),this.keys=eS("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class BR extends br{constructor(e,n){super(e,"not-in",n),this.keys=eS("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function eS(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>xt.fromName(r.referenceValue))}class zR extends br{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return pv(n)&&Fd(n.arrayValue,this.value)}}class qR extends br{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Fd(this.value.arrayValue,n)}}class HR extends br{constructor(e,n){super(e,"not-in",n)}matches(e){if(Fd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Fd(this.value.arrayValue,n)}}class $R extends br{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!pv(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Fd(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WR{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function rb(t,e=null,n=[],r=[],i=null,s=null,o=null){return new WR(t,e,n,r,i,s,o)}function mv(t){const e=Dt(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>_2(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),ug(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>qu(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>qu(r)).join(",")),e.ue=n}return e.ue}function gv(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!MR(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!JN(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!nb(t.startAt,e.startAt)&&nb(t.endAt,e.endAt)}function N2(t){return xt.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class th{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function GR(t,e,n,r,i,s,o,a){return new th(t,e,n,r,i,s,o,a)}function hg(t){return new th(t)}function ib(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function tS(t){return t.collectionGroup!==null}function od(t){const e=Dt(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Zr(Qr.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Ud(s,r))}),n.has(Qr.keyField().canonicalString())||e.ce.push(new Ud(Qr.keyField(),r))}return e.ce}function Io(t){const e=Dt(t);return e.le||(e.le=KR(e,od(t))),e.le}function KR(t,e){if(t.limitType==="F")return rb(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Ud(i.field,s)});const n=t.endAt?new _m(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new _m(t.startAt.position,t.startAt.inclusive):null;return rb(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function S2(t,e){const n=t.filters.concat([e]);return new th(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function A2(t,e,n){return new th(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function dg(t,e){return gv(Io(t),Io(e))&&t.limitType===e.limitType}function nS(t){return`${mv(Io(t))}|lt:${t.limitType}`}function Jc(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>ZN(i)).join(", ")}]`),ug(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>qu(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>qu(i)).join(",")),`Target(${r})`}(Io(t))}; limitType=${t.limitType})`}function fg(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):xt.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of od(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const c=tb(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,od(r),i)||r.endAt&&!function(o,a,l){const c=tb(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,od(r),i))}(t,e)}function YR(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function rS(t){return(e,n)=>{let r=!1;for(const i of od(t)){const s=QR(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function QR(t,e,n){const r=t.field.isKeyField()?xt.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),c=a.data.field(s);return l!==null&&c!==null?zu(l,c):It()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return It()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nh{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Rc(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return WN(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XR=new Zn(xt.comparator);function ga(){return XR}const iS=new Zn(xt.comparator);function Wh(...t){let e=iS;for(const n of t)e=e.insert(n.key,n);return e}function sS(t){let e=iS;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function tc(){return ad()}function oS(){return ad()}function ad(){return new nh(t=>t.toString(),(t,e)=>t.isEqual(e))}const JR=new Zn(xt.comparator),ZR=new Zr(xt.comparator);function Yt(...t){let e=ZR;for(const n of t)e=e.add(n);return e}const ej=new Zr(cn);function tj(){return ej}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yv(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:bm(e)?"-0":e}}function aS(t){return{integerValue:""+t}}function nj(t,e){return LR(e)?aS(e):yv(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pg{constructor(){this._=void 0}}function rj(t,e,n){return t instanceof Vd?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&dv(s)&&(s=fv(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof Hu?cS(t,e):t instanceof Bd?uS(t,e):function(i,s){const o=lS(i,s),a=sb(o)+sb(i.Pe);return b2(o)&&b2(i.Pe)?aS(a):yv(i.serializer,a)}(t,e)}function ij(t,e,n){return t instanceof Hu?cS(t,e):t instanceof Bd?uS(t,e):n}function lS(t,e){return t instanceof Nm?function(r){return b2(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Vd extends pg{}class Hu extends pg{constructor(e){super(),this.elements=e}}function cS(t,e){const n=hS(e);for(const r of t.elements)n.some(i=>Po(i,r))||n.push(r);return{arrayValue:{values:n}}}class Bd extends pg{constructor(e){super(),this.elements=e}}function uS(t,e){let n=hS(e);for(const r of t.elements)n=n.filter(i=>!Po(i,r));return{arrayValue:{values:n}}}class Nm extends pg{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function sb(t){return dr(t.integerValue||t.doubleValue)}function hS(t){return pv(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dS{constructor(e,n){this.field=e,this.transform=n}}function sj(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Hu&&i instanceof Hu||r instanceof Bd&&i instanceof Bd?Bu(r.elements,i.elements,Po):r instanceof Nm&&i instanceof Nm?Po(r.Pe,i.Pe):r instanceof Vd&&i instanceof Vd}(t.transform,e.transform)}class oj{constructor(e,n){this.version=e,this.transformResults=n}}class Pi{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Pi}static exists(e){return new Pi(void 0,e)}static updateTime(e){return new Pi(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function jp(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class mg{}function fS(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new gg(t.key,Pi.none()):new lf(t.key,t.data,Pi.none());{const n=t.data,r=Bi.empty();let i=new Zr(Qr.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Cl(t.key,r,new cs(i.toArray()),Pi.none())}}function aj(t,e,n){t instanceof lf?function(i,s,o){const a=i.value.clone(),l=ab(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Cl?function(i,s,o){if(!jp(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=ab(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(pS(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function ld(t,e,n,r){return t instanceof lf?function(s,o,a,l){if(!jp(s.precondition,o))return a;const c=s.value.clone(),h=lb(s.fieldTransforms,l,o);return c.setAll(h),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof Cl?function(s,o,a,l){if(!jp(s.precondition,o))return a;const c=lb(s.fieldTransforms,l,o),h=o.data;return h.setAll(pS(s)),h.setAll(c),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(g=>g.field))}(t,e,n,r):function(s,o,a){return jp(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function lj(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=lS(r.transform,i||null);s!=null&&(n===null&&(n=Bi.empty()),n.set(r.field,s))}return n||null}function ob(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Bu(r,i,(s,o)=>sj(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class lf extends mg{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Cl extends mg{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function pS(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function ab(t,e,n){const r=new Map;xn(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,ij(o,a,n[i]))}return r}function lb(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,rj(s,o,e))}return r}class gg extends mg{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class cj extends mg{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uj{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&aj(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=ld(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=ld(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=oS();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=fS(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(jt.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Yt())}isEqual(e){return this.batchId===e.batchId&&Bu(this.mutations,e.mutations,(n,r)=>ob(n,r))&&Bu(this.baseMutations,e.baseMutations,(n,r)=>ob(n,r))}}class vv{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){xn(e.mutations.length===r.length);let i=function(){return JR}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new vv(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hj{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dj{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var wr,rn;function fj(t){switch(t){default:return It();case Le.CANCELLED:case Le.UNKNOWN:case Le.DEADLINE_EXCEEDED:case Le.RESOURCE_EXHAUSTED:case Le.INTERNAL:case Le.UNAVAILABLE:case Le.UNAUTHENTICATED:return!1;case Le.INVALID_ARGUMENT:case Le.NOT_FOUND:case Le.ALREADY_EXISTS:case Le.PERMISSION_DENIED:case Le.FAILED_PRECONDITION:case Le.ABORTED:case Le.OUT_OF_RANGE:case Le.UNIMPLEMENTED:case Le.DATA_LOSS:return!0}}function mS(t){if(t===void 0)return ma("GRPC error has no .code"),Le.UNKNOWN;switch(t){case wr.OK:return Le.OK;case wr.CANCELLED:return Le.CANCELLED;case wr.UNKNOWN:return Le.UNKNOWN;case wr.DEADLINE_EXCEEDED:return Le.DEADLINE_EXCEEDED;case wr.RESOURCE_EXHAUSTED:return Le.RESOURCE_EXHAUSTED;case wr.INTERNAL:return Le.INTERNAL;case wr.UNAVAILABLE:return Le.UNAVAILABLE;case wr.UNAUTHENTICATED:return Le.UNAUTHENTICATED;case wr.INVALID_ARGUMENT:return Le.INVALID_ARGUMENT;case wr.NOT_FOUND:return Le.NOT_FOUND;case wr.ALREADY_EXISTS:return Le.ALREADY_EXISTS;case wr.PERMISSION_DENIED:return Le.PERMISSION_DENIED;case wr.FAILED_PRECONDITION:return Le.FAILED_PRECONDITION;case wr.ABORTED:return Le.ABORTED;case wr.OUT_OF_RANGE:return Le.OUT_OF_RANGE;case wr.UNIMPLEMENTED:return Le.UNIMPLEMENTED;case wr.DATA_LOSS:return Le.DATA_LOSS;default:return It()}}(rn=wr||(wr={}))[rn.OK=0]="OK",rn[rn.CANCELLED=1]="CANCELLED",rn[rn.UNKNOWN=2]="UNKNOWN",rn[rn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",rn[rn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",rn[rn.NOT_FOUND=5]="NOT_FOUND",rn[rn.ALREADY_EXISTS=6]="ALREADY_EXISTS",rn[rn.PERMISSION_DENIED=7]="PERMISSION_DENIED",rn[rn.UNAUTHENTICATED=16]="UNAUTHENTICATED",rn[rn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",rn[rn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",rn[rn.ABORTED=10]="ABORTED",rn[rn.OUT_OF_RANGE=11]="OUT_OF_RANGE",rn[rn.UNIMPLEMENTED=12]="UNIMPLEMENTED",rn[rn.INTERNAL=13]="INTERNAL",rn[rn.UNAVAILABLE=14]="UNAVAILABLE",rn[rn.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pj(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mj=new sc([4294967295,4294967295],0);function cb(t){const e=pj().encode(t),n=new FN;return n.update(e),new Uint8Array(n.digest())}function ub(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new sc([n,r],0),new sc([i,s],0)]}class wv{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Gh(`Invalid padding: ${n}`);if(r<0)throw new Gh(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Gh(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Gh(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=sc.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(sc.fromNumber(r)));return i.compare(mj)===1&&(i=new sc([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=cb(e),[r,i]=ub(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new wv(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=cb(e),[r,i]=ub(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Gh extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yg{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,cf.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new yg(jt.min(),i,new Zn(cn),ga(),Yt())}}class cf{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new cf(r,n,Yt(),Yt(),Yt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dp{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class gS{constructor(e,n){this.targetId=e,this.me=n}}class yS{constructor(e,n,r=ti.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class hb{constructor(){this.fe=0,this.ge=fb(),this.pe=ti.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Yt(),n=Yt(),r=Yt();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:It()}}),new cf(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=fb()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,xn(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class gj{constructor(e){this.Le=e,this.Be=new Map,this.ke=ga(),this.qe=db(),this.Qe=new Zn(cn)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:It()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const s=i.target;if(N2(s))if(r===0){const o=new xt(s.path);this.Ue(n,o,mi.newNoDocument(o,jt.min()))}else xn(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=gc(r).toUint8Array()}catch(l){if(l instanceof GN)return Vu("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new wv(o,i,s)}catch(l){return Vu(l instanceof Gh?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&N2(a.target)){const l=new xt(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,mi.newNoDocument(l,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=Yt();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Je(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new yg(e,n,this.Qe,this.ke,r);return this.ke=ga(),this.qe=db(),this.Qe=new Zn(cn),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new hb,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Zr(cn),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||dt("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new hb),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function db(){return new Zn(xt.comparator)}function fb(){return new Zn(xt.comparator)}const yj={asc:"ASCENDING",desc:"DESCENDING"},vj={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},wj={and:"AND",or:"OR"};class xj{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function E2(t,e){return t.useProto3Json||ug(e)?e:{value:e}}function Sm(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function vS(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function bj(t,e){return Sm(t,e.toTimestamp())}function Co(t){return xn(!!t),jt.fromTimestamp(function(n){const r=bl(n);return new _r(r.seconds,r.nanos)}(t))}function xv(t,e){return T2(t,e).canonicalString()}function T2(t,e){const n=function(i){return new Dn(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function wS(t){const e=Dn.fromString(t);return xn(SS(e)),e}function k2(t,e){return xv(t.databaseId,e.path)}function P0(t,e){const n=wS(e);if(n.get(1)!==t.databaseId.projectId)throw new Je(Le.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Je(Le.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new xt(bS(n))}function xS(t,e){return xv(t.databaseId,e)}function _j(t){const e=wS(t);return e.length===4?Dn.emptyPath():bS(e)}function I2(t){return new Dn(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function bS(t){return xn(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function pb(t,e,n){return{name:k2(t,e),fields:n.value.mapValue.fields}}function Nj(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:It()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,h){return c.useProto3Json?(xn(h===void 0||typeof h=="string"),ti.fromBase64String(h||"")):(xn(h===void 0||h instanceof Buffer||h instanceof Uint8Array),ti.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const h=c.code===void 0?Le.UNKNOWN:mS(c.code);return new Je(h,c.message||"")}(o);n=new yS(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=P0(t,r.document.name),s=Co(r.document.updateTime),o=r.document.createTime?Co(r.document.createTime):jt.min(),a=new Bi({mapValue:{fields:r.document.fields}}),l=mi.newFoundDocument(i,s,o,a),c=r.targetIds||[],h=r.removedTargetIds||[];n=new Dp(c,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=P0(t,r.document),s=r.readTime?Co(r.readTime):jt.min(),o=mi.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Dp([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=P0(t,r.document),s=r.removedTargetIds||[];n=new Dp([],s,i,null)}else{if(!("filter"in e))return It();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new dj(i,s),a=r.targetId;n=new gS(a,o)}}return n}function Sj(t,e){let n;if(e instanceof lf)n={update:pb(t,e.key,e.value)};else if(e instanceof gg)n={delete:k2(t,e.key)};else if(e instanceof Cl)n={update:pb(t,e.key,e.data),updateMask:Rj(e.fieldMask)};else{if(!(e instanceof cj))return It();n={verify:k2(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof Vd)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Hu)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Bd)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Nm)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw It()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:bj(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:It()}(t,e.precondition)),n}function Aj(t,e){return t&&t.length>0?(xn(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?Co(i.updateTime):Co(s);return o.isEqual(jt.min())&&(o=Co(s)),new oj(o,i.transformResults||[])}(n,e))):[]}function Ej(t,e){return{documents:[xS(t,e.path)]}}function Tj(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=xS(t,i);const s=function(c){if(c.length!==0)return NS(to.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(h=>function(y){return{field:Zc(y.field),direction:Cj(y.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=E2(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:i}}function kj(t){let e=_j(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){xn(r===1);const h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=function(g){const y=_S(g);return y instanceof to&&XN(y)?y.getFilters():[y]}(n.where));let o=[];n.orderBy&&(o=function(g){return g.map(y=>function(_){return new Ud(eu(_.field),function(C){switch(C){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(_.direction))}(y))}(n.orderBy));let a=null;n.limit&&(a=function(g){let y;return y=typeof g=="object"?g.value:g,ug(y)?null:y}(n.limit));let l=null;n.startAt&&(l=function(g){const y=!!g.before,p=g.values||[];return new _m(p,y)}(n.startAt));let c=null;return n.endAt&&(c=function(g){const y=!g.before,p=g.values||[];return new _m(p,y)}(n.endAt)),GR(e,i,o,s,a,"F",l,c)}function Ij(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return It()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function _S(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=eu(n.unaryFilter.field);return br.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=eu(n.unaryFilter.field);return br.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=eu(n.unaryFilter.field);return br.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=eu(n.unaryFilter.field);return br.create(o,"!=",{nullValue:"NULL_VALUE"});default:return It()}}(t):t.fieldFilter!==void 0?function(n){return br.create(eu(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return It()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return to.create(n.compositeFilter.filters.map(r=>_S(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return It()}}(n.compositeFilter.op))}(t):It()}function Cj(t){return yj[t]}function Pj(t){return vj[t]}function Lj(t){return wj[t]}function Zc(t){return{fieldPath:t.canonicalString()}}function eu(t){return Qr.fromServerFormat(t.fieldPath)}function NS(t){return t instanceof br?function(n){if(n.op==="=="){if(eb(n.value))return{unaryFilter:{field:Zc(n.field),op:"IS_NAN"}};if(Zx(n.value))return{unaryFilter:{field:Zc(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(eb(n.value))return{unaryFilter:{field:Zc(n.field),op:"IS_NOT_NAN"}};if(Zx(n.value))return{unaryFilter:{field:Zc(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Zc(n.field),op:Pj(n.op),value:n.value}}}(t):t instanceof to?function(n){const r=n.getFilters().map(i=>NS(i));return r.length===1?r[0]:{compositeFilter:{op:Lj(n.op),filters:r}}}(t):It()}function Rj(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function SS(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class il{constructor(e,n,r,i,s=jt.min(),o=jt.min(),a=ti.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new il(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new il(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new il(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new il(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jj{constructor(e){this.ct=e}}function Dj(t){const e=kj({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?A2(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oj{constructor(){this.un=new Mj}addToCollectionParentIndex(e,n){return this.un.add(n),Oe.resolve()}getCollectionParents(e,n){return Oe.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return Oe.resolve()}deleteFieldIndex(e,n){return Oe.resolve()}deleteAllFieldIndexes(e){return Oe.resolve()}createTargetIndexes(e,n){return Oe.resolve()}getDocumentsMatchingTarget(e,n){return Oe.resolve(null)}getIndexType(e,n){return Oe.resolve(0)}getFieldIndexes(e,n){return Oe.resolve([])}getNextCollectionGroupToUpdate(e){return Oe.resolve(null)}getMinOffset(e,n){return Oe.resolve(xl.min())}getMinOffsetFromCollectionGroup(e,n){return Oe.resolve(xl.min())}updateCollectionGroup(e,n,r){return Oe.resolve()}updateIndexEntries(e,n){return Oe.resolve()}}class Mj{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Zr(Dn.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Zr(Dn.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $u{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new $u(0)}static kn(){return new $u(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fj{constructor(){this.changes=new nh(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,mi.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?Oe.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uj{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vj{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&ld(r.mutation,i,cs.empty(),_r.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Yt()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Yt()){const i=tc();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Wh();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=tc();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Yt()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=ga();const o=ad(),a=function(){return ad()}();return n.forEach((l,c)=>{const h=r.get(c.key);i.has(c.key)&&(h===void 0||h.mutation instanceof Cl)?s=s.insert(c.key,c):h!==void 0?(o.set(c.key,h.mutation.getFieldMask()),ld(h.mutation,c,h.mutation.getFieldMask(),_r.now())):o.set(c.key,cs.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,h)=>o.set(c,h)),n.forEach((c,h)=>{var g;return a.set(c,new Uj(h,(g=o.get(c))!==null&&g!==void 0?g:null))}),a))}recalculateAndSaveOverlays(e,n){const r=ad();let i=new Zn((o,a)=>o-a),s=Yt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let h=r.get(l)||cs.empty();h=a.applyToLocalView(c,h),r.set(l,h);const g=(i.get(a.batchId)||Yt()).add(l);i=i.insert(a.batchId,g)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,h=l.value,g=oS();h.forEach(y=>{if(!s.has(y)){const p=fS(n.get(y),r.get(y));p!==null&&g.set(y,p),s=s.add(y)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,g))}return Oe.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return xt.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):tS(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):Oe.resolve(tc());let a=-1,l=s;return o.next(c=>Oe.forEach(c,(h,g)=>(a<g.largestBatchId&&(a=g.largestBatchId),s.get(h)?Oe.resolve():this.remoteDocumentCache.getEntry(e,h).next(y=>{l=l.insert(h,y)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,Yt())).next(h=>({batchId:a,changes:sS(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new xt(n)).next(r=>{let i=Wh();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=Wh();return this.indexManager.getCollectionParents(e,s).next(a=>Oe.forEach(a,l=>{const c=function(g,y){return new th(y,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(h=>{h.forEach((g,y)=>{o=o.insert(g,y)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((l,c)=>{const h=c.getKey();o.get(h)===null&&(o=o.insert(h,mi.newInvalidDocument(h)))});let a=Wh();return o.forEach((l,c)=>{const h=s.get(l);h!==void 0&&ld(h.mutation,c,cs.empty(),_r.now()),fg(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bj{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return Oe.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Co(i.createTime)}}(n)),Oe.resolve()}getNamedQuery(e,n){return Oe.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:Dj(i.bundledQuery),readTime:Co(i.readTime)}}(n)),Oe.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zj{constructor(){this.overlays=new Zn(xt.comparator),this.Ir=new Map}getOverlay(e,n){return Oe.resolve(this.overlays.get(n))}getOverlays(e,n){const r=tc();return Oe.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),Oe.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),Oe.resolve()}getOverlaysForCollection(e,n,r){const i=tc(),s=n.length+1,o=new xt(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return Oe.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Zn((c,h)=>c-h);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let h=s.get(c.largestBatchId);h===null&&(h=tc(),s=s.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const a=tc(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,h)=>a.set(c,h)),!(a.size()>=i)););return Oe.resolve(a)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new hj(n,r));let s=this.Ir.get(n);s===void 0&&(s=Yt(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qj{constructor(){this.sessionToken=ti.EMPTY_BYTE_STRING}getSessionToken(e){return Oe.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,Oe.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bv{constructor(){this.Tr=new Zr(Fr.Er),this.dr=new Zr(Fr.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new Fr(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Fr(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new xt(new Dn([])),r=new Fr(n,e),i=new Fr(n,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new xt(new Dn([])),r=new Fr(n,e),i=new Fr(n,e+1);let s=Yt();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new Fr(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Fr{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return xt.comparator(e.key,n.key)||cn(e.wr,n.wr)}static Ar(e,n){return cn(e.wr,n.wr)||xt.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hj{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Zr(Fr.Er)}checkEmpty(e){return Oe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new uj(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.br=this.br.add(new Fr(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return Oe.resolve(o)}lookupMutationBatch(e,n){return Oe.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),s=i<0?0:i;return Oe.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Oe.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return Oe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Fr(n,0),i=new Fr(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{const a=this.Dr(o.wr);s.push(a)}),Oe.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Zr(cn);return n.forEach(i=>{const s=new Fr(i,0),o=new Fr(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),Oe.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;xt.isDocumentKey(s)||(s=s.child(""));const o=new Fr(new xt(s),0);let a=new Zr(cn);return this.br.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(l.wr)),!0)},o),Oe.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){xn(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return Oe.forEach(n.mutations,i=>{const s=new Fr(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new Fr(n,0),i=this.br.firstAfterOrEqual(r);return Oe.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,Oe.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $j{constructor(e){this.Mr=e,this.docs=function(){return new Zn(xt.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return Oe.resolve(r?r.document.mutableCopy():mi.newInvalidDocument(n))}getEntries(e,n){let r=ga();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():mi.newInvalidDocument(i))}),Oe.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=ga();const o=n.path,a=new xt(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:h}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||kR(TR(h),r)<=0||(i.has(h.key)||fg(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return Oe.resolve(s)}getAllFromCollectionGroup(e,n,r,i){It()}Or(e,n){return Oe.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Wj(this)}getSize(e){return Oe.resolve(this.size)}}class Wj extends Fj{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),Oe.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gj{constructor(e){this.persistence=e,this.Nr=new nh(n=>mv(n),gv),this.lastRemoteSnapshotVersion=jt.min(),this.highestTargetId=0,this.Lr=0,this.Br=new bv,this.targetCount=0,this.kr=$u.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),Oe.resolve()}getLastRemoteSnapshotVersion(e){return Oe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Oe.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),Oe.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),Oe.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new $u(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,Oe.resolve()}updateTargetData(e,n){return this.Kn(n),Oe.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,Oe.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),Oe.waitFor(s).next(()=>i)}getTargetCount(e){return Oe.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return Oe.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),Oe.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),Oe.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),Oe.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return Oe.resolve(r)}containsKey(e,n){return Oe.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kj{constructor(e,n){this.qr={},this.overlays={},this.Qr=new hv(0),this.Kr=!1,this.Kr=!0,this.$r=new qj,this.referenceDelegate=e(this),this.Ur=new Gj(this),this.indexManager=new Oj,this.remoteDocumentCache=function(i){return new $j(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new jj(n),this.Gr=new Bj(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new zj,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new Hj(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){dt("MemoryPersistence","Starting transaction:",e);const i=new Yj(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return Oe.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class Yj extends CR{constructor(e){super(),this.currentSequenceNumber=e}}class _v{constructor(e){this.persistence=e,this.Jr=new bv,this.Yr=null}static Zr(e){return new _v(e)}get Xr(){if(this.Yr)return this.Yr;throw It()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),Oe.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),Oe.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),Oe.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Oe.forEach(this.Xr,r=>{const i=xt.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,jt.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return Oe.or([()=>Oe.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nv{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=Yt(),i=Yt();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new Nv(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qj{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xj{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return BC()?8:PR(wi())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new Qj;return this.Xi(e,n,o).next(a=>{if(s.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(Dh()<=Jt.DEBUG&&dt("QueryEngine","SDK will not create cache indexes for query:",Jc(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Oe.resolve()):(Dh()<=Jt.DEBUG&&dt("QueryEngine","Query:",Jc(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Dh()<=Jt.DEBUG&&dt("QueryEngine","The SDK decides to create cache indexes for query:",Jc(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Io(n))):Oe.resolve())}Yi(e,n){if(ib(n))return Oe.resolve(null);let r=Io(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=A2(n,null,"F"),r=Io(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=Yt(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.ts(n,a);return this.ns(n,c,o,l.readTime)?this.Yi(e,A2(n,null,"F")):this.rs(e,c,n,l)}))})))}Zi(e,n,r,i){return ib(n)||i.isEqual(jt.min())?Oe.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const o=this.ts(n,s);return this.ns(n,o,r,i)?Oe.resolve(null):(Dh()<=Jt.DEBUG&&dt("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Jc(n)),this.rs(e,o,n,ER(i,-1)).next(a=>a))})}ts(e,n){let r=new Zr(rS(e));return n.forEach((i,s)=>{fg(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return Dh()<=Jt.DEBUG&&dt("QueryEngine","Using full collection scan to execute query:",Jc(n)),this.Ji.getDocumentsMatchingQuery(e,n,xl.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jj{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new Zn(cn),this._s=new nh(s=>mv(s),gv),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Vj(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function Zj(t,e,n,r){return new Jj(t,e,n,r)}async function AS(t,e){const n=Dt(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=Yt();for(const c of i){o.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}for(const c of s){a.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}return n.localDocuments.getDocuments(r,l).next(c=>({hs:c,removedBatchIds:o,addedBatchIds:a}))})})}function eD(t,e){const n=Dt(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,c,h){const g=c.batch,y=g.keys();let p=Oe.resolve();return y.forEach(_=>{p=p.next(()=>h.getEntry(l,_)).next(N=>{const C=c.docVersions.get(_);xn(C!==null),N.version.compareTo(C)<0&&(g.applyToRemoteDocument(N,c),N.isValidDocument()&&(N.setReadTime(c.commitVersion),h.addEntry(N)))})}),p.next(()=>a.mutationQueue.removeMutationBatch(l,g))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=Yt();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function ES(t){const e=Dt(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function tD(t,e){const n=Dt(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const a=[];e.targetChanges.forEach((h,g)=>{const y=i.get(g);if(!y)return;a.push(n.Ur.removeMatchingKeys(s,h.removedDocuments,g).next(()=>n.Ur.addMatchingKeys(s,h.addedDocuments,g)));let p=y.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(g)!==null?p=p.withResumeToken(ti.EMPTY_BYTE_STRING,jt.min()).withLastLimboFreeSnapshotVersion(jt.min()):h.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(h.resumeToken,r)),i=i.insert(g,p),function(N,C,x){return N.resumeToken.approximateByteSize()===0||C.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=3e8?!0:x.addedDocuments.size+x.modifiedDocuments.size+x.removedDocuments.size>0}(y,p,h)&&a.push(n.Ur.updateTargetData(s,p))});let l=ga(),c=Yt();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(nD(s,o,e.documentUpdates).next(h=>{l=h.Ps,c=h.Is})),!r.isEqual(jt.min())){const h=n.Ur.getLastRemoteSnapshotVersion(s).next(g=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return Oe.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(n.os=i,s))}function nD(t,e,n){let r=Yt(),i=Yt();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=ga();return n.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(jt.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):dt("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Ps:o,Is:i}})}function rD(t,e){const n=Dt(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function iD(t,e){const n=Dt(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,Oe.resolve(i)):n.Ur.allocateTargetId(r).next(o=>(i=new il(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function C2(t,e,n){const r=Dt(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!af(o))throw o;dt("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function mb(t,e,n){const r=Dt(t);let i=jt.min(),s=Yt();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,h){const g=Dt(l),y=g._s.get(h);return y!==void 0?Oe.resolve(g.os.get(y)):g.Ur.getTargetData(c,h)}(r,o,Io(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?i:jt.min(),n?s:Yt())).next(a=>(sD(r,YR(e),a),{documents:a,Ts:s})))}function sD(t,e,n){let r=t.us.get(e)||jt.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}class gb{constructor(){this.activeTargetIds=tj()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class oD{constructor(){this.so=new gb,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new gb,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aD{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yb{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){dt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){dt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ip=null;function L0(){return ip===null?ip=function(){return 268435456+Math.round(2147483648*Math.random())}():ip++,"0x"+ip.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lD={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cD{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ai="WebChannelConnection";class uD extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,o){const a=L0(),l=this.xo(n,r.toUriEncodedString());dt("RestConnection",`Sending RPC '${n}' ${a}:`,l,i);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,s,o),this.No(n,l,c,i).then(h=>(dt("RestConnection",`Received RPC '${n}' ${a}: `,h),h),h=>{throw Vu("RestConnection",`RPC '${n}' ${a} failed with error: `,h,"url: ",l,"request:",i),h})}Lo(n,r,i,s,o,a){return this.Mo(n,r,i,s,o)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+eh}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}xo(n,r){const i=lD[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const s=L0();return new Promise((o,a)=>{const l=new UN;l.setWithCredentials(!0),l.listenOnce(VN.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Lp.NO_ERROR:const h=l.getResponseJson();dt(ai,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case Lp.TIMEOUT:dt(ai,`RPC '${e}' ${s} timed out`),a(new Je(Le.DEADLINE_EXCEEDED,"Request time out"));break;case Lp.HTTP_ERROR:const g=l.getStatus();if(dt(ai,`RPC '${e}' ${s} failed with status:`,g,"response text:",l.getResponseText()),g>0){let y=l.getResponseJson();Array.isArray(y)&&(y=y[0]);const p=y==null?void 0:y.error;if(p&&p.status&&p.message){const _=function(C){const x=C.toLowerCase().replace(/_/g,"-");return Object.values(Le).indexOf(x)>=0?x:Le.UNKNOWN}(p.status);a(new Je(_,p.message))}else a(new Je(Le.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new Je(Le.UNAVAILABLE,"Connection failed."));break;default:It()}}finally{dt(ai,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(i);dt(ai,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",c,r,15)})}Bo(e,n,r){const i=L0(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=qN(),a=zN(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const h=s.join("");dt(ai,`Creating RPC '${e}' stream ${i}: ${h}`,l);const g=o.createWebChannel(h,l);let y=!1,p=!1;const _=new cD({Io:C=>{p?dt(ai,`Not sending because RPC '${e}' stream ${i} is closed:`,C):(y||(dt(ai,`Opening RPC '${e}' stream ${i} transport.`),g.open(),y=!0),dt(ai,`RPC '${e}' stream ${i} sending:`,C),g.send(C))},To:()=>g.close()}),N=(C,x,k)=>{C.listen(x,R=>{try{k(R)}catch(j){setTimeout(()=>{throw j},0)}})};return N(g,$h.EventType.OPEN,()=>{p||(dt(ai,`RPC '${e}' stream ${i} transport opened.`),_.yo())}),N(g,$h.EventType.CLOSE,()=>{p||(p=!0,dt(ai,`RPC '${e}' stream ${i} transport closed`),_.So())}),N(g,$h.EventType.ERROR,C=>{p||(p=!0,Vu(ai,`RPC '${e}' stream ${i} transport errored:`,C),_.So(new Je(Le.UNAVAILABLE,"The operation could not be completed")))}),N(g,$h.EventType.MESSAGE,C=>{var x;if(!p){const k=C.data[0];xn(!!k);const R=k,j=R.error||((x=R[0])===null||x===void 0?void 0:x.error);if(j){dt(ai,`RPC '${e}' stream ${i} received error:`,j);const q=j.status;let Q=function(T){const F=wr[T];if(F!==void 0)return mS(F)}(q),D=j.message;Q===void 0&&(Q=Le.INTERNAL,D="Unknown error status: "+q+" with message "+j.message),p=!0,_.So(new Je(Q,D)),g.close()}else dt(ai,`RPC '${e}' stream ${i} received:`,k),_.bo(k)}}),N(a,BN.STAT_EVENT,C=>{C.stat===w2.PROXY?dt(ai,`RPC '${e}' stream ${i} detected buffering proxy`):C.stat===w2.NOPROXY&&dt(ai,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{_.wo()},0),_}}function R0(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vg(t){return new xj(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TS{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&dt("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kS{constructor(e,n,r,i,s,o,a,l){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new TS(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===Le.RESOURCE_EXHAUSTED?(ma(n.toString()),ma("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===Le.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new Je(Le.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return dt("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(dt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class hD extends kS{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=Nj(this.serializer,e),r=function(s){if(!("targetChange"in s))return jt.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?jt.min():o.readTime?Co(o.readTime):jt.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=I2(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=N2(l)?{documents:Ej(s,l)}:{query:Tj(s,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=vS(s,o.resumeToken);const c=E2(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(jt.min())>0){a.readTime=Sm(s,o.snapshotVersion.toTimestamp());const c=E2(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=Ij(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=I2(this.serializer),n.removeTarget=e,this.a_(n)}}class dD extends kS{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return xn(!!e.streamToken),this.lastStreamToken=e.streamToken,xn(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){xn(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=Aj(e.writeResults,e.commitTime),r=Co(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=I2(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Sj(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fD extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new Je(Le.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,T2(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===Le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Je(Le.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,T2(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Je(Le.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class pD{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(ma(n),this.D_=!1):dt("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mD{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(async()=>{jc(this)&&(dt("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=Dt(l);c.L_.add(4),await uf(c),c.q_.set("Unknown"),c.L_.delete(4),await wg(c)}(this))})}),this.q_=new pD(r,i)}}async function wg(t){if(jc(t))for(const e of t.B_)await e(!0)}async function uf(t){for(const e of t.B_)await e(!1)}function IS(t,e){const n=Dt(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Tv(n)?Ev(n):rh(n).r_()&&Av(n,e))}function Sv(t,e){const n=Dt(t),r=rh(n);n.N_.delete(e),r.r_()&&CS(n,e),n.N_.size===0&&(r.r_()?r.o_():jc(n)&&n.q_.set("Unknown"))}function Av(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(jt.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}rh(t).A_(e)}function CS(t,e){t.Q_.xe(e),rh(t).R_(e)}function Ev(t){t.Q_=new gj({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),rh(t).start(),t.q_.v_()}function Tv(t){return jc(t)&&!rh(t).n_()&&t.N_.size>0}function jc(t){return Dt(t).L_.size===0}function PS(t){t.Q_=void 0}async function gD(t){t.q_.set("Online")}async function yD(t){t.N_.forEach((e,n)=>{Av(t,e)})}async function vD(t,e){PS(t),Tv(t)?(t.q_.M_(e),Ev(t)):t.q_.set("Unknown")}async function wD(t,e,n){if(t.q_.set("Online"),e instanceof yS&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.N_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.N_.delete(a),i.Q_.removeTarget(a))}(t,e)}catch(r){dt("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Am(t,r)}else if(e instanceof Dp?t.Q_.Ke(e):e instanceof gS?t.Q_.He(e):t.Q_.We(e),!n.isEqual(jt.min()))try{const r=await ES(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.Q_.rt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const h=s.N_.get(c);h&&s.N_.set(c,h.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const h=s.N_.get(l);if(!h)return;s.N_.set(l,h.withResumeToken(ti.EMPTY_BYTE_STRING,h.snapshotVersion)),CS(s,l);const g=new il(h.target,l,c,h.sequenceNumber);Av(s,g)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){dt("RemoteStore","Failed to raise snapshot:",r),await Am(t,r)}}async function Am(t,e,n){if(!af(e))throw e;t.L_.add(1),await uf(t),t.q_.set("Offline"),n||(n=()=>ES(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{dt("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await wg(t)})}function LS(t,e){return e().catch(n=>Am(t,n,e))}async function xg(t){const e=Dt(t),n=_l(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;xD(e);)try{const i=await rD(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,bD(e,i)}catch(i){await Am(e,i)}RS(e)&&jS(e)}function xD(t){return jc(t)&&t.O_.length<10}function bD(t,e){t.O_.push(e);const n=_l(t);n.r_()&&n.V_&&n.m_(e.mutations)}function RS(t){return jc(t)&&!_l(t).n_()&&t.O_.length>0}function jS(t){_l(t).start()}async function _D(t){_l(t).p_()}async function ND(t){const e=_l(t);for(const n of t.O_)e.m_(n.mutations)}async function SD(t,e,n){const r=t.O_.shift(),i=vv.from(r,e,n);await LS(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await xg(t)}async function AD(t,e){e&&_l(t).V_&&await async function(r,i){if(function(o){return fj(o)&&o!==Le.ABORTED}(i.code)){const s=r.O_.shift();_l(r).s_(),await LS(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await xg(r)}}(t,e),RS(t)&&jS(t)}async function vb(t,e){const n=Dt(t);n.asyncQueue.verifyOperationInProgress(),dt("RemoteStore","RemoteStore received new credentials");const r=jc(n);n.L_.add(3),await uf(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await wg(n)}async function ED(t,e){const n=Dt(t);e?(n.L_.delete(2),await wg(n)):e||(n.L_.add(2),await uf(n),n.q_.set("Unknown"))}function rh(t){return t.K_||(t.K_=function(n,r,i){const s=Dt(n);return s.w_(),new hD(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:gD.bind(null,t),Ro:yD.bind(null,t),mo:vD.bind(null,t),d_:wD.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Tv(t)?Ev(t):t.q_.set("Unknown")):(await t.K_.stop(),PS(t))})),t.K_}function _l(t){return t.U_||(t.U_=function(n,r,i){const s=Dt(n);return s.w_(),new dD(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:_D.bind(null,t),mo:AD.bind(null,t),f_:ND.bind(null,t),g_:SD.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await xg(t)):(await t.U_.stop(),t.O_.length>0&&(dt("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kv{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new aa,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new kv(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Je(Le.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Iv(t,e){if(ma("AsyncQueue",`${e}: ${t}`),af(t))return new Je(Le.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eu{constructor(e){this.comparator=e?(n,r)=>e(n,r)||xt.comparator(n.key,r.key):(n,r)=>xt.comparator(n.key,r.key),this.keyedMap=Wh(),this.sortedSet=new Zn(this.comparator)}static emptySet(e){return new Eu(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Eu)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Eu;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wb{constructor(){this.W_=new Zn(xt.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):It():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Wu{constructor(e,n,r,i,s,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Wu(e,n,Eu.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&dg(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TD{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class kD{constructor(){this.queries=xb(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=Dt(n),s=i.queries;i.queries=xb(),s.forEach((o,a)=>{for(const l of a.j_)l.onError(r)})})(this,new Je(Le.ABORTED,"Firestore shutting down"))}}function xb(){return new nh(t=>nS(t),dg)}async function Cv(t,e){const n=Dt(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new TD,r=e.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(i,!0);break;case 1:s.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=Iv(o,`Initialization of query '${Jc(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&Lv(n)}async function Pv(t,e){const n=Dt(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function ID(t,e){const n=Dt(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&Lv(n)}function CD(t,e,n){const r=Dt(t),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(n);r.queries.delete(e)}function Lv(t){t.Y_.forEach(e=>{e.next()})}var P2,bb;(bb=P2||(P2={})).ea="default",bb.Cache="cache";class Rv{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Wu(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Wu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==P2.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DS{constructor(e){this.key=e}}class OS{constructor(e){this.key=e}}class PD{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Yt(),this.mutatedKeys=Yt(),this.Aa=rS(e),this.Ra=new Eu(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new wb,i=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,g)=>{const y=i.get(h),p=fg(this.query,g)?g:null,_=!!y&&this.mutatedKeys.has(y.key),N=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let C=!1;y&&p?y.data.isEqual(p.data)?_!==N&&(r.track({type:3,doc:p}),C=!0):this.ga(y,p)||(r.track({type:2,doc:p}),C=!0,(l&&this.Aa(p,l)>0||c&&this.Aa(p,c)<0)&&(a=!0)):!y&&p?(r.track({type:0,doc:p}),C=!0):y&&!p&&(r.track({type:1,doc:y}),C=!0,(l||c)&&(a=!0)),C&&(p?(o=o.add(p),s=N?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((h,g)=>function(p,_){const N=C=>{switch(C){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return It()}};return N(p)-N(_)}(h.type,g.type)||this.Aa(h.doc,g.doc)),this.pa(r),i=i!=null&&i;const a=n&&!i?this.ya():[],l=this.da.size===0&&this.current&&!i?1:0,c=l!==this.Ea;return this.Ea=l,o.length!==0||c?{snapshot:new Wu(this.query,e.Ra,s,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new wb,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Yt(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new OS(r))}),this.da.forEach(r=>{e.has(r)||n.push(new DS(r))}),n}ba(e){this.Ta=e.Ts,this.da=Yt();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Wu.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class LD{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class RD{constructor(e){this.key=e,this.va=!1}}class jD{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new nh(a=>nS(a),dg),this.Ma=new Map,this.xa=new Set,this.Oa=new Zn(xt.comparator),this.Na=new Map,this.La=new bv,this.Ba={},this.ka=new Map,this.qa=$u.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function DD(t,e,n=!0){const r=zS(t);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await MS(r,e,n,!0),i}async function OD(t,e){const n=zS(t);await MS(n,e,!0,!1)}async function MS(t,e,n,r){const i=await iD(t.localStore,Io(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await MD(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&IS(t.remoteStore,i),a}async function MD(t,e,n,r,i){t.Ka=(g,y,p)=>async function(N,C,x,k){let R=C.view.ma(x);R.ns&&(R=await mb(N.localStore,C.query,!1).then(({documents:D})=>C.view.ma(D,R)));const j=k&&k.targetChanges.get(C.targetId),q=k&&k.targetMismatches.get(C.targetId)!=null,Q=C.view.applyChanges(R,N.isPrimaryClient,j,q);return Nb(N,C.targetId,Q.wa),Q.snapshot}(t,g,y,p);const s=await mb(t.localStore,e,!0),o=new PD(e,s.Ts),a=o.ma(s.documents),l=cf.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=o.applyChanges(a,t.isPrimaryClient,l);Nb(t,n,c.wa);const h=new LD(e,n,o);return t.Fa.set(e,h),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),c.snapshot}async function FD(t,e,n){const r=Dt(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!dg(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await C2(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Sv(r.remoteStore,i.targetId),L2(r,i.targetId)}).catch(of)):(L2(r,i.targetId),await C2(r.localStore,i.targetId,!0))}async function UD(t,e){const n=Dt(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Sv(n.remoteStore,r.targetId))}async function VD(t,e,n){const r=GD(t);try{const i=await function(o,a){const l=Dt(o),c=_r.now(),h=a.reduce((p,_)=>p.add(_.key),Yt());let g,y;return l.persistence.runTransaction("Locally write mutations","readwrite",p=>{let _=ga(),N=Yt();return l.cs.getEntries(p,h).next(C=>{_=C,_.forEach((x,k)=>{k.isValidDocument()||(N=N.add(x))})}).next(()=>l.localDocuments.getOverlayedDocuments(p,_)).next(C=>{g=C;const x=[];for(const k of a){const R=lj(k,g.get(k.key).overlayedDocument);R!=null&&x.push(new Cl(k.key,R,KN(R.value.mapValue),Pi.exists(!0)))}return l.mutationQueue.addMutationBatch(p,c,x,a)}).next(C=>{y=C;const x=C.applyToLocalDocumentSet(g,N);return l.documentOverlayCache.saveOverlays(p,C.batchId,x)})}).then(()=>({batchId:y.batchId,changes:sS(g)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let c=o.Ba[o.currentUser.toKey()];c||(c=new Zn(cn)),c=c.insert(a,l),o.Ba[o.currentUser.toKey()]=c}(r,i.batchId,n),await hf(r,i.changes),await xg(r.remoteStore)}catch(i){const s=Iv(i,"Failed to persist write");n.reject(s)}}async function FS(t,e){const n=Dt(t);try{const r=await tD(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Na.get(s);o&&(xn(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?xn(o.va):i.removedDocuments.size>0&&(xn(o.va),o.va=!1))}),await hf(n,r,e)}catch(r){await of(r)}}function _b(t,e,n){const r=Dt(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((s,o)=>{const a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=Dt(o);l.onlineState=a;let c=!1;l.queries.forEach((h,g)=>{for(const y of g.j_)y.Z_(a)&&(c=!0)}),c&&Lv(l)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function BD(t,e,n){const r=Dt(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),s=i&&i.key;if(s){let o=new Zn(xt.comparator);o=o.insert(s,mi.newNoDocument(s,jt.min()));const a=Yt().add(s),l=new yg(jt.min(),new Map,new Zn(cn),o,a);await FS(r,l),r.Oa=r.Oa.remove(s),r.Na.delete(e),jv(r)}else await C2(r.localStore,e,!1).then(()=>L2(r,e,n)).catch(of)}async function zD(t,e){const n=Dt(t),r=e.batch.batchId;try{const i=await eD(n.localStore,e);VS(n,r,null),US(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await hf(n,i)}catch(i){await of(i)}}async function qD(t,e,n){const r=Dt(t);try{const i=await function(o,a){const l=Dt(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let h;return l.mutationQueue.lookupMutationBatch(c,a).next(g=>(xn(g!==null),h=g.keys(),l.mutationQueue.removeMutationBatch(c,g))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,h,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,h)).next(()=>l.localDocuments.getDocuments(c,h))})}(r.localStore,e);VS(r,e,n),US(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await hf(r,i)}catch(i){await of(i)}}function US(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function VS(t,e,n){const r=Dt(t);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function L2(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||BS(t,r)})}function BS(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(Sv(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),jv(t))}function Nb(t,e,n){for(const r of n)r instanceof DS?(t.La.addReference(r.key,e),HD(t,r)):r instanceof OS?(dt("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||BS(t,r.key)):It()}function HD(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(dt("SyncEngine","New document in limbo: "+n),t.xa.add(r),jv(t))}function jv(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new xt(Dn.fromString(e)),r=t.qa.next();t.Na.set(r,new RD(n)),t.Oa=t.Oa.insert(n,r),IS(t.remoteStore,new il(Io(hg(n.path)),r,"TargetPurposeLimboResolution",hv.oe))}}async function hf(t,e,n){const r=Dt(t),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,l)=>{o.push(r.Ka(l,e,n).then(c=>{var h;if((c||n)&&r.isPrimaryClient){const g=c?!c.fromCache:(h=n==null?void 0:n.targetChanges.get(l.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(l.targetId,g?"current":"not-current")}if(c){i.push(c);const g=Nv.Wi(l.targetId,c);s.push(g)}}))}),await Promise.all(o),r.Ca.d_(i),await async function(l,c){const h=Dt(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>Oe.forEach(c,y=>Oe.forEach(y.$i,p=>h.persistence.referenceDelegate.addReference(g,y.targetId,p)).next(()=>Oe.forEach(y.Ui,p=>h.persistence.referenceDelegate.removeReference(g,y.targetId,p)))))}catch(g){if(!af(g))throw g;dt("LocalStore","Failed to update sequence numbers: "+g)}for(const g of c){const y=g.targetId;if(!g.fromCache){const p=h.os.get(y),_=p.snapshotVersion,N=p.withLastLimboFreeSnapshotVersion(_);h.os=h.os.insert(y,N)}}}(r.localStore,s))}async function $D(t,e){const n=Dt(t);if(!n.currentUser.isEqual(e)){dt("SyncEngine","User change. New user:",e.toKey());const r=await AS(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(l=>{l.reject(new Je(Le.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await hf(n,r.hs)}}function WD(t,e){const n=Dt(t),r=n.Na.get(e);if(r&&r.va)return Yt().add(r.key);{let i=Yt();const s=n.Ma.get(e);if(!s)return i;for(const o of s){const a=n.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}function zS(t){const e=Dt(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=FS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=WD.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=BD.bind(null,e),e.Ca.d_=ID.bind(null,e.eventManager),e.Ca.$a=CD.bind(null,e.eventManager),e}function GD(t){const e=Dt(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=zD.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=qD.bind(null,e),e}class Em{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=vg(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return Zj(this.persistence,new Xj,e.initialUser,this.serializer)}Ga(e){return new Kj(_v.Zr,this.serializer)}Wa(e){return new oD}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Em.provider={build:()=>new Em};class R2{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>_b(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=$D.bind(null,this.syncEngine),await ED(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new kD}()}createDatastore(e){const n=vg(e.databaseInfo.databaseId),r=function(s){return new uD(s)}(e.databaseInfo);return function(s,o,a,l){return new fD(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new mD(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>_b(this.syncEngine,n,0),function(){return yb.D()?new yb:new aD}())}createSyncEngine(e,n){return function(i,s,o,a,l,c,h){const g=new jD(i,s,o,a,l,c);return h&&(g.Qa=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=Dt(i);dt("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await uf(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}R2.provider={build:()=>new R2};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dv{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):ma("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KD{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=di.UNAUTHENTICATED,this.clientId=$N.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{dt("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(dt("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new aa;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Iv(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function j0(t,e){t.asyncQueue.verifyOperationInProgress(),dt("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await AS(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Sb(t,e){t.asyncQueue.verifyOperationInProgress();const n=await YD(t);dt("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>vb(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>vb(e.remoteStore,i)),t._onlineComponents=e}async function YD(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){dt("FirestoreClient","Using user provided OfflineComponentProvider");try{await j0(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===Le.FAILED_PRECONDITION||i.code===Le.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Vu("Error using user provided cache. Falling back to memory cache: "+n),await j0(t,new Em)}}else dt("FirestoreClient","Using default OfflineComponentProvider"),await j0(t,new Em);return t._offlineComponents}async function qS(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(dt("FirestoreClient","Using user provided OnlineComponentProvider"),await Sb(t,t._uninitializedComponentsProvider._online)):(dt("FirestoreClient","Using default OnlineComponentProvider"),await Sb(t,new R2))),t._onlineComponents}function QD(t){return qS(t).then(e=>e.syncEngine)}async function Tm(t){const e=await qS(t),n=e.eventManager;return n.onListen=DD.bind(null,e.syncEngine),n.onUnlisten=FD.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=OD.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=UD.bind(null,e.syncEngine),n}function XD(t,e,n={}){const r=new aa;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const h=new Dv({next:y=>{h.Za(),o.enqueueAndForget(()=>Pv(s,g));const p=y.docs.has(a);!p&&y.fromCache?c.reject(new Je(Le.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&y.fromCache&&l&&l.source==="server"?c.reject(new Je(Le.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(y)},error:y=>c.reject(y)}),g=new Rv(hg(a.path),h,{includeMetadataChanges:!0,_a:!0});return Cv(s,g)}(await Tm(t),t.asyncQueue,e,n,r)),r.promise}function JD(t,e,n={}){const r=new aa;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const h=new Dv({next:y=>{h.Za(),o.enqueueAndForget(()=>Pv(s,g)),y.fromCache&&l.source==="server"?c.reject(new Je(Le.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(y)},error:y=>c.reject(y)}),g=new Rv(a,h,{includeMetadataChanges:!0,_a:!0});return Cv(s,g)}(await Tm(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HS(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ab=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $S(t,e,n){if(!n)throw new Je(Le.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function ZD(t,e,n,r){if(e===!0&&r===!0)throw new Je(Le.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Eb(t){if(!xt.isDocumentKey(t))throw new Je(Le.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Tb(t){if(xt.isDocumentKey(t))throw new Je(Le.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function bg(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":It()}function Li(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Je(Le.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=bg(t);throw new Je(Le.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kb{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Je(Le.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Je(Le.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}ZD("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=HS((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Je(Le.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Je(Le.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Je(Le.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class _g{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new kb({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Je(Le.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Je(Le.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new kb(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new yR;switch(r.type){case"firstParty":return new bR(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Je(Le.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Ab.get(n);r&&(dt("ComponentProvider","Removing Datastore"),Ab.delete(n),r.terminate())}(this),Promise.resolve()}}function e9(t,e,n,r={}){var i;const s=(t=Li(t,_g))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Vu("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=di.MOCK_USER;else{a=K6(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new Je(Le.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new di(c)}t._authCredentials=new vR(new HN(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pl{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Pl(this.firestore,e,this._query)}}class gi{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new yl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new gi(this.firestore,e,this._key)}}class yl extends Pl{constructor(e,n,r){super(e,n,hg(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new gi(this.firestore,null,new xt(e))}withConverter(e){return new yl(this.firestore,e,this._path)}}function Lt(t,e,...n){if(t=bn(t),$S("collection","path",e),t instanceof _g){const r=Dn.fromString(e,...n);return Tb(r),new yl(t,null,r)}{if(!(t instanceof gi||t instanceof yl))throw new Je(Le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Dn.fromString(e,...n));return Tb(r),new yl(t.firestore,null,r)}}function Zt(t,e,...n){if(t=bn(t),arguments.length===1&&(e=$N.newId()),$S("doc","path",e),t instanceof _g){const r=Dn.fromString(e,...n);return Eb(r),new gi(t,null,new xt(r))}{if(!(t instanceof gi||t instanceof yl))throw new Je(Le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Dn.fromString(e,...n));return Eb(r),new gi(t.firestore,t instanceof yl?t.converter:null,new xt(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ib{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new TS(this,"async_queue_retry"),this.Vu=()=>{const r=R0();r&&dt("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=R0();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=R0();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new aa;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!af(e))throw e;dt("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw ma("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=kv.createAndSchedule(this,e,n,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&It()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function Cb(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class Lo extends _g{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new Ib,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Ib(e),this._firestoreClient=void 0,await e}}}function t9(t,e){const n=typeof t=="object"?t:og(),r=typeof t=="string"?t:"(default)",i=Ic(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=$6("firestore");s&&e9(i,...s)}return i}function df(t){if(t._terminated)throw new Je(Le.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||n9(t),t._firestoreClient}function n9(t){var e,n,r;const i=t._freezeSettings(),s=function(a,l,c,h){return new jR(a,l,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,HS(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new KD(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Gu(ti.fromBase64String(e))}catch(n){throw new Je(Le.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Gu(ti.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ff{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Je(Le.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Qr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pf{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ov{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Je(Le.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Je(Le.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return cn(this._lat,e._lat)||cn(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mv{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r9=/^__.*__$/;class i9{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Cl(e,this.data,this.fieldMask,n,this.fieldTransforms):new lf(e,this.data,n,this.fieldTransforms)}}class WS{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Cl(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function GS(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw It()}}class Ng{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Ng(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return km(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(GS(this.Cu)&&r9.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class s9{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||vg(e)}Qu(e,n,r,i=!1){return new Ng({Cu:e,methodName:n,qu:r,path:Qr.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function mf(t){const e=t._freezeSettings(),n=vg(t._databaseId);return new s9(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Fv(t,e,n,r,i,s={}){const o=t.Qu(s.merge||s.mergeFields?2:0,e,n,i);Bv("Data must be an object, but it was:",o,r);const a=QS(r,o);let l,c;if(s.merge)l=new cs(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const h=[];for(const g of s.mergeFields){const y=j2(e,g,n);if(!o.contains(y))throw new Je(Le.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);JS(h,y)||h.push(y)}l=new cs(h),c=o.fieldTransforms.filter(g=>l.covers(g.field))}else l=null,c=o.fieldTransforms;return new i9(new Bi(a),l,c)}class Sg extends pf{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Sg}}function o9(t,e,n){return new Ng({Cu:3,qu:e.settings.qu,methodName:t._methodName,xu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Uv extends pf{_toFieldTransform(e){return new dS(e.path,new Vd)}isEqual(e){return e instanceof Uv}}class Vv extends pf{constructor(e,n){super(e),this.Ku=n}_toFieldTransform(e){const n=o9(this,e,!0),r=this.Ku.map(s=>ih(s,n)),i=new Hu(r);return new dS(e.path,i)}isEqual(e){return e instanceof Vv&&Ld(this.Ku,e.Ku)}}function KS(t,e,n,r){const i=t.Qu(1,e,n);Bv("Data must be an object, but it was:",i,r);const s=[],o=Bi.empty();Rc(r,(l,c)=>{const h=zv(e,l,n);c=bn(c);const g=i.Nu(h);if(c instanceof Sg)s.push(h);else{const y=ih(c,g);y!=null&&(s.push(h),o.set(h,y))}});const a=new cs(s);return new WS(o,a,i.fieldTransforms)}function YS(t,e,n,r,i,s){const o=t.Qu(1,e,n),a=[j2(e,r,n)],l=[i];if(s.length%2!=0)throw new Je(Le.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let y=0;y<s.length;y+=2)a.push(j2(e,s[y])),l.push(s[y+1]);const c=[],h=Bi.empty();for(let y=a.length-1;y>=0;--y)if(!JS(c,a[y])){const p=a[y];let _=l[y];_=bn(_);const N=o.Nu(p);if(_ instanceof Sg)c.push(p);else{const C=ih(_,N);C!=null&&(c.push(p),h.set(p,C))}}const g=new cs(c);return new WS(h,g,o.fieldTransforms)}function a9(t,e,n,r=!1){return ih(n,t.Qu(r?4:3,e))}function ih(t,e){if(XS(t=bn(t)))return Bv("Unsupported field value:",e,t),QS(t,e);if(t instanceof pf)return function(r,i){if(!GS(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=ih(a,i.Lu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=bn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return nj(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=_r.fromDate(r);return{timestampValue:Sm(i.serializer,s)}}if(r instanceof _r){const s=new _r(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Sm(i.serializer,s)}}if(r instanceof Ov)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Gu)return{bytesValue:vS(i.serializer,r._byteString)};if(r instanceof gi){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:xv(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Mv)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.Bu("VectorValues must only contain numeric values.");return yv(a.serializer,l)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${bg(r)}`)}(t,e)}function QS(t,e){const n={};return WN(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Rc(t,(r,i)=>{const s=ih(i,e.Mu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function XS(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof _r||t instanceof Ov||t instanceof Gu||t instanceof gi||t instanceof pf||t instanceof Mv)}function Bv(t,e,n){if(!XS(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=bg(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function j2(t,e,n){if((e=bn(e))instanceof ff)return e._internalPath;if(typeof e=="string")return zv(t,e);throw km("Field path arguments must be of type string or ",t,!1,void 0,n)}const l9=new RegExp("[~\\*/\\[\\]]");function zv(t,e,n){if(e.search(l9)>=0)throw km(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new ff(...e.split("."))._internalPath}catch{throw km(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function km(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new Je(Le.INVALID_ARGUMENT,a+t+l)}function JS(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZS{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new gi(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new c9(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Ag("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class c9 extends ZS{data(){return super.data()}}function Ag(t,e){return typeof e=="string"?zv(t,e):e instanceof ff?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eA(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Je(Le.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class qv{}class tA extends qv{}function vc(t,e,...n){let r=[];e instanceof qv&&r.push(e),r=r.concat(n),function(s){const o=s.filter(l=>l instanceof Hv).length,a=s.filter(l=>l instanceof Eg).length;if(o>1||o>0&&a>0)throw new Je(Le.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class Eg extends tA{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Eg(e,n,r)}_apply(e){const n=this._parse(e);return nA(e._query,n),new Pl(e.firestore,e.converter,S2(e._query,n))}_parse(e){const n=mf(e.firestore);return function(s,o,a,l,c,h,g){let y;if(c.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new Je(Le.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){Lb(g,h);const p=[];for(const _ of g)p.push(Pb(l,s,_));y={arrayValue:{values:p}}}else y=Pb(l,s,g)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||Lb(g,h),y=a9(a,o,g,h==="in"||h==="not-in");return br.create(c,h,y)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function zd(t,e,n){const r=e,i=Ag("where",t);return Eg._create(i,r,n)}class Hv extends qv{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Hv(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:to.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)nA(o,l),o=S2(o,l)}(e._query,n),new Pl(e.firestore,e.converter,S2(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class $v extends tA{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new $v(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new Je(Le.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new Je(Le.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ud(s,o)}(e._query,this._field,this._direction);return new Pl(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new th(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function Wv(t,e="asc"){const n=e,r=Ag("orderBy",t);return $v._create(r,n)}function Pb(t,e,n){if(typeof(n=bn(n))=="string"){if(n==="")throw new Je(Le.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!tS(e)&&n.indexOf("/")!==-1)throw new Je(Le.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Dn.fromString(n));if(!xt.isDocumentKey(r))throw new Je(Le.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Jx(t,new xt(r))}if(n instanceof gi)return Jx(t,n._key);throw new Je(Le.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${bg(n)}.`)}function Lb(t,e){if(!Array.isArray(t)||t.length===0)throw new Je(Le.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function nA(t,e){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Je(Le.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Je(Le.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class u9{convertValue(e,n="none"){switch(yc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return dr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(gc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw It()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Rc(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>dr(o.doubleValue));return new Mv(s)}convertGeoPoint(e){return new Ov(dr(e.latitude),dr(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=fv(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Od(e));default:return null}}convertTimestamp(e){const n=bl(e);return new _r(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Dn.fromString(e);xn(SS(r));const i=new Md(r.get(1),r.get(3)),s=new xt(r.popFirst(5));return i.isEqual(n)||ma(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gv(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kh{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class rA extends ZS{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Op(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Ag("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Op extends rA{data(e={}){return super.data(e)}}class iA{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Kh(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Op(this._firestore,this._userDataWriter,r.key,r,new Kh(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Je(Le.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new Op(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Kh(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new Op(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Kh(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,h=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:h9(a.type),doc:l,oldIndex:c,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function h9(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return It()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xs(t){t=Li(t,gi);const e=Li(t.firestore,Lo);return XD(df(e),t._key).then(n=>oA(e,t,n))}class Kv extends u9{constructor(e){super(),this.firestore=e}convertBytes(e){return new Gu(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new gi(this.firestore,null,n)}}function zn(t){t=Li(t,Pl);const e=Li(t.firestore,Lo),n=df(e),r=new Kv(e);return eA(t._query),JD(n,t._query).then(i=>new iA(e,r,t,i))}function Yv(t,e,n){t=Li(t,gi);const r=Li(t.firestore,Lo),i=Gv(t.converter,e,n);return gf(r,[Fv(mf(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Pi.none())])}function Xr(t,e,n,...r){t=Li(t,gi);const i=Li(t.firestore,Lo),s=mf(i);let o;return o=typeof(e=bn(e))=="string"||e instanceof ff?YS(s,"updateDoc",t._key,e,n,r):KS(s,"updateDoc",t._key,e),gf(i,[o.toMutation(t._key,Pi.exists(!0))])}function sA(t){return gf(Li(t.firestore,Lo),[new gg(t._key,Pi.none())])}function fi(t,e){const n=Li(t.firestore,Lo),r=Zt(t),i=Gv(t.converter,e);return gf(n,[Fv(mf(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Pi.exists(!1))]).then(()=>r)}function Im(t,...e){var n,r,i;t=bn(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||Cb(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(Cb(e[o])){const g=e[o];e[o]=(n=g.next)===null||n===void 0?void 0:n.bind(g),e[o+1]=(r=g.error)===null||r===void 0?void 0:r.bind(g),e[o+2]=(i=g.complete)===null||i===void 0?void 0:i.bind(g)}let l,c,h;if(t instanceof gi)c=Li(t.firestore,Lo),h=hg(t._key.path),l={next:g=>{e[o]&&e[o](oA(c,t,g))},error:e[o+1],complete:e[o+2]};else{const g=Li(t,Pl);c=Li(g.firestore,Lo),h=g._query;const y=new Kv(c);l={next:p=>{e[o]&&e[o](new iA(c,y,g,p))},error:e[o+1],complete:e[o+2]},eA(t._query)}return function(y,p,_,N){const C=new Dv(N),x=new Rv(p,C,_);return y.asyncQueue.enqueueAndForget(async()=>Cv(await Tm(y),x)),()=>{C.Za(),y.asyncQueue.enqueueAndForget(async()=>Pv(await Tm(y),x))}}(df(c),h,a,l)}function gf(t,e){return function(r,i){const s=new aa;return r.asyncQueue.enqueueAndForget(async()=>VD(await QD(r),i,s)),s.promise}(df(t),e)}function oA(t,e,n){const r=n.docs.get(e._key),i=new Kv(t);return new rA(t,i,e._key,r,new Kh(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d9{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=mf(e)}set(e,n,r){this._verifyNotCommitted();const i=D0(e,this._firestore),s=Gv(i.converter,n,r),o=Fv(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,Pi.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const s=D0(e,this._firestore);let o;return o=typeof(n=bn(n))=="string"||n instanceof ff?YS(this._dataReader,"WriteBatch.update",s._key,n,r,i):KS(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,Pi.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=D0(e,this._firestore);return this._mutations=this._mutations.concat(new gg(n._key,Pi.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Je(Le.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function D0(t,e){if((t=bn(t)).firestore!==e)throw new Je(Le.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function xo(){return new Uv("serverTimestamp")}function f9(...t){return new Vv("arrayUnion",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aA(t){return df(t=Li(t,Lo)),new d9(t,e=>gf(t,e))}(function(e,n=!0){(function(i){eh=i})(Cc),Zs(new Ds("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new Lo(new wR(r.getProvider("auth-internal")),new NR(r.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new Je(Le.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Md(c.options.projectId,h)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Wi(Gx,"4.7.3",e),Wi(Gx,"4.7.3","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lA="firebasestorage.googleapis.com",cA="storageBucket",p9=2*60*1e3,m9=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ar extends ro{constructor(e,n,r=0){super(O0(e),`Firebase Storage: ${n} (${O0(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ar.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return O0(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var or;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(or||(or={}));function O0(t){return"storage/"+t}function Qv(){const t="An unknown error occurred, please check the error payload for server response.";return new ar(or.UNKNOWN,t)}function g9(t){return new ar(or.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function y9(t){return new ar(or.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function v9(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new ar(or.UNAUTHENTICATED,t)}function w9(){return new ar(or.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function x9(t){return new ar(or.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function b9(){return new ar(or.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function _9(){return new ar(or.CANCELED,"User canceled the upload/download.")}function N9(t){return new ar(or.INVALID_URL,"Invalid URL '"+t+"'.")}function S9(t){return new ar(or.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function A9(){return new ar(or.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+cA+"' property when initializing the app?")}function E9(){return new ar(or.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function T9(){return new ar(or.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function k9(t){return new ar(or.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function D2(t){return new ar(or.INVALID_ARGUMENT,t)}function uA(){return new ar(or.APP_DELETED,"The Firebase app was deleted.")}function I9(t){return new ar(or.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function cd(t,e){return new ar(or.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Oh(t){throw new ar(or.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=us.makeFromUrl(e,n)}catch{return new us(e,"")}if(r.path==="")return r;throw S9(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(j){j.path.charAt(j.path.length-1)==="/"&&(j.path_=j.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),l={bucket:1,path:3};function c(j){j.path_=decodeURIComponent(j.path)}const h="v[A-Za-z0-9_]+",g=n.replace(/[.]/g,"\\."),y="(/([^?#]*).*)?$",p=new RegExp(`^https?://${g}/${h}/b/${i}/o${y}`,"i"),_={bucket:1,path:3},N=n===lA?"(?:storage.googleapis.com|storage.cloud.google.com)":n,C="([^?#]*)",x=new RegExp(`^https?://${N}/${i}/${C}`,"i"),R=[{regex:a,indices:l,postModify:s},{regex:p,indices:_,postModify:c},{regex:x,indices:{bucket:1,path:2},postModify:c}];for(let j=0;j<R.length;j++){const q=R[j],Q=q.regex.exec(e);if(Q){const D=Q[q.indices.bucket];let S=Q[q.indices.path];S||(S=""),r=new us(D,S),q.postModify(r);break}}if(r==null)throw N9(e);return r}}class C9{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P9(t,e,n){let r=1,i=null,s=null,o=!1,a=0;function l(){return a===2}let c=!1;function h(...C){c||(c=!0,e.apply(null,C))}function g(C){i=setTimeout(()=>{i=null,t(p,l())},C)}function y(){s&&clearTimeout(s)}function p(C,...x){if(c){y();return}if(C){y(),h.call(null,C,...x);return}if(l()||o){y(),h.call(null,C,...x);return}r<64&&(r*=2);let R;a===1?(a=2,R=0):R=(r+Math.random())*1e3,g(R)}let _=!1;function N(C){_||(_=!0,y(),!c&&(i!==null?(C||(a=2),clearTimeout(i),g(0)):C||(a=1)))}return g(0),s=setTimeout(()=>{o=!0,N(!0)},n),N}function L9(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R9(t){return t!==void 0}function j9(t){return typeof t=="object"&&!Array.isArray(t)}function Xv(t){return typeof t=="string"||t instanceof String}function Rb(t){return Jv()&&t instanceof Blob}function Jv(){return typeof Blob<"u"}function jb(t,e,n,r){if(r<e)throw D2(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw D2(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zv(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function hA(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var oc;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(oc||(oc={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D9(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O9{constructor(e,n,r,i,s,o,a,l,c,h,g,y=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=h,this.connectionFactory_=g,this.retry=y,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((p,_)=>{this.resolve_=p,this.reject_=_,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new sp(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===oc.NO_ERROR,l=s.getStatus();if(!a||D9(l,this.additionalRetryCodes_)&&this.retry){const h=s.getErrorCode()===oc.ABORT;r(!1,new sp(!1,null,h));return}const c=this.successCodes_.indexOf(l)!==-1;r(!0,new sp(c,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());R9(l)?s(l):s()}catch(l){o(l)}else if(a!==null){const l=Qv();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(i.canceled){const l=this.appDelete_?uA():_9();o(l)}else{const l=b9();o(l)}};this.canceled_?n(!1,new sp(!1,null,!0)):this.backoffId_=P9(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&L9(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class sp{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function M9(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function F9(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function U9(t,e){e&&(t["X-Firebase-GMPID"]=e)}function V9(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function B9(t,e,n,r,i,s,o=!0){const a=hA(t.urlParams),l=t.url+a,c=Object.assign({},t.headers);return U9(c,e),M9(c,n),F9(c,s),V9(c,r),new O9(l,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z9(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function q9(...t){const e=z9();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(Jv())return new Blob(t);throw new ar(or.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function H9(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $9(t){if(typeof atob>"u")throw k9("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const No={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class M0{constructor(e,n){this.data=e,this.contentType=n||null}}function W9(t,e){switch(t){case No.RAW:return new M0(dA(e));case No.BASE64:case No.BASE64URL:return new M0(fA(t,e));case No.DATA_URL:return new M0(K9(e),Y9(e))}throw Qv()}function dA(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const s=r,o=t.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function G9(t){let e;try{e=decodeURIComponent(t)}catch{throw cd(No.DATA_URL,"Malformed data URL.")}return dA(e)}function fA(t,e){switch(t){case No.BASE64:{const i=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(i||s)throw cd(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case No.BASE64URL:{const i=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(i||s)throw cd(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=$9(e)}catch(i){throw i.message.includes("polyfill")?i:cd(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class pA{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw cd(No.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=Q9(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function K9(t){const e=new pA(t);return e.base64?fA(No.BASE64,e.rest):G9(e.rest)}function Y9(t){return new pA(t).contentType}function Q9(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class el{constructor(e,n){let r=0,i="";Rb(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(Rb(this.data_)){const r=this.data_,i=H9(r,e,n);return i===null?null:new el(i)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new el(r,!0)}}static getBlob(...e){if(Jv()){const n=e.map(r=>r instanceof el?r.data_:r);return new el(q9.apply(null,n))}else{const n=e.map(o=>Xv(o)?W9(No.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new el(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mA(t){let e;try{e=JSON.parse(t)}catch{return null}return j9(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X9(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function J9(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function gA(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z9(t,e){return e}class Ti{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||Z9}}let op=null;function eO(t){return!Xv(t)||t.length<2?t:gA(t)}function yA(){if(op)return op;const t=[];t.push(new Ti("bucket")),t.push(new Ti("generation")),t.push(new Ti("metageneration")),t.push(new Ti("name","fullPath",!0));function e(s,o){return eO(o)}const n=new Ti("name");n.xform=e,t.push(n);function r(s,o){return o!==void 0?Number(o):o}const i=new Ti("size");return i.xform=r,t.push(i),t.push(new Ti("timeCreated")),t.push(new Ti("updated")),t.push(new Ti("md5Hash",null,!0)),t.push(new Ti("cacheControl",null,!0)),t.push(new Ti("contentDisposition",null,!0)),t.push(new Ti("contentEncoding",null,!0)),t.push(new Ti("contentLanguage",null,!0)),t.push(new Ti("contentType",null,!0)),t.push(new Ti("metadata","customMetadata",!0)),op=t,op}function tO(t,e){function n(){const r=t.bucket,i=t.fullPath,s=new us(r,i);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:n})}function nO(t,e,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const o=n[s];r[o.local]=o.xform(r,e[o.server])}return tO(r,t),r}function vA(t,e,n){const r=mA(e);return r===null?null:nO(t,r,n)}function rO(t,e,n,r){const i=mA(e);if(i===null||!Xv(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(c=>{const h=t.bucket,g=t.fullPath,y="/b/"+o(h)+"/o/"+o(g),p=Zv(y,n,r),_=hA({alt:"media",token:c});return p+_})[0]}function iO(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(n[s.server]=t[s.local])}return JSON.stringify(n)}class wA{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xA(t){if(!t)throw Qv()}function sO(t,e){function n(r,i){const s=vA(t,i,e);return xA(s!==null),s}return n}function oO(t,e){function n(r,i){const s=vA(t,i,e);return xA(s!==null),rO(s,i,t.host,t._protocol)}return n}function bA(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=w9():i=v9():n.getStatus()===402?i=y9(t.bucket):n.getStatus()===403?i=x9(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function aO(t){const e=bA(t);function n(r,i){let s=e(r,i);return r.getStatus()===404&&(s=g9(t.path)),s.serverResponse=i.serverResponse,s}return n}function lO(t,e,n){const r=e.fullServerUrl(),i=Zv(r,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,a=new wA(i,s,oO(t,n),o);return a.errorHandler=aO(e),a}function cO(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function uO(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=cO(null,e)),r}function hO(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let R="";for(let j=0;j<2;j++)R=R+Math.random().toString().slice(2);return R}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const c=uO(e,r,i),h=iO(c,n),g="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+h+`\r
--`+l+`\r
Content-Type: `+c.contentType+`\r
\r
`,y=`\r
--`+l+"--",p=el.getBlob(g,r,y);if(p===null)throw E9();const _={name:c.fullPath},N=Zv(s,t.host,t._protocol),C="POST",x=t.maxUploadRetryTime,k=new wA(N,C,sO(t,n),x);return k.urlParams=_,k.headers=o,k.body=p.uploadData(),k.errorHandler=bA(e),k}class dO{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=oc.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=oc.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=oc.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i){if(this.sent_)throw Oh("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Oh("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Oh("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Oh("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Oh("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class fO extends dO{initXhr(){this.xhr_.responseType="text"}}function _A(){return new fO}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wc{constructor(e,n){this._service=e,n instanceof us?this._location=n:this._location=us.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new wc(e,n)}get root(){const e=new us(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return gA(this._location.path)}get storage(){return this._service}get parent(){const e=X9(this._location.path);if(e===null)return null;const n=new us(this._location.bucket,e);return new wc(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw I9(e)}}function pO(t,e,n){t._throwIfRoot("uploadBytes");const r=hO(t.storage,t._location,yA(),new el(e,!0),n);return t.storage.makeRequestWithTokens(r,_A).then(i=>({metadata:i,ref:t}))}function mO(t){t._throwIfRoot("getDownloadURL");const e=lO(t.storage,t._location,yA());return t.storage.makeRequestWithTokens(e,_A).then(n=>{if(n===null)throw T9();return n})}function gO(t,e){const n=J9(t._location.path,e),r=new us(t._location.bucket,n);return new wc(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yO(t){return/^[A-Za-z]+:\/\//.test(t)}function vO(t,e){return new wc(t,e)}function NA(t,e){if(t instanceof e5){const n=t;if(n._bucket==null)throw A9();const r=new wc(n,n._bucket);return e!=null?NA(r,e):r}else return e!==void 0?gO(t,e):t}function wO(t,e){if(e&&yO(e)){if(t instanceof e5)return vO(t,e);throw D2("To use ref(service, url), the first argument must be a Storage instance.")}else return NA(t,e)}function Db(t,e){const n=e==null?void 0:e[cA];return n==null?null:us.makeFromBucketSpec(n,t)}function xO(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:K6(i,t.app.options.projectId))}class e5{constructor(e,n,r,i,s){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=lA,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=p9,this._maxUploadRetryTime=m9,this._requests=new Set,i!=null?this._bucket=us.makeFromBucketSpec(i,this._host):this._bucket=Db(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=us.makeFromBucketSpec(this._url,e):this._bucket=Db(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){jb("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){jb("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new wc(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new C9(uA());{const o=B9(e,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const Ob="@firebase/storage",Mb="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SA="storage";function bO(t,e,n){return t=bn(t),pO(t,e,n)}function _O(t){return t=bn(t),mO(t)}function NO(t,e){return t=bn(t),wO(t,e)}function AA(t=og(),e){t=bn(t);const r=Ic(t,SA).getImmediate({identifier:e}),i=$6("storage");return i&&SO(r,...i),r}function SO(t,e,n,r={}){xO(t,e,n,r)}function AO(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new e5(n,r,i,e,Cc)}function EO(){Zs(new Ds(SA,AO,"PUBLIC").setMultipleInstances(!0)),Wi(Ob,Mb,""),Wi(Ob,Mb,"esm2017")}EO();const EA="@firebase/installations",t5="0.6.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TA=1e4,kA=`w:${t5}`,IA="FIS_v2",TO="https://firebaseinstallations.googleapis.com/v1",kO=60*60*1e3,IO="installations",CO="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PO={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},xc=new kc(IO,CO,PO);function CA(t){return t instanceof ro&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PA({projectId:t}){return`${TO}/projects/${t}/installations`}function LA(t){return{token:t.token,requestStatus:2,expiresIn:RO(t.expiresIn),creationTime:Date.now()}}async function RA(t,e){const r=(await e.json()).error;return xc.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function jA({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function LO(t,{refreshToken:e}){const n=jA(t);return n.append("Authorization",jO(e)),n}async function DA(t){const e=await t();return e.status>=500&&e.status<600?t():e}function RO(t){return Number(t.replace("s","000"))}function jO(t){return`${IA} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DO({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=PA(t),i=jA(t),s=e.getImmediate({optional:!0});if(s){const c=await s.getHeartbeatsHeader();c&&i.append("x-firebase-client",c)}const o={fid:n,authVersion:IA,appId:t.appId,sdkVersion:kA},a={method:"POST",headers:i,body:JSON.stringify(o)},l=await DA(()=>fetch(r,a));if(l.ok){const c=await l.json();return{fid:c.fid||n,registrationStatus:2,refreshToken:c.refreshToken,authToken:LA(c.authToken)}}else throw await RA("Create Installation",l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OA(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OO(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MO=/^[cdef][\w-]{21}$/,O2="";function FO(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=UO(t);return MO.test(n)?n:O2}catch{return O2}}function UO(t){return OO(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tg(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MA=new Map;function FA(t,e){const n=Tg(t);UA(n,e),VO(n,e)}function UA(t,e){const n=MA.get(t);if(n)for(const r of n)r(e)}function VO(t,e){const n=BO();n&&n.postMessage({key:t,fid:e}),zO()}let nc=null;function BO(){return!nc&&"BroadcastChannel"in self&&(nc=new BroadcastChannel("[Firebase] FID Change"),nc.onmessage=t=>{UA(t.data.key,t.data.fid)}),nc}function zO(){MA.size===0&&nc&&(nc.close(),nc=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qO="firebase-installations-database",HO=1,bc="firebase-installations-store";let F0=null;function n5(){return F0||(F0=sg(qO,HO,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(bc)}}})),F0}async function Cm(t,e){const n=Tg(t),i=(await n5()).transaction(bc,"readwrite"),s=i.objectStore(bc),o=await s.get(n);return await s.put(e,n),await i.done,(!o||o.fid!==e.fid)&&FA(t,e.fid),e}async function VA(t){const e=Tg(t),r=(await n5()).transaction(bc,"readwrite");await r.objectStore(bc).delete(e),await r.done}async function kg(t,e){const n=Tg(t),i=(await n5()).transaction(bc,"readwrite"),s=i.objectStore(bc),o=await s.get(n),a=e(o);return a===void 0?await s.delete(n):await s.put(a,n),await i.done,a&&(!o||o.fid!==a.fid)&&FA(t,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function r5(t){let e;const n=await kg(t.appConfig,r=>{const i=$O(r),s=WO(t,i);return e=s.registrationPromise,s.installationEntry});return n.fid===O2?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function $O(t){const e=t||{fid:FO(),registrationStatus:0};return BA(e)}function WO(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(xc.create("app-offline"));return{installationEntry:e,registrationPromise:i}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=GO(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:KO(t)}:{installationEntry:e}}async function GO(t,e){try{const n=await DO(t,e);return Cm(t.appConfig,n)}catch(n){throw CA(n)&&n.customData.serverCode===409?await VA(t.appConfig):await Cm(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function KO(t){let e=await Fb(t.appConfig);for(;e.registrationStatus===1;)await OA(100),e=await Fb(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await r5(t);return r||n}return e}function Fb(t){return kg(t,e=>{if(!e)throw xc.create("installation-not-found");return BA(e)})}function BA(t){return YO(t)?{fid:t.fid,registrationStatus:0}:t}function YO(t){return t.registrationStatus===1&&t.registrationTime+TA<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QO({appConfig:t,heartbeatServiceProvider:e},n){const r=XO(t,n),i=LO(t,n),s=e.getImmediate({optional:!0});if(s){const c=await s.getHeartbeatsHeader();c&&i.append("x-firebase-client",c)}const o={installation:{sdkVersion:kA,appId:t.appId}},a={method:"POST",headers:i,body:JSON.stringify(o)},l=await DA(()=>fetch(r,a));if(l.ok){const c=await l.json();return LA(c)}else throw await RA("Generate Auth Token",l)}function XO(t,{fid:e}){return`${PA(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function i5(t,e=!1){let n;const r=await kg(t.appConfig,s=>{if(!zA(s))throw xc.create("not-registered");const o=s.authToken;if(!e&&eM(o))return s;if(o.requestStatus===1)return n=JO(t,e),s;{if(!navigator.onLine)throw xc.create("app-offline");const a=nM(s);return n=ZO(t,a),a}});return n?await n:r.authToken}async function JO(t,e){let n=await Ub(t.appConfig);for(;n.authToken.requestStatus===1;)await OA(100),n=await Ub(t.appConfig);const r=n.authToken;return r.requestStatus===0?i5(t,e):r}function Ub(t){return kg(t,e=>{if(!zA(e))throw xc.create("not-registered");const n=e.authToken;return rM(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function ZO(t,e){try{const n=await QO(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return await Cm(t.appConfig,r),n}catch(n){if(CA(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await VA(t.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await Cm(t.appConfig,r)}throw n}}function zA(t){return t!==void 0&&t.registrationStatus===2}function eM(t){return t.requestStatus===2&&!tM(t)}function tM(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+kO}function nM(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function rM(t){return t.requestStatus===1&&t.requestTime+TA<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iM(t){const e=t,{installationEntry:n,registrationPromise:r}=await r5(e);return r?r.catch(console.error):i5(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sM(t,e=!1){const n=t;return await oM(n),(await i5(n,e)).token}async function oM(t){const{registrationPromise:e}=await r5(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aM(t){if(!t||!t.options)throw U0("App Configuration");if(!t.name)throw U0("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw U0(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function U0(t){return xc.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qA="installations",lM="installations-internal",cM=t=>{const e=t.getProvider("app").getImmediate(),n=aM(e),r=Ic(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},uM=t=>{const e=t.getProvider("app").getImmediate(),n=Ic(e,qA).getImmediate();return{getId:()=>iM(n),getToken:i=>sM(n,i)}};function hM(){Zs(new Ds(qA,cM,"PUBLIC")),Zs(new Ds(lM,uM,"PRIVATE"))}hM();Wi(EA,t5);Wi(EA,t5,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dM="/firebase-messaging-sw.js",fM="/firebase-cloud-messaging-push-scope",HA="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",pM="https://fcmregistrations.googleapis.com/v1",$A="google.c.a.c_id",mM="google.c.a.c_l",gM="google.c.a.ts",yM="google.c.a.e";var Vb;(function(t){t[t.DATA_MESSAGE=1]="DATA_MESSAGE",t[t.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"})(Vb||(Vb={}));/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License. You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under the License
 * is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
 * or implied. See the License for the specific language governing permissions and limitations under
 * the License.
 */var qd;(function(t){t.PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked"})(qd||(qd={}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yo(t){const e=new Uint8Array(t);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function vM(t){const e="=".repeat((4-t.length%4)%4),n=(t+e).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(n),i=new Uint8Array(r.length);for(let s=0;s<r.length;++s)i[s]=r.charCodeAt(s);return i}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V0="fcm_token_details_db",wM=5,Bb="fcm_token_object_Store";async function xM(t){if("databases"in indexedDB&&!(await indexedDB.databases()).map(s=>s.name).includes(V0))return null;let e=null;return(await sg(V0,wM,{upgrade:async(r,i,s,o)=>{var a;if(i<2||!r.objectStoreNames.contains(Bb))return;const l=o.objectStore(Bb),c=await l.index("fcmSenderId").get(t);if(await l.clear(),!!c){if(i===2){const h=c;if(!h.auth||!h.p256dh||!h.endpoint)return;e={token:h.fcmToken,createTime:(a=h.createTime)!==null&&a!==void 0?a:Date.now(),subscriptionOptions:{auth:h.auth,p256dh:h.p256dh,endpoint:h.endpoint,swScope:h.swScope,vapidKey:typeof h.vapidKey=="string"?h.vapidKey:Yo(h.vapidKey)}}}else if(i===3){const h=c;e={token:h.fcmToken,createTime:h.createTime,subscriptionOptions:{auth:Yo(h.auth),p256dh:Yo(h.p256dh),endpoint:h.endpoint,swScope:h.swScope,vapidKey:Yo(h.vapidKey)}}}else if(i===4){const h=c;e={token:h.fcmToken,createTime:h.createTime,subscriptionOptions:{auth:Yo(h.auth),p256dh:Yo(h.p256dh),endpoint:h.endpoint,swScope:h.swScope,vapidKey:Yo(h.vapidKey)}}}}}})).close(),await E0(V0),await E0("fcm_vapid_details_db"),await E0("undefined"),bM(e)?e:null}function bM(t){if(!t||!t.subscriptionOptions)return!1;const{subscriptionOptions:e}=t;return typeof t.createTime=="number"&&t.createTime>0&&typeof t.token=="string"&&t.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _M="firebase-messaging-database",NM=1,Hd="firebase-messaging-store";let B0=null;function WA(){return B0||(B0=sg(_M,NM,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Hd)}}})),B0}async function SM(t){const e=GA(t),r=await(await WA()).transaction(Hd).objectStore(Hd).get(e);if(r)return r;{const i=await xM(t.appConfig.senderId);if(i)return await s5(t,i),i}}async function s5(t,e){const n=GA(t),i=(await WA()).transaction(Hd,"readwrite");return await i.objectStore(Hd).put(e,n),await i.done,e}function GA({appConfig:t}){return t.appId}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AM={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},yi=new kc("messaging","Messaging",AM);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EM(t,e){const n=await a5(t),r=KA(e),i={method:"POST",headers:n,body:JSON.stringify(r)};let s;try{s=await(await fetch(o5(t.appConfig),i)).json()}catch(o){throw yi.create("token-subscribe-failed",{errorInfo:o==null?void 0:o.toString()})}if(s.error){const o=s.error.message;throw yi.create("token-subscribe-failed",{errorInfo:o})}if(!s.token)throw yi.create("token-subscribe-no-token");return s.token}async function TM(t,e){const n=await a5(t),r=KA(e.subscriptionOptions),i={method:"PATCH",headers:n,body:JSON.stringify(r)};let s;try{s=await(await fetch(`${o5(t.appConfig)}/${e.token}`,i)).json()}catch(o){throw yi.create("token-update-failed",{errorInfo:o==null?void 0:o.toString()})}if(s.error){const o=s.error.message;throw yi.create("token-update-failed",{errorInfo:o})}if(!s.token)throw yi.create("token-update-no-token");return s.token}async function kM(t,e){const r={method:"DELETE",headers:await a5(t)};try{const s=await(await fetch(`${o5(t.appConfig)}/${e}`,r)).json();if(s.error){const o=s.error.message;throw yi.create("token-unsubscribe-failed",{errorInfo:o})}}catch(i){throw yi.create("token-unsubscribe-failed",{errorInfo:i==null?void 0:i.toString()})}}function o5({projectId:t}){return`${pM}/projects/${t}/registrations`}async function a5({appConfig:t,installations:e}){const n=await e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":`FIS ${n}`})}function KA({p256dh:t,auth:e,endpoint:n,vapidKey:r}){const i={web:{endpoint:n,auth:e,p256dh:t}};return r!==HA&&(i.web.applicationPubKey=r),i}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IM=7*24*60*60*1e3;async function CM(t){const e=await LM(t.swRegistration,t.vapidKey),n={vapidKey:t.vapidKey,swScope:t.swRegistration.scope,endpoint:e.endpoint,auth:Yo(e.getKey("auth")),p256dh:Yo(e.getKey("p256dh"))},r=await SM(t.firebaseDependencies);if(r){if(RM(r.subscriptionOptions,n))return Date.now()>=r.createTime+IM?PM(t,{token:r.token,createTime:Date.now(),subscriptionOptions:n}):r.token;try{await kM(t.firebaseDependencies,r.token)}catch(i){console.warn(i)}return zb(t.firebaseDependencies,n)}else return zb(t.firebaseDependencies,n)}async function PM(t,e){try{const n=await TM(t.firebaseDependencies,e),r=Object.assign(Object.assign({},e),{token:n,createTime:Date.now()});return await s5(t.firebaseDependencies,r),n}catch(n){throw n}}async function zb(t,e){const r={token:await EM(t,e),createTime:Date.now(),subscriptionOptions:e};return await s5(t,r),r.token}async function LM(t,e){const n=await t.pushManager.getSubscription();return n||t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:vM(e)})}function RM(t,e){const n=e.vapidKey===t.vapidKey,r=e.endpoint===t.endpoint,i=e.auth===t.auth,s=e.p256dh===t.p256dh;return n&&r&&i&&s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qb(t){const e={from:t.from,collapseKey:t.collapse_key,messageId:t.fcmMessageId};return jM(e,t),DM(e,t),OM(e,t),e}function jM(t,e){if(!e.notification)return;t.notification={};const n=e.notification.title;n&&(t.notification.title=n);const r=e.notification.body;r&&(t.notification.body=r);const i=e.notification.image;i&&(t.notification.image=i);const s=e.notification.icon;s&&(t.notification.icon=s)}function DM(t,e){e.data&&(t.data=e.data)}function OM(t,e){var n,r,i,s,o;if(!e.fcmOptions&&!(!((n=e.notification)===null||n===void 0)&&n.click_action))return;t.fcmOptions={};const a=(i=(r=e.fcmOptions)===null||r===void 0?void 0:r.link)!==null&&i!==void 0?i:(s=e.notification)===null||s===void 0?void 0:s.click_action;a&&(t.fcmOptions.link=a);const l=(o=e.fcmOptions)===null||o===void 0?void 0:o.analytics_label;l&&(t.fcmOptions.analyticsLabel=l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MM(t){return typeof t=="object"&&!!t&&$A in t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FM(t){if(!t||!t.options)throw z0("App Configuration Object");if(!t.name)throw z0("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:n}=t;for(const r of e)if(!n[r])throw z0(r);return{appName:t.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}function z0(t){return yi.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UM{constructor(e,n,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const i=FM(e);this.firebaseDependencies={app:e,appConfig:i,installations:n,analyticsProvider:r}}_delete(){return Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VM(t){try{t.swRegistration=await navigator.serviceWorker.register(dM,{scope:fM}),t.swRegistration.update().catch(()=>{})}catch(e){throw yi.create("failed-service-worker-registration",{browserErrorMessage:e==null?void 0:e.message})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BM(t,e){if(!e&&!t.swRegistration&&await VM(t),!(!e&&t.swRegistration)){if(!(e instanceof ServiceWorkerRegistration))throw yi.create("invalid-sw-registration");t.swRegistration=e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zM(t,e){e?t.vapidKey=e:t.vapidKey||(t.vapidKey=HA)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YA(t,e){if(!navigator)throw yi.create("only-available-in-window");if(Notification.permission==="default"&&await Notification.requestPermission(),Notification.permission!=="granted")throw yi.create("permission-blocked");return await zM(t,e==null?void 0:e.vapidKey),await BM(t,e==null?void 0:e.serviceWorkerRegistration),CM(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qM(t,e,n){const r=HM(e);(await t.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:n[$A],message_name:n[mM],message_time:n[gM],message_device_time:Math.floor(Date.now()/1e3)})}function HM(t){switch(t){case qd.NOTIFICATION_CLICKED:return"notification_open";case qd.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $M(t,e){const n=e.data;if(!n.isFirebaseMessaging)return;t.onMessageHandler&&n.messageType===qd.PUSH_RECEIVED&&(typeof t.onMessageHandler=="function"?t.onMessageHandler(qb(n)):t.onMessageHandler.next(qb(n)));const r=n.data;MM(r)&&r[yM]==="1"&&await qM(t,n.messageType,r)}const Hb="@firebase/messaging",$b="0.12.12";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WM=t=>{const e=new UM(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),t.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",n=>$M(e,n)),e},GM=t=>{const e=t.getProvider("messaging").getImmediate();return{getToken:r=>YA(e,r)}};function KM(){Zs(new Ds("messaging",WM,"PUBLIC")),Zs(new Ds("messaging-internal",GM,"PRIVATE")),Wi(Hb,$b),Wi(Hb,$b,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YM(){try{await Q6()}catch{return!1}return typeof window<"u"&&Y6()&&zC()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QM(t,e){if(!navigator)throw yi.create("only-available-in-window");return t.onMessageHandler=e,()=>{t.onMessageHandler=null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XM(t=og()){return YM().then(e=>{if(!e)throw yi.create("unsupported-browser")},e=>{throw yi.create("indexed-db-unsupported")}),Ic(bn(t),"messaging").getImmediate()}async function QA(t,e){return t=bn(t),YA(t,e)}function JM(t,e){return t=bn(t),QM(t,e)}KM();const ZM={apiKey:"AIzaSyCKPrE1B2ikGlnr6PmTq4JVLlBDlOe50Co",authDomain:"tmv1-7fc4f.firebaseapp.com",projectId:"tmv1-7fc4f",storageBucket:"tmv1-7fc4f.firebasestorage.app",messagingSenderId:"377085834114",appId:"1:377085834114:web:aeb2ca19e51abe8fc5959b",measurementId:"G-8J8CDN3QFF"},Ig=Z6(ZM),Ii=fR(Ig),He=t9(Ig);AA(Ig);const M2=XM(Ig),eF=15;function tF(){const t=xi();se.useEffect(()=>{const e=eF*60*1e3;let n;const r=()=>{n&&clearTimeout(n),n=setTimeout(async()=>{try{await TN(Ii)}catch(s){console.error("Auto logout failed",s)}t("/")},e)},i=["click","mousemove","keydown","touchstart"];return i.forEach(s=>window.addEventListener(s,r,!0)),r(),()=>{n&&clearTimeout(n),i.forEach(s=>window.removeEventListener(s,r,!0))}},[t])}const ss=({children:t})=>{const[e,n]=se.useState("checking");return se.useEffect(()=>{const r=Lc(Ii,async i=>{if(!i){n("denied");return}try{const s=await Xs(Zt(He,"users",i.uid));(s.exists()?s.data():{}).userType==="admin"?n("allowed"):n("denied")}catch{n("denied")}});return()=>r()},[]),e==="checking"?null:e==="denied"?u.jsx(pC,{to:"/home",replace:!0}):t};var XA={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Wb=ol.createContext&&ol.createContext(XA),nF=["attr","size","title"];function rF(t,e){if(t==null)return{};var n=iF(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function iF(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Pm(){return Pm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Pm.apply(this,arguments)}function Gb(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Lm(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Gb(Object(n),!0).forEach(function(r){sF(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Gb(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function sF(t,e,n){return e=oF(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function oF(t){var e=aF(t,"string");return typeof e=="symbol"?e:e+""}function aF(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function JA(t){return t&&t.map((e,n)=>ol.createElement(e.tag,Lm({key:n},e.attr),JA(e.child)))}function un(t){return e=>ol.createElement(lF,Pm({attr:Lm({},t.attr)},e),JA(t.child))}function lF(t){var e=n=>{var{attr:r,size:i,title:s}=t,o=rF(t,nF),a=i||n.size||"1em",l;return n.className&&(l=n.className),t.className&&(l=(l?l+" ":"")+t.className),ol.createElement("svg",Pm({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,o,{className:l,style:Lm(Lm({color:t.color||n.color},n.style),t.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),s&&ol.createElement("title",null,s),t.children)};return Wb!==void 0?ol.createElement(Wb.Consumer,null,n=>e(n)):e(XA)}function cF(t){return un({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M12.83 352h262.34A12.82 12.82 0 0 0 288 339.17v-38.34A12.82 12.82 0 0 0 275.17 288H12.83A12.82 12.82 0 0 0 0 300.83v38.34A12.82 12.82 0 0 0 12.83 352zm0-256h262.34A12.82 12.82 0 0 0 288 83.17V44.83A12.82 12.82 0 0 0 275.17 32H12.83A12.82 12.82 0 0 0 0 44.83v38.34A12.82 12.82 0 0 0 12.83 96zM432 160H16a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zm0 256H16a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16z"},child:[]}]})(t)}function ZA(t){return un({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M257.5 445.1l-22.2 22.2c-9.4 9.4-24.6 9.4-33.9 0L7 273c-9.4-9.4-9.4-24.6 0-33.9L201.4 44.7c9.4-9.4 24.6-9.4 33.9 0l22.2 22.2c9.5 9.5 9.3 25-.4 34.3L136.6 216H424c13.3 0 24 10.7 24 24v32c0 13.3-10.7 24-24 24H136.6l120.5 114.8c9.8 9.3 10 24.8.4 34.3z"},child:[]}]})(t)}function uF(t){return un({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"},child:[]}]})(t)}function l5(t){return un({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 512c35.32 0 63.97-28.65 63.97-64H160.03c0 35.35 28.65 64 63.97 64zm215.39-149.71c-19.32-20.76-55.47-51.99-55.47-154.29 0-77.7-54.48-139.9-127.94-155.16V32c0-17.67-14.32-32-31.98-32s-31.98 14.33-31.98 32v20.84C118.56 68.1 64.08 130.3 64.08 208c0 102.3-36.15 133.53-55.47 154.29-6 6.45-8.66 14.16-8.61 21.71.11 16.4 12.98 32 32.1 32h383.8c19.12 0 32-15.6 32.1-32 .05-7.55-2.61-15.27-8.61-21.71z"},child:[]}]})(t)}function yf(t){return un({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M509.5 184.6L458.9 32.8C452.4 13.2 434.1 0 413.4 0H272v192h238.7c-.4-2.5-.4-5-1.2-7.4zM240 0H98.6c-20.7 0-39 13.2-45.5 32.8L2.5 184.6c-.8 2.4-.8 4.9-1.2 7.4H240V0zM0 224v240c0 26.5 21.5 48 48 48h416c26.5 0 48-21.5 48-48V224H0z"},child:[]}]})(t)}function fr(t){return un({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M0 464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V192H0v272zm320-196c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zM192 268c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zM64 268c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40zM400 64h-48V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48H160V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48H48C21.5 64 0 85.5 0 112v48h448v-48c0-26.5-21.5-48-48-48z"},child:[]}]})(t)}function F2(t){return un({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z"},child:[]}]})(t)}function la(t){return un({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"},child:[]}]})(t)}function hF(t){return un({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8z"},child:[]}]})(t)}function dF(t){return un({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M402.6 83.2l90.2 90.2c3.8 3.8 3.8 10 0 13.8L274.4 405.6l-92.8 10.3c-12.4 1.4-22.9-9.1-21.5-21.5l10.3-92.8L388.8 83.2c3.8-3.8 10-3.8 13.8 0zm162-22.9l-48.8-48.8c-15.2-15.2-39.9-15.2-55.2 0l-35.4 35.4c-3.8 3.8-3.8 10 0 13.8l90.2 90.2c3.8 3.8 10 3.8 13.8 0l35.4-35.4c15.2-15.3 15.2-40 0-55.2zM384 346.2V448H64V128h229.8c3.2 0 6.2-1.3 8.5-3.5l40-40c7.6-7.6 2.2-20.5-8.5-20.5H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V306.2c0-10.7-12.9-16-20.5-8.5l-40 40c-2.2 2.3-3.5 5.3-3.5 8.5z"},child:[]}]})(t)}function fF(t){return un({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M502.3 190.8c3.9-3.1 9.7-.2 9.7 4.7V400c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V195.6c0-5 5.7-7.8 9.7-4.7 22.4 17.4 52.1 39.5 154.1 113.6 21.1 15.4 56.7 47.8 92.2 47.6 35.7.3 72-32.8 92.3-47.6 102-74.1 131.6-96.3 154-113.7zM256 320c23.2.4 56.6-29.2 73.4-41.4 132.7-96.3 142.8-104.7 173.4-128.7 5.8-4.5 9.2-11.5 9.2-18.9v-19c0-26.5-21.5-48-48-48H48C21.5 64 0 85.5 0 112v19c0 7.4 3.4 14.3 9.2 18.9 30.6 23.9 40.7 32.4 173.4 128.7 16.8 12.2 50.2 41.8 73.4 41.4z"},child:[]}]})(t)}function pF(t){return un({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zm-248 50c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"},child:[]}]})(t)}function mF(t){return un({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"},child:[]}]})(t)}function Kb(t){return un({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M320 400c-75.85 0-137.25-58.71-142.9-133.11L72.2 185.82c-13.79 17.3-26.48 35.59-36.72 55.59a32.35 32.35 0 0 0 0 29.19C89.71 376.41 197.07 448 320 448c26.91 0 52.87-4 77.89-10.46L346 397.39a144.13 144.13 0 0 1-26 2.61zm313.82 58.1l-110.55-85.44a331.25 331.25 0 0 0 81.25-102.07 32.35 32.35 0 0 0 0-29.19C550.29 135.59 442.93 64 320 64a308.15 308.15 0 0 0-147.32 37.7L45.46 3.37A16 16 0 0 0 23 6.18L3.37 31.45A16 16 0 0 0 6.18 53.9l588.36 454.73a16 16 0 0 0 22.46-2.81l19.64-25.27a16 16 0 0 0-2.82-22.45zm-183.72-142l-39.3-30.38A94.75 94.75 0 0 0 416 256a94.76 94.76 0 0 0-121.31-92.21A47.65 47.65 0 0 1 304 192a46.64 46.64 0 0 1-1.54 10l-73.61-56.89A142.31 142.31 0 0 1 320 112a143.92 143.92 0 0 1 144 144c0 21.63-5.29 41.79-13.9 60.11z"},child:[]}]})(t)}function Yb(t){return un({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M572.52 241.4C518.29 135.59 410.93 64 288 64S57.68 135.64 3.48 241.41a32.35 32.35 0 0 0 0 29.19C57.71 376.41 165.07 448 288 448s230.32-71.64 284.52-177.41a32.35 32.35 0 0 0 0-29.19zM288 400a144 144 0 1 1 144-144 143.93 143.93 0 0 1-144 144zm0-240a95.31 95.31 0 0 0-25.31 3.79 47.85 47.85 0 0 1-66.9 66.9A95.78 95.78 0 1 0 288 160z"},child:[]}]})(t)}function gF(t){return un({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M224 136V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zm64 236c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12v8zm0-64c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12v8zm0-72v8c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12zm96-114.1v6.1H256V0h6.1c6.4 0 12.5 2.5 17 7l97.9 98c4.5 4.5 7 10.6 7 16.9z"},child:[]}]})(t)}function yF(t){return un({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 255.531c.253 136.64-111.18 248.372-247.82 248.468-59.015.042-113.223-20.53-155.822-54.911-11.077-8.94-11.905-25.541-1.839-35.607l11.267-11.267c8.609-8.609 22.353-9.551 31.891-1.984C173.062 425.135 212.781 440 256 440c101.705 0 184-82.311 184-184 0-101.705-82.311-184-184-184-48.814 0-93.149 18.969-126.068 49.932l50.754 50.754c10.08 10.08 2.941 27.314-11.313 27.314H24c-8.837 0-16-7.163-16-16V38.627c0-14.254 17.234-21.393 27.314-11.314l49.372 49.372C129.209 34.136 189.552 8 256 8c136.81 0 247.747 110.78 248 247.531zm-180.912 78.784l9.823-12.63c8.138-10.463 6.253-25.542-4.21-33.679L288 256.349V152c0-13.255-10.745-24-24-24h-16c-13.255 0-24 10.745-24 24v135.651l65.409 50.874c10.463 8.137 25.541 6.253 33.679-4.21z"},child:[]}]})(t)}function vF(t){return un({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M280.37 148.26L96 300.11V464a16 16 0 0 0 16 16l112.06-.29a16 16 0 0 0 15.92-16V368a16 16 0 0 1 16-16h64a16 16 0 0 1 16 16v95.64a16 16 0 0 0 16 16.05L464 480a16 16 0 0 0 16-16V300L295.67 148.26a12.19 12.19 0 0 0-15.3 0zM571.6 251.47L488 182.56V44.05a12 12 0 0 0-12-12h-56a12 12 0 0 0-12 12v72.61L318.47 43a48 48 0 0 0-61 0L4.34 251.47a12 12 0 0 0-1.6 16.9l25.5 31A12 12 0 0 0 45.15 301l235.22-193.74a12.19 12.19 0 0 1 15.3 0L530.9 301a12 12 0 0 0 16.9-1.6l25.5-31a12 12 0 0 0-1.7-16.93z"},child:[]}]})(t)}function U2(t){return un({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M360 0H24C10.745 0 0 10.745 0 24v16c0 13.255 10.745 24 24 24 0 90.965 51.016 167.734 120.842 192C75.016 280.266 24 357.035 24 448c-13.255 0-24 10.745-24 24v16c0 13.255 10.745 24 24 24h336c13.255 0 24-10.745 24-24v-16c0-13.255-10.745-24-24-24 0-90.965-51.016-167.734-120.842-192C308.984 231.734 360 154.965 360 64c13.255 0 24-10.745 24-24V24c0-13.255-10.745-24-24-24zm-75.078 384H99.08c17.059-46.797 52.096-80 92.92-80 40.821 0 75.862 33.196 92.922 80zm.019-256H99.078C91.988 108.548 88 86.748 88 64h208c0 22.805-3.987 44.587-11.059 64z"},child:[]}]})(t)}function wF(t){return un({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M80 368H16a16 16 0 0 0-16 16v64a16 16 0 0 0 16 16h64a16 16 0 0 0 16-16v-64a16 16 0 0 0-16-16zm0-320H16A16 16 0 0 0 0 64v64a16 16 0 0 0 16 16h64a16 16 0 0 0 16-16V64a16 16 0 0 0-16-16zm0 160H16a16 16 0 0 0-16 16v64a16 16 0 0 0 16 16h64a16 16 0 0 0 16-16v-64a16 16 0 0 0-16-16zm416 176H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zm0-320H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16V80a16 16 0 0 0-16-16zm0 160H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16z"},child:[]}]})(t)}function $d(t){return un({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M283.211 512c78.962 0 151.079-35.925 198.857-94.792 7.068-8.708-.639-21.43-11.562-19.35-124.203 23.654-238.262-71.576-238.262-196.954 0-72.222 38.662-138.635 101.498-174.394 9.686-5.512 7.25-20.197-3.756-22.23A258.156 258.156 0 0 0 283.211 0c-141.309 0-256 114.511-256 256 0 141.309 114.511 256 256 256z"},child:[]}]})(t)}function xF(t){return un({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"},child:[]}]})(t)}function _c(t){return un({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"},child:[]}]})(t)}function Ms(t){return un({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M304 48c0 26.51-21.49 48-48 48s-48-21.49-48-48 21.49-48 48-48 48 21.49 48 48zm-48 368c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zm208-208c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zM96 256c0-26.51-21.49-48-48-48S0 229.49 0 256s21.49 48 48 48 48-21.49 48-48zm12.922 99.078c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.491-48-48-48zm294.156 0c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.49-48-48-48zM108.922 60.922c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.491-48-48-48z"},child:[]}]})(t)}function Wd(t){return un({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 160c-52.9 0-96 43.1-96 96s43.1 96 96 96 96-43.1 96-96-43.1-96-96-96zm246.4 80.5l-94.7-47.3 33.5-100.4c4.5-13.6-8.4-26.5-21.9-21.9l-100.4 33.5-47.4-94.8c-6.4-12.8-24.6-12.8-31 0l-47.3 94.7L92.7 70.8c-13.6-4.5-26.5 8.4-21.9 21.9l33.5 100.4-94.7 47.4c-12.8 6.4-12.8 24.6 0 31l94.7 47.3-33.5 100.5c-4.5 13.6 8.4 26.5 21.9 21.9l100.4-33.5 47.3 94.7c6.4 12.8 24.6 12.8 31 0l47.3-94.7 100.4 33.5c13.6 4.5 26.5-8.4 21.9-21.9l-33.5-100.4 94.7-47.3c13-6.5 13-24.7.2-31.1zm-155.9 106c-49.9 49.9-131.1 49.9-181 0-49.9-49.9-49.9-131.1 0-181 49.9-49.9 131.1-49.9 181 0 49.9 49.9 49.9 131.1 0 181z"},child:[]}]})(t)}function V2(t){return un({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M139.61 35.5a12 12 0 0 0-17 0L58.93 98.81l-22.7-22.12a12 12 0 0 0-17 0L3.53 92.41a12 12 0 0 0 0 17l47.59 47.4a12.78 12.78 0 0 0 17.61 0l15.59-15.62L156.52 69a12.09 12.09 0 0 0 .09-17zm0 159.19a12 12 0 0 0-17 0l-63.68 63.72-22.7-22.1a12 12 0 0 0-17 0L3.53 252a12 12 0 0 0 0 17L51 316.5a12.77 12.77 0 0 0 17.6 0l15.7-15.69 72.2-72.22a12 12 0 0 0 .09-16.9zM64 368c-26.49 0-48.59 21.5-48.59 48S37.53 464 64 464a48 48 0 0 0 0-96zm432 16H208a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h288a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zm0-320H208a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h288a16 16 0 0 0 16-16V80a16 16 0 0 0-16-16zm0 160H208a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h288a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16z"},child:[]}]})(t)}function Nl(t){return un({attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"},child:[]}]})(t)}function eE(t){return un({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z"},child:[]}]})(t)}function Qb(t){return un({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M212.333 224.333H12c-6.627 0-12-5.373-12-12V12C0 5.373 5.373 0 12 0h48c6.627 0 12 5.373 12 12v78.112C117.773 39.279 184.26 7.47 258.175 8.007c136.906.994 246.448 111.623 246.157 248.532C504.041 393.258 393.12 504 256.333 504c-64.089 0-122.496-24.313-166.51-64.215-5.099-4.622-5.334-12.554-.467-17.42l33.967-33.967c4.474-4.474 11.662-4.717 16.401-.525C170.76 415.336 211.58 432 256.333 432c97.268 0 176-78.716 176-176 0-97.267-78.716-176-176-176-58.496 0-110.28 28.476-142.274 72.333h98.274c6.627 0 12 5.373 12 12v48c0 6.627-5.373 12-12 12z"},child:[]}]})(t)}function tE(t){return un({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M624 208h-64v-64c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v64h-64c-8.8 0-16 7.2-16 16v32c0 8.8 7.2 16 16 16h64v64c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16v-64h64c8.8 0 16-7.2 16-16v-32c0-8.8-7.2-16-16-16zm-400 48c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"},child:[]}]})(t)}function nE(t){return un({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"},child:[]}]})(t)}function c5(t){return un({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M96 224c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm448 0c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm32 32h-64c-17.6 0-33.5 7.1-45.1 18.6 40.3 22.1 68.9 62 75.1 109.4h66c17.7 0 32-14.3 32-32v-32c0-35.3-28.7-64-64-64zm-256 0c61.9 0 112-50.1 112-112S381.9 32 320 32 208 82.1 208 144s50.1 112 112 112zm76.8 32h-8.3c-20.8 10-43.9 16-68.5 16s-47.6-6-68.5-16h-8.3C179.6 288 128 339.6 128 403.2V432c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48v-28.8c0-63.6-51.6-115.2-115.2-115.2zm-223.7-13.4C161.5 263.1 145.6 256 128 256H64c-35.3 0-64 28.7-64 64v32c0 17.7 14.3 32 32 32h65.9c6.3-47.4 34.9-87.3 75.2-109.4z"},child:[]}]})(t)}const In=({userType:t,isDarkMode:e,toggleDarkMode:n})=>{const r=Ju(),[i,s]=se.useState(!1),o=c=>r.pathname===c,l=[{path:t==="admin"?"/admin-home":"/home",label:"Home",icon:u.jsx(vF,{})},{path:"/profile",label:"Profile",icon:u.jsx(nE,{})}];return t==="user"&&l.push({path:"/task-history",label:"Task History",icon:u.jsx(yF,{})},{path:"/user-reject-details",label:"My Rejections",icon:u.jsx(Nl,{})}),t==="admin"&&l.push({path:"/manage-users",label:"Manage Users",icon:u.jsx(tE,{})},{path:"/assign-work",label:"Assign Work",icon:u.jsx(V2,{})},{path:"/work-list",label:"Work List",icon:u.jsx(wF,{})},{path:"/inventory",label:"Inventory",icon:u.jsx(yf,{})},{path:"/notifications",label:"Notifications",icon:u.jsx(l5,{})}),u.jsx("header",{className:"bg-blue-600 text-white shadow-lg relative",children:u.jsxs("nav",{className:"container mx-auto px-4 py-4",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("h1",{className:"text-lg sm:text-xl md:text-2xl font-bold",children:"Videography Manager"}),u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx("ul",{className:"hidden lg:flex space-x-6",children:l.map(c=>u.jsx("li",{children:u.jsxs(px,{to:c.path,className:`flex items-center gap-2 hover:text-blue-200 transition ${o(c.path)?"font-bold border-b-2 border-white pb-1":""}`,children:[c.icon,u.jsx("span",{children:c.label})]})},c.path))}),u.jsx("button",{onClick:()=>s(!i),className:"lg:hidden text-2xl focus:outline-none ml-2","aria-label":"Toggle menu",children:i?u.jsx(Nl,{}):u.jsx(uF,{})})]})]}),u.jsx("button",{onClick:n,className:`p-2 rounded-full transition-all duration-300 shadow absolute right-14 top-3 z-50 lg:hidden ${e?"bg-gray-700 hover:bg-gray-600 text-yellow-300 shadow-lg":"bg-blue-200 hover:bg-blue-300 text-blue-600 shadow-lg"}`,"aria-label":"Toggle dark mode (mobile)",children:e?u.jsx(Wd,{size:18}):u.jsx($d,{size:18})}),u.jsx("button",{onClick:n,className:`p-3 rounded-full transition-all duration-300 shadow absolute right-8 top-1/2 -translate-y-1/2 hidden lg:block z-20 ${e?"bg-gray-700 hover:bg-gray-600 text-yellow-300 shadow-lg":"bg-blue-200 hover:bg-blue-300 text-blue-600 shadow-lg"}`,"aria-label":"Toggle dark mode (desktop)",children:e?u.jsx(Wd,{size:10}):u.jsx($d,{size:10})}),u.jsx("div",{className:`lg:hidden transition-all duration-300 ease-in-out overflow-hidden ${i?"max-h-96 opacity-100 scale-100 mt-4":"max-h-0 opacity-0 scale-95 mt-0"}`,children:u.jsx("ul",{className:"space-y-2 pb-2 bg-blue-700/50 backdrop-blur-sm rounded-lg",children:l.map(c=>u.jsx("li",{children:u.jsxs(px,{to:c.path,onClick:()=>s(!1),className:`flex items-center gap-3 p-3 rounded hover:bg-blue-800 transition ${o(c.path)?"bg-blue-800 font-bold":""}`,children:[u.jsx("span",{className:"text-xl",children:c.icon}),u.jsx("span",{children:c.label})]})},c.path))})})]})})},bF=()=>{const t=xi(),[e,n]=se.useState(null);se.useEffect(()=>{(async()=>{try{const o=await zn(Lt(He,"notifications"));console.log("Notifications count:",o.size),o.forEach(a=>console.log("Notif doc:",a.id,a.data()))}catch(o){console.error("Test read of notifications failed:",o)}})()},[]),se.useEffect(()=>{console.log("Admin notification listener mounted");const s=vc(Lt(He,"notifications"),zd("read","==",!1),Wv("createdAt","desc")),o=Im(s,a=>{console.log("Notification snapshot size:",a.size),a.docChanges().forEach(l=>{if(console.log("Notif change:",l.type,l.doc.id),l.type==="added"){const c=l.doc.data();n({id:l.doc.id,...c})}})},a=>{console.error("Notification listener error:",a)});return()=>{console.log("Admin notification listener unsubscribed"),o()}},[]);const r=async()=>{if(!e)return;try{await Xr(Zt(He,"notifications",e.id),{read:!0})}catch(o){console.error("Failed to mark notification read",o)}const s=e.id;n(null),t(`/admin/notifications/${s}`)},i=()=>{if(!e)return"";const s=e.userName||"A user";return e.type==="accept"?`${s} accepted a work.`:e.type==="reject"?`${s} rejected a work.`:e.type==="done"?`${s} marked their work as done.`:e.type==="undo-done"?`${s} undid a done task.`:"New activity on a work."};return u.jsxs("div",{className:"min-h-screen bg-gray-100",children:[u.jsx(In,{userType:"admin"}),e&&u.jsxs("button",{onClick:r,className:"fixed bottom-4 right-4 z-50 max-w-xs text-left bg-white shadow-xl rounded-xl border border-gray-200 px-4 py-3 text-sm hover:bg-gray-50",children:[u.jsx("p",{className:"font-semibold text-gray-800 mb-1",children:i()}),u.jsx("p",{className:"text-gray-500 text-xs",children:"Click to view details"})]}),u.jsx("main",{className:"container mx-auto px-4 py-6 sm:py-8",children:u.jsxs("div",{className:"max-w-4xl mx-auto",children:[u.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-gray-800 mb-6 sm:mb-8",children:"Admin Dashboard"}),u.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-6",children:[u.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 hover:shadow-xl transition",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[u.jsx(V2,{className:"text-3xl sm:text-4xl text-blue-600"}),u.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-blue-600",children:"Work List"})]}),u.jsx("p",{className:"text-gray-600 mb-4 text-sm sm:text-base",children:"View all works, see user acceptance and progress, and manage task status."}),u.jsx("button",{onClick:()=>t("/work-list"),className:"w-full bg-blue-600 text-white py-2 sm:py-3 px-4 rounded hover:bg-blue-700 transition font-medium",children:"Go to Work List"})]}),u.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 hover:shadow-xl transition",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[u.jsx(tE,{className:"text-3xl sm:text-4xl text-green-600"}),u.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-green-600",children:"Work Assignment"})]}),u.jsx("p",{className:"text-gray-600 mb-4 text-sm sm:text-base",children:"Create new work projects and assign team members to tasks."}),u.jsx("button",{onClick:()=>t("/assign-work"),className:"w-full bg-green-600 text-white py-2 sm:py-3 px-4 rounded hover:bg-green-700 transition font-medium",children:"Go to Work Assignment"})]}),u.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 hover:shadow-xl transition",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[u.jsx(fr,{className:"text-3xl sm:text-4xl text-purple-600"}),u.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-purple-600",children:"Schedule Posting"})]}),u.jsx("p",{className:"text-gray-600 mb-4 text-sm sm:text-base",children:"Set posting dates, mark videos as posted, and view the posting queue."}),u.jsx("button",{onClick:()=>t("/posting-dates"),className:"w-full bg-purple-600 text-white py-2 sm:py-3 px-4 rounded hover:bg-purple-700 transition font-medium",children:"Go to Schedule Posting"})]}),u.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 hover:shadow-xl transition",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[u.jsx(V2,{className:"text-3xl sm:text-4xl text-orange-500"}),u.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-orange-500",children:"Send Notifications"})]}),u.jsx("p",{className:"text-gray-600 mb-4 text-sm sm:text-base",children:"Send announcements or messages to all members or selected users."}),u.jsx("button",{onClick:()=>t("/admin/notifications"),className:"w-full bg-orange-500 text-white py-2 sm:py-3 px-4 rounded hover:bg-orange-600 transition font-medium",children:"Go to Send Notifications"})]})]})]})})]})},rE=se.createContext(),_F=({children:t})=>{const[e,n]=se.useState(()=>{const i=localStorage.getItem("darkMode");return i!==null?JSON.parse(i):window.matchMedia("(prefers-color-scheme: dark)").matches});se.useEffect(()=>{localStorage.setItem("darkMode",JSON.stringify(e)),e?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[e]);const r=()=>{n(i=>!i)};return u.jsx(rE.Provider,{value:{isDarkMode:e,toggleDarkMode:r},children:t})},Cg=()=>{const t=se.useContext(rE);if(!t)throw new Error("useDarkMode must be used within DarkModeProvider");return t},NF=()=>{const[t,e]=se.useState(null),[n,r]=se.useState([]),[i,s]=se.useState({}),[o,a]=se.useState({}),[l,c]=se.useState(!0),[h,g]=se.useState(!1),[y,p]=se.useState(""),[_,N]=se.useState(!1),[C,x]=se.useState(""),[k,R]=se.useState(null),[j,q]=se.useState(!0),[Q,D]=se.useState(null),S="user",{isDarkMode:T,toggleDarkMode:F}=Cg();se.useEffect(()=>{const te=Lc(Ii,de=>{e(de||null),c(!1)});return()=>te()},[]),se.useEffect(()=>{if(!t)return;(async()=>{g(!0);try{const Se=(await zn(Lt(He,"works"))).docs.map(V=>({id:V.id,...V.data()})).filter(V=>Array.isArray(V.assignedUsers)&&V.assignedUsers.includes(t.uid));Se.sort((V,De)=>{const Ze=V.date?new Date(V.date).getTime():0;return(De.date?new Date(De.date).getTime():0)-Ze}),r(Se);const Te=await zn(Lt(He,"inventory")),Ue={};Te.docs.forEach(V=>{Ue[V.id]=V.data()}),s(Ue)}catch(de){console.error("Error loading user tasks:",de)}finally{g(!1)}})()},[t]),se.useEffect(()=>{(async()=>{try{const de=await zn(Lt(He,"users")),ge={};de.docs.forEach(Se=>{ge[Se.id]=Se.data()}),a(ge)}catch(de){console.error("Error loading users:",de)}})()},[]);const A=te=>{p(te),setTimeout(()=>p(""),4e3)};se.useEffect(()=>{if(!t)return;const te=vc(Lt(He,"users",t.uid,"notifications"),zd("read","==",!1)),de=Im(te,ge=>{ge.docChanges().forEach(Se=>{if(Se.type==="added"){const Te=Se.doc.data(),Ue={id:Se.doc.id,...Te};D(Ue),setTimeout(async()=>{try{await Xr(Zt(He,"users",t.uid,"notifications",Ue.id),{read:!0})}catch(V){console.error("Failed to mark user notification read",V)}D(V=>V&&V.id===Ue.id?null:V)},5e3)}})});return()=>de()},[t]),se.useEffect(()=>{if(!t)return;const te=vc(Lt(He,"users",t.uid,"notifications"),zd("read","==",!1)),de=Im(te,ge=>{ge.docChanges().forEach(Se=>{if(Se.type==="added"){const Te=Se.doc.data();D({id:Se.doc.id,...Te})}})});return()=>de()},[t]);const I=te=>te.status||"incomplete",L=te=>(te.userAcceptance||{})[t==null?void 0:t.uid]||"pending",ne=async te=>{try{const de=te.userAcceptance||{};de[t.uid]="accepted";const ge=Zt(He,"works",te.id);await Xr(ge,{userAcceptance:de}),r(Se=>Se.map(Te=>Te.id===te.id?{...Te,userAcceptance:de}:Te)),A("Work accepted successfully!"),await fi(Lt(He,"notifications"),{type:"accept",workId:te.id,userId:t.uid,userName:t.displayName||"",createdAt:xo(),read:!1}),await fi(Lt(He,"users",t.uid,"notifications"),{type:"accept",workId:te.id,title:te.title||"Work accepted",message:"You accepted this work.",createdAt:xo(),read:!1})}catch(de){console.error("Failed to accept:",de)}},ie=te=>{R(te),x(""),N(!0)},ue=async()=>{if(!C.trim()){A("Please provide a reason for rejection.");return}try{const te=k.userAcceptance||{};te[t.uid]="rejected";const de=k.rejections||{};de[t.uid]={reason:C.trim(),timestamp:new Date().toISOString(),approved:!1};const ge=Zt(He,"works",k.id);await Xr(ge,{userAcceptance:te,rejections:de}),r(Se=>Se.map(Te=>Te.id===k.id?{...Te,userAcceptance:te,rejections:de}:Te)),A("Work rejected."),N(!1),R(null),await fi(Lt(He,"notifications"),{type:"reject",workId:k.id,userId:t.uid,userName:t.displayName||"",createdAt:xo(),read:!1}),await fi(Lt(He,"users",t.uid,"notifications"),{type:"reject",workId:k.id,title:k.title||"Work rejected",message:"You rejected this work.",createdAt:xo(),read:!1})}catch(te){console.error("Failed to reject:",te)}},fe=te=>{if(!t)return[];const ge=(te.assignedUserDetails||[]).find(Se=>Se.userId===t.uid);return(ge==null?void 0:ge.roles)||[]},J=(te,de)=>{const ge=`${t.uid}_${de}`;return(te.roleCompletion||{})[ge]==="done"},le=te=>{const de=fe(te);return de.length?de.every(ge=>J(te,ge)):!1},xe=async(te,de)=>{if(I(te)==="complete")return;const ge=`${t.uid}_${de}`,Se=te.roleCompletion||{},Te=Se[ge]==="done",Ue={...Se};Te?delete Ue[ge]:Ue[ge]="done";const V=fe(te),De=V.length>0&&V.every(Ve=>Ue[`${t.uid}_${Ve}`]==="done"),Ze=V.length>0&&V.every(Ve=>(te.roleCompletion||{})[`${t.uid}_${Ve}`]==="done");try{De&&!Ze?(await fi(Lt(He,"notifications"),{type:"done",workId:te.id,userId:t.uid,userName:t.displayName||"",createdAt:xo(),read:!1}),await fi(Lt(He,"users",t.uid,"notifications"),{type:"done",workId:te.id,title:te.title||"Work done",message:"All your roles for this work are marked done.",createdAt:xo(),read:!1})):!De&&Ze&&(await fi(Lt(He,"notifications"),{type:"undo-done",workId:te.id,userId:t.uid,userName:t.displayName||"",createdAt:xo(),read:!1}),await fi(Lt(He,"users",t.uid,"notifications"),{type:"undo-done",workId:te.id,title:te.title||"Work status changed",message:"You undid a previously completed work status.",createdAt:xo(),read:!1}));const Ve=Zt(He,"works",te.id);await Xr(Ve,{roleCompletion:Ue}),r(Ce=>Ce.map(Xe=>Xe.id===te.id?{...Xe,roleCompletion:Ue}:Xe))}catch(Ve){console.error("Failed to update role status:",Ve)}},we=te=>{const de=te.assignedItems||[];return de.length?u.jsxs("div",{className:"mt-3",children:[u.jsx("p",{className:"text-xs sm:text-sm font-semibold text-gray-700 mb-1",children:"Assigned items:"}),u.jsx("div",{className:"flex flex-wrap gap-2",children:de.map(ge=>{const Se=i[ge];return Se?u.jsxs("span",{className:"px-2 py-1 rounded-full bg-blue-50 text-xs sm:text-sm text-blue-800 border border-blue-100",children:[Se.itemName||"Item",Se.itemNo?` (${Se.itemNo})`:""]},ge):u.jsx("span",{className:"px-2 py-1 rounded-full bg-gray-100 text-xs text-gray-500",children:"Unknown item"},ge)})})]}):null},O=te=>{const ge=(te.assignedUsers||[]).filter(Se=>Se!==(t==null?void 0:t.uid));return ge.length===0?u.jsx("div",{className:"mt-3",children:u.jsx("p",{className:"text-xs text-gray-500 italic",children:"You are working on this alone"})}):u.jsxs("div",{className:"mt-3",children:[u.jsx("p",{className:"text-xs sm:text-sm font-semibold text-gray-700 mb-2",children:"Working with:"}),u.jsx("div",{className:"flex flex-wrap gap-2",children:ge.map(Se=>{const Te=o[Se];if(!Te)return u.jsxs("span",{className:"inline-flex items-center gap-2 px-3 py-1.5 rounded-full bg-gray-100 text-xs text-gray-500",children:[u.jsx("div",{className:"w-6 h-6 rounded-full bg-gray-300 flex items-center justify-center text-xs font-bold text-white",children:"?"}),"Unknown User"]},Se);const Ue=Te.photoURL||Te.avatarUrl||null;return u.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1.5 rounded-full bg-gradient-to-r from-blue-50 to-purple-50 border border-blue-100",children:[Ue?u.jsx("img",{src:Ue,alt:Te.name||"User",className:"w-7 h-7 rounded-full object-cover border border-white shadow-sm"}):u.jsx("div",{className:"w-7 h-7 rounded-full bg-gradient-to-r from-blue-500 to-purple-600 flex items-center justify-center text-xs font-bold text-white",children:(Te.name||"U").charAt(0).toUpperCase()}),u.jsx("div",{className:"flex flex-col",children:u.jsx("span",{className:"text-xs sm:text-sm font-semibold text-gray-800",children:Te.name||"User"})})]},Se)})})]})},W=n.filter(te=>I(te)!=="complete"),Y=W.filter(te=>L(te)==="pending"),K=W.filter(te=>L(te)==="rejected"),re=W.filter(te=>L(te)==="accepted"&&!le(te)),ae=W.filter(te=>L(te)==="accepted"&&le(te)),ve=()=>Q?Q.title?Q.title:Q.type==="accept"?"You accepted a work.":Q.type==="reject"?"You rejected a work.":Q.type==="done"?"All your roles for a work are done.":Q.type==="undo-done"?"You changed a previously completed work.":"New notification.":"";return u.jsxs("div",{className:`min-h-screen transition-colors duration-300 ${T?"bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900":"bg-gradient-to-br from-blue-50 via-white to-purple-50"}`,children:[u.jsx(In,{userType:S,isDarkMode:T,toggleDarkMode:F}),Q&&u.jsxs("div",{className:"fixed bottom-4 right-4 z-50 max-w-xs text-left bg-white dark:bg-slate-900 shadow-xl rounded-xl border border-gray-200 dark:border-slate-700 px-4 py-3 text-sm",children:[u.jsx("p",{className:"font-semibold text-gray-800 dark:text-gray-100 mb-1",children:ve()}),Q.message&&u.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-xs mb-1",children:Q.message}),u.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-xs",children:"Notification"})]}),y&&u.jsx("div",{className:"fixed top-20 right-4 z-40 bg-gradient-to-r from-blue-600 to-purple-600 text-white text-sm px-5 py-3 rounded-lg shadow-2xl animate-slide-in",children:y}),_&&u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:u.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full p-6",children:[u.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-4",children:"Reject Work"}),u.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Please provide a reason for rejecting this work:"}),u.jsx("textarea",{value:C,onChange:te=>x(te.target.value),rows:"4",className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-red-500 text-sm",placeholder:"Enter your reason..."}),u.jsxs("div",{className:"flex gap-3 mt-4",children:[u.jsx("button",{onClick:ue,className:"flex-1 bg-gradient-to-r from-red-500 to-rose-600 text-white py-2.5 px-4 rounded-xl font-semibold hover:from-red-600 hover:to-rose-700 transition-all",children:"Submit Rejection"}),u.jsx("button",{onClick:()=>{N(!1),R(null)},className:"flex-1 bg-gray-200 text-gray-800 py-2.5 px-4 rounded-xl font-semibold hover:bg-gray-300 transition-all",children:"Cancel"})]})]})}),u.jsxs("main",{className:"container mx-auto px-4 py-8 max-w-5xl",children:[u.jsxs("div",{className:"mb-8",children:[u.jsx("h1",{className:"text-3xl sm:text-4xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-purple-600 dark:from-yellow-300 dark:to-pink-400 mb-2",children:"Welcome Back"}),u.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm sm:text-base",children:"Manage your tasks efficiently. Accept new assignments and track your progress."})]}),l||h?u.jsxs("div",{className:"flex flex-col items-center justify-center py-20",children:[u.jsx(Ms,{className:"animate-spin text-5xl text-blue-600 dark:text-yellow-300 mb-4"}),u.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Loading your tasks..."})]}):W.length===0?u.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl shadow-lg p-12 text-center border border-gray-100 dark:border-slate-700",children:[u.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-blue-100 to-purple-100 dark:from-yellow-300 dark:to-pink-400 rounded-full flex items-center justify-center mx-auto mb-4",children:u.jsx(F2,{className:"text-4xl text-blue-600 dark:text-yellow-400"})}),u.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-gray-100 mb-2",children:"All Clear!"}),u.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"You have no active tasks at the moment."})]}):u.jsxs(u.Fragment,{children:[Y.length>0&&u.jsxs("section",{className:"mb-8",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[u.jsx("div",{className:"w-1 h-6 bg-gradient-to-b from-yellow-400 to-orange-500 rounded-full"}),u.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-gray-800 dark:text-gray-100",children:"Pending Acceptance"}),u.jsx("span",{className:"bg-gradient-to-r from-yellow-400 to-orange-500 text-white text-xs font-bold px-3 py-1 rounded-full",children:Y.length})]}),u.jsx("div",{className:"space-y-4",children:Y.map(te=>u.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl shadow-md hover:shadow-xl transition-all p-5 sm:p-6 border border-yellow-100 dark:border-blue-800",children:[u.jsxs("div",{className:"flex items-start justify-between mb-3",children:[u.jsxs("div",{className:"flex-1",children:[u.jsx("h3",{className:"text-lg sm:text-xl font-bold text-gray-800 dark:text-gray-100 mb-1",children:te.title||"Task"}),(te.date||te.deadline)&&u.jsxs("div",{className:"flex flex-col gap-1 text-xs sm:text-sm text-gray-500 dark:text-gray-300",children:[te.date&&u.jsxs("p",{className:"flex items-center gap-2",children:[u.jsx(fr,{className:"dark:text-yellow-300"}),u.jsxs("span",{children:["Date: ",new Date(te.date).toLocaleDateString()]})]}),te.deadline&&u.jsxs("p",{className:"flex items-center gap-2",children:[u.jsx(fr,{className:"dark:text-yellow-300"}),u.jsxs("span",{children:["Deadline: ",new Date(te.deadline).toLocaleDateString()]})]})]})]}),u.jsxs("span",{className:"bg-yellow-100 dark:bg-yellow-800 text-yellow-800 dark:text-yellow-200 text-xs font-semibold px-3 py-1.5 rounded-full flex items-center gap-1 border border-yellow-200 dark:border-yellow-700",children:[u.jsx(U2,{className:"dark:text-yellow-200"}),"Pending"]})]}),te.description&&u.jsx("p",{className:"text-gray-700 dark:text-gray-200 text-sm mb-2",children:te.description}),we(te),O(te),u.jsxs("div",{className:"flex gap-3 mt-4",children:[u.jsxs("button",{onClick:()=>ne(te),className:"flex-1 bg-gradient-to-r from-green-500 to-emerald-600 dark:from-green-700 dark:to-emerald-900 text-white py-2.5 px-4 rounded-xl font-semibold hover:from-green-600 hover:to-emerald-700 dark:hover:from-green-800 dark:hover:to-emerald-800 transition-all shadow-md flex items-center justify-center gap-2",children:[u.jsx(la,{}),"Accept"]}),u.jsxs("button",{onClick:()=>ie(te),className:"flex-1 bg-gradient-to-r from-red-500 to-rose-600 dark:from-red-700 dark:to-rose-900 text-white py-2.5 px-4 rounded-xl font-semibold hover:from-red-600 hover:to-rose-700 dark:hover:from-red-800 dark:hover:to-rose-800 transition-all shadow-md flex items-center justify-center gap-2",children:[u.jsx(Nl,{}),"Reject"]})]})]},te.id))})]}),K.length>0&&u.jsxs("section",{className:"mb-8",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-1 h-6 bg-gradient-to-b from-orange-500 to-red-500 rounded-full"}),u.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-gray-800 dark:text-gray-100",children:"Pending Rejection Approval"}),u.jsx("span",{className:"bg-gradient-to-r from-orange-500 to-red-500 text-white text-xs font-bold px-3 py-1 rounded-full",children:K.length})]}),u.jsx("button",{onClick:()=>q(te=>!te),className:"text-sm font-semibold text-gray-600 hover:text-gray-800 transition px-3 py-1.5 rounded-lg hover:bg-gray-100",children:j?"Hide":"Show"})]}),j&&u.jsx("div",{className:"space-y-4",children:K.map(te=>{const de=(te.rejections||{})[t.uid]||{};return u.jsxs("div",{className:"bg-white rounded-2xl shadow-md p-5 sm:p-6 border border-orange-100",children:[u.jsxs("div",{className:"flex items-start justify-between mb-3",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"text-lg sm:text-xl font-bold text-gray-800 dark:text-gray-100 mb-1",children:te.title||"Task"}),(te.date||te.deadline)&&u.jsxs("div",{className:"flex flex-col gap-1 text-xs sm:text-sm text-gray-500",children:[te.date&&u.jsxs("p",{className:"flex items-center gap-2",children:[u.jsx(fr,{}),u.jsxs("span",{children:["Date: ",new Date(te.date).toLocaleDateString()]})]}),te.deadline&&u.jsxs("p",{className:"flex items-center gap-2",children:[u.jsx(fr,{}),u.jsxs("span",{children:["Deadline: ",new Date(te.deadline).toLocaleDateString()]})]})]})]}),u.jsxs("span",{className:"bg-orange-100 text-orange-800 text-xs font-semibold px-3 py-1.5 rounded-full flex items-center gap-1",children:[u.jsx(U2,{}),"Pending Approval"]})]}),we(te),O(te),u.jsxs("div",{className:"bg-orange-50 rounded-xl p-4 mt-3",children:[u.jsx("p",{className:"text-xs font-semibold text-orange-800 mb-1",children:"Your Rejection Reason:"}),u.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:de.reason||"-"}),u.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:"Waiting for admin to approve your rejection request"})]})]},te.id)})})]}),re.length>0&&u.jsxs("section",{className:"mb-8",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[u.jsx("div",{className:"w-1 h-6 bg-gradient-to-b from-blue-500 to-purple-600 rounded-full"}),u.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-gray-800 dark:text-gray-100",children:"Active Tasks"}),u.jsx("span",{className:"bg-gradient-to-r from-blue-500 to-purple-600 text-white text-xs font-bold px-3 py-1 rounded-full",children:re.length})]}),u.jsx("div",{className:"space-y-4",children:re.map(te=>{const de=fe(te);return u.jsxs("div",{className:"bg-white rounded-2xl shadow-md hover:shadow-xl transition-all p-5 sm:p-6 border border-blue-100",children:[u.jsx("h3",{className:"text-lg sm:text-xl font-bold text-gray-800 dark:text-gray-100 mb-1",children:te.title||"Task"}),(te.date||te.deadline)&&u.jsxs("div",{className:"flex flex-col gap-1 text-xs sm:text-sm text-gray-500 mb-3",children:[te.date&&u.jsxs("p",{className:"flex items-center gap-2",children:[u.jsx(fr,{}),u.jsxs("span",{children:["Date: ",new Date(te.date).toLocaleDateString()]})]}),te.deadline&&u.jsxs("p",{className:"flex items-center gap-2",children:[u.jsx(fr,{}),u.jsxs("span",{children:["Deadline: ",new Date(te.deadline).toLocaleDateString()]})]})]}),te.description&&u.jsx("p",{className:"text-gray-700 dark:text-gray-300 text-sm mb-2",children:te.description}),we(te),O(te),u.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 dark:from-slate-800 dark:to-slate-900 rounded-xl p-4 mt-3",children:[u.jsx("p",{className:"text-sm font-semibold text-gray-700 dark:text-gray-100 mb-3",children:"Your Work Types:"}),u.jsx("div",{className:"flex flex-wrap gap-2",children:de.map(ge=>{const Se=J(te,ge);return u.jsx("button",{type:"button",onClick:()=>xe(te,ge),className:`inline-flex items-center gap-2 px-4 py-2 rounded-xl text-sm font-semibold transition-all shadow-sm ${Se?"bg-gradient-to-r from-green-500 to-emerald-600 text-white hover:from-green-600 hover:to-emerald-700":"bg-white dark:bg-slate-900 text-gray-700 dark:text-gray-100 border-2 border-gray-200 dark:border-slate-700 hover:border-blue-400 dark:hover:border-blue-400"}`,children:Se?u.jsxs(u.Fragment,{children:[u.jsx(Qb,{}),"Undo ",ge]}):u.jsxs(u.Fragment,{children:[u.jsx(la,{}),"Mark ",ge," as done"]})},ge)})})]})]},te.id)})})]}),ae.length>0&&u.jsxs("section",{children:[u.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[u.jsx("div",{className:"w-1 h-6 bg-gradient-to-b from-green-500 to-emerald-600 rounded-full"}),u.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-gray-800 dark:text-gray-100",children:"Completed"}),u.jsx("span",{className:"bg-gradient-to-r from-green-500 to-emerald-600 text-white text-xs font-bold px-3 py-1 rounded-full",children:ae.length})]}),u.jsx("div",{className:"space-y-4",children:ae.map(te=>{const de=fe(te);return u.jsxs("div",{className:"bg-white rounded-2xl shadow-md p-5 sm:p-6 border border-green-100",children:[u.jsxs("div",{className:"flex items-start justify-between mb-3",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"text-lg sm:text-xl font-bold text-gray-800 dark:text-gray-100 mb-1",children:te.title||"Task"}),(te.date||te.deadline)&&u.jsxs("div",{className:"flex flex-col gap-1 text-xs sm:text-sm text-gray-500",children:[te.date&&u.jsxs("p",{className:"flex items-center gap-2",children:[u.jsx(fr,{}),u.jsxs("span",{children:["Date: ",new Date(te.date).toLocaleDateString()]})]}),te.deadline&&u.jsxs("p",{className:"flex items-center gap-2",children:[u.jsx(fr,{}),u.jsxs("span",{children:["Deadline: ",new Date(te.deadline).toLocaleDateString()]})]})]})]}),u.jsx(F2,{className:"text-3xl text-green-500"})]}),te.description&&u.jsx("p",{className:"text-gray-700 dark:text-gray-300 text-sm mb-2",children:te.description}),we(te),O(te),u.jsx("div",{className:"flex flex-wrap gap-2 mb-3 mt-3",children:de.map(ge=>u.jsxs("button",{onClick:()=>xe(te,ge),className:"inline-flex items-center gap-1 px-3 py-1.5 rounded-full text-xs font-semibold bg-green-100 text-green-800 hover:bg-green-200 transition",children:[u.jsx(Qb,{className:"text-xs"}),"Undo ",ge]},ge))}),u.jsx("p",{className:"text-sm text-green-700 font-semibold bg-green-50 px-4 py-2 rounded-lg",children:" All work completed. Waiting for admin review."})]},te.id)})})]})]})]})]})},SF=()=>{const t=xi(),{isDarkMode:e,toggleDarkMode:n}=Cg();return u.jsxs("div",{className:`min-h-screen transition-colors duration-300 flex items-center justify-center px-4 py-8 overflow-hidden ${e?"bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900":"bg-gradient-to-br from-blue-50 via-cyan-50 to-blue-100"}`,children:[u.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[e?u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"absolute top-20 left-10 w-72 h-72 bg-blue-500 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob"}),u.jsx("div",{className:"absolute top-40 right-10 w-72 h-72 bg-cyan-500 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob",style:{animationDelay:"2s"}}),u.jsx("div",{className:"absolute bottom-20 left-20 w-72 h-72 bg-blue-400 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob",style:{animationDelay:"4s"}})]}):u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"absolute top-20 left-10 w-72 h-72 bg-blue-300 rounded-full mix-blend-multiply filter blur-3xl opacity-30 animate-blob"}),u.jsx("div",{className:"absolute top-40 right-10 w-72 h-72 bg-cyan-300 rounded-full mix-blend-multiply filter blur-3xl opacity-30 animate-blob",style:{animationDelay:"2s"}}),u.jsx("div",{className:"absolute bottom-20 left-20 w-72 h-72 bg-blue-200 rounded-full mix-blend-multiply filter blur-3xl opacity-30 animate-blob",style:{animationDelay:"4s"}})]}),u.jsx("div",{className:`absolute top-1/4 left-1/4 w-1 h-1 rounded-full animate-float opacity-50 ${e?"bg-blue-300":"bg-blue-400"}`}),u.jsx("div",{className:`absolute top-1/3 right-1/4 w-1 h-1 rounded-full animate-float opacity-60 ${e?"bg-cyan-300":"bg-cyan-400"}`,style:{animationDelay:"1s"}}),u.jsx("div",{className:`absolute bottom-1/3 left-1/3 w-1 h-1 rounded-full animate-float opacity-40 ${e?"bg-blue-200":"bg-blue-300"}`,style:{animationDelay:"2s"}}),u.jsx("div",{className:`absolute top-2/3 right-1/3 w-1 h-1 rounded-full animate-float opacity-50 ${e?"bg-cyan-200":"bg-cyan-300"}`,style:{animationDelay:"1.5s"}}),u.jsx("div",{className:`absolute bottom-1/4 right-1/4 w-1 h-1 rounded-full animate-float opacity-60 ${e?"bg-blue-300":"bg-blue-400"}`,style:{animationDelay:"2.5s"}})]}),u.jsx("button",{onClick:n,className:`absolute top-8 right-8 z-20 p-3 rounded-full transition-all duration-300 ${e?"bg-gray-700 hover:bg-gray-600 text-yellow-300":"bg-blue-200 hover:bg-blue-300 text-blue-600"}`,"aria-label":"Toggle dark mode",children:e?u.jsx(Wd,{size:20}):u.jsx($d,{size:20})}),u.jsxs("div",{className:"relative z-10 w-full max-w-md",children:[u.jsxs("div",{className:`backdrop-blur-xl border rounded-2xl shadow-2xl p-8 sm:p-12 space-y-8 animate-fade-in transition-colors duration-300 ${e?"bg-white/10 border-white/20":"bg-white/40 border-white/60"}`,children:[u.jsxs("div",{className:"text-center space-y-3",children:[u.jsxs("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-gradient-to-r from-blue-500 to-cyan-500 mb-4 animate-pulse-glow relative",children:[u.jsx("div",{className:"absolute inset-0 rounded-full bg-gradient-to-r from-blue-500 to-cyan-500 animate-spin-slow opacity-75"}),u.jsx("span",{className:"text-white font-bold text-2xl relative z-10",children:"TMV"})]}),u.jsx("h1",{className:`text-4xl sm:text-5xl font-bold text-transparent bg-clip-text overflow-hidden whitespace-nowrap border-r-2 animate-smooth-typing ${e?"bg-gradient-to-r from-blue-200 via-cyan-200 to-blue-200 border-cyan-400":"bg-gradient-to-r from-blue-600 via-cyan-600 to-blue-600 border-cyan-600"}`,children:"Welcome"}),u.jsx("p",{className:`text-lg font-semibold animate-slide-up-delayed ${e?"text-blue-200":"text-blue-700"}`,children:"Task Management & Verification"})]}),u.jsx("div",{className:"text-center",children:u.jsx("p",{className:`leading-relaxed text-sm sm:text-base animate-slide-up-delayed-2 ${e?"text-gray-300":"text-gray-700"}`,children:"Streamline your workflow and efficiently manage all your task assignments in one unified platform."})}),u.jsxs("div",{className:"space-y-3 sm:space-y-4 animate-slide-up-delayed-3",children:[u.jsxs("button",{onClick:()=>t("/login"),className:"w-full px-6 py-3 sm:py-4 bg-gradient-to-r from-blue-500 to-cyan-500 text-white font-semibold rounded-lg hover:from-blue-600 hover:to-cyan-600 transition-all duration-300 transform hover:-translate-y-1 hover:shadow-lg hover:shadow-blue-500/50 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:ring-offset-2 focus:ring-offset-slate-900 active:translate-y-0 group relative overflow-hidden",children:[u.jsx("span",{className:"relative z-10",children:"Log In"}),u.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-600 to-cyan-600 opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]}),u.jsxs("button",{onClick:()=>t("/signup"),className:`w-full px-6 py-3 sm:py-4 font-semibold rounded-lg border transition-all duration-300 transform hover:-translate-y-1 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:ring-offset-2 focus:ring-offset-slate-900 active:translate-y-0 group relative
                ${e?"bg-white/10 backdrop-blur-md text-white border-white/30 hover:bg-white/20 hover:border-white/40 hover:shadow-lg hover:shadow-cyan-500/30":"bg-white text-blue-700 border-blue-500 hover:bg-blue-50 hover:border-blue-600 hover:text-blue-800 shadow-md"}
              `,children:[u.jsx("span",{className:"relative z-10",children:"Create Account"}),e?u.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/20 to-cyan-500/20 rounded-lg opacity-0 group-hover:opacity-100 transition-opacity duration-300"}):null]})]}),u.jsx("div",{className:`pt-6 border-t text-center animate-slide-up-delayed-4 ${e?"border-white/10 text-gray-400":"border-gray-300 text-gray-600"}`,children:u.jsx("p",{className:"text-sm",children:"Get started in seconds"})})]}),u.jsx("div",{className:`text-center mt-8 text-xs animate-fade-in ${e?"text-gray-500":"text-gray-600"}`,style:{animationDelay:"1.2s"},children:" 2025 Videography Management System"})]})]})},AF="BCDW2bDpR51kOUCYdebGFw4pHEU_h2159MHvkSEslEdrV0yI0AVUiQikAbClmXfS9EGHHQblUlKTC_To4SaQ7Hg";async function EF(t){if(!t)return;if(!("Notification"in window)){console.log("Notifications not supported");return}if(await Notification.requestPermission()!=="granted"){console.log("Notification permission not granted");return}"serviceWorker"in navigator&&await navigator.serviceWorker.register("/firebase-messaging-sw.js");const n=await QA(M2,{vapidKey:AF});if(!n){console.log("No FCM token");return}await Yv(Zt(He,"users",t),{fcmTokens:f9(n)},{merge:!0}),JM(M2,r=>{var o,a;const i=(o=r.notification)==null?void 0:o.title,s=(a=r.notification)==null?void 0:a.body;i&&(async()=>{try{const c=(r.data||{}).items,h={body:s,icon:"/icon-192.png"};if(c){const y=JSON.parse(c).map(p=>p.imageUrl).filter(p=>typeof p=="string"&&p.length);if(y.length&&window.caches)try{const p=await caches.open("tmv-task-assets-v1");await Promise.all(y.map(async _=>{try{const N=await fetch(_,{mode:"no-cors"});await p.put(_,N.clone()),h.image||(h.image=_)}catch{}}))}catch(p){console.warn("caching images failed",p)}}new Notification(i,h)}catch{new Notification(i,{body:s,icon:"/icon-192.png"})}})()})}const TF=()=>{const t=xi(),{isDarkMode:e,toggleDarkMode:n}=Cg(),[r,i]=se.useState({email:"",password:""}),[s,o]=se.useState(!1),[a,l]=se.useState(""),c=g=>{i(y=>({...y,[g.target.name]:g.target.value}))},h=async g=>{g.preventDefault(),l(""),o(!0);try{const p=(await J7(Ii,r.email,r.password)).user;await EF(p.uid);const _=Zt(He,"users",p.uid),N=await Xs(_);let C="user";N.exists()&&(C=N.data().userType||"user"),t(C==="admin"?"/admin-home":"/home")}catch(y){l(y.message||"Failed to log in.")}finally{o(!1)}};return u.jsxs("div",{className:`min-h-screen flex items-center justify-center px-4 transition-colors duration-300 ${e?"bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900":"bg-gradient-to-br from-blue-50 via-cyan-50 to-blue-100"}`,children:[u.jsx("button",{onClick:n,className:`absolute top-8 right-8 z-20 p-3 rounded-full transition-all duration-300 ${e?"bg-gray-700 hover:bg-gray-600 text-yellow-300":"bg-blue-200 hover:bg-blue-300 text-blue-600"}`,"aria-label":"Toggle dark mode",children:e?u.jsx(Wd,{size:20}):u.jsx($d,{size:20})}),u.jsxs("div",{className:`w-full max-w-md rounded-lg shadow-md p-4 sm:p-6 transition-colors duration-300 ${e?"bg-slate-900 border border-slate-700 text-gray-100":"bg-white border border-gray-200 text-gray-800"}`,children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-800 dark:text-gray-100",children:"Log In"}),u.jsx("button",{onClick:()=>t("/"),className:"text-gray-600 hover:text-gray-800 dark:text-gray-300 dark:hover:text-white text-2xl p-1",title:"Go back","aria-label":"Go back",children:u.jsx(ZA,{})})]}),a&&u.jsx("div",{className:"mb-4 p-3 rounded bg-red-100 text-red-700 text-sm dark:bg-red-900 dark:text-red-200",children:a}),u.jsxs("form",{onSubmit:h,className:"space-y-3 sm:space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-200 mb-1",children:"Email"}),u.jsx("input",{type:"email",name:"email",value:r.email,onChange:c,required:!0,className:"w-full px-3 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm bg-white text-gray-900 dark:bg-slate-800 dark:text-gray-100 dark:border-slate-700"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-200 mb-1",children:"Password"}),u.jsx("input",{type:"password",name:"password",value:r.password,onChange:c,required:!0,className:"w-full px-3 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm bg-white text-gray-900 dark:bg-slate-800 dark:text-gray-100 dark:border-slate-700"})]}),u.jsx("button",{type:"submit",disabled:s,className:"w-full bg-blue-600 text-white py-2 rounded font-semibold text-sm hover:bg-blue-700 disabled:opacity-50 dark:bg-blue-700 dark:hover:bg-blue-800",children:s?"Logging in...":"Log In"}),u.jsxs("p",{className:"mt-3 text-center text-xs sm:text-sm text-gray-600 dark:text-gray-300",children:["Do not have an account?"," ",u.jsx("span",{onClick:()=>t("/signup"),className:"text-blue-600 font-semibold cursor-pointer hover:underline dark:text-blue-400 dark:hover:text-blue-300",children:"Sign up"})]})]})]})]})},kF="mihirudahanayake@gmail.com",IF=["videography","photography"],CF=()=>{const t=xi(),{isDarkMode:e,toggleDarkMode:n}=Cg(),[r,i]=se.useState({name:"",email:"",phoneNo:"",departments:["videography"],firstPriority:"videography",batch:"20/21",studyDepartment:"ITT",gender:"male",registrationNumber:"",cardNumber:"",birthday:"",password:"",confirmPassword:""}),[s,o]=se.useState(!1),[a,l]=se.useState(""),[c,h]=se.useState(!1),[g,y]=se.useState(!1),p=x=>{i(k=>({...k,[x.target.name]:x.target.value}))},_=x=>{i(k=>{const j=k.departments.includes(x)?k.departments.filter(Q=>Q!==x):[...k.departments,x];let q=k.firstPriority;return j.includes(q)||(q=j[0]||""),{...k,departments:j,firstPriority:q}})},N=async x=>{if(x.preventDefault(),l(""),r.password!==r.confirmPassword){l("Password and confirm password do not match.");return}if(r.departments.length===0){l("Please select at least one work department.");return}if(!r.batch){l("Please select your batch.");return}if(!r.studyDepartment){l("Please select your department in study.");return}o(!0);try{const R=(await EN(Ii,r.email,r.password)).user,j=R.email===kF?"admin":"user";await Yv(Zt(He,"users",R.uid),{name:r.name,email:r.email,phoneNo:r.phoneNo,departments:r.departments,firstPriority:r.firstPriority,batch:r.batch,studyDepartment:r.studyDepartment,gender:r.gender,registrationNumber:r.registrationNumber,cardNumber:r.cardNumber||null,birthday:r.birthday||null,userType:j,createdAt:new Date().toISOString()}),t(j==="admin"?"/admin-home":"/home")}catch(k){l(k.message||"Failed to sign up.")}finally{o(!1)}},C=x=>r.departments.includes(x);return u.jsxs("div",{className:`min-h-screen flex items-center justify-center px-4 transition-colors duration-300 ${e?"bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900":"bg-gradient-to-br from-blue-50 via-cyan-50 to-blue-100"}`,children:[u.jsx("button",{onClick:n,className:`absolute top-8 right-8 z-20 p-3 rounded-full transition-all duration-300 ${e?"bg-gray-700 hover:bg-gray-600 text-yellow-300":"bg-blue-200 hover:bg-blue-300 text-blue-600"}`,"aria-label":"Toggle dark mode",children:e?u.jsx(Wd,{size:20}):u.jsx($d,{size:20})}),u.jsxs("div",{className:`w-full max-w-md rounded-lg shadow-md p-4 sm:p-6 transition-colors duration-300 my-8 sm:my-12 ${e?"bg-slate-900 border border-slate-700 text-gray-100":"bg-white border border-gray-200 text-gray-800"}`,children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-800 dark:text-gray-100",children:"Create Your Account"}),u.jsx("button",{onClick:()=>t("/"),className:"text-gray-600 hover:text-gray-800 dark:text-gray-300 dark:hover:text-white text-2xl p-1",title:"Go back","aria-label":"Go back",children:u.jsx(ZA,{})})]}),u.jsx("p",{className:"mb-6 text-sm text-gray-600 dark:text-gray-300 text-center",children:"Fill in your details to get started. All fields marked * are required."}),a&&u.jsx("div",{className:"mb-4 p-3 rounded bg-red-100 text-red-700 text-sm dark:bg-red-900 dark:text-red-200",children:a}),u.jsxs("form",{onSubmit:N,className:"space-y-3 sm:space-y-4",children:[u.jsxs("div",{children:[u.jsxs("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-200 mb-1",children:["Name ",u.jsx("span",{className:"text-red-500",children:"*"})]}),u.jsx("input",{type:"text",name:"name",value:r.name,onChange:p,required:!0,placeholder:"Full name",className:"w-full px-3 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm bg-white text-gray-900 dark:bg-slate-800 dark:text-gray-100 dark:border-slate-700"})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-200 mb-1",children:["Email ",u.jsx("span",{className:"text-red-500",children:"*"})]}),u.jsx("input",{type:"email",name:"email",value:r.email,onChange:p,required:!0,placeholder:"you@email.com",className:"w-full px-3 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm bg-white text-gray-900 dark:bg-slate-800 dark:text-gray-100 dark:border-slate-700"})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-200 mb-1",children:["Phone number ",u.jsx("span",{className:"text-red-500",children:"*"})]}),u.jsx("input",{type:"tel",name:"phoneNo",value:r.phoneNo,onChange:p,required:!0,placeholder:"07XXXXXXXX",className:"w-full px-3 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm bg-white text-gray-900 dark:bg-slate-800 dark:text-gray-100 dark:border-slate-700"})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-200 mb-1",children:["Batch ",u.jsx("span",{className:"text-red-500",children:"*"})]}),u.jsxs("select",{name:"batch",value:r.batch,onChange:p,required:!0,className:"w-full px-3 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm bg-white text-gray-900 dark:bg-slate-800 dark:text-gray-100 dark:border-slate-700",children:[u.jsx("option",{value:"",children:"Select batch"}),u.jsx("option",{value:"20/21",children:"20/21"}),u.jsx("option",{value:"21/22",children:"21/22"}),u.jsx("option",{value:"22/23",children:"22/23"}),u.jsx("option",{value:"23/24",children:"23/24"})]})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-200 mb-1",children:["Department in study ",u.jsx("span",{className:"text-red-500",children:"*"})]}),u.jsxs("select",{name:"studyDepartment",value:r.studyDepartment,onChange:p,required:!0,className:"w-full px-3 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm bg-white text-gray-900 dark:bg-slate-800 dark:text-gray-100 dark:border-slate-700",children:[u.jsx("option",{value:"",children:"Select department"}),u.jsx("option",{value:"ITT",children:"ITT"}),u.jsx("option",{value:"EET",children:"EET"}),u.jsx("option",{value:"MTT",children:"MTT"}),u.jsx("option",{value:"BPT",children:"BPT"}),u.jsx("option",{value:"Food",children:"Food"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-200 mb-1",children:"Gender"}),u.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[u.jsxs("label",{className:"flex items-center gap-2",children:[u.jsx("input",{type:"radio",name:"gender",value:"male",checked:r.gender==="male",onChange:p,className:"dark:bg-slate-800 dark:border-slate-700"}),u.jsx("span",{className:"dark:text-gray-100",children:"Male"})]}),u.jsxs("label",{className:"flex items-center gap-2",children:[u.jsx("input",{type:"radio",name:"gender",value:"female",checked:r.gender==="female",onChange:p,className:"dark:bg-slate-800 dark:border-slate-700"}),u.jsx("span",{className:"dark:text-gray-100",children:"Female"})]})]})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-200 mb-1",children:["Registration number ",u.jsx("span",{className:"text-red-500",children:"*"})]}),u.jsx("input",{type:"text",name:"registrationNumber",value:r.registrationNumber,onChange:p,required:!0,placeholder:"Ex: ITT/2021/123",className:"w-full px-3 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm bg-white text-gray-900 dark:bg-slate-800 dark:text-gray-100 dark:border-slate-700"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-200 mb-1",children:"Card"}),u.jsx("input",{type:"text",name:"cardNumber",value:r.cardNumber,onChange:p,placeholder:"If you have one",className:"w-full px-3 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm bg-white text-gray-900 dark:bg-slate-800 dark:text-gray-100 dark:border-slate-700"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-200 mb-1",children:"Birthday"}),u.jsx("input",{type:"date",name:"birthday",value:r.birthday,onChange:p,placeholder:"YYYY-MM-DD",className:"w-full px-3 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm bg-white text-gray-900 dark:bg-slate-800 dark:text-gray-100 dark:border-slate-700"})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-200 mb-1",children:["Departments (work) ",u.jsx("span",{className:"text-red-500",children:"*"})]}),u.jsx("div",{className:"bg-gray-50 border rounded p-2 flex flex-col gap-1 dark:bg-slate-800 dark:border-slate-700",children:IF.map(x=>u.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[u.jsx("input",{type:"checkbox",checked:C(x),onChange:()=>_(x),className:"dark:bg-slate-800 dark:border-slate-700",required:r.departments.length===0}),u.jsx("span",{className:"capitalize dark:text-gray-100",children:x})]},x))}),u.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-300",children:"You must select at least one department."})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-200 mb-1",children:"First priority department (work)"}),u.jsx("select",{name:"firstPriority",value:r.firstPriority,onChange:p,className:"w-full px-3 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm bg-white text-gray-900 dark:bg-slate-800 dark:text-gray-100 dark:border-slate-700",children:r.departments.map(x=>u.jsx("option",{value:x,children:x},x))})]}),u.jsxs("div",{className:"relative",children:[u.jsxs("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-200 mb-1",children:["Password ",u.jsx("span",{className:"text-red-500",children:"*"})]}),u.jsx("input",{type:c?"text":"password",name:"password",value:r.password,onChange:p,required:!0,minLength:6,placeholder:"At least 6 characters",className:"w-full px-3 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm bg-white text-gray-900 dark:bg-slate-800 dark:text-gray-100 dark:border-slate-700 pr-10"}),u.jsx("button",{type:"button",tabIndex:-1,onClick:()=>h(x=>!x),className:"absolute right-2 top-8 transform -translate-y-1/2 text-gray-500 dark:text-gray-300 focus:outline-none","aria-label":c?"Hide password":"Show password",children:c?u.jsx(Kb,{}):u.jsx(Yb,{})})]}),u.jsxs("div",{className:"relative",children:[u.jsxs("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-200 mb-1",children:["Confirm Password ",u.jsx("span",{className:"text-red-500",children:"*"})]}),u.jsx("input",{type:g?"text":"password",name:"confirmPassword",value:r.confirmPassword,onChange:p,required:!0,minLength:6,placeholder:"Re-enter your password",className:"w-full px-3 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm bg-white text-gray-900 dark:bg-slate-800 dark:text-gray-100 dark:border-slate-700 pr-10"}),u.jsx("button",{type:"button",tabIndex:-1,onClick:()=>y(x=>!x),className:"absolute right-2 top-8 transform -translate-y-1/2 text-gray-500 dark:text-gray-300 focus:outline-none","aria-label":g?"Hide password":"Show password",children:g?u.jsx(Kb,{}):u.jsx(Yb,{})})]}),u.jsx("button",{type:"submit",disabled:s,className:"w-full bg-blue-600 text-white py-2 rounded font-semibold text-sm hover:bg-blue-700 disabled:opacity-50 dark:bg-blue-700 dark:hover:bg-blue-800",children:s?"Creating account...":"Sign Up"}),u.jsxs("p",{className:"mt-3 text-center text-xs sm:text-sm text-gray-600 dark:text-gray-300",children:["Already have an account?"," ",u.jsx("span",{onClick:()=>t("/login"),className:"text-blue-600 font-semibold cursor-pointer hover:underline dark:text-blue-400 dark:hover:text-blue-300",children:"Log in"})]})]})]})]})},PF=()=>{const[t,e]=se.useState({name:"",email:"",password:"",phone:"",specialty:""}),[n,r]=se.useState(!1),[i,s]=se.useState({type:"",text:""}),o=l=>{e(c=>({...c,[l.target.name]:l.target.value}))},a=async l=>{l.preventDefault(),r(!0),s({type:"",text:""});try{const c=await EN(Ii,t.email,t.password),h=t.email==="mihirudahanayake@gmail.com"?"admin":"user";await Yv(Zt(He,"users",c.user.uid),{name:t.name,email:t.email,phone:t.phone,specialty:t.specialty,role:h,createdAt:new Date().toISOString()}),s({type:"success",text:"User created successfully."}),e({name:"",email:"",password:"",phone:"",specialty:""})}catch(c){s({type:"error",text:c.message})}finally{r(!1)}};return u.jsxs("div",{className:"min-h-screen bg-gray-100",children:[u.jsx(In,{userType:"admin"}),u.jsx("main",{className:"container mx-auto px-4 py-6 sm:py-8",children:u.jsxs("div",{className:"max-w-2xl mx-auto bg-white rounded-lg shadow-md p-4 sm:p-8",children:[u.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-gray-800 mb-4 sm:mb-6",children:"Create New User Account"}),i.text&&u.jsx("div",{className:`mb-4 p-3 sm:p-4 rounded text-sm sm:text-base ${i.type==="success"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:i.text}),u.jsxs("form",{onSubmit:a,className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-gray-700 font-semibold mb-2 text-sm sm:text-base",children:"Name"}),u.jsx("input",{type:"text",name:"name",value:t.name,onChange:o,required:!0,className:"w-full px-3 sm:px-4 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm sm:text-base"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-gray-700 font-semibold mb-2 text-sm sm:text-base",children:"Email"}),u.jsx("input",{type:"email",name:"email",value:t.email,onChange:o,required:!0,className:"w-full px-3 sm:px-4 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm sm:text-base"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-gray-700 font-semibold mb-2 text-sm sm:text-base",children:"Password"}),u.jsx("input",{type:"password",name:"password",value:t.password,onChange:o,required:!0,minLength:6,className:"w-full px-3 sm:px-4 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm sm:text-base"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-gray-700 font-semibold mb-2 text-sm sm:text-base",children:"Phone"}),u.jsx("input",{type:"tel",name:"phone",value:t.phone,onChange:o,className:"w-full px-3 sm:px-4 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm sm:text-base"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-gray-700 font-semibold mb-2 text-sm sm:text-base",children:"Specialty"}),u.jsx("input",{type:"text",name:"specialty",value:t.specialty,onChange:o,className:"w-full px-3 sm:px-4 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm sm:text-base"})]}),u.jsx("button",{type:"submit",disabled:n,className:"w-full bg-blue-600 text-white py-2 sm:py-3 px-4 rounded font-semibold hover:bg-blue-700 transition disabled:opacity-50 text-sm sm:text-base",children:n?"Creating user...":"Create User"})]})]})})]})},LF=["videography","editing"],RF=()=>{const[t,e]=se.useState([]),[n,r]=se.useState([]),[i,s]=se.useState({title:"",description:"",date:"",deadline:"",priority:"medium",assignedUsers:[],assignedItems:[]}),[o,a]=se.useState("date"),[l,c]=se.useState(!1),[h,g]=se.useState({type:"",text:""}),[y,p]=se.useState(""),[_,N]=se.useState(""),C=xi();se.useEffect(()=>{x(),k()},[]);const x=async()=>{try{const ue=(await zn(Lt(He,"users"))).docs.map(fe=>({id:fe.id,...fe.data()}));ue.sort((fe,J)=>{const le=(fe.name||"").toLowerCase(),xe=(J.name||"").toLowerCase();return le.localeCompare(xe)}),e(ue)}catch(ie){console.error("Error fetching users:",ie)}},k=async()=>{try{const ue=(await zn(Lt(He,"inventory"))).docs.map(fe=>({id:fe.id,...fe.data()}));ue.sort((fe,J)=>{const le=(fe.itemName||"").toLowerCase(),xe=(J.itemName||"").toLowerCase();return le.localeCompare(xe)}),r(ue)}catch(ie){console.error("Error fetching inventory:",ie)}},R=async({task:ie,usersMap:ue={},itemsMap:fe={}})=>{try{const{id:J,title:le,description:xe,date:we,deadline:O,priority:W,assignedUserDetails:Y=[],assignedItems:K=[],userAcceptance:re={},roleCompletion:ae={}}=ie,ve=()=>{if((ie.status||"").toLowerCase()==="complete")return"completed";const Ge=ie.assignedUserDetails||[],ft=ie.roleCompletion||{},Et=ie.userAcceptance||{};return!Ge.length||!Ge.every(Qe=>Et[Qe.userId]==="accepted")?"pending":Ge.every(Qe=>(Qe.roles||[]).every(tt=>ft[`${Qe.userId}_${tt}`]==="done"))?"done":"accepted"},te=Ge=>{const ft={pending:{bg:"#fef3c7",text:"#b45309"},accepted:{bg:"#fed7aa",text:"#b45309"},done:{bg:"#bfdbfe",text:"#1e40af"},completed:{bg:"#dcfce7",text:"#166534"}};return ft[Ge]||ft.pending},de=(Y||[]).map(({userId:Ge,roles:ft})=>{const Et=ue[Ge]||{},at=re[Ge]||"pending";return{id:Ge,name:Et.name||Et.displayName||"Unknown",photoURL:Et.photoURL||Et.avatarUrl||"",roles:ft||[],acceptanceStatus:at}}),ge=K.map(Ge=>fe[Ge]).filter(Boolean),Se=1080,Te=1360,Ue=document.createElement("canvas");Ue.width=Se,Ue.height=Te;const V=Ue.getContext("2d");V.fillStyle="#f3f4f6",V.fillRect(0,0,Se,Te);const De=48,Ze=De,Ve=De,Ce=Se-De*2,Xe=Te-De*2;V.fillStyle="#ffffff";const qe=24;V.beginPath(),V.moveTo(Ze+qe,Ve),V.lineTo(Ze+Ce-qe,Ve),V.quadraticCurveTo(Ze+Ce,Ve,Ze+Ce,Ve+qe),V.lineTo(Ze+Ce,Ve+Xe-qe),V.quadraticCurveTo(Ze+Ce,Ve+Xe,Ze+Ce-qe,Ve+Xe),V.lineTo(Ze+qe,Ve+Xe),V.quadraticCurveTo(Ze,Ve+Xe,Ze,Ve+Xe-qe),V.lineTo(Ze,Ve+qe),V.quadraticCurveTo(Ze,Ve,Ze+qe,Ve),V.closePath(),V.fill(),V.strokeStyle="#e5e7eb",V.lineWidth=2,V.stroke();const it=40;let Ae=Ze+it,bt=Ve+it;const gt=Ce-it*2,$e=(Ge,ft,Et,at,Ct,Qe)=>{V.font=Qe;const tt=(Ge||"").split(" ");let kt="",ze=at;for(let Ke=0;Ke<tt.length;Ke++){const ut=kt+tt[Ke]+" ";V.measureText(ut).width>ft&&Ke>0?(V.fillText(kt.trim(),Et,ze),kt=tt[Ke]+" ",ze+=Ct):kt=ut}return kt&&(V.fillText(kt.trim(),Et,ze),ze+=Ct),ze};V.fillStyle="#3f3f3f",V.textBaseline="top",bt=$e(le||"New Task",gt-200,Ae,bt,56,'bold 48px system-ui, -apple-system, Roboto, "Segoe UI", "Helvetica Neue", Arial');const ot=ve(),Nt=te(ot);V.font='500 22px system-ui, -apple-system, Roboto, "Segoe UI", "Helvetica Neue", Arial';const Ye=V.measureText(ot).width+32,wt=48,et=Ze+Ce-it-Ye-8,Ot=Ve+it+8;V.fillStyle=Nt.bg,V.fillRect(et,Ot,Ye,wt),V.fillStyle=Nt.text,V.fillText(ot,et+16,Ot+12),bt+=16;const Ft=we||O;if(Ft){V.fillStyle="#6b7280",V.font='400 26px system-ui, -apple-system, Roboto, "Segoe UI", "Helvetica Neue", Arial';const Ge=new Date(Ft).toLocaleDateString(void 0,{day:"numeric",month:"short",year:"numeric"});V.fillText(`Date: ${Ge}`,Ae,bt),bt+=44}if(xe&&(V.fillStyle="#374151",bt=$e(xe,gt,Ae,bt+12,36,'400 24px system-ui, -apple-system, Roboto, "Segoe UI", "Helvetica Neue", Arial')),(de||[]).length){bt+=16,V.fillStyle="#3f3f3f",V.font='600 26px system-ui, -apple-system, Roboto, "Segoe UI", "Helvetica Neue", Arial',V.fillText("Assigned to:",Ae,bt),bt+=44;const Ge=72,ft=20,Et=de.map(Ct=>new Promise(Qe=>{if(!Ct||!Ct.photoURL)return Qe(null);const tt=new Image;tt.crossOrigin="anonymous",tt.onload=()=>Qe(tt),tt.onerror=()=>Qe(null),tt.src=Ct.photoURL})),at=await Promise.all(Et);for(let Ct=0;Ct<de.length;Ct++){const Qe=de[Ct],tt=at[Ct],kt=Ae,ze=bt;if(V.save(),V.beginPath(),V.arc(kt+Ge/2,ze+Ge/2,Ge/2,0,Math.PI*2),V.closePath(),V.fillStyle="#e5e7eb",V.fill(),tt){V.save(),V.beginPath(),V.arc(kt+Ge/2,ze+Ge/2,Ge/2,0,Math.PI*2),V.clip();const tn=Math.max(Ge/tt.width,Ge/tt.height),Wt=tt.width*tn,ni=tt.height*tn,Nr=kt+(Ge-Wt)/2,Un=ze+(Ge-ni)/2;V.drawImage(tt,Nr,Un,Wt,ni),V.restore()}else{V.fillStyle="#6b7280",V.font='600 26px system-ui, -apple-system, Roboto, "Segoe UI", "Helvetica Neue", Arial';const tn=(Qe.name||"").split(" ").map(Wt=>Wt[0]).slice(0,2).join("").toUpperCase();V.fillText(tn,kt+16,ze+20)}V.restore();const Ke=kt+Ge+20;V.fillStyle="#111827",V.font='600 26px system-ui, -apple-system, Roboto, "Segoe UI", "Helvetica Neue", Arial',V.fillText(Qe.name||"Unknown",Ke,ze+4);const ut=Qe.acceptanceStatus;let qn,zt,en;ut==="accepted"?(qn=" Accepted",zt="#dcfce7",en="#16a34a"):ut==="rejected"?(qn=" Rejected",zt="#fee2e2",en="#dc2626"):(qn=" Pending",zt="#fef3c7",en="#b45309"),V.font='500 22px system-ui, -apple-system, Roboto, "Segoe UI", "Helvetica Neue", Arial';const qt=V.measureText(qn).width+24,nt=44,Ut=Ze+Ce-it-qt-8,Fn=ze+10;V.fillStyle=zt,V.fillRect(Ut,Fn,qt,nt),V.fillStyle=en,V.fillText(qn,Ut+12,Fn+10);const Sn=Qe.roles||[];let _n=Ke;const an=ze+40;V.font='400 22px system-ui, -apple-system, Roboto, "Segoe UI", "Helvetica Neue", Arial';for(let tn=0;tn<Sn.length;tn++){const Wt=Sn[tn],ni=`${Qe.id}_${Wt}`,Nr=ae[ni]==="done",Un=Nr?` ${Wt}`:Wt,Sr=V.measureText(Un).width+20;V.fillStyle=Nr?"#d1fae5":"#f0f0f0",V.fillRect(_n,an,Sr,36),V.fillStyle=Nr?"#059669":"#5b6b7d",V.fillText(Un,_n+10,an+24-6),_n+=Sr+12}bt+=Ge+ft}}Ue.toBlob(Ge=>{if(!Ge)return;const ft=URL.createObjectURL(Ge),Et=document.createElement("a");Et.href=ft,Et.download=`task-${J||Date.now()}.png`,document.body.appendChild(Et),Et.click(),Et.remove(),setTimeout(()=>URL.revokeObjectURL(ft),3e3)},"image/png")}catch(J){console.warn("generateAndDownloadTaskImage error",J)}},j=ie=>{s(ue=>({...ue,[ie.target.name]:ie.target.value}))},q=ie=>{s(ue=>ue.assignedUsers.find(J=>J.userId===ie)?{...ue,assignedUsers:ue.assignedUsers.filter(J=>J.userId!==ie)}:{...ue,assignedUsers:[...ue.assignedUsers,{userId:ie,roles:["videography"]}]})},Q=(ie,ue)=>{s(fe=>{const J=fe.assignedUsers.map(le=>{if(le.userId!==ie)return le;const we=le.roles.includes(ue)?le.roles.filter(O=>O!==ue):[...le.roles,ue];return{...le,roles:we.length?we:[ue]}});return{...fe,assignedUsers:J}})},D=ie=>{s(ue=>({...ue,assignedItems:ue.assignedItems.includes(ie)?ue.assignedItems.filter(fe=>fe!==ie):[...ue.assignedItems,ie]}))},S=async ie=>{if(ie.preventDefault(),c(!0),g({type:"",text:""}),!i.date&&!i.deadline){c(!1),g({type:"error",text:"Please select a date or a deadline."});return}try{const ue=await fi(Lt(He,"works"),{title:i.title,description:i.description,date:i.date||null,deadline:i.deadline||null,dateType:o,priority:i.priority,assignedUsers:i.assignedUsers.map(O=>O.userId),assignedUserDetails:i.assignedUsers,assignedItems:i.assignedItems,createdAt:new Date().toISOString(),status:"pending"}),fe=i.assignedUsers.map(async({userId:O})=>{const Y=(await Xs(Zt(He,"users",O))).data();return{email:(Y==null?void 0:Y.email)||null,phone:(Y==null?void 0:Y.phoneNumber)||(Y==null?void 0:Y.phone)||null}}),J=await Promise.all(fe),le=J.map(O=>O.email).filter(Boolean),xe=J.map(O=>O.phone).filter(Boolean),we={lines:[`Title: ${i.title}`,...i.date?[`Date: ${i.date}`]:[],...i.deadline?[`Deadline: ${i.deadline}`]:[],`Description: ${i.description}`]};if(le.length>0){const O=we.lines,W=[`<p><b>Title:</b> ${i.title}</p>`,...i.date?[`<p><b>Date:</b> ${i.date}</p>`]:[],...i.deadline?[`<p><b>Deadline:</b> ${i.deadline}</p>`]:[],`<p><b>Description:</b> ${i.description}</p>`];await fi(Lt(He,"mail"),{to:le,message:{subject:`New work assigned: ${i.title}`,text:`You have been assigned to a new work:

`+O.join(`
`)+`

Kindly review and confirm the work by visiting the Videography Manager website.`,html:`<p>Hello,</p>
        <p>You have been assigned a new work. Please find the details below:</p> 
        ${W.join("")}
        <p>Kindly review and confirm the work by visiting the <a href="https://tmv.fotmv.online/">Videography Manager</a> Website</p> 
        <p>If you encounter any issues or need further assistance, feel free to contact me.</p> 
        <p>Thank you.</p> 
        
        <p>Best regards,</p>
        <p style="color:#A3A9AD">
          <strong>Mihiru Dahanayake</strong><br>
          <i>Acting Videography Department Head<br>FOT Media<br>Faculty Of Technology<br>Rajarata University of Sri Lanka<br>
          <a href="tel:+94703426554" style="color:#0066cc; text-decoration:none;">070 342 6554</a><br>
          <a href="mailto:mihirudahanayake@gmail.com" style="color:#0066cc; text-decoration:none;">mihiru.online@gmail.com</a></i><br>
        </p>`}})}if(xe.length>0){const O=`Hello!

You have been assigned to a new work:

`+we.lines.join(`
`)+`

Kindly review and confirm the work by visiting the Videography Manager website: https://tmv.fotmv.online/

If you encounter any issues, feel free to contact me.

Best regards,
Mihiru Dahanayake
Acting Videography Department Head
FOT Media, Rajarata University
070 342 6554`;await fi(Lt(He,"whatsapp"),{to:xe,message:O})}g({type:"success",text:"Work assigned successfully!"});try{const O={};t.forEach(Y=>{O[Y.id]=Y});const W={};n.forEach(Y=>{W[Y.id]=Y}),R({task:{id:ue.id,title:i.title,description:i.description,date:i.date||null,deadline:i.deadline||null,priority:i.priority,assignedUserDetails:i.assignedUsers,assignedItems:i.assignedItems,status:"pending",userAcceptance:{},roleCompletion:{}},usersMap:O,itemsMap:W})}catch(O){console.warn("failed to generate task image",O)}s({title:"",description:"",date:"",deadline:"",priority:"medium",assignedUsers:[],assignedItems:[]}),a("date")}catch(ue){g({type:"error",text:ue.message})}finally{c(!1)}},T=ie=>i.assignedUsers.some(ue=>ue.userId===ie),F=ie=>{var ue;return((ue=i.assignedUsers.find(fe=>fe.userId===ie))==null?void 0:ue.roles)||[]},A=y.trim().toLowerCase(),I=t.filter(ie=>{if(!A)return!0;const ue=(ie.name||"").toLowerCase(),fe=(ie.cardNumber||"").toLowerCase();return ue.includes(A)||fe.includes(A)}),L=_.trim().toLowerCase(),ne=n.filter(ie=>{if(!L)return!0;const ue=(ie.itemName||"").toLowerCase(),fe=(ie.itemNo||"").toLowerCase();return ue.includes(L)||fe.includes(L)});return u.jsxs("div",{className:"min-h-screen bg-gray-100",children:[u.jsx(In,{userType:"admin"}),u.jsx("main",{className:"container mx-auto px-4 py-6 sm:py-8",children:u.jsxs("div",{className:"max-w-3xl mx-auto bg-white rounded-lg shadow-md p-4 sm:p-8",children:[u.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-gray-800 mb-4 sm:mb-6",children:"Create and Assign Work"}),h.text&&u.jsx("div",{className:`mb-4 p-3 sm:p-4 rounded text-sm sm:text-base ${h.type==="success"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:h.text}),u.jsxs("form",{onSubmit:S,className:"space-y-4",children:[u.jsxs("div",{children:[u.jsxs("label",{className:"flex items-center gap-2 text-gray-700 font-semibold mb-2 text-sm sm:text-base",children:[u.jsx(gF,{}),u.jsx("span",{children:"Work Title"})]}),u.jsx("input",{type:"text",name:"title",value:i.title,onChange:j,required:!0,className:"w-full px-3 sm:px-4 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-green-500 text-sm sm:text-base"})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"flex items-center gap-2 text-gray-700 font-semibold mb-2 text-sm sm:text-base",children:[u.jsx(cF,{}),u.jsx("span",{children:"Description"})]}),u.jsx("textarea",{name:"description",value:i.description,onChange:j,required:!0,rows:"4",className:"w-full px-3 sm:px-4 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-green-500 text-sm sm:text-base"})]}),u.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsxs("label",{className:"flex items-center gap-2 text-gray-700 font-semibold mb-2 text-sm sm:text-base",children:[u.jsx(fr,{}),u.jsx("span",{children:"Date / Deadline"})]}),u.jsxs("div",{className:"flex items-center gap-3 mb-2 text-xs sm:text-sm",children:[u.jsxs("label",{className:"flex items-center gap-1",children:[u.jsx("input",{type:"radio",name:"dateType",value:"date",checked:o==="date",onChange:ie=>a(ie.target.value),className:"w-4 h-4"}),u.jsx("span",{children:"Date"})]}),u.jsxs("label",{className:"flex items-center gap-1",children:[u.jsx("input",{type:"radio",name:"dateType",value:"deadline",checked:o==="deadline",onChange:ie=>a(ie.target.value),className:"w-4 h-4"}),u.jsx("span",{children:"Deadline"})]})]}),o==="date"&&u.jsx("input",{type:"date",name:"date",value:i.date,onChange:j,className:"w-full px-3 sm:px-4 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-green-500 text-sm sm:text-base"}),o==="deadline"&&u.jsx("input",{type:"date",name:"deadline",value:i.deadline,onChange:j,className:"w-full px-3 sm:px-4 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-green-500 text-sm sm:text-base"}),u.jsx("p",{className:"mt-1 text-[11px] text-gray-500",children:"At least one of date or deadline is required, but both are optional individually."})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"flex items-center gap-2 text-gray-700 font-semibold mb-2 text-sm sm:text-base",children:[u.jsx(pF,{}),u.jsx("span",{children:"Priority"})]}),u.jsxs("select",{name:"priority",value:i.priority,onChange:j,className:"w-full px-3 sm:px-4 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-green-500 text-sm sm:text-base",children:[u.jsx("option",{value:"low",children:"Low"}),u.jsx("option",{value:"medium",children:"Medium"}),u.jsx("option",{value:"high",children:"High"}),u.jsx("option",{value:"urgent",children:"Urgent"})]})]})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"flex items-center gap-2 text-gray-700 font-semibold mb-2 text-sm sm:text-base",children:[u.jsx(c5,{}),u.jsx("span",{children:"Assign Team Members"})]}),u.jsxs("div",{className:"relative mb-2",children:[u.jsx(_c,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 text-xs"}),u.jsx("input",{type:"text",placeholder:"Search by name or card...",value:y,onChange:ie=>p(ie.target.value),className:"w-full pl-8 pr-3 py-2 border border-gray-300 rounded text-sm focus:outline-none focus:ring-2 focus:ring-green-500"})]}),u.jsx("div",{className:"border border-gray-300 rounded p-3 sm:p-4 max-h-60 overflow-y-auto",children:I.length===0?u.jsx("p",{className:"text-gray-500 text-sm sm:text-base",children:"No users found"}):I.map(ie=>{const ue=T(ie.id),fe=F(ie.id);return u.jsxs("div",{className:"mb-2 p-2 rounded hover:bg-gray-50",children:[u.jsxs("label",{className:"flex items-center cursor-pointer",children:[u.jsx("input",{type:"checkbox",checked:ue,onChange:()=>q(ie.id),className:"mr-3 w-4 h-4"}),u.jsx("div",{className:"flex-1",children:u.jsxs("p",{className:"text-gray-700 text-sm sm:text-base",children:[ie.name," ",u.jsxs("span",{className:"text-xs text-gray-500",children:["(",ie.cardNumber||"-",")"]})]})}),u.jsx("button",{type:"button",onClick:J=>{J.preventDefault(),C(`/users/${ie.id}`)},className:"ml-2 px-2 py-1 text-xs text-gray-500 hover:text-gray-700 transition-colors",title:"View user details",children:"View"})]}),ue&&u.jsx("div",{className:"mt-1 ml-7 flex flex-wrap gap-2 text-xs sm:text-sm",children:LF.map(J=>u.jsx("button",{type:"button",onClick:()=>Q(ie.id,J),className:`px-2 py-1 rounded border ${fe.includes(J)?"bg-green-600 text-white border-green-600":"bg-white text-gray-700 border-gray-300"}`,children:J},J))})]},ie.id)})}),u.jsxs("p",{className:"text-xs sm:text-sm text-gray-500 mt-2",children:["Selected: ",i.assignedUsers.length," member(s)"]})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"flex items-center gap-2 text-gray-700 font-semibold mb-2 text-sm sm:text-base",children:[u.jsx(yf,{}),u.jsx("span",{children:"Assign Inventory Items (Optional)"})]}),u.jsxs("div",{className:"relative mb-2",children:[u.jsx(_c,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 text-xs"}),u.jsx("input",{type:"text",placeholder:"Search by item name or number...",value:_,onChange:ie=>N(ie.target.value),className:"w-full pl-8 pr-3 py-2 border border-gray-300 rounded text-sm focus:outline-none focus:ring-2 focus:ring-green-500"})]}),u.jsx("div",{className:"border border-gray-300 rounded p-3 sm:p-4 max-h-60 overflow-y-auto",children:ne.length===0?u.jsx("p",{className:"text-gray-500 text-sm sm:text-base",children:"No items found"}):ne.map(ie=>u.jsxs("label",{className:"flex items-center mb-2 cursor-pointer hover:bg-gray-50 p-2 rounded",children:[u.jsx("input",{type:"checkbox",checked:i.assignedItems.includes(ie.id),onChange:()=>D(ie.id),className:"mr-3 w-4 h-4"}),u.jsxs("div",{className:"flex-1",children:[u.jsxs("p",{className:"text-gray-700 text-sm sm:text-base",children:[ie.itemName," ",u.jsxs("span",{className:"text-xs text-gray-500",children:["(",ie.itemNo,")"]})]}),ie.details&&u.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:ie.details})]})]},ie.id))}),u.jsxs("p",{className:"text-xs sm:text-sm text-gray-500 mt-2",children:["Selected: ",i.assignedItems.length," item(s)"]})]}),u.jsx("button",{type:"submit",disabled:l||i.assignedUsers.length===0,className:"w-full bg-green-600 text-white py-2 sm:py-3 px-4 rounded font-semibold hover:bg-green-700 transition disabled:opacity-50 text-sm sm:text-base",children:l?"Creating Work...":"Create and Assign Work"})]})]})})]})},jF=()=>{const[t,e]=se.useState([]),[n,r]=se.useState({}),[i,s]=se.useState({}),[o,a]=se.useState(!0),[l,c]=se.useState(""),[h,g]=se.useState(""),[y,p]=se.useState(""),[_,N]=se.useState("accepted"),C=xi();se.useEffect(()=>{x()},[]);const x=async()=>{a(!0);try{const I=await zn(Lt(He,"users")),L={};I.docs.forEach(J=>{L[J.id]=J.data()}),r(L);const ne=await zn(Lt(He,"inventory")),ie={};ne.docs.forEach(J=>{ie[J.id]=J.data()}),s(ie);const fe=(await zn(Lt(He,"works"))).docs.map(J=>({id:J.id,...J.data()}));e(fe)}catch(I){console.error("Error fetching data:",I)}finally{a(!1)}},k=async I=>{try{const L=Zt(He,"works",I);await Xr(L,{status:"complete"}),e(ne=>ne.map(ie=>ie.id===I?{...ie,status:"complete"}:ie))}catch(L){console.error("Failed to mark task complete:",L)}},R=l.trim().toLowerCase(),j=I=>{const L={pending:"bg-red-100 text-red-800",accepted:"bg-orange-100 text-orange-800",done:"bg-blue-100 text-blue-800",completed:"bg-green-100 text-green-800"};return L[I]||L.pending},q=I=>{if((I.status||"").toLowerCase()==="complete")return"completed";const L=I.assignedUserDetails||[],ne=I.roleCompletion||{},ie=I.userAcceptance||{};return!L.length||!L.every(J=>ie[J.userId]==="accepted")?"pending":L.every(J=>(J.roles||[]).every(le=>ne[`${J.userId}_${le}`]==="done"))?"done":"accepted"},Q=t.filter(I=>{if(h||y){if(!I.date)return!1;const we=new Date(I.date),O=new Date(we.getTime()-we.getTimezoneOffset()*6e4).toISOString().slice(0,10);if(h&&O<h||y&&O>y)return!1}const L=q(I);if(_!=="all"&&L!==_)return!1;if(!R)return!0;const ne=(I.title||"").toLowerCase(),ie=(I.assignedUsers||[]).map(we=>n[we]||{}),ue=ie.map(we=>(we.name||"").toLowerCase()),fe=ie.map(we=>(we.cardNumber||"").toLowerCase()),J=ne.includes(R),le=ue.some(we=>we.includes(R)),xe=fe.some(we=>we.includes(R));return J||le||xe}).sort((I,L)=>{const ne=I.date?new Date(I.date).getTime():0;return(L.date?new Date(L.date).getTime():0)-ne}),D=Q.filter(I=>(I.status||"incomplete")!=="complete"),S=Q.filter(I=>(I.status||"incomplete")==="complete");if(o)return u.jsxs("div",{className:"min-h-screen bg-gray-100",children:[u.jsx(In,{userType:"admin"}),u.jsxs("div",{className:"flex flex-col justify-center items-center h-64",children:[u.jsx(Ms,{className:"animate-spin text-4xl text-blue-600 mb-4"}),u.jsx("p",{className:"text-gray-600",children:"Loading tasks..."})]})]});const T=(I,L)=>{const ie=(I.userAcceptance||{})[L]||"pending";return ie==="accepted"?u.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-green-100 text-green-800 text-[11px] font-semibold",children:[u.jsx(la,{className:"text-[10px]"}),"Accepted"]}):ie==="rejected"?u.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-red-100 text-red-800 text-[11px] font-semibold",children:[u.jsx(Nl,{className:"text-[10px]"}),"Rejected"]}):u.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-yellow-100 text-yellow-800 text-[11px] font-semibold",children:[u.jsx(U2,{className:"text-[10px]"}),"Pending"]})},F=(I,L=!1)=>{var J;const ne=q(I),ie=I.assignedUserDetails||[],ue=I.roleCompletion||{},fe=I.assignedItems||[];return u.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 sm:p-6 hover:shadow-xl transition cursor-pointer",onClick:()=>C(`/tasks/${I.id}`),children:[u.jsxs("div",{className:"flex justify-between items-start mb-3",children:[u.jsxs("div",{className:"flex-1 pr-2",children:[u.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-gray-800",children:I.title||"Task"}),u.jsxs("p",{className:"mt-1 text-xs sm:text-sm text-gray-500 capitalize",children:["Priority: ",I.priority||"medium"]})]}),u.jsx("span",{className:`px-2 sm:px-3 py-1 rounded-full text-xs font-semibold ${j(ne)}`,children:ne})]}),I.description&&u.jsx("p",{className:"text-gray-600 mb-4 text-sm sm:text-base line-clamp-3",children:I.description}),(I.date||I.deadline)&&u.jsx("div",{className:"mb-3",children:u.jsxs("div",{className:"flex flex-col gap-1 text-xs sm:text-sm text-gray-500",children:[I.date&&u.jsxs("p",{className:"flex items-center gap-2",children:[u.jsx(fr,{}),u.jsxs("span",{children:["Date:"," ",new Date(I.date).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"})]})]}),I.deadline&&u.jsxs("p",{className:"flex items-center gap-2",children:[u.jsx(fr,{}),u.jsxs("span",{children:["Deadline:"," ",new Date(I.deadline).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"})]})]})]})}),u.jsxs("div",{className:"mb-3",children:[u.jsx("div",{className:"flex items-center justify-between mb-2",children:u.jsxs("div",{className:"flex items-center gap-2 text-xs sm:text-sm font-semibold text-gray-700",children:[u.jsx(c5,{}),u.jsx("span",{children:"Assigned to:"})]})}),u.jsxs("div",{className:"space-y-2",children:[ie.map(le=>{const xe=le.userId,we=le.roles||[],O=n[xe]||{},W=O.name||"Unknown",Y=O.photoURL||O.avatarUrl||null;return u.jsxs("div",{onClick:K=>{K.stopPropagation(),C(`/users/${xe}`)},className:"bg-gray-50 px-2 py-1 rounded text-xs sm:text-sm cursor-pointer hover:bg-blue-50 transition",children:[u.jsxs("div",{className:"flex items-center justify-between gap-2",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[Y?u.jsx("img",{src:Y,alt:W,className:"w-7 h-7 rounded-full object-cover border border-white shadow-sm"}):u.jsx("div",{className:"w-7 h-7 rounded-full bg-blue-500 flex items-center justify-center text-xs font-bold text-white",children:W.charAt(0).toUpperCase()}),u.jsx("p",{className:"font-semibold text-gray-800",children:W})]}),T(I,xe)]}),u.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:we.map(K=>{const re=`${xe}_${K}`,ae=ue[re]==="done";return u.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 rounded text-xs ${ae?"bg-green-100 text-green-800":"bg-gray-200 text-gray-700"}`,children:[ae&&u.jsx(la,{className:"text-xs"}),K]},K)})})]},xe)}),ie.length===0&&((J=I.assignedUsers)==null?void 0:J.map(le=>{const xe=n[le]||{},we=xe.name||"Unknown",O=xe.photoURL||xe.avatarUrl||null;return u.jsxs("div",{onClick:W=>{W.stopPropagation(),C(`/users/${le}`)},className:"bg-gray-50 px-2 py-1 rounded text-xs sm:text-sm flex items-center justify-between cursor-pointer hover:bg-blue-50 transition",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[O?u.jsx("img",{src:O,alt:we,className:"w-7 h-7 rounded-full object-cover border border-white shadow-sm"}):u.jsx("div",{className:"w-7 h-7 rounded-full bg-blue-500 flex items-center justify-center text-xs font-bold text-white",children:we.charAt(0).toUpperCase()}),u.jsx("span",{className:"text-gray-700",children:we})]}),T(I,le)]},le)}))]})]}),fe.length>0&&u.jsxs("div",{className:"mb-3",children:[u.jsxs("div",{className:"flex items-center gap-2 text-xs sm:text-sm font-semibold text-gray-700 mb-2",children:[u.jsx(yf,{}),u.jsx("span",{children:"Items:"})]}),u.jsx("div",{className:"flex flex-wrap gap-2",children:fe.map(le=>{const xe=i[le];return u.jsx("span",{className:"bg-blue-50 px-2 py-1 rounded text-xs sm:text-sm text-blue-800",children:xe?`${xe.itemName} (${xe.itemNo})`:"Unknown item"},le)})})]}),!L&&u.jsxs("button",{type:"button",onClick:le=>{le.stopPropagation(),k(I.id)},className:"mt-2 inline-flex items-center gap-2 px-3 py-1.5 rounded bg-green-600 text-white text-xs sm:text-sm hover:bg-green-700",children:[u.jsx(la,{}),"Mark as complete"]}),L&&u.jsx("p",{className:"mt-2 text-xs sm:text-sm text-green-700 font-semibold",children:"Completed"})]},I.id)},A=D.length>0||S.length>0;return u.jsxs("div",{className:"min-h-screen bg-gray-100",children:[u.jsx(In,{userType:"admin"}),u.jsxs("main",{className:"container mx-auto px-4 py-6 sm:py-8",children:[u.jsxs("div",{className:"flex flex-col gap-3 mb-4 sm:mb-6",children:[u.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-gray-800",children:"All Tasks"}),u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3",children:[u.jsxs("div",{className:"relative flex-1 min-w-0",children:[u.jsx(_c,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 text-sm"}),u.jsx("input",{type:"text",placeholder:"Search title, user name, or card...",value:l,onChange:I=>c(I.target.value),className:"w-full pl-9 pr-3 py-2 border rounded text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-2 sm:flex sm:gap-2 w-full sm:w-auto",children:[u.jsx("input",{type:"date",value:h,onChange:I=>g(I.target.value),className:"w-full px-2 py-2 border rounded text-xs sm:text-sm focus:outline-none focus:ring-2 focus:ring-blue-500","aria-label":"Start date"}),u.jsx("input",{type:"date",value:y,onChange:I=>p(I.target.value),className:"w-full px-2 py-2 border rounded text-xs sm:text-sm focus:outline-none focus:ring-2 focus:ring-blue-500","aria-label":"End date"}),u.jsxs("select",{value:_,onChange:I=>N(I.target.value),className:"w-full px-2 py-2 border rounded text-xs sm:text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[u.jsx("option",{value:"accepted",children:"Accepted"}),u.jsx("option",{value:"pending",children:"Pending"}),u.jsx("option",{value:"done",children:"Done"}),u.jsx("option",{value:"completed",children:"Completed"}),u.jsx("option",{value:"all",children:"All status"})]})]})]})]}),A?u.jsxs(u.Fragment,{children:[D.length>0&&u.jsxs("section",{className:"mb-6",children:[u.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-gray-800 mb-3",children:"Incomplete / waiting for admin"}),u.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:D.map(I=>F(I,!1))})]}),S.length>0&&u.jsxs("section",{children:[u.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-gray-800 mb-3",children:"Completed tasks"}),u.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:S.map(I=>F(I,!0))})]})]}):u.jsx("div",{className:"bg-white rounded-lg shadow-md p-6 sm:p-8 text-center",children:u.jsx("p",{className:"text-gray-600 text-sm sm:text-base",children:"No tasks match your filters."})})]})]})},DF=AA(),OF=()=>{const[t,e]=se.useState(null),[n,r]=se.useState(null),[i,s]=se.useState("loading"),[o,a]=se.useState(!1),[l,c]=se.useState(!1),[h,g]=se.useState(!1),[y,p]=se.useState(!1),[_,N]=se.useState(""),[C,x]=se.useState(""),[k,R]=se.useState(""),[j,q]=se.useState(""),[Q,D]=se.useState({newPassword:"",confirmPassword:""}),[S,T]=se.useState(!1),[F,A]=se.useState(""),I=xi();se.useEffect(()=>{const Y=Lc(Ii,async K=>{if(!K){s("no-auth"),e(null);return}try{const re=await Xs(Zt(He,"users",K.uid));if(re.exists()){const ae={id:K.uid,...re.data(),email:K.email||""};e(ae),r(ae)}s("ready")}catch(re){console.error(re),s("error")}});return()=>Y()},[]);const L=async()=>{await TN(Ii),I("/")},ne=Y=>{if(!o)return;const{name:K,value:re}=Y.target;e(ae=>({...ae,[K]:re}))},ie=()=>{N(""),x(""),A(""),r(t),a(!0)},ue=()=>{N(""),x(""),A(""),e(n),a(!1)},fe=async Y=>{if(Y.preventDefault(),!!(t!=null&&t.id)){g(!0),N(""),x("");try{const K=Zt(He,"users",t.id),{id:re,userType:ae,createdAt:ve,email:te,...de}=t;await Xr(K,de),x("Profile updated successfully."),a(!1),r(t)}catch(K){console.error(K),N("Failed to update profile.")}finally{g(!1)}}},J=()=>{R(""),q(""),D({newPassword:"",confirmPassword:""}),c(!0)},le=()=>{R(""),q(""),D({newPassword:"",confirmPassword:""}),c(!1)},xe=async Y=>{if(Y.preventDefault(),R(""),q(""),Q.newPassword.length<6){R("New password must be at least 6 characters.");return}if(Q.newPassword!==Q.confirmPassword){R("New password and confirm password do not match.");return}const K=Ii.currentUser;if(!K){R("You are not logged in.");return}p(!0);try{await Z7(K,Q.newPassword),q("Password updated successfully."),c(!1),D({newPassword:"",confirmPassword:""})}catch(re){console.error(re),R(re.message||"Failed to update password.")}finally{p(!1)}},we=async Y=>{var ae;const K=(ae=Y.target.files)==null?void 0:ae[0];if(!K)return;const re=Ii.currentUser;if(!re){A("You are not logged in.");return}A(""),T(!0);try{const ve=`memberProfileImage/${re.uid}/${Date.now()}-${K.name}`,te=NO(DF,ve),de=await bO(te,K),ge=await _O(de.ref),Se=Zt(He,"users",re.uid);await Xr(Se,{photoURL:ge}),e(Te=>Te&&{...Te,photoURL:ge}),x("Profile picture updated.")}catch(ve){console.error(ve),A("Failed to upload profile picture.")}finally{T(!1),Y.target.value=""}},O=(t==null?void 0:t.userType)==="admin"?"admin":"user",W="w-full px-3 py-2 border rounded text-sm focus:outline-none focus:ring-2 focus:ring-blue-500";return u.jsxs("div",{className:"min-h-screen bg-gray-100",children:[u.jsx(In,{userType:O}),u.jsxs("main",{className:"container mx-auto px-4 py-6 sm:py-8 max-w-2xl",children:[u.jsxs("div",{className:"flex items-center justify-between mb-6",children:[u.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-800",children:"Profile"}),u.jsx("button",{onClick:L,className:"text-xs sm:text-sm px-3 py-1 rounded bg-red-600 text-white hover:bg-red-700",children:"Logout"})]}),i==="loading"&&u.jsx("p",{className:"text-gray-600 text-sm sm:text-base",children:"Loading profile..."}),i==="no-auth"&&u.jsx("p",{className:"text-gray-600 text-sm sm:text-base",children:"You are not logged in."}),i==="error"&&u.jsx("p",{className:"text-red-600 text-sm sm:text-base",children:"Failed to load profile information."}),i==="ready"&&t&&u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 sm:p-6 flex items-center gap-4 mb-6",children:[u.jsx("div",{className:"flex-shrink-0",children:t.photoURL?u.jsx("img",{src:t.photoURL,alt:t.name||"Profile",style:{width:80,height:80,borderRadius:"50%",objectFit:"cover",border:"2px solid #e5e7eb",display:"block",backgroundColor:"#f3f4f6"}}):u.jsx("div",{className:"w-20 h-20 rounded-full bg-gray-300 flex items-center justify-center text-xl font-semibold text-white",children:(t.name||"U").charAt(0).toUpperCase()})}),u.jsxs("div",{className:"flex-1",children:[u.jsx("p",{className:"text-lg font-semibold text-gray-800",children:t.name||"Unnamed user"}),u.jsx("p",{className:"text-sm text-gray-600",children:t.email}),u.jsx("p",{className:"text-xs text-gray-500 mt-1 capitalize",children:t.userType||"user"}),o&&u.jsxs("div",{className:"mt-3",children:[u.jsx("label",{className:"block text-xs font-semibold text-gray-700 mb-1",children:"Change profile picture"}),u.jsx("input",{type:"file",accept:"image/*",onChange:we,className:`text-xs text-stone-500\r
                        file:mr-3 file:py-1 file:px-3 file:border file:border-gray-300\r
                        file:text-xs file:font-medium\r
                        file:bg-stone-50 file:text-stone-700\r
                        hover:file:cursor-pointer hover:file:bg-blue-50 hover:file:text-blue-700`}),S&&u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Uploading image..."}),F&&u.jsx("p",{className:"text-xs text-red-600 mt-1",children:F})]})]})]}),u.jsxs("form",{onSubmit:fe,className:"bg-white rounded-lg shadow-md p-4 sm:p-6 space-y-3 mb-6",children:[u.jsxs("div",{className:"flex justify-between items-center mb-2",children:[u.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"Profile details"}),o?u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{type:"submit",disabled:h,className:"text-sm px-3 py-1 rounded bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-50",children:h?"Saving...":"Save"}),u.jsx("button",{type:"button",onClick:ue,className:"text-sm px-3 py-1 rounded bg-gray-300 text-gray-800 hover:bg-gray-400",children:"Cancel"})]}):u.jsx("button",{type:"button",onClick:ie,className:"text-sm px-3 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",children:"Edit"})]}),_&&u.jsx("div",{className:"p-2 rounded bg-red-100 text-red-700 text-sm",children:_}),C&&u.jsx("div",{className:"p-2 rounded bg-green-100 text-green-700 text-sm",children:C}),u.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Name"}),u.jsx("input",{type:"text",name:"name",value:t.name||"",onChange:ne,className:W,disabled:!o})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Email"}),u.jsx("input",{type:"email",name:"email",value:t.email||"",onChange:ne,className:W,disabled:!0})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Phone"}),u.jsx("input",{type:"tel",name:"phoneNo",value:t.phoneNo||"",onChange:ne,className:W,disabled:!o})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Batch"}),u.jsxs("select",{name:"batch",value:t.batch||"20/21",onChange:ne,className:W,disabled:!o,children:[u.jsx("option",{value:"20/21",children:"20/21"}),u.jsx("option",{value:"21/22",children:"21/22"}),u.jsx("option",{value:"22/23",children:"22/23"}),u.jsx("option",{value:"23/24",children:"23/24"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Study department"}),u.jsxs("select",{name:"studyDepartment",value:t.studyDepartment||"ITT",onChange:ne,className:W,disabled:!o,children:[u.jsx("option",{value:"ITT",children:"ITT"}),u.jsx("option",{value:"EET",children:"EET"}),u.jsx("option",{value:"MTT",children:"MTT"}),u.jsx("option",{value:"BPT",children:"BPT"}),u.jsx("option",{value:"Food",children:"Food"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Gender"}),u.jsxs("select",{name:"gender",value:t.gender||"male",onChange:ne,className:W,disabled:!o,children:[u.jsx("option",{value:"male",children:"Male"}),u.jsx("option",{value:"female",children:"Female"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Registration number"}),u.jsx("input",{type:"text",name:"registrationNumber",value:t.registrationNumber||"",onChange:ne,className:W,disabled:!o})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Card"}),u.jsx("input",{type:"text",name:"cardNumber",value:t.cardNumber||"",onChange:ne,className:W,disabled:!o})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Birthday"}),u.jsx("input",{type:"date",name:"birthday",value:t.birthday||"",onChange:ne,className:W,disabled:!o})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Work department"}),u.jsxs("select",{name:"department",value:t.department||"videography",onChange:ne,className:W,disabled:!o,children:[u.jsx("option",{value:"videography",children:"Videography"}),u.jsx("option",{value:"photography",children:"Photography"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"First priority (work)"}),u.jsxs("select",{name:"firstPriority",value:t.firstPriority||"videography",onChange:ne,className:W,disabled:!o,children:[u.jsx("option",{value:"videography",children:"Videography"}),u.jsx("option",{value:"photography",children:"Photography"})]})]})]})]}),u.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 sm:p-6 space-y-3",children:[u.jsxs("div",{className:"flex justify-between items-center mb-1",children:[u.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"Change password"}),l?u.jsx("button",{type:"button",onClick:le,className:"text-sm px-3 py-1 rounded bg-gray-300 text-gray-800 hover:bg-gray-400",children:"Cancel"}):u.jsx("button",{type:"button",onClick:J,className:"text-sm px-3 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",children:"Change"})]}),k&&u.jsx("div",{className:"p-2 rounded bg-red-100 text-red-700 text-sm",children:k}),j&&u.jsx("div",{className:"p-2 rounded bg-green-100 text-green-700 text-sm",children:j}),l&&u.jsxs("form",{onSubmit:xe,className:"space-y-3 mt-2",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"New password"}),u.jsx("input",{type:"password",name:"newPassword",value:Q.newPassword,onChange:Y=>D(K=>({...K,newPassword:Y.target.value})),className:W,minLength:6,required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Confirm new password"}),u.jsx("input",{type:"password",name:"confirmPassword",value:Q.confirmPassword,onChange:Y=>D(K=>({...K,confirmPassword:Y.target.value})),className:W,minLength:6,required:!0})]}),u.jsx("button",{type:"submit",disabled:y,className:"w-full bg-blue-600 text-white py-2 rounded font-semibold text-sm hover:bg-blue-700 disabled:opacity-50",children:y?"Updating...":"Update password"})]})]})]})]})]})},MF=()=>{const[t,e]=se.useState([]),[n,r]=se.useState(!0),[i,s]=se.useState(""),[o,a]=se.useState("all"),[l,c]=se.useState("all"),h=xi();se.useEffect(()=>{(async()=>{try{const N=(await zn(Lt(He,"users"))).docs.map(C=>({id:C.id,...C.data()}));e(N)}catch(_){console.error("Error loading users:",_)}finally{r(!1)}})()},[]);const g=i.trim().toLowerCase(),y=t.filter(p=>{if(o!=="all"&&(p.batch||"")!==o||l!=="all"&&(p.studyDepartment||"")!==l)return!1;if(!g)return!0;const _=(p.name||"").toLowerCase(),N=(p.cardNumber||"").toLowerCase();return _.includes(g)||N.includes(g)});return u.jsxs("div",{className:"min-h-screen bg-gray-100",children:[u.jsx(In,{userType:"admin"}),u.jsxs("main",{className:"container mx-auto px-4 py-6 sm:py-8 max-w-4xl",children:[u.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-800 mb-4",children:"Manage users"}),u.jsxs("div",{className:"mb-4 flex flex-col sm:flex-row gap-3 sm:items-center",children:[u.jsxs("div",{className:"flex-1 relative",children:[u.jsx(_c,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 text-sm"}),u.jsx("input",{type:"text",placeholder:"Search by name or card...",value:i,onChange:p=>s(p.target.value),className:"w-full pl-9 pr-3 py-2 border rounded text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),u.jsx("div",{className:"w-full sm:w-40",children:u.jsxs("select",{value:o,onChange:p=>a(p.target.value),className:"w-full px-3 py-2 border rounded text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[u.jsx("option",{value:"all",children:"All batches"}),u.jsx("option",{value:"20/21",children:"20/21"}),u.jsx("option",{value:"21/22",children:"21/22"}),u.jsx("option",{value:"22/23",children:"22/23"}),u.jsx("option",{value:"23/24",children:"23/24"})]})}),u.jsx("div",{className:"w-full sm:w-40",children:u.jsxs("select",{value:l,onChange:p=>c(p.target.value),className:"w-full px-3 py-2 border rounded text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[u.jsx("option",{value:"all",children:"All departments"}),u.jsx("option",{value:"ITT",children:"ITT"}),u.jsx("option",{value:"EET",children:"EET"}),u.jsx("option",{value:"MTT",children:"MTT"}),u.jsx("option",{value:"BPT",children:"BPT"}),u.jsx("option",{value:"Food",children:"Food"})]})})]}),n?u.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[u.jsx(Ms,{className:"animate-spin"}),u.jsx("span",{children:"Loading users..."})]}):y.length===0?u.jsx("p",{className:"text-gray-600 text-sm sm:text-base",children:"No users match your search."}):u.jsx("div",{className:"bg-white rounded-lg shadow-md divide-y",children:y.map(p=>u.jsxs("button",{onClick:()=>h(`/users/${p.id}`),className:"w-full text-left px-4 py-3 flex items-center justify-between hover:bg-gray-50",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[p.photoURL?u.jsx("img",{src:p.photoURL,alt:p.name||"User",className:"w-10 h-10 rounded-full object-cover border border-gray-200 bg-gray-100"}):u.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center text-blue-600",children:u.jsx(nE,{})}),u.jsxs("div",{children:[u.jsx("p",{className:"font-semibold text-gray-800 text-sm sm:text-base",children:p.name||"No name"}),u.jsxs("p",{className:"flex items-center gap-1 text-xs sm:text-sm text-gray-600",children:[u.jsx(fF,{})," ",p.email]}),u.jsxs("p",{className:"text-xs text-gray-500",children:["Card: ",p.cardNumber||"-","  Batch: ",p.batch||"-","  Dept: ",p.studyDepartment||"-"]})]})]}),u.jsx("span",{className:"text-xs sm:text-sm text-gray-500",children:p.userType||"user"})]},p.id))})]})]})},FF=()=>{const{userId:t}=rg(),e=xi(),[n,r]=se.useState(null),[i,s]=se.useState([]),[o,a]=se.useState(!0);se.useEffect(()=>{(async()=>{try{const g=await Xs(Zt(He,"users",t));g.exists()&&r({id:t,...g.data()});const _=(await zn(Lt(He,"works"))).docs.map(N=>({id:N.id,...N.data()})).filter(N=>N.assignedUsers?Array.isArray(N.assignedUsers)?N.assignedUsers.includes(t):N.assignedUsers===t:!1);_.sort((N,C)=>{const x=N.date?new Date(N.date).getTime():0;return(C.date?new Date(C.date).getTime():0)-x}),s(_)}catch(g){console.error("Error loading user details:",g)}finally{a(!1)}})()},[t]);const l=h=>{const y=(h.assignedUserDetails||[]).find(p=>p.userId===t);return(y==null?void 0:y.roles)||[]},c=(h,g)=>{const y=`${t}_${g}`;return(h.roleCompletion||{})[y]==="done"};return u.jsxs("div",{className:"min-h-screen bg-gray-100",children:[u.jsx(In,{userType:"admin"}),u.jsxs("main",{className:"container mx-auto px-4 py-6 sm:py-8 max-w-4xl",children:[o&&u.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[u.jsx(Ms,{className:"animate-spin"}),u.jsx("span",{children:"Loading user..."})]}),!o&&!n&&u.jsx("p",{className:"text-gray-600 text-sm sm:text-base",children:"User not found."}),!o&&n&&u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[n.photoURL?u.jsx("img",{src:n.photoURL,alt:n.name||"User",className:"w-16 h-16 sm:w-20 sm:h-20 rounded-full object-cover border border-gray-200 bg-gray-100"}):u.jsx("div",{className:"w-16 h-16 sm:w-20 sm:h-20 rounded-full bg-gray-300 flex items-center justify-center text-2xl font-semibold text-white",children:(n.name||"U").charAt(0).toUpperCase()}),u.jsxs("div",{children:[u.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-800",children:n.name||"User details"}),u.jsx("p",{className:"text-sm sm:text-base text-gray-600",children:n.email})]})]}),u.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 sm:p-6 mb-6 text-sm sm:text-base space-y-2",children:[u.jsxs("p",{children:[u.jsx("span",{className:"font-semibold",children:"Phone:"})," ",n.phoneNo||"-"]}),u.jsxs("p",{children:[u.jsx("span",{className:"font-semibold",children:"Batch:"})," ",n.batch||"-"]}),u.jsxs("p",{children:[u.jsx("span",{className:"font-semibold",children:"Study department:"})," ",n.studyDepartment||"-"]}),u.jsxs("p",{children:[u.jsx("span",{className:"font-semibold",children:"Gender:"})," ",n.gender||"-"]}),u.jsxs("p",{children:[u.jsx("span",{className:"font-semibold",children:"Registration no:"})," ",n.registrationNumber||"-"]}),u.jsxs("p",{children:[u.jsx("span",{className:"font-semibold",children:"Card:"})," ",n.cardNumber||"-"]}),u.jsxs("p",{children:[u.jsx("span",{className:"font-semibold",children:"Work departments:"})," ",Array.isArray(n.departments)?n.departments.join(", "):n.department||"-"]}),u.jsxs("p",{children:[u.jsx("span",{className:"font-semibold",children:"First priority:"})," ",n.firstPriority||"-"]}),u.jsxs("p",{children:[u.jsx("span",{className:"font-semibold",children:"User type:"})," ",n.userType||"user"]})]}),u.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-3",children:"Task history"}),i.length===0?u.jsx("p",{className:"text-gray-600 text-sm sm:text-base",children:"No tasks for this user."}):u.jsx("div",{className:"space-y-3",children:i.map(h=>{const g=l(h),y=h.status||"incomplete";return u.jsxs("div",{onClick:()=>e(`/tasks/${h.id}`),className:"bg-white rounded-lg shadow p-3 sm:p-4 text-sm sm:text-base cursor-pointer hover:shadow-md hover:bg-gray-50 transition",children:[u.jsxs("div",{className:"flex justify-between items-start mb-2",children:[u.jsxs("div",{className:"flex-1",children:[u.jsx("h3",{className:"font-semibold text-gray-800",children:h.title||"Untitled task"}),h.date&&u.jsxs("span",{className:"flex items-center gap-1 text-xs text-gray-500 mt-1",children:[u.jsx(fr,{})," ",new Date(h.date).toLocaleDateString()]})]}),u.jsx("span",{className:`px-2 py-1 rounded text-xs font-semibold capitalize ${y==="complete"?"bg-green-100 text-green-800":y==="done"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:y})]}),h.description&&u.jsx("p",{className:"text-gray-700 text-sm mb-2",children:h.description}),g.length>0&&u.jsxs("div",{className:"mt-2",children:[u.jsx("p",{className:"text-xs font-semibold text-gray-700 mb-1",children:"Assigned work types:"}),u.jsx("div",{className:"flex flex-wrap gap-1",children:g.map(p=>{const _=c(h,p);return u.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 rounded text-xs ${_?"bg-green-100 text-green-800":"bg-gray-100 text-gray-700"}`,children:[_&&u.jsx(la,{className:"text-xs"}),p]},p)})})]})]},h.id)})})]})]})]})},UF=()=>{const[t,e]=se.useState(null),[n,r]=se.useState([]),[i,s]=se.useState([]),[o,a]=se.useState(!0);se.useEffect(()=>{const c=Lc(Ii,h=>{e(h||null)});return()=>c()},[]),se.useEffect(()=>{if(!t)return;(async()=>{a(!0);try{const y=(await zn(Lt(He,"works"))).docs.map(N=>({id:N.id,...N.data()})).filter(N=>N.status==="complete"&&Array.isArray(N.assignedUsers)&&N.assignedUsers.includes(t.uid));y.sort((N,C)=>{const x=N.date?new Date(N.date).getTime():0;return(C.date?new Date(C.date).getTime():0)-x}),r(y);const _=(await zn(vc(Lt(He,"rejectedWorks"),zd("userId","==",t.uid)))).docs.map(N=>({id:N.id,...N.data()}));_.sort((N,C)=>{const x=N.approvedAt?new Date(N.approvedAt).getTime():0;return(C.approvedAt?new Date(C.approvedAt).getTime():0)-x}),s(_)}catch(h){console.error("Error loading task history:",h)}finally{a(!1)}})()},[t]);const l=c=>{if(!t)return[];const g=(c.assignedUserDetails||[]).find(y=>y.userId===t.uid);return(g==null?void 0:g.roles)||[]};return u.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50",children:[u.jsx(In,{userType:"user"}),u.jsxs("main",{className:"container mx-auto px-4 py-8 max-w-4xl",children:[u.jsxs("div",{className:"mb-8",children:[u.jsx("h1",{className:"text-3xl sm:text-4xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-purple-600 mb-2",children:"Task History"}),u.jsx("p",{className:"text-gray-600 text-sm sm:text-base",children:"View all your completed and rejected tasks"})]}),o?u.jsxs("div",{className:"flex flex-col items-center justify-center py-20",children:[u.jsx(Ms,{className:"animate-spin text-5xl text-blue-600 mb-4"}),u.jsx("p",{className:"text-gray-600",children:"Loading history..."})]}):n.length===0&&i.length===0?u.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-12 text-center border border-gray-100",children:[u.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-blue-100 to-purple-100 rounded-full flex items-center justify-center mx-auto mb-4",children:u.jsx(fr,{className:"text-4xl text-blue-600"})}),u.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:"No History"}),u.jsx("p",{className:"text-gray-600",children:"You have no completed or rejected tasks yet."})]}):u.jsxs(u.Fragment,{children:[n.length>0&&u.jsxs("section",{className:"mb-8",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[u.jsx("div",{className:"w-1 h-6 bg-gradient-to-b from-green-500 to-emerald-600 rounded-full"}),u.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-gray-800",children:"Completed Tasks"}),u.jsx("span",{className:"bg-gradient-to-r from-green-500 to-emerald-600 text-white text-xs font-bold px-3 py-1 rounded-full",children:n.length})]}),u.jsx("div",{className:"space-y-4",children:n.map(c=>{const h=l(c);return u.jsxs("div",{className:"bg-white rounded-2xl shadow-md p-5 border border-green-100",children:[u.jsxs("div",{className:"flex items-start justify-between mb-3",children:[u.jsxs("div",{className:"flex-1",children:[u.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-1",children:c.title||"Task"}),c.date&&u.jsxs("p",{className:"flex items-center gap-2 text-xs text-gray-500",children:[u.jsx(fr,{}),new Date(c.date).toLocaleDateString()]})]}),u.jsxs("div",{className:"flex items-center gap-2 text-green-600",children:[u.jsx(la,{className:"text-2xl"}),u.jsx("span",{className:"text-xs font-semibold",children:"Completed"})]})]}),c.description&&u.jsx("p",{className:"text-gray-700 text-sm mb-3",children:c.description}),u.jsx("div",{className:"flex flex-wrap gap-2",children:h.map(g=>u.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-semibold bg-green-100 text-green-800",children:g},g))})]},c.id)})})]}),i.length>0&&u.jsxs("section",{children:[u.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[u.jsx("div",{className:"w-1 h-6 bg-gradient-to-b from-red-500 to-rose-600 rounded-full"}),u.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-gray-800",children:"Rejected Tasks"}),u.jsx("span",{className:"bg-gradient-to-r from-red-500 to-rose-600 text-white text-xs font-bold px-3 py-1 rounded-full",children:i.length})]}),u.jsx("div",{className:"space-y-4",children:i.map(c=>u.jsxs("div",{className:"bg-white rounded-2xl shadow-md p-5 border border-red-100",children:[u.jsxs("div",{className:"flex items-start justify-between mb-3",children:[u.jsxs("div",{className:"flex-1",children:[u.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-1",children:c.title||"Task"}),c.date&&u.jsxs("p",{className:"flex items-center gap-2 text-xs text-gray-500",children:[u.jsx(fr,{}),new Date(c.date).toLocaleDateString()]})]}),u.jsxs("div",{className:"flex items-center gap-2 text-red-600",children:[u.jsx(Nl,{className:"text-2xl"}),u.jsx("span",{className:"text-xs font-semibold",children:"You Rejected"})]})]}),c.description&&u.jsx("p",{className:"text-gray-700 text-sm mb-3",children:c.description}),u.jsxs("div",{className:"bg-red-50 rounded-xl p-4 border border-red-100",children:[u.jsxs("div",{className:"flex items-start gap-2 mb-2",children:[u.jsx(mF,{className:"text-red-600 mt-0.5"}),u.jsxs("div",{className:"flex-1",children:[u.jsx("p",{className:"text-xs font-semibold text-red-800 mb-1",children:"Rejection Reason:"}),u.jsx("p",{className:"text-sm text-gray-700",children:c.rejectionReason||"-"})]})]}),u.jsxs("div",{className:"text-xs text-gray-500 mt-2 flex flex-col gap-1",children:[u.jsxs("p",{children:["Rejected: ",new Date(c.rejectedAt).toLocaleString()]}),u.jsxs("p",{children:["Approved: ",new Date(c.approvedAt).toLocaleString()]})]})]})]},c.id))})]})]})]})]})},VF=["videography","editing"],BF=()=>{const{taskId:t}=rg(),e=xi(),[n,r]=se.useState(null),[i,s]=se.useState([]),[o,a]=se.useState([]),[l,c]=se.useState([]),[h,g]=se.useState([]),[y,p]=se.useState(!0),[_,N]=se.useState(!1),[C,x]=se.useState(!1),[k,R]=se.useState(!1),[j,q]=se.useState(""),[Q,D]=se.useState(""),[S,T]=se.useState(""),[F,A]=se.useState("");se.useEffect(()=>{(async()=>{p(!0);try{const ae=(await zn(Lt(He,"users"))).docs.map(ge=>({id:ge.id,...ge.data()}));ae.sort((ge,Se)=>{const Te=(ge.name||"").toLowerCase(),Ue=(Se.name||"").toLowerCase();return Te.localeCompare(Ue)}),s(ae);const te=(await zn(Lt(He,"inventory"))).docs.map(ge=>({id:ge.id,...ge.data()}));te.sort((ge,Se)=>{const Te=(ge.itemName||"").toLowerCase(),Ue=(Se.itemName||"").toLowerCase();return Te.localeCompare(Ue)}),a(te);const de=await Xs(Zt(He,"works",t));if(de.exists()){const ge={id:de.id,...de.data()};r(ge),c(ge.assignedUserDetails||[]),g(ge.assignedItems||[]),(async()=>{try{const Se=ge.assignedItems||[];if(!Se.length||!("caches"in window))return;const Te=await caches.open("tmv-task-assets-v1"),Ue=Se.map(V=>o.find(De=>De.id===V)).filter(Boolean).map(V=>V.imageUrl||V.photoURL||"").filter(V=>typeof V=="string"&&V.length);await Promise.all(Ue.map(async V=>{try{const De=await fetch(V,{mode:"no-cors"});await Te.put(V,De.clone())}catch{}}))}catch(Se){console.warn("prefetch admin item images failed",Se)}})()}else q("Task not found.")}catch(re){console.error(re),q("Failed to load task.")}finally{p(!1)}})()},[t]);const I=async({task:K,usersMap:re={},itemsMap:ae={}})=>{try{const{id:ve,title:te,description:de,date:ge,deadline:Se,assignedUserDetails:Te=[],assignedItems:Ue=[],userAcceptance:V={},roleCompletion:De={}}=K,Ze=()=>{if((K.status||"").toLowerCase()==="complete")return"completed";const ze=K.assignedUserDetails||[],Ke=K.roleCompletion||{},ut=K.userAcceptance||{};return!ze.length||!ze.every(en=>ut[en.userId]==="accepted")?"pending":ze.every(en=>(en.roles||[]).every(qt=>Ke[`${en.userId}_${qt}`]==="done"))?"done":"accepted"},Ve=ze=>{const Ke={pending:{bg:"#fef3c7",text:"#b45309"},accepted:{bg:"#fed7aa",text:"#b45309"},done:{bg:"#bfdbfe",text:"#1e40af"},completed:{bg:"#dcfce7",text:"#166534"}};return Ke[ze]||Ke.pending},Ce=(Te||[]).map(({userId:ze,roles:Ke})=>{const ut=re[ze]||{},qn=V[ze]||"pending";return{id:ze,name:ut.name||ut.displayName||"Unknown",photoURL:ut.photoURL||ut.avatarUrl||"",roles:Ke||[],acceptanceStatus:qn}}),Xe=1080,qe=1360,it=document.createElement("canvas");it.width=Xe,it.height=qe;const Ae=it.getContext("2d");Ae.fillStyle="#f3f4f6",Ae.fillRect(0,0,Xe,qe);const bt=48,gt=bt,$e=bt,ot=Xe-bt*2,Nt=qe-bt*2;Ae.fillStyle="#ffffff";const Ye=24;Ae.beginPath(),Ae.moveTo(gt+Ye,$e),Ae.lineTo(gt+ot-Ye,$e),Ae.quadraticCurveTo(gt+ot,$e,gt+ot,$e+Ye),Ae.lineTo(gt+ot,$e+Nt-Ye),Ae.quadraticCurveTo(gt+ot,$e+Nt,gt+ot-Ye,$e+Nt),Ae.lineTo(gt+Ye,$e+Nt),Ae.quadraticCurveTo(gt,$e+Nt,gt,$e+Nt-Ye),Ae.lineTo(gt,$e+Ye),Ae.quadraticCurveTo(gt,$e,gt+Ye,$e),Ae.closePath(),Ae.fill(),Ae.strokeStyle="#e5e7eb",Ae.lineWidth=2,Ae.stroke();const wt=40;let et=gt+wt,Ot=$e+wt;const Ft=ot-wt*2,Ge=(ze,Ke,ut,qn,zt,en)=>{Ae.font=en;const qt=(ze||"").split(" ");let nt="",Ut=qn;for(let Fn=0;Fn<qt.length;Fn++){const Sn=nt+qt[Fn]+" ";Ae.measureText(Sn).width>Ke&&Fn>0?(Ae.fillText(nt.trim(),ut,Ut),nt=qt[Fn]+" ",Ut+=zt):nt=Sn}return nt&&(Ae.fillText(nt.trim(),ut,Ut),Ut+=zt),Ut};Ae.fillStyle="#3f3f3f",Ae.textBaseline="top",Ot=Ge(te||"Task",Ft-200,et,Ot,56,'bold 48px system-ui, -apple-system, Roboto, "Segoe UI", "Helvetica Neue", Arial');const ft=Ze(),Et=Ve(ft);Ae.font='500 22px system-ui, -apple-system, Roboto, "Segoe UI", "Helvetica Neue", Arial';const at=Ae.measureText(ft).width+32,Ct=48,Qe=gt+ot-wt-at-8,tt=$e+wt+8;Ae.fillStyle=Et.bg,Ae.fillRect(Qe,tt,at,Ct),Ae.fillStyle=Et.text,Ae.fillText(ft,Qe+16,tt+12),Ot+=16;const kt=ge||Se;if(kt){Ae.fillStyle="#6b7280",Ae.font='400 26px system-ui, -apple-system, Roboto, "Segoe UI", "Helvetica Neue", Arial';const ze=new Date(kt).toLocaleDateString(void 0,{day:"numeric",month:"short",year:"numeric"});Ae.fillText(`Date: ${ze}`,et,Ot),Ot+=44}if(de&&(Ae.fillStyle="#374151",Ot=Ge(de,Ft,et,Ot+12,36,'400 24px system-ui, -apple-system, Roboto, "Segoe UI", "Helvetica Neue", Arial')),(Ce||[]).length){Ot+=16,Ae.fillStyle="#3f3f3f",Ae.font='600 26px system-ui, -apple-system, Roboto, "Segoe UI", "Helvetica Neue", Arial',Ae.fillText("Assigned to:",et,Ot),Ot+=44;const ze=72,Ke=20,ut=Ce.map(zt=>new Promise(en=>{if(!zt||!zt.photoURL)return en(null);const qt=new Image;qt.crossOrigin="anonymous",qt.onload=()=>en(qt),qt.onerror=()=>en(null),qt.src=zt.photoURL})),qn=await Promise.all(ut);for(let zt=0;zt<Ce.length;zt++){const en=Ce[zt],qt=qn[zt],nt=et,Ut=Ot;if(Ae.save(),Ae.beginPath(),Ae.arc(nt+ze/2,Ut+ze/2,ze/2,0,Math.PI*2),Ae.closePath(),Ae.fillStyle="#e5e7eb",Ae.fill(),qt){Ae.save(),Ae.beginPath(),Ae.arc(nt+ze/2,Ut+ze/2,ze/2,0,Math.PI*2),Ae.clip();const dn=Math.max(ze/qt.width,ze/qt.height),Tr=qt.width*dn,Dr=qt.height*dn,zr=nt+(ze-Tr)/2,bi=Ut+(ze-Dr)/2;Ae.drawImage(qt,zr,bi,Tr,Dr),Ae.restore()}else{Ae.fillStyle="#6b7280",Ae.font='600 26px system-ui, -apple-system, Roboto, "Segoe UI", "Helvetica Neue", Arial';const dn=(en.name||"").split(" ").map(Tr=>Tr[0]).slice(0,2).join("").toUpperCase();Ae.fillText(dn,nt+16,Ut+20)}Ae.restore();const Fn=nt+ze+20;Ae.fillStyle="#111827",Ae.font='600 26px system-ui, -apple-system, Roboto, "Segoe UI", "Helvetica Neue", Arial',Ae.fillText(en.name||"Unknown",Fn,Ut+4);const Sn=en.acceptanceStatus;let _n,an,tn;Sn==="accepted"?(_n=" Accepted",an="#dcfce7",tn="#16a34a"):Sn==="rejected"?(_n=" Rejected",an="#fee2e2",tn="#dc2626"):(_n=" Pending",an="#fef3c7",tn="#b45309"),Ae.font='500 22px system-ui, -apple-system, Roboto, "Segoe UI", "Helvetica Neue", Arial';const Wt=Ae.measureText(_n).width+24,ni=44,Nr=gt+ot-wt-Wt-8,Un=Ut+10;Ae.fillStyle=an,Ae.fillRect(Nr,Un,Wt,ni),Ae.fillStyle=tn,Ae.fillText(_n,Nr+12,Un+10);const Sr=en.roles||[];let Ar=Fn;const Er=Ut+40;Ae.font='400 22px system-ui, -apple-system, Roboto, "Segoe UI", "Helvetica Neue", Arial';for(let dn=0;dn<Sr.length;dn++){const Tr=Sr[dn],Dr=`${en.id}_${Tr}`,zr=De[Dr]==="done",bi=zr?` ${Tr}`:Tr,gs=Ae.measureText(bi).width+20;Ae.fillStyle=zr?"#d1fae5":"#f0f0f0",Ae.fillRect(Ar,Er,gs,36),Ae.fillStyle=zr?"#059669":"#5b6b7d",Ae.fillText(bi,Ar+10,Er+24-6),Ar+=gs+12}Ot+=ze+Ke}}it.toBlob(ze=>{if(!ze)return;const Ke=URL.createObjectURL(ze),ut=document.createElement("a");ut.href=Ke,ut.download=`task-${ve||Date.now()}.png`,document.body.appendChild(ut),ut.click(),ut.remove(),setTimeout(()=>URL.revokeObjectURL(Ke),3e3)},"image/png")}catch(ve){console.warn("generateAndDownloadTaskImage error",ve)}},L=K=>{if(!k)return;const re=l.find(ae=>ae.userId===K);c(re?ae=>ae.filter(ve=>ve.userId!==K):ae=>[...ae,{userId:K,roles:["videography"]}])},ne=(K,re)=>{k&&c(ae=>ae.map(ve=>{if(ve.userId!==K)return ve;const de=ve.roles.includes(re)?ve.roles.filter(ge=>ge!==re):[...ve.roles,re];return{...ve,roles:de.length?de:[re]}}))},ie=K=>{k&&g(re=>re.includes(K)?re.filter(ae=>ae!==K):[...re,K])},ue=K=>{if(!k)return;const{name:re,value:ae}=K.target;r(ve=>({...ve,[re]:ae}))},fe=async K=>{if(K.preventDefault(),!!n){if(N(!0),q(""),D(""),!n.date&&!n.deadline){N(!1),q("Please set a date or a deadline.");return}try{const{id:re,...ae}=n,ve=n.assignedUsers||[],te=l.map(ge=>ge.userId);await Xr(Zt(He,"works",n.id),{...ae,assignedUsers:te,assignedUserDetails:l,assignedItems:h});const de=te.filter(ge=>!ve.includes(ge));if(de.length>0){const ge=de.map(async De=>{const Ve=(await Xs(Zt(He,"users",De))).data();return{email:(Ve==null?void 0:Ve.email)||null,phone:(Ve==null?void 0:Ve.phoneNumber)||(Ve==null?void 0:Ve.phone)||null}}),Se=await Promise.all(ge),Te=Se.map(De=>De.email).filter(Boolean),Ue=Se.map(De=>De.phone).filter(Boolean),V={lines:[`Title: ${n.title}`,...n.date?[`Date: ${n.date}`]:[],...n.deadline?[`Deadline: ${n.deadline}`]:[],`Description: ${n.description}`]};if(Te.length>0){const De=V.lines,Ze=[`<p><b>Title:</b> ${n.title}</p>`,...n.date?[`<p><b>Date:</b> ${n.date}</p>`]:[],...n.deadline?[`<p><b>Deadline:</b> ${n.deadline}</p>`]:[],`<p><b>Description:</b> ${n.description}</p>`];await fi(Lt(He,"mail"),{to:Te,message:{subject:`You were assigned to a work: ${n.title}`,text:`You have been assigned to the work "${n.title}".

`+De.join(`
`)+`

Kindly review and confirm the work by visiting the Videography Manager website.`,html:`<p>Hello,</p>
        <p>You have been assigned a work. Please find the details below:</p>
        ${Ze.join("")}
        <p>Kindly review and confirm the work by visiting the <a href="https://tmv.fotmv.online/">Videography Manager</a> Website</p>
        <p>If you encounter any issues or need further assistance, feel free to contact me.</p>
        <p>Thank you.</p>
        <p>Best regards,</p>
        <p style="color:#A3A9AD">
          <strong>Mihiru Dahanayake</strong><br>
          <i>Acting Videography Department Head<br>FOT Media<br>Faculty Of Technology<br>Rajarata University of Sri Lanka<br>
          <a href="tel:+94703426554" style="color:#0066cc; text-decoration:none;">070 342 6554</a><br>
          <a href="mailto:mihirudahanayake@gmail.com" style="color:#0066cc; text-decoration:none;">mihiru.online@gmail.com</a></i><br>
        </p>`}})}if(Ue.length>0){const De=`Hello!

You have been assigned to a work:

`+V.lines.join(`
`)+`

Kindly review and confirm the work by visiting the Videography Manager website: https://tmv.fotmv.online/

If you encounter any issues, feel free to contact me.

Best regards,
Mihiru Dahanayake
Acting Videography Department Head
FOT Media, Rajarata University
070 342 6554`;await fi(Lt(He,"whatsapp"),{to:Ue,message:De})}}try{const ge={};i.forEach(Te=>{ge[Te.id]=Te});const Se={};o.forEach(Te=>{Se[Te.id]=Te}),await I({task:{id:n.id,title:n.title,description:n.description,date:n.date,deadline:n.deadline,assignedUserDetails:l,assignedItems:h,status:n.status||"pending",userAcceptance:n.userAcceptance||{},roleCompletion:n.roleCompletion||{}},usersMap:ge,itemsMap:Se})}catch(ge){console.warn("failed to generate task image",ge)}D("Task updated successfully."),R(!1)}catch(re){console.error(re),q("Failed to update task.")}finally{N(!1)}}},J=async()=>{if(window.confirm("Are you sure you want to delete this task?")){x(!0),q(""),D("");try{await sA(Zt(He,"works",t)),D("Task deleted successfully."),setTimeout(()=>e("/work-list"),1500)}catch(K){console.error(K),q("Failed to delete task.")}finally{x(!1)}}};if(y)return u.jsxs("div",{className:"min-h-screen bg-gray-100",children:[u.jsx(In,{userType:"admin"}),u.jsxs("div",{className:"flex flex-col justify-center items-center h-64",children:[u.jsx(Ms,{className:"animate-spin text-4xl text-blue-600 mb-4"}),u.jsx("p",{className:"text-gray-600",children:"Loading task..."})]})]});if(!n)return u.jsxs("div",{className:"min-h-screen bg-gray-100",children:[u.jsx(In,{userType:"admin"}),u.jsxs("main",{className:"container mx-auto px-4 py-6 sm:py-8 max-w-3xl",children:[u.jsx("p",{className:"text-gray-600 mb-4",children:j||"Task not found."}),u.jsx("button",{onClick:()=>e(-1),className:"px-4 py-2 rounded bg-blue-600 text-white text-sm hover:bg-blue-700",children:"Back"})]})]});const le=K=>l.some(re=>re.userId===K),xe=K=>{var re;return((re=l.find(ae=>ae.userId===K))==null?void 0:re.roles)||[]},we=F.trim().toLowerCase(),O=i.filter(K=>{if(!we)return!0;const re=(K.name||"").toLowerCase(),ae=(K.cardNumber||"").toLowerCase();return re.includes(we)||ae.includes(we)}),W=S.trim().toLowerCase(),Y=o.filter(K=>{if(!W)return!0;const re=(K.itemName||"").toLowerCase(),ae=(K.itemNo||"").toLowerCase();return re.includes(W)||ae.includes(W)});return u.jsxs("div",{className:"min-h-screen bg-gray-100",children:[u.jsx(In,{userType:"admin"}),u.jsxs("main",{className:"container mx-auto px-4 py-6 sm:py-8 max-w-3xl",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-800",children:"Task details"}),u.jsxs("div",{className:"flex gap-2",children:[k?u.jsxs(u.Fragment,{children:[u.jsx("button",{onClick:fe,disabled:_,className:"px-3 py-1 rounded bg-blue-600 text-white text-sm hover:bg-blue-700 disabled:opacity-50",children:_?"Saving...":"Save"}),u.jsx("button",{onClick:()=>{R(!1),D(""),q(""),c(n.assignedUserDetails||[]),g(n.assignedItems||[])},className:"px-3 py-1 rounded bg-gray-300 text-gray-800 text-sm hover:bg-gray-400",children:"Cancel"})]}):u.jsxs(u.Fragment,{children:[u.jsx("button",{onClick:()=>{R(!0),q(""),D("")},className:"px-3 py-1 rounded bg-blue-600 text-white text-sm hover:bg-blue-700",children:"Edit"}),u.jsxs("button",{onClick:J,disabled:C,className:"px-3 py-1 rounded bg-red-600 text-white text-sm hover:bg-red-700 disabled:opacity-50 inline-flex items-center gap-1",children:[u.jsx(eE,{}),C?"Deleting...":"Delete"]})]}),u.jsx("button",{onClick:()=>e(-1),className:"px-3 py-1 rounded bg-gray-200 text-gray-800 text-sm hover:bg-gray-300",children:"Back"})]})]}),j&&u.jsx("div",{className:"mb-3 p-2 rounded bg-red-100 text-red-700 text-sm",children:j}),Q&&u.jsx("div",{className:"mb-3 p-2 rounded bg-green-100 text-green-700 text-sm",children:Q}),u.jsxs("form",{className:"space-y-4",onSubmit:fe,children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Title"}),u.jsx("input",{type:"text",name:"title",value:n.title||"",onChange:ue,disabled:!k,className:"w-full px-3 py-2 border rounded text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Description"}),u.jsx("textarea",{name:"description",value:n.description||"",onChange:ue,disabled:!k,rows:3,className:"w-full px-3 py-2 border rounded text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),u.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Date"}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(fr,{className:"text-gray-500"}),u.jsx("input",{type:"date",name:"date",value:n.date?new Date(n.date).toISOString().slice(0,10):"",onChange:ue,disabled:!k,className:"flex-1 px-3 py-2 border rounded text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Deadline"}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(fr,{className:"text-gray-500"}),u.jsx("input",{type:"date",name:"deadline",value:n.deadline?new Date(n.deadline).toISOString().slice(0,10):"",onChange:ue,disabled:!k,className:"flex-1 px-3 py-2 border rounded text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),u.jsx("p",{className:"text-[11px] text-gray-500 mt-1",children:"Date or deadline is required, but each is optional on its own."})]})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:[u.jsx(c5,{className:"inline mr-2"}),"Assigned users and work types"]}),k&&u.jsxs("div",{className:"relative mb-3",children:[u.jsx(_c,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 text-xs"}),u.jsx("input",{type:"text",placeholder:"Search users by name or card...",value:F,onChange:K=>A(K.target.value),className:"w-full pl-8 pr-3 py-2 border rounded text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),u.jsx("div",{className:"bg-white rounded border p-3 max-h-80 overflow-y-auto",children:O.length===0?u.jsx("p",{className:"text-xs text-gray-500",children:"No users found."}):O.map(K=>{const re=le(K.id),ae=xe(K.id);return u.jsxs("div",{className:"mb-2 p-2 rounded hover:bg-gray-50",children:[u.jsxs("label",{className:"flex items-center cursor-pointer",children:[u.jsx("input",{type:"checkbox",checked:re,onChange:()=>L(K.id),disabled:!k,className:"mr-3 w-4 h-4"}),u.jsx("div",{className:"flex-1",children:u.jsxs("p",{className:"text-sm",children:[K.name||"No name"," ",u.jsxs("span",{className:"text-xs text-gray-500",children:["(",K.cardNumber||"-",")"]})]})})]}),re&&u.jsx("div",{className:"mt-1 ml-7 flex flex-wrap gap-2 text-xs sm:text-sm",children:VF.map(ve=>u.jsx("button",{type:"button",onClick:()=>ne(K.id,ve),disabled:!k,className:`px-2 py-1 rounded border ${ae.includes(ve)?"bg-green-600 text-white border-green-600":"bg-white text-gray-700 border-gray-300"} ${k?"cursor-pointer":"cursor-default"}`,children:ve},ve))})]},K.id)})})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:[u.jsx(yf,{className:"inline mr-2"}),"Assigned inventory items"]}),k&&u.jsxs("div",{className:"relative mb-2",children:[u.jsx(_c,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 text-xs"}),u.jsx("input",{type:"text",placeholder:"Search by item name or number...",value:S,onChange:K=>T(K.target.value),className:"w-full pl-8 pr-3 py-2 border rounded text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),u.jsx("div",{className:"bg-white rounded border p-3 max-h-60 overflow-y-auto",children:Y.length===0?u.jsx("p",{className:"text-xs text-gray-500",children:"No items available."}):Y.map(K=>u.jsxs("label",{className:"flex items-center mb-2 cursor-pointer hover:bg-gray-50 p-2 rounded",children:[u.jsx("input",{type:"checkbox",checked:h.includes(K.id),onChange:()=>ie(K.id),disabled:!k,className:"mr-3 w-4 h-4"}),u.jsxs("div",{className:"flex-1",children:[u.jsxs("p",{className:"text-sm",children:[K.itemName," ",u.jsxs("span",{className:"text-xs text-gray-500",children:["(",K.itemNo,")"]})]}),K.details&&u.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:K.details})]})]},K.id))}),u.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Selected: ",h.length," item(s)"]})]})]})]})]})},zF=()=>{const[t,e]=se.useState([]),[n,r]=se.useState(!0),[i,s]=se.useState(!1),[o,a]=se.useState(""),[l,c]=se.useState(!1),[h,g]=se.useState(null),[y,p]=se.useState({type:"",text:""}),[_,N]=se.useState({itemNo:"",itemName:"",category:"",description:""});se.useEffect(()=>{C()},[]);const C=async()=>{r(!0);try{const T=(await zn(Lt(He,"inventory"))).docs.map(F=>({id:F.id,...F.data()}));T.sort((F,A)=>{const I=(F.itemName||"").toLowerCase(),L=(A.itemName||"").toLowerCase();return I.localeCompare(L)}),e(T)}catch(S){console.error("Error fetching inventory:",S),p({type:"error",text:"Failed to load inventory."})}finally{r(!1)}},x=S=>{N(T=>({...T,[S.target.name]:S.target.value}))},k=async S=>{S.preventDefault(),s(!0),p({type:"",text:""});try{if(h){const T=Zt(He,"inventory",h.id);await Xr(T,{..._,updatedAt:new Date().toISOString()}),p({type:"success",text:"Item updated successfully!"})}else await fi(Lt(He,"inventory"),{..._,createdAt:new Date().toISOString()}),p({type:"success",text:"Item added successfully!"});N({itemNo:"",itemName:"",category:"",description:""}),c(!1),g(null),await C()}catch(T){console.error("Error saving item:",T),p({type:"error",text:h?"Failed to update item.":"Failed to add item."})}finally{s(!1)}},R=S=>{g(S),N({itemNo:S.itemNo,itemName:S.itemName,category:S.category||"",description:S.description||""}),c(!0),p({type:"",text:""}),window.scrollTo({top:0,behavior:"smooth"})},j=async(S,T)=>{if(window.confirm(`Are you sure you want to delete "${T}"?`))try{await sA(Zt(He,"inventory",S)),p({type:"success",text:"Item deleted successfully!"}),await C()}catch(F){console.error("Error deleting item:",F),p({type:"error",text:"Failed to delete item."})}},q=()=>{g(null),N({itemNo:"",itemName:"",category:"",description:""}),c(!1),p({type:"",text:""})},Q=o.trim().toLowerCase(),D=t.filter(S=>{if(!Q)return!0;const T=(S.itemName||"").toLowerCase(),F=(S.itemNo||"").toLowerCase();return T.includes(Q)||F.includes(Q)});return u.jsxs("div",{className:"min-h-screen bg-gray-100",children:[u.jsx(In,{userType:"admin"}),u.jsxs("main",{className:"container mx-auto px-4 py-6 sm:py-8",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3 mb-4 sm:mb-6",children:[u.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-800",children:"Inventory"}),u.jsxs("button",{onClick:()=>{l&&!h?c(!1):(q(),c(!l))},className:"self-start sm:self-auto inline-flex items-center gap-2 px-4 py-2 rounded bg-green-600 text-white text-sm font-semibold hover:bg-green-700",children:[u.jsx(xF,{}),l?"Cancel":"Add Item"]})]}),y.text&&u.jsx("div",{className:`mb-4 p-3 rounded text-sm ${y.type==="success"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:y.text}),l&&u.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 sm:p-6 mb-6",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-gray-800",children:h?"Edit Item":"Add New Item"}),h&&u.jsx("button",{onClick:q,className:"text-gray-500 hover:text-gray-700",title:"Cancel editing",children:u.jsx(Nl,{className:"text-xl"})})]}),u.jsxs("form",{onSubmit:k,className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Item No"}),u.jsx("input",{type:"text",name:"itemNo",value:_.itemNo,onChange:x,required:!0,className:"w-full px-3 py-2 border rounded text-sm focus:outline-none focus:ring-2 focus:ring-green-500"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Item Name"}),u.jsx("input",{type:"text",name:"itemName",value:_.itemName,onChange:x,required:!0,className:"w-full px-3 py-2 border rounded text-sm focus:outline-none focus:ring-2 focus:ring-green-500"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Category"}),u.jsxs("select",{name:"category",value:_.category,onChange:x,required:!0,className:"w-full px-3 py-2 border rounded text-sm focus:outline-none focus:ring-2 focus:ring-green-500",children:[u.jsx("option",{value:"",children:"Select a category"}),u.jsx("option",{value:"Photography",children:"Photography"}),u.jsx("option",{value:"Videography",children:"Videography"}),u.jsx("option",{value:"Live Streaming",children:"Live Streaming"}),u.jsx("option",{value:"Drones & Accessories",children:"Drones & Accessories"}),u.jsx("option",{value:"Announcing",children:"Announcing"}),u.jsx("option",{value:"Storages",children:"Storages"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Description"}),u.jsx("textarea",{name:"description",value:_.description,onChange:x,rows:"3",className:"w-full px-3 py-2 border rounded text-sm focus:outline-none focus:ring-2 focus:ring-green-500"})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{type:"submit",disabled:i,className:"flex-1 bg-green-600 text-white py-2 px-4 rounded font-semibold hover:bg-green-700 transition disabled:opacity-50 text-sm",children:i?h?"Updating...":"Adding...":h?"Update Item":"Add Item"}),h&&u.jsx("button",{type:"button",onClick:q,className:"px-4 py-2 border border-gray-300 rounded text-gray-700 font-semibold hover:bg-gray-100 transition text-sm",children:"Cancel"})]})]})]}),u.jsxs("div",{className:"relative mb-4",children:[u.jsx(_c,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 text-sm"}),u.jsx("input",{type:"text",placeholder:"Search by item name or number...",value:o,onChange:S=>a(S.target.value),className:"w-full pl-9 pr-3 py-2 border rounded text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),n?u.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[u.jsx(Ms,{className:"animate-spin text-xl text-blue-600"}),u.jsx("span",{children:"Loading inventory..."})]}):D.length===0?u.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 text-center",children:[u.jsx(yf,{className:"mx-auto text-4xl text-gray-400 mb-2"}),u.jsx("p",{className:"text-gray-600 text-sm",children:o?"No items match your search.":"No items in inventory."})]}):u.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:D.map(S=>u.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 hover:shadow-lg transition",children:[u.jsxs("div",{className:"flex items-start justify-between mb-2",children:[u.jsx("h3",{className:"font-semibold text-gray-800 text-sm sm:text-base flex-1",children:S.itemName}),u.jsx("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded ml-2",children:S.itemNo})]}),S.category&&u.jsx("p",{className:"text-xs bg-slate-100 text-slate-800 px-2 py-1 rounded inline-block mb-2",children:S.category}),S.description&&u.jsx("p",{className:"text-gray-600 text-xs sm:text-sm mb-3",children:S.description}),u.jsxs("div",{className:"flex gap-2 mt-3 pt-3 border-t",children:[u.jsxs("button",{onClick:()=>R(S),className:"flex-1 inline-flex items-center justify-center gap-1 px-3 py-1.5 bg-blue-600 text-white text-xs font-semibold rounded hover:bg-blue-700 transition",children:[u.jsx(dF,{}),"Edit"]}),u.jsxs("button",{onClick:()=>j(S.id,S.itemName),className:"flex-1 inline-flex items-center justify-center gap-1 px-3 py-1.5 bg-red-600 text-white text-xs font-semibold rounded hover:bg-red-700 transition",children:[u.jsx(eE,{}),"Delete"]})]})]},S.id))})]})]})},qF=()=>{const[t,e]=se.useState([]),[n,r]=se.useState({}),[i,s]=se.useState([]),[o,a]=se.useState(!0);se.useEffect(()=>{l()},[]);const l=async()=>{a(!0);try{const p=await zn(Lt(He,"users")),_={};p.docs.forEach(j=>{_[j.id]=j.data()}),r(_);const x=(await zn(Lt(He,"works"))).docs.map(j=>({id:j.id,...j.data()})).filter(j=>{const q=j.rejections||{};return Object.keys(q).some(Q=>!q[Q].approved)});e(x);const R=(await zn(Lt(He,"rejectedWorks"))).docs.map(j=>({id:j.id,...j.data()}));R.sort((j,q)=>{const Q=j.approvedAt?new Date(j.approvedAt).getTime():0;return(q.approvedAt?new Date(q.approvedAt).getTime():0)-Q}),s(R)}catch(p){console.error("Error fetching data:",p)}finally{a(!1)}},c=async(p,_)=>{try{const N=t.find(D=>D.id===p),C=(N.rejections||{})[_];await fi(Lt(He,"rejectedWorks"),{workId:p,userId:_,title:N.title,description:N.description,date:N.date,priority:N.priority,assignedUserDetails:N.assignedUserDetails,assignedItems:N.assignedItems,rejectionReason:C.reason,rejectedAt:C.timestamp,approvedAt:new Date().toISOString()});const x=Zt(He,"works",p),k=(N.assignedUsers||[]).filter(D=>D!==_),R=(N.assignedUserDetails||[]).filter(D=>D.userId!==_),j={...N.rejections||{}};delete j[_];const q={...N.userAcceptance||{}};delete q[_];const Q={...N.roleCompletion||{}};Object.keys(Q).forEach(D=>{D.startsWith(`${_}_`)&&delete Q[D]}),await Xr(x,{assignedUsers:k,assignedUserDetails:R,rejections:j,userAcceptance:q,roleCompletion:Q}),await l()}catch(N){console.error("Failed to approve:",N)}},h=async(p,_)=>{try{const N=t.find(R=>R.id===p),C=Zt(He,"works",p),x={...N.rejections||{}},k={...N.userAcceptance||{}};delete x[_],k[_]="pending",await Xr(C,{rejections:x,userAcceptance:k}),await l()}catch(N){console.error("Failed to cancel rejection:",N)}};if(o)return u.jsxs("div",{className:"min-h-screen bg-gray-100",children:[u.jsx(In,{userType:"admin"}),u.jsxs("div",{className:"flex flex-col items-center justify-center h-64",children:[u.jsx(Ms,{className:"animate-spin text-4xl text-blue-600 mb-4"}),u.jsx("p",{className:"text-gray-600",children:"Loading rejections..."})]})]});const g=i.reduce((p,_)=>{const N=_.workId||_.id;return p[N]||(p[N]={workId:N,title:_.title,items:[]}),p[N].items.push(_),p},{}),y=Object.values(g);return u.jsxs("div",{className:"min-h-screen bg-gray-100",children:[u.jsx(In,{userType:"admin"}),u.jsxs("main",{className:"container mx-auto px-4 py-6 sm:py-8 max-w-4xl",children:[u.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-800 mb-6",children:"Pending Rejection Approvals"}),t.length===0?u.jsx("div",{className:"bg-white rounded-lg shadow-md p-6 text-center mb-8",children:u.jsx("p",{className:"text-gray-600",children:"No pending rejections."})}):u.jsx("div",{className:"space-y-4 mb-10",children:t.map(p=>{const _=p.rejections||{};return u.jsxs("div",{className:"bg-white rounded-lg shadow-md p-5",children:[u.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-3",children:p.title||"Task"}),Object.entries(_).filter(([,N])=>!N.approved).map(([N,C])=>{var x;return u.jsxs("div",{className:"mb-3 p-4 bg-red-50 rounded-lg border border-red-100",children:[u.jsxs("div",{className:"flex items-start justify-between mb-2",children:[u.jsxs("div",{children:[u.jsx("p",{className:"font-semibold text-gray-800 text-sm",children:((x=n[N])==null?void 0:x.name)||"Unknown User"}),u.jsx("p",{className:"text-xs text-gray-500",children:new Date(C.timestamp).toLocaleString()})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsxs("button",{onClick:()=>c(p.id,N),className:"bg-blue-600 text-white text-xs font-semibold px-3 py-1.5 rounded-lg hover:bg-blue-700 flex items-center gap-1",children:[u.jsx(la,{}),"Approve"]}),u.jsxs("button",{onClick:()=>h(p.id,N),className:"bg-gray-200 text-gray-800 text-xs font-semibold px-3 py-1.5 rounded-lg hover:bg-gray-300 flex items-center gap-1",children:[u.jsx(Nl,{}),"Cancel"]})]})]}),u.jsxs("p",{className:"text-sm text-gray-700 bg-white p-3 rounded",children:[u.jsx("span",{className:"font-semibold",children:"Reason: "}),C.reason]})]},N)})]},p.id)})}),u.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-gray-800 mb-4",children:"Approved Rejections"}),y.length===0?u.jsx("div",{className:"bg-white rounded-lg shadow-md p-6 text-center",children:u.jsx("p",{className:"text-gray-600",children:"No approved rejections yet."})}):u.jsx("div",{className:"space-y-4",children:y.map(p=>u.jsxs("div",{className:"bg-white rounded-lg shadow-md p-5 border border-green-100",children:[u.jsxs("div",{className:"flex items-start justify-between mb-3",children:[u.jsx("h3",{className:"text-lg font-bold text-gray-800",children:p.title||"Task"}),u.jsxs("span",{className:"bg-green-100 text-green-800 text-xs font-semibold px-3 py-1.5 rounded-full flex items-center gap-1",children:[u.jsx(la,{}),"Approved"]})]}),u.jsx("div",{className:"space-y-3",children:p.items.map(_=>{var N;return u.jsxs("div",{className:"p-3 rounded border border-green-100 bg-green-50",children:[u.jsx("p",{className:"text-sm font-semibold text-gray-800 mb-1",children:((N=n[_.userId])==null?void 0:N.name)||"Unknown User"}),u.jsxs("p",{className:"text-xs text-gray-500 mb-1",children:["Rejected:"," ",_.rejectedAt?new Date(_.rejectedAt).toLocaleString():"-",u.jsx("br",{}),"Approved:"," ",_.approvedAt?new Date(_.approvedAt).toLocaleString():"-"]}),u.jsxs("p",{className:"text-sm text-gray-700",children:[u.jsx("span",{className:"font-semibold",children:"Reason: "}),_.rejectionReason||"-"]})]},_.id)})})]},p.workId))})]})]})},HF=()=>{const[t,e]=se.useState(null),[n,r]=se.useState([]),[i,s]=se.useState(!0);return se.useEffect(()=>{const o=Lc(Ii,a=>{e(a||null)});return()=>o()},[]),se.useEffect(()=>{if(!t)return;(async()=>{s(!0);try{const a=vc(Lt(He,"rejectedWorks"),zd("userId","==",t.uid)),c=(await zn(a)).docs.map(h=>({id:h.id,...h.data()}));c.sort((h,g)=>{const y=h.approvedAt?new Date(h.approvedAt).getTime():0;return(g.approvedAt?new Date(g.approvedAt).getTime():0)-y}),r(c)}catch(a){console.error("Error fetching rejected works:",a)}finally{s(!1)}})()},[t]),i?u.jsxs("div",{className:"min-h-screen bg-gray-100",children:[u.jsx(In,{userType:"user"}),u.jsxs("div",{className:"flex flex-col items-center justify-center h-64",children:[u.jsx(Ms,{className:"animate-spin text-4xl text-blue-600 mb-4"}),u.jsx("p",{className:"text-gray-600",children:"Loading rejected works..."})]})]}):u.jsxs("div",{className:"min-h-screen bg-gray-100",children:[u.jsx(In,{userType:"user"}),u.jsxs("main",{className:"container mx-auto px-4 py-6 sm:py-8 max-w-3xl",children:[u.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-800 mb-6",children:"My Rejected Works"}),n.length===0?u.jsx("div",{className:"bg-white rounded-lg shadow-md p-6 text-center",children:u.jsx("p",{className:"text-gray-600",children:"You have no rejected works."})}):u.jsx("div",{className:"space-y-4",children:n.map(o=>u.jsxs("div",{className:"bg-white rounded-lg shadow-md p-5",children:[u.jsxs("div",{className:"flex items-start justify-between mb-3",children:[u.jsxs("div",{className:"flex-1",children:[u.jsx("h3",{className:"text-lg font-bold text-gray-800",children:o.title||"Task"}),o.date&&u.jsxs("p",{className:"flex items-center gap-1 text-xs text-gray-500 mt-1",children:[u.jsx(fr,{}),u.jsx("span",{children:new Date(o.date).toLocaleDateString()})]})]}),u.jsxs("span",{className:"bg-red-100 text-red-800 text-xs font-semibold px-3 py-1.5 rounded-full flex items-center gap-1",children:[u.jsx(Nl,{}),"You rejected"]})]}),u.jsxs("div",{className:"bg-red-50 rounded-lg p-4",children:[o.description&&u.jsx("p",{className:"text-sm text-gray-700 mb-3",children:o.description}),u.jsx("p",{className:"text-xs font-semibold text-red-800 mb-1",children:"Your reason:"}),u.jsx("p",{className:"text-sm text-gray-700",children:o.rejectionReason||"-"}),u.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Rejected: ",o.rejectedAt?new Date(o.rejectedAt).toLocaleString():"-",u.jsx("br",{}),"Approved by admin: ",o.approvedAt?new Date(o.approvedAt).toLocaleString():"-"]})]})]},o.id))})]})]})},$F=()=>{const[t,e]=se.useState([]),[n,r]=se.useState(!0),[i,s]=se.useState(!1),o=xi(),a=async()=>{r(!0);try{const p=vc(Lt(He,"notifications"),Wv("createdAt","desc")),N=(await zn(p)).docs.map(C=>({id:C.id,...C.data()}));e(N)}catch(p){console.error("Failed to load notifications",p)}finally{r(!1)}};se.useEffect(()=>{a()},[]);const l=p=>{const _=p.userName||"A user";return p.type==="accept"?`${_} accepted a work`:p.type==="reject"?`${_} rejected a work`:p.type==="done"?`${_} marked their work as done`:p.type==="undo-done"?`${_} undid a done task`:`${_} did something`},c=p=>p?(p.toDate?p.toDate():new Date(p)).toLocaleString():"",h=async()=>{const p=t.filter(_=>!_.read);if(p.length)try{s(!0);const _=aA(He);p.forEach(N=>{_.update(Zt(He,"notifications",N.id),{read:!0})}),await _.commit(),e(N=>N.map(C=>({...C,read:!0})))}catch(_){console.error("Failed to mark all read",_)}finally{s(!1)}},g=t.filter(p=>!p.read).length,y=p=>{o(`/admin/notifications/${p.id}`)};return u.jsxs("div",{className:"min-h-screen bg-gray-100",children:[u.jsx(In,{userType:"admin"}),u.jsxs("main",{className:"container mx-auto px-4 py-6 max-w-4xl",children:[u.jsxs("div",{className:"flex items-center justify-between mb-6",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(l5,{className:"text-2xl text-blue-600"}),u.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-800",children:"Notification History"})]}),u.jsxs("button",{onClick:h,disabled:i||g===0,className:`px-4 py-2 rounded text-sm font-semibold ${g===0?"bg-gray-300 text-gray-600 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"}`,children:["Mark all read (",g,")"]})]}),n?u.jsx("p",{children:"Loading notifications..."}):t.length?u.jsx("ul",{className:"space-y-3",children:t.map(p=>u.jsx("li",{onClick:()=>y(p),className:`bg-white rounded-lg shadow border p-4 cursor-pointer flex items-start gap-3 justify-between ${p.read?"border-gray-100":"border-blue-200 bg-blue-50"}`,children:u.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[u.jsx("div",{className:"mt-1",children:p.read?u.jsx(F2,{className:"text-green-500"}):u.jsx(hF,{className:"text-blue-500 text-xs"})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("p",{className:"font-semibold text-gray-800 truncate",children:l(p)}),u.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Work ID:"," ",u.jsx("span",{className:"font-mono break-all",children:p.workId})]}),u.jsxs("p",{className:"text-xs text-gray-500",children:["At: ",c(p.createdAt)]})]})]})},p.id))}):u.jsx("p",{children:"No notifications yet."})]})]})},WF="modulepreload",GF=function(t){return"https://tmv.fotmv.online/"+t},Xb={},q0=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(n.map(l=>{if(l=GF(l),l in Xb)return;Xb[l]=!0;const c=l.endsWith(".css"),h=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${h}`))return;const g=document.createElement("link");if(g.rel=c?"stylesheet":WF,c||(g.as="script"),g.crossOrigin="",g.href=l,a&&g.setAttribute("nonce",a),document.head.appendChild(g),c)return new Promise((y,p)=>{g.addEventListener("load",y),g.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})};function vn(t){"@babel/helpers - typeof";return vn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vn(t)}var no=Uint8Array,hs=Uint16Array,u5=Int32Array,h5=new no([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),d5=new no([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Jb=new no([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),iE=function(t,e){for(var n=new hs(31),r=0;r<31;++r)n[r]=e+=1<<t[r-1];for(var i=new u5(n[30]),r=1;r<30;++r)for(var s=n[r];s<n[r+1];++s)i[s]=s-n[r]<<5|r;return{b:n,r:i}},sE=iE(h5,2),KF=sE.b,B2=sE.r;KF[28]=258,B2[258]=28;var YF=iE(d5,0),Zb=YF.r,z2=new hs(32768);for(var On=0;On<32768;++On){var Ha=(On&43690)>>1|(On&21845)<<1;Ha=(Ha&52428)>>2|(Ha&13107)<<2,Ha=(Ha&61680)>>4|(Ha&3855)<<4,z2[On]=((Ha&65280)>>8|(Ha&255)<<8)>>1}var ud=function(t,e,n){for(var r=t.length,i=0,s=new hs(e);i<r;++i)t[i]&&++s[t[i]-1];var o=new hs(e);for(i=1;i<e;++i)o[i]=o[i-1]+s[i-1]<<1;var a;if(n){a=new hs(1<<e);var l=15-e;for(i=0;i<r;++i)if(t[i])for(var c=i<<4|t[i],h=e-t[i],g=o[t[i]-1]++<<h,y=g|(1<<h)-1;g<=y;++g)a[z2[g]>>l]=c}else for(a=new hs(r),i=0;i<r;++i)t[i]&&(a[i]=z2[o[t[i]-1]++]>>15-t[i]);return a},Nc=new no(288);for(var On=0;On<144;++On)Nc[On]=8;for(var On=144;On<256;++On)Nc[On]=9;for(var On=256;On<280;++On)Nc[On]=7;for(var On=280;On<288;++On)Nc[On]=8;var Rm=new no(32);for(var On=0;On<32;++On)Rm[On]=5;var QF=ud(Nc,9,0),XF=ud(Rm,5,0),oE=function(t){return(t+7)/8|0},JF=function(t,e,n){return(n==null||n>t.length)&&(n=t.length),new no(t.subarray(e,n))},Wo=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8},Mh=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8,t[r+2]|=n>>16},H0=function(t,e){for(var n=[],r=0;r<t.length;++r)t[r]&&n.push({s:r,f:t[r]});var i=n.length,s=n.slice();if(!i)return{t:lE,l:0};if(i==1){var o=new no(n[0].s+1);return o[n[0].s]=1,{t:o,l:1}}n.sort(function(q,Q){return q.f-Q.f}),n.push({s:-1,f:25001});var a=n[0],l=n[1],c=0,h=1,g=2;for(n[0]={s:-1,f:a.f+l.f,l:a,r:l};h!=i-1;)a=n[n[c].f<n[g].f?c++:g++],l=n[c!=h&&n[c].f<n[g].f?c++:g++],n[h++]={s:-1,f:a.f+l.f,l:a,r:l};for(var y=s[0].s,r=1;r<i;++r)s[r].s>y&&(y=s[r].s);var p=new hs(y+1),_=q2(n[h-1],p,0);if(_>e){var r=0,N=0,C=_-e,x=1<<C;for(s.sort(function(Q,D){return p[D.s]-p[Q.s]||Q.f-D.f});r<i;++r){var k=s[r].s;if(p[k]>e)N+=x-(1<<_-p[k]),p[k]=e;else break}for(N>>=C;N>0;){var R=s[r].s;p[R]<e?N-=1<<e-p[R]++-1:++r}for(;r>=0&&N;--r){var j=s[r].s;p[j]==e&&(--p[j],++N)}_=e}return{t:new no(p),l:_}},q2=function(t,e,n){return t.s==-1?Math.max(q2(t.l,e,n+1),q2(t.r,e,n+1)):e[t.s]=n},e_=function(t){for(var e=t.length;e&&!t[--e];);for(var n=new hs(++e),r=0,i=t[0],s=1,o=function(l){n[r++]=l},a=1;a<=e;++a)if(t[a]==i&&a!=e)++s;else{if(!i&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(i),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(i);s=1,i=t[a]}return{c:n.subarray(0,r),n:e}},Fh=function(t,e){for(var n=0,r=0;r<e.length;++r)n+=t[r]*e[r];return n},aE=function(t,e,n){var r=n.length,i=oE(e+2);t[i]=r&255,t[i+1]=r>>8,t[i+2]=t[i]^255,t[i+3]=t[i+1]^255;for(var s=0;s<r;++s)t[i+s+4]=n[s];return(i+4+r)*8},t_=function(t,e,n,r,i,s,o,a,l,c,h){Wo(e,h++,n),++i[256];for(var g=H0(i,15),y=g.t,p=g.l,_=H0(s,15),N=_.t,C=_.l,x=e_(y),k=x.c,R=x.n,j=e_(N),q=j.c,Q=j.n,D=new hs(19),S=0;S<k.length;++S)++D[k[S]&31];for(var S=0;S<q.length;++S)++D[q[S]&31];for(var T=H0(D,7),F=T.t,A=T.l,I=19;I>4&&!F[Jb[I-1]];--I);var L=c+5<<3,ne=Fh(i,Nc)+Fh(s,Rm)+o,ie=Fh(i,y)+Fh(s,N)+o+14+3*I+Fh(D,F)+2*D[16]+3*D[17]+7*D[18];if(l>=0&&L<=ne&&L<=ie)return aE(e,h,t.subarray(l,l+c));var ue,fe,J,le;if(Wo(e,h,1+(ie<ne)),h+=2,ie<ne){ue=ud(y,p,0),fe=y,J=ud(N,C,0),le=N;var xe=ud(F,A,0);Wo(e,h,R-257),Wo(e,h+5,Q-1),Wo(e,h+10,I-4),h+=14;for(var S=0;S<I;++S)Wo(e,h+3*S,F[Jb[S]]);h+=3*I;for(var we=[k,q],O=0;O<2;++O)for(var W=we[O],S=0;S<W.length;++S){var Y=W[S]&31;Wo(e,h,xe[Y]),h+=F[Y],Y>15&&(Wo(e,h,W[S]>>5&127),h+=W[S]>>12)}}else ue=QF,fe=Nc,J=XF,le=Rm;for(var S=0;S<a;++S){var K=r[S];if(K>255){var Y=K>>18&31;Mh(e,h,ue[Y+257]),h+=fe[Y+257],Y>7&&(Wo(e,h,K>>23&31),h+=h5[Y]);var re=K&31;Mh(e,h,J[re]),h+=le[re],re>3&&(Mh(e,h,K>>5&8191),h+=d5[re])}else Mh(e,h,ue[K]),h+=fe[K]}return Mh(e,h,ue[256]),h+fe[256]},ZF=new u5([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),lE=new no(0),eU=function(t,e,n,r,i,s){var o=s.z||t.length,a=new no(r+o+5*(1+Math.ceil(o/7e3))+i),l=a.subarray(r,a.length-i),c=s.l,h=(s.r||0)&7;if(e){h&&(l[0]=s.r>>3);for(var g=ZF[e-1],y=g>>13,p=g&8191,_=(1<<n)-1,N=s.p||new hs(32768),C=s.h||new hs(_+1),x=Math.ceil(n/3),k=2*x,R=function(Ue){return(t[Ue]^t[Ue+1]<<x^t[Ue+2]<<k)&_},j=new u5(25e3),q=new hs(288),Q=new hs(32),D=0,S=0,T=s.i||0,F=0,A=s.w||0,I=0;T+2<o;++T){var L=R(T),ne=T&32767,ie=C[L];if(N[ne]=ie,C[L]=ne,A<=T){var ue=o-T;if((D>7e3||F>24576)&&(ue>423||!c)){h=t_(t,l,0,j,q,Q,S,F,I,T-I,h),F=D=S=0,I=T;for(var fe=0;fe<286;++fe)q[fe]=0;for(var fe=0;fe<30;++fe)Q[fe]=0}var J=2,le=0,xe=p,we=ne-ie&32767;if(ue>2&&L==R(T-we))for(var O=Math.min(y,ue)-1,W=Math.min(32767,T),Y=Math.min(258,ue);we<=W&&--xe&&ne!=ie;){if(t[T+J]==t[T+J-we]){for(var K=0;K<Y&&t[T+K]==t[T+K-we];++K);if(K>J){if(J=K,le=we,K>O)break;for(var re=Math.min(we,K-2),ae=0,fe=0;fe<re;++fe){var ve=T-we+fe&32767,te=N[ve],de=ve-te&32767;de>ae&&(ae=de,ie=ve)}}}ne=ie,ie=N[ne],we+=ne-ie&32767}if(le){j[F++]=268435456|B2[J]<<18|Zb[le];var ge=B2[J]&31,Se=Zb[le]&31;S+=h5[ge]+d5[Se],++q[257+ge],++Q[Se],A=T+J,++D}else j[F++]=t[T],++q[t[T]]}}for(T=Math.max(T,A);T<o;++T)j[F++]=t[T],++q[t[T]];h=t_(t,l,c,j,q,Q,S,F,I,T-I,h),c||(s.r=h&7|l[h/8|0]<<3,h-=7,s.h=C,s.p=N,s.i=T,s.w=A)}else{for(var T=s.w||0;T<o+c;T+=65535){var Te=T+65535;Te>=o&&(l[h/8|0]=c,Te=o),h=aE(l,h+1,t.subarray(T,Te))}s.i=o}return JF(a,0,r+oE(h)+i)},cE=function(){var t=1,e=0;return{p:function(n){for(var r=t,i=e,s=n.length|0,o=0;o!=s;){for(var a=Math.min(o+2655,s);o<a;++o)i+=r+=n[o];r=(r&65535)+15*(r>>16),i=(i&65535)+15*(i>>16)}t=r,e=i},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},tU=function(t,e,n,r,i){if(!i&&(i={l:1},e.dictionary)){var s=e.dictionary.subarray(-32768),o=new no(s.length+t.length);o.set(s),o.set(t,s.length),t=o,i.w=s.length}return eU(t,e.level==null?6:e.level,e.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,n,r,i)},uE=function(t,e,n){for(;n;++e)t[e]=n,n>>>=8},nU=function(t,e){var n=e.level,r=n==0?0:n<6?1:n==9?3:2;if(t[0]=120,t[1]=r<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var i=cE();i.p(e.dictionary),uE(t,2,i.d())}};function H2(t,e){e||(e={});var n=cE();n.p(t);var r=tU(t,e,e.dictionary?6:2,4);return nU(r,e),uE(r,r.length-4,n.d()),r}var rU=typeof TextDecoder<"u"&&new TextDecoder,iU=0;try{rU.decode(lE,{stream:!0}),iU=1}catch{}function sU(t){if(Array.isArray(t))return t}function oU(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,o,a=[],l=!0,c=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(l=(r=s.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(h){c=!0,i=h}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return a}}function n_(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function aU(t,e){if(t){if(typeof t=="string")return n_(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?n_(t,e):void 0}}function lU(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function r_(t,e){return sU(t)||oU(t,e)||aU(t,e)||lU()}function i_(t,e="utf8"){return new TextDecoder(e).decode(t)}const cU=new TextEncoder;function uU(t){return cU.encode(t)}const hU=1024*8,dU=(()=>{const t=new Uint8Array(4),e=new Uint32Array(t.buffer);return!((e[0]=1)&t[0])})(),$0={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class f5{constructor(e=hU,n={}){yn(this,"buffer");yn(this,"byteLength");yn(this,"byteOffset");yn(this,"length");yn(this,"offset");yn(this,"lastWrittenByte");yn(this,"littleEndian");yn(this,"_data");yn(this,"_mark");yn(this,"_marks");let r=!1;typeof e=="number"?e=new ArrayBuffer(e):(r=!0,this.lastWrittenByte=e.byteLength);const i=n.offset?n.offset>>>0:0,s=e.byteLength-i;let o=i;(ArrayBuffer.isView(e)||e instanceof f5)&&(e.byteLength!==e.buffer.byteLength&&(o=e.byteOffset+i),e=e.buffer),r?this.lastWrittenByte=s:this.lastWrittenByte=0,this.buffer=e,this.length=s,this.byteLength=s,this.byteOffset=o,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,o,s),this._mark=0,this._marks=[]}available(e=1){return this.offset+e<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(e=1){return this.offset+=e,this}back(e=1){return this.offset-=e,this}seek(e){return this.offset=e,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const e=this._marks.pop();if(e===void 0)throw new Error("Mark stack empty");return this.seek(e),this}rewind(){return this.offset=0,this}ensureAvailable(e=1){if(!this.available(e)){const r=(this.offset+e)*2,i=new Uint8Array(r);i.set(new Uint8Array(this.buffer)),this.buffer=i.buffer,this.length=r,this.byteLength=r,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(e=1){return this.readArray(e,"uint8")}readArray(e,n){const r=$0[n].BYTES_PER_ELEMENT*e,i=this.byteOffset+this.offset,s=this.buffer.slice(i,i+r);if(this.littleEndian===dU&&n!=="uint8"&&n!=="int8"){const a=new Uint8Array(this.buffer.slice(i,i+r));a.reverse();const l=new $0[n](a.buffer);return this.offset+=r,l.reverse(),l}const o=new $0[n](s);return this.offset+=r,o}readInt16(){const e=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}readUint16(){const e=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,e}readInt32(){const e=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}readUint32(){const e=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat32(){const e=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat64(){const e=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}readBigInt64(){const e=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,e}readBigUint64(){const e=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,e}readChar(){return String.fromCharCode(this.readInt8())}readChars(e=1){let n="";for(let r=0;r<e;r++)n+=this.readChar();return n}readUtf8(e=1){return i_(this.readBytes(e))}decodeText(e=1,n="utf8"){return i_(this.readBytes(e),n)}writeBoolean(e){return this.writeUint8(e?255:0),this}writeInt8(e){return this.ensureAvailable(1),this._data.setInt8(this.offset++,e),this._updateLastWrittenByte(),this}writeUint8(e){return this.ensureAvailable(1),this._data.setUint8(this.offset++,e),this._updateLastWrittenByte(),this}writeByte(e){return this.writeUint8(e)}writeBytes(e){this.ensureAvailable(e.length);for(let n=0;n<e.length;n++)this._data.setUint8(this.offset++,e[n]);return this._updateLastWrittenByte(),this}writeInt16(e){return this.ensureAvailable(2),this._data.setInt16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(e){return this.ensureAvailable(2),this._data.setUint16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(e){return this.ensureAvailable(4),this._data.setInt32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(e){return this.ensureAvailable(4),this._data.setUint32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(e){return this.ensureAvailable(4),this._data.setFloat32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(e){return this.ensureAvailable(8),this._data.setFloat64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(e){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(e){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(e){return this.writeUint8(e.charCodeAt(0))}writeChars(e){for(let n=0;n<e.length;n++)this.writeUint8(e.charCodeAt(n));return this}writeUtf8(e){return this.writeBytes(uU(e))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function sh(t){let e=t.length;for(;--e>=0;)t[e]=0}const fU=3,pU=258,hE=29,mU=256,gU=mU+1+hE,dE=30,yU=512,vU=new Array((gU+2)*2);sh(vU);const wU=new Array(dE*2);sh(wU);const xU=new Array(yU);sh(xU);const bU=new Array(pU-fU+1);sh(bU);const _U=new Array(hE);sh(_U);const NU=new Array(dE);sh(NU);const SU=(t,e,n,r)=>{let i=t&65535|0,s=t>>>16&65535|0,o=0;for(;n!==0;){o=n>2e3?2e3:n,n-=o;do i=i+e[r++]|0,s=s+i|0;while(--o);i%=65521,s%=65521}return i|s<<16|0};var $2=SU;const AU=()=>{let t,e=[];for(var n=0;n<256;n++){t=n;for(var r=0;r<8;r++)t=t&1?3988292384^t>>>1:t>>>1;e[n]=t}return e},EU=new Uint32Array(AU()),TU=(t,e,n,r)=>{const i=EU,s=r+n;t^=-1;for(let o=r;o<s;o++)t=t>>>8^i[(t^e[o])&255];return t^-1};var yo=TU,W2={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},fE={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const kU=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var IU=function(t){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const n=e.shift();if(n){if(typeof n!="object")throw new TypeError(n+"must be non-object");for(const r in n)kU(n,r)&&(t[r]=n[r])}}return t},CU=t=>{let e=0;for(let r=0,i=t.length;r<i;r++)e+=t[r].length;const n=new Uint8Array(e);for(let r=0,i=0,s=t.length;r<s;r++){let o=t[r];n.set(o,i),i+=o.length}return n},pE={assign:IU,flattenChunks:CU};let mE=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{mE=!1}const Gd=new Uint8Array(256);for(let t=0;t<256;t++)Gd[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;Gd[254]=Gd[254]=1;var PU=t=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(t);let e,n,r,i,s,o=t.length,a=0;for(i=0;i<o;i++)n=t.charCodeAt(i),(n&64512)===55296&&i+1<o&&(r=t.charCodeAt(i+1),(r&64512)===56320&&(n=65536+(n-55296<<10)+(r-56320),i++)),a+=n<128?1:n<2048?2:n<65536?3:4;for(e=new Uint8Array(a),s=0,i=0;s<a;i++)n=t.charCodeAt(i),(n&64512)===55296&&i+1<o&&(r=t.charCodeAt(i+1),(r&64512)===56320&&(n=65536+(n-55296<<10)+(r-56320),i++)),n<128?e[s++]=n:n<2048?(e[s++]=192|n>>>6,e[s++]=128|n&63):n<65536?(e[s++]=224|n>>>12,e[s++]=128|n>>>6&63,e[s++]=128|n&63):(e[s++]=240|n>>>18,e[s++]=128|n>>>12&63,e[s++]=128|n>>>6&63,e[s++]=128|n&63);return e};const LU=(t,e)=>{if(e<65534&&t.subarray&&mE)return String.fromCharCode.apply(null,t.length===e?t:t.subarray(0,e));let n="";for(let r=0;r<e;r++)n+=String.fromCharCode(t[r]);return n};var RU=(t,e)=>{const n=e||t.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(t.subarray(0,e));let r,i;const s=new Array(n*2);for(i=0,r=0;r<n;){let o=t[r++];if(o<128){s[i++]=o;continue}let a=Gd[o];if(a>4){s[i++]=65533,r+=a-1;continue}for(o&=a===2?31:a===3?15:7;a>1&&r<n;)o=o<<6|t[r++]&63,a--;if(a>1){s[i++]=65533;continue}o<65536?s[i++]=o:(o-=65536,s[i++]=55296|o>>10&1023,s[i++]=56320|o&1023)}return LU(s,i)},jU=(t,e)=>{e=e||t.length,e>t.length&&(e=t.length);let n=e-1;for(;n>=0&&(t[n]&192)===128;)n--;return n<0||n===0?e:n+Gd[t[n]]>e?n:e},G2={string2buf:PU,buf2string:RU,utf8border:jU};function DU(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var OU=DU;const ap=16209,MU=16191;var FU=function(e,n){let r,i,s,o,a,l,c,h,g,y,p,_,N,C,x,k,R,j,q,Q,D,S,T,F;const A=e.state;r=e.next_in,T=e.input,i=r+(e.avail_in-5),s=e.next_out,F=e.output,o=s-(n-e.avail_out),a=s+(e.avail_out-257),l=A.dmax,c=A.wsize,h=A.whave,g=A.wnext,y=A.window,p=A.hold,_=A.bits,N=A.lencode,C=A.distcode,x=(1<<A.lenbits)-1,k=(1<<A.distbits)-1;e:do{_<15&&(p+=T[r++]<<_,_+=8,p+=T[r++]<<_,_+=8),R=N[p&x];t:for(;;){if(j=R>>>24,p>>>=j,_-=j,j=R>>>16&255,j===0)F[s++]=R&65535;else if(j&16){q=R&65535,j&=15,j&&(_<j&&(p+=T[r++]<<_,_+=8),q+=p&(1<<j)-1,p>>>=j,_-=j),_<15&&(p+=T[r++]<<_,_+=8,p+=T[r++]<<_,_+=8),R=C[p&k];n:for(;;){if(j=R>>>24,p>>>=j,_-=j,j=R>>>16&255,j&16){if(Q=R&65535,j&=15,_<j&&(p+=T[r++]<<_,_+=8,_<j&&(p+=T[r++]<<_,_+=8)),Q+=p&(1<<j)-1,Q>l){e.msg="invalid distance too far back",A.mode=ap;break e}if(p>>>=j,_-=j,j=s-o,Q>j){if(j=Q-j,j>h&&A.sane){e.msg="invalid distance too far back",A.mode=ap;break e}if(D=0,S=y,g===0){if(D+=c-j,j<q){q-=j;do F[s++]=y[D++];while(--j);D=s-Q,S=F}}else if(g<j){if(D+=c+g-j,j-=g,j<q){q-=j;do F[s++]=y[D++];while(--j);if(D=0,g<q){j=g,q-=j;do F[s++]=y[D++];while(--j);D=s-Q,S=F}}}else if(D+=g-j,j<q){q-=j;do F[s++]=y[D++];while(--j);D=s-Q,S=F}for(;q>2;)F[s++]=S[D++],F[s++]=S[D++],F[s++]=S[D++],q-=3;q&&(F[s++]=S[D++],q>1&&(F[s++]=S[D++]))}else{D=s-Q;do F[s++]=F[D++],F[s++]=F[D++],F[s++]=F[D++],q-=3;while(q>2);q&&(F[s++]=F[D++],q>1&&(F[s++]=F[D++]))}}else if(j&64){e.msg="invalid distance code",A.mode=ap;break e}else{R=C[(R&65535)+(p&(1<<j)-1)];continue n}break}}else if(j&64)if(j&32){A.mode=MU;break e}else{e.msg="invalid literal/length code",A.mode=ap;break e}else{R=N[(R&65535)+(p&(1<<j)-1)];continue t}break}}while(r<i&&s<a);q=_>>3,r-=q,_-=q<<3,p&=(1<<_)-1,e.next_in=r,e.next_out=s,e.avail_in=r<i?5+(i-r):5-(r-i),e.avail_out=s<a?257+(a-s):257-(s-a),A.hold=p,A.bits=_};const Yc=15,s_=852,o_=592,a_=0,W0=1,l_=2,UU=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),VU=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),BU=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),zU=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),qU=(t,e,n,r,i,s,o,a)=>{const l=a.bits;let c=0,h=0,g=0,y=0,p=0,_=0,N=0,C=0,x=0,k=0,R,j,q,Q,D,S=null,T;const F=new Uint16Array(Yc+1),A=new Uint16Array(Yc+1);let I=null,L,ne,ie;for(c=0;c<=Yc;c++)F[c]=0;for(h=0;h<r;h++)F[e[n+h]]++;for(p=l,y=Yc;y>=1&&F[y]===0;y--);if(p>y&&(p=y),y===0)return i[s++]=1<<24|64<<16|0,i[s++]=1<<24|64<<16|0,a.bits=1,0;for(g=1;g<y&&F[g]===0;g++);for(p<g&&(p=g),C=1,c=1;c<=Yc;c++)if(C<<=1,C-=F[c],C<0)return-1;if(C>0&&(t===a_||y!==1))return-1;for(A[1]=0,c=1;c<Yc;c++)A[c+1]=A[c]+F[c];for(h=0;h<r;h++)e[n+h]!==0&&(o[A[e[n+h]]++]=h);if(t===a_?(S=I=o,T=20):t===W0?(S=UU,I=VU,T=257):(S=BU,I=zU,T=0),k=0,h=0,c=g,D=s,_=p,N=0,q=-1,x=1<<p,Q=x-1,t===W0&&x>s_||t===l_&&x>o_)return 1;for(;;){L=c-N,o[h]+1<T?(ne=0,ie=o[h]):o[h]>=T?(ne=I[o[h]-T],ie=S[o[h]-T]):(ne=96,ie=0),R=1<<c-N,j=1<<_,g=j;do j-=R,i[D+(k>>N)+j]=L<<24|ne<<16|ie|0;while(j!==0);for(R=1<<c-1;k&R;)R>>=1;if(R!==0?(k&=R-1,k+=R):k=0,h++,--F[c]===0){if(c===y)break;c=e[n+o[h]]}if(c>p&&(k&Q)!==q){for(N===0&&(N=p),D+=g,_=c-N,C=1<<_;_+N<y&&(C-=F[_+N],!(C<=0));)_++,C<<=1;if(x+=1<<_,t===W0&&x>s_||t===l_&&x>o_)return 1;q=k&Q,i[q]=p<<24|_<<16|D-s|0}}return k!==0&&(i[D+k]=c-N<<24|64<<16|0),a.bits=p,0};var hd=qU;const HU=0,gE=1,yE=2,{Z_FINISH:c_,Z_BLOCK:$U,Z_TREES:lp,Z_OK:Sc,Z_STREAM_END:WU,Z_NEED_DICT:GU,Z_STREAM_ERROR:Os,Z_DATA_ERROR:vE,Z_MEM_ERROR:wE,Z_BUF_ERROR:KU,Z_DEFLATED:u_}=fE,Pg=16180,h_=16181,d_=16182,f_=16183,p_=16184,m_=16185,g_=16186,y_=16187,v_=16188,w_=16189,jm=16190,Go=16191,G0=16192,x_=16193,K0=16194,b_=16195,__=16196,N_=16197,S_=16198,cp=16199,up=16200,A_=16201,E_=16202,T_=16203,k_=16204,I_=16205,Y0=16206,C_=16207,P_=16208,Vn=16209,xE=16210,bE=16211,YU=852,QU=592,XU=15,JU=XU,L_=t=>(t>>>24&255)+(t>>>8&65280)+((t&65280)<<8)+((t&255)<<24);function ZU(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Dc=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||e.mode<Pg||e.mode>bE?1:0},_E=t=>{if(Dc(t))return Os;const e=t.state;return t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=e.wrap&1),e.mode=Pg,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(YU),e.distcode=e.distdyn=new Int32Array(QU),e.sane=1,e.back=-1,Sc},NE=t=>{if(Dc(t))return Os;const e=t.state;return e.wsize=0,e.whave=0,e.wnext=0,_E(t)},SE=(t,e)=>{let n;if(Dc(t))return Os;const r=t.state;return e<0?(n=0,e=-e):(n=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?Os:(r.window!==null&&r.wbits!==e&&(r.window=null),r.wrap=n,r.wbits=e,NE(t))},AE=(t,e)=>{if(!t)return Os;const n=new ZU;t.state=n,n.strm=t,n.window=null,n.mode=Pg;const r=SE(t,e);return r!==Sc&&(t.state=null),r},eV=t=>AE(t,JU);let R_=!0,Q0,X0;const tV=t=>{if(R_){Q0=new Int32Array(512),X0=new Int32Array(32);let e=0;for(;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(hd(gE,t.lens,0,288,Q0,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;hd(yE,t.lens,0,32,X0,0,t.work,{bits:5}),R_=!1}t.lencode=Q0,t.lenbits=9,t.distcode=X0,t.distbits=5},EE=(t,e,n,r)=>{let i;const s=t.state;return s.window===null&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new Uint8Array(s.wsize)),r>=s.wsize?(s.window.set(e.subarray(n-s.wsize,n),0),s.wnext=0,s.whave=s.wsize):(i=s.wsize-s.wnext,i>r&&(i=r),s.window.set(e.subarray(n-r,n-r+i),s.wnext),r-=i,r?(s.window.set(e.subarray(n-r,n),0),s.wnext=r,s.whave=s.wsize):(s.wnext+=i,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=i))),0},nV=(t,e)=>{let n,r,i,s,o,a,l,c,h,g,y,p,_,N,C=0,x,k,R,j,q,Q,D,S;const T=new Uint8Array(4);let F,A;const I=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Dc(t)||!t.output||!t.input&&t.avail_in!==0)return Os;n=t.state,n.mode===Go&&(n.mode=G0),o=t.next_out,i=t.output,l=t.avail_out,s=t.next_in,r=t.input,a=t.avail_in,c=n.hold,h=n.bits,g=a,y=l,S=Sc;e:for(;;)switch(n.mode){case Pg:if(n.wrap===0){n.mode=G0;break}for(;h<16;){if(a===0)break e;a--,c+=r[s++]<<h,h+=8}if(n.wrap&2&&c===35615){n.wbits===0&&(n.wbits=15),n.check=0,T[0]=c&255,T[1]=c>>>8&255,n.check=yo(n.check,T,2,0),c=0,h=0,n.mode=h_;break}if(n.head&&(n.head.done=!1),!(n.wrap&1)||(((c&255)<<8)+(c>>8))%31){t.msg="incorrect header check",n.mode=Vn;break}if((c&15)!==u_){t.msg="unknown compression method",n.mode=Vn;break}if(c>>>=4,h-=4,D=(c&15)+8,n.wbits===0&&(n.wbits=D),D>15||D>n.wbits){t.msg="invalid window size",n.mode=Vn;break}n.dmax=1<<n.wbits,n.flags=0,t.adler=n.check=1,n.mode=c&512?w_:Go,c=0,h=0;break;case h_:for(;h<16;){if(a===0)break e;a--,c+=r[s++]<<h,h+=8}if(n.flags=c,(n.flags&255)!==u_){t.msg="unknown compression method",n.mode=Vn;break}if(n.flags&57344){t.msg="unknown header flags set",n.mode=Vn;break}n.head&&(n.head.text=c>>8&1),n.flags&512&&n.wrap&4&&(T[0]=c&255,T[1]=c>>>8&255,n.check=yo(n.check,T,2,0)),c=0,h=0,n.mode=d_;case d_:for(;h<32;){if(a===0)break e;a--,c+=r[s++]<<h,h+=8}n.head&&(n.head.time=c),n.flags&512&&n.wrap&4&&(T[0]=c&255,T[1]=c>>>8&255,T[2]=c>>>16&255,T[3]=c>>>24&255,n.check=yo(n.check,T,4,0)),c=0,h=0,n.mode=f_;case f_:for(;h<16;){if(a===0)break e;a--,c+=r[s++]<<h,h+=8}n.head&&(n.head.xflags=c&255,n.head.os=c>>8),n.flags&512&&n.wrap&4&&(T[0]=c&255,T[1]=c>>>8&255,n.check=yo(n.check,T,2,0)),c=0,h=0,n.mode=p_;case p_:if(n.flags&1024){for(;h<16;){if(a===0)break e;a--,c+=r[s++]<<h,h+=8}n.length=c,n.head&&(n.head.extra_len=c),n.flags&512&&n.wrap&4&&(T[0]=c&255,T[1]=c>>>8&255,n.check=yo(n.check,T,2,0)),c=0,h=0}else n.head&&(n.head.extra=null);n.mode=m_;case m_:if(n.flags&1024&&(p=n.length,p>a&&(p=a),p&&(n.head&&(D=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(r.subarray(s,s+p),D)),n.flags&512&&n.wrap&4&&(n.check=yo(n.check,r,p,s)),a-=p,s+=p,n.length-=p),n.length))break e;n.length=0,n.mode=g_;case g_:if(n.flags&2048){if(a===0)break e;p=0;do D=r[s+p++],n.head&&D&&n.length<65536&&(n.head.name+=String.fromCharCode(D));while(D&&p<a);if(n.flags&512&&n.wrap&4&&(n.check=yo(n.check,r,p,s)),a-=p,s+=p,D)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=y_;case y_:if(n.flags&4096){if(a===0)break e;p=0;do D=r[s+p++],n.head&&D&&n.length<65536&&(n.head.comment+=String.fromCharCode(D));while(D&&p<a);if(n.flags&512&&n.wrap&4&&(n.check=yo(n.check,r,p,s)),a-=p,s+=p,D)break e}else n.head&&(n.head.comment=null);n.mode=v_;case v_:if(n.flags&512){for(;h<16;){if(a===0)break e;a--,c+=r[s++]<<h,h+=8}if(n.wrap&4&&c!==(n.check&65535)){t.msg="header crc mismatch",n.mode=Vn;break}c=0,h=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),t.adler=n.check=0,n.mode=Go;break;case w_:for(;h<32;){if(a===0)break e;a--,c+=r[s++]<<h,h+=8}t.adler=n.check=L_(c),c=0,h=0,n.mode=jm;case jm:if(n.havedict===0)return t.next_out=o,t.avail_out=l,t.next_in=s,t.avail_in=a,n.hold=c,n.bits=h,GU;t.adler=n.check=1,n.mode=Go;case Go:if(e===$U||e===lp)break e;case G0:if(n.last){c>>>=h&7,h-=h&7,n.mode=Y0;break}for(;h<3;){if(a===0)break e;a--,c+=r[s++]<<h,h+=8}switch(n.last=c&1,c>>>=1,h-=1,c&3){case 0:n.mode=x_;break;case 1:if(tV(n),n.mode=cp,e===lp){c>>>=2,h-=2;break e}break;case 2:n.mode=__;break;case 3:t.msg="invalid block type",n.mode=Vn}c>>>=2,h-=2;break;case x_:for(c>>>=h&7,h-=h&7;h<32;){if(a===0)break e;a--,c+=r[s++]<<h,h+=8}if((c&65535)!==(c>>>16^65535)){t.msg="invalid stored block lengths",n.mode=Vn;break}if(n.length=c&65535,c=0,h=0,n.mode=K0,e===lp)break e;case K0:n.mode=b_;case b_:if(p=n.length,p){if(p>a&&(p=a),p>l&&(p=l),p===0)break e;i.set(r.subarray(s,s+p),o),a-=p,s+=p,l-=p,o+=p,n.length-=p;break}n.mode=Go;break;case __:for(;h<14;){if(a===0)break e;a--,c+=r[s++]<<h,h+=8}if(n.nlen=(c&31)+257,c>>>=5,h-=5,n.ndist=(c&31)+1,c>>>=5,h-=5,n.ncode=(c&15)+4,c>>>=4,h-=4,n.nlen>286||n.ndist>30){t.msg="too many length or distance symbols",n.mode=Vn;break}n.have=0,n.mode=N_;case N_:for(;n.have<n.ncode;){for(;h<3;){if(a===0)break e;a--,c+=r[s++]<<h,h+=8}n.lens[I[n.have++]]=c&7,c>>>=3,h-=3}for(;n.have<19;)n.lens[I[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,F={bits:n.lenbits},S=hd(HU,n.lens,0,19,n.lencode,0,n.work,F),n.lenbits=F.bits,S){t.msg="invalid code lengths set",n.mode=Vn;break}n.have=0,n.mode=S_;case S_:for(;n.have<n.nlen+n.ndist;){for(;C=n.lencode[c&(1<<n.lenbits)-1],x=C>>>24,k=C>>>16&255,R=C&65535,!(x<=h);){if(a===0)break e;a--,c+=r[s++]<<h,h+=8}if(R<16)c>>>=x,h-=x,n.lens[n.have++]=R;else{if(R===16){for(A=x+2;h<A;){if(a===0)break e;a--,c+=r[s++]<<h,h+=8}if(c>>>=x,h-=x,n.have===0){t.msg="invalid bit length repeat",n.mode=Vn;break}D=n.lens[n.have-1],p=3+(c&3),c>>>=2,h-=2}else if(R===17){for(A=x+3;h<A;){if(a===0)break e;a--,c+=r[s++]<<h,h+=8}c>>>=x,h-=x,D=0,p=3+(c&7),c>>>=3,h-=3}else{for(A=x+7;h<A;){if(a===0)break e;a--,c+=r[s++]<<h,h+=8}c>>>=x,h-=x,D=0,p=11+(c&127),c>>>=7,h-=7}if(n.have+p>n.nlen+n.ndist){t.msg="invalid bit length repeat",n.mode=Vn;break}for(;p--;)n.lens[n.have++]=D}}if(n.mode===Vn)break;if(n.lens[256]===0){t.msg="invalid code -- missing end-of-block",n.mode=Vn;break}if(n.lenbits=9,F={bits:n.lenbits},S=hd(gE,n.lens,0,n.nlen,n.lencode,0,n.work,F),n.lenbits=F.bits,S){t.msg="invalid literal/lengths set",n.mode=Vn;break}if(n.distbits=6,n.distcode=n.distdyn,F={bits:n.distbits},S=hd(yE,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,F),n.distbits=F.bits,S){t.msg="invalid distances set",n.mode=Vn;break}if(n.mode=cp,e===lp)break e;case cp:n.mode=up;case up:if(a>=6&&l>=258){t.next_out=o,t.avail_out=l,t.next_in=s,t.avail_in=a,n.hold=c,n.bits=h,FU(t,y),o=t.next_out,i=t.output,l=t.avail_out,s=t.next_in,r=t.input,a=t.avail_in,c=n.hold,h=n.bits,n.mode===Go&&(n.back=-1);break}for(n.back=0;C=n.lencode[c&(1<<n.lenbits)-1],x=C>>>24,k=C>>>16&255,R=C&65535,!(x<=h);){if(a===0)break e;a--,c+=r[s++]<<h,h+=8}if(k&&!(k&240)){for(j=x,q=k,Q=R;C=n.lencode[Q+((c&(1<<j+q)-1)>>j)],x=C>>>24,k=C>>>16&255,R=C&65535,!(j+x<=h);){if(a===0)break e;a--,c+=r[s++]<<h,h+=8}c>>>=j,h-=j,n.back+=j}if(c>>>=x,h-=x,n.back+=x,n.length=R,k===0){n.mode=I_;break}if(k&32){n.back=-1,n.mode=Go;break}if(k&64){t.msg="invalid literal/length code",n.mode=Vn;break}n.extra=k&15,n.mode=A_;case A_:if(n.extra){for(A=n.extra;h<A;){if(a===0)break e;a--,c+=r[s++]<<h,h+=8}n.length+=c&(1<<n.extra)-1,c>>>=n.extra,h-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=E_;case E_:for(;C=n.distcode[c&(1<<n.distbits)-1],x=C>>>24,k=C>>>16&255,R=C&65535,!(x<=h);){if(a===0)break e;a--,c+=r[s++]<<h,h+=8}if(!(k&240)){for(j=x,q=k,Q=R;C=n.distcode[Q+((c&(1<<j+q)-1)>>j)],x=C>>>24,k=C>>>16&255,R=C&65535,!(j+x<=h);){if(a===0)break e;a--,c+=r[s++]<<h,h+=8}c>>>=j,h-=j,n.back+=j}if(c>>>=x,h-=x,n.back+=x,k&64){t.msg="invalid distance code",n.mode=Vn;break}n.offset=R,n.extra=k&15,n.mode=T_;case T_:if(n.extra){for(A=n.extra;h<A;){if(a===0)break e;a--,c+=r[s++]<<h,h+=8}n.offset+=c&(1<<n.extra)-1,c>>>=n.extra,h-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){t.msg="invalid distance too far back",n.mode=Vn;break}n.mode=k_;case k_:if(l===0)break e;if(p=y-l,n.offset>p){if(p=n.offset-p,p>n.whave&&n.sane){t.msg="invalid distance too far back",n.mode=Vn;break}p>n.wnext?(p-=n.wnext,_=n.wsize-p):_=n.wnext-p,p>n.length&&(p=n.length),N=n.window}else N=i,_=o-n.offset,p=n.length;p>l&&(p=l),l-=p,n.length-=p;do i[o++]=N[_++];while(--p);n.length===0&&(n.mode=up);break;case I_:if(l===0)break e;i[o++]=n.length,l--,n.mode=up;break;case Y0:if(n.wrap){for(;h<32;){if(a===0)break e;a--,c|=r[s++]<<h,h+=8}if(y-=l,t.total_out+=y,n.total+=y,n.wrap&4&&y&&(t.adler=n.check=n.flags?yo(n.check,i,y,o-y):$2(n.check,i,y,o-y)),y=l,n.wrap&4&&(n.flags?c:L_(c))!==n.check){t.msg="incorrect data check",n.mode=Vn;break}c=0,h=0}n.mode=C_;case C_:if(n.wrap&&n.flags){for(;h<32;){if(a===0)break e;a--,c+=r[s++]<<h,h+=8}if(n.wrap&4&&c!==(n.total&4294967295)){t.msg="incorrect length check",n.mode=Vn;break}c=0,h=0}n.mode=P_;case P_:S=WU;break e;case Vn:S=vE;break e;case xE:return wE;case bE:default:return Os}return t.next_out=o,t.avail_out=l,t.next_in=s,t.avail_in=a,n.hold=c,n.bits=h,(n.wsize||y!==t.avail_out&&n.mode<Vn&&(n.mode<Y0||e!==c_))&&EE(t,t.output,t.next_out,y-t.avail_out),g-=t.avail_in,y-=t.avail_out,t.total_in+=g,t.total_out+=y,n.total+=y,n.wrap&4&&y&&(t.adler=n.check=n.flags?yo(n.check,i,y,t.next_out-y):$2(n.check,i,y,t.next_out-y)),t.data_type=n.bits+(n.last?64:0)+(n.mode===Go?128:0)+(n.mode===cp||n.mode===K0?256:0),(g===0&&y===0||e===c_)&&S===Sc&&(S=KU),S},rV=t=>{if(Dc(t))return Os;let e=t.state;return e.window&&(e.window=null),t.state=null,Sc},iV=(t,e)=>{if(Dc(t))return Os;const n=t.state;return n.wrap&2?(n.head=e,e.done=!1,Sc):Os},sV=(t,e)=>{const n=e.length;let r,i,s;return Dc(t)||(r=t.state,r.wrap!==0&&r.mode!==jm)?Os:r.mode===jm&&(i=1,i=$2(i,e,n,0),i!==r.check)?vE:(s=EE(t,e,n,n),s?(r.mode=xE,wE):(r.havedict=1,Sc))};var oV=NE,aV=SE,lV=_E,cV=eV,uV=AE,hV=nV,dV=rV,fV=iV,pV=sV,mV="pako inflate (from Nodeca project)",Xo={inflateReset:oV,inflateReset2:aV,inflateResetKeep:lV,inflateInit:cV,inflateInit2:uV,inflate:hV,inflateEnd:dV,inflateGetHeader:fV,inflateSetDictionary:pV,inflateInfo:mV};function gV(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var yV=gV;const TE=Object.prototype.toString,{Z_NO_FLUSH:vV,Z_FINISH:wV,Z_OK:Kd,Z_STREAM_END:J0,Z_NEED_DICT:Z0,Z_STREAM_ERROR:xV,Z_DATA_ERROR:j_,Z_MEM_ERROR:bV}=fE;function vf(t){this.options=pE.assign({chunkSize:1024*64,windowBits:15,to:""},t||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(t&&t.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15||(e.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new OU,this.strm.avail_out=0;let n=Xo.inflateInit2(this.strm,e.windowBits);if(n!==Kd)throw new Error(W2[n]);if(this.header=new yV,Xo.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=G2.string2buf(e.dictionary):TE.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(n=Xo.inflateSetDictionary(this.strm,e.dictionary),n!==Kd)))throw new Error(W2[n])}vf.prototype.push=function(t,e){const n=this.strm,r=this.options.chunkSize,i=this.options.dictionary;let s,o,a;if(this.ended)return!1;for(e===~~e?o=e:o=e===!0?wV:vV,TE.call(t)==="[object ArrayBuffer]"?n.input=new Uint8Array(t):n.input=t,n.next_in=0,n.avail_in=n.input.length;;){for(n.avail_out===0&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),s=Xo.inflate(n,o),s===Z0&&i&&(s=Xo.inflateSetDictionary(n,i),s===Kd?s=Xo.inflate(n,o):s===j_&&(s=Z0));n.avail_in>0&&s===J0&&n.state.wrap>0&&t[n.next_in]!==0;)Xo.inflateReset(n),s=Xo.inflate(n,o);switch(s){case xV:case j_:case Z0:case bV:return this.onEnd(s),this.ended=!0,!1}if(a=n.avail_out,n.next_out&&(n.avail_out===0||s===J0))if(this.options.to==="string"){let l=G2.utf8border(n.output,n.next_out),c=n.next_out-l,h=G2.buf2string(n.output,l);n.next_out=c,n.avail_out=r-c,c&&n.output.set(n.output.subarray(l,l+c),0),this.onData(h)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(!(s===Kd&&a===0)){if(s===J0)return s=Xo.inflateEnd(this.strm),this.onEnd(s),this.ended=!0,!0;if(n.avail_in===0)break}}return!0};vf.prototype.onData=function(t){this.chunks.push(t)};vf.prototype.onEnd=function(t){t===Kd&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=pE.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function _V(t,e){const n=new vf(e);if(n.push(t),n.err)throw n.msg||W2[n.err];return n.result}var NV=vf,SV=_V,AV={Inflate:NV,inflate:SV};const{Inflate:EV,inflate:TV}=AV;var D_=EV,kV=TV;const kE=[];for(let t=0;t<256;t++){let e=t;for(let n=0;n<8;n++)e&1?e=3988292384^e>>>1:e=e>>>1;kE[t]=e}const O_=4294967295;function IV(t,e,n){let r=t;for(let i=0;i<n;i++)r=kE[(r^e[i])&255]^r>>>8;return r}function CV(t,e){return(IV(O_,t,e)^O_)>>>0}function M_(t,e,n){const r=t.readUint32(),i=CV(new Uint8Array(t.buffer,t.byteOffset+t.offset-e-4,e),e);if(i!==r)throw new Error(`CRC mismatch for chunk ${n}. Expected ${r}, found ${i}`)}function IE(t,e,n){for(let r=0;r<n;r++)e[r]=t[r]}function CE(t,e,n,r){let i=0;for(;i<r;i++)e[i]=t[i];for(;i<n;i++)e[i]=t[i]+e[i-r]&255}function PE(t,e,n,r){let i=0;if(n.length===0)for(;i<r;i++)e[i]=t[i];else for(;i<r;i++)e[i]=t[i]+n[i]&255}function LE(t,e,n,r,i){let s=0;if(n.length===0){for(;s<i;s++)e[s]=t[s];for(;s<r;s++)e[s]=t[s]+(e[s-i]>>1)&255}else{for(;s<i;s++)e[s]=t[s]+(n[s]>>1)&255;for(;s<r;s++)e[s]=t[s]+(e[s-i]+n[s]>>1)&255}}function RE(t,e,n,r,i){let s=0;if(n.length===0){for(;s<i;s++)e[s]=t[s];for(;s<r;s++)e[s]=t[s]+e[s-i]&255}else{for(;s<i;s++)e[s]=t[s]+n[s]&255;for(;s<r;s++)e[s]=t[s]+PV(e[s-i],n[s],n[s-i])&255}}function PV(t,e,n){const r=t+e-n,i=Math.abs(r-t),s=Math.abs(r-e),o=Math.abs(r-n);return i<=s&&i<=o?t:s<=o?e:n}function LV(t,e,n,r,i,s){switch(t){case 0:IE(e,n,i);break;case 1:CE(e,n,i,s);break;case 2:PE(e,n,r,i);break;case 3:LE(e,n,r,i,s);break;case 4:RE(e,n,r,i,s);break;default:throw new Error(`Unsupported filter: ${t}`)}}const RV=new Uint16Array([255]),jV=new Uint8Array(RV.buffer),DV=jV[0]===255;function OV(t){const{data:e,width:n,height:r,channels:i,depth:s}=t,o=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],a=Math.ceil(s/8)*i,l=new Uint8Array(r*n*a);let c=0;for(let h=0;h<7;h++){const g=o[h],y=Math.ceil((n-g.x)/g.xStep),p=Math.ceil((r-g.y)/g.yStep);if(y<=0||p<=0)continue;const _=y*a,N=new Uint8Array(_);for(let C=0;C<p;C++){const x=e[c++],k=e.subarray(c,c+_);c+=_;const R=new Uint8Array(_);LV(x,k,R,N,_,a),N.set(R);for(let j=0;j<y;j++){const q=g.x+j*g.xStep,Q=g.y+C*g.yStep;if(!(q>=n||Q>=r))for(let D=0;D<a;D++)l[(Q*n+q)*a+D]=R[j*a+D]}}}if(s===16){const h=new Uint16Array(l.buffer);if(DV)for(let g=0;g<h.length;g++)h[g]=MV(h[g]);return h}else return l}function MV(t){return(t&255)<<8|t>>8&255}const FV=new Uint16Array([255]),UV=new Uint8Array(FV.buffer),VV=UV[0]===255,BV=new Uint8Array(0);function F_(t){const{data:e,width:n,height:r,channels:i,depth:s}=t,o=Math.ceil(s/8)*i,a=Math.ceil(s/8*i*n),l=new Uint8Array(r*a);let c=BV,h=0,g,y;for(let p=0;p<r;p++){switch(g=e.subarray(h+1,h+1+a),y=l.subarray(p*a,(p+1)*a),e[h]){case 0:IE(g,y,a);break;case 1:CE(g,y,a,o);break;case 2:PE(g,y,c,a);break;case 3:LE(g,y,c,a,o);break;case 4:RE(g,y,c,a,o);break;default:throw new Error(`Unsupported filter: ${e[h]}`)}c=y,h+=a+1}if(s===16){const p=new Uint16Array(l.buffer);if(VV)for(let _=0;_<p.length;_++)p[_]=zV(p[_]);return p}else return l}function zV(t){return(t&255)<<8|t>>8&255}const Mp=Uint8Array.of(137,80,78,71,13,10,26,10);function U_(t){if(!qV(t.readBytes(Mp.length)))throw new Error("wrong PNG signature")}function qV(t){if(t.length<Mp.length)return!1;for(let e=0;e<Mp.length;e++)if(t[e]!==Mp[e])return!1;return!0}const HV="tEXt",$V=0,jE=new TextDecoder("latin1");function WV(t){if(KV(t),t.length===0||t.length>79)throw new Error("keyword length must be between 1 and 79")}const GV=/^[\u0000-\u00FF]*$/;function KV(t){if(!GV.test(t))throw new Error("invalid latin1 text")}function YV(t,e,n){const r=DE(e);t[r]=QV(e,n-r.length-1)}function DE(t){for(t.mark();t.readByte()!==$V;);const e=t.offset;t.reset();const n=jE.decode(t.readBytes(e-t.offset-1));return t.skip(1),WV(n),n}function QV(t,e){return jE.decode(t.readBytes(e))}const os={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},e1={UNKNOWN:-1,DEFLATE:0},V_={UNKNOWN:-1,ADAPTIVE:0},t1={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},hp={NONE:0,BACKGROUND:1,PREVIOUS:2},n1={SOURCE:0,OVER:1};class XV extends f5{constructor(n,r={}){super(n);yn(this,"_checkCrc");yn(this,"_inflator");yn(this,"_png");yn(this,"_apng");yn(this,"_end");yn(this,"_hasPalette");yn(this,"_palette");yn(this,"_hasTransparency");yn(this,"_transparency");yn(this,"_compressionMethod");yn(this,"_filterMethod");yn(this,"_interlaceMethod");yn(this,"_colorType");yn(this,"_isAnimated");yn(this,"_numberOfFrames");yn(this,"_numberOfPlays");yn(this,"_frames");yn(this,"_writingDataChunks");const{checkCrc:i=!1}=r;this._checkCrc=i,this._inflator=new D_,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=e1.UNKNOWN,this._filterMethod=V_.UNKNOWN,this._interlaceMethod=t1.UNKNOWN,this._colorType=os.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(U_(this);!this._end;){const n=this.readUint32(),r=this.readChars(4);this.decodeChunk(n,r)}return this.decodeImage(),this._png}decodeApng(){for(U_(this);!this._end;){const n=this.readUint32(),r=this.readChars(4);this.decodeApngChunk(n,r)}return this.decodeApngImage(),this._apng}decodeChunk(n,r){const i=this.offset;switch(r){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(n);break;case"IDAT":this.decodeIDAT(n);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(n);break;case"iCCP":this.decodeiCCP(n);break;case HV:YV(this._png.text,this,n);break;case"pHYs":this.decodepHYs();break;default:this.skip(n);break}if(this.offset-i!==n)throw new Error(`Length mismatch while decoding chunk ${r}`);this._checkCrc?M_(this,n+4,r):this.skip(4)}decodeApngChunk(n,r){const i=this.offset;switch(r!=="fdAT"&&r!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),r){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(n);break;default:this.decodeChunk(n,r),this.offset=i+n;break}if(this.offset-i!==n)throw new Error(`Length mismatch while decoding chunk ${r}`);this._checkCrc?M_(this,n+4,r):this.skip(4)}decodeIHDR(){const n=this._png;n.width=this.readUint32(),n.height=this.readUint32(),n.depth=JV(this.readUint8());const r=this.readUint8();this._colorType=r;let i;switch(r){case os.GREYSCALE:i=1;break;case os.TRUECOLOUR:i=3;break;case os.INDEXED_COLOUR:i=1;break;case os.GREYSCALE_ALPHA:i=2;break;case os.TRUECOLOUR_ALPHA:i=4;break;case os.UNKNOWN:default:throw new Error(`Unknown color type: ${r}`)}if(this._png.channels=i,this._compressionMethod=this.readUint8(),this._compressionMethod!==e1.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const n={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(n)}decodePLTE(n){if(n%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${n}`);const r=n/3;this._hasPalette=!0;const i=[];this._palette=i;for(let s=0;s<r;s++)i.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(n){this._writingDataChunks=!0;const r=n,i=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,i,r)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(n)}decodeFDAT(n){this._writingDataChunks=!0;let r=n,i=this.offset+this.byteOffset;if(i+=4,r-=4,this._inflator.push(new Uint8Array(this.buffer,i,r)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(n)}decodetRNS(n){switch(this._colorType){case os.GREYSCALE:case os.TRUECOLOUR:{if(n%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${n}`);if(n/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${n/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(n/2);for(let r=0;r<n/2;r++)this._transparency[r]=this.readUint16();break}case os.INDEXED_COLOUR:{if(n>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${n} vs ${this._palette.length})`);let r=0;for(;r<n;r++){const i=this.readByte();this._palette[r].push(i)}for(;r<this._palette.length;r++)this._palette[r].push(255);break}case os.UNKNOWN:case os.GREYSCALE_ALPHA:case os.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(n){const r=DE(this),i=this.readUint8();if(i!==e1.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${i}`);const s=this.readBytes(n-r.length-2);this._png.iccEmbeddedProfile={name:r,profile:kV(s)}}decodepHYs(){const n=this.readUint32(),r=this.readUint32(),i=this.readByte();this._png.resolution={x:n,y:r,unit:i}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let n=0;n<this._numberOfFrames;n++){const r={sequenceNumber:this._frames[n].sequenceNumber,delayNumber:this._frames[n].delayNumber,delayDenominator:this._frames[n].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},i=this._frames.at(n);if(i){if(i.data=F_({data:i.data,width:i.width,height:i.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),n===0||i.xOffset===0&&i.yOffset===0&&i.width===this._png.width&&i.height===this._png.height)r.data=i.data;else{const s=this._apng.frames.at(n-1);this.disposeFrame(i,s,r),this.addFrameDataToCanvas(r,i)}this._apng.frames.push(r)}}return this._apng}disposeFrame(n,r,i){switch(n.disposeOp){case hp.NONE:break;case hp.BACKGROUND:for(let s=0;s<this._png.height;s++)for(let o=0;o<this._png.width;o++){const a=(s*n.width+o)*this._png.channels;for(let l=0;l<this._png.channels;l++)i.data[a+l]=0}break;case hp.PREVIOUS:i.data.set(r.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(n,r){const i=1<<this._png.depth,s=(o,a)=>{const l=((o+r.yOffset)*this._png.width+r.xOffset+a)*this._png.channels,c=(o*r.width+a)*this._png.channels;return{index:l,frameIndex:c}};switch(r.blendOp){case n1.SOURCE:for(let o=0;o<r.height;o++)for(let a=0;a<r.width;a++){const{index:l,frameIndex:c}=s(o,a);for(let h=0;h<this._png.channels;h++)n.data[l+h]=r.data[c+h]}break;case n1.OVER:for(let o=0;o<r.height;o++)for(let a=0;a<r.width;a++){const{index:l,frameIndex:c}=s(o,a);for(let h=0;h<this._png.channels;h++){const g=r.data[c+this._png.channels-1]/i,y=h%(this._png.channels-1)===0?1:r.data[c+h],p=Math.floor(g*y+(1-g)*n.data[l+h]);n.data[l+h]+=p}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){var r;if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const n=this._isAnimated?((r=this._frames)==null?void 0:r.at(0)).data:this._inflator.result;if(this._filterMethod!==V_.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===t1.NO_INTERLACE)this._png.data=F_({data:n,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===t1.ADAM7)this._png.data=OV({data:n,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const n=this._inflator.result,r=this._frames.at(-1);r?r.data=n:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:hp.NONE,blendOp:n1.SOURCE,data:n}),this._inflator=new D_,this._writingDataChunks=!1}}function JV(t){if(t!==1&&t!==2&&t!==4&&t!==8&&t!==16)throw new Error(`invalid bit depth: ${t}`);return t}var B_;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.METRE=1]="METRE"})(B_||(B_={}));function ZV(t,e){return new XV(t,e).decode()}var Tt=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function r1(){Tt.console&&typeof Tt.console.log=="function"&&Tt.console.log.apply(Tt.console,arguments)}var kn={log:r1,warn:function(t){Tt.console&&(typeof Tt.console.warn=="function"?Tt.console.warn.apply(Tt.console,arguments):r1.call(null,arguments))},error:function(t){Tt.console&&(typeof Tt.console.error=="function"?Tt.console.error.apply(Tt.console,arguments):r1(t))}};function i1(t,e,n){var r=new XMLHttpRequest;r.open("GET",t),r.responseType="blob",r.onload=function(){Ql(r.response,e,n)},r.onerror=function(){kn.error("could not download file")},r.send()}function z_(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function dp(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var Ql=Tt.saveAs||((typeof window>"u"?"undefined":vn(window))!=="object"||window!==Tt?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,n){var r=Tt.URL||Tt.webkitURL,i=document.createElement("a");e=e||t.name||"download",i.download=e,i.rel="noopener",typeof t=="string"?(i.href=t,i.origin!==location.origin?z_(i.href)?i1(t,e,n):dp(i,i.target="_blank"):dp(i)):(i.href=r.createObjectURL(t),setTimeout(function(){r.revokeObjectURL(i.href)},4e4),setTimeout(function(){dp(i)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,n){if(e=e||t.name||"download",typeof t=="string")if(z_(t))i1(t,e,n);else{var r=document.createElement("a");r.href=t,r.target="_blank",setTimeout(function(){dp(r)})}else navigator.msSaveOrOpenBlob(function(i,s){return s===void 0?s={autoBom:!1}:vn(s)!=="object"&&(kn.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i}(t,n),e)}:function(t,e,n,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof t=="string")return i1(t,e,n);var i=t.type==="application/octet-stream",s=/constructor/i.test(Tt.HTMLElement)||Tt.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||i&&s)&&(typeof FileReader>"u"?"undefined":vn(FileReader))==="object"){var a=new FileReader;a.onloadend=function(){var h=a.result;h=o?h:h.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=h:location=h,r=null},a.readAsDataURL(t)}else{var l=Tt.URL||Tt.webkitURL,c=l.createObjectURL(t);r?r.location=c:location.href=c,r=null,setTimeout(function(){l.revokeObjectURL(c)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function OE(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(a){return[parseInt(a[1]),parseInt(a[2]),parseInt(a[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}}],r=0;r<n.length;r++){var i=n[r].re,s=n[r].process,o=i.exec(t);o&&(e=s(o),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var a=this.r.toString(16),l=this.g.toString(16),c=this.b.toString(16);return a.length==1&&(a="0"+a),l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),"#"+a+l+c}}var Fp=Tt.atob.bind(Tt),q_=Tt.btoa.bind(Tt);/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function s1(t,e){var n=t[0],r=t[1],i=t[2],s=t[3];n=li(n,r,i,s,e[0],7,-680876936),s=li(s,n,r,i,e[1],12,-389564586),i=li(i,s,n,r,e[2],17,606105819),r=li(r,i,s,n,e[3],22,-1044525330),n=li(n,r,i,s,e[4],7,-176418897),s=li(s,n,r,i,e[5],12,1200080426),i=li(i,s,n,r,e[6],17,-1473231341),r=li(r,i,s,n,e[7],22,-45705983),n=li(n,r,i,s,e[8],7,1770035416),s=li(s,n,r,i,e[9],12,-1958414417),i=li(i,s,n,r,e[10],17,-42063),r=li(r,i,s,n,e[11],22,-1990404162),n=li(n,r,i,s,e[12],7,1804603682),s=li(s,n,r,i,e[13],12,-40341101),i=li(i,s,n,r,e[14],17,-1502002290),n=ci(n,r=li(r,i,s,n,e[15],22,1236535329),i,s,e[1],5,-165796510),s=ci(s,n,r,i,e[6],9,-1069501632),i=ci(i,s,n,r,e[11],14,643717713),r=ci(r,i,s,n,e[0],20,-373897302),n=ci(n,r,i,s,e[5],5,-701558691),s=ci(s,n,r,i,e[10],9,38016083),i=ci(i,s,n,r,e[15],14,-660478335),r=ci(r,i,s,n,e[4],20,-405537848),n=ci(n,r,i,s,e[9],5,568446438),s=ci(s,n,r,i,e[14],9,-1019803690),i=ci(i,s,n,r,e[3],14,-187363961),r=ci(r,i,s,n,e[8],20,1163531501),n=ci(n,r,i,s,e[13],5,-1444681467),s=ci(s,n,r,i,e[2],9,-51403784),i=ci(i,s,n,r,e[7],14,1735328473),n=ui(n,r=ci(r,i,s,n,e[12],20,-1926607734),i,s,e[5],4,-378558),s=ui(s,n,r,i,e[8],11,-2022574463),i=ui(i,s,n,r,e[11],16,1839030562),r=ui(r,i,s,n,e[14],23,-35309556),n=ui(n,r,i,s,e[1],4,-1530992060),s=ui(s,n,r,i,e[4],11,1272893353),i=ui(i,s,n,r,e[7],16,-155497632),r=ui(r,i,s,n,e[10],23,-1094730640),n=ui(n,r,i,s,e[13],4,681279174),s=ui(s,n,r,i,e[0],11,-358537222),i=ui(i,s,n,r,e[3],16,-722521979),r=ui(r,i,s,n,e[6],23,76029189),n=ui(n,r,i,s,e[9],4,-640364487),s=ui(s,n,r,i,e[12],11,-421815835),i=ui(i,s,n,r,e[15],16,530742520),n=hi(n,r=ui(r,i,s,n,e[2],23,-995338651),i,s,e[0],6,-198630844),s=hi(s,n,r,i,e[7],10,1126891415),i=hi(i,s,n,r,e[14],15,-1416354905),r=hi(r,i,s,n,e[5],21,-57434055),n=hi(n,r,i,s,e[12],6,1700485571),s=hi(s,n,r,i,e[3],10,-1894986606),i=hi(i,s,n,r,e[10],15,-1051523),r=hi(r,i,s,n,e[1],21,-2054922799),n=hi(n,r,i,s,e[8],6,1873313359),s=hi(s,n,r,i,e[15],10,-30611744),i=hi(i,s,n,r,e[6],15,-1560198380),r=hi(r,i,s,n,e[13],21,1309151649),n=hi(n,r,i,s,e[4],6,-145523070),s=hi(s,n,r,i,e[11],10,-1120210379),i=hi(i,s,n,r,e[2],15,718787259),r=hi(r,i,s,n,e[9],21,-343485551),t[0]=sl(n,t[0]),t[1]=sl(r,t[1]),t[2]=sl(i,t[2]),t[3]=sl(s,t[3])}function Lg(t,e,n,r,i,s){return e=sl(sl(e,t),sl(r,s)),sl(e<<i|e>>>32-i,n)}function li(t,e,n,r,i,s,o){return Lg(e&n|~e&r,t,e,i,s,o)}function ci(t,e,n,r,i,s,o){return Lg(e&r|n&~r,t,e,i,s,o)}function ui(t,e,n,r,i,s,o){return Lg(e^n^r,t,e,i,s,o)}function hi(t,e,n,r,i,s,o){return Lg(n^(e|~r),t,e,i,s,o)}function ME(t){var e,n=t.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)s1(r,eB(t.substring(e-64,e)));t=t.substring(e-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)i[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(s1(r,i),e=0;e<16;e++)i[e]=0;return i[14]=8*n,s1(r,i),r}function eB(t){var e,n=[];for(e=0;e<64;e+=4)n[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return n}var H_="0123456789abcdef".split("");function tB(t){for(var e="",n=0;n<4;n++)e+=H_[t>>8*n+4&15]+H_[t>>8*n&15];return e}function nB(t){return String.fromCharCode(255&t,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function K2(t){return ME(t).map(nB).join("")}var rB=function(t){for(var e=0;e<t.length;e++)t[e]=tB(t[e]);return t.join("")}(ME("hello"))!="5d41402abc4b2a76b9719d911017c592";function sl(t,e){if(rB){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function Y2(t,e){var n,r,i,s;if(t!==n){for(var o=(i=t,s=1+(256/t.length|0),new Array(s+1).join(i)),a=[],l=0;l<256;l++)a[l]=l;var c=0;for(l=0;l<256;l++){var h=a[l];c=(c+h+o.charCodeAt(l))%256,a[l]=a[c],a[c]=h}n=t,r=a}else a=r;var g=e.length,y=0,p=0,_="";for(l=0;l<g;l++)p=(p+(h=a[y=(y+1)%256]))%256,a[y]=a[p],a[p]=h,o=a[(a[y]+a[p])%256],_+=String.fromCharCode(e.charCodeAt(l)^o);return _}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var $_={print:4,modify:8,copy:16,"annot-forms":32};function tu(t,e,n,r){this.v=1,this.r=2;var i=192;t.forEach(function(a){if($_.perm!==void 0)throw new Error("Invalid permission: "+a);i+=$_[a]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var s=(e+this.padding).substr(0,32),o=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,o),this.P=-(1+(255^i)),this.encryptionKey=K2(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=Y2(this.encryptionKey,this.padding)}function nu(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",n=t.length,r=0;r<n;r++){var i=t.charCodeAt(r);e+=i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?"#"+("0"+i.toString(16)).slice(-2):t[r]}return e}function W_(t){if(vn(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(n,r,i){if(i=i||!1,typeof n!="string"||typeof r!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(n)||(e[n]={});var s=Math.random().toString(35);return e[n][s]=[r,!!i],s},this.unsubscribe=function(n){for(var r in e)if(e[r][n])return delete e[r][n],Object.keys(e[r]).length===0&&delete e[r],!0;return!1},this.publish=function(n){if(e.hasOwnProperty(n)){var r=Array.prototype.slice.call(arguments,1),i=[];for(var s in e[n]){var o=e[n][s];try{o[0].apply(t,r)}catch(a){Tt.console&&kn.error("jsPDF PubSub Error",a.message,a)}o[1]&&i.push(s)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function Dm(t){if(!(this instanceof Dm))return new Dm(t);var e="opacity,stroke-opacity".split(",");for(var n in t)t.hasOwnProperty(n)&&e.indexOf(n)>=0&&(this[n]=t[n]);this.id="",this.objectNumber=-1}function FE(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function Xl(t,e,n,r,i){if(!(this instanceof Xl))return new Xl(t,e,n,r,i);this.type=t==="axial"?2:3,this.coords=e,this.colors=n,FE.call(this,r,i)}function gu(t,e,n,r,i){if(!(this instanceof gu))return new gu(t,e,n,r,i);this.boundingBox=t,this.xStep=e,this.yStep=n,this.stream="",this.cloneIndex=0,FE.call(this,r,i)}function vt(t){var e,n=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],i=arguments[2],s=arguments[3],o=[],a=1,l=16,c="S",h=null;vn(t=t||{})==="object"&&(n=t.orientation,r=t.unit||r,i=t.format||i,s=t.compress||t.compressPdf||s,(h=t.encryption||null)!==null&&(h.userPassword=h.userPassword||"",h.ownerPassword=h.ownerPassword||"",h.userPermissions=h.userPermissions||[]),a=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(l=t.floatPrecision),c=t.defaultPathOperation||"S"),o=t.filters||(s===!0?["FlateEncode"]:o),r=r||"mm",n=(""+(n||"P")).toLowerCase();var g=t.putOnlyUsedFonts||!1,y={},p={internal:{},__private__:{}};p.__private__.PubSub=W_;var _="1.3",N=p.__private__.getPdfVersion=function(){return _};p.__private__.setPdfVersion=function(v){_=v};var C={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};p.__private__.getPageFormats=function(){return C};var x=p.__private__.getPageFormat=function(v){return C[v]};i=i||"a4";var k="compat",R="advanced",j=k;function q(){this.saveGraphicsState(),V(new nt(wt,0,0,-wt,0,Ns()*wt).toString()+" cm"),this.setFontSize(this.getFontSize()/wt),c="n",j=R}function Q(){this.restoreGraphicsState(),c="S",j=k}var D=p.__private__.combineFontStyleAndFontWeight=function(v,M){if(v=="bold"&&M=="normal"||v=="bold"&&M==400||v=="normal"&&M=="italic"||v=="bold"&&M=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return M&&(v=M==400||M==="normal"?v==="italic"?"italic":"normal":M!=700&&M!=="bold"||v!=="normal"?(M==700?"bold":M)+""+v:"bold"),v};p.advancedAPI=function(v){var M=j===k;return M&&q.call(this),typeof v!="function"||(v(this),M&&Q.call(this)),this},p.compatAPI=function(v){var M=j===R;return M&&Q.call(this),typeof v!="function"||(v(this),M&&q.call(this)),this},p.isAdvancedAPI=function(){return j===R};var S,T=function(v){if(j!==R)throw new Error(v+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},F=p.roundToPrecision=p.__private__.roundToPrecision=function(v,M){var X=e||M;if(isNaN(v)||isNaN(X))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return v.toFixed(X).replace(/0+$/,"")};S=p.hpf=p.__private__.hpf=typeof l=="number"?function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.hpf");return F(v,l)}:l==="smart"?function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.hpf");return F(v,v>-1&&v<1?16:5)}:function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.hpf");return F(v,16)};var A=p.f2=p.__private__.f2=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.f2");return F(v,2)},I=p.__private__.f3=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.f3");return F(v,3)},L=p.scale=p.__private__.scale=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.scale");return j===k?v*wt:j===R?v:void 0},ne=function(v){return L(function(M){return j===k?Ns()-M:j===R?M:void 0}(v))};p.__private__.setPrecision=p.setPrecision=function(v){typeof parseInt(v,10)=="number"&&(e=parseInt(v,10))};var ie,ue="00000000000000000000000000000000",fe=p.__private__.getFileId=function(){return ue},J=p.__private__.setFileId=function(v){return ue=v!==void 0&&/^[a-fA-F0-9]{32}$/.test(v)?v.toUpperCase():ue.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),h!==null&&(An=new tu(h.userPermissions,h.userPassword,h.ownerPassword,ue)),ue};p.setFileId=function(v){return J(v),this},p.getFileId=function(){return fe()};var le=p.__private__.convertDateToPDFDate=function(v){var M=v.getTimezoneOffset(),X=M<0?"+":"-",oe=Math.floor(Math.abs(M/60)),pe=Math.abs(M%60),ke=[X,Y(oe),"'",Y(pe),"'"].join("");return["D:",v.getFullYear(),Y(v.getMonth()+1),Y(v.getDate()),Y(v.getHours()),Y(v.getMinutes()),Y(v.getSeconds()),ke].join("")},xe=p.__private__.convertPDFDateToDate=function(v){var M=parseInt(v.substr(2,4),10),X=parseInt(v.substr(6,2),10)-1,oe=parseInt(v.substr(8,2),10),pe=parseInt(v.substr(10,2),10),ke=parseInt(v.substr(12,2),10),Re=parseInt(v.substr(14,2),10);return new Date(M,X,oe,pe,ke,Re,0)},we=p.__private__.setCreationDate=function(v){var M;if(v===void 0&&(v=new Date),v instanceof Date)M=le(v);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(v))throw new Error("Invalid argument passed to jsPDF.setCreationDate");M=v}return ie=M},O=p.__private__.getCreationDate=function(v){var M=ie;return v==="jsDate"&&(M=xe(ie)),M};p.setCreationDate=function(v){return we(v),this},p.getCreationDate=function(v){return O(v)};var W,Y=p.__private__.padd2=function(v){return("0"+parseInt(v)).slice(-2)},K=p.__private__.padd2Hex=function(v){return("00"+(v=v.toString())).substr(v.length)},re=0,ae=[],ve=[],te=0,de=[],ge=[],Se=!1,Te=ve;p.__private__.setCustomOutputDestination=function(v){Se=!0,Te=v};var Ue=function(v){Se||(Te=v)};p.__private__.resetCustomOutputDestination=function(){Se=!1,Te=ve};var V=p.__private__.out=function(v){return v=v.toString(),te+=v.length+1,Te.push(v),Te},De=p.__private__.write=function(v){return V(arguments.length===1?v.toString():Array.prototype.join.call(arguments," "))},Ze=p.__private__.getArrayBuffer=function(v){for(var M=v.length,X=new ArrayBuffer(M),oe=new Uint8Array(X);M--;)oe[M]=v.charCodeAt(M);return X},Ve=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];p.__private__.getStandardFonts=function(){return Ve};var Ce=t.fontSize||16;p.__private__.setFontSize=p.setFontSize=function(v){return Ce=j===R?v/wt:v,this};var Xe,qe=p.__private__.getFontSize=p.getFontSize=function(){return j===k?Ce:Ce*wt},it=t.R2L||!1;p.__private__.setR2L=p.setR2L=function(v){return it=v,this},p.__private__.getR2L=p.getR2L=function(){return it};var Ae,bt=p.__private__.setZoomMode=function(v){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(v))Xe=v;else if(isNaN(v)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(v)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+v+'" is not recognized.');Xe=v}else Xe=parseInt(v,10)};p.__private__.getZoomMode=function(){return Xe};var gt,$e=p.__private__.setPageMode=function(v){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(v)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+v+'" is not recognized.');Ae=v};p.__private__.getPageMode=function(){return Ae};var ot=p.__private__.setLayoutMode=function(v){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(v)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+v+'" is not recognized.');gt=v};p.__private__.getLayoutMode=function(){return gt},p.__private__.setDisplayMode=p.setDisplayMode=function(v,M,X){return bt(v),ot(M),$e(X),this};var Nt={title:"",subject:"",author:"",keywords:"",creator:""};p.__private__.getDocumentProperty=function(v){if(Object.keys(Nt).indexOf(v)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Nt[v]},p.__private__.getDocumentProperties=function(){return Nt},p.__private__.setDocumentProperties=p.setProperties=p.setDocumentProperties=function(v){for(var M in Nt)Nt.hasOwnProperty(M)&&v[M]&&(Nt[M]=v[M]);return this},p.__private__.setDocumentProperty=function(v,M){if(Object.keys(Nt).indexOf(v)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Nt[v]=M};var Ye,wt,et,Ot,Ft,Ge={},ft={},Et=[],at={},Ct={},Qe={},tt={},kt=null,ze=0,Ke=[],ut=new W_(p),qn=t.hotfixes||[],zt={},en={},qt=[],nt=function v(M,X,oe,pe,ke,Re){if(!(this instanceof v))return new v(M,X,oe,pe,ke,Re);isNaN(M)&&(M=1),isNaN(X)&&(X=0),isNaN(oe)&&(oe=0),isNaN(pe)&&(pe=1),isNaN(ke)&&(ke=0),isNaN(Re)&&(Re=0),this._matrix=[M,X,oe,pe,ke,Re]};Object.defineProperty(nt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(v){this._matrix[0]=v}}),Object.defineProperty(nt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(v){this._matrix[1]=v}}),Object.defineProperty(nt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(v){this._matrix[2]=v}}),Object.defineProperty(nt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(v){this._matrix[3]=v}}),Object.defineProperty(nt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(v){this._matrix[4]=v}}),Object.defineProperty(nt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(v){this._matrix[5]=v}}),Object.defineProperty(nt.prototype,"a",{get:function(){return this._matrix[0]},set:function(v){this._matrix[0]=v}}),Object.defineProperty(nt.prototype,"b",{get:function(){return this._matrix[1]},set:function(v){this._matrix[1]=v}}),Object.defineProperty(nt.prototype,"c",{get:function(){return this._matrix[2]},set:function(v){this._matrix[2]=v}}),Object.defineProperty(nt.prototype,"d",{get:function(){return this._matrix[3]},set:function(v){this._matrix[3]=v}}),Object.defineProperty(nt.prototype,"e",{get:function(){return this._matrix[4]},set:function(v){this._matrix[4]=v}}),Object.defineProperty(nt.prototype,"f",{get:function(){return this._matrix[5]},set:function(v){this._matrix[5]=v}}),Object.defineProperty(nt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(nt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(nt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(nt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),nt.prototype.join=function(v){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(S).join(v)},nt.prototype.multiply=function(v){var M=v.sx*this.sx+v.shy*this.shx,X=v.sx*this.shy+v.shy*this.sy,oe=v.shx*this.sx+v.sy*this.shx,pe=v.shx*this.shy+v.sy*this.sy,ke=v.tx*this.sx+v.ty*this.shx+this.tx,Re=v.tx*this.shy+v.ty*this.sy+this.ty;return new nt(M,X,oe,pe,ke,Re)},nt.prototype.decompose=function(){var v=this.sx,M=this.shy,X=this.shx,oe=this.sy,pe=this.tx,ke=this.ty,Re=Math.sqrt(v*v+M*M),rt=(v/=Re)*X+(M/=Re)*oe;X-=v*rt,oe-=M*rt;var ht=Math.sqrt(X*X+oe*oe);return rt/=ht,v*(oe/=ht)<M*(X/=ht)&&(v=-v,M=-M,rt=-rt,Re=-Re),{scale:new nt(Re,0,0,ht,0,0),translate:new nt(1,0,0,1,pe,ke),rotate:new nt(v,M,-M,v,0,0),skew:new nt(1,0,rt,1,0,0)}},nt.prototype.toString=function(v){return this.join(" ")},nt.prototype.inversed=function(){var v=this.sx,M=this.shy,X=this.shx,oe=this.sy,pe=this.tx,ke=this.ty,Re=1/(v*oe-M*X),rt=oe*Re,ht=-M*Re,St=-X*Re,Pt=v*Re;return new nt(rt,ht,St,Pt,-rt*pe-St*ke,-ht*pe-Pt*ke)},nt.prototype.applyToPoint=function(v){var M=v.x*this.sx+v.y*this.shx+this.tx,X=v.x*this.shy+v.y*this.sy+this.ty;return new bs(M,X)},nt.prototype.applyToRectangle=function(v){var M=this.applyToPoint(v),X=this.applyToPoint(new bs(v.x+v.w,v.y+v.h));return new Ta(M.x,M.y,X.x-M.x,X.y-M.y)},nt.prototype.clone=function(){var v=this.sx,M=this.shy,X=this.shx,oe=this.sy,pe=this.tx,ke=this.ty;return new nt(v,M,X,oe,pe,ke)},p.Matrix=nt;var Ut=p.matrixMult=function(v,M){return M.multiply(v)},Fn=new nt(1,0,0,1,0,0);p.unitMatrix=p.identityMatrix=Fn;var Sn=function(v,M){if(!Ct[v]){var X=(M instanceof Xl?"Sh":"P")+(Object.keys(at).length+1).toString(10);M.id=X,Ct[v]=X,at[X]=M,ut.publish("addPattern",M)}};p.ShadingPattern=Xl,p.TilingPattern=gu,p.addShadingPattern=function(v,M){return T("addShadingPattern()"),Sn(v,M),this},p.beginTilingPattern=function(v){T("beginTilingPattern()"),uo(v.boundingBox[0],v.boundingBox[1],v.boundingBox[2]-v.boundingBox[0],v.boundingBox[3]-v.boundingBox[1],v.matrix)},p.endTilingPattern=function(v,M){T("endTilingPattern()"),M.stream=ge[W].join(`
`),Sn(v,M),ut.publish("endTilingPattern",M),qt.pop().restore()};var _n,an=p.__private__.newObject=function(){var v=tn();return Wt(v,!0),v},tn=p.__private__.newObjectDeferred=function(){return re++,ae[re]=function(){return te},re},Wt=function(v,M){return M=typeof M=="boolean"&&M,ae[v]=te,M&&V(v+" 0 obj"),v},ni=p.__private__.newAdditionalObject=function(){var v={objId:tn(),content:""};return de.push(v),v},Nr=tn(),Un=tn(),Sr=p.__private__.decodeColorString=function(v){var M=v.split(" ");if(M.length!==2||M[1]!=="g"&&M[1]!=="G")M.length!==5||M[4]!=="k"&&M[4]!=="K"||(M=[(1-M[0])*(1-M[3]),(1-M[1])*(1-M[3]),(1-M[2])*(1-M[3]),"r"]);else{var X=parseFloat(M[0]);M=[X,X,X,"r"]}for(var oe="#",pe=0;pe<3;pe++)oe+=("0"+Math.floor(255*parseFloat(M[pe])).toString(16)).slice(-2);return oe},Ar=p.__private__.encodeColorString=function(v){var M;typeof v=="string"&&(v={ch1:v});var X=v.ch1,oe=v.ch2,pe=v.ch3,ke=v.ch4,Re=v.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof X=="string"&&X.charAt(0)!=="#"){var rt=new OE(X);if(rt.ok)X=rt.toHex();else if(!/^\d*\.?\d*$/.test(X))throw new Error('Invalid color "'+X+'" passed to jsPDF.encodeColorString.')}if(typeof X=="string"&&/^#[0-9A-Fa-f]{3}$/.test(X)&&(X="#"+X[1]+X[1]+X[2]+X[2]+X[3]+X[3]),typeof X=="string"&&/^#[0-9A-Fa-f]{6}$/.test(X)){var ht=parseInt(X.substr(1),16);X=ht>>16&255,oe=ht>>8&255,pe=255&ht}if(oe===void 0||ke===void 0&&X===oe&&oe===pe)M=typeof X=="string"?X+" "+Re[0]:v.precision===2?A(X/255)+" "+Re[0]:I(X/255)+" "+Re[0];else if(ke===void 0||vn(ke)==="object"){if(ke&&!isNaN(ke.a)&&ke.a===0)return["1.","1.","1.",Re[1]].join(" ");M=typeof X=="string"?[X,oe,pe,Re[1]].join(" "):v.precision===2?[A(X/255),A(oe/255),A(pe/255),Re[1]].join(" "):[I(X/255),I(oe/255),I(pe/255),Re[1]].join(" ")}else M=typeof X=="string"?[X,oe,pe,ke,Re[2]].join(" "):v.precision===2?[A(X),A(oe),A(pe),A(ke),Re[2]].join(" "):[I(X),I(oe),I(pe),I(ke),Re[2]].join(" ");return M},Er=p.__private__.getFilters=function(){return o},dn=p.__private__.putStream=function(v){var M=(v=v||{}).data||"",X=v.filters||Er(),oe=v.alreadyAppliedFilters||[],pe=v.addLength1||!1,ke=M.length,Re=v.objectId,rt=function(er){return er};if(h!==null&&Re===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");h!==null&&(rt=An.encryptor(Re,0));var ht={};X===!0&&(X=["FlateEncode"]);var St=v.additionalKeyValues||[],Pt=(ht=vt.API.processDataByFilters!==void 0?vt.API.processDataByFilters(M,X):{data:M,reverseChain:[]}).reverseChain+(Array.isArray(oe)?oe.join(" "):oe.toString());if(ht.data.length!==0&&(St.push({key:"Length",value:ht.data.length}),pe===!0&&St.push({key:"Length1",value:ke})),Pt.length!=0)if(Pt.split("/").length-1==1)St.push({key:"Filter",value:Pt});else{St.push({key:"Filter",value:"["+Pt+"]"});for(var Kt=0;Kt<St.length;Kt+=1)if(St[Kt].key==="DecodeParms"){for(var hn=[],$n=0;$n<ht.reverseChain.split("/").length-1;$n+=1)hn.push("null");hn.push(St[Kt].value),St[Kt].value="["+hn.join(" ")+"]"}}V("<<");for(var pn=0;pn<St.length;pn++)V("/"+St[pn].key+" "+St[pn].value);V(">>"),ht.data.length!==0&&(V("stream"),V(rt(ht.data)),V("endstream"))},Tr=p.__private__.putPage=function(v){var M=v.number,X=v.data,oe=v.objId,pe=v.contentsObjId;Wt(oe,!0),V("<</Type /Page"),V("/Parent "+v.rootDictionaryObjId+" 0 R"),V("/Resources "+v.resourceDictionaryObjId+" 0 R"),V("/MediaBox ["+parseFloat(S(v.mediaBox.bottomLeftX))+" "+parseFloat(S(v.mediaBox.bottomLeftY))+" "+S(v.mediaBox.topRightX)+" "+S(v.mediaBox.topRightY)+"]"),v.cropBox!==null&&V("/CropBox ["+S(v.cropBox.bottomLeftX)+" "+S(v.cropBox.bottomLeftY)+" "+S(v.cropBox.topRightX)+" "+S(v.cropBox.topRightY)+"]"),v.bleedBox!==null&&V("/BleedBox ["+S(v.bleedBox.bottomLeftX)+" "+S(v.bleedBox.bottomLeftY)+" "+S(v.bleedBox.topRightX)+" "+S(v.bleedBox.topRightY)+"]"),v.trimBox!==null&&V("/TrimBox ["+S(v.trimBox.bottomLeftX)+" "+S(v.trimBox.bottomLeftY)+" "+S(v.trimBox.topRightX)+" "+S(v.trimBox.topRightY)+"]"),v.artBox!==null&&V("/ArtBox ["+S(v.artBox.bottomLeftX)+" "+S(v.artBox.bottomLeftY)+" "+S(v.artBox.topRightX)+" "+S(v.artBox.topRightY)+"]"),typeof v.userUnit=="number"&&v.userUnit!==1&&V("/UserUnit "+v.userUnit),ut.publish("putPage",{objId:oe,pageContext:Ke[M],pageNumber:M,page:X}),V("/Contents "+pe+" 0 R"),V(">>"),V("endobj");var ke=X.join(`
`);return j===R&&(ke+=`
Q`),Wt(pe,!0),dn({data:ke,filters:Er(),objectId:pe}),V("endobj"),oe},Dr=p.__private__.putPages=function(){var v,M,X=[];for(v=1;v<=ze;v++)Ke[v].objId=tn(),Ke[v].contentsObjId=tn();for(v=1;v<=ze;v++)X.push(Tr({number:v,data:ge[v],objId:Ke[v].objId,contentsObjId:Ke[v].contentsObjId,mediaBox:Ke[v].mediaBox,cropBox:Ke[v].cropBox,bleedBox:Ke[v].bleedBox,trimBox:Ke[v].trimBox,artBox:Ke[v].artBox,userUnit:Ke[v].userUnit,rootDictionaryObjId:Nr,resourceDictionaryObjId:Un}));Wt(Nr,!0),V("<</Type /Pages");var oe="/Kids [";for(M=0;M<ze;M++)oe+=X[M]+" 0 R ";V(oe+"]"),V("/Count "+ze),V(">>"),V("endobj"),ut.publish("postPutPages")},zr=function(v){ut.publish("putFont",{font:v,out:V,newObject:an,putStream:dn}),v.isAlreadyPutted!==!0&&(v.objectNumber=an(),V("<<"),V("/Type /Font"),V("/BaseFont /"+nu(v.postScriptName)),V("/Subtype /Type1"),typeof v.encoding=="string"&&V("/Encoding /"+v.encoding),V("/FirstChar 32"),V("/LastChar 255"),V(">>"),V("endobj"))},bi=function(v){v.objectNumber=an();var M=[];M.push({key:"Type",value:"/XObject"}),M.push({key:"Subtype",value:"/Form"}),M.push({key:"BBox",value:"["+[S(v.x),S(v.y),S(v.x+v.width),S(v.y+v.height)].join(" ")+"]"}),M.push({key:"Matrix",value:"["+v.matrix.toString()+"]"});var X=v.pages[1].join(`
`);dn({data:X,additionalKeyValues:M,objectId:v.objectNumber}),V("endobj")},gs=function(v,M){M||(M=21);var X=an(),oe=function(Re,rt){var ht,St=[],Pt=1/(rt-1);for(ht=0;ht<1;ht+=Pt)St.push(ht);if(St.push(1),Re[0].offset!=0){var Kt={offset:0,color:Re[0].color};Re.unshift(Kt)}if(Re[Re.length-1].offset!=1){var hn={offset:1,color:Re[Re.length-1].color};Re.push(hn)}for(var $n="",pn=0,er=0;er<St.length;er++){for(ht=St[er];ht>Re[pn+1].offset;)pn++;var Wn=Re[pn].offset,tr=(ht-Wn)/(Re[pn+1].offset-Wn),Gn=Re[pn].color,Mi=Re[pn+1].color;$n+=K(Math.round((1-tr)*Gn[0]+tr*Mi[0]).toString(16))+K(Math.round((1-tr)*Gn[1]+tr*Mi[1]).toString(16))+K(Math.round((1-tr)*Gn[2]+tr*Mi[2]).toString(16))}return $n.trim()}(v.colors,M),pe=[];pe.push({key:"FunctionType",value:"0"}),pe.push({key:"Domain",value:"[0.0 1.0]"}),pe.push({key:"Size",value:"["+M+"]"}),pe.push({key:"BitsPerSample",value:"8"}),pe.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),pe.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),dn({data:oe,additionalKeyValues:pe,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:X}),V("endobj"),v.objectNumber=an(),V("<< /ShadingType "+v.type),V("/ColorSpace /DeviceRGB");var ke="/Coords ["+S(parseFloat(v.coords[0]))+" "+S(parseFloat(v.coords[1]))+" ";v.type===2?ke+=S(parseFloat(v.coords[2]))+" "+S(parseFloat(v.coords[3])):ke+=S(parseFloat(v.coords[2]))+" "+S(parseFloat(v.coords[3]))+" "+S(parseFloat(v.coords[4]))+" "+S(parseFloat(v.coords[5])),V(ke+="]"),v.matrix&&V("/Matrix ["+v.matrix.toString()+"]"),V("/Function "+X+" 0 R"),V("/Extend [true true]"),V(">>"),V("endobj")},jo=function(v,M){var X=tn(),oe=an();M.push({resourcesOid:X,objectOid:oe}),v.objectNumber=oe;var pe=[];pe.push({key:"Type",value:"/Pattern"}),pe.push({key:"PatternType",value:"1"}),pe.push({key:"PaintType",value:"1"}),pe.push({key:"TilingType",value:"1"}),pe.push({key:"BBox",value:"["+v.boundingBox.map(S).join(" ")+"]"}),pe.push({key:"XStep",value:S(v.xStep)}),pe.push({key:"YStep",value:S(v.yStep)}),pe.push({key:"Resources",value:X+" 0 R"}),v.matrix&&pe.push({key:"Matrix",value:"["+v.matrix.toString()+"]"}),dn({data:v.stream,additionalKeyValues:pe,objectId:v.objectNumber}),V("endobj")},oh=function(v){for(var M in v.objectNumber=an(),V("<<"),v)switch(M){case"opacity":V("/ca "+A(v[M]));break;case"stroke-opacity":V("/CA "+A(v[M]))}V(">>"),V("endobj")},oo=function(v){Wt(v.resourcesOid,!0),V("<<"),V("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),function(){for(var M in V("/Font <<"),Ge)Ge.hasOwnProperty(M)&&(g===!1||g===!0&&y.hasOwnProperty(M))&&V("/"+M+" "+Ge[M].objectNumber+" 0 R");V(">>")}(),function(){if(Object.keys(at).length>0){for(var M in V("/Shading <<"),at)at.hasOwnProperty(M)&&at[M]instanceof Xl&&at[M].objectNumber>=0&&V("/"+M+" "+at[M].objectNumber+" 0 R");ut.publish("putShadingPatternDict"),V(">>")}}(),function(M){if(Object.keys(at).length>0){for(var X in V("/Pattern <<"),at)at.hasOwnProperty(X)&&at[X]instanceof p.TilingPattern&&at[X].objectNumber>=0&&at[X].objectNumber<M&&V("/"+X+" "+at[X].objectNumber+" 0 R");ut.publish("putTilingPatternDict"),V(">>")}}(v.objectOid),function(){if(Object.keys(Qe).length>0){var M;for(M in V("/ExtGState <<"),Qe)Qe.hasOwnProperty(M)&&Qe[M].objectNumber>=0&&V("/"+M+" "+Qe[M].objectNumber+" 0 R");ut.publish("putGStateDict"),V(">>")}}(),function(){for(var M in V("/XObject <<"),zt)zt.hasOwnProperty(M)&&zt[M].objectNumber>=0&&V("/"+M+" "+zt[M].objectNumber+" 0 R");ut.publish("putXobjectDict"),V(">>")}(),V(">>"),V("endobj")},Ll=function(v){ft[v.fontName]=ft[v.fontName]||{},ft[v.fontName][v.fontStyle]=v.id},ba=function(v,M,X,oe,pe){var ke={id:"F"+(Object.keys(Ge).length+1).toString(10),postScriptName:v,fontName:M,fontStyle:X,encoding:oe,isStandardFont:pe||!1,metadata:{}};return ut.publish("addFont",{font:ke,instance:this}),Ge[ke.id]=ke,Ll(ke),ke.id},Or=p.__private__.pdfEscape=p.pdfEscape=function(v,M){return function(X,oe){var pe,ke,Re,rt,ht,St,Pt,Kt,hn;if(Re=(oe=oe||{}).sourceEncoding||"Unicode",ht=oe.outputEncoding,(oe.autoencode||ht)&&Ge[Ye].metadata&&Ge[Ye].metadata[Re]&&Ge[Ye].metadata[Re].encoding&&(rt=Ge[Ye].metadata[Re].encoding,!ht&&Ge[Ye].encoding&&(ht=Ge[Ye].encoding),!ht&&rt.codePages&&(ht=rt.codePages[0]),typeof ht=="string"&&(ht=rt[ht]),ht)){for(Pt=!1,St=[],pe=0,ke=X.length;pe<ke;pe++)(Kt=ht[X.charCodeAt(pe)])?St.push(String.fromCharCode(Kt)):St.push(X[pe]),St[pe].charCodeAt(0)>>8&&(Pt=!0);X=St.join("")}for(pe=X.length;Pt===void 0&&pe!==0;)X.charCodeAt(pe-1)>>8&&(Pt=!0),pe--;if(!Pt)return X;for(St=oe.noBOM?[]:[254,255],pe=0,ke=X.length;pe<ke;pe++){if((hn=(Kt=X.charCodeAt(pe))>>8)>>8)throw new Error("Character at position "+pe+" of string '"+X+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");St.push(hn),St.push(Kt-(hn<<8))}return String.fromCharCode.apply(void 0,St)}(v,M).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Ki=p.__private__.beginPage=function(v){ge[++ze]=[],Ke[ze]={objId:0,contentsObjId:0,userUnit:Number(a),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(v[0]),topRightY:Number(v[1])}},jl(ze),Ue(ge[W])},_a=function(v,M){var X,oe,pe;switch(n=M||n,typeof v=="string"&&(X=x(v.toLowerCase()),Array.isArray(X)&&(oe=X[0],pe=X[1])),Array.isArray(v)&&(oe=v[0]*wt,pe=v[1]*wt),isNaN(oe)&&(oe=i[0],pe=i[1]),(oe>14400||pe>14400)&&(kn.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),oe=Math.min(14400,oe),pe=Math.min(14400,pe)),i=[oe,pe],n.substr(0,1)){case"l":pe>oe&&(i=[pe,oe]);break;case"p":oe>pe&&(i=[pe,oe])}Ki(i),_t(Sa),V(Us),Nn!==0&&V(Nn+" J"),Vl!==0&&V(Vl+" j"),ut.publish("addPage",{pageNumber:ze})},Rl=function(v){v>0&&v<=ze&&(ge.splice(v,1),Ke.splice(v,1),ze--,W>ze&&(W=ze),this.setPage(W))},jl=function(v){v>0&&v<=ze&&(W=v)},Dl=p.__private__.getNumberOfPages=p.getNumberOfPages=function(){return ge.length-1},Ol=function(v,M,X){var oe,pe=void 0;return X=X||{},v=v!==void 0?v:Ge[Ye].fontName,M=M!==void 0?M:Ge[Ye].fontStyle,oe=v.toLowerCase(),ft[oe]!==void 0&&ft[oe][M]!==void 0?pe=ft[oe][M]:ft[v]!==void 0&&ft[v][M]!==void 0?pe=ft[v][M]:X.disableWarning===!1&&kn.warn("Unable to look up font label for font '"+v+"', '"+M+"'. Refer to getFontList() for available fonts."),pe||X.noFallback||(pe=ft.times[M])==null&&(pe=ft.times.normal),pe},Di=p.__private__.putInfo=function(){var v=an(),M=function(oe){return oe};for(var X in h!==null&&(M=An.encryptor(v,0)),V("<<"),V("/Producer ("+Or(M("jsPDF "+vt.version))+")"),Nt)Nt.hasOwnProperty(X)&&Nt[X]&&V("/"+X.substr(0,1).toUpperCase()+X.substr(1)+" ("+Or(M(Nt[X]))+")");V("/CreationDate ("+Or(M(ie))+")"),V(">>"),V("endobj")},ao=p.__private__.putCatalog=function(v){var M=(v=v||{}).rootDictionaryObjId||Nr;switch(an(),V("<<"),V("/Type /Catalog"),V("/Pages "+M+" 0 R"),Xe||(Xe="fullwidth"),Xe){case"fullwidth":V("/OpenAction [3 0 R /FitH null]");break;case"fullheight":V("/OpenAction [3 0 R /FitV null]");break;case"fullpage":V("/OpenAction [3 0 R /Fit]");break;case"original":V("/OpenAction [3 0 R /XYZ null null 1]");break;default:var X=""+Xe;X.substr(X.length-1)==="%"&&(Xe=parseInt(Xe)/100),typeof Xe=="number"&&V("/OpenAction [3 0 R /XYZ null null "+A(Xe)+"]")}switch(gt||(gt="continuous"),gt){case"continuous":V("/PageLayout /OneColumn");break;case"single":V("/PageLayout /SinglePage");break;case"two":case"twoleft":V("/PageLayout /TwoColumnLeft");break;case"tworight":V("/PageLayout /TwoColumnRight")}Ae&&V("/PageMode /"+Ae),ut.publish("putCatalog"),V(">>"),V("endobj")},Mc=p.__private__.putTrailer=function(){V("trailer"),V("<<"),V("/Size "+(re+1)),V("/Root "+re+" 0 R"),V("/Info "+(re-1)+" 0 R"),h!==null&&V("/Encrypt "+An.oid+" 0 R"),V("/ID [ <"+ue+"> <"+ue+"> ]"),V(">>")},Hn=p.__private__.putHeader=function(){V("%PDF-"+_),V("%")},Fc=p.__private__.putXRef=function(){var v="0000000000";V("xref"),V("0 "+(re+1)),V("0000000000 65535 f ");for(var M=1;M<=re;M++)typeof ae[M]=="function"?V((v+ae[M]()).slice(-10)+" 00000 n "):ae[M]!==void 0?V((v+ae[M]).slice(-10)+" 00000 n "):V("0000000000 00000 n ")},ys=p.__private__.buildDocument=function(){var v;re=0,te=0,ve=[],ae=[],de=[],Nr=tn(),Un=tn(),Ue(ve),ut.publish("buildDocument"),Hn(),Dr(),function(){ut.publish("putAdditionalObjects");for(var X=0;X<de.length;X++){var oe=de[X];Wt(oe.objId,!0),V(oe.content),V("endobj")}ut.publish("postPutAdditionalObjects")}(),v=[],function(){for(var X in Ge)Ge.hasOwnProperty(X)&&(g===!1||g===!0&&y.hasOwnProperty(X))&&zr(Ge[X])}(),function(){var X;for(X in Qe)Qe.hasOwnProperty(X)&&oh(Qe[X])}(),function(){for(var X in zt)zt.hasOwnProperty(X)&&bi(zt[X])}(),function(X){var oe;for(oe in at)at.hasOwnProperty(oe)&&(at[oe]instanceof Xl?gs(at[oe]):at[oe]instanceof gu&&jo(at[oe],X))}(v),ut.publish("putResources"),v.forEach(oo),oo({resourcesOid:Un,objectOid:Number.MAX_SAFE_INTEGER}),ut.publish("postPutResources"),h!==null&&(An.oid=an(),V("<<"),V("/Filter /Standard"),V("/V "+An.v),V("/R "+An.r),V("/U <"+An.toHexString(An.U)+">"),V("/O <"+An.toHexString(An.O)+">"),V("/P "+An.P),V(">>"),V("endobj")),Di(),ao();var M=te;return Fc(),Mc(),V("startxref"),V(""+M),V("%%EOF"),Ue(ge[W]),ve.join(`
`)},Do=p.__private__.getBlob=function(v){return new Blob([Ze(v)],{type:"application/pdf"})},Ml=p.output=p.__private__.output=(_n=function(v,M){switch(typeof(M=M||{})=="string"?M={filename:M}:M.filename=M.filename||"generated.pdf",v){case void 0:return ys();case"save":p.save(M.filename);break;case"arraybuffer":return Ze(ys());case"blob":return Do(ys());case"bloburi":case"bloburl":if(Tt.URL!==void 0&&typeof Tt.URL.createObjectURL=="function")return Tt.URL&&Tt.URL.createObjectURL(Do(ys()))||void 0;kn.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var X="",oe=ys();try{X=q_(oe)}catch{X=q_(unescape(encodeURIComponent(oe)))}return"data:application/pdf;filename="+M.filename+";base64,"+X;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Tt)==="[object Window]"){var pe="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",ke=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';M.pdfObjectUrl&&(pe=M.pdfObjectUrl,ke="");var Re='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+pe+'"'+ke+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(M)+");<\/script></body></html>",rt=Tt.open();return rt!==null&&rt.document.write(Re),rt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Tt)==="[object Window]"){var ht='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(M.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+M.filename+'" width="500px" height="400px" /></body></html>',St=Tt.open();if(St!==null){St.document.write(ht);var Pt=this;St.document.documentElement.querySelector("#pdfViewer").onload=function(){St.document.title=M.filename,St.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Pt.output("bloburl"))}}return St}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Tt)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Kt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",M)+'"></iframe></body></html>',hn=Tt.open();if(hn!==null&&(hn.document.write(Kt),hn.document.title=M.filename),hn||typeof safari>"u")return hn;break;case"datauri":case"dataurl":return Tt.document.location.href=this.output("datauristring",M);default:return null}},_n.foo=function(){try{return _n.apply(this,arguments)}catch(X){var v=X.stack||"";~v.indexOf(" at ")&&(v=v.split(" at ")[1]);var M="Error in function "+v.split(`
`)[0].split("<")[0]+": "+X.message;if(!Tt.console)throw new Error(M);Tt.console.error(M,X),Tt.alert&&alert(M)}},_n.foo.bar=_n,_n.foo),Oi=function(v){return Array.isArray(qn)===!0&&qn.indexOf(v)>-1};switch(r){case"pt":wt=1;break;case"mm":wt=72/25.4;break;case"cm":wt=72/2.54;break;case"in":wt=72;break;case"px":wt=Oi("px_scaling")==1?.75:96/72;break;case"pc":case"em":wt=12;break;case"ex":wt=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);wt=r}var An=null;we(),J();var kr=p.__private__.getPageInfo=p.getPageInfo=function(v){if(isNaN(v)||v%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Ke[v].objId,pageNumber:v,pageContext:Ke[v]}},Oo=p.__private__.getPageInfoByObjId=function(v){if(isNaN(v)||v%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var M in Ke)if(Ke[M].objId===v)break;return kr(M)},Na=p.__private__.getCurrentPageInfo=p.getCurrentPageInfo=function(){return{objId:Ke[W].objId,pageNumber:W,pageContext:Ke[W]}};p.addPage=function(){return _a.apply(this,arguments),this},p.setPage=function(){return jl.apply(this,arguments),Ue.call(this,ge[W]),this},p.insertPage=function(v){return this.addPage(),this.movePage(W,v),this},p.movePage=function(v,M){var X,oe;if(v>M){X=ge[v],oe=Ke[v];for(var pe=v;pe>M;pe--)ge[pe]=ge[pe-1],Ke[pe]=Ke[pe-1];ge[M]=X,Ke[M]=oe,this.setPage(M)}else if(v<M){X=ge[v],oe=Ke[v];for(var ke=v;ke<M;ke++)ge[ke]=ge[ke+1],Ke[ke]=Ke[ke+1];ge[M]=X,Ke[M]=oe,this.setPage(M)}return this},p.deletePage=function(){return Rl.apply(this,arguments),this},p.__private__.text=p.text=function(v,M,X,oe,pe){var ke,Re,rt,ht,St,Pt,Kt,hn,$n,pn=(oe=oe||{}).scope||this;if(typeof v=="number"&&typeof M=="number"&&(typeof X=="string"||Array.isArray(X))){var er=X;X=M,M=v,v=er}if(arguments[3]instanceof nt==0?(rt=arguments[4],ht=arguments[5],vn(Kt=arguments[3])==="object"&&Kt!==null||(typeof rt=="string"&&(ht=rt,rt=null),typeof Kt=="string"&&(ht=Kt,Kt=null),typeof Kt=="number"&&(rt=Kt,Kt=null),oe={flags:Kt,angle:rt,align:ht})):(T("The transform parameter of text() with a Matrix value"),$n=pe),isNaN(M)||isNaN(X)||v==null)throw new Error("Invalid arguments passed to jsPDF.text");if(v.length===0)return pn;var Wn,tr="",Gn=typeof oe.lineHeightFactor=="number"?oe.lineHeightFactor:co,Mi=pn.internal.scaleFactor;function Ss(fn){return fn=fn.split("	").join(Array(oe.TabLen||9).join(" ")),Or(fn,Kt)}function As(fn){for(var En,cr=fn.concat(),Ir=[],zo=cr.length;zo--;)typeof(En=cr.shift())=="string"?Ir.push(En):Array.isArray(fn)&&(En.length===1||En[1]===void 0&&En[2]===void 0)?Ir.push(En[0]):Ir.push([En[0],En[1],En[2]]);return Ir}function f(fn,En){var cr;if(typeof fn=="string")cr=En(fn)[0];else if(Array.isArray(fn)){for(var Ir,zo,xh=fn.concat(),Wc=[],xf=xh.length;xf--;)typeof(Ir=xh.shift())=="string"?Wc.push(En(Ir)[0]):Array.isArray(Ir)&&typeof Ir[0]=="string"&&(zo=En(Ir[0],Ir[1],Ir[2]),Wc.push([zo[0],zo[1],zo[2]]));cr=Wc}return cr}var b=!1,P=!0;if(typeof v=="string")b=!0;else if(Array.isArray(v)){var $=v.concat();Re=[];for(var me,Ne=$.length;Ne--;)(typeof(me=$.shift())!="string"||Array.isArray(me)&&typeof me[0]!="string")&&(P=!1);b=P}if(b===!1)throw new Error('Type of text must be string or Array. "'+v+'" is not recognized.');typeof v=="string"&&(v=v.match(/[\r?\n]/)?v.split(/\r\n|\r|\n/g):[v]);var Be=Ce/pn.internal.scaleFactor,Qt=Be*(Gn-1);switch(oe.baseline){case"bottom":X-=Qt;break;case"top":X+=Be-Qt;break;case"hanging":X+=Be-2*Qt;break;case"middle":X+=Be/2-Qt}if((Pt=oe.maxWidth||0)>0&&(typeof v=="string"?v=pn.splitTextToSize(v,Pt):Object.prototype.toString.call(v)==="[object Array]"&&(v=v.reduce(function(fn,En){return fn.concat(pn.splitTextToSize(En,Pt))},[]))),ke={text:v,x:M,y:X,options:oe,mutex:{pdfEscape:Or,activeFontKey:Ye,fonts:Ge,activeFontSize:Ce}},ut.publish("preProcessText",ke),v=ke.text,rt=(oe=ke.options).angle,$n instanceof nt==0&&rt&&typeof rt=="number"){rt*=Math.PI/180,oe.rotationDirection===0&&(rt=-rt),j===R&&(rt=-rt);var Kn=Math.cos(rt),Ht=Math.sin(rt);$n=new nt(Kn,Ht,-Ht,Kn,0,0)}else rt&&rt instanceof nt&&($n=rt);j!==R||$n||($n=Fn),(St=oe.charSpace||xs)!==void 0&&(tr+=S(L(St))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(hn=oe.horizontalScale)!==void 0&&(tr+=S(100*hn)+` Tz
`),oe.lang;var ln=-1,Cn=oe.renderingMode!==void 0?oe.renderingMode:oe.stroke,Qi=pn.internal.getCurrentPageInfo().pageContext;switch(Cn){case 0:case!1:case"fill":ln=0;break;case 1:case!0:case"stroke":ln=1;break;case 2:case"fillThenStroke":ln=2;break;case 3:case"invisible":ln=3;break;case 4:case"fillAndAddForClipping":ln=4;break;case 5:case"strokeAndAddPathForClipping":ln=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":ln=6;break;case 7:case"addToPathForClipping":ln=7}var ri=Qi.usedRenderingMode!==void 0?Qi.usedRenderingMode:-1;ln!==-1?tr+=ln+` Tr
`:ri!==-1&&(tr+=`0 Tr
`),ln!==-1&&(Qi.usedRenderingMode=ln),ht=oe.align||"left";var Hr,Vs=Ce*Gn,fh=pn.internal.pageSize.getWidth(),ph=Ge[Ye];St=oe.charSpace||xs,Pt=oe.maxWidth||0,Kt=Object.assign({autoencode:!0,noBOM:!0},oe.flags);var Ia=[],ql=function(fn){return pn.getStringUnitWidth(fn,{font:ph,charSpace:St,fontSize:Ce,doKerning:!1})*Ce/Mi};if(Object.prototype.toString.call(v)==="[object Array]"){var Xi;Re=As(v),ht!=="left"&&(Hr=Re.map(ql));var Ji,Ca=0;if(ht==="right"){M-=Hr[0],v=[],Ne=Re.length;for(var Bo=0;Bo<Ne;Bo++)Bo===0?(Ji=Mr(M),Xi=Fs(X)):(Ji=L(Ca-Hr[Bo]),Xi=-Vs),v.push([Re[Bo],Ji,Xi]),Ca=Hr[Bo]}else if(ht==="center"){M-=Hr[0]/2,v=[],Ne=Re.length;for(var Pa=0;Pa<Ne;Pa++)Pa===0?(Ji=Mr(M),Xi=Fs(X)):(Ji=L((Ca-Hr[Pa])/2),Xi=-Vs),v.push([Re[Pa],Ji,Xi]),Ca=Hr[Pa]}else if(ht==="left"){v=[],Ne=Re.length;for(var mh=0;mh<Ne;mh++)v.push(Re[mh])}else if(ht==="justify"&&ph.encoding==="Identity-H"){v=[],Ne=Re.length,Pt=Pt!==0?Pt:fh;for(var $c=0,lr=0;lr<Ne;lr++)if(Xi=lr===0?Fs(X):-Vs,Ji=lr===0?Mr(M):$c,lr<Ne-1){var wf=L((Pt-Hr[lr])/(Re[lr].split(" ").length-1)),fo=Re[lr].split(" ");v.push([fo[0]+" ",Ji,Xi]),$c=0;for(var po=1;po<fo.length;po++){var gh=(ql(fo[po-1]+" "+fo[po])-ql(fo[po]))*Mi+wf;po==fo.length-1?v.push([fo[po],gh,0]):v.push([fo[po]+" ",gh,0]),$c-=gh}}else v.push([Re[lr],Ji,Xi]);v.push(["",$c,0])}else{if(ht!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(v=[],Ne=Re.length,Pt=Pt!==0?Pt:fh,lr=0;lr<Ne;lr++){Xi=lr===0?Fs(X):-Vs,Ji=lr===0?Mr(M):0;var yh=Re[lr].split(" ").length-1,vh=yh>0?(Pt-Hr[lr])/yh:0;lr<Ne-1?Ia.push(S(L(vh))):Ia.push(0),v.push([Re[lr],Ji,Xi])}}}(typeof oe.R2L=="boolean"?oe.R2L:it)===!0&&(v=f(v,function(fn,En,cr){return[fn.split("").reverse().join(""),En,cr]})),ke={text:v,x:M,y:X,options:oe,mutex:{pdfEscape:Or,activeFontKey:Ye,fonts:Ge,activeFontSize:Ce}},ut.publish("postProcessText",ke),v=ke.text,Wn=ke.mutex.isHex||!1;var wh=Ge[Ye].encoding;wh!=="WinAnsiEncoding"&&wh!=="StandardEncoding"||(v=f(v,function(fn,En,cr){return[Ss(fn),En,cr]})),Re=As(v),v=[];for(var La,Ra,ja,Hl=Array.isArray(Re[0])?1:0,Da="",$l=function(fn,En,cr){var Ir="";return cr instanceof nt?(cr=typeof oe.angle=="number"?Ut(cr,new nt(1,0,0,1,fn,En)):Ut(new nt(1,0,0,1,fn,En),cr),j===R&&(cr=Ut(new nt(1,0,0,-1,0,0),cr)),Ir=cr.join(" ")+` Tm
`):Ir=S(fn)+" "+S(En)+` Td
`,Ir},Es=0;Es<Re.length;Es++){switch(Da="",Hl){case 1:ja=(Wn?"<":"(")+Re[Es][0]+(Wn?">":")"),La=parseFloat(Re[Es][1]),Ra=parseFloat(Re[Es][2]);break;case 0:ja=(Wn?"<":"(")+Re[Es]+(Wn?">":")"),La=Mr(M),Ra=Fs(X)}Ia!==void 0&&Ia[Es]!==void 0&&(Da=Ia[Es]+` Tw
`),Es===0?v.push(Da+$l(La,Ra,$n)+ja):Hl===0?v.push(Da+ja):Hl===1&&v.push(Da+$l(La,Ra,$n)+ja)}v=Hl===0?v.join(` Tj
T* `):v.join(` Tj
`),v+=` Tj
`;var mo=`BT
/`;return mo+=Ye+" "+Ce+` Tf
`,mo+=S(Ce*Gn)+` TL
`,mo+=Yi+`
`,mo+=tr,mo+=v,V(mo+="ET"),y[Ye]=!0,pn};var Uc=p.__private__.clip=p.clip=function(v){return V(v==="evenodd"?"W*":"W"),this};p.clipEvenOdd=function(){return Uc("evenodd")},p.__private__.discardPath=p.discardPath=function(){return V("n"),this};var Gt=p.__private__.isValidStyle=function(v){var M=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(v)!==-1&&(M=!0),M};p.__private__.setDefaultPathOperation=p.setDefaultPathOperation=function(v){return Gt(v)&&(c=v),this};var Mo=p.__private__.getStyle=p.getStyle=function(v){var M=c;switch(v){case"D":case"S":M="S";break;case"F":M="f";break;case"FD":case"DF":M="B";break;case"f":case"f*":case"B":case"B*":M=v}return M},lo=p.close=function(){return V("h"),this};p.stroke=function(){return V("S"),this},p.fill=function(v){return vs("f",v),this},p.fillEvenOdd=function(v){return vs("f*",v),this},p.fillStroke=function(v){return vs("B",v),this},p.fillStrokeEvenOdd=function(v){return vs("B*",v),this};var vs=function(v,M){vn(M)==="object"?ah(M,v):V(v)},Fo=function(v){v===null||j===R&&v===void 0||(v=Mo(v),V(v))};function Vc(v,M,X,oe,pe){var ke=new gu(M||this.boundingBox,X||this.xStep,oe||this.yStep,this.gState,pe||this.matrix);ke.stream=this.stream;var Re=v+"$$"+this.cloneIndex+++"$$";return Sn(Re,ke),ke}var ah=function(v,M){var X=Ct[v.key],oe=at[X];if(oe instanceof Xl)V("q"),V(lh(M)),oe.gState&&p.setGState(oe.gState),V(v.matrix.toString()+" cm"),V("/"+X+" sh"),V("Q");else if(oe instanceof gu){var pe=new nt(1,0,0,-1,0,Ns());v.matrix&&(pe=pe.multiply(v.matrix||Fn),X=Vc.call(oe,v.key,v.boundingBox,v.xStep,v.yStep,pe).id),V("q"),V("/Pattern cs"),V("/"+X+" scn"),oe.gState&&p.setGState(oe.gState),V(M),V("Q")}},lh=function(v){switch(v){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},Fl=p.moveTo=function(v,M){return V(S(L(v))+" "+S(ne(M))+" m"),this},Bc=p.lineTo=function(v,M){return V(S(L(v))+" "+S(ne(M))+" l"),this},qr=p.curveTo=function(v,M,X,oe,pe,ke){return V([S(L(v)),S(ne(M)),S(L(X)),S(ne(oe)),S(L(pe)),S(ne(ke)),"c"].join(" ")),this};p.__private__.line=p.line=function(v,M,X,oe,pe){if(isNaN(v)||isNaN(M)||isNaN(X)||isNaN(oe)||!Gt(pe))throw new Error("Invalid arguments passed to jsPDF.line");return j===k?this.lines([[X-v,oe-M]],v,M,[1,1],pe||"S"):this.lines([[X-v,oe-M]],v,M,[1,1]).stroke()},p.__private__.lines=p.lines=function(v,M,X,oe,pe,ke){var Re,rt,ht,St,Pt,Kt,hn,$n,pn,er,Wn,tr;if(typeof v=="number"&&(tr=X,X=M,M=v,v=tr),oe=oe||[1,1],ke=ke||!1,isNaN(M)||isNaN(X)||!Array.isArray(v)||!Array.isArray(oe)||!Gt(pe)||typeof ke!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Fl(M,X),Re=oe[0],rt=oe[1],St=v.length,er=M,Wn=X,ht=0;ht<St;ht++)(Pt=v[ht]).length===2?(er=Pt[0]*Re+er,Wn=Pt[1]*rt+Wn,Bc(er,Wn)):(Kt=Pt[0]*Re+er,hn=Pt[1]*rt+Wn,$n=Pt[2]*Re+er,pn=Pt[3]*rt+Wn,er=Pt[4]*Re+er,Wn=Pt[5]*rt+Wn,qr(Kt,hn,$n,pn,er,Wn));return ke&&lo(),Fo(pe),this},p.path=function(v){for(var M=0;M<v.length;M++){var X=v[M],oe=X.c;switch(X.op){case"m":Fl(oe[0],oe[1]);break;case"l":Bc(oe[0],oe[1]);break;case"c":qr.apply(this,oe);break;case"h":lo()}}return this},p.__private__.rect=p.rect=function(v,M,X,oe,pe){if(isNaN(v)||isNaN(M)||isNaN(X)||isNaN(oe)||!Gt(pe))throw new Error("Invalid arguments passed to jsPDF.rect");return j===k&&(oe=-oe),V([S(L(v)),S(ne(M)),S(L(X)),S(L(oe)),"re"].join(" ")),Fo(pe),this},p.__private__.triangle=p.triangle=function(v,M,X,oe,pe,ke,Re){if(isNaN(v)||isNaN(M)||isNaN(X)||isNaN(oe)||isNaN(pe)||isNaN(ke)||!Gt(Re))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[X-v,oe-M],[pe-X,ke-oe],[v-pe,M-ke]],v,M,[1,1],Re,!0),this},p.__private__.roundedRect=p.roundedRect=function(v,M,X,oe,pe,ke,Re){if(isNaN(v)||isNaN(M)||isNaN(X)||isNaN(oe)||isNaN(pe)||isNaN(ke)||!Gt(Re))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var rt=4/3*(Math.SQRT2-1);return pe=Math.min(pe,.5*X),ke=Math.min(ke,.5*oe),this.lines([[X-2*pe,0],[pe*rt,0,pe,ke-ke*rt,pe,ke],[0,oe-2*ke],[0,ke*rt,-pe*rt,ke,-pe,ke],[2*pe-X,0],[-pe*rt,0,-pe,-ke*rt,-pe,-ke],[0,2*ke-oe],[0,-ke*rt,pe*rt,-ke,pe,-ke]],v+pe,M,[1,1],Re,!0),this},p.__private__.ellipse=p.ellipse=function(v,M,X,oe,pe){if(isNaN(v)||isNaN(M)||isNaN(X)||isNaN(oe)||!Gt(pe))throw new Error("Invalid arguments passed to jsPDF.ellipse");var ke=4/3*(Math.SQRT2-1)*X,Re=4/3*(Math.SQRT2-1)*oe;return Fl(v+X,M),qr(v+X,M-Re,v+ke,M-oe,v,M-oe),qr(v-ke,M-oe,v-X,M-Re,v-X,M),qr(v-X,M+Re,v-ke,M+oe,v,M+oe),qr(v+ke,M+oe,v+X,M+Re,v+X,M),Fo(pe),this},p.__private__.circle=p.circle=function(v,M,X,oe){if(isNaN(v)||isNaN(M)||isNaN(X)||!Gt(oe))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(v,M,X,X,oe)},p.setFont=function(v,M,X){return X&&(M=D(M,X)),Ye=Ol(v,M,{disableWarning:!1}),this};var ws=p.__private__.getFont=p.getFont=function(){return Ge[Ol.apply(p,arguments)]};p.__private__.getFontList=p.getFontList=function(){var v,M,X={};for(v in ft)if(ft.hasOwnProperty(v))for(M in X[v]=[],ft[v])ft[v].hasOwnProperty(M)&&X[v].push(M);return X},p.addFont=function(v,M,X,oe,pe){var ke=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&ke.indexOf(arguments[3])!==-1?pe=arguments[3]:arguments[3]&&ke.indexOf(arguments[3])==-1&&(X=D(X,oe)),ba.call(this,v,M,X,pe=pe||"Identity-H")};var co,Sa=t.lineWidth||.200025,zc=p.__private__.getLineWidth=p.getLineWidth=function(){return Sa},_t=p.__private__.setLineWidth=p.setLineWidth=function(v){return Sa=v,V(S(L(v))+" w"),this};p.__private__.setLineDash=vt.API.setLineDash=vt.API.setLineDashPattern=function(v,M){if(v=v||[],M=M||0,isNaN(M)||!Array.isArray(v))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return v=v.map(function(X){return S(L(X))}).join(" "),M=S(L(M)),V("["+v+"] "+M+" d"),this};var ch=p.__private__.getLineHeight=p.getLineHeight=function(){return Ce*co};p.__private__.getLineHeight=p.getLineHeight=function(){return Ce*co};var uh=p.__private__.setLineHeightFactor=p.setLineHeightFactor=function(v){return typeof(v=v||1.15)=="number"&&(co=v),this},hh=p.__private__.getLineHeightFactor=p.getLineHeightFactor=function(){return co};uh(t.lineHeight);var Mr=p.__private__.getHorizontalCoordinate=function(v){return L(v)},Fs=p.__private__.getVerticalCoordinate=function(v){return j===R?v:Ke[W].mediaBox.topRightY-Ke[W].mediaBox.bottomLeftY-L(v)},dh=p.__private__.getHorizontalCoordinateString=p.getHorizontalCoordinateString=function(v){return S(Mr(v))},Aa=p.__private__.getVerticalCoordinateString=p.getVerticalCoordinateString=function(v){return S(Fs(v))},Us=t.strokeColor||"0 G";p.__private__.getStrokeColor=p.getDrawColor=function(){return Sr(Us)},p.__private__.setStrokeColor=p.setDrawColor=function(v,M,X,oe){return Us=Ar({ch1:v,ch2:M,ch3:X,ch4:oe,pdfColorType:"draw",precision:2}),V(Us),this};var Ea=t.fillColor||"0 g";p.__private__.getFillColor=p.getFillColor=function(){return Sr(Ea)},p.__private__.setFillColor=p.setFillColor=function(v,M,X,oe){return Ea=Ar({ch1:v,ch2:M,ch3:X,ch4:oe,pdfColorType:"fill",precision:2}),V(Ea),this};var Yi=t.textColor||"0 g",Uo=p.__private__.getTextColor=p.getTextColor=function(){return Sr(Yi)};p.__private__.setTextColor=p.setTextColor=function(v,M,X,oe){return Yi=Ar({ch1:v,ch2:M,ch3:X,ch4:oe,pdfColorType:"text",precision:3}),this};var xs=t.charSpace,Ul=p.__private__.getCharSpace=p.getCharSpace=function(){return parseFloat(xs||0)};p.__private__.setCharSpace=p.setCharSpace=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return xs=v,this};var Nn=0;p.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},p.__private__.setLineCap=p.setLineCap=function(v){var M=p.CapJoinStyles[v];if(M===void 0)throw new Error("Line cap style of '"+v+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Nn=M,V(M+" J"),this};var Vl=0;p.__private__.setLineJoin=p.setLineJoin=function(v){var M=p.CapJoinStyles[v];if(M===void 0)throw new Error("Line join style of '"+v+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Vl=M,V(M+" j"),this},p.__private__.setLineMiterLimit=p.__private__.setMiterLimit=p.setLineMiterLimit=p.setMiterLimit=function(v){if(v=v||0,isNaN(v))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return V(S(L(v))+" M"),this},p.GState=Dm,p.setGState=function(v){(v=typeof v=="string"?Qe[tt[v]]:qc(null,v)).equals(kt)||(V("/"+v.id+" gs"),kt=v)};var qc=function(v,M){if(!v||!tt[v]){var X=!1;for(var oe in Qe)if(Qe.hasOwnProperty(oe)&&Qe[oe].equals(M)){X=!0;break}if(X)M=Qe[oe];else{var pe="GS"+(Object.keys(Qe).length+1).toString(10);Qe[pe]=M,M.id=pe}return v&&(tt[v]=M.id),ut.publish("addGState",M),M}};p.addGState=function(v,M){return qc(v,M),this},p.saveGraphicsState=function(){return V("q"),Et.push({key:Ye,size:Ce,color:Yi}),this},p.restoreGraphicsState=function(){V("Q");var v=Et.pop();return Ye=v.key,Ce=v.size,Yi=v.color,kt=null,this},p.setCurrentTransformationMatrix=function(v){return V(v.toString()+" cm"),this},p.comment=function(v){return V("#"+v),this};var bs=function(v,M){var X=v||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return X},set:function(ke){isNaN(ke)||(X=parseFloat(ke))}});var oe=M||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return oe},set:function(ke){isNaN(ke)||(oe=parseFloat(ke))}});var pe="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return pe},set:function(ke){pe=ke.toString()}}),this},Ta=function(v,M,X,oe){bs.call(this,v,M),this.type="rect";var pe=X||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return pe},set:function(Re){isNaN(Re)||(pe=parseFloat(Re))}});var ke=oe||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return ke},set:function(Re){isNaN(Re)||(ke=parseFloat(Re))}}),this},Vo=function(){this.page=ze,this.currentPage=W,this.pages=ge.slice(0),this.pagesContext=Ke.slice(0),this.x=et,this.y=Ot,this.matrix=Ft,this.width=_i(W),this.height=Hc(W),this.outputDestination=Te,this.id="",this.objectNumber=-1};Vo.prototype.restore=function(){ze=this.page,W=this.currentPage,Ke=this.pagesContext,ge=this.pages,et=this.x,Ot=this.y,Ft=this.matrix,Bl(W,this.width),Ni(W,this.height),Te=this.outputDestination};var uo=function(v,M,X,oe,pe){qt.push(new Vo),ze=W=0,ge=[],et=v,Ot=M,Ft=pe,Ki([X,oe])};for(var ho in p.beginFormObject=function(v,M,X,oe,pe){return uo(v,M,X,oe,pe),this},p.endFormObject=function(v){return function(M){if(en[M])qt.pop().restore();else{var X=new Vo,oe="Xo"+(Object.keys(zt).length+1).toString(10);X.id=oe,en[M]=oe,zt[oe]=X,ut.publish("addFormObject",X),qt.pop().restore()}}(v),this},p.doFormObject=function(v,M){var X=zt[en[v]];return V("q"),V(M.toString()+" cm"),V("/"+X.id+" Do"),V("Q"),this},p.getFormObject=function(v){var M=zt[en[v]];return{x:M.x,y:M.y,width:M.width,height:M.height,matrix:M.matrix}},p.save=function(v,M){return v=v||"generated.pdf",(M=M||{}).returnPromise=M.returnPromise||!1,M.returnPromise===!1?(Ql(Do(ys()),v),typeof Ql.unload=="function"&&Tt.setTimeout&&setTimeout(Ql.unload,911),this):new Promise(function(X,oe){try{var pe=Ql(Do(ys()),v);typeof Ql.unload=="function"&&Tt.setTimeout&&setTimeout(Ql.unload,911),X(pe)}catch(ke){oe(ke.message)}})},vt.API)vt.API.hasOwnProperty(ho)&&(ho==="events"&&vt.API.events.length?function(v,M){var X,oe,pe;for(pe=M.length-1;pe!==-1;pe--)X=M[pe][0],oe=M[pe][1],v.subscribe.apply(v,[X].concat(typeof oe=="function"?[oe]:oe))}(ut,vt.API.events):p[ho]=vt.API[ho]);function _i(v){return Ke[v].mediaBox.topRightX-Ke[v].mediaBox.bottomLeftX}function Bl(v,M){Ke[v].mediaBox.topRightX=M+Ke[v].mediaBox.bottomLeftX}function Hc(v){return Ke[v].mediaBox.topRightY-Ke[v].mediaBox.bottomLeftY}function Ni(v,M){Ke[v].mediaBox.topRightY=M+Ke[v].mediaBox.bottomLeftY}var _s=p.getPageWidth=function(v){return _i(v=v||W)/wt},ka=p.setPageWidth=function(v,M){Bl(v,M*wt)},Ns=p.getPageHeight=function(v){return Hc(v=v||W)/wt},zl=p.setPageHeight=function(v,M){Ni(v,M*wt)};return p.internal={pdfEscape:Or,getStyle:Mo,getFont:ws,getFontSize:qe,getCharSpace:Ul,getTextColor:Uo,getLineHeight:ch,getLineHeightFactor:hh,getLineWidth:zc,write:De,getHorizontalCoordinate:Mr,getVerticalCoordinate:Fs,getCoordinateString:dh,getVerticalCoordinateString:Aa,collections:{},newObject:an,newAdditionalObject:ni,newObjectDeferred:tn,newObjectDeferredBegin:Wt,getFilters:Er,putStream:dn,events:ut,scaleFactor:wt,pageSize:{getWidth:function(){return _s(W)},setWidth:function(v){ka(W,v)},getHeight:function(){return Ns(W)},setHeight:function(v){zl(W,v)}},encryptionOptions:h,encryption:An,getEncryptor:function(v){return h!==null?An.encryptor(v,0):function(M){return M}},output:Ml,getNumberOfPages:Dl,get pages(){return ge},out:V,f2:A,f3:I,getPageInfo:kr,getPageInfoByObjId:Oo,getCurrentPageInfo:Na,getPDFVersion:N,Point:bs,Rectangle:Ta,Matrix:nt,hasHotfix:Oi},Object.defineProperty(p.internal.pageSize,"width",{get:function(){return _s(W)},set:function(v){ka(W,v)},enumerable:!0,configurable:!0}),Object.defineProperty(p.internal.pageSize,"height",{get:function(){return Ns(W)},set:function(v){zl(W,v)},enumerable:!0,configurable:!0}),(function(v){for(var M=0,X=Ve.length;M<X;M++){var oe=ba.call(this,v[M][0],v[M][1],v[M][2],Ve[M][3],!0);g===!1&&(y[oe]=!0);var pe=v[M][0].split("-");Ll({id:oe,fontName:pe[0],fontStyle:pe[1]||""})}ut.publish("addFonts",{fonts:Ge,dictionary:ft})}).call(p,Ve),Ye="F1",_a(i,n),ut.publish("initialized"),p}tu.prototype.lsbFirstWord=function(t){return String.fromCharCode(255&t,t>>8&255,t>>16&255,t>>24&255)},tu.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},tu.prototype.hexToBytes=function(t){for(var e=[],n=0;n<t.length;n+=2)e.push(String.fromCharCode(parseInt(t.substr(n,2),16)));return e.join("")},tu.prototype.processOwnerPassword=function(t,e){return Y2(K2(e).substr(0,5),t)},tu.prototype.encryptor=function(t,e){var n=K2(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(r){return Y2(n,r)}},Dm.prototype.equals=function(t){var e,n="id,objectNumber,equals";if(!t||vn(t)!==vn(this))return!1;var r=0;for(e in this)if(!(n.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;r++}for(e in t)t.hasOwnProperty(e)&&n.indexOf(e)<0&&r--;return r===0},vt.API={events:[]},vt.version="3.0.4";var ir=vt.API,p5=1,Oc=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Qc=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Rt=function(t){return t.toFixed(2)},$a=function(t){return t.toFixed(5)};ir.__acroform__={};var Gi=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},G_=function(t){return t*p5},vo=function(t){var e=new VE,n=ct.internal.getHeight(t)||0,r=ct.internal.getWidth(t)||0;return e.BBox=[0,0,Number(Rt(r)),Number(Rt(n))],e},iB=ir.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|1<<e},sB=ir.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&~(1<<e)},oB=ir.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return t&1<<e?1:0},mr=ir.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return oB(t,e-1)},gr=ir.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return iB(t,e-1)},yr=ir.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return sB(t,e-1)},aB=ir.__acroform__.calculateCoordinates=function(t,e){var n=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,i=t[0],s=t[1],o=t[2],a=t[3],l={};return l.lowerLeft_X=n(i)||0,l.lowerLeft_Y=r(s+a)||0,l.upperRight_X=n(i+o)||0,l.upperRight_Y=r(s)||0,[Number(Rt(l.lowerLeft_X)),Number(Rt(l.lowerLeft_Y)),Number(Rt(l.upperRight_X)),Number(Rt(l.upperRight_Y))]},lB=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],n=t._V||t.DV,r=Q2(t,n),i=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+i+" "+Rt(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var s=vo(t);return s.scope=t.scope,s.stream=e.join(`
`),s}},Q2=function(t,e){var n=t.fontSize===0?t.maxFontSize:t.fontSize,r={text:"",fontSize:""},i=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");i=t.multiline?i.map(function(A){return A.split(`
`)}):i.map(function(A){return[A]});var s=n,o=ct.internal.getHeight(t)||0;o=o<0?-o:o;var a=ct.internal.getWidth(t)||0;a=a<0?-a:a;var l=function(A,I,L){if(A+1<i.length){var ne=I+" "+i[A+1][0];return fp(ne,t,L).width<=a-4}return!1};s++;e:for(;s>0;){e="",s--;var c,h,g=fp("3",t,s).height,y=t.multiline?o-s:(o-g)/2,p=y+=2,_=0,N=0,C=0;if(s<=0){e=`(...) Tj
`,e+="% Width of Text: "+fp(e,t,s=12).width+", FieldWidth:"+a+`
`;break}for(var x="",k=0,R=0;R<i.length;R++)if(i.hasOwnProperty(R)){var j=!1;if(i[R].length!==1&&C!==i[R].length-1){if((g+2)*(k+2)+2>o)continue e;x+=i[R][C],j=!0,N=R,R--}else{x=(x+=i[R][C]+" ").substr(x.length-1)==" "?x.substr(0,x.length-1):x;var q=parseInt(R),Q=l(q,x,s),D=R>=i.length-1;if(Q&&!D){x+=" ",C=0;continue}if(Q||D){if(D)N=q;else if(t.multiline&&(g+2)*(k+2)+2>o)continue e}else{if(!t.multiline||(g+2)*(k+2)+2>o)continue e;N=q}}for(var S="",T=_;T<=N;T++){var F=i[T];if(t.multiline){if(T===N){S+=F[C]+" ",C=(C+1)%F.length;continue}if(T===_){S+=F[F.length-1]+" ";continue}}S+=F[0]+" "}switch(S=S.substr(S.length-1)==" "?S.substr(0,S.length-1):S,h=fp(S,t,s).width,t.textAlign){case"right":c=a-h-2;break;case"center":c=(a-h)/2;break;default:c=2}e+=Rt(c)+" "+Rt(p)+` Td
`,e+="("+Oc(S)+`) Tj
`,e+=-Rt(c)+` 0 Td
`,p=-(s+2),h=0,_=j?N:N+1,k++,x=""}break}return r.text=e,r.fontSize=s,r},fp=function(t,e,n){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),i=e.scope.getStringUnitWidth(t,{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:i}},cB={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},uB=function(t,e){var n={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(r){return r.type===n.type&&r.object===n.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(n)},hB=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(io.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(cB)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");p5=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new BE,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(n){n.internal.events.unsubscribe(n.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete n.internal.acroformPlugin.acroFormDictionaryRoot._eventID,n.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(n){n.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=n.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in r)if(r.hasOwnProperty(i)){var s=r[i];s.objId=void 0,s.hasAnnotation&&uB(s,n)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(n){if(n.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");n.internal.write("/AcroForm "+n.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(n){(function(r,i){var s=!r;for(var o in r||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(o)){var a=r[o],l=[],c=a.Rect;if(a.Rect&&(a.Rect=aB(a.Rect,i)),i.internal.newObjectDeferredBegin(a.objId,!0),a.DA=ct.createDefaultAppearanceStream(a),vn(a)==="object"&&typeof a.getKeyValueListForStream=="function"&&(l=a.getKeyValueListForStream()),a.Rect=c,a.hasAppearanceStream&&!a.appearanceStreamContent){var h=lB(a);l.push({key:"AP",value:"<</N "+h+">>"}),i.internal.acroformPlugin.xForms.push(h)}if(a.appearanceStreamContent){var g="";for(var y in a.appearanceStreamContent)if(a.appearanceStreamContent.hasOwnProperty(y)){var p=a.appearanceStreamContent[y];if(g+="/"+y+" ",g+="<<",Object.keys(p).length>=1||Array.isArray(p)){for(var o in p)if(p.hasOwnProperty(o)){var _=p[o];typeof _=="function"&&(_=_.call(i,a)),g+="/"+o+" "+_+" ",i.internal.acroformPlugin.xForms.indexOf(_)>=0||i.internal.acroformPlugin.xForms.push(_)}}else typeof(_=p)=="function"&&(_=_.call(i,a)),g+="/"+o+" "+_,i.internal.acroformPlugin.xForms.indexOf(_)>=0||i.internal.acroformPlugin.xForms.push(_);g+=">>"}l.push({key:"AP",value:`<<
`+g+">>"})}i.internal.putStream({additionalKeyValues:l,objectId:a.objId}),i.internal.out("endobj")}s&&function(N,C){for(var x in N)if(N.hasOwnProperty(x)){var k=x,R=N[x];C.internal.newObjectDeferredBegin(R.objId,!0),vn(R)==="object"&&typeof R.putStream=="function"&&R.putStream(),delete N[k]}}(i.internal.acroformPlugin.xForms,i)})(n,t)}),t.internal.acroformPlugin.isInitialized=!0}},UE=ir.__acroform__.arrayToPdfArray=function(t,e,n){var r=function(o){return o};if(Array.isArray(t)){for(var i="[",s=0;s<t.length;s++)switch(s!==0&&(i+=" "),vn(t[s])){case"boolean":case"number":case"object":i+=t[s].toString();break;case"string":t[s].substr(0,1)!=="/"?(e!==void 0&&n&&(r=n.internal.getEncryptor(e)),i+="("+Oc(r(t[s].toString()))+")"):i+=t[s].toString()}return i+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},o1=function(t,e,n){var r=function(i){return i};return e!==void 0&&n&&(r=n.internal.getEncryptor(e)),(t=t||"").toString(),"("+Oc(r(t))+")"},So=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};So.prototype.toString=function(){return this.objId+" 0 R"},So.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},So.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var n in e)if(Object.getOwnPropertyDescriptor(this,e[n]).configurable===!1){var r=e[n],i=this[r];i&&(Array.isArray(i)?t.push({key:r,value:UE(i,this.objId,this.scope)}):i instanceof So?(i.scope=this.scope,t.push({key:r,value:i.objId+" 0 R"})):typeof i!="function"&&t.push({key:r,value:i}))}return t};var VE=function(){So.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(n){t=n.trim()},get:function(){return t||null}})};Gi(VE,So);var BE=function(){So.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var n=function(r){return r};return this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),"("+Oc(n(t))+")"}},set:function(n){t=n}})};Gi(BE,So);var io=function t(){So.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(x){if(isNaN(x))throw new Error('Invalid value "'+x+'" for attribute F supplied.');e=x}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!mr(e,3)},set:function(x){x?this.F=gr(e,3):this.F=yr(e,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(x){if(isNaN(x))throw new Error('Invalid value "'+x+'" for attribute Ff supplied.');n=x}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(x){r=x!==void 0?x:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(x){r[0]=x}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(x){r[1]=x}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(x){r[2]=x}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(x){r[3]=x}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(x){switch(x){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=x;break;default:throw new Error('Invalid value "'+x+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof Om)return;s="FieldObject"+t.FieldNum++}var x=function(k){return k};return this.scope&&(x=this.scope.internal.getEncryptor(this.objId)),"("+Oc(x(s))+")"},set:function(x){s=x.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(x){s=x}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(x){o=x}});var a="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return a},set:function(x){a=x}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(x){l=x}});var c=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return c===void 0?50/p5:c},set:function(x){c=x}});var h="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return h},set:function(x){h=x}});var g="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!g||this instanceof Om||this instanceof ac))return o1(g,this.objId,this.scope)},set:function(x){x=x.toString(),g=x}});var y=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(y)return this instanceof Vr==0?o1(y,this.objId,this.scope):y},set:function(x){x=x.toString(),y=this instanceof Vr==0?x.substr(0,1)==="("?Qc(x.substr(1,x.length-2)):Qc(x):x}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Vr==1?Qc(y.substr(1,y.length-1)):y},set:function(x){x=x.toString(),y=this instanceof Vr==1?"/"+x:x}});var p=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(p)return p},set:function(x){this.V=x}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(p)return this instanceof Vr==0?o1(p,this.objId,this.scope):p},set:function(x){x=x.toString(),p=this instanceof Vr==0?x.substr(0,1)==="("?Qc(x.substr(1,x.length-2)):Qc(x):x}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Vr==1?Qc(p.substr(1,p.length-1)):p},set:function(x){x=x.toString(),p=this instanceof Vr==1?"/"+x:x}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var _,N=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return N},set:function(x){x=!!x,N=x}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(_)return _},set:function(x){_=x}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!mr(this.Ff,1)},set:function(x){x?this.Ff=gr(this.Ff,1):this.Ff=yr(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!mr(this.Ff,2)},set:function(x){x?this.Ff=gr(this.Ff,2):this.Ff=yr(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!mr(this.Ff,3)},set:function(x){x?this.Ff=gr(this.Ff,3):this.Ff=yr(this.Ff,3)}});var C=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(C!==null)return C},set:function(x){if([0,1,2].indexOf(x)===-1)throw new Error('Invalid value "'+x+'" for attribute Q supplied.');C=x}}),Object.defineProperty(this,"textAlign",{get:function(){var x;switch(C){case 0:default:x="left";break;case 1:x="center";break;case 2:x="right"}return x},configurable:!0,enumerable:!0,set:function(x){switch(x){case"right":case 2:C=2;break;case"center":case 1:C=1;break;default:C=0}}})};Gi(io,So);var Tu=function(){io.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(n){t=n}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return UE(e,this.objId,this.scope)},set:function(n){var r,i;i=[],typeof(r=n)=="string"&&(i=function(s,o,a){a||(a=1);for(var l,c=[];l=o.exec(s);)c.push(l[a]);return c}(r,/\((.*?)\)/g)),e=i}}),this.getOptions=function(){return e},this.setOptions=function(n){e=n,this.sort&&e.sort()},this.addOption=function(n){n=(n=n||"").toString(),e.push(n),this.sort&&e.sort()},this.removeOption=function(n,r){for(r=r||!1,n=(n=n||"").toString();e.indexOf(n)!==-1&&(e.splice(e.indexOf(n),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!mr(this.Ff,18)},set:function(n){n?this.Ff=gr(this.Ff,18):this.Ff=yr(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!mr(this.Ff,19)},set:function(n){this.combo===!0&&(n?this.Ff=gr(this.Ff,19):this.Ff=yr(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!mr(this.Ff,20)},set:function(n){n?(this.Ff=gr(this.Ff,20),e.sort()):this.Ff=yr(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!mr(this.Ff,22)},set:function(n){n?this.Ff=gr(this.Ff,22):this.Ff=yr(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!mr(this.Ff,23)},set:function(n){n?this.Ff=gr(this.Ff,23):this.Ff=yr(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!mr(this.Ff,27)},set:function(n){n?this.Ff=gr(this.Ff,27):this.Ff=yr(this.Ff,27)}}),this.hasAppearanceStream=!1};Gi(Tu,io);var ku=function(){Tu.call(this),this.fontName="helvetica",this.combo=!1};Gi(ku,Tu);var Iu=function(){ku.call(this),this.combo=!0};Gi(Iu,ku);var Up=function(){Iu.call(this),this.edit=!0};Gi(Up,Iu);var Vr=function(){io.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!mr(this.Ff,15)},set:function(n){n?this.Ff=gr(this.Ff,15):this.Ff=yr(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!mr(this.Ff,16)},set:function(n){n?this.Ff=gr(this.Ff,16):this.Ff=yr(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!mr(this.Ff,17)},set:function(n){n?this.Ff=gr(this.Ff,17):this.Ff=yr(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!mr(this.Ff,26)},set:function(n){n?this.Ff=gr(this.Ff,26):this.Ff=yr(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(s){return s};if(this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var r,i=[];for(r in i.push("<<"),e)i.push("/"+r+" ("+Oc(n(e[r]))+")");return i.push(">>"),i.join(`
`)}},set:function(n){vn(n)==="object"&&(e=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(n){typeof n=="string"&&(e.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(n){t="/"+n}})};Gi(Vr,io);var Vp=function(){Vr.call(this),this.pushButton=!0};Gi(Vp,Vr);var Cu=function(){Vr.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};Gi(Cu,Vr);var Om=function(){var t,e;io.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(i){e=i}});var n,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(a){return a};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var s,o=[];for(s in o.push("<<"),r)o.push("/"+s+" ("+Oc(i(r[s]))+")");return o.push(">>"),o.join(`
`)},set:function(i){vn(i)==="object"&&(r=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(i){typeof i=="string"&&(r.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(i){n=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(i){n="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=ct.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Gi(Om,io),Cu.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var n=this.Kids[e];n.appearanceStreamContent=t.createAppearanceStream(n.optionName),n.caption=t.getCA()}},Cu.prototype.createOption=function(t){var e=new Om;return e.Parent=this,e.optionName=t,this.Kids.push(e),dB.call(this.scope,e),e};var Bp=function(){Vr.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=ct.CheckBox.createAppearanceStream()};Gi(Bp,Vr);var ac=function(){io.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!mr(this.Ff,13)},set:function(e){e?this.Ff=gr(this.Ff,13):this.Ff=yr(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!mr(this.Ff,21)},set:function(e){e?this.Ff=gr(this.Ff,21):this.Ff=yr(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!mr(this.Ff,23)},set:function(e){e?this.Ff=gr(this.Ff,23):this.Ff=yr(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!mr(this.Ff,24)},set:function(e){e?this.Ff=gr(this.Ff,24):this.Ff=yr(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!mr(this.Ff,25)},set:function(e){e?this.Ff=gr(this.Ff,25):this.Ff=yr(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!mr(this.Ff,26)},set:function(e){e?this.Ff=gr(this.Ff,26):this.Ff=yr(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Gi(ac,io);var zp=function(){ac.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!mr(this.Ff,14)},set:function(t){t?this.Ff=gr(this.Ff,14):this.Ff=yr(this.Ff,14)}}),this.password=!0};Gi(zp,ac);var ct={CheckBox:{createAppearanceStream:function(){return{N:{On:ct.CheckBox.YesNormal},D:{On:ct.CheckBox.YesPushDown,Off:ct.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=vo(t);e.scope=t.scope;var n=[],r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,i=t.scope.__private__.encodeColorString(t.color),s=Q2(t,t.caption);return n.push("0.749023 g"),n.push("0 0 "+Rt(ct.internal.getWidth(t))+" "+Rt(ct.internal.getHeight(t))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+r+" "+Rt(s.fontSize)+" Tf "+i),n.push("BT"),n.push(s.text),n.push("ET"),n.push("Q"),n.push("EMC"),e.stream=n.join(`
`),e},YesNormal:function(t){var e=vo(t);e.scope=t.scope;var n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color),i=[],s=ct.internal.getHeight(t),o=ct.internal.getWidth(t),a=Q2(t,t.caption);return i.push("1 g"),i.push("0 0 "+Rt(o)+" "+Rt(s)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+Rt(o-1)+" "+Rt(s-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+n+" "+Rt(a.fontSize)+" Tf "+r),i.push(a.text),i.push("ET"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(t){var e=vo(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Rt(ct.internal.getWidth(t))+" "+Rt(ct.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:ct.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=ct.RadioButton.Circle.YesNormal,e.D[t]=ct.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=vo(t);e.scope=t.scope;var n=[],r=ct.internal.getWidth(t)<=ct.internal.getHeight(t)?ct.internal.getWidth(t)/4:ct.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=ct.internal.Bezier_C,s=Number((r*i).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+$a(ct.internal.getWidth(t)/2)+" "+$a(ct.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),n.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),n.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),n.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=vo(t);e.scope=t.scope;var n=[],r=ct.internal.getWidth(t)<=ct.internal.getHeight(t)?ct.internal.getWidth(t)/4:ct.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*ct.internal.Bezier_C).toFixed(5)),o=Number((r*ct.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+$a(ct.internal.getWidth(t)/2)+" "+$a(ct.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),n.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),n.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),n.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+$a(ct.internal.getWidth(t)/2)+" "+$a(ct.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+o+" "+o+" "+r+" 0 "+r+" c"),n.push("-"+o+" "+r+" -"+r+" "+o+" -"+r+" 0 c"),n.push("-"+r+" -"+o+" -"+o+" -"+r+" 0 -"+r+" c"),n.push(o+" -"+r+" "+r+" -"+o+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=vo(t);e.scope=t.scope;var n=[],r=ct.internal.getWidth(t)<=ct.internal.getHeight(t)?ct.internal.getWidth(t)/4:ct.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*ct.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+$a(ct.internal.getWidth(t)/2)+" "+$a(ct.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),n.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),n.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),n.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:ct.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=ct.RadioButton.Cross.YesNormal,e.D[t]=ct.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=vo(t);e.scope=t.scope;var n=[],r=ct.internal.calculateCross(t);return n.push("q"),n.push("1 1 "+Rt(ct.internal.getWidth(t)-2)+" "+Rt(ct.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(Rt(r.x1.x)+" "+Rt(r.x1.y)+" m"),n.push(Rt(r.x2.x)+" "+Rt(r.x2.y)+" l"),n.push(Rt(r.x4.x)+" "+Rt(r.x4.y)+" m"),n.push(Rt(r.x3.x)+" "+Rt(r.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=vo(t);e.scope=t.scope;var n=ct.internal.calculateCross(t),r=[];return r.push("0.749023 g"),r.push("0 0 "+Rt(ct.internal.getWidth(t))+" "+Rt(ct.internal.getHeight(t))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+Rt(ct.internal.getWidth(t)-2)+" "+Rt(ct.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(Rt(n.x1.x)+" "+Rt(n.x1.y)+" m"),r.push(Rt(n.x2.x)+" "+Rt(n.x2.y)+" l"),r.push(Rt(n.x4.x)+" "+Rt(n.x4.y)+" m"),r.push(Rt(n.x3.x)+" "+Rt(n.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=vo(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Rt(ct.internal.getWidth(t))+" "+Rt(ct.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+n}};ct.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=ct.internal.getWidth(t),n=ct.internal.getHeight(t),r=Math.min(e,n);return{x1:{x:(e-r)/2,y:(n-r)/2+r},x2:{x:(e-r)/2+r,y:(n-r)/2},x3:{x:(e-r)/2,y:(n-r)/2},x4:{x:(e-r)/2+r,y:(n-r)/2+r}}}},ct.internal.getWidth=function(t){var e=0;return vn(t)==="object"&&(e=G_(t.Rect[2])),e},ct.internal.getHeight=function(t){var e=0;return vn(t)==="object"&&(e=G_(t.Rect[3])),e};var dB=ir.addField=function(t){if(hB(this,t),!(t instanceof io))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};ir.AcroFormChoiceField=Tu,ir.AcroFormListBox=ku,ir.AcroFormComboBox=Iu,ir.AcroFormEditBox=Up,ir.AcroFormButton=Vr,ir.AcroFormPushButton=Vp,ir.AcroFormRadioButton=Cu,ir.AcroFormCheckBox=Bp,ir.AcroFormTextField=ac,ir.AcroFormPasswordField=zp,ir.AcroFormAppearance=ct,ir.AcroForm={ChoiceField:Tu,ListBox:ku,ComboBox:Iu,EditBox:Up,Button:Vr,PushButton:Vp,RadioButton:Cu,CheckBox:Bp,TextField:ac,PasswordField:zp,Appearance:ct},vt.AcroForm={ChoiceField:Tu,ListBox:ku,ComboBox:Iu,EditBox:Up,Button:Vr,PushButton:Vp,RadioButton:Cu,CheckBox:Bp,TextField:ac,PasswordField:zp,Appearance:ct};vt.AcroForm;function zE(t){return t.reduce(function(e,n,r){return e[n]=r,e},{})}(function(t){var e="addImage_";t.__addimage__={};var n="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},i=t.__addimage__.getImageFileTypeByImageData=function(A,I){var L,ne,ie,ue,fe,J=n;if((I=I||n)==="RGBA"||A.data!==void 0&&A.data instanceof Uint8ClampedArray&&"height"in A&&"width"in A)return"RGBA";if(Q(A))for(fe in r)for(ie=r[fe],L=0;L<ie.length;L+=1){for(ue=!0,ne=0;ne<ie[L].length;ne+=1)if(ie[L][ne]!==void 0&&ie[L][ne]!==A[ne]){ue=!1;break}if(ue===!0){J=fe;break}}else for(fe in r)for(ie=r[fe],L=0;L<ie.length;L+=1){for(ue=!0,ne=0;ne<ie[L].length;ne+=1)if(ie[L][ne]!==void 0&&ie[L][ne]!==A.charCodeAt(ne)){ue=!1;break}if(ue===!0){J=fe;break}}return J===n&&I!==n&&(J=I),J},s=function A(I){for(var L=this.internal.write,ne=this.internal.putStream,ie=(0,this.internal.getFilters)();ie.indexOf("FlateEncode")!==-1;)ie.splice(ie.indexOf("FlateEncode"),1);I.objectId=this.internal.newObject();var ue=[];if(ue.push({key:"Type",value:"/XObject"}),ue.push({key:"Subtype",value:"/Image"}),ue.push({key:"Width",value:I.width}),ue.push({key:"Height",value:I.height}),I.colorSpace===x.INDEXED?ue.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(I.palette.length/3-1)+" "+("sMask"in I&&I.sMask!==void 0?I.objectId+2:I.objectId+1)+" 0 R]"}):(ue.push({key:"ColorSpace",value:"/"+I.colorSpace}),I.colorSpace===x.DEVICE_CMYK&&ue.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),ue.push({key:"BitsPerComponent",value:I.bitsPerComponent}),"decodeParameters"in I&&I.decodeParameters!==void 0&&ue.push({key:"DecodeParms",value:"<<"+I.decodeParameters+">>"}),"transparency"in I&&Array.isArray(I.transparency)&&I.transparency.length>0){for(var fe="",J=0,le=I.transparency.length;J<le;J++)fe+=I.transparency[J]+" "+I.transparency[J]+" ";ue.push({key:"Mask",value:"["+fe+"]"})}I.sMask!==void 0&&ue.push({key:"SMask",value:I.objectId+1+" 0 R"});var xe=I.filter!==void 0?["/"+I.filter]:void 0;if(ne({data:I.data,additionalKeyValues:ue,alreadyAppliedFilters:xe,objectId:I.objectId}),L("endobj"),"sMask"in I&&I.sMask!==void 0){var we,O=(we=I.sMaskBitsPerComponent)!==null&&we!==void 0?we:I.bitsPerComponent,W={width:I.width,height:I.height,colorSpace:"DeviceGray",bitsPerComponent:O,data:I.sMask};"filter"in I&&(W.decodeParameters="/Predictor ".concat(I.predictor," /Colors 1 /BitsPerComponent ").concat(O," /Columns ").concat(I.width),W.filter=I.filter),A.call(this,W)}if(I.colorSpace===x.INDEXED){var Y=this.internal.newObject();ne({data:S(new Uint8Array(I.palette)),objectId:Y}),L("endobj")}},o=function(){var A=this.internal.collections[e+"images"];for(var I in A)s.call(this,A[I])},a=function(){var A,I=this.internal.collections[e+"images"],L=this.internal.write;for(var ne in I)L("/I"+(A=I[ne]).index,A.objectId,"0","R")},l=function(){this.internal.collections[e+"images"]||(this.internal.collections[e+"images"]={},this.internal.events.subscribe("putResources",o),this.internal.events.subscribe("putXobjectDict",a))},c=function(){var A=this.internal.collections[e+"images"];return l.call(this),A},h=function(){return Object.keys(this.internal.collections[e+"images"]).length},g=function(A){return typeof t["process"+A.toUpperCase()]=="function"},y=function(A){return vn(A)==="object"&&A.nodeType===1},p=function(A,I){if(A.nodeName==="IMG"&&A.hasAttribute("src")){var L=""+A.getAttribute("src");if(L.indexOf("data:image/")===0)return Fp(unescape(L).split("base64,").pop());var ne=t.loadFile(L,!0);if(ne!==void 0)return ne}if(A.nodeName==="CANVAS"){if(A.width===0||A.height===0)throw new Error("Given canvas must have data. Canvas width: "+A.width+", height: "+A.height);var ie;switch(I){case"PNG":ie="image/png";break;case"WEBP":ie="image/webp";break;default:ie="image/jpeg"}return Fp(A.toDataURL(ie,1).split("base64,").pop())}},_=function(A){var I=this.internal.collections[e+"images"];if(I){for(var L in I)if(A===I[L].alias)return I[L]}},N=function(A,I,L){return A||I||(A=-96,I=-96),A<0&&(A=-1*L.width*72/A/this.internal.scaleFactor),I<0&&(I=-1*L.height*72/I/this.internal.scaleFactor),A===0&&(A=I*L.width/L.height),I===0&&(I=A*L.height/L.width),[A,I]},C=function(A,I,L,ne,ie,ue){var fe=N.call(this,L,ne,ie),J=this.internal.getCoordinateString,le=this.internal.getVerticalCoordinateString,xe=c.call(this);if(L=fe[0],ne=fe[1],xe[ie.index]=ie,ue){ue*=Math.PI/180;var we=Math.cos(ue),O=Math.sin(ue),W=function(K){return K.toFixed(4)},Y=[W(we),W(O),W(-1*O),W(we),0,0,"cm"]}this.internal.write("q"),ue?(this.internal.write([1,"0","0",1,J(A),le(I+ne),"cm"].join(" ")),this.internal.write(Y.join(" ")),this.internal.write([J(L),"0","0",J(ne),"0","0","cm"].join(" "))):this.internal.write([J(L),"0","0",J(ne),J(A),le(I+ne),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+ie.index+" Do"),this.internal.write("Q")},x=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var k=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},R=t.__addimage__.sHashCode=function(A){var I,L,ne=0;if(typeof A=="string")for(L=A.length,I=0;I<L;I++)ne=(ne<<5)-ne+A.charCodeAt(I),ne|=0;else if(Q(A))for(L=A.byteLength/2,I=0;I<L;I++)ne=(ne<<5)-ne+A[I],ne|=0;return ne},j=t.__addimage__.validateStringAsBase64=function(A){(A=A||"").toString().trim();var I=!0;return A.length===0&&(I=!1),A.length%4!=0&&(I=!1),/^[A-Za-z0-9+/]+$/.test(A.substr(0,A.length-2))===!1&&(I=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(A.substr(-2))===!1&&(I=!1),I},q=t.__addimage__.extractImageFromDataUrl=function(A){if(A==null||!(A=A.trim()).startsWith("data:"))return null;var I=A.indexOf(",");return I<0?null:A.substring(0,I).trim().endsWith("base64")?A.substring(I+1):null};t.__addimage__.isArrayBuffer=function(A){return A instanceof ArrayBuffer};var Q=t.__addimage__.isArrayBufferView=function(A){return A instanceof Int8Array||A instanceof Uint8Array||A instanceof Uint8ClampedArray||A instanceof Int16Array||A instanceof Uint16Array||A instanceof Int32Array||A instanceof Uint32Array||A instanceof Float32Array||A instanceof Float64Array},D=t.__addimage__.binaryStringToUint8Array=function(A){for(var I=A.length,L=new Uint8Array(I),ne=0;ne<I;ne++)L[ne]=A.charCodeAt(ne);return L},S=t.__addimage__.arrayBufferToBinaryString=function(A){for(var I="",L=Q(A)?A:new Uint8Array(A),ne=0;ne<L.length;ne+=8192)I+=String.fromCharCode.apply(null,L.subarray(ne,ne+8192));return I};t.addImage=function(){var A,I,L,ne,ie,ue,fe,J,le;if(typeof arguments[1]=="number"?(I=n,L=arguments[1],ne=arguments[2],ie=arguments[3],ue=arguments[4],fe=arguments[5],J=arguments[6],le=arguments[7]):(I=arguments[1],L=arguments[2],ne=arguments[3],ie=arguments[4],ue=arguments[5],fe=arguments[6],J=arguments[7],le=arguments[8]),vn(A=arguments[0])==="object"&&!y(A)&&"imageData"in A){var xe=A;A=xe.imageData,I=xe.format||I||n,L=xe.x||L||0,ne=xe.y||ne||0,ie=xe.w||xe.width||ie,ue=xe.h||xe.height||ue,fe=xe.alias||fe,J=xe.compression||J,le=xe.rotation||xe.angle||le}var we=this.internal.getFilters();if(J===void 0&&we.indexOf("FlateEncode")!==-1&&(J="SLOW"),isNaN(L)||isNaN(ne))throw new Error("Invalid coordinates passed to jsPDF.addImage");l.call(this);var O=T.call(this,A,I,fe,J);return C.call(this,L,ne,ie,ue,O,le),this};var T=function(A,I,L,ne){var ie,ue,fe;if(typeof A=="string"&&i(A)===n){A=unescape(A);var J=F(A,!1);(J!==""||(J=t.loadFile(A,!0))!==void 0)&&(A=J)}if(y(A)&&(A=p(A,I)),I=i(A,I),!g(I))throw new Error("addImage does not support files of type '"+I+"', please ensure that a plugin for '"+I+"' support is added.");if(((fe=L)==null||fe.length===0)&&(L=function(le){return typeof le=="string"||Q(le)?R(le):Q(le.data)?R(le.data):null}(A)),(ie=_.call(this,L))||(A instanceof Uint8Array||I==="RGBA"||(ue=A,A=D(A)),ie=this["process"+I.toUpperCase()](A,h.call(this),L,function(le){return le&&typeof le=="string"&&(le=le.toUpperCase()),le in t.image_compression?le:k.NONE}(ne),ue)),!ie)throw new Error("An unknown error occurred whilst processing the image.");return ie},F=t.__addimage__.convertBase64ToBinaryString=function(A,I){I=typeof I!="boolean"||I;var L,ne="";if(typeof A=="string"){var ie;L=(ie=q(A))!==null&&ie!==void 0?ie:A;try{ne=Fp(L)}catch(ue){if(I)throw j(L)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+ue.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return ne};t.getImageProperties=function(A){var I,L,ne="";if(y(A)&&(A=p(A)),typeof A=="string"&&i(A)===n&&((ne=F(A,!1))===""&&(ne=t.loadFile(A)||""),A=ne),L=i(A),!g(L))throw new Error("addImage does not support files of type '"+L+"', please ensure that a plugin for '"+L+"' support is added.");if(A instanceof Uint8Array||(A=D(A)),!(I=this["process"+L.toUpperCase()](A)))throw new Error("An unknown error occurred whilst processing the image");return I.fileType=L,I}})(vt.API),function(t){var e=function(n){if(n!==void 0&&n!="")return!0};vt.API.events.push(["addPage",function(n){this.internal.getPageInfo(n.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(n){for(var r,i,s,o=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString,l=this.internal.getPageInfoByObjId(n.objId),c=n.pageContext.annotations,h=!1,g=0;g<c.length&&!h;g++)switch((r=c[g]).type){case"link":(e(r.options.url)||e(r.options.pageNumber))&&(h=!0);break;case"reference":case"text":case"freetext":h=!0}if(h!=0){this.internal.write("/Annots [");for(var y=0;y<c.length;y++){r=c[y];var p=this.internal.pdfEscape,_=this.internal.getEncryptor(n.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var N=this.internal.newAdditionalObject(),C=this.internal.newAdditionalObject(),x=this.internal.getEncryptor(N.objId),k=r.title||"Note";s="<</Type /Annot /Subtype /Text "+(i="/Rect ["+o(r.bounds.x)+" "+a(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y)+"] ")+"/Contents ("+p(x(r.contents))+")",s+=" /Popup "+C.objId+" 0 R",s+=" /P "+l.objId+" 0 R",s+=" /T ("+p(x(k))+") >>",N.content=s;var R=N.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+o(r.bounds.x+30)+" "+a(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w+30)+" "+a(r.bounds.y)+"] ")+" /Parent "+R,r.open&&(s+=" /Open true"),s+=" >>",C.content=s,this.internal.write(N.objId,"0 R",C.objId,"0 R");break;case"freetext":i="/Rect ["+o(r.bounds.x)+" "+a(r.bounds.y)+" "+o(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y+r.bounds.h)+"] ";var j=r.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+p(_(r.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+j+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(r.options.name){var q=this.annotations._nameMap[r.options.name];r.options.pageNumber=q.page,r.options.top=q.y}else r.options.top||(r.options.top=0);if(i="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",s="",r.options.url)s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+p(_(r.options.url))+") >>";else if(r.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,s+=" /FitV "+r.options.left+"]";break;default:var Q=a(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),s+=" /XYZ "+r.options.left+" "+Q+" "+r.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),t.createAnnotation=function(n){var r=this.internal.getCurrentPageInfo();switch(n.type){case"link":this.link(n.bounds.x,n.bounds.y,n.bounds.w,n.bounds.h,n);break;case"text":case"freetext":r.pageContext.annotations.push(n)}},t.link=function(n,r,i,s,o){var a=this.internal.getCurrentPageInfo(),l=this.internal.getCoordinateString,c=this.internal.getVerticalCoordinateString;a.pageContext.annotations.push({finalBounds:{x:l(n),y:c(r),w:l(n+i),h:c(r+s)},options:o,type:"link"})},t.textWithLink=function(n,r,i,s){var o,a,l=this.getTextWidth(n),c=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){a=s.maxWidth;var h=this.splitTextToSize(n,a).length;o=Math.ceil(c*h)}else a=l,o=c;return this.text(n,r,i,s),i+=.2*c,s.align==="center"&&(r-=l/2),s.align==="right"&&(r-=l),this.link(r,i-c,a,o,s),l},t.getTextWidth=function(n){var r=this.internal.getFontSize();return this.getStringUnitWidth(n)*r/this.internal.scaleFactor}}(vt.API),function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];t.__arabicParser__={};var s=t.__arabicParser__.isInArabicSubstitutionA=function(N){return e[N.charCodeAt(0)]!==void 0},o=t.__arabicParser__.isArabicLetter=function(N){return typeof N=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(N)},a=t.__arabicParser__.isArabicEndLetter=function(N){return o(N)&&s(N)&&e[N.charCodeAt(0)].length<=2},l=t.__arabicParser__.isArabicAlfLetter=function(N){return o(N)&&i.indexOf(N.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(N){return o(N)&&s(N)&&e[N.charCodeAt(0)].length>=1};var c=t.__arabicParser__.arabicLetterHasFinalForm=function(N){return o(N)&&s(N)&&e[N.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(N){return o(N)&&s(N)&&e[N.charCodeAt(0)].length>=3};var h=t.__arabicParser__.arabicLetterHasMedialForm=function(N){return o(N)&&s(N)&&e[N.charCodeAt(0)].length==4},g=t.__arabicParser__.resolveLigatures=function(N){var C=0,x=n,k="",R=0;for(C=0;C<N.length;C+=1)x[N.charCodeAt(C)]!==void 0?(R++,typeof(x=x[N.charCodeAt(C)])=="number"&&(k+=String.fromCharCode(x),x=n,R=0),C===N.length-1&&(x=n,k+=N.charAt(C-(R-1)),C-=R-1,R=0)):(x=n,k+=N.charAt(C-R),C-=R,R=0);return k};t.__arabicParser__.isArabicDiacritic=function(N){return N!==void 0&&r[N.charCodeAt(0)]!==void 0};var y=t.__arabicParser__.getCorrectForm=function(N,C,x){return o(N)?s(N)===!1?-1:!c(N)||!o(C)&&!o(x)||!o(x)&&a(C)||a(N)&&!o(C)||a(N)&&l(C)||a(N)&&a(C)?0:h(N)&&o(C)&&!a(C)&&o(x)&&c(x)?3:a(N)||!o(x)?1:2:-1},p=function(N){var C=0,x=0,k=0,R="",j="",q="",Q=(N=N||"").split("\\s+"),D=[];for(C=0;C<Q.length;C+=1){for(D.push(""),x=0;x<Q[C].length;x+=1)R=Q[C][x],j=Q[C][x-1],q=Q[C][x+1],o(R)?(k=y(R,j,q),D[C]+=k!==-1?String.fromCharCode(e[R.charCodeAt(0)][k]):R):D[C]+=R;D[C]=g(D[C])}return D.join(" ")},_=t.__arabicParser__.processArabic=t.processArabic=function(){var N,C=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,x=[];if(Array.isArray(C)){var k=0;for(x=[],k=0;k<C.length;k+=1)Array.isArray(C[k])?x.push([p(C[k][0]),C[k][1],C[k][2]]):x.push([p(C[k])]);N=x}else N=p(C);return typeof arguments[0]=="string"?N:(arguments[0].text=N,arguments[0])};t.events.push(["preProcessText",_])}(vt.API),vt.API.autoPrint=function(t){var e;return(t=t||{}).variant=t.variant||"non-conform",t.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})),this},function(t){var e=function(){var n=void 0;Object.defineProperty(this,"pdf",{get:function(){return n},set:function(a){n=a}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(a){r=isNaN(a)||Number.isInteger(a)===!1||a<0?150:a,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(a){i=isNaN(a)||Number.isInteger(a)===!1||a<0?300:a,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(a){s=a}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(a){o=a}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(n,r){var i;if((n=n||"2d")!=="2d")return null;for(i in r)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=r[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(vt.API),function(t){var e={left:0,top:0,bottom:0,right:0},n=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var l=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return l},set:function(N){l=N}});var c=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return c},set:function(N){c=N}});var h=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return h},set:function(N){h=N}});var g=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return g},set:function(N){g=N}});var y=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return y},set:function(N){y=N}});var p=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return p},set:function(N){p=N}});var _=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return _},set:function(N){_=N}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(l){return r.call(this),this.internal.__cell__.headerFunction=typeof l=="function"?l:void 0,this},t.getTextDimensions=function(l,c){r.call(this);var h=(c=c||{}).fontSize||this.getFontSize(),g=c.font||this.getFont(),y=c.scaleFactor||this.internal.scaleFactor,p=0,_=0,N=0,C=this;if(!Array.isArray(l)&&typeof l!="string"){if(typeof l!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");l=String(l)}var x=c.maxWidth;x>0?typeof l=="string"?l=this.splitTextToSize(l,x):Object.prototype.toString.call(l)==="[object Array]"&&(l=l.reduce(function(R,j){return R.concat(C.splitTextToSize(j,x))},[])):l=Array.isArray(l)?l:[l];for(var k=0;k<l.length;k++)p<(N=this.getStringUnitWidth(l[k],{font:g})*h)&&(p=N);return p!==0&&(_=l.length),{w:p/=y,h:Math.max((_*h*this.getLineHeightFactor()-h*(this.getLineHeightFactor()-1))/y,0)}},t.cellAddPage=function(){r.call(this),this.addPage();var l=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new s(l.left,l.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=t.cell=function(){var l;l=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]),r.call(this);var c=this.internal.__cell__.lastCell,h=this.internal.__cell__.padding,g=this.internal.__cell__.margins||e,y=this.internal.__cell__.tableHeaderRow,p=this.internal.__cell__.printHeaders;return c.lineNumber!==void 0&&(c.lineNumber===l.lineNumber?(l.x=(c.x||0)+(c.width||0),l.y=c.y||0):c.y+c.height+l.height+g.bottom>this.getPageHeight()?(this.cellAddPage(),l.y=g.top,p&&y&&(this.printHeaderRow(l.lineNumber,!0),l.y+=y[0].height)):l.y=c.y+c.height||l.y),l.text[0]!==void 0&&(this.rect(l.x,l.y,l.width,l.height,n===!0?"FD":void 0),l.align==="right"?this.text(l.text,l.x+l.width-h,l.y+h,{align:"right",baseline:"top"}):l.align==="center"?this.text(l.text,l.x+l.width/2,l.y+h,{align:"center",baseline:"top",maxWidth:l.width-h-h}):this.text(l.text,l.x+h,l.y+h,{align:"left",baseline:"top",maxWidth:l.width-h-h})),this.internal.__cell__.lastCell=l,this};t.table=function(l,c,h,g,y){if(r.call(this),!h)throw new Error("No data for PDF table.");var p,_,N,C,x=[],k=[],R=[],j={},q={},Q=[],D=[],S=(y=y||{}).autoSize||!1,T=y.printHeaders!==!1,F=y.css&&y.css["font-size"]!==void 0?16*y.css["font-size"]:y.fontSize||12,A=y.margins||Object.assign({width:this.getPageWidth()},e),I=typeof y.padding=="number"?y.padding:3,L=y.headerBackgroundColor||"#c8c8c8",ne=y.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=T,this.internal.__cell__.margins=A,this.internal.__cell__.table_font_size=F,this.internal.__cell__.padding=I,this.internal.__cell__.headerBackgroundColor=L,this.internal.__cell__.headerTextColor=ne,this.setFontSize(F),g==null)k=x=Object.keys(h[0]),R=x.map(function(){return"left"});else if(Array.isArray(g)&&vn(g[0])==="object")for(x=g.map(function(xe){return xe.name}),k=g.map(function(xe){return xe.prompt||xe.name||""}),R=g.map(function(xe){return xe.align||"left"}),p=0;p<g.length;p+=1)q[g[p].name]=.7499990551181103*g[p].width;else Array.isArray(g)&&typeof g[0]=="string"&&(k=x=g,R=x.map(function(){return"left"}));if(S||Array.isArray(g)&&typeof g[0]=="string")for(p=0;p<x.length;p+=1){for(j[C=x[p]]=h.map(function(xe){return xe[C]}),this.setFont(void 0,"bold"),Q.push(this.getTextDimensions(k[p],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),_=j[C],this.setFont(void 0,"normal"),N=0;N<_.length;N+=1)Q.push(this.getTextDimensions(_[N],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);q[C]=Math.max.apply(null,Q)+I+I,Q=[]}if(T){var ie={};for(p=0;p<x.length;p+=1)ie[x[p]]={},ie[x[p]].text=k[p],ie[x[p]].align=R[p];var ue=a.call(this,ie,q);D=x.map(function(xe){return new s(l,c,q[xe],ue,ie[xe].text,void 0,ie[xe].align)}),this.setTableHeaderRow(D),this.printHeaderRow(1,!1)}var fe=g.reduce(function(xe,we){return xe[we.name]=we.align,xe},{});for(p=0;p<h.length;p+=1){"rowStart"in y&&y.rowStart instanceof Function&&y.rowStart({row:p,data:h[p]},this);var J=a.call(this,h[p],q);for(N=0;N<x.length;N+=1){var le=h[p][x[N]];"cellStart"in y&&y.cellStart instanceof Function&&y.cellStart({row:p,col:N,data:le},this),o.call(this,new s(l,c,q[x[N]],J,le,p+2,fe[x[N]]))}}return this.internal.__cell__.table_x=l,this.internal.__cell__.table_y=c,this};var a=function(l,c){var h=this.internal.__cell__.padding,g=this.internal.__cell__.table_font_size,y=this.internal.scaleFactor;return Object.keys(l).map(function(p){var _=l[p];return this.splitTextToSize(_.hasOwnProperty("text")?_.text:_,c[p]-h-h)},this).map(function(p){return this.getLineHeightFactor()*p.length*g/y+h+h},this).reduce(function(p,_){return Math.max(p,_)},0)};t.setTableHeaderRow=function(l){r.call(this),this.internal.__cell__.tableHeaderRow=l},t.printHeaderRow=function(l,c){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var h;if(n=!0,typeof this.internal.__cell__.headerFunction=="function"){var g=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(g[0],g[1],g[2],g[3],void 0,-1)}this.setFont(void 0,"bold");for(var y=[],p=0;p<this.internal.__cell__.tableHeaderRow.length;p+=1){h=this.internal.__cell__.tableHeaderRow[p].clone(),c&&(h.y=this.internal.__cell__.margins.top||0,y.push(h)),h.lineNumber=l;var _=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,h),this.setTextColor(_)}y.length>0&&this.setTableHeaderRow(y),this.setFont(void 0,"normal"),n=!1}}(vt.API);var qE={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},HE=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],X2=zE(HE),$E=[100,200,300,400,500,600,700,800,900],fB=zE($E);function a1(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),n=function(s){return qE[s=s||"normal"]?s:"normal"}(t.style),r=function(s){return s?typeof s=="number"?s>=100&&s<=900&&s%100==0?s:400:/^\d00$/.test(s)?parseInt(s):s==="bold"?700:400:400}(t.weight),i=function(s){return typeof X2[s=s||"normal"]=="number"?s:"normal"}(t.stretch);return{family:e,style:n,weight:r,stretch:i,src:t.src||[],ref:t.ref||{name:e,style:[i,n,r].join(" ")}}}function K_(t,e,n,r){var i;for(i=n;i>=0&&i<e.length;i+=r)if(t[e[i]])return t[e[i]];for(i=n;i>=0&&i<e.length;i-=r)if(t[e[i]])return t[e[i]]}var pB={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},Y_={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function Q_(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function X_(t){return t.trimLeft()}function mB(t,e){for(var n=0;n<t.length;){if(t.charAt(n)===e)return[t.substring(0,n),t.substring(n+1)];n+=1}return null}function gB(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var pp,J_,Z_,Xc,mp,e4,t4,n4,l1=["times"];function r4(t,e,n,r,i){var s=4,o=s4;switch(i){case vt.API.image_compression.FAST:s=1,o=i4;break;case vt.API.image_compression.MEDIUM:s=6,o=o4;break;case vt.API.image_compression.SLOW:s=9,o=a4}t=function(l,c,h,g){for(var y,p=l.length/c,_=new Uint8Array(l.length+p),N=[yB,i4,s4,o4,a4],C=0;C<p;C+=1){var x=C*c,k=l.subarray(x,x+c);if(g)_.set(g(k,h,y),x+C);else{for(var R=N.length,j=[],q=0;q<R;q+=1)j[q]=N[q](k,h,y);var Q=wB(j.concat());_.set(j[Q],x+C)}y=k}return _}(t,e,Math.ceil(n*r/8),o);var a=H2(t,{level:s});return vt.API.__addimage__.arrayBufferToBinaryString(a)}function yB(t){var e=Array.apply([],t);return e.unshift(0),e}function i4(t,e){var n=t.length,r=[];r[0]=1;for(var i=0;i<n;i+=1){var s=t[i-e]||0;r[i+1]=t[i]-s+256&255}return r}function s4(t,e,n){var r=t.length,i=[];i[0]=2;for(var s=0;s<r;s+=1){var o=n&&n[s]||0;i[s+1]=t[s]-o+256&255}return i}function o4(t,e,n){var r=t.length,i=[];i[0]=3;for(var s=0;s<r;s+=1){var o=t[s-e]||0,a=n&&n[s]||0;i[s+1]=t[s]+256-(o+a>>>1)&255}return i}function a4(t,e,n){var r=t.length,i=[];i[0]=4;for(var s=0;s<r;s+=1){var o=vB(t[s-e]||0,n&&n[s]||0,n&&n[s-e]||0);i[s+1]=t[s]-o+256&255}return i}function vB(t,e,n){if(t===e&&e===n)return t;var r=Math.abs(e-n),i=Math.abs(t-n),s=Math.abs(t+e-n-n);return r<=i&&r<=s?t:i<=s?e:n}function wB(t){var e=t.map(function(n){return n.reduce(function(r,i){return r+Math.abs(i)},0)});return e.indexOf(Math.min.apply(null,e))}function c1(t,e,n){var r=e*n,i=Math.floor(r/8),s=16-(r-8*i+n),o=(1<<n)-1;return WE(t,i)>>s&o}function l4(t,e,n,r){var i=n*r,s=Math.floor(i/8),o=16-(i-8*s+r),a=(1<<r)-1,l=(e&a)<<o;(function(c,h,g){if(h+1<c.byteLength)c.setUint16(h,g,!1);else{var y=g>>8&255;c.setUint8(h,y)}})(t,s,WE(t,s)&~(a<<o)&65535|l)}function WE(t,e){return e+1<t.byteLength?t.getUint16(e,!1):t.getUint8(e)<<8}function xB(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var n=t[e++]|t[e++]<<8,r=t[e++]|t[e++]<<8,i=t[e++],s=i>>7,o=1<<1+(7&i);t[e++],t[e++];var a=null,l=null;s&&(a=e,l=o,e+=3*o);var c=!0,h=[],g=0,y=null,p=0,_=null;for(this.width=n,this.height=r;c&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,_=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((A=t[e++])>=0))throw Error("Invalid block size");if(A===0)break;e+=A}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var N=t[e++];g=t[e++]|t[e++]<<8,y=t[e++],1&N||(y=null),p=N>>2&7,e++;break;case 254:for(;;){if(!((A=t[e++])>=0))throw Error("Invalid block size");if(A===0)break;e+=A}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var C=t[e++]|t[e++]<<8,x=t[e++]|t[e++]<<8,k=t[e++]|t[e++]<<8,R=t[e++]|t[e++]<<8,j=t[e++],q=j>>6&1,Q=1<<1+(7&j),D=a,S=l,T=!1;j>>7&&(T=!0,D=e,S=Q,e+=3*Q);var F=e;for(e++;;){var A;if(!((A=t[e++])>=0))throw Error("Invalid block size");if(A===0)break;e+=A}h.push({x:C,y:x,width:k,height:R,has_local_palette:T,palette_offset:D,palette_size:S,data_offset:F,data_length:e-F,transparent_index:y,interlaced:!!q,delay:g,disposal:p});break;case 59:c=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return h.length},this.loopCount=function(){return _},this.frameInfo=function(I){if(I<0||I>=h.length)throw new Error("Frame index out of range.");return h[I]},this.decodeAndBlitFrameBGRA=function(I,L){var ne=this.frameInfo(I),ie=ne.width*ne.height,ue=new Uint8Array(ie);c4(t,ne.data_offset,ue,ie);var fe=ne.palette_offset,J=ne.transparent_index;J===null&&(J=256);var le=ne.width,xe=n-le,we=le,O=4*(ne.y*n+ne.x),W=4*((ne.y+ne.height)*n+ne.x),Y=O,K=4*xe;ne.interlaced===!0&&(K+=4*n*7);for(var re=8,ae=0,ve=ue.length;ae<ve;++ae){var te=ue[ae];if(we===0&&(we=le,(Y+=K)>=W&&(K=4*xe+4*n*(re-1),Y=O+(le+xe)*(re<<1),re>>=1)),te===J)Y+=4;else{var de=t[fe+3*te],ge=t[fe+3*te+1],Se=t[fe+3*te+2];L[Y++]=Se,L[Y++]=ge,L[Y++]=de,L[Y++]=255}--we}},this.decodeAndBlitFrameRGBA=function(I,L){var ne=this.frameInfo(I),ie=ne.width*ne.height,ue=new Uint8Array(ie);c4(t,ne.data_offset,ue,ie);var fe=ne.palette_offset,J=ne.transparent_index;J===null&&(J=256);var le=ne.width,xe=n-le,we=le,O=4*(ne.y*n+ne.x),W=4*((ne.y+ne.height)*n+ne.x),Y=O,K=4*xe;ne.interlaced===!0&&(K+=4*n*7);for(var re=8,ae=0,ve=ue.length;ae<ve;++ae){var te=ue[ae];if(we===0&&(we=le,(Y+=K)>=W&&(K=4*xe+4*n*(re-1),Y=O+(le+xe)*(re<<1),re>>=1)),te===J)Y+=4;else{var de=t[fe+3*te],ge=t[fe+3*te+1],Se=t[fe+3*te+2];L[Y++]=de,L[Y++]=ge,L[Y++]=Se,L[Y++]=255}--we}}}function c4(t,e,n,r){for(var i=t[e++],s=1<<i,o=s+1,a=o+1,l=i+1,c=(1<<l)-1,h=0,g=0,y=0,p=t[e++],_=new Int32Array(4096),N=null;;){for(;h<16&&p!==0;)g|=t[e++]<<h,h+=8,p===1?p=t[e++]:--p;if(h<l)break;var C=g&c;if(g>>=l,h-=l,C!==s){if(C===o)break;for(var x=C<a?C:N,k=0,R=x;R>s;)R=_[R]>>8,++k;var j=R;if(y+k+(x!==C?1:0)>r)return void kn.log("Warning, gif stream longer than expected.");n[y++]=j;var q=y+=k;for(x!==C&&(n[y++]=j),R=x;k--;)R=_[R],n[--q]=255&R,R>>=8;N!==null&&a<4096&&(_[a++]=N<<8|j,a>=c+1&&l<12&&(++l,c=c<<1|1)),N=C}else a=o+1,c=(1<<(l=i+1))-1,N=null}return y!==r&&kn.log("Warning, gif stream shorter than expected."),n}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function u1(t){var e,n,r,i,s,o=Math.floor,a=new Array(64),l=new Array(64),c=new Array(64),h=new Array(64),g=new Array(65535),y=new Array(65535),p=new Array(64),_=new Array(64),N=[],C=0,x=7,k=new Array(64),R=new Array(64),j=new Array(64),q=new Array(256),Q=new Array(2048),D=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],S=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],T=[0,1,2,3,4,5,6,7,8,9,10,11],F=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],A=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],I=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],L=[0,1,2,3,4,5,6,7,8,9,10,11],ne=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],ie=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function ue(O,W){for(var Y=0,K=0,re=new Array,ae=1;ae<=16;ae++){for(var ve=1;ve<=O[ae];ve++)re[W[K]]=[],re[W[K]][0]=Y,re[W[K]][1]=ae,K++,Y++;Y*=2}return re}function fe(O){for(var W=O[0],Y=O[1]-1;Y>=0;)W&1<<Y&&(C|=1<<x),Y--,--x<0&&(C==255?(J(255),J(0)):J(C),x=7,C=0)}function J(O){N.push(O)}function le(O){J(O>>8&255),J(255&O)}function xe(O,W,Y,K,re){for(var ae,ve=re[0],te=re[240],de=function(Ce,Xe){var qe,it,Ae,bt,gt,$e,ot,Nt,Ye,wt,et=0;for(Ye=0;Ye<8;++Ye){qe=Ce[et],it=Ce[et+1],Ae=Ce[et+2],bt=Ce[et+3],gt=Ce[et+4],$e=Ce[et+5],ot=Ce[et+6];var Ot=qe+(Nt=Ce[et+7]),Ft=qe-Nt,Ge=it+ot,ft=it-ot,Et=Ae+$e,at=Ae-$e,Ct=bt+gt,Qe=bt-gt,tt=Ot+Ct,kt=Ot-Ct,ze=Ge+Et,Ke=Ge-Et;Ce[et]=tt+ze,Ce[et+4]=tt-ze;var ut=.707106781*(Ke+kt);Ce[et+2]=kt+ut,Ce[et+6]=kt-ut;var qn=.382683433*((tt=Qe+at)-(Ke=ft+Ft)),zt=.5411961*tt+qn,en=1.306562965*Ke+qn,qt=.707106781*(ze=at+ft),nt=Ft+qt,Ut=Ft-qt;Ce[et+5]=Ut+zt,Ce[et+3]=Ut-zt,Ce[et+1]=nt+en,Ce[et+7]=nt-en,et+=8}for(et=0,Ye=0;Ye<8;++Ye){qe=Ce[et],it=Ce[et+8],Ae=Ce[et+16],bt=Ce[et+24],gt=Ce[et+32],$e=Ce[et+40],ot=Ce[et+48];var Fn=qe+(Nt=Ce[et+56]),Sn=qe-Nt,_n=it+ot,an=it-ot,tn=Ae+$e,Wt=Ae-$e,ni=bt+gt,Nr=bt-gt,Un=Fn+ni,Sr=Fn-ni,Ar=_n+tn,Er=_n-tn;Ce[et]=Un+Ar,Ce[et+32]=Un-Ar;var dn=.707106781*(Er+Sr);Ce[et+16]=Sr+dn,Ce[et+48]=Sr-dn;var Tr=.382683433*((Un=Nr+Wt)-(Er=an+Sn)),Dr=.5411961*Un+Tr,zr=1.306562965*Er+Tr,bi=.707106781*(Ar=Wt+an),gs=Sn+bi,jo=Sn-bi;Ce[et+40]=jo+Dr,Ce[et+24]=jo-Dr,Ce[et+8]=gs+zr,Ce[et+56]=gs-zr,et++}for(Ye=0;Ye<64;++Ye)wt=Ce[Ye]*Xe[Ye],p[Ye]=wt>0?wt+.5|0:wt-.5|0;return p}(O,W),ge=0;ge<64;++ge)_[D[ge]]=de[ge];var Se=_[0]-Y;Y=_[0],Se==0?fe(K[0]):(fe(K[y[ae=32767+Se]]),fe(g[ae]));for(var Te=63;Te>0&&_[Te]==0;)Te--;if(Te==0)return fe(ve),Y;for(var Ue,V=1;V<=Te;){for(var De=V;_[V]==0&&V<=Te;)++V;var Ze=V-De;if(Ze>=16){Ue=Ze>>4;for(var Ve=1;Ve<=Ue;++Ve)fe(te);Ze&=15}ae=32767+_[V],fe(re[(Ze<<4)+y[ae]]),fe(g[ae]),V++}return Te!=63&&fe(ve),Y}function we(O){O=Math.min(Math.max(O,1),100),s!=O&&(function(W){for(var Y=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],K=0;K<64;K++){var re=o((Y[K]*W+50)/100);re=Math.min(Math.max(re,1),255),a[D[K]]=re}for(var ae=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],ve=0;ve<64;ve++){var te=o((ae[ve]*W+50)/100);te=Math.min(Math.max(te,1),255),l[D[ve]]=te}for(var de=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],ge=0,Se=0;Se<8;Se++)for(var Te=0;Te<8;Te++)c[ge]=1/(a[D[ge]]*de[Se]*de[Te]*8),h[ge]=1/(l[D[ge]]*de[Se]*de[Te]*8),ge++}(O<50?Math.floor(5e3/O):Math.floor(200-2*O)),s=O)}this.encode=function(O,W){W&&we(W),N=new Array,C=0,x=7,le(65496),le(65504),le(16),J(74),J(70),J(73),J(70),J(0),J(1),J(1),J(0),le(1),le(1),J(0),J(0),function(){le(65499),le(132),J(0);for(var it=0;it<64;it++)J(a[it]);J(1);for(var Ae=0;Ae<64;Ae++)J(l[Ae])}(),function(it,Ae){le(65472),le(17),J(8),le(Ae),le(it),J(3),J(1),J(17),J(0),J(2),J(17),J(1),J(3),J(17),J(1)}(O.width,O.height),function(){le(65476),le(418),J(0);for(var it=0;it<16;it++)J(S[it+1]);for(var Ae=0;Ae<=11;Ae++)J(T[Ae]);J(16);for(var bt=0;bt<16;bt++)J(F[bt+1]);for(var gt=0;gt<=161;gt++)J(A[gt]);J(1);for(var $e=0;$e<16;$e++)J(I[$e+1]);for(var ot=0;ot<=11;ot++)J(L[ot]);J(17);for(var Nt=0;Nt<16;Nt++)J(ne[Nt+1]);for(var Ye=0;Ye<=161;Ye++)J(ie[Ye])}(),le(65498),le(12),J(3),J(1),J(0),J(2),J(17),J(3),J(17),J(0),J(63),J(0);var Y=0,K=0,re=0;C=0,x=7,this.encode.displayName="_encode_";for(var ae,ve,te,de,ge,Se,Te,Ue,V,De=O.data,Ze=O.width,Ve=O.height,Ce=4*Ze,Xe=0;Xe<Ve;){for(ae=0;ae<Ce;){for(ge=Ce*Xe+ae,Te=-1,Ue=0,V=0;V<64;V++)Se=ge+(Ue=V>>3)*Ce+(Te=4*(7&V)),Xe+Ue>=Ve&&(Se-=Ce*(Xe+1+Ue-Ve)),ae+Te>=Ce&&(Se-=ae+Te-Ce+4),ve=De[Se++],te=De[Se++],de=De[Se++],k[V]=(Q[ve]+Q[te+256|0]+Q[de+512|0]>>16)-128,R[V]=(Q[ve+768|0]+Q[te+1024|0]+Q[de+1280|0]>>16)-128,j[V]=(Q[ve+1280|0]+Q[te+1536|0]+Q[de+1792|0]>>16)-128;Y=xe(k,c,Y,e,r),K=xe(R,h,K,n,i),re=xe(j,h,re,n,i),ae+=32}Xe+=8}if(x>=0){var qe=[];qe[1]=x+1,qe[0]=(1<<x+1)-1,fe(qe)}return le(65497),new Uint8Array(N)},t=t||50,function(){for(var O=String.fromCharCode,W=0;W<256;W++)q[W]=O(W)}(),e=ue(S,T),n=ue(I,L),r=ue(F,A),i=ue(ne,ie),function(){for(var O=1,W=2,Y=1;Y<=15;Y++){for(var K=O;K<W;K++)y[32767+K]=Y,g[32767+K]=[],g[32767+K][1]=Y,g[32767+K][0]=K;for(var re=-(W-1);re<=-O;re++)y[32767+re]=Y,g[32767+re]=[],g[32767+re][1]=Y,g[32767+re][0]=W-1+re;O<<=1,W<<=1}}(),function(){for(var O=0;O<256;O++)Q[O]=19595*O,Q[O+256|0]=38470*O,Q[O+512|0]=7471*O+32768,Q[O+768|0]=-11059*O,Q[O+1024|0]=-21709*O,Q[O+1280|0]=32768*O+8421375,Q[O+1536|0]=-27439*O,Q[O+1792|0]=-5329*O}(),we(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function $s(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function u4(t){function e(T){if(!T)throw Error("assert :P")}function n(T,F,A){for(var I=0;4>I;I++)if(T[F+I]!=A.charCodeAt(I))return!0;return!1}function r(T,F,A,I,L){for(var ne=0;ne<L;ne++)T[F+ne]=A[I+ne]}function i(T,F,A,I){for(var L=0;L<I;L++)T[F+L]=A}function s(T){return new Int32Array(T)}function o(T,F){for(var A=[],I=0;I<T;I++)A.push(new F);return A}function a(T,F){var A=[];return function I(L,ne,ie){for(var ue=ie[ne],fe=0;fe<ue&&(L.push(ie.length>ne+1?[]:new F),!(ie.length<ne+1));fe++)I(L[fe],ne+1,ie)}(A,0,T),A}var l=function(){var T=this;function F(d,m){for(var w=1<<m-1>>>0;d&w;)w>>>=1;return w?(d&w-1)+w:d}function A(d,m,w,E,U){e(!(E%w));do d[m+(E-=w)]=U;while(0<E)}function I(d,m,w,E,U){if(e(2328>=U),512>=U)var B=s(512);else if((B=s(U))==null)return 0;return function(z,H,G,Z,ce,_e){var ee,he,ye=H,Ee=1<<G,be=s(16),Ie=s(16);for(e(ce!=0),e(Z!=null),e(z!=null),e(0<G),he=0;he<ce;++he){if(15<Z[he])return 0;++be[Z[he]]}if(be[0]==ce)return 0;for(Ie[1]=0,ee=1;15>ee;++ee){if(be[ee]>1<<ee)return 0;Ie[ee+1]=Ie[ee]+be[ee]}for(he=0;he<ce;++he)ee=Z[he],0<Z[he]&&(_e[Ie[ee]++]=he);if(Ie[15]==1)return(Z=new L).g=0,Z.value=_e[0],A(z,ye,1,Ee,Z),Ee;var Pe,Me=-1,je=Ee-1,yt=0,lt=1,Vt=1,pt=1<<G;for(he=0,ee=1,ce=2;ee<=G;++ee,ce<<=1){if(lt+=Vt<<=1,0>(Vt-=be[ee]))return 0;for(;0<be[ee];--be[ee])(Z=new L).g=ee,Z.value=_e[he++],A(z,ye+yt,ce,pt,Z),yt=F(yt,ee)}for(ee=G+1,ce=2;15>=ee;++ee,ce<<=1){if(lt+=Vt<<=1,0>(Vt-=be[ee]))return 0;for(;0<be[ee];--be[ee]){if(Z=new L,(yt&je)!=Me){for(ye+=pt,Pe=1<<(Me=ee)-G;15>Me&&!(0>=(Pe-=be[Me]));)++Me,Pe<<=1;Ee+=pt=1<<(Pe=Me-G),z[H+(Me=yt&je)].g=Pe+G,z[H+Me].value=ye-H-Me}Z.g=ee-G,Z.value=_e[he++],A(z,ye+(yt>>G),ce,pt,Z),yt=F(yt,ee)}}return lt!=2*Ie[15]-1?0:Ee}(d,m,w,E,U,B)}function L(){this.value=this.g=0}function ne(){this.value=this.g=0}function ie(){this.G=o(5,L),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(ql,ne)}function ue(d,m,w,E){e(d!=null),e(m!=null),e(2147483648>E),d.Ca=254,d.I=0,d.b=-8,d.Ka=0,d.oa=m,d.pa=w,d.Jd=m,d.Yc=w+E,d.Zc=4<=E?w+E-4+1:w,ve(d)}function fe(d,m){for(var w=0;0<m--;)w|=de(d,128)<<m;return w}function J(d,m){var w=fe(d,m);return te(d)?-w:w}function le(d,m,w,E){var U,B=0;for(e(d!=null),e(m!=null),e(4294967288>E),d.Sb=E,d.Ra=0,d.u=0,d.h=0,4<E&&(E=4),U=0;U<E;++U)B+=m[w+U]<<8*U;d.Ra=B,d.bb=E,d.oa=m,d.pa=w}function xe(d){for(;8<=d.u&&d.bb<d.Sb;)d.Ra>>>=8,d.Ra+=d.oa[d.pa+d.bb]<<Ca-8>>>0,++d.bb,d.u-=8;K(d)&&(d.h=1,d.u=0)}function we(d,m){if(e(0<=m),!d.h&&m<=Ji){var w=Y(d)&Xi[m];return d.u+=m,xe(d),w}return d.h=1,d.u=0}function O(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function W(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function Y(d){return d.Ra>>>(d.u&Ca-1)>>>0}function K(d){return e(d.bb<=d.Sb),d.h||d.bb==d.Sb&&d.u>Ca}function re(d,m){d.u=m,d.h=K(d)}function ae(d){d.u>=Bo&&(e(d.u>=Bo),xe(d))}function ve(d){e(d!=null&&d.oa!=null),d.pa<d.Zc?(d.I=(d.oa[d.pa++]|d.I<<8)>>>0,d.b+=8):(e(d!=null&&d.oa!=null),d.pa<d.Yc?(d.b+=8,d.I=d.oa[d.pa++]|d.I<<8):d.Ka?d.b=0:(d.I<<=8,d.b+=8,d.Ka=1))}function te(d){return fe(d,1)}function de(d,m){var w=d.Ca;0>d.b&&ve(d);var E=d.b,U=w*m>>>8,B=(d.I>>>E>U)+0;for(B?(w-=U,d.I-=U+1<<E>>>0):w=U+1,E=w,U=0;256<=E;)U+=8,E>>=8;return E=7^U+Pa[E],d.b-=E,d.Ca=(w<<E)-1,B}function ge(d,m,w){d[m+0]=w>>24&255,d[m+1]=w>>16&255,d[m+2]=w>>8&255,d[m+3]=255&w}function Se(d,m){return d[m+0]|d[m+1]<<8}function Te(d,m){return Se(d,m)|d[m+2]<<16}function Ue(d,m){return Se(d,m)|Se(d,m+2)<<16}function V(d,m){var w=1<<m;return e(d!=null),e(0<m),d.X=s(w),d.X==null?0:(d.Mb=32-m,d.Xa=m,1)}function De(d,m){e(d!=null),e(m!=null),e(d.Xa==m.Xa),r(m.X,0,d.X,0,1<<m.Xa)}function Ze(){this.X=[],this.Xa=this.Mb=0}function Ve(d,m,w,E){e(w!=null),e(E!=null);var U=w[0],B=E[0];return U==0&&(U=(d*B+m/2)/m),B==0&&(B=(m*U+d/2)/d),0>=U||0>=B?0:(w[0]=U,E[0]=B,1)}function Ce(d,m){return d+(1<<m)-1>>>m}function Xe(d,m){return((4278255360&d)+(4278255360&m)>>>0&4278255360)+((16711935&d)+(16711935&m)>>>0&16711935)>>>0}function qe(d,m){T[m]=function(w,E,U,B,z,H,G){var Z;for(Z=0;Z<z;++Z){var ce=T[d](H[G+Z-1],U,B+Z);H[G+Z]=Xe(w[E+Z],ce)}}}function it(){this.ud=this.hd=this.jd=0}function Ae(d,m){return((4278124286&(d^m))>>>1)+(d&m)>>>0}function bt(d){return 0<=d&&256>d?d:0>d?0:255<d?255:void 0}function gt(d,m){return bt(d+(d-m+.5>>1))}function $e(d,m,w){return Math.abs(m-w)-Math.abs(d-w)}function ot(d,m,w,E,U,B,z){for(E=B[z-1],w=0;w<U;++w)B[z+w]=E=Xe(d[m+w],E)}function Nt(d,m,w,E,U){var B;for(B=0;B<w;++B){var z=d[m+B],H=z>>8&255,G=16711935&(G=(G=16711935&z)+((H<<16)+H));E[U+B]=(4278255360&z)+G>>>0}}function Ye(d,m){m.jd=255&d,m.hd=d>>8&255,m.ud=d>>16&255}function wt(d,m,w,E,U,B){var z;for(z=0;z<E;++z){var H=m[w+z],G=H>>>8,Z=H,ce=255&(ce=(ce=H>>>16)+((d.jd<<24>>24)*(G<<24>>24)>>>5));Z=255&(Z=(Z+=(d.hd<<24>>24)*(G<<24>>24)>>>5)+((d.ud<<24>>24)*(ce<<24>>24)>>>5)),U[B+z]=(4278255360&H)+(ce<<16)+Z}}function et(d,m,w,E,U){T[m]=function(B,z,H,G,Z,ce,_e,ee,he){for(G=_e;G<ee;++G)for(_e=0;_e<he;++_e)Z[ce++]=U(H[E(B[z++])])},T[d]=function(B,z,H,G,Z,ce,_e){var ee=8>>B.b,he=B.Ea,ye=B.K[0],Ee=B.w;if(8>ee)for(B=(1<<B.b)-1,Ee=(1<<ee)-1;z<H;++z){var be,Ie=0;for(be=0;be<he;++be)be&B||(Ie=E(G[Z++])),ce[_e++]=U(ye[Ie&Ee]),Ie>>=ee}else T["VP8LMapColor"+w](G,Z,ye,Ee,ce,_e,z,H,he)}}function Ot(d,m,w,E,U){for(w=m+w;m<w;){var B=d[m++];E[U++]=B>>16&255,E[U++]=B>>8&255,E[U++]=255&B}}function Ft(d,m,w,E,U){for(w=m+w;m<w;){var B=d[m++];E[U++]=B>>16&255,E[U++]=B>>8&255,E[U++]=255&B,E[U++]=B>>24&255}}function Ge(d,m,w,E,U){for(w=m+w;m<w;){var B=(z=d[m++])>>16&240|z>>12&15,z=240&z|z>>28&15;E[U++]=B,E[U++]=z}}function ft(d,m,w,E,U){for(w=m+w;m<w;){var B=(z=d[m++])>>16&248|z>>13&7,z=z>>5&224|z>>3&31;E[U++]=B,E[U++]=z}}function Et(d,m,w,E,U){for(w=m+w;m<w;){var B=d[m++];E[U++]=255&B,E[U++]=B>>8&255,E[U++]=B>>16&255}}function at(d,m,w,E,U,B){if(B==0)for(w=m+w;m<w;)ge(E,((B=d[m++])[0]>>24|B[1]>>8&65280|B[2]<<8&16711680|B[3]<<24)>>>0),U+=32;else r(E,U,d,m,w)}function Ct(d,m){T[m][0]=T[d+"0"],T[m][1]=T[d+"1"],T[m][2]=T[d+"2"],T[m][3]=T[d+"3"],T[m][4]=T[d+"4"],T[m][5]=T[d+"5"],T[m][6]=T[d+"6"],T[m][7]=T[d+"7"],T[m][8]=T[d+"8"],T[m][9]=T[d+"9"],T[m][10]=T[d+"10"],T[m][11]=T[d+"11"],T[m][12]=T[d+"12"],T[m][13]=T[d+"13"],T[m][14]=T[d+"0"],T[m][15]=T[d+"0"]}function Qe(d){return d==Og||d==Mg||d==Ef||d==Fg}function tt(){this.eb=[],this.size=this.A=this.fb=0}function kt(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function ze(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new tt,this.f.kb=new kt,this.sd=null}function Ke(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function ut(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function qn(d){return alert("todo:WebPSamplerProcessPlane"),d.T}function zt(d,m){var w=d.T,E=m.ba.f.RGBA,U=E.eb,B=E.fb+d.ka*E.A,z=ks[m.ba.S],H=d.y,G=d.O,Z=d.f,ce=d.N,_e=d.ea,ee=d.W,he=m.cc,ye=m.dc,Ee=m.Mc,be=m.Nc,Ie=d.ka,Pe=d.ka+d.T,Me=d.U,je=Me+1>>1;for(Ie==0?z(H,G,null,null,Z,ce,_e,ee,Z,ce,_e,ee,U,B,null,null,Me):(z(m.ec,m.fc,H,G,he,ye,Ee,be,Z,ce,_e,ee,U,B-E.A,U,B,Me),++w);Ie+2<Pe;Ie+=2)he=Z,ye=ce,Ee=_e,be=ee,ce+=d.Rc,ee+=d.Rc,B+=2*E.A,z(H,(G+=2*d.fa)-d.fa,H,G,he,ye,Ee,be,Z,ce,_e,ee,U,B-E.A,U,B,Me);return G+=d.fa,d.j+Pe<d.o?(r(m.ec,m.fc,H,G,Me),r(m.cc,m.dc,Z,ce,je),r(m.Mc,m.Nc,_e,ee,je),w--):1&Pe||z(H,G,null,null,Z,ce,_e,ee,Z,ce,_e,ee,U,B+E.A,null,null,Me),w}function en(d,m,w){var E=d.F,U=[d.J];if(E!=null){var B=d.U,z=m.ba.S,H=z==Af||z==Ef;m=m.ba.f.RGBA;var G=[0],Z=d.ka;G[0]=d.T,d.Kb&&(Z==0?--G[0]:(--Z,U[0]-=d.width),d.j+d.ka+d.T==d.o&&(G[0]=d.o-d.j-Z));var ce=m.eb;Z=m.fb+Z*m.A,d=_5(E,U[0],d.width,B,G,ce,Z+(H?0:3),m.A),e(w==G),d&&Qe(z)&&bh(ce,Z,H,B,G,m.A)}return 0}function qt(d){var m=d.ma,w=m.ba.S,E=11>w,U=w==Nf||w==Sf||w==Af||w==Dg||w==12||Qe(w);if(m.memory=null,m.Ib=null,m.Jb=null,m.Nd=null,!fh(m.Oa,d,U?11:12))return 0;if(U&&Qe(w)&&As(),d.da)alert("todo:use_scaling");else{if(E){if(m.Ib=qn,d.Kb){if(w=d.U+1>>1,m.memory=s(d.U+2*w),m.memory==null)return 0;m.ec=m.memory,m.fc=0,m.cc=m.ec,m.dc=m.fc+d.U,m.Mc=m.cc,m.Nc=m.dc+w,m.Ib=zt,As()}}else alert("todo:EmitYUV");U&&(m.Jb=en,E&&Mi())}if(E&&!F5){for(d=0;256>d;++d)kT[d]=89858*(d-128)+kf>>Tf,PT[d]=-22014*(d-128)+kf,CT[d]=-45773*(d-128),IT[d]=113618*(d-128)+kf>>Tf;for(d=Nh;d<Bg;++d)m=76283*(d-16)+kf>>Tf,LT[d-Nh]=Di(m,255),RT[d-Nh]=Di(m+8>>4,15);F5=1}return 1}function nt(d){var m=d.ma,w=d.U,E=d.T;return e(!(1&d.ka)),0>=w||0>=E?0:(w=m.Ib(d,m),m.Jb!=null&&m.Jb(d,m,w),m.Dc+=w,1)}function Ut(d){d.ma.memory=null}function Fn(d,m,w,E){return we(d,8)!=47?0:(m[0]=we(d,14)+1,w[0]=we(d,14)+1,E[0]=we(d,1),we(d,3)!=0?0:!d.h)}function Sn(d,m){if(4>d)return d+1;var w=d-2>>1;return(2+(1&d)<<w)+we(m,w)+1}function _n(d,m){return 120<m?m-120:1<=(w=((w=pT[m-1])>>4)*d+(8-(15&w)))?w:1;var w}function an(d,m,w){var E=Y(w),U=d[m+=255&E].g-8;return 0<U&&(re(w,w.u+8),E=Y(w),m+=d[m].value,m+=E&(1<<U)-1),re(w,w.u+d[m].g),d[m].value}function tn(d,m,w){return w.g+=d.g,w.value+=d.value<<m>>>0,e(8>=w.g),d.g}function Wt(d,m,w){var E=d.xc;return e((m=E==0?0:d.vc[d.md*(w>>E)+(m>>E)])<d.Wb),d.Ya[m]}function ni(d,m,w,E){var U=d.ab,B=d.c*m,z=d.C;m=z+m;var H=w,G=E;for(E=d.Ta,w=d.Ua;0<U--;){var Z=d.gc[U],ce=z,_e=m,ee=H,he=G,ye=(G=E,H=w,Z.Ea);switch(e(ce<_e),e(_e<=Z.nc),Z.hc){case 2:lr(ee,he,(_e-ce)*ye,G,H);break;case 0:var Ee=ce,be=_e,Ie=G,Pe=H,Me=(pt=Z).Ea;Ee==0&&(mh(ee,he,null,null,1,Ie,Pe),ot(ee,he+1,0,0,Me-1,Ie,Pe+1),he+=Me,Pe+=Me,++Ee);for(var je=1<<pt.b,yt=je-1,lt=Ce(Me,pt.b),Vt=pt.K,pt=pt.w+(Ee>>pt.b)*lt;Ee<be;){var Xt=Vt,Cr=pt,Bt=1;for($c(ee,he,Ie,Pe-Me,1,Ie,Pe);Bt<Me;){var mt=(Bt&~yt)+je;mt>Me&&(mt=Me),(0,yh[Xt[Cr++]>>8&15])(ee,he+ +Bt,Ie,Pe+Bt-Me,mt-Bt,Ie,Pe+Bt),Bt=mt}he+=Me,Pe+=Me,++Ee&yt||(pt+=lt)}_e!=Z.nc&&r(G,H-ye,G,H+(_e-ce-1)*ye,ye);break;case 1:for(ye=ee,be=he,Me=(ee=Z.Ea)-(Pe=ee&~(Ie=(he=1<<Z.b)-1)),Ee=Ce(ee,Z.b),je=Z.K,Z=Z.w+(ce>>Z.b)*Ee;ce<_e;){for(yt=je,lt=Z,Vt=new it,pt=be+Pe,Xt=be+ee;be<pt;)Ye(yt[lt++],Vt),vh(Vt,ye,be,he,G,H),be+=he,H+=he;be<Xt&&(Ye(yt[lt++],Vt),vh(Vt,ye,be,Me,G,H),be+=Me,H+=Me),++ce&Ie||(Z+=Ee)}break;case 3:if(ee==G&&he==H&&0<Z.b){for(be=G,ee=ye=H+(_e-ce)*ye-(Pe=(_e-ce)*Ce(Z.Ea,Z.b)),he=G,Ie=H,Ee=[],Pe=(Me=Pe)-1;0<=Pe;--Pe)Ee[Pe]=he[Ie+Pe];for(Pe=Me-1;0<=Pe;--Pe)be[ee+Pe]=Ee[Pe];wf(Z,ce,_e,G,ye,G,H)}else wf(Z,ce,_e,ee,he,G,H)}H=E,G=w}G!=w&&r(E,w,H,G,B)}function Nr(d,m){var w=d.V,E=d.Ba+d.c*d.C,U=m-d.C;if(e(m<=d.l.o),e(16>=U),0<U){var B=d.l,z=d.Ta,H=d.Ua,G=B.width;if(ni(d,U,w,E),U=H=[H],e((w=d.C)<(E=m)),e(B.v<B.va),E>B.o&&(E=B.o),w<B.j){var Z=B.j-w;w=B.j,U[0]+=Z*G}if(w>=E?w=0:(U[0]+=4*B.v,B.ka=w-B.j,B.U=B.va-B.v,B.T=E-w,w=1),w){if(H=H[0],11>(w=d.ca).S){var ce=w.f.RGBA,_e=(E=w.S,U=B.U,B=B.T,Z=ce.eb,ce.A),ee=B;for(ce=ce.fb+d.Ma*ce.A;0<ee--;){var he=z,ye=H,Ee=U,be=Z,Ie=ce;switch(E){case _f:wh(he,ye,Ee,be,Ie);break;case Nf:La(he,ye,Ee,be,Ie);break;case Og:La(he,ye,Ee,be,Ie),bh(be,Ie,0,Ee,1,0);break;case I5:Hl(he,ye,Ee,be,Ie);break;case Sf:at(he,ye,Ee,be,Ie,1);break;case Mg:at(he,ye,Ee,be,Ie,1),bh(be,Ie,0,Ee,1,0);break;case Af:at(he,ye,Ee,be,Ie,0);break;case Ef:at(he,ye,Ee,be,Ie,0),bh(be,Ie,1,Ee,1,0);break;case Dg:Ra(he,ye,Ee,be,Ie);break;case Fg:Ra(he,ye,Ee,be,Ie),b5(be,Ie,Ee,1,0);break;case C5:ja(he,ye,Ee,be,Ie);break;default:e(0)}H+=G,ce+=_e}d.Ma+=B}else alert("todo:EmitRescaledRowsYUVA");e(d.Ma<=w.height)}}d.C=m,e(d.C<=d.i)}function Un(d){var m;if(0<d.ua)return 0;for(m=0;m<d.Wb;++m){var w=d.Ya[m].G,E=d.Ya[m].H;if(0<w[1][E[1]+0].g||0<w[2][E[2]+0].g||0<w[3][E[3]+0].g)return 0}return 1}function Sr(d,m,w,E,U,B){if(d.Z!=0){var z=d.qd,H=d.rd;for(e(Ma[d.Z]!=null);m<w;++m)Ma[d.Z](z,H,E,U,E,U,B),z=E,H=U,U+=B;d.qd=z,d.rd=H}}function Ar(d,m){var w=d.l.ma,E=w.Z==0||w.Z==1?d.l.j:d.C;if(E=d.C<E?E:d.C,e(m<=d.l.o),m>E){var U=d.l.width,B=w.ca,z=w.tb+U*E,H=d.V,G=d.Ba+d.c*E,Z=d.gc;e(d.ab==1),e(Z[0].hc==3),po(Z[0],E,m,H,G,B,z),Sr(w,E,m,B,z,U)}d.C=d.Ma=m}function Er(d,m,w,E,U,B,z){var H=d.$/E,G=d.$%E,Z=d.m,ce=d.s,_e=w+d.$,ee=_e;U=w+E*U;var he=w+E*B,ye=280+ce.ua,Ee=d.Pb?H:16777216,be=0<ce.ua?ce.Wa:null,Ie=ce.wc,Pe=_e<he?Wt(ce,G,H):null;e(d.C<B),e(he<=U);var Me=!1;e:for(;;){for(;Me||_e<he;){var je=0;if(H>=Ee){var yt=_e-w;e((Ee=d).Pb),Ee.wd=Ee.m,Ee.xd=yt,0<Ee.s.ua&&De(Ee.s.Wa,Ee.s.vb),Ee=H+gT}if(G&Ie||(Pe=Wt(ce,G,H)),e(Pe!=null),Pe.Qb&&(m[_e]=Pe.qb,Me=!0),!Me)if(ae(Z),Pe.jc){je=Z,yt=m;var lt=_e,Vt=Pe.pd[Y(je)&ql-1];e(Pe.jc),256>Vt.g?(re(je,je.u+Vt.g),yt[lt]=Vt.value,je=0):(re(je,je.u+Vt.g-256),e(256<=Vt.value),je=Vt.value),je==0&&(Me=!0)}else je=an(Pe.G[0],Pe.H[0],Z);if(Z.h)break;if(Me||256>je){if(!Me)if(Pe.nd)m[_e]=(Pe.qb|je<<8)>>>0;else{if(ae(Z),Me=an(Pe.G[1],Pe.H[1],Z),ae(Z),yt=an(Pe.G[2],Pe.H[2],Z),lt=an(Pe.G[3],Pe.H[3],Z),Z.h)break;m[_e]=(lt<<24|Me<<16|je<<8|yt)>>>0}if(Me=!1,++_e,++G>=E&&(G=0,++H,z!=null&&H<=B&&!(H%16)&&z(d,H),be!=null))for(;ee<_e;)je=m[ee++],be.X[(506832829*je&4294967295)>>>be.Mb]=je}else if(280>je){if(je=Sn(je-256,Z),yt=an(Pe.G[4],Pe.H[4],Z),ae(Z),yt=_n(E,yt=Sn(yt,Z)),Z.h)break;if(_e-w<yt||U-_e<je)break e;for(lt=0;lt<je;++lt)m[_e+lt]=m[_e+lt-yt];for(_e+=je,G+=je;G>=E;)G-=E,++H,z!=null&&H<=B&&!(H%16)&&z(d,H);if(e(_e<=U),G&Ie&&(Pe=Wt(ce,G,H)),be!=null)for(;ee<_e;)je=m[ee++],be.X[(506832829*je&4294967295)>>>be.Mb]=je}else{if(!(je<ye))break e;for(Me=je-280,e(be!=null);ee<_e;)je=m[ee++],be.X[(506832829*je&4294967295)>>>be.Mb]=je;je=_e,e(!(Me>>>(yt=be).Xa)),m[je]=yt.X[Me],Me=!0}Me||e(Z.h==K(Z))}if(d.Pb&&Z.h&&_e<U)e(d.m.h),d.a=5,d.m=d.wd,d.$=d.xd,0<d.s.ua&&De(d.s.vb,d.s.Wa);else{if(Z.h)break e;z!=null&&z(d,H>B?B:H),d.a=0,d.$=_e-w}return 1}return d.a=3,0}function dn(d){e(d!=null),d.vc=null,d.yc=null,d.Ya=null;var m=d.Wa;m!=null&&(m.X=null),d.vb=null,e(d!=null)}function Tr(){var d=new St;return d==null?null:(d.a=0,d.xb=R5,Ct("Predictor","VP8LPredictors"),Ct("Predictor","VP8LPredictors_C"),Ct("PredictorAdd","VP8LPredictorsAdd"),Ct("PredictorAdd","VP8LPredictorsAdd_C"),lr=Nt,vh=wt,wh=Ot,La=Ft,Ra=Ge,ja=ft,Hl=Et,T.VP8LMapColor32b=fo,T.VP8LMapColor8b=gh,d)}function Dr(d,m,w,E,U){var B=1,z=[d],H=[m],G=E.m,Z=E.s,ce=null,_e=0;e:for(;;){if(w)for(;B&&we(G,1);){var ee=z,he=H,ye=E,Ee=1,be=ye.m,Ie=ye.gc[ye.ab],Pe=we(be,2);if(ye.Oc&1<<Pe)B=0;else{switch(ye.Oc|=1<<Pe,Ie.hc=Pe,Ie.Ea=ee[0],Ie.nc=he[0],Ie.K=[null],++ye.ab,e(4>=ye.ab),Pe){case 0:case 1:Ie.b=we(be,3)+2,Ee=Dr(Ce(Ie.Ea,Ie.b),Ce(Ie.nc,Ie.b),0,ye,Ie.K),Ie.K=Ie.K[0];break;case 3:var Me,je=we(be,8)+1,yt=16<je?0:4<je?1:2<je?2:3;if(ee[0]=Ce(Ie.Ea,yt),Ie.b=yt,Me=Ee=Dr(je,1,0,ye,Ie.K)){var lt,Vt=je,pt=Ie,Xt=1<<(8>>pt.b),Cr=s(Xt);if(Cr==null)Me=0;else{var Bt=pt.K[0],mt=pt.w;for(Cr[0]=pt.K[0][0],lt=1;lt<1*Vt;++lt)Cr[lt]=Xe(Bt[mt+lt],Cr[lt-1]);for(;lt<4*Xt;++lt)Cr[lt]=0;pt.K[0]=null,pt.K[0]=Cr,Me=1}}Ee=Me;break;case 2:break;default:e(0)}B=Ee}}if(z=z[0],H=H[0],B&&we(G,1)&&!(B=1<=(_e=we(G,4))&&11>=_e)){E.a=3;break e}var We;if(We=B)t:{var ur,Mt,nn,Rn=E,$r=z,Si=H,nr=_e,ii=w,Ai=Rn.m,Pr=Rn.s,sn=[null],mn=1,rr=0,gn=mT[nr];n:for(;;){if(ii&&we(Ai,1)){var Wr=we(Ai,3)+2,zs=Ce($r,Wr),hr=Ce(Si,Wr),Fi=zs*hr;if(!Dr(zs,hr,0,Rn,sn))break n;for(sn=sn[0],Pr.xc=Wr,ur=0;ur<Fi;++ur){var Tn=sn[ur]>>8&65535;sn[ur]=Tn,Tn>=mn&&(mn=Tn+1)}}if(Ai.h)break n;for(Mt=0;5>Mt;++Mt){var Lr=P5[Mt];!Mt&&0<nr&&(Lr+=1<<nr),rr<Lr&&(rr=Lr)}var es=o(mn*gn,L),Ei=mn,ts=o(Ei,ie);if(ts==null)var ns=null;else e(65536>=Ei),ns=ts;var Ui=s(rr);if(ns==null||Ui==null||es==null){Rn.a=1;break n}var rs=es;for(ur=nn=0;ur<mn;++ur){var Pn=ns[ur],is=Pn.G,qs=Pn.H,Wl=0,Ho=1,Gr=0;for(Mt=0;5>Mt;++Mt){Lr=P5[Mt],is[Mt]=rs,qs[Mt]=nn,!Mt&&0<nr&&(Lr+=1<<nr);i:{var Cf,zg=Lr,Pf=Rn,Sh=Ui,OT=rs,MT=nn,qg=0,Fa=Pf.m,FT=we(Fa,1);if(i(Sh,0,0,zg),FT){var UT=we(Fa,1)+1,VT=we(Fa,1),B5=we(Fa,VT==0?1:8);Sh[B5]=1,UT==2&&(Sh[B5=we(Fa,8)]=1);var Lf=1}else{var z5=s(19),q5=we(Fa,4)+4;if(19<q5){Pf.a=3;var Rf=0;break i}for(Cf=0;Cf<q5;++Cf)z5[fT[Cf]]=we(Fa,3);var Hg=void 0,Ah=void 0,H5=Pf,BT=z5,jf=zg,$5=Sh,$g=0,Ua=H5.m,W5=8,G5=o(128,L);r:for(;I(G5,0,7,BT,19);){if(we(Ua,1)){var zT=2+2*we(Ua,3);if((Hg=2+we(Ua,zT))>jf)break r}else Hg=jf;for(Ah=0;Ah<jf&&Hg--;){ae(Ua);var K5=G5[0+(127&Y(Ua))];re(Ua,Ua.u+K5.g);var Gc=K5.value;if(16>Gc)$5[Ah++]=Gc,Gc!=0&&(W5=Gc);else{var qT=Gc==16,Y5=Gc-16,HT=hT[Y5],Q5=we(Ua,uT[Y5])+HT;if(Ah+Q5>jf)break r;for(var $T=qT?W5:0;0<Q5--;)$5[Ah++]=$T}}$g=1;break r}$g||(H5.a=3),Lf=$g}(Lf=Lf&&!Fa.h)&&(qg=I(OT,MT,8,Sh,zg)),Lf&&qg!=0?Rf=qg:(Pf.a=3,Rf=0)}if(Rf==0)break n;if(Ho&&dT[Mt]==1&&(Ho=rs[nn].g==0),Wl+=rs[nn].g,nn+=Rf,3>=Mt){var Eh,Wg=Ui[0];for(Eh=1;Eh<Lr;++Eh)Ui[Eh]>Wg&&(Wg=Ui[Eh]);Gr+=Wg}}if(Pn.nd=Ho,Pn.Qb=0,Ho&&(Pn.qb=(is[3][qs[3]+0].value<<24|is[1][qs[1]+0].value<<16|is[2][qs[2]+0].value)>>>0,Wl==0&&256>is[0][qs[0]+0].value&&(Pn.Qb=1,Pn.qb+=is[0][qs[0]+0].value<<8)),Pn.jc=!Pn.Qb&&6>Gr,Pn.jc){var Df,$o=Pn;for(Df=0;Df<ql;++Df){var Va=Df,Ba=$o.pd[Va],Of=$o.G[0][$o.H[0]+Va];256<=Of.value?(Ba.g=Of.g+256,Ba.value=Of.value):(Ba.g=0,Ba.value=0,Va>>=tn(Of,8,Ba),Va>>=tn($o.G[1][$o.H[1]+Va],16,Ba),Va>>=tn($o.G[2][$o.H[2]+Va],0,Ba),tn($o.G[3][$o.H[3]+Va],24,Ba))}}}Pr.vc=sn,Pr.Wb=mn,Pr.Ya=ns,Pr.yc=es,We=1;break t}We=0}if(!(B=We)){E.a=3;break e}if(0<_e){if(Z.ua=1<<_e,!V(Z.Wa,_e)){E.a=1,B=0;break e}}else Z.ua=0;var Gg=E,X5=z,WT=H,Kg=Gg.s,Yg=Kg.xc;if(Gg.c=X5,Gg.i=WT,Kg.md=Ce(X5,Yg),Kg.wc=Yg==0?-1:(1<<Yg)-1,w){E.xb=NT;break e}if((ce=s(z*H))==null){E.a=1,B=0;break e}B=(B=Er(E,ce,0,z,H,H,null))&&!G.h;break e}return B?(U!=null?U[0]=ce:(e(ce==null),e(w)),E.$=0,w||dn(Z)):dn(Z),B}function zr(d,m){var w=d.c*d.i,E=w+m+16*m;return e(d.c<=m),d.V=s(E),d.V==null?(d.Ta=null,d.Ua=0,d.a=1,0):(d.Ta=d.V,d.Ua=d.Ba+w+m,1)}function bi(d,m){var w=d.C,E=m-w,U=d.V,B=d.Ba+d.c*w;for(e(m<=d.l.o);0<E;){var z=16<E?16:E,H=d.l.ma,G=d.l.width,Z=G*z,ce=H.ca,_e=H.tb+G*w,ee=d.Ta,he=d.Ua;ni(d,z,U,B),N5(ee,he,ce,_e,Z),Sr(H,w,w+z,ce,_e,G),E-=z,U+=z*d.c,w+=z}e(w==m),d.C=d.Ma=m}function gs(){this.ub=this.yd=this.td=this.Rb=0}function jo(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function oh(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function oo(){this.Yb=function(){var d=[];return function m(w,E,U){for(var B=U[E],z=0;z<B&&(w.push(U.length>E+1?[]:0),!(U.length<E+1));z++)m(w[z],E+1,U)}(d,0,[3,11]),d}()}function Ll(){this.jb=s(3),this.Wc=a([4,8],oo),this.Xc=a([4,17],oo)}function ba(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function Or(){this.ld=this.La=this.dd=this.tc=0}function Ki(){this.Na=this.la=0}function _a(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Rl(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function jl(){this.uc=this.M=this.Nb=0,this.wa=Array(new Or),this.Y=0,this.ya=Array(new Rl),this.aa=0,this.l=new ao}function Dl(){this.y=s(16),this.f=s(8),this.ea=s(8)}function Ol(){this.cb=this.a=0,this.sc="",this.m=new O,this.Od=new gs,this.Kc=new jo,this.ed=new ba,this.Qa=new oh,this.Ic=this.$c=this.Aa=0,this.D=new jl,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,O),this.ia=0,this.pb=o(4,_a),this.Pa=new Ll,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Dl),this.Hd=0,this.rb=Array(new Ki),this.sb=0,this.wa=Array(new Or),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Rl),this.L=this.aa=0,this.gd=a([4,2],Or),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Di(d,m){return 0>d?0:d>m?m:d}function ao(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Mc(){var d=new Ol;return d!=null&&(d.a=0,d.sc="OK",d.cb=0,d.Xb=0,_h||(_h=Do)),d}function Hn(d,m,w){return d.a==0&&(d.a=m,d.sc=w,d.cb=0),0}function Fc(d,m,w){return 3<=w&&d[m+0]==157&&d[m+1]==1&&d[m+2]==42}function ys(d,m){if(d==null)return 0;if(d.a=0,d.sc="OK",m==null)return Hn(d,2,"null VP8Io passed to VP8GetHeaders()");var w=m.data,E=m.w,U=m.ha;if(4>U)return Hn(d,7,"Truncated header.");var B=w[E+0]|w[E+1]<<8|w[E+2]<<16,z=d.Od;if(z.Rb=!(1&B),z.td=B>>1&7,z.yd=B>>4&1,z.ub=B>>5,3<z.td)return Hn(d,3,"Incorrect keyframe parameters.");if(!z.yd)return Hn(d,4,"Frame not displayable.");E+=3,U-=3;var H=d.Kc;if(z.Rb){if(7>U)return Hn(d,7,"cannot parse picture header");if(!Fc(w,E,U))return Hn(d,3,"Bad code word");H.c=16383&(w[E+4]<<8|w[E+3]),H.Td=w[E+4]>>6,H.i=16383&(w[E+6]<<8|w[E+5]),H.Ud=w[E+6]>>6,E+=7,U-=7,d.za=H.c+15>>4,d.Ub=H.i+15>>4,m.width=H.c,m.height=H.i,m.Da=0,m.j=0,m.v=0,m.va=m.width,m.o=m.height,m.da=0,m.ib=m.width,m.hb=m.height,m.U=m.width,m.T=m.height,i((B=d.Pa).jb,0,255,B.jb.length),e((B=d.Qa)!=null),B.Cb=0,B.Bb=0,B.Fb=1,i(B.Zb,0,0,B.Zb.length),i(B.Lb,0,0,B.Lb)}if(z.ub>U)return Hn(d,7,"bad partition length");ue(B=d.m,w,E,z.ub),E+=z.ub,U-=z.ub,z.Rb&&(H.Ld=te(B),H.Kd=te(B)),H=d.Qa;var G,Z=d.Pa;if(e(B!=null),e(H!=null),H.Cb=te(B),H.Cb){if(H.Bb=te(B),te(B)){for(H.Fb=te(B),G=0;4>G;++G)H.Zb[G]=te(B)?J(B,7):0;for(G=0;4>G;++G)H.Lb[G]=te(B)?J(B,6):0}if(H.Bb)for(G=0;3>G;++G)Z.jb[G]=te(B)?fe(B,8):255}else H.Bb=0;if(B.Ka)return Hn(d,3,"cannot parse segment header");if((H=d.ed).zd=te(B),H.Tb=fe(B,6),H.wb=fe(B,3),H.Pc=te(B),H.Pc&&te(B)){for(Z=0;4>Z;++Z)te(B)&&(H.vd[Z]=J(B,6));for(Z=0;4>Z;++Z)te(B)&&(H.od[Z]=J(B,6))}if(d.L=H.Tb==0?0:H.zd?1:2,B.Ka)return Hn(d,3,"cannot parse filter header");var ce=U;if(U=G=E,E=G+ce,H=ce,d.Xb=(1<<fe(d.m,2))-1,ce<3*(Z=d.Xb))w=7;else{for(G+=3*Z,H-=3*Z,ce=0;ce<Z;++ce){var _e=w[U+0]|w[U+1]<<8|w[U+2]<<16;_e>H&&(_e=H),ue(d.Jc[+ce],w,G,_e),G+=_e,H-=_e,U+=3}ue(d.Jc[+Z],w,G,H),w=G<E?0:5}if(w!=0)return Hn(d,w,"cannot parse partitions");for(w=fe(G=d.m,7),U=te(G)?J(G,4):0,E=te(G)?J(G,4):0,H=te(G)?J(G,4):0,Z=te(G)?J(G,4):0,G=te(G)?J(G,4):0,ce=d.Qa,_e=0;4>_e;++_e){if(ce.Cb){var ee=ce.Zb[_e];ce.Fb||(ee+=w)}else{if(0<_e){d.pb[_e]=d.pb[0];continue}ee=w}var he=d.pb[_e];he.Sc[0]=Ug[Di(ee+U,127)],he.Sc[1]=Vg[Di(ee+0,127)],he.Eb[0]=2*Ug[Di(ee+E,127)],he.Eb[1]=101581*Vg[Di(ee+H,127)]>>16,8>he.Eb[1]&&(he.Eb[1]=8),he.Qc[0]=Ug[Di(ee+Z,117)],he.Qc[1]=Vg[Di(ee+G,127)],he.lc=ee+G}if(!z.Rb)return Hn(d,4,"Not a key frame.");for(te(B),z=d.Pa,w=0;4>w;++w){for(U=0;8>U;++U)for(E=0;3>E;++E)for(H=0;11>H;++H)Z=de(B,bT[w][U][E][H])?fe(B,8):wT[w][U][E][H],z.Wc[w][U].Yb[E][H]=Z;for(U=0;17>U;++U)z.Xc[w][U]=z.Wc[w][_T[U]]}return d.kc=te(B),d.kc&&(d.Bd=fe(B,8)),d.cb=1}function Do(d,m,w,E,U,B,z){var H=m[U].Yb[w];for(w=0;16>U;++U){if(!de(d,H[w+0]))return U;for(;!de(d,H[w+1]);)if(H=m[++U].Yb[0],w=0,U==16)return 16;var G=m[U+1].Yb;if(de(d,H[w+2])){var Z=d,ce=0;if(de(Z,(ee=H)[(_e=w)+3]))if(de(Z,ee[_e+6])){for(H=0,_e=2*(ce=de(Z,ee[_e+8]))+(ee=de(Z,ee[_e+9+ce])),ce=0,ee=yT[_e];ee[H];++H)ce+=ce+de(Z,ee[H]);ce+=3+(8<<_e)}else de(Z,ee[_e+7])?(ce=7+2*de(Z,165),ce+=de(Z,145)):ce=5+de(Z,159);else ce=de(Z,ee[_e+4])?3+de(Z,ee[_e+5]):2;H=G[2]}else ce=1,H=G[1];G=z+vT[U],0>(Z=d).b&&ve(Z);var _e,ee=Z.b,he=(_e=Z.Ca>>1)-(Z.I>>ee)>>31;--Z.b,Z.Ca+=he,Z.Ca|=1,Z.I-=(_e+1&he)<<ee,B[G]=((ce^he)-he)*E[(0<U)+0]}return 16}function Ml(d){var m=d.rb[d.sb-1];m.la=0,m.Na=0,i(d.zc,0,0,d.zc.length),d.ja=0}function Oi(d,m,w,E,U){U=d[m+w+32*E]+(U>>3),d[m+w+32*E]=-256&U?0>U?0:255:U}function An(d,m,w,E,U,B){Oi(d,m,0,w,E+U),Oi(d,m,1,w,E+B),Oi(d,m,2,w,E-B),Oi(d,m,3,w,E-U)}function kr(d){return(20091*d>>16)+d}function Oo(d,m,w,E){var U,B=0,z=s(16);for(U=0;4>U;++U){var H=d[m+0]+d[m+8],G=d[m+0]-d[m+8],Z=(35468*d[m+4]>>16)-kr(d[m+12]),ce=kr(d[m+4])+(35468*d[m+12]>>16);z[B+0]=H+ce,z[B+1]=G+Z,z[B+2]=G-Z,z[B+3]=H-ce,B+=4,m++}for(U=B=0;4>U;++U)H=(d=z[B+0]+4)+z[B+8],G=d-z[B+8],Z=(35468*z[B+4]>>16)-kr(z[B+12]),Oi(w,E,0,0,H+(ce=kr(z[B+4])+(35468*z[B+12]>>16))),Oi(w,E,1,0,G+Z),Oi(w,E,2,0,G-Z),Oi(w,E,3,0,H-ce),B++,E+=32}function Na(d,m,w,E){var U=d[m+0]+4,B=35468*d[m+4]>>16,z=kr(d[m+4]),H=35468*d[m+1]>>16;An(w,E,0,U+z,d=kr(d[m+1]),H),An(w,E,1,U+B,d,H),An(w,E,2,U-B,d,H),An(w,E,3,U-z,d,H)}function Uc(d,m,w,E,U){Oo(d,m,w,E),U&&Oo(d,m+16,w,E+4)}function Gt(d,m,w,E){$l(d,m+0,w,E,1),$l(d,m+32,w,E+128,1)}function Mo(d,m,w,E){var U;for(d=d[m+0]+4,U=0;4>U;++U)for(m=0;4>m;++m)Oi(w,E,m,U,d)}function lo(d,m,w,E){d[m+0]&&fn(d,m+0,w,E),d[m+16]&&fn(d,m+16,w,E+4),d[m+32]&&fn(d,m+32,w,E+128),d[m+48]&&fn(d,m+48,w,E+128+4)}function vs(d,m,w,E){var U,B=s(16);for(U=0;4>U;++U){var z=d[m+0+U]+d[m+12+U],H=d[m+4+U]+d[m+8+U],G=d[m+4+U]-d[m+8+U],Z=d[m+0+U]-d[m+12+U];B[0+U]=z+H,B[8+U]=z-H,B[4+U]=Z+G,B[12+U]=Z-G}for(U=0;4>U;++U)z=(d=B[0+4*U]+3)+B[3+4*U],H=B[1+4*U]+B[2+4*U],G=B[1+4*U]-B[2+4*U],Z=d-B[3+4*U],w[E+0]=z+H>>3,w[E+16]=Z+G>>3,w[E+32]=z-H>>3,w[E+48]=Z-G>>3,E+=64}function Fo(d,m,w){var E,U=m-32,B=Zi,z=255-d[U-1];for(E=0;E<w;++E){var H,G=B,Z=z+d[m-1];for(H=0;H<w;++H)d[m+H]=G[Z+d[U+H]];m+=32}}function Vc(d,m){Fo(d,m,4)}function ah(d,m){Fo(d,m,8)}function lh(d,m){Fo(d,m,16)}function Fl(d,m){var w;for(w=0;16>w;++w)r(d,m+32*w,d,m-32,16)}function Bc(d,m){var w;for(w=16;0<w;--w)i(d,m,d[m-1],16),m+=32}function qr(d,m,w){var E;for(E=0;16>E;++E)i(m,w+32*E,d,16)}function ws(d,m){var w,E=16;for(w=0;16>w;++w)E+=d[m-1+32*w]+d[m+w-32];qr(E>>5,d,m)}function co(d,m){var w,E=8;for(w=0;16>w;++w)E+=d[m-1+32*w];qr(E>>4,d,m)}function Sa(d,m){var w,E=8;for(w=0;16>w;++w)E+=d[m+w-32];qr(E>>4,d,m)}function zc(d,m){qr(128,d,m)}function _t(d,m,w){return d+2*m+w+2>>2}function ch(d,m){var w,E=m-32;for(E=new Uint8Array([_t(d[E-1],d[E+0],d[E+1]),_t(d[E+0],d[E+1],d[E+2]),_t(d[E+1],d[E+2],d[E+3]),_t(d[E+2],d[E+3],d[E+4])]),w=0;4>w;++w)r(d,m+32*w,E,0,E.length)}function uh(d,m){var w=d[m-1],E=d[m-1+32],U=d[m-1+64],B=d[m-1+96];ge(d,m+0,16843009*_t(d[m-1-32],w,E)),ge(d,m+32,16843009*_t(w,E,U)),ge(d,m+64,16843009*_t(E,U,B)),ge(d,m+96,16843009*_t(U,B,B))}function hh(d,m){var w,E=4;for(w=0;4>w;++w)E+=d[m+w-32]+d[m-1+32*w];for(E>>=3,w=0;4>w;++w)i(d,m+32*w,E,4)}function Mr(d,m){var w=d[m-1+0],E=d[m-1+32],U=d[m-1+64],B=d[m-1-32],z=d[m+0-32],H=d[m+1-32],G=d[m+2-32],Z=d[m+3-32];d[m+0+96]=_t(E,U,d[m-1+96]),d[m+1+96]=d[m+0+64]=_t(w,E,U),d[m+2+96]=d[m+1+64]=d[m+0+32]=_t(B,w,E),d[m+3+96]=d[m+2+64]=d[m+1+32]=d[m+0+0]=_t(z,B,w),d[m+3+64]=d[m+2+32]=d[m+1+0]=_t(H,z,B),d[m+3+32]=d[m+2+0]=_t(G,H,z),d[m+3+0]=_t(Z,G,H)}function Fs(d,m){var w=d[m+1-32],E=d[m+2-32],U=d[m+3-32],B=d[m+4-32],z=d[m+5-32],H=d[m+6-32],G=d[m+7-32];d[m+0+0]=_t(d[m+0-32],w,E),d[m+1+0]=d[m+0+32]=_t(w,E,U),d[m+2+0]=d[m+1+32]=d[m+0+64]=_t(E,U,B),d[m+3+0]=d[m+2+32]=d[m+1+64]=d[m+0+96]=_t(U,B,z),d[m+3+32]=d[m+2+64]=d[m+1+96]=_t(B,z,H),d[m+3+64]=d[m+2+96]=_t(z,H,G),d[m+3+96]=_t(H,G,G)}function dh(d,m){var w=d[m-1+0],E=d[m-1+32],U=d[m-1+64],B=d[m-1-32],z=d[m+0-32],H=d[m+1-32],G=d[m+2-32],Z=d[m+3-32];d[m+0+0]=d[m+1+64]=B+z+1>>1,d[m+1+0]=d[m+2+64]=z+H+1>>1,d[m+2+0]=d[m+3+64]=H+G+1>>1,d[m+3+0]=G+Z+1>>1,d[m+0+96]=_t(U,E,w),d[m+0+64]=_t(E,w,B),d[m+0+32]=d[m+1+96]=_t(w,B,z),d[m+1+32]=d[m+2+96]=_t(B,z,H),d[m+2+32]=d[m+3+96]=_t(z,H,G),d[m+3+32]=_t(H,G,Z)}function Aa(d,m){var w=d[m+0-32],E=d[m+1-32],U=d[m+2-32],B=d[m+3-32],z=d[m+4-32],H=d[m+5-32],G=d[m+6-32],Z=d[m+7-32];d[m+0+0]=w+E+1>>1,d[m+1+0]=d[m+0+64]=E+U+1>>1,d[m+2+0]=d[m+1+64]=U+B+1>>1,d[m+3+0]=d[m+2+64]=B+z+1>>1,d[m+0+32]=_t(w,E,U),d[m+1+32]=d[m+0+96]=_t(E,U,B),d[m+2+32]=d[m+1+96]=_t(U,B,z),d[m+3+32]=d[m+2+96]=_t(B,z,H),d[m+3+64]=_t(z,H,G),d[m+3+96]=_t(H,G,Z)}function Us(d,m){var w=d[m-1+0],E=d[m-1+32],U=d[m-1+64],B=d[m-1+96];d[m+0+0]=w+E+1>>1,d[m+2+0]=d[m+0+32]=E+U+1>>1,d[m+2+32]=d[m+0+64]=U+B+1>>1,d[m+1+0]=_t(w,E,U),d[m+3+0]=d[m+1+32]=_t(E,U,B),d[m+3+32]=d[m+1+64]=_t(U,B,B),d[m+3+64]=d[m+2+64]=d[m+0+96]=d[m+1+96]=d[m+2+96]=d[m+3+96]=B}function Ea(d,m){var w=d[m-1+0],E=d[m-1+32],U=d[m-1+64],B=d[m-1+96],z=d[m-1-32],H=d[m+0-32],G=d[m+1-32],Z=d[m+2-32];d[m+0+0]=d[m+2+32]=w+z+1>>1,d[m+0+32]=d[m+2+64]=E+w+1>>1,d[m+0+64]=d[m+2+96]=U+E+1>>1,d[m+0+96]=B+U+1>>1,d[m+3+0]=_t(H,G,Z),d[m+2+0]=_t(z,H,G),d[m+1+0]=d[m+3+32]=_t(w,z,H),d[m+1+32]=d[m+3+64]=_t(E,w,z),d[m+1+64]=d[m+3+96]=_t(U,E,w),d[m+1+96]=_t(B,U,E)}function Yi(d,m){var w;for(w=0;8>w;++w)r(d,m+32*w,d,m-32,8)}function Uo(d,m){var w;for(w=0;8>w;++w)i(d,m,d[m-1],8),m+=32}function xs(d,m,w){var E;for(E=0;8>E;++E)i(m,w+32*E,d,8)}function Ul(d,m){var w,E=8;for(w=0;8>w;++w)E+=d[m+w-32]+d[m-1+32*w];xs(E>>4,d,m)}function Nn(d,m){var w,E=4;for(w=0;8>w;++w)E+=d[m+w-32];xs(E>>3,d,m)}function Vl(d,m){var w,E=4;for(w=0;8>w;++w)E+=d[m-1+32*w];xs(E>>3,d,m)}function qc(d,m){xs(128,d,m)}function bs(d,m,w){var E=d[m-w],U=d[m+0],B=3*(U-E)+jg[1020+d[m-2*w]-d[m+w]],z=bf[112+(B+4>>3)];d[m-w]=Zi[255+E+bf[112+(B+3>>3)]],d[m+0]=Zi[255+U-z]}function Ta(d,m,w,E){var U=d[m+0],B=d[m+w];return Ts[255+d[m-2*w]-d[m-w]]>E||Ts[255+B-U]>E}function Vo(d,m,w,E){return 4*Ts[255+d[m-w]-d[m+0]]+Ts[255+d[m-2*w]-d[m+w]]<=E}function uo(d,m,w,E,U){var B=d[m-3*w],z=d[m-2*w],H=d[m-w],G=d[m+0],Z=d[m+w],ce=d[m+2*w],_e=d[m+3*w];return 4*Ts[255+H-G]+Ts[255+z-Z]>E?0:Ts[255+d[m-4*w]-B]<=U&&Ts[255+B-z]<=U&&Ts[255+z-H]<=U&&Ts[255+_e-ce]<=U&&Ts[255+ce-Z]<=U&&Ts[255+Z-G]<=U}function ho(d,m,w,E){var U=2*E+1;for(E=0;16>E;++E)Vo(d,m+E,w,U)&&bs(d,m+E,w)}function _i(d,m,w,E){var U=2*E+1;for(E=0;16>E;++E)Vo(d,m+E*w,1,U)&&bs(d,m+E*w,1)}function Bl(d,m,w,E){var U;for(U=3;0<U;--U)ho(d,m+=4*w,w,E)}function Hc(d,m,w,E){var U;for(U=3;0<U;--U)_i(d,m+=4,w,E)}function Ni(d,m,w,E,U,B,z,H){for(B=2*B+1;0<U--;){if(uo(d,m,w,B,z))if(Ta(d,m,w,H))bs(d,m,w);else{var G=d,Z=m,ce=w,_e=G[Z-2*ce],ee=G[Z-ce],he=G[Z+0],ye=G[Z+ce],Ee=G[Z+2*ce],be=27*(Pe=jg[1020+3*(he-ee)+jg[1020+_e-ye]])+63>>7,Ie=18*Pe+63>>7,Pe=9*Pe+63>>7;G[Z-3*ce]=Zi[255+G[Z-3*ce]+Pe],G[Z-2*ce]=Zi[255+_e+Ie],G[Z-ce]=Zi[255+ee+be],G[Z+0]=Zi[255+he-be],G[Z+ce]=Zi[255+ye-Ie],G[Z+2*ce]=Zi[255+Ee-Pe]}m+=E}}function _s(d,m,w,E,U,B,z,H){for(B=2*B+1;0<U--;){if(uo(d,m,w,B,z))if(Ta(d,m,w,H))bs(d,m,w);else{var G=d,Z=m,ce=w,_e=G[Z-ce],ee=G[Z+0],he=G[Z+ce],ye=bf[112+(4+(Ee=3*(ee-_e))>>3)],Ee=bf[112+(Ee+3>>3)],be=ye+1>>1;G[Z-2*ce]=Zi[255+G[Z-2*ce]+be],G[Z-ce]=Zi[255+_e+Ee],G[Z+0]=Zi[255+ee-ye],G[Z+ce]=Zi[255+he-be]}m+=E}}function ka(d,m,w,E,U,B){Ni(d,m,w,1,16,E,U,B)}function Ns(d,m,w,E,U,B){Ni(d,m,1,w,16,E,U,B)}function zl(d,m,w,E,U,B){var z;for(z=3;0<z;--z)_s(d,m+=4*w,w,1,16,E,U,B)}function v(d,m,w,E,U,B){var z;for(z=3;0<z;--z)_s(d,m+=4,1,w,16,E,U,B)}function M(d,m,w,E,U,B,z,H){Ni(d,m,U,1,8,B,z,H),Ni(w,E,U,1,8,B,z,H)}function X(d,m,w,E,U,B,z,H){Ni(d,m,1,U,8,B,z,H),Ni(w,E,1,U,8,B,z,H)}function oe(d,m,w,E,U,B,z,H){_s(d,m+4*U,U,1,8,B,z,H),_s(w,E+4*U,U,1,8,B,z,H)}function pe(d,m,w,E,U,B,z,H){_s(d,m+4,1,U,8,B,z,H),_s(w,E+4,1,U,8,B,z,H)}function ke(){this.ba=new ze,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new ut,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Re(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function rt(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function ht(){this.ua=0,this.Wa=new Ze,this.vb=new Ze,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new ie,this.yc=new L}function St(){this.xb=this.a=0,this.l=new ao,this.ca=new ze,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new W,this.Pb=0,this.wd=new W,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new ht,this.ab=0,this.gc=o(4,rt),this.Oc=0}function Pt(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new ao,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Kt(d,m,w,E,U,B,z){for(d=d==null?0:d[m+0],m=0;m<z;++m)U[B+m]=d+w[E+m]&255,d=U[B+m]}function hn(d,m,w,E,U,B,z){var H;if(d==null)Kt(null,null,w,E,U,B,z);else for(H=0;H<z;++H)U[B+H]=d[m+H]+w[E+H]&255}function $n(d,m,w,E,U,B,z){if(d==null)Kt(null,null,w,E,U,B,z);else{var H,G=d[m+0],Z=G,ce=G;for(H=0;H<z;++H)Z=ce+(G=d[m+H])-Z,ce=w[E+H]+(-256&Z?0>Z?0:255:Z)&255,Z=G,U[B+H]=ce}}function pn(d,m,w,E){var U=m.width,B=m.o;if(e(d!=null&&m!=null),0>w||0>=E||w+E>B)return null;if(!d.Cc){if(d.ga==null){var z;if(d.ga=new Pt,(z=d.ga==null)||(z=m.width*m.o,e(d.Gb.length==0),d.Gb=s(z),d.Uc=0,d.Gb==null?z=0:(d.mb=d.Gb,d.nb=d.Uc,d.rc=null,z=1),z=!z),!z){z=d.ga;var H=d.Fa,G=d.P,Z=d.qc,ce=d.mb,_e=d.nb,ee=G+1,he=Z-1,ye=z.l;if(e(H!=null&&ce!=null&&m!=null),Ma[0]=null,Ma[1]=Kt,Ma[2]=hn,Ma[3]=$n,z.ca=ce,z.tb=_e,z.c=m.width,z.i=m.height,e(0<z.c&&0<z.i),1>=Z)m=0;else if(z.$a=3&H[G+0],z.Z=H[G+0]>>2&3,z.Lc=H[G+0]>>4&3,G=H[G+0]>>6&3,0>z.$a||1<z.$a||4<=z.Z||1<z.Lc||G)m=0;else if(ye.put=nt,ye.ac=qt,ye.bc=Ut,ye.ma=z,ye.width=m.width,ye.height=m.height,ye.Da=m.Da,ye.v=m.v,ye.va=m.va,ye.j=m.j,ye.o=m.o,z.$a)e:{e(z.$a==1),m=Tr();t:for(;;){if(m==null){m=0;break e}if(e(z!=null),z.mc=m,m.c=z.c,m.i=z.i,m.l=z.l,m.l.ma=z,m.l.width=z.c,m.l.height=z.i,m.a=0,le(m.m,H,ee,he),!Dr(z.c,z.i,1,m,null)||(m.ab==1&&m.gc[0].hc==3&&Un(m.s)?(z.ic=1,H=m.c*m.i,m.Ta=null,m.Ua=0,m.V=s(H),m.Ba=0,m.V==null?(m.a=1,m=0):m=1):(z.ic=0,m=zr(m,z.c)),!m))break t;m=1;break e}z.mc=null,m=0}else m=he>=z.c*z.i;z=!m}if(z)return null;d.ga.Lc!=1?d.Ga=0:E=B-w}e(d.ga!=null),e(w+E<=B);e:{if(m=(H=d.ga).c,B=H.l.o,H.$a==0){if(ee=d.rc,he=d.Vc,ye=d.Fa,G=d.P+1+w*m,Z=d.mb,ce=d.nb+w*m,e(G<=d.P+d.qc),H.Z!=0)for(e(Ma[H.Z]!=null),z=0;z<E;++z)Ma[H.Z](ee,he,ye,G,Z,ce,m),ee=Z,he=ce,ce+=m,G+=m;else for(z=0;z<E;++z)r(Z,ce,ye,G,m),ee=Z,he=ce,ce+=m,G+=m;d.rc=ee,d.Vc=he}else{if(e(H.mc!=null),m=w+E,e((z=H.mc)!=null),e(m<=z.i),z.C>=m)m=1;else if(H.ic||Mi(),H.ic){H=z.V,ee=z.Ba,he=z.c;var Ee=z.i,be=(ye=1,G=z.$/he,Z=z.$%he,ce=z.m,_e=z.s,z.$),Ie=he*Ee,Pe=he*m,Me=_e.wc,je=be<Pe?Wt(_e,Z,G):null;e(be<=Ie),e(m<=Ee),e(Un(_e));t:for(;;){for(;!ce.h&&be<Pe;){if(Z&Me||(je=Wt(_e,Z,G)),e(je!=null),ae(ce),256>(Ee=an(je.G[0],je.H[0],ce)))H[ee+be]=Ee,++be,++Z>=he&&(Z=0,++G<=m&&!(G%16)&&Ar(z,G));else{if(!(280>Ee)){ye=0;break t}Ee=Sn(Ee-256,ce);var yt,lt=an(je.G[4],je.H[4],ce);if(ae(ce),!(be>=(lt=_n(he,lt=Sn(lt,ce)))&&Ie-be>=Ee)){ye=0;break t}for(yt=0;yt<Ee;++yt)H[ee+be+yt]=H[ee+be+yt-lt];for(be+=Ee,Z+=Ee;Z>=he;)Z-=he,++G<=m&&!(G%16)&&Ar(z,G);be<Pe&&Z&Me&&(je=Wt(_e,Z,G))}e(ce.h==K(ce))}Ar(z,G>m?m:G);break t}!ye||ce.h&&be<Ie?(ye=0,z.a=ce.h?5:3):z.$=be,m=ye}else m=Er(z,z.V,z.Ba,z.c,z.i,m,bi);if(!m){E=0;break e}}w+E>=B&&(d.Cc=1),E=1}if(!E)return null;if(d.Cc&&((E=d.ga)!=null&&(E.mc=null),d.ga=null,0<d.Ga))return alert("todo:WebPDequantizeLevels"),null}return d.nb+w*U}function er(d,m,w,E,U,B){for(;0<U--;){var z,H=d,G=m+(w?1:0),Z=d,ce=m+(w?0:3);for(z=0;z<E;++z){var _e=Z[ce+4*z];_e!=255&&(_e*=32897,H[G+4*z+0]=H[G+4*z+0]*_e>>23,H[G+4*z+1]=H[G+4*z+1]*_e>>23,H[G+4*z+2]=H[G+4*z+2]*_e>>23)}m+=B}}function Wn(d,m,w,E,U){for(;0<E--;){var B;for(B=0;B<w;++B){var z=d[m+2*B+0],H=15&(Z=d[m+2*B+1]),G=4369*H,Z=(240&Z|Z>>4)*G>>16;d[m+2*B+0]=(240&z|z>>4)*G>>16&240|(15&z|z<<4)*G>>16>>4&15,d[m+2*B+1]=240&Z|H}m+=U}}function tr(d,m,w,E,U,B,z,H){var G,Z,ce=255;for(Z=0;Z<U;++Z){for(G=0;G<E;++G){var _e=d[m+G];B[z+4*G]=_e,ce&=_e}m+=w,z+=H}return ce!=255}function Gn(d,m,w,E,U){var B;for(B=0;B<U;++B)w[E+B]=d[m+B]>>8}function Mi(){bh=er,b5=Wn,_5=tr,N5=Gn}function Ss(d,m,w){T[d]=function(E,U,B,z,H,G,Z,ce,_e,ee,he,ye,Ee,be,Ie,Pe,Me){var je,yt=Me-1>>1,lt=H[G+0]|Z[ce+0]<<16,Vt=_e[ee+0]|he[ye+0]<<16;e(E!=null);var pt=3*lt+Vt+131074>>2;for(m(E[U+0],255&pt,pt>>16,Ee,be),B!=null&&(pt=3*Vt+lt+131074>>2,m(B[z+0],255&pt,pt>>16,Ie,Pe)),je=1;je<=yt;++je){var Xt=H[G+je]|Z[ce+je]<<16,Cr=_e[ee+je]|he[ye+je]<<16,Bt=lt+Xt+Vt+Cr+524296,mt=Bt+2*(Xt+Vt)>>3;pt=mt+lt>>1,lt=(Bt=Bt+2*(lt+Cr)>>3)+Xt>>1,m(E[U+2*je-1],255&pt,pt>>16,Ee,be+(2*je-1)*w),m(E[U+2*je-0],255&lt,lt>>16,Ee,be+(2*je-0)*w),B!=null&&(pt=Bt+Vt>>1,lt=mt+Cr>>1,m(B[z+2*je-1],255&pt,pt>>16,Ie,Pe+(2*je-1)*w),m(B[z+2*je+0],255&lt,lt>>16,Ie,Pe+(2*je+0)*w)),lt=Xt,Vt=Cr}1&Me||(pt=3*lt+Vt+131074>>2,m(E[U+Me-1],255&pt,pt>>16,Ee,be+(Me-1)*w),B!=null&&(pt=3*Vt+lt+131074>>2,m(B[z+Me-1],255&pt,pt>>16,Ie,Pe+(Me-1)*w)))}}function As(){ks[_f]=ST,ks[Nf]=j5,ks[I5]=AT,ks[Sf]=D5,ks[Af]=O5,ks[Dg]=M5,ks[C5]=ET,ks[Og]=j5,ks[Mg]=D5,ks[Ef]=O5,ks[Fg]=M5}function f(d){return d&-16384?0>d?0:255:d>>TT}function b(d,m){return f((19077*d>>8)+(26149*m>>8)-14234)}function P(d,m,w){return f((19077*d>>8)-(6419*m>>8)-(13320*w>>8)+8708)}function $(d,m){return f((19077*d>>8)+(33050*m>>8)-17685)}function me(d,m,w,E,U){E[U+0]=b(d,w),E[U+1]=P(d,m,w),E[U+2]=$(d,m)}function Ne(d,m,w,E,U){E[U+0]=$(d,m),E[U+1]=P(d,m,w),E[U+2]=b(d,w)}function Be(d,m,w,E,U){var B=P(d,m,w);m=B<<3&224|$(d,m)>>3,E[U+0]=248&b(d,w)|B>>5,E[U+1]=m}function Qt(d,m,w,E,U){var B=240&$(d,m)|15;E[U+0]=240&b(d,w)|P(d,m,w)>>4,E[U+1]=B}function Kn(d,m,w,E,U){E[U+0]=255,me(d,m,w,E,U+1)}function Ht(d,m,w,E,U){Ne(d,m,w,E,U),E[U+3]=255}function ln(d,m,w,E,U){me(d,m,w,E,U),E[U+3]=255}function Cn(d,m,w){T[d]=function(E,U,B,z,H,G,Z,ce,_e){for(var ee=ce+(-2&_e)*w;ce!=ee;)m(E[U+0],B[z+0],H[G+0],Z,ce),m(E[U+1],B[z+0],H[G+0],Z,ce+w),U+=2,++z,++G,ce+=2*w;1&_e&&m(E[U+0],B[z+0],H[G+0],Z,ce)}}function Qi(d,m,w){return w==0?d==0?m==0?6:5:m==0?4:0:w}function ri(d,m,w,E,U){switch(d>>>30){case 3:$l(m,w,E,U,0);break;case 2:Es(m,w,E,U);break;case 1:fn(m,w,E,U)}}function Hr(d,m){var w,E,U=m.M,B=m.Nb,z=d.oc,H=d.pc+40,G=d.oc,Z=d.pc+584,ce=d.oc,_e=d.pc+600;for(w=0;16>w;++w)z[H+32*w-1]=129;for(w=0;8>w;++w)G[Z+32*w-1]=129,ce[_e+32*w-1]=129;for(0<U?z[H-1-32]=G[Z-1-32]=ce[_e-1-32]=129:(i(z,H-32-1,127,21),i(G,Z-32-1,127,9),i(ce,_e-32-1,127,9)),E=0;E<d.za;++E){var ee=m.ya[m.aa+E];if(0<E){for(w=-1;16>w;++w)r(z,H+32*w-4,z,H+32*w+12,4);for(w=-1;8>w;++w)r(G,Z+32*w-4,G,Z+32*w+4,4),r(ce,_e+32*w-4,ce,_e+32*w+4,4)}var he=d.Gd,ye=d.Hd+E,Ee=ee.ad,be=ee.Hc;if(0<U&&(r(z,H-32,he[ye].y,0,16),r(G,Z-32,he[ye].f,0,8),r(ce,_e-32,he[ye].ea,0,8)),ee.Za){var Ie=z,Pe=H-32+16;for(0<U&&(E>=d.za-1?i(Ie,Pe,he[ye].y[15],4):r(Ie,Pe,he[ye+1].y,0,4)),w=0;4>w;w++)Ie[Pe+128+w]=Ie[Pe+256+w]=Ie[Pe+384+w]=Ie[Pe+0+w];for(w=0;16>w;++w,be<<=2)Ie=z,Pe=H+U5[w],Bs[ee.Ob[w]](Ie,Pe),ri(be,Ee,16*+w,Ie,Pe)}else if(Ie=Qi(E,U,ee.Ob[0]),Oa[Ie](z,H),be!=0)for(w=0;16>w;++w,be<<=2)ri(be,Ee,16*+w,z,H+U5[w]);for(w=ee.Gc,Ie=Qi(E,U,ee.Dd),qo[Ie](G,Z),qo[Ie](ce,_e),be=Ee,Ie=G,Pe=Z,255&(ee=0|w)&&(170&ee?mo(be,256,Ie,Pe):En(be,256,Ie,Pe)),ee=ce,be=_e,255&(w>>=8)&&(170&w?mo(Ee,320,ee,be):En(Ee,320,ee,be)),U<d.Ub-1&&(r(he[ye].y,0,z,H+480,16),r(he[ye].f,0,G,Z+224,8),r(he[ye].ea,0,ce,_e+224,8)),w=8*B*d.B,he=d.sa,ye=d.ta+16*E+16*B*d.R,Ee=d.qa,ee=d.ra+8*E+w,be=d.Ha,Ie=d.Ia+8*E+w,w=0;16>w;++w)r(he,ye+w*d.R,z,H+32*w,16);for(w=0;8>w;++w)r(Ee,ee+w*d.B,G,Z+32*w,8),r(be,Ie+w*d.B,ce,_e+32*w,8)}}function Vs(d,m,w,E,U,B,z,H,G){var Z=[0],ce=[0],_e=0,ee=G!=null?G.kd:0,he=G??new Re;if(d==null||12>w)return 7;he.data=d,he.w=m,he.ha=w,m=[m],w=[w],he.gb=[he.gb];e:{var ye=m,Ee=w,be=he.gb;if(e(d!=null),e(Ee!=null),e(be!=null),be[0]=0,12<=Ee[0]&&!n(d,ye[0],"RIFF")){if(n(d,ye[0]+8,"WEBP")){be=3;break e}var Ie=Ue(d,ye[0]+4);if(12>Ie||4294967286<Ie){be=3;break e}if(ee&&Ie>Ee[0]-8){be=7;break e}be[0]=Ie,ye[0]+=12,Ee[0]-=12}be=0}if(be!=0)return be;for(Ie=0<he.gb[0],w=w[0];;){e:{var Pe=d;Ee=m,be=w;var Me=Z,je=ce,yt=ye=[0];if((pt=_e=[_e])[0]=0,8>be[0])be=7;else{if(!n(Pe,Ee[0],"VP8X")){if(Ue(Pe,Ee[0]+4)!=10){be=3;break e}if(18>be[0]){be=7;break e}var lt=Ue(Pe,Ee[0]+8),Vt=1+Te(Pe,Ee[0]+12);if(2147483648<=Vt*(Pe=1+Te(Pe,Ee[0]+15))){be=3;break e}yt!=null&&(yt[0]=lt),Me!=null&&(Me[0]=Vt),je!=null&&(je[0]=Pe),Ee[0]+=18,be[0]-=18,pt[0]=1}be=0}}if(_e=_e[0],ye=ye[0],be!=0)return be;if(Ee=!!(2&ye),!Ie&&_e)return 3;if(B!=null&&(B[0]=!!(16&ye)),z!=null&&(z[0]=Ee),H!=null&&(H[0]=0),z=Z[0],ye=ce[0],_e&&Ee&&G==null){be=0;break}if(4>w){be=7;break}if(Ie&&_e||!Ie&&!_e&&!n(d,m[0],"ALPH")){w=[w],he.na=[he.na],he.P=[he.P],he.Sa=[he.Sa];e:{lt=d,be=m,Ie=w;var pt=he.gb;Me=he.na,je=he.P,yt=he.Sa,Vt=22,e(lt!=null),e(Ie!=null),Pe=be[0];var Xt=Ie[0];for(e(Me!=null),e(yt!=null),Me[0]=null,je[0]=null,yt[0]=0;;){if(be[0]=Pe,Ie[0]=Xt,8>Xt){be=7;break e}var Cr=Ue(lt,Pe+4);if(4294967286<Cr){be=3;break e}var Bt=8+Cr+1&-2;if(Vt+=Bt,0<pt&&Vt>pt){be=3;break e}if(!n(lt,Pe,"VP8 ")||!n(lt,Pe,"VP8L")){be=0;break e}if(Xt[0]<Bt){be=7;break e}n(lt,Pe,"ALPH")||(Me[0]=lt,je[0]=Pe+8,yt[0]=Cr),Pe+=Bt,Xt-=Bt}}if(w=w[0],he.na=he.na[0],he.P=he.P[0],he.Sa=he.Sa[0],be!=0)break}w=[w],he.Ja=[he.Ja],he.xa=[he.xa];e:if(pt=d,be=m,Ie=w,Me=he.gb[0],je=he.Ja,yt=he.xa,lt=be[0],Pe=!n(pt,lt,"VP8 "),Vt=!n(pt,lt,"VP8L"),e(pt!=null),e(Ie!=null),e(je!=null),e(yt!=null),8>Ie[0])be=7;else{if(Pe||Vt){if(pt=Ue(pt,lt+4),12<=Me&&pt>Me-12){be=3;break e}if(ee&&pt>Ie[0]-8){be=7;break e}je[0]=pt,be[0]+=8,Ie[0]-=8,yt[0]=Vt}else yt[0]=5<=Ie[0]&&pt[lt+0]==47&&!(pt[lt+4]>>5),je[0]=Ie[0];be=0}if(w=w[0],he.Ja=he.Ja[0],he.xa=he.xa[0],m=m[0],be!=0)break;if(4294967286<he.Ja)return 3;if(H==null||Ee||(H[0]=he.xa?2:1),z=[z],ye=[ye],he.xa){if(5>w){be=7;break}H=z,ee=ye,Ee=B,d==null||5>w?d=0:5<=w&&d[m+0]==47&&!(d[m+4]>>5)?(Ie=[0],pt=[0],Me=[0],le(je=new W,d,m,w),Fn(je,Ie,pt,Me)?(H!=null&&(H[0]=Ie[0]),ee!=null&&(ee[0]=pt[0]),Ee!=null&&(Ee[0]=Me[0]),d=1):d=0):d=0}else{if(10>w){be=7;break}H=ye,d==null||10>w||!Fc(d,m+3,w-3)?d=0:(ee=d[m+0]|d[m+1]<<8|d[m+2]<<16,Ee=16383&(d[m+7]<<8|d[m+6]),d=16383&(d[m+9]<<8|d[m+8]),1&ee||3<(ee>>1&7)||!(ee>>4&1)||ee>>5>=he.Ja||!Ee||!d?d=0:(z&&(z[0]=Ee),H&&(H[0]=d),d=1))}if(!d||(z=z[0],ye=ye[0],_e&&(Z[0]!=z||ce[0]!=ye)))return 3;G!=null&&(G[0]=he,G.offset=m-G.w,e(4294967286>m-G.w),e(G.offset==G.ha-w));break}return be==0||be==7&&_e&&G==null?(B!=null&&(B[0]|=he.na!=null&&0<he.na.length),E!=null&&(E[0]=z),U!=null&&(U[0]=ye),0):be}function fh(d,m,w){var E=m.width,U=m.height,B=0,z=0,H=E,G=U;if(m.Da=d!=null&&0<d.Da,m.Da&&(H=d.cd,G=d.bd,B=d.v,z=d.j,11>w||(B&=-2,z&=-2),0>B||0>z||0>=H||0>=G||B+H>E||z+G>U))return 0;if(m.v=B,m.j=z,m.va=B+H,m.o=z+G,m.U=H,m.T=G,m.da=d!=null&&0<d.da,m.da){if(!Ve(H,G,w=[d.ib],B=[d.hb]))return 0;m.ib=w[0],m.hb=B[0]}return m.ob=d!=null&&d.ob,m.Kb=d==null||!d.Sd,m.da&&(m.ob=m.ib<3*E/4&&m.hb<3*U/4,m.Kb=0),1}function ph(d){if(d==null)return 2;if(11>d.S){var m=d.f.RGBA;m.fb+=(d.height-1)*m.A,m.A=-m.A}else m=d.f.kb,d=d.height,m.O+=(d-1)*m.fa,m.fa=-m.fa,m.N+=(d-1>>1)*m.Ab,m.Ab=-m.Ab,m.W+=(d-1>>1)*m.Db,m.Db=-m.Db,m.F!=null&&(m.J+=(d-1)*m.lb,m.lb=-m.lb);return 0}function Ia(d,m,w,E){if(E==null||0>=d||0>=m)return 2;if(w!=null){if(w.Da){var U=w.cd,B=w.bd,z=-2&w.v,H=-2&w.j;if(0>z||0>H||0>=U||0>=B||z+U>d||H+B>m)return 2;d=U,m=B}if(w.da){if(!Ve(d,m,U=[w.ib],B=[w.hb]))return 2;d=U[0],m=B[0]}}E.width=d,E.height=m;e:{var G=E.width,Z=E.height;if(d=E.S,0>=G||0>=Z||!(d>=_f&&13>d))d=2;else{if(0>=E.Rd&&E.sd==null){z=B=U=m=0;var ce=(H=G*V5[d])*Z;if(11>d||(B=(Z+1)/2*(m=(G+1)/2),d==12&&(z=(U=G)*Z)),(Z=s(ce+2*B+z))==null){d=1;break e}E.sd=Z,11>d?((G=E.f.RGBA).eb=Z,G.fb=0,G.A=H,G.size=ce):((G=E.f.kb).y=Z,G.O=0,G.fa=H,G.Fd=ce,G.f=Z,G.N=0+ce,G.Ab=m,G.Cd=B,G.ea=Z,G.W=0+ce+B,G.Db=m,G.Ed=B,d==12&&(G.F=Z,G.J=0+ce+2*B),G.Tc=z,G.lb=U)}if(m=1,U=E.S,B=E.width,z=E.height,U>=_f&&13>U)if(11>U)d=E.f.RGBA,m&=(H=Math.abs(d.A))*(z-1)+B<=d.size,m&=H>=B*V5[U],m&=d.eb!=null;else{d=E.f.kb,H=(B+1)/2,ce=(z+1)/2,G=Math.abs(d.fa),Z=Math.abs(d.Ab);var _e=Math.abs(d.Db),ee=Math.abs(d.lb),he=ee*(z-1)+B;m&=G*(z-1)+B<=d.Fd,m&=Z*(ce-1)+H<=d.Cd,m=(m&=_e*(ce-1)+H<=d.Ed)&G>=B&Z>=H&_e>=H,m&=d.y!=null,m&=d.f!=null,m&=d.ea!=null,U==12&&(m&=ee>=B,m&=he<=d.Tc,m&=d.F!=null)}else m=0;d=m?0:2}}return d!=0||w!=null&&w.fd&&(d=ph(E)),d}var ql=64,Xi=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Ji=24,Ca=32,Bo=8,Pa=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];qe("Predictor0","PredictorAdd0"),T.Predictor0=function(){return 4278190080},T.Predictor1=function(d){return d},T.Predictor2=function(d,m,w){return m[w+0]},T.Predictor3=function(d,m,w){return m[w+1]},T.Predictor4=function(d,m,w){return m[w-1]},T.Predictor5=function(d,m,w){return Ae(Ae(d,m[w+1]),m[w+0])},T.Predictor6=function(d,m,w){return Ae(d,m[w-1])},T.Predictor7=function(d,m,w){return Ae(d,m[w+0])},T.Predictor8=function(d,m,w){return Ae(m[w-1],m[w+0])},T.Predictor9=function(d,m,w){return Ae(m[w+0],m[w+1])},T.Predictor10=function(d,m,w){return Ae(Ae(d,m[w-1]),Ae(m[w+0],m[w+1]))},T.Predictor11=function(d,m,w){var E=m[w+0];return 0>=$e(E>>24&255,d>>24&255,(m=m[w-1])>>24&255)+$e(E>>16&255,d>>16&255,m>>16&255)+$e(E>>8&255,d>>8&255,m>>8&255)+$e(255&E,255&d,255&m)?E:d},T.Predictor12=function(d,m,w){var E=m[w+0];return(bt((d>>24&255)+(E>>24&255)-((m=m[w-1])>>24&255))<<24|bt((d>>16&255)+(E>>16&255)-(m>>16&255))<<16|bt((d>>8&255)+(E>>8&255)-(m>>8&255))<<8|bt((255&d)+(255&E)-(255&m)))>>>0},T.Predictor13=function(d,m,w){var E=m[w-1];return(gt((d=Ae(d,m[w+0]))>>24&255,E>>24&255)<<24|gt(d>>16&255,E>>16&255)<<16|gt(d>>8&255,E>>8&255)<<8|gt(255&d,255&E))>>>0};var mh=T.PredictorAdd0;T.PredictorAdd1=ot,qe("Predictor2","PredictorAdd2"),qe("Predictor3","PredictorAdd3"),qe("Predictor4","PredictorAdd4"),qe("Predictor5","PredictorAdd5"),qe("Predictor6","PredictorAdd6"),qe("Predictor7","PredictorAdd7"),qe("Predictor8","PredictorAdd8"),qe("Predictor9","PredictorAdd9"),qe("Predictor10","PredictorAdd10"),qe("Predictor11","PredictorAdd11"),qe("Predictor12","PredictorAdd12"),qe("Predictor13","PredictorAdd13");var $c=T.PredictorAdd2;et("ColorIndexInverseTransform","MapARGB","32b",function(d){return d>>8&255},function(d){return d}),et("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(d){return d},function(d){return d>>8&255});var lr,wf=T.ColorIndexInverseTransform,fo=T.MapARGB,po=T.VP8LColorIndexInverseTransformAlpha,gh=T.MapAlpha,yh=T.VP8LPredictorsAdd=[];yh.length=16,(T.VP8LPredictors=[]).length=16,(T.VP8LPredictorsAdd_C=[]).length=16,(T.VP8LPredictors_C=[]).length=16;var vh,wh,La,Ra,ja,Hl,Da,$l,Es,mo,fn,En,cr,Ir,zo,xh,Wc,xf,m5,g5,y5,v5,w5,x5,bh,b5,_5,N5,S5=s(511),A5=s(2041),E5=s(225),T5=s(767),k5=0,jg=A5,bf=E5,Zi=T5,Ts=S5,_f=0,Nf=1,I5=2,Sf=3,Af=4,Dg=5,C5=6,Og=7,Mg=8,Ef=9,Fg=10,uT=[2,3,7],hT=[3,3,11],P5=[280,256,256,256,40],dT=[0,1,1,1,0],fT=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],pT=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],mT=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],gT=8,Ug=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Vg=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],_h=null,yT=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],vT=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],L5=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],wT=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],xT=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],bT=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],_T=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Oa=[],Bs=[],qo=[],NT=1,R5=2,Ma=[],ks=[];Ss("UpsampleRgbLinePair",me,3),Ss("UpsampleBgrLinePair",Ne,3),Ss("UpsampleRgbaLinePair",ln,4),Ss("UpsampleBgraLinePair",Ht,4),Ss("UpsampleArgbLinePair",Kn,4),Ss("UpsampleRgba4444LinePair",Qt,2),Ss("UpsampleRgb565LinePair",Be,2);var ST=T.UpsampleRgbLinePair,AT=T.UpsampleBgrLinePair,j5=T.UpsampleRgbaLinePair,D5=T.UpsampleBgraLinePair,O5=T.UpsampleArgbLinePair,M5=T.UpsampleRgba4444LinePair,ET=T.UpsampleRgb565LinePair,Tf=16,kf=1<<Tf-1,Nh=-227,Bg=482,TT=6,F5=0,kT=s(256),IT=s(256),CT=s(256),PT=s(256),LT=s(Bg-Nh),RT=s(Bg-Nh);Cn("YuvToRgbRow",me,3),Cn("YuvToBgrRow",Ne,3),Cn("YuvToRgbaRow",ln,4),Cn("YuvToBgraRow",Ht,4),Cn("YuvToArgbRow",Kn,4),Cn("YuvToRgba4444Row",Qt,2),Cn("YuvToRgb565Row",Be,2);var U5=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],If=[0,2,8],jT=[8,7,6,4,4,2,2,2,1,1,1,1],DT=1;this.WebPDecodeRGBA=function(d,m,w,E,U){var B=Nf,z=new ke,H=new ze;z.ba=H,H.S=B,H.width=[H.width],H.height=[H.height];var G=H.width,Z=H.height,ce=new Ke;if(ce==null||d==null)var _e=2;else e(ce!=null),_e=Vs(d,m,w,ce.width,ce.height,ce.Pd,ce.Qd,ce.format,null);if(_e!=0?G=0:(G!=null&&(G[0]=ce.width[0]),Z!=null&&(Z[0]=ce.height[0]),G=1),G){H.width=H.width[0],H.height=H.height[0],E!=null&&(E[0]=H.width),U!=null&&(U[0]=H.height);e:{if(E=new ao,(U=new Re).data=d,U.w=m,U.ha=w,U.kd=1,m=[0],e(U!=null),((d=Vs(U.data,U.w,U.ha,null,null,null,m,null,U))==0||d==7)&&m[0]&&(d=4),(m=d)==0){if(e(z!=null),E.data=U.data,E.w=U.w+U.offset,E.ha=U.ha-U.offset,E.put=nt,E.ac=qt,E.bc=Ut,E.ma=z,U.xa){if((d=Tr())==null){z=1;break e}if(function(ee,he){var ye=[0],Ee=[0],be=[0];t:for(;;){if(ee==null)return 0;if(he==null)return ee.a=2,0;if(ee.l=he,ee.a=0,le(ee.m,he.data,he.w,he.ha),!Fn(ee.m,ye,Ee,be)){ee.a=3;break t}if(ee.xb=R5,he.width=ye[0],he.height=Ee[0],!Dr(ye[0],Ee[0],1,ee,null))break t;return 1}return e(ee.a!=0),0}(d,E)){if(E=(m=Ia(E.width,E.height,z.Oa,z.ba))==0){t:{E=d;n:for(;;){if(E==null){E=0;break t}if(e(E.s.yc!=null),e(E.s.Ya!=null),e(0<E.s.Wb),e((w=E.l)!=null),e((U=w.ma)!=null),E.xb!=0){if(E.ca=U.ba,E.tb=U.tb,e(E.ca!=null),!fh(U.Oa,w,Sf)){E.a=2;break n}if(!zr(E,w.width)||w.da)break n;if((w.da||Qe(E.ca.S))&&Mi(),11>E.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),E.ca.f.kb.F!=null&&Mi()),E.Pb&&0<E.s.ua&&E.s.vb.X==null&&!V(E.s.vb,E.s.Wa.Xa)){E.a=1;break n}E.xb=0}if(!Er(E,E.V,E.Ba,E.c,E.i,w.o,Nr))break n;U.Dc=E.Ma,E=1;break t}e(E.a!=0),E=0}E=!E}E&&(m=d.a)}else m=d.a}else{if((d=new Mc)==null){z=1;break e}if(d.Fa=U.na,d.P=U.P,d.qc=U.Sa,ys(d,E)){if((m=Ia(E.width,E.height,z.Oa,z.ba))==0){if(d.Aa=0,w=z.Oa,e((U=d)!=null),w!=null){if(0<(G=0>(G=w.Md)?0:100<G?255:255*G/100)){for(Z=ce=0;4>Z;++Z)12>(_e=U.pb[Z]).lc&&(_e.ia=G*jT[0>_e.lc?0:_e.lc]>>3),ce|=_e.ia;ce&&(alert("todo:VP8InitRandom"),U.ia=1)}U.Ga=w.Id,100<U.Ga?U.Ga=100:0>U.Ga&&(U.Ga=0)}(function(ee,he){if(ee==null)return 0;if(he==null)return Hn(ee,2,"NULL VP8Io parameter in VP8Decode().");if(!ee.cb&&!ys(ee,he))return 0;if(e(ee.cb),he.ac==null||he.ac(he)){he.ob&&(ee.L=0);var ye=If[ee.L];if(ee.L==2?(ee.yb=0,ee.zb=0):(ee.yb=he.v-ye>>4,ee.zb=he.j-ye>>4,0>ee.yb&&(ee.yb=0),0>ee.zb&&(ee.zb=0)),ee.Va=he.o+15+ye>>4,ee.Hb=he.va+15+ye>>4,ee.Hb>ee.za&&(ee.Hb=ee.za),ee.Va>ee.Ub&&(ee.Va=ee.Ub),0<ee.L){var Ee=ee.ed;for(ye=0;4>ye;++ye){var be;if(ee.Qa.Cb){var Ie=ee.Qa.Lb[ye];ee.Qa.Fb||(Ie+=Ee.Tb)}else Ie=Ee.Tb;for(be=0;1>=be;++be){var Pe=ee.gd[ye][be],Me=Ie;if(Ee.Pc&&(Me+=Ee.vd[0],be&&(Me+=Ee.od[0])),0<(Me=0>Me?0:63<Me?63:Me)){var je=Me;0<Ee.wb&&(je=4<Ee.wb?je>>2:je>>1)>9-Ee.wb&&(je=9-Ee.wb),1>je&&(je=1),Pe.dd=je,Pe.tc=2*Me+je,Pe.ld=40<=Me?2:15<=Me?1:0}else Pe.tc=0;Pe.La=be}}}ye=0}else Hn(ee,6,"Frame setup failed"),ye=ee.a;if(ye=ye==0){if(ye){ee.$c=0,0<ee.Aa||(ee.Ic=DT);t:{ye=ee.Ic,Ee=4*(je=ee.za);var yt=32*je,lt=je+1,Vt=0<ee.L?je*(0<ee.Aa?2:1):0,pt=(ee.Aa==2?2:1)*je;if((Pe=Ee+832+(be=3*(16*ye+If[ee.L])/2*yt)+(Ie=ee.Fa!=null&&0<ee.Fa.length?ee.Kc.c*ee.Kc.i:0))!=Pe)ye=0;else{if(Pe>ee.Vb){if(ee.Vb=0,ee.Ec=s(Pe),ee.Fc=0,ee.Ec==null){ye=Hn(ee,1,"no memory during frame initialization.");break t}ee.Vb=Pe}Pe=ee.Ec,Me=ee.Fc,ee.Ac=Pe,ee.Bc=Me,Me+=Ee,ee.Gd=o(yt,Dl),ee.Hd=0,ee.rb=o(lt+1,Ki),ee.sb=1,ee.wa=Vt?o(Vt,Or):null,ee.Y=0,ee.D.Nb=0,ee.D.wa=ee.wa,ee.D.Y=ee.Y,0<ee.Aa&&(ee.D.Y+=je),e(!0),ee.oc=Pe,ee.pc=Me,Me+=832,ee.ya=o(pt,Rl),ee.aa=0,ee.D.ya=ee.ya,ee.D.aa=ee.aa,ee.Aa==2&&(ee.D.aa+=je),ee.R=16*je,ee.B=8*je,je=(yt=If[ee.L])*ee.R,yt=yt/2*ee.B,ee.sa=Pe,ee.ta=Me+je,ee.qa=ee.sa,ee.ra=ee.ta+16*ye*ee.R+yt,ee.Ha=ee.qa,ee.Ia=ee.ra+8*ye*ee.B+yt,ee.$c=0,Me+=be,ee.mb=Ie?Pe:null,ee.nb=Ie?Me:null,e(Me+Ie<=ee.Fc+ee.Vb),Ml(ee),i(ee.Ac,ee.Bc,0,Ee),ye=1}}if(ye){if(he.ka=0,he.y=ee.sa,he.O=ee.ta,he.f=ee.qa,he.N=ee.ra,he.ea=ee.Ha,he.Vd=ee.Ia,he.fa=ee.R,he.Rc=ee.B,he.F=null,he.J=0,!k5){for(ye=-255;255>=ye;++ye)S5[255+ye]=0>ye?-ye:ye;for(ye=-1020;1020>=ye;++ye)A5[1020+ye]=-128>ye?-128:127<ye?127:ye;for(ye=-112;112>=ye;++ye)E5[112+ye]=-16>ye?-16:15<ye?15:ye;for(ye=-255;510>=ye;++ye)T5[255+ye]=0>ye?0:255<ye?255:ye;k5=1}Da=vs,$l=Uc,mo=Gt,fn=Mo,En=lo,Es=Na,cr=ka,Ir=Ns,zo=M,xh=X,Wc=zl,xf=v,m5=oe,g5=pe,y5=ho,v5=_i,w5=Bl,x5=Hc,Bs[0]=hh,Bs[1]=Vc,Bs[2]=ch,Bs[3]=uh,Bs[4]=Mr,Bs[5]=dh,Bs[6]=Fs,Bs[7]=Aa,Bs[8]=Ea,Bs[9]=Us,Oa[0]=ws,Oa[1]=lh,Oa[2]=Fl,Oa[3]=Bc,Oa[4]=co,Oa[5]=Sa,Oa[6]=zc,qo[0]=Ul,qo[1]=ah,qo[2]=Yi,qo[3]=Uo,qo[4]=Vl,qo[5]=Nn,qo[6]=qc,ye=1}else ye=0}ye&&(ye=function(Xt,Cr){for(Xt.M=0;Xt.M<Xt.Va;++Xt.M){var Bt,mt=Xt.Jc[Xt.M&Xt.Xb],We=Xt.m,ur=Xt;for(Bt=0;Bt<ur.za;++Bt){var Mt=We,nn=ur,Rn=nn.Ac,$r=nn.Bc+4*Bt,Si=nn.zc,nr=nn.ya[nn.aa+Bt];if(nn.Qa.Bb?nr.$b=de(Mt,nn.Pa.jb[0])?2+de(Mt,nn.Pa.jb[2]):de(Mt,nn.Pa.jb[1]):nr.$b=0,nn.kc&&(nr.Ad=de(Mt,nn.Bd)),nr.Za=!de(Mt,145)+0,nr.Za){var ii=nr.Ob,Ai=0;for(nn=0;4>nn;++nn){var Pr,sn=Si[0+nn];for(Pr=0;4>Pr;++Pr){sn=xT[Rn[$r+Pr]][sn];for(var mn=L5[de(Mt,sn[0])];0<mn;)mn=L5[2*mn+de(Mt,sn[mn])];sn=-mn,Rn[$r+Pr]=sn}r(ii,Ai,Rn,$r,4),Ai+=4,Si[0+nn]=sn}}else sn=de(Mt,156)?de(Mt,128)?1:3:de(Mt,163)?2:0,nr.Ob[0]=sn,i(Rn,$r,sn,4),i(Si,0,sn,4);nr.Dd=de(Mt,142)?de(Mt,114)?de(Mt,183)?1:3:2:0}if(ur.m.Ka)return Hn(Xt,7,"Premature end-of-partition0 encountered.");for(;Xt.ja<Xt.za;++Xt.ja){if(ur=mt,Mt=(We=Xt).rb[We.sb-1],Rn=We.rb[We.sb+We.ja],Bt=We.ya[We.aa+We.ja],$r=We.kc?Bt.Ad:0)Mt.la=Rn.la=0,Bt.Za||(Mt.Na=Rn.Na=0),Bt.Hc=0,Bt.Gc=0,Bt.ia=0;else{var rr,gn;if(Mt=Rn,Rn=ur,$r=We.Pa.Xc,Si=We.ya[We.aa+We.ja],nr=We.pb[Si.$b],nn=Si.ad,ii=0,Ai=We.rb[We.sb-1],sn=Pr=0,i(nn,ii,0,384),Si.Za)var Wr=0,zs=$r[3];else{mn=s(16);var hr=Mt.Na+Ai.Na;if(hr=_h(Rn,$r[1],hr,nr.Eb,0,mn,0),Mt.Na=Ai.Na=(0<hr)+0,1<hr)Da(mn,0,nn,ii);else{var Fi=mn[0]+3>>3;for(mn=0;256>mn;mn+=16)nn[ii+mn]=Fi}Wr=1,zs=$r[0]}var Tn=15&Mt.la,Lr=15&Ai.la;for(mn=0;4>mn;++mn){var es=1&Lr;for(Fi=gn=0;4>Fi;++Fi)Tn=Tn>>1|(es=(hr=_h(Rn,zs,hr=es+(1&Tn),nr.Sc,Wr,nn,ii))>Wr)<<7,gn=gn<<2|(3<hr?3:1<hr?2:nn[ii+0]!=0),ii+=16;Tn>>=4,Lr=Lr>>1|es<<7,Pr=(Pr<<8|gn)>>>0}for(zs=Tn,Wr=Lr>>4,rr=0;4>rr;rr+=2){for(gn=0,Tn=Mt.la>>4+rr,Lr=Ai.la>>4+rr,mn=0;2>mn;++mn){for(es=1&Lr,Fi=0;2>Fi;++Fi)hr=es+(1&Tn),Tn=Tn>>1|(es=0<(hr=_h(Rn,$r[2],hr,nr.Qc,0,nn,ii)))<<3,gn=gn<<2|(3<hr?3:1<hr?2:nn[ii+0]!=0),ii+=16;Tn>>=2,Lr=Lr>>1|es<<5}sn|=gn<<4*rr,zs|=Tn<<4<<rr,Wr|=(240&Lr)<<rr}Mt.la=zs,Ai.la=Wr,Si.Hc=Pr,Si.Gc=sn,Si.ia=43690&sn?0:nr.ia,$r=!(Pr|sn)}if(0<We.L&&(We.wa[We.Y+We.ja]=We.gd[Bt.$b][Bt.Za],We.wa[We.Y+We.ja].La|=!$r),ur.Ka)return Hn(Xt,7,"Premature end-of-file encountered.")}if(Ml(Xt),We=Cr,ur=1,Bt=(mt=Xt).D,Mt=0<mt.L&&mt.M>=mt.zb&&mt.M<=mt.Va,mt.Aa==0)t:{if(Bt.M=mt.M,Bt.uc=Mt,Hr(mt,Bt),ur=1,Bt=(gn=mt.D).Nb,Mt=(sn=If[mt.L])*mt.R,Rn=sn/2*mt.B,mn=16*Bt*mt.R,Fi=8*Bt*mt.B,$r=mt.sa,Si=mt.ta-Mt+mn,nr=mt.qa,nn=mt.ra-Rn+Fi,ii=mt.Ha,Ai=mt.Ia-Rn+Fi,Lr=(Tn=gn.M)==0,Pr=Tn>=mt.Va-1,mt.Aa==2&&Hr(mt,gn),gn.uc)for(es=(hr=mt).D.M,e(hr.D.uc),gn=hr.yb;gn<hr.Hb;++gn){Wr=gn,zs=es;var Ei=(ts=(Gr=hr).D).Nb;rr=Gr.R;var ts=ts.wa[ts.Y+Wr],ns=Gr.sa,Ui=Gr.ta+16*Ei*rr+16*Wr,rs=ts.dd,Pn=ts.tc;if(Pn!=0)if(e(3<=Pn),Gr.L==1)0<Wr&&v5(ns,Ui,rr,Pn+4),ts.La&&x5(ns,Ui,rr,Pn),0<zs&&y5(ns,Ui,rr,Pn+4),ts.La&&w5(ns,Ui,rr,Pn);else{var is=Gr.B,qs=Gr.qa,Wl=Gr.ra+8*Ei*is+8*Wr,Ho=Gr.Ha,Gr=Gr.Ia+8*Ei*is+8*Wr;Ei=ts.ld,0<Wr&&(Ir(ns,Ui,rr,Pn+4,rs,Ei),xh(qs,Wl,Ho,Gr,is,Pn+4,rs,Ei)),ts.La&&(xf(ns,Ui,rr,Pn,rs,Ei),g5(qs,Wl,Ho,Gr,is,Pn,rs,Ei)),0<zs&&(cr(ns,Ui,rr,Pn+4,rs,Ei),zo(qs,Wl,Ho,Gr,is,Pn+4,rs,Ei)),ts.La&&(Wc(ns,Ui,rr,Pn,rs,Ei),m5(qs,Wl,Ho,Gr,is,Pn,rs,Ei))}}if(mt.ia&&alert("todo:DitherRow"),We.put!=null){if(gn=16*Tn,Tn=16*(Tn+1),Lr?(We.y=mt.sa,We.O=mt.ta+mn,We.f=mt.qa,We.N=mt.ra+Fi,We.ea=mt.Ha,We.W=mt.Ia+Fi):(gn-=sn,We.y=$r,We.O=Si,We.f=nr,We.N=nn,We.ea=ii,We.W=Ai),Pr||(Tn-=sn),Tn>We.o&&(Tn=We.o),We.F=null,We.J=null,mt.Fa!=null&&0<mt.Fa.length&&gn<Tn&&(We.J=pn(mt,We,gn,Tn-gn),We.F=mt.mb,We.F==null&&We.F.length==0)){ur=Hn(mt,3,"Could not decode alpha data.");break t}gn<We.j&&(sn=We.j-gn,gn=We.j,e(!(1&sn)),We.O+=mt.R*sn,We.N+=mt.B*(sn>>1),We.W+=mt.B*(sn>>1),We.F!=null&&(We.J+=We.width*sn)),gn<Tn&&(We.O+=We.v,We.N+=We.v>>1,We.W+=We.v>>1,We.F!=null&&(We.J+=We.v),We.ka=gn-We.j,We.U=We.va-We.v,We.T=Tn-gn,ur=We.put(We))}Bt+1!=mt.Ic||Pr||(r(mt.sa,mt.ta-Mt,$r,Si+16*mt.R,Mt),r(mt.qa,mt.ra-Rn,nr,nn+8*mt.B,Rn),r(mt.Ha,mt.Ia-Rn,ii,Ai+8*mt.B,Rn))}if(!ur)return Hn(Xt,6,"Output aborted.")}return 1}(ee,he)),he.bc!=null&&he.bc(he),ye&=1}return ye?(ee.cb=0,ye):0})(d,E)||(m=d.a)}}else m=d.a}m==0&&z.Oa!=null&&z.Oa.fd&&(m=ph(z.ba))}z=m}B=z!=0?null:11>B?H.f.RGBA.eb:H.f.kb.y}else B=null;return B};var V5=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function c(T,F){for(var A="",I=0;I<4;I++)A+=String.fromCharCode(T[F++]);return A}function h(T,F){return T[F+0]|T[F+1]<<8}function g(T,F){return(T[F+0]|T[F+1]<<8|T[F+2]<<16)>>>0}function y(T,F){return(T[F+0]|T[F+1]<<8|T[F+2]<<16|T[F+3]<<24)>>>0}new l;var p=[0],_=[0],N=[],C=new l,x=t,k=function(T,F){var A={},I=0,L=!1,ne=0,ie=0;if(A.frames=[],!function(O,W){for(var Y=0;Y<4;Y++)if(O[W+Y]!="RIFF".charCodeAt(Y))return!0;return!1}(T,F)){for(y(T,F+=4),F+=8;F<T.length;){var ue=c(T,F),fe=y(T,F+=4);F+=4;var J=fe+(1&fe);switch(ue){case"VP8 ":case"VP8L":A.frames[I]===void 0&&(A.frames[I]={}),(we=A.frames[I]).src_off=L?ie:F-8,we.src_size=ne+fe+8,I++,L&&(L=!1,ne=0,ie=0);break;case"VP8X":(we=A.header={}).feature_flags=T[F];var le=F+4;we.canvas_width=1+g(T,le),le+=3,we.canvas_height=1+g(T,le),le+=3;break;case"ALPH":L=!0,ne=J+8,ie=F-8;break;case"ANIM":(we=A.header).bgcolor=y(T,F),le=F+4,we.loop_count=h(T,le),le+=2;break;case"ANMF":var xe,we;(we=A.frames[I]={}).offset_x=2*g(T,F),F+=3,we.offset_y=2*g(T,F),F+=3,we.width=1+g(T,F),F+=3,we.height=1+g(T,F),F+=3,we.duration=g(T,F),F+=3,xe=T[F++],we.dispose=1&xe,we.blend=xe>>1&1}ue!="ANMF"&&(F+=J)}return A}}(x,0);k.response=x,k.rgbaoutput=!0,k.dataurl=!1;var R=k.header?k.header:null,j=k.frames?k.frames:null;if(R){R.loop_counter=R.loop_count,p=[R.canvas_height],_=[R.canvas_width];for(var q=0;q<j.length&&j[q].blend!=0;q++);}var Q=j[0],D=C.WebPDecodeRGBA(x,Q.src_off,Q.src_size,_,p);Q.rgba=D,Q.imgwidth=_[0],Q.imgheight=p[0];for(var S=0;S<_[0]*p[0]*4;S++)N[S]=D[S];return this.width=_,this.height=p,this.data=N,this}(function(t){var e,n,r,i,s,o,a,l,c,h=function(O){return O=O||{},this.isStrokeTransparent=O.isStrokeTransparent||!1,this.strokeOpacity=O.strokeOpacity||1,this.strokeStyle=O.strokeStyle||"#000000",this.fillStyle=O.fillStyle||"#000000",this.isFillTransparent=O.isFillTransparent||!1,this.fillOpacity=O.fillOpacity||1,this.font=O.font||"10px sans-serif",this.textBaseline=O.textBaseline||"alphabetic",this.textAlign=O.textAlign||"left",this.lineWidth=O.lineWidth||1,this.lineJoin=O.lineJoin||"miter",this.lineCap=O.lineCap||"butt",this.path=O.path||[],this.transform=O.transform!==void 0?O.transform.clone():new l,this.globalCompositeOperation=O.globalCompositeOperation||"normal",this.globalAlpha=O.globalAlpha||1,this.clip_path=O.clip_path||[],this.currentPoint=O.currentPoint||new o,this.miterLimit=O.miterLimit||10,this.lastPoint=O.lastPoint||new o,this.lineDashOffset=O.lineDashOffset||0,this.lineDash=O.lineDash||[],this.margin=O.margin||[0,0,0,0],this.prevPageLastElemOffset=O.prevPageLastElemOffset||0,this.ignoreClearRect=typeof O.ignoreClearRect!="boolean"||O.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new g(this),e=this.internal.f2,n=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,o=this.internal.Point,a=this.internal.Rectangle,l=this.internal.Matrix,c=new h}]);var g=function(O){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var W=O;Object.defineProperty(this,"pdf",{get:function(){return W}});var Y=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return Y},set:function(V){Y=!!V}});var K=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return K},set:function(V){K=!!V}});var re=0;Object.defineProperty(this,"posX",{get:function(){return re},set:function(V){isNaN(V)||(re=V)}});var ae=0;Object.defineProperty(this,"posY",{get:function(){return ae},set:function(V){isNaN(V)||(ae=V)}}),Object.defineProperty(this,"margin",{get:function(){return c.margin},set:function(V){var De;typeof V=="number"?De=[V,V,V,V]:((De=new Array(4))[0]=V[0],De[1]=V.length>=2?V[1]:De[0],De[2]=V.length>=3?V[2]:De[0],De[3]=V.length>=4?V[3]:De[1]),c.margin=De}});var ve=!1;Object.defineProperty(this,"autoPaging",{get:function(){return ve},set:function(V){ve=V}});var te=0;Object.defineProperty(this,"lastBreak",{get:function(){return te},set:function(V){te=V}});var de=[];Object.defineProperty(this,"pageBreaks",{get:function(){return de},set:function(V){de=V}}),Object.defineProperty(this,"ctx",{get:function(){return c},set:function(V){V instanceof h&&(c=V)}}),Object.defineProperty(this,"path",{get:function(){return c.path},set:function(V){c.path=V}});var ge=[];Object.defineProperty(this,"ctxStack",{get:function(){return ge},set:function(V){ge=V}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(V){var De;De=y(V),this.ctx.fillStyle=De.style,this.ctx.isFillTransparent=De.a===0,this.ctx.fillOpacity=De.a,this.pdf.setFillColor(De.r,De.g,De.b,{a:De.a}),this.pdf.setTextColor(De.r,De.g,De.b,{a:De.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(V){var De=y(V);this.ctx.strokeStyle=De.style,this.ctx.isStrokeTransparent=De.a===0,this.ctx.strokeOpacity=De.a,De.a===0?this.pdf.setDrawColor(255,255,255):(De.a,this.pdf.setDrawColor(De.r,De.g,De.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(V){["butt","round","square"].indexOf(V)!==-1&&(this.ctx.lineCap=V,this.pdf.setLineCap(V))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(V){isNaN(V)||(this.ctx.lineWidth=V,this.pdf.setLineWidth(V))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(V){["bevel","round","miter"].indexOf(V)!==-1&&(this.ctx.lineJoin=V,this.pdf.setLineJoin(V))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(V){isNaN(V)||(this.ctx.miterLimit=V,this.pdf.setMiterLimit(V))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(V){this.ctx.textBaseline=V}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(V){["right","end","center","left","start"].indexOf(V)!==-1&&(this.ctx.textAlign=V)}});var Se=null,Te=null,Ue=null;Object.defineProperty(this,"fontFaces",{get:function(){return Ue},set:function(V){Se=null,Te=null,Ue=V}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(V){var De;if(this.ctx.font=V,(De=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z0-9]+?)\s*$/i.exec(V))!==null){var Ze=De[1];De[2];var Ve=De[3],Ce=De[4];De[5];var Xe=De[6],qe=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Ce)[2];Ce=Math.floor(qe==="px"?parseFloat(Ce)*this.pdf.internal.scaleFactor:qe==="em"?parseFloat(Ce)*this.pdf.getFontSize():parseFloat(Ce)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Ce);var it=function(et){var Ot,Ft,Ge=[],ft=et.trim();if(ft==="")return l1;if(ft in Y_)return[Y_[ft]];for(;ft!=="";){switch(Ft=null,Ot=(ft=X_(ft)).charAt(0)){case'"':case"'":Ft=mB(ft.substring(1),Ot);break;default:Ft=gB(ft)}if(Ft===null||(Ge.push(Ft[0]),(ft=X_(Ft[1]))!==""&&ft.charAt(0)!==","))return l1;ft=ft.replace(/^,/,"")}return Ge}(Xe);if(this.fontFaces){var Ae=function(et,Ot){var Ft=et.getFontList(),Ge=JSON.stringify(Ft);if(Se===null||Te!==Ge){var ft=function(Et){var at=[];return Object.keys(Et).forEach(function(Ct){Et[Ct].forEach(function(Qe){var tt=null;switch(Qe){case"bold":tt={family:Ct,weight:"bold"};break;case"italic":tt={family:Ct,style:"italic"};break;case"bolditalic":tt={family:Ct,weight:"bold",style:"italic"};break;case"":case"normal":tt={family:Ct}}tt!==null&&(tt.ref={name:Ct,style:Qe},at.push(tt))})}),at}(Ft);Se=function(Et){for(var at={},Ct=0;Ct<Et.length;++Ct){var Qe=a1(Et[Ct]),tt=Qe.family,kt=Qe.stretch,ze=Qe.style,Ke=Qe.weight;at[tt]=at[tt]||{},at[tt][kt]=at[tt][kt]||{},at[tt][kt][ze]=at[tt][kt][ze]||{},at[tt][kt][ze][Ke]=Qe}return at}(ft.concat(Ot)),Te=Ge}return Se}(this.pdf,this.fontFaces),bt=it.map(function(et){return{family:et,stretch:"normal",weight:Ve,style:Ze}}),gt=function(et,Ot,Ft){for(var Ge=(Ft=Ft||{}).defaultFontFamily||"times",ft=Object.assign({},pB,Ft.genericFontFamilies||{}),Et=null,at=null,Ct=0;Ct<Ot.length;++Ct)if(ft[(Et=a1(Ot[Ct])).family]&&(Et.family=ft[Et.family]),et.hasOwnProperty(Et.family)){at=et[Et.family];break}if(!(at=at||et[Ge]))throw new Error("Could not find a font-family for the rule '"+Q_(Et)+"' and default family '"+Ge+"'.");if(at=function(Qe,tt){if(tt[Qe])return tt[Qe];var kt=X2[Qe],ze=kt<=X2.normal?-1:1,Ke=K_(tt,HE,kt,ze);if(!Ke)throw new Error("Could not find a matching font-stretch value for "+Qe);return Ke}(Et.stretch,at),at=function(Qe,tt){if(tt[Qe])return tt[Qe];for(var kt=qE[Qe],ze=0;ze<kt.length;++ze)if(tt[kt[ze]])return tt[kt[ze]];throw new Error("Could not find a matching font-style for "+Qe)}(Et.style,at),!(at=function(Qe,tt){if(tt[Qe])return tt[Qe];if(Qe===400&&tt[500])return tt[500];if(Qe===500&&tt[400])return tt[400];var kt=fB[Qe],ze=K_(tt,$E,kt,Qe<400?-1:1);if(!ze)throw new Error("Could not find a matching font-weight for value "+Qe);return ze}(Et.weight,at)))throw new Error("Failed to resolve a font for the rule '"+Q_(Et)+"'.");return at}(Ae,bt);this.pdf.setFont(gt.ref.name,gt.ref.style)}else{var $e="";(Ve==="bold"||parseInt(Ve,10)>=700||Ze==="bold")&&($e="bold"),Ze==="italic"&&($e+="italic"),$e.length===0&&($e="normal");for(var ot="",Nt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Ye=0;Ye<it.length;Ye++){if(this.pdf.internal.getFont(it[Ye],$e,{noFallback:!0,disableWarning:!0})!==void 0){ot=it[Ye];break}if($e==="bolditalic"&&this.pdf.internal.getFont(it[Ye],"bold",{noFallback:!0,disableWarning:!0})!==void 0)ot=it[Ye],$e="bold";else if(this.pdf.internal.getFont(it[Ye],"normal",{noFallback:!0,disableWarning:!0})!==void 0){ot=it[Ye],$e="normal";break}}if(ot===""){for(var wt=0;wt<it.length;wt++)if(Nt[it[wt]]){ot=Nt[it[wt]];break}}ot=ot===""?"Times":ot,this.pdf.setFont(ot,$e)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(V){this.ctx.globalCompositeOperation=V}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(V){this.ctx.globalAlpha=V}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(V){this.ctx.lineDashOffset=V,we.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(V){this.ctx.lineDash=V,we.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(V){this.ctx.ignoreClearRect=!!V}})};g.prototype.setLineDash=function(O){this.lineDash=O},g.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},g.prototype.fill=function(){j.call(this,"fill",!1)},g.prototype.stroke=function(){j.call(this,"stroke",!1)},g.prototype.beginPath=function(){this.path=[{type:"begin"}]},g.prototype.moveTo=function(O,W){if(isNaN(O)||isNaN(W))throw kn.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var Y=this.ctx.transform.applyToPoint(new o(O,W));this.path.push({type:"mt",x:Y.x,y:Y.y}),this.ctx.lastPoint=new o(O,W)},g.prototype.closePath=function(){var O=new o(0,0),W=0;for(W=this.path.length-1;W!==-1;W--)if(this.path[W].type==="begin"&&vn(this.path[W+1])==="object"&&typeof this.path[W+1].x=="number"){O=new o(this.path[W+1].x,this.path[W+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(O.x,O.y)},g.prototype.lineTo=function(O,W){if(isNaN(O)||isNaN(W))throw kn.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var Y=this.ctx.transform.applyToPoint(new o(O,W));this.path.push({type:"lt",x:Y.x,y:Y.y}),this.ctx.lastPoint=new o(Y.x,Y.y)},g.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),j.call(this,null,!0)},g.prototype.quadraticCurveTo=function(O,W,Y,K){if(isNaN(Y)||isNaN(K)||isNaN(O)||isNaN(W))throw kn.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var re=this.ctx.transform.applyToPoint(new o(Y,K)),ae=this.ctx.transform.applyToPoint(new o(O,W));this.path.push({type:"qct",x1:ae.x,y1:ae.y,x:re.x,y:re.y}),this.ctx.lastPoint=new o(re.x,re.y)},g.prototype.bezierCurveTo=function(O,W,Y,K,re,ae){if(isNaN(re)||isNaN(ae)||isNaN(O)||isNaN(W)||isNaN(Y)||isNaN(K))throw kn.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var ve=this.ctx.transform.applyToPoint(new o(re,ae)),te=this.ctx.transform.applyToPoint(new o(O,W)),de=this.ctx.transform.applyToPoint(new o(Y,K));this.path.push({type:"bct",x1:te.x,y1:te.y,x2:de.x,y2:de.y,x:ve.x,y:ve.y}),this.ctx.lastPoint=new o(ve.x,ve.y)},g.prototype.arc=function(O,W,Y,K,re,ae){if(isNaN(O)||isNaN(W)||isNaN(Y)||isNaN(K)||isNaN(re))throw kn.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(ae=!!ae,!this.ctx.transform.isIdentity){var ve=this.ctx.transform.applyToPoint(new o(O,W));O=ve.x,W=ve.y;var te=this.ctx.transform.applyToPoint(new o(0,Y)),de=this.ctx.transform.applyToPoint(new o(0,0));Y=Math.sqrt(Math.pow(te.x-de.x,2)+Math.pow(te.y-de.y,2))}Math.abs(re-K)>=2*Math.PI&&(K=0,re=2*Math.PI),this.path.push({type:"arc",x:O,y:W,radius:Y,startAngle:K,endAngle:re,counterclockwise:ae})},g.prototype.arcTo=function(O,W,Y,K,re){throw new Error("arcTo not implemented.")},g.prototype.rect=function(O,W,Y,K){if(isNaN(O)||isNaN(W)||isNaN(Y)||isNaN(K))throw kn.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(O,W),this.lineTo(O+Y,W),this.lineTo(O+Y,W+K),this.lineTo(O,W+K),this.lineTo(O,W),this.lineTo(O+Y,W),this.lineTo(O,W)},g.prototype.fillRect=function(O,W,Y,K){if(isNaN(O)||isNaN(W)||isNaN(Y)||isNaN(K))throw kn.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!p.call(this)){var re={};this.lineCap!=="butt"&&(re.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(re.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(O,W,Y,K),this.fill(),re.hasOwnProperty("lineCap")&&(this.lineCap=re.lineCap),re.hasOwnProperty("lineJoin")&&(this.lineJoin=re.lineJoin)}},g.prototype.strokeRect=function(O,W,Y,K){if(isNaN(O)||isNaN(W)||isNaN(Y)||isNaN(K))throw kn.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");_.call(this)||(this.beginPath(),this.rect(O,W,Y,K),this.stroke())},g.prototype.clearRect=function(O,W,Y,K){if(isNaN(O)||isNaN(W)||isNaN(Y)||isNaN(K))throw kn.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(O,W,Y,K))},g.prototype.save=function(O){O=typeof O!="boolean"||O;for(var W=this.pdf.internal.getCurrentPageInfo().pageNumber,Y=0;Y<this.pdf.internal.getNumberOfPages();Y++)this.pdf.setPage(Y+1),this.pdf.internal.out("q");if(this.pdf.setPage(W),O){this.ctx.fontSize=this.pdf.internal.getFontSize();var K=new h(this.ctx);this.ctxStack.push(this.ctx),this.ctx=K}},g.prototype.restore=function(O){O=typeof O!="boolean"||O;for(var W=this.pdf.internal.getCurrentPageInfo().pageNumber,Y=0;Y<this.pdf.internal.getNumberOfPages();Y++)this.pdf.setPage(Y+1),this.pdf.internal.out("Q");this.pdf.setPage(W),O&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},g.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var y=function(O){var W,Y,K,re;if(O.isCanvasGradient===!0&&(O=O.getColor()),!O)return{r:0,g:0,b:0,a:0,style:O};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(O))W=0,Y=0,K=0,re=0;else{var ae=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(O);if(ae!==null)W=parseInt(ae[1]),Y=parseInt(ae[2]),K=parseInt(ae[3]),re=1;else if((ae=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(O))!==null)W=parseInt(ae[1]),Y=parseInt(ae[2]),K=parseInt(ae[3]),re=parseFloat(ae[4]);else{if(re=1,typeof O=="string"&&O.charAt(0)!=="#"){var ve=new OE(O);O=ve.ok?ve.toHex():"#000000"}O.length===4?(W=O.substring(1,2),W+=W,Y=O.substring(2,3),Y+=Y,K=O.substring(3,4),K+=K):(W=O.substring(1,3),Y=O.substring(3,5),K=O.substring(5,7)),W=parseInt(W,16),Y=parseInt(Y,16),K=parseInt(K,16)}}return{r:W,g:Y,b:K,a:re,style:O}},p=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},_=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};g.prototype.fillText=function(O,W,Y,K){if(isNaN(W)||isNaN(Y)||typeof O!="string")throw kn.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(K=isNaN(K)?void 0:K,!p.call(this)){var re=J(this.ctx.transform.rotation),ae=this.ctx.transform.scaleX;I.call(this,{text:O,x:W,y:Y,scale:ae,angle:re,align:this.textAlign,maxWidth:K})}},g.prototype.strokeText=function(O,W,Y,K){if(isNaN(W)||isNaN(Y)||typeof O!="string")throw kn.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!_.call(this)){K=isNaN(K)?void 0:K;var re=J(this.ctx.transform.rotation),ae=this.ctx.transform.scaleX;I.call(this,{text:O,x:W,y:Y,scale:ae,renderingMode:"stroke",angle:re,align:this.textAlign,maxWidth:K})}},g.prototype.measureText=function(O){if(typeof O!="string")throw kn.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var W=this.pdf,Y=this.pdf.internal.scaleFactor,K=W.internal.getFontSize(),re=W.getStringUnitWidth(O)*K/W.internal.scaleFactor;return new function(ae){var ve=(ae=ae||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return ve}}),this}({width:re*=Math.round(96*Y/72*1e4)/1e4})},g.prototype.scale=function(O,W){if(isNaN(O)||isNaN(W))throw kn.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var Y=new l(O,0,0,W,0,0);this.ctx.transform=this.ctx.transform.multiply(Y)},g.prototype.rotate=function(O){if(isNaN(O))throw kn.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var W=new l(Math.cos(O),Math.sin(O),-Math.sin(O),Math.cos(O),0,0);this.ctx.transform=this.ctx.transform.multiply(W)},g.prototype.translate=function(O,W){if(isNaN(O)||isNaN(W))throw kn.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var Y=new l(1,0,0,1,O,W);this.ctx.transform=this.ctx.transform.multiply(Y)},g.prototype.transform=function(O,W,Y,K,re,ae){if(isNaN(O)||isNaN(W)||isNaN(Y)||isNaN(K)||isNaN(re)||isNaN(ae))throw kn.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var ve=new l(O,W,Y,K,re,ae);this.ctx.transform=this.ctx.transform.multiply(ve)},g.prototype.setTransform=function(O,W,Y,K,re,ae){O=isNaN(O)?1:O,W=isNaN(W)?0:W,Y=isNaN(Y)?0:Y,K=isNaN(K)?1:K,re=isNaN(re)?0:re,ae=isNaN(ae)?0:ae,this.ctx.transform=new l(O,W,Y,K,re,ae)};var N=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};g.prototype.drawImage=function(O,W,Y,K,re,ae,ve,te,de){var ge=this.pdf.getImageProperties(O),Se=1,Te=1,Ue=1,V=1;K!==void 0&&te!==void 0&&(Ue=te/K,V=de/re,Se=ge.width/K*te/K,Te=ge.height/re*de/re),ae===void 0&&(ae=W,ve=Y,W=0,Y=0),K!==void 0&&te===void 0&&(te=K,de=re),K===void 0&&te===void 0&&(te=ge.width,de=ge.height);var De=this.ctx.transform.decompose(),Ze=J(De.rotate.shx),Ve=new l,Ce=(Ve=(Ve=(Ve=Ve.multiply(De.translate)).multiply(De.skew)).multiply(De.scale)).applyToRectangle(new a(ae-W*Ue,ve-Y*V,K*Se,re*Te));if(this.autoPaging){for(var Xe,qe=C.call(this,Ce),it=[],Ae=0;Ae<qe.length;Ae+=1)it.indexOf(qe[Ae])===-1&&it.push(qe[Ae]);R(it);for(var bt=it[0],gt=it[it.length-1],$e=bt;$e<gt+1;$e++){this.pdf.setPage($e);var ot=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Nt=$e===1?this.posY+this.margin[0]:this.margin[0],Ye=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],wt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],et=$e===1?0:Ye+($e-2)*wt;if(this.ctx.clip_path.length!==0){var Ot=this.path;Xe=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=k(Xe,this.posX+this.margin[3],-et+Nt+this.ctx.prevPageLastElemOffset),q.call(this,"fill",!0),this.path=Ot}var Ft=JSON.parse(JSON.stringify(Ce));Ft=k([Ft],this.posX+this.margin[3],-et+Nt+this.ctx.prevPageLastElemOffset)[0];var Ge=($e>bt||$e<gt)&&N.call(this);Ge&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ot,wt,null).clip().discardPath()),this.pdf.addImage(O,"JPEG",Ft.x,Ft.y,Ft.w,Ft.h,null,null,Ze),Ge&&this.pdf.restoreGraphicsState()}}else this.pdf.addImage(O,"JPEG",Ce.x,Ce.y,Ce.w,Ce.h,null,null,Ze)};var C=function(O,W,Y){var K=[];W=W||this.pdf.internal.pageSize.width,Y=Y||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var re=this.posY+this.ctx.prevPageLastElemOffset;switch(O.type){default:case"mt":case"lt":K.push(Math.floor((O.y+re)/Y)+1);break;case"arc":K.push(Math.floor((O.y+re-O.radius)/Y)+1),K.push(Math.floor((O.y+re+O.radius)/Y)+1);break;case"qct":var ae=le(this.ctx.lastPoint.x,this.ctx.lastPoint.y,O.x1,O.y1,O.x,O.y);K.push(Math.floor((ae.y+re)/Y)+1),K.push(Math.floor((ae.y+ae.h+re)/Y)+1);break;case"bct":var ve=xe(this.ctx.lastPoint.x,this.ctx.lastPoint.y,O.x1,O.y1,O.x2,O.y2,O.x,O.y);K.push(Math.floor((ve.y+re)/Y)+1),K.push(Math.floor((ve.y+ve.h+re)/Y)+1);break;case"rect":K.push(Math.floor((O.y+re)/Y)+1),K.push(Math.floor((O.y+O.h+re)/Y)+1)}for(var te=0;te<K.length;te+=1)for(;this.pdf.internal.getNumberOfPages()<K[te];)x.call(this);return K},x=function(){var O=this.fillStyle,W=this.strokeStyle,Y=this.font,K=this.lineCap,re=this.lineWidth,ae=this.lineJoin;this.pdf.addPage(),this.fillStyle=O,this.strokeStyle=W,this.font=Y,this.lineCap=K,this.lineWidth=re,this.lineJoin=ae},k=function(O,W,Y){for(var K=0;K<O.length;K++)switch(O[K].type){case"bct":O[K].x2+=W,O[K].y2+=Y;case"qct":O[K].x1+=W,O[K].y1+=Y;default:O[K].x+=W,O[K].y+=Y}return O},R=function(O){return O.sort(function(W,Y){return W-Y})},j=function(O,W){var Y=this.fillStyle,K=this.strokeStyle,re=this.lineCap,ae=this.lineWidth,ve=Math.abs(ae*this.ctx.transform.scaleX),te=this.lineJoin;if(this.autoPaging){for(var de,ge,Se=JSON.parse(JSON.stringify(this.path)),Te=JSON.parse(JSON.stringify(this.path)),Ue=[],V=0;V<Te.length;V++)if(Te[V].x!==void 0)for(var De=C.call(this,Te[V]),Ze=0;Ze<De.length;Ze+=1)Ue.indexOf(De[Ze])===-1&&Ue.push(De[Ze]);for(var Ve=0;Ve<Ue.length;Ve++)for(;this.pdf.internal.getNumberOfPages()<Ue[Ve];)x.call(this);R(Ue);for(var Ce=Ue[0],Xe=Ue[Ue.length-1],qe=Ce;qe<Xe+1;qe++){this.pdf.setPage(qe),this.fillStyle=Y,this.strokeStyle=K,this.lineCap=re,this.lineWidth=ve,this.lineJoin=te;var it=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ae=qe===1?this.posY+this.margin[0]:this.margin[0],bt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],gt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],$e=qe===1?0:bt+(qe-2)*gt;if(this.ctx.clip_path.length!==0){var ot=this.path;de=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=k(de,this.posX+this.margin[3],-$e+Ae+this.ctx.prevPageLastElemOffset),q.call(this,O,!0),this.path=ot}if(ge=JSON.parse(JSON.stringify(Se)),this.path=k(ge,this.posX+this.margin[3],-$e+Ae+this.ctx.prevPageLastElemOffset),W===!1||qe===0){var Nt=(qe>Ce||qe<Xe)&&N.call(this);Nt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],it,gt,null).clip().discardPath()),q.call(this,O,W),Nt&&this.pdf.restoreGraphicsState()}this.lineWidth=ae}this.path=Se}else this.lineWidth=ve,q.call(this,O,W),this.lineWidth=ae},q=function(O,W){if((O!=="stroke"||W||!_.call(this))&&(O==="stroke"||W||!p.call(this))){for(var Y,K,re=[],ae=this.path,ve=0;ve<ae.length;ve++){var te=ae[ve];switch(te.type){case"begin":re.push({begin:!0});break;case"close":re.push({close:!0});break;case"mt":re.push({start:te,deltas:[],abs:[]});break;case"lt":var de=re.length;if(ae[ve-1]&&!isNaN(ae[ve-1].x)&&(Y=[te.x-ae[ve-1].x,te.y-ae[ve-1].y],de>0)){for(;de>=0;de--)if(re[de-1].close!==!0&&re[de-1].begin!==!0){re[de-1].deltas.push(Y),re[de-1].abs.push(te);break}}break;case"bct":Y=[te.x1-ae[ve-1].x,te.y1-ae[ve-1].y,te.x2-ae[ve-1].x,te.y2-ae[ve-1].y,te.x-ae[ve-1].x,te.y-ae[ve-1].y],re[re.length-1].deltas.push(Y);break;case"qct":var ge=ae[ve-1].x+2/3*(te.x1-ae[ve-1].x),Se=ae[ve-1].y+2/3*(te.y1-ae[ve-1].y),Te=te.x+2/3*(te.x1-te.x),Ue=te.y+2/3*(te.y1-te.y),V=te.x,De=te.y;Y=[ge-ae[ve-1].x,Se-ae[ve-1].y,Te-ae[ve-1].x,Ue-ae[ve-1].y,V-ae[ve-1].x,De-ae[ve-1].y],re[re.length-1].deltas.push(Y);break;case"arc":re.push({deltas:[],abs:[],arc:!0}),Array.isArray(re[re.length-1].abs)&&re[re.length-1].abs.push(te)}}K=W?null:O==="stroke"?"stroke":"fill";for(var Ze=!1,Ve=0;Ve<re.length;Ve++)if(re[Ve].arc)for(var Ce=re[Ve].abs,Xe=0;Xe<Ce.length;Xe++){var qe=Ce[Xe];qe.type==="arc"?S.call(this,qe.x,qe.y,qe.radius,qe.startAngle,qe.endAngle,qe.counterclockwise,void 0,W,!Ze):L.call(this,qe.x,qe.y),Ze=!0}else if(re[Ve].close===!0)this.pdf.internal.out("h"),Ze=!1;else if(re[Ve].begin!==!0){var it=re[Ve].start.x,Ae=re[Ve].start.y;ne.call(this,re[Ve].deltas,it,Ae),Ze=!0}K&&T.call(this,K),W&&F.call(this)}},Q=function(O){var W=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,Y=W*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return O-Y;case"top":return O+W-Y;case"hanging":return O+W-2*Y;case"middle":return O+W/2-Y;default:return O}},D=function(O){return O+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};g.prototype.createLinearGradient=function(){var O=function(){};return O.colorStops=[],O.addColorStop=function(W,Y){this.colorStops.push([W,Y])},O.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},O.isCanvasGradient=!0,O},g.prototype.createPattern=function(){return this.createLinearGradient()},g.prototype.createRadialGradient=function(){return this.createLinearGradient()};var S=function(O,W,Y,K,re,ae,ve,te,de){for(var ge=ue.call(this,Y,K,re,ae),Se=0;Se<ge.length;Se++){var Te=ge[Se];Se===0&&(de?A.call(this,Te.x1+O,Te.y1+W):L.call(this,Te.x1+O,Te.y1+W)),ie.call(this,O,W,Te.x2,Te.y2,Te.x3,Te.y3,Te.x4,Te.y4)}te?F.call(this):T.call(this,ve)},T=function(O){switch(O){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},F=function(){this.pdf.clip(),this.pdf.discardPath()},A=function(O,W){this.pdf.internal.out(n(O)+" "+r(W)+" m")},I=function(O){var W;switch(O.align){case"right":case"end":W="right";break;case"center":W="center";break;default:W="left"}var Y,K,re,ae=this.pdf.getTextDimensions(O.text),ve=Q.call(this,O.y),te=D.call(this,ve)-ae.h,de=this.ctx.transform.applyToPoint(new o(O.x,ve));if(this.autoPaging){var ge=this.ctx.transform.decompose(),Se=new l;Se=(Se=(Se=Se.multiply(ge.translate)).multiply(ge.skew)).multiply(ge.scale);for(var Te=this.ctx.transform.applyToRectangle(new a(O.x,ve,ae.w,ae.h)),Ue=Se.applyToRectangle(new a(O.x,te,ae.w,ae.h)),V=C.call(this,Ue),De=[],Ze=0;Ze<V.length;Ze+=1)De.indexOf(V[Ze])===-1&&De.push(V[Ze]);R(De);for(var Ve=De[0],Ce=De[De.length-1],Xe=Ve;Xe<Ce+1;Xe++){this.pdf.setPage(Xe);var qe=Xe===1?this.posY+this.margin[0]:this.margin[0],it=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ae=this.pdf.internal.pageSize.height-this.margin[2],bt=Ae-this.margin[0],gt=this.pdf.internal.pageSize.width-this.margin[1],$e=gt-this.margin[3],ot=Xe===1?0:it+(Xe-2)*bt;if(this.ctx.clip_path.length!==0){var Nt=this.path;Y=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=k(Y,this.posX+this.margin[3],-1*ot+qe),q.call(this,"fill",!0),this.path=Nt}var Ye=k([JSON.parse(JSON.stringify(Ue))],this.posX+this.margin[3],-ot+qe+this.ctx.prevPageLastElemOffset)[0];O.scale>=.01&&(K=this.pdf.internal.getFontSize(),this.pdf.setFontSize(K*O.scale),re=this.lineWidth,this.lineWidth=re*O.scale);var wt=this.autoPaging!=="text";if(wt||Ye.y+Ye.h<=Ae){if(wt||Ye.y>=qe&&Ye.x<=gt){var et=wt?O.text:this.pdf.splitTextToSize(O.text,O.maxWidth||gt-Ye.x)[0],Ot=k([JSON.parse(JSON.stringify(Te))],this.posX+this.margin[3],-ot+qe+this.ctx.prevPageLastElemOffset)[0],Ft=wt&&(Xe>Ve||Xe<Ce)&&N.call(this);Ft&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],$e,bt,null).clip().discardPath()),this.pdf.text(et,Ot.x,Ot.y,{angle:O.angle,align:W,renderingMode:O.renderingMode}),Ft&&this.pdf.restoreGraphicsState()}}else Ye.y<Ae&&(this.ctx.prevPageLastElemOffset+=Ae-Ye.y);O.scale>=.01&&(this.pdf.setFontSize(K),this.lineWidth=re)}}else O.scale>=.01&&(K=this.pdf.internal.getFontSize(),this.pdf.setFontSize(K*O.scale),re=this.lineWidth,this.lineWidth=re*O.scale),this.pdf.text(O.text,de.x+this.posX,de.y+this.posY,{angle:O.angle,align:W,renderingMode:O.renderingMode,maxWidth:O.maxWidth}),O.scale>=.01&&(this.pdf.setFontSize(K),this.lineWidth=re)},L=function(O,W,Y,K){Y=Y||0,K=K||0,this.pdf.internal.out(n(O+Y)+" "+r(W+K)+" l")},ne=function(O,W,Y){return this.pdf.lines(O,W,Y,null,null)},ie=function(O,W,Y,K,re,ae,ve,te){this.pdf.internal.out([e(i(Y+O)),e(s(K+W)),e(i(re+O)),e(s(ae+W)),e(i(ve+O)),e(s(te+W)),"c"].join(" "))},ue=function(O,W,Y,K){for(var re=2*Math.PI,ae=Math.PI/2;W>Y;)W-=re;var ve=Math.abs(Y-W);ve<re&&K&&(ve=re-ve);for(var te=[],de=K?-1:1,ge=W;ve>1e-5;){var Se=ge+de*Math.min(ve,ae);te.push(fe.call(this,O,ge,Se)),ve-=Math.abs(Se-ge),ge=Se}return te},fe=function(O,W,Y){var K=(Y-W)/2,re=O*Math.cos(K),ae=O*Math.sin(K),ve=re,te=-ae,de=ve*ve+te*te,ge=de+ve*re+te*ae,Se=4/3*(Math.sqrt(2*de*ge)-ge)/(ve*ae-te*re),Te=ve-Se*te,Ue=te+Se*ve,V=Te,De=-Ue,Ze=K+W,Ve=Math.cos(Ze),Ce=Math.sin(Ze);return{x1:O*Math.cos(W),y1:O*Math.sin(W),x2:Te*Ve-Ue*Ce,y2:Te*Ce+Ue*Ve,x3:V*Ve-De*Ce,y3:V*Ce+De*Ve,x4:O*Math.cos(Y),y4:O*Math.sin(Y)}},J=function(O){return 180*O/Math.PI},le=function(O,W,Y,K,re,ae){var ve=O+.5*(Y-O),te=W+.5*(K-W),de=re+.5*(Y-re),ge=ae+.5*(K-ae),Se=Math.min(O,re,ve,de),Te=Math.max(O,re,ve,de),Ue=Math.min(W,ae,te,ge),V=Math.max(W,ae,te,ge);return new a(Se,Ue,Te-Se,V-Ue)},xe=function(O,W,Y,K,re,ae,ve,te){var de,ge,Se,Te,Ue,V,De,Ze,Ve,Ce,Xe,qe,it,Ae,bt=Y-O,gt=K-W,$e=re-Y,ot=ae-K,Nt=ve-re,Ye=te-ae;for(ge=0;ge<41;ge++)Ve=(De=(Se=O+(de=ge/40)*bt)+de*((Ue=Y+de*$e)-Se))+de*(Ue+de*(re+de*Nt-Ue)-De),Ce=(Ze=(Te=W+de*gt)+de*((V=K+de*ot)-Te))+de*(V+de*(ae+de*Ye-V)-Ze),ge==0?(Xe=Ve,qe=Ce,it=Ve,Ae=Ce):(Xe=Math.min(Xe,Ve),qe=Math.min(qe,Ce),it=Math.max(it,Ve),Ae=Math.max(Ae,Ce));return new a(Math.round(Xe),Math.round(qe),Math.round(it-Xe),Math.round(Ae-qe))},we=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var O,W,Y=(O=this.ctx.lineDash,W=this.ctx.lineDashOffset,JSON.stringify({lineDash:O,lineDashOffset:W}));this.prevLineDash!==Y&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=Y)}}})(vt.API),function(t){var e=function(o){var a,l,c,h,g,y,p,_,N,C;for(l=[],c=0,h=(o+=a="\0\0\0\0".slice(o.length%4||4)).length;h>c;c+=4)(g=(o.charCodeAt(c)<<24)+(o.charCodeAt(c+1)<<16)+(o.charCodeAt(c+2)<<8)+o.charCodeAt(c+3))!==0?(y=(g=((g=((g=((g=(g-(C=g%85))/85)-(N=g%85))/85)-(_=g%85))/85)-(p=g%85))/85)%85,l.push(y+33,p+33,_+33,N+33,C+33)):l.push(122);return function(x,k){for(var R=k;R>0;R--)x.pop()}(l,a.length),String.fromCharCode.apply(String,l)+"~>"},n=function(o){var a,l,c,h,g,y=String,p="length",_=255,N="charCodeAt",C="slice",x="replace";for(o[C](-2),o=o[C](0,-2)[x](/\s/g,"")[x]("z","!!!!!"),c=[],h=0,g=(o+=a="uuuuu"[C](o[p]%5||5))[p];g>h;h+=5)l=52200625*(o[N](h)-33)+614125*(o[N](h+1)-33)+7225*(o[N](h+2)-33)+85*(o[N](h+3)-33)+(o[N](h+4)-33),c.push(_&l>>24,_&l>>16,_&l>>8,_&l);return function(k,R){for(var j=R;j>0;j--)k.pop()}(c,a[p]),y.fromCharCode.apply(y,c)},r=function(o){return o.split("").map(function(a){return("0"+a.charCodeAt().toString(16)).slice(-2)}).join("")+">"},i=function(o){var a=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((o=o.replace(/\s/g,"")).indexOf(">")!==-1&&(o=o.substr(0,o.indexOf(">"))),o.length%2&&(o+="0"),a.test(o)===!1)return"";for(var l="",c=0;c<o.length;c+=2)l+=String.fromCharCode("0x"+(o[c]+o[c+1]));return l},s=function(o){for(var a=new Uint8Array(o.length),l=o.length;l--;)a[l]=o.charCodeAt(l);return(a=H2(a)).reduce(function(c,h){return c+String.fromCharCode(h)},"")};t.processDataByFilters=function(o,a){var l=0,c=o||"",h=[];for(typeof(a=a||[])=="string"&&(a=[a]),l=0;l<a.length;l+=1)switch(a[l]){case"ASCII85Decode":case"/ASCII85Decode":c=n(c),h.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":c=e(c),h.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":c=i(c),h.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":c=r(c),h.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":c=s(c),h.push("/FlateDecode");break;default:throw new Error('The filter: "'+a[l]+'" is not implemented')}return{data:c,reverseChain:h.reverse().join(" ")}}}(vt.API),function(t){t.loadFile=function(e,n,r){return function(i,s,o){s=s!==!1,o=typeof o=="function"?o:function(){};var a=void 0;try{a=function(l,c,h){var g=new XMLHttpRequest,y=0,p=function(_){var N=_.length,C=[],x=String.fromCharCode;for(y=0;y<N;y+=1)C.push(x(255&_.charCodeAt(y)));return C.join("")};if(g.open("GET",l,!c),g.overrideMimeType("text/plain; charset=x-user-defined"),c===!1&&(g.onload=function(){g.status===200?h(p(this.responseText)):h(void 0)}),g.send(null),c&&g.status===200)return p(g.responseText)}(i,s,o)}catch{}return a}(e,n,r)},t.loadImageFile=t.loadFile}(vt.API),function(t){function e(){return(Tt.html2canvas?Promise.resolve(Tt.html2canvas):q0(()=>import("./html2canvas.esm-CBrSDip1.js"),[])).catch(function(a){return Promise.reject(new Error("Could not load html2canvas: "+a))}).then(function(a){return a.default?a.default:a})}function n(){return(Tt.DOMPurify?Promise.resolve(Tt.DOMPurify):q0(()=>import("./purify.es-B9ZVCkUG.js"),[])).catch(function(a){return Promise.reject(new Error("Could not load dompurify: "+a))}).then(function(a){return a.default?a.default:a})}var r=function(a){var l=vn(a);return l==="undefined"?"undefined":l==="string"||a instanceof String?"string":l==="number"||a instanceof Number?"number":l==="function"||a instanceof Function?"function":a&&a.constructor===Array?"array":a&&a.nodeType===1?"element":l==="object"?"object":"unknown"},i=function(a,l){var c=document.createElement(a);for(var h in l.className&&(c.className=l.className),l.innerHTML&&l.dompurify&&(c.innerHTML=l.dompurify.sanitize(l.innerHTML)),l.style)c.style[h]=l.style[h];return c},s=function a(l,c){for(var h=l.nodeType===3?document.createTextNode(l.nodeValue):l.cloneNode(!1),g=l.firstChild;g;g=g.nextSibling)c!==!0&&g.nodeType===1&&g.nodeName==="SCRIPT"||h.appendChild(a(g,c));return l.nodeType===1&&(l.nodeName==="CANVAS"?(h.width=l.width,h.height=l.height,h.getContext("2d").drawImage(l,0,0)):l.nodeName!=="TEXTAREA"&&l.nodeName!=="SELECT"||(h.value=l.value),h.addEventListener("load",function(){h.scrollTop=l.scrollTop,h.scrollLeft=l.scrollLeft},!0)),h},o=function a(l){var c=Object.assign(a.convert(Promise.resolve()),JSON.parse(JSON.stringify(a.template))),h=a.convert(Promise.resolve(),c);return(h=h.setProgress(1,a,1,[a])).set(l)};(o.prototype=Object.create(Promise.prototype)).constructor=o,o.convert=function(a,l){return a.__proto__=l||o.prototype,a},o.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},o.prototype.from=function(a,l){return this.then(function(){switch(l=l||function(c){switch(r(c)){case"string":return"string";case"element":return c.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(a),l){case"string":return this.then(n).then(function(c){return this.set({src:i("div",{innerHTML:a,dompurify:c})})});case"element":return this.set({src:a});case"canvas":return this.set({canvas:a});case"img":return this.set({img:a});default:return this.error("Unknown source type.")}})},o.prototype.to=function(a){switch(a){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},o.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var a={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},l=s(this.prop.src,this.opt.html2canvas.javascriptEnabled);l.tagName==="BODY"&&(a.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:a}),this.prop.container.appendChild(l),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},o.prototype.toCanvas=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(e).then(function(l){var c=Object.assign({},this.opt.html2canvas);return delete c.onrendered,l(this.prop.container,c)}).then(function(l){(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},o.prototype.toContext2d=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(e).then(function(l){var c=this.opt.jsPDF,h=this.opt.fontFaces,g=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,y=Object.assign({async:!0,allowTaint:!0,scale:g,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete y.onrendered,c.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,c.context2d.posX=this.opt.x,c.context2d.posY=this.opt.y,c.context2d.margin=this.opt.margin,c.context2d.fontFaces=h,h)for(var p=0;p<h.length;++p){var _=h[p],N=_.src.find(function(C){return C.format==="truetype"});N&&c.addFont(N.url,_.ref.name,_.ref.style)}return y.windowHeight=y.windowHeight||0,y.windowHeight=y.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):y.windowHeight,c.context2d.save(!0),l(this.prop.container,y)}).then(function(l){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},o.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var a=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=a})},o.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},o.prototype.output=function(a,l,c){return(c=c||"pdf").toLowerCase()==="img"||c.toLowerCase()==="image"?this.outputImg(a,l):this.outputPdf(a,l)},o.prototype.outputPdf=function(a,l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(a,l)})},o.prototype.outputImg=function(a){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(a){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+a+'" is not supported.'}})},o.prototype.save=function(a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(a?{filename:a}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},o.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},o.prototype.set=function(a){if(r(a)!=="object")return this;var l=Object.keys(a||{}).map(function(c){if(c in o.template.prop)return function(){this.prop[c]=a[c]};switch(c){case"margin":return this.setMargin.bind(this,a.margin);case"jsPDF":return function(){return this.opt.jsPDF=a.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,a.pageSize);default:return function(){this.opt[c]=a[c]}}},this);return this.then(function(){return this.thenList(l)})},o.prototype.get=function(a,l){return this.then(function(){var c=a in o.template.prop?this.prop[a]:this.opt[a];return l?l(c):c})},o.prototype.setMargin=function(a){return this.then(function(){switch(r(a)){case"number":a=[a,a,a,a];case"array":if(a.length===2&&(a=[a[0],a[1],a[0],a[1]]),a.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=a}).then(this.setPageSize)},o.prototype.setPageSize=function(a){function l(c,h){return Math.floor(c*h/72*96)}return this.then(function(){(a=a||vt.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(a.inner={width:a.width-this.opt.margin[1]-this.opt.margin[3],height:a.height-this.opt.margin[0]-this.opt.margin[2]},a.inner.px={width:l(a.inner.width,a.k),height:l(a.inner.height,a.k)},a.inner.ratio=a.inner.height/a.inner.width),this.prop.pageSize=a})},o.prototype.setProgress=function(a,l,c,h){return a!=null&&(this.progress.val=a),l!=null&&(this.progress.state=l),c!=null&&(this.progress.n=c),h!=null&&(this.progress.stack=h),this.progress.ratio=this.progress.val/this.progress.state,this},o.prototype.updateProgress=function(a,l,c,h){return this.setProgress(a?this.progress.val+a:null,l||null,c?this.progress.n+c:null,h?this.progress.stack.concat(h):null)},o.prototype.then=function(a,l){var c=this;return this.thenCore(a,l,function(h,g){return c.updateProgress(null,null,1,[h]),Promise.prototype.then.call(this,function(y){return c.updateProgress(null,h),y}).then(h,g).then(function(y){return c.updateProgress(1),y})})},o.prototype.thenCore=function(a,l,c){c=c||Promise.prototype.then;var h=this;a&&(a=a.bind(h)),l&&(l=l.bind(h));var g=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?h:o.convert(Object.assign({},h),Promise.prototype),y=c.call(g,a,l);return o.convert(y,h.__proto__)},o.prototype.thenExternal=function(a,l){return Promise.prototype.then.call(this,a,l)},o.prototype.thenList=function(a){var l=this;return a.forEach(function(c){l=l.thenCore(c)}),l},o.prototype.catch=function(a){a&&(a=a.bind(this));var l=Promise.prototype.catch.call(this,a);return o.convert(l,this)},o.prototype.catchExternal=function(a){return Promise.prototype.catch.call(this,a)},o.prototype.error=function(a){return this.then(function(){throw new Error(a)})},o.prototype.using=o.prototype.set,o.prototype.saveAs=o.prototype.save,o.prototype.export=o.prototype.output,o.prototype.run=o.prototype.then,vt.getPageSize=function(a,l,c){if(vn(a)==="object"){var h=a;a=h.orientation,l=h.unit||l,c=h.format||c}l=l||"mm",c=c||"a4",a=(""+(a||"P")).toLowerCase();var g,y=(""+c).toLowerCase(),p={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(l){case"pt":g=1;break;case"mm":g=72/25.4;break;case"cm":g=72/2.54;break;case"in":g=72;break;case"px":g=.75;break;case"pc":case"em":g=12;break;case"ex":g=6;break;default:throw"Invalid unit: "+l}var _,N=0,C=0;if(p.hasOwnProperty(y))N=p[y][1]/g,C=p[y][0]/g;else try{N=c[1],C=c[0]}catch{throw new Error("Invalid format: "+c)}if(a==="p"||a==="portrait")a="p",C>N&&(_=C,C=N,N=_);else{if(a!=="l"&&a!=="landscape")throw"Invalid orientation: "+a;a="l",N>C&&(_=C,C=N,N=_)}return{width:C,height:N,unit:l,k:g,orientation:a}},t.html=function(a,l){(l=l||{}).callback=l.callback||function(){},l.html2canvas=l.html2canvas||{},l.html2canvas.canvas=l.html2canvas.canvas||this.canvas,l.jsPDF=l.jsPDF||this,l.fontFaces=l.fontFaces?l.fontFaces.map(a1):null;var c=new o(l);return l.worker?c:c.from(a).doCallback()}}(vt.API),vt.API.addJS=function(t){return Z_=t,this.internal.events.subscribe("postPutResources",function(){pp=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(pp+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),J_=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+Z_+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){pp!==void 0&&J_!==void 0&&this.internal.out("/Names <</JavaScript "+pp+" 0 R>>")}),this},function(t){var e;t.events.push(["postPutResources",function(){var n=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=n.outline.render().split(/\r\n/),s=0;s<i.length;s++){var o=i[s],a=r.exec(o);if(a!=null){var l=a[1];n.internal.newObjectDeferredBegin(l,!1)}n.internal.write(o)}if(this.outline.createNamedDestinations){var c=this.internal.pages.length,h=[];for(s=0;s<c;s++){var g=n.internal.newObject();h.push(g);var y=n.internal.getPageInfo(s+1);n.internal.write("<< /D["+y.objId+" 0 R /XYZ null null null]>> endobj")}var p=n.internal.newObject();for(n.internal.write("<< /Names [ "),s=0;s<h.length;s++)n.internal.write("(page_"+(s+1)+")"+h[s]+" 0 R");n.internal.write(" ] >>","endobj"),e=n.internal.newObject(),n.internal.write("<< /Dests "+p+" 0 R"),n.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){var n=this;n.outline.root.children.length>0&&(n.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&n.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var n=this;n.outline={createNamedDestinations:!1,root:{children:[]}},n.outline.add=function(r,i,s){var o={title:i,options:s,children:[]};return r==null&&(r=this.root),r.children.push(o),o},n.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=n,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},n.outline.genIds_r=function(r){r.id=n.internal.newObjectDeferred();for(var i=0;i<r.children.length;i++)this.genIds_r(r.children[i])},n.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},n.outline.renderItems=function(r){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<r.children.length;s++){var o=r.children[s];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(r)),s>0&&this.line("/Prev "+this.makeRef(r.children[s-1])),s<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[s+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var a=this.count=this.count_r({count:0},o);if(a>0&&this.line("/Count "+a),o.options&&o.options.pageNumber){var l=n.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+l.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var c=0;c<r.children.length;c++)this.renderItems(r.children[c])},n.outline.line=function(r){this.ctx.val+=r+`\r
`},n.outline.makeRef=function(r){return r.id+" 0 R"},n.outline.makeString=function(r){return"("+n.internal.pdfEscape(r)+")"},n.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},n.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},n.outline.count_r=function(r,i){for(var s=0;s<i.children.length;s++)r.count++,this.count_r(r,i.children[s]);return r.count}}])}(vt.API),function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(n,r,i,s,o,a){var l,c=this.decode.DCT_DECODE,h=null;if(typeof n=="string"||this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n)){switch(n=o||n,n=this.__addimage__.isArrayBuffer(n)?new Uint8Array(n):n,l=function(g){for(var y,p=256*g.charCodeAt(4)+g.charCodeAt(5),_=g.length,N={width:0,height:0,numcomponents:1},C=4;C<_;C+=2){if(C+=p,e.indexOf(g.charCodeAt(C+1))!==-1){y=256*g.charCodeAt(C+5)+g.charCodeAt(C+6),N={width:256*g.charCodeAt(C+7)+g.charCodeAt(C+8),height:y,numcomponents:g.charCodeAt(C+9)};break}p=256*g.charCodeAt(C+2)+g.charCodeAt(C+3)}return N}(n=this.__addimage__.isArrayBufferView(n)?this.__addimage__.arrayBufferToBinaryString(n):n),l.numcomponents){case 1:a=this.color_spaces.DEVICE_GRAY;break;case 4:a=this.color_spaces.DEVICE_CMYK;break;case 3:a=this.color_spaces.DEVICE_RGB}h={data:n,width:l.width,height:l.height,colorSpace:a,bitsPerComponent:8,filter:c,index:r,alias:i}}return h}}(vt.API),vt.API.processPNG=function(t,e,n,r){if(this.__addimage__.isArrayBuffer(t)&&(t=new Uint8Array(t)),this.__addimage__.isArrayBufferView(t)){var i,s=ZV(t,{checkCrc:!0}),o=s.width,a=s.height,l=s.channels,c=s.palette,h=s.depth;i=c&&l===1?function(S){for(var T=S.width,F=S.height,A=S.data,I=S.palette,L=S.depth,ne=!1,ie=[],ue=[],fe=void 0,J=!1,le=0,xe=0;xe<I.length;xe++){var we=r_(I[xe],4),O=we[0],W=we[1],Y=we[2],K=we[3];ie.push(O,W,Y),K!=null&&(K===0?(le++,ue.length<1&&ue.push(xe)):K<255&&(J=!0))}if(J||le>1){ne=!0,ue=void 0;var re=T*F;fe=new Uint8Array(re);for(var ae=new DataView(A.buffer),ve=0;ve<re;ve++){var te=c1(ae,ve,L),de=r_(I[te],4)[3];fe[ve]=de}}else le===0&&(ue=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:ne?8:void 0,colorBytes:A,alphaBytes:fe,needSMask:ne,palette:ie,mask:ue}}(s):l===2||l===4?function(S){for(var T=S.data,F=S.width,A=S.height,I=S.channels,L=S.depth,ne=I===2?"DeviceGray":"DeviceRGB",ie=I-1,ue=F*A,fe=ie,J=ue*fe,le=1*ue,xe=Math.ceil(J*L/8),we=Math.ceil(le*L/8),O=new Uint8Array(xe),W=new Uint8Array(we),Y=new DataView(T.buffer),K=new DataView(O.buffer),re=new DataView(W.buffer),ae=!1,ve=0;ve<ue;ve++){for(var te=ve*I,de=0;de<fe;de++)l4(K,c1(Y,te+de,L),ve*fe+de,L);var ge=c1(Y,te+fe,L);ge<(1<<L)-1&&(ae=!0),l4(re,ge,1*ve,L)}return{colorSpace:ne,colorsPerPixel:ie,sMaskBitsPerComponent:ae?L:void 0,colorBytes:O,alphaBytes:W,needSMask:ae}}(s):function(S){var T=S.data,F=S.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:F,colorsPerPixel:F==="DeviceGray"?1:3,colorBytes:T instanceof Uint16Array?function(A){for(var I=A.length,L=new Uint8Array(2*I),ne=new DataView(L.buffer,L.byteOffset,L.byteLength),ie=0;ie<I;ie++)ne.setUint16(2*ie,A[ie],!1);return L}(T):T,needSMask:!1}}(s);var g,y,p,_=i,N=_.colorSpace,C=_.colorsPerPixel,x=_.sMaskBitsPerComponent,k=_.colorBytes,R=_.alphaBytes,j=_.needSMask,q=_.palette,Q=_.mask,D=null;return r!==vt.API.image_compression.NONE&&typeof H2=="function"?(D=function(S){var T;switch(S){case vt.API.image_compression.FAST:T=11;break;case vt.API.image_compression.MEDIUM:T=13;break;case vt.API.image_compression.SLOW:T=14;break;default:T=12}return T}(r),g=this.decode.FLATE_DECODE,y="/Predictor ".concat(D," /Colors ").concat(C," /BitsPerComponent ").concat(h," /Columns ").concat(o),t=r4(k,Math.ceil(o*C*h/8),C,h,r),j&&(p=r4(R,Math.ceil(o*x/8),1,x,r))):(g=void 0,y=void 0,t=k,j&&(p=R)),(this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t))&&(t=this.__addimage__.arrayBufferToBinaryString(t)),(p&&this.__addimage__.isArrayBuffer(p)||this.__addimage__.isArrayBufferView(p))&&(p=this.__addimage__.arrayBufferToBinaryString(p)),{alias:n,data:t,index:e,filter:g,decodeParameters:y,transparency:Q,palette:q,sMask:p,predictor:D,width:o,height:a,bitsPerComponent:h,sMaskBitsPerComponent:x,colorSpace:N}}},function(t){t.processGIF89A=function(e,n,r,i){var s=new xB(e),o=s.width,a=s.height,l=[];s.decodeAndBlitFrameRGBA(0,l);var c={data:l,width:o,height:a},h=new u1(100).encode(c,100);return t.processJPEG.call(this,h,n,r,i)},t.processGIF87A=t.processGIF89A}(vt.API),$s.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:i,green:r,blue:n,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},$s.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(n){kn.log("bit decode error:"+n)}},$s.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),n=e%4;for(t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<e;i++)for(var s=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+8*i*4,a=0;a<8&&8*i+a<this.width;a++){var l=this.palette[s>>7-a&1];this.data[o+4*a]=l.blue,this.data[o+4*a+1]=l.green,this.data[o+4*a+2]=l.red,this.data[o+4*a+3]=255}n!==0&&(this.pos+=4-n)}},$s.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<t;i++){var s=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+2*i*4,a=s>>4,l=15&s,c=this.palette[a];if(this.data[o]=c.blue,this.data[o+1]=c.green,this.data[o+2]=c.red,this.data[o+3]=255,2*i+1>=this.width)break;c=this.palette[l],this.data[o+4]=c.blue,this.data[o+4+1]=c.green,this.data[o+4+2]=c.red,this.data[o+4+3]=255}e!==0&&(this.pos+=4-e)}},$s.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),s=n*this.width*4+4*r;if(i<this.palette.length){var o=this.palette[i];this.data[s]=o.red,this.data[s+1]=o.green,this.data[s+2]=o.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}t!==0&&(this.pos+=4-t)}},$s.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(s&e)/e*255|0,a=(s>>5&e)/e*255|0,l=(s>>10&e)/e*255|0,c=s>>15?255:0,h=r*this.width*4+4*i;this.data[h]=l,this.data[h+1]=a,this.data[h+2]=o,this.data[h+3]=c}this.pos+=t}},$s.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),n=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,s=0;s<this.width;s++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(o&e)/e*255|0,l=(o>>5&n)/n*255|0,c=(o>>11)/e*255|0,h=i*this.width*4+4*s;this.data[h]=c,this.data[h+1]=l,this.data[h+2]=a,this.data[h+3]=255}this.pos+=t}},$s.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*n;this.data[o]=s,this.data[o+1]=i,this.data[o+2]=r,this.data[o+3]=255}this.pos+=this.width%4}},$s.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*n;this.data[a]=s,this.data[a+1]=i,this.data[a+2]=r,this.data[a+3]=o}},$s.prototype.getData=function(){return this.data},function(t){t.processBMP=function(e,n,r,i){var s=new $s(e,!1),o=s.width,a=s.height,l={data:s.getData(),width:o,height:a},c=new u1(100).encode(l,100);return t.processJPEG.call(this,c,n,r,i)}}(vt.API),u4.prototype.getData=function(){return this.data},function(t){t.processWEBP=function(e,n,r,i){var s=new u4(e),o=s.width,a=s.height,l={data:s.getData(),width:o,height:a},c=new u1(100).encode(l,100);return t.processJPEG.call(this,c,n,r,i)}}(vt.API),vt.API.processRGBA=function(t,e,n){for(var r=t.data,i=r.length,s=new Uint8Array(i/4*3),o=new Uint8Array(i/4),a=0,l=0,c=0;c<i;c+=4){var h=r[c],g=r[c+1],y=r[c+2],p=r[c+3];s[a++]=h,s[a++]=g,s[a++]=y,o[l++]=p}var _=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:_,index:e,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},vt.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Xc=vt.API,mp=Xc.getCharWidthsArray=function(t,e){var n,r,i=(e=e||{}).font||this.internal.getFont(),s=e.fontSize||this.internal.getFontSize(),o=e.charSpace||this.internal.getCharSpace(),a=e.widths?e.widths:i.metadata.Unicode.widths,l=a.fof?a.fof:1,c=e.kerning?e.kerning:i.metadata.Unicode.kerning,h=c.fof?c.fof:1,g=e.doKerning!==!1,y=0,p=t.length,_=0,N=a[0]||l,C=[];for(n=0;n<p;n++)r=t.charCodeAt(n),typeof i.metadata.widthOfString=="function"?C.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(r))+o*(1e3/s)||0)/1e3):(y=g&&vn(c[r])==="object"&&!isNaN(parseInt(c[r][_],10))?c[r][_]/h:0,C.push((a[r]||N)/l+y)),_=r;return C},e4=Xc.getStringUnitWidth=function(t,e){var n=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),i=e.charSpace||this.internal.getCharSpace();return Xc.processArabic&&(t=Xc.processArabic(t)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(t,n,i)/n:mp.apply(this,arguments).reduce(function(s,o){return s+o},0)},t4=function(t,e,n,r){for(var i=[],s=0,o=t.length,a=0;s!==o&&a+e[s]<n;)a+=e[s],s++;i.push(t.slice(0,s));var l=s;for(a=0;s!==o;)a+e[s]>r&&(i.push(t.slice(l,s)),a=0,l=s),a+=e[s],s++;return l!==s&&i.push(t.slice(l,s)),i},n4=function(t,e,n){n||(n={});var r,i,s,o,a,l,c,h=[],g=[h],y=n.textIndent||0,p=0,_=0,N=t.split(" "),C=mp.apply(this,[" ",n])[0];if(l=n.lineIndent===-1?N[0].length+2:n.lineIndent||0){var x=Array(l).join(" "),k=[];N.map(function(j){(j=j.split(/\s*\n/)).length>1?k=k.concat(j.map(function(q,Q){return(Q&&q.length?`
`:"")+q})):k.push(j[0])}),N=k,l=e4.apply(this,[x,n])}for(s=0,o=N.length;s<o;s++){var R=0;if(r=N[s],l&&r[0]==`
`&&(r=r.substr(1),R=1),y+p+(_=(i=mp.apply(this,[r,n])).reduce(function(j,q){return j+q},0))>e||R){if(_>e){for(a=t4.apply(this,[r,i,e-(y+p),e]),h.push(a.shift()),h=[a.pop()];a.length;)g.push([a.shift()]);_=i.slice(r.length-(h[0]?h[0].length:0)).reduce(function(j,q){return j+q},0)}else h=[r];g.push(h),y=_+l,p=C}else h.push(r),y+=p+_,p=C}return c=l?function(j,q){return(q?x:"")+j.join(" ")}:function(j){return j.join(" ")},g.map(c)},Xc.splitTextToSize=function(t,e,n){var r,i=(n=n||{}).fontSize||this.internal.getFontSize(),s=(function(h){if(h.widths&&h.kerning)return{widths:h.widths,kerning:h.kerning};var g=this.internal.getFont(h.fontName,h.fontStyle),y="Unicode";return g.metadata[y]?{widths:g.metadata[y].widths||{0:1},kerning:g.metadata[y].kerning||{}}:{font:g.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,n);r=Array.isArray(t)?t:String(t).split(/\r?\n/);var o=1*this.internal.scaleFactor*e/i;s.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/i:0,s.lineIndent=n.lineIndent;var a,l,c=[];for(a=0,l=r.length;a<l;a++)c=c.concat(n4.apply(this,[r[a],o,s]));return c},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="0123456789abcdef",n="klmnopqrstuvwxyz",r={},i={},s=0;s<16;s++)r[n[s]]=e[s],i[e[s]]=n[s];var o=function(y){return"0x"+parseInt(y,10).toString(16)},a=t.__fontmetrics__.compress=function(y){var p,_,N,C,x=["{"];for(var k in y){if(p=y[k],isNaN(parseInt(k,10))?_="'"+k+"'":(k=parseInt(k,10),_=(_=o(k).slice(2)).slice(0,-1)+i[_.slice(-1)]),typeof p=="number")p<0?(N=o(p).slice(3),C="-"):(N=o(p).slice(2),C=""),N=C+N.slice(0,-1)+i[N.slice(-1)];else{if(vn(p)!=="object")throw new Error("Don't know what to do with value type "+vn(p)+".");N=a(p)}x.push(_+N)}return x.push("}"),x.join("")},l=t.__fontmetrics__.uncompress=function(y){if(typeof y!="string")throw new Error("Invalid argument passed to uncompress.");for(var p,_,N,C,x={},k=1,R=x,j=[],q="",Q="",D=y.length-1,S=1;S<D;S+=1)(C=y[S])=="'"?p?(N=p.join(""),p=void 0):p=[]:p?p.push(C):C=="{"?(j.push([R,N]),R={},N=void 0):C=="}"?((_=j.pop())[0][_[1]]=R,N=void 0,R=_[0]):C=="-"?k=-1:N===void 0?r.hasOwnProperty(C)?(q+=r[C],N=parseInt(q,16)*k,k=1,q=""):q+=C:r.hasOwnProperty(C)?(Q+=r[C],R[N]=parseInt(Q,16)*k,k=1,N=void 0,Q=""):Q+=C;return x},c={codePages:["WinAnsiEncoding"],WinAnsiEncoding:l("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},h={Unicode:{Courier:c,"Courier-Bold":c,"Courier-BoldOblique":c,"Courier-Oblique":c,Helvetica:c,"Helvetica-Bold":c,"Helvetica-BoldOblique":c,"Helvetica-Oblique":c,"Times-Roman":c,"Times-Bold":c,"Times-BoldItalic":c,"Times-Italic":c}},g={Unicode:{"Courier-Oblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":l("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":l("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:l("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:l("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":l("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":l("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(y){var p=y.font,_=g.Unicode[p.postScriptName];_&&(p.metadata.Unicode={},p.metadata.Unicode.widths=_.widths,p.metadata.Unicode.kerning=_.kerning);var N=h.Unicode[p.postScriptName];N&&(p.metadata.Unicode.encoding=N,p.encoding=N.codePages[0])}])}(vt.API),function(t){var e=function(n){for(var r=n.length,i=new Uint8Array(r),s=0;s<r;s++)i[s]=n.charCodeAt(s);return i};t.API.events.push(["addFont",function(n){var r=void 0,i=n.font,s=n.instance;if(!i.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(r=s.existsFileInVFS(i.postScriptName)===!1?s.loadFile(i.postScriptName):s.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(o,a){a=/^\x00\x01\x00\x00/.test(a)?e(a):e(Fp(a)),o.metadata=t.API.TTFFont.open(a),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(i,r)}}])}(vt),vt.API.addSvgAsImage=function(t,e,n,r,i,s,o,a){if(isNaN(e)||isNaN(n))throw kn.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(r)||isNaN(i))throw kn.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var l=document.createElement("canvas");l.width=r,l.height=i;var c=l.getContext("2d");c.fillStyle="#fff",c.fillRect(0,0,l.width,l.height);var h={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},g=this;return(Tt.canvg?Promise.resolve(Tt.canvg):q0(()=>import("./index.es-BIzXO1dz.js"),[])).catch(function(y){return Promise.reject(new Error("Could not load canvg: "+y))}).then(function(y){return y.default?y.default:y}).then(function(y){return y.fromString(c,t,h)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(y){return y.render(h)}).then(function(){g.addImage(l.toDataURL("image/jpeg",1),e,n,r,i,o,a)})},vt.API.putTotalPages=function(t){var e,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),n=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var i=0;i<this.internal.pages[r].length;i++)this.internal.pages[r][i]=this.internal.pages[r][i].replace(e,n);return this},vt.API.viewerPreferences=function(t,e){var n;t=t||{},e=e||!1;var r,i,s,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},a=Object.keys(o),l=[],c=0,h=0,g=0;function y(_,N){var C,x=!1;for(C=0;C<_.length;C+=1)_[C]===N&&(x=!0);return x}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var p=a.length;for(g=0;g<p;g+=1)n[a[g]].value=n[a[g]].defaultValue,n[a[g]].explicitSet=!1}if(vn(t)==="object"){for(i in t)if(s=t[i],y(a,i)&&s!==void 0){if(n[i].type==="boolean"&&typeof s=="boolean")n[i].value=s;else if(n[i].type==="name"&&y(n[i].valueSet,s))n[i].value=s;else if(n[i].type==="integer"&&Number.isInteger(s))n[i].value=s;else if(n[i].type==="array"){for(c=0;c<s.length;c+=1)if(r=!0,s[c].length===1&&typeof s[c][0]=="number")l.push(String(s[c]-1));else if(s[c].length>1){for(h=0;h<s[c].length;h+=1)typeof s[c][h]!="number"&&(r=!1);r===!0&&l.push([s[c][0]-1,s[c][1]-1].join(" "))}n[i].value="["+l.join(" ")+"]"}else n[i].value=n[i].defaultValue;n[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var _,N=[];for(_ in n)n[_].explicitSet===!0&&(n[_].type==="name"?N.push("/"+_+" /"+n[_].value):N.push("/"+_+" "+n[_].value));N.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+N.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},function(t){var e=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(r)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),a=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),l=unescape(encodeURIComponent("</x:xmpmeta>")),c=s.length+o.length+a.length+i.length+l.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+c+" >>"),this.internal.write("stream"),this.internal.write(i+s+o+a+l),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(r,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",e)),this}}(vt.API),function(t){var e=t.API,n=e.pdfEscape16=function(s,o){for(var a,l=o.metadata.Unicode.widths,c=["","0","00","000","0000"],h=[""],g=0,y=s.length;g<y;++g){if(a=o.metadata.characterToGlyph(s.charCodeAt(g)),o.metadata.glyIdsUsed.push(a),o.metadata.toUnicode[a]=s.charCodeAt(g),l.indexOf(a)==-1&&(l.push(a),l.push([parseInt(o.metadata.widthOfGlyph(a),10)])),a=="0")return h.join("");a=a.toString(16),h.push(c[4-a.length],a)}return h.join("")},r=function(s){var o,a,l,c,h,g,y;for(h=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,l=[],g=0,y=(a=Object.keys(s).sort(function(p,_){return p-_})).length;g<y;g++)o=a[g],l.length>=100&&(h+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar`,l=[]),s[o]!==void 0&&s[o]!==null&&typeof s[o].toString=="function"&&(c=("0000"+s[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),l.push("<"+o+"><"+c+">"));return l.length&&(h+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar
`),h+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(s){(function(o){var a=o.font,l=o.out,c=o.newObject,h=o.putStream;if(a.metadata instanceof t.API.TTFFont&&a.encoding==="Identity-H"){for(var g=a.metadata.Unicode.widths,y=a.metadata.subset.encode(a.metadata.glyIdsUsed,1),p="",_=0;_<y.length;_++)p+=String.fromCharCode(y[_]);var N=c();h({data:p,addLength1:!0,objectId:N}),l("endobj");var C=c();h({data:r(a.metadata.toUnicode),addLength1:!0,objectId:C}),l("endobj");var x=c();l("<<"),l("/Type /FontDescriptor"),l("/FontName /"+nu(a.fontName)),l("/FontFile2 "+N+" 0 R"),l("/FontBBox "+t.API.PDFObject.convert(a.metadata.bbox)),l("/Flags "+a.metadata.flags),l("/StemV "+a.metadata.stemV),l("/ItalicAngle "+a.metadata.italicAngle),l("/Ascent "+a.metadata.ascender),l("/Descent "+a.metadata.decender),l("/CapHeight "+a.metadata.capHeight),l(">>"),l("endobj");var k=c();l("<<"),l("/Type /Font"),l("/BaseFont /"+nu(a.fontName)),l("/FontDescriptor "+x+" 0 R"),l("/W "+t.API.PDFObject.convert(g)),l("/CIDToGIDMap /Identity"),l("/DW 1000"),l("/Subtype /CIDFontType2"),l("/CIDSystemInfo"),l("<<"),l("/Supplement 0"),l("/Registry (Adobe)"),l("/Ordering ("+a.encoding+")"),l(">>"),l(">>"),l("endobj"),a.objectNumber=c(),l("<<"),l("/Type /Font"),l("/Subtype /Type0"),l("/ToUnicode "+C+" 0 R"),l("/BaseFont /"+nu(a.fontName)),l("/Encoding /"+a.encoding),l("/DescendantFonts ["+k+" 0 R]"),l(">>"),l("endobj"),a.isAlreadyPutted=!0}})(s)}]),e.events.push(["putFont",function(s){(function(o){var a=o.font,l=o.out,c=o.newObject,h=o.putStream;if(a.metadata instanceof t.API.TTFFont&&a.encoding==="WinAnsiEncoding"){for(var g=a.metadata.rawData,y="",p=0;p<g.length;p++)y+=String.fromCharCode(g[p]);var _=c();h({data:y,addLength1:!0,objectId:_}),l("endobj");var N=c();h({data:r(a.metadata.toUnicode),addLength1:!0,objectId:N}),l("endobj");var C=c();l("<<"),l("/Descent "+a.metadata.decender),l("/CapHeight "+a.metadata.capHeight),l("/StemV "+a.metadata.stemV),l("/Type /FontDescriptor"),l("/FontFile2 "+_+" 0 R"),l("/Flags 96"),l("/FontBBox "+t.API.PDFObject.convert(a.metadata.bbox)),l("/FontName /"+nu(a.fontName)),l("/ItalicAngle "+a.metadata.italicAngle),l("/Ascent "+a.metadata.ascender),l(">>"),l("endobj"),a.objectNumber=c();for(var x=0;x<a.metadata.hmtx.widths.length;x++)a.metadata.hmtx.widths[x]=parseInt(a.metadata.hmtx.widths[x]*(1e3/a.metadata.head.unitsPerEm));l("<</Subtype/TrueType/Type/Font/ToUnicode "+N+" 0 R/BaseFont/"+nu(a.fontName)+"/FontDescriptor "+C+" 0 R/Encoding/"+a.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(a.metadata.hmtx.widths)+">>"),l("endobj"),a.isAlreadyPutted=!0}})(s)}]);var i=function(s){var o,a=s.text||"",l=s.x,c=s.y,h=s.options||{},g=s.mutex||{},y=g.pdfEscape,p=g.activeFontKey,_=g.fonts,N=p,C="",x=0,k="",R=_[N].encoding;if(_[N].encoding!=="Identity-H")return{text:a,x:l,y:c,options:h,mutex:g};for(k=a,N=p,Array.isArray(a)&&(k=a[0]),x=0;x<k.length;x+=1)_[N].metadata.hasOwnProperty("cmap")&&(o=_[N].metadata.cmap.unicode.codeMap[k[x].charCodeAt(0)]),o||k[x].charCodeAt(0)<256&&_[N].metadata.hasOwnProperty("Unicode")?C+=k[x]:C+="";var j="";return parseInt(N.slice(1))<14||R==="WinAnsiEncoding"?j=y(C,N).split("").map(function(q){return q.charCodeAt(0).toString(16)}).join(""):R==="Identity-H"&&(j=n(C,_[N])),g.isHex=!0,{text:j,x:l,y:c,options:h,mutex:g}};e.events.push(["postProcessText",function(s){var o=s.text||"",a=[],l={text:o,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(o)){var c=0;for(c=0;c<o.length;c+=1)Array.isArray(o[c])&&o[c].length===3?a.push([i(Object.assign({},l,{text:o[c][0]})).text,o[c][1],o[c][2]]):a.push(i(Object.assign({},l,{text:o[c]})).text);s.text=a}else s.text=i(Object.assign({},l,{text:o})).text}])}(vt),function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0},t.addFileToVFS=function(n,r){return e.call(this),this.internal.vFS[n]=r,this},t.getFileFromVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0?this.internal.vFS[n]:null}}(vt.API),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(r){var i,s,o,a,l,c,h,g=e,y=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],p=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],_={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},N={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},C=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],x=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),k=!1,R=0;this.__bidiEngine__={};var j=function(A){var I=A.charCodeAt(),L=I>>8,ne=N[L];return ne!==void 0?g[256*ne+(255&I)]:L===252||L===253?"AL":x.test(L)?"L":L===8?"R":"N"},q=function(A){for(var I,L=0;L<A.length;L++){if((I=j(A.charAt(L)))==="L")return!1;if(I==="R")return!0}return!1},Q=function(A,I,L,ne){var ie,ue,fe,J,le=I[ne];switch(le){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":k=!1;break;case"N":case"AN":break;case"EN":k&&(le="AN");break;case"AL":k=!0,le="R";break;case"WS":case"BN":le="N";break;case"CS":ne<1||ne+1>=I.length||(ie=L[ne-1])!=="EN"&&ie!=="AN"||(ue=I[ne+1])!=="EN"&&ue!=="AN"?le="N":k&&(ue="AN"),le=ue===ie?ue:"N";break;case"ES":le=(ie=ne>0?L[ne-1]:"B")==="EN"&&ne+1<I.length&&I[ne+1]==="EN"?"EN":"N";break;case"ET":if(ne>0&&L[ne-1]==="EN"){le="EN";break}if(k){le="N";break}for(fe=ne+1,J=I.length;fe<J&&I[fe]==="ET";)fe++;le=fe<J&&I[fe]==="EN"?"EN":"N";break;case"NSM":if(o&&!a){for(J=I.length,fe=ne+1;fe<J&&I[fe]==="NSM";)fe++;if(fe<J){var xe=A[ne],we=xe>=1425&&xe<=2303||xe===64286;if(ie=I[fe],we&&(ie==="R"||ie==="AL")){le="R";break}}}le=ne<1||(ie=I[ne-1])==="B"?"N":L[ne-1];break;case"B":k=!1,i=!0,le=R;break;case"S":s=!0,le="N"}return le},D=function(A,I,L){var ne=A.split("");return L&&S(ne,L,{hiLevel:R}),ne.reverse(),I&&I.reverse(),ne.join("")},S=function(A,I,L){var ne,ie,ue,fe,J,le=-1,xe=A.length,we=0,O=[],W=R?p:y,Y=[];for(k=!1,i=!1,s=!1,ie=0;ie<xe;ie++)Y[ie]=j(A[ie]);for(ue=0;ue<xe;ue++){if(J=we,O[ue]=Q(A,Y,O,ue),ne=240&(we=W[J][_[O[ue]]]),we&=15,I[ue]=fe=W[we][5],ne>0)if(ne===16){for(ie=le;ie<ue;ie++)I[ie]=1;le=-1}else le=-1;if(W[we][6])le===-1&&(le=ue);else if(le>-1){for(ie=le;ie<ue;ie++)I[ie]=fe;le=-1}Y[ue]==="B"&&(I[ue]=0),L.hiLevel|=fe}s&&function(K,re,ae){for(var ve=0;ve<ae;ve++)if(K[ve]==="S"){re[ve]=R;for(var te=ve-1;te>=0&&K[te]==="WS";te--)re[te]=R}}(Y,I,xe)},T=function(A,I,L,ne,ie){if(!(ie.hiLevel<A)){if(A===1&&R===1&&!i)return I.reverse(),void(L&&L.reverse());for(var ue,fe,J,le,xe=I.length,we=0;we<xe;){if(ne[we]>=A){for(J=we+1;J<xe&&ne[J]>=A;)J++;for(le=we,fe=J-1;le<fe;le++,fe--)ue=I[le],I[le]=I[fe],I[fe]=ue,L&&(ue=L[le],L[le]=L[fe],L[fe]=ue);we=J}we++}}},F=function(A,I,L){var ne=A.split(""),ie={hiLevel:R};return L||(L=[]),S(ne,L,ie),function(ue,fe,J){if(J.hiLevel!==0&&h)for(var le,xe=0;xe<ue.length;xe++)fe[xe]===1&&(le=C.indexOf(ue[xe]))>=0&&(ue[xe]=C[le+1])}(ne,L,ie),T(2,ne,I,L,ie),T(1,ne,I,L,ie),ne.join("")};return this.__bidiEngine__.doBidiReorder=function(A,I,L){if(function(ie,ue){if(ue)for(var fe=0;fe<ie.length;fe++)ue[fe]=fe;a===void 0&&(a=q(ie)),c===void 0&&(c=q(ie))}(A,I),o||!l||c)if(o&&l&&a^c)R=a?1:0,A=D(A,I,L);else if(!o&&l&&c)R=a?1:0,A=F(A,I,L),A=D(A,I);else if(!o||a||l||c){if(o&&!l&&a^c)A=D(A,I),a?(R=0,A=F(A,I,L)):(R=1,A=F(A,I,L),A=D(A,I));else if(o&&a&&!l&&c)R=1,A=F(A,I,L),A=D(A,I);else if(!o&&!l&&a^c){var ne=h;a?(R=1,A=F(A,I,L),R=0,h=!1,A=F(A,I,L),h=ne):(R=0,A=F(A,I,L),A=D(A,I),R=1,h=!1,A=F(A,I,L),h=ne,A=D(A,I))}}else R=0,A=F(A,I,L);else R=a?1:0,A=F(A,I,L);return A},this.__bidiEngine__.setOptions=function(A){A&&(o=A.isInputVisual,l=A.isOutputVisual,a=A.isInputRtl,c=A.isOutputRtl,h=A.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(r){var i=r.text;r.x,r.y;var s=r.options||{};r.mutex,s.lang;var o=[];if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,n.setOptions(s),Object.prototype.toString.call(i)==="[object Array]"){var a=0;for(o=[],a=0;a<i.length;a+=1)Object.prototype.toString.call(i[a])==="[object Array]"?o.push([n.doBidiReorder(i[a][0]),i[a][1],i[a][2]]):o.push([n.doBidiReorder(i[a])]);r.text=o}else r.text=n.doBidiReorder(i);n.setOptions({isInputVisual:!0})}])}(vt),vt.API.TTFFont=function(){function t(e){var n;if(this.rawData=e,n=this.contents=new Sl(e),this.contents.pos=4,n.readString(4)==="ttcf")throw new Error("TTCF not supported.");n.pos=0,this.parse(),this.subset=new DB(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new bB(this.contents),this.head=new NB(this),this.name=new kB(this),this.cmap=new GE(this),this.toUnicode={},this.hhea=new SB(this),this.maxp=new IB(this),this.hmtx=new CB(this),this.post=new EB(this),this.os2=new AB(this),this.loca=new jB(this),this.glyf=new PB(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,n,r,i,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,a,l,c;for(c=[],o=0,a=(l=this.bbox).length;o<a;o++)e=l[o],c.push(Math.round(e*this.scaleFactor));return c}).call(this),this.stemV=0,this.post.exists?(r=255&(i=this.post.italic_angle),32768&(n=i>>16)&&(n=-(1+(65535^n))),this.italicAngle=+(n+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var n;return((n=this.cmap.unicode)!=null?n.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var n;return n=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*n},t.prototype.widthOfString=function(e,n,r){var i,s,o,a;for(o=0,s=0,a=(e=""+e).length;0<=a?s<a:s>a;s=0<=a?++s:--s)i=e.charCodeAt(s),o+=this.widthOfGlyph(this.characterToGlyph(i))+r*(1e3/n)||0;return o*(n/1e3)},t.prototype.lineHeight=function(e,n){var r;return n==null&&(n=!1),r=n?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},t}();var so,Sl=function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var n,r;for(r=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)r[n]=String.fromCharCode(this.readByte());return r.join("")},t.prototype.writeString=function(e){var n,r,i;for(i=[],n=0,r=e.length;0<=r?n<r:n>r;n=0<=r?++n:--n)i.push(this.writeByte(e.charCodeAt(n)));return i},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,n,r,i,s,o,a,l;return e=this.readByte(),n=this.readByte(),r=this.readByte(),i=this.readByte(),s=this.readByte(),o=this.readByte(),a=this.readByte(),l=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^n)+1099511627776*(255^r)+4294967296*(255^i)+16777216*(255^s)+65536*(255^o)+256*(255^a)+(255^l)+1):72057594037927940*e+281474976710656*n+1099511627776*r+4294967296*i+16777216*s+65536*o+256*a+l},t.prototype.writeLongLong=function(e){var n,r;return n=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var n,r;for(n=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)n.push(this.readByte());return n},t.prototype.write=function(e){var n,r,i,s;for(s=[],r=0,i=e.length;r<i;r++)n=e[r],s.push(this.writeByte(n));return s},t}(),bB=function(){var t;function e(n){var r,i,s;for(this.scalarType=n.readInt(),this.tableCount=n.readShort(),this.searchRange=n.readShort(),this.entrySelector=n.readShort(),this.rangeShift=n.readShort(),this.tables={},i=0,s=this.tableCount;0<=s?i<s:i>s;i=0<=s?++i:--i)r={tag:n.readString(4),checksum:n.readInt(),offset:n.readInt(),length:n.readInt()},this.tables[r.tag]=r}return e.prototype.encode=function(n){var r,i,s,o,a,l,c,h,g,y,p,_,N;for(N in p=Object.keys(n).length,l=Math.log(2),g=16*Math.floor(Math.log(p)/l),o=Math.floor(g/l),h=16*p-g,(i=new Sl).writeInt(this.scalarType),i.writeShort(p),i.writeShort(g),i.writeShort(o),i.writeShort(h),s=16*p,c=i.pos+s,a=null,_=[],n)for(y=n[N],i.writeString(N),i.writeInt(t(y)),i.writeInt(c),i.writeInt(y.length),_=_.concat(y),N==="head"&&(a=c),c+=y.length;c%4;)_.push(0),c++;return i.write(_),r=2981146554-t(i.data),i.pos=a+8,i.writeUInt32(r),i.data},t=function(n){var r,i,s,o;for(n=KE.call(n);n.length%4;)n.push(0);for(s=new Sl(n),i=0,r=0,o=n.length;r<o;r=r+=4)i+=s.readUInt32();return 4294967295&i},e}(),_B={}.hasOwnProperty,Ro=function(t,e){for(var n in e)_B.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};so=function(){function t(e){var n;this.file=e,n=this.file.directory.tables[this.tag],this.exists=!!n,n&&(this.offset=n.offset,this.length=n.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var NB=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Ro(t,so),t.prototype.tag="head",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},t.prototype.encode=function(e){var n;return(n=new Sl).writeInt(this.version),n.writeInt(this.revision),n.writeInt(this.checkSumAdjustment),n.writeInt(this.magicNumber),n.writeShort(this.flags),n.writeShort(this.unitsPerEm),n.writeLongLong(this.created),n.writeLongLong(this.modified),n.writeShort(this.xMin),n.writeShort(this.yMin),n.writeShort(this.xMax),n.writeShort(this.yMax),n.writeShort(this.macStyle),n.writeShort(this.lowestRecPPEM),n.writeShort(this.fontDirectionHint),n.writeShort(e),n.writeShort(this.glyphDataFormat),n.data},t}(),h4=function(){function t(e,n){var r,i,s,o,a,l,c,h,g,y,p,_,N,C,x,k,R;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=n+e.readInt(),g=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(l=0;l<256;++l)this.codeMap[l]=e.readByte();break;case 4:for(p=e.readUInt16(),y=p/2,e.pos+=6,s=function(){var j,q;for(q=[],l=j=0;0<=y?j<y:j>y;l=0<=y?++j:--j)q.push(e.readUInt16());return q}(),e.pos+=2,N=function(){var j,q;for(q=[],l=j=0;0<=y?j<y:j>y;l=0<=y?++j:--j)q.push(e.readUInt16());return q}(),c=function(){var j,q;for(q=[],l=j=0;0<=y?j<y:j>y;l=0<=y?++j:--j)q.push(e.readUInt16());return q}(),h=function(){var j,q;for(q=[],l=j=0;0<=y?j<y:j>y;l=0<=y?++j:--j)q.push(e.readUInt16());return q}(),i=(this.length-e.pos+this.offset)/2,a=function(){var j,q;for(q=[],l=j=0;0<=i?j<i:j>i;l=0<=i?++j:--j)q.push(e.readUInt16());return q}(),l=x=0,R=s.length;x<R;l=++x)for(C=s[l],r=k=_=N[l];_<=C?k<=C:k>=C;r=_<=C?++k:--k)h[l]===0?o=r+c[l]:(o=a[h[l]/2+(r-_)-(y-l)]||0)!==0&&(o+=c[l]),this.codeMap[r]=65535&o}e.pos=g}return t.encode=function(e,n){var r,i,s,o,a,l,c,h,g,y,p,_,N,C,x,k,R,j,q,Q,D,S,T,F,A,I,L,ne,ie,ue,fe,J,le,xe,we,O,W,Y,K,re,ae,ve,te,de,ge,Se;switch(ne=new Sl,o=Object.keys(e).sort(function(Te,Ue){return Te-Ue}),n){case"macroman":for(N=0,C=function(){var Te=[];for(_=0;_<256;++_)Te.push(0);return Te}(),k={0:0},s={},ie=0,le=o.length;ie<le;ie++)k[te=e[i=o[ie]]]==null&&(k[te]=++N),s[i]={old:e[i],new:k[e[i]]},C[i]=k[e[i]];return ne.writeUInt16(1),ne.writeUInt16(0),ne.writeUInt32(12),ne.writeUInt16(0),ne.writeUInt16(262),ne.writeUInt16(0),ne.write(C),{charMap:s,subtable:ne.data,maxGlyphID:N+1};case"unicode":for(I=[],g=[],R=0,k={},r={},x=c=null,ue=0,xe=o.length;ue<xe;ue++)k[q=e[i=o[ue]]]==null&&(k[q]=++R),r[i]={old:q,new:k[q]},a=k[q]-i,x!=null&&a===c||(x&&g.push(x),I.push(i),c=a),x=i;for(x&&g.push(x),g.push(65535),I.push(65535),F=2*(T=I.length),S=2*Math.pow(Math.log(T)/Math.LN2,2),y=Math.log(S/2)/Math.LN2,D=2*T-S,l=[],Q=[],p=[],_=fe=0,we=I.length;fe<we;_=++fe){if(A=I[_],h=g[_],A===65535){l.push(0),Q.push(0);break}if(A-(L=r[A].new)>=32768)for(l.push(0),Q.push(2*(p.length+T-_)),i=J=A;A<=h?J<=h:J>=h;i=A<=h?++J:--J)p.push(r[i].new);else l.push(L-A),Q.push(0)}for(ne.writeUInt16(3),ne.writeUInt16(1),ne.writeUInt32(12),ne.writeUInt16(4),ne.writeUInt16(16+8*T+2*p.length),ne.writeUInt16(0),ne.writeUInt16(F),ne.writeUInt16(S),ne.writeUInt16(y),ne.writeUInt16(D),ae=0,O=g.length;ae<O;ae++)i=g[ae],ne.writeUInt16(i);for(ne.writeUInt16(0),ve=0,W=I.length;ve<W;ve++)i=I[ve],ne.writeUInt16(i);for(de=0,Y=l.length;de<Y;de++)a=l[de],ne.writeUInt16(a);for(ge=0,K=Q.length;ge<K;ge++)j=Q[ge],ne.writeUInt16(j);for(Se=0,re=p.length;Se<re;Se++)N=p[Se],ne.writeUInt16(N);return{charMap:r,subtable:ne.data,maxGlyphID:R+1}}},t}(),GE=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Ro(t,so),t.prototype.tag="cmap",t.prototype.parse=function(e){var n,r,i;for(e.pos=this.offset,this.version=e.readUInt16(),i=e.readUInt16(),this.tables=[],this.unicode=null,r=0;0<=i?r<i:r>i;r=0<=i?++r:--r)n=new h4(e,this.offset),this.tables.push(n),n.isUnicode&&this.unicode==null&&(this.unicode=n);return!0},t.encode=function(e,n){var r,i;return n==null&&(n="macroman"),r=h4.encode(e,n),(i=new Sl).writeUInt16(0),i.writeUInt16(1),r.table=i.data.concat(r.subtable),r},t}(),SB=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Ro(t,so),t.prototype.tag="hhea",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},t}(),AB=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Ro(t,so),t.prototype.tag="OS/2",t.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=function(){var n,r;for(r=[],n=0;n<10;++n)r.push(e.readByte());return r}(),this.charRange=function(){var n,r;for(r=[],n=0;n<4;++n)r.push(e.readInt());return r}(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=function(){var n,r;for(r=[],n=0;n<2;n=++n)r.push(e.readInt());return r}(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},t}(),EB=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Ro(t,so),t.prototype.tag="post",t.prototype.parse=function(e){var n,r,i;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:case 196608:break;case 131072:var s;for(r=e.readUInt16(),this.glyphNameIndex=[],s=0;0<=r?s<r:s>r;s=0<=r?++s:--s)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],i=[];e.pos<this.offset+this.length;)n=e.readByte(),i.push(this.names.push(e.readString(n)));return i;case 151552:return r=e.readUInt16(),this.offsets=e.read(r);case 262144:return this.map=(function(){var o,a,l;for(l=[],s=o=0,a=this.file.maxp.numGlyphs;0<=a?o<a:o>a;s=0<=a?++o:--o)l.push(e.readUInt32());return l}).call(this)}},t}(),TB=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},kB=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Ro(t,so),t.prototype.tag="name",t.prototype.parse=function(e){var n,r,i,s,o,a,l,c,h,g,y;for(e.pos=this.offset,e.readShort(),n=e.readShort(),a=e.readShort(),r=[],s=0;0<=n?s<n:s>n;s=0<=n?++s:--s)r.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+a+e.readShort()});for(l={},s=h=0,g=r.length;h<g;s=++h)i=r[s],e.pos=i.offset,c=e.readString(i.length),o=new TB(c,i),l[y=i.nameID]==null&&(l[y]=[]),l[i.nameID].push(o);this.strings=l,this.copyright=l[0],this.fontFamily=l[1],this.fontSubfamily=l[2],this.uniqueSubfamily=l[3],this.fontName=l[4],this.version=l[5];try{this.postscriptName=l[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=l[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=l[7],this.manufacturer=l[8],this.designer=l[9],this.description=l[10],this.vendorUrl=l[11],this.designerUrl=l[12],this.license=l[13],this.licenseUrl=l[14],this.preferredFamily=l[15],this.preferredSubfamily=l[17],this.compatibleFull=l[18],this.sampleText=l[19]},t}(),IB=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Ro(t,so),t.prototype.tag="maxp",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},t}(),CB=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Ro(t,so),t.prototype.tag="hmtx",t.prototype.parse=function(e){var n,r,i,s,o,a,l;for(e.pos=this.offset,this.metrics=[],n=0,a=this.file.hhea.numberOfMetrics;0<=a?n<a:n>a;n=0<=a?++n:--n)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(i=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var c,h;for(h=[],n=c=0;0<=i?c<i:c>i;n=0<=i?++c:--c)h.push(e.readInt16());return h}(),this.widths=(function(){var c,h,g,y;for(y=[],c=0,h=(g=this.metrics).length;c<h;c++)s=g[c],y.push(s.advance);return y}).call(this),r=this.widths[this.widths.length-1],l=[],n=o=0;0<=i?o<i:o>i;n=0<=i?++o:--o)l.push(this.widths.push(r));return l},t.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},t}(),KE=[].slice,PB=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Ro(t,so),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(e){var n,r,i,s,o,a,l,c,h,g;return e in this.cache?this.cache[e]:(s=this.file.loca,n=this.file.contents,r=s.indexOf(e),(i=s.lengthOf(e))===0?this.cache[e]=null:(n.pos=this.offset+r,o=(a=new Sl(n.read(i))).readShort(),c=a.readShort(),g=a.readShort(),l=a.readShort(),h=a.readShort(),this.cache[e]=o===-1?new RB(a,c,g,l,h):new LB(a,o,c,g,l,h),this.cache[e]))},t.prototype.encode=function(e,n,r){var i,s,o,a,l;for(o=[],s=[],a=0,l=n.length;a<l;a++)i=e[n[a]],s.push(o.length),i&&(o=o.concat(i.encode(r)));return s.push(o.length),{table:o,offsets:s}},t}(),LB=function(){function t(e,n,r,i,s,o){this.raw=e,this.numberOfContours=n,this.xMin=r,this.yMin=i,this.xMax=s,this.yMax=o,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),RB=function(){function t(e,n,r,i,s){var o,a;for(this.raw=e,this.xMin=n,this.yMin=r,this.xMax=i,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;a=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&a;)o.pos+=1&a?4:2,128&a?o.pos+=8:64&a?o.pos+=4:8&a&&(o.pos+=2)}return t.prototype.encode=function(){var e,n,r;for(n=new Sl(KE.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)n.pos=this.glyphOffsets[e];return n.data},t}(),jB=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Ro(t,so),t.prototype.tag="loca",t.prototype.parse=function(e){var n,r;return e.pos=this.offset,n=this.file.head.indexToLocFormat,this.offsets=n===0?(function(){var i,s;for(s=[],r=0,i=this.length;r<i;r+=2)s.push(2*e.readUInt16());return s}).call(this):(function(){var i,s;for(s=[],r=0,i=this.length;r<i;r+=4)s.push(e.readUInt32());return s}).call(this)},t.prototype.indexOf=function(e){return this.offsets[e]},t.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},t.prototype.encode=function(e,n){for(var r=new Uint32Array(this.offsets.length),i=0,s=0,o=0;o<r.length;++o)if(r[o]=i,s<n.length&&n[s]==o){++s,r[o]=i;var a=this.offsets[o],l=this.offsets[o+1]-a;l>0&&(i+=l)}for(var c=new Array(4*r.length),h=0;h<r.length;++h)c[4*h+3]=255&r[h],c[4*h+2]=(65280&r[h])>>8,c[4*h+1]=(16711680&r[h])>>16,c[4*h]=(4278190080&r[h])>>24;return c},t}(),DB=function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,n,r,i,s;for(n in i=this.font.cmap.tables[0].codeMap,e={},s=this.subset)r=s[n],e[n]=i[r];return e},t.prototype.glyphsFor=function(e){var n,r,i,s,o,a,l;for(i={},o=0,a=e.length;o<a;o++)i[s=e[o]]=this.font.glyf.glyphFor(s);for(s in n=[],i)(r=i[s])!=null&&r.compound&&n.push.apply(n,r.glyphIDs);if(n.length>0)for(s in l=this.glyphsFor(n))r=l[s],i[s]=r;return i},t.prototype.encode=function(e,n){var r,i,s,o,a,l,c,h,g,y,p,_,N,C,x;for(i in r=GE.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(e),p={0:0},x=r.charMap)p[(l=x[i]).old]=l.new;for(_ in y=r.maxGlyphID,o)_ in p||(p[_]=y++);return h=function(k){var R,j;for(R in j={},k)j[k[R]]=R;return j}(p),g=Object.keys(h).sort(function(k,R){return k-R}),N=function(){var k,R,j;for(j=[],k=0,R=g.length;k<R;k++)a=g[k],j.push(h[a]);return j}(),s=this.font.glyf.encode(o,N,p),c=this.font.loca.encode(s.offsets,N),C={cmap:this.font.cmap.raw(),glyf:s.table,loca:c,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(n)},this.font.os2.exists&&(C["OS/2"]=this.font.os2.raw()),this.font.directory.encode(C)},t}();vt.API.PDFObject=function(){var t;function e(){}return t=function(n,r){return(Array(r+1).join("0")+n).slice(-r)},e.convert=function(n){var r,i,s,o;if(Array.isArray(n))return"["+function(){var a,l,c;for(c=[],a=0,l=n.length;a<l;a++)r=n[a],c.push(e.convert(r));return c}().join(" ")+"]";if(typeof n=="string")return"/"+n;if(n!=null&&n.isString)return"("+n+")";if(n instanceof Date)return"(D:"+t(n.getUTCFullYear(),4)+t(n.getUTCMonth(),2)+t(n.getUTCDate(),2)+t(n.getUTCHours(),2)+t(n.getUTCMinutes(),2)+t(n.getUTCSeconds(),2)+"Z)";if({}.toString.call(n)==="[object Object]"){for(i in s=["<<"],n)o=n[i],s.push("/"+i+" "+e.convert(o));return s.push(">>"),s.join(`
`)}return""+n},e}();function YE(t,e,n,r,i){r=r||{};var s=1.15,o=i.internal.scaleFactor,a=i.internal.getFontSize()/o,l=i.getLineHeightFactor?i.getLineHeightFactor():s,c=a*l,h=/\r\n|\r|\n/g,g="",y=1;if((r.valign==="middle"||r.valign==="bottom"||r.halign==="center"||r.halign==="right")&&(g=typeof t=="string"?t.split(h):t,y=g.length||1),n+=a*(2-s),r.valign==="middle"?n-=y/2*c:r.valign==="bottom"&&(n-=y*c),r.halign==="center"||r.halign==="right"){var p=a;if(r.halign==="center"&&(p*=.5),g&&y>=1){for(var _=0;_<g.length;_++)i.text(g[_],e-i.getStringUnitWidth(g[_])*p,n),n+=c;return i}e-=i.getStringUnitWidth(t)*p}return r.halign==="justify"?i.text(t,e,n,{maxWidth:r.maxWidth||100,align:"justify"}):i.text(t,e,n),i}var d4={},Pu=function(){function t(e){this.jsPDFDocument=e,this.userStyles={textColor:e.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:e.internal.getFontSize(),fontStyle:e.internal.getFont().fontStyle,font:e.internal.getFont().fontName,lineWidth:e.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:e.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return t.setDefaults=function(e,n){n===void 0&&(n=null),n?n.__autoTableDocumentDefaults=e:d4=e},t.unifyColor=function(e){return Array.isArray(e)?e:typeof e=="number"?[e,e,e]:typeof e=="string"?[e]:null},t.prototype.applyStyles=function(e,n){var r,i,s;n===void 0&&(n=!1),e.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(e.fontStyle);var o=this.jsPDFDocument.internal.getFont(),a=o.fontStyle,l=o.fontName;if(e.font&&(l=e.font),e.fontStyle){a=e.fontStyle;var c=this.getFontList()[l];c&&c.indexOf(a)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(c[0]),a=c[0])}if(this.jsPDFDocument.setFont(l,a),e.fontSize&&this.jsPDFDocument.setFontSize(e.fontSize),!n){var h=t.unifyColor(e.fillColor);h&&(r=this.jsPDFDocument).setFillColor.apply(r,h),h=t.unifyColor(e.textColor),h&&(i=this.jsPDFDocument).setTextColor.apply(i,h),h=t.unifyColor(e.lineColor),h&&(s=this.jsPDFDocument).setDrawColor.apply(s,h),typeof e.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(e.lineWidth)}},t.prototype.splitTextToSize=function(e,n,r){return this.jsPDFDocument.splitTextToSize(e,n,r)},t.prototype.rect=function(e,n,r,i,s){return this.jsPDFDocument.rect(e,n,r,i,s)},t.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},t.prototype.getTextWidth=function(e){return this.jsPDFDocument.getTextWidth(e)},t.prototype.getDocument=function(){return this.jsPDFDocument},t.prototype.setPage=function(e){this.jsPDFDocument.setPage(e)},t.prototype.addPage=function(){return this.jsPDFDocument.addPage()},t.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},t.prototype.getGlobalOptions=function(){return d4||{}},t.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},t.prototype.pageSize=function(){var e=this.jsPDFDocument.internal.pageSize;return e.width==null&&(e={width:e.getWidth(),height:e.getHeight()}),e},t.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},t.prototype.getLineHeightFactor=function(){var e=this.jsPDFDocument;return e.getLineHeightFactor?e.getLineHeightFactor():1.15},t.prototype.getLineHeight=function(e){return e/this.scaleFactor()*this.getLineHeightFactor()},t.prototype.pageNumber=function(){var e=this.jsPDFDocument.internal.getCurrentPageInfo();return e?e.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},t}(),J2=function(t,e){return J2=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},J2(t,e)};function QE(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");J2(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var XE=function(t){QE(e,t);function e(n){var r=t.call(this)||this;return r._element=n,r}return e}(Array);function OB(t){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/t,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function MB(t){var e={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return e[t]}function Mm(t,e,n){n.applyStyles(e,!0);var r=Array.isArray(t)?t:[t],i=r.map(function(s){return n.getTextWidth(s)}).reduce(function(s,o){return Math.max(s,o)},0);return i}function JE(t,e,n,r){var i=e.settings.tableLineWidth,s=e.settings.tableLineColor;t.applyStyles({lineWidth:i,lineColor:s});var o=ZE(i,!1);o&&t.rect(n.x,n.y,e.getWidth(t.pageSize().width),r.y-n.y,o)}function ZE(t,e){var n=t>0,r=e||e===0;return n&&r?"DF":n?"S":r?"F":null}function Rg(t,e){var n,r,i,s;if(t=t||e,Array.isArray(t)){if(t.length>=4)return{top:t[0],right:t[1],bottom:t[2],left:t[3]};if(t.length===3)return{top:t[0],right:t[1],bottom:t[2],left:t[1]};if(t.length===2)return{top:t[0],right:t[1],bottom:t[0],left:t[1]};t.length===1?t=t[0]:t=e}return typeof t=="object"?(typeof t.vertical=="number"&&(t.top=t.vertical,t.bottom=t.vertical),typeof t.horizontal=="number"&&(t.right=t.horizontal,t.left=t.horizontal),{left:(n=t.left)!==null&&n!==void 0?n:e,top:(r=t.top)!==null&&r!==void 0?r:e,right:(i=t.right)!==null&&i!==void 0?i:e,bottom:(s=t.bottom)!==null&&s!==void 0?s:e}):(typeof t!="number"&&(t=e),{top:t,right:t,bottom:t,left:t})}function eT(t,e){var n=Rg(e.settings.margin,0);return t.pageSize().width-(n.left+n.right)}function FB(t,e,n,r,i){var s={},o=1.3333333333333333,a=h1(e,function(R){return i.getComputedStyle(R).backgroundColor});a!=null&&(s.fillColor=a);var l=h1(e,function(R){return i.getComputedStyle(R).color});l!=null&&(s.textColor=l);var c=VB(r,n);c&&(s.cellPadding=c);var h="borderTopColor",g=o*n,y=r.borderTopWidth;if(r.borderBottomWidth===y&&r.borderRightWidth===y&&r.borderLeftWidth===y){var p=(parseFloat(y)||0)/g;p&&(s.lineWidth=p)}else s.lineWidth={top:(parseFloat(r.borderTopWidth)||0)/g,right:(parseFloat(r.borderRightWidth)||0)/g,bottom:(parseFloat(r.borderBottomWidth)||0)/g,left:(parseFloat(r.borderLeftWidth)||0)/g},s.lineWidth.top||(s.lineWidth.right?h="borderRightColor":s.lineWidth.bottom?h="borderBottomColor":s.lineWidth.left&&(h="borderLeftColor"));var _=h1(e,function(R){return i.getComputedStyle(R)[h]});_!=null&&(s.lineColor=_);var N=["left","right","center","justify"];N.indexOf(r.textAlign)!==-1&&(s.halign=r.textAlign),N=["middle","bottom","top"],N.indexOf(r.verticalAlign)!==-1&&(s.valign=r.verticalAlign);var C=parseInt(r.fontSize||"");isNaN(C)||(s.fontSize=C/o);var x=UB(r);x&&(s.fontStyle=x);var k=(r.fontFamily||"").toLowerCase();return t.indexOf(k)!==-1&&(s.font=k),s}function UB(t){var e="";return(t.fontWeight==="bold"||t.fontWeight==="bolder"||parseInt(t.fontWeight)>=700)&&(e="bold"),(t.fontStyle==="italic"||t.fontStyle==="oblique")&&(e+="italic"),e}function h1(t,e){var n=tT(t,e);if(!n)return null;var r=n.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!r||!Array.isArray(r))return null;var i=[parseInt(r[1]),parseInt(r[2]),parseInt(r[3])],s=parseInt(r[4]);return s===0||isNaN(i[0])||isNaN(i[1])||isNaN(i[2])?null:i}function tT(t,e){var n=e(t);return n==="rgba(0, 0, 0, 0)"||n==="transparent"||n==="initial"||n==="inherit"?t.parentElement==null?null:tT(t.parentElement,e):n}function VB(t,e){var n=[t.paddingTop,t.paddingRight,t.paddingBottom,t.paddingLeft],r=96/(72/e),i=(parseInt(t.lineHeight)-parseInt(t.fontSize))/e/2,s=n.map(function(a){return parseInt(a||"0")/r}),o=Rg(s,0);return i>o.top&&(o.top=i),i>o.bottom&&(o.bottom=i),o}function nT(t,e,n,r,i){var s,o;r===void 0&&(r=!1),i===void 0&&(i=!1);var a;typeof e=="string"?a=n.document.querySelector(e):a=e;var l=Object.keys(t.getFontList()),c=t.scaleFactor(),h=[],g=[],y=[];if(!a)return console.error("Html table could not be found with input: ",e),{head:h,body:g,foot:y};for(var p=0;p<a.rows.length;p++){var _=a.rows[p],N=(o=(s=_==null?void 0:_.parentElement)===null||s===void 0?void 0:s.tagName)===null||o===void 0?void 0:o.toLowerCase(),C=BB(l,c,n,_,r,i);C&&(N==="thead"?h.push(C):N==="tfoot"?y.push(C):g.push(C))}return{head:h,body:g,foot:y}}function BB(t,e,n,r,i,s){for(var o=new XE(r),a=0;a<r.cells.length;a++){var l=r.cells[a],c=n.getComputedStyle(l);if(i||c.display!=="none"){var h=void 0;s&&(h=FB(t,l,e,c,n)),o.push({rowSpan:l.rowSpan,colSpan:l.colSpan,styles:h,_element:l,content:zB(l)})}}var g=n.getComputedStyle(r);if(o.length>0&&(i||g.display!=="none"))return o}function zB(t){var e=t.cloneNode(!0);return e.innerHTML=e.innerHTML.replace(/\n/g,"").replace(/ +/g," "),e.innerHTML=e.innerHTML.split(/<br.*?>/).map(function(n){return n.trim()}).join(`
`),e.innerText||e.textContent||""}function qB(t,e,n){for(var r=0,i=[t,e,n];r<i.length;r++){var s=i[r];s&&typeof s!="object"&&console.error("The options parameter should be of type object, is: "+typeof s),s.startY&&typeof s.startY!="number"&&(console.error("Invalid value for startY option",s.startY),delete s.startY)}}function ra(t,e,n,r,i){if(t==null)throw new TypeError("Cannot convert undefined or null to object");for(var s=Object(t),o=1;o<arguments.length;o++){var a=arguments[o];if(a!=null)for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(s[l]=a[l])}return s}function rT(t,e){var n=new Pu(t),r=n.getDocumentOptions(),i=n.getGlobalOptions();qB(i,r,e);var s=ra({},i,r,e),o;typeof window<"u"&&(o=window);var a=HB(i,r,e),l=$B(i,r,e),c=WB(n,s),h=KB(n,s,o);return{id:e.tableId,content:h,hooks:l,styles:a,settings:c}}function HB(t,e,n){for(var r={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},i=function(l){if(l==="columnStyles"){var c=t[l],h=e[l],g=n[l];r.columnStyles=ra({},c,h,g)}else{var y=[t,e,n],p=y.map(function(_){return _[l]||{}});r[l]=ra({},p[0],p[1],p[2])}},s=0,o=Object.keys(r);s<o.length;s++){var a=o[s];i(a)}return r}function $B(t,e,n){for(var r=[t,e,n],i={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},s=0,o=r;s<o.length;s++){var a=o[s];a.didParseCell&&i.didParseCell.push(a.didParseCell),a.willDrawCell&&i.willDrawCell.push(a.willDrawCell),a.didDrawCell&&i.didDrawCell.push(a.didDrawCell),a.willDrawPage&&i.willDrawPage.push(a.willDrawPage),a.didDrawPage&&i.didDrawPage.push(a.didDrawPage)}return i}function WB(t,e){var n,r,i,s,o,a,l,c,h,g,y,p,_=Rg(e.margin,40/t.scaleFactor()),N=(n=GB(t,e.startY))!==null&&n!==void 0?n:_.top,C;e.showFoot===!0?C="everyPage":e.showFoot===!1?C="never":C=(r=e.showFoot)!==null&&r!==void 0?r:"everyPage";var x;e.showHead===!0?x="everyPage":e.showHead===!1?x="never":x=(i=e.showHead)!==null&&i!==void 0?i:"everyPage";var k=(s=e.useCss)!==null&&s!==void 0?s:!1,R=e.theme||(k?"plain":"striped"),j=!!e.horizontalPageBreak,q=(o=e.horizontalPageBreakRepeat)!==null&&o!==void 0?o:null;return{includeHiddenHtml:(a=e.includeHiddenHtml)!==null&&a!==void 0?a:!1,useCss:k,theme:R,startY:N,margin:_,pageBreak:(l=e.pageBreak)!==null&&l!==void 0?l:"auto",rowPageBreak:(c=e.rowPageBreak)!==null&&c!==void 0?c:"auto",tableWidth:(h=e.tableWidth)!==null&&h!==void 0?h:"auto",showHead:x,showFoot:C,tableLineWidth:(g=e.tableLineWidth)!==null&&g!==void 0?g:0,tableLineColor:(y=e.tableLineColor)!==null&&y!==void 0?y:200,horizontalPageBreak:j,horizontalPageBreakRepeat:q,horizontalPageBreakBehaviour:(p=e.horizontalPageBreakBehaviour)!==null&&p!==void 0?p:"afterAllRows"}}function GB(t,e){var n=t.getLastAutoTable(),r=t.scaleFactor(),i=t.pageNumber(),s=!1;if(n&&n.startPageNumber){var o=n.startPageNumber+n.pageNumber-1;s=o===i}return typeof e=="number"?e:(e==null||e===!1)&&s&&(n==null?void 0:n.finalY)!=null?n.finalY+20/r:null}function KB(t,e,n){var r=e.head||[],i=e.body||[],s=e.foot||[];if(e.html){var o=e.includeHiddenHtml;if(n){var a=nT(t,e.html,n,o,e.useCss)||{};r=a.head||r,i=a.body||r,s=a.foot||r}else console.error("Cannot parse html in non browser environment")}var l=e.columns||YB(r,i,s);return{columns:l,head:r,body:i,foot:s}}function YB(t,e,n){var r=t[0]||e[0]||n[0]||[],i=[];return Object.keys(r).filter(function(s){return s!=="_element"}).forEach(function(s){var o=1,a;Array.isArray(r)?a=r[parseInt(s)]:a=r[s],typeof a=="object"&&!Array.isArray(a)&&(o=(a==null?void 0:a.colSpan)||1);for(var l=0;l<o;l++){var c=void 0;Array.isArray(r)?c=i.length:c=s+(l>0?"_".concat(l):"");var h={dataKey:c};i.push(h)}}),i}var Z2=function(){function t(e,n,r){this.table=n,this.pageNumber=n.pageNumber,this.settings=n.settings,this.cursor=r,this.doc=e.getDocument()}return t}(),QB=function(t){QE(e,t);function e(n,r,i,s,o,a){var l=t.call(this,n,r,a)||this;return l.cell=i,l.row=s,l.column=o,l.section=s.section,l}return e}(Z2),XB=function(){function t(e,n){this.pageNumber=1,this.id=e.id,this.settings=e.settings,this.styles=e.styles,this.hooks=e.hooks,this.columns=n.columns,this.head=n.head,this.body=n.body,this.foot=n.foot}return t.prototype.getHeadHeight=function(e){return this.head.reduce(function(n,r){return n+r.getMaxCellHeight(e)},0)},t.prototype.getFootHeight=function(e){return this.foot.reduce(function(n,r){return n+r.getMaxCellHeight(e)},0)},t.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},t.prototype.callCellHooks=function(e,n,r,i,s,o){for(var a=0,l=n;a<l.length;a++){var c=l[a],h=new QB(e,this,r,i,s,o),g=c(h)===!1;if(r.text=Array.isArray(r.text)?r.text:[r.text],g)return!1}return!0},t.prototype.callEndPageHooks=function(e,n){e.applyStyles(e.userStyles);for(var r=0,i=this.hooks.didDrawPage;r<i.length;r++){var s=i[r];s(new Z2(e,this,n))}},t.prototype.callWillDrawPageHooks=function(e,n){for(var r=0,i=this.hooks.willDrawPage;r<i.length;r++){var s=i[r];s(new Z2(e,this,n))}},t.prototype.getWidth=function(e){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var n=this.columns.reduce(function(i,s){return i+s.wrappedWidth},0);return n}else{var r=this.settings.margin;return e-r.left-r.right}},t}(),iT=function(){function t(e,n,r,i,s){s===void 0&&(s=!1),this.height=0,this.raw=e,e instanceof XE&&(this.raw=e._element,this.element=e._element),this.index=n,this.section=r,this.cells=i,this.spansMultiplePages=s}return t.prototype.getMaxCellHeight=function(e){var n=this;return e.reduce(function(r,i){var s;return Math.max(r,((s=n.cells[i.index])===null||s===void 0?void 0:s.height)||0)},0)},t.prototype.hasRowSpan=function(e){var n=this;return e.filter(function(r){var i=n.cells[r.index];return i?i.rowSpan>1:!1}).length>0},t.prototype.canEntireRowFit=function(e,n){return this.getMaxCellHeight(n)<=e},t.prototype.getMinimumRowHeight=function(e,n){var r=this;return e.reduce(function(i,s){var o=r.cells[s.index];if(!o)return 0;var a=n.getLineHeight(o.styles.fontSize),l=o.padding("vertical"),c=l+a;return c>i?c:i},0)},t}(),sT=function(){function t(e,n,r){var i;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=n,this.section=r,this.raw=e;var s=e;e!=null&&typeof e=="object"&&!Array.isArray(e)?(this.rowSpan=e.rowSpan||1,this.colSpan=e.colSpan||1,s=(i=e.content)!==null&&i!==void 0?i:e,e._element&&(this.raw=e._element)):(this.rowSpan=1,this.colSpan=1);var o=s!=null?""+s:"",a=/\r\n|\r|\n/g;this.text=o.split(a)}return t.prototype.getTextPos=function(){var e;if(this.styles.valign==="top")e=this.y+this.padding("top");else if(this.styles.valign==="bottom")e=this.y+this.height-this.padding("bottom");else{var n=this.height-this.padding("vertical");e=this.y+n/2+this.padding("top")}var r;if(this.styles.halign==="right")r=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var i=this.width-this.padding("horizontal");r=this.x+i/2+this.padding("left")}else r=this.x+this.padding("left");return{x:r,y:e}},t.prototype.getContentHeight=function(e,n){n===void 0&&(n=1.15);var r=Array.isArray(this.text)?this.text.length:1,i=this.styles.fontSize/e*n,s=r*i+this.padding("vertical");return Math.max(s,this.styles.minCellHeight)},t.prototype.padding=function(e){var n=Rg(this.styles.cellPadding,0);return e==="vertical"?n.top+n.bottom:e==="horizontal"?n.left+n.right:n[e]},t}(),JB=function(){function t(e,n,r){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=e,this.raw=n,this.index=r}return t.prototype.getMaxCustomCellWidth=function(e){for(var n=0,r=0,i=e.allRows();r<i.length;r++){var s=i[r],o=s.cells[this.index];o&&typeof o.styles.cellWidth=="number"&&(n=Math.max(n,o.styles.cellWidth))}return n},t}();function ZB(t,e){ez(t,e);var n=[],r=0;e.columns.forEach(function(s){var o=s.getMaxCustomCellWidth(e);o?s.width=o:(s.width=s.wrappedWidth,n.push(s)),r+=s.width});var i=e.getWidth(t.pageSize().width)-r;i&&(i=ey(n,i,function(s){return Math.max(s.minReadableWidth,s.minWidth)})),i&&(i=ey(n,i,function(s){return s.minWidth})),i=Math.abs(i),!e.settings.horizontalPageBreak&&i>.1/t.scaleFactor()&&(i=i<1?i:Math.round(i),console.warn("Of the table content, ".concat(i," units width could not fit page"))),nz(e),rz(e,t),tz(e)}function ez(t,e){var n=t.scaleFactor(),r=e.settings.horizontalPageBreak,i=eT(t,e);e.allRows().forEach(function(s){for(var o=0,a=e.columns;o<a.length;o++){var l=a[o],c=s.cells[l.index];if(c){var h=e.hooks.didParseCell;e.callCellHooks(t,h,c,s,l,null);var g=c.padding("horizontal");c.contentWidth=Mm(c.text,c.styles,t)+g;var y=Mm(c.text.join(" ").split(/[^\S\u00A0]+/),c.styles,t);if(c.minReadableWidth=y+c.padding("horizontal"),typeof c.styles.cellWidth=="number")c.minWidth=c.styles.cellWidth,c.wrappedWidth=c.styles.cellWidth;else if(c.styles.cellWidth==="wrap"||r===!0)c.contentWidth>i?(c.minWidth=i,c.wrappedWidth=i):(c.minWidth=c.contentWidth,c.wrappedWidth=c.contentWidth);else{var p=10/n;c.minWidth=c.styles.minCellWidth||p,c.wrappedWidth=c.contentWidth,c.minWidth>c.wrappedWidth&&(c.wrappedWidth=c.minWidth)}}}}),e.allRows().forEach(function(s){for(var o=0,a=e.columns;o<a.length;o++){var l=a[o],c=s.cells[l.index];if(c&&c.colSpan===1)l.wrappedWidth=Math.max(l.wrappedWidth,c.wrappedWidth),l.minWidth=Math.max(l.minWidth,c.minWidth),l.minReadableWidth=Math.max(l.minReadableWidth,c.minReadableWidth);else{var h=e.styles.columnStyles[l.dataKey]||e.styles.columnStyles[l.index]||{},g=h.cellWidth||h.minCellWidth;g&&typeof g=="number"&&(l.minWidth=g,l.wrappedWidth=g)}c&&(c.colSpan>1&&!l.minWidth&&(l.minWidth=c.minWidth),c.colSpan>1&&!l.wrappedWidth&&(l.wrappedWidth=c.minWidth))}})}function ey(t,e,n){for(var r=e,i=t.reduce(function(p,_){return p+_.wrappedWidth},0),s=0;s<t.length;s++){var o=t[s],a=o.wrappedWidth/i,l=r*a,c=o.width+l,h=n(o),g=c<h?h:c;e-=g-o.width,o.width=g}if(e=Math.round(e*1e10)/1e10,e){var y=t.filter(function(p){return e<0?p.width>n(p):!0});y.length&&(e=ey(y,e,n))}return e}function tz(t){for(var e={},n=1,r=t.allRows(),i=0;i<r.length;i++)for(var s=r[i],o=0,a=t.columns;o<a.length;o++){var l=a[o],c=e[l.index];if(n>1)n--,delete s.cells[l.index];else if(c)c.cell.height+=s.height,n=c.cell.colSpan,delete s.cells[l.index],c.left--,c.left<=1&&delete e[l.index];else{var h=s.cells[l.index];if(!h)continue;if(h.height=s.height,h.rowSpan>1){var g=r.length-i,y=h.rowSpan>g?g:h.rowSpan;e[l.index]={cell:h,left:y,row:s}}}}}function nz(t){for(var e=t.allRows(),n=0;n<e.length;n++)for(var r=e[n],i=null,s=0,o=0,a=0;a<t.columns.length;a++){var l=t.columns[a];if(o-=1,o>1&&t.columns[a+1])s+=l.width,delete r.cells[l.index];else if(i){var c=i;delete r.cells[l.index],i=null,c.width=l.width+s}else{var c=r.cells[l.index];if(!c)continue;if(o=c.colSpan,s=0,c.colSpan>1){i=c,s+=l.width;continue}c.width=l.width+s}}}function rz(t,e){for(var n={count:0,height:0},r=0,i=t.allRows();r<i.length;r++){for(var s=i[r],o=0,a=t.columns;o<a.length;o++){var l=a[o],c=s.cells[l.index];if(c){e.applyStyles(c.styles,!0);var h=c.width-c.padding("horizontal");if(c.styles.overflow==="linebreak")c.text=e.splitTextToSize(c.text,h+1/e.scaleFactor(),{fontSize:c.styles.fontSize});else if(c.styles.overflow==="ellipsize")c.text=f4(c.text,h,c.styles,e,"...");else if(c.styles.overflow==="hidden")c.text=f4(c.text,h,c.styles,e,"");else if(typeof c.styles.overflow=="function"){var g=c.styles.overflow(c.text,h);typeof g=="string"?c.text=[g]:c.text=g}c.contentHeight=c.getContentHeight(e.scaleFactor(),e.getLineHeightFactor());var y=c.contentHeight/c.rowSpan;c.rowSpan>1&&n.count*n.height<y*c.rowSpan?n={height:y,count:c.rowSpan}:n&&n.count>0&&n.height>y&&(y=n.height),y>s.height&&(s.height=y)}}n.count--}}function f4(t,e,n,r,i){return t.map(function(s){return iz(s,e,n,r,i)})}function iz(t,e,n,r,i){var s=1e4*r.scaleFactor();if(e=Math.ceil(e*s)/s,e>=Mm(t,n,r))return t;for(;e<Mm(t+i,n,r)&&!(t.length<=1);)t=t.substring(0,t.length-1);return t.trim()+i}function oT(t,e){var n=new Pu(t),r=sz(e,n.scaleFactor()),i=new XB(e,r);return ZB(n,i),n.applyStyles(n.userStyles),i}function sz(t,e){var n=t.content,r=az(n.columns);if(n.head.length===0){var i=p4(r,"head");i&&n.head.push(i)}if(n.foot.length===0){var i=p4(r,"foot");i&&n.foot.push(i)}var s=t.settings.theme,o=t.styles;return{columns:r,head:d1("head",n.head,r,o,s,e),body:d1("body",n.body,r,o,s,e),foot:d1("foot",n.foot,r,o,s,e)}}function d1(t,e,n,r,i,s){var o={},a=e.map(function(l,c){for(var h=0,g={},y=0,p=0,_=0,N=n;_<N.length;_++){var C=N[_];if(o[C.index]==null||o[C.index].left===0)if(p===0){var x=void 0;Array.isArray(l)?x=l[C.index-y-h]:x=l[C.dataKey];var k={};typeof x=="object"&&!Array.isArray(x)&&(k=(x==null?void 0:x.styles)||{});var R=lz(t,C,c,i,r,s,k),j=new sT(x,R,t);g[C.dataKey]=j,g[C.index]=j,p=j.colSpan-1,o[C.index]={left:j.rowSpan-1,times:p}}else p--,y++;else o[C.index].left--,p=o[C.index].times,h++}return new iT(l,c,t,g)});return a}function p4(t,e){var n={};return t.forEach(function(r){if(r.raw!=null){var i=oz(e,r.raw);i!=null&&(n[r.dataKey]=i)}}),Object.keys(n).length>0?n:null}function oz(t,e){if(t==="head"){if(typeof e=="object")return e.header||null;if(typeof e=="string"||typeof e=="number")return e}else if(t==="foot"&&typeof e=="object")return e.footer;return null}function az(t){return t.map(function(e,n){var r,i;return typeof e=="object"?i=(r=e.dataKey)!==null&&r!==void 0?r:n:i=n,new JB(i,e,n)})}function lz(t,e,n,r,i,s,o){var a=MB(r),l;t==="head"?l=i.headStyles:t==="body"?l=i.bodyStyles:t==="foot"&&(l=i.footStyles);var c=ra({},a.table,a[t],i.styles,l),h=i.columnStyles[e.dataKey]||i.columnStyles[e.index]||{},g=t==="body"?h:{},y=t==="body"&&n%2===0?ra({},a.alternateRow,i.alternateRowStyles):{},p=OB(s),_=ra({},p,c,y,g);return ra(_,o)}function cz(t,e,n){var r;n===void 0&&(n={});var i=eT(t,e),s=new Map,o=[],a=[],l=[];Array.isArray(e.settings.horizontalPageBreakRepeat)?l=e.settings.horizontalPageBreakRepeat:(typeof e.settings.horizontalPageBreakRepeat=="string"||typeof e.settings.horizontalPageBreakRepeat=="number")&&(l=[e.settings.horizontalPageBreakRepeat]),l.forEach(function(y){var p=e.columns.find(function(_){return _.dataKey===y||_.index===y});p&&!s.has(p.index)&&(s.set(p.index,!0),o.push(p.index),a.push(e.columns[p.index]),i-=p.wrappedWidth)});for(var c=!0,h=(r=n==null?void 0:n.start)!==null&&r!==void 0?r:0;h<e.columns.length;){if(s.has(h)){h++;continue}var g=e.columns[h].wrappedWidth;if(c||i>=g)c=!1,o.push(h),a.push(e.columns[h]),i-=g;else break;h++}return{colIndexes:o,columns:a,lastIndex:h-1}}function uz(t,e){for(var n=[],r=0;r<e.columns.length;r++){var i=cz(t,e,{start:r});i.columns.length&&(n.push(i),r=i.lastIndex)}return n}function aT(t,e){var n=e.settings,r=n.startY,i=n.margin,s={x:i.left,y:r},o=e.getHeadHeight(e.columns)+e.getFootHeight(e.columns),a=r+i.bottom+o;if(n.pageBreak==="avoid"){var l=e.body,c=l.reduce(function(y,p){return y+p.height},0);a+=c}var h=new Pu(t);(n.pageBreak==="always"||n.startY!=null&&a>h.pageSize().height)&&(cT(h),s.y=i.top),e.callWillDrawPageHooks(h,s);var g=ra({},s);e.startPageNumber=h.pageNumber(),n.horizontalPageBreak?hz(h,e,g,s):(h.applyStyles(h.userStyles),(n.showHead==="firstPage"||n.showHead==="everyPage")&&e.head.forEach(function(y){return ya(h,e,y,s,e.columns)}),h.applyStyles(h.userStyles),e.body.forEach(function(y,p){var _=p===e.body.length-1;Fm(h,e,y,_,g,s,e.columns)}),h.applyStyles(h.userStyles),(n.showFoot==="lastPage"||n.showFoot==="everyPage")&&e.foot.forEach(function(y){return ya(h,e,y,s,e.columns)})),JE(h,e,g,s),e.callEndPageHooks(h,s),e.finalY=s.y,t.lastAutoTable=e,h.applyStyles(h.userStyles)}function hz(t,e,n,r){var i=uz(t,e),s=e.settings;if(s.horizontalPageBreakBehaviour==="afterAllRows")i.forEach(function(c,h){t.applyStyles(t.userStyles),h>0?dd(t,e,n,r,c.columns,!0):m4(t,e,r,c.columns),dz(t,e,n,r,c.columns),f1(t,e,r,c.columns)});else for(var o=-1,a=i[0],l=function(){var c=o;if(a){t.applyStyles(t.userStyles);var h=a.columns;o>=0?dd(t,e,n,r,h,!0):m4(t,e,r,h),c=g4(t,e,o+1,r,h),f1(t,e,r,h)}var g=c-o;i.slice(1).forEach(function(y){t.applyStyles(t.userStyles),dd(t,e,n,r,y.columns,!0),g4(t,e,o+1,r,y.columns,g),f1(t,e,r,y.columns)}),o=c};o<e.body.length-1;)l()}function m4(t,e,n,r){var i=e.settings;t.applyStyles(t.userStyles),(i.showHead==="firstPage"||i.showHead==="everyPage")&&e.head.forEach(function(s){return ya(t,e,s,n,r)})}function dz(t,e,n,r,i){t.applyStyles(t.userStyles),e.body.forEach(function(s,o){var a=o===e.body.length-1;Fm(t,e,s,a,n,r,i)})}function g4(t,e,n,r,i,s){t.applyStyles(t.userStyles),s=s??e.body.length;var o=Math.min(n+s,e.body.length),a=-1;return e.body.slice(n,o).forEach(function(l,c){var h=n+c===e.body.length-1,g=lT(t,e,h,r);l.canEntireRowFit(g,i)&&(ya(t,e,l,r,i),a=n+c)}),a}function f1(t,e,n,r){var i=e.settings;t.applyStyles(t.userStyles),(i.showFoot==="lastPage"||i.showFoot==="everyPage")&&e.foot.forEach(function(s){return ya(t,e,s,n,r)})}function fz(t,e,n){var r=n.getLineHeight(t.styles.fontSize),i=t.padding("vertical"),s=Math.floor((e-i)/r);return Math.max(0,s)}function pz(t,e,n,r){var i={};t.spansMultiplePages=!0,t.height=0;for(var s=0,o=0,a=n.columns;o<a.length;o++){var l=a[o],c=t.cells[l.index];if(c){Array.isArray(c.text)||(c.text=[c.text]);var h=new sT(c.raw,c.styles,c.section);h=ra(h,c),h.text=[];var g=fz(c,e,r);c.text.length>g&&(h.text=c.text.splice(g,c.text.length));var y=r.scaleFactor(),p=r.getLineHeightFactor();c.contentHeight=c.getContentHeight(y,p),c.contentHeight>=e&&(c.contentHeight=e,h.styles.minCellHeight-=e),c.contentHeight>t.height&&(t.height=c.contentHeight),h.contentHeight=h.getContentHeight(y,p),h.contentHeight>s&&(s=h.contentHeight),i[l.index]=h}}var _=new iT(t.raw,-1,t.section,i,!0);_.height=s;for(var N=0,C=n.columns;N<C.length;N++){var l=C[N],h=_.cells[l.index];h&&(h.height=_.height);var c=t.cells[l.index];c&&(c.height=t.height)}return _}function mz(t,e,n,r){var i=t.pageSize().height,s=r.settings.margin,o=s.top+s.bottom,a=i-o;e.section==="body"&&(a-=r.getHeadHeight(r.columns)+r.getFootHeight(r.columns));var l=e.getMinimumRowHeight(r.columns,t),c=l<n;if(l>a)return console.error("Will not be able to print row ".concat(e.index," correctly since it's minimum height is larger than page height")),!0;if(!c)return!1;var h=e.hasRowSpan(r.columns),g=e.getMaxCellHeight(r.columns)>a;return g?(h&&console.error("The content of row ".concat(e.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(h||r.settings.rowPageBreak==="avoid")}function Fm(t,e,n,r,i,s,o){var a=lT(t,e,r,s);if(n.canEntireRowFit(a,o))ya(t,e,n,s,o);else if(mz(t,n,a,e)){var l=pz(n,a,e,t);ya(t,e,n,s,o),dd(t,e,i,s,o),Fm(t,e,l,r,i,s,o)}else dd(t,e,i,s,o),Fm(t,e,n,r,i,s,o)}function ya(t,e,n,r,i){r.x=e.settings.margin.left;for(var s=0,o=i;s<o.length;s++){var a=o[s],l=n.cells[a.index];if(!l){r.x+=a.width;continue}t.applyStyles(l.styles),l.x=r.x,l.y=r.y;var c=e.callCellHooks(t,e.hooks.willDrawCell,l,n,a,r);if(c===!1){r.x+=a.width;continue}gz(t,l,r);var h=l.getTextPos();YE(l.text,h.x,h.y,{halign:l.styles.halign,valign:l.styles.valign,maxWidth:Math.ceil(l.width-l.padding("left")-l.padding("right"))},t.getDocument()),e.callCellHooks(t,e.hooks.didDrawCell,l,n,a,r),r.x+=a.width}r.y+=n.height}function gz(t,e,n){var r=e.styles;if(t.getDocument().setFillColor(t.getDocument().getFillColor()),typeof r.lineWidth=="number"){var i=ZE(r.lineWidth,r.fillColor);i&&t.rect(e.x,n.y,e.width,e.height,i)}else typeof r.lineWidth=="object"&&(r.fillColor&&t.rect(e.x,n.y,e.width,e.height,"F"),yz(t,e,n,r.lineWidth))}function yz(t,e,n,r){var i,s,o,a;r.top&&(i=n.x,s=n.y,o=n.x+e.width,a=n.y,r.right&&(o+=.5*r.right),r.left&&(i-=.5*r.left),l(r.top,i,s,o,a)),r.bottom&&(i=n.x,s=n.y+e.height,o=n.x+e.width,a=n.y+e.height,r.right&&(o+=.5*r.right),r.left&&(i-=.5*r.left),l(r.bottom,i,s,o,a)),r.left&&(i=n.x,s=n.y,o=n.x,a=n.y+e.height,r.top&&(s-=.5*r.top),r.bottom&&(a+=.5*r.bottom),l(r.left,i,s,o,a)),r.right&&(i=n.x+e.width,s=n.y,o=n.x+e.width,a=n.y+e.height,r.top&&(s-=.5*r.top),r.bottom&&(a+=.5*r.bottom),l(r.right,i,s,o,a));function l(c,h,g,y,p){t.getDocument().setLineWidth(c),t.getDocument().line(h,g,y,p,"S")}}function lT(t,e,n,r){var i=e.settings.margin.bottom,s=e.settings.showFoot;return(s==="everyPage"||s==="lastPage"&&n)&&(i+=e.getFootHeight(e.columns)),t.pageSize().height-r.y-i}function dd(t,e,n,r,i,s){i===void 0&&(i=[]),s===void 0&&(s=!1),t.applyStyles(t.userStyles),e.settings.showFoot==="everyPage"&&!s&&e.foot.forEach(function(a){return ya(t,e,a,r,i)}),e.callEndPageHooks(t,r);var o=e.settings.margin;JE(t,e,n,r),cT(t),e.pageNumber++,r.x=o.left,r.y=o.top,n.y=o.top,e.callWillDrawPageHooks(t,r),e.settings.showHead==="everyPage"&&(e.head.forEach(function(a){return ya(t,e,a,r,i)}),t.applyStyles(t.userStyles))}function cT(t){var e=t.pageNumber();t.setPage(e+1);var n=t.pageNumber();return n===e?(t.addPage(),!0):!1}function vz(t){t.API.autoTable=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=e[0],i=rT(this,r),s=oT(this,i);return aT(this,s),this},t.API.lastAutoTable=!1,t.API.autoTableText=function(e,n,r,i){YE(e,n,r,i,this)},t.API.autoTableSetDefaults=function(e){return Pu.setDefaults(e,this),this},t.autoTableSetDefaults=function(e,n){Pu.setDefaults(e,n)},t.API.autoTableHtmlToJson=function(e,n){var r;if(n===void 0&&(n=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var i=new Pu(this),s=nT(i,e,window,n,!1),o=s.head,a=s.body,l=((r=o[0])===null||r===void 0?void 0:r.map(function(c){return c.content}))||[];return{columns:l,rows:a,data:a}}}var p1;function wz(t,e){var n=rT(t,e),r=oT(t,n);aT(t,r)}try{if(typeof window<"u"&&window){var y4=window,v4=y4.jsPDF||((p1=y4.jspdf)===null||p1===void 0?void 0:p1.jsPDF);v4&&vz(v4)}}catch(t){console.error("Could not apply autoTable plugin",t)}const xz=()=>{const[t,e]=se.useState([]),[n,r]=se.useState(null),[i,s]=se.useState(""),[o,a]=se.useState({}),[l,c]=se.useState(new Set);se.useEffect(()=>{(async()=>{try{const Q=await zn(Lt(He,"users")),D={};Q.docs.forEach(S=>{D[S.id]=S.data()}),a(D)}catch(Q){console.error("Failed to load users",Q)}})()},[]),se.useEffect(()=>{(async()=>{try{const D=(await zn(Lt(He,"works"))).docs.map(S=>{const T=S.data();return{id:S.id,title:T.title||"Video",description:T.description||"",workDate:T.date?new Date(T.date):null,postingDate:T.postingDate?T.postingDate.toDate():null,posted:!!T.posted,assignedUserDetails:T.assignedUserDetails||[]}});e(D)}catch(Q){console.error("Failed to load works",Q)}})()},[]);const h=(q,Q)=>{e(D=>D.map(S=>S.id===q?{...S,postingDate:Q?new Date(Q):null}:S))},g=async(q,Q)=>{try{r(q.id);const D=Zt(He,"works",q.id);await Xr(D,{posted:Q}),e(S=>S.map(T=>T.id===q.id?{...T,posted:Q}:T))}catch(D){console.error("Failed to update posted flag",D)}finally{r(null)}},y=async q=>{try{r(q.id);const Q=Zt(He,"works",q.id);await Xr(Q,{postingDate:q.postingDate?_r.fromDate(q.postingDate):null})}catch(Q){console.error("Failed to save posting date",Q)}finally{r(null)}},p=q=>{const Q=q.assignedUserDetails||[];return Q.length?Q.map(D=>{var A;const S=((A=o[D.userId])==null?void 0:A.name)||"Unknown",T=Array.isArray(D.roles)?D.roles:[],F=T.length?T.join(" & "):"";return{name:S,rolesText:F}}):[]},_=q=>{c(Q=>{const D=new Set(Q);return D.has(q)?D.delete(q):D.add(q),D})},N=()=>{c(q=>{const Q=new Set(t.map(S=>S.id)),D=new Set;return q.forEach(S=>{Q.has(S)&&D.add(S)}),D})},x=[...t].sort((q,Q)=>{const D=!!q.postingDate,S=!!Q.postingDate,T=D&&!q.posted,F=S&&!Q.posted;if(T&&!F)return-1;if(!T&&F)return 1;const A=!D,I=!S;return A&&!I?-1:!A&&I?1:D&&S?q.postingDate.getTime()-Q.postingDate.getTime():0}).filter(q=>q.title.toLowerCase().includes(i.toLowerCase())),k=q=>{if(!q)return"Not set";const Q=String(q.getDate()).padStart(2,"0"),S=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][q.getMonth()],T=q.getFullYear();return`${Q} ${S} ${T}`},R=x.filter(q=>l.has(q.id)),j=()=>{const q=R.length?R:x;if(!q.length)return;const Q=new vt;Q.setFontSize(14),Q.text("Video schedule",14,16);const D=q.map(S=>{const T=p(S).map(A=>A.rolesText?`${A.name} [${A.rolesText}]`:A.name),F=T.length?T.join(`
`):"No users found";return[S.title,S.description||"",k(S.postingDate),S.posted?"Posted":"Not posted",F]});wz(Q,{startY:22,head:[["Title","Description","Posting Date","Status","Member(s)"]],body:D,styles:{fontSize:8},headStyles:{fillColor:[33,150,243],halign:"center",valign:"middle"},columnStyles:{0:{cellWidth:50},1:{cellWidth:40},2:{cellWidth:23,halign:"center"},3:{cellWidth:20,halign:"center"},4:{cellWidth:"auto"}}}),Q.save("video-schedule.pdf")};return se.useEffect(()=>{N()},[t]),u.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50",children:[u.jsx(In,{userType:"admin"}),u.jsxs("main",{className:"container mx-auto px-4 py-8 max-w-5xl",children:[u.jsxs("div",{className:"mb-6 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-800",children:"Video schedule"}),u.jsx("p",{className:"text-sm text-gray-600",children:"Manage posting dates for videos / tasks."})]}),u.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:items-center",children:[u.jsx("input",{type:"text",value:i,onChange:q=>s(q.target.value),placeholder:"Search video",className:"w-full sm:w-64 px-3 py-2 rounded-lg border border-gray-300 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"}),u.jsx("button",{onClick:j,disabled:x.length===0,className:"px-4 py-2 text-sm font-semibold rounded-lg bg-purple-600 text-white hover:bg-purple-700 disabled:opacity-60 disabled:cursor-not-allowed",children:R.length?"Download selected as PDF":"Download all as PDF"})]})]}),x.length===0?u.jsx("p",{className:"text-gray-500 text-sm",children:"No works found."}):u.jsx("div",{className:"space-y-4",children:x.map(q=>u.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-4 flex flex-col gap-3",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:[u.jsxs("div",{className:"max-w-xl",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[u.jsx("input",{type:"checkbox",checked:l.has(q.id),onChange:()=>_(q.id),className:"h-4 w-4"}),u.jsx("h2",{className:"text-sm sm:text-base font-semibold text-gray-800",children:q.title})]}),u.jsxs("p",{className:"text-xs text-gray-600",children:["Work date: ",k(q.workDate)]}),q.description&&u.jsxs("div",{className:"mt-1 bg-gray-50 rounded-md px-3 py-2",children:[u.jsx("p",{className:"text-xs font-semibold text-gray-600 mb-0.5",children:"Description"}),u.jsx("p",{className:"text-xs text-gray-700 leading-relaxed line-clamp-3",children:q.description})]}),u.jsxs("div",{className:"mt-1",children:[u.jsx("p",{className:"text-xs font-semibold text-gray-600",children:"Users"}),p(q).length===0?u.jsx("p",{className:"text-xs text-gray-500",children:"No users found"}):u.jsx("ul",{className:"mt-0.5 space-y-0.5",children:p(q).map((Q,D)=>u.jsx("li",{className:"text-xs text-gray-700",children:Q.rolesText?`${Q.name} [${Q.rolesText}]`:Q.name},D))})]})]}),u.jsx("div",{className:"text-xs font-semibold",children:q.postingDate?q.posted?u.jsxs("span",{className:"px-3 py-1 rounded-full bg-green-100 text-green-800",children:["Posted (",k(q.postingDate),")"]}):u.jsxs("span",{className:"px-3 py-1 rounded-full bg-yellow-100 text-yellow-800",children:["Scheduled (",k(q.postingDate),")"]}):u.jsx("span",{className:"px-3 py-1 rounded-full bg-gray-100 text-gray-600",children:"No posting date"})})]}),u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2",children:[u.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[u.jsx("label",{className:"text-xs text-gray-600",children:"Posting date:"}),u.jsx("input",{type:"date",value:q.postingDate?q.postingDate.toISOString().slice(0,10):"",onChange:Q=>h(q.id,Q.target.value),className:"px-3 py-2 rounded-lg border border-gray-300 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"}),u.jsx("button",{onClick:()=>y(q),disabled:n===q.id,className:`px-3 py-2 text-xs font-semibold rounded-lg text-white ${n===q.id?"bg-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700"}`,children:n===q.id?"Saving":"Save date"})]}),u.jsx("div",{className:"flex items-center gap-2",children:u.jsx("button",{onClick:()=>g(q,!q.posted),disabled:!q.postingDate||n===q.id,className:`px-4 py-2 text-xs font-semibold rounded-lg ${q.posted?"bg-red-100 text-red-700 hover:bg-red-200":"bg-green-600 text-white hover:bg-green-700"} ${!q.postingDate||n===q.id?"opacity-60 cursor-not-allowed":""}`,children:q.posted?"Unmark posted":"Mark posted"})})]})]},q.id))})]})]})},bz=()=>{const[t,e]=se.useState([]),[n,r]=se.useState(!0),[i,s]=se.useState("all"),[o,a]=se.useState([]),[l,c]=se.useState(""),[h,g]=se.useState(""),[y,p]=se.useState(!1),[_,N]=se.useState(""),[C,x]=se.useState("");se.useEffect(()=>{(async()=>{try{const Q=(await zn(Lt(He,"users"))).docs.map(D=>({id:D.id,...D.data()}));e(Q)}catch(q){console.error(q),x("Failed to load users.")}finally{r(!1)}})()},[]);const k=j=>{a(q=>q.includes(j)?q.filter(Q=>Q!==j):[...q,j])},R=async j=>{if(j.preventDefault(),x(""),N(""),!l.trim()||!h.trim()){x("Title and message are required.");return}if(i==="selected"&&o.length===0){x("Select at least one user.");return}p(!0);try{if(i==="all")await fi(Lt(He,"notifications"),{title:l.trim(),body:h.trim(),target:"all",createdAt:xo()});else{const q=aA(He);o.forEach(Q=>{const D=Zt(Lt(He,"users",Q,"notifications"));q.set(D,{title:l.trim(),body:h.trim(),target:"user",userId:Q,createdAt:xo()})}),await q.commit()}N("Notification(s) sent successfully."),c(""),g(""),a([]),s("all")}catch(q){console.error(q),x("Failed to send notification.")}finally{p(!1)}};return u.jsxs("div",{className:"min-h-screen bg-gray-100",children:[u.jsx(In,{userType:"admin"}),u.jsxs("main",{className:"container mx-auto px-4 py-6 sm:py-8 max-w-3xl",children:[u.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-800 mb-4",children:"Send notifications"}),u.jsxs("form",{onSubmit:R,className:"bg-white rounded-lg shadow-md p-4 sm:p-6 space-y-4",children:[C&&u.jsx("div",{className:"p-2 rounded bg-red-100 text-red-700 text-sm",children:C}),_&&u.jsx("div",{className:"p-2 rounded bg-green-100 text-green-700 text-sm",children:_}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Title"}),u.jsx("input",{type:"text",value:l,onChange:j=>c(j.target.value),className:"w-full px-3 py-2 border rounded text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Notification title"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Message"}),u.jsx("textarea",{value:h,onChange:j=>g(j.target.value),rows:4,className:"w-full px-3 py-2 border rounded text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Notification message"})]}),u.jsxs("div",{children:[u.jsx("p",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Send to"}),u.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[u.jsxs("label",{className:"inline-flex items-center gap-2 text-sm",children:[u.jsx("input",{type:"radio",name:"sendMode",value:"all",checked:i==="all",onChange:()=>s("all")}),u.jsx("span",{children:"All users"})]}),u.jsxs("label",{className:"inline-flex items-center gap-2 text-sm",children:[u.jsx("input",{type:"radio",name:"sendMode",value:"selected",checked:i==="selected",onChange:()=>s("selected")}),u.jsx("span",{children:"Selected users"})]})]})]}),i==="selected"&&u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Select users"}),n?u.jsxs("div",{className:"flex items-center gap-2 text-gray-600 text-sm",children:[u.jsx(Ms,{className:"animate-spin"}),u.jsx("span",{children:"Loading users..."})]}):u.jsxs("div",{className:"max-h-60 overflow-y-auto border rounded p-2 space-y-1 bg-gray-50",children:[t.length===0&&u.jsx("p",{className:"text-xs text-gray-600",children:"No users found."}),t.map(j=>u.jsxs("label",{className:"flex items-center gap-2 text-xs sm:text-sm cursor-pointer",children:[u.jsx("input",{type:"checkbox",checked:o.includes(j.id),onChange:()=>k(j.id)}),u.jsxs("span",{children:[j.name||"Unnamed"," (",j.email||"no email",")"]})]},j.id))]})]}),u.jsx("button",{type:"submit",disabled:y,className:"w-full sm:w-auto bg-blue-600 text-white px-4 py-2 rounded text-sm font-semibold hover:bg-blue-700 disabled:opacity-50",children:y?"Sending...":"Send notification"})]})]})]})},_z=()=>{const[t,e]=se.useState(null),[n,r]=se.useState([]),[i,s]=se.useState(!0),o=xi();se.useEffect(()=>{const l=Lc(Ii,c=>{e(c||null)});return()=>l()},[]),se.useEffect(()=>{if(!t)return;const l=vc(Lt(He,"users",t.uid,"notifications"),Wv("createdAt","desc")),c=Im(l,h=>{const g=h.docs.map(y=>({id:y.id,...y.data()}));r(g),s(!1)});return()=>c()},[t]);const a=async l=>{if(t){try{await Xr(Zt(He,"users",t.uid,"notifications",l.id),{read:!0})}catch(c){console.error("Failed to mark notif read",c)}o(`/notifications/${l.id}`)}};return u.jsxs("div",{className:"min-h-screen bg-gray-50",children:[u.jsx(In,{userType:"user"}),u.jsxs("main",{className:"container mx-auto px-4 py-6 sm:py-8 max-w-2xl",children:[u.jsxs("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-800 mb-4 flex items-center gap-2",children:[u.jsx(l5,{className:"text-yellow-500"}),"Notifications"]}),i?u.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[u.jsx(Ms,{className:"animate-spin"}),u.jsx("span",{children:"Loading notifications..."})]}):n.length===0?u.jsx("p",{className:"text-gray-600 text-sm sm:text-base",children:"No notifications yet."}):u.jsx("div",{className:"bg-white rounded-lg shadow-md divide-y",children:n.map(l=>{var g;const c=(g=l.createdAt)!=null&&g.toDate?l.createdAt.toDate().toLocaleString():"",h=l.read===!1;return u.jsxs("button",{onClick:()=>a(l),className:`w-full text-left px-4 py-3 flex flex-col sm:flex-row sm:items-center sm:justify-between hover:bg-gray-50 ${h?"bg-yellow-50":""}`,children:[u.jsxs("div",{children:[u.jsx("p",{className:"font-semibold text-gray-800 text-sm sm:text-base",children:l.title||"Notification"}),l.message&&u.jsx("p",{className:"text-xs sm:text-sm text-gray-600",children:l.message}),c&&u.jsx("p",{className:"text-xs text-gray-400 mt-1",children:c})]}),h&&u.jsx("span",{className:"mt-2 sm:mt-0 inline-flex items-center text-xs font-semibold text-yellow-800 bg-yellow-100 px-2 py-0.5 rounded-full",children:"New"})]},l.id)})})]})]})},Nz=()=>{var a;const{notifId:t}=rg(),[e,n]=se.useState(null),[r,i]=se.useState(null),[s,o]=se.useState(!0);return se.useEffect(()=>{const l=Lc(Ii,c=>{n(c||null)});return()=>l()},[]),se.useEffect(()=>{if(!e||!t)return;(async()=>{try{const c=Zt(He,"users",e.uid,"notifications",t),h=await Xs(c);if(h.exists()){const g=h.data();i({id:h.id,...g}),g.read===!1&&await Xr(c,{read:!0})}}catch(c){console.error("Failed to load notification",c)}finally{o(!1)}})()},[e,t]),u.jsxs("div",{className:"min-h-screen bg-gray-50",children:[u.jsx(In,{userType:"user"}),u.jsx("main",{className:"container mx-auto px-4 py-6 sm:py-8 max-w-xl",children:s?u.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[u.jsx(Ms,{className:"animate-spin"}),u.jsx("span",{children:"Loading notification..."})]}):r?u.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 sm:p-6",children:[u.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-800 mb-2",children:r.title||"Notification"}),((a=r.createdAt)==null?void 0:a.toDate)&&u.jsx("p",{className:"text-xs text-gray-500 mb-4",children:r.createdAt.toDate().toLocaleString()}),r.message&&u.jsx("p",{className:"text-sm sm:text-base text-gray-700 mb-4",children:r.message}),r.type&&u.jsxs("p",{className:"text-xs text-gray-500",children:["Type: ",u.jsx("span",{className:"font-mono",children:r.type})]})]}):u.jsx("p",{className:"text-gray-600 text-sm sm:text-base",children:"Notification not found."})})]})},Sz=()=>{const{notifId:t}=rg(),e=xi(),[n,r]=se.useState(null),[i,s]=se.useState(null),[o,a]=se.useState(null),[l,c]=se.useState(!0),[h,g]=se.useState("");if(se.useEffect(()=>{t&&(async()=>{c(!0),g("");try{const _=Zt(He,"notifications",t),N=await Xs(_);if(!N.exists()){g("Notification not found."),c(!1);return}const C={id:N.id,...N.data()};if(r(C),C.workId){const x=await Xs(Zt(He,"works",C.workId));x.exists()&&s({id:x.id,...x.data()})}if(C.userId){const x=await Xs(Zt(He,"users",C.userId));x.exists()&&a({id:x.id,...x.data()})}}catch(_){console.error("NotificationDetails load error",_),g("Failed to load notification details.")}finally{c(!1)}})()},[t]),l)return u.jsxs("div",{className:"min-h-screen bg-gray-100",children:[u.jsx(In,{userType:"admin"}),u.jsx("main",{className:"container mx-auto px-4 py-6 max-w-3xl",children:u.jsx("p",{children:"Loading notification..."})})]});if(h)return u.jsxs("div",{className:"min-h-screen bg-gray-100",children:[u.jsx(In,{userType:"admin"}),u.jsxs("main",{className:"container mx-auto px-4 py-6 max-w-3xl",children:[u.jsx("p",{className:"text-red-600 mb-4",children:h}),u.jsx("button",{onClick:()=>e(-1),className:"px-3 py-1 rounded bg-blue-600 text-white text-sm hover:bg-blue-700",children:"Back"})]})]});if(!n)return u.jsxs("div",{className:"min-h-screen bg-gray-100",children:[u.jsx(In,{userType:"admin"}),u.jsx("main",{className:"container mx-auto px-4 py-6 max-w-3xl",children:u.jsx("p",{children:"No data."})})]});const y=(()=>{switch(n.type){case"accept":return"Work accepted";case"reject":return"Work rejected";case"done":return"Work marked done";case"undo-done":return"Work status changed";default:return"Notification"}})();return u.jsxs("div",{className:"min-h-screen bg-gray-100",children:[u.jsx(In,{userType:"admin"}),u.jsxs("main",{className:"container mx-auto px-4 py-6 max-w-3xl",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-800",children:"Notification details"}),u.jsx("button",{onClick:()=>e(-1),className:"px-3 py-1 rounded bg-gray-200 text-gray-800 text-sm hover:bg-gray-300",children:"Back"})]}),u.jsxs("section",{className:"mb-4 bg-white rounded-lg shadow p-4",children:[u.jsx("p",{className:"text-sm font-semibold text-gray-800 mb-1",children:y}),u.jsxs("p",{className:"text-xs text-gray-600 mb-1",children:["ID: ",n.id]}),n.createdAt&&u.jsxs("p",{className:"text-xs text-gray-600 flex items-center gap-1",children:[u.jsx(fr,{className:"text-gray-500"}),n.createdAt.toDate?n.createdAt.toDate().toLocaleString():""]})]}),u.jsxs("section",{className:"mb-4 bg-white rounded-lg shadow p-4",children:[u.jsx("h2",{className:"text-sm font-semibold text-gray-800 mb-2",children:"User"}),o?u.jsxs(u.Fragment,{children:[u.jsx("p",{className:"text-sm text-gray-800",children:o.name||"No name"}),o.email&&u.jsx("p",{className:"text-xs text-gray-600",children:o.email}),o.cardNumber&&u.jsxs("p",{className:"text-xs text-gray-600",children:["Card: ",o.cardNumber]})]}):u.jsx("p",{className:"text-xs text-gray-500",children:n.userName||"Unknown user"})]}),u.jsxs("section",{className:"mb-4 bg-white rounded-lg shadow p-4",children:[u.jsx("h2",{className:"text-sm font-semibold text-gray-800 mb-2",children:"Work"}),i?u.jsxs(u.Fragment,{children:[u.jsx("p",{className:"text-sm font-semibold text-gray-800",children:i.title||"No title"}),i.date&&u.jsxs("p",{className:"text-xs text-gray-600 flex items-center gap-1 mt-1",children:[u.jsx(fr,{className:"text-gray-500"}),new Date(i.date).toLocaleDateString()]}),i.description&&u.jsx("p",{className:"text-xs text-gray-600 mt-1",children:i.description})]}):u.jsxs("p",{className:"text-xs text-gray-500",children:["Work not found (id: ",n.workId||"",")."]})]}),n.message&&u.jsxs("section",{className:"mb-4 bg-white rounded-lg shadow p-4",children:[u.jsx("h2",{className:"text-sm font-semibold text-gray-800 mb-2",children:"Message"}),u.jsx("p",{className:"text-sm text-gray-700",children:n.message})]})]})]})},Az=()=>(tF(),u.jsxs(gC,{children:[u.jsx(Yn,{path:"/",element:u.jsx(SF,{})}),u.jsx(Yn,{path:"/login",element:u.jsx(TF,{})}),u.jsx(Yn,{path:"/signup",element:u.jsx(CF,{})}),u.jsx(Yn,{path:"/home",element:u.jsx(NF,{})}),u.jsx(Yn,{path:"/admin-home",element:u.jsx(ss,{children:u.jsx(bF,{})})}),u.jsx(Yn,{path:"/create-user",element:u.jsx(ss,{children:u.jsx(PF,{})})}),u.jsx(Yn,{path:"/assign-work",element:u.jsx(ss,{children:u.jsx(RF,{})})}),u.jsx(Yn,{path:"/work-list",element:u.jsx(ss,{children:u.jsx(jF,{})})}),u.jsx(Yn,{path:"/profile",element:u.jsx(OF,{})}),u.jsx(Yn,{path:"/manage-users",element:u.jsx(ss,{children:u.jsx(MF,{})})}),u.jsx(Yn,{path:"/users/:userId",element:u.jsx(ss,{children:u.jsx(FF,{})})}),u.jsx(Yn,{path:"/tasks/:taskId",element:u.jsx(ss,{children:u.jsx(BF,{})})}),u.jsx(Yn,{path:"/task-history",element:u.jsx(UF,{})}),u.jsx(Yn,{path:"/inventory",element:u.jsx(ss,{children:u.jsx(zF,{})})}),u.jsx(Yn,{path:"/admin-reject-details",element:u.jsx(ss,{children:u.jsx(qF,{})})}),u.jsx(Yn,{path:"/user-reject-details",element:u.jsx(HF,{})}),u.jsx(Yn,{path:"/posting-dates",element:u.jsx(ss,{children:u.jsx(xz,{})})}),u.jsx(Yn,{path:"/notifications",element:u.jsx(ss,{children:u.jsx($F,{})})}),u.jsx(Yn,{path:"/admin/notifications",element:u.jsx(ss,{children:u.jsx(bz,{})})}),u.jsx(Yn,{path:"/admin/notifications/:notifId",element:u.jsx(ss,{children:u.jsx(Sz,{})})}),u.jsx(Yn,{path:"/user/notifications",element:u.jsx(_z,{})}),u.jsx(Yn,{path:"/user/notifications/:notifId",element:u.jsx(Nz,{})})]}));function Ez(){return u.jsx(_F,{children:u.jsx(NC,{children:u.jsx(Az,{})})})}const Tz="BCDW2bDpR51kOUCYdebGFw4pHEU_h2159MHvkSEslEdrV0yI0AVUiQikAbClmXfS9EGHHQblUlKTC_To4SaQ7Hg";function kz(){return se.useEffect(()=>{(async()=>{if(!("serviceWorker"in navigator)||!("Notification"in window))return;const e=await navigator.serviceWorker.register("/firebase-messaging-sw.js");if(await Notification.requestPermission()!=="granted")return;const r=await QA(M2,{vapidKey:Tz,serviceWorkerRegistration:e}),i=Ii.currentUser;i&&r&&await Xr(Zt(He,"users",i.uid),{fcmToken:r})})().catch(console.error)},[]),u.jsx(Ez,{})}P6(document.getElementById("root")).render(u.jsx(se.StrictMode,{children:u.jsx(kz,{})}));export{vn as _,Cz as c,QT as g};
