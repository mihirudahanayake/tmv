var Yk=Object.defineProperty;var Qk=(t,e,n)=>e in t?Yk(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var vn=(t,e,n)=>Qk(t,typeof e!="symbol"?e+"":e,n);function Xk(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var Rz=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Jk(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var N4={exports:{}},Bm={},S4={exports:{}},Wt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qh=Symbol.for("react.element"),Zk=Symbol.for("react.portal"),eT=Symbol.for("react.fragment"),tT=Symbol.for("react.strict_mode"),nT=Symbol.for("react.profiler"),rT=Symbol.for("react.provider"),sT=Symbol.for("react.context"),iT=Symbol.for("react.forward_ref"),aT=Symbol.for("react.suspense"),oT=Symbol.for("react.memo"),lT=Symbol.for("react.lazy"),nx=Symbol.iterator;function cT(t){return t===null||typeof t!="object"?null:(t=nx&&t[nx]||t["@@iterator"],typeof t=="function"?t:null)}var A4={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E4=Object.assign,k4={};function Yu(t,e,n){this.props=t,this.context=e,this.refs=k4,this.updater=n||A4}Yu.prototype.isReactComponent={};Yu.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Yu.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function T4(){}T4.prototype=Yu.prototype;function ny(t,e,n){this.props=t,this.context=e,this.refs=k4,this.updater=n||A4}var ry=ny.prototype=new T4;ry.constructor=ny;E4(ry,Yu.prototype);ry.isPureReactComponent=!0;var rx=Array.isArray,I4=Object.prototype.hasOwnProperty,sy={current:null},C4={key:!0,ref:!0,__self:!0,__source:!0};function P4(t,e,n){var r,s={},i=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(i=""+e.key),e)I4.call(e,r)&&!C4.hasOwnProperty(r)&&(s[r]=e[r]);var o=arguments.length-2;if(o===1)s.children=n;else if(1<o){for(var l=Array(o),c=0;c<o;c++)l[c]=arguments[c+2];s.children=l}if(t&&t.defaultProps)for(r in o=t.defaultProps,o)s[r]===void 0&&(s[r]=o[r]);return{$$typeof:Qh,type:t,key:i,ref:a,props:s,_owner:sy.current}}function uT(t,e){return{$$typeof:Qh,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function iy(t){return typeof t=="object"&&t!==null&&t.$$typeof===Qh}function dT(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var sx=/\/+/g;function Xg(t,e){return typeof t=="object"&&t!==null&&t.key!=null?dT(""+t.key):e.toString(36)}function vp(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case Qh:case Zk:a=!0}}if(a)return a=t,s=s(a),t=r===""?"."+Xg(a,0):r,rx(s)?(n="",t!=null&&(n=t.replace(sx,"$&/")+"/"),vp(s,e,n,"",function(c){return c})):s!=null&&(iy(s)&&(s=uT(s,n+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(sx,"$&/")+"/")+t)),e.push(s)),1;if(a=0,r=r===""?".":r+":",rx(t))for(var o=0;o<t.length;o++){i=t[o];var l=r+Xg(i,o);a+=vp(i,e,n,l,s)}else if(l=cT(t),typeof l=="function")for(t=l.call(t),o=0;!(i=t.next()).done;)i=i.value,l=r+Xg(i,o++),a+=vp(i,e,n,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function Uf(t,e,n){if(t==null)return t;var r=[],s=0;return vp(t,r,"","",function(i){return e.call(n,i,s++)}),r}function hT(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ls={current:null},xp={transition:null},fT={ReactCurrentDispatcher:Ls,ReactCurrentBatchConfig:xp,ReactCurrentOwner:sy};function j4(){throw Error("act(...) is not supported in production builds of React.")}Wt.Children={map:Uf,forEach:function(t,e,n){Uf(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Uf(t,function(){e++}),e},toArray:function(t){return Uf(t,function(e){return e})||[]},only:function(t){if(!iy(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Wt.Component=Yu;Wt.Fragment=eT;Wt.Profiler=nT;Wt.PureComponent=ny;Wt.StrictMode=tT;Wt.Suspense=aT;Wt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=fT;Wt.act=j4;Wt.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=E4({},t.props),s=t.key,i=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,a=sy.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(l in e)I4.call(e,l)&&!C4.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&o!==void 0?o[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){o=Array(l);for(var c=0;c<l;c++)o[c]=arguments[c+2];r.children=o}return{$$typeof:Qh,type:t.type,key:s,ref:i,props:r,_owner:a}};Wt.createContext=function(t){return t={$$typeof:sT,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:rT,_context:t},t.Consumer=t};Wt.createElement=P4;Wt.createFactory=function(t){var e=P4.bind(null,t);return e.type=t,e};Wt.createRef=function(){return{current:null}};Wt.forwardRef=function(t){return{$$typeof:iT,render:t}};Wt.isValidElement=iy;Wt.lazy=function(t){return{$$typeof:lT,_payload:{_status:-1,_result:t},_init:hT}};Wt.memo=function(t,e){return{$$typeof:oT,type:t,compare:e===void 0?null:e}};Wt.startTransition=function(t){var e=xp.transition;xp.transition={};try{t()}finally{xp.transition=e}};Wt.unstable_act=j4;Wt.useCallback=function(t,e){return Ls.current.useCallback(t,e)};Wt.useContext=function(t){return Ls.current.useContext(t)};Wt.useDebugValue=function(){};Wt.useDeferredValue=function(t){return Ls.current.useDeferredValue(t)};Wt.useEffect=function(t,e){return Ls.current.useEffect(t,e)};Wt.useId=function(){return Ls.current.useId()};Wt.useImperativeHandle=function(t,e,n){return Ls.current.useImperativeHandle(t,e,n)};Wt.useInsertionEffect=function(t,e){return Ls.current.useInsertionEffect(t,e)};Wt.useLayoutEffect=function(t,e){return Ls.current.useLayoutEffect(t,e)};Wt.useMemo=function(t,e){return Ls.current.useMemo(t,e)};Wt.useReducer=function(t,e,n){return Ls.current.useReducer(t,e,n)};Wt.useRef=function(t){return Ls.current.useRef(t)};Wt.useState=function(t){return Ls.current.useState(t)};Wt.useSyncExternalStore=function(t,e,n){return Ls.current.useSyncExternalStore(t,e,n)};Wt.useTransition=function(){return Ls.current.useTransition()};Wt.version="18.3.1";S4.exports=Wt;var se=S4.exports;const ol=Jk(se),pT=Xk({__proto__:null,default:ol},[se]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mT=se,gT=Symbol.for("react.element"),yT=Symbol.for("react.fragment"),vT=Object.prototype.hasOwnProperty,xT=mT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,wT={key:!0,ref:!0,__self:!0,__source:!0};function L4(t,e,n){var r,s={},i=null,a=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)vT.call(e,r)&&!wT.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:gT,type:t,key:i,ref:a,props:s,_owner:xT.current}}Bm.Fragment=yT;Bm.jsx=L4;Bm.jsxs=L4;N4.exports=Bm;var u=N4.exports,R4={exports:{}},pi={},D4={exports:{}},O4={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(Q,ce){var me=Q.length;Q.push(ce);e:for(;0<me;){var ye=me-1>>>1,M=Q[ye];if(0<s(M,ce))Q[ye]=ce,Q[me]=M,me=ye;else break e}}function n(Q){return Q.length===0?null:Q[0]}function r(Q){if(Q.length===0)return null;var ce=Q[0],me=Q.pop();if(me!==ce){Q[0]=me;e:for(var ye=0,M=Q.length,W=M>>>1;ye<W;){var X=2*(ye+1)-1,Y=Q[X],ie=X+1,le=Q[ie];if(0>s(Y,me))ie<M&&0>s(le,Y)?(Q[ye]=le,Q[ie]=me,ye=ie):(Q[ye]=Y,Q[X]=me,ye=X);else if(ie<M&&0>s(le,me))Q[ye]=le,Q[ie]=me,ye=ie;else break e}}return ce}function s(Q,ce){var me=Q.sortIndex-ce.sortIndex;return me!==0?me:Q.id-ce.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var a=Date,o=a.now();t.unstable_now=function(){return a.now()-o}}var l=[],c=[],d=1,g=null,y=3,p=!1,N=!1,S=!1,I=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function j(Q){for(var ce=n(c);ce!==null;){if(ce.callback===null)r(c);else if(ce.startTime<=Q)r(c),ce.sortIndex=ce.expirationTime,e(l,ce);else break;ce=n(c)}}function D(Q){if(S=!1,j(Q),!N)if(n(l)!==null)N=!0,ae(H);else{var ce=n(c);ce!==null&&ue(D,ce.startTime-Q)}}function H(Q,ce){N=!1,S&&(S=!1,w(_),_=-1),p=!0;var me=y;try{for(j(ce),g=n(l);g!==null&&(!(g.expirationTime>ce)||Q&&!E());){var ye=g.callback;if(typeof ye=="function"){g.callback=null,y=g.priorityLevel;var M=ye(g.expirationTime<=ce);ce=t.unstable_now(),typeof M=="function"?g.callback=M:g===n(l)&&r(l),j(ce)}else r(l);g=n(l)}if(g!==null)var W=!0;else{var X=n(c);X!==null&&ue(D,X.startTime-ce),W=!1}return W}finally{g=null,y=me,p=!1}}var J=!1,O=null,_=-1,A=5,R=-1;function E(){return!(t.unstable_now()-R<A)}function C(){if(O!==null){var Q=t.unstable_now();R=Q;var ce=!0;try{ce=O(!0,Q)}finally{ce?L():(J=!1,O=null)}}else J=!1}var L;if(typeof T=="function")L=function(){T(C)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,Z=z.port2;z.port1.onmessage=C,L=function(){Z.postMessage(null)}}else L=function(){I(C,0)};function ae(Q){O=Q,J||(J=!0,L())}function ue(Q,ce){_=I(function(){Q(t.unstable_now())},ce)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Q){Q.callback=null},t.unstable_continueExecution=function(){N||p||(N=!0,ae(H))},t.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<Q?Math.floor(1e3/Q):5},t.unstable_getCurrentPriorityLevel=function(){return y},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(Q){switch(y){case 1:case 2:case 3:var ce=3;break;default:ce=y}var me=y;y=ce;try{return Q()}finally{y=me}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(Q,ce){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var me=y;y=Q;try{return ce()}finally{y=me}},t.unstable_scheduleCallback=function(Q,ce,me){var ye=t.unstable_now();switch(typeof me=="object"&&me!==null?(me=me.delay,me=typeof me=="number"&&0<me?ye+me:ye):me=ye,Q){case 1:var M=-1;break;case 2:M=250;break;case 5:M=1073741823;break;case 4:M=1e4;break;default:M=5e3}return M=me+M,Q={id:d++,callback:ce,priorityLevel:Q,startTime:me,expirationTime:M,sortIndex:-1},me>ye?(Q.sortIndex=me,e(c,Q),n(l)===null&&Q===n(c)&&(S?(w(_),_=-1):S=!0,ue(D,me-ye))):(Q.sortIndex=M,e(l,Q),N||p||(N=!0,ae(H))),Q},t.unstable_shouldYield=E,t.unstable_wrapCallback=function(Q){var ce=y;return function(){var me=y;y=ce;try{return Q.apply(this,arguments)}finally{y=me}}}})(O4);D4.exports=O4;var bT=D4.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _T=se,fi=bT;function Fe(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var M4=new Set,ph={};function Ac(t,e){Lu(t,e),Lu(t+"Capture",e)}function Lu(t,e){for(ph[t]=e,t=0;t<e.length;t++)M4.add(e[t])}var co=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),g1=Object.prototype.hasOwnProperty,NT=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ix={},ax={};function ST(t){return g1.call(ax,t)?!0:g1.call(ix,t)?!1:NT.test(t)?ax[t]=!0:(ix[t]=!0,!1)}function AT(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function ET(t,e,n,r){if(e===null||typeof e>"u"||AT(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Rs(t,e,n,r,s,i,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=a}var ns={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ns[t]=new Rs(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ns[e]=new Rs(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ns[t]=new Rs(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ns[t]=new Rs(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ns[t]=new Rs(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ns[t]=new Rs(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ns[t]=new Rs(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ns[t]=new Rs(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ns[t]=new Rs(t,5,!1,t.toLowerCase(),null,!1,!1)});var ay=/[\-:]([a-z])/g;function oy(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(ay,oy);ns[e]=new Rs(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(ay,oy);ns[e]=new Rs(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(ay,oy);ns[e]=new Rs(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ns[t]=new Rs(t,1,!1,t.toLowerCase(),null,!1,!1)});ns.xlinkHref=new Rs("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ns[t]=new Rs(t,1,!1,t.toLowerCase(),null,!0,!0)});function ly(t,e,n,r){var s=ns.hasOwnProperty(e)?ns[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(ET(e,n,s,r)&&(n=null),r||s===null?ST(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var xo=_T.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Vf=Symbol.for("react.element"),su=Symbol.for("react.portal"),iu=Symbol.for("react.fragment"),cy=Symbol.for("react.strict_mode"),y1=Symbol.for("react.profiler"),F4=Symbol.for("react.provider"),U4=Symbol.for("react.context"),uy=Symbol.for("react.forward_ref"),v1=Symbol.for("react.suspense"),x1=Symbol.for("react.suspense_list"),dy=Symbol.for("react.memo"),Go=Symbol.for("react.lazy"),V4=Symbol.for("react.offscreen"),ox=Symbol.iterator;function Td(t){return t===null||typeof t!="object"?null:(t=ox&&t[ox]||t["@@iterator"],typeof t=="function"?t:null)}var Zn=Object.assign,Jg;function Vd(t){if(Jg===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Jg=e&&e[1]||""}return`
`+Jg+t}var Zg=!1;function e0(t,e){if(!t||Zg)return"";Zg=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),a=s.length-1,o=i.length-1;1<=a&&0<=o&&s[a]!==i[o];)o--;for(;1<=a&&0<=o;a--,o--)if(s[a]!==i[o]){if(a!==1||o!==1)do if(a--,o--,0>o||s[a]!==i[o]){var l=`
`+s[a].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=a&&0<=o);break}}}finally{Zg=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Vd(t):""}function kT(t){switch(t.tag){case 5:return Vd(t.type);case 16:return Vd("Lazy");case 13:return Vd("Suspense");case 19:return Vd("SuspenseList");case 0:case 2:case 15:return t=e0(t.type,!1),t;case 11:return t=e0(t.type.render,!1),t;case 1:return t=e0(t.type,!0),t;default:return""}}function w1(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case iu:return"Fragment";case su:return"Portal";case y1:return"Profiler";case cy:return"StrictMode";case v1:return"Suspense";case x1:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case U4:return(t.displayName||"Context")+".Consumer";case F4:return(t._context.displayName||"Context")+".Provider";case uy:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case dy:return e=t.displayName||null,e!==null?e:w1(t.type)||"Memo";case Go:e=t._payload,t=t._init;try{return w1(t(e))}catch{}}return null}function TT(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return w1(e);case 8:return e===cy?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function xl(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function B4(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function IT(t){var e=B4(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(a){r=""+a,i.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Bf(t){t._valueTracker||(t._valueTracker=IT(t))}function z4(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=B4(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function $p(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function b1(t,e){var n=e.checked;return Zn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function lx(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=xl(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function q4(t,e){e=e.checked,e!=null&&ly(t,"checked",e,!1)}function _1(t,e){q4(t,e);var n=xl(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?N1(t,e.type,n):e.hasOwnProperty("defaultValue")&&N1(t,e.type,xl(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function cx(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function N1(t,e,n){(e!=="number"||$p(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Bd=Array.isArray;function vu(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+xl(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function S1(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Fe(91));return Zn({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function ux(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Fe(92));if(Bd(n)){if(1<n.length)throw Error(Fe(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:xl(n)}}function H4(t,e){var n=xl(e.value),r=xl(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function dx(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function $4(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function A1(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?$4(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var zf,W4=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(zf=zf||document.createElement("div"),zf.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=zf.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function mh(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Qd={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},CT=["Webkit","ms","Moz","O"];Object.keys(Qd).forEach(function(t){CT.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Qd[e]=Qd[t]})});function G4(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Qd.hasOwnProperty(t)&&Qd[t]?(""+e).trim():e+"px"}function K4(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=G4(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var PT=Zn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function E1(t,e){if(e){if(PT[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Fe(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Fe(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Fe(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Fe(62))}}function k1(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var T1=null;function hy(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var I1=null,xu=null,wu=null;function hx(t){if(t=Zh(t)){if(typeof I1!="function")throw Error(Fe(280));var e=t.stateNode;e&&(e=Wm(e),I1(t.stateNode,t.type,e))}}function Y4(t){xu?wu?wu.push(t):wu=[t]:xu=t}function Q4(){if(xu){var t=xu,e=wu;if(wu=xu=null,hx(t),e)for(t=0;t<e.length;t++)hx(e[t])}}function X4(t,e){return t(e)}function J4(){}var t0=!1;function Z4(t,e,n){if(t0)return t(e,n);t0=!0;try{return X4(t,e,n)}finally{t0=!1,(xu!==null||wu!==null)&&(J4(),Q4())}}function gh(t,e){var n=t.stateNode;if(n===null)return null;var r=Wm(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Fe(231,e,typeof n));return n}var C1=!1;if(co)try{var Id={};Object.defineProperty(Id,"passive",{get:function(){C1=!0}}),window.addEventListener("test",Id,Id),window.removeEventListener("test",Id,Id)}catch{C1=!1}function jT(t,e,n,r,s,i,a,o,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(d){this.onError(d)}}var Xd=!1,Wp=null,Gp=!1,P1=null,LT={onError:function(t){Xd=!0,Wp=t}};function RT(t,e,n,r,s,i,a,o,l){Xd=!1,Wp=null,jT.apply(LT,arguments)}function DT(t,e,n,r,s,i,a,o,l){if(RT.apply(this,arguments),Xd){if(Xd){var c=Wp;Xd=!1,Wp=null}else throw Error(Fe(198));Gp||(Gp=!0,P1=c)}}function Ec(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function e3(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function fx(t){if(Ec(t)!==t)throw Error(Fe(188))}function OT(t){var e=t.alternate;if(!e){if(e=Ec(t),e===null)throw Error(Fe(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return fx(s),t;if(i===r)return fx(s),e;i=i.sibling}throw Error(Fe(188))}if(n.return!==r.return)n=s,r=i;else{for(var a=!1,o=s.child;o;){if(o===n){a=!0,n=s,r=i;break}if(o===r){a=!0,r=s,n=i;break}o=o.sibling}if(!a){for(o=i.child;o;){if(o===n){a=!0,n=i,r=s;break}if(o===r){a=!0,r=i,n=s;break}o=o.sibling}if(!a)throw Error(Fe(189))}}if(n.alternate!==r)throw Error(Fe(190))}if(n.tag!==3)throw Error(Fe(188));return n.stateNode.current===n?t:e}function t3(t){return t=OT(t),t!==null?n3(t):null}function n3(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=n3(t);if(e!==null)return e;t=t.sibling}return null}var r3=fi.unstable_scheduleCallback,px=fi.unstable_cancelCallback,MT=fi.unstable_shouldYield,FT=fi.unstable_requestPaint,pr=fi.unstable_now,UT=fi.unstable_getCurrentPriorityLevel,fy=fi.unstable_ImmediatePriority,s3=fi.unstable_UserBlockingPriority,Kp=fi.unstable_NormalPriority,VT=fi.unstable_LowPriority,i3=fi.unstable_IdlePriority,zm=null,Aa=null;function BT(t){if(Aa&&typeof Aa.onCommitFiberRoot=="function")try{Aa.onCommitFiberRoot(zm,t,void 0,(t.current.flags&128)===128)}catch{}}var Qi=Math.clz32?Math.clz32:HT,zT=Math.log,qT=Math.LN2;function HT(t){return t>>>=0,t===0?32:31-(zT(t)/qT|0)|0}var qf=64,Hf=4194304;function zd(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Yp(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,a=n&268435455;if(a!==0){var o=a&~s;o!==0?r=zd(o):(i&=a,i!==0&&(r=zd(i)))}else a=n&~s,a!==0?r=zd(a):i!==0&&(r=zd(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Qi(e),s=1<<n,r|=t[n],e&=~s;return r}function $T(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function WT(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var a=31-Qi(i),o=1<<a,l=s[a];l===-1?(!(o&n)||o&r)&&(s[a]=$T(o,e)):l<=e&&(t.expiredLanes|=o),i&=~o}}function j1(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function a3(){var t=qf;return qf<<=1,!(qf&4194240)&&(qf=64),t}function n0(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Xh(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Qi(e),t[e]=n}function GT(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Qi(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function py(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Qi(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var wn=0;function o3(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var l3,my,c3,u3,d3,L1=!1,$f=[],ll=null,cl=null,ul=null,yh=new Map,vh=new Map,Yo=[],KT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function mx(t,e){switch(t){case"focusin":case"focusout":ll=null;break;case"dragenter":case"dragleave":cl=null;break;case"mouseover":case"mouseout":ul=null;break;case"pointerover":case"pointerout":yh.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":vh.delete(e.pointerId)}}function Cd(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Zh(e),e!==null&&my(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function YT(t,e,n,r,s){switch(e){case"focusin":return ll=Cd(ll,t,e,n,r,s),!0;case"dragenter":return cl=Cd(cl,t,e,n,r,s),!0;case"mouseover":return ul=Cd(ul,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return yh.set(i,Cd(yh.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,vh.set(i,Cd(vh.get(i)||null,t,e,n,r,s)),!0}return!1}function h3(t){var e=Zl(t.target);if(e!==null){var n=Ec(e);if(n!==null){if(e=n.tag,e===13){if(e=e3(n),e!==null){t.blockedOn=e,d3(t.priority,function(){c3(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function wp(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=R1(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);T1=r,n.target.dispatchEvent(r),T1=null}else return e=Zh(n),e!==null&&my(e),t.blockedOn=n,!1;e.shift()}return!0}function gx(t,e,n){wp(t)&&n.delete(e)}function QT(){L1=!1,ll!==null&&wp(ll)&&(ll=null),cl!==null&&wp(cl)&&(cl=null),ul!==null&&wp(ul)&&(ul=null),yh.forEach(gx),vh.forEach(gx)}function Pd(t,e){t.blockedOn===e&&(t.blockedOn=null,L1||(L1=!0,fi.unstable_scheduleCallback(fi.unstable_NormalPriority,QT)))}function xh(t){function e(s){return Pd(s,t)}if(0<$f.length){Pd($f[0],t);for(var n=1;n<$f.length;n++){var r=$f[n];r.blockedOn===t&&(r.blockedOn=null)}}for(ll!==null&&Pd(ll,t),cl!==null&&Pd(cl,t),ul!==null&&Pd(ul,t),yh.forEach(e),vh.forEach(e),n=0;n<Yo.length;n++)r=Yo[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Yo.length&&(n=Yo[0],n.blockedOn===null);)h3(n),n.blockedOn===null&&Yo.shift()}var bu=xo.ReactCurrentBatchConfig,Qp=!0;function XT(t,e,n,r){var s=wn,i=bu.transition;bu.transition=null;try{wn=1,gy(t,e,n,r)}finally{wn=s,bu.transition=i}}function JT(t,e,n,r){var s=wn,i=bu.transition;bu.transition=null;try{wn=4,gy(t,e,n,r)}finally{wn=s,bu.transition=i}}function gy(t,e,n,r){if(Qp){var s=R1(t,e,n,r);if(s===null)h0(t,e,r,Xp,n),mx(t,r);else if(YT(s,t,e,n,r))r.stopPropagation();else if(mx(t,r),e&4&&-1<KT.indexOf(t)){for(;s!==null;){var i=Zh(s);if(i!==null&&l3(i),i=R1(t,e,n,r),i===null&&h0(t,e,r,Xp,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else h0(t,e,r,null,n)}}var Xp=null;function R1(t,e,n,r){if(Xp=null,t=hy(r),t=Zl(t),t!==null)if(e=Ec(t),e===null)t=null;else if(n=e.tag,n===13){if(t=e3(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Xp=t,null}function f3(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(UT()){case fy:return 1;case s3:return 4;case Kp:case VT:return 16;case i3:return 536870912;default:return 16}default:return 16}}var nl=null,yy=null,bp=null;function p3(){if(bp)return bp;var t,e=yy,n=e.length,r,s="value"in nl?nl.value:nl.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===s[i-r];r++);return bp=s.slice(t,1<r?1-r:void 0)}function _p(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Wf(){return!0}function yx(){return!1}function mi(t){function e(n,r,s,i,a){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(n=t[o],this[o]=n?n(i):i[o]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Wf:yx,this.isPropagationStopped=yx,this}return Zn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Wf)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Wf)},persist:function(){},isPersistent:Wf}),e}var Qu={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},vy=mi(Qu),Jh=Zn({},Qu,{view:0,detail:0}),ZT=mi(Jh),r0,s0,jd,qm=Zn({},Jh,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xy,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==jd&&(jd&&t.type==="mousemove"?(r0=t.screenX-jd.screenX,s0=t.screenY-jd.screenY):s0=r0=0,jd=t),r0)},movementY:function(t){return"movementY"in t?t.movementY:s0}}),vx=mi(qm),eI=Zn({},qm,{dataTransfer:0}),tI=mi(eI),nI=Zn({},Jh,{relatedTarget:0}),i0=mi(nI),rI=Zn({},Qu,{animationName:0,elapsedTime:0,pseudoElement:0}),sI=mi(rI),iI=Zn({},Qu,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),aI=mi(iI),oI=Zn({},Qu,{data:0}),xx=mi(oI),lI={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},cI={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},uI={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function dI(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=uI[t])?!!e[t]:!1}function xy(){return dI}var hI=Zn({},Jh,{key:function(t){if(t.key){var e=lI[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=_p(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?cI[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xy,charCode:function(t){return t.type==="keypress"?_p(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?_p(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),fI=mi(hI),pI=Zn({},qm,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),wx=mi(pI),mI=Zn({},Jh,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xy}),gI=mi(mI),yI=Zn({},Qu,{propertyName:0,elapsedTime:0,pseudoElement:0}),vI=mi(yI),xI=Zn({},qm,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),wI=mi(xI),bI=[9,13,27,32],wy=co&&"CompositionEvent"in window,Jd=null;co&&"documentMode"in document&&(Jd=document.documentMode);var _I=co&&"TextEvent"in window&&!Jd,m3=co&&(!wy||Jd&&8<Jd&&11>=Jd),bx=" ",_x=!1;function g3(t,e){switch(t){case"keyup":return bI.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function y3(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var au=!1;function NI(t,e){switch(t){case"compositionend":return y3(e);case"keypress":return e.which!==32?null:(_x=!0,bx);case"textInput":return t=e.data,t===bx&&_x?null:t;default:return null}}function SI(t,e){if(au)return t==="compositionend"||!wy&&g3(t,e)?(t=p3(),bp=yy=nl=null,au=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return m3&&e.locale!=="ko"?null:e.data;default:return null}}var AI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Nx(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!AI[t.type]:e==="textarea"}function v3(t,e,n,r){Y4(r),e=Jp(e,"onChange"),0<e.length&&(n=new vy("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Zd=null,wh=null;function EI(t){I3(t,0)}function Hm(t){var e=cu(t);if(z4(e))return t}function kI(t,e){if(t==="change")return e}var x3=!1;if(co){var a0;if(co){var o0="oninput"in document;if(!o0){var Sx=document.createElement("div");Sx.setAttribute("oninput","return;"),o0=typeof Sx.oninput=="function"}a0=o0}else a0=!1;x3=a0&&(!document.documentMode||9<document.documentMode)}function Ax(){Zd&&(Zd.detachEvent("onpropertychange",w3),wh=Zd=null)}function w3(t){if(t.propertyName==="value"&&Hm(wh)){var e=[];v3(e,wh,t,hy(t)),Z4(EI,e)}}function TI(t,e,n){t==="focusin"?(Ax(),Zd=e,wh=n,Zd.attachEvent("onpropertychange",w3)):t==="focusout"&&Ax()}function II(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Hm(wh)}function CI(t,e){if(t==="click")return Hm(e)}function PI(t,e){if(t==="input"||t==="change")return Hm(e)}function jI(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ji=typeof Object.is=="function"?Object.is:jI;function bh(t,e){if(Ji(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!g1.call(e,s)||!Ji(t[s],e[s]))return!1}return!0}function Ex(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function kx(t,e){var n=Ex(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Ex(n)}}function b3(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?b3(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function _3(){for(var t=window,e=$p();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=$p(t.document)}return e}function by(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function LI(t){var e=_3(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&b3(n.ownerDocument.documentElement,n)){if(r!==null&&by(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=kx(n,i);var a=kx(n,r);s&&a&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var RI=co&&"documentMode"in document&&11>=document.documentMode,ou=null,D1=null,eh=null,O1=!1;function Tx(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;O1||ou==null||ou!==$p(r)||(r=ou,"selectionStart"in r&&by(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),eh&&bh(eh,r)||(eh=r,r=Jp(D1,"onSelect"),0<r.length&&(e=new vy("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=ou)))}function Gf(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var lu={animationend:Gf("Animation","AnimationEnd"),animationiteration:Gf("Animation","AnimationIteration"),animationstart:Gf("Animation","AnimationStart"),transitionend:Gf("Transition","TransitionEnd")},l0={},N3={};co&&(N3=document.createElement("div").style,"AnimationEvent"in window||(delete lu.animationend.animation,delete lu.animationiteration.animation,delete lu.animationstart.animation),"TransitionEvent"in window||delete lu.transitionend.transition);function $m(t){if(l0[t])return l0[t];if(!lu[t])return t;var e=lu[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in N3)return l0[t]=e[n];return t}var S3=$m("animationend"),A3=$m("animationiteration"),E3=$m("animationstart"),k3=$m("transitionend"),T3=new Map,Ix="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function El(t,e){T3.set(t,e),Ac(e,[t])}for(var c0=0;c0<Ix.length;c0++){var u0=Ix[c0],DI=u0.toLowerCase(),OI=u0[0].toUpperCase()+u0.slice(1);El(DI,"on"+OI)}El(S3,"onAnimationEnd");El(A3,"onAnimationIteration");El(E3,"onAnimationStart");El("dblclick","onDoubleClick");El("focusin","onFocus");El("focusout","onBlur");El(k3,"onTransitionEnd");Lu("onMouseEnter",["mouseout","mouseover"]);Lu("onMouseLeave",["mouseout","mouseover"]);Lu("onPointerEnter",["pointerout","pointerover"]);Lu("onPointerLeave",["pointerout","pointerover"]);Ac("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ac("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ac("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ac("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ac("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ac("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var qd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),MI=new Set("cancel close invalid load scroll toggle".split(" ").concat(qd));function Cx(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,DT(r,e,void 0,t),t.currentTarget=null}function I3(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var a=r.length-1;0<=a;a--){var o=r[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==i&&s.isPropagationStopped())break e;Cx(s,o,c),i=l}else for(a=0;a<r.length;a++){if(o=r[a],l=o.instance,c=o.currentTarget,o=o.listener,l!==i&&s.isPropagationStopped())break e;Cx(s,o,c),i=l}}}if(Gp)throw t=P1,Gp=!1,P1=null,t}function Dn(t,e){var n=e[B1];n===void 0&&(n=e[B1]=new Set);var r=t+"__bubble";n.has(r)||(C3(e,t,2,!1),n.add(r))}function d0(t,e,n){var r=0;e&&(r|=4),C3(n,t,r,e)}var Kf="_reactListening"+Math.random().toString(36).slice(2);function _h(t){if(!t[Kf]){t[Kf]=!0,M4.forEach(function(n){n!=="selectionchange"&&(MI.has(n)||d0(n,!1,t),d0(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Kf]||(e[Kf]=!0,d0("selectionchange",!1,e))}}function C3(t,e,n,r){switch(f3(e)){case 1:var s=XT;break;case 4:s=JT;break;default:s=gy}n=s.bind(null,e,n,t),s=void 0,!C1||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function h0(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var o=r.stateNode.containerInfo;if(o===s||o.nodeType===8&&o.parentNode===s)break;if(a===4)for(a=r.return;a!==null;){var l=a.tag;if((l===3||l===4)&&(l=a.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;a=a.return}for(;o!==null;){if(a=Zl(o),a===null)return;if(l=a.tag,l===5||l===6){r=i=a;continue e}o=o.parentNode}}r=r.return}Z4(function(){var c=i,d=hy(n),g=[];e:{var y=T3.get(t);if(y!==void 0){var p=vy,N=t;switch(t){case"keypress":if(_p(n)===0)break e;case"keydown":case"keyup":p=fI;break;case"focusin":N="focus",p=i0;break;case"focusout":N="blur",p=i0;break;case"beforeblur":case"afterblur":p=i0;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=vx;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=tI;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=gI;break;case S3:case A3:case E3:p=sI;break;case k3:p=vI;break;case"scroll":p=ZT;break;case"wheel":p=wI;break;case"copy":case"cut":case"paste":p=aI;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=wx}var S=(e&4)!==0,I=!S&&t==="scroll",w=S?y!==null?y+"Capture":null:y;S=[];for(var T=c,j;T!==null;){j=T;var D=j.stateNode;if(j.tag===5&&D!==null&&(j=D,w!==null&&(D=gh(T,w),D!=null&&S.push(Nh(T,D,j)))),I)break;T=T.return}0<S.length&&(y=new p(y,N,null,n,d),g.push({event:y,listeners:S}))}}if(!(e&7)){e:{if(y=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",y&&n!==T1&&(N=n.relatedTarget||n.fromElement)&&(Zl(N)||N[uo]))break e;if((p||y)&&(y=d.window===d?d:(y=d.ownerDocument)?y.defaultView||y.parentWindow:window,p?(N=n.relatedTarget||n.toElement,p=c,N=N?Zl(N):null,N!==null&&(I=Ec(N),N!==I||N.tag!==5&&N.tag!==6)&&(N=null)):(p=null,N=c),p!==N)){if(S=vx,D="onMouseLeave",w="onMouseEnter",T="mouse",(t==="pointerout"||t==="pointerover")&&(S=wx,D="onPointerLeave",w="onPointerEnter",T="pointer"),I=p==null?y:cu(p),j=N==null?y:cu(N),y=new S(D,T+"leave",p,n,d),y.target=I,y.relatedTarget=j,D=null,Zl(d)===c&&(S=new S(w,T+"enter",N,n,d),S.target=j,S.relatedTarget=I,D=S),I=D,p&&N)t:{for(S=p,w=N,T=0,j=S;j;j=Yc(j))T++;for(j=0,D=w;D;D=Yc(D))j++;for(;0<T-j;)S=Yc(S),T--;for(;0<j-T;)w=Yc(w),j--;for(;T--;){if(S===w||w!==null&&S===w.alternate)break t;S=Yc(S),w=Yc(w)}S=null}else S=null;p!==null&&Px(g,y,p,S,!1),N!==null&&I!==null&&Px(g,I,N,S,!0)}}e:{if(y=c?cu(c):window,p=y.nodeName&&y.nodeName.toLowerCase(),p==="select"||p==="input"&&y.type==="file")var H=kI;else if(Nx(y))if(x3)H=PI;else{H=II;var J=TI}else(p=y.nodeName)&&p.toLowerCase()==="input"&&(y.type==="checkbox"||y.type==="radio")&&(H=CI);if(H&&(H=H(t,c))){v3(g,H,n,d);break e}J&&J(t,y,c),t==="focusout"&&(J=y._wrapperState)&&J.controlled&&y.type==="number"&&N1(y,"number",y.value)}switch(J=c?cu(c):window,t){case"focusin":(Nx(J)||J.contentEditable==="true")&&(ou=J,D1=c,eh=null);break;case"focusout":eh=D1=ou=null;break;case"mousedown":O1=!0;break;case"contextmenu":case"mouseup":case"dragend":O1=!1,Tx(g,n,d);break;case"selectionchange":if(RI)break;case"keydown":case"keyup":Tx(g,n,d)}var O;if(wy)e:{switch(t){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else au?g3(t,n)&&(_="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(_="onCompositionStart");_&&(m3&&n.locale!=="ko"&&(au||_!=="onCompositionStart"?_==="onCompositionEnd"&&au&&(O=p3()):(nl=d,yy="value"in nl?nl.value:nl.textContent,au=!0)),J=Jp(c,_),0<J.length&&(_=new xx(_,t,null,n,d),g.push({event:_,listeners:J}),O?_.data=O:(O=y3(n),O!==null&&(_.data=O)))),(O=_I?NI(t,n):SI(t,n))&&(c=Jp(c,"onBeforeInput"),0<c.length&&(d=new xx("onBeforeInput","beforeinput",null,n,d),g.push({event:d,listeners:c}),d.data=O))}I3(g,e)})}function Nh(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Jp(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=gh(t,n),i!=null&&r.unshift(Nh(t,i,s)),i=gh(t,e),i!=null&&r.push(Nh(t,i,s))),t=t.return}return r}function Yc(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Px(t,e,n,r,s){for(var i=e._reactName,a=[];n!==null&&n!==r;){var o=n,l=o.alternate,c=o.stateNode;if(l!==null&&l===r)break;o.tag===5&&c!==null&&(o=c,s?(l=gh(n,i),l!=null&&a.unshift(Nh(n,l,o))):s||(l=gh(n,i),l!=null&&a.push(Nh(n,l,o)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var FI=/\r\n?/g,UI=/\u0000|\uFFFD/g;function jx(t){return(typeof t=="string"?t:""+t).replace(FI,`
`).replace(UI,"")}function Yf(t,e,n){if(e=jx(e),jx(t)!==e&&n)throw Error(Fe(425))}function Zp(){}var M1=null,F1=null;function U1(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var V1=typeof setTimeout=="function"?setTimeout:void 0,VI=typeof clearTimeout=="function"?clearTimeout:void 0,Lx=typeof Promise=="function"?Promise:void 0,BI=typeof queueMicrotask=="function"?queueMicrotask:typeof Lx<"u"?function(t){return Lx.resolve(null).then(t).catch(zI)}:V1;function zI(t){setTimeout(function(){throw t})}function f0(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),xh(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);xh(e)}function dl(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Rx(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Xu=Math.random().toString(36).slice(2),ba="__reactFiber$"+Xu,Sh="__reactProps$"+Xu,uo="__reactContainer$"+Xu,B1="__reactEvents$"+Xu,qI="__reactListeners$"+Xu,HI="__reactHandles$"+Xu;function Zl(t){var e=t[ba];if(e)return e;for(var n=t.parentNode;n;){if(e=n[uo]||n[ba]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Rx(t);t!==null;){if(n=t[ba])return n;t=Rx(t)}return e}t=n,n=t.parentNode}return null}function Zh(t){return t=t[ba]||t[uo],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function cu(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Fe(33))}function Wm(t){return t[Sh]||null}var z1=[],uu=-1;function kl(t){return{current:t}}function Un(t){0>uu||(t.current=z1[uu],z1[uu]=null,uu--)}function Ln(t,e){uu++,z1[uu]=t.current,t.current=e}var wl={},xs=kl(wl),Hs=kl(!1),cc=wl;function Ru(t,e){var n=t.type.contextTypes;if(!n)return wl;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function $s(t){return t=t.childContextTypes,t!=null}function em(){Un(Hs),Un(xs)}function Dx(t,e,n){if(xs.current!==wl)throw Error(Fe(168));Ln(xs,e),Ln(Hs,n)}function P3(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(Fe(108,TT(t)||"Unknown",s));return Zn({},n,r)}function tm(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||wl,cc=xs.current,Ln(xs,t),Ln(Hs,Hs.current),!0}function Ox(t,e,n){var r=t.stateNode;if(!r)throw Error(Fe(169));n?(t=P3(t,e,cc),r.__reactInternalMemoizedMergedChildContext=t,Un(Hs),Un(xs),Ln(xs,t)):Un(Hs),Ln(Hs,n)}var Qa=null,Gm=!1,p0=!1;function j3(t){Qa===null?Qa=[t]:Qa.push(t)}function $I(t){Gm=!0,j3(t)}function Tl(){if(!p0&&Qa!==null){p0=!0;var t=0,e=wn;try{var n=Qa;for(wn=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Qa=null,Gm=!1}catch(s){throw Qa!==null&&(Qa=Qa.slice(t+1)),r3(fy,Tl),s}finally{wn=e,p0=!1}}return null}var du=[],hu=0,nm=null,rm=0,Ii=[],Ci=0,uc=null,Ja=1,Za="";function Kl(t,e){du[hu++]=rm,du[hu++]=nm,nm=t,rm=e}function L3(t,e,n){Ii[Ci++]=Ja,Ii[Ci++]=Za,Ii[Ci++]=uc,uc=t;var r=Ja;t=Za;var s=32-Qi(r)-1;r&=~(1<<s),n+=1;var i=32-Qi(e)+s;if(30<i){var a=s-s%5;i=(r&(1<<a)-1).toString(32),r>>=a,s-=a,Ja=1<<32-Qi(e)+s|n<<s|r,Za=i+t}else Ja=1<<i|n<<s|r,Za=t}function _y(t){t.return!==null&&(Kl(t,1),L3(t,1,0))}function Ny(t){for(;t===nm;)nm=du[--hu],du[hu]=null,rm=du[--hu],du[hu]=null;for(;t===uc;)uc=Ii[--Ci],Ii[Ci]=null,Za=Ii[--Ci],Ii[Ci]=null,Ja=Ii[--Ci],Ii[Ci]=null}var hi=null,li=null,Hn=!1,Yi=null;function R3(t,e){var n=Pi(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Mx(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,hi=t,li=dl(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,hi=t,li=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=uc!==null?{id:Ja,overflow:Za}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Pi(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,hi=t,li=null,!0):!1;default:return!1}}function q1(t){return(t.mode&1)!==0&&(t.flags&128)===0}function H1(t){if(Hn){var e=li;if(e){var n=e;if(!Mx(t,e)){if(q1(t))throw Error(Fe(418));e=dl(n.nextSibling);var r=hi;e&&Mx(t,e)?R3(r,n):(t.flags=t.flags&-4097|2,Hn=!1,hi=t)}}else{if(q1(t))throw Error(Fe(418));t.flags=t.flags&-4097|2,Hn=!1,hi=t}}}function Fx(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;hi=t}function Qf(t){if(t!==hi)return!1;if(!Hn)return Fx(t),Hn=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!U1(t.type,t.memoizedProps)),e&&(e=li)){if(q1(t))throw D3(),Error(Fe(418));for(;e;)R3(t,e),e=dl(e.nextSibling)}if(Fx(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Fe(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){li=dl(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}li=null}}else li=hi?dl(t.stateNode.nextSibling):null;return!0}function D3(){for(var t=li;t;)t=dl(t.nextSibling)}function Du(){li=hi=null,Hn=!1}function Sy(t){Yi===null?Yi=[t]:Yi.push(t)}var WI=xo.ReactCurrentBatchConfig;function Ld(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Fe(309));var r=n.stateNode}if(!r)throw Error(Fe(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(a){var o=s.refs;a===null?delete o[i]:o[i]=a},e._stringRef=i,e)}if(typeof t!="string")throw Error(Fe(284));if(!n._owner)throw Error(Fe(290,t))}return t}function Xf(t,e){throw t=Object.prototype.toString.call(e),Error(Fe(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Ux(t){var e=t._init;return e(t._payload)}function O3(t){function e(w,T){if(t){var j=w.deletions;j===null?(w.deletions=[T],w.flags|=16):j.push(T)}}function n(w,T){if(!t)return null;for(;T!==null;)e(w,T),T=T.sibling;return null}function r(w,T){for(w=new Map;T!==null;)T.key!==null?w.set(T.key,T):w.set(T.index,T),T=T.sibling;return w}function s(w,T){return w=ml(w,T),w.index=0,w.sibling=null,w}function i(w,T,j){return w.index=j,t?(j=w.alternate,j!==null?(j=j.index,j<T?(w.flags|=2,T):j):(w.flags|=2,T)):(w.flags|=1048576,T)}function a(w){return t&&w.alternate===null&&(w.flags|=2),w}function o(w,T,j,D){return T===null||T.tag!==6?(T=b0(j,w.mode,D),T.return=w,T):(T=s(T,j),T.return=w,T)}function l(w,T,j,D){var H=j.type;return H===iu?d(w,T,j.props.children,D,j.key):T!==null&&(T.elementType===H||typeof H=="object"&&H!==null&&H.$$typeof===Go&&Ux(H)===T.type)?(D=s(T,j.props),D.ref=Ld(w,T,j),D.return=w,D):(D=Ip(j.type,j.key,j.props,null,w.mode,D),D.ref=Ld(w,T,j),D.return=w,D)}function c(w,T,j,D){return T===null||T.tag!==4||T.stateNode.containerInfo!==j.containerInfo||T.stateNode.implementation!==j.implementation?(T=_0(j,w.mode,D),T.return=w,T):(T=s(T,j.children||[]),T.return=w,T)}function d(w,T,j,D,H){return T===null||T.tag!==7?(T=ic(j,w.mode,D,H),T.return=w,T):(T=s(T,j),T.return=w,T)}function g(w,T,j){if(typeof T=="string"&&T!==""||typeof T=="number")return T=b0(""+T,w.mode,j),T.return=w,T;if(typeof T=="object"&&T!==null){switch(T.$$typeof){case Vf:return j=Ip(T.type,T.key,T.props,null,w.mode,j),j.ref=Ld(w,null,T),j.return=w,j;case su:return T=_0(T,w.mode,j),T.return=w,T;case Go:var D=T._init;return g(w,D(T._payload),j)}if(Bd(T)||Td(T))return T=ic(T,w.mode,j,null),T.return=w,T;Xf(w,T)}return null}function y(w,T,j,D){var H=T!==null?T.key:null;if(typeof j=="string"&&j!==""||typeof j=="number")return H!==null?null:o(w,T,""+j,D);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case Vf:return j.key===H?l(w,T,j,D):null;case su:return j.key===H?c(w,T,j,D):null;case Go:return H=j._init,y(w,T,H(j._payload),D)}if(Bd(j)||Td(j))return H!==null?null:d(w,T,j,D,null);Xf(w,j)}return null}function p(w,T,j,D,H){if(typeof D=="string"&&D!==""||typeof D=="number")return w=w.get(j)||null,o(T,w,""+D,H);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case Vf:return w=w.get(D.key===null?j:D.key)||null,l(T,w,D,H);case su:return w=w.get(D.key===null?j:D.key)||null,c(T,w,D,H);case Go:var J=D._init;return p(w,T,j,J(D._payload),H)}if(Bd(D)||Td(D))return w=w.get(j)||null,d(T,w,D,H,null);Xf(T,D)}return null}function N(w,T,j,D){for(var H=null,J=null,O=T,_=T=0,A=null;O!==null&&_<j.length;_++){O.index>_?(A=O,O=null):A=O.sibling;var R=y(w,O,j[_],D);if(R===null){O===null&&(O=A);break}t&&O&&R.alternate===null&&e(w,O),T=i(R,T,_),J===null?H=R:J.sibling=R,J=R,O=A}if(_===j.length)return n(w,O),Hn&&Kl(w,_),H;if(O===null){for(;_<j.length;_++)O=g(w,j[_],D),O!==null&&(T=i(O,T,_),J===null?H=O:J.sibling=O,J=O);return Hn&&Kl(w,_),H}for(O=r(w,O);_<j.length;_++)A=p(O,w,_,j[_],D),A!==null&&(t&&A.alternate!==null&&O.delete(A.key===null?_:A.key),T=i(A,T,_),J===null?H=A:J.sibling=A,J=A);return t&&O.forEach(function(E){return e(w,E)}),Hn&&Kl(w,_),H}function S(w,T,j,D){var H=Td(j);if(typeof H!="function")throw Error(Fe(150));if(j=H.call(j),j==null)throw Error(Fe(151));for(var J=H=null,O=T,_=T=0,A=null,R=j.next();O!==null&&!R.done;_++,R=j.next()){O.index>_?(A=O,O=null):A=O.sibling;var E=y(w,O,R.value,D);if(E===null){O===null&&(O=A);break}t&&O&&E.alternate===null&&e(w,O),T=i(E,T,_),J===null?H=E:J.sibling=E,J=E,O=A}if(R.done)return n(w,O),Hn&&Kl(w,_),H;if(O===null){for(;!R.done;_++,R=j.next())R=g(w,R.value,D),R!==null&&(T=i(R,T,_),J===null?H=R:J.sibling=R,J=R);return Hn&&Kl(w,_),H}for(O=r(w,O);!R.done;_++,R=j.next())R=p(O,w,_,R.value,D),R!==null&&(t&&R.alternate!==null&&O.delete(R.key===null?_:R.key),T=i(R,T,_),J===null?H=R:J.sibling=R,J=R);return t&&O.forEach(function(C){return e(w,C)}),Hn&&Kl(w,_),H}function I(w,T,j,D){if(typeof j=="object"&&j!==null&&j.type===iu&&j.key===null&&(j=j.props.children),typeof j=="object"&&j!==null){switch(j.$$typeof){case Vf:e:{for(var H=j.key,J=T;J!==null;){if(J.key===H){if(H=j.type,H===iu){if(J.tag===7){n(w,J.sibling),T=s(J,j.props.children),T.return=w,w=T;break e}}else if(J.elementType===H||typeof H=="object"&&H!==null&&H.$$typeof===Go&&Ux(H)===J.type){n(w,J.sibling),T=s(J,j.props),T.ref=Ld(w,J,j),T.return=w,w=T;break e}n(w,J);break}else e(w,J);J=J.sibling}j.type===iu?(T=ic(j.props.children,w.mode,D,j.key),T.return=w,w=T):(D=Ip(j.type,j.key,j.props,null,w.mode,D),D.ref=Ld(w,T,j),D.return=w,w=D)}return a(w);case su:e:{for(J=j.key;T!==null;){if(T.key===J)if(T.tag===4&&T.stateNode.containerInfo===j.containerInfo&&T.stateNode.implementation===j.implementation){n(w,T.sibling),T=s(T,j.children||[]),T.return=w,w=T;break e}else{n(w,T);break}else e(w,T);T=T.sibling}T=_0(j,w.mode,D),T.return=w,w=T}return a(w);case Go:return J=j._init,I(w,T,J(j._payload),D)}if(Bd(j))return N(w,T,j,D);if(Td(j))return S(w,T,j,D);Xf(w,j)}return typeof j=="string"&&j!==""||typeof j=="number"?(j=""+j,T!==null&&T.tag===6?(n(w,T.sibling),T=s(T,j),T.return=w,w=T):(n(w,T),T=b0(j,w.mode,D),T.return=w,w=T),a(w)):n(w,T)}return I}var Ou=O3(!0),M3=O3(!1),sm=kl(null),im=null,fu=null,Ay=null;function Ey(){Ay=fu=im=null}function ky(t){var e=sm.current;Un(sm),t._currentValue=e}function $1(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function _u(t,e){im=t,Ay=fu=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(zs=!0),t.firstContext=null)}function Ri(t){var e=t._currentValue;if(Ay!==t)if(t={context:t,memoizedValue:e,next:null},fu===null){if(im===null)throw Error(Fe(308));fu=t,im.dependencies={lanes:0,firstContext:t}}else fu=fu.next=t;return e}var ec=null;function Ty(t){ec===null?ec=[t]:ec.push(t)}function F3(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Ty(e)):(n.next=s.next,s.next=n),e.interleaved=n,ho(t,r)}function ho(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Ko=!1;function Iy(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function U3(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function so(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function hl(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,an&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,ho(t,n)}return s=r.interleaved,s===null?(e.next=e,Ty(r)):(e.next=s.next,s.next=e),r.interleaved=e,ho(t,n)}function Np(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,py(t,n)}}function Vx(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=a:i=i.next=a,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function am(t,e,n,r){var s=t.updateQueue;Ko=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,o=s.shared.pending;if(o!==null){s.shared.pending=null;var l=o,c=l.next;l.next=null,a===null?i=c:a.next=c,a=l;var d=t.alternate;d!==null&&(d=d.updateQueue,o=d.lastBaseUpdate,o!==a&&(o===null?d.firstBaseUpdate=c:o.next=c,d.lastBaseUpdate=l))}if(i!==null){var g=s.baseState;a=0,d=c=l=null,o=i;do{var y=o.lane,p=o.eventTime;if((r&y)===y){d!==null&&(d=d.next={eventTime:p,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var N=t,S=o;switch(y=e,p=n,S.tag){case 1:if(N=S.payload,typeof N=="function"){g=N.call(p,g,y);break e}g=N;break e;case 3:N.flags=N.flags&-65537|128;case 0:if(N=S.payload,y=typeof N=="function"?N.call(p,g,y):N,y==null)break e;g=Zn({},g,y);break e;case 2:Ko=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,y=s.effects,y===null?s.effects=[o]:y.push(o))}else p={eventTime:p,lane:y,tag:o.tag,payload:o.payload,callback:o.callback,next:null},d===null?(c=d=p,l=g):d=d.next=p,a|=y;if(o=o.next,o===null){if(o=s.shared.pending,o===null)break;y=o,o=y.next,y.next=null,s.lastBaseUpdate=y,s.shared.pending=null}}while(!0);if(d===null&&(l=g),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do a|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);hc|=a,t.lanes=a,t.memoizedState=g}}function Bx(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(Fe(191,s));s.call(r)}}}var ef={},Ea=kl(ef),Ah=kl(ef),Eh=kl(ef);function tc(t){if(t===ef)throw Error(Fe(174));return t}function Cy(t,e){switch(Ln(Eh,e),Ln(Ah,t),Ln(Ea,ef),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:A1(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=A1(e,t)}Un(Ea),Ln(Ea,e)}function Mu(){Un(Ea),Un(Ah),Un(Eh)}function V3(t){tc(Eh.current);var e=tc(Ea.current),n=A1(e,t.type);e!==n&&(Ln(Ah,t),Ln(Ea,n))}function Py(t){Ah.current===t&&(Un(Ea),Un(Ah))}var Xn=kl(0);function om(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var m0=[];function jy(){for(var t=0;t<m0.length;t++)m0[t]._workInProgressVersionPrimary=null;m0.length=0}var Sp=xo.ReactCurrentDispatcher,g0=xo.ReactCurrentBatchConfig,dc=0,Jn=null,Lr=null,Ur=null,lm=!1,th=!1,kh=0,GI=0;function os(){throw Error(Fe(321))}function Ly(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Ji(t[n],e[n]))return!1;return!0}function Ry(t,e,n,r,s,i){if(dc=i,Jn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Sp.current=t===null||t.memoizedState===null?XI:JI,t=n(r,s),th){i=0;do{if(th=!1,kh=0,25<=i)throw Error(Fe(301));i+=1,Ur=Lr=null,e.updateQueue=null,Sp.current=ZI,t=n(r,s)}while(th)}if(Sp.current=cm,e=Lr!==null&&Lr.next!==null,dc=0,Ur=Lr=Jn=null,lm=!1,e)throw Error(Fe(300));return t}function Dy(){var t=kh!==0;return kh=0,t}function xa(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ur===null?Jn.memoizedState=Ur=t:Ur=Ur.next=t,Ur}function Di(){if(Lr===null){var t=Jn.alternate;t=t!==null?t.memoizedState:null}else t=Lr.next;var e=Ur===null?Jn.memoizedState:Ur.next;if(e!==null)Ur=e,Lr=t;else{if(t===null)throw Error(Fe(310));Lr=t,t={memoizedState:Lr.memoizedState,baseState:Lr.baseState,baseQueue:Lr.baseQueue,queue:Lr.queue,next:null},Ur===null?Jn.memoizedState=Ur=t:Ur=Ur.next=t}return Ur}function Th(t,e){return typeof e=="function"?e(t):e}function y0(t){var e=Di(),n=e.queue;if(n===null)throw Error(Fe(311));n.lastRenderedReducer=t;var r=Lr,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var a=s.next;s.next=i.next,i.next=a}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var o=a=null,l=null,c=i;do{var d=c.lane;if((dc&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var g={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(o=l=g,a=r):l=l.next=g,Jn.lanes|=d,hc|=d}c=c.next}while(c!==null&&c!==i);l===null?a=r:l.next=o,Ji(r,e.memoizedState)||(zs=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Jn.lanes|=i,hc|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function v0(t){var e=Di(),n=e.queue;if(n===null)throw Error(Fe(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do i=t(i,a.action),a=a.next;while(a!==s);Ji(i,e.memoizedState)||(zs=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function B3(){}function z3(t,e){var n=Jn,r=Di(),s=e(),i=!Ji(r.memoizedState,s);if(i&&(r.memoizedState=s,zs=!0),r=r.queue,Oy($3.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Ur!==null&&Ur.memoizedState.tag&1){if(n.flags|=2048,Ih(9,H3.bind(null,n,r,s,e),void 0,null),zr===null)throw Error(Fe(349));dc&30||q3(n,e,s)}return s}function q3(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Jn.updateQueue,e===null?(e={lastEffect:null,stores:null},Jn.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function H3(t,e,n,r){e.value=n,e.getSnapshot=r,W3(e)&&G3(t)}function $3(t,e,n){return n(function(){W3(e)&&G3(t)})}function W3(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Ji(t,n)}catch{return!0}}function G3(t){var e=ho(t,1);e!==null&&Xi(e,t,1,-1)}function zx(t){var e=xa();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Th,lastRenderedState:t},e.queue=t,t=t.dispatch=QI.bind(null,Jn,t),[e.memoizedState,t]}function Ih(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Jn.updateQueue,e===null?(e={lastEffect:null,stores:null},Jn.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function K3(){return Di().memoizedState}function Ap(t,e,n,r){var s=xa();Jn.flags|=t,s.memoizedState=Ih(1|e,n,void 0,r===void 0?null:r)}function Km(t,e,n,r){var s=Di();r=r===void 0?null:r;var i=void 0;if(Lr!==null){var a=Lr.memoizedState;if(i=a.destroy,r!==null&&Ly(r,a.deps)){s.memoizedState=Ih(e,n,i,r);return}}Jn.flags|=t,s.memoizedState=Ih(1|e,n,i,r)}function qx(t,e){return Ap(8390656,8,t,e)}function Oy(t,e){return Km(2048,8,t,e)}function Y3(t,e){return Km(4,2,t,e)}function Q3(t,e){return Km(4,4,t,e)}function X3(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function J3(t,e,n){return n=n!=null?n.concat([t]):null,Km(4,4,X3.bind(null,e,t),n)}function My(){}function Z3(t,e){var n=Di();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Ly(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function e6(t,e){var n=Di();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Ly(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function t6(t,e,n){return dc&21?(Ji(n,e)||(n=a3(),Jn.lanes|=n,hc|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,zs=!0),t.memoizedState=n)}function KI(t,e){var n=wn;wn=n!==0&&4>n?n:4,t(!0);var r=g0.transition;g0.transition={};try{t(!1),e()}finally{wn=n,g0.transition=r}}function n6(){return Di().memoizedState}function YI(t,e,n){var r=pl(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},r6(t))s6(e,n);else if(n=F3(t,e,n,r),n!==null){var s=Cs();Xi(n,t,r,s),i6(n,e,r)}}function QI(t,e,n){var r=pl(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(r6(t))s6(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var a=e.lastRenderedState,o=i(a,n);if(s.hasEagerState=!0,s.eagerState=o,Ji(o,a)){var l=e.interleaved;l===null?(s.next=s,Ty(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=F3(t,e,s,r),n!==null&&(s=Cs(),Xi(n,t,r,s),i6(n,e,r))}}function r6(t){var e=t.alternate;return t===Jn||e!==null&&e===Jn}function s6(t,e){th=lm=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function i6(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,py(t,n)}}var cm={readContext:Ri,useCallback:os,useContext:os,useEffect:os,useImperativeHandle:os,useInsertionEffect:os,useLayoutEffect:os,useMemo:os,useReducer:os,useRef:os,useState:os,useDebugValue:os,useDeferredValue:os,useTransition:os,useMutableSource:os,useSyncExternalStore:os,useId:os,unstable_isNewReconciler:!1},XI={readContext:Ri,useCallback:function(t,e){return xa().memoizedState=[t,e===void 0?null:e],t},useContext:Ri,useEffect:qx,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Ap(4194308,4,X3.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Ap(4194308,4,t,e)},useInsertionEffect:function(t,e){return Ap(4,2,t,e)},useMemo:function(t,e){var n=xa();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=xa();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=YI.bind(null,Jn,t),[r.memoizedState,t]},useRef:function(t){var e=xa();return t={current:t},e.memoizedState=t},useState:zx,useDebugValue:My,useDeferredValue:function(t){return xa().memoizedState=t},useTransition:function(){var t=zx(!1),e=t[0];return t=KI.bind(null,t[1]),xa().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Jn,s=xa();if(Hn){if(n===void 0)throw Error(Fe(407));n=n()}else{if(n=e(),zr===null)throw Error(Fe(349));dc&30||q3(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,qx($3.bind(null,r,i,t),[t]),r.flags|=2048,Ih(9,H3.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=xa(),e=zr.identifierPrefix;if(Hn){var n=Za,r=Ja;n=(r&~(1<<32-Qi(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=kh++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=GI++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},JI={readContext:Ri,useCallback:Z3,useContext:Ri,useEffect:Oy,useImperativeHandle:J3,useInsertionEffect:Y3,useLayoutEffect:Q3,useMemo:e6,useReducer:y0,useRef:K3,useState:function(){return y0(Th)},useDebugValue:My,useDeferredValue:function(t){var e=Di();return t6(e,Lr.memoizedState,t)},useTransition:function(){var t=y0(Th)[0],e=Di().memoizedState;return[t,e]},useMutableSource:B3,useSyncExternalStore:z3,useId:n6,unstable_isNewReconciler:!1},ZI={readContext:Ri,useCallback:Z3,useContext:Ri,useEffect:Oy,useImperativeHandle:J3,useInsertionEffect:Y3,useLayoutEffect:Q3,useMemo:e6,useReducer:v0,useRef:K3,useState:function(){return v0(Th)},useDebugValue:My,useDeferredValue:function(t){var e=Di();return Lr===null?e.memoizedState=t:t6(e,Lr.memoizedState,t)},useTransition:function(){var t=v0(Th)[0],e=Di().memoizedState;return[t,e]},useMutableSource:B3,useSyncExternalStore:z3,useId:n6,unstable_isNewReconciler:!1};function Gi(t,e){if(t&&t.defaultProps){e=Zn({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function W1(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Zn({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Ym={isMounted:function(t){return(t=t._reactInternals)?Ec(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Cs(),s=pl(t),i=so(r,s);i.payload=e,n!=null&&(i.callback=n),e=hl(t,i,s),e!==null&&(Xi(e,t,s,r),Np(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Cs(),s=pl(t),i=so(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=hl(t,i,s),e!==null&&(Xi(e,t,s,r),Np(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Cs(),r=pl(t),s=so(n,r);s.tag=2,e!=null&&(s.callback=e),e=hl(t,s,r),e!==null&&(Xi(e,t,r,n),Np(e,t,r))}};function Hx(t,e,n,r,s,i,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,a):e.prototype&&e.prototype.isPureReactComponent?!bh(n,r)||!bh(s,i):!0}function a6(t,e,n){var r=!1,s=wl,i=e.contextType;return typeof i=="object"&&i!==null?i=Ri(i):(s=$s(e)?cc:xs.current,r=e.contextTypes,i=(r=r!=null)?Ru(t,s):wl),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Ym,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function $x(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Ym.enqueueReplaceState(e,e.state,null)}function G1(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Iy(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Ri(i):(i=$s(e)?cc:xs.current,s.context=Ru(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(W1(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Ym.enqueueReplaceState(s,s.state,null),am(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Fu(t,e){try{var n="",r=e;do n+=kT(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function x0(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function K1(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var e8=typeof WeakMap=="function"?WeakMap:Map;function o6(t,e,n){n=so(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){dm||(dm=!0,s2=r),K1(t,e)},n}function l6(t,e,n){n=so(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){K1(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){K1(t,e),typeof r!="function"&&(fl===null?fl=new Set([this]):fl.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function Wx(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new e8;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=p8.bind(null,t,e,n),e.then(t,t))}function Gx(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Kx(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=so(-1,1),e.tag=2,hl(n,e,1))),n.lanes|=1),t)}var t8=xo.ReactCurrentOwner,zs=!1;function Is(t,e,n,r){e.child=t===null?M3(e,null,n,r):Ou(e,t.child,n,r)}function Yx(t,e,n,r,s){n=n.render;var i=e.ref;return _u(e,s),r=Ry(t,e,n,r,i,s),n=Dy(),t!==null&&!zs?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,fo(t,e,s)):(Hn&&n&&_y(e),e.flags|=1,Is(t,e,r,s),e.child)}function Qx(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!$y(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,c6(t,e,i,r,s)):(t=Ip(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var a=i.memoizedProps;if(n=n.compare,n=n!==null?n:bh,n(a,r)&&t.ref===e.ref)return fo(t,e,s)}return e.flags|=1,t=ml(i,r),t.ref=e.ref,t.return=e,e.child=t}function c6(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(bh(i,r)&&t.ref===e.ref)if(zs=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(zs=!0);else return e.lanes=t.lanes,fo(t,e,s)}return Y1(t,e,n,r,s)}function u6(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ln(mu,oi),oi|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ln(mu,oi),oi|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Ln(mu,oi),oi|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Ln(mu,oi),oi|=r;return Is(t,e,s,n),e.child}function d6(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Y1(t,e,n,r,s){var i=$s(n)?cc:xs.current;return i=Ru(e,i),_u(e,s),n=Ry(t,e,n,r,i,s),r=Dy(),t!==null&&!zs?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,fo(t,e,s)):(Hn&&r&&_y(e),e.flags|=1,Is(t,e,n,s),e.child)}function Xx(t,e,n,r,s){if($s(n)){var i=!0;tm(e)}else i=!1;if(_u(e,s),e.stateNode===null)Ep(t,e),a6(e,n,r),G1(e,n,r,s),r=!0;else if(t===null){var a=e.stateNode,o=e.memoizedProps;a.props=o;var l=a.context,c=n.contextType;typeof c=="object"&&c!==null?c=Ri(c):(c=$s(n)?cc:xs.current,c=Ru(e,c));var d=n.getDerivedStateFromProps,g=typeof d=="function"||typeof a.getSnapshotBeforeUpdate=="function";g||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==r||l!==c)&&$x(e,a,r,c),Ko=!1;var y=e.memoizedState;a.state=y,am(e,r,a,s),l=e.memoizedState,o!==r||y!==l||Hs.current||Ko?(typeof d=="function"&&(W1(e,n,d,r),l=e.memoizedState),(o=Ko||Hx(e,n,o,r,y,l,c))?(g||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),a.props=r,a.state=l,a.context=c,r=o):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,U3(t,e),o=e.memoizedProps,c=e.type===e.elementType?o:Gi(e.type,o),a.props=c,g=e.pendingProps,y=a.context,l=n.contextType,typeof l=="object"&&l!==null?l=Ri(l):(l=$s(n)?cc:xs.current,l=Ru(e,l));var p=n.getDerivedStateFromProps;(d=typeof p=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==g||y!==l)&&$x(e,a,r,l),Ko=!1,y=e.memoizedState,a.state=y,am(e,r,a,s);var N=e.memoizedState;o!==g||y!==N||Hs.current||Ko?(typeof p=="function"&&(W1(e,n,p,r),N=e.memoizedState),(c=Ko||Hx(e,n,c,r,y,N,l)||!1)?(d||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,N,l),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,N,l)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&y===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&y===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=N),a.props=r,a.state=N,a.context=l,r=c):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&y===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&y===t.memoizedState||(e.flags|=1024),r=!1)}return Q1(t,e,n,r,i,s)}function Q1(t,e,n,r,s,i){d6(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return s&&Ox(e,n,!1),fo(t,e,i);r=e.stateNode,t8.current=e;var o=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=Ou(e,t.child,null,i),e.child=Ou(e,null,o,i)):Is(t,e,o,i),e.memoizedState=r.state,s&&Ox(e,n,!0),e.child}function h6(t){var e=t.stateNode;e.pendingContext?Dx(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Dx(t,e.context,!1),Cy(t,e.containerInfo)}function Jx(t,e,n,r,s){return Du(),Sy(s),e.flags|=256,Is(t,e,n,r),e.child}var X1={dehydrated:null,treeContext:null,retryLane:0};function J1(t){return{baseLanes:t,cachePool:null,transitions:null}}function f6(t,e,n){var r=e.pendingProps,s=Xn.current,i=!1,a=(e.flags&128)!==0,o;if((o=a)||(o=t!==null&&t.memoizedState===null?!1:(s&2)!==0),o?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Ln(Xn,s&1),t===null)return H1(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,i?(r=e.mode,i=e.child,a={mode:"hidden",children:a},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=Jm(a,r,0,null),t=ic(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=J1(n),e.memoizedState=X1,t):Fy(e,a));if(s=t.memoizedState,s!==null&&(o=s.dehydrated,o!==null))return n8(t,e,a,r,o,s,n);if(i){i=r.fallback,a=e.mode,s=t.child,o=s.sibling;var l={mode:"hidden",children:r.children};return!(a&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=ml(s,l),r.subtreeFlags=s.subtreeFlags&14680064),o!==null?i=ml(o,i):(i=ic(i,a,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,a=t.child.memoizedState,a=a===null?J1(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=t.childLanes&~n,e.memoizedState=X1,r}return i=t.child,t=i.sibling,r=ml(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Fy(t,e){return e=Jm({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Jf(t,e,n,r){return r!==null&&Sy(r),Ou(e,t.child,null,n),t=Fy(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function n8(t,e,n,r,s,i,a){if(n)return e.flags&256?(e.flags&=-257,r=x0(Error(Fe(422))),Jf(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Jm({mode:"visible",children:r.children},s,0,null),i=ic(i,s,a,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Ou(e,t.child,null,a),e.child.memoizedState=J1(a),e.memoizedState=X1,i);if(!(e.mode&1))return Jf(t,e,a,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var o=r.dgst;return r=o,i=Error(Fe(419)),r=x0(i,r,void 0),Jf(t,e,a,r)}if(o=(a&t.childLanes)!==0,zs||o){if(r=zr,r!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|a)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,ho(t,s),Xi(r,t,s,-1))}return Hy(),r=x0(Error(Fe(421))),Jf(t,e,a,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=m8.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,li=dl(s.nextSibling),hi=e,Hn=!0,Yi=null,t!==null&&(Ii[Ci++]=Ja,Ii[Ci++]=Za,Ii[Ci++]=uc,Ja=t.id,Za=t.overflow,uc=e),e=Fy(e,r.children),e.flags|=4096,e)}function Zx(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),$1(t.return,e,n)}function w0(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function p6(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Is(t,e,r.children,n),r=Xn.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Zx(t,n,e);else if(t.tag===19)Zx(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ln(Xn,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&om(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),w0(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&om(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}w0(e,!0,n,null,i);break;case"together":w0(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ep(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function fo(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),hc|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Fe(153));if(e.child!==null){for(t=e.child,n=ml(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ml(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function r8(t,e,n){switch(e.tag){case 3:h6(e),Du();break;case 5:V3(e);break;case 1:$s(e.type)&&tm(e);break;case 4:Cy(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Ln(sm,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ln(Xn,Xn.current&1),e.flags|=128,null):n&e.child.childLanes?f6(t,e,n):(Ln(Xn,Xn.current&1),t=fo(t,e,n),t!==null?t.sibling:null);Ln(Xn,Xn.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return p6(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ln(Xn,Xn.current),r)break;return null;case 22:case 23:return e.lanes=0,u6(t,e,n)}return fo(t,e,n)}var m6,Z1,g6,y6;m6=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Z1=function(){};g6=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,tc(Ea.current);var i=null;switch(n){case"input":s=b1(t,s),r=b1(t,r),i=[];break;case"select":s=Zn({},s,{value:void 0}),r=Zn({},r,{value:void 0}),i=[];break;case"textarea":s=S1(t,s),r=S1(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Zp)}E1(n,r);var a;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var o=s[c];for(a in o)o.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(ph.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var l=r[c];if(o=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&l!==o&&(l!=null||o!=null))if(c==="style")if(o){for(a in o)!o.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in l)l.hasOwnProperty(a)&&o[a]!==l[a]&&(n||(n={}),n[a]=l[a])}else n||(i||(i=[]),i.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,o=o?o.__html:void 0,l!=null&&o!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(ph.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Dn("scroll",t),i||o===l||(i=[])):(i=i||[]).push(c,l))}n&&(i=i||[]).push("style",n);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};y6=function(t,e,n,r){n!==r&&(e.flags|=4)};function Rd(t,e){if(!Hn)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function ls(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function s8(t,e,n){var r=e.pendingProps;switch(Ny(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ls(e),null;case 1:return $s(e.type)&&em(),ls(e),null;case 3:return r=e.stateNode,Mu(),Un(Hs),Un(xs),jy(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Qf(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Yi!==null&&(o2(Yi),Yi=null))),Z1(t,e),ls(e),null;case 5:Py(e);var s=tc(Eh.current);if(n=e.type,t!==null&&e.stateNode!=null)g6(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Fe(166));return ls(e),null}if(t=tc(Ea.current),Qf(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[ba]=e,r[Sh]=i,t=(e.mode&1)!==0,n){case"dialog":Dn("cancel",r),Dn("close",r);break;case"iframe":case"object":case"embed":Dn("load",r);break;case"video":case"audio":for(s=0;s<qd.length;s++)Dn(qd[s],r);break;case"source":Dn("error",r);break;case"img":case"image":case"link":Dn("error",r),Dn("load",r);break;case"details":Dn("toggle",r);break;case"input":lx(r,i),Dn("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Dn("invalid",r);break;case"textarea":ux(r,i),Dn("invalid",r)}E1(n,i),s=null;for(var a in i)if(i.hasOwnProperty(a)){var o=i[a];a==="children"?typeof o=="string"?r.textContent!==o&&(i.suppressHydrationWarning!==!0&&Yf(r.textContent,o,t),s=["children",o]):typeof o=="number"&&r.textContent!==""+o&&(i.suppressHydrationWarning!==!0&&Yf(r.textContent,o,t),s=["children",""+o]):ph.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&Dn("scroll",r)}switch(n){case"input":Bf(r),cx(r,i,!0);break;case"textarea":Bf(r),dx(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Zp)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=$4(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[ba]=e,t[Sh]=r,m6(t,e,!1,!1),e.stateNode=t;e:{switch(a=k1(n,r),n){case"dialog":Dn("cancel",t),Dn("close",t),s=r;break;case"iframe":case"object":case"embed":Dn("load",t),s=r;break;case"video":case"audio":for(s=0;s<qd.length;s++)Dn(qd[s],t);s=r;break;case"source":Dn("error",t),s=r;break;case"img":case"image":case"link":Dn("error",t),Dn("load",t),s=r;break;case"details":Dn("toggle",t),s=r;break;case"input":lx(t,r),s=b1(t,r),Dn("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Zn({},r,{value:void 0}),Dn("invalid",t);break;case"textarea":ux(t,r),s=S1(t,r),Dn("invalid",t);break;default:s=r}E1(n,s),o=s;for(i in o)if(o.hasOwnProperty(i)){var l=o[i];i==="style"?K4(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&W4(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&mh(t,l):typeof l=="number"&&mh(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(ph.hasOwnProperty(i)?l!=null&&i==="onScroll"&&Dn("scroll",t):l!=null&&ly(t,i,l,a))}switch(n){case"input":Bf(t),cx(t,r,!1);break;case"textarea":Bf(t),dx(t);break;case"option":r.value!=null&&t.setAttribute("value",""+xl(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?vu(t,!!r.multiple,i,!1):r.defaultValue!=null&&vu(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Zp)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ls(e),null;case 6:if(t&&e.stateNode!=null)y6(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Fe(166));if(n=tc(Eh.current),tc(Ea.current),Qf(e)){if(r=e.stateNode,n=e.memoizedProps,r[ba]=e,(i=r.nodeValue!==n)&&(t=hi,t!==null))switch(t.tag){case 3:Yf(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Yf(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[ba]=e,e.stateNode=r}return ls(e),null;case 13:if(Un(Xn),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Hn&&li!==null&&e.mode&1&&!(e.flags&128))D3(),Du(),e.flags|=98560,i=!1;else if(i=Qf(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(Fe(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Fe(317));i[ba]=e}else Du(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ls(e),i=!1}else Yi!==null&&(o2(Yi),Yi=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Xn.current&1?Rr===0&&(Rr=3):Hy())),e.updateQueue!==null&&(e.flags|=4),ls(e),null);case 4:return Mu(),Z1(t,e),t===null&&_h(e.stateNode.containerInfo),ls(e),null;case 10:return ky(e.type._context),ls(e),null;case 17:return $s(e.type)&&em(),ls(e),null;case 19:if(Un(Xn),i=e.memoizedState,i===null)return ls(e),null;if(r=(e.flags&128)!==0,a=i.rendering,a===null)if(r)Rd(i,!1);else{if(Rr!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=om(t),a!==null){for(e.flags|=128,Rd(i,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,t=a.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ln(Xn,Xn.current&1|2),e.child}t=t.sibling}i.tail!==null&&pr()>Uu&&(e.flags|=128,r=!0,Rd(i,!1),e.lanes=4194304)}else{if(!r)if(t=om(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Rd(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!Hn)return ls(e),null}else 2*pr()-i.renderingStartTime>Uu&&n!==1073741824&&(e.flags|=128,r=!0,Rd(i,!1),e.lanes=4194304);i.isBackwards?(a.sibling=e.child,e.child=a):(n=i.last,n!==null?n.sibling=a:e.child=a,i.last=a)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=pr(),e.sibling=null,n=Xn.current,Ln(Xn,r?n&1|2:n&1),e):(ls(e),null);case 22:case 23:return qy(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?oi&1073741824&&(ls(e),e.subtreeFlags&6&&(e.flags|=8192)):ls(e),null;case 24:return null;case 25:return null}throw Error(Fe(156,e.tag))}function i8(t,e){switch(Ny(e),e.tag){case 1:return $s(e.type)&&em(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Mu(),Un(Hs),Un(xs),jy(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Py(e),null;case 13:if(Un(Xn),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Fe(340));Du()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Un(Xn),null;case 4:return Mu(),null;case 10:return ky(e.type._context),null;case 22:case 23:return qy(),null;case 24:return null;default:return null}}var Zf=!1,ms=!1,a8=typeof WeakSet=="function"?WeakSet:Set,it=null;function pu(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ar(t,e,r)}else n.current=null}function e2(t,e,n){try{n()}catch(r){ar(t,e,r)}}var ew=!1;function o8(t,e){if(M1=Qp,t=_3(),by(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var a=0,o=-1,l=-1,c=0,d=0,g=t,y=null;t:for(;;){for(var p;g!==n||s!==0&&g.nodeType!==3||(o=a+s),g!==i||r!==0&&g.nodeType!==3||(l=a+r),g.nodeType===3&&(a+=g.nodeValue.length),(p=g.firstChild)!==null;)y=g,g=p;for(;;){if(g===t)break t;if(y===n&&++c===s&&(o=a),y===i&&++d===r&&(l=a),(p=g.nextSibling)!==null)break;g=y,y=g.parentNode}g=p}n=o===-1||l===-1?null:{start:o,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(F1={focusedElem:t,selectionRange:n},Qp=!1,it=e;it!==null;)if(e=it,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,it=t;else for(;it!==null;){e=it;try{var N=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(N!==null){var S=N.memoizedProps,I=N.memoizedState,w=e.stateNode,T=w.getSnapshotBeforeUpdate(e.elementType===e.type?S:Gi(e.type,S),I);w.__reactInternalSnapshotBeforeUpdate=T}break;case 3:var j=e.stateNode.containerInfo;j.nodeType===1?j.textContent="":j.nodeType===9&&j.documentElement&&j.removeChild(j.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Fe(163))}}catch(D){ar(e,e.return,D)}if(t=e.sibling,t!==null){t.return=e.return,it=t;break}it=e.return}return N=ew,ew=!1,N}function nh(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&e2(e,n,i)}s=s.next}while(s!==r)}}function Qm(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function t2(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function v6(t){var e=t.alternate;e!==null&&(t.alternate=null,v6(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[ba],delete e[Sh],delete e[B1],delete e[qI],delete e[HI])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function x6(t){return t.tag===5||t.tag===3||t.tag===4}function tw(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||x6(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function n2(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Zp));else if(r!==4&&(t=t.child,t!==null))for(n2(t,e,n),t=t.sibling;t!==null;)n2(t,e,n),t=t.sibling}function r2(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(r2(t,e,n),t=t.sibling;t!==null;)r2(t,e,n),t=t.sibling}var Qr=null,Ki=!1;function qo(t,e,n){for(n=n.child;n!==null;)w6(t,e,n),n=n.sibling}function w6(t,e,n){if(Aa&&typeof Aa.onCommitFiberUnmount=="function")try{Aa.onCommitFiberUnmount(zm,n)}catch{}switch(n.tag){case 5:ms||pu(n,e);case 6:var r=Qr,s=Ki;Qr=null,qo(t,e,n),Qr=r,Ki=s,Qr!==null&&(Ki?(t=Qr,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Qr.removeChild(n.stateNode));break;case 18:Qr!==null&&(Ki?(t=Qr,n=n.stateNode,t.nodeType===8?f0(t.parentNode,n):t.nodeType===1&&f0(t,n),xh(t)):f0(Qr,n.stateNode));break;case 4:r=Qr,s=Ki,Qr=n.stateNode.containerInfo,Ki=!0,qo(t,e,n),Qr=r,Ki=s;break;case 0:case 11:case 14:case 15:if(!ms&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&e2(n,e,a),s=s.next}while(s!==r)}qo(t,e,n);break;case 1:if(!ms&&(pu(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){ar(n,e,o)}qo(t,e,n);break;case 21:qo(t,e,n);break;case 22:n.mode&1?(ms=(r=ms)||n.memoizedState!==null,qo(t,e,n),ms=r):qo(t,e,n);break;default:qo(t,e,n)}}function nw(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new a8),e.forEach(function(r){var s=g8.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function $i(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,a=e,o=a;e:for(;o!==null;){switch(o.tag){case 5:Qr=o.stateNode,Ki=!1;break e;case 3:Qr=o.stateNode.containerInfo,Ki=!0;break e;case 4:Qr=o.stateNode.containerInfo,Ki=!0;break e}o=o.return}if(Qr===null)throw Error(Fe(160));w6(i,a,s),Qr=null,Ki=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){ar(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)b6(e,t),e=e.sibling}function b6(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if($i(e,t),ga(t),r&4){try{nh(3,t,t.return),Qm(3,t)}catch(S){ar(t,t.return,S)}try{nh(5,t,t.return)}catch(S){ar(t,t.return,S)}}break;case 1:$i(e,t),ga(t),r&512&&n!==null&&pu(n,n.return);break;case 5:if($i(e,t),ga(t),r&512&&n!==null&&pu(n,n.return),t.flags&32){var s=t.stateNode;try{mh(s,"")}catch(S){ar(t,t.return,S)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,a=n!==null?n.memoizedProps:i,o=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{o==="input"&&i.type==="radio"&&i.name!=null&&q4(s,i),k1(o,a);var c=k1(o,i);for(a=0;a<l.length;a+=2){var d=l[a],g=l[a+1];d==="style"?K4(s,g):d==="dangerouslySetInnerHTML"?W4(s,g):d==="children"?mh(s,g):ly(s,d,g,c)}switch(o){case"input":_1(s,i);break;case"textarea":H4(s,i);break;case"select":var y=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var p=i.value;p!=null?vu(s,!!i.multiple,p,!1):y!==!!i.multiple&&(i.defaultValue!=null?vu(s,!!i.multiple,i.defaultValue,!0):vu(s,!!i.multiple,i.multiple?[]:"",!1))}s[Sh]=i}catch(S){ar(t,t.return,S)}}break;case 6:if($i(e,t),ga(t),r&4){if(t.stateNode===null)throw Error(Fe(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(S){ar(t,t.return,S)}}break;case 3:if($i(e,t),ga(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{xh(e.containerInfo)}catch(S){ar(t,t.return,S)}break;case 4:$i(e,t),ga(t);break;case 13:$i(e,t),ga(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(By=pr())),r&4&&nw(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(ms=(c=ms)||d,$i(e,t),ms=c):$i(e,t),ga(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(it=t,d=t.child;d!==null;){for(g=it=d;it!==null;){switch(y=it,p=y.child,y.tag){case 0:case 11:case 14:case 15:nh(4,y,y.return);break;case 1:pu(y,y.return);var N=y.stateNode;if(typeof N.componentWillUnmount=="function"){r=y,n=y.return;try{e=r,N.props=e.memoizedProps,N.state=e.memoizedState,N.componentWillUnmount()}catch(S){ar(r,n,S)}}break;case 5:pu(y,y.return);break;case 22:if(y.memoizedState!==null){sw(g);continue}}p!==null?(p.return=y,it=p):sw(g)}d=d.sibling}e:for(d=null,g=t;;){if(g.tag===5){if(d===null){d=g;try{s=g.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(o=g.stateNode,l=g.memoizedProps.style,a=l!=null&&l.hasOwnProperty("display")?l.display:null,o.style.display=G4("display",a))}catch(S){ar(t,t.return,S)}}}else if(g.tag===6){if(d===null)try{g.stateNode.nodeValue=c?"":g.memoizedProps}catch(S){ar(t,t.return,S)}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===t)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===t)break e;for(;g.sibling===null;){if(g.return===null||g.return===t)break e;d===g&&(d=null),g=g.return}d===g&&(d=null),g.sibling.return=g.return,g=g.sibling}}break;case 19:$i(e,t),ga(t),r&4&&nw(t);break;case 21:break;default:$i(e,t),ga(t)}}function ga(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(x6(n)){var r=n;break e}n=n.return}throw Error(Fe(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(mh(s,""),r.flags&=-33);var i=tw(t);r2(t,i,s);break;case 3:case 4:var a=r.stateNode.containerInfo,o=tw(t);n2(t,o,a);break;default:throw Error(Fe(161))}}catch(l){ar(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function l8(t,e,n){it=t,_6(t)}function _6(t,e,n){for(var r=(t.mode&1)!==0;it!==null;){var s=it,i=s.child;if(s.tag===22&&r){var a=s.memoizedState!==null||Zf;if(!a){var o=s.alternate,l=o!==null&&o.memoizedState!==null||ms;o=Zf;var c=ms;if(Zf=a,(ms=l)&&!c)for(it=s;it!==null;)a=it,l=a.child,a.tag===22&&a.memoizedState!==null?iw(s):l!==null?(l.return=a,it=l):iw(s);for(;i!==null;)it=i,_6(i),i=i.sibling;it=s,Zf=o,ms=c}rw(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,it=i):rw(t)}}function rw(t){for(;it!==null;){var e=it;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ms||Qm(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!ms)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Gi(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Bx(e,i,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Bx(e,a,n)}break;case 5:var o=e.stateNode;if(n===null&&e.flags&4){n=o;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var g=d.dehydrated;g!==null&&xh(g)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Fe(163))}ms||e.flags&512&&t2(e)}catch(y){ar(e,e.return,y)}}if(e===t){it=null;break}if(n=e.sibling,n!==null){n.return=e.return,it=n;break}it=e.return}}function sw(t){for(;it!==null;){var e=it;if(e===t){it=null;break}var n=e.sibling;if(n!==null){n.return=e.return,it=n;break}it=e.return}}function iw(t){for(;it!==null;){var e=it;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Qm(4,e)}catch(l){ar(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){ar(e,s,l)}}var i=e.return;try{t2(e)}catch(l){ar(e,i,l)}break;case 5:var a=e.return;try{t2(e)}catch(l){ar(e,a,l)}}}catch(l){ar(e,e.return,l)}if(e===t){it=null;break}var o=e.sibling;if(o!==null){o.return=e.return,it=o;break}it=e.return}}var c8=Math.ceil,um=xo.ReactCurrentDispatcher,Uy=xo.ReactCurrentOwner,ji=xo.ReactCurrentBatchConfig,an=0,zr=null,wr=null,es=0,oi=0,mu=kl(0),Rr=0,Ch=null,hc=0,Xm=0,Vy=0,rh=null,Vs=null,By=0,Uu=1/0,Ka=null,dm=!1,s2=null,fl=null,ep=!1,rl=null,hm=0,sh=0,i2=null,kp=-1,Tp=0;function Cs(){return an&6?pr():kp!==-1?kp:kp=pr()}function pl(t){return t.mode&1?an&2&&es!==0?es&-es:WI.transition!==null?(Tp===0&&(Tp=a3()),Tp):(t=wn,t!==0||(t=window.event,t=t===void 0?16:f3(t.type)),t):1}function Xi(t,e,n,r){if(50<sh)throw sh=0,i2=null,Error(Fe(185));Xh(t,n,r),(!(an&2)||t!==zr)&&(t===zr&&(!(an&2)&&(Xm|=n),Rr===4&&Qo(t,es)),Ws(t,r),n===1&&an===0&&!(e.mode&1)&&(Uu=pr()+500,Gm&&Tl()))}function Ws(t,e){var n=t.callbackNode;WT(t,e);var r=Yp(t,t===zr?es:0);if(r===0)n!==null&&px(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&px(n),e===1)t.tag===0?$I(aw.bind(null,t)):j3(aw.bind(null,t)),BI(function(){!(an&6)&&Tl()}),n=null;else{switch(o3(r)){case 1:n=fy;break;case 4:n=s3;break;case 16:n=Kp;break;case 536870912:n=i3;break;default:n=Kp}n=C6(n,N6.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function N6(t,e){if(kp=-1,Tp=0,an&6)throw Error(Fe(327));var n=t.callbackNode;if(Nu()&&t.callbackNode!==n)return null;var r=Yp(t,t===zr?es:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=fm(t,r);else{e=r;var s=an;an|=2;var i=A6();(zr!==t||es!==e)&&(Ka=null,Uu=pr()+500,sc(t,e));do try{h8();break}catch(o){S6(t,o)}while(!0);Ey(),um.current=i,an=s,wr!==null?e=0:(zr=null,es=0,e=Rr)}if(e!==0){if(e===2&&(s=j1(t),s!==0&&(r=s,e=a2(t,s))),e===1)throw n=Ch,sc(t,0),Qo(t,r),Ws(t,pr()),n;if(e===6)Qo(t,r);else{if(s=t.current.alternate,!(r&30)&&!u8(s)&&(e=fm(t,r),e===2&&(i=j1(t),i!==0&&(r=i,e=a2(t,i))),e===1))throw n=Ch,sc(t,0),Qo(t,r),Ws(t,pr()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(Fe(345));case 2:Yl(t,Vs,Ka);break;case 3:if(Qo(t,r),(r&130023424)===r&&(e=By+500-pr(),10<e)){if(Yp(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Cs(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=V1(Yl.bind(null,t,Vs,Ka),e);break}Yl(t,Vs,Ka);break;case 4:if(Qo(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var a=31-Qi(r);i=1<<a,a=e[a],a>s&&(s=a),r&=~i}if(r=s,r=pr()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*c8(r/1960))-r,10<r){t.timeoutHandle=V1(Yl.bind(null,t,Vs,Ka),r);break}Yl(t,Vs,Ka);break;case 5:Yl(t,Vs,Ka);break;default:throw Error(Fe(329))}}}return Ws(t,pr()),t.callbackNode===n?N6.bind(null,t):null}function a2(t,e){var n=rh;return t.current.memoizedState.isDehydrated&&(sc(t,e).flags|=256),t=fm(t,e),t!==2&&(e=Vs,Vs=n,e!==null&&o2(e)),t}function o2(t){Vs===null?Vs=t:Vs.push.apply(Vs,t)}function u8(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Ji(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Qo(t,e){for(e&=~Vy,e&=~Xm,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Qi(e),r=1<<n;t[n]=-1,e&=~r}}function aw(t){if(an&6)throw Error(Fe(327));Nu();var e=Yp(t,0);if(!(e&1))return Ws(t,pr()),null;var n=fm(t,e);if(t.tag!==0&&n===2){var r=j1(t);r!==0&&(e=r,n=a2(t,r))}if(n===1)throw n=Ch,sc(t,0),Qo(t,e),Ws(t,pr()),n;if(n===6)throw Error(Fe(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Yl(t,Vs,Ka),Ws(t,pr()),null}function zy(t,e){var n=an;an|=1;try{return t(e)}finally{an=n,an===0&&(Uu=pr()+500,Gm&&Tl())}}function fc(t){rl!==null&&rl.tag===0&&!(an&6)&&Nu();var e=an;an|=1;var n=ji.transition,r=wn;try{if(ji.transition=null,wn=1,t)return t()}finally{wn=r,ji.transition=n,an=e,!(an&6)&&Tl()}}function qy(){oi=mu.current,Un(mu)}function sc(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,VI(n)),wr!==null)for(n=wr.return;n!==null;){var r=n;switch(Ny(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&em();break;case 3:Mu(),Un(Hs),Un(xs),jy();break;case 5:Py(r);break;case 4:Mu();break;case 13:Un(Xn);break;case 19:Un(Xn);break;case 10:ky(r.type._context);break;case 22:case 23:qy()}n=n.return}if(zr=t,wr=t=ml(t.current,null),es=oi=e,Rr=0,Ch=null,Vy=Xm=hc=0,Vs=rh=null,ec!==null){for(e=0;e<ec.length;e++)if(n=ec[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var a=i.next;i.next=s,r.next=a}n.pending=r}ec=null}return t}function S6(t,e){do{var n=wr;try{if(Ey(),Sp.current=cm,lm){for(var r=Jn.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}lm=!1}if(dc=0,Ur=Lr=Jn=null,th=!1,kh=0,Uy.current=null,n===null||n.return===null){Rr=1,Ch=e,wr=null;break}e:{var i=t,a=n.return,o=n,l=e;if(e=es,o.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,d=o,g=d.tag;if(!(d.mode&1)&&(g===0||g===11||g===15)){var y=d.alternate;y?(d.updateQueue=y.updateQueue,d.memoizedState=y.memoizedState,d.lanes=y.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=Gx(a);if(p!==null){p.flags&=-257,Kx(p,a,o,i,e),p.mode&1&&Wx(i,c,e),e=p,l=c;var N=e.updateQueue;if(N===null){var S=new Set;S.add(l),e.updateQueue=S}else N.add(l);break e}else{if(!(e&1)){Wx(i,c,e),Hy();break e}l=Error(Fe(426))}}else if(Hn&&o.mode&1){var I=Gx(a);if(I!==null){!(I.flags&65536)&&(I.flags|=256),Kx(I,a,o,i,e),Sy(Fu(l,o));break e}}i=l=Fu(l,o),Rr!==4&&(Rr=2),rh===null?rh=[i]:rh.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var w=o6(i,l,e);Vx(i,w);break e;case 1:o=l;var T=i.type,j=i.stateNode;if(!(i.flags&128)&&(typeof T.getDerivedStateFromError=="function"||j!==null&&typeof j.componentDidCatch=="function"&&(fl===null||!fl.has(j)))){i.flags|=65536,e&=-e,i.lanes|=e;var D=l6(i,o,e);Vx(i,D);break e}}i=i.return}while(i!==null)}k6(n)}catch(H){e=H,wr===n&&n!==null&&(wr=n=n.return);continue}break}while(!0)}function A6(){var t=um.current;return um.current=cm,t===null?cm:t}function Hy(){(Rr===0||Rr===3||Rr===2)&&(Rr=4),zr===null||!(hc&268435455)&&!(Xm&268435455)||Qo(zr,es)}function fm(t,e){var n=an;an|=2;var r=A6();(zr!==t||es!==e)&&(Ka=null,sc(t,e));do try{d8();break}catch(s){S6(t,s)}while(!0);if(Ey(),an=n,um.current=r,wr!==null)throw Error(Fe(261));return zr=null,es=0,Rr}function d8(){for(;wr!==null;)E6(wr)}function h8(){for(;wr!==null&&!MT();)E6(wr)}function E6(t){var e=I6(t.alternate,t,oi);t.memoizedProps=t.pendingProps,e===null?k6(t):wr=e,Uy.current=null}function k6(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=i8(n,e),n!==null){n.flags&=32767,wr=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Rr=6,wr=null;return}}else if(n=s8(n,e,oi),n!==null){wr=n;return}if(e=e.sibling,e!==null){wr=e;return}wr=e=t}while(e!==null);Rr===0&&(Rr=5)}function Yl(t,e,n){var r=wn,s=ji.transition;try{ji.transition=null,wn=1,f8(t,e,n,r)}finally{ji.transition=s,wn=r}return null}function f8(t,e,n,r){do Nu();while(rl!==null);if(an&6)throw Error(Fe(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Fe(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(GT(t,i),t===zr&&(wr=zr=null,es=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ep||(ep=!0,C6(Kp,function(){return Nu(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=ji.transition,ji.transition=null;var a=wn;wn=1;var o=an;an|=4,Uy.current=null,o8(t,n),b6(n,t),LI(F1),Qp=!!M1,F1=M1=null,t.current=n,l8(n),FT(),an=o,wn=a,ji.transition=i}else t.current=n;if(ep&&(ep=!1,rl=t,hm=s),i=t.pendingLanes,i===0&&(fl=null),BT(n.stateNode),Ws(t,pr()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(dm)throw dm=!1,t=s2,s2=null,t;return hm&1&&t.tag!==0&&Nu(),i=t.pendingLanes,i&1?t===i2?sh++:(sh=0,i2=t):sh=0,Tl(),null}function Nu(){if(rl!==null){var t=o3(hm),e=ji.transition,n=wn;try{if(ji.transition=null,wn=16>t?16:t,rl===null)var r=!1;else{if(t=rl,rl=null,hm=0,an&6)throw Error(Fe(331));var s=an;for(an|=4,it=t.current;it!==null;){var i=it,a=i.child;if(it.flags&16){var o=i.deletions;if(o!==null){for(var l=0;l<o.length;l++){var c=o[l];for(it=c;it!==null;){var d=it;switch(d.tag){case 0:case 11:case 15:nh(8,d,i)}var g=d.child;if(g!==null)g.return=d,it=g;else for(;it!==null;){d=it;var y=d.sibling,p=d.return;if(v6(d),d===c){it=null;break}if(y!==null){y.return=p,it=y;break}it=p}}}var N=i.alternate;if(N!==null){var S=N.child;if(S!==null){N.child=null;do{var I=S.sibling;S.sibling=null,S=I}while(S!==null)}}it=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,it=a;else e:for(;it!==null;){if(i=it,i.flags&2048)switch(i.tag){case 0:case 11:case 15:nh(9,i,i.return)}var w=i.sibling;if(w!==null){w.return=i.return,it=w;break e}it=i.return}}var T=t.current;for(it=T;it!==null;){a=it;var j=a.child;if(a.subtreeFlags&2064&&j!==null)j.return=a,it=j;else e:for(a=T;it!==null;){if(o=it,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:Qm(9,o)}}catch(H){ar(o,o.return,H)}if(o===a){it=null;break e}var D=o.sibling;if(D!==null){D.return=o.return,it=D;break e}it=o.return}}if(an=s,Tl(),Aa&&typeof Aa.onPostCommitFiberRoot=="function")try{Aa.onPostCommitFiberRoot(zm,t)}catch{}r=!0}return r}finally{wn=n,ji.transition=e}}return!1}function ow(t,e,n){e=Fu(n,e),e=o6(t,e,1),t=hl(t,e,1),e=Cs(),t!==null&&(Xh(t,1,e),Ws(t,e))}function ar(t,e,n){if(t.tag===3)ow(t,t,n);else for(;e!==null;){if(e.tag===3){ow(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(fl===null||!fl.has(r))){t=Fu(n,t),t=l6(e,t,1),e=hl(e,t,1),t=Cs(),e!==null&&(Xh(e,1,t),Ws(e,t));break}}e=e.return}}function p8(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Cs(),t.pingedLanes|=t.suspendedLanes&n,zr===t&&(es&n)===n&&(Rr===4||Rr===3&&(es&130023424)===es&&500>pr()-By?sc(t,0):Vy|=n),Ws(t,e)}function T6(t,e){e===0&&(t.mode&1?(e=Hf,Hf<<=1,!(Hf&130023424)&&(Hf=4194304)):e=1);var n=Cs();t=ho(t,e),t!==null&&(Xh(t,e,n),Ws(t,n))}function m8(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),T6(t,n)}function g8(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Fe(314))}r!==null&&r.delete(e),T6(t,n)}var I6;I6=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Hs.current)zs=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return zs=!1,r8(t,e,n);zs=!!(t.flags&131072)}else zs=!1,Hn&&e.flags&1048576&&L3(e,rm,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Ep(t,e),t=e.pendingProps;var s=Ru(e,xs.current);_u(e,n),s=Ry(null,e,r,t,s,n);var i=Dy();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,$s(r)?(i=!0,tm(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Iy(e),s.updater=Ym,e.stateNode=s,s._reactInternals=e,G1(e,r,t,n),e=Q1(null,e,r,!0,i,n)):(e.tag=0,Hn&&i&&_y(e),Is(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Ep(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=v8(r),t=Gi(r,t),s){case 0:e=Y1(null,e,r,t,n);break e;case 1:e=Xx(null,e,r,t,n);break e;case 11:e=Yx(null,e,r,t,n);break e;case 14:e=Qx(null,e,r,Gi(r.type,t),n);break e}throw Error(Fe(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Gi(r,s),Y1(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Gi(r,s),Xx(t,e,r,s,n);case 3:e:{if(h6(e),t===null)throw Error(Fe(387));r=e.pendingProps,i=e.memoizedState,s=i.element,U3(t,e),am(e,r,null,n);var a=e.memoizedState;if(r=a.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Fu(Error(Fe(423)),e),e=Jx(t,e,r,n,s);break e}else if(r!==s){s=Fu(Error(Fe(424)),e),e=Jx(t,e,r,n,s);break e}else for(li=dl(e.stateNode.containerInfo.firstChild),hi=e,Hn=!0,Yi=null,n=M3(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Du(),r===s){e=fo(t,e,n);break e}Is(t,e,r,n)}e=e.child}return e;case 5:return V3(e),t===null&&H1(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,a=s.children,U1(r,s)?a=null:i!==null&&U1(r,i)&&(e.flags|=32),d6(t,e),Is(t,e,a,n),e.child;case 6:return t===null&&H1(e),null;case 13:return f6(t,e,n);case 4:return Cy(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Ou(e,null,r,n):Is(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Gi(r,s),Yx(t,e,r,s,n);case 7:return Is(t,e,e.pendingProps,n),e.child;case 8:return Is(t,e,e.pendingProps.children,n),e.child;case 12:return Is(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,a=s.value,Ln(sm,r._currentValue),r._currentValue=a,i!==null)if(Ji(i.value,a)){if(i.children===s.children&&!Hs.current){e=fo(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var o=i.dependencies;if(o!==null){a=i.child;for(var l=o.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=so(-1,n&-n),l.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),$1(i.return,n,e),o.lanes|=n;break}l=l.next}}else if(i.tag===10)a=i.type===e.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(Fe(341));a.lanes|=n,o=a.alternate,o!==null&&(o.lanes|=n),$1(a,n,e),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===e){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}Is(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,_u(e,n),s=Ri(s),r=r(s),e.flags|=1,Is(t,e,r,n),e.child;case 14:return r=e.type,s=Gi(r,e.pendingProps),s=Gi(r.type,s),Qx(t,e,r,s,n);case 15:return c6(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Gi(r,s),Ep(t,e),e.tag=1,$s(r)?(t=!0,tm(e)):t=!1,_u(e,n),a6(e,r,s),G1(e,r,s,n),Q1(null,e,r,!0,t,n);case 19:return p6(t,e,n);case 22:return u6(t,e,n)}throw Error(Fe(156,e.tag))};function C6(t,e){return r3(t,e)}function y8(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pi(t,e,n,r){return new y8(t,e,n,r)}function $y(t){return t=t.prototype,!(!t||!t.isReactComponent)}function v8(t){if(typeof t=="function")return $y(t)?1:0;if(t!=null){if(t=t.$$typeof,t===uy)return 11;if(t===dy)return 14}return 2}function ml(t,e){var n=t.alternate;return n===null?(n=Pi(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Ip(t,e,n,r,s,i){var a=2;if(r=t,typeof t=="function")$y(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case iu:return ic(n.children,s,i,e);case cy:a=8,s|=8;break;case y1:return t=Pi(12,n,e,s|2),t.elementType=y1,t.lanes=i,t;case v1:return t=Pi(13,n,e,s),t.elementType=v1,t.lanes=i,t;case x1:return t=Pi(19,n,e,s),t.elementType=x1,t.lanes=i,t;case V4:return Jm(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case F4:a=10;break e;case U4:a=9;break e;case uy:a=11;break e;case dy:a=14;break e;case Go:a=16,r=null;break e}throw Error(Fe(130,t==null?t:typeof t,""))}return e=Pi(a,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function ic(t,e,n,r){return t=Pi(7,t,r,e),t.lanes=n,t}function Jm(t,e,n,r){return t=Pi(22,t,r,e),t.elementType=V4,t.lanes=n,t.stateNode={isHidden:!1},t}function b0(t,e,n){return t=Pi(6,t,null,e),t.lanes=n,t}function _0(t,e,n){return e=Pi(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function x8(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=n0(0),this.expirationTimes=n0(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=n0(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Wy(t,e,n,r,s,i,a,o,l){return t=new x8(t,e,n,o,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Pi(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Iy(i),t}function w8(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:su,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function P6(t){if(!t)return wl;t=t._reactInternals;e:{if(Ec(t)!==t||t.tag!==1)throw Error(Fe(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if($s(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Fe(171))}if(t.tag===1){var n=t.type;if($s(n))return P3(t,n,e)}return e}function j6(t,e,n,r,s,i,a,o,l){return t=Wy(n,r,!0,t,s,i,a,o,l),t.context=P6(null),n=t.current,r=Cs(),s=pl(n),i=so(r,s),i.callback=e??null,hl(n,i,s),t.current.lanes=s,Xh(t,s,r),Ws(t,r),t}function Zm(t,e,n,r){var s=e.current,i=Cs(),a=pl(s);return n=P6(n),e.context===null?e.context=n:e.pendingContext=n,e=so(i,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=hl(s,e,a),t!==null&&(Xi(t,s,a,i),Np(t,s,a)),a}function pm(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function lw(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Gy(t,e){lw(t,e),(t=t.alternate)&&lw(t,e)}function b8(){return null}var L6=typeof reportError=="function"?reportError:function(t){console.error(t)};function Ky(t){this._internalRoot=t}eg.prototype.render=Ky.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Fe(409));Zm(t,e,null,null)};eg.prototype.unmount=Ky.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;fc(function(){Zm(null,t,null,null)}),e[uo]=null}};function eg(t){this._internalRoot=t}eg.prototype.unstable_scheduleHydration=function(t){if(t){var e=u3();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Yo.length&&e!==0&&e<Yo[n].priority;n++);Yo.splice(n,0,t),n===0&&h3(t)}};function Yy(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function tg(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function cw(){}function _8(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=pm(a);i.call(c)}}var a=j6(e,r,t,0,null,!1,!1,"",cw);return t._reactRootContainer=a,t[uo]=a.current,_h(t.nodeType===8?t.parentNode:t),fc(),a}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var o=r;r=function(){var c=pm(l);o.call(c)}}var l=Wy(t,0,!1,null,null,!1,!1,"",cw);return t._reactRootContainer=l,t[uo]=l.current,_h(t.nodeType===8?t.parentNode:t),fc(function(){Zm(e,l,n,r)}),l}function ng(t,e,n,r,s){var i=n._reactRootContainer;if(i){var a=i;if(typeof s=="function"){var o=s;s=function(){var l=pm(a);o.call(l)}}Zm(e,a,t,s)}else a=_8(n,e,t,s,r);return pm(a)}l3=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=zd(e.pendingLanes);n!==0&&(py(e,n|1),Ws(e,pr()),!(an&6)&&(Uu=pr()+500,Tl()))}break;case 13:fc(function(){var r=ho(t,1);if(r!==null){var s=Cs();Xi(r,t,1,s)}}),Gy(t,1)}};my=function(t){if(t.tag===13){var e=ho(t,134217728);if(e!==null){var n=Cs();Xi(e,t,134217728,n)}Gy(t,134217728)}};c3=function(t){if(t.tag===13){var e=pl(t),n=ho(t,e);if(n!==null){var r=Cs();Xi(n,t,e,r)}Gy(t,e)}};u3=function(){return wn};d3=function(t,e){var n=wn;try{return wn=t,e()}finally{wn=n}};I1=function(t,e,n){switch(e){case"input":if(_1(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Wm(r);if(!s)throw Error(Fe(90));z4(r),_1(r,s)}}}break;case"textarea":H4(t,n);break;case"select":e=n.value,e!=null&&vu(t,!!n.multiple,e,!1)}};X4=zy;J4=fc;var N8={usingClientEntryPoint:!1,Events:[Zh,cu,Wm,Y4,Q4,zy]},Dd={findFiberByHostInstance:Zl,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},S8={bundleType:Dd.bundleType,version:Dd.version,rendererPackageName:Dd.rendererPackageName,rendererConfig:Dd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:xo.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=t3(t),t===null?null:t.stateNode},findFiberByHostInstance:Dd.findFiberByHostInstance||b8,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var tp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!tp.isDisabled&&tp.supportsFiber)try{zm=tp.inject(S8),Aa=tp}catch{}}pi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=N8;pi.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Yy(e))throw Error(Fe(200));return w8(t,e,null,n)};pi.createRoot=function(t,e){if(!Yy(t))throw Error(Fe(299));var n=!1,r="",s=L6;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Wy(t,1,!1,null,null,n,!1,r,s),t[uo]=e.current,_h(t.nodeType===8?t.parentNode:t),new Ky(e)};pi.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Fe(188)):(t=Object.keys(t).join(","),Error(Fe(268,t)));return t=t3(e),t=t===null?null:t.stateNode,t};pi.flushSync=function(t){return fc(t)};pi.hydrate=function(t,e,n){if(!tg(e))throw Error(Fe(200));return ng(null,t,e,!0,n)};pi.hydrateRoot=function(t,e,n){if(!Yy(t))throw Error(Fe(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",a=L6;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=j6(e,null,t,1,n??null,s,!1,i,a),t[uo]=e.current,_h(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new eg(e)};pi.render=function(t,e,n){if(!tg(e))throw Error(Fe(200));return ng(null,t,e,!1,n)};pi.unmountComponentAtNode=function(t){if(!tg(t))throw Error(Fe(40));return t._reactRootContainer?(fc(function(){ng(null,null,t,!1,function(){t._reactRootContainer=null,t[uo]=null})}),!0):!1};pi.unstable_batchedUpdates=zy;pi.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!tg(n))throw Error(Fe(200));if(t==null||t._reactInternals===void 0)throw Error(Fe(38));return ng(t,e,n,!1,r)};pi.version="18.3.1-next-f1338f8080-20240426";function R6(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(R6)}catch(t){console.error(t)}}R6(),R4.exports=pi;var A8=R4.exports,D6,uw=A8;D6=uw.createRoot,uw.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ph(){return Ph=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ph.apply(this,arguments)}var sl;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(sl||(sl={}));const dw="popstate";function E8(t){t===void 0&&(t={});function e(s,i){let{pathname:a="/",search:o="",hash:l=""}=kc(s.location.hash.substr(1));return!a.startsWith("/")&&!a.startsWith(".")&&(a="/"+a),l2("",{pathname:a,search:o,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(s,i){let a=s.document.querySelector("base"),o="";if(a&&a.getAttribute("href")){let l=s.location.href,c=l.indexOf("#");o=c===-1?l:l.slice(0,c)}return o+"#"+(typeof i=="string"?i:mm(i))}function r(s,i){rg(s.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(i)+")")}return T8(e,n,r,t)}function vr(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function rg(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function k8(){return Math.random().toString(36).substr(2,8)}function hw(t,e){return{usr:t.state,key:t.key,idx:e}}function l2(t,e,n,r){return n===void 0&&(n=null),Ph({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?kc(e):e,{state:n,key:e&&e.key||r||k8()})}function mm(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function kc(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function T8(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,a=s.history,o=sl.Pop,l=null,c=d();c==null&&(c=0,a.replaceState(Ph({},a.state,{idx:c}),""));function d(){return(a.state||{idx:null}).idx}function g(){o=sl.Pop;let I=d(),w=I==null?null:I-c;c=I,l&&l({action:o,location:S.location,delta:w})}function y(I,w){o=sl.Push;let T=l2(S.location,I,w);n&&n(T,I),c=d()+1;let j=hw(T,c),D=S.createHref(T);try{a.pushState(j,"",D)}catch(H){if(H instanceof DOMException&&H.name==="DataCloneError")throw H;s.location.assign(D)}i&&l&&l({action:o,location:S.location,delta:1})}function p(I,w){o=sl.Replace;let T=l2(S.location,I,w);n&&n(T,I),c=d();let j=hw(T,c),D=S.createHref(T);a.replaceState(j,"",D),i&&l&&l({action:o,location:S.location,delta:0})}function N(I){let w=s.location.origin!=="null"?s.location.origin:s.location.href,T=typeof I=="string"?I:mm(I);return T=T.replace(/ $/,"%20"),vr(w,"No window.location.(origin|href) available to create URL for href: "+T),new URL(T,w)}let S={get action(){return o},get location(){return t(s,a)},listen(I){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(dw,g),l=I,()=>{s.removeEventListener(dw,g),l=null}},createHref(I){return e(s,I)},createURL:N,encodeLocation(I){let w=N(I);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:y,replace:p,go(I){return a.go(I)}};return S}var fw;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(fw||(fw={}));function I8(t,e,n){return n===void 0&&(n="/"),C8(t,e,n)}function C8(t,e,n,r){let s=typeof e=="string"?kc(e):e,i=Qy(s.pathname||"/",n);if(i==null)return null;let a=O6(t);P8(a);let o=null;for(let l=0;o==null&&l<a.length;++l){let c=q8(i);o=V8(a[l],c)}return o}function O6(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,a,o)=>{let l={relativePath:o===void 0?i.path||"":o,caseSensitive:i.caseSensitive===!0,childrenIndex:a,route:i};l.relativePath.startsWith("/")&&(vr(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=gl([r,l.relativePath]),d=n.concat(l);i.children&&i.children.length>0&&(vr(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),O6(i.children,e,d,c)),!(i.path==null&&!i.index)&&e.push({path:c,score:F8(c,i.index),routesMeta:d})};return t.forEach((i,a)=>{var o;if(i.path===""||!((o=i.path)!=null&&o.includes("?")))s(i,a);else for(let l of M6(i.path))s(i,a,l)}),e}function M6(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let a=M6(r.join("/")),o=[];return o.push(...a.map(l=>l===""?i:[i,l].join("/"))),s&&o.push(...a),o.map(l=>t.startsWith("/")&&l===""?"/":l)}function P8(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:U8(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const j8=/^:[\w-]+$/,L8=3,R8=2,D8=1,O8=10,M8=-2,pw=t=>t==="*";function F8(t,e){let n=t.split("/"),r=n.length;return n.some(pw)&&(r+=M8),e&&(r+=R8),n.filter(s=>!pw(s)).reduce((s,i)=>s+(j8.test(i)?L8:i===""?D8:O8),r)}function U8(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function V8(t,e,n){let{routesMeta:r}=t,s={},i="/",a=[];for(let o=0;o<r.length;++o){let l=r[o],c=o===r.length-1,d=i==="/"?e:e.slice(i.length)||"/",g=B8({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},d),y=l.route;if(!g)return null;Object.assign(s,g.params),a.push({params:s,pathname:gl([i,g.pathname]),pathnameBase:K8(gl([i,g.pathnameBase])),route:y}),g.pathnameBase!=="/"&&(i=gl([i,g.pathnameBase]))}return a}function B8(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=z8(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],a=i.replace(/(.)\/+$/,"$1"),o=s.slice(1);return{params:r.reduce((c,d,g)=>{let{paramName:y,isOptional:p}=d;if(y==="*"){let S=o[g]||"";a=i.slice(0,i.length-S.length).replace(/(.)\/+$/,"$1")}const N=o[g];return p&&!N?c[y]=void 0:c[y]=(N||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:a,pattern:t}}function z8(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),rg(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,o,l)=>(r.push({paramName:o,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function q8(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return rg(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Qy(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const H8=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,$8=t=>H8.test(t);function W8(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?kc(t):t,i;if(n)if($8(n))i=n;else{if(n.includes("//")){let a=n;n=n.replace(/\/\/+/g,"/"),rg(!1,"Pathnames cannot have embedded double slashes - normalizing "+(a+" -> "+n))}n.startsWith("/")?i=mw(n.substring(1),"/"):i=mw(n,e)}else i=e;return{pathname:i,search:Y8(r),hash:Q8(s)}}function mw(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function N0(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function G8(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Xy(t,e){let n=G8(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Jy(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=kc(t):(s=Ph({},t),vr(!s.pathname||!s.pathname.includes("?"),N0("?","pathname","search",s)),vr(!s.pathname||!s.pathname.includes("#"),N0("#","pathname","hash",s)),vr(!s.search||!s.search.includes("#"),N0("#","search","hash",s)));let i=t===""||s.pathname==="",a=i?"/":s.pathname,o;if(a==null)o=n;else{let g=e.length-1;if(!r&&a.startsWith("..")){let y=a.split("/");for(;y[0]==="..";)y.shift(),g-=1;s.pathname=y.join("/")}o=g>=0?e[g]:"/"}let l=W8(s,o),c=a&&a!=="/"&&a.endsWith("/"),d=(i||a===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||d)&&(l.pathname+="/"),l}const gl=t=>t.join("/").replace(/\/\/+/g,"/"),K8=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Y8=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Q8=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function X8(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const F6=["post","put","patch","delete"];new Set(F6);const J8=["get",...F6];new Set(J8);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function jh(){return jh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},jh.apply(this,arguments)}const Zy=se.createContext(null),Z8=se.createContext(null),Il=se.createContext(null),sg=se.createContext(null),wo=se.createContext({outlet:null,matches:[],isDataRoute:!1}),U6=se.createContext(null);function eC(t,e){let{relative:n}=e===void 0?{}:e;Ju()||vr(!1);let{basename:r,navigator:s}=se.useContext(Il),{hash:i,pathname:a,search:o}=B6(t,{relative:n}),l=a;return r!=="/"&&(l=a==="/"?r:gl([r,a])),s.createHref({pathname:l,search:o,hash:i})}function Ju(){return se.useContext(sg)!=null}function Zu(){return Ju()||vr(!1),se.useContext(sg).location}function V6(t){se.useContext(Il).static||se.useLayoutEffect(t)}function qr(){let{isDataRoute:t}=se.useContext(wo);return t?fC():tC()}function tC(){Ju()||vr(!1);let t=se.useContext(Zy),{basename:e,future:n,navigator:r}=se.useContext(Il),{matches:s}=se.useContext(wo),{pathname:i}=Zu(),a=JSON.stringify(Xy(s,n.v7_relativeSplatPath)),o=se.useRef(!1);return V6(()=>{o.current=!0}),se.useCallback(function(c,d){if(d===void 0&&(d={}),!o.current)return;if(typeof c=="number"){r.go(c);return}let g=Jy(c,JSON.parse(a),i,d.relative==="path");t==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:gl([e,g.pathname])),(d.replace?r.replace:r.push)(g,d.state,d)},[e,r,a,i,t])}function tf(){let{matches:t}=se.useContext(wo),e=t[t.length-1];return e?e.params:{}}function B6(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=se.useContext(Il),{matches:s}=se.useContext(wo),{pathname:i}=Zu(),a=JSON.stringify(Xy(s,r.v7_relativeSplatPath));return se.useMemo(()=>Jy(t,JSON.parse(a),i,n==="path"),[t,a,i,n])}function nC(t,e){return rC(t,e)}function rC(t,e,n,r){Ju()||vr(!1);let{navigator:s}=se.useContext(Il),{matches:i}=se.useContext(wo),a=i[i.length-1],o=a?a.params:{};a&&a.pathname;let l=a?a.pathnameBase:"/";a&&a.route;let c=Zu(),d;if(e){var g;let I=typeof e=="string"?kc(e):e;l==="/"||(g=I.pathname)!=null&&g.startsWith(l)||vr(!1),d=I}else d=c;let y=d.pathname||"/",p=y;if(l!=="/"){let I=l.replace(/^\//,"").split("/");p="/"+y.replace(/^\//,"").split("/").slice(I.length).join("/")}let N=I8(t,{pathname:p}),S=lC(N&&N.map(I=>Object.assign({},I,{params:Object.assign({},o,I.params),pathname:gl([l,s.encodeLocation?s.encodeLocation(I.pathname).pathname:I.pathname]),pathnameBase:I.pathnameBase==="/"?l:gl([l,s.encodeLocation?s.encodeLocation(I.pathnameBase).pathname:I.pathnameBase])})),i,n,r);return e&&S?se.createElement(sg.Provider,{value:{location:jh({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:sl.Pop}},S):S}function sC(){let t=hC(),e=X8(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return se.createElement(se.Fragment,null,se.createElement("h2",null,"Unexpected Application Error!"),se.createElement("h3",{style:{fontStyle:"italic"}},e),n?se.createElement("pre",{style:s},n):null,null)}const iC=se.createElement(sC,null);class aC extends se.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?se.createElement(wo.Provider,{value:this.props.routeContext},se.createElement(U6.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function oC(t){let{routeContext:e,match:n,children:r}=t,s=se.useContext(Zy);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),se.createElement(wo.Provider,{value:e},r)}function lC(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let a=t,o=(s=n)==null?void 0:s.errors;if(o!=null){let d=a.findIndex(g=>g.route.id&&(o==null?void 0:o[g.route.id])!==void 0);d>=0||vr(!1),a=a.slice(0,Math.min(a.length,d+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<a.length;d++){let g=a[d];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(c=d),g.route.id){let{loaderData:y,errors:p}=n,N=g.route.loader&&y[g.route.id]===void 0&&(!p||p[g.route.id]===void 0);if(g.route.lazy||N){l=!0,c>=0?a=a.slice(0,c+1):a=[a[0]];break}}}return a.reduceRight((d,g,y)=>{let p,N=!1,S=null,I=null;n&&(p=o&&g.route.id?o[g.route.id]:void 0,S=g.route.errorElement||iC,l&&(c<0&&y===0?(pC("route-fallback"),N=!0,I=null):c===y&&(N=!0,I=g.route.hydrateFallbackElement||null)));let w=e.concat(a.slice(0,y+1)),T=()=>{let j;return p?j=S:N?j=I:g.route.Component?j=se.createElement(g.route.Component,null):g.route.element?j=g.route.element:j=d,se.createElement(oC,{match:g,routeContext:{outlet:d,matches:w,isDataRoute:n!=null},children:j})};return n&&(g.route.ErrorBoundary||g.route.errorElement||y===0)?se.createElement(aC,{location:n.location,revalidation:n.revalidation,component:S,error:p,children:T(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):T()},null)}var z6=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(z6||{}),q6=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(q6||{});function cC(t){let e=se.useContext(Zy);return e||vr(!1),e}function uC(t){let e=se.useContext(Z8);return e||vr(!1),e}function dC(t){let e=se.useContext(wo);return e||vr(!1),e}function H6(t){let e=dC(),n=e.matches[e.matches.length-1];return n.route.id||vr(!1),n.route.id}function hC(){var t;let e=se.useContext(U6),n=uC(),r=H6();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function fC(){let{router:t}=cC(z6.UseNavigateStable),e=H6(q6.UseNavigateStable),n=se.useRef(!1);return V6(()=>{n.current=!0}),se.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,jh({fromRouteId:e},i)))},[t,e])}const gw={};function pC(t,e,n){gw[t]||(gw[t]=!0)}function mC(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function gC(t){let{to:e,replace:n,state:r,relative:s}=t;Ju()||vr(!1);let{future:i,static:a}=se.useContext(Il),{matches:o}=se.useContext(wo),{pathname:l}=Zu(),c=qr(),d=Jy(e,Xy(o,i.v7_relativeSplatPath),l,s==="path"),g=JSON.stringify(d);return se.useEffect(()=>c(JSON.parse(g),{replace:n,state:r,relative:s}),[c,g,s,n,r]),null}function On(t){vr(!1)}function yC(t){let{basename:e="/",children:n=null,location:r,navigationType:s=sl.Pop,navigator:i,static:a=!1,future:o}=t;Ju()&&vr(!1);let l=e.replace(/^\/*/,"/"),c=se.useMemo(()=>({basename:l,navigator:i,static:a,future:jh({v7_relativeSplatPath:!1},o)}),[l,o,i,a]);typeof r=="string"&&(r=kc(r));let{pathname:d="/",search:g="",hash:y="",state:p=null,key:N="default"}=r,S=se.useMemo(()=>{let I=Qy(d,l);return I==null?null:{location:{pathname:I,search:g,hash:y,state:p,key:N},navigationType:s}},[l,d,g,y,p,N,s]);return S==null?null:se.createElement(Il.Provider,{value:c},se.createElement(sg.Provider,{children:n,value:S}))}function vC(t){let{children:e,location:n}=t;return nC(c2(e),n)}new Promise(()=>{});function c2(t,e){e===void 0&&(e=[]);let n=[];return se.Children.forEach(t,(r,s)=>{if(!se.isValidElement(r))return;let i=[...e,s];if(r.type===se.Fragment){n.push.apply(n,c2(r.props.children,i));return}r.type!==On&&vr(!1),!r.props.index||!r.props.children||vr(!1);let a={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=c2(r.props.children,i)),n.push(a)}),n}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function u2(){return u2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},u2.apply(this,arguments)}function xC(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function wC(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function bC(t,e){return t.button===0&&(!e||e==="_self")&&!wC(t)}const _C=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],NC="6";try{window.__reactRouterVersion=NC}catch{}const SC="startTransition",yw=pT[SC];function AC(t){let{basename:e,children:n,future:r,window:s}=t,i=se.useRef();i.current==null&&(i.current=E8({window:s,v5Compat:!0}));let a=i.current,[o,l]=se.useState({action:a.action,location:a.location}),{v7_startTransition:c}=r||{},d=se.useCallback(g=>{c&&yw?yw(()=>l(g)):l(g)},[l,c]);return se.useLayoutEffect(()=>a.listen(d),[a,d]),se.useEffect(()=>mC(r),[r]),se.createElement(yC,{basename:e,children:n,location:o.location,navigationType:o.action,navigator:a,future:r})}const EC=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",kC=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,vw=se.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:a,state:o,target:l,to:c,preventScrollReset:d,viewTransition:g}=e,y=xC(e,_C),{basename:p}=se.useContext(Il),N,S=!1;if(typeof c=="string"&&kC.test(c)&&(N=c,EC))try{let j=new URL(window.location.href),D=c.startsWith("//")?new URL(j.protocol+c):new URL(c),H=Qy(D.pathname,p);D.origin===j.origin&&H!=null?c=H+D.search+D.hash:S=!0}catch{}let I=eC(c,{relative:s}),w=TC(c,{replace:a,state:o,target:l,preventScrollReset:d,relative:s,viewTransition:g});function T(j){r&&r(j),j.defaultPrevented||w(j)}return se.createElement("a",u2({},y,{href:N||I,onClick:S||i?r:T,ref:n,target:l}))});var xw;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(xw||(xw={}));var ww;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(ww||(ww={}));function TC(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:a,viewTransition:o}=e===void 0?{}:e,l=qr(),c=Zu(),d=B6(t,{relative:a});return se.useCallback(g=>{if(bC(g,n)){g.preventDefault();let y=r!==void 0?r:mm(c)===mm(d);l(t,{replace:y,state:s,preventScrollReset:i,relative:a,viewTransition:o})}},[c,l,d,r,s,n,t,i,a,o])}var bw={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $6=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},IC=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],a=t[n++],o=t[n++],l=((s&7)<<18|(i&63)<<12|(a&63)<<6|o&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],a=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|a&63)}}return e.join("")},W6={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],a=s+1<t.length,o=a?t[s+1]:0,l=s+2<t.length,c=l?t[s+2]:0,d=i>>2,g=(i&3)<<4|o>>4;let y=(o&15)<<2|c>>6,p=c&63;l||(p=64,a||(y=64)),r.push(n[d],n[g],n[y],n[p])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray($6(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):IC(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],o=s<t.length?n[t.charAt(s)]:0;++s;const c=s<t.length?n[t.charAt(s)]:64;++s;const g=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||o==null||c==null||g==null)throw new CC;const y=i<<2|o>>4;if(r.push(y),c!==64){const p=o<<4&240|c>>2;if(r.push(p),g!==64){const N=c<<6&192|g;r.push(N)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class CC extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const PC=function(t){const e=$6(t);return W6.encodeByteArray(e,!0)},gm=function(t){return PC(t).replace(/\./g,"")},G6=function(t){try{return W6.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LC=()=>jC().__FIREBASE_DEFAULTS__,RC=()=>{if(typeof process>"u"||typeof bw>"u")return;const t=bw.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},DC=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&G6(t[1]);return e&&JSON.parse(e)},ig=()=>{try{return LC()||RC()||DC()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},K6=t=>{var e,n;return(n=(e=ig())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Y6=t=>{const e=K6(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Q6=()=>{var t;return(t=ig())===null||t===void 0?void 0:t.config},X6=t=>{var e;return(e=ig())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OC{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J6(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[gm(JSON.stringify(n)),gm(JSON.stringify(a)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ws(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function MC(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ws())}function FC(){var t;const e=(t=ig())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function UC(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function VC(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function BC(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function zC(){const t=ws();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function qC(){return!FC()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Z6(){try{return typeof indexedDB=="object"}catch{return!1}}function eN(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}function HC(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $C="FirebaseError";class sa extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=$C,Object.setPrototypeOf(this,sa.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Tc.prototype.create)}}class Tc{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],a=i?WC(i,r):"Error",o=`${this.serviceName}: ${a} (${s}).`;return new sa(s,o,r)}}function WC(t,e){return t.replace(GC,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const GC=/\{\$([^}]+)}/g;function KC(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Lh(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],a=e[s];if(_w(i)&&_w(a)){if(!Lh(i,a))return!1}else if(i!==a)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function _w(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nf(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Hd(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function $d(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function YC(t,e){const n=new QC(t,e);return n.subscribe.bind(n)}class QC{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");XC(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=S0),s.error===void 0&&(s.error=S0),s.complete===void 0&&(s.complete=S0);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function XC(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function S0(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _n(t){return t&&t._delegate?t._delegate:t}class Oi{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ql="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JC{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new OC;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(eP(e))try{this.getOrInitializeService({instanceIdentifier:Ql})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Ql){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ql){return this.instances.has(e)}getOptions(e=Ql){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,a]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(i);r===o&&a.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const a=this.instances.get(s);return a&&e(a,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:ZC(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ql){return this.component?this.component.multipleInstances?e:Ql:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function ZC(t){return t===Ql?void 0:t}function eP(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tP{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new JC(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Zt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Zt||(Zt={}));const nP={debug:Zt.DEBUG,verbose:Zt.VERBOSE,info:Zt.INFO,warn:Zt.WARN,error:Zt.ERROR,silent:Zt.SILENT},rP=Zt.INFO,sP={[Zt.DEBUG]:"log",[Zt.VERBOSE]:"log",[Zt.INFO]:"info",[Zt.WARN]:"warn",[Zt.ERROR]:"error"},iP=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=sP[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class ev{constructor(e){this.name=e,this._logLevel=rP,this._logHandler=iP,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Zt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?nP[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Zt.DEBUG,...e),this._logHandler(this,Zt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Zt.VERBOSE,...e),this._logHandler(this,Zt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Zt.INFO,...e),this._logHandler(this,Zt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Zt.WARN,...e),this._logHandler(this,Zt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Zt.ERROR,...e),this._logHandler(this,Zt.ERROR,...e)}}const aP=(t,e)=>e.some(n=>t instanceof n);let Nw,Sw;function oP(){return Nw||(Nw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function lP(){return Sw||(Sw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const tN=new WeakMap,d2=new WeakMap,nN=new WeakMap,A0=new WeakMap,tv=new WeakMap;function cP(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",a)},i=()=>{n(io(t.result)),s()},a=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&tN.set(n,t)}).catch(()=>{}),tv.set(e,t),e}function uP(t){if(d2.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",a),t.removeEventListener("abort",a)},i=()=>{n(),s()},a=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",a),t.addEventListener("abort",a)});d2.set(t,e)}let h2={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return d2.get(t);if(e==="objectStoreNames")return t.objectStoreNames||nN.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return io(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function dP(t){h2=t(h2)}function hP(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(E0(this),e,...n);return nN.set(r,e.sort?e.sort():[e]),io(r)}:lP().includes(t)?function(...e){return t.apply(E0(this),e),io(tN.get(this))}:function(...e){return io(t.apply(E0(this),e))}}function fP(t){return typeof t=="function"?hP(t):(t instanceof IDBTransaction&&uP(t),aP(t,oP())?new Proxy(t,h2):t)}function io(t){if(t instanceof IDBRequest)return cP(t);if(A0.has(t))return A0.get(t);const e=fP(t);return e!==t&&(A0.set(t,e),tv.set(e,t)),e}const E0=t=>tv.get(t);function ag(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const a=indexedDB.open(t,e),o=io(a);return r&&a.addEventListener("upgradeneeded",l=>{r(io(a.result),l.oldVersion,l.newVersion,io(a.transaction),l)}),n&&a.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),o.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),o}function k0(t,{blocked:e}={}){const n=indexedDB.deleteDatabase(t);return e&&n.addEventListener("blocked",r=>e(r.oldVersion,r)),io(n).then(()=>{})}const pP=["get","getKey","getAll","getAllKeys","count"],mP=["put","add","delete","clear"],T0=new Map;function Aw(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(T0.get(e))return T0.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=mP.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||pP.includes(n)))return;const i=async function(a,...o){const l=this.transaction(a,s?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(o.shift())),(await Promise.all([c[n](...o),s&&l.done]))[0]};return T0.set(e,i),i}dP(t=>({...t,get:(e,n,r)=>Aw(e,n)||t.get(e,n,r),has:(e,n)=>!!Aw(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gP{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(yP(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function yP(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const f2="@firebase/app",Ew="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const po=new ev("@firebase/app"),vP="@firebase/app-compat",xP="@firebase/analytics-compat",wP="@firebase/analytics",bP="@firebase/app-check-compat",_P="@firebase/app-check",NP="@firebase/auth",SP="@firebase/auth-compat",AP="@firebase/database",EP="@firebase/data-connect",kP="@firebase/database-compat",TP="@firebase/functions",IP="@firebase/functions-compat",CP="@firebase/installations",PP="@firebase/installations-compat",jP="@firebase/messaging",LP="@firebase/messaging-compat",RP="@firebase/performance",DP="@firebase/performance-compat",OP="@firebase/remote-config",MP="@firebase/remote-config-compat",FP="@firebase/storage",UP="@firebase/storage-compat",VP="@firebase/firestore",BP="@firebase/vertexai-preview",zP="@firebase/firestore-compat",qP="firebase",HP="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p2="[DEFAULT]",$P={[f2]:"fire-core",[vP]:"fire-core-compat",[wP]:"fire-analytics",[xP]:"fire-analytics-compat",[_P]:"fire-app-check",[bP]:"fire-app-check-compat",[NP]:"fire-auth",[SP]:"fire-auth-compat",[AP]:"fire-rtdb",[EP]:"fire-data-connect",[kP]:"fire-rtdb-compat",[TP]:"fire-fn",[IP]:"fire-fn-compat",[CP]:"fire-iid",[PP]:"fire-iid-compat",[jP]:"fire-fcm",[LP]:"fire-fcm-compat",[RP]:"fire-perf",[DP]:"fire-perf-compat",[OP]:"fire-rc",[MP]:"fire-rc-compat",[FP]:"fire-gcs",[UP]:"fire-gcs-compat",[VP]:"fire-fst",[zP]:"fire-fst-compat",[BP]:"fire-vertex","fire-js":"fire-js",[qP]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ym=new Map,WP=new Map,m2=new Map;function kw(t,e){try{t.container.addComponent(e)}catch(n){po.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Zi(t){const e=t.name;if(m2.has(e))return po.debug(`There were multiple attempts to register component ${e}.`),!1;m2.set(e,t);for(const n of ym.values())kw(n,t);for(const n of WP.values())kw(n,t);return!0}function Ic(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function _a(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GP={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},yl=new Tc("app","Firebase",GP);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KP{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Oi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw yl.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cc=HP;function rN(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:p2,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw yl.create("bad-app-name",{appName:String(s)});if(n||(n=Q6()),!n)throw yl.create("no-options");const i=ym.get(s);if(i){if(Lh(n,i.options)&&Lh(r,i.config))return i;throw yl.create("duplicate-app",{appName:s})}const a=new tP(s);for(const l of m2.values())a.addComponent(l);const o=new KP(n,r,a);return ym.set(s,o),o}function og(t=p2){const e=ym.get(t);if(!e&&t===p2&&Q6())return rN();if(!e)throw yl.create("no-app",{appName:t});return e}function Gs(t,e,n){var r;let s=(r=$P[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),a=e.match(/\s|\//);if(i||a){const o=[`Unable to register library "${s}" with version "${e}":`];i&&o.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&a&&o.push("and"),a&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),po.warn(o.join(" "));return}Zi(new Oi(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YP="firebase-heartbeat-database",QP=1,Rh="firebase-heartbeat-store";let I0=null;function sN(){return I0||(I0=ag(YP,QP,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Rh)}catch(n){console.warn(n)}}}}).catch(t=>{throw yl.create("idb-open",{originalErrorMessage:t.message})})),I0}async function XP(t){try{const n=(await sN()).transaction(Rh),r=await n.objectStore(Rh).get(iN(t));return await n.done,r}catch(e){if(e instanceof sa)po.warn(e.message);else{const n=yl.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});po.warn(n.message)}}}async function Tw(t,e){try{const r=(await sN()).transaction(Rh,"readwrite");await r.objectStore(Rh).put(e,iN(t)),await r.done}catch(n){if(n instanceof sa)po.warn(n.message);else{const r=yl.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});po.warn(r.message)}}}function iN(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JP=1024,ZP=30*24*60*60*1e3;class ej{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new nj(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Iw();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{const o=new Date(a.date).valueOf();return Date.now()-o<=ZP}),this._storage.overwrite(this._heartbeatsCache))}catch(r){po.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Iw(),{heartbeatsToSend:r,unsentEntries:s}=tj(this._heartbeatsCache.heartbeats),i=gm(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return po.warn(n),""}}}function Iw(){return new Date().toISOString().substring(0,10)}function tj(t,e=JP){const n=[];let r=t.slice();for(const s of t){const i=n.find(a=>a.agent===s.agent);if(i){if(i.dates.push(s.date),Cw(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Cw(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class nj{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Z6()?eN().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await XP(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Tw(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Tw(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Cw(t){return gm(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rj(t){Zi(new Oi("platform-logger",e=>new gP(e),"PRIVATE")),Zi(new Oi("heartbeat",e=>new ej(e),"PRIVATE")),Gs(f2,Ew,t),Gs(f2,Ew,"esm2017"),Gs("fire-js","")}rj("");function nv(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function aN(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const sj=aN,oN=new Tc("auth","Firebase",aN());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vm=new ev("@firebase/auth");function ij(t,...e){vm.logLevel<=Zt.WARN&&vm.warn(`Auth (${Cc}): ${t}`,...e)}function Cp(t,...e){vm.logLevel<=Zt.ERROR&&vm.error(`Auth (${Cc}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ea(t,...e){throw rv(t,...e)}function ka(t,...e){return rv(t,...e)}function lN(t,e,n){const r=Object.assign(Object.assign({},sj()),{[e]:n});return new Tc("auth","Firebase",r).create(e,{appName:t.name})}function ao(t){return lN(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function rv(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return oN.create(t,...e)}function Et(t,e,...n){if(!t)throw rv(e,...n)}function eo(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Cp(e),new Error(e)}function mo(t,e){t||eo(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g2(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function aj(){return Pw()==="http:"||Pw()==="https:"}function Pw(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oj(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(aj()||VC()||"connection"in navigator)?navigator.onLine:!0}function lj(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rf{constructor(e,n){this.shortDelay=e,this.longDelay=n,mo(n>e,"Short delay should be less than long delay!"),this.isMobile=MC()||BC()}get(){return oj()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sv(t,e){mo(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cN{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;eo("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;eo("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;eo("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cj={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uj=new rf(3e4,6e4);function Cl(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function bo(t,e,n,r,s={}){return uN(t,s,async()=>{let i={},a={};r&&(e==="GET"?a=r:i={body:JSON.stringify(r)});const o=nf(Object.assign({key:t.config.apiKey},a)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:l},i);return UC()||(c.referrerPolicy="no-referrer"),cN.fetch()(dN(t,t.config.apiHost,n,o),c)})}async function uN(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},cj),e);try{const s=new hj(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const a=await i.json();if("needConfirmation"in a)throw np(t,"account-exists-with-different-credential",a);if(i.ok&&!("errorMessage"in a))return a;{const o=i.ok?a.errorMessage:a.error.message,[l,c]=o.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw np(t,"credential-already-in-use",a);if(l==="EMAIL_EXISTS")throw np(t,"email-already-in-use",a);if(l==="USER_DISABLED")throw np(t,"user-disabled",a);const d=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw lN(t,d,c);ea(t,d)}}catch(s){if(s instanceof sa)throw s;ea(t,"network-request-failed",{message:String(s)})}}async function sf(t,e,n,r,s={}){const i=await bo(t,e,n,r,s);return"mfaPendingCredential"in i&&ea(t,"multi-factor-auth-required",{_serverResponse:i}),i}function dN(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?sv(t.config,s):`${t.config.apiScheme}://${s}`}function dj(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class hj{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(ka(this.auth,"network-request-failed")),uj.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function np(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=ka(t,e,r);return s.customData._tokenResponse=n,s}function jw(t){return t!==void 0&&t.enterprise!==void 0}class fj{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return dj(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function pj(t,e){return bo(t,"GET","/v2/recaptchaConfig",Cl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mj(t,e){return bo(t,"POST","/v1/accounts:delete",e)}async function hN(t,e){return bo(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ih(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function gj(t,e=!1){const n=_n(t),r=await n.getIdToken(e),s=iv(r);Et(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,a=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:ih(C0(s.auth_time)),issuedAtTime:ih(C0(s.iat)),expirationTime:ih(C0(s.exp)),signInProvider:a||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function C0(t){return Number(t)*1e3}function iv(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Cp("JWT malformed, contained fewer than 3 sections"),null;try{const s=G6(n);return s?JSON.parse(s):(Cp("Failed to decode base64 JWT payload"),null)}catch(s){return Cp("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function Lw(t){const e=iv(t);return Et(e,"internal-error"),Et(typeof e.exp<"u","internal-error"),Et(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vu(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof sa&&yj(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function yj({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vj{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y2{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ih(this.lastLoginAt),this.creationTime=ih(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xm(t){var e;const n=t.auth,r=await t.getIdToken(),s=await Vu(t,hN(n,{idToken:r}));Et(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const a=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?fN(i.providerUserInfo):[],o=wj(t.providerData,a),l=t.isAnonymous,c=!(t.email&&i.passwordHash)&&!(o!=null&&o.length),d=l?c:!1,g={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new y2(i.createdAt,i.lastLoginAt),isAnonymous:d};Object.assign(t,g)}async function xj(t){const e=_n(t);await xm(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function wj(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function fN(t){return t.map(e=>{var{providerId:n}=e,r=nv(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bj(t,e){const n=await uN(t,{},async()=>{const r=nf({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,a=dN(t,s,"/v1/token",`key=${i}`),o=await t._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",cN.fetch()(a,{method:"POST",headers:o,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function _j(t,e){return bo(t,"POST","/v2/accounts:revokeToken",Cl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Su{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Et(e.idToken,"internal-error"),Et(typeof e.idToken<"u","internal-error"),Et(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Lw(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Et(e.length!==0,"internal-error");const n=Lw(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Et(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await bj(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,a=new Su;return r&&(Et(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),s&&(Et(typeof s=="string","internal-error",{appName:e}),a.accessToken=s),i&&(Et(typeof i=="number","internal-error",{appName:e}),a.expirationTime=i),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Su,this.toJSON())}_performRefresh(){return eo("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ho(t,e){Et(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class to{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=nv(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new vj(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new y2(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await Vu(this,this.stsTokenManager.getToken(this.auth,e));return Et(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return gj(this,e)}reload(){return xj(this)}_assign(e){this!==e&&(Et(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new to(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Et(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await xm(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(_a(this.auth.app))return Promise.reject(ao(this.auth));const e=await this.getIdToken();return await Vu(this,mj(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,a,o,l,c,d;const g=(r=n.displayName)!==null&&r!==void 0?r:void 0,y=(s=n.email)!==null&&s!==void 0?s:void 0,p=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,N=(a=n.photoURL)!==null&&a!==void 0?a:void 0,S=(o=n.tenantId)!==null&&o!==void 0?o:void 0,I=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,w=(c=n.createdAt)!==null&&c!==void 0?c:void 0,T=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:j,emailVerified:D,isAnonymous:H,providerData:J,stsTokenManager:O}=n;Et(j&&O,e,"internal-error");const _=Su.fromJSON(this.name,O);Et(typeof j=="string",e,"internal-error"),Ho(g,e.name),Ho(y,e.name),Et(typeof D=="boolean",e,"internal-error"),Et(typeof H=="boolean",e,"internal-error"),Ho(p,e.name),Ho(N,e.name),Ho(S,e.name),Ho(I,e.name),Ho(w,e.name),Ho(T,e.name);const A=new to({uid:j,auth:e,email:y,emailVerified:D,displayName:g,isAnonymous:H,photoURL:N,phoneNumber:p,tenantId:S,stsTokenManager:_,createdAt:w,lastLoginAt:T});return J&&Array.isArray(J)&&(A.providerData=J.map(R=>Object.assign({},R))),I&&(A._redirectEventId=I),A}static async _fromIdTokenResponse(e,n,r=!1){const s=new Su;s.updateFromServerResponse(n);const i=new to({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await xm(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];Et(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?fN(s.providerUserInfo):[],a=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),o=new Su;o.updateFromIdToken(r);const l=new to({uid:s.localId,auth:e,stsTokenManager:o,isAnonymous:a}),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new y2(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rw=new Map;function no(t){mo(t instanceof Function,"Expected a class definition");let e=Rw.get(t);return e?(mo(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Rw.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pN{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}pN.type="NONE";const Dw=pN;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pp(t,e,n){return`firebase:${t}:${e}:${n}`}class Au{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Pp(this.userKey,s.apiKey,i),this.fullPersistenceKey=Pp("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?to._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Au(no(Dw),e,r);const s=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=s[0]||no(Dw);const a=Pp(r,e.config.apiKey,e.name);let o=null;for(const c of n)try{const d=await c._get(a);if(d){const g=to._fromJSON(e,d);c!==i&&(o=g),i=c;break}}catch{}const l=s.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new Au(i,e,r):(i=l[0],o&&await i._set(a,o.toJSON()),await Promise.all(n.map(async c=>{if(c!==i)try{await c._remove(a)}catch{}})),new Au(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ow(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(vN(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(mN(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(wN(e))return"Blackberry";if(bN(e))return"Webos";if(gN(e))return"Safari";if((e.includes("chrome/")||yN(e))&&!e.includes("edge/"))return"Chrome";if(xN(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function mN(t=ws()){return/firefox\//i.test(t)}function gN(t=ws()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function yN(t=ws()){return/crios\//i.test(t)}function vN(t=ws()){return/iemobile/i.test(t)}function xN(t=ws()){return/android/i.test(t)}function wN(t=ws()){return/blackberry/i.test(t)}function bN(t=ws()){return/webos/i.test(t)}function av(t=ws()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Nj(t=ws()){var e;return av(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Sj(){return zC()&&document.documentMode===10}function _N(t=ws()){return av(t)||xN(t)||bN(t)||wN(t)||/windows phone/i.test(t)||vN(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NN(t,e=[]){let n;switch(t){case"Browser":n=Ow(ws());break;case"Worker":n=`${Ow(ws())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Cc}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aj{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((a,o)=>{try{const l=e(i);a(l)}catch(l){o(l)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ej(t,e={}){return bo(t,"GET","/v2/passwordPolicy",Cl(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kj=6;class Tj{constructor(e){var n,r,s,i;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=a.minPasswordLength)!==null&&n!==void 0?n:kj,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,a,o;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(s=l.containsLowercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(i=l.containsUppercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(a=l.containsNumericCharacter)!==null&&a!==void 0?a:!0),l.isValid&&(l.isValid=(o=l.containsNonAlphanumericCharacter)!==null&&o!==void 0?o:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ij{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Mw(this),this.idTokenSubscription=new Mw(this),this.beforeStateQueue=new Aj(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=oN,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=no(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await Au.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await hN(this,{idToken:e}),r=await to._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(_a(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(o,o))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,o=s==null?void 0:s._redirectEventId,l=await this.tryRedirectSignIn(e);(!a||a===o)&&(l!=null&&l.user)&&(s=l.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(a){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Et(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await xm(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=lj()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(_a(this.app))return Promise.reject(ao(this));const n=e?_n(e):null;return n&&Et(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Et(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return _a(this.app)?Promise.reject(ao(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return _a(this.app)?Promise.reject(ao(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(no(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Ej(this),n=new Tj(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Tc("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await _j(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&no(e)||this._popupRedirectResolver;Et(n,this,"argument-error"),this.redirectPersistenceManager=await Au.create(this,[no(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let a=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(Et(o,this,"internal-error"),o.then(()=>{a||i(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,s);return()=>{a=!0,l()}}else{const l=e.addObserver(n);return()=>{a=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Et(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=NN(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&ij(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Pc(t){return _n(t)}class Mw{constructor(e){this.auth=e,this.observer=null,this.addObserver=YC(n=>this.observer=n)}get next(){return Et(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lg={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Cj(t){lg=t}function SN(t){return lg.loadJS(t)}function Pj(){return lg.recaptchaEnterpriseScript}function jj(){return lg.gapiScript}function Lj(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const Rj="recaptcha-enterprise",Dj="NO_RECAPTCHA";class Oj{constructor(e){this.type=Rj,this.auth=Pc(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(a,o)=>{pj(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)o(new Error("recaptcha Enterprise site key undefined"));else{const c=new fj(l);return i.tenantId==null?i._agentRecaptchaConfig=c:i._tenantRecaptchaConfigs[i.tenantId]=c,a(c.siteKey)}}).catch(l=>{o(l)})})}function s(i,a,o){const l=window.grecaptcha;jw(l)?l.enterprise.ready(()=>{l.enterprise.execute(i,{action:e}).then(c=>{a(c)}).catch(()=>{a(Dj)})}):o(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((i,a)=>{r(this.auth).then(o=>{if(!n&&jw(window.grecaptcha))s(o,i,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let l=Pj();l.length!==0&&(l+=o),SN(l).then(()=>{s(o,i,a)}).catch(c=>{a(c)})}}).catch(o=>{a(o)})})}}async function Fw(t,e,n,r=!1){const s=new Oj(t);let i;try{i=await s.verify(n)}catch{i=await s.verify(n,!0)}const a=Object.assign({},e);return r?Object.assign(a,{captchaResp:i}):Object.assign(a,{captchaResponse:i}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function v2(t,e,n,r){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await Fw(t,e,n,n==="getOobCode");return r(t,i)}else return r(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await Fw(t,e,n,n==="getOobCode");return r(t,a)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mj(t,e){const n=Ic(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Lh(i,e??{}))return s;ea(s,"already-initialized")}return n.initialize({options:e})}function Fj(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(no);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function Uj(t,e,n){const r=Pc(t);Et(r._canInitEmulator,r,"emulator-config-failed"),Et(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=AN(e),{host:a,port:o}=Vj(e),l=o===null?"":`:${o}`;r.config.emulator={url:`${i}//${a}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:a,port:o,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),Bj()}function AN(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Vj(t){const e=AN(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:Uw(r.substr(i.length+1))}}else{const[i,a]=r.split(":");return{host:i,port:Uw(a)}}}function Uw(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function Bj(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ov{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return eo("not implemented")}_getIdTokenResponse(e){return eo("not implemented")}_linkToIdToken(e,n){return eo("not implemented")}_getReauthenticationResolver(e){return eo("not implemented")}}async function zj(t,e){return bo(t,"POST","/v1/accounts:update",e)}async function qj(t,e){return bo(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hj(t,e){return sf(t,"POST","/v1/accounts:signInWithPassword",Cl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $j(t,e){return sf(t,"POST","/v1/accounts:signInWithEmailLink",Cl(t,e))}async function Wj(t,e){return sf(t,"POST","/v1/accounts:signInWithEmailLink",Cl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dh extends ov{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Dh(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Dh(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return v2(e,n,"signInWithPassword",Hj);case"emailLink":return $j(e,{email:this._email,oobCode:this._password});default:ea(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return v2(e,r,"signUpPassword",qj);case"emailLink":return Wj(e,{idToken:n,email:this._email,oobCode:this._password});default:ea(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Eu(t,e){return sf(t,"POST","/v1/accounts:signInWithIdp",Cl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gj="http://localhost";class pc extends ov{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new pc(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):ea("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=nv(n,["providerId","signInMethod"]);if(!r||!s)return null;const a=new pc(r,s);return a.idToken=i.idToken||void 0,a.accessToken=i.accessToken||void 0,a.secret=i.secret,a.nonce=i.nonce,a.pendingToken=i.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return Eu(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Eu(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Eu(e,n)}buildRequest(){const e={requestUri:Gj,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=nf(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kj(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Yj(t){const e=Hd($d(t)).link,n=e?Hd($d(e)).deep_link_id:null,r=Hd($d(t)).deep_link_id;return(r?Hd($d(r)).link:null)||r||n||e||t}class lv{constructor(e){var n,r,s,i,a,o;const l=Hd($d(e)),c=(n=l.apiKey)!==null&&n!==void 0?n:null,d=(r=l.oobCode)!==null&&r!==void 0?r:null,g=Kj((s=l.mode)!==null&&s!==void 0?s:null);Et(c&&d&&g,"argument-error"),this.apiKey=c,this.operation=g,this.code=d,this.continueUrl=(i=l.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(a=l.languageCode)!==null&&a!==void 0?a:null,this.tenantId=(o=l.tenantId)!==null&&o!==void 0?o:null}static parseLink(e){const n=Yj(e);try{return new lv(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ed{constructor(){this.providerId=ed.PROVIDER_ID}static credential(e,n){return Dh._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=lv.parseLink(n);return Et(r,"argument-error"),Dh._fromEmailAndCode(e,r.code,r.tenantId)}}ed.PROVIDER_ID="password";ed.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ed.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EN{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class af extends EN{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xo extends af{constructor(){super("facebook.com")}static credential(e){return pc._fromParams({providerId:Xo.PROVIDER_ID,signInMethod:Xo.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Xo.credentialFromTaggedObject(e)}static credentialFromError(e){return Xo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Xo.credential(e.oauthAccessToken)}catch{return null}}}Xo.FACEBOOK_SIGN_IN_METHOD="facebook.com";Xo.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jo extends af{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return pc._fromParams({providerId:Jo.PROVIDER_ID,signInMethod:Jo.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Jo.credentialFromTaggedObject(e)}static credentialFromError(e){return Jo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Jo.credential(n,r)}catch{return null}}}Jo.GOOGLE_SIGN_IN_METHOD="google.com";Jo.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zo extends af{constructor(){super("github.com")}static credential(e){return pc._fromParams({providerId:Zo.PROVIDER_ID,signInMethod:Zo.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Zo.credentialFromTaggedObject(e)}static credentialFromError(e){return Zo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Zo.credential(e.oauthAccessToken)}catch{return null}}}Zo.GITHUB_SIGN_IN_METHOD="github.com";Zo.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class el extends af{constructor(){super("twitter.com")}static credential(e,n){return pc._fromParams({providerId:el.PROVIDER_ID,signInMethod:el.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return el.credentialFromTaggedObject(e)}static credentialFromError(e){return el.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return el.credential(n,r)}catch{return null}}}el.TWITTER_SIGN_IN_METHOD="twitter.com";el.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qj(t,e){return sf(t,"POST","/v1/accounts:signUp",Cl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mc{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await to._fromIdTokenResponse(e,r,s),a=Vw(r);return new mc({user:i,providerId:a,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=Vw(r);return new mc({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function Vw(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wm extends sa{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,wm.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new wm(e,n,r,s)}}function kN(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?wm._fromErrorAndOperation(t,i,e,r):i})}async function Xj(t,e,n=!1){const r=await Vu(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return mc._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jj(t,e,n=!1){const{auth:r}=t;if(_a(r.app))return Promise.reject(ao(r));const s="reauthenticate";try{const i=await Vu(t,kN(r,s,e,t),n);Et(i.idToken,r,"internal-error");const a=iv(i.idToken);Et(a,r,"internal-error");const{sub:o}=a;return Et(t.uid===o,r,"user-mismatch"),mc._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&ea(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TN(t,e,n=!1){if(_a(t.app))return Promise.reject(ao(t));const r="signIn",s=await kN(t,r,e),i=await mc._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function Zj(t,e){return TN(Pc(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IN(t){const e=Pc(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function e7(t,e,n){if(_a(t.app))return Promise.reject(ao(t));const r=Pc(t),a=await v2(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Qj).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&IN(t),l}),o=await mc._fromIdTokenResponse(r,"signIn",a);return await r._updateCurrentUser(o.user),o}function t7(t,e,n){return _a(t.app)?Promise.reject(ao(t)):Zj(_n(t),ed.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&IN(t),r})}function n7(t,e){return r7(_n(t),null,e)}async function r7(t,e,n){const{auth:r}=t,i={idToken:await t.getIdToken(),returnSecureToken:!0};n&&(i.password=n);const a=await Vu(t,zj(r,i));await t._updateTokensIfNecessary(a,!0)}function s7(t,e,n,r){return _n(t).onIdTokenChanged(e,n,r)}function i7(t,e,n){return _n(t).beforeAuthStateChanged(e,n)}function jc(t,e,n,r){return _n(t).onAuthStateChanged(e,n,r)}function CN(t){return _n(t).signOut()}const bm="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PN{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(bm,"1"),this.storage.removeItem(bm),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a7=1e3,o7=10;class jN extends PN{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=_N(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,o,l)=>{this.notifyListeners(a,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const a=this.storage.getItem(r);!n&&this.localCache[r]===a||this.notifyListeners(r,a)},i=this.storage.getItem(r);Sj()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,o7):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},a7)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}jN.type="LOCAL";const l7=jN;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LN extends PN{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}LN.type="SESSION";const RN=LN;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c7(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cg{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new cg(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,a=this.handlersMap[s];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const o=Array.from(a).map(async c=>c(n.origin,i)),l=await c7(o);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}cg.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cv(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u7{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,a;return new Promise((o,l)=>{const c=cv("",20);s.port1.start();const d=setTimeout(()=>{l(new Error("unsupported_event"))},r);a={messageChannel:s,onMessage(g){const y=g;if(y.data.eventId===c)switch(y.data.status){case"ack":clearTimeout(d),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),o(y.data.response);break;default:clearTimeout(d),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(a),s.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[s.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ta(){return window}function d7(t){Ta().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DN(){return typeof Ta().WorkerGlobalScope<"u"&&typeof Ta().importScripts=="function"}async function h7(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function f7(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function p7(){return DN()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ON="firebaseLocalStorageDb",m7=1,_m="firebaseLocalStorage",MN="fbase_key";class of{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function ug(t,e){return t.transaction([_m],e?"readwrite":"readonly").objectStore(_m)}function g7(){const t=indexedDB.deleteDatabase(ON);return new of(t).toPromise()}function x2(){const t=indexedDB.open(ON,m7);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(_m,{keyPath:MN})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(_m)?e(r):(r.close(),await g7(),e(await x2()))})})}async function Bw(t,e,n){const r=ug(t,!0).put({[MN]:e,value:n});return new of(r).toPromise()}async function y7(t,e){const n=ug(t,!1).get(e),r=await new of(n).toPromise();return r===void 0?null:r.value}function zw(t,e){const n=ug(t,!0).delete(e);return new of(n).toPromise()}const v7=800,x7=3;class FN{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await x2(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>x7)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return DN()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=cg._getInstance(p7()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await h7(),!this.activeServiceWorker)return;this.sender=new u7(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||f7()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await x2();return await Bw(e,bm,"1"),await zw(e,bm),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Bw(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>y7(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>zw(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=ug(s,!1).getAll();return new of(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),v7)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}FN.type="LOCAL";const w7=FN;new rf(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b7(t,e){return e?no(e):(Et(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uv extends ov{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Eu(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Eu(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Eu(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function _7(t){return TN(t.auth,new uv(t),t.bypassAuthState)}function N7(t){const{auth:e,user:n}=t;return Et(n,e,"internal-error"),Jj(n,new uv(t),t.bypassAuthState)}async function S7(t){const{auth:e,user:n}=t;return Et(n,e,"internal-error"),Xj(n,new uv(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UN{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:a,type:o}=e;if(a){this.reject(a);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return _7;case"linkViaPopup":case"linkViaRedirect":return S7;case"reauthViaPopup":case"reauthViaRedirect":return N7;default:ea(this.auth,"internal-error")}}resolve(e){mo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){mo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A7=new rf(2e3,1e4);class gu extends UN{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,gu.currentPopupAction&&gu.currentPopupAction.cancel(),gu.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Et(e,this.auth,"internal-error"),e}async onExecution(){mo(this.filter.length===1,"Popup operations only handle one event");const e=cv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(ka(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(ka(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,gu.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ka(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,A7.get())};e()}}gu.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E7="pendingRedirect",jp=new Map;class k7 extends UN{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=jp.get(this.auth._key());if(!e){try{const r=await T7(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}jp.set(this.auth._key(),e)}return this.bypassAuthState||jp.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function T7(t,e){const n=P7(e),r=C7(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function I7(t,e){jp.set(t._key(),e)}function C7(t){return no(t._redirectPersistence)}function P7(t){return Pp(E7,t.config.apiKey,t.name)}async function j7(t,e,n=!1){if(_a(t.app))return Promise.reject(ao(t));const r=Pc(t),s=b7(r,e),a=await new k7(r,s,n).execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L7=10*60*1e3;class R7{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!D7(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!VN(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(ka(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=L7&&this.cachedEventUids.clear(),this.cachedEventUids.has(qw(e))}saveEventToCache(e){this.cachedEventUids.add(qw(e)),this.lastProcessedEventTime=Date.now()}}function qw(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function VN({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function D7(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return VN(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function O7(t,e={}){return bo(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M7=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,F7=/^https?/;async function U7(t){if(t.config.emulator)return;const{authorizedDomains:e}=await O7(t);for(const n of e)try{if(V7(n))return}catch{}ea(t,"unauthorized-domain")}function V7(t){const e=g2(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===r}if(!F7.test(n))return!1;if(M7.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B7=new rf(3e4,6e4);function Hw(){const t=Ta().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function z7(t){return new Promise((e,n)=>{var r,s,i;function a(){Hw(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Hw(),n(ka(t,"network-request-failed"))},timeout:B7.get()})}if(!((s=(r=Ta().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=Ta().gapi)===null||i===void 0)&&i.load)a();else{const o=Lj("iframefcb");return Ta()[o]=()=>{gapi.load?a():n(ka(t,"network-request-failed"))},SN(`${jj()}?onload=${o}`).catch(l=>n(l))}}).catch(e=>{throw Lp=null,e})}let Lp=null;function q7(t){return Lp=Lp||z7(t),Lp}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H7=new rf(5e3,15e3),$7="__/auth/iframe",W7="emulator/auth/iframe",G7={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},K7=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Y7(t){const e=t.config;Et(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?sv(e,W7):`https://${t.config.authDomain}/${$7}`,r={apiKey:e.apiKey,appName:t.name,v:Cc},s=K7.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${nf(r).slice(1)}`}async function Q7(t){const e=await q7(t),n=Ta().gapi;return Et(n,t,"internal-error"),e.open({where:document.body,url:Y7(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:G7,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const a=ka(t,"network-request-failed"),o=Ta().setTimeout(()=>{i(a)},H7.get());function l(){Ta().clearTimeout(o),s(r)}r.ping(l).then(l,()=>{i(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X7={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},J7=500,Z7=600,eL="_blank",tL="http://localhost";class $w{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function nL(t,e,n,r=J7,s=Z7){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let o="";const l=Object.assign(Object.assign({},X7),{width:r.toString(),height:s.toString(),top:i,left:a}),c=ws().toLowerCase();n&&(o=yN(c)?eL:n),mN(c)&&(e=e||tL,l.scrollbars="yes");const d=Object.entries(l).reduce((y,[p,N])=>`${y}${p}=${N},`,"");if(Nj(c)&&o!=="_self")return rL(e||"",o),new $w(null);const g=window.open(e||"",o,d);Et(g,t,"popup-blocked");try{g.focus()}catch{}return new $w(g)}function rL(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sL="__/auth/handler",iL="emulator/auth/handler",aL=encodeURIComponent("fac");async function Ww(t,e,n,r,s,i){Et(t.config.authDomain,t,"auth-domain-config-required"),Et(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Cc,eventId:s};if(e instanceof EN){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",KC(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,g]of Object.entries({}))a[d]=g}if(e instanceof af){const d=e.getScopes().filter(g=>g!=="");d.length>0&&(a.scopes=d.join(","))}t.tenantId&&(a.tid=t.tenantId);const o=a;for(const d of Object.keys(o))o[d]===void 0&&delete o[d];const l=await t._getAppCheckToken(),c=l?`#${aL}=${encodeURIComponent(l)}`:"";return`${oL(t)}?${nf(o).slice(1)}${c}`}function oL({config:t}){return t.emulator?sv(t,iL):`https://${t.authDomain}/${sL}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P0="webStorageSupport";class lL{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=RN,this._completeRedirectFn=j7,this._overrideRedirectResult=I7}async _openPopup(e,n,r,s){var i;mo((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const a=await Ww(e,n,r,g2(),s);return nL(e,a,cv())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await Ww(e,n,r,g2(),s);return d7(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(mo(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await Q7(e),r=new R7(e);return n.register("authEvent",s=>(Et(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(P0,{type:P0},s=>{var i;const a=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[P0];a!==void 0&&n(!!a),ea(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=U7(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return _N()||gN()||av()}}const cL=lL;var Gw="@firebase/auth",Kw="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uL{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Et(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dL(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function hL(t){Zi(new Oi("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=r.options;Et(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:a,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:NN(t)},c=new Ij(r,s,i,l);return Fj(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Zi(new Oi("auth-internal",e=>{const n=Pc(e.getProvider("auth").getImmediate());return(r=>new uL(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Gs(Gw,Kw,dL(t)),Gs(Gw,Kw,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fL=5*60,pL=X6("authIdTokenMaxAge")||fL;let Yw=null;const mL=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>pL)return;const s=n==null?void 0:n.token;Yw!==s&&(Yw=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function gL(t=og()){const e=Ic(t,"auth");if(e.isInitialized())return e.getImmediate();const n=Mj(t,{popupRedirectResolver:cL,persistence:[w7,l7,RN]}),r=X6("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const a=mL(i.toString());i7(n,a,()=>a(n.currentUser)),s7(n,o=>a(o))}}const s=K6("auth");return s&&Uj(n,`http://${s}`),n}function yL(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}Cj({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=ka("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",yL().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});hL("Browser");var vL="firebase",xL="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Gs(vL,xL,"app");var Qw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ac,BN;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(O,_){function A(){}A.prototype=_.prototype,O.D=_.prototype,O.prototype=new A,O.prototype.constructor=O,O.C=function(R,E,C){for(var L=Array(arguments.length-2),z=2;z<arguments.length;z++)L[z-2]=arguments[z];return _.prototype[E].apply(R,L)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(O,_,A){A||(A=0);var R=Array(16);if(typeof _=="string")for(var E=0;16>E;++E)R[E]=_.charCodeAt(A++)|_.charCodeAt(A++)<<8|_.charCodeAt(A++)<<16|_.charCodeAt(A++)<<24;else for(E=0;16>E;++E)R[E]=_[A++]|_[A++]<<8|_[A++]<<16|_[A++]<<24;_=O.g[0],A=O.g[1],E=O.g[2];var C=O.g[3],L=_+(C^A&(E^C))+R[0]+3614090360&4294967295;_=A+(L<<7&4294967295|L>>>25),L=C+(E^_&(A^E))+R[1]+3905402710&4294967295,C=_+(L<<12&4294967295|L>>>20),L=E+(A^C&(_^A))+R[2]+606105819&4294967295,E=C+(L<<17&4294967295|L>>>15),L=A+(_^E&(C^_))+R[3]+3250441966&4294967295,A=E+(L<<22&4294967295|L>>>10),L=_+(C^A&(E^C))+R[4]+4118548399&4294967295,_=A+(L<<7&4294967295|L>>>25),L=C+(E^_&(A^E))+R[5]+1200080426&4294967295,C=_+(L<<12&4294967295|L>>>20),L=E+(A^C&(_^A))+R[6]+2821735955&4294967295,E=C+(L<<17&4294967295|L>>>15),L=A+(_^E&(C^_))+R[7]+4249261313&4294967295,A=E+(L<<22&4294967295|L>>>10),L=_+(C^A&(E^C))+R[8]+1770035416&4294967295,_=A+(L<<7&4294967295|L>>>25),L=C+(E^_&(A^E))+R[9]+2336552879&4294967295,C=_+(L<<12&4294967295|L>>>20),L=E+(A^C&(_^A))+R[10]+4294925233&4294967295,E=C+(L<<17&4294967295|L>>>15),L=A+(_^E&(C^_))+R[11]+2304563134&4294967295,A=E+(L<<22&4294967295|L>>>10),L=_+(C^A&(E^C))+R[12]+1804603682&4294967295,_=A+(L<<7&4294967295|L>>>25),L=C+(E^_&(A^E))+R[13]+4254626195&4294967295,C=_+(L<<12&4294967295|L>>>20),L=E+(A^C&(_^A))+R[14]+2792965006&4294967295,E=C+(L<<17&4294967295|L>>>15),L=A+(_^E&(C^_))+R[15]+1236535329&4294967295,A=E+(L<<22&4294967295|L>>>10),L=_+(E^C&(A^E))+R[1]+4129170786&4294967295,_=A+(L<<5&4294967295|L>>>27),L=C+(A^E&(_^A))+R[6]+3225465664&4294967295,C=_+(L<<9&4294967295|L>>>23),L=E+(_^A&(C^_))+R[11]+643717713&4294967295,E=C+(L<<14&4294967295|L>>>18),L=A+(C^_&(E^C))+R[0]+3921069994&4294967295,A=E+(L<<20&4294967295|L>>>12),L=_+(E^C&(A^E))+R[5]+3593408605&4294967295,_=A+(L<<5&4294967295|L>>>27),L=C+(A^E&(_^A))+R[10]+38016083&4294967295,C=_+(L<<9&4294967295|L>>>23),L=E+(_^A&(C^_))+R[15]+3634488961&4294967295,E=C+(L<<14&4294967295|L>>>18),L=A+(C^_&(E^C))+R[4]+3889429448&4294967295,A=E+(L<<20&4294967295|L>>>12),L=_+(E^C&(A^E))+R[9]+568446438&4294967295,_=A+(L<<5&4294967295|L>>>27),L=C+(A^E&(_^A))+R[14]+3275163606&4294967295,C=_+(L<<9&4294967295|L>>>23),L=E+(_^A&(C^_))+R[3]+4107603335&4294967295,E=C+(L<<14&4294967295|L>>>18),L=A+(C^_&(E^C))+R[8]+1163531501&4294967295,A=E+(L<<20&4294967295|L>>>12),L=_+(E^C&(A^E))+R[13]+2850285829&4294967295,_=A+(L<<5&4294967295|L>>>27),L=C+(A^E&(_^A))+R[2]+4243563512&4294967295,C=_+(L<<9&4294967295|L>>>23),L=E+(_^A&(C^_))+R[7]+1735328473&4294967295,E=C+(L<<14&4294967295|L>>>18),L=A+(C^_&(E^C))+R[12]+2368359562&4294967295,A=E+(L<<20&4294967295|L>>>12),L=_+(A^E^C)+R[5]+4294588738&4294967295,_=A+(L<<4&4294967295|L>>>28),L=C+(_^A^E)+R[8]+2272392833&4294967295,C=_+(L<<11&4294967295|L>>>21),L=E+(C^_^A)+R[11]+1839030562&4294967295,E=C+(L<<16&4294967295|L>>>16),L=A+(E^C^_)+R[14]+4259657740&4294967295,A=E+(L<<23&4294967295|L>>>9),L=_+(A^E^C)+R[1]+2763975236&4294967295,_=A+(L<<4&4294967295|L>>>28),L=C+(_^A^E)+R[4]+1272893353&4294967295,C=_+(L<<11&4294967295|L>>>21),L=E+(C^_^A)+R[7]+4139469664&4294967295,E=C+(L<<16&4294967295|L>>>16),L=A+(E^C^_)+R[10]+3200236656&4294967295,A=E+(L<<23&4294967295|L>>>9),L=_+(A^E^C)+R[13]+681279174&4294967295,_=A+(L<<4&4294967295|L>>>28),L=C+(_^A^E)+R[0]+3936430074&4294967295,C=_+(L<<11&4294967295|L>>>21),L=E+(C^_^A)+R[3]+3572445317&4294967295,E=C+(L<<16&4294967295|L>>>16),L=A+(E^C^_)+R[6]+76029189&4294967295,A=E+(L<<23&4294967295|L>>>9),L=_+(A^E^C)+R[9]+3654602809&4294967295,_=A+(L<<4&4294967295|L>>>28),L=C+(_^A^E)+R[12]+3873151461&4294967295,C=_+(L<<11&4294967295|L>>>21),L=E+(C^_^A)+R[15]+530742520&4294967295,E=C+(L<<16&4294967295|L>>>16),L=A+(E^C^_)+R[2]+3299628645&4294967295,A=E+(L<<23&4294967295|L>>>9),L=_+(E^(A|~C))+R[0]+4096336452&4294967295,_=A+(L<<6&4294967295|L>>>26),L=C+(A^(_|~E))+R[7]+1126891415&4294967295,C=_+(L<<10&4294967295|L>>>22),L=E+(_^(C|~A))+R[14]+2878612391&4294967295,E=C+(L<<15&4294967295|L>>>17),L=A+(C^(E|~_))+R[5]+4237533241&4294967295,A=E+(L<<21&4294967295|L>>>11),L=_+(E^(A|~C))+R[12]+1700485571&4294967295,_=A+(L<<6&4294967295|L>>>26),L=C+(A^(_|~E))+R[3]+2399980690&4294967295,C=_+(L<<10&4294967295|L>>>22),L=E+(_^(C|~A))+R[10]+4293915773&4294967295,E=C+(L<<15&4294967295|L>>>17),L=A+(C^(E|~_))+R[1]+2240044497&4294967295,A=E+(L<<21&4294967295|L>>>11),L=_+(E^(A|~C))+R[8]+1873313359&4294967295,_=A+(L<<6&4294967295|L>>>26),L=C+(A^(_|~E))+R[15]+4264355552&4294967295,C=_+(L<<10&4294967295|L>>>22),L=E+(_^(C|~A))+R[6]+2734768916&4294967295,E=C+(L<<15&4294967295|L>>>17),L=A+(C^(E|~_))+R[13]+1309151649&4294967295,A=E+(L<<21&4294967295|L>>>11),L=_+(E^(A|~C))+R[4]+4149444226&4294967295,_=A+(L<<6&4294967295|L>>>26),L=C+(A^(_|~E))+R[11]+3174756917&4294967295,C=_+(L<<10&4294967295|L>>>22),L=E+(_^(C|~A))+R[2]+718787259&4294967295,E=C+(L<<15&4294967295|L>>>17),L=A+(C^(E|~_))+R[9]+3951481745&4294967295,O.g[0]=O.g[0]+_&4294967295,O.g[1]=O.g[1]+(E+(L<<21&4294967295|L>>>11))&4294967295,O.g[2]=O.g[2]+E&4294967295,O.g[3]=O.g[3]+C&4294967295}r.prototype.u=function(O,_){_===void 0&&(_=O.length);for(var A=_-this.blockSize,R=this.B,E=this.h,C=0;C<_;){if(E==0)for(;C<=A;)s(this,O,C),C+=this.blockSize;if(typeof O=="string"){for(;C<_;)if(R[E++]=O.charCodeAt(C++),E==this.blockSize){s(this,R),E=0;break}}else for(;C<_;)if(R[E++]=O[C++],E==this.blockSize){s(this,R),E=0;break}}this.h=E,this.o+=_},r.prototype.v=function(){var O=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);O[0]=128;for(var _=1;_<O.length-8;++_)O[_]=0;var A=8*this.o;for(_=O.length-8;_<O.length;++_)O[_]=A&255,A/=256;for(this.u(O),O=Array(16),_=A=0;4>_;++_)for(var R=0;32>R;R+=8)O[A++]=this.g[_]>>>R&255;return O};function i(O,_){var A=o;return Object.prototype.hasOwnProperty.call(A,O)?A[O]:A[O]=_(O)}function a(O,_){this.h=_;for(var A=[],R=!0,E=O.length-1;0<=E;E--){var C=O[E]|0;R&&C==_||(A[E]=C,R=!1)}this.g=A}var o={};function l(O){return-128<=O&&128>O?i(O,function(_){return new a([_|0],0>_?-1:0)}):new a([O|0],0>O?-1:0)}function c(O){if(isNaN(O)||!isFinite(O))return g;if(0>O)return I(c(-O));for(var _=[],A=1,R=0;O>=A;R++)_[R]=O/A|0,A*=4294967296;return new a(_,0)}function d(O,_){if(O.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(O.charAt(0)=="-")return I(d(O.substring(1),_));if(0<=O.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=c(Math.pow(_,8)),R=g,E=0;E<O.length;E+=8){var C=Math.min(8,O.length-E),L=parseInt(O.substring(E,E+C),_);8>C?(C=c(Math.pow(_,C)),R=R.j(C).add(c(L))):(R=R.j(A),R=R.add(c(L)))}return R}var g=l(0),y=l(1),p=l(16777216);t=a.prototype,t.m=function(){if(S(this))return-I(this).m();for(var O=0,_=1,A=0;A<this.g.length;A++){var R=this.i(A);O+=(0<=R?R:4294967296+R)*_,_*=4294967296}return O},t.toString=function(O){if(O=O||10,2>O||36<O)throw Error("radix out of range: "+O);if(N(this))return"0";if(S(this))return"-"+I(this).toString(O);for(var _=c(Math.pow(O,6)),A=this,R="";;){var E=D(A,_).g;A=w(A,E.j(_));var C=((0<A.g.length?A.g[0]:A.h)>>>0).toString(O);if(A=E,N(A))return C+R;for(;6>C.length;)C="0"+C;R=C+R}},t.i=function(O){return 0>O?0:O<this.g.length?this.g[O]:this.h};function N(O){if(O.h!=0)return!1;for(var _=0;_<O.g.length;_++)if(O.g[_]!=0)return!1;return!0}function S(O){return O.h==-1}t.l=function(O){return O=w(this,O),S(O)?-1:N(O)?0:1};function I(O){for(var _=O.g.length,A=[],R=0;R<_;R++)A[R]=~O.g[R];return new a(A,~O.h).add(y)}t.abs=function(){return S(this)?I(this):this},t.add=function(O){for(var _=Math.max(this.g.length,O.g.length),A=[],R=0,E=0;E<=_;E++){var C=R+(this.i(E)&65535)+(O.i(E)&65535),L=(C>>>16)+(this.i(E)>>>16)+(O.i(E)>>>16);R=L>>>16,C&=65535,L&=65535,A[E]=L<<16|C}return new a(A,A[A.length-1]&-2147483648?-1:0)};function w(O,_){return O.add(I(_))}t.j=function(O){if(N(this)||N(O))return g;if(S(this))return S(O)?I(this).j(I(O)):I(I(this).j(O));if(S(O))return I(this.j(I(O)));if(0>this.l(p)&&0>O.l(p))return c(this.m()*O.m());for(var _=this.g.length+O.g.length,A=[],R=0;R<2*_;R++)A[R]=0;for(R=0;R<this.g.length;R++)for(var E=0;E<O.g.length;E++){var C=this.i(R)>>>16,L=this.i(R)&65535,z=O.i(E)>>>16,Z=O.i(E)&65535;A[2*R+2*E]+=L*Z,T(A,2*R+2*E),A[2*R+2*E+1]+=C*Z,T(A,2*R+2*E+1),A[2*R+2*E+1]+=L*z,T(A,2*R+2*E+1),A[2*R+2*E+2]+=C*z,T(A,2*R+2*E+2)}for(R=0;R<_;R++)A[R]=A[2*R+1]<<16|A[2*R];for(R=_;R<2*_;R++)A[R]=0;return new a(A,0)};function T(O,_){for(;(O[_]&65535)!=O[_];)O[_+1]+=O[_]>>>16,O[_]&=65535,_++}function j(O,_){this.g=O,this.h=_}function D(O,_){if(N(_))throw Error("division by zero");if(N(O))return new j(g,g);if(S(O))return _=D(I(O),_),new j(I(_.g),I(_.h));if(S(_))return _=D(O,I(_)),new j(I(_.g),_.h);if(30<O.g.length){if(S(O)||S(_))throw Error("slowDivide_ only works with positive integers.");for(var A=y,R=_;0>=R.l(O);)A=H(A),R=H(R);var E=J(A,1),C=J(R,1);for(R=J(R,2),A=J(A,2);!N(R);){var L=C.add(R);0>=L.l(O)&&(E=E.add(A),C=L),R=J(R,1),A=J(A,1)}return _=w(O,E.j(_)),new j(E,_)}for(E=g;0<=O.l(_);){for(A=Math.max(1,Math.floor(O.m()/_.m())),R=Math.ceil(Math.log(A)/Math.LN2),R=48>=R?1:Math.pow(2,R-48),C=c(A),L=C.j(_);S(L)||0<L.l(O);)A-=R,C=c(A),L=C.j(_);N(C)&&(C=y),E=E.add(C),O=w(O,L)}return new j(E,O)}t.A=function(O){return D(this,O).h},t.and=function(O){for(var _=Math.max(this.g.length,O.g.length),A=[],R=0;R<_;R++)A[R]=this.i(R)&O.i(R);return new a(A,this.h&O.h)},t.or=function(O){for(var _=Math.max(this.g.length,O.g.length),A=[],R=0;R<_;R++)A[R]=this.i(R)|O.i(R);return new a(A,this.h|O.h)},t.xor=function(O){for(var _=Math.max(this.g.length,O.g.length),A=[],R=0;R<_;R++)A[R]=this.i(R)^O.i(R);return new a(A,this.h^O.h)};function H(O){for(var _=O.g.length+1,A=[],R=0;R<_;R++)A[R]=O.i(R)<<1|O.i(R-1)>>>31;return new a(A,O.h)}function J(O,_){var A=_>>5;_%=32;for(var R=O.g.length-A,E=[],C=0;C<R;C++)E[C]=0<_?O.i(C+A)>>>_|O.i(C+A+1)<<32-_:O.i(C+A);return new a(E,O.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,BN=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=c,a.fromString=d,ac=a}).apply(typeof Qw<"u"?Qw:typeof self<"u"?self:typeof window<"u"?window:{});var rp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var zN,Wd,qN,Rp,w2,HN,$N,WN;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(f,b,P){return f==Array.prototype||f==Object.prototype||(f[b]=P.value),f};function n(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof rp=="object"&&rp];for(var b=0;b<f.length;++b){var P=f[b];if(P&&P.Math==Math)return P}throw Error("Cannot find global object")}var r=n(this);function s(f,b){if(b)e:{var P=r;f=f.split(".");for(var G=0;G<f.length-1;G++){var ge=f[G];if(!(ge in P))break e;P=P[ge]}f=f[f.length-1],G=P[f],b=b(G),b!=G&&b!=null&&e(P,f,{configurable:!0,writable:!0,value:b})}}function i(f,b){f instanceof String&&(f+="");var P=0,G=!1,ge={next:function(){if(!G&&P<f.length){var Ne=P++;return{value:b(Ne,f[Ne]),done:!1}}return G=!0,{done:!0,value:void 0}}};return ge[Symbol.iterator]=function(){return ge},ge}s("Array.prototype.values",function(f){return f||function(){return i(this,function(b,P){return P})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},o=this||self;function l(f){var b=typeof f;return b=b!="object"?b:f?Array.isArray(f)?"array":b:"null",b=="array"||b=="object"&&typeof f.length=="number"}function c(f){var b=typeof f;return b=="object"&&f!=null||b=="function"}function d(f,b,P){return f.call.apply(f.bind,arguments)}function g(f,b,P){if(!f)throw Error();if(2<arguments.length){var G=Array.prototype.slice.call(arguments,2);return function(){var ge=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(ge,G),f.apply(b,ge)}}return function(){return f.apply(b,arguments)}}function y(f,b,P){return y=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:g,y.apply(null,arguments)}function p(f,b){var P=Array.prototype.slice.call(arguments,1);return function(){var G=P.slice();return G.push.apply(G,arguments),f.apply(this,G)}}function N(f,b){function P(){}P.prototype=b.prototype,f.aa=b.prototype,f.prototype=new P,f.prototype.constructor=f,f.Qb=function(G,ge,Ne){for(var Be=Array(arguments.length-2),Xt=2;Xt<arguments.length;Xt++)Be[Xt-2]=arguments[Xt];return b.prototype[ge].apply(G,Be)}}function S(f){const b=f.length;if(0<b){const P=Array(b);for(let G=0;G<b;G++)P[G]=f[G];return P}return[]}function I(f,b){for(let P=1;P<arguments.length;P++){const G=arguments[P];if(l(G)){const ge=f.length||0,Ne=G.length||0;f.length=ge+Ne;for(let Be=0;Be<Ne;Be++)f[ge+Be]=G[Be]}else f.push(G)}}class w{constructor(b,P){this.i=b,this.j=P,this.h=0,this.g=null}get(){let b;return 0<this.h?(this.h--,b=this.g,this.g=b.next,b.next=null):b=this.i(),b}}function T(f){return/^[\s\xa0]*$/.test(f)}function j(){var f=o.navigator;return f&&(f=f.userAgent)?f:""}function D(f){return D[" "](f),f}D[" "]=function(){};var H=j().indexOf("Gecko")!=-1&&!(j().toLowerCase().indexOf("webkit")!=-1&&j().indexOf("Edge")==-1)&&!(j().indexOf("Trident")!=-1||j().indexOf("MSIE")!=-1)&&j().indexOf("Edge")==-1;function J(f,b,P){for(const G in f)b.call(P,f[G],G,f)}function O(f,b){for(const P in f)b.call(void 0,f[P],P,f)}function _(f){const b={};for(const P in f)b[P]=f[P];return b}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function R(f,b){let P,G;for(let ge=1;ge<arguments.length;ge++){G=arguments[ge];for(P in G)f[P]=G[P];for(let Ne=0;Ne<A.length;Ne++)P=A[Ne],Object.prototype.hasOwnProperty.call(G,P)&&(f[P]=G[P])}}function E(f){var b=1;f=f.split(":");const P=[];for(;0<b&&f.length;)P.push(f.shift()),b--;return f.length&&P.push(f.join(":")),P}function C(f){o.setTimeout(()=>{throw f},0)}function L(){var f=ce;let b=null;return f.g&&(b=f.g,f.g=f.g.next,f.g||(f.h=null),b.next=null),b}class z{constructor(){this.h=this.g=null}add(b,P){const G=Z.get();G.set(b,P),this.h?this.h.next=G:this.g=G,this.h=G}}var Z=new w(()=>new ae,f=>f.reset());class ae{constructor(){this.next=this.g=this.h=null}set(b,P){this.h=b,this.g=P,this.next=null}reset(){this.next=this.g=this.h=null}}let ue,Q=!1,ce=new z,me=()=>{const f=o.Promise.resolve(void 0);ue=()=>{f.then(ye)}};var ye=()=>{for(var f;f=L();){try{f.h.call(f.g)}catch(P){C(P)}var b=Z;b.j(f),100>b.h&&(b.h++,f.next=b.g,b.g=f)}Q=!1};function M(){this.s=this.s,this.C=this.C}M.prototype.s=!1,M.prototype.ma=function(){this.s||(this.s=!0,this.N())},M.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function W(f,b){this.type=f,this.g=this.target=b,this.defaultPrevented=!1}W.prototype.h=function(){this.defaultPrevented=!0};var X=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var f=!1,b=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const P=()=>{};o.addEventListener("test",P,b),o.removeEventListener("test",P,b)}catch{}return f}();function Y(f,b){if(W.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f){var P=this.type=f.type,G=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;if(this.target=f.target||f.srcElement,this.g=b,b=f.relatedTarget){if(H){e:{try{D(b.nodeName);var ge=!0;break e}catch{}ge=!1}ge||(b=null)}}else P=="mouseover"?b=f.fromElement:P=="mouseout"&&(b=f.toElement);this.relatedTarget=b,G?(this.clientX=G.clientX!==void 0?G.clientX:G.pageX,this.clientY=G.clientY!==void 0?G.clientY:G.pageY,this.screenX=G.screenX||0,this.screenY=G.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=typeof f.pointerType=="string"?f.pointerType:ie[f.pointerType]||"",this.state=f.state,this.i=f,f.defaultPrevented&&Y.aa.h.call(this)}}N(Y,W);var ie={2:"touch",3:"pen",4:"mouse"};Y.prototype.h=function(){Y.aa.h.call(this);var f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var le="closure_listenable_"+(1e6*Math.random()|0),xe=0;function ee(f,b,P,G,ge){this.listener=f,this.proxy=null,this.src=b,this.type=P,this.capture=!!G,this.ha=ge,this.key=++xe,this.da=this.fa=!1}function fe(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function ve(f){this.src=f,this.g={},this.h=0}ve.prototype.add=function(f,b,P,G,ge){var Ne=f.toString();f=this.g[Ne],f||(f=this.g[Ne]=[],this.h++);var Be=ke(f,b,G,ge);return-1<Be?(b=f[Be],P||(b.fa=!1)):(b=new ee(b,this.src,Ne,!!G,ge),b.fa=P,f.push(b)),b};function Se(f,b){var P=b.type;if(P in f.g){var G=f.g[P],ge=Array.prototype.indexOf.call(G,b,void 0),Ne;(Ne=0<=ge)&&Array.prototype.splice.call(G,ge,1),Ne&&(fe(b),f.g[P].length==0&&(delete f.g[P],f.h--))}}function ke(f,b,P,G){for(var ge=0;ge<f.length;++ge){var Ne=f[ge];if(!Ne.da&&Ne.listener==b&&Ne.capture==!!P&&Ne.ha==G)return ge}return-1}var Ue="closure_lm_"+(1e6*Math.random()|0),V={};function De(f,b,P,G,ge){if(Array.isArray(b)){for(var Ne=0;Ne<b.length;Ne++)De(f,b[Ne],P,G,ge);return null}return P=gt(P),f&&f[le]?f.K(b,P,c(G)?!!G.capture:!1,ge):Ze(f,b,P,!1,G,ge)}function Ze(f,b,P,G,ge,Ne){if(!b)throw Error("Invalid event type");var Be=c(ge)?!!ge.capture:!!ge,Xt=Ae(f);if(Xt||(f[Ue]=Xt=new ve(f)),P=Xt.add(b,P,G,Be,Ne),P.proxy)return P;if(G=Ve(),P.proxy=G,G.src=f,G.listener=P,f.addEventListener)X||(ge=Be),ge===void 0&&(ge=!1),f.addEventListener(b.toString(),G,ge);else if(f.attachEvent)f.attachEvent(He(b.toString()),G);else if(f.addListener&&f.removeListener)f.addListener(G);else throw Error("addEventListener and attachEvent are unavailable.");return P}function Ve(){function f(P){return b.call(f.src,f.listener,P)}const b=st;return f}function Ce(f,b,P,G,ge){if(Array.isArray(b))for(var Ne=0;Ne<b.length;Ne++)Ce(f,b[Ne],P,G,ge);else G=c(G)?!!G.capture:!!G,P=gt(P),f&&f[le]?(f=f.i,b=String(b).toString(),b in f.g&&(Ne=f.g[b],P=ke(Ne,P,G,ge),-1<P&&(fe(Ne[P]),Array.prototype.splice.call(Ne,P,1),Ne.length==0&&(delete f.g[b],f.h--)))):f&&(f=Ae(f))&&(b=f.g[b.toString()],f=-1,b&&(f=ke(b,P,G,ge)),(P=-1<f?b[f]:null)&&Xe(P))}function Xe(f){if(typeof f!="number"&&f&&!f.da){var b=f.src;if(b&&b[le])Se(b.i,f);else{var P=f.type,G=f.proxy;b.removeEventListener?b.removeEventListener(P,G,f.capture):b.detachEvent?b.detachEvent(He(P),G):b.addListener&&b.removeListener&&b.removeListener(G),(P=Ae(b))?(Se(P,f),P.h==0&&(P.src=null,b[Ue]=null)):fe(f)}}}function He(f){return f in V?V[f]:V[f]="on"+f}function st(f,b){if(f.da)f=!0;else{b=new Y(b,this);var P=f.listener,G=f.ha||f.src;f.fa&&Xe(f),f=P.call(G,b)}return f}function Ae(f){return f=f[Ue],f instanceof ve?f:null}var bt="__closure_events_fn_"+(1e9*Math.random()>>>0);function gt(f){return typeof f=="function"?f:(f[bt]||(f[bt]=function(b){return f.handleEvent(b)}),f[bt])}function $e(){M.call(this),this.i=new ve(this),this.M=this,this.F=null}N($e,M),$e.prototype[le]=!0,$e.prototype.removeEventListener=function(f,b,P,G){Ce(this,f,b,P,G)};function at(f,b){var P,G=f.F;if(G)for(P=[];G;G=G.F)P.push(G);if(f=f.M,G=b.type||b,typeof b=="string")b=new W(b,f);else if(b instanceof W)b.target=b.target||f;else{var ge=b;b=new W(G,f),R(b,ge)}if(ge=!0,P)for(var Ne=P.length-1;0<=Ne;Ne--){var Be=b.g=P[Ne];ge=Nt(Be,G,!0,b)&&ge}if(Be=b.g=f,ge=Nt(Be,G,!0,b)&&ge,ge=Nt(Be,G,!1,b)&&ge,P)for(Ne=0;Ne<P.length;Ne++)Be=b.g=P[Ne],ge=Nt(Be,G,!1,b)&&ge}$e.prototype.N=function(){if($e.aa.N.call(this),this.i){var f=this.i,b;for(b in f.g){for(var P=f.g[b],G=0;G<P.length;G++)fe(P[G]);delete f.g[b],f.h--}}this.F=null},$e.prototype.K=function(f,b,P,G){return this.i.add(String(f),b,!1,P,G)},$e.prototype.L=function(f,b,P,G){return this.i.add(String(f),b,!0,P,G)};function Nt(f,b,P,G){if(b=f.i.g[String(b)],!b)return!0;b=b.concat();for(var ge=!0,Ne=0;Ne<b.length;++Ne){var Be=b[Ne];if(Be&&!Be.da&&Be.capture==P){var Xt=Be.listener,Qn=Be.ha||Be.src;Be.fa&&Se(f.i,Be),ge=Xt.call(Qn,G)!==!1&&ge}}return ge&&!G.defaultPrevented}function Ye(f,b,P){if(typeof f=="function")P&&(f=y(f,P));else if(f&&typeof f.handleEvent=="function")f=y(f.handleEvent,f);else throw Error("Invalid listener argument");return 2147483647<Number(b)?-1:o.setTimeout(f,b||0)}function xt(f){f.g=Ye(()=>{f.g=null,f.i&&(f.i=!1,xt(f))},f.l);const b=f.h;f.h=null,f.m.apply(null,b)}class et extends M{constructor(b,P){super(),this.m=b,this.l=P,this.h=null,this.i=!1,this.g=null}j(b){this.h=arguments,this.g?this.i=!0:xt(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ot(f){M.call(this),this.h=f,this.g={}}N(Ot,M);var Ft=[];function Ge(f){J(f.g,function(b,P){this.g.hasOwnProperty(P)&&Xe(b)},f),f.g={}}Ot.prototype.N=function(){Ot.aa.N.call(this),Ge(this)},Ot.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ft=o.JSON.stringify,kt=o.JSON.parse,ot=class{stringify(f){return o.JSON.stringify(f,void 0)}parse(f){return o.JSON.parse(f,void 0)}};function Pt(){}Pt.prototype.h=null;function Qe(f){return f.h||(f.h=f.i())}function tt(){}var It={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function qe(){W.call(this,"d")}N(qe,W);function Ke(){W.call(this,"c")}N(Ke,W);var ut={},$n=null;function zt(){return $n=$n||new $e}ut.La="serverreachability";function en(f){W.call(this,ut.La,f)}N(en,W);function qt(f){const b=zt();at(b,new en(b))}ut.STAT_EVENT="statevent";function nt(f,b){W.call(this,ut.STAT_EVENT,f),this.stat=b}N(nt,W);function Ut(f){const b=zt();at(b,new nt(b,f))}ut.Ma="timingevent";function Vn(f,b){W.call(this,ut.Ma,f),this.size=b}N(Vn,W);function En(f,b){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){f()},b)}function Nn(){this.g=!0}Nn.prototype.xa=function(){this.g=!1};function on(f,b,P,G,ge,Ne){f.info(function(){if(f.g)if(Ne)for(var Be="",Xt=Ne.split("&"),Qn=0;Qn<Xt.length;Qn++){var Ht=Xt[Qn].split("=");if(1<Ht.length){var ln=Ht[0];Ht=Ht[1];var Pn=ln.split("_");Be=2<=Pn.length&&Pn[1]=="type"?Be+(ln+"="+Ht+"&"):Be+(ln+"=redacted&")}}else Be=null;else Be=Ne;return"XMLHTTP REQ ("+G+") [attempt "+ge+"]: "+b+`
`+P+`
`+Be})}function tn(f,b,P,G,ge,Ne,Be){f.info(function(){return"XMLHTTP RESP ("+G+") [ attempt "+ge+"]: "+b+`
`+P+`
`+Ne+" "+Be})}function Gt(f,b,P,G){f.info(function(){return"XMLHTTP TEXT ("+b+"): "+Nr(f,P)+(G?" "+G:"")})}function ss(f,b){f.info(function(){return"TIMEOUT: "+b})}Nn.prototype.info=function(){};function Nr(f,b){if(!f.g)return b;if(!b)return null;try{var P=JSON.parse(b);if(P){for(f=0;f<P.length;f++)if(Array.isArray(P[f])){var G=P[f];if(!(2>G.length)){var ge=G[1];if(Array.isArray(ge)&&!(1>ge.length)){var Ne=ge[0];if(Ne!="noop"&&Ne!="stop"&&Ne!="close")for(var Be=1;Be<ge.length;Be++)ge[Be]=""}}}}return ft(P)}catch{return b}}var Bn={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Sr={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ar;function Er(){}N(Er,Pt),Er.prototype.g=function(){return new XMLHttpRequest},Er.prototype.i=function(){return{}},Ar=new Er;function hn(f,b,P,G){this.j=f,this.i=b,this.l=P,this.R=G||1,this.U=new Ot(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new kr}function kr(){this.i=null,this.g="",this.h=!1}var Dr={},Hr={};function bs(f,b,P){f.L=1,f.v=Ma(Tr(b)),f.m=P,f.P=!0,gi(f,null)}function gi(f,b){f.F=Date.now(),oa(f),f.A=Tr(f.v);var P=f.A,G=f.R;Array.isArray(G)||(G=[String(G)]),qc(P.i,"t",G),f.C=0,P=f.j.J,f.h=new kr,f.g=tr(f.j,P?b:null,!f.m),0<f.O&&(f.M=new et(y(f.Y,f,f.g),f.O)),b=f.U,P=f.g,G=f.ca;var ge="readystatechange";Array.isArray(ge)||(ge&&(Ft[0]=ge.toString()),ge=Ft);for(var Ne=0;Ne<ge.length;Ne++){var Be=De(P,ge[Ne],G||b.handleEvent,!1,b.h||b);if(!Be)break;b.g[Be.key]=Be}b=f.H?_(f.H):{},f.m?(f.u||(f.u="POST"),b["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.A,f.u,f.m,b)):(f.u="GET",f.g.ea(f.A,f.u,null,b)),qt(),on(f.i,f.u,f.A,f.l,f.R,f.m)}hn.prototype.ca=function(f){f=f.target;const b=this.M;b&&_s(f)==3?b.j():this.Y(f)},hn.prototype.Y=function(f){try{if(f==this.g)e:{const Pn=_s(this.g);var b=this.g.Ba();const Xs=this.g.Z();if(!(3>Pn)&&(Pn!=3||this.g&&(this.h.h||this.g.oa()||zl(this.g)))){this.J||Pn!=4||b==7||(b==8||0>=Xs?qt(3):qt(2)),_o(this);var P=this.g.Z();this.X=P;t:if(Ra(this)){var G=zl(this.g);f="";var ge=G.length,Ne=_s(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ys(this),Or(this);var Be="";break t}this.h.i=new o.TextDecoder}for(b=0;b<ge;b++)this.h.h=!0,f+=this.h.i.decode(G[b],{stream:!(Ne&&b==ge-1)});G.length=0,this.h.g+=f,this.C=0,Be=this.h.g}else Be=this.g.oa();if(this.o=P==200,tn(this.i,this.u,this.A,this.l,this.R,Pn,P),this.o){if(this.T&&!this.K){t:{if(this.g){var Xt,Qn=this.g;if((Xt=Qn.g?Qn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!T(Xt)){var Ht=Xt;break t}}Ht=null}if(P=Ht)Gt(this.i,this.l,P,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,No(this,P);else{this.o=!1,this.s=3,Ut(12),Ys(this),Or(this);break e}}if(this.P){P=!0;let is;for(;!this.J&&this.C<Be.length;)if(is=od(this,Be),is==Hr){Pn==4&&(this.s=4,Ut(14),P=!1),Gt(this.i,this.l,null,"[Incomplete Response]");break}else if(is==Dr){this.s=4,Ut(15),Gt(this.i,this.l,Be,"[Invalid Chunk]"),P=!1;break}else Gt(this.i,this.l,is,null),No(this,is);if(Ra(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Pn!=4||Be.length!=0||this.h.h||(this.s=1,Ut(16),P=!1),this.o=this.o&&P,!P)Gt(this.i,this.l,Be,"[Invalid Chunked Response]"),Ys(this),Or(this);else if(0<Be.length&&!this.W){this.W=!0;var ln=this.j;ln.g==this&&ln.ba&&!ln.M&&(ln.j.info("Great, no buffering proxy detected. Bytes received: "+Be.length),rt(ln),ln.M=!0,Ut(11))}}else Gt(this.i,this.l,Be,null),No(this,Be);Pn==4&&Ys(this),this.o&&!this.J&&(Pn==4?jt(this.j,this):(this.o=!1,oa(this)))}else $c(this.g),P==400&&0<Be.indexOf("Unknown SID")?(this.s=3,Ut(12)):(this.s=0,Ut(13)),Ys(this),Or(this)}}}catch{}finally{}};function Ra(f){return f.g?f.u=="GET"&&f.L!=2&&f.j.Ca:!1}function od(f,b){var P=f.C,G=b.indexOf(`
`,P);return G==-1?Hr:(P=Number(b.substring(P,G)),isNaN(P)?Dr:(G+=1,G+P>b.length?Hr:(b=b.slice(G,G+P),f.C=G+P,b)))}hn.prototype.cancel=function(){this.J=!0,Ys(this)};function oa(f){f.S=Date.now()+f.I,Ll(f,f.I)}function Ll(f,b){if(f.B!=null)throw Error("WatchDog timer not null");f.B=En(y(f.ba,f),b)}function _o(f){f.B&&(o.clearTimeout(f.B),f.B=null)}hn.prototype.ba=function(){this.B=null;const f=Date.now();0<=f-this.S?(ss(this.i,this.A),this.L!=2&&(qt(),Ut(17)),Ys(this),this.s=2,Or(this)):Ll(this,this.S-f)};function Or(f){f.j.G==0||f.J||jt(f.j,f)}function Ys(f){_o(f);var b=f.M;b&&typeof b.ma=="function"&&b.ma(),f.M=null,Ge(f.U),f.g&&(b=f.g,f.g=null,b.abort(),b.ma())}function No(f,b){try{var P=f.j;if(P.G!=0&&(P.g==f||Ds(P.h,f))){if(!f.K&&Ds(P.h,f)&&P.G==3){try{var G=P.Da.g.parse(b)}catch{G=null}if(Array.isArray(G)&&G.length==3){var ge=G;if(ge[0]==0){e:if(!P.u){if(P.g)if(P.g.F+3e3<f.F)St(P),Ni(P);else break e;Le(P),Ut(18)}}else P.za=ge[1],0<P.za-P.T&&37500>ge[2]&&P.F&&P.v==0&&!P.C&&(P.C=En(y(P.Za,P),6e3));if(1>=Ml(P.h)&&P.ca){try{P.ca()}catch{}P.ca=void 0}}else dn(P,11)}else if((f.K||P.g==f)&&St(P),!T(b))for(ge=P.Da.g.parse(b),b=0;b<ge.length;b++){let Ht=ge[b];if(P.T=Ht[0],Ht=Ht[1],P.G==2)if(Ht[0]=="c"){P.K=Ht[1],P.ia=Ht[2];const ln=Ht[3];ln!=null&&(P.la=ln,P.j.info("VER="+P.la));const Pn=Ht[4];Pn!=null&&(P.Aa=Pn,P.j.info("SVER="+P.Aa));const Xs=Ht[5];Xs!=null&&typeof Xs=="number"&&0<Xs&&(G=1.5*Xs,P.L=G,P.j.info("backChannelRequestTimeoutMs_="+G)),G=P;const is=f.g;if(is){const Wr=is.g?is.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Wr){var Ne=G.h;Ne.g||Wr.indexOf("spdy")==-1&&Wr.indexOf("quic")==-1&&Wr.indexOf("h2")==-1||(Ne.j=Ne.l,Ne.g=new Set,Ne.h&&(la(Ne,Ne.h),Ne.h=null))}if(G.D){const Bi=is.g?is.g.getResponseHeader("X-HTTP-Session-Id"):null;Bi&&(G.ya=Bi,Kt(G.I,G.D,Bi))}}P.G=3,P.l&&P.l.ua(),P.ba&&(P.R=Date.now()-f.F,P.j.info("Handshake RTT: "+P.R+"ms")),G=P;var Be=f;if(G.qa=mn(G,G.J?G.ia:null,G.W),Be.K){Fc(G.h,Be);var Xt=Be,Qn=G.L;Qn&&(Xt.I=Qn),Xt.B&&(_o(Xt),oa(Xt)),G.g=Be}else Te(G);0<P.i.length&&v(P)}else Ht[0]!="stop"&&Ht[0]!="close"||dn(P,7);else P.G==3&&(Ht[0]=="stop"||Ht[0]=="close"?Ht[0]=="stop"?dn(P,7):Io(P):Ht[0]!="noop"&&P.l&&P.l.ta(Ht),P.v=0)}}qt(4)}catch{}}var Rl=class{constructor(f,b){this.g=f,this.map=b}};function Dl(f){this.l=f||10,o.PerformanceNavigationTiming?(f=o.performance.getEntriesByType("navigation"),f=0<f.length&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ol(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function Ml(f){return f.h?1:f.g?f.g.size:0}function Ds(f,b){return f.h?f.h==b:f.g?f.g.has(b):!1}function la(f,b){f.g?f.g.add(b):f.h=b}function Fc(f,b){f.h&&f.h==b?f.h=null:f.g&&f.g.has(b)&&f.g.delete(b)}Dl.prototype.cancel=function(){if(this.i=Wn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function Wn(f){if(f.h!=null)return f.i.concat(f.h.D);if(f.g!=null&&f.g.size!==0){let b=f.i;for(const P of f.g.values())b=b.concat(P.D);return b}return S(f.i)}function Uc(f){if(f.V&&typeof f.V=="function")return f.V();if(typeof Map<"u"&&f instanceof Map||typeof Set<"u"&&f instanceof Set)return Array.from(f.values());if(typeof f=="string")return f.split("");if(l(f)){for(var b=[],P=f.length,G=0;G<P;G++)b.push(f[G]);return b}b=[],P=0;for(G in f)b[P++]=f[G];return b}function yi(f){if(f.na&&typeof f.na=="function")return f.na();if(!f.V||typeof f.V!="function"){if(typeof Map<"u"&&f instanceof Map)return Array.from(f.keys());if(!(typeof Set<"u"&&f instanceof Set)){if(l(f)||typeof f=="string"){var b=[];f=f.length;for(var P=0;P<f;P++)b.push(P);return b}b=[],P=0;for(const G in f)b[P++]=G;return b}}}function Da(f,b){if(f.forEach&&typeof f.forEach=="function")f.forEach(b,void 0);else if(l(f)||typeof f=="string")Array.prototype.forEach.call(f,b,void 0);else for(var P=yi(f),G=Uc(f),ge=G.length,Ne=0;Ne<ge;Ne++)b.call(void 0,G[Ne],P&&P[Ne],f)}var Fl=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Os(f,b){if(f){f=f.split("&");for(var P=0;P<f.length;P++){var G=f[P].indexOf("="),ge=null;if(0<=G){var Ne=f[P].substring(0,G);ge=f[P].substring(G+1)}else Ne=f[P];b(Ne,ge?decodeURIComponent(ge.replace(/\+/g," ")):"")}}}function kn(f){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,f instanceof kn){this.h=f.h,Oa(this,f.j),this.o=f.o,this.g=f.g,So(this,f.s),this.l=f.l;var b=f.i,P=new $r;P.i=b.i,b.g&&(P.g=new Map(b.g),P.h=b.h),Vc(this,P),this.m=f.m}else f&&(b=String(f).match(Fl))?(this.h=!1,Oa(this,b[1]||"",!0),this.o=ca(b[2]||""),this.g=ca(b[3]||"",!0),So(this,b[4]),this.l=ca(b[5]||"",!0),Vc(this,b[6]||"",!0),this.m=ca(b[7]||"")):(this.h=!1,this.i=new $r(null,this.h))}kn.prototype.toString=function(){var f=[],b=this.j;b&&f.push(vi(b,Bc,!0),":");var P=this.g;return(P||b=="file")&&(f.push("//"),(b=this.o)&&f.push(vi(b,Bc,!0),"@"),f.push(encodeURIComponent(String(P)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),P=this.s,P!=null&&f.push(":",String(P))),(P=this.l)&&(this.g&&P.charAt(0)!="/"&&f.push("/"),f.push(vi(P,P.charAt(0)=="/"?cd:ld,!0))),(P=this.i.toString())&&f.push("?",P),(P=this.m)&&f.push("#",vi(P,zc)),f.join("")};function Tr(f){return new kn(f)}function Oa(f,b,P){f.j=P?ca(b,!0):b,f.j&&(f.j=f.j.replace(/:$/,""))}function So(f,b){if(b){if(b=Number(b),isNaN(b)||0>b)throw Error("Bad port number "+b);f.s=b}else f.s=null}function Vc(f,b,P){b instanceof $r?(f.i=b,ud(f.i,f.h)):(P||(b=vi(b,Ul)),f.i=new $r(b,f.h))}function Kt(f,b,P){f.i.set(b,P)}function Ma(f){return Kt(f,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),f}function ca(f,b){return f?b?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function vi(f,b,P){return typeof f=="string"?(f=encodeURI(f).replace(b,Fa),P&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function Fa(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var Bc=/[#\/\?@]/g,ld=/[#\?:]/g,cd=/[#\?]/g,Ul=/[#\?@]/g,zc=/#/g;function $r(f,b){this.h=this.g=null,this.i=f||null,this.j=!!b}function xi(f){f.g||(f.g=new Map,f.h=0,f.i&&Os(f.i,function(b,P){f.add(decodeURIComponent(b.replace(/\+/g," ")),P)}))}t=$r.prototype,t.add=function(f,b){xi(this),this.i=null,f=_t(this,f);var P=this.g.get(f);return P||this.g.set(f,P=[]),P.push(b),this.h+=1,this};function ua(f,b){xi(f),b=_t(f,b),f.g.has(b)&&(f.i=null,f.h-=f.g.get(b).length,f.g.delete(b))}function Ao(f,b){return xi(f),b=_t(f,b),f.g.has(b)}t.forEach=function(f,b){xi(this),this.g.forEach(function(P,G){P.forEach(function(ge){f.call(b,ge,G,this)},this)},this)},t.na=function(){xi(this);const f=Array.from(this.g.values()),b=Array.from(this.g.keys()),P=[];for(let G=0;G<b.length;G++){const ge=f[G];for(let Ne=0;Ne<ge.length;Ne++)P.push(b[G])}return P},t.V=function(f){xi(this);let b=[];if(typeof f=="string")Ao(this,f)&&(b=b.concat(this.g.get(_t(this,f))));else{f=Array.from(this.g.values());for(let P=0;P<f.length;P++)b=b.concat(f[P])}return b},t.set=function(f,b){return xi(this),this.i=null,f=_t(this,f),Ao(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[b]),this.h+=1,this},t.get=function(f,b){return f?(f=this.V(f),0<f.length?String(f[0]):b):b};function qc(f,b,P){ua(f,b),0<P.length&&(f.i=null,f.g.set(_t(f,b),S(P)),f.h+=P.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],b=Array.from(this.g.keys());for(var P=0;P<b.length;P++){var G=b[P];const Ne=encodeURIComponent(String(G)),Be=this.V(G);for(G=0;G<Be.length;G++){var ge=Ne;Be[G]!==""&&(ge+="="+encodeURIComponent(String(Be[G]))),f.push(ge)}}return this.i=f.join("&")};function _t(f,b){return b=String(b),f.j&&(b=b.toLowerCase()),b}function ud(f,b){b&&!f.j&&(xi(f),f.i=null,f.g.forEach(function(P,G){var ge=G.toLowerCase();G!=ge&&(ua(this,G),qc(this,ge,P))},f)),f.j=b}function dd(f,b){const P=new Nn;if(o.Image){const G=new Image;G.onload=p(Mr,P,"TestLoadImage: loaded",!0,b,G),G.onerror=p(Mr,P,"TestLoadImage: error",!1,b,G),G.onabort=p(Mr,P,"TestLoadImage: abort",!1,b,G),G.ontimeout=p(Mr,P,"TestLoadImage: timeout",!1,b,G),o.setTimeout(function(){G.ontimeout&&G.ontimeout()},1e4),G.src=f}else b(!1)}function hd(f,b){const P=new Nn,G=new AbortController,ge=setTimeout(()=>{G.abort(),Mr(P,"TestPingServer: timeout",!1,b)},1e4);fetch(f,{signal:G.signal}).then(Ne=>{clearTimeout(ge),Ne.ok?Mr(P,"TestPingServer: ok",!0,b):Mr(P,"TestPingServer: server error",!1,b)}).catch(()=>{clearTimeout(ge),Mr(P,"TestPingServer: error",!1,b)})}function Mr(f,b,P,G,ge){try{ge&&(ge.onload=null,ge.onerror=null,ge.onabort=null,ge.ontimeout=null),G(P)}catch{}}function Ui(){this.g=new ot}function fd(f,b,P){const G=P||"";try{Da(f,function(ge,Ne){let Be=ge;c(ge)&&(Be=ft(ge)),b.push(G+Ne+"="+encodeURIComponent(Be))})}catch(ge){throw b.push(G+"type="+encodeURIComponent("_badmap")),ge}}function Eo(f){this.l=f.Ub||null,this.j=f.eb||!1}N(Eo,Pt),Eo.prototype.g=function(){return new Vi(this.l,this.j)},Eo.prototype.i=function(f){return function(){return f}}({});function Vi(f,b){$e.call(this),this.D=f,this.o=b,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}N(Vi,$e),t=Vi.prototype,t.open=function(f,b){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=f,this.A=b,this.readyState=1,Ua(this)},t.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const b={headers:this.u,method:this.B,credentials:this.m,cache:void 0};f&&(b.body=f),(this.D||o).fetch(new Request(this.A,b)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Qs(this)),this.readyState=0},t.Sa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,Ua(this)),this.g&&(this.readyState=3,Ua(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ko(this)}else f.text().then(this.Ra.bind(this),this.ga.bind(this))};function ko(f){f.j.read().then(f.Pa.bind(f)).catch(f.ga.bind(f))}t.Pa=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var b=f.value?f.value:new Uint8Array(0);(b=this.v.decode(b,{stream:!f.done}))&&(this.response=this.responseText+=b)}f.done?Qs(this):Ua(this),this.readyState==3&&ko(this)}},t.Ra=function(f){this.g&&(this.response=this.responseText=f,Qs(this))},t.Qa=function(f){this.g&&(this.response=f,Qs(this))},t.ga=function(){this.g&&Qs(this)};function Qs(f){f.readyState=4,f.l=null,f.j=null,f.v=null,Ua(f)}t.setRequestHeader=function(f,b){this.u.append(f,b)},t.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],b=this.h.entries();for(var P=b.next();!P.done;)P=P.value,f.push(P[0]+": "+P[1]),P=b.next();return f.join(`\r
`)};function Ua(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(Vi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function wi(f){let b="";return J(f,function(P,G){b+=G,b+=":",b+=P,b+=`\r
`}),b}function Vl(f,b,P){e:{for(G in P){var G=!1;break e}G=!0}G||(P=wi(P),typeof f=="string"?P!=null&&encodeURIComponent(String(P)):Kt(f,b,P))}function Sn(f){$e.call(this),this.headers=new Map,this.o=f||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}N(Sn,$e);var Bl=/^https?$/i,Hc=["POST","PUT"];t=Sn.prototype,t.Ha=function(f){this.J=f},t.ea=function(f,b,P,G){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);b=b?b.toUpperCase():"GET",this.D=f,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ar.g(),this.v=this.o?Qe(this.o):Qe(Ar),this.g.onreadystatechange=y(this.Ea,this);try{this.B=!0,this.g.open(b,String(f),!0),this.B=!1}catch(Ne){bi(this,Ne);return}if(f=P||"",P=new Map(this.headers),G)if(Object.getPrototypeOf(G)===Object.prototype)for(var ge in G)P.set(ge,G[ge]);else if(typeof G.keys=="function"&&typeof G.get=="function")for(const Ne of G.keys())P.set(Ne,G.get(Ne));else throw Error("Unknown input type for opt_headers: "+String(G));G=Array.from(P.keys()).find(Ne=>Ne.toLowerCase()=="content-type"),ge=o.FormData&&f instanceof o.FormData,!(0<=Array.prototype.indexOf.call(Hc,b,void 0))||G||ge||P.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Ne,Be]of P)this.g.setRequestHeader(Ne,Be);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ha(this),this.u=!0,this.g.send(f),this.u=!1}catch(Ne){bi(this,Ne)}};function bi(f,b){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=b,f.m=5,To(f),da(f)}function To(f){f.A||(f.A=!0,at(f,"complete"),at(f,"error"))}t.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=f||7,at(this,"complete"),at(this,"abort"),da(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),da(this,!0)),Sn.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Va(this):this.bb())},t.bb=function(){Va(this)};function Va(f){if(f.h&&typeof a<"u"&&(!f.v[1]||_s(f)!=4||f.Z()!=2)){if(f.u&&_s(f)==4)Ye(f.Ea,0,f);else if(at(f,"readystatechange"),_s(f)==4){f.h=!1;try{const Be=f.Z();e:switch(Be){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var b=!0;break e;default:b=!1}var P;if(!(P=b)){var G;if(G=Be===0){var ge=String(f.D).match(Fl)[1]||null;!ge&&o.self&&o.self.location&&(ge=o.self.location.protocol.slice(0,-1)),G=!Bl.test(ge?ge.toLowerCase():"")}P=G}if(P)at(f,"complete"),at(f,"success");else{f.m=6;try{var Ne=2<_s(f)?f.g.statusText:""}catch{Ne=""}f.l=Ne+" ["+f.Z()+"]",To(f)}}finally{da(f)}}}}function da(f,b){if(f.g){ha(f);const P=f.g,G=f.v[0]?()=>{}:null;f.g=null,f.v=null,b||at(f,"ready");try{P.onreadystatechange=G}catch{}}}function ha(f){f.I&&(o.clearTimeout(f.I),f.I=null)}t.isActive=function(){return!!this.g};function _s(f){return f.g?f.g.readyState:0}t.Z=function(){try{return 2<_s(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(f){if(this.g){var b=this.g.responseText;return f&&b.indexOf(f)==0&&(b=b.substring(f.length)),kt(b)}};function zl(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.H){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function $c(f){const b={};f=(f.g&&2<=_s(f)&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let G=0;G<f.length;G++){if(T(f[G]))continue;var P=E(f[G]);const ge=P[0];if(P=P[1],typeof P!="string")continue;P=P.trim();const Ne=b[ge]||[];b[ge]=Ne,Ne.push(P)}O(b,function(G){return G.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ns(f,b,P){return P&&P.internalChannelParams&&P.internalChannelParams[f]||b}function _i(f){this.Aa=0,this.i=[],this.j=new Nn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ns("failFast",!1,f),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ns("baseRetryDelayMs",5e3,f),this.cb=Ns("retryDelaySeedMs",1e4,f),this.Wa=Ns("forwardChannelMaxRetries",2,f),this.wa=Ns("forwardChannelRequestTimeoutMs",2e4,f),this.pa=f&&f.xmlHttpFactory||void 0,this.Xa=f&&f.Tb||void 0,this.Ca=f&&f.useFetchStreams||!1,this.L=void 0,this.J=f&&f.supportsCrossDomainXhr||!1,this.K="",this.h=new Dl(f&&f.concurrentRequestLimit),this.Da=new Ui,this.P=f&&f.fastHandshake||!1,this.O=f&&f.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=f&&f.Rb||!1,f&&f.xa&&this.j.xa(),f&&f.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&f&&f.detectBufferingProxy||!1,this.ja=void 0,f&&f.longPollingTimeout&&0<f.longPollingTimeout&&(this.ja=f.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=_i.prototype,t.la=8,t.G=1,t.connect=function(f,b,P,G){Ut(0),this.W=f,this.H=b||{},P&&G!==void 0&&(this.H.OSID=P,this.H.OAID=G),this.F=this.X,this.I=mn(this,null,this.W),v(this)};function Io(f){if(ql(f),f.G==3){var b=f.U++,P=Tr(f.I);if(Kt(P,"SID",f.K),Kt(P,"RID",b),Kt(P,"TYPE","terminate"),oe(f,P),b=new hn(f,f.j,b),b.L=2,b.v=Ma(Tr(P)),P=!1,o.navigator&&o.navigator.sendBeacon)try{P=o.navigator.sendBeacon(b.v.toString(),"")}catch{}!P&&o.Image&&(new Image().src=b.v,P=!0),P||(b.g=tr(b.j,null),b.g.ea(b.v)),b.F=Date.now(),oa(b)}Gn(f)}function Ni(f){f.g&&(rt(f),f.g.cancel(),f.g=null)}function ql(f){Ni(f),f.u&&(o.clearTimeout(f.u),f.u=null),St(f),f.h.cancel(),f.s&&(typeof f.s=="number"&&o.clearTimeout(f.s),f.s=null)}function v(f){if(!Ol(f.h)&&!f.s){f.s=!0;var b=f.Ga;ue||me(),Q||(ue(),Q=!0),ce.add(b,f),f.B=0}}function F(f,b){return Ml(f.h)>=f.h.j-(f.s?1:0)?!1:f.s?(f.i=b.D.concat(f.i),!0):f.G==1||f.G==2||f.B>=(f.Va?0:f.Wa)?!1:(f.s=En(y(f.Ga,f,b),Yt(f,f.B)),f.B++,!0)}t.Ga=function(f){if(this.s)if(this.s=null,this.G==1){if(!f){this.U=Math.floor(1e5*Math.random()),f=this.U++;const ge=new hn(this,this.j,f);let Ne=this.o;if(this.S&&(Ne?(Ne=_(Ne),R(Ne,this.S)):Ne=this.S),this.m!==null||this.O||(ge.H=Ne,Ne=null),this.P)e:{for(var b=0,P=0;P<this.i.length;P++){t:{var G=this.i[P];if("__data__"in G.map&&(G=G.map.__data__,typeof G=="string")){G=G.length;break t}G=void 0}if(G===void 0)break;if(b+=G,4096<b){b=P;break e}if(b===4096||P===this.i.length-1){b=P+1;break e}}b=1e3}else b=1e3;b=pe(this,ge,b),P=Tr(this.I),Kt(P,"RID",f),Kt(P,"CVER",22),this.D&&Kt(P,"X-HTTP-Session-Id",this.D),oe(this,P),Ne&&(this.O?b="headers="+encodeURIComponent(String(wi(Ne)))+"&"+b:this.m&&Vl(P,this.m,Ne)),la(this.h,ge),this.Ua&&Kt(P,"TYPE","init"),this.P?(Kt(P,"$req",b),Kt(P,"SID","null"),ge.T=!0,bs(ge,P,null)):bs(ge,P,b),this.G=2}}else this.G==3&&(f?te(this,f):this.i.length==0||Ol(this.h)||te(this))};function te(f,b){var P;b?P=b.l:P=f.U++;const G=Tr(f.I);Kt(G,"SID",f.K),Kt(G,"RID",P),Kt(G,"AID",f.T),oe(f,G),f.m&&f.o&&Vl(G,f.m,f.o),P=new hn(f,f.j,P,f.B+1),f.m===null&&(P.H=f.o),b&&(f.i=b.D.concat(f.i)),b=pe(f,P,1e3),P.I=Math.round(.5*f.wa)+Math.round(.5*f.wa*Math.random()),la(f.h,P),bs(P,G,b)}function oe(f,b){f.H&&J(f.H,function(P,G){Kt(b,G,P)}),f.l&&Da({},function(P,G){Kt(b,G,P)})}function pe(f,b,P){P=Math.min(f.i.length,P);var G=f.l?y(f.l.Na,f.l,f):null;e:{var ge=f.i;let Ne=-1;for(;;){const Be=["count="+P];Ne==-1?0<P?(Ne=ge[0].g,Be.push("ofs="+Ne)):Ne=0:Be.push("ofs="+Ne);let Xt=!0;for(let Qn=0;Qn<P;Qn++){let Ht=ge[Qn].g;const ln=ge[Qn].map;if(Ht-=Ne,0>Ht)Ne=Math.max(0,ge[Qn].g-100),Xt=!1;else try{fd(ln,Be,"req"+Ht+"_")}catch{G&&G(ln)}}if(Xt){G=Be.join("&");break e}}}return f=f.i.splice(0,P),b.D=f,G}function Te(f){if(!f.g&&!f.u){f.Y=1;var b=f.Fa;ue||me(),Q||(ue(),Q=!0),ce.add(b,f),f.v=0}}function Le(f){return f.g||f.u||3<=f.v?!1:(f.Y++,f.u=En(y(f.Fa,f),Yt(f,f.v)),f.v++,!0)}t.Fa=function(){if(this.u=null,dt(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var f=2*this.R;this.j.info("BP detection timer enabled: "+f),this.A=En(y(this.ab,this),f)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ut(10),Ni(this),dt(this))};function rt(f){f.A!=null&&(o.clearTimeout(f.A),f.A=null)}function dt(f){f.g=new hn(f,f.j,"rpc",f.Y),f.m===null&&(f.g.H=f.o),f.g.O=0;var b=Tr(f.qa);Kt(b,"RID","rpc"),Kt(b,"SID",f.K),Kt(b,"AID",f.T),Kt(b,"CI",f.F?"0":"1"),!f.F&&f.ja&&Kt(b,"TO",f.ja),Kt(b,"TYPE","xmlhttp"),oe(f,b),f.m&&f.o&&Vl(b,f.m,f.o),f.L&&(f.g.I=f.L);var P=f.g;f=f.ia,P.L=1,P.v=Ma(Tr(b)),P.m=null,P.P=!0,gi(P,f)}t.Za=function(){this.C!=null&&(this.C=null,Ni(this),Le(this),Ut(19))};function St(f){f.C!=null&&(o.clearTimeout(f.C),f.C=null)}function jt(f,b){var P=null;if(f.g==b){St(f),rt(f),f.g=null;var G=2}else if(Ds(f.h,b))P=b.D,Fc(f.h,b),G=1;else return;if(f.G!=0){if(b.o)if(G==1){P=b.m?b.m.length:0,b=Date.now()-b.F;var ge=f.B;G=zt(),at(G,new Vn(G,P)),v(f)}else Te(f);else if(ge=b.s,ge==3||ge==0&&0<b.X||!(G==1&&F(f,b)||G==2&&Le(f)))switch(P&&0<P.length&&(b=f.h,b.i=b.i.concat(P)),ge){case 1:dn(f,5);break;case 4:dn(f,10);break;case 3:dn(f,6);break;default:dn(f,2)}}}function Yt(f,b){let P=f.Ta+Math.floor(Math.random()*f.cb);return f.isActive()||(P*=2),P*b}function dn(f,b){if(f.j.info("Error code "+b),b==2){var P=y(f.fb,f),G=f.Xa;const ge=!G;G=new kn(G||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Oa(G,"https"),Ma(G),ge?dd(G.toString(),P):hd(G.toString(),P)}else Ut(2);f.G=0,f.l&&f.l.sa(b),Gn(f),ql(f)}t.fb=function(f){f?(this.j.info("Successfully pinged google.com"),Ut(2)):(this.j.info("Failed to ping google.com"),Ut(1))};function Gn(f){if(f.G=0,f.ka=[],f.l){const b=Wn(f.h);(b.length!=0||f.i.length!=0)&&(I(f.ka,b),I(f.ka,f.i),f.h.i.length=0,S(f.i),f.i.length=0),f.l.ra()}}function mn(f,b,P){var G=P instanceof kn?Tr(P):new kn(P);if(G.g!="")b&&(G.g=b+"."+G.g),So(G,G.s);else{var ge=o.location;G=ge.protocol,b=b?b+"."+ge.hostname:ge.hostname,ge=+ge.port;var Ne=new kn(null);G&&Oa(Ne,G),b&&(Ne.g=b),ge&&So(Ne,ge),P&&(Ne.l=P),G=Ne}return P=f.D,b=f.ya,P&&b&&Kt(G,P,b),Kt(G,"VER",f.la),oe(f,G),G}function tr(f,b,P){if(b&&!f.J)throw Error("Can't create secondary domain capable XhrIo object.");return b=f.Ca&&!f.pa?new Sn(new Eo({eb:P})):new Sn(f.pa),b.Ha(f.J),b}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Kn(){}t=Kn.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function nr(){}nr.prototype.g=function(f,b){return new Yn(f,b)};function Yn(f,b){$e.call(this),this.g=new _i(b),this.l=f,this.h=b&&b.messageUrlParams||null,f=b&&b.messageHeaders||null,b&&b.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=b&&b.initMessageHeaders||null,b&&b.messageContentType&&(f?f["X-WebChannel-Content-Type"]=b.messageContentType:f={"X-WebChannel-Content-Type":b.messageContentType}),b&&b.va&&(f?f["X-WebChannel-Client-Profile"]=b.va:f={"X-WebChannel-Client-Profile":b.va}),this.g.S=f,(f=b&&b.Sb)&&!T(f)&&(this.g.m=f),this.v=b&&b.supportsCrossDomainXhr||!1,this.u=b&&b.sendRawJson||!1,(b=b&&b.httpSessionIdParam)&&!T(b)&&(this.g.D=b,f=this.h,f!==null&&b in f&&(f=this.h,b in f&&delete f[b])),this.j=new Ai(this)}N(Yn,$e),Yn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Yn.prototype.close=function(){Io(this.g)},Yn.prototype.o=function(f){var b=this.g;if(typeof f=="string"){var P={};P.__data__=f,f=P}else this.u&&(P={},P.__data__=ft(f),f=P);b.i.push(new Rl(b.Ya++,f)),b.G==3&&v(b)},Yn.prototype.N=function(){this.g.l=null,delete this.j,Io(this.g),delete this.g,Yn.aa.N.call(this)};function Ms(f){qe.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var b=f.__sm__;if(b){e:{for(const P in b){f=P;break e}f=void 0}(this.i=f)&&(f=this.i,b=b!==null&&f in b?b[f]:void 0),this.data=b}else this.data=f}N(Ms,qe);function Si(){Ke.call(this),this.status=1}N(Si,Ke);function Ai(f){this.g=f}N(Ai,Kn),Ai.prototype.ua=function(){at(this.g,"a")},Ai.prototype.ta=function(f){at(this.g,new Ms(f))},Ai.prototype.sa=function(f){at(this.g,new Si)},Ai.prototype.ra=function(){at(this.g,"b")},nr.prototype.createWebChannel=nr.prototype.g,Yn.prototype.send=Yn.prototype.o,Yn.prototype.open=Yn.prototype.m,Yn.prototype.close=Yn.prototype.close,WN=function(){return new nr},$N=function(){return zt()},HN=ut,w2={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Bn.NO_ERROR=0,Bn.TIMEOUT=8,Bn.HTTP_ERROR=6,Rp=Bn,Sr.COMPLETE="complete",qN=Sr,tt.EventType=It,It.OPEN="a",It.CLOSE="b",It.ERROR="c",It.MESSAGE="d",$e.prototype.listen=$e.prototype.K,Wd=tt,Sn.prototype.listenOnce=Sn.prototype.L,Sn.prototype.getLastError=Sn.prototype.Ka,Sn.prototype.getLastErrorCode=Sn.prototype.Ba,Sn.prototype.getStatus=Sn.prototype.Z,Sn.prototype.getResponseJson=Sn.prototype.Oa,Sn.prototype.getResponseText=Sn.prototype.oa,Sn.prototype.send=Sn.prototype.ea,Sn.prototype.setWithCredentials=Sn.prototype.Ha,zN=Sn}).apply(typeof rp<"u"?rp:typeof self<"u"?self:typeof window<"u"?window:{});const Xw="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ps{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ps.UNAUTHENTICATED=new ps(null),ps.GOOGLE_CREDENTIALS=new ps("google-credentials-uid"),ps.FIRST_PARTY=new ps("first-party-uid"),ps.MOCK_USER=new ps("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let td="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gc=new ev("@firebase/firestore");function Od(){return gc.logLevel}function ht(t,...e){if(gc.logLevel<=Zt.DEBUG){const n=e.map(dv);gc.debug(`Firestore (${td}): ${t}`,...n)}}function go(t,...e){if(gc.logLevel<=Zt.ERROR){const n=e.map(dv);gc.error(`Firestore (${td}): ${t}`,...n)}}function Bu(t,...e){if(gc.logLevel<=Zt.WARN){const n=e.map(dv);gc.warn(`Firestore (${td}): ${t}`,...n)}}function dv(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ct(t="Unexpected state"){const e=`FIRESTORE (${td}) INTERNAL ASSERTION FAILED: `+t;throw go(e),new Error(e)}function bn(t,e){t||Ct()}function Dt(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const je={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Je extends sa{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oo{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GN{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class wL{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(ps.UNAUTHENTICATED))}shutdown(){}}class bL{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class _L{constructor(e){this.t=e,this.currentUser=ps.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){bn(this.o===void 0);let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let i=new oo;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new oo,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},o=l=>{ht("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(l=>o(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?o(l):(ht("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new oo)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(ht("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(bn(typeof r.accessToken=="string"),new GN(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return bn(e===null||typeof e=="string"),new ps(e)}}class NL{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=ps.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class SL{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new NL(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(ps.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class AL{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class EL{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){bn(this.o===void 0);const r=i=>{i.error!=null&&ht("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const a=i.token!==this.R;return this.R=i.token,ht("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{ht("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):ht("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(bn(typeof n.token=="string"),this.R=n.token,new AL(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kL(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KN{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=kL(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function cn(t,e){return t<e?-1:t>e?1:0}function zu(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Je(je.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Je(je.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new Je(je.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Je(je.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return _r.fromMillis(Date.now())}static fromDate(e){return _r.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new _r(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?cn(this.nanoseconds,e.nanoseconds):cn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Rt(e)}static min(){return new Rt(new _r(0,0))}static max(){return new Rt(new _r(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oh{constructor(e,n,r){n===void 0?n=0:n>e.length&&Ct(),r===void 0?r=e.length-n:r>e.length-n&&Ct(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Oh.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Oh?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),a=n.get(s);if(i<a)return-1;if(i>a)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Mn extends Oh{construct(e,n,r){return new Mn(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Je(je.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Mn(n)}static emptyPath(){return new Mn([])}}const TL=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Zr extends Oh{construct(e,n,r){return new Zr(e,n,r)}static isValidIdentifier(e){return TL.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Zr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Zr(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new Je(je.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;s<e.length;){const o=e[s];if(o==="\\"){if(s+1===e.length)throw new Je(je.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new Je(je.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else o==="`"?(a=!a,s++):o!=="."||a?(r+=o,s++):(i(),s++)}if(i(),a)throw new Je(je.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Zr(n)}static emptyPath(){return new Zr([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wt{constructor(e){this.path=e}static fromPath(e){return new wt(Mn.fromString(e))}static fromName(e){return new wt(Mn.fromString(e).popFirst(5))}static empty(){return new wt(Mn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Mn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Mn.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new wt(new Mn(e.slice()))}}function IL(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=Rt.fromTimestamp(r===1e9?new _r(n+1,0):new _r(n,r));return new bl(s,wt.empty(),e)}function CL(t){return new bl(t.readTime,t.key,-1)}class bl{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new bl(Rt.min(),wt.empty(),-1)}static max(){return new bl(Rt.max(),wt.empty(),-1)}}function PL(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=wt.comparator(t.documentKey,e.documentKey),n!==0?n:cn(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jL="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class LL{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lf(t){if(t.code!==je.FAILED_PRECONDITION||t.message!==jL)throw t;ht("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ct(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Oe((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof Oe?n:Oe.resolve(n)}catch(n){return Oe.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):Oe.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):Oe.reject(n)}static resolve(e){return new Oe((n,r)=>{n(e)})}static reject(e){return new Oe((n,r)=>{r(e)})}static waitFor(e){return new Oe((n,r)=>{let s=0,i=0,a=!1;e.forEach(o=>{++s,o.next(()=>{++i,a&&i===s&&n()},l=>r(l))}),a=!0,i===s&&n()})}static or(e){let n=Oe.resolve(!1);for(const r of e)n=n.next(s=>s?Oe.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new Oe((r,s)=>{const i=e.length,a=new Array(i);let o=0;for(let l=0;l<i;l++){const c=l;n(e[c]).next(d=>{a[c]=d,++o,o===i&&r(a)},d=>s(d))}})}static doWhile(e,n){return new Oe((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function RL(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function cf(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hv{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}hv.oe=-1;function dg(t){return t==null}function Nm(t){return t===0&&1/t==-1/0}function DL(t){return typeof t=="number"&&Number.isInteger(t)&&!Nm(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jw(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Lc(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function YN(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class er{constructor(e,n){this.comparator=e,this.root=n||Xr.EMPTY}insert(e,n){return new er(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Xr.BLACK,null,null))}remove(e){return new er(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Xr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new sp(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new sp(this.root,e,this.comparator,!1)}getReverseIterator(){return new sp(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new sp(this.root,e,this.comparator,!0)}}class sp{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Xr{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Xr.RED,this.left=s??Xr.EMPTY,this.right=i??Xr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new Xr(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Xr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Xr.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Xr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Xr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ct();const e=this.left.check();if(e!==this.right.check())throw Ct();return e+(this.isRed()?0:1)}}Xr.EMPTY=null,Xr.RED=!0,Xr.BLACK=!1;Xr.EMPTY=new class{constructor(){this.size=0}get key(){throw Ct()}get value(){throw Ct()}get color(){throw Ct()}get left(){throw Ct()}get right(){throw Ct()}copy(e,n,r,s,i){return this}insert(e,n,r){return new Xr(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts{constructor(e){this.comparator=e,this.data=new er(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Zw(this.data.getIterator())}getIteratorFrom(e){return new Zw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof ts)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new ts(this.comparator);return n.data=e,n}}class Zw{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci{constructor(e){this.fields=e,e.sort(Zr.comparator)}static empty(){return new ci([])}unionWith(e){let n=new ts(Zr.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new ci(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return zu(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QN extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rs{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new QN("Invalid base64 string: "+i):i}}(e);return new rs(n)}static fromUint8Array(e){const n=function(s){let i="";for(let a=0;a<s.length;++a)i+=String.fromCharCode(s[a]);return i}(e);return new rs(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return cn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}rs.EMPTY_BYTE_STRING=new rs("");const OL=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function _l(t){if(bn(!!t),typeof t=="string"){let e=0;const n=OL.exec(t);if(bn(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:fr(t.seconds),nanos:fr(t.nanos)}}function fr(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function yc(t){return typeof t=="string"?rs.fromBase64String(t):rs.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fv(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function pv(t){const e=t.mapValue.fields.__previous_value__;return fv(e)?pv(e):e}function Mh(t){const e=_l(t.mapValue.fields.__local_write_time__.timestampValue);return new _r(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ML{constructor(e,n,r,s,i,a,o,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=o,this.longPollingOptions=l,this.useFetchStreams=c}}class Fh{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Fh("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Fh&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ip={mapValue:{}};function vc(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?fv(t)?4:UL(t)?9007199254740991:FL(t)?10:11:Ct()}function Pa(t,e){if(t===e)return!0;const n=vc(t);if(n!==vc(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Mh(t).isEqual(Mh(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const a=_l(s.timestampValue),o=_l(i.timestampValue);return a.seconds===o.seconds&&a.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return yc(s.bytesValue).isEqual(yc(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return fr(s.geoPointValue.latitude)===fr(i.geoPointValue.latitude)&&fr(s.geoPointValue.longitude)===fr(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return fr(s.integerValue)===fr(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const a=fr(s.doubleValue),o=fr(i.doubleValue);return a===o?Nm(a)===Nm(o):isNaN(a)&&isNaN(o)}return!1}(t,e);case 9:return zu(t.arrayValue.values||[],e.arrayValue.values||[],Pa);case 10:case 11:return function(s,i){const a=s.mapValue.fields||{},o=i.mapValue.fields||{};if(Jw(a)!==Jw(o))return!1;for(const l in a)if(a.hasOwnProperty(l)&&(o[l]===void 0||!Pa(a[l],o[l])))return!1;return!0}(t,e);default:return Ct()}}function Uh(t,e){return(t.values||[]).find(n=>Pa(n,e))!==void 0}function qu(t,e){if(t===e)return 0;const n=vc(t),r=vc(e);if(n!==r)return cn(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return cn(t.booleanValue,e.booleanValue);case 2:return function(i,a){const o=fr(i.integerValue||i.doubleValue),l=fr(a.integerValue||a.doubleValue);return o<l?-1:o>l?1:o===l?0:isNaN(o)?isNaN(l)?0:-1:1}(t,e);case 3:return eb(t.timestampValue,e.timestampValue);case 4:return eb(Mh(t),Mh(e));case 5:return cn(t.stringValue,e.stringValue);case 6:return function(i,a){const o=yc(i),l=yc(a);return o.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(i,a){const o=i.split("/"),l=a.split("/");for(let c=0;c<o.length&&c<l.length;c++){const d=cn(o[c],l[c]);if(d!==0)return d}return cn(o.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,a){const o=cn(fr(i.latitude),fr(a.latitude));return o!==0?o:cn(fr(i.longitude),fr(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return tb(t.arrayValue,e.arrayValue);case 10:return function(i,a){var o,l,c,d;const g=i.fields||{},y=a.fields||{},p=(o=g.value)===null||o===void 0?void 0:o.arrayValue,N=(l=y.value)===null||l===void 0?void 0:l.arrayValue,S=cn(((c=p==null?void 0:p.values)===null||c===void 0?void 0:c.length)||0,((d=N==null?void 0:N.values)===null||d===void 0?void 0:d.length)||0);return S!==0?S:tb(p,N)}(t.mapValue,e.mapValue);case 11:return function(i,a){if(i===ip.mapValue&&a===ip.mapValue)return 0;if(i===ip.mapValue)return 1;if(a===ip.mapValue)return-1;const o=i.fields||{},l=Object.keys(o),c=a.fields||{},d=Object.keys(c);l.sort(),d.sort();for(let g=0;g<l.length&&g<d.length;++g){const y=cn(l[g],d[g]);if(y!==0)return y;const p=qu(o[l[g]],c[d[g]]);if(p!==0)return p}return cn(l.length,d.length)}(t.mapValue,e.mapValue);default:throw Ct()}}function eb(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return cn(t,e);const n=_l(t),r=_l(e),s=cn(n.seconds,r.seconds);return s!==0?s:cn(n.nanos,r.nanos)}function tb(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=qu(n[s],r[s]);if(i)return i}return cn(n.length,r.length)}function Hu(t){return b2(t)}function b2(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=_l(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return yc(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return wt.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=b2(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const a of r)i?i=!1:s+=",",s+=`${a}:${b2(n.fields[a])}`;return s+"}"}(t.mapValue):Ct()}function nb(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function _2(t){return!!t&&"integerValue"in t}function mv(t){return!!t&&"arrayValue"in t}function rb(t){return!!t&&"nullValue"in t}function sb(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Dp(t){return!!t&&"mapValue"in t}function FL(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function ah(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Lc(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=ah(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ah(t.arrayValue.values[n]);return e}return Object.assign({},t)}function UL(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs{constructor(e){this.value=e}static empty(){return new Bs({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Dp(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ah(n)}setAll(e){let n=Zr.emptyPath(),r={},s=[];e.forEach((a,o)=>{if(!n.isImmediateParentOf(o)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=o.popLast()}a?r[o.lastSegment()]=ah(a):s.push(o.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Dp(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Pa(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Dp(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Lc(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Bs(ah(this.value))}}function XN(t){const e=[];return Lc(t.fields,(n,r)=>{const s=new Zr([n]);if(Dp(r)){const i=XN(r.mapValue).fields;if(i.length===0)e.push(s);else for(const a of i)e.push(s.child(a))}else e.push(s)}),new ci(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gs{constructor(e,n,r,s,i,a,o){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=a,this.documentState=o}static newInvalidDocument(e){return new gs(e,0,Rt.min(),Rt.min(),Rt.min(),Bs.empty(),0)}static newFoundDocument(e,n,r,s){return new gs(e,1,n,Rt.min(),r,s,0)}static newNoDocument(e,n){return new gs(e,2,n,Rt.min(),Rt.min(),Bs.empty(),0)}static newUnknownDocument(e,n){return new gs(e,3,n,Rt.min(),Rt.min(),Bs.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Rt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Bs.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Bs.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Rt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof gs&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new gs(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sm{constructor(e,n){this.position=e,this.inclusive=n}}function ib(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],a=t.position[s];if(i.field.isKeyField()?r=wt.comparator(wt.fromName(a.referenceValue),n.key):r=qu(a,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function ab(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Pa(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vh{constructor(e,n="asc"){this.field=e,this.dir=n}}function VL(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JN{}class br extends JN{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new zL(e,n,r):n==="array-contains"?new $L(e,r):n==="in"?new WL(e,r):n==="not-in"?new GL(e,r):n==="array-contains-any"?new KL(e,r):new br(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new qL(e,r):new HL(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(qu(n,this.value)):n!==null&&vc(this.value)===vc(n)&&this.matchesComparison(qu(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ct()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ta extends JN{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new ta(e,n)}matches(e){return ZN(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function ZN(t){return t.op==="and"}function eS(t){return BL(t)&&ZN(t)}function BL(t){for(const e of t.filters)if(e instanceof ta)return!1;return!0}function N2(t){if(t instanceof br)return t.field.canonicalString()+t.op.toString()+Hu(t.value);if(eS(t))return t.filters.map(e=>N2(e)).join(",");{const e=t.filters.map(n=>N2(n)).join(",");return`${t.op}(${e})`}}function tS(t,e){return t instanceof br?function(r,s){return s instanceof br&&r.op===s.op&&r.field.isEqual(s.field)&&Pa(r.value,s.value)}(t,e):t instanceof ta?function(r,s){return s instanceof ta&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,a,o)=>i&&tS(a,s.filters[o]),!0):!1}(t,e):void Ct()}function nS(t){return t instanceof br?function(n){return`${n.field.canonicalString()} ${n.op} ${Hu(n.value)}`}(t):t instanceof ta?function(n){return n.op.toString()+" {"+n.getFilters().map(nS).join(" ,")+"}"}(t):"Filter"}class zL extends br{constructor(e,n,r){super(e,n,r),this.key=wt.fromName(r.referenceValue)}matches(e){const n=wt.comparator(e.key,this.key);return this.matchesComparison(n)}}class qL extends br{constructor(e,n){super(e,"in",n),this.keys=rS("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class HL extends br{constructor(e,n){super(e,"not-in",n),this.keys=rS("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function rS(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>wt.fromName(r.referenceValue))}class $L extends br{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return mv(n)&&Uh(n.arrayValue,this.value)}}class WL extends br{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Uh(this.value.arrayValue,n)}}class GL extends br{constructor(e,n){super(e,"not-in",n)}matches(e){if(Uh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Uh(this.value.arrayValue,n)}}class KL extends br{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!mv(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Uh(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YL{constructor(e,n=null,r=[],s=[],i=null,a=null,o=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=a,this.endAt=o,this.ue=null}}function ob(t,e=null,n=[],r=[],s=null,i=null,a=null){return new YL(t,e,n,r,s,i,a)}function gv(t){const e=Dt(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>N2(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),dg(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Hu(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Hu(r)).join(",")),e.ue=n}return e.ue}function yv(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!VL(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!tS(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!ab(t.startAt,e.startAt)&&ab(t.endAt,e.endAt)}function S2(t){return wt.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nd{constructor(e,n=null,r=[],s=[],i=null,a="F",o=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=a,this.startAt=o,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function QL(t,e,n,r,s,i,a,o){return new nd(t,e,n,r,s,i,a,o)}function hg(t){return new nd(t)}function lb(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function sS(t){return t.collectionGroup!==null}function oh(t){const e=Dt(t);if(e.ce===null){e.ce=[];const n=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let o=new ts(Zr.comparator);return a.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(o=o.add(c.field))})}),o})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new Vh(i,r))}),n.has(Zr.keyField().canonicalString())||e.ce.push(new Vh(Zr.keyField(),r))}return e.ce}function Ia(t){const e=Dt(t);return e.le||(e.le=XL(e,oh(t))),e.le}function XL(t,e){if(t.limitType==="F")return ob(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Vh(s.field,i)});const n=t.endAt?new Sm(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Sm(t.startAt.position,t.startAt.inclusive):null;return ob(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function A2(t,e){const n=t.filters.concat([e]);return new nd(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function E2(t,e,n){return new nd(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function fg(t,e){return yv(Ia(t),Ia(e))&&t.limitType===e.limitType}function iS(t){return`${gv(Ia(t))}|lt:${t.limitType}`}function Zc(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>nS(s)).join(", ")}]`),dg(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Hu(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Hu(s)).join(",")),`Target(${r})`}(Ia(t))}; limitType=${t.limitType})`}function pg(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):wt.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of oh(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(a,o,l){const c=ib(a,o,l);return a.inclusive?c<=0:c<0}(r.startAt,oh(r),s)||r.endAt&&!function(a,o,l){const c=ib(a,o,l);return a.inclusive?c>=0:c>0}(r.endAt,oh(r),s))}(t,e)}function JL(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function aS(t){return(e,n)=>{let r=!1;for(const s of oh(t)){const i=ZL(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function ZL(t,e,n){const r=t.field.isKeyField()?wt.comparator(e.key,n.key):function(i,a,o){const l=a.data.field(i),c=o.data.field(i);return l!==null&&c!==null?qu(l,c):Ct()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Ct()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rd{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Lc(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return YN(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eR=new er(wt.comparator);function yo(){return eR}const oS=new er(wt.comparator);function Gd(...t){let e=oS;for(const n of t)e=e.insert(n.key,n);return e}function lS(t){let e=oS;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function nc(){return lh()}function cS(){return lh()}function lh(){return new rd(t=>t.toString(),(t,e)=>t.isEqual(e))}const tR=new er(wt.comparator),nR=new ts(wt.comparator);function Qt(...t){let e=nR;for(const n of t)e=e.add(n);return e}const rR=new ts(cn);function sR(){return rR}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vv(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Nm(e)?"-0":e}}function uS(t){return{integerValue:""+t}}function iR(t,e){return DL(e)?uS(e):vv(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mg{constructor(){this._=void 0}}function aR(t,e,n){return t instanceof Bh?function(s,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&fv(i)&&(i=pv(i)),i&&(a.fields.__previous_value__=i),{mapValue:a}}(n,e):t instanceof $u?hS(t,e):t instanceof zh?fS(t,e):function(s,i){const a=dS(s,i),o=cb(a)+cb(s.Pe);return _2(a)&&_2(s.Pe)?uS(o):vv(s.serializer,o)}(t,e)}function oR(t,e,n){return t instanceof $u?hS(t,e):t instanceof zh?fS(t,e):n}function dS(t,e){return t instanceof Am?function(r){return _2(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Bh extends mg{}class $u extends mg{constructor(e){super(),this.elements=e}}function hS(t,e){const n=pS(e);for(const r of t.elements)n.some(s=>Pa(s,r))||n.push(r);return{arrayValue:{values:n}}}class zh extends mg{constructor(e){super(),this.elements=e}}function fS(t,e){let n=pS(e);for(const r of t.elements)n=n.filter(s=>!Pa(s,r));return{arrayValue:{values:n}}}class Am extends mg{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function cb(t){return fr(t.integerValue||t.doubleValue)}function pS(t){return mv(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mS{constructor(e,n){this.field=e,this.transform=n}}function lR(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof $u&&s instanceof $u||r instanceof zh&&s instanceof zh?zu(r.elements,s.elements,Pa):r instanceof Am&&s instanceof Am?Pa(r.Pe,s.Pe):r instanceof Bh&&s instanceof Bh}(t.transform,e.transform)}class cR{constructor(e,n){this.version=e,this.transformResults=n}}class Ps{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Ps}static exists(e){return new Ps(void 0,e)}static updateTime(e){return new Ps(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Op(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class gg{}function gS(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new yg(t.key,Ps.none()):new uf(t.key,t.data,Ps.none());{const n=t.data,r=Bs.empty();let s=new ts(Zr.comparator);for(let i of e.fields)if(!s.has(i)){let a=n.field(i);a===null&&i.length>1&&(i=i.popLast(),a=n.field(i)),a===null?r.delete(i):r.set(i,a),s=s.add(i)}return new Pl(t.key,r,new ci(s.toArray()),Ps.none())}}function uR(t,e,n){t instanceof uf?function(s,i,a){const o=s.value.clone(),l=db(s.fieldTransforms,i,a.transformResults);o.setAll(l),i.convertToFoundDocument(a.version,o).setHasCommittedMutations()}(t,e,n):t instanceof Pl?function(s,i,a){if(!Op(s.precondition,i))return void i.convertToUnknownDocument(a.version);const o=db(s.fieldTransforms,i,a.transformResults),l=i.data;l.setAll(yS(s)),l.setAll(o),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(t,e,n):function(s,i,a){i.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function ch(t,e,n,r){return t instanceof uf?function(i,a,o,l){if(!Op(i.precondition,a))return o;const c=i.value.clone(),d=hb(i.fieldTransforms,l,a);return c.setAll(d),a.convertToFoundDocument(a.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof Pl?function(i,a,o,l){if(!Op(i.precondition,a))return o;const c=hb(i.fieldTransforms,l,a),d=a.data;return d.setAll(yS(i)),d.setAll(c),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),o===null?null:o.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(g=>g.field))}(t,e,n,r):function(i,a,o){return Op(i.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):o}(t,e,n)}function dR(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=dS(r.transform,s||null);i!=null&&(n===null&&(n=Bs.empty()),n.set(r.field,i))}return n||null}function ub(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&zu(r,s,(i,a)=>lR(i,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class uf extends gg{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Pl extends gg{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function yS(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function db(t,e,n){const r=new Map;bn(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],a=i.transform,o=e.data.field(i.field);r.set(i.field,oR(a,o,n[s]))}return r}function hb(t,e,n){const r=new Map;for(const s of t){const i=s.transform,a=n.data.field(s.field);r.set(s.field,aR(i,a,e))}return r}class yg extends gg{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class hR extends gg{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fR{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&uR(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=ch(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=ch(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=cS();return this.mutations.forEach(s=>{const i=e.get(s.key),a=i.overlayedDocument;let o=this.applyToLocalView(a,i.mutatedFields);o=n.has(s.key)?null:o;const l=gS(a,o);l!==null&&r.set(s.key,l),a.isValidDocument()||a.convertToNoDocument(Rt.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Qt())}isEqual(e){return this.batchId===e.batchId&&zu(this.mutations,e.mutations,(n,r)=>ub(n,r))&&zu(this.baseMutations,e.baseMutations,(n,r)=>ub(n,r))}}class xv{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){bn(e.mutations.length===r.length);let s=function(){return tR}();const i=e.mutations;for(let a=0;a<i.length;a++)s=s.insert(i[a].key,r[a].version);return new xv(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pR{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mR{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xr,rn;function gR(t){switch(t){default:return Ct();case je.CANCELLED:case je.UNKNOWN:case je.DEADLINE_EXCEEDED:case je.RESOURCE_EXHAUSTED:case je.INTERNAL:case je.UNAVAILABLE:case je.UNAUTHENTICATED:return!1;case je.INVALID_ARGUMENT:case je.NOT_FOUND:case je.ALREADY_EXISTS:case je.PERMISSION_DENIED:case je.FAILED_PRECONDITION:case je.ABORTED:case je.OUT_OF_RANGE:case je.UNIMPLEMENTED:case je.DATA_LOSS:return!0}}function vS(t){if(t===void 0)return go("GRPC error has no .code"),je.UNKNOWN;switch(t){case xr.OK:return je.OK;case xr.CANCELLED:return je.CANCELLED;case xr.UNKNOWN:return je.UNKNOWN;case xr.DEADLINE_EXCEEDED:return je.DEADLINE_EXCEEDED;case xr.RESOURCE_EXHAUSTED:return je.RESOURCE_EXHAUSTED;case xr.INTERNAL:return je.INTERNAL;case xr.UNAVAILABLE:return je.UNAVAILABLE;case xr.UNAUTHENTICATED:return je.UNAUTHENTICATED;case xr.INVALID_ARGUMENT:return je.INVALID_ARGUMENT;case xr.NOT_FOUND:return je.NOT_FOUND;case xr.ALREADY_EXISTS:return je.ALREADY_EXISTS;case xr.PERMISSION_DENIED:return je.PERMISSION_DENIED;case xr.FAILED_PRECONDITION:return je.FAILED_PRECONDITION;case xr.ABORTED:return je.ABORTED;case xr.OUT_OF_RANGE:return je.OUT_OF_RANGE;case xr.UNIMPLEMENTED:return je.UNIMPLEMENTED;case xr.DATA_LOSS:return je.DATA_LOSS;default:return Ct()}}(rn=xr||(xr={}))[rn.OK=0]="OK",rn[rn.CANCELLED=1]="CANCELLED",rn[rn.UNKNOWN=2]="UNKNOWN",rn[rn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",rn[rn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",rn[rn.NOT_FOUND=5]="NOT_FOUND",rn[rn.ALREADY_EXISTS=6]="ALREADY_EXISTS",rn[rn.PERMISSION_DENIED=7]="PERMISSION_DENIED",rn[rn.UNAUTHENTICATED=16]="UNAUTHENTICATED",rn[rn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",rn[rn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",rn[rn.ABORTED=10]="ABORTED",rn[rn.OUT_OF_RANGE=11]="OUT_OF_RANGE",rn[rn.UNIMPLEMENTED=12]="UNIMPLEMENTED",rn[rn.INTERNAL=13]="INTERNAL",rn[rn.UNAVAILABLE=14]="UNAVAILABLE",rn[rn.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yR(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vR=new ac([4294967295,4294967295],0);function fb(t){const e=yR().encode(t),n=new BN;return n.update(e),new Uint8Array(n.digest())}function pb(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new ac([n,r],0),new ac([s,i],0)]}class wv{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Kd(`Invalid padding: ${n}`);if(r<0)throw new Kd(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Kd(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Kd(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=ac.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(ac.fromNumber(r)));return s.compare(vR)===1&&(s=new ac([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=fb(e),[r,s]=pb(n);for(let i=0;i<this.hashCount;i++){const a=this.Ee(r,s,i);if(!this.de(a))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),a=new wv(i,s,n);return r.forEach(o=>a.insert(o)),a}insert(e){if(this.Ie===0)return;const n=fb(e),[r,s]=pb(n);for(let i=0;i<this.hashCount;i++){const a=this.Ee(r,s,i);this.Ae(a)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Kd extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vg{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,df.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new vg(Rt.min(),s,new er(cn),yo(),Qt())}}class df{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new df(r,n,Qt(),Qt(),Qt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mp{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class xS{constructor(e,n){this.targetId=e,this.me=n}}class wS{constructor(e,n,r=rs.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class mb{constructor(){this.fe=0,this.ge=yb(),this.pe=rs.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Qt(),n=Qt(),r=Qt();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:Ct()}}),new df(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=yb()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,bn(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class xR{constructor(e){this.Le=e,this.Be=new Map,this.ke=yo(),this.qe=gb(),this.Qe=new er(cn)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:Ct()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const i=s.target;if(S2(i))if(r===0){const a=new wt(i.path);this.Ue(n,a,gs.newNoDocument(a,Rt.min()))}else bn(r===1);else{const a=this.Ye(n);if(a!==r){const o=this.Ze(e),l=o?this.Xe(o,e,a):1;if(l!==0){this.je(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let a,o;try{a=yc(r).toUint8Array()}catch(l){if(l instanceof QN)return Bu("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{o=new wv(a,s,i)}catch(l){return Bu(l instanceof Kd?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return o.Ie===0?null:o}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const a=this.Le.tt(),o=`projects/${a.projectId}/databases/${a.database}/documents/${i.path.canonicalString()}`;e.mightContain(o)||(this.Ue(n,i,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((i,a)=>{const o=this.Je(a);if(o){if(i.current&&S2(o.target)){const l=new wt(o.target.path);this.ke.get(l)!==null||this.it(a,l)||this.Ue(a,l,gs.newNoDocument(l,e))}i.be&&(n.set(a,i.ve()),i.Ce())}});let r=Qt();this.qe.forEach((i,a)=>{let o=!0;a.forEachWhile(l=>{const c=this.Je(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)}),o&&(r=r.add(i))}),this.ke.forEach((i,a)=>a.setReadTime(e));const s=new vg(e,n,this.Qe,this.ke,r);return this.ke=yo(),this.qe=gb(),this.Qe=new er(cn),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new mb,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new ts(cn),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||ht("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new mb),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function gb(){return new er(wt.comparator)}function yb(){return new er(wt.comparator)}const wR={asc:"ASCENDING",desc:"DESCENDING"},bR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},_R={and:"AND",or:"OR"};class NR{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function k2(t,e){return t.useProto3Json||dg(e)?e:{value:e}}function Em(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function bS(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function SR(t,e){return Em(t,e.toTimestamp())}function Ca(t){return bn(!!t),Rt.fromTimestamp(function(n){const r=_l(n);return new _r(r.seconds,r.nanos)}(t))}function bv(t,e){return T2(t,e).canonicalString()}function T2(t,e){const n=function(s){return new Mn(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function _S(t){const e=Mn.fromString(t);return bn(kS(e)),e}function I2(t,e){return bv(t.databaseId,e.path)}function j0(t,e){const n=_S(e);if(n.get(1)!==t.databaseId.projectId)throw new Je(je.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Je(je.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new wt(SS(n))}function NS(t,e){return bv(t.databaseId,e)}function AR(t){const e=_S(t);return e.length===4?Mn.emptyPath():SS(e)}function C2(t){return new Mn(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function SS(t){return bn(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function vb(t,e,n){return{name:I2(t,e),fields:n.value.mapValue.fields}}function ER(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:Ct()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(c,d){return c.useProto3Json?(bn(d===void 0||typeof d=="string"),rs.fromBase64String(d||"")):(bn(d===void 0||d instanceof Buffer||d instanceof Uint8Array),rs.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,o=a&&function(c){const d=c.code===void 0?je.UNKNOWN:vS(c.code);return new Je(d,c.message||"")}(a);n=new wS(r,s,i,o||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=j0(t,r.document.name),i=Ca(r.document.updateTime),a=r.document.createTime?Ca(r.document.createTime):Rt.min(),o=new Bs({mapValue:{fields:r.document.fields}}),l=gs.newFoundDocument(s,i,a,o),c=r.targetIds||[],d=r.removedTargetIds||[];n=new Mp(c,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=j0(t,r.document),i=r.readTime?Ca(r.readTime):Rt.min(),a=gs.newNoDocument(s,i),o=r.removedTargetIds||[];n=new Mp([],o,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=j0(t,r.document),i=r.removedTargetIds||[];n=new Mp([],i,s,null)}else{if(!("filter"in e))return Ct();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,a=new mR(s,i),o=r.targetId;n=new xS(o,a)}}return n}function kR(t,e){let n;if(e instanceof uf)n={update:vb(t,e.key,e.value)};else if(e instanceof yg)n={delete:I2(t,e.key)};else if(e instanceof Pl)n={update:vb(t,e.key,e.data),updateMask:OR(e.fieldMask)};else{if(!(e instanceof hR))return Ct();n={verify:I2(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const o=a.transform;if(o instanceof Bh)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof $u)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof zh)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof Am)return{fieldPath:a.field.canonicalString(),increment:o.Pe};throw Ct()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:SR(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:Ct()}(t,e.precondition)),n}function TR(t,e){return t&&t.length>0?(bn(e!==void 0),t.map(n=>function(s,i){let a=s.updateTime?Ca(s.updateTime):Ca(i);return a.isEqual(Rt.min())&&(a=Ca(i)),new cR(a,s.transformResults||[])}(n,e))):[]}function IR(t,e){return{documents:[NS(t,e.path)]}}function CR(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=NS(t,s);const i=function(c){if(c.length!==0)return ES(ta.create(c,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const a=function(c){if(c.length!==0)return c.map(d=>function(y){return{field:eu(y.field),direction:LR(y.dir)}}(d))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const o=k2(t,e.limit);return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:s}}function PR(t){let e=AR(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){bn(r===1);const d=n.from[0];d.allDescendants?s=d.collectionId:e=e.child(d.collectionId)}let i=[];n.where&&(i=function(g){const y=AS(g);return y instanceof ta&&eS(y)?y.getFilters():[y]}(n.where));let a=[];n.orderBy&&(a=function(g){return g.map(y=>function(N){return new Vh(tu(N.field),function(I){switch(I){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction))}(y))}(n.orderBy));let o=null;n.limit&&(o=function(g){let y;return y=typeof g=="object"?g.value:g,dg(y)?null:y}(n.limit));let l=null;n.startAt&&(l=function(g){const y=!!g.before,p=g.values||[];return new Sm(p,y)}(n.startAt));let c=null;return n.endAt&&(c=function(g){const y=!g.before,p=g.values||[];return new Sm(p,y)}(n.endAt)),QL(e,s,a,i,o,"F",l,c)}function jR(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ct()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function AS(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=tu(n.unaryFilter.field);return br.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=tu(n.unaryFilter.field);return br.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=tu(n.unaryFilter.field);return br.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=tu(n.unaryFilter.field);return br.create(a,"!=",{nullValue:"NULL_VALUE"});default:return Ct()}}(t):t.fieldFilter!==void 0?function(n){return br.create(tu(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ct()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return ta.create(n.compositeFilter.filters.map(r=>AS(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Ct()}}(n.compositeFilter.op))}(t):Ct()}function LR(t){return wR[t]}function RR(t){return bR[t]}function DR(t){return _R[t]}function eu(t){return{fieldPath:t.canonicalString()}}function tu(t){return Zr.fromServerFormat(t.fieldPath)}function ES(t){return t instanceof br?function(n){if(n.op==="=="){if(sb(n.value))return{unaryFilter:{field:eu(n.field),op:"IS_NAN"}};if(rb(n.value))return{unaryFilter:{field:eu(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(sb(n.value))return{unaryFilter:{field:eu(n.field),op:"IS_NOT_NAN"}};if(rb(n.value))return{unaryFilter:{field:eu(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:eu(n.field),op:RR(n.op),value:n.value}}}(t):t instanceof ta?function(n){const r=n.getFilters().map(s=>ES(s));return r.length===1?r[0]:{compositeFilter:{op:DR(n.op),filters:r}}}(t):Ct()}function OR(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function kS(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class il{constructor(e,n,r,s,i=Rt.min(),a=Rt.min(),o=rs.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=o,this.expectedCount=l}withSequenceNumber(e){return new il(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new il(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new il(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new il(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MR{constructor(e){this.ct=e}}function FR(t){const e=PR({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?E2(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UR{constructor(){this.un=new VR}addToCollectionParentIndex(e,n){return this.un.add(n),Oe.resolve()}getCollectionParents(e,n){return Oe.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return Oe.resolve()}deleteFieldIndex(e,n){return Oe.resolve()}deleteAllFieldIndexes(e){return Oe.resolve()}createTargetIndexes(e,n){return Oe.resolve()}getDocumentsMatchingTarget(e,n){return Oe.resolve(null)}getIndexType(e,n){return Oe.resolve(0)}getFieldIndexes(e,n){return Oe.resolve([])}getNextCollectionGroupToUpdate(e){return Oe.resolve(null)}getMinOffset(e,n){return Oe.resolve(bl.min())}getMinOffsetFromCollectionGroup(e,n){return Oe.resolve(bl.min())}updateCollectionGroup(e,n,r){return Oe.resolve()}updateIndexEntries(e,n){return Oe.resolve()}}class VR{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new ts(Mn.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new ts(Mn.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wu{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Wu(0)}static kn(){return new Wu(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BR{constructor(){this.changes=new rd(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,gs.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?Oe.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zR{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qR{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&ch(r.mutation,s,ci.empty(),_r.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Qt()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Qt()){const s=nc();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let a=Gd();return i.forEach((o,l)=>{a=a.insert(o,l.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const r=nc();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Qt()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((a,o)=>{n.set(a,o)})})}computeViews(e,n,r,s){let i=yo();const a=lh(),o=function(){return lh()}();return n.forEach((l,c)=>{const d=r.get(c.key);s.has(c.key)&&(d===void 0||d.mutation instanceof Pl)?i=i.insert(c.key,c):d!==void 0?(a.set(c.key,d.mutation.getFieldMask()),ch(d.mutation,c,d.mutation.getFieldMask(),_r.now())):a.set(c.key,ci.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((c,d)=>a.set(c,d)),n.forEach((c,d)=>{var g;return o.set(c,new zR(d,(g=a.get(c))!==null&&g!==void 0?g:null))}),o))}recalculateAndSaveOverlays(e,n){const r=lh();let s=new er((a,o)=>a-o),i=Qt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const o of a)o.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let d=r.get(l)||ci.empty();d=o.applyToLocalView(c,d),r.set(l,d);const g=(s.get(o.batchId)||Qt()).add(l);s=s.insert(o.batchId,g)})}).next(()=>{const a=[],o=s.getReverseIterator();for(;o.hasNext();){const l=o.getNext(),c=l.key,d=l.value,g=cS();d.forEach(y=>{if(!i.has(y)){const p=gS(n.get(y),r.get(y));p!==null&&g.set(y,p),i=i.add(y)}}),a.push(this.documentOverlayCache.saveOverlays(e,c,g))}return Oe.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(a){return wt.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):sS(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const a=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):Oe.resolve(nc());let o=-1,l=i;return a.next(c=>Oe.forEach(c,(d,g)=>(o<g.largestBatchId&&(o=g.largestBatchId),i.get(d)?Oe.resolve():this.remoteDocumentCache.getEntry(e,d).next(y=>{l=l.insert(d,y)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,l,c,Qt())).next(d=>({batchId:o,changes:lS(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new wt(n)).next(r=>{let s=Gd();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let a=Gd();return this.indexManager.getCollectionParents(e,i).next(o=>Oe.forEach(o,l=>{const c=function(g,y){return new nd(y,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(n,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,c,r,s).next(d=>{d.forEach((g,y)=>{a=a.insert(g,y)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(a=>{i.forEach((l,c)=>{const d=c.getKey();a.get(d)===null&&(a=a.insert(d,gs.newInvalidDocument(d)))});let o=Gd();return a.forEach((l,c)=>{const d=i.get(l);d!==void 0&&ch(d.mutation,c,ci.empty(),_r.now()),pg(n,c)&&(o=o.insert(l,c))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HR{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return Oe.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Ca(s.createTime)}}(n)),Oe.resolve()}getNamedQuery(e,n){return Oe.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:FR(s.bundledQuery),readTime:Ca(s.readTime)}}(n)),Oe.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $R{constructor(){this.overlays=new er(wt.comparator),this.Ir=new Map}getOverlay(e,n){return Oe.resolve(this.overlays.get(n))}getOverlays(e,n){const r=nc();return Oe.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),Oe.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(r)),Oe.resolve()}getOverlaysForCollection(e,n,r){const s=nc(),i=n.length+1,a=new wt(n.child("")),o=this.overlays.getIteratorFrom(a);for(;o.hasNext();){const l=o.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return Oe.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new er((c,d)=>c-d);const a=this.overlays.getIterator();for(;a.hasNext();){const c=a.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let d=i.get(c.largestBatchId);d===null&&(d=nc(),i=i.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}const o=nc(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,d)=>o.set(c,d)),!(o.size()>=s)););return Oe.resolve(o)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const a=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new pR(n,r));let i=this.Ir.get(n);i===void 0&&(i=Qt(),this.Ir.set(n,i)),this.Ir.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WR{constructor(){this.sessionToken=rs.EMPTY_BYTE_STRING}getSessionToken(e){return Oe.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,Oe.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _v{constructor(){this.Tr=new ts(Fr.Er),this.dr=new ts(Fr.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new Fr(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Fr(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new wt(new Mn([])),r=new Fr(n,e),s=new Fr(n,e+1),i=[];return this.dr.forEachInRange([r,s],a=>{this.Vr(a),i.push(a.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new wt(new Mn([])),r=new Fr(n,e),s=new Fr(n,e+1);let i=Qt();return this.dr.forEachInRange([r,s],a=>{i=i.add(a.key)}),i}containsKey(e){const n=new Fr(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Fr{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return wt.comparator(e.key,n.key)||cn(e.wr,n.wr)}static Ar(e,n){return cn(e.wr,n.wr)||wt.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GR{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new ts(Fr.Er)}checkEmpty(e){return Oe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new fR(i,n,r,s);this.mutationQueue.push(a);for(const o of s)this.br=this.br.add(new Fr(o.key,i)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return Oe.resolve(a)}lookupMutationBatch(e,n){return Oe.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),i=s<0?0:s;return Oe.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Oe.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return Oe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Fr(n,0),s=new Fr(n,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([r,s],a=>{const o=this.Dr(a.wr);i.push(o)}),Oe.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new ts(cn);return n.forEach(s=>{const i=new Fr(s,0),a=new Fr(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,a],o=>{r=r.add(o.wr)})}),Oe.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;wt.isDocumentKey(i)||(i=i.child(""));const a=new Fr(new wt(i),0);let o=new ts(cn);return this.br.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===s&&(o=o.add(l.wr)),!0)},a),Oe.resolve(this.Cr(o))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){bn(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return Oe.forEach(n.mutations,s=>{const i=new Fr(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new Fr(n,0),s=this.br.firstAfterOrEqual(r);return Oe.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,Oe.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KR{constructor(e){this.Mr=e,this.docs=function(){return new er(wt.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,a=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return Oe.resolve(r?r.document.mutableCopy():gs.newInvalidDocument(n))}getEntries(e,n){let r=yo();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():gs.newInvalidDocument(s))}),Oe.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=yo();const a=n.path,o=new wt(a.child("")),l=this.docs.getIteratorFrom(o);for(;l.hasNext();){const{key:c,value:{document:d}}=l.getNext();if(!a.isPrefixOf(c.path))break;c.path.length>a.length+1||PL(CL(d),r)<=0||(s.has(d.key)||pg(n,d))&&(i=i.insert(d.key,d.mutableCopy()))}return Oe.resolve(i)}getAllFromCollectionGroup(e,n,r,s){Ct()}Or(e,n){return Oe.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new YR(this)}getSize(e){return Oe.resolve(this.size)}}class YR extends BR{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),Oe.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QR{constructor(e){this.persistence=e,this.Nr=new rd(n=>gv(n),yv),this.lastRemoteSnapshotVersion=Rt.min(),this.highestTargetId=0,this.Lr=0,this.Br=new _v,this.targetCount=0,this.kr=Wu.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),Oe.resolve()}getLastRemoteSnapshotVersion(e){return Oe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Oe.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),Oe.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),Oe.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Wu(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,Oe.resolve()}updateTargetData(e,n){return this.Kn(n),Oe.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,Oe.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Nr.forEach((a,o)=>{o.sequenceNumber<=n&&r.get(o.targetId)===null&&(this.Nr.delete(a),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),s++)}),Oe.waitFor(i).next(()=>s)}getTargetCount(e){return Oe.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return Oe.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),Oe.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(a=>{i.push(s.markPotentiallyOrphaned(e,a))}),Oe.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),Oe.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return Oe.resolve(r)}containsKey(e,n){return Oe.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XR{constructor(e,n){this.qr={},this.overlays={},this.Qr=new hv(0),this.Kr=!1,this.Kr=!0,this.$r=new WR,this.referenceDelegate=e(this),this.Ur=new QR(this),this.indexManager=new UR,this.remoteDocumentCache=function(s){return new KR(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new MR(n),this.Gr=new HR(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new $R,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new GR(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){ht("MemoryPersistence","Starting transaction:",e);const s=new JR(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,n){return Oe.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class JR extends LL{constructor(e){super(),this.currentSequenceNumber=e}}class Nv{constructor(e){this.persistence=e,this.Jr=new _v,this.Yr=null}static Zr(e){return new Nv(e)}get Xr(){if(this.Yr)return this.Yr;throw Ct()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),Oe.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),Oe.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),Oe.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Oe.forEach(this.Xr,r=>{const s=wt.fromPath(r);return this.ei(e,s).next(i=>{i||n.removeEntry(s,Rt.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return Oe.or([()=>Oe.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sv{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=Qt(),s=Qt();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Sv(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZR{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eD{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return qC()?8:RL(ws())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Yi(e,n).next(a=>{i.result=a}).next(()=>{if(!i.result)return this.Zi(e,n,s,r).next(a=>{i.result=a})}).next(()=>{if(i.result)return;const a=new ZR;return this.Xi(e,n,a).next(o=>{if(i.result=o,this.zi)return this.es(e,n,a,o.size)})}).next(()=>i.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(Od()<=Zt.DEBUG&&ht("QueryEngine","SDK will not create cache indexes for query:",Zc(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Oe.resolve()):(Od()<=Zt.DEBUG&&ht("QueryEngine","Query:",Zc(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(Od()<=Zt.DEBUG&&ht("QueryEngine","The SDK decides to create cache indexes for query:",Zc(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ia(n))):Oe.resolve())}Yi(e,n){if(lb(n))return Oe.resolve(null);let r=Ia(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=E2(n,null,"F"),r=Ia(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const a=Qt(...i);return this.Ji.getDocuments(e,a).next(o=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.ts(n,o);return this.ns(n,c,a,l.readTime)?this.Yi(e,E2(n,null,"F")):this.rs(e,c,n,l)}))})))}Zi(e,n,r,s){return lb(n)||s.isEqual(Rt.min())?Oe.resolve(null):this.Ji.getDocuments(e,r).next(i=>{const a=this.ts(n,i);return this.ns(n,a,r,s)?Oe.resolve(null):(Od()<=Zt.DEBUG&&ht("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Zc(n)),this.rs(e,a,n,IL(s,-1)).next(o=>o))})}ts(e,n){let r=new ts(aS(e));return n.forEach((s,i)=>{pg(e,i)&&(r=r.add(i))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,n,r){return Od()<=Zt.DEBUG&&ht("QueryEngine","Using full collection scan to execute query:",Zc(n)),this.Ji.getDocumentsMatchingQuery(e,n,bl.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(a=>{i=i.insert(a.key,a)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tD{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new er(cn),this._s=new rd(i=>gv(i),yv),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new qR(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function nD(t,e,n,r){return new tD(t,e,n,r)}async function TS(t,e){const n=Dt(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const a=[],o=[];let l=Qt();for(const c of s){a.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}for(const c of i){o.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}return n.localDocuments.getDocuments(r,l).next(c=>({hs:c,removedBatchIds:a,addedBatchIds:o}))})})}function rD(t,e){const n=Dt(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(o,l,c,d){const g=c.batch,y=g.keys();let p=Oe.resolve();return y.forEach(N=>{p=p.next(()=>d.getEntry(l,N)).next(S=>{const I=c.docVersions.get(N);bn(I!==null),S.version.compareTo(I)<0&&(g.applyToRemoteDocument(S,c),S.isValidDocument()&&(S.setReadTime(c.commitVersion),d.addEntry(S)))})}),p.next(()=>o.mutationQueue.removeMutationBatch(l,g))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(o){let l=Qt();for(let c=0;c<o.mutationResults.length;++c)o.mutationResults[c].transformResults.length>0&&(l=l.add(o.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function IS(t){const e=Dt(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function sD(t,e){const n=Dt(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const a=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const o=[];e.targetChanges.forEach((d,g)=>{const y=s.get(g);if(!y)return;o.push(n.Ur.removeMatchingKeys(i,d.removedDocuments,g).next(()=>n.Ur.addMatchingKeys(i,d.addedDocuments,g)));let p=y.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(g)!==null?p=p.withResumeToken(rs.EMPTY_BYTE_STRING,Rt.min()).withLastLimboFreeSnapshotVersion(Rt.min()):d.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(d.resumeToken,r)),s=s.insert(g,p),function(S,I,w){return S.resumeToken.approximateByteSize()===0||I.snapshotVersion.toMicroseconds()-S.snapshotVersion.toMicroseconds()>=3e8?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(y,p,d)&&o.push(n.Ur.updateTargetData(i,p))});let l=yo(),c=Qt();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(i,d))}),o.push(iD(i,a,e.documentUpdates).next(d=>{l=d.Ps,c=d.Is})),!r.isEqual(Rt.min())){const d=n.Ur.getLastRemoteSnapshotVersion(i).next(g=>n.Ur.setTargetsMetadata(i,i.currentSequenceNumber,r));o.push(d)}return Oe.waitFor(o).next(()=>a.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,l,c)).next(()=>l)}).then(i=>(n.os=s,i))}function iD(t,e,n){let r=Qt(),s=Qt();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let a=yo();return n.forEach((o,l)=>{const c=i.get(o);l.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(o)),l.isNoDocument()&&l.version.isEqual(Rt.min())?(e.removeEntry(o,l.readTime),a=a.insert(o,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),a=a.insert(o,l)):ht("LocalStore","Ignoring outdated watch update for ",o,". Current version:",c.version," Watch version:",l.version)}),{Ps:a,Is:s}})}function aD(t,e){const n=Dt(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function oD(t,e){const n=Dt(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(i=>i?(s=i,Oe.resolve(s)):n.Ur.allocateTargetId(r).next(a=>(s=new il(e,a,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function P2(t,e,n){const r=Dt(t),s=r.os.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,a=>r.persistence.referenceDelegate.removeTarget(a,s))}catch(a){if(!cf(a))throw a;ht("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function xb(t,e,n){const r=Dt(t);let s=Rt.min(),i=Qt();return r.persistence.runTransaction("Execute query","readwrite",a=>function(l,c,d){const g=Dt(l),y=g._s.get(d);return y!==void 0?Oe.resolve(g.os.get(y)):g.Ur.getTargetData(c,d)}(r,a,Ia(e)).next(o=>{if(o)return s=o.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(a,o.targetId).next(l=>{i=l})}).next(()=>r.ss.getDocumentsMatchingQuery(a,e,n?s:Rt.min(),n?i:Qt())).next(o=>(lD(r,JL(e),o),{documents:o,Ts:i})))}function lD(t,e,n){let r=t.us.get(e)||Rt.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.us.set(e,r)}class wb{constructor(){this.activeTargetIds=sR()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class cD{constructor(){this.so=new wb,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new wb,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uD{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bb{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){ht("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){ht("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ap=null;function L0(){return ap===null?ap=function(){return 268435456+Math.round(2147483648*Math.random())}():ap++,"0x"+ap.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dD={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hD{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cs="WebChannelConnection";class fD extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(n,r,s,i,a){const o=L0(),l=this.xo(n,r.toUriEncodedString());ht("RestConnection",`Sending RPC '${n}' ${o}:`,l,s);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,i,a),this.No(n,l,c,s).then(d=>(ht("RestConnection",`Received RPC '${n}' ${o}: `,d),d),d=>{throw Bu("RestConnection",`RPC '${n}' ${o} failed with error: `,d,"url: ",l,"request:",s),d})}Lo(n,r,s,i,a,o){return this.Mo(n,r,s,i,a)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+td}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,a)=>n[a]=i),s&&s.headers.forEach((i,a)=>n[a]=i)}xo(n,r){const s=dD[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const i=L0();return new Promise((a,o)=>{const l=new zN;l.setWithCredentials(!0),l.listenOnce(qN.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Rp.NO_ERROR:const d=l.getResponseJson();ht(cs,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(d)),a(d);break;case Rp.TIMEOUT:ht(cs,`RPC '${e}' ${i} timed out`),o(new Je(je.DEADLINE_EXCEEDED,"Request time out"));break;case Rp.HTTP_ERROR:const g=l.getStatus();if(ht(cs,`RPC '${e}' ${i} failed with status:`,g,"response text:",l.getResponseText()),g>0){let y=l.getResponseJson();Array.isArray(y)&&(y=y[0]);const p=y==null?void 0:y.error;if(p&&p.status&&p.message){const N=function(I){const w=I.toLowerCase().replace(/_/g,"-");return Object.values(je).indexOf(w)>=0?w:je.UNKNOWN}(p.status);o(new Je(N,p.message))}else o(new Je(je.UNKNOWN,"Server responded with status "+l.getStatus()))}else o(new Je(je.UNAVAILABLE,"Connection failed."));break;default:Ct()}}finally{ht(cs,`RPC '${e}' ${i} completed.`)}});const c=JSON.stringify(s);ht(cs,`RPC '${e}' ${i} sending request:`,s),l.send(n,"POST",c,r,15)})}Bo(e,n,r){const s=L0(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=WN(),o=$N(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const d=i.join("");ht(cs,`Creating RPC '${e}' stream ${s}: ${d}`,l);const g=a.createWebChannel(d,l);let y=!1,p=!1;const N=new hD({Io:I=>{p?ht(cs,`Not sending because RPC '${e}' stream ${s} is closed:`,I):(y||(ht(cs,`Opening RPC '${e}' stream ${s} transport.`),g.open(),y=!0),ht(cs,`RPC '${e}' stream ${s} sending:`,I),g.send(I))},To:()=>g.close()}),S=(I,w,T)=>{I.listen(w,j=>{try{T(j)}catch(D){setTimeout(()=>{throw D},0)}})};return S(g,Wd.EventType.OPEN,()=>{p||(ht(cs,`RPC '${e}' stream ${s} transport opened.`),N.yo())}),S(g,Wd.EventType.CLOSE,()=>{p||(p=!0,ht(cs,`RPC '${e}' stream ${s} transport closed`),N.So())}),S(g,Wd.EventType.ERROR,I=>{p||(p=!0,Bu(cs,`RPC '${e}' stream ${s} transport errored:`,I),N.So(new Je(je.UNAVAILABLE,"The operation could not be completed")))}),S(g,Wd.EventType.MESSAGE,I=>{var w;if(!p){const T=I.data[0];bn(!!T);const j=T,D=j.error||((w=j[0])===null||w===void 0?void 0:w.error);if(D){ht(cs,`RPC '${e}' stream ${s} received error:`,D);const H=D.status;let J=function(A){const R=xr[A];if(R!==void 0)return vS(R)}(H),O=D.message;J===void 0&&(J=je.INTERNAL,O="Unknown error status: "+H+" with message "+D.message),p=!0,N.So(new Je(J,O)),g.close()}else ht(cs,`RPC '${e}' stream ${s} received:`,T),N.bo(T)}}),S(o,HN.STAT_EVENT,I=>{I.stat===w2.PROXY?ht(cs,`RPC '${e}' stream ${s} detected buffering proxy`):I.stat===w2.NOPROXY&&ht(cs,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{N.wo()},0),N}}function R0(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xg(t){return new NR(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CS{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&ht("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PS{constructor(e,n,r,s,i,a,o,l){this.ui=e,this.Ho=r,this.Jo=s,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=o,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new CS(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===je.RESOURCE_EXHAUSTED?(go(n.toString()),go("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===je.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new Je(je.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return ht("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(ht("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class pD extends PS{constructor(e,n,r,s,i,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=ER(this.serializer,e),r=function(i){if(!("targetChange"in i))return Rt.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?Rt.min():a.readTime?Ca(a.readTime):Rt.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=C2(this.serializer),n.addTarget=function(i,a){let o;const l=a.target;if(o=S2(l)?{documents:IR(i,l)}:{query:CR(i,l)._t},o.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){o.resumeToken=bS(i,a.resumeToken);const c=k2(i,a.expectedCount);c!==null&&(o.expectedCount=c)}else if(a.snapshotVersion.compareTo(Rt.min())>0){o.readTime=Em(i,a.snapshotVersion.toTimestamp());const c=k2(i,a.expectedCount);c!==null&&(o.expectedCount=c)}return o}(this.serializer,e);const r=jR(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=C2(this.serializer),n.removeTarget=e,this.a_(n)}}class mD extends PS{constructor(e,n,r,s,i,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return bn(!!e.streamToken),this.lastStreamToken=e.streamToken,bn(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){bn(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=TR(e.writeResults,e.commitTime),r=Ca(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=C2(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>kR(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gD extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new Je(je.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.Mo(e,T2(n,r),s,i,a)).catch(i=>{throw i.name==="FirebaseError"?(i.code===je.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Je(je.UNKNOWN,i.toString())})}Lo(e,n,r,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,o])=>this.connection.Lo(e,T2(n,r),s,a,o,i)).catch(a=>{throw a.name==="FirebaseError"?(a.code===je.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Je(je.UNKNOWN,a.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class yD{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(go(n),this.D_=!1):ht("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vD{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(a=>{r.enqueueAndForget(async()=>{Rc(this)&&(ht("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=Dt(l);c.L_.add(4),await hf(c),c.q_.set("Unknown"),c.L_.delete(4),await wg(c)}(this))})}),this.q_=new yD(r,s)}}async function wg(t){if(Rc(t))for(const e of t.B_)await e(!0)}async function hf(t){for(const e of t.B_)await e(!1)}function jS(t,e){const n=Dt(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Tv(n)?kv(n):sd(n).r_()&&Ev(n,e))}function Av(t,e){const n=Dt(t),r=sd(n);n.N_.delete(e),r.r_()&&LS(n,e),n.N_.size===0&&(r.r_()?r.o_():Rc(n)&&n.q_.set("Unknown"))}function Ev(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Rt.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}sd(t).A_(e)}function LS(t,e){t.Q_.xe(e),sd(t).R_(e)}function kv(t){t.Q_=new xR({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),sd(t).start(),t.q_.v_()}function Tv(t){return Rc(t)&&!sd(t).n_()&&t.N_.size>0}function Rc(t){return Dt(t).L_.size===0}function RS(t){t.Q_=void 0}async function xD(t){t.q_.set("Online")}async function wD(t){t.N_.forEach((e,n)=>{Ev(t,e)})}async function bD(t,e){RS(t),Tv(t)?(t.q_.M_(e),kv(t)):t.q_.set("Unknown")}async function _D(t,e,n){if(t.q_.set("Online"),e instanceof wS&&e.state===2&&e.cause)try{await async function(s,i){const a=i.cause;for(const o of i.targetIds)s.N_.has(o)&&(await s.remoteSyncer.rejectListen(o,a),s.N_.delete(o),s.Q_.removeTarget(o))}(t,e)}catch(r){ht("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await km(t,r)}else if(e instanceof Mp?t.Q_.Ke(e):e instanceof xS?t.Q_.He(e):t.Q_.We(e),!n.isEqual(Rt.min()))try{const r=await IS(t.localStore);n.compareTo(r)>=0&&await function(i,a){const o=i.Q_.rt(a);return o.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const d=i.N_.get(c);d&&i.N_.set(c,d.withResumeToken(l.resumeToken,a))}}),o.targetMismatches.forEach((l,c)=>{const d=i.N_.get(l);if(!d)return;i.N_.set(l,d.withResumeToken(rs.EMPTY_BYTE_STRING,d.snapshotVersion)),LS(i,l);const g=new il(d.target,l,c,d.sequenceNumber);Ev(i,g)}),i.remoteSyncer.applyRemoteEvent(o)}(t,n)}catch(r){ht("RemoteStore","Failed to raise snapshot:",r),await km(t,r)}}async function km(t,e,n){if(!cf(e))throw e;t.L_.add(1),await hf(t),t.q_.set("Offline"),n||(n=()=>IS(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ht("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await wg(t)})}function DS(t,e){return e().catch(n=>km(t,n,e))}async function bg(t){const e=Dt(t),n=Nl(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;ND(e);)try{const s=await aD(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,SD(e,s)}catch(s){await km(e,s)}OS(e)&&MS(e)}function ND(t){return Rc(t)&&t.O_.length<10}function SD(t,e){t.O_.push(e);const n=Nl(t);n.r_()&&n.V_&&n.m_(e.mutations)}function OS(t){return Rc(t)&&!Nl(t).n_()&&t.O_.length>0}function MS(t){Nl(t).start()}async function AD(t){Nl(t).p_()}async function ED(t){const e=Nl(t);for(const n of t.O_)e.m_(n.mutations)}async function kD(t,e,n){const r=t.O_.shift(),s=xv.from(r,e,n);await DS(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await bg(t)}async function TD(t,e){e&&Nl(t).V_&&await async function(r,s){if(function(a){return gR(a)&&a!==je.ABORTED}(s.code)){const i=r.O_.shift();Nl(r).s_(),await DS(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await bg(r)}}(t,e),OS(t)&&MS(t)}async function _b(t,e){const n=Dt(t);n.asyncQueue.verifyOperationInProgress(),ht("RemoteStore","RemoteStore received new credentials");const r=Rc(n);n.L_.add(3),await hf(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await wg(n)}async function ID(t,e){const n=Dt(t);e?(n.L_.delete(2),await wg(n)):e||(n.L_.add(2),await hf(n),n.q_.set("Unknown"))}function sd(t){return t.K_||(t.K_=function(n,r,s){const i=Dt(n);return i.w_(),new pD(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:xD.bind(null,t),Ro:wD.bind(null,t),mo:bD.bind(null,t),d_:_D.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Tv(t)?kv(t):t.q_.set("Unknown")):(await t.K_.stop(),RS(t))})),t.K_}function Nl(t){return t.U_||(t.U_=function(n,r,s){const i=Dt(n);return i.w_(),new mD(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:AD.bind(null,t),mo:TD.bind(null,t),f_:ED.bind(null,t),g_:kD.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await bg(t)):(await t.U_.stop(),t.O_.length>0&&(ht("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iv{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new oo,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const a=Date.now()+r,o=new Iv(e,n,a,s,i);return o.start(r),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Je(je.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Cv(t,e){if(go("AsyncQueue",`${e}: ${t}`),cf(t))return new Je(je.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ku{constructor(e){this.comparator=e?(n,r)=>e(n,r)||wt.comparator(n.key,r.key):(n,r)=>wt.comparator(n.key,r.key),this.keyedMap=Gd(),this.sortedSet=new er(this.comparator)}static emptySet(e){return new ku(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ku)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new ku;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nb{constructor(){this.W_=new er(wt.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):Ct():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Gu{constructor(e,n,r,s,i,a,o,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=o,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,s,i){const a=[];return n.forEach(o=>{a.push({type:0,doc:o})}),new Gu(e,n,ku.emptySet(n),a,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&fg(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CD{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class PD{constructor(){this.queries=Sb(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=Dt(n),i=s.queries;s.queries=Sb(),i.forEach((a,o)=>{for(const l of o.j_)l.onError(r)})})(this,new Je(je.ABORTED,"Firestore shutting down"))}}function Sb(){return new rd(t=>iS(t),fg)}async function Pv(t,e){const n=Dt(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.H_()&&e.J_()&&(r=2):(i=new CD,r=e.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(a){const o=Cv(a,`Initialization of query '${Zc(e.query)}' failed`);return void e.onError(o)}n.queries.set(s,i),i.j_.push(e),e.Z_(n.onlineState),i.z_&&e.X_(i.z_)&&Lv(n)}async function jv(t,e){const n=Dt(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const a=i.j_.indexOf(e);a>=0&&(i.j_.splice(a,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function jD(t,e){const n=Dt(t);let r=!1;for(const s of e){const i=s.query,a=n.queries.get(i);if(a){for(const o of a.j_)o.X_(s)&&(r=!0);a.z_=s}}r&&Lv(n)}function LD(t,e,n){const r=Dt(t),s=r.queries.get(e);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(e)}function Lv(t){t.Y_.forEach(e=>{e.next()})}var j2,Ab;(Ab=j2||(j2={})).ea="default",Ab.Cache="cache";class Rv{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Gu(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Gu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==j2.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FS{constructor(e){this.key=e}}class US{constructor(e){this.key=e}}class RD{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Qt(),this.mutatedKeys=Qt(),this.Aa=aS(e),this.Ra=new ku(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new Nb,s=n?n.Ra:this.Ra;let i=n?n.mutatedKeys:this.mutatedKeys,a=s,o=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((d,g)=>{const y=s.get(d),p=pg(this.query,g)?g:null,N=!!y&&this.mutatedKeys.has(y.key),S=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let I=!1;y&&p?y.data.isEqual(p.data)?N!==S&&(r.track({type:3,doc:p}),I=!0):this.ga(y,p)||(r.track({type:2,doc:p}),I=!0,(l&&this.Aa(p,l)>0||c&&this.Aa(p,c)<0)&&(o=!0)):!y&&p?(r.track({type:0,doc:p}),I=!0):y&&!p&&(r.track({type:1,doc:y}),I=!0,(l||c)&&(o=!0)),I&&(p?(a=a.add(p),i=S?i.add(d):i.delete(d)):(a=a.delete(d),i=i.delete(d)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const d=this.query.limitType==="F"?a.last():a.first();a=a.delete(d.key),i=i.delete(d.key),r.track({type:1,doc:d})}return{Ra:a,fa:r,ns:o,mutatedKeys:i}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const a=e.fa.G_();a.sort((d,g)=>function(p,N){const S=I=>{switch(I){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ct()}};return S(p)-S(N)}(d.type,g.type)||this.Aa(d.doc,g.doc)),this.pa(r),s=s!=null&&s;const o=n&&!s?this.ya():[],l=this.da.size===0&&this.current&&!s?1:0,c=l!==this.Ea;return this.Ea=l,a.length!==0||c?{snapshot:new Gu(this.query,e.Ra,i,a,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:o}:{wa:o}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Nb,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Qt(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new US(r))}),this.da.forEach(r=>{e.has(r)||n.push(new FS(r))}),n}ba(e){this.Ta=e.Ts,this.da=Qt();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Gu.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class DD{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class OD{constructor(e){this.key=e,this.va=!1}}class MD{constructor(e,n,r,s,i,a){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.Ca={},this.Fa=new rd(o=>iS(o),fg),this.Ma=new Map,this.xa=new Set,this.Oa=new er(wt.comparator),this.Na=new Map,this.La=new _v,this.Ba={},this.ka=new Map,this.qa=Wu.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function FD(t,e,n=!0){const r=$S(t);let s;const i=r.Fa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await VS(r,e,n,!0),s}async function UD(t,e){const n=$S(t);await VS(n,e,!0,!1)}async function VS(t,e,n,r){const s=await oD(t.localStore,Ia(e)),i=s.targetId,a=t.sharedClientState.addLocalQueryTarget(i,n);let o;return r&&(o=await VD(t,e,i,a==="current",s.resumeToken)),t.isPrimaryClient&&n&&jS(t.remoteStore,s),o}async function VD(t,e,n,r,s){t.Ka=(g,y,p)=>async function(S,I,w,T){let j=I.view.ma(w);j.ns&&(j=await xb(S.localStore,I.query,!1).then(({documents:O})=>I.view.ma(O,j)));const D=T&&T.targetChanges.get(I.targetId),H=T&&T.targetMismatches.get(I.targetId)!=null,J=I.view.applyChanges(j,S.isPrimaryClient,D,H);return kb(S,I.targetId,J.wa),J.snapshot}(t,g,y,p);const i=await xb(t.localStore,e,!0),a=new RD(e,i.Ts),o=a.ma(i.documents),l=df.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),c=a.applyChanges(o,t.isPrimaryClient,l);kb(t,n,c.wa);const d=new DD(e,n,a);return t.Fa.set(e,d),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),c.snapshot}async function BD(t,e,n){const r=Dt(t),s=r.Fa.get(e),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(a=>!fg(a,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await P2(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Av(r.remoteStore,s.targetId),L2(r,s.targetId)}).catch(lf)):(L2(r,s.targetId),await P2(r.localStore,s.targetId,!0))}async function zD(t,e){const n=Dt(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Av(n.remoteStore,r.targetId))}async function qD(t,e,n){const r=QD(t);try{const s=await function(a,o){const l=Dt(a),c=_r.now(),d=o.reduce((p,N)=>p.add(N.key),Qt());let g,y;return l.persistence.runTransaction("Locally write mutations","readwrite",p=>{let N=yo(),S=Qt();return l.cs.getEntries(p,d).next(I=>{N=I,N.forEach((w,T)=>{T.isValidDocument()||(S=S.add(w))})}).next(()=>l.localDocuments.getOverlayedDocuments(p,N)).next(I=>{g=I;const w=[];for(const T of o){const j=dR(T,g.get(T.key).overlayedDocument);j!=null&&w.push(new Pl(T.key,j,XN(j.value.mapValue),Ps.exists(!0)))}return l.mutationQueue.addMutationBatch(p,c,w,o)}).next(I=>{y=I;const w=I.applyToLocalDocumentSet(g,S);return l.documentOverlayCache.saveOverlays(p,I.batchId,w)})}).then(()=>({batchId:y.batchId,changes:lS(g)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(a,o,l){let c=a.Ba[a.currentUser.toKey()];c||(c=new er(cn)),c=c.insert(o,l),a.Ba[a.currentUser.toKey()]=c}(r,s.batchId,n),await ff(r,s.changes),await bg(r.remoteStore)}catch(s){const i=Cv(s,"Failed to persist write");n.reject(i)}}async function BS(t,e){const n=Dt(t);try{const r=await sD(n.localStore,e);e.targetChanges.forEach((s,i)=>{const a=n.Na.get(i);a&&(bn(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?a.va=!0:s.modifiedDocuments.size>0?bn(a.va):s.removedDocuments.size>0&&(bn(a.va),a.va=!1))}),await ff(n,r,e)}catch(r){await lf(r)}}function Eb(t,e,n){const r=Dt(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((i,a)=>{const o=a.view.Z_(e);o.snapshot&&s.push(o.snapshot)}),function(a,o){const l=Dt(a);l.onlineState=o;let c=!1;l.queries.forEach((d,g)=>{for(const y of g.j_)y.Z_(o)&&(c=!0)}),c&&Lv(l)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function HD(t,e,n){const r=Dt(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),i=s&&s.key;if(i){let a=new er(wt.comparator);a=a.insert(i,gs.newNoDocument(i,Rt.min()));const o=Qt().add(i),l=new vg(Rt.min(),new Map,new er(cn),a,o);await BS(r,l),r.Oa=r.Oa.remove(i),r.Na.delete(e),Dv(r)}else await P2(r.localStore,e,!1).then(()=>L2(r,e,n)).catch(lf)}async function $D(t,e){const n=Dt(t),r=e.batch.batchId;try{const s=await rD(n.localStore,e);qS(n,r,null),zS(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await ff(n,s)}catch(s){await lf(s)}}async function WD(t,e,n){const r=Dt(t);try{const s=await function(a,o){const l=Dt(a);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let d;return l.mutationQueue.lookupMutationBatch(c,o).next(g=>(bn(g!==null),d=g.keys(),l.mutationQueue.removeMutationBatch(c,g))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,d,o)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,d)).next(()=>l.localDocuments.getDocuments(c,d))})}(r.localStore,e);qS(r,e,n),zS(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await ff(r,s)}catch(s){await lf(s)}}function zS(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function qS(t,e,n){const r=Dt(t);let s=r.Ba[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function L2(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||HS(t,r)})}function HS(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(Av(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Dv(t))}function kb(t,e,n){for(const r of n)r instanceof FS?(t.La.addReference(r.key,e),GD(t,r)):r instanceof US?(ht("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||HS(t,r.key)):Ct()}function GD(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(ht("SyncEngine","New document in limbo: "+n),t.xa.add(r),Dv(t))}function Dv(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new wt(Mn.fromString(e)),r=t.qa.next();t.Na.set(r,new OD(n)),t.Oa=t.Oa.insert(n,r),jS(t.remoteStore,new il(Ia(hg(n.path)),r,"TargetPurposeLimboResolution",hv.oe))}}async function ff(t,e,n){const r=Dt(t),s=[],i=[],a=[];r.Fa.isEmpty()||(r.Fa.forEach((o,l)=>{a.push(r.Ka(l,e,n).then(c=>{var d;if((c||n)&&r.isPrimaryClient){const g=c?!c.fromCache:(d=n==null?void 0:n.targetChanges.get(l.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(l.targetId,g?"current":"not-current")}if(c){s.push(c);const g=Sv.Wi(l.targetId,c);i.push(g)}}))}),await Promise.all(a),r.Ca.d_(s),await async function(l,c){const d=Dt(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>Oe.forEach(c,y=>Oe.forEach(y.$i,p=>d.persistence.referenceDelegate.addReference(g,y.targetId,p)).next(()=>Oe.forEach(y.Ui,p=>d.persistence.referenceDelegate.removeReference(g,y.targetId,p)))))}catch(g){if(!cf(g))throw g;ht("LocalStore","Failed to update sequence numbers: "+g)}for(const g of c){const y=g.targetId;if(!g.fromCache){const p=d.os.get(y),N=p.snapshotVersion,S=p.withLastLimboFreeSnapshotVersion(N);d.os=d.os.insert(y,S)}}}(r.localStore,i))}async function KD(t,e){const n=Dt(t);if(!n.currentUser.isEqual(e)){ht("SyncEngine","User change. New user:",e.toKey());const r=await TS(n.localStore,e);n.currentUser=e,function(i,a){i.ka.forEach(o=>{o.forEach(l=>{l.reject(new Je(je.CANCELLED,a))})}),i.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ff(n,r.hs)}}function YD(t,e){const n=Dt(t),r=n.Na.get(e);if(r&&r.va)return Qt().add(r.key);{let s=Qt();const i=n.Ma.get(e);if(!i)return s;for(const a of i){const o=n.Fa.get(a);s=s.unionWith(o.view.Va)}return s}}function $S(t){const e=Dt(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=BS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=YD.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=HD.bind(null,e),e.Ca.d_=jD.bind(null,e.eventManager),e.Ca.$a=LD.bind(null,e.eventManager),e}function QD(t){const e=Dt(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=$D.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=WD.bind(null,e),e}class Tm{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=xg(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return nD(this.persistence,new eD,e.initialUser,this.serializer)}Ga(e){return new XR(Nv.Zr,this.serializer)}Wa(e){return new cD}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Tm.provider={build:()=>new Tm};class R2{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Eb(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=KD.bind(null,this.syncEngine),await ID(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new PD}()}createDatastore(e){const n=xg(e.databaseInfo.databaseId),r=function(i){return new fD(i)}(e.databaseInfo);return function(i,a,o,l){return new gD(i,a,o,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,a,o){return new vD(r,s,i,a,o)}(this.localStore,this.datastore,e.asyncQueue,n=>Eb(this.syncEngine,n,0),function(){return bb.D()?new bb:new uD}())}createSyncEngine(e,n){return function(s,i,a,o,l,c,d){const g=new MD(s,i,a,o,l,c);return d&&(g.Qa=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=Dt(s);ht("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await hf(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}R2.provider={build:()=>new R2};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ov{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):go("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XD{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=ps.UNAUTHENTICATED,this.clientId=KN.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async a=>{ht("FirestoreClient","Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>(ht("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new oo;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Cv(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function D0(t,e){t.asyncQueue.verifyOperationInProgress(),ht("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await TS(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Tb(t,e){t.asyncQueue.verifyOperationInProgress();const n=await JD(t);ht("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>_b(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>_b(e.remoteStore,s)),t._onlineComponents=e}async function JD(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ht("FirestoreClient","Using user provided OfflineComponentProvider");try{await D0(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===je.FAILED_PRECONDITION||s.code===je.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Bu("Error using user provided cache. Falling back to memory cache: "+n),await D0(t,new Tm)}}else ht("FirestoreClient","Using default OfflineComponentProvider"),await D0(t,new Tm);return t._offlineComponents}async function WS(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ht("FirestoreClient","Using user provided OnlineComponentProvider"),await Tb(t,t._uninitializedComponentsProvider._online)):(ht("FirestoreClient","Using default OnlineComponentProvider"),await Tb(t,new R2))),t._onlineComponents}function ZD(t){return WS(t).then(e=>e.syncEngine)}async function Im(t){const e=await WS(t),n=e.eventManager;return n.onListen=FD.bind(null,e.syncEngine),n.onUnlisten=BD.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=UD.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=zD.bind(null,e.syncEngine),n}function e9(t,e,n={}){const r=new oo;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,o,l,c){const d=new Ov({next:y=>{d.Za(),a.enqueueAndForget(()=>jv(i,g));const p=y.docs.has(o);!p&&y.fromCache?c.reject(new Je(je.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&y.fromCache&&l&&l.source==="server"?c.reject(new Je(je.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(y)},error:y=>c.reject(y)}),g=new Rv(hg(o.path),d,{includeMetadataChanges:!0,_a:!0});return Pv(i,g)}(await Im(t),t.asyncQueue,e,n,r)),r.promise}function t9(t,e,n={}){const r=new oo;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,o,l,c){const d=new Ov({next:y=>{d.Za(),a.enqueueAndForget(()=>jv(i,g)),y.fromCache&&l.source==="server"?c.reject(new Je(je.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(y)},error:y=>c.reject(y)}),g=new Rv(o,d,{includeMetadataChanges:!0,_a:!0});return Pv(i,g)}(await Im(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GS(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ib=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KS(t,e,n){if(!n)throw new Je(je.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function n9(t,e,n,r){if(e===!0&&r===!0)throw new Je(je.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Cb(t){if(!wt.isDocumentKey(t))throw new Je(je.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Pb(t){if(wt.isDocumentKey(t))throw new Je(je.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function _g(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Ct()}function js(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Je(je.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=_g(t);throw new Je(je.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jb{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Je(je.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Je(je.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}n9("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=GS((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new Je(je.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Je(je.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Je(je.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ng{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new jb({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Je(je.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Je(je.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new jb(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new wL;switch(r.type){case"firstParty":return new SL(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Je(je.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Ib.get(n);r&&(ht("ComponentProvider","Removing Datastore"),Ib.delete(n),r.terminate())}(this),Promise.resolve()}}function r9(t,e,n,r={}){var s;const i=(t=js(t,Ng))._getSettings(),a=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==a&&Bu("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:a,ssl:!1})),r.mockUserToken){let o,l;if(typeof r.mockUserToken=="string")o=r.mockUserToken,l=ps.MOCK_USER;else{o=J6(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new Je(je.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new ps(c)}t._authCredentials=new bL(new GN(o,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jl{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new jl(this.firestore,e,this._query)}}class ys{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new vl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ys(this.firestore,e,this._key)}}class vl extends jl{constructor(e,n,r){super(e,n,hg(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ys(this.firestore,null,new wt(e))}withConverter(e){return new vl(this.firestore,e,this._path)}}function At(t,e,...n){if(t=_n(t),KS("collection","path",e),t instanceof Ng){const r=Mn.fromString(e,...n);return Pb(r),new vl(t,null,r)}{if(!(t instanceof ys||t instanceof vl))throw new Je(je.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Mn.fromString(e,...n));return Pb(r),new vl(t.firestore,null,r)}}function $t(t,e,...n){if(t=_n(t),arguments.length===1&&(e=KN.newId()),KS("doc","path",e),t instanceof Ng){const r=Mn.fromString(e,...n);return Cb(r),new ys(t,null,new wt(r))}{if(!(t instanceof ys||t instanceof vl))throw new Je(je.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Mn.fromString(e,...n));return Cb(r),new ys(t.firestore,t instanceof vl?t.converter:null,new wt(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lb{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new CS(this,"async_queue_retry"),this.Vu=()=>{const r=R0();r&&ht("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=R0();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=R0();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new oo;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!cf(e))throw e;ht("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(a){let o=a.message||"";return a.stack&&(o=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),o}(r);throw go("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=Iv.createAndSchedule(this,e,n,r,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&Ct()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function Rb(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class ja extends Ng{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new Lb,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Lb(e),this._firestoreClient=void 0,await e}}}function s9(t,e){const n=typeof t=="object"?t:og(),r=typeof t=="string"?t:"(default)",s=Ic(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=Y6("firestore");i&&r9(s,...i)}return s}function pf(t){if(t._terminated)throw new Je(je.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||i9(t),t._firestoreClient}function i9(t){var e,n,r;const s=t._freezeSettings(),i=function(o,l,c,d){return new ML(o,l,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,GS(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new XD(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(o){const l=o==null?void 0:o._online.build();return{_offline:o==null?void 0:o._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ku{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ku(rs.fromBase64String(e))}catch(n){throw new Je(je.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ku(rs.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mf{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Je(je.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Zr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gf{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mv{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Je(je.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Je(je.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return cn(this._lat,e._lat)||cn(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fv{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a9=/^__.*__$/;class o9{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Pl(e,this.data,this.fieldMask,n,this.fieldTransforms):new uf(e,this.data,n,this.fieldTransforms)}}class YS{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Pl(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function QS(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ct()}}class Sg{constructor(e,n,r,s,i,a){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Sg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Cm(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(QS(this.Cu)&&a9.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class l9{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||xg(e)}Qu(e,n,r,s=!1){return new Sg({Cu:e,methodName:n,qu:r,path:Zr.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function yf(t){const e=t._freezeSettings(),n=xg(t._databaseId);return new l9(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Uv(t,e,n,r,s,i={}){const a=t.Qu(i.merge||i.mergeFields?2:0,e,n,s);zv("Data must be an object, but it was:",a,r);const o=ZS(r,a);let l,c;if(i.merge)l=new ci(a.fieldMask),c=a.fieldTransforms;else if(i.mergeFields){const d=[];for(const g of i.mergeFields){const y=D2(e,g,n);if(!a.contains(y))throw new Je(je.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);tA(d,y)||d.push(y)}l=new ci(d),c=a.fieldTransforms.filter(g=>l.covers(g.field))}else l=null,c=a.fieldTransforms;return new o9(new Bs(o),l,c)}class Ag extends gf{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ag}}function c9(t,e,n){return new Sg({Cu:3,qu:e.settings.qu,methodName:t._methodName,xu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Vv extends gf{_toFieldTransform(e){return new mS(e.path,new Bh)}isEqual(e){return e instanceof Vv}}class Bv extends gf{constructor(e,n){super(e),this.Ku=n}_toFieldTransform(e){const n=c9(this,e,!0),r=this.Ku.map(i=>id(i,n)),s=new $u(r);return new mS(e.path,s)}isEqual(e){return e instanceof Bv&&Lh(this.Ku,e.Ku)}}function XS(t,e,n,r){const s=t.Qu(1,e,n);zv("Data must be an object, but it was:",s,r);const i=[],a=Bs.empty();Lc(r,(l,c)=>{const d=qv(e,l,n);c=_n(c);const g=s.Nu(d);if(c instanceof Ag)i.push(d);else{const y=id(c,g);y!=null&&(i.push(d),a.set(d,y))}});const o=new ci(i);return new YS(a,o,s.fieldTransforms)}function JS(t,e,n,r,s,i){const a=t.Qu(1,e,n),o=[D2(e,r,n)],l=[s];if(i.length%2!=0)throw new Je(je.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let y=0;y<i.length;y+=2)o.push(D2(e,i[y])),l.push(i[y+1]);const c=[],d=Bs.empty();for(let y=o.length-1;y>=0;--y)if(!tA(c,o[y])){const p=o[y];let N=l[y];N=_n(N);const S=a.Nu(p);if(N instanceof Ag)c.push(p);else{const I=id(N,S);I!=null&&(c.push(p),d.set(p,I))}}const g=new ci(c);return new YS(d,g,a.fieldTransforms)}function u9(t,e,n,r=!1){return id(n,t.Qu(r?4:3,e))}function id(t,e){if(eA(t=_n(t)))return zv("Unsupported field value:",e,t),ZS(t,e);if(t instanceof gf)return function(r,s){if(!QS(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const i=[];let a=0;for(const o of r){let l=id(o,s.Lu(a));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),a++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=_n(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return iR(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=_r.fromDate(r);return{timestampValue:Em(s.serializer,i)}}if(r instanceof _r){const i=new _r(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Em(s.serializer,i)}}if(r instanceof Mv)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ku)return{bytesValue:bS(s.serializer,r._byteString)};if(r instanceof ys){const i=s.databaseId,a=r.firestore._databaseId;if(!a.isEqual(i))throw s.Bu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:bv(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Fv)return function(a,o){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:a.toArray().map(l=>{if(typeof l!="number")throw o.Bu("VectorValues must only contain numeric values.");return vv(o.serializer,l)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${_g(r)}`)}(t,e)}function ZS(t,e){const n={};return YN(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Lc(t,(r,s)=>{const i=id(s,e.Mu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function eA(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof _r||t instanceof Mv||t instanceof Ku||t instanceof ys||t instanceof gf||t instanceof Fv)}function zv(t,e,n){if(!eA(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=_g(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function D2(t,e,n){if((e=_n(e))instanceof mf)return e._internalPath;if(typeof e=="string")return qv(t,e);throw Cm("Field path arguments must be of type string or ",t,!1,void 0,n)}const d9=new RegExp("[~\\*/\\[\\]]");function qv(t,e,n){if(e.search(d9)>=0)throw Cm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new mf(...e.split("."))._internalPath}catch{throw Cm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Cm(t,e,n,r,s){const i=r&&!r.isEmpty(),a=s!==void 0;let o=`Function ${e}() called with invalid data`;n&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(i||a)&&(l+=" (found",i&&(l+=` in field ${r}`),a&&(l+=` in document ${s}`),l+=")"),new Je(je.INVALID_ARGUMENT,o+t+l)}function tA(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nA{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new ys(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new h9(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Eg("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class h9 extends nA{data(){return super.data()}}function Eg(t,e){return typeof e=="string"?qv(t,e):e instanceof mf?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rA(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Je(je.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Hv{}class sA extends Hv{}function xc(t,e,...n){let r=[];e instanceof Hv&&r.push(e),r=r.concat(n),function(i){const a=i.filter(l=>l instanceof $v).length,o=i.filter(l=>l instanceof kg).length;if(a>1||a>0&&o>0)throw new Je(je.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class kg extends sA{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new kg(e,n,r)}_apply(e){const n=this._parse(e);return iA(e._query,n),new jl(e.firestore,e.converter,A2(e._query,n))}_parse(e){const n=yf(e.firestore);return function(i,a,o,l,c,d,g){let y;if(c.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new Je(je.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){Ob(g,d);const p=[];for(const N of g)p.push(Db(l,i,N));y={arrayValue:{values:p}}}else y=Db(l,i,g)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||Ob(g,d),y=u9(o,a,g,d==="in"||d==="not-in");return br.create(c,d,y)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function qh(t,e,n){const r=e,s=Eg("where",t);return kg._create(s,r,n)}class $v extends Hv{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new $v(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:ta.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let a=s;const o=i.getFlattenedFilters();for(const l of o)iA(a,l),a=A2(a,l)}(e._query,n),new jl(e.firestore,e.converter,A2(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Wv extends sA{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Wv(e,n)}_apply(e){const n=function(s,i,a){if(s.startAt!==null)throw new Je(je.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new Je(je.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Vh(i,a)}(e._query,this._field,this._direction);return new jl(e.firestore,e.converter,function(s,i){const a=s.explicitOrderBy.concat([i]);return new nd(s.path,s.collectionGroup,a,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function Gv(t,e="asc"){const n=e,r=Eg("orderBy",t);return Wv._create(r,n)}function Db(t,e,n){if(typeof(n=_n(n))=="string"){if(n==="")throw new Je(je.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!sS(e)&&n.indexOf("/")!==-1)throw new Je(je.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Mn.fromString(n));if(!wt.isDocumentKey(r))throw new Je(je.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return nb(t,new wt(r))}if(n instanceof ys)return nb(t,n._key);throw new Je(je.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${_g(n)}.`)}function Ob(t,e){if(!Array.isArray(t)||t.length===0)throw new Je(je.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function iA(t,e){const n=function(s,i){for(const a of s)for(const o of a.getFlattenedFilters())if(i.indexOf(o.op)>=0)return o.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Je(je.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Je(je.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class f9{convertValue(e,n="none"){switch(vc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return fr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(yc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ct()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Lc(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(a=>fr(a.doubleValue));return new Fv(i)}convertGeoPoint(e){return new Mv(fr(e.latitude),fr(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=pv(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Mh(e));default:return null}}convertTimestamp(e){const n=_l(e);return new _r(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Mn.fromString(e);bn(kS(r));const s=new Fh(r.get(1),r.get(3)),i=new wt(r.popFirst(5));return s.isEqual(n)||go(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kv(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yd{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class aA extends nA{constructor(e,n,r,s,i,a){super(e,n,r,s,a),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Fp(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Eg("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Fp extends aA{data(e={}){return super.data(e)}}class oA{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Yd(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Fp(this._firestore,this._userDataWriter,r.key,r,new Yd(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Je(je.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map(o=>{const l=new Fp(s._firestore,s._userDataWriter,o.doc.key,o.doc,new Yd(s._snapshot.mutatedKeys.has(o.doc.key),s._snapshot.fromCache),s.query.converter);return o.doc,{type:"added",doc:l,oldIndex:-1,newIndex:a++}})}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(o=>i||o.type!==3).map(o=>{const l=new Fp(s._firestore,s._userDataWriter,o.doc.key,o.doc,new Yd(s._snapshot.mutatedKeys.has(o.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,d=-1;return o.type!==0&&(c=a.indexOf(o.doc.key),a=a.delete(o.doc.key)),o.type!==1&&(a=a.add(o.doc),d=a.indexOf(o.doc.key)),{type:p9(o.type),doc:l,oldIndex:c,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function p9(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ct()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Li(t){t=js(t,ys);const e=js(t.firestore,ja);return e9(pf(e),t._key).then(n=>lA(e,t,n))}class Yv extends f9{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ku(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new ys(this.firestore,null,n)}}function An(t){t=js(t,jl);const e=js(t.firestore,ja),n=pf(e),r=new Yv(e);return rA(t._query),t9(n,t._query).then(s=>new oA(e,r,t,s))}function Qv(t,e,n){t=js(t,ys);const r=js(t.firestore,ja),s=Kv(t.converter,e,n);return vf(r,[Uv(yf(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Ps.none())])}function Br(t,e,n,...r){t=js(t,ys);const s=js(t.firestore,ja),i=yf(s);let a;return a=typeof(e=_n(e))=="string"||e instanceof mf?JS(i,"updateDoc",t._key,e,n,r):XS(i,"updateDoc",t._key,e),vf(s,[a.toMutation(t._key,Ps.exists(!0))])}function Xv(t){return vf(js(t.firestore,ja),[new yg(t._key,Ps.none())])}function Jr(t,e){const n=js(t.firestore,ja),r=$t(t),s=Kv(t.converter,e);return vf(n,[Uv(yf(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,Ps.exists(!1))]).then(()=>r)}function Pm(t,...e){var n,r,s;t=_n(t);let i={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||Rb(e[a])||(i=e[a],a++);const o={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(Rb(e[a])){const g=e[a];e[a]=(n=g.next)===null||n===void 0?void 0:n.bind(g),e[a+1]=(r=g.error)===null||r===void 0?void 0:r.bind(g),e[a+2]=(s=g.complete)===null||s===void 0?void 0:s.bind(g)}let l,c,d;if(t instanceof ys)c=js(t.firestore,ja),d=hg(t._key.path),l={next:g=>{e[a]&&e[a](lA(c,t,g))},error:e[a+1],complete:e[a+2]};else{const g=js(t,jl);c=js(g.firestore,ja),d=g._query;const y=new Yv(c);l={next:p=>{e[a]&&e[a](new oA(c,y,g,p))},error:e[a+1],complete:e[a+2]},rA(t._query)}return function(y,p,N,S){const I=new Ov(S),w=new Rv(p,I,N);return y.asyncQueue.enqueueAndForget(async()=>Pv(await Im(y),w)),()=>{I.Za(),y.asyncQueue.enqueueAndForget(async()=>jv(await Im(y),w))}}(pf(c),d,o,l)}function vf(t,e){return function(r,s){const i=new oo;return r.asyncQueue.enqueueAndForget(async()=>qD(await ZD(r),s,i)),i.promise}(pf(t),e)}function lA(t,e,n){const r=n.docs.get(e._key),s=new Yv(t);return new aA(t,s,e._key,r,new Yd(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m9{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=yf(e)}set(e,n,r){this._verifyNotCommitted();const s=O0(e,this._firestore),i=Kv(s.converter,n,r),a=Uv(this._dataReader,"WriteBatch.set",s._key,i,s.converter!==null,r);return this._mutations.push(a.toMutation(s._key,Ps.none())),this}update(e,n,r,...s){this._verifyNotCommitted();const i=O0(e,this._firestore);let a;return a=typeof(n=_n(n))=="string"||n instanceof mf?JS(this._dataReader,"WriteBatch.update",i._key,n,r,s):XS(this._dataReader,"WriteBatch.update",i._key,n),this._mutations.push(a.toMutation(i._key,Ps.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=O0(e,this._firestore);return this._mutations=this._mutations.concat(new yg(n._key,Ps.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Je(je.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function O0(t,e){if((t=_n(t)).firestore!==e)throw new Je(je.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function wa(){return new Vv("serverTimestamp")}function g9(...t){return new Bv("arrayUnion",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cA(t){return pf(t=js(t,ja)),new m9(t,e=>vf(t,e))}(function(e,n=!0){(function(s){td=s})(Cc),Zi(new Oi("firestore",(r,{instanceIdentifier:s,options:i})=>{const a=r.getProvider("app").getImmediate(),o=new ja(new _L(r.getProvider("auth-internal")),new EL(r.getProvider("app-check-internal")),function(c,d){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new Je(je.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Fh(c.options.projectId,d)}(a,s),a);return i=Object.assign({useFetchStreams:n},i),o._setSettings(i),o},"PUBLIC").setMultipleInstances(!0)),Gs(Xw,"4.7.3",e),Gs(Xw,"4.7.3","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uA="firebasestorage.googleapis.com",dA="storageBucket",y9=2*60*1e3,v9=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr extends sa{constructor(e,n,r=0){super(M0(e),`Firebase Storage: ${n} (${M0(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,lr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return M0(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var or;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(or||(or={}));function M0(t){return"storage/"+t}function Jv(){const t="An unknown error occurred, please check the error payload for server response.";return new lr(or.UNKNOWN,t)}function x9(t){return new lr(or.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function w9(t){return new lr(or.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function b9(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new lr(or.UNAUTHENTICATED,t)}function _9(){return new lr(or.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function N9(t){return new lr(or.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function S9(){return new lr(or.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function A9(){return new lr(or.CANCELED,"User canceled the upload/download.")}function E9(t){return new lr(or.INVALID_URL,"Invalid URL '"+t+"'.")}function k9(t){return new lr(or.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function T9(){return new lr(or.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+dA+"' property when initializing the app?")}function I9(){return new lr(or.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function C9(){return new lr(or.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function P9(t){return new lr(or.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function O2(t){return new lr(or.INVALID_ARGUMENT,t)}function hA(){return new lr(or.APP_DELETED,"The Firebase app was deleted.")}function j9(t){return new lr(or.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function uh(t,e){return new lr(or.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Md(t){throw new lr(or.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=ui.makeFromUrl(e,n)}catch{return new ui(e,"")}if(r.path==="")return r;throw k9(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(D){D.path.charAt(D.path.length-1)==="/"&&(D.path_=D.path_.slice(0,-1))}const a="(/(.*))?$",o=new RegExp("^gs://"+s+a,"i"),l={bucket:1,path:3};function c(D){D.path_=decodeURIComponent(D.path)}const d="v[A-Za-z0-9_]+",g=n.replace(/[.]/g,"\\."),y="(/([^?#]*).*)?$",p=new RegExp(`^https?://${g}/${d}/b/${s}/o${y}`,"i"),N={bucket:1,path:3},S=n===uA?"(?:storage.googleapis.com|storage.cloud.google.com)":n,I="([^?#]*)",w=new RegExp(`^https?://${S}/${s}/${I}`,"i"),j=[{regex:o,indices:l,postModify:i},{regex:p,indices:N,postModify:c},{regex:w,indices:{bucket:1,path:2},postModify:c}];for(let D=0;D<j.length;D++){const H=j[D],J=H.regex.exec(e);if(J){const O=J[H.indices.bucket];let _=J[H.indices.path];_||(_=""),r=new ui(O,_),H.postModify(r);break}}if(r==null)throw E9(e);return r}}class L9{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R9(t,e,n){let r=1,s=null,i=null,a=!1,o=0;function l(){return o===2}let c=!1;function d(...I){c||(c=!0,e.apply(null,I))}function g(I){s=setTimeout(()=>{s=null,t(p,l())},I)}function y(){i&&clearTimeout(i)}function p(I,...w){if(c){y();return}if(I){y(),d.call(null,I,...w);return}if(l()||a){y(),d.call(null,I,...w);return}r<64&&(r*=2);let j;o===1?(o=2,j=0):j=(r+Math.random())*1e3,g(j)}let N=!1;function S(I){N||(N=!0,y(),!c&&(s!==null?(I||(o=2),clearTimeout(s),g(0)):I||(o=1)))}return g(0),i=setTimeout(()=>{a=!0,S(!0)},n),S}function D9(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O9(t){return t!==void 0}function M9(t){return typeof t=="object"&&!Array.isArray(t)}function Zv(t){return typeof t=="string"||t instanceof String}function Mb(t){return e5()&&t instanceof Blob}function e5(){return typeof Blob<"u"}function Fb(t,e,n,r){if(r<e)throw O2(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw O2(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t5(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function fA(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var oc;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(oc||(oc={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F9(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U9{constructor(e,n,r,s,i,a,o,l,c,d,g,y=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=a,this.callback_=o,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=d,this.connectionFactory_=g,this.retry=y,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((p,N)=>{this.resolve_=p,this.reject_=N,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new op(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const a=o=>{const l=o.loaded,c=o.lengthComputable?o.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&i.addUploadProgressListener(a),i.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(a),this.pendingConnection_=null;const o=i.getErrorCode()===oc.NO_ERROR,l=i.getStatus();if(!o||F9(l,this.additionalRetryCodes_)&&this.retry){const d=i.getErrorCode()===oc.ABORT;r(!1,new op(!1,null,d));return}const c=this.successCodes_.indexOf(l)!==-1;r(!0,new op(c,i))})},n=(r,s)=>{const i=this.resolve_,a=this.reject_,o=s.connection;if(s.wasSuccessCode)try{const l=this.callback_(o,o.getResponse());O9(l)?i(l):i()}catch(l){a(l)}else if(o!==null){const l=Jv();l.serverResponse=o.getErrorText(),this.errorCallback_?a(this.errorCallback_(o,l)):a(l)}else if(s.canceled){const l=this.appDelete_?hA():A9();a(l)}else{const l=S9();a(l)}};this.canceled_?n(!1,new op(!1,null,!0)):this.backoffId_=R9(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&D9(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class op{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function V9(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function B9(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function z9(t,e){e&&(t["X-Firebase-GMPID"]=e)}function q9(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function H9(t,e,n,r,s,i,a=!0){const o=fA(t.urlParams),l=t.url+o,c=Object.assign({},t.headers);return z9(c,e),V9(c,n),B9(c,i),q9(c,r),new U9(l,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $9(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function W9(...t){const e=$9();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(e5())return new Blob(t);throw new lr(or.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function G9(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K9(t){if(typeof atob>"u")throw P9("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Na={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class F0{constructor(e,n){this.data=e,this.contentType=n||null}}function Y9(t,e){switch(t){case Na.RAW:return new F0(pA(e));case Na.BASE64:case Na.BASE64URL:return new F0(mA(t,e));case Na.DATA_URL:return new F0(X9(e),J9(e))}throw Jv()}function pA(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const i=r,a=t.charCodeAt(++n);r=65536|(i&1023)<<10|a&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function Q9(t){let e;try{e=decodeURIComponent(t)}catch{throw uh(Na.DATA_URL,"Malformed data URL.")}return pA(e)}function mA(t,e){switch(t){case Na.BASE64:{const s=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(s||i)throw uh(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case Na.BASE64URL:{const s=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(s||i)throw uh(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=K9(e)}catch(s){throw s.message.includes("polyfill")?s:uh(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class gA{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw uh(Na.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=Z9(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function X9(t){const e=new gA(t);return e.base64?mA(Na.BASE64,e.rest):Q9(e.rest)}function J9(t){return new gA(t).contentType}function Z9(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tl{constructor(e,n){let r=0,s="";Mb(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(Mb(this.data_)){const r=this.data_,s=G9(r,e,n);return s===null?null:new tl(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new tl(r,!0)}}static getBlob(...e){if(e5()){const n=e.map(r=>r instanceof tl?r.data_:r);return new tl(W9.apply(null,n))}else{const n=e.map(a=>Zv(a)?Y9(Na.RAW,a).data:a.data_);let r=0;n.forEach(a=>{r+=a.byteLength});const s=new Uint8Array(r);let i=0;return n.forEach(a=>{for(let o=0;o<a.length;o++)s[i++]=a[o]}),new tl(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yA(t){let e;try{e=JSON.parse(t)}catch{return null}return M9(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eO(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function tO(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function vA(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nO(t,e){return e}class ks{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||nO}}let lp=null;function rO(t){return!Zv(t)||t.length<2?t:vA(t)}function xA(){if(lp)return lp;const t=[];t.push(new ks("bucket")),t.push(new ks("generation")),t.push(new ks("metageneration")),t.push(new ks("name","fullPath",!0));function e(i,a){return rO(a)}const n=new ks("name");n.xform=e,t.push(n);function r(i,a){return a!==void 0?Number(a):a}const s=new ks("size");return s.xform=r,t.push(s),t.push(new ks("timeCreated")),t.push(new ks("updated")),t.push(new ks("md5Hash",null,!0)),t.push(new ks("cacheControl",null,!0)),t.push(new ks("contentDisposition",null,!0)),t.push(new ks("contentEncoding",null,!0)),t.push(new ks("contentLanguage",null,!0)),t.push(new ks("contentType",null,!0)),t.push(new ks("metadata","customMetadata",!0)),lp=t,lp}function sO(t,e){function n(){const r=t.bucket,s=t.fullPath,i=new ui(r,s);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function iO(t,e,n){const r={};r.type="file";const s=n.length;for(let i=0;i<s;i++){const a=n[i];r[a.local]=a.xform(r,e[a.server])}return sO(r,t),r}function wA(t,e,n){const r=yA(e);return r===null?null:iO(t,r,n)}function aO(t,e,n,r){const s=yA(e);if(s===null||!Zv(s.downloadTokens))return null;const i=s.downloadTokens;if(i.length===0)return null;const a=encodeURIComponent;return i.split(",").map(c=>{const d=t.bucket,g=t.fullPath,y="/b/"+a(d)+"/o/"+a(g),p=t5(y,n,r),N=fA({alt:"media",token:c});return p+N})[0]}function oO(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const i=e[s];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}class bA{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _A(t){if(!t)throw Jv()}function lO(t,e){function n(r,s){const i=wA(t,s,e);return _A(i!==null),i}return n}function cO(t,e){function n(r,s){const i=wA(t,s,e);return _A(i!==null),aO(i,s,t.host,t._protocol)}return n}function NA(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=_9():s=b9():n.getStatus()===402?s=w9(t.bucket):n.getStatus()===403?s=N9(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function uO(t){const e=NA(t);function n(r,s){let i=e(r,s);return r.getStatus()===404&&(i=x9(t.path)),i.serverResponse=s.serverResponse,i}return n}function dO(t,e,n){const r=e.fullServerUrl(),s=t5(r,t.host,t._protocol),i="GET",a=t.maxOperationRetryTime,o=new bA(s,i,cO(t,n),a);return o.errorHandler=uO(e),o}function hO(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function fO(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=hO(null,e)),r}function pO(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"};function o(){let j="";for(let D=0;D<2;D++)j=j+Math.random().toString().slice(2);return j}const l=o();a["Content-Type"]="multipart/related; boundary="+l;const c=fO(e,r,s),d=oO(c,n),g="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+d+`\r
--`+l+`\r
Content-Type: `+c.contentType+`\r
\r
`,y=`\r
--`+l+"--",p=tl.getBlob(g,r,y);if(p===null)throw I9();const N={name:c.fullPath},S=t5(i,t.host,t._protocol),I="POST",w=t.maxUploadRetryTime,T=new bA(S,I,lO(t,n),w);return T.urlParams=N,T.headers=a,T.body=p.uploadData(),T.errorHandler=NA(e),T}class mO{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=oc.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=oc.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=oc.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s){if(this.sent_)throw Md("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),s!==void 0)for(const i in s)s.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,s[i].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Md("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Md("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Md("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Md("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class gO extends mO{initXhr(){this.xhr_.responseType="text"}}function SA(){return new gO}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wc{constructor(e,n){this._service=e,n instanceof ui?this._location=n:this._location=ui.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new wc(e,n)}get root(){const e=new ui(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return vA(this._location.path)}get storage(){return this._service}get parent(){const e=eO(this._location.path);if(e===null)return null;const n=new ui(this._location.bucket,e);return new wc(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw j9(e)}}function yO(t,e,n){t._throwIfRoot("uploadBytes");const r=pO(t.storage,t._location,xA(),new tl(e,!0),n);return t.storage.makeRequestWithTokens(r,SA).then(s=>({metadata:s,ref:t}))}function vO(t){t._throwIfRoot("getDownloadURL");const e=dO(t.storage,t._location,xA());return t.storage.makeRequestWithTokens(e,SA).then(n=>{if(n===null)throw C9();return n})}function xO(t,e){const n=tO(t._location.path,e),r=new ui(t._location.bucket,n);return new wc(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wO(t){return/^[A-Za-z]+:\/\//.test(t)}function bO(t,e){return new wc(t,e)}function AA(t,e){if(t instanceof n5){const n=t;if(n._bucket==null)throw T9();const r=new wc(n,n._bucket);return e!=null?AA(r,e):r}else return e!==void 0?xO(t,e):t}function _O(t,e){if(e&&wO(e)){if(t instanceof n5)return bO(t,e);throw O2("To use ref(service, url), the first argument must be a Storage instance.")}else return AA(t,e)}function Ub(t,e){const n=e==null?void 0:e[dA];return n==null?null:ui.makeFromBucketSpec(n,t)}function NO(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:s}=r;s&&(t._overrideAuthToken=typeof s=="string"?s:J6(s,t.app.options.projectId))}class n5{constructor(e,n,r,s,i){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._bucket=null,this._host=uA,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=y9,this._maxUploadRetryTime=v9,this._requests=new Set,s!=null?this._bucket=ui.makeFromBucketSpec(s,this._host):this._bucket=Ub(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=ui.makeFromBucketSpec(this._url,e):this._bucket=Ub(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Fb("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Fb("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new wc(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new L9(hA());{const a=H9(e,this._appId,r,s,n,this._firebaseVersion,i);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const Vb="@firebase/storage",Bb="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EA="storage";function SO(t,e,n){return t=_n(t),yO(t,e,n)}function AO(t){return t=_n(t),vO(t)}function EO(t,e){return t=_n(t),_O(t,e)}function kA(t=og(),e){t=_n(t);const r=Ic(t,EA).getImmediate({identifier:e}),s=Y6("storage");return s&&kO(r,...s),r}function kO(t,e,n,r={}){NO(t,e,n,r)}function TO(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new n5(n,r,s,e,Cc)}function IO(){Zi(new Oi(EA,TO,"PUBLIC").setMultipleInstances(!0)),Gs(Vb,Bb,""),Gs(Vb,Bb,"esm2017")}IO();const TA="@firebase/installations",r5="0.6.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IA=1e4,CA=`w:${r5}`,PA="FIS_v2",CO="https://firebaseinstallations.googleapis.com/v1",PO=60*60*1e3,jO="installations",LO="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RO={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},bc=new Tc(jO,LO,RO);function jA(t){return t instanceof sa&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LA({projectId:t}){return`${CO}/projects/${t}/installations`}function RA(t){return{token:t.token,requestStatus:2,expiresIn:OO(t.expiresIn),creationTime:Date.now()}}async function DA(t,e){const r=(await e.json()).error;return bc.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function OA({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function DO(t,{refreshToken:e}){const n=OA(t);return n.append("Authorization",MO(e)),n}async function MA(t){const e=await t();return e.status>=500&&e.status<600?t():e}function OO(t){return Number(t.replace("s","000"))}function MO(t){return`${PA} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FO({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=LA(t),s=OA(t),i=e.getImmediate({optional:!0});if(i){const c=await i.getHeartbeatsHeader();c&&s.append("x-firebase-client",c)}const a={fid:n,authVersion:PA,appId:t.appId,sdkVersion:CA},o={method:"POST",headers:s,body:JSON.stringify(a)},l=await MA(()=>fetch(r,o));if(l.ok){const c=await l.json();return{fid:c.fid||n,registrationStatus:2,refreshToken:c.refreshToken,authToken:RA(c.authToken)}}else throw await DA("Create Installation",l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FA(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UO(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VO=/^[cdef][\w-]{21}$/,M2="";function BO(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=zO(t);return VO.test(n)?n:M2}catch{return M2}}function zO(t){return UO(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tg(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UA=new Map;function VA(t,e){const n=Tg(t);BA(n,e),qO(n,e)}function BA(t,e){const n=UA.get(t);if(n)for(const r of n)r(e)}function qO(t,e){const n=HO();n&&n.postMessage({key:t,fid:e}),$O()}let rc=null;function HO(){return!rc&&"BroadcastChannel"in self&&(rc=new BroadcastChannel("[Firebase] FID Change"),rc.onmessage=t=>{BA(t.data.key,t.data.fid)}),rc}function $O(){UA.size===0&&rc&&(rc.close(),rc=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WO="firebase-installations-database",GO=1,_c="firebase-installations-store";let U0=null;function s5(){return U0||(U0=ag(WO,GO,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(_c)}}})),U0}async function jm(t,e){const n=Tg(t),s=(await s5()).transaction(_c,"readwrite"),i=s.objectStore(_c),a=await i.get(n);return await i.put(e,n),await s.done,(!a||a.fid!==e.fid)&&VA(t,e.fid),e}async function zA(t){const e=Tg(t),r=(await s5()).transaction(_c,"readwrite");await r.objectStore(_c).delete(e),await r.done}async function Ig(t,e){const n=Tg(t),s=(await s5()).transaction(_c,"readwrite"),i=s.objectStore(_c),a=await i.get(n),o=e(a);return o===void 0?await i.delete(n):await i.put(o,n),await s.done,o&&(!a||a.fid!==o.fid)&&VA(t,o.fid),o}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function i5(t){let e;const n=await Ig(t.appConfig,r=>{const s=KO(r),i=YO(t,s);return e=i.registrationPromise,i.installationEntry});return n.fid===M2?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function KO(t){const e=t||{fid:BO(),registrationStatus:0};return qA(e)}function YO(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(bc.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=QO(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:XO(t)}:{installationEntry:e}}async function QO(t,e){try{const n=await FO(t,e);return jm(t.appConfig,n)}catch(n){throw jA(n)&&n.customData.serverCode===409?await zA(t.appConfig):await jm(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function XO(t){let e=await zb(t.appConfig);for(;e.registrationStatus===1;)await FA(100),e=await zb(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await i5(t);return r||n}return e}function zb(t){return Ig(t,e=>{if(!e)throw bc.create("installation-not-found");return qA(e)})}function qA(t){return JO(t)?{fid:t.fid,registrationStatus:0}:t}function JO(t){return t.registrationStatus===1&&t.registrationTime+IA<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZO({appConfig:t,heartbeatServiceProvider:e},n){const r=eM(t,n),s=DO(t,n),i=e.getImmediate({optional:!0});if(i){const c=await i.getHeartbeatsHeader();c&&s.append("x-firebase-client",c)}const a={installation:{sdkVersion:CA,appId:t.appId}},o={method:"POST",headers:s,body:JSON.stringify(a)},l=await MA(()=>fetch(r,o));if(l.ok){const c=await l.json();return RA(c)}else throw await DA("Generate Auth Token",l)}function eM(t,{fid:e}){return`${LA(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function a5(t,e=!1){let n;const r=await Ig(t.appConfig,i=>{if(!HA(i))throw bc.create("not-registered");const a=i.authToken;if(!e&&rM(a))return i;if(a.requestStatus===1)return n=tM(t,e),i;{if(!navigator.onLine)throw bc.create("app-offline");const o=iM(i);return n=nM(t,o),o}});return n?await n:r.authToken}async function tM(t,e){let n=await qb(t.appConfig);for(;n.authToken.requestStatus===1;)await FA(100),n=await qb(t.appConfig);const r=n.authToken;return r.requestStatus===0?a5(t,e):r}function qb(t){return Ig(t,e=>{if(!HA(e))throw bc.create("not-registered");const n=e.authToken;return aM(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function nM(t,e){try{const n=await ZO(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return await jm(t.appConfig,r),n}catch(n){if(jA(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await zA(t.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await jm(t.appConfig,r)}throw n}}function HA(t){return t!==void 0&&t.registrationStatus===2}function rM(t){return t.requestStatus===2&&!sM(t)}function sM(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+PO}function iM(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function aM(t){return t.requestStatus===1&&t.requestTime+IA<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oM(t){const e=t,{installationEntry:n,registrationPromise:r}=await i5(e);return r?r.catch(console.error):a5(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lM(t,e=!1){const n=t;return await cM(n),(await a5(n,e)).token}async function cM(t){const{registrationPromise:e}=await i5(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uM(t){if(!t||!t.options)throw V0("App Configuration");if(!t.name)throw V0("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw V0(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function V0(t){return bc.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $A="installations",dM="installations-internal",hM=t=>{const e=t.getProvider("app").getImmediate(),n=uM(e),r=Ic(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},fM=t=>{const e=t.getProvider("app").getImmediate(),n=Ic(e,$A).getImmediate();return{getId:()=>oM(n),getToken:s=>lM(n,s)}};function pM(){Zi(new Oi($A,hM,"PUBLIC")),Zi(new Oi(dM,fM,"PRIVATE"))}pM();Gs(TA,r5);Gs(TA,r5,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mM="/firebase-messaging-sw.js",gM="/firebase-cloud-messaging-push-scope",WA="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",yM="https://fcmregistrations.googleapis.com/v1",GA="google.c.a.c_id",vM="google.c.a.c_l",xM="google.c.a.ts",wM="google.c.a.e";var Hb;(function(t){t[t.DATA_MESSAGE=1]="DATA_MESSAGE",t[t.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"})(Hb||(Hb={}));/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License. You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under the License
 * is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
 * or implied. See the License for the specific language governing permissions and limitations under
 * the License.
 */var Hh;(function(t){t.PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked"})(Hh||(Hh={}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ya(t){const e=new Uint8Array(t);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function bM(t){const e="=".repeat((4-t.length%4)%4),n=(t+e).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(n),s=new Uint8Array(r.length);for(let i=0;i<r.length;++i)s[i]=r.charCodeAt(i);return s}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B0="fcm_token_details_db",_M=5,$b="fcm_token_object_Store";async function NM(t){if("databases"in indexedDB&&!(await indexedDB.databases()).map(i=>i.name).includes(B0))return null;let e=null;return(await ag(B0,_M,{upgrade:async(r,s,i,a)=>{var o;if(s<2||!r.objectStoreNames.contains($b))return;const l=a.objectStore($b),c=await l.index("fcmSenderId").get(t);if(await l.clear(),!!c){if(s===2){const d=c;if(!d.auth||!d.p256dh||!d.endpoint)return;e={token:d.fcmToken,createTime:(o=d.createTime)!==null&&o!==void 0?o:Date.now(),subscriptionOptions:{auth:d.auth,p256dh:d.p256dh,endpoint:d.endpoint,swScope:d.swScope,vapidKey:typeof d.vapidKey=="string"?d.vapidKey:Ya(d.vapidKey)}}}else if(s===3){const d=c;e={token:d.fcmToken,createTime:d.createTime,subscriptionOptions:{auth:Ya(d.auth),p256dh:Ya(d.p256dh),endpoint:d.endpoint,swScope:d.swScope,vapidKey:Ya(d.vapidKey)}}}else if(s===4){const d=c;e={token:d.fcmToken,createTime:d.createTime,subscriptionOptions:{auth:Ya(d.auth),p256dh:Ya(d.p256dh),endpoint:d.endpoint,swScope:d.swScope,vapidKey:Ya(d.vapidKey)}}}}}})).close(),await k0(B0),await k0("fcm_vapid_details_db"),await k0("undefined"),SM(e)?e:null}function SM(t){if(!t||!t.subscriptionOptions)return!1;const{subscriptionOptions:e}=t;return typeof t.createTime=="number"&&t.createTime>0&&typeof t.token=="string"&&t.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AM="firebase-messaging-database",EM=1,$h="firebase-messaging-store";let z0=null;function KA(){return z0||(z0=ag(AM,EM,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore($h)}}})),z0}async function kM(t){const e=YA(t),r=await(await KA()).transaction($h).objectStore($h).get(e);if(r)return r;{const s=await NM(t.appConfig.senderId);if(s)return await o5(t,s),s}}async function o5(t,e){const n=YA(t),s=(await KA()).transaction($h,"readwrite");return await s.objectStore($h).put(e,n),await s.done,e}function YA({appConfig:t}){return t.appId}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TM={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},vs=new Tc("messaging","Messaging",TM);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IM(t,e){const n=await c5(t),r=QA(e),s={method:"POST",headers:n,body:JSON.stringify(r)};let i;try{i=await(await fetch(l5(t.appConfig),s)).json()}catch(a){throw vs.create("token-subscribe-failed",{errorInfo:a==null?void 0:a.toString()})}if(i.error){const a=i.error.message;throw vs.create("token-subscribe-failed",{errorInfo:a})}if(!i.token)throw vs.create("token-subscribe-no-token");return i.token}async function CM(t,e){const n=await c5(t),r=QA(e.subscriptionOptions),s={method:"PATCH",headers:n,body:JSON.stringify(r)};let i;try{i=await(await fetch(`${l5(t.appConfig)}/${e.token}`,s)).json()}catch(a){throw vs.create("token-update-failed",{errorInfo:a==null?void 0:a.toString()})}if(i.error){const a=i.error.message;throw vs.create("token-update-failed",{errorInfo:a})}if(!i.token)throw vs.create("token-update-no-token");return i.token}async function PM(t,e){const r={method:"DELETE",headers:await c5(t)};try{const i=await(await fetch(`${l5(t.appConfig)}/${e}`,r)).json();if(i.error){const a=i.error.message;throw vs.create("token-unsubscribe-failed",{errorInfo:a})}}catch(s){throw vs.create("token-unsubscribe-failed",{errorInfo:s==null?void 0:s.toString()})}}function l5({projectId:t}){return`${yM}/projects/${t}/registrations`}async function c5({appConfig:t,installations:e}){const n=await e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":`FIS ${n}`})}function QA({p256dh:t,auth:e,endpoint:n,vapidKey:r}){const s={web:{endpoint:n,auth:e,p256dh:t}};return r!==WA&&(s.web.applicationPubKey=r),s}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jM=7*24*60*60*1e3;async function LM(t){const e=await DM(t.swRegistration,t.vapidKey),n={vapidKey:t.vapidKey,swScope:t.swRegistration.scope,endpoint:e.endpoint,auth:Ya(e.getKey("auth")),p256dh:Ya(e.getKey("p256dh"))},r=await kM(t.firebaseDependencies);if(r){if(OM(r.subscriptionOptions,n))return Date.now()>=r.createTime+jM?RM(t,{token:r.token,createTime:Date.now(),subscriptionOptions:n}):r.token;try{await PM(t.firebaseDependencies,r.token)}catch(s){console.warn(s)}return Wb(t.firebaseDependencies,n)}else return Wb(t.firebaseDependencies,n)}async function RM(t,e){try{const n=await CM(t.firebaseDependencies,e),r=Object.assign(Object.assign({},e),{token:n,createTime:Date.now()});return await o5(t.firebaseDependencies,r),n}catch(n){throw n}}async function Wb(t,e){const r={token:await IM(t,e),createTime:Date.now(),subscriptionOptions:e};return await o5(t,r),r.token}async function DM(t,e){const n=await t.pushManager.getSubscription();return n||t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:bM(e)})}function OM(t,e){const n=e.vapidKey===t.vapidKey,r=e.endpoint===t.endpoint,s=e.auth===t.auth,i=e.p256dh===t.p256dh;return n&&r&&s&&i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gb(t){const e={from:t.from,collapseKey:t.collapse_key,messageId:t.fcmMessageId};return MM(e,t),FM(e,t),UM(e,t),e}function MM(t,e){if(!e.notification)return;t.notification={};const n=e.notification.title;n&&(t.notification.title=n);const r=e.notification.body;r&&(t.notification.body=r);const s=e.notification.image;s&&(t.notification.image=s);const i=e.notification.icon;i&&(t.notification.icon=i)}function FM(t,e){e.data&&(t.data=e.data)}function UM(t,e){var n,r,s,i,a;if(!e.fcmOptions&&!(!((n=e.notification)===null||n===void 0)&&n.click_action))return;t.fcmOptions={};const o=(s=(r=e.fcmOptions)===null||r===void 0?void 0:r.link)!==null&&s!==void 0?s:(i=e.notification)===null||i===void 0?void 0:i.click_action;o&&(t.fcmOptions.link=o);const l=(a=e.fcmOptions)===null||a===void 0?void 0:a.analytics_label;l&&(t.fcmOptions.analyticsLabel=l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VM(t){return typeof t=="object"&&!!t&&GA in t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BM(t){if(!t||!t.options)throw q0("App Configuration Object");if(!t.name)throw q0("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:n}=t;for(const r of e)if(!n[r])throw q0(r);return{appName:t.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}function q0(t){return vs.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zM{constructor(e,n,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const s=BM(e);this.firebaseDependencies={app:e,appConfig:s,installations:n,analyticsProvider:r}}_delete(){return Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qM(t){try{t.swRegistration=await navigator.serviceWorker.register(mM,{scope:gM}),t.swRegistration.update().catch(()=>{})}catch(e){throw vs.create("failed-service-worker-registration",{browserErrorMessage:e==null?void 0:e.message})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HM(t,e){if(!e&&!t.swRegistration&&await qM(t),!(!e&&t.swRegistration)){if(!(e instanceof ServiceWorkerRegistration))throw vs.create("invalid-sw-registration");t.swRegistration=e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $M(t,e){e?t.vapidKey=e:t.vapidKey||(t.vapidKey=WA)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XA(t,e){if(!navigator)throw vs.create("only-available-in-window");if(Notification.permission==="default"&&await Notification.requestPermission(),Notification.permission!=="granted")throw vs.create("permission-blocked");return await $M(t,e==null?void 0:e.vapidKey),await HM(t,e==null?void 0:e.serviceWorkerRegistration),LM(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WM(t,e,n){const r=GM(e);(await t.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:n[GA],message_name:n[vM],message_time:n[xM],message_device_time:Math.floor(Date.now()/1e3)})}function GM(t){switch(t){case Hh.NOTIFICATION_CLICKED:return"notification_open";case Hh.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KM(t,e){const n=e.data;if(!n.isFirebaseMessaging)return;t.onMessageHandler&&n.messageType===Hh.PUSH_RECEIVED&&(typeof t.onMessageHandler=="function"?t.onMessageHandler(Gb(n)):t.onMessageHandler.next(Gb(n)));const r=n.data;VM(r)&&r[wM]==="1"&&await WM(t,n.messageType,r)}const Kb="@firebase/messaging",Yb="0.12.12";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YM=t=>{const e=new zM(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),t.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",n=>KM(e,n)),e},QM=t=>{const e=t.getProvider("messaging").getImmediate();return{getToken:r=>XA(e,r)}};function XM(){Zi(new Oi("messaging",YM,"PUBLIC")),Zi(new Oi("messaging-internal",QM,"PRIVATE")),Gs(Kb,Yb),Gs(Kb,Yb,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JM(){try{await eN()}catch{return!1}return typeof window<"u"&&Z6()&&HC()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZM(t,e){if(!navigator)throw vs.create("only-available-in-window");return t.onMessageHandler=e,()=>{t.onMessageHandler=null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eF(t=og()){return JM().then(e=>{if(!e)throw vs.create("unsupported-browser")},e=>{throw vs.create("indexed-db-unsupported")}),Ic(_n(t),"messaging").getImmediate()}async function JA(t,e){return t=_n(t),XA(t,e)}function tF(t,e){return t=_n(t),ZM(t,e)}XM();const nF={apiKey:"AIzaSyCKPrE1B2ikGlnr6PmTq4JVLlBDlOe50Co",authDomain:"tmv1-7fc4f.firebaseapp.com",projectId:"tmv1-7fc4f",storageBucket:"tmv1-7fc4f.firebasestorage.app",messagingSenderId:"377085834114",appId:"1:377085834114:web:aeb2ca19e51abe8fc5959b",measurementId:"G-8J8CDN3QFF"},Cg=rN(nF),qs=gL(Cg),ze=s9(Cg);kA(Cg);const F2=eF(Cg),rF=15;function sF(){const t=qr();se.useEffect(()=>{const e=rF*60*1e3;let n;const r=()=>{n&&clearTimeout(n),n=setTimeout(async()=>{try{await CN(qs)}catch(i){console.error("Auto logout failed",i)}t("/")},e)},s=["click","mousemove","keydown","touchstart"];return s.forEach(i=>window.addEventListener(i,r,!0)),r(),()=>{n&&clearTimeout(n),s.forEach(i=>window.removeEventListener(i,r,!0))}},[t])}const Ts=({children:t})=>{const[e,n]=se.useState("checking");return se.useEffect(()=>{const r=jc(qs,async s=>{if(!s){n("denied");return}try{const i=await Li($t(ze,"users",s.uid));(i.exists()?i.data():{}).userType==="admin"?n("allowed"):n("denied")}catch{n("denied")}});return()=>r()},[]),e==="checking"?null:e==="denied"?u.jsx(gC,{to:"/home",replace:!0}):t};var ZA={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Qb=ol.createContext&&ol.createContext(ZA),iF=["attr","size","title"];function aF(t,e){if(t==null)return{};var n=oF(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function oF(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Lm(){return Lm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Lm.apply(this,arguments)}function Xb(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Rm(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Xb(Object(n),!0).forEach(function(r){lF(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Xb(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function lF(t,e,n){return e=cF(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function cF(t){var e=uF(t,"string");return typeof e=="symbol"?e:e+""}function uF(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function eE(t){return t&&t.map((e,n)=>ol.createElement(e.tag,Rm({key:n},e.attr),eE(e.child)))}function un(t){return e=>ol.createElement(dF,Lm({attr:Rm({},t.attr)},e),eE(t.child))}function dF(t){var e=n=>{var{attr:r,size:s,title:i}=t,a=aF(t,iF),o=s||n.size||"1em",l;return n.className&&(l=n.className),t.className&&(l=(l?l+" ":"")+t.className),ol.createElement("svg",Lm({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,a,{className:l,style:Rm(Rm({color:t.color||n.color},n.style),t.style),height:o,width:o,xmlns:"http://www.w3.org/2000/svg"}),i&&ol.createElement("title",null,i),t.children)};return Qb!==void 0?ol.createElement(Qb.Consumer,null,n=>e(n)):e(ZA)}function u5(t){return un({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M12.83 352h262.34A12.82 12.82 0 0 0 288 339.17v-38.34A12.82 12.82 0 0 0 275.17 288H12.83A12.82 12.82 0 0 0 0 300.83v38.34A12.82 12.82 0 0 0 12.83 352zm0-256h262.34A12.82 12.82 0 0 0 288 83.17V44.83A12.82 12.82 0 0 0 275.17 32H12.83A12.82 12.82 0 0 0 0 44.83v38.34A12.82 12.82 0 0 0 12.83 96zM432 160H16a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zm0 256H16a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16z"},child:[]}]})(t)}function tE(t){return un({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M257.5 445.1l-22.2 22.2c-9.4 9.4-24.6 9.4-33.9 0L7 273c-9.4-9.4-9.4-24.6 0-33.9L201.4 44.7c9.4-9.4 24.6-9.4 33.9 0l22.2 22.2c9.5 9.5 9.3 25-.4 34.3L136.6 216H424c13.3 0 24 10.7 24 24v32c0 13.3-10.7 24-24 24H136.6l120.5 114.8c9.8 9.3 10 24.8.4 34.3z"},child:[]}]})(t)}function hF(t){return un({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"},child:[]}]})(t)}function d5(t){return un({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 512c35.32 0 63.97-28.65 63.97-64H160.03c0 35.35 28.65 64 63.97 64zm215.39-149.71c-19.32-20.76-55.47-51.99-55.47-154.29 0-77.7-54.48-139.9-127.94-155.16V32c0-17.67-14.32-32-31.98-32s-31.98 14.33-31.98 32v20.84C118.56 68.1 64.08 130.3 64.08 208c0 102.3-36.15 133.53-55.47 154.29-6 6.45-8.66 14.16-8.61 21.71.11 16.4 12.98 32 32.1 32h383.8c19.12 0 32-15.6 32.1-32 .05-7.55-2.61-15.27-8.61-21.71z"},child:[]}]})(t)}function Dc(t){return un({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M509.5 184.6L458.9 32.8C452.4 13.2 434.1 0 413.4 0H272v192h238.7c-.4-2.5-.4-5-1.2-7.4zM240 0H98.6c-20.7 0-39 13.2-45.5 32.8L2.5 184.6c-.8 2.4-.8 4.9-1.2 7.4H240V0zM0 224v240c0 26.5 21.5 48 48 48h416c26.5 0 48-21.5 48-48V224H0z"},child:[]}]})(t)}function qn(t){return un({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M0 464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V192H0v272zm320-196c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zM192 268c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zM64 268c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40zM400 64h-48V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48H160V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48H48C21.5 64 0 85.5 0 112v48h448v-48c0-26.5-21.5-48-48-48z"},child:[]}]})(t)}function U2(t){return un({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z"},child:[]}]})(t)}function lo(t){return un({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"},child:[]}]})(t)}function fF(t){return un({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8z"},child:[]}]})(t)}function pF(t){return un({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M402.6 83.2l90.2 90.2c3.8 3.8 3.8 10 0 13.8L274.4 405.6l-92.8 10.3c-12.4 1.4-22.9-9.1-21.5-21.5l10.3-92.8L388.8 83.2c3.8-3.8 10-3.8 13.8 0zm162-22.9l-48.8-48.8c-15.2-15.2-39.9-15.2-55.2 0l-35.4 35.4c-3.8 3.8-3.8 10 0 13.8l90.2 90.2c3.8 3.8 10 3.8 13.8 0l35.4-35.4c15.2-15.3 15.2-40 0-55.2zM384 346.2V448H64V128h229.8c3.2 0 6.2-1.3 8.5-3.5l40-40c7.6-7.6 2.2-20.5-8.5-20.5H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V306.2c0-10.7-12.9-16-20.5-8.5l-40 40c-2.2 2.3-3.5 5.3-3.5 8.5z"},child:[]}]})(t)}function mF(t){return un({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M502.3 190.8c3.9-3.1 9.7-.2 9.7 4.7V400c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V195.6c0-5 5.7-7.8 9.7-4.7 22.4 17.4 52.1 39.5 154.1 113.6 21.1 15.4 56.7 47.8 92.2 47.6 35.7.3 72-32.8 92.3-47.6 102-74.1 131.6-96.3 154-113.7zM256 320c23.2.4 56.6-29.2 73.4-41.4 132.7-96.3 142.8-104.7 173.4-128.7 5.8-4.5 9.2-11.5 9.2-18.9v-19c0-26.5-21.5-48-48-48H48C21.5 64 0 85.5 0 112v19c0 7.4 3.4 14.3 9.2 18.9 30.6 23.9 40.7 32.4 173.4 128.7 16.8 12.2 50.2 41.8 73.4 41.4z"},child:[]}]})(t)}function h5(t){return un({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zm-248 50c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"},child:[]}]})(t)}function gF(t){return un({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"},child:[]}]})(t)}function Jb(t){return un({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M320 400c-75.85 0-137.25-58.71-142.9-133.11L72.2 185.82c-13.79 17.3-26.48 35.59-36.72 55.59a32.35 32.35 0 0 0 0 29.19C89.71 376.41 197.07 448 320 448c26.91 0 52.87-4 77.89-10.46L346 397.39a144.13 144.13 0 0 1-26 2.61zm313.82 58.1l-110.55-85.44a331.25 331.25 0 0 0 81.25-102.07 32.35 32.35 0 0 0 0-29.19C550.29 135.59 442.93 64 320 64a308.15 308.15 0 0 0-147.32 37.7L45.46 3.37A16 16 0 0 0 23 6.18L3.37 31.45A16 16 0 0 0 6.18 53.9l588.36 454.73a16 16 0 0 0 22.46-2.81l19.64-25.27a16 16 0 0 0-2.82-22.45zm-183.72-142l-39.3-30.38A94.75 94.75 0 0 0 416 256a94.76 94.76 0 0 0-121.31-92.21A47.65 47.65 0 0 1 304 192a46.64 46.64 0 0 1-1.54 10l-73.61-56.89A142.31 142.31 0 0 1 320 112a143.92 143.92 0 0 1 144 144c0 21.63-5.29 41.79-13.9 60.11z"},child:[]}]})(t)}function Zb(t){return un({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M572.52 241.4C518.29 135.59 410.93 64 288 64S57.68 135.64 3.48 241.41a32.35 32.35 0 0 0 0 29.19C57.71 376.41 165.07 448 288 448s230.32-71.64 284.52-177.41a32.35 32.35 0 0 0 0-29.19zM288 400a144 144 0 1 1 144-144 143.93 143.93 0 0 1-144 144zm0-240a95.31 95.31 0 0 0-25.31 3.79 47.85 47.85 0 0 1-66.9 66.9A95.78 95.78 0 1 0 288 160z"},child:[]}]})(t)}function f5(t){return un({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M224 136V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zm64 236c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12v8zm0-64c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12v8zm0-72v8c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12zm96-114.1v6.1H256V0h6.1c6.4 0 12.5 2.5 17 7l97.9 98c4.5 4.5 7 10.6 7 16.9z"},child:[]}]})(t)}function yF(t){return un({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 255.531c.253 136.64-111.18 248.372-247.82 248.468-59.015.042-113.223-20.53-155.822-54.911-11.077-8.94-11.905-25.541-1.839-35.607l11.267-11.267c8.609-8.609 22.353-9.551 31.891-1.984C173.062 425.135 212.781 440 256 440c101.705 0 184-82.311 184-184 0-101.705-82.311-184-184-184-48.814 0-93.149 18.969-126.068 49.932l50.754 50.754c10.08 10.08 2.941 27.314-11.313 27.314H24c-8.837 0-16-7.163-16-16V38.627c0-14.254 17.234-21.393 27.314-11.314l49.372 49.372C129.209 34.136 189.552 8 256 8c136.81 0 247.747 110.78 248 247.531zm-180.912 78.784l9.823-12.63c8.138-10.463 6.253-25.542-4.21-33.679L288 256.349V152c0-13.255-10.745-24-24-24h-16c-13.255 0-24 10.745-24 24v135.651l65.409 50.874c10.463 8.137 25.541 6.253 33.679-4.21z"},child:[]}]})(t)}function vF(t){return un({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M280.37 148.26L96 300.11V464a16 16 0 0 0 16 16l112.06-.29a16 16 0 0 0 15.92-16V368a16 16 0 0 1 16-16h64a16 16 0 0 1 16 16v95.64a16 16 0 0 0 16 16.05L464 480a16 16 0 0 0 16-16V300L295.67 148.26a12.19 12.19 0 0 0-15.3 0zM571.6 251.47L488 182.56V44.05a12 12 0 0 0-12-12h-56a12 12 0 0 0-12 12v72.61L318.47 43a48 48 0 0 0-61 0L4.34 251.47a12 12 0 0 0-1.6 16.9l25.5 31A12 12 0 0 0 45.15 301l235.22-193.74a12.19 12.19 0 0 1 15.3 0L530.9 301a12 12 0 0 0 16.9-1.6l25.5-31a12 12 0 0 0-1.7-16.93z"},child:[]}]})(t)}function V2(t){return un({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M360 0H24C10.745 0 0 10.745 0 24v16c0 13.255 10.745 24 24 24 0 90.965 51.016 167.734 120.842 192C75.016 280.266 24 357.035 24 448c-13.255 0-24 10.745-24 24v16c0 13.255 10.745 24 24 24h336c13.255 0 24-10.745 24-24v-16c0-13.255-10.745-24-24-24 0-90.965-51.016-167.734-120.842-192C308.984 231.734 360 154.965 360 64c13.255 0 24-10.745 24-24V24c0-13.255-10.745-24-24-24zm-75.078 384H99.08c17.059-46.797 52.096-80 92.92-80 40.821 0 75.862 33.196 92.922 80zm.019-256H99.078C91.988 108.548 88 86.748 88 64h208c0 22.805-3.987 44.587-11.059 64z"},child:[]}]})(t)}function xF(t){return un({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M80 368H16a16 16 0 0 0-16 16v64a16 16 0 0 0 16 16h64a16 16 0 0 0 16-16v-64a16 16 0 0 0-16-16zm0-320H16A16 16 0 0 0 0 64v64a16 16 0 0 0 16 16h64a16 16 0 0 0 16-16V64a16 16 0 0 0-16-16zm0 160H16a16 16 0 0 0-16 16v64a16 16 0 0 0 16 16h64a16 16 0 0 0 16-16v-64a16 16 0 0 0-16-16zm416 176H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zm0-320H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16V80a16 16 0 0 0-16-16zm0 160H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16z"},child:[]}]})(t)}function Wh(t){return un({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M283.211 512c78.962 0 151.079-35.925 198.857-94.792 7.068-8.708-.639-21.43-11.562-19.35-124.203 23.654-238.262-71.576-238.262-196.954 0-72.222 38.662-138.635 101.498-174.394 9.686-5.512 7.25-20.197-3.756-22.23A258.156 258.156 0 0 0 283.211 0c-141.309 0-256 114.511-256 256 0 141.309 114.511 256 256 256z"},child:[]}]})(t)}function wF(t){return un({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"},child:[]}]})(t)}function na(t){return un({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"},child:[]}]})(t)}function Fi(t){return un({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M304 48c0 26.51-21.49 48-48 48s-48-21.49-48-48 21.49-48 48-48 48 21.49 48 48zm-48 368c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zm208-208c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zM96 256c0-26.51-21.49-48-48-48S0 229.49 0 256s21.49 48 48 48 48-21.49 48-48zm12.922 99.078c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.491-48-48-48zm294.156 0c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.49-48-48-48zM108.922 60.922c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.491-48-48-48z"},child:[]}]})(t)}function Gh(t){return un({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 160c-52.9 0-96 43.1-96 96s43.1 96 96 96 96-43.1 96-96-43.1-96-96-96zm246.4 80.5l-94.7-47.3 33.5-100.4c4.5-13.6-8.4-26.5-21.9-21.9l-100.4 33.5-47.4-94.8c-6.4-12.8-24.6-12.8-31 0l-47.3 94.7L92.7 70.8c-13.6-4.5-26.5 8.4-21.9 21.9l33.5 100.4-94.7 47.4c-12.8 6.4-12.8 24.6 0 31l94.7 47.3-33.5 100.5c-4.5 13.6 8.4 26.5 21.9 21.9l100.4-33.5 47.3 94.7c6.4 12.8 24.6 12.8 31 0l47.3-94.7 100.4 33.5c13.6 4.5 26.5-8.4 21.9-21.9l-33.5-100.4 94.7-47.3c13-6.5 13-24.7.2-31.1zm-155.9 106c-49.9 49.9-131.1 49.9-181 0-49.9-49.9-49.9-131.1 0-181 49.9-49.9 131.1-49.9 181 0 49.9 49.9 49.9 131.1 0 181z"},child:[]}]})(t)}function B2(t){return un({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M139.61 35.5a12 12 0 0 0-17 0L58.93 98.81l-22.7-22.12a12 12 0 0 0-17 0L3.53 92.41a12 12 0 0 0 0 17l47.59 47.4a12.78 12.78 0 0 0 17.61 0l15.59-15.62L156.52 69a12.09 12.09 0 0 0 .09-17zm0 159.19a12 12 0 0 0-17 0l-63.68 63.72-22.7-22.1a12 12 0 0 0-17 0L3.53 252a12 12 0 0 0 0 17L51 316.5a12.77 12.77 0 0 0 17.6 0l15.7-15.69 72.2-72.22a12 12 0 0 0 .09-16.9zM64 368c-26.49 0-48.59 21.5-48.59 48S37.53 464 64 464a48 48 0 0 0 0-96zm432 16H208a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h288a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zm0-320H208a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h288a16 16 0 0 0 16-16V80a16 16 0 0 0-16-16zm0 160H208a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h288a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16z"},child:[]}]})(t)}function Sl(t){return un({attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"},child:[]}]})(t)}function nE(t){return un({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z"},child:[]}]})(t)}function e_(t){return un({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M212.333 224.333H12c-6.627 0-12-5.373-12-12V12C0 5.373 5.373 0 12 0h48c6.627 0 12 5.373 12 12v78.112C117.773 39.279 184.26 7.47 258.175 8.007c136.906.994 246.448 111.623 246.157 248.532C504.041 393.258 393.12 504 256.333 504c-64.089 0-122.496-24.313-166.51-64.215-5.099-4.622-5.334-12.554-.467-17.42l33.967-33.967c4.474-4.474 11.662-4.717 16.401-.525C170.76 415.336 211.58 432 256.333 432c97.268 0 176-78.716 176-176 0-97.267-78.716-176-176-176-58.496 0-110.28 28.476-142.274 72.333h98.274c6.627 0 12 5.373 12 12v48c0 6.627-5.373 12-12 12z"},child:[]}]})(t)}function rE(t){return un({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M624 208h-64v-64c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v64h-64c-8.8 0-16 7.2-16 16v32c0 8.8 7.2 16 16 16h64v64c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16v-64h64c8.8 0 16-7.2 16-16v-32c0-8.8-7.2-16-16-16zm-400 48c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"},child:[]}]})(t)}function sE(t){return un({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"},child:[]}]})(t)}function xf(t){return un({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M96 224c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm448 0c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm32 32h-64c-17.6 0-33.5 7.1-45.1 18.6 40.3 22.1 68.9 62 75.1 109.4h66c17.7 0 32-14.3 32-32v-32c0-35.3-28.7-64-64-64zm-256 0c61.9 0 112-50.1 112-112S381.9 32 320 32 208 82.1 208 144s50.1 112 112 112zm76.8 32h-8.3c-20.8 10-43.9 16-68.5 16s-47.6-6-68.5-16h-8.3C179.6 288 128 339.6 128 403.2V432c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48v-28.8c0-63.6-51.6-115.2-115.2-115.2zm-223.7-13.4C161.5 263.1 145.6 256 128 256H64c-35.3 0-64 28.7-64 64v32c0 17.7 14.3 32 32 32h65.9c6.3-47.4 34.9-87.3 75.2-109.4z"},child:[]}]})(t)}const pn=({userType:t,isDarkMode:e,toggleDarkMode:n})=>{const r=Zu(),[s,i]=se.useState(!1),a=c=>r.pathname===c,l=[{path:t==="admin"?"/admin-home":"/home",label:"Home",icon:u.jsx(vF,{})},{path:"/profile",label:"Profile",icon:u.jsx(sE,{})}];return t==="user"&&l.push({path:"/task-history",label:"Task History",icon:u.jsx(yF,{})},{path:"/user-reject-details",label:"My Rejections",icon:u.jsx(Sl,{})}),t==="admin"&&l.push({path:"/manage-users",label:"Manage Users",icon:u.jsx(rE,{})},{path:"/assign-work",label:"Assign Work",icon:u.jsx(B2,{})},{path:"/work-list",label:"Work List",icon:u.jsx(xF,{})},{path:"/inventory",label:"Inventory",icon:u.jsx(Dc,{})},{path:"/notifications",label:"Notifications",icon:u.jsx(d5,{})}),u.jsx("header",{className:"bg-blue-600 text-white shadow-lg relative",children:u.jsxs("nav",{className:"container mx-auto px-4 py-4",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("h1",{className:"text-lg sm:text-xl md:text-2xl font-bold",children:"Videography Manager"}),u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx("ul",{className:"hidden lg:flex space-x-6",children:l.map(c=>u.jsx("li",{children:u.jsxs(vw,{to:c.path,className:`flex items-center gap-2 hover:text-blue-200 transition ${a(c.path)?"font-bold border-b-2 border-white pb-1":""}`,children:[c.icon,u.jsx("span",{children:c.label})]})},c.path))}),u.jsx("button",{onClick:()=>i(!s),className:"lg:hidden text-2xl focus:outline-none ml-2","aria-label":"Toggle menu",children:s?u.jsx(Sl,{}):u.jsx(hF,{})})]})]}),u.jsx("button",{onClick:n,className:`p-2 rounded-full transition-all duration-300 shadow absolute right-14 top-3 z-50 lg:hidden ${e?"bg-gray-700 hover:bg-gray-600 text-yellow-300 shadow-lg":"bg-blue-200 hover:bg-blue-300 text-blue-600 shadow-lg"}`,"aria-label":"Toggle dark mode (mobile)",children:e?u.jsx(Gh,{size:18}):u.jsx(Wh,{size:18})}),u.jsx("button",{onClick:n,className:`p-3 rounded-full transition-all duration-300 shadow absolute right-8 top-1/2 -translate-y-1/2 hidden lg:block z-20 ${e?"bg-gray-700 hover:bg-gray-600 text-yellow-300 shadow-lg":"bg-blue-200 hover:bg-blue-300 text-blue-600 shadow-lg"}`,"aria-label":"Toggle dark mode (desktop)",children:e?u.jsx(Gh,{size:10}):u.jsx(Wh,{size:10})}),u.jsx("div",{className:`lg:hidden transition-all duration-300 ease-in-out overflow-hidden ${s?"max-h-96 opacity-100 scale-100 mt-4":"max-h-0 opacity-0 scale-95 mt-0"}`,children:u.jsx("ul",{className:"space-y-2 pb-2 bg-blue-700/50 backdrop-blur-sm rounded-lg",children:l.map(c=>u.jsx("li",{children:u.jsxs(vw,{to:c.path,onClick:()=>i(!1),className:`flex items-center gap-3 p-3 rounded hover:bg-blue-800 transition ${a(c.path)?"bg-blue-800 font-bold":""}`,children:[u.jsx("span",{className:"text-xl",children:c.icon}),u.jsx("span",{children:c.label})]})},c.path))})})]})})},bF=()=>{const t=qr(),[e,n]=se.useState(null);se.useEffect(()=>{(async()=>{try{const a=await An(At(ze,"notifications"));console.log("Notifications count:",a.size),a.forEach(o=>console.log("Notif doc:",o.id,o.data()))}catch(a){console.error("Test read of notifications failed:",a)}})()},[]),se.useEffect(()=>{console.log("Admin notification listener mounted");const i=xc(At(ze,"notifications"),qh("read","==",!1),Gv("createdAt","desc")),a=Pm(i,o=>{console.log("Notification snapshot size:",o.size),o.docChanges().forEach(l=>{if(console.log("Notif change:",l.type,l.doc.id),l.type==="added"){const c=l.doc.data();n({id:l.doc.id,...c})}})},o=>{console.error("Notification listener error:",o)});return()=>{console.log("Admin notification listener unsubscribed"),a()}},[]);const r=async()=>{if(!e)return;try{await Br($t(ze,"notifications",e.id),{read:!0})}catch(a){console.error("Failed to mark notification read",a)}const i=e.id;n(null),t(`/admin/notifications/${i}`)},s=()=>{if(!e)return"";const i=e.userName||"A user";return e.type==="accept"?`${i} accepted a work.`:e.type==="reject"?`${i} rejected a work.`:e.type==="done"?`${i} marked their work as done.`:e.type==="undo-done"?`${i} undid a done task.`:"New activity on a work."};return u.jsxs("div",{className:"min-h-screen bg-gray-100",children:[u.jsx(pn,{userType:"admin"}),e&&u.jsxs("button",{onClick:r,className:"fixed bottom-4 right-4 z-50 max-w-xs text-left bg-white shadow-xl rounded-xl border border-gray-200 px-4 py-3 text-sm hover:bg-gray-50",children:[u.jsx("p",{className:"font-semibold text-gray-800 mb-1",children:s()}),u.jsx("p",{className:"text-gray-500 text-xs",children:"Click to view details"})]}),u.jsx("main",{className:"container mx-auto px-4 py-6 sm:py-8",children:u.jsxs("div",{className:"max-w-4xl mx-auto",children:[u.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-gray-800 mb-6 sm:mb-8",children:"Admin Dashboard"}),u.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-6",children:[u.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 hover:shadow-xl transition",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[u.jsx(B2,{className:"text-3xl sm:text-4xl text-blue-600"}),u.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-blue-600",children:"Work List"})]}),u.jsx("p",{className:"text-gray-600 mb-4 text-sm sm:text-base",children:"View all works, see user acceptance and progress, and manage task status."}),u.jsx("button",{onClick:()=>t("/work-list"),className:"w-full bg-blue-600 text-white py-2 sm:py-3 px-4 rounded hover:bg-blue-700 transition font-medium",children:"Go to Work List"})]}),u.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 hover:shadow-xl transition",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[u.jsx(rE,{className:"text-3xl sm:text-4xl text-green-600"}),u.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-green-600",children:"Work Assignment"})]}),u.jsx("p",{className:"text-gray-600 mb-4 text-sm sm:text-base",children:"Create new work projects and assign team members to tasks."}),u.jsx("button",{onClick:()=>t("/assign-work"),className:"w-full bg-green-600 text-white py-2 sm:py-3 px-4 rounded hover:bg-green-700 transition font-medium",children:"Go to Work Assignment"})]}),u.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 hover:shadow-xl transition",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[u.jsx(qn,{className:"text-3xl sm:text-4xl text-purple-600"}),u.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-purple-600",children:"Schedule Posting"})]}),u.jsx("p",{className:"text-gray-600 mb-4 text-sm sm:text-base",children:"Set posting dates, mark videos as posted, and view the posting queue."}),u.jsx("button",{onClick:()=>t("/posting-dates"),className:"w-full bg-purple-600 text-white py-2 sm:py-3 px-4 rounded hover:bg-purple-700 transition font-medium",children:"Go to Schedule Posting"})]}),u.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 hover:shadow-xl transition",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[u.jsx(B2,{className:"text-3xl sm:text-4xl text-orange-500"}),u.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-orange-500",children:"Send Notifications"})]}),u.jsx("p",{className:"text-gray-600 mb-4 text-sm sm:text-base",children:"Send announcements or messages to all members or selected users."}),u.jsx("button",{onClick:()=>t("/admin/notifications"),className:"w-full bg-orange-500 text-white py-2 sm:py-3 px-4 rounded hover:bg-orange-600 transition font-medium",children:"Go to Send Notifications"})]})]})]})})]})},iE=se.createContext(),_F=({children:t})=>{const[e,n]=se.useState(()=>{const s=localStorage.getItem("darkMode");return s!==null?JSON.parse(s):window.matchMedia("(prefers-color-scheme: dark)").matches});se.useEffect(()=>{localStorage.setItem("darkMode",JSON.stringify(e)),e?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[e]);const r=()=>{n(s=>!s)};return u.jsx(iE.Provider,{value:{isDarkMode:e,toggleDarkMode:r},children:t})},Pg=()=>{const t=se.useContext(iE);if(!t)throw new Error("useDarkMode must be used within DarkModeProvider");return t},NF=()=>{const[t,e]=se.useState(null),[n,r]=se.useState([]),[s,i]=se.useState({}),[a,o]=se.useState({}),[l,c]=se.useState(!0),[d,g]=se.useState(!1),[y,p]=se.useState(""),[N,S]=se.useState(!1),[I,w]=se.useState(""),[T,j]=se.useState(null),[D,H]=se.useState(!0),[J,O]=se.useState(null),_="user",{isDarkMode:A,toggleDarkMode:R}=Pg();se.useEffect(()=>{const ee=jc(qs,fe=>{e(fe||null),c(!1)});return()=>ee()},[]),se.useEffect(()=>{if(!t)return;(async()=>{g(!0);try{const Se=(await An(At(ze,"works"))).docs.map(V=>({id:V.id,...V.data()})).filter(V=>Array.isArray(V.assignedUsers)&&V.assignedUsers.includes(t.uid));Se.sort((V,De)=>{const Ze=V.date?new Date(V.date).getTime():0;return(De.date?new Date(De.date).getTime():0)-Ze}),r(Se);const ke=await An(At(ze,"inventory")),Ue={};ke.docs.forEach(V=>{Ue[V.id]=V.data()}),i(Ue)}catch(fe){console.error("Error loading user tasks:",fe)}finally{g(!1)}})()},[t]),se.useEffect(()=>{(async()=>{try{const fe=await An(At(ze,"users")),ve={};fe.docs.forEach(Se=>{ve[Se.id]=Se.data()}),o(ve)}catch(fe){console.error("Error loading users:",fe)}})()},[]);const E=ee=>{p(ee),setTimeout(()=>p(""),4e3)};se.useEffect(()=>{if(!t)return;const ee=xc(At(ze,"users",t.uid,"notifications"),qh("read","==",!1)),fe=Pm(ee,ve=>{ve.docChanges().forEach(Se=>{if(Se.type==="added"){const ke=Se.doc.data(),Ue={id:Se.doc.id,...ke};O(Ue),setTimeout(async()=>{try{await Br($t(ze,"users",t.uid,"notifications",Ue.id),{read:!0})}catch(V){console.error("Failed to mark user notification read",V)}O(V=>V&&V.id===Ue.id?null:V)},5e3)}})});return()=>fe()},[t]),se.useEffect(()=>{if(!t)return;const ee=xc(At(ze,"users",t.uid,"notifications"),qh("read","==",!1)),fe=Pm(ee,ve=>{ve.docChanges().forEach(Se=>{if(Se.type==="added"){const ke=Se.doc.data();O({id:Se.doc.id,...ke})}})});return()=>fe()},[t]);const C=ee=>ee.status||"incomplete",L=ee=>(ee.userAcceptance||{})[t==null?void 0:t.uid]||"pending",z=async ee=>{try{const fe=ee.userAcceptance||{};fe[t.uid]="accepted";const ve=$t(ze,"works",ee.id);await Br(ve,{userAcceptance:fe}),r(Se=>Se.map(ke=>ke.id===ee.id?{...ke,userAcceptance:fe}:ke)),E("Work accepted successfully!"),await Jr(At(ze,"notifications"),{type:"accept",workId:ee.id,userId:t.uid,userName:t.displayName||"",createdAt:wa(),read:!1}),await Jr(At(ze,"users",t.uid,"notifications"),{type:"accept",workId:ee.id,title:ee.title||"Work accepted",message:"You accepted this work.",createdAt:wa(),read:!1})}catch(fe){console.error("Failed to accept:",fe)}},Z=ee=>{j(ee),w(""),S(!0)},ae=async()=>{if(!I.trim()){E("Please provide a reason for rejection.");return}try{const ee=T.userAcceptance||{};ee[t.uid]="rejected";const fe=T.rejections||{};fe[t.uid]={reason:I.trim(),timestamp:new Date().toISOString(),approved:!1};const ve=$t(ze,"works",T.id);await Br(ve,{userAcceptance:ee,rejections:fe}),r(Se=>Se.map(ke=>ke.id===T.id?{...ke,userAcceptance:ee,rejections:fe}:ke)),E("Work rejected."),S(!1),j(null),await Jr(At(ze,"notifications"),{type:"reject",workId:T.id,userId:t.uid,userName:t.displayName||"",createdAt:wa(),read:!1}),await Jr(At(ze,"users",t.uid,"notifications"),{type:"reject",workId:T.id,title:T.title||"Work rejected",message:"You rejected this work.",createdAt:wa(),read:!1})}catch(ee){console.error("Failed to reject:",ee)}},ue=ee=>{if(!t)return[];const ve=(ee.assignedUserDetails||[]).find(Se=>Se.userId===t.uid);return(ve==null?void 0:ve.roles)||[]},Q=(ee,fe)=>{const ve=`${t.uid}_${fe}`;return(ee.roleCompletion||{})[ve]==="done"},ce=ee=>{const fe=ue(ee);return fe.length?fe.every(ve=>Q(ee,ve)):!1},me=async(ee,fe)=>{if(C(ee)==="complete")return;const ve=`${t.uid}_${fe}`,Se=ee.roleCompletion||{},ke=Se[ve]==="done",Ue={...Se};ke?delete Ue[ve]:Ue[ve]="done";const V=ue(ee),De=V.length>0&&V.every(Ve=>Ue[`${t.uid}_${Ve}`]==="done"),Ze=V.length>0&&V.every(Ve=>(ee.roleCompletion||{})[`${t.uid}_${Ve}`]==="done");try{De&&!Ze?(await Jr(At(ze,"notifications"),{type:"done",workId:ee.id,userId:t.uid,userName:t.displayName||"",createdAt:wa(),read:!1}),await Jr(At(ze,"users",t.uid,"notifications"),{type:"done",workId:ee.id,title:ee.title||"Work done",message:"All your roles for this work are marked done.",createdAt:wa(),read:!1})):!De&&Ze&&(await Jr(At(ze,"notifications"),{type:"undo-done",workId:ee.id,userId:t.uid,userName:t.displayName||"",createdAt:wa(),read:!1}),await Jr(At(ze,"users",t.uid,"notifications"),{type:"undo-done",workId:ee.id,title:ee.title||"Work status changed",message:"You undid a previously completed work status.",createdAt:wa(),read:!1}));const Ve=$t(ze,"works",ee.id);await Br(Ve,{roleCompletion:Ue}),r(Ce=>Ce.map(Xe=>Xe.id===ee.id?{...Xe,roleCompletion:Ue}:Xe))}catch(Ve){console.error("Failed to update role status:",Ve)}},ye=ee=>{const fe=ee.assignedItems||[];return fe.length?u.jsxs("div",{className:"mt-3",children:[u.jsx("p",{className:"text-xs sm:text-sm font-semibold text-gray-700 mb-1",children:"Assigned items:"}),u.jsx("div",{className:"flex flex-wrap gap-2",children:fe.map(ve=>{const Se=s[ve];return Se?u.jsxs("span",{className:"px-2 py-1 rounded-full bg-blue-50 text-xs sm:text-sm text-blue-800 border border-blue-100",children:[Se.itemName||"Item",Se.itemNo?` (${Se.itemNo})`:""]},ve):u.jsx("span",{className:"px-2 py-1 rounded-full bg-gray-100 text-xs text-gray-500",children:"Unknown item"},ve)})})]}):null},M=ee=>{const ve=(ee.assignedUsers||[]).filter(Se=>Se!==(t==null?void 0:t.uid));return ve.length===0?u.jsx("div",{className:"mt-3",children:u.jsx("p",{className:"text-xs text-gray-500 italic",children:"You are working on this alone"})}):u.jsxs("div",{className:"mt-3",children:[u.jsx("p",{className:"text-xs sm:text-sm font-semibold text-gray-700 mb-2",children:"Working with:"}),u.jsx("div",{className:"flex flex-wrap gap-2",children:ve.map(Se=>{const ke=a[Se];if(!ke)return u.jsxs("span",{className:"inline-flex items-center gap-2 px-3 py-1.5 rounded-full bg-gray-100 text-xs text-gray-500",children:[u.jsx("div",{className:"w-6 h-6 rounded-full bg-gray-300 flex items-center justify-center text-xs font-bold text-white",children:"?"}),"Unknown User"]},Se);const Ue=ke.photoURL||ke.avatarUrl||null;return u.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1.5 rounded-full bg-gradient-to-r from-blue-50 to-purple-50 border border-blue-100",children:[Ue?u.jsx("img",{src:Ue,alt:ke.name||"User",className:"w-7 h-7 rounded-full object-cover border border-white shadow-sm"}):u.jsx("div",{className:"w-7 h-7 rounded-full bg-gradient-to-r from-blue-500 to-purple-600 flex items-center justify-center text-xs font-bold text-white",children:(ke.name||"U").charAt(0).toUpperCase()}),u.jsx("div",{className:"flex flex-col",children:u.jsx("span",{className:"text-xs sm:text-sm font-semibold text-gray-800",children:ke.name||"User"})})]},Se)})})]})},W=n.filter(ee=>C(ee)!=="complete"),X=W.filter(ee=>L(ee)==="pending"),Y=W.filter(ee=>L(ee)==="rejected"),ie=W.filter(ee=>L(ee)==="accepted"&&!ce(ee)),le=W.filter(ee=>L(ee)==="accepted"&&ce(ee)),xe=()=>J?J.title?J.title:J.type==="accept"?"You accepted a work.":J.type==="reject"?"You rejected a work.":J.type==="done"?"All your roles for a work are done.":J.type==="undo-done"?"You changed a previously completed work.":"New notification.":"";return u.jsxs("div",{className:`min-h-screen transition-colors duration-300 ${A?"bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900":"bg-gradient-to-br from-blue-50 via-white to-purple-50"}`,children:[u.jsx(pn,{userType:_,isDarkMode:A,toggleDarkMode:R}),J&&u.jsxs("div",{className:"fixed bottom-4 right-4 z-50 max-w-xs text-left bg-white dark:bg-slate-900 shadow-xl rounded-xl border border-gray-200 dark:border-slate-700 px-4 py-3 text-sm",children:[u.jsx("p",{className:"font-semibold text-gray-800 dark:text-gray-100 mb-1",children:xe()}),J.message&&u.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-xs mb-1",children:J.message}),u.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-xs",children:"Notification"})]}),y&&u.jsx("div",{className:"fixed top-20 right-4 z-40 bg-gradient-to-r from-blue-600 to-purple-600 text-white text-sm px-5 py-3 rounded-lg shadow-2xl animate-slide-in",children:y}),N&&u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:u.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full p-6",children:[u.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-4",children:"Reject Work"}),u.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Please provide a reason for rejecting this work:"}),u.jsx("textarea",{value:I,onChange:ee=>w(ee.target.value),rows:"4",className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-red-500 text-sm",placeholder:"Enter your reason..."}),u.jsxs("div",{className:"flex gap-3 mt-4",children:[u.jsx("button",{onClick:ae,className:"flex-1 bg-gradient-to-r from-red-500 to-rose-600 text-white py-2.5 px-4 rounded-xl font-semibold hover:from-red-600 hover:to-rose-700 transition-all",children:"Submit Rejection"}),u.jsx("button",{onClick:()=>{S(!1),j(null)},className:"flex-1 bg-gray-200 text-gray-800 py-2.5 px-4 rounded-xl font-semibold hover:bg-gray-300 transition-all",children:"Cancel"})]})]})}),u.jsxs("main",{className:"container mx-auto px-4 py-8 max-w-5xl",children:[u.jsxs("div",{className:"mb-8",children:[u.jsx("h1",{className:"text-3xl sm:text-4xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-purple-600 dark:from-yellow-300 dark:to-pink-400 mb-2",children:"Welcome Back"}),u.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm sm:text-base",children:"Manage your tasks efficiently. Accept new assignments and track your progress."})]}),l||d?u.jsxs("div",{className:"flex flex-col items-center justify-center py-20",children:[u.jsx(Fi,{className:"animate-spin text-5xl text-blue-600 dark:text-yellow-300 mb-4"}),u.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Loading your tasks..."})]}):W.length===0?u.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl shadow-lg p-12 text-center border border-gray-100 dark:border-slate-700",children:[u.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-blue-100 to-purple-100 dark:from-yellow-300 dark:to-pink-400 rounded-full flex items-center justify-center mx-auto mb-4",children:u.jsx(U2,{className:"text-4xl text-blue-600 dark:text-yellow-400"})}),u.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-gray-100 mb-2",children:"All Clear!"}),u.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"You have no active tasks at the moment."})]}):u.jsxs(u.Fragment,{children:[X.length>0&&u.jsxs("section",{className:"mb-8",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[u.jsx("div",{className:"w-1 h-6 bg-gradient-to-b from-yellow-400 to-orange-500 rounded-full"}),u.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-gray-800 dark:text-gray-100",children:"Pending Acceptance"}),u.jsx("span",{className:"bg-gradient-to-r from-yellow-400 to-orange-500 text-white text-xs font-bold px-3 py-1 rounded-full",children:X.length})]}),u.jsx("div",{className:"space-y-4",children:X.map(ee=>u.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl shadow-md hover:shadow-xl transition-all p-5 sm:p-6 border border-yellow-100 dark:border-blue-800",children:[u.jsxs("div",{className:"flex items-start justify-between mb-3",children:[u.jsxs("div",{className:"flex-1",children:[u.jsx("h3",{className:"text-lg sm:text-xl font-bold text-gray-800 dark:text-gray-100 mb-1",children:ee.title||"Task"}),(ee.date||ee.deadline)&&u.jsxs("div",{className:"flex flex-col gap-1 text-xs sm:text-sm text-gray-500 dark:text-gray-300",children:[ee.date&&u.jsxs("p",{className:"flex items-center gap-2",children:[u.jsx(qn,{className:"dark:text-yellow-300"}),u.jsxs("span",{children:["Date: ",new Date(ee.date).toLocaleDateString()]})]}),ee.deadline&&u.jsxs("p",{className:"flex items-center gap-2",children:[u.jsx(qn,{className:"dark:text-yellow-300"}),u.jsxs("span",{children:["Deadline: ",new Date(ee.deadline).toLocaleDateString()]})]})]})]}),u.jsxs("span",{className:"bg-yellow-100 dark:bg-yellow-800 text-yellow-800 dark:text-yellow-200 text-xs font-semibold px-3 py-1.5 rounded-full flex items-center gap-1 border border-yellow-200 dark:border-yellow-700",children:[u.jsx(V2,{className:"dark:text-yellow-200"}),"Pending"]})]}),ee.description&&u.jsx("p",{className:"text-gray-700 dark:text-gray-200 text-sm mb-2",children:ee.description}),ye(ee),M(ee),u.jsxs("div",{className:"flex gap-3 mt-4",children:[u.jsxs("button",{onClick:()=>z(ee),className:"flex-1 bg-gradient-to-r from-green-500 to-emerald-600 dark:from-green-700 dark:to-emerald-900 text-white py-2.5 px-4 rounded-xl font-semibold hover:from-green-600 hover:to-emerald-700 dark:hover:from-green-800 dark:hover:to-emerald-800 transition-all shadow-md flex items-center justify-center gap-2",children:[u.jsx(lo,{}),"Accept"]}),u.jsxs("button",{onClick:()=>Z(ee),className:"flex-1 bg-gradient-to-r from-red-500 to-rose-600 dark:from-red-700 dark:to-rose-900 text-white py-2.5 px-4 rounded-xl font-semibold hover:from-red-600 hover:to-rose-700 dark:hover:from-red-800 dark:hover:to-rose-800 transition-all shadow-md flex items-center justify-center gap-2",children:[u.jsx(Sl,{}),"Reject"]})]})]},ee.id))})]}),Y.length>0&&u.jsxs("section",{className:"mb-8",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-1 h-6 bg-gradient-to-b from-orange-500 to-red-500 rounded-full"}),u.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-gray-800 dark:text-gray-100",children:"Pending Rejection Approval"}),u.jsx("span",{className:"bg-gradient-to-r from-orange-500 to-red-500 text-white text-xs font-bold px-3 py-1 rounded-full",children:Y.length})]}),u.jsx("button",{onClick:()=>H(ee=>!ee),className:"text-sm font-semibold text-gray-600 hover:text-gray-800 transition px-3 py-1.5 rounded-lg hover:bg-gray-100",children:D?"Hide":"Show"})]}),D&&u.jsx("div",{className:"space-y-4",children:Y.map(ee=>{const fe=(ee.rejections||{})[t.uid]||{};return u.jsxs("div",{className:"bg-white rounded-2xl shadow-md p-5 sm:p-6 border border-orange-100",children:[u.jsxs("div",{className:"flex items-start justify-between mb-3",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"text-lg sm:text-xl font-bold text-gray-800 dark:text-gray-100 mb-1",children:ee.title||"Task"}),(ee.date||ee.deadline)&&u.jsxs("div",{className:"flex flex-col gap-1 text-xs sm:text-sm text-gray-500",children:[ee.date&&u.jsxs("p",{className:"flex items-center gap-2",children:[u.jsx(qn,{}),u.jsxs("span",{children:["Date: ",new Date(ee.date).toLocaleDateString()]})]}),ee.deadline&&u.jsxs("p",{className:"flex items-center gap-2",children:[u.jsx(qn,{}),u.jsxs("span",{children:["Deadline: ",new Date(ee.deadline).toLocaleDateString()]})]})]})]}),u.jsxs("span",{className:"bg-orange-100 text-orange-800 text-xs font-semibold px-3 py-1.5 rounded-full flex items-center gap-1",children:[u.jsx(V2,{}),"Pending Approval"]})]}),ye(ee),M(ee),u.jsxs("div",{className:"bg-orange-50 rounded-xl p-4 mt-3",children:[u.jsx("p",{className:"text-xs font-semibold text-orange-800 mb-1",children:"Your Rejection Reason:"}),u.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:fe.reason||"-"}),u.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:"Waiting for admin to approve your rejection request"})]})]},ee.id)})})]}),ie.length>0&&u.jsxs("section",{className:"mb-8",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[u.jsx("div",{className:"w-1 h-6 bg-gradient-to-b from-blue-500 to-purple-600 rounded-full"}),u.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-gray-800 dark:text-gray-100",children:"Active Tasks"}),u.jsx("span",{className:"bg-gradient-to-r from-blue-500 to-purple-600 text-white text-xs font-bold px-3 py-1 rounded-full",children:ie.length})]}),u.jsx("div",{className:"space-y-4",children:ie.map(ee=>{const fe=ue(ee);return u.jsxs("div",{className:"bg-white rounded-2xl shadow-md hover:shadow-xl transition-all p-5 sm:p-6 border border-blue-100",children:[u.jsx("h3",{className:"text-lg sm:text-xl font-bold text-gray-800 dark:text-gray-100 mb-1",children:ee.title||"Task"}),(ee.date||ee.deadline)&&u.jsxs("div",{className:"flex flex-col gap-1 text-xs sm:text-sm text-gray-500 mb-3",children:[ee.date&&u.jsxs("p",{className:"flex items-center gap-2",children:[u.jsx(qn,{}),u.jsxs("span",{children:["Date: ",new Date(ee.date).toLocaleDateString()]})]}),ee.deadline&&u.jsxs("p",{className:"flex items-center gap-2",children:[u.jsx(qn,{}),u.jsxs("span",{children:["Deadline: ",new Date(ee.deadline).toLocaleDateString()]})]})]}),ee.description&&u.jsx("p",{className:"text-gray-700 dark:text-gray-300 text-sm mb-2",children:ee.description}),ye(ee),M(ee),u.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 dark:from-slate-800 dark:to-slate-900 rounded-xl p-4 mt-3",children:[u.jsx("p",{className:"text-sm font-semibold text-gray-700 dark:text-gray-100 mb-3",children:"Your Work Types:"}),u.jsx("div",{className:"flex flex-wrap gap-2",children:fe.map(ve=>{const Se=Q(ee,ve);return u.jsx("button",{type:"button",onClick:()=>me(ee,ve),className:`inline-flex items-center gap-2 px-4 py-2 rounded-xl text-sm font-semibold transition-all shadow-sm ${Se?"bg-gradient-to-r from-green-500 to-emerald-600 text-white hover:from-green-600 hover:to-emerald-700":"bg-white dark:bg-slate-900 text-gray-700 dark:text-gray-100 border-2 border-gray-200 dark:border-slate-700 hover:border-blue-400 dark:hover:border-blue-400"}`,children:Se?u.jsxs(u.Fragment,{children:[u.jsx(e_,{}),"Undo ",ve]}):u.jsxs(u.Fragment,{children:[u.jsx(lo,{}),"Mark ",ve," as done"]})},ve)})})]})]},ee.id)})})]}),le.length>0&&u.jsxs("section",{children:[u.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[u.jsx("div",{className:"w-1 h-6 bg-gradient-to-b from-green-500 to-emerald-600 rounded-full"}),u.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-gray-800 dark:text-gray-100",children:"Completed"}),u.jsx("span",{className:"bg-gradient-to-r from-green-500 to-emerald-600 text-white text-xs font-bold px-3 py-1 rounded-full",children:le.length})]}),u.jsx("div",{className:"space-y-4",children:le.map(ee=>{const fe=ue(ee);return u.jsxs("div",{className:"bg-white rounded-2xl shadow-md p-5 sm:p-6 border border-green-100",children:[u.jsxs("div",{className:"flex items-start justify-between mb-3",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"text-lg sm:text-xl font-bold text-gray-800 dark:text-gray-100 mb-1",children:ee.title||"Task"}),(ee.date||ee.deadline)&&u.jsxs("div",{className:"flex flex-col gap-1 text-xs sm:text-sm text-gray-500",children:[ee.date&&u.jsxs("p",{className:"flex items-center gap-2",children:[u.jsx(qn,{}),u.jsxs("span",{children:["Date: ",new Date(ee.date).toLocaleDateString()]})]}),ee.deadline&&u.jsxs("p",{className:"flex items-center gap-2",children:[u.jsx(qn,{}),u.jsxs("span",{children:["Deadline: ",new Date(ee.deadline).toLocaleDateString()]})]})]})]}),u.jsx(U2,{className:"text-3xl text-green-500"})]}),ee.description&&u.jsx("p",{className:"text-gray-700 dark:text-gray-300 text-sm mb-2",children:ee.description}),ye(ee),M(ee),u.jsx("div",{className:"flex flex-wrap gap-2 mb-3 mt-3",children:fe.map(ve=>u.jsxs("button",{onClick:()=>me(ee,ve),className:"inline-flex items-center gap-1 px-3 py-1.5 rounded-full text-xs font-semibold bg-green-100 text-green-800 hover:bg-green-200 transition",children:[u.jsx(e_,{className:"text-xs"}),"Undo ",ve]},ve))}),u.jsx("p",{className:"text-sm text-green-700 font-semibold bg-green-50 px-4 py-2 rounded-lg",children:" All work completed. Waiting for admin review."})]},ee.id)})})]})]})]})]})},SF=()=>{const t=qr(),{isDarkMode:e,toggleDarkMode:n}=Pg();return u.jsxs("div",{className:`min-h-screen transition-colors duration-300 flex items-center justify-center px-4 py-8 overflow-hidden ${e?"bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900":"bg-gradient-to-br from-blue-50 via-cyan-50 to-blue-100"}`,children:[u.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[e?u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"absolute top-20 left-10 w-72 h-72 bg-blue-500 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob"}),u.jsx("div",{className:"absolute top-40 right-10 w-72 h-72 bg-cyan-500 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob",style:{animationDelay:"2s"}}),u.jsx("div",{className:"absolute bottom-20 left-20 w-72 h-72 bg-blue-400 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob",style:{animationDelay:"4s"}})]}):u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"absolute top-20 left-10 w-72 h-72 bg-blue-300 rounded-full mix-blend-multiply filter blur-3xl opacity-30 animate-blob"}),u.jsx("div",{className:"absolute top-40 right-10 w-72 h-72 bg-cyan-300 rounded-full mix-blend-multiply filter blur-3xl opacity-30 animate-blob",style:{animationDelay:"2s"}}),u.jsx("div",{className:"absolute bottom-20 left-20 w-72 h-72 bg-blue-200 rounded-full mix-blend-multiply filter blur-3xl opacity-30 animate-blob",style:{animationDelay:"4s"}})]}),u.jsx("div",{className:`absolute top-1/4 left-1/4 w-1 h-1 rounded-full animate-float opacity-50 ${e?"bg-blue-300":"bg-blue-400"}`}),u.jsx("div",{className:`absolute top-1/3 right-1/4 w-1 h-1 rounded-full animate-float opacity-60 ${e?"bg-cyan-300":"bg-cyan-400"}`,style:{animationDelay:"1s"}}),u.jsx("div",{className:`absolute bottom-1/3 left-1/3 w-1 h-1 rounded-full animate-float opacity-40 ${e?"bg-blue-200":"bg-blue-300"}`,style:{animationDelay:"2s"}}),u.jsx("div",{className:`absolute top-2/3 right-1/3 w-1 h-1 rounded-full animate-float opacity-50 ${e?"bg-cyan-200":"bg-cyan-300"}`,style:{animationDelay:"1.5s"}}),u.jsx("div",{className:`absolute bottom-1/4 right-1/4 w-1 h-1 rounded-full animate-float opacity-60 ${e?"bg-blue-300":"bg-blue-400"}`,style:{animationDelay:"2.5s"}})]}),u.jsx("button",{onClick:n,className:`absolute top-8 right-8 z-20 p-3 rounded-full transition-all duration-300 ${e?"bg-gray-700 hover:bg-gray-600 text-yellow-300":"bg-blue-200 hover:bg-blue-300 text-blue-600"}`,"aria-label":"Toggle dark mode",children:e?u.jsx(Gh,{size:20}):u.jsx(Wh,{size:20})}),u.jsxs("div",{className:"relative z-10 w-full max-w-md",children:[u.jsxs("div",{className:`backdrop-blur-xl border rounded-2xl shadow-2xl p-8 sm:p-12 space-y-8 animate-fade-in transition-colors duration-300 ${e?"bg-white/10 border-white/20":"bg-white/40 border-white/60"}`,children:[u.jsxs("div",{className:"text-center space-y-3",children:[u.jsxs("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-gradient-to-r from-blue-500 to-cyan-500 mb-4 animate-pulse-glow relative",children:[u.jsx("div",{className:"absolute inset-0 rounded-full bg-gradient-to-r from-blue-500 to-cyan-500 animate-spin-slow opacity-75"}),u.jsx("span",{className:"text-white font-bold text-2xl relative z-10",children:"TMV"})]}),u.jsx("h1",{className:`text-4xl sm:text-5xl font-bold text-transparent bg-clip-text overflow-hidden whitespace-nowrap border-r-2 animate-smooth-typing ${e?"bg-gradient-to-r from-blue-200 via-cyan-200 to-blue-200 border-cyan-400":"bg-gradient-to-r from-blue-600 via-cyan-600 to-blue-600 border-cyan-600"}`,children:"Welcome"}),u.jsx("p",{className:`text-lg font-semibold animate-slide-up-delayed ${e?"text-blue-200":"text-blue-700"}`,children:"Task Management & Verification"})]}),u.jsx("div",{className:"text-center",children:u.jsx("p",{className:`leading-relaxed text-sm sm:text-base animate-slide-up-delayed-2 ${e?"text-gray-300":"text-gray-700"}`,children:"Streamline your workflow and efficiently manage all your task assignments in one unified platform."})}),u.jsxs("div",{className:"space-y-3 sm:space-y-4 animate-slide-up-delayed-3",children:[u.jsxs("button",{onClick:()=>t("/login"),className:"w-full px-6 py-3 sm:py-4 bg-gradient-to-r from-blue-500 to-cyan-500 text-white font-semibold rounded-lg hover:from-blue-600 hover:to-cyan-600 transition-all duration-300 transform hover:-translate-y-1 hover:shadow-lg hover:shadow-blue-500/50 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:ring-offset-2 focus:ring-offset-slate-900 active:translate-y-0 group relative overflow-hidden",children:[u.jsx("span",{className:"relative z-10",children:"Log In"}),u.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-600 to-cyan-600 opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]}),u.jsxs("button",{onClick:()=>t("/signup"),className:`w-full px-6 py-3 sm:py-4 font-semibold rounded-lg border transition-all duration-300 transform hover:-translate-y-1 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:ring-offset-2 focus:ring-offset-slate-900 active:translate-y-0 group relative
                ${e?"bg-white/10 backdrop-blur-md text-white border-white/30 hover:bg-white/20 hover:border-white/40 hover:shadow-lg hover:shadow-cyan-500/30":"bg-white text-blue-700 border-blue-500 hover:bg-blue-50 hover:border-blue-600 hover:text-blue-800 shadow-md"}
              `,children:[u.jsx("span",{className:"relative z-10",children:"Create Account"}),e?u.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/20 to-cyan-500/20 rounded-lg opacity-0 group-hover:opacity-100 transition-opacity duration-300"}):null]})]}),u.jsx("div",{className:`pt-6 border-t text-center animate-slide-up-delayed-4 ${e?"border-white/10 text-gray-400":"border-gray-300 text-gray-600"}`,children:u.jsx("p",{className:"text-sm",children:"Get started in seconds"})})]}),u.jsx("div",{className:`text-center mt-8 text-xs animate-fade-in ${e?"text-gray-500":"text-gray-600"}`,style:{animationDelay:"1.2s"},children:" 2025 Videography Management System"})]})]})},AF="BCDW2bDpR51kOUCYdebGFw4pHEU_h2159MHvkSEslEdrV0yI0AVUiQikAbClmXfS9EGHHQblUlKTC_To4SaQ7Hg";async function EF(t){if(!t)return;if(!("Notification"in window)){console.log("Notifications not supported");return}if(await Notification.requestPermission()!=="granted"){console.log("Notification permission not granted");return}"serviceWorker"in navigator&&await navigator.serviceWorker.register("/firebase-messaging-sw.js");const n=await JA(F2,{vapidKey:AF});if(!n){console.log("No FCM token");return}await Qv($t(ze,"users",t),{fcmTokens:g9(n)},{merge:!0}),tF(F2,r=>{var a,o;const s=(a=r.notification)==null?void 0:a.title,i=(o=r.notification)==null?void 0:o.body;s&&(async()=>{try{const c=(r.data||{}).items,d={body:i,icon:"/icon-192.png"};if(c){const y=JSON.parse(c).map(p=>p.imageUrl).filter(p=>typeof p=="string"&&p.length);if(y.length&&window.caches)try{const p=await caches.open("tmv-task-assets-v1");await Promise.all(y.map(async N=>{try{const S=await fetch(N,{mode:"no-cors"});await p.put(N,S.clone()),d.image||(d.image=N)}catch{}}))}catch(p){console.warn("caching images failed",p)}}new Notification(s,d)}catch{new Notification(s,{body:i,icon:"/icon-192.png"})}})()})}const kF=()=>{const t=qr(),{isDarkMode:e,toggleDarkMode:n}=Pg(),[r,s]=se.useState({email:"",password:""}),[i,a]=se.useState(!1),[o,l]=se.useState(""),c=g=>{s(y=>({...y,[g.target.name]:g.target.value}))},d=async g=>{g.preventDefault(),l(""),a(!0);try{const p=(await t7(qs,r.email,r.password)).user;await EF(p.uid);const N=$t(ze,"users",p.uid),S=await Li(N);let I="user";S.exists()&&(I=S.data().userType||"user"),t(I==="admin"?"/admin-home":"/home")}catch(y){l(y.message||"Failed to log in.")}finally{a(!1)}};return u.jsxs("div",{className:`min-h-screen flex items-center justify-center px-4 transition-colors duration-300 ${e?"bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900":"bg-gradient-to-br from-blue-50 via-cyan-50 to-blue-100"}`,children:[u.jsx("button",{onClick:n,className:`absolute top-8 right-8 z-20 p-3 rounded-full transition-all duration-300 ${e?"bg-gray-700 hover:bg-gray-600 text-yellow-300":"bg-blue-200 hover:bg-blue-300 text-blue-600"}`,"aria-label":"Toggle dark mode",children:e?u.jsx(Gh,{size:20}):u.jsx(Wh,{size:20})}),u.jsxs("div",{className:`w-full max-w-md rounded-lg shadow-md p-4 sm:p-6 transition-colors duration-300 ${e?"bg-slate-900 border border-slate-700 text-gray-100":"bg-white border border-gray-200 text-gray-800"}`,children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-800 dark:text-gray-100",children:"Log In"}),u.jsx("button",{onClick:()=>t("/"),className:"text-gray-600 hover:text-gray-800 dark:text-gray-300 dark:hover:text-white text-2xl p-1",title:"Go back","aria-label":"Go back",children:u.jsx(tE,{})})]}),o&&u.jsx("div",{className:"mb-4 p-3 rounded bg-red-100 text-red-700 text-sm dark:bg-red-900 dark:text-red-200",children:o}),u.jsxs("form",{onSubmit:d,className:"space-y-3 sm:space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-200 mb-1",children:"Email"}),u.jsx("input",{type:"email",name:"email",value:r.email,onChange:c,required:!0,className:"w-full px-3 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm bg-white text-gray-900 dark:bg-slate-800 dark:text-gray-100 dark:border-slate-700"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-200 mb-1",children:"Password"}),u.jsx("input",{type:"password",name:"password",value:r.password,onChange:c,required:!0,className:"w-full px-3 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm bg-white text-gray-900 dark:bg-slate-800 dark:text-gray-100 dark:border-slate-700"})]}),u.jsx("button",{type:"submit",disabled:i,className:"w-full bg-blue-600 text-white py-2 rounded font-semibold text-sm hover:bg-blue-700 disabled:opacity-50 dark:bg-blue-700 dark:hover:bg-blue-800",children:i?"Logging in...":"Log In"}),u.jsxs("p",{className:"mt-3 text-center text-xs sm:text-sm text-gray-600 dark:text-gray-300",children:["Do not have an account?"," ",u.jsx("span",{onClick:()=>t("/signup"),className:"text-blue-600 font-semibold cursor-pointer hover:underline dark:text-blue-400 dark:hover:text-blue-300",children:"Sign up"})]})]})]})]})},TF="mihirudahanayake@gmail.com",IF=["videography","photography"],CF=()=>{const t=qr(),{isDarkMode:e,toggleDarkMode:n}=Pg(),[r,s]=se.useState({name:"",email:"",phoneNo:"",departments:["videography"],firstPriority:"videography",batch:"20/21",studyDepartment:"ITT",gender:"male",registrationNumber:"",cardNumber:"",birthday:"",password:"",confirmPassword:""}),[i,a]=se.useState(!1),[o,l]=se.useState(""),[c,d]=se.useState(!1),[g,y]=se.useState(!1),p=w=>{s(T=>({...T,[w.target.name]:w.target.value}))},N=w=>{s(T=>{const D=T.departments.includes(w)?T.departments.filter(J=>J!==w):[...T.departments,w];let H=T.firstPriority;return D.includes(H)||(H=D[0]||""),{...T,departments:D,firstPriority:H}})},S=async w=>{if(w.preventDefault(),l(""),r.password!==r.confirmPassword){l("Password and confirm password do not match.");return}if(r.departments.length===0){l("Please select at least one work department.");return}if(!r.batch){l("Please select your batch.");return}if(!r.studyDepartment){l("Please select your department in study.");return}a(!0);try{const j=(await e7(qs,r.email,r.password)).user,D=j.email===TF?"admin":"user";await Qv($t(ze,"users",j.uid),{name:r.name,email:r.email,phoneNo:r.phoneNo,departments:r.departments,firstPriority:r.firstPriority,batch:r.batch,studyDepartment:r.studyDepartment,gender:r.gender,registrationNumber:r.registrationNumber,cardNumber:r.cardNumber||null,birthday:r.birthday||null,userType:D,createdAt:new Date().toISOString()}),t(D==="admin"?"/admin-home":"/home")}catch(T){l(T.message||"Failed to sign up.")}finally{a(!1)}},I=w=>r.departments.includes(w);return u.jsxs("div",{className:`min-h-screen flex items-center justify-center px-4 transition-colors duration-300 ${e?"bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900":"bg-gradient-to-br from-blue-50 via-cyan-50 to-blue-100"}`,children:[u.jsx("button",{onClick:n,className:`absolute top-8 right-8 z-20 p-3 rounded-full transition-all duration-300 ${e?"bg-gray-700 hover:bg-gray-600 text-yellow-300":"bg-blue-200 hover:bg-blue-300 text-blue-600"}`,"aria-label":"Toggle dark mode",children:e?u.jsx(Gh,{size:20}):u.jsx(Wh,{size:20})}),u.jsxs("div",{className:`w-full max-w-md rounded-lg shadow-md p-4 sm:p-6 transition-colors duration-300 my-8 sm:my-12 ${e?"bg-slate-900 border border-slate-700 text-gray-100":"bg-white border border-gray-200 text-gray-800"}`,children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-800 dark:text-gray-100",children:"Create Your Account"}),u.jsx("button",{onClick:()=>t("/"),className:"text-gray-600 hover:text-gray-800 dark:text-gray-300 dark:hover:text-white text-2xl p-1",title:"Go back","aria-label":"Go back",children:u.jsx(tE,{})})]}),u.jsx("p",{className:"mb-6 text-sm text-gray-600 dark:text-gray-300 text-center",children:"Fill in your details to get started. All fields marked * are required."}),o&&u.jsx("div",{className:"mb-4 p-3 rounded bg-red-100 text-red-700 text-sm dark:bg-red-900 dark:text-red-200",children:o}),u.jsxs("form",{onSubmit:S,className:"space-y-3 sm:space-y-4",children:[u.jsxs("div",{children:[u.jsxs("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-200 mb-1",children:["Name ",u.jsx("span",{className:"text-red-500",children:"*"})]}),u.jsx("input",{type:"text",name:"name",value:r.name,onChange:p,required:!0,placeholder:"Full name",className:"w-full px-3 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm bg-white text-gray-900 dark:bg-slate-800 dark:text-gray-100 dark:border-slate-700"})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-200 mb-1",children:["Email ",u.jsx("span",{className:"text-red-500",children:"*"})]}),u.jsx("input",{type:"email",name:"email",value:r.email,onChange:p,required:!0,placeholder:"you@email.com",className:"w-full px-3 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm bg-white text-gray-900 dark:bg-slate-800 dark:text-gray-100 dark:border-slate-700"})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-200 mb-1",children:["Phone number ",u.jsx("span",{className:"text-red-500",children:"*"})]}),u.jsx("input",{type:"tel",name:"phoneNo",value:r.phoneNo,onChange:p,required:!0,placeholder:"07XXXXXXXX",className:"w-full px-3 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm bg-white text-gray-900 dark:bg-slate-800 dark:text-gray-100 dark:border-slate-700"})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-200 mb-1",children:["Batch ",u.jsx("span",{className:"text-red-500",children:"*"})]}),u.jsxs("select",{name:"batch",value:r.batch,onChange:p,required:!0,className:"w-full px-3 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm bg-white text-gray-900 dark:bg-slate-800 dark:text-gray-100 dark:border-slate-700",children:[u.jsx("option",{value:"",children:"Select batch"}),u.jsx("option",{value:"20/21",children:"20/21"}),u.jsx("option",{value:"21/22",children:"21/22"}),u.jsx("option",{value:"22/23",children:"22/23"}),u.jsx("option",{value:"23/24",children:"23/24"})]})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-200 mb-1",children:["Department in study ",u.jsx("span",{className:"text-red-500",children:"*"})]}),u.jsxs("select",{name:"studyDepartment",value:r.studyDepartment,onChange:p,required:!0,className:"w-full px-3 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm bg-white text-gray-900 dark:bg-slate-800 dark:text-gray-100 dark:border-slate-700",children:[u.jsx("option",{value:"",children:"Select department"}),u.jsx("option",{value:"ITT",children:"ITT"}),u.jsx("option",{value:"EET",children:"EET"}),u.jsx("option",{value:"MTT",children:"MTT"}),u.jsx("option",{value:"BPT",children:"BPT"}),u.jsx("option",{value:"Food",children:"Food"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-200 mb-1",children:"Gender"}),u.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[u.jsxs("label",{className:"flex items-center gap-2",children:[u.jsx("input",{type:"radio",name:"gender",value:"male",checked:r.gender==="male",onChange:p,className:"dark:bg-slate-800 dark:border-slate-700"}),u.jsx("span",{className:"dark:text-gray-100",children:"Male"})]}),u.jsxs("label",{className:"flex items-center gap-2",children:[u.jsx("input",{type:"radio",name:"gender",value:"female",checked:r.gender==="female",onChange:p,className:"dark:bg-slate-800 dark:border-slate-700"}),u.jsx("span",{className:"dark:text-gray-100",children:"Female"})]})]})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-200 mb-1",children:["Registration number ",u.jsx("span",{className:"text-red-500",children:"*"})]}),u.jsx("input",{type:"text",name:"registrationNumber",value:r.registrationNumber,onChange:p,required:!0,placeholder:"Ex: ITT/2021/123",className:"w-full px-3 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm bg-white text-gray-900 dark:bg-slate-800 dark:text-gray-100 dark:border-slate-700"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-200 mb-1",children:"Card"}),u.jsx("input",{type:"text",name:"cardNumber",value:r.cardNumber,onChange:p,placeholder:"If you have one",className:"w-full px-3 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm bg-white text-gray-900 dark:bg-slate-800 dark:text-gray-100 dark:border-slate-700"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-200 mb-1",children:"Birthday"}),u.jsx("input",{type:"date",name:"birthday",value:r.birthday,onChange:p,placeholder:"YYYY-MM-DD",className:"w-full px-3 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm bg-white text-gray-900 dark:bg-slate-800 dark:text-gray-100 dark:border-slate-700"})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-200 mb-1",children:["Departments (work) ",u.jsx("span",{className:"text-red-500",children:"*"})]}),u.jsx("div",{className:"bg-gray-50 border rounded p-2 flex flex-col gap-1 dark:bg-slate-800 dark:border-slate-700",children:IF.map(w=>u.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[u.jsx("input",{type:"checkbox",checked:I(w),onChange:()=>N(w),className:"dark:bg-slate-800 dark:border-slate-700",required:r.departments.length===0}),u.jsx("span",{className:"capitalize dark:text-gray-100",children:w})]},w))}),u.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-300",children:"You must select at least one department."})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-200 mb-1",children:"First priority department (work)"}),u.jsx("select",{name:"firstPriority",value:r.firstPriority,onChange:p,className:"w-full px-3 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm bg-white text-gray-900 dark:bg-slate-800 dark:text-gray-100 dark:border-slate-700",children:r.departments.map(w=>u.jsx("option",{value:w,children:w},w))})]}),u.jsxs("div",{className:"relative",children:[u.jsxs("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-200 mb-1",children:["Password ",u.jsx("span",{className:"text-red-500",children:"*"})]}),u.jsx("input",{type:c?"text":"password",name:"password",value:r.password,onChange:p,required:!0,minLength:6,placeholder:"At least 6 characters",className:"w-full px-3 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm bg-white text-gray-900 dark:bg-slate-800 dark:text-gray-100 dark:border-slate-700 pr-10"}),u.jsx("button",{type:"button",tabIndex:-1,onClick:()=>d(w=>!w),className:"absolute right-2 top-8 transform -translate-y-1/2 text-gray-500 dark:text-gray-300 focus:outline-none","aria-label":c?"Hide password":"Show password",children:c?u.jsx(Jb,{}):u.jsx(Zb,{})})]}),u.jsxs("div",{className:"relative",children:[u.jsxs("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-200 mb-1",children:["Confirm Password ",u.jsx("span",{className:"text-red-500",children:"*"})]}),u.jsx("input",{type:g?"text":"password",name:"confirmPassword",value:r.confirmPassword,onChange:p,required:!0,minLength:6,placeholder:"Re-enter your password",className:"w-full px-3 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm bg-white text-gray-900 dark:bg-slate-800 dark:text-gray-100 dark:border-slate-700 pr-10"}),u.jsx("button",{type:"button",tabIndex:-1,onClick:()=>y(w=>!w),className:"absolute right-2 top-8 transform -translate-y-1/2 text-gray-500 dark:text-gray-300 focus:outline-none","aria-label":g?"Hide password":"Show password",children:g?u.jsx(Jb,{}):u.jsx(Zb,{})})]}),u.jsx("button",{type:"submit",disabled:i,className:"w-full bg-blue-600 text-white py-2 rounded font-semibold text-sm hover:bg-blue-700 disabled:opacity-50 dark:bg-blue-700 dark:hover:bg-blue-800",children:i?"Creating account...":"Sign Up"}),u.jsxs("p",{className:"mt-3 text-center text-xs sm:text-sm text-gray-600 dark:text-gray-300",children:["Already have an account?"," ",u.jsx("span",{onClick:()=>t("/login"),className:"text-blue-600 font-semibold cursor-pointer hover:underline dark:text-blue-400 dark:hover:text-blue-300",children:"Log in"})]})]})]})]})},PF=()=>{const[t,e]=se.useState({name:"",batch:"",email:"",phoneNo:"",departments:["videography"],firstPriority:"videography",studyDepartment:"",gender:"",registrationNumber:"",cardNumber:"",birthday:""}),[n,r]=se.useState(!1),[s,i]=se.useState({type:"",text:""}),a=l=>{e(c=>({...c,[l.target.name]:l.target.value}))},o=async l=>{l.preventDefault(),r(!0),i({type:"",text:""});try{const c="user_"+Math.random().toString(36).slice(2,12);await Qv($t(ze,"users",c),{name:t.name,batch:t.batch,email:t.email,phoneNo:t.phoneNo,departments:t.departments,firstPriority:t.firstPriority,studyDepartment:t.studyDepartment,gender:t.gender,registrationNumber:t.registrationNumber,cardNumber:t.cardNumber,birthday:t.birthday,userType:"user",createdAt:new Date().toISOString()}),i({type:"success",text:"User created successfully."}),e({name:"",batch:"",email:"",phoneNo:"",departments:["videography"],firstPriority:"videography",studyDepartment:"",gender:"",registrationNumber:"",cardNumber:"",birthday:""})}catch(c){i({type:"error",text:c.message})}finally{r(!1)}};return u.jsxs("div",{className:"min-h-screen bg-gray-100",children:[u.jsx(pn,{userType:"admin"}),u.jsx("main",{className:"container mx-auto px-4 py-6 sm:py-8",children:u.jsxs("div",{className:"max-w-2xl mx-auto bg-white rounded-lg shadow-md p-4 sm:p-8",children:[u.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-gray-800 mb-4 sm:mb-6",children:"Create New User Account"}),s.text&&u.jsx("div",{className:`mb-4 p-3 sm:p-4 rounded text-sm sm:text-base ${s.type==="success"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:s.text}),u.jsxs("form",{onSubmit:o,className:"space-y-4",children:[u.jsxs("div",{children:[u.jsxs("label",{className:"block text-gray-700 font-semibold mb-2 text-sm sm:text-base",children:["Name ",u.jsx("span",{className:"text-red-500",children:"*"})]}),u.jsx("input",{type:"text",name:"name",value:t.name,onChange:a,required:!0,className:"w-full px-3 sm:px-4 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm sm:text-base"})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"block text-gray-700 font-semibold mb-2 text-sm sm:text-base",children:["Batch ",u.jsx("span",{className:"text-red-500",children:"*"})]}),u.jsxs("select",{name:"batch",value:t.batch,onChange:a,required:!0,className:"w-full px-3 sm:px-4 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm sm:text-base",children:[u.jsx("option",{value:"",children:"Select batch"}),u.jsx("option",{value:"20/21",children:"20/21"}),u.jsx("option",{value:"21/22",children:"21/22"}),u.jsx("option",{value:"22/23",children:"22/23"}),u.jsx("option",{value:"23/24",children:"23/24"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-gray-700 font-semibold mb-2 text-sm sm:text-base",children:"Email"}),u.jsx("input",{type:"email",name:"email",value:t.email,onChange:a,className:"w-full px-3 sm:px-4 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm sm:text-base",placeholder:"you@email.com"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-gray-700 font-semibold mb-2 text-sm sm:text-base",children:"Phone Number"}),u.jsx("input",{type:"tel",name:"phoneNo",value:t.phoneNo,onChange:a,className:"w-full px-3 sm:px-4 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm sm:text-base",placeholder:"07XXXXXXXX"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-gray-700 font-semibold mb-2 text-sm sm:text-base",children:"Departments (work)"}),u.jsx("div",{className:"flex gap-4",children:["videography","photography"].map(l=>u.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[u.jsx("input",{type:"checkbox",checked:t.departments.includes(l),onChange:()=>{e(c=>{const g=c.departments.includes(l)?c.departments.filter(p=>p!==l):[...c.departments,l];let y=c.firstPriority;return g.includes(y)||(y=g[0]||""),{...c,departments:g,firstPriority:y}})}}),u.jsx("span",{className:"capitalize",children:l})]},l))})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-gray-700 font-semibold mb-2 text-sm sm:text-base",children:"First Priority Department"}),u.jsx("select",{name:"firstPriority",value:t.firstPriority,onChange:a,className:"w-full px-3 sm:px-4 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm sm:text-base",children:t.departments.map(l=>u.jsx("option",{value:l,children:l},l))})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-gray-700 font-semibold mb-2 text-sm sm:text-base",children:"Department in Study"}),u.jsxs("select",{name:"studyDepartment",value:t.studyDepartment,onChange:a,className:"w-full px-3 sm:px-4 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm sm:text-base",children:[u.jsx("option",{value:"",children:"Select department"}),u.jsx("option",{value:"ITT",children:"ITT"}),u.jsx("option",{value:"EET",children:"EET"}),u.jsx("option",{value:"MTT",children:"MTT"}),u.jsx("option",{value:"BPT",children:"BPT"}),u.jsx("option",{value:"Food",children:"Food"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-gray-700 font-semibold mb-2 text-sm sm:text-base",children:"Gender"}),u.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[u.jsxs("label",{className:"flex items-center gap-2",children:[u.jsx("input",{type:"radio",name:"gender",value:"male",checked:t.gender==="male",onChange:a}),u.jsx("span",{children:"Male"})]}),u.jsxs("label",{className:"flex items-center gap-2",children:[u.jsx("input",{type:"radio",name:"gender",value:"female",checked:t.gender==="female",onChange:a}),u.jsx("span",{children:"Female"})]})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-gray-700 font-semibold mb-2 text-sm sm:text-base",children:"Registration Number"}),u.jsx("input",{type:"text",name:"registrationNumber",value:t.registrationNumber,onChange:a,className:"w-full px-3 sm:px-4 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm sm:text-base",placeholder:"Ex: ITT/2021/123"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-gray-700 font-semibold mb-2 text-sm sm:text-base",children:"Card Number"}),u.jsx("input",{type:"text",name:"cardNumber",value:t.cardNumber,onChange:a,className:"w-full px-3 sm:px-4 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm sm:text-base",placeholder:"If you have one"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-gray-700 font-semibold mb-2 text-sm sm:text-base",children:"Birthday"}),u.jsx("input",{type:"date",name:"birthday",value:t.birthday,onChange:a,className:"w-full px-3 sm:px-4 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm sm:text-base",placeholder:"YYYY-MM-DD"})]}),u.jsx("button",{type:"submit",disabled:n,className:"w-full bg-blue-600 text-white py-2 sm:py-3 px-4 rounded font-semibold hover:bg-blue-700 transition disabled:opacity-50 text-sm sm:text-base",children:n?"Creating user...":"Create User"})]})]})})]})},jF=["videography","editing"],LF=()=>{const[t,e]=se.useState([]),[n,r]=se.useState([]),[s,i]=se.useState({title:"",description:"",date:"",deadline:"",priority:"medium",assignedUsers:[],assignedItems:[]}),[a,o]=se.useState("date"),[l,c]=se.useState(!1),[d,g]=se.useState({type:"",text:""}),[y,p]=se.useState(""),[N,S]=se.useState(""),I=qr();se.useEffect(()=>{w(),T()},[]);const w=async()=>{try{const ae=(await An(At(ze,"users"))).docs.map(ue=>({id:ue.id,...ue.data()}));ae.sort((ue,Q)=>{const ce=(ue.name||"").toLowerCase(),me=(Q.name||"").toLowerCase();return ce.localeCompare(me)}),e(ae)}catch(Z){console.error("Error fetching users:",Z)}},T=async()=>{try{const ae=(await An(At(ze,"inventory"))).docs.map(ue=>({id:ue.id,...ue.data()}));ae.sort((ue,Q)=>{const ce=(ue.itemName||"").toLowerCase(),me=(Q.itemName||"").toLowerCase();return ce.localeCompare(me)}),r(ae)}catch(Z){console.error("Error fetching inventory:",Z)}},j=async({task:Z,usersMap:ae={},itemsMap:ue={}})=>{try{const{id:Q,title:ce,description:me,date:ye,deadline:M,priority:W,assignedUserDetails:X=[],assignedItems:Y=[],userAcceptance:ie={},roleCompletion:le={}}=Z,xe=()=>{if((Z.status||"").toLowerCase()==="complete")return"completed";const Ge=Z.assignedUserDetails||[],ft=Z.roleCompletion||{},kt=Z.userAcceptance||{};return!Ge.length||!Ge.every(Qe=>kt[Qe.userId]==="accepted")?"pending":Ge.every(Qe=>(Qe.roles||[]).every(tt=>ft[`${Qe.userId}_${tt}`]==="done"))?"done":"accepted"},ee=Ge=>{const ft={pending:{bg:"#fef3c7",text:"#b45309"},accepted:{bg:"#fed7aa",text:"#b45309"},done:{bg:"#bfdbfe",text:"#1e40af"},completed:{bg:"#dcfce7",text:"#166534"}};return ft[Ge]||ft.pending},fe=(X||[]).map(({userId:Ge,roles:ft})=>{const kt=ae[Ge]||{},ot=ie[Ge]||"pending";return{id:Ge,name:kt.name||kt.displayName||"Unknown",photoURL:kt.photoURL||kt.avatarUrl||"",roles:ft||[],acceptanceStatus:ot}}),ve=Y.map(Ge=>ue[Ge]).filter(Boolean),Se=1080,ke=1360,Ue=document.createElement("canvas");Ue.width=Se,Ue.height=ke;const V=Ue.getContext("2d");V.fillStyle="#f3f4f6",V.fillRect(0,0,Se,ke);const De=48,Ze=De,Ve=De,Ce=Se-De*2,Xe=ke-De*2;V.fillStyle="#ffffff";const He=24;V.beginPath(),V.moveTo(Ze+He,Ve),V.lineTo(Ze+Ce-He,Ve),V.quadraticCurveTo(Ze+Ce,Ve,Ze+Ce,Ve+He),V.lineTo(Ze+Ce,Ve+Xe-He),V.quadraticCurveTo(Ze+Ce,Ve+Xe,Ze+Ce-He,Ve+Xe),V.lineTo(Ze+He,Ve+Xe),V.quadraticCurveTo(Ze,Ve+Xe,Ze,Ve+Xe-He),V.lineTo(Ze,Ve+He),V.quadraticCurveTo(Ze,Ve,Ze+He,Ve),V.closePath(),V.fill(),V.strokeStyle="#e5e7eb",V.lineWidth=2,V.stroke();const st=40;let Ae=Ze+st,bt=Ve+st;const gt=Ce-st*2,$e=(Ge,ft,kt,ot,Pt,Qe)=>{V.font=Qe;const tt=(Ge||"").split(" ");let It="",qe=ot;for(let Ke=0;Ke<tt.length;Ke++){const ut=It+tt[Ke]+" ";V.measureText(ut).width>ft&&Ke>0?(V.fillText(It.trim(),kt,qe),It=tt[Ke]+" ",qe+=Pt):It=ut}return It&&(V.fillText(It.trim(),kt,qe),qe+=Pt),qe};V.fillStyle="#3f3f3f",V.textBaseline="top",bt=$e(ce||"New Task",gt-200,Ae,bt,56,'bold 48px system-ui, -apple-system, Roboto, "Segoe UI", "Helvetica Neue", Arial');const at=xe(),Nt=ee(at);V.font='500 22px system-ui, -apple-system, Roboto, "Segoe UI", "Helvetica Neue", Arial';const Ye=V.measureText(at).width+32,xt=48,et=Ze+Ce-st-Ye-8,Ot=Ve+st+8;V.fillStyle=Nt.bg,V.fillRect(et,Ot,Ye,xt),V.fillStyle=Nt.text,V.fillText(at,et+16,Ot+12),bt+=16;const Ft=ye||M;if(Ft){V.fillStyle="#6b7280",V.font='400 26px system-ui, -apple-system, Roboto, "Segoe UI", "Helvetica Neue", Arial';const Ge=new Date(Ft).toLocaleDateString(void 0,{day:"numeric",month:"short",year:"numeric"});V.fillText(`Date: ${Ge}`,Ae,bt),bt+=44}if(me&&(V.fillStyle="#374151",bt=$e(me,gt,Ae,bt+12,36,'400 24px system-ui, -apple-system, Roboto, "Segoe UI", "Helvetica Neue", Arial')),(fe||[]).length){bt+=16,V.fillStyle="#3f3f3f",V.font='600 26px system-ui, -apple-system, Roboto, "Segoe UI", "Helvetica Neue", Arial',V.fillText("Assigned to:",Ae,bt),bt+=44;const Ge=72,ft=20,kt=fe.map(Pt=>new Promise(Qe=>{if(!Pt||!Pt.photoURL)return Qe(null);const tt=new Image;tt.crossOrigin="anonymous",tt.onload=()=>Qe(tt),tt.onerror=()=>Qe(null),tt.src=Pt.photoURL})),ot=await Promise.all(kt);for(let Pt=0;Pt<fe.length;Pt++){const Qe=fe[Pt],tt=ot[Pt],It=Ae,qe=bt;if(V.save(),V.beginPath(),V.arc(It+Ge/2,qe+Ge/2,Ge/2,0,Math.PI*2),V.closePath(),V.fillStyle="#e5e7eb",V.fill(),tt){V.save(),V.beginPath(),V.arc(It+Ge/2,qe+Ge/2,Ge/2,0,Math.PI*2),V.clip();const tn=Math.max(Ge/tt.width,Ge/tt.height),Gt=tt.width*tn,ss=tt.height*tn,Nr=It+(Ge-Gt)/2,Bn=qe+(Ge-ss)/2;V.drawImage(tt,Nr,Bn,Gt,ss),V.restore()}else{V.fillStyle="#6b7280",V.font='600 26px system-ui, -apple-system, Roboto, "Segoe UI", "Helvetica Neue", Arial';const tn=(Qe.name||"").split(" ").map(Gt=>Gt[0]).slice(0,2).join("").toUpperCase();V.fillText(tn,It+16,qe+20)}V.restore();const Ke=It+Ge+20;V.fillStyle="#111827",V.font='600 26px system-ui, -apple-system, Roboto, "Segoe UI", "Helvetica Neue", Arial',V.fillText(Qe.name||"Unknown",Ke,qe+4);const ut=Qe.acceptanceStatus;let $n,zt,en;ut==="accepted"?($n=" Accepted",zt="#dcfce7",en="#16a34a"):ut==="rejected"?($n=" Rejected",zt="#fee2e2",en="#dc2626"):($n=" Pending",zt="#fef3c7",en="#b45309"),V.font='500 22px system-ui, -apple-system, Roboto, "Segoe UI", "Helvetica Neue", Arial';const qt=V.measureText($n).width+24,nt=44,Ut=Ze+Ce-st-qt-8,Vn=qe+10;V.fillStyle=zt,V.fillRect(Ut,Vn,qt,nt),V.fillStyle=en,V.fillText($n,Ut+12,Vn+10);const En=Qe.roles||[];let Nn=Ke;const on=qe+40;V.font='400 22px system-ui, -apple-system, Roboto, "Segoe UI", "Helvetica Neue", Arial';for(let tn=0;tn<En.length;tn++){const Gt=En[tn],ss=`${Qe.id}_${Gt}`,Nr=le[ss]==="done",Bn=Nr?` ${Gt}`:Gt,Sr=V.measureText(Bn).width+20;V.fillStyle=Nr?"#d1fae5":"#f0f0f0",V.fillRect(Nn,on,Sr,36),V.fillStyle=Nr?"#059669":"#5b6b7d",V.fillText(Bn,Nn+10,on+24-6),Nn+=Sr+12}bt+=Ge+ft}}Ue.toBlob(Ge=>{if(!Ge)return;const ft=URL.createObjectURL(Ge),kt=document.createElement("a");kt.href=ft,kt.download=`task-${Q||Date.now()}.png`,document.body.appendChild(kt),kt.click(),kt.remove(),setTimeout(()=>URL.revokeObjectURL(ft),3e3)},"image/png")}catch(Q){console.warn("generateAndDownloadTaskImage error",Q)}},D=Z=>{i(ae=>({...ae,[Z.target.name]:Z.target.value}))},H=Z=>{i(ae=>ae.assignedUsers.find(Q=>Q.userId===Z)?{...ae,assignedUsers:ae.assignedUsers.filter(Q=>Q.userId!==Z)}:{...ae,assignedUsers:[...ae.assignedUsers,{userId:Z,roles:["videography"]}]})},J=(Z,ae)=>{i(ue=>{const Q=ue.assignedUsers.map(ce=>{if(ce.userId!==Z)return ce;const ye=ce.roles.includes(ae)?ce.roles.filter(M=>M!==ae):[...ce.roles,ae];return{...ce,roles:ye.length?ye:[ae]}});return{...ue,assignedUsers:Q}})},O=Z=>{i(ae=>({...ae,assignedItems:ae.assignedItems.includes(Z)?ae.assignedItems.filter(ue=>ue!==Z):[...ae.assignedItems,Z]}))},_=async Z=>{if(Z.preventDefault(),c(!0),g({type:"",text:""}),!s.date&&!s.deadline){c(!1),g({type:"error",text:"Please select a date or a deadline."});return}try{const ae=await Jr(At(ze,"works"),{title:s.title,description:s.description,date:s.date||null,deadline:s.deadline||null,dateType:a,priority:s.priority,assignedUsers:s.assignedUsers.map(M=>M.userId),assignedUserDetails:s.assignedUsers,assignedItems:s.assignedItems,createdAt:new Date().toISOString(),status:"pending"}),ue=s.assignedUsers.map(async({userId:M})=>{const X=(await Li($t(ze,"users",M))).data();return{email:(X==null?void 0:X.email)||null,phone:(X==null?void 0:X.phoneNumber)||(X==null?void 0:X.phone)||null}}),Q=await Promise.all(ue),ce=Q.map(M=>M.email).filter(Boolean),me=Q.map(M=>M.phone).filter(Boolean),ye={lines:[`Title: ${s.title}`,...s.date?[`Date: ${s.date}`]:[],...s.deadline?[`Deadline: ${s.deadline}`]:[],`Description: ${s.description}`]};if(ce.length>0){const M=ye.lines,W=[`<p><b>Title:</b> ${s.title}</p>`,...s.date?[`<p><b>Date:</b> ${s.date}</p>`]:[],...s.deadline?[`<p><b>Deadline:</b> ${s.deadline}</p>`]:[],`<p><b>Description:</b> ${s.description}</p>`];await Jr(At(ze,"mail"),{to:ce,message:{subject:`New work assigned: ${s.title}`,text:`You have been assigned to a new work:

`+M.join(`
`)+`

Kindly review and confirm the work by visiting the Videography Manager website.`,html:`<p>Hello,</p>
        <p>You have been assigned a new work. Please find the details below:</p> 
        ${W.join("")}
        <p>Kindly review and confirm the work by visiting the <a href="https://tmv.fotmv.online/">Videography Manager</a> Website</p> 
        <p>If you encounter any issues or need further assistance, feel free to contact me.</p> 
        <p>Thank you.</p> 
        
        <p>Best regards,</p>
        <p style="color:#A3A9AD">
          <strong>Mihiru Dahanayake</strong><br>
          <i>Acting Videography Department Head<br>FOT Media<br>Faculty Of Technology<br>Rajarata University of Sri Lanka<br>
          <a href="tel:+94703426554" style="color:#0066cc; text-decoration:none;">070 342 6554</a><br>
          <a href="mailto:mihirudahanayake@gmail.com" style="color:#0066cc; text-decoration:none;">mihiru.online@gmail.com</a></i><br>
        </p>`}})}if(me.length>0){const M=`Hello!

You have been assigned to a new work:

`+ye.lines.join(`
`)+`

Kindly review and confirm the work by visiting the Videography Manager website: https://tmv.fotmv.online/

If you encounter any issues, feel free to contact me.

Best regards,
Mihiru Dahanayake
Acting Videography Department Head
FOT Media, Rajarata University
070 342 6554`;await Jr(At(ze,"whatsapp"),{to:me,message:M})}g({type:"success",text:"Work assigned successfully!"});try{const M={};t.forEach(X=>{M[X.id]=X});const W={};n.forEach(X=>{W[X.id]=X}),j({task:{id:ae.id,title:s.title,description:s.description,date:s.date||null,deadline:s.deadline||null,priority:s.priority,assignedUserDetails:s.assignedUsers,assignedItems:s.assignedItems,status:"pending",userAcceptance:{},roleCompletion:{}},usersMap:M,itemsMap:W})}catch(M){console.warn("failed to generate task image",M)}i({title:"",description:"",date:"",deadline:"",priority:"medium",assignedUsers:[],assignedItems:[]}),o("date")}catch(ae){g({type:"error",text:ae.message})}finally{c(!1)}},A=Z=>s.assignedUsers.some(ae=>ae.userId===Z),R=Z=>{var ae;return((ae=s.assignedUsers.find(ue=>ue.userId===Z))==null?void 0:ae.roles)||[]},E=y.trim().toLowerCase(),C=t.filter(Z=>{if(!E)return!0;const ae=(Z.name||"").toLowerCase(),ue=(Z.cardNumber||"").toLowerCase();return ae.includes(E)||ue.includes(E)}),L=N.trim().toLowerCase(),z=n.filter(Z=>{if(!L)return!0;const ae=(Z.itemName||"").toLowerCase(),ue=(Z.itemNo||"").toLowerCase();return ae.includes(L)||ue.includes(L)});return u.jsxs("div",{className:"min-h-screen bg-gray-100",children:[u.jsx(pn,{userType:"admin"}),u.jsx("main",{className:"container mx-auto px-4 py-6 sm:py-8",children:u.jsxs("div",{className:"max-w-3xl mx-auto bg-white rounded-lg shadow-md p-4 sm:p-8",children:[u.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-gray-800 mb-4 sm:mb-6",children:"Create and Assign Work"}),d.text&&u.jsx("div",{className:`mb-4 p-3 sm:p-4 rounded text-sm sm:text-base ${d.type==="success"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:d.text}),u.jsxs("form",{onSubmit:_,className:"space-y-4",children:[u.jsxs("div",{children:[u.jsxs("label",{className:"flex items-center gap-2 text-gray-700 font-semibold mb-2 text-sm sm:text-base",children:[u.jsx(f5,{}),u.jsx("span",{children:"Work Title"})]}),u.jsx("input",{type:"text",name:"title",value:s.title,onChange:D,required:!0,className:"w-full px-3 sm:px-4 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-green-500 text-sm sm:text-base"})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"flex items-center gap-2 text-gray-700 font-semibold mb-2 text-sm sm:text-base",children:[u.jsx(u5,{}),u.jsx("span",{children:"Description"})]}),u.jsx("textarea",{name:"description",value:s.description,onChange:D,required:!0,rows:"4",className:"w-full px-3 sm:px-4 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-green-500 text-sm sm:text-base"})]}),u.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsxs("label",{className:"flex items-center gap-2 text-gray-700 font-semibold mb-2 text-sm sm:text-base",children:[u.jsx(qn,{}),u.jsx("span",{children:"Date / Deadline"})]}),u.jsxs("div",{className:"flex items-center gap-3 mb-2 text-xs sm:text-sm",children:[u.jsxs("label",{className:"flex items-center gap-1",children:[u.jsx("input",{type:"radio",name:"dateType",value:"date",checked:a==="date",onChange:Z=>o(Z.target.value),className:"w-4 h-4"}),u.jsx("span",{children:"Date"})]}),u.jsxs("label",{className:"flex items-center gap-1",children:[u.jsx("input",{type:"radio",name:"dateType",value:"deadline",checked:a==="deadline",onChange:Z=>o(Z.target.value),className:"w-4 h-4"}),u.jsx("span",{children:"Deadline"})]})]}),a==="date"&&u.jsx("input",{type:"date",name:"date",value:s.date,onChange:D,className:"w-full px-3 sm:px-4 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-green-500 text-sm sm:text-base"}),a==="deadline"&&u.jsx("input",{type:"date",name:"deadline",value:s.deadline,onChange:D,className:"w-full px-3 sm:px-4 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-green-500 text-sm sm:text-base"}),u.jsx("p",{className:"mt-1 text-[11px] text-gray-500",children:"At least one of date or deadline is required, but both are optional individually."})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"flex items-center gap-2 text-gray-700 font-semibold mb-2 text-sm sm:text-base",children:[u.jsx(h5,{}),u.jsx("span",{children:"Priority"})]}),u.jsxs("select",{name:"priority",value:s.priority,onChange:D,className:"w-full px-3 sm:px-4 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-green-500 text-sm sm:text-base",children:[u.jsx("option",{value:"low",children:"Low"}),u.jsx("option",{value:"medium",children:"Medium"}),u.jsx("option",{value:"high",children:"High"}),u.jsx("option",{value:"urgent",children:"Urgent"})]})]})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"flex items-center gap-2 text-gray-700 font-semibold mb-2 text-sm sm:text-base",children:[u.jsx(xf,{}),u.jsx("span",{children:"Assign Team Members"})]}),u.jsxs("div",{className:"relative mb-2",children:[u.jsx(na,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 text-xs"}),u.jsx("input",{type:"text",placeholder:"Search by name or card...",value:y,onChange:Z=>p(Z.target.value),className:"w-full pl-8 pr-3 py-2 border border-gray-300 rounded text-sm focus:outline-none focus:ring-2 focus:ring-green-500"})]}),u.jsx("div",{className:"border border-gray-300 rounded p-3 sm:p-4 max-h-60 overflow-y-auto",children:C.length===0?u.jsx("p",{className:"text-gray-500 text-sm sm:text-base",children:"No users found"}):C.map(Z=>{const ae=A(Z.id),ue=R(Z.id);return u.jsxs("div",{className:"mb-2 p-2 rounded hover:bg-gray-50",children:[u.jsxs("label",{className:"flex items-center cursor-pointer",children:[u.jsx("input",{type:"checkbox",checked:ae,onChange:()=>H(Z.id),className:"mr-3 w-4 h-4"}),u.jsx("div",{className:"flex-1",children:u.jsxs("p",{className:"text-gray-700 text-sm sm:text-base",children:[Z.name," ",u.jsxs("span",{className:"text-xs text-gray-500",children:["(",Z.cardNumber||"-",")"]})]})}),u.jsx("button",{type:"button",onClick:Q=>{Q.preventDefault(),I(`/users/${Z.id}`)},className:"ml-2 px-2 py-1 text-xs text-gray-500 hover:text-gray-700 transition-colors",title:"View user details",children:"View"})]}),ae&&u.jsx("div",{className:"mt-1 ml-7 flex flex-wrap gap-2 text-xs sm:text-sm",children:jF.map(Q=>u.jsx("button",{type:"button",onClick:()=>J(Z.id,Q),className:`px-2 py-1 rounded border ${ue.includes(Q)?"bg-green-600 text-white border-green-600":"bg-white text-gray-700 border-gray-300"}`,children:Q},Q))})]},Z.id)})}),u.jsxs("p",{className:"text-xs sm:text-sm text-gray-500 mt-2",children:["Selected: ",s.assignedUsers.length," member(s)"]})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"flex items-center gap-2 text-gray-700 font-semibold mb-2 text-sm sm:text-base",children:[u.jsx(Dc,{}),u.jsx("span",{children:"Assign Inventory Items (Optional)"})]}),u.jsxs("div",{className:"relative mb-2",children:[u.jsx(na,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 text-xs"}),u.jsx("input",{type:"text",placeholder:"Search by item name or number...",value:N,onChange:Z=>S(Z.target.value),className:"w-full pl-8 pr-3 py-2 border border-gray-300 rounded text-sm focus:outline-none focus:ring-2 focus:ring-green-500"})]}),u.jsx("div",{className:"border border-gray-300 rounded p-3 sm:p-4 max-h-60 overflow-y-auto",children:z.length===0?u.jsx("p",{className:"text-gray-500 text-sm sm:text-base",children:"No items found"}):z.map(Z=>u.jsxs("label",{className:"flex items-center mb-2 cursor-pointer hover:bg-gray-50 p-2 rounded",children:[u.jsx("input",{type:"checkbox",checked:s.assignedItems.includes(Z.id),onChange:()=>O(Z.id),className:"mr-3 w-4 h-4"}),u.jsxs("div",{className:"flex-1",children:[u.jsxs("p",{className:"text-gray-700 text-sm sm:text-base",children:[Z.itemName," ",u.jsxs("span",{className:"text-xs text-gray-500",children:["(",Z.itemNo,")"]})]}),Z.details&&u.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:Z.details})]})]},Z.id))}),u.jsxs("p",{className:"text-xs sm:text-sm text-gray-500 mt-2",children:["Selected: ",s.assignedItems.length," item(s)"]})]}),u.jsx("button",{type:"submit",disabled:l||s.assignedUsers.length===0,className:"w-full bg-green-600 text-white py-2 sm:py-3 px-4 rounded font-semibold hover:bg-green-700 transition disabled:opacity-50 text-sm sm:text-base",children:l?"Creating Work...":"Create and Assign Work"})]})]})})]})},RF=["videography","editing"],DF=()=>{const[t,e]=se.useState([]),[n,r]=se.useState([]),[s,i]=se.useState({title:"",description:"",date:"",deadline:"",priority:"medium",assignedUsers:[],assignedItems:[]}),[a,o]=se.useState("date"),[l,c]=se.useState(!1),[d,g]=se.useState(""),[y,p]=se.useState(""),[N,S]=se.useState(""),I=qr();se.useEffect(()=>{w(),T()},[]);const w=async()=>{try{const A=(await An(At(ze,"users"))).docs.map(R=>({id:R.id,...R.data()}));A.sort((R,E)=>(R.name||"").localeCompare(E.name||"")),e(A)}catch(_){console.error("Error fetching users:",_)}},T=async()=>{try{const A=(await An(At(ze,"inventory"))).docs.map(R=>({id:R.id,...R.data()}));A.sort((R,E)=>(R.itemName||"").localeCompare(E.itemName||"")),r(A)}catch(_){console.error("Error fetching inventory:",_)}},j=_=>{i(A=>({...A,[_.target.name]:_.target.value}))},D=_=>{i(A=>A.assignedUsers.find(E=>E.userId===_)?{...A,assignedUsers:A.assignedUsers.filter(E=>E.userId!==_)}:{...A,assignedUsers:[...A.assignedUsers,{userId:_,roles:["videography"]}]})},H=(_,A)=>{i(R=>{const E=R.assignedUsers.map(C=>{if(C.userId!==_)return C;const z=C.roles.includes(A)?C.roles.filter(Z=>Z!==A):[...C.roles,A];return{...C,roles:z.length?z:[A]}});return{...R,assignedUsers:E}})},J=_=>{i(A=>({...A,assignedItems:A.assignedItems.includes(_)?A.assignedItems.filter(R=>R!==_):[...A.assignedItems,_]}))},O=async _=>{_.preventDefault(),c(!0),g("");try{await Jr(At(ze,"works"),{title:s.title,description:s.description,date:s.date||null,deadline:s.deadline||null,dateType:a,priority:s.priority,assignedUsers:s.assignedUsers.map(A=>A.userId),assignedUserDetails:s.assignedUsers,assignedItems:s.assignedItems,status:"old work",createdAt:new Date().toISOString()}),g("Old work added successfully!"),i({title:"",description:"",date:"",deadline:"",priority:"medium",assignedUsers:[],assignedItems:[]}),o("date"),setTimeout(()=>I("/work-list"),1e3)}catch{g("Failed to add old work.")}finally{c(!1)}};return u.jsxs("div",{className:"min-h-screen bg-gray-100",children:[u.jsx(pn,{userType:"admin"}),u.jsx("main",{className:"container mx-auto px-4 py-6 sm:py-8",children:u.jsxs("div",{className:"max-w-3xl mx-auto bg-white rounded-lg shadow-md p-4 sm:p-8",children:[u.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-gray-800 mb-4 sm:mb-6",children:"Add Old Work"}),d&&u.jsx("div",{className:"mb-4 p-3 rounded text-sm bg-green-100 text-green-700",children:d}),u.jsxs("form",{onSubmit:O,className:"space-y-4",children:[u.jsxs("div",{children:[u.jsxs("label",{className:"flex items-center gap-2 text-gray-700 font-semibold mb-2 text-sm sm:text-base",children:[u.jsx(f5,{}),u.jsx("span",{children:"Work Title"})]}),u.jsx("input",{type:"text",name:"title",value:s.title,onChange:j,required:!0,className:"w-full px-3 sm:px-4 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-green-500 text-sm sm:text-base"})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"flex items-center gap-2 text-gray-700 font-semibold mb-2 text-sm sm:text-base",children:[u.jsx(u5,{}),u.jsx("span",{children:"Description"})]}),u.jsx("textarea",{name:"description",value:s.description,onChange:j,rows:"4",className:"w-full px-3 sm:px-4 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-green-500 text-sm sm:text-base"})]}),u.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsxs("label",{className:"flex items-center gap-2 text-gray-700 font-semibold mb-2 text-sm sm:text-base",children:[u.jsx(qn,{}),u.jsx("span",{children:"Date / Deadline"})]}),u.jsxs("div",{className:"flex items-center gap-3 mb-2 text-xs sm:text-sm",children:[u.jsxs("label",{className:"flex items-center gap-1",children:[u.jsx("input",{type:"radio",name:"dateType",value:"date",checked:a==="date",onChange:_=>o(_.target.value),className:"w-4 h-4"}),u.jsx("span",{children:"Date"})]}),u.jsxs("label",{className:"flex items-center gap-1",children:[u.jsx("input",{type:"radio",name:"dateType",value:"deadline",checked:a==="deadline",onChange:_=>o(_.target.value),className:"w-4 h-4"}),u.jsx("span",{children:"Deadline"})]})]}),a==="date"&&u.jsx("input",{type:"date",name:"date",value:s.date,onChange:j,className:"w-full px-3 sm:px-4 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-green-500 text-sm sm:text-base"}),a==="deadline"&&u.jsx("input",{type:"date",name:"deadline",value:s.deadline,onChange:j,className:"w-full px-3 sm:px-4 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-green-500 text-sm sm:text-base"}),u.jsx("p",{className:"mt-1 text-[11px] text-gray-500",children:"At least one of date or deadline is required, but both are optional individually."})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"flex items-center gap-2 text-gray-700 font-semibold mb-2 text-sm sm:text-base",children:[u.jsx(h5,{}),u.jsx("span",{children:"Priority"})]}),u.jsxs("select",{name:"priority",value:s.priority,onChange:j,className:"w-full px-3 sm:px-4 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-green-500 text-sm sm:text-base",children:[u.jsx("option",{value:"low",children:"Low"}),u.jsx("option",{value:"medium",children:"Medium"}),u.jsx("option",{value:"high",children:"High"}),u.jsx("option",{value:"urgent",children:"Urgent"})]})]})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"flex items-center gap-2 text-gray-700 font-semibold mb-2 text-sm sm:text-base",children:[u.jsx(xf,{}),u.jsx("span",{children:"Assign Team Members"})]}),u.jsxs("div",{className:"relative mb-2",children:[u.jsx(na,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 text-xs"}),u.jsx("input",{type:"text",placeholder:"Search by name or card...",value:y,onChange:_=>p(_.target.value),className:"w-full pl-8 pr-3 py-2 border border-gray-300 rounded text-sm focus:outline-none focus:ring-2 focus:ring-green-500"})]}),u.jsx("div",{className:"border border-gray-300 rounded p-3 sm:p-4 max-h-60 overflow-y-auto",children:(()=>{const _=y.trim().toLowerCase(),A=t.filter(C=>{if(!_)return!0;const L=(C.name||"").toLowerCase(),z=(C.cardNumber||"").toLowerCase();return L.includes(_)||z.includes(_)}),R=C=>s.assignedUsers.some(L=>L.userId===C),E=C=>{var L;return((L=s.assignedUsers.find(z=>z.userId===C))==null?void 0:L.roles)||[]};return A.length===0?u.jsx("p",{className:"text-gray-500 text-sm sm:text-base",children:"No users found"}):A.map(C=>{const L=R(C.id),z=E(C.id);return u.jsxs("div",{className:"mb-2 p-2 rounded hover:bg-gray-50",children:[u.jsxs("label",{className:"flex items-center cursor-pointer",children:[u.jsx("input",{type:"checkbox",checked:L,onChange:()=>D(C.id),className:"mr-3 w-4 h-4"}),u.jsx("div",{className:"flex-1",children:u.jsxs("p",{className:"text-gray-700 text-sm sm:text-base",children:[C.name," ",u.jsxs("span",{className:"text-xs text-gray-500",children:["(",C.cardNumber||"-",")"]})]})})]}),L&&u.jsx("div",{className:"mt-1 ml-7 flex flex-wrap gap-2 text-xs sm:text-sm",children:RF.map(Z=>u.jsx("button",{type:"button",onClick:()=>H(C.id,Z),className:`px-2 py-1 rounded border ${z.includes(Z)?"bg-green-600 text-white border-green-600":"bg-white text-gray-700 border-gray-300"}`,children:Z},Z))})]},C.id)})})()}),u.jsxs("p",{className:"text-xs sm:text-sm text-gray-500 mt-2",children:["Selected: ",s.assignedUsers.length," member(s)"]})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"flex items-center gap-2 text-gray-700 font-semibold mb-2 text-sm sm:text-base",children:[u.jsx(Dc,{}),u.jsx("span",{children:"Assign Inventory Items (Optional)"})]}),u.jsxs("div",{className:"relative mb-2",children:[u.jsx(na,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 text-xs"}),u.jsx("input",{type:"text",placeholder:"Search by item name or number...",value:N,onChange:_=>S(_.target.value),className:"w-full pl-8 pr-3 py-2 border border-gray-300 rounded text-sm focus:outline-none focus:ring-2 focus:ring-green-500"})]}),u.jsx("div",{className:"border border-gray-300 rounded p-3 sm:p-4 max-h-60 overflow-y-auto",children:(()=>{const _=N.trim().toLowerCase(),A=n.filter(R=>{if(!_)return!0;const E=(R.itemName||"").toLowerCase(),C=(R.itemNo||"").toLowerCase();return E.includes(_)||C.includes(_)});return A.length===0?u.jsx("p",{className:"text-gray-500 text-sm sm:text-base",children:"No items found"}):A.map(R=>u.jsxs("label",{className:"flex items-center mb-2 cursor-pointer hover:bg-gray-50 p-2 rounded",children:[u.jsx("input",{type:"checkbox",checked:s.assignedItems.includes(R.id),onChange:()=>J(R.id),className:"mr-3 w-4 h-4"}),u.jsxs("div",{className:"flex-1",children:[u.jsxs("p",{className:"text-gray-700 text-sm sm:text-base",children:[R.itemName," ",u.jsxs("span",{className:"text-xs text-gray-500",children:["(",R.itemNo,")"]})]}),R.details&&u.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:R.details})]})]},R.id))})()}),u.jsxs("p",{className:"text-xs sm:text-sm text-gray-500 mt-2",children:["Selected: ",s.assignedItems.length," item(s)"]})]}),u.jsx("button",{type:"submit",disabled:l,className:"w-full bg-green-600 text-white py-2 sm:py-3 px-4 rounded font-semibold hover:bg-green-700 transition disabled:opacity-50 text-sm sm:text-base",children:l?"Adding...":"Add Old Work"})]})]})})]})},OF=()=>{const[t,e]=se.useState([]),[n,r]=se.useState({}),[s,i]=se.useState({}),[a,o]=se.useState(!0),[l,c]=se.useState(""),[d,g]=se.useState(""),[y,p]=se.useState(""),[N,S]=se.useState("accepted"),I=qr();se.useEffect(()=>{w()},[]);const w=async()=>{o(!0);try{const z=await An(At(ze,"users")),Z={};z.docs.forEach(me=>{Z[me.id]=me.data()}),r(Z);const ae=await An(At(ze,"inventory")),ue={};ae.docs.forEach(me=>{ue[me.id]=me.data()}),i(ue);const ce=(await An(At(ze,"works"))).docs.map(me=>({id:me.id,...me.data()}));e(ce)}catch(z){console.error("Error fetching data:",z)}finally{o(!1)}},T=async z=>{try{const Z=$t(ze,"works",z);await Br(Z,{status:"complete"}),e(ae=>ae.map(ue=>ue.id===z?{...ue,status:"complete"}:ue))}catch(Z){console.error("Failed to mark task complete:",Z)}},j=l.trim().toLowerCase(),D=z=>{const Z={pending:"bg-red-100 text-red-800",accepted:"bg-orange-100 text-orange-800",done:"bg-blue-100 text-blue-800",completed:"bg-green-100 text-green-800"};return Z[z]||Z.pending},H=z=>{if((z.status||"").toLowerCase()==="old work")return"old work";if((z.status||"").toLowerCase()==="complete")return"completed";const Z=z.assignedUserDetails||[],ae=z.roleCompletion||{},ue=z.userAcceptance||{};return!Z.length||!Z.every(me=>ue[me.userId]==="accepted")?"pending":Z.every(me=>(me.roles||[]).every(ye=>ae[`${me.userId}_${ye}`]==="done"))?"done":"accepted"},J=t.filter(z=>{if(d||y){if(!z.date)return!1;const W=new Date(z.date),X=new Date(W.getTime()-W.getTimezoneOffset()*6e4).toISOString().slice(0,10);if(d&&X<d||y&&X>y)return!1}const Z=H(z);if(N!=="all"&&Z!==N)return!1;if(!j)return!0;const ae=(z.title||"").toLowerCase(),ue=(z.assignedUsers||[]).map(W=>n[W]||{}),Q=ue.map(W=>(W.name||"").toLowerCase()),ce=ue.map(W=>(W.cardNumber||"").toLowerCase()),me=ae.includes(j),ye=Q.some(W=>W.includes(j)),M=ce.some(W=>W.includes(j));return me||ye||M}).sort((z,Z)=>{const ae=z.date?new Date(z.date).getTime():0;return(Z.date?new Date(Z.date).getTime():0)-ae}),O=J.filter(z=>(z.status||"").toLowerCase()==="old work"),_=J.filter(z=>(z.status||"").toLowerCase()!=="old work"),A=_.filter(z=>(z.status||"incomplete")!=="complete"),R=_.filter(z=>(z.status||"incomplete")==="complete");if(a)return u.jsxs("div",{className:"min-h-screen bg-gray-100",children:[u.jsx(pn,{userType:"admin"}),u.jsxs("div",{className:"flex flex-col justify-center items-center h-64",children:[u.jsx(Fi,{className:"animate-spin text-4xl text-blue-600 mb-4"}),u.jsx("p",{className:"text-gray-600",children:"Loading tasks..."})]})]});const E=(z,Z)=>{const ue=(z.userAcceptance||{})[Z]||"pending";return ue==="accepted"?u.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-green-100 text-green-800 text-[11px] font-semibold",children:[u.jsx(lo,{className:"text-[10px]"}),"Accepted"]}):ue==="rejected"?u.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-red-100 text-red-800 text-[11px] font-semibold",children:[u.jsx(Sl,{className:"text-[10px]"}),"Rejected"]}):u.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-yellow-100 text-yellow-800 text-[11px] font-semibold",children:[u.jsx(V2,{className:"text-[10px]"}),"Pending"]})},C=(z,Z=!1)=>{var me;const ae=H(z),ue=z.assignedUserDetails||[],Q=z.roleCompletion||{},ce=z.assignedItems||[];return u.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 sm:p-6 hover:shadow-xl transition cursor-pointer",onClick:()=>I(`/tasks/${z.id}`),children:[u.jsxs("div",{className:"flex justify-between items-start mb-3",children:[u.jsxs("div",{className:"flex-1 pr-2",children:[u.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-gray-800",children:z.title||"Task"}),u.jsxs("p",{className:"mt-1 text-xs sm:text-sm text-gray-500 capitalize",children:["Priority: ",z.priority||"medium"]})]}),u.jsx("span",{className:`px-2 sm:px-3 py-1 rounded-full text-xs font-semibold ${D(ae)}`,children:ae})]}),z.description&&u.jsx("p",{className:"text-gray-600 mb-4 text-sm sm:text-base line-clamp-3",children:z.description}),(z.date||z.deadline)&&u.jsx("div",{className:"mb-3",children:u.jsxs("div",{className:"flex flex-col gap-1 text-xs sm:text-sm text-gray-500",children:[z.date&&u.jsxs("p",{className:"flex items-center gap-2",children:[u.jsx(qn,{}),u.jsxs("span",{children:["Date:"," ",new Date(z.date).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"})]})]}),z.deadline&&u.jsxs("p",{className:"flex items-center gap-2",children:[u.jsx(qn,{}),u.jsxs("span",{children:["Deadline:"," ",new Date(z.deadline).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"})]})]})]})}),u.jsxs("div",{className:"mb-3",children:[u.jsx("div",{className:"flex items-center justify-between mb-2",children:u.jsxs("div",{className:"flex items-center gap-2 text-xs sm:text-sm font-semibold text-gray-700",children:[u.jsx(xf,{}),u.jsx("span",{children:"Assigned to:"})]})}),u.jsxs("div",{className:"space-y-2",children:[ue.map(ye=>{const M=ye.userId,W=ye.roles||[],X=n[M]||{},Y=X.name||"Unknown",ie=X.photoURL||X.avatarUrl||null;return u.jsxs("div",{onClick:le=>{le.stopPropagation(),I(`/users/${M}`)},className:"bg-gray-50 px-2 py-1 rounded text-xs sm:text-sm cursor-pointer hover:bg-blue-50 transition",children:[u.jsxs("div",{className:"flex items-center justify-between gap-2",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[ie?u.jsx("img",{src:ie,alt:Y,className:"w-7 h-7 rounded-full object-cover border border-white shadow-sm"}):u.jsx("div",{className:"w-7 h-7 rounded-full bg-blue-500 flex items-center justify-center text-xs font-bold text-white",children:Y.charAt(0).toUpperCase()}),u.jsx("p",{className:"font-semibold text-gray-800",children:Y})]}),E(z,M)]}),u.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:W.map(le=>{const xe=`${M}_${le}`,ee=Q[xe]==="done";return u.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 rounded text-xs ${ee?"bg-green-100 text-green-800":"bg-gray-200 text-gray-700"}`,children:[ee&&u.jsx(lo,{className:"text-xs"}),le]},le)})})]},M)}),ue.length===0&&((me=z.assignedUsers)==null?void 0:me.map(ye=>{const M=n[ye]||{},W=M.name||"Unknown",X=M.photoURL||M.avatarUrl||null;return u.jsxs("div",{onClick:Y=>{Y.stopPropagation(),I(`/users/${ye}`)},className:"bg-gray-50 px-2 py-1 rounded text-xs sm:text-sm flex items-center justify-between cursor-pointer hover:bg-blue-50 transition",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[X?u.jsx("img",{src:X,alt:W,className:"w-7 h-7 rounded-full object-cover border border-white shadow-sm"}):u.jsx("div",{className:"w-7 h-7 rounded-full bg-blue-500 flex items-center justify-center text-xs font-bold text-white",children:W.charAt(0).toUpperCase()}),u.jsx("span",{className:"text-gray-700",children:W})]}),E(z,ye)]},ye)}))]})]}),ce.length>0&&u.jsxs("div",{className:"mb-3",children:[u.jsxs("div",{className:"flex items-center gap-2 text-xs sm:text-sm font-semibold text-gray-700 mb-2",children:[u.jsx(Dc,{}),u.jsx("span",{children:"Items:"})]}),u.jsx("div",{className:"flex flex-wrap gap-2",children:ce.map(ye=>{const M=s[ye];return u.jsx("span",{className:"bg-blue-50 px-2 py-1 rounded text-xs sm:text-sm text-blue-800",children:M?`${M.itemName} (${M.itemNo})`:"Unknown item"},ye)})})]}),!Z&&u.jsxs("button",{type:"button",onClick:ye=>{ye.stopPropagation(),T(z.id)},className:"mt-2 inline-flex items-center gap-2 px-3 py-1.5 rounded bg-green-600 text-white text-xs sm:text-sm hover:bg-green-700",children:[u.jsx(lo,{}),"Mark as complete"]}),Z&&u.jsx("p",{className:"mt-2 text-xs sm:text-sm text-green-700 font-semibold",children:"Completed"})]},z.id)},L=A.length>0||R.length>0||O.length>0;return u.jsxs("div",{className:"min-h-screen bg-gray-100",children:[u.jsx(pn,{userType:"admin"}),u.jsxs("main",{className:"container mx-auto px-4 py-6 sm:py-8",children:[u.jsxs("div",{className:"flex flex-col gap-3 mb-4 sm:mb-6",children:[u.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-gray-800",children:"All Tasks"}),u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3",children:[u.jsxs("div",{className:"relative flex-1 min-w-0",children:[u.jsx(na,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 text-sm"}),u.jsx("input",{type:"text",placeholder:"Search title, user name, or card...",value:l,onChange:z=>c(z.target.value),className:"w-full pl-9 pr-3 py-2 border rounded text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-2 sm:flex sm:gap-2 w-full sm:w-auto",children:[u.jsx("input",{type:"date",value:d,onChange:z=>g(z.target.value),className:"w-full px-2 py-2 border rounded text-xs sm:text-sm focus:outline-none focus:ring-2 focus:ring-blue-500","aria-label":"Start date"}),u.jsx("input",{type:"date",value:y,onChange:z=>p(z.target.value),className:"w-full px-2 py-2 border rounded text-xs sm:text-sm focus:outline-none focus:ring-2 focus:ring-blue-500","aria-label":"End date"}),u.jsxs("select",{value:N,onChange:z=>S(z.target.value),className:"w-full px-2 py-2 border rounded text-xs sm:text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[u.jsx("option",{value:"accepted",children:"Accepted"}),u.jsx("option",{value:"pending",children:"Pending"}),u.jsx("option",{value:"done",children:"Done"}),u.jsx("option",{value:"completed",children:"Completed"}),u.jsx("option",{value:"old work",children:"Old work"}),u.jsx("option",{value:"all",children:"All status"})]})]})]})]}),L?u.jsxs(u.Fragment,{children:[A.length>0&&u.jsxs("section",{className:"mb-6",children:[u.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-gray-800 mb-3",children:"Incomplete / waiting for admin"}),u.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:A.map(z=>C(z,!1))})]}),R.length>0&&u.jsxs("section",{children:[u.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-gray-800 mb-3",children:"Completed tasks"}),u.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:R.map(z=>C(z,!0))})]}),O.length>0&&u.jsxs("section",{className:"mb-6",children:[u.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-gray-800 mb-3",children:"Old Works"}),u.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:O.map(z=>u.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 sm:p-6 cursor-pointer hover:shadow-xl transition",onClick:()=>I(`/edit-old-work/${z.id}`),children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:z.title||"old Work"}),u.jsx("p",{className:"text-gray-600 mb-2 text-sm",children:z.description}),z.date&&u.jsxs("p",{className:"text-xs text-gray-500 mb-1",children:["Date: ",new Date(z.date).toLocaleDateString("en-GB")]}),u.jsx("span",{className:`inline-block px-2 py-1 rounded text-xs font-semibold mt-2 ${D(z.status)}`,children:z.status||"old work"})]},z.id))})]})]}):u.jsx("div",{className:"bg-white rounded-lg shadow-md p-6 sm:p-8 text-center",children:u.jsx("p",{className:"text-gray-600 text-sm sm:text-base",children:"No tasks match your filters."})})]})]})},MF=kA(),FF=()=>{const[t,e]=se.useState(null),[n,r]=se.useState(null),[s,i]=se.useState("loading"),[a,o]=se.useState(!1),[l,c]=se.useState(!1),[d,g]=se.useState(!1),[y,p]=se.useState(!1),[N,S]=se.useState(""),[I,w]=se.useState(""),[T,j]=se.useState(""),[D,H]=se.useState(""),[J,O]=se.useState({newPassword:"",confirmPassword:""}),[_,A]=se.useState(!1),[R,E]=se.useState(""),C=qr();se.useEffect(()=>{const X=jc(qs,async Y=>{if(!Y){i("no-auth"),e(null);return}try{const ie=await Li($t(ze,"users",Y.uid));if(ie.exists()){const le={id:Y.uid,...ie.data(),email:Y.email||""};e(le),r(le)}i("ready")}catch(ie){console.error(ie),i("error")}});return()=>X()},[]);const L=async()=>{await CN(qs),C("/")},z=X=>{if(!a)return;const{name:Y,value:ie}=X.target;e(le=>({...le,[Y]:ie}))},Z=()=>{S(""),w(""),E(""),r(t),o(!0)},ae=()=>{S(""),w(""),E(""),e(n),o(!1)},ue=async X=>{if(X.preventDefault(),!!(t!=null&&t.id)){g(!0),S(""),w("");try{const Y=$t(ze,"users",t.id),{id:ie,userType:le,createdAt:xe,email:ee,...fe}=t;await Br(Y,fe),w("Profile updated successfully."),o(!1),r(t)}catch(Y){console.error(Y),S("Failed to update profile.")}finally{g(!1)}}},Q=()=>{j(""),H(""),O({newPassword:"",confirmPassword:""}),c(!0)},ce=()=>{j(""),H(""),O({newPassword:"",confirmPassword:""}),c(!1)},me=async X=>{if(X.preventDefault(),j(""),H(""),J.newPassword.length<6){j("New password must be at least 6 characters.");return}if(J.newPassword!==J.confirmPassword){j("New password and confirm password do not match.");return}const Y=qs.currentUser;if(!Y){j("You are not logged in.");return}p(!0);try{await n7(Y,J.newPassword),H("Password updated successfully."),c(!1),O({newPassword:"",confirmPassword:""})}catch(ie){console.error(ie),j(ie.message||"Failed to update password.")}finally{p(!1)}},ye=async X=>{var le;const Y=(le=X.target.files)==null?void 0:le[0];if(!Y)return;const ie=qs.currentUser;if(!ie){E("You are not logged in.");return}E(""),A(!0);try{const xe=`memberProfileImage/${ie.uid}/${Date.now()}-${Y.name}`,ee=EO(MF,xe),fe=await SO(ee,Y),ve=await AO(fe.ref),Se=$t(ze,"users",ie.uid);await Br(Se,{photoURL:ve}),e(ke=>ke&&{...ke,photoURL:ve}),w("Profile picture updated.")}catch(xe){console.error(xe),E("Failed to upload profile picture.")}finally{A(!1),X.target.value=""}},M=(t==null?void 0:t.userType)==="admin"?"admin":"user",W="w-full px-3 py-2 border rounded text-sm focus:outline-none focus:ring-2 focus:ring-blue-500";return u.jsxs("div",{className:"min-h-screen bg-gray-100",children:[u.jsx(pn,{userType:M}),u.jsxs("main",{className:"container mx-auto px-4 py-6 sm:py-8 max-w-2xl",children:[u.jsxs("div",{className:"flex items-center justify-between mb-6",children:[u.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-800",children:"Profile"}),u.jsx("button",{onClick:L,className:"text-xs sm:text-sm px-3 py-1 rounded bg-red-600 text-white hover:bg-red-700",children:"Logout"})]}),s==="loading"&&u.jsx("p",{className:"text-gray-600 text-sm sm:text-base",children:"Loading profile..."}),s==="no-auth"&&u.jsx("p",{className:"text-gray-600 text-sm sm:text-base",children:"You are not logged in."}),s==="error"&&u.jsx("p",{className:"text-red-600 text-sm sm:text-base",children:"Failed to load profile information."}),s==="ready"&&t&&u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 sm:p-6 flex items-center gap-4 mb-6",children:[u.jsx("div",{className:"flex-shrink-0",children:t.photoURL?u.jsx("img",{src:t.photoURL,alt:t.name||"Profile",style:{width:80,height:80,borderRadius:"50%",objectFit:"cover",border:"2px solid #e5e7eb",display:"block",backgroundColor:"#f3f4f6"}}):u.jsx("div",{className:"w-20 h-20 rounded-full bg-gray-300 flex items-center justify-center text-xl font-semibold text-white",children:(t.name||"U").charAt(0).toUpperCase()})}),u.jsxs("div",{className:"flex-1",children:[u.jsx("p",{className:"text-lg font-semibold text-gray-800",children:t.name||"Unnamed user"}),u.jsx("p",{className:"text-sm text-gray-600",children:t.email}),u.jsx("p",{className:"text-xs text-gray-500 mt-1 capitalize",children:t.userType||"user"}),a&&u.jsxs("div",{className:"mt-3",children:[u.jsx("label",{className:"block text-xs font-semibold text-gray-700 mb-1",children:"Change profile picture"}),u.jsx("input",{type:"file",accept:"image/*",onChange:ye,className:`text-xs text-stone-500\r
                        file:mr-3 file:py-1 file:px-3 file:border file:border-gray-300\r
                        file:text-xs file:font-medium\r
                        file:bg-stone-50 file:text-stone-700\r
                        hover:file:cursor-pointer hover:file:bg-blue-50 hover:file:text-blue-700`}),_&&u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Uploading image..."}),R&&u.jsx("p",{className:"text-xs text-red-600 mt-1",children:R})]})]})]}),u.jsxs("form",{onSubmit:ue,className:"bg-white rounded-lg shadow-md p-4 sm:p-6 space-y-3 mb-6",children:[u.jsxs("div",{className:"flex justify-between items-center mb-2",children:[u.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"Profile details"}),a?u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{type:"submit",disabled:d,className:"text-sm px-3 py-1 rounded bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-50",children:d?"Saving...":"Save"}),u.jsx("button",{type:"button",onClick:ae,className:"text-sm px-3 py-1 rounded bg-gray-300 text-gray-800 hover:bg-gray-400",children:"Cancel"})]}):u.jsx("button",{type:"button",onClick:Z,className:"text-sm px-3 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",children:"Edit"})]}),N&&u.jsx("div",{className:"p-2 rounded bg-red-100 text-red-700 text-sm",children:N}),I&&u.jsx("div",{className:"p-2 rounded bg-green-100 text-green-700 text-sm",children:I}),u.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Name"}),u.jsx("input",{type:"text",name:"name",value:t.name||"",onChange:z,className:W,disabled:!a})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Email"}),u.jsx("input",{type:"email",name:"email",value:t.email||"",onChange:z,className:W,disabled:!0})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Phone"}),u.jsx("input",{type:"tel",name:"phoneNo",value:t.phoneNo||"",onChange:z,className:W,disabled:!a})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Batch"}),u.jsxs("select",{name:"batch",value:t.batch||"20/21",onChange:z,className:W,disabled:!a,children:[u.jsx("option",{value:"20/21",children:"20/21"}),u.jsx("option",{value:"21/22",children:"21/22"}),u.jsx("option",{value:"22/23",children:"22/23"}),u.jsx("option",{value:"23/24",children:"23/24"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Study department"}),u.jsxs("select",{name:"studyDepartment",value:t.studyDepartment||"ITT",onChange:z,className:W,disabled:!a,children:[u.jsx("option",{value:"ITT",children:"ITT"}),u.jsx("option",{value:"EET",children:"EET"}),u.jsx("option",{value:"MTT",children:"MTT"}),u.jsx("option",{value:"BPT",children:"BPT"}),u.jsx("option",{value:"Food",children:"Food"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Gender"}),u.jsxs("select",{name:"gender",value:t.gender||"male",onChange:z,className:W,disabled:!a,children:[u.jsx("option",{value:"male",children:"Male"}),u.jsx("option",{value:"female",children:"Female"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Registration number"}),u.jsx("input",{type:"text",name:"registrationNumber",value:t.registrationNumber||"",onChange:z,className:W,disabled:!a})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Card"}),u.jsx("input",{type:"text",name:"cardNumber",value:t.cardNumber||"",onChange:z,className:W,disabled:!a})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Birthday"}),u.jsx("input",{type:"date",name:"birthday",value:t.birthday||"",onChange:z,className:W,disabled:!a})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Work department"}),u.jsxs("select",{name:"department",value:t.department||"videography",onChange:z,className:W,disabled:!a,children:[u.jsx("option",{value:"videography",children:"Videography"}),u.jsx("option",{value:"photography",children:"Photography"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"First priority (work)"}),u.jsxs("select",{name:"firstPriority",value:t.firstPriority||"videography",onChange:z,className:W,disabled:!a,children:[u.jsx("option",{value:"videography",children:"Videography"}),u.jsx("option",{value:"photography",children:"Photography"})]})]})]})]}),u.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 sm:p-6 space-y-3",children:[u.jsxs("div",{className:"flex justify-between items-center mb-1",children:[u.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"Change password"}),l?u.jsx("button",{type:"button",onClick:ce,className:"text-sm px-3 py-1 rounded bg-gray-300 text-gray-800 hover:bg-gray-400",children:"Cancel"}):u.jsx("button",{type:"button",onClick:Q,className:"text-sm px-3 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",children:"Change"})]}),T&&u.jsx("div",{className:"p-2 rounded bg-red-100 text-red-700 text-sm",children:T}),D&&u.jsx("div",{className:"p-2 rounded bg-green-100 text-green-700 text-sm",children:D}),l&&u.jsxs("form",{onSubmit:me,className:"space-y-3 mt-2",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"New password"}),u.jsx("input",{type:"password",name:"newPassword",value:J.newPassword,onChange:X=>O(Y=>({...Y,newPassword:X.target.value})),className:W,minLength:6,required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Confirm new password"}),u.jsx("input",{type:"password",name:"confirmPassword",value:J.confirmPassword,onChange:X=>O(Y=>({...Y,confirmPassword:X.target.value})),className:W,minLength:6,required:!0})]}),u.jsx("button",{type:"submit",disabled:y,className:"w-full bg-blue-600 text-white py-2 rounded font-semibold text-sm hover:bg-blue-700 disabled:opacity-50",children:y?"Updating...":"Update password"})]})]})]})]})]})},UF=()=>{const[t,e]=se.useState([]),[n,r]=se.useState(!0),[s,i]=se.useState(""),[a,o]=se.useState("all"),[l,c]=se.useState("all"),d=qr();se.useEffect(()=>{(async()=>{try{const S=(await An(At(ze,"users"))).docs.map(I=>({id:I.id,...I.data()}));e(S)}catch(N){console.error("Error loading users:",N)}finally{r(!1)}})()},[]);const g=s.trim().toLowerCase(),y=t.filter(p=>{if(a!=="all"&&(p.batch||"")!==a||l!=="all"&&(p.studyDepartment||"")!==l)return!1;if(!g)return!0;const N=(p.name||"").toLowerCase(),S=(p.cardNumber||"").toLowerCase();return N.includes(g)||S.includes(g)});return u.jsxs("div",{className:"min-h-screen bg-gray-100",children:[u.jsx(pn,{userType:"admin"}),u.jsxs("main",{className:"container mx-auto px-4 py-6 sm:py-8 max-w-4xl",children:[u.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-800 mb-4",children:"Manage users"}),u.jsxs("div",{className:"mb-4 flex flex-col sm:flex-row gap-3 sm:items-center",children:[u.jsxs("div",{className:"flex-1 relative",children:[u.jsx(na,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 text-sm"}),u.jsx("input",{type:"text",placeholder:"Search by name or card...",value:s,onChange:p=>i(p.target.value),className:"w-full pl-9 pr-3 py-2 border rounded text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),u.jsx("div",{className:"w-full sm:w-40",children:u.jsxs("select",{value:a,onChange:p=>o(p.target.value),className:"w-full px-3 py-2 border rounded text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[u.jsx("option",{value:"all",children:"All batches"}),u.jsx("option",{value:"20/21",children:"20/21"}),u.jsx("option",{value:"21/22",children:"21/22"}),u.jsx("option",{value:"22/23",children:"22/23"}),u.jsx("option",{value:"23/24",children:"23/24"})]})}),u.jsx("div",{className:"w-full sm:w-40",children:u.jsxs("select",{value:l,onChange:p=>c(p.target.value),className:"w-full px-3 py-2 border rounded text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[u.jsx("option",{value:"all",children:"All departments"}),u.jsx("option",{value:"ITT",children:"ITT"}),u.jsx("option",{value:"EET",children:"EET"}),u.jsx("option",{value:"MTT",children:"MTT"}),u.jsx("option",{value:"BPT",children:"BPT"}),u.jsx("option",{value:"Food",children:"Food"})]})})]}),n?u.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[u.jsx(Fi,{className:"animate-spin"}),u.jsx("span",{children:"Loading users..."})]}):y.length===0?u.jsx("p",{className:"text-gray-600 text-sm sm:text-base",children:"No users match your search."}):u.jsx("div",{className:"bg-white rounded-lg shadow-md divide-y",children:y.map(p=>u.jsxs("button",{onClick:()=>d(`/users/${p.id}`),className:"w-full text-left px-4 py-3 flex items-center justify-between hover:bg-gray-50",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[p.photoURL?u.jsx("img",{src:p.photoURL,alt:p.name||"User",className:"w-10 h-10 rounded-full object-cover border border-gray-200 bg-gray-100"}):u.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center text-blue-600",children:u.jsx(sE,{})}),u.jsxs("div",{children:[u.jsx("p",{className:"font-semibold text-gray-800 text-sm sm:text-base",children:p.name||"No name"}),u.jsxs("p",{className:"flex items-center gap-1 text-xs sm:text-sm text-gray-600",children:[u.jsx(mF,{})," ",p.email]}),u.jsxs("p",{className:"text-xs text-gray-500",children:["Card: ",p.cardNumber||"-","  Batch: ",p.batch||"-","  Dept: ",p.studyDepartment||"-"]})]})]}),u.jsx("span",{className:"text-xs sm:text-sm text-gray-500",children:p.userType||"user"})]},p.id))})]})]})},VF=()=>{const{userId:t}=tf(),e=qr(),[n,r]=se.useState(null),[s,i]=se.useState([]),[a,o]=se.useState(!0);se.useEffect(()=>{(async()=>{try{const g=await Li($t(ze,"users",t));g.exists()&&r({id:t,...g.data()});const N=(await An(At(ze,"works"))).docs.map(S=>({id:S.id,...S.data()})).filter(S=>S.assignedUsers?Array.isArray(S.assignedUsers)?S.assignedUsers.includes(t):S.assignedUsers===t:!1);N.sort((S,I)=>{const w=S.date?new Date(S.date).getTime():0;return(I.date?new Date(I.date).getTime():0)-w}),i(N)}catch(g){console.error("Error loading user details:",g)}finally{o(!1)}})()},[t]);const l=d=>{const y=(d.assignedUserDetails||[]).find(p=>p.userId===t);return(y==null?void 0:y.roles)||[]},c=(d,g)=>{const y=`${t}_${g}`;return(d.roleCompletion||{})[y]==="done"};return u.jsxs("div",{className:"min-h-screen bg-gray-100",children:[u.jsx(pn,{userType:"admin"}),u.jsxs("main",{className:"container mx-auto px-4 py-6 sm:py-8 max-w-4xl",children:[a&&u.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[u.jsx(Fi,{className:"animate-spin"}),u.jsx("span",{children:"Loading user..."})]}),!a&&!n&&u.jsx("p",{className:"text-gray-600 text-sm sm:text-base",children:"User not found."}),!a&&n&&u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[n.photoURL?u.jsx("img",{src:n.photoURL,alt:n.name||"User",className:"w-16 h-16 sm:w-20 sm:h-20 rounded-full object-cover border border-gray-200 bg-gray-100"}):u.jsx("div",{className:"w-16 h-16 sm:w-20 sm:h-20 rounded-full bg-gray-300 flex items-center justify-center text-2xl font-semibold text-white",children:(n.name||"U").charAt(0).toUpperCase()}),u.jsxs("div",{children:[u.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-800",children:n.name||"User details"}),u.jsx("p",{className:"text-sm sm:text-base text-gray-600",children:n.email})]})]}),u.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 sm:p-6 mb-6 text-sm sm:text-base space-y-2",children:[u.jsxs("p",{children:[u.jsx("span",{className:"font-semibold",children:"Phone:"})," ",n.phoneNo||"-"]}),u.jsxs("p",{children:[u.jsx("span",{className:"font-semibold",children:"Batch:"})," ",n.batch||"-"]}),u.jsxs("p",{children:[u.jsx("span",{className:"font-semibold",children:"Study department:"})," ",n.studyDepartment||"-"]}),u.jsxs("p",{children:[u.jsx("span",{className:"font-semibold",children:"Gender:"})," ",n.gender||"-"]}),u.jsxs("p",{children:[u.jsx("span",{className:"font-semibold",children:"Registration no:"})," ",n.registrationNumber||"-"]}),u.jsxs("p",{children:[u.jsx("span",{className:"font-semibold",children:"Card:"})," ",n.cardNumber||"-"]}),u.jsxs("p",{children:[u.jsx("span",{className:"font-semibold",children:"Work departments:"})," ",Array.isArray(n.departments)?n.departments.join(", "):n.department||"-"]}),u.jsxs("p",{children:[u.jsx("span",{className:"font-semibold",children:"First priority:"})," ",n.firstPriority||"-"]}),u.jsxs("p",{children:[u.jsx("span",{className:"font-semibold",children:"User type:"})," ",n.userType||"user"]})]}),u.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-3",children:"Task history"}),s.length===0?u.jsx("p",{className:"text-gray-600 text-sm sm:text-base",children:"No tasks for this user."}):u.jsx("div",{className:"space-y-3",children:s.map(d=>{const g=l(d),y=d.status||"incomplete";return u.jsxs("div",{onClick:()=>e(`/tasks/${d.id}`),className:"bg-white rounded-lg shadow p-3 sm:p-4 text-sm sm:text-base cursor-pointer hover:shadow-md hover:bg-gray-50 transition",children:[u.jsxs("div",{className:"flex justify-between items-start mb-2",children:[u.jsxs("div",{className:"flex-1",children:[u.jsx("h3",{className:"font-semibold text-gray-800",children:d.title||"Untitled task"}),d.date&&u.jsxs("span",{className:"flex items-center gap-1 text-xs text-gray-500 mt-1",children:[u.jsx(qn,{})," ",new Date(d.date).toLocaleDateString()]})]}),u.jsx("span",{className:`px-2 py-1 rounded text-xs font-semibold capitalize ${y==="complete"?"bg-green-100 text-green-800":y==="done"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:y})]}),d.description&&u.jsx("p",{className:"text-gray-700 text-sm mb-2",children:d.description}),g.length>0&&u.jsxs("div",{className:"mt-2",children:[u.jsx("p",{className:"text-xs font-semibold text-gray-700 mb-1",children:"Assigned work types:"}),u.jsx("div",{className:"flex flex-wrap gap-1",children:g.map(p=>{const N=c(d,p);return u.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 rounded text-xs ${N?"bg-green-100 text-green-800":"bg-gray-100 text-gray-700"}`,children:[N&&u.jsx(lo,{className:"text-xs"}),p]},p)})})]})]},d.id)})})]})]})]})},BF=()=>{const[t,e]=se.useState(null),[n,r]=se.useState([]),[s,i]=se.useState([]),[a,o]=se.useState(!0);se.useEffect(()=>{const c=jc(qs,d=>{e(d||null)});return()=>c()},[]),se.useEffect(()=>{if(!t)return;(async()=>{o(!0);try{const y=(await An(At(ze,"works"))).docs.map(S=>({id:S.id,...S.data()})).filter(S=>S.status==="complete"&&Array.isArray(S.assignedUsers)&&S.assignedUsers.includes(t.uid));y.sort((S,I)=>{const w=S.date?new Date(S.date).getTime():0;return(I.date?new Date(I.date).getTime():0)-w}),r(y);const N=(await An(xc(At(ze,"rejectedWorks"),qh("userId","==",t.uid)))).docs.map(S=>({id:S.id,...S.data()}));N.sort((S,I)=>{const w=S.approvedAt?new Date(S.approvedAt).getTime():0;return(I.approvedAt?new Date(I.approvedAt).getTime():0)-w}),i(N)}catch(d){console.error("Error loading task history:",d)}finally{o(!1)}})()},[t]);const l=c=>{if(!t)return[];const g=(c.assignedUserDetails||[]).find(y=>y.userId===t.uid);return(g==null?void 0:g.roles)||[]};return u.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50",children:[u.jsx(pn,{userType:"user"}),u.jsxs("main",{className:"container mx-auto px-4 py-8 max-w-4xl",children:[u.jsxs("div",{className:"mb-8",children:[u.jsx("h1",{className:"text-3xl sm:text-4xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-purple-600 mb-2",children:"Task History"}),u.jsx("p",{className:"text-gray-600 text-sm sm:text-base",children:"View all your completed and rejected tasks"})]}),a?u.jsxs("div",{className:"flex flex-col items-center justify-center py-20",children:[u.jsx(Fi,{className:"animate-spin text-5xl text-blue-600 mb-4"}),u.jsx("p",{className:"text-gray-600",children:"Loading history..."})]}):n.length===0&&s.length===0?u.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-12 text-center border border-gray-100",children:[u.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-blue-100 to-purple-100 rounded-full flex items-center justify-center mx-auto mb-4",children:u.jsx(qn,{className:"text-4xl text-blue-600"})}),u.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:"No History"}),u.jsx("p",{className:"text-gray-600",children:"You have no completed or rejected tasks yet."})]}):u.jsxs(u.Fragment,{children:[n.length>0&&u.jsxs("section",{className:"mb-8",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[u.jsx("div",{className:"w-1 h-6 bg-gradient-to-b from-green-500 to-emerald-600 rounded-full"}),u.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-gray-800",children:"Completed Tasks"}),u.jsx("span",{className:"bg-gradient-to-r from-green-500 to-emerald-600 text-white text-xs font-bold px-3 py-1 rounded-full",children:n.length})]}),u.jsx("div",{className:"space-y-4",children:n.map(c=>{const d=l(c);return u.jsxs("div",{className:"bg-white rounded-2xl shadow-md p-5 border border-green-100",children:[u.jsxs("div",{className:"flex items-start justify-between mb-3",children:[u.jsxs("div",{className:"flex-1",children:[u.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-1",children:c.title||"Task"}),c.date&&u.jsxs("p",{className:"flex items-center gap-2 text-xs text-gray-500",children:[u.jsx(qn,{}),new Date(c.date).toLocaleDateString()]})]}),u.jsxs("div",{className:"flex items-center gap-2 text-green-600",children:[u.jsx(lo,{className:"text-2xl"}),u.jsx("span",{className:"text-xs font-semibold",children:"Completed"})]})]}),c.description&&u.jsx("p",{className:"text-gray-700 text-sm mb-3",children:c.description}),u.jsx("div",{className:"flex flex-wrap gap-2",children:d.map(g=>u.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-semibold bg-green-100 text-green-800",children:g},g))})]},c.id)})})]}),s.length>0&&u.jsxs("section",{children:[u.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[u.jsx("div",{className:"w-1 h-6 bg-gradient-to-b from-red-500 to-rose-600 rounded-full"}),u.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-gray-800",children:"Rejected Tasks"}),u.jsx("span",{className:"bg-gradient-to-r from-red-500 to-rose-600 text-white text-xs font-bold px-3 py-1 rounded-full",children:s.length})]}),u.jsx("div",{className:"space-y-4",children:s.map(c=>u.jsxs("div",{className:"bg-white rounded-2xl shadow-md p-5 border border-red-100",children:[u.jsxs("div",{className:"flex items-start justify-between mb-3",children:[u.jsxs("div",{className:"flex-1",children:[u.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-1",children:c.title||"Task"}),c.date&&u.jsxs("p",{className:"flex items-center gap-2 text-xs text-gray-500",children:[u.jsx(qn,{}),new Date(c.date).toLocaleDateString()]})]}),u.jsxs("div",{className:"flex items-center gap-2 text-red-600",children:[u.jsx(Sl,{className:"text-2xl"}),u.jsx("span",{className:"text-xs font-semibold",children:"You Rejected"})]})]}),c.description&&u.jsx("p",{className:"text-gray-700 text-sm mb-3",children:c.description}),u.jsxs("div",{className:"bg-red-50 rounded-xl p-4 border border-red-100",children:[u.jsxs("div",{className:"flex items-start gap-2 mb-2",children:[u.jsx(gF,{className:"text-red-600 mt-0.5"}),u.jsxs("div",{className:"flex-1",children:[u.jsx("p",{className:"text-xs font-semibold text-red-800 mb-1",children:"Rejection Reason:"}),u.jsx("p",{className:"text-sm text-gray-700",children:c.rejectionReason||"-"})]})]}),u.jsxs("div",{className:"text-xs text-gray-500 mt-2 flex flex-col gap-1",children:[u.jsxs("p",{children:["Rejected: ",new Date(c.rejectedAt).toLocaleString()]}),u.jsxs("p",{children:["Approved: ",new Date(c.approvedAt).toLocaleString()]})]})]})]},c.id))})]})]})]})]})},zF=["videography","editing"],qF=()=>{const{taskId:t}=tf(),e=qr(),[n,r]=se.useState(null),[s,i]=se.useState([]),[a,o]=se.useState([]),[l,c]=se.useState([]),[d,g]=se.useState([]),[y,p]=se.useState(!0),[N,S]=se.useState(!1),[I,w]=se.useState(!1),[T,j]=se.useState(!1),[D,H]=se.useState(""),[J,O]=se.useState(""),[_,A]=se.useState(""),[R,E]=se.useState("");se.useEffect(()=>{(async()=>{p(!0);try{const le=(await An(At(ze,"users"))).docs.map(ve=>({id:ve.id,...ve.data()}));le.sort((ve,Se)=>{const ke=(ve.name||"").toLowerCase(),Ue=(Se.name||"").toLowerCase();return ke.localeCompare(Ue)}),i(le);const ee=(await An(At(ze,"inventory"))).docs.map(ve=>({id:ve.id,...ve.data()}));ee.sort((ve,Se)=>{const ke=(ve.itemName||"").toLowerCase(),Ue=(Se.itemName||"").toLowerCase();return ke.localeCompare(Ue)}),o(ee);const fe=await Li($t(ze,"works",t));if(fe.exists()){const ve={id:fe.id,...fe.data()};r(ve),c(ve.assignedUserDetails||[]),g(ve.assignedItems||[]),(async()=>{try{const Se=ve.assignedItems||[];if(!Se.length||!("caches"in window))return;const ke=await caches.open("tmv-task-assets-v1"),Ue=Se.map(V=>a.find(De=>De.id===V)).filter(Boolean).map(V=>V.imageUrl||V.photoURL||"").filter(V=>typeof V=="string"&&V.length);await Promise.all(Ue.map(async V=>{try{const De=await fetch(V,{mode:"no-cors"});await ke.put(V,De.clone())}catch{}}))}catch(Se){console.warn("prefetch admin item images failed",Se)}})()}else H("Task not found.")}catch(ie){console.error(ie),H("Failed to load task.")}finally{p(!1)}})()},[t]);const C=async({task:Y,usersMap:ie={},itemsMap:le={}})=>{try{const{id:xe,title:ee,description:fe,date:ve,deadline:Se,assignedUserDetails:ke=[],assignedItems:Ue=[],userAcceptance:V={},roleCompletion:De={}}=Y,Ze=()=>{if((Y.status||"").toLowerCase()==="complete")return"completed";const qe=Y.assignedUserDetails||[],Ke=Y.roleCompletion||{},ut=Y.userAcceptance||{};return!qe.length||!qe.every(en=>ut[en.userId]==="accepted")?"pending":qe.every(en=>(en.roles||[]).every(qt=>Ke[`${en.userId}_${qt}`]==="done"))?"done":"accepted"},Ve=qe=>{const Ke={pending:{bg:"#fef3c7",text:"#b45309"},accepted:{bg:"#fed7aa",text:"#b45309"},done:{bg:"#bfdbfe",text:"#1e40af"},completed:{bg:"#dcfce7",text:"#166534"}};return Ke[qe]||Ke.pending},Ce=(ke||[]).map(({userId:qe,roles:Ke})=>{const ut=ie[qe]||{},$n=V[qe]||"pending";return{id:qe,name:ut.name||ut.displayName||"Unknown",photoURL:ut.photoURL||ut.avatarUrl||"",roles:Ke||[],acceptanceStatus:$n}}),Xe=1080,He=1360,st=document.createElement("canvas");st.width=Xe,st.height=He;const Ae=st.getContext("2d");Ae.fillStyle="#f3f4f6",Ae.fillRect(0,0,Xe,He);const bt=48,gt=bt,$e=bt,at=Xe-bt*2,Nt=He-bt*2;Ae.fillStyle="#ffffff";const Ye=24;Ae.beginPath(),Ae.moveTo(gt+Ye,$e),Ae.lineTo(gt+at-Ye,$e),Ae.quadraticCurveTo(gt+at,$e,gt+at,$e+Ye),Ae.lineTo(gt+at,$e+Nt-Ye),Ae.quadraticCurveTo(gt+at,$e+Nt,gt+at-Ye,$e+Nt),Ae.lineTo(gt+Ye,$e+Nt),Ae.quadraticCurveTo(gt,$e+Nt,gt,$e+Nt-Ye),Ae.lineTo(gt,$e+Ye),Ae.quadraticCurveTo(gt,$e,gt+Ye,$e),Ae.closePath(),Ae.fill(),Ae.strokeStyle="#e5e7eb",Ae.lineWidth=2,Ae.stroke();const xt=40;let et=gt+xt,Ot=$e+xt;const Ft=at-xt*2,Ge=(qe,Ke,ut,$n,zt,en)=>{Ae.font=en;const qt=(qe||"").split(" ");let nt="",Ut=$n;for(let Vn=0;Vn<qt.length;Vn++){const En=nt+qt[Vn]+" ";Ae.measureText(En).width>Ke&&Vn>0?(Ae.fillText(nt.trim(),ut,Ut),nt=qt[Vn]+" ",Ut+=zt):nt=En}return nt&&(Ae.fillText(nt.trim(),ut,Ut),Ut+=zt),Ut};Ae.fillStyle="#3f3f3f",Ae.textBaseline="top",Ot=Ge(ee||"Task",Ft-200,et,Ot,56,'bold 48px system-ui, -apple-system, Roboto, "Segoe UI", "Helvetica Neue", Arial');const ft=Ze(),kt=Ve(ft);Ae.font='500 22px system-ui, -apple-system, Roboto, "Segoe UI", "Helvetica Neue", Arial';const ot=Ae.measureText(ft).width+32,Pt=48,Qe=gt+at-xt-ot-8,tt=$e+xt+8;Ae.fillStyle=kt.bg,Ae.fillRect(Qe,tt,ot,Pt),Ae.fillStyle=kt.text,Ae.fillText(ft,Qe+16,tt+12),Ot+=16;const It=ve||Se;if(It){Ae.fillStyle="#6b7280",Ae.font='400 26px system-ui, -apple-system, Roboto, "Segoe UI", "Helvetica Neue", Arial';const qe=new Date(It).toLocaleDateString(void 0,{day:"numeric",month:"short",year:"numeric"});Ae.fillText(`Date: ${qe}`,et,Ot),Ot+=44}if(fe&&(Ae.fillStyle="#374151",Ot=Ge(fe,Ft,et,Ot+12,36,'400 24px system-ui, -apple-system, Roboto, "Segoe UI", "Helvetica Neue", Arial')),(Ce||[]).length){Ot+=16,Ae.fillStyle="#3f3f3f",Ae.font='600 26px system-ui, -apple-system, Roboto, "Segoe UI", "Helvetica Neue", Arial',Ae.fillText("Assigned to:",et,Ot),Ot+=44;const qe=72,Ke=20,ut=Ce.map(zt=>new Promise(en=>{if(!zt||!zt.photoURL)return en(null);const qt=new Image;qt.crossOrigin="anonymous",qt.onload=()=>en(qt),qt.onerror=()=>en(null),qt.src=zt.photoURL})),$n=await Promise.all(ut);for(let zt=0;zt<Ce.length;zt++){const en=Ce[zt],qt=$n[zt],nt=et,Ut=Ot;if(Ae.save(),Ae.beginPath(),Ae.arc(nt+qe/2,Ut+qe/2,qe/2,0,Math.PI*2),Ae.closePath(),Ae.fillStyle="#e5e7eb",Ae.fill(),qt){Ae.save(),Ae.beginPath(),Ae.arc(nt+qe/2,Ut+qe/2,qe/2,0,Math.PI*2),Ae.clip();const hn=Math.max(qe/qt.width,qe/qt.height),kr=qt.width*hn,Dr=qt.height*hn,Hr=nt+(qe-kr)/2,bs=Ut+(qe-Dr)/2;Ae.drawImage(qt,Hr,bs,kr,Dr),Ae.restore()}else{Ae.fillStyle="#6b7280",Ae.font='600 26px system-ui, -apple-system, Roboto, "Segoe UI", "Helvetica Neue", Arial';const hn=(en.name||"").split(" ").map(kr=>kr[0]).slice(0,2).join("").toUpperCase();Ae.fillText(hn,nt+16,Ut+20)}Ae.restore();const Vn=nt+qe+20;Ae.fillStyle="#111827",Ae.font='600 26px system-ui, -apple-system, Roboto, "Segoe UI", "Helvetica Neue", Arial',Ae.fillText(en.name||"Unknown",Vn,Ut+4);const En=en.acceptanceStatus;let Nn,on,tn;En==="accepted"?(Nn=" Accepted",on="#dcfce7",tn="#16a34a"):En==="rejected"?(Nn=" Rejected",on="#fee2e2",tn="#dc2626"):(Nn=" Pending",on="#fef3c7",tn="#b45309"),Ae.font='500 22px system-ui, -apple-system, Roboto, "Segoe UI", "Helvetica Neue", Arial';const Gt=Ae.measureText(Nn).width+24,ss=44,Nr=gt+at-xt-Gt-8,Bn=Ut+10;Ae.fillStyle=on,Ae.fillRect(Nr,Bn,Gt,ss),Ae.fillStyle=tn,Ae.fillText(Nn,Nr+12,Bn+10);const Sr=en.roles||[];let Ar=Vn;const Er=Ut+40;Ae.font='400 22px system-ui, -apple-system, Roboto, "Segoe UI", "Helvetica Neue", Arial';for(let hn=0;hn<Sr.length;hn++){const kr=Sr[hn],Dr=`${en.id}_${kr}`,Hr=De[Dr]==="done",bs=Hr?` ${kr}`:kr,gi=Ae.measureText(bs).width+20;Ae.fillStyle=Hr?"#d1fae5":"#f0f0f0",Ae.fillRect(Ar,Er,gi,36),Ae.fillStyle=Hr?"#059669":"#5b6b7d",Ae.fillText(bs,Ar+10,Er+24-6),Ar+=gi+12}Ot+=qe+Ke}}st.toBlob(qe=>{if(!qe)return;const Ke=URL.createObjectURL(qe),ut=document.createElement("a");ut.href=Ke,ut.download=`task-${xe||Date.now()}.png`,document.body.appendChild(ut),ut.click(),ut.remove(),setTimeout(()=>URL.revokeObjectURL(Ke),3e3)},"image/png")}catch(xe){console.warn("generateAndDownloadTaskImage error",xe)}},L=Y=>{if(!T)return;const ie=l.find(le=>le.userId===Y);c(ie?le=>le.filter(xe=>xe.userId!==Y):le=>[...le,{userId:Y,roles:["videography"]}])},z=(Y,ie)=>{T&&c(le=>le.map(xe=>{if(xe.userId!==Y)return xe;const fe=xe.roles.includes(ie)?xe.roles.filter(ve=>ve!==ie):[...xe.roles,ie];return{...xe,roles:fe.length?fe:[ie]}}))},Z=Y=>{T&&g(ie=>ie.includes(Y)?ie.filter(le=>le!==Y):[...ie,Y])},ae=Y=>{if(!T)return;const{name:ie,value:le}=Y.target;r(xe=>({...xe,[ie]:le}))},ue=async Y=>{if(Y.preventDefault(),!!n){if(S(!0),H(""),O(""),!n.date&&!n.deadline){S(!1),H("Please set a date or a deadline.");return}try{const{id:ie,...le}=n,xe=n.assignedUsers||[],ee=l.map(ve=>ve.userId);await Br($t(ze,"works",n.id),{...le,assignedUsers:ee,assignedUserDetails:l,assignedItems:d});const fe=ee.filter(ve=>!xe.includes(ve));if(fe.length>0){const ve=fe.map(async De=>{const Ve=(await Li($t(ze,"users",De))).data();return{email:(Ve==null?void 0:Ve.email)||null,phone:(Ve==null?void 0:Ve.phoneNumber)||(Ve==null?void 0:Ve.phone)||null}}),Se=await Promise.all(ve),ke=Se.map(De=>De.email).filter(Boolean),Ue=Se.map(De=>De.phone).filter(Boolean),V={lines:[`Title: ${n.title}`,...n.date?[`Date: ${n.date}`]:[],...n.deadline?[`Deadline: ${n.deadline}`]:[],`Description: ${n.description}`]};if(ke.length>0){const De=V.lines,Ze=[`<p><b>Title:</b> ${n.title}</p>`,...n.date?[`<p><b>Date:</b> ${n.date}</p>`]:[],...n.deadline?[`<p><b>Deadline:</b> ${n.deadline}</p>`]:[],`<p><b>Description:</b> ${n.description}</p>`];await Jr(At(ze,"mail"),{to:ke,message:{subject:`You were assigned to a work: ${n.title}`,text:`You have been assigned to the work "${n.title}".

`+De.join(`
`)+`

Kindly review and confirm the work by visiting the Videography Manager website.`,html:`<p>Hello,</p>
        <p>You have been assigned a work. Please find the details below:</p>
        ${Ze.join("")}
        <p>Kindly review and confirm the work by visiting the <a href="https://tmv.fotmv.online/">Videography Manager</a> Website</p>
        <p>If you encounter any issues or need further assistance, feel free to contact me.</p>
        <p>Thank you.</p>
        <p>Best regards,</p>
        <p style="color:#A3A9AD">
          <strong>Mihiru Dahanayake</strong><br>
          <i>Acting Videography Department Head<br>FOT Media<br>Faculty Of Technology<br>Rajarata University of Sri Lanka<br>
          <a href="tel:+94703426554" style="color:#0066cc; text-decoration:none;">070 342 6554</a><br>
          <a href="mailto:mihirudahanayake@gmail.com" style="color:#0066cc; text-decoration:none;">mihiru.online@gmail.com</a></i><br>
        </p>`}})}if(Ue.length>0){const De=`Hello!

You have been assigned to a work:

`+V.lines.join(`
`)+`

Kindly review and confirm the work by visiting the Videography Manager website: https://tmv.fotmv.online/

If you encounter any issues, feel free to contact me.

Best regards,
Mihiru Dahanayake
Acting Videography Department Head
FOT Media, Rajarata University
070 342 6554`;await Jr(At(ze,"whatsapp"),{to:Ue,message:De})}}try{const ve={};s.forEach(ke=>{ve[ke.id]=ke});const Se={};a.forEach(ke=>{Se[ke.id]=ke}),await C({task:{id:n.id,title:n.title,description:n.description,date:n.date,deadline:n.deadline,assignedUserDetails:l,assignedItems:d,status:n.status||"pending",userAcceptance:n.userAcceptance||{},roleCompletion:n.roleCompletion||{}},usersMap:ve,itemsMap:Se})}catch(ve){console.warn("failed to generate task image",ve)}O("Task updated successfully."),j(!1)}catch(ie){console.error(ie),H("Failed to update task.")}finally{S(!1)}}},Q=async()=>{if(window.confirm("Are you sure you want to delete this task?")){w(!0),H(""),O("");try{await Xv($t(ze,"works",t)),O("Task deleted successfully."),setTimeout(()=>e("/work-list"),1500)}catch(Y){console.error(Y),H("Failed to delete task.")}finally{w(!1)}}};if(y)return u.jsxs("div",{className:"min-h-screen bg-gray-100",children:[u.jsx(pn,{userType:"admin"}),u.jsxs("div",{className:"flex flex-col justify-center items-center h-64",children:[u.jsx(Fi,{className:"animate-spin text-4xl text-blue-600 mb-4"}),u.jsx("p",{className:"text-gray-600",children:"Loading task..."})]})]});if(!n)return u.jsxs("div",{className:"min-h-screen bg-gray-100",children:[u.jsx(pn,{userType:"admin"}),u.jsxs("main",{className:"container mx-auto px-4 py-6 sm:py-8 max-w-3xl",children:[u.jsx("p",{className:"text-gray-600 mb-4",children:D||"Task not found."}),u.jsx("button",{onClick:()=>e(-1),className:"px-4 py-2 rounded bg-blue-600 text-white text-sm hover:bg-blue-700",children:"Back"})]})]});const ce=Y=>l.some(ie=>ie.userId===Y),me=Y=>{var ie;return((ie=l.find(le=>le.userId===Y))==null?void 0:ie.roles)||[]},ye=R.trim().toLowerCase(),M=s.filter(Y=>{if(!ye)return!0;const ie=(Y.name||"").toLowerCase(),le=(Y.cardNumber||"").toLowerCase();return ie.includes(ye)||le.includes(ye)}),W=_.trim().toLowerCase(),X=a.filter(Y=>{if(!W)return!0;const ie=(Y.itemName||"").toLowerCase(),le=(Y.itemNo||"").toLowerCase();return ie.includes(W)||le.includes(W)});return u.jsxs("div",{className:"min-h-screen bg-gray-100",children:[u.jsx(pn,{userType:"admin"}),u.jsxs("main",{className:"container mx-auto px-4 py-6 sm:py-8 max-w-3xl",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-800",children:"Task details"}),u.jsxs("div",{className:"flex gap-2",children:[T?u.jsxs(u.Fragment,{children:[u.jsx("button",{onClick:ue,disabled:N,className:"px-3 py-1 rounded bg-blue-600 text-white text-sm hover:bg-blue-700 disabled:opacity-50",children:N?"Saving...":"Save"}),u.jsx("button",{onClick:()=>{j(!1),O(""),H(""),c(n.assignedUserDetails||[]),g(n.assignedItems||[])},className:"px-3 py-1 rounded bg-gray-300 text-gray-800 text-sm hover:bg-gray-400",children:"Cancel"})]}):u.jsxs(u.Fragment,{children:[u.jsx("button",{onClick:()=>{j(!0),H(""),O("")},className:"px-3 py-1 rounded bg-blue-600 text-white text-sm hover:bg-blue-700",children:"Edit"}),u.jsxs("button",{onClick:Q,disabled:I,className:"px-3 py-1 rounded bg-red-600 text-white text-sm hover:bg-red-700 disabled:opacity-50 inline-flex items-center gap-1",children:[u.jsx(nE,{}),I?"Deleting...":"Delete"]})]}),u.jsx("button",{onClick:()=>e(-1),className:"px-3 py-1 rounded bg-gray-200 text-gray-800 text-sm hover:bg-gray-300",children:"Back"})]})]}),D&&u.jsx("div",{className:"mb-3 p-2 rounded bg-red-100 text-red-700 text-sm",children:D}),J&&u.jsx("div",{className:"mb-3 p-2 rounded bg-green-100 text-green-700 text-sm",children:J}),u.jsxs("form",{className:"space-y-4",onSubmit:ue,children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Title"}),u.jsx("input",{type:"text",name:"title",value:n.title||"",onChange:ae,disabled:!T,className:"w-full px-3 py-2 border rounded text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Description"}),u.jsx("textarea",{name:"description",value:n.description||"",onChange:ae,disabled:!T,rows:3,className:"w-full px-3 py-2 border rounded text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),u.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Date"}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(qn,{className:"text-gray-500"}),u.jsx("input",{type:"date",name:"date",value:n.date?new Date(n.date).toISOString().slice(0,10):"",onChange:ae,disabled:!T,className:"flex-1 px-3 py-2 border rounded text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Deadline"}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(qn,{className:"text-gray-500"}),u.jsx("input",{type:"date",name:"deadline",value:n.deadline?new Date(n.deadline).toISOString().slice(0,10):"",onChange:ae,disabled:!T,className:"flex-1 px-3 py-2 border rounded text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),u.jsx("p",{className:"text-[11px] text-gray-500 mt-1",children:"Date or deadline is required, but each is optional on its own."})]})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:[u.jsx(xf,{className:"inline mr-2"}),"Assigned users and work types"]}),T&&u.jsxs("div",{className:"relative mb-3",children:[u.jsx(na,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 text-xs"}),u.jsx("input",{type:"text",placeholder:"Search users by name or card...",value:R,onChange:Y=>E(Y.target.value),className:"w-full pl-8 pr-3 py-2 border rounded text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),u.jsx("div",{className:"bg-white rounded border p-3 max-h-80 overflow-y-auto",children:M.length===0?u.jsx("p",{className:"text-xs text-gray-500",children:"No users found."}):M.map(Y=>{const ie=ce(Y.id),le=me(Y.id);return u.jsxs("div",{className:"mb-2 p-2 rounded hover:bg-gray-50",children:[u.jsxs("label",{className:"flex items-center cursor-pointer",children:[u.jsx("input",{type:"checkbox",checked:ie,onChange:()=>L(Y.id),disabled:!T,className:"mr-3 w-4 h-4"}),u.jsx("div",{className:"flex-1",children:u.jsxs("p",{className:"text-sm",children:[Y.name||"No name"," ",u.jsxs("span",{className:"text-xs text-gray-500",children:["(",Y.cardNumber||"-",")"]})]})})]}),ie&&u.jsx("div",{className:"mt-1 ml-7 flex flex-wrap gap-2 text-xs sm:text-sm",children:zF.map(xe=>u.jsx("button",{type:"button",onClick:()=>z(Y.id,xe),disabled:!T,className:`px-2 py-1 rounded border ${le.includes(xe)?"bg-green-600 text-white border-green-600":"bg-white text-gray-700 border-gray-300"} ${T?"cursor-pointer":"cursor-default"}`,children:xe},xe))})]},Y.id)})})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:[u.jsx(Dc,{className:"inline mr-2"}),"Assigned inventory items"]}),T&&u.jsxs("div",{className:"relative mb-2",children:[u.jsx(na,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 text-xs"}),u.jsx("input",{type:"text",placeholder:"Search by item name or number...",value:_,onChange:Y=>A(Y.target.value),className:"w-full pl-8 pr-3 py-2 border rounded text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),u.jsx("div",{className:"bg-white rounded border p-3 max-h-60 overflow-y-auto",children:X.length===0?u.jsx("p",{className:"text-xs text-gray-500",children:"No items available."}):X.map(Y=>u.jsxs("label",{className:"flex items-center mb-2 cursor-pointer hover:bg-gray-50 p-2 rounded",children:[u.jsx("input",{type:"checkbox",checked:d.includes(Y.id),onChange:()=>Z(Y.id),disabled:!T,className:"mr-3 w-4 h-4"}),u.jsxs("div",{className:"flex-1",children:[u.jsxs("p",{className:"text-sm",children:[Y.itemName," ",u.jsxs("span",{className:"text-xs text-gray-500",children:["(",Y.itemNo,")"]})]}),Y.details&&u.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:Y.details})]})]},Y.id))}),u.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Selected: ",d.length," item(s)"]})]})]})]})]})},HF=()=>{const[t,e]=se.useState([]),[n,r]=se.useState(!0),[s,i]=se.useState(!1),[a,o]=se.useState(""),[l,c]=se.useState(!1),[d,g]=se.useState(null),[y,p]=se.useState({type:"",text:""}),[N,S]=se.useState({itemNo:"",itemName:"",category:"",description:""});se.useEffect(()=>{I()},[]);const I=async()=>{r(!0);try{const A=(await An(At(ze,"inventory"))).docs.map(R=>({id:R.id,...R.data()}));A.sort((R,E)=>{const C=(R.itemName||"").toLowerCase(),L=(E.itemName||"").toLowerCase();return C.localeCompare(L)}),e(A)}catch(_){console.error("Error fetching inventory:",_),p({type:"error",text:"Failed to load inventory."})}finally{r(!1)}},w=_=>{S(A=>({...A,[_.target.name]:_.target.value}))},T=async _=>{_.preventDefault(),i(!0),p({type:"",text:""});try{if(d){const A=$t(ze,"inventory",d.id);await Br(A,{...N,updatedAt:new Date().toISOString()}),p({type:"success",text:"Item updated successfully!"})}else await Jr(At(ze,"inventory"),{...N,createdAt:new Date().toISOString()}),p({type:"success",text:"Item added successfully!"});S({itemNo:"",itemName:"",category:"",description:""}),c(!1),g(null),await I()}catch(A){console.error("Error saving item:",A),p({type:"error",text:d?"Failed to update item.":"Failed to add item."})}finally{i(!1)}},j=_=>{g(_),S({itemNo:_.itemNo,itemName:_.itemName,category:_.category||"",description:_.description||""}),c(!0),p({type:"",text:""}),window.scrollTo({top:0,behavior:"smooth"})},D=async(_,A)=>{if(window.confirm(`Are you sure you want to delete "${A}"?`))try{await Xv($t(ze,"inventory",_)),p({type:"success",text:"Item deleted successfully!"}),await I()}catch(R){console.error("Error deleting item:",R),p({type:"error",text:"Failed to delete item."})}},H=()=>{g(null),S({itemNo:"",itemName:"",category:"",description:""}),c(!1),p({type:"",text:""})},J=a.trim().toLowerCase(),O=t.filter(_=>{if(!J)return!0;const A=(_.itemName||"").toLowerCase(),R=(_.itemNo||"").toLowerCase();return A.includes(J)||R.includes(J)});return u.jsxs("div",{className:"min-h-screen bg-gray-100",children:[u.jsx(pn,{userType:"admin"}),u.jsxs("main",{className:"container mx-auto px-4 py-6 sm:py-8",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3 mb-4 sm:mb-6",children:[u.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-800",children:"Inventory"}),u.jsxs("button",{onClick:()=>{l&&!d?c(!1):(H(),c(!l))},className:"self-start sm:self-auto inline-flex items-center gap-2 px-4 py-2 rounded bg-green-600 text-white text-sm font-semibold hover:bg-green-700",children:[u.jsx(wF,{}),l?"Cancel":"Add Item"]})]}),y.text&&u.jsx("div",{className:`mb-4 p-3 rounded text-sm ${y.type==="success"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:y.text}),l&&u.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 sm:p-6 mb-6",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-gray-800",children:d?"Edit Item":"Add New Item"}),d&&u.jsx("button",{onClick:H,className:"text-gray-500 hover:text-gray-700",title:"Cancel editing",children:u.jsx(Sl,{className:"text-xl"})})]}),u.jsxs("form",{onSubmit:T,className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Item No"}),u.jsx("input",{type:"text",name:"itemNo",value:N.itemNo,onChange:w,required:!0,className:"w-full px-3 py-2 border rounded text-sm focus:outline-none focus:ring-2 focus:ring-green-500"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Item Name"}),u.jsx("input",{type:"text",name:"itemName",value:N.itemName,onChange:w,required:!0,className:"w-full px-3 py-2 border rounded text-sm focus:outline-none focus:ring-2 focus:ring-green-500"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Category"}),u.jsxs("select",{name:"category",value:N.category,onChange:w,required:!0,className:"w-full px-3 py-2 border rounded text-sm focus:outline-none focus:ring-2 focus:ring-green-500",children:[u.jsx("option",{value:"",children:"Select a category"}),u.jsx("option",{value:"Photography",children:"Photography"}),u.jsx("option",{value:"Videography",children:"Videography"}),u.jsx("option",{value:"Live Streaming",children:"Live Streaming"}),u.jsx("option",{value:"Drones & Accessories",children:"Drones & Accessories"}),u.jsx("option",{value:"Announcing",children:"Announcing"}),u.jsx("option",{value:"Storages",children:"Storages"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Description"}),u.jsx("textarea",{name:"description",value:N.description,onChange:w,rows:"3",className:"w-full px-3 py-2 border rounded text-sm focus:outline-none focus:ring-2 focus:ring-green-500"})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{type:"submit",disabled:s,className:"flex-1 bg-green-600 text-white py-2 px-4 rounded font-semibold hover:bg-green-700 transition disabled:opacity-50 text-sm",children:s?d?"Updating...":"Adding...":d?"Update Item":"Add Item"}),d&&u.jsx("button",{type:"button",onClick:H,className:"px-4 py-2 border border-gray-300 rounded text-gray-700 font-semibold hover:bg-gray-100 transition text-sm",children:"Cancel"})]})]})]}),u.jsxs("div",{className:"relative mb-4",children:[u.jsx(na,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 text-sm"}),u.jsx("input",{type:"text",placeholder:"Search by item name or number...",value:a,onChange:_=>o(_.target.value),className:"w-full pl-9 pr-3 py-2 border rounded text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),n?u.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[u.jsx(Fi,{className:"animate-spin text-xl text-blue-600"}),u.jsx("span",{children:"Loading inventory..."})]}):O.length===0?u.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 text-center",children:[u.jsx(Dc,{className:"mx-auto text-4xl text-gray-400 mb-2"}),u.jsx("p",{className:"text-gray-600 text-sm",children:a?"No items match your search.":"No items in inventory."})]}):u.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:O.map(_=>u.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 hover:shadow-lg transition",children:[u.jsxs("div",{className:"flex items-start justify-between mb-2",children:[u.jsx("h3",{className:"font-semibold text-gray-800 text-sm sm:text-base flex-1",children:_.itemName}),u.jsx("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded ml-2",children:_.itemNo})]}),_.category&&u.jsx("p",{className:"text-xs bg-slate-100 text-slate-800 px-2 py-1 rounded inline-block mb-2",children:_.category}),_.description&&u.jsx("p",{className:"text-gray-600 text-xs sm:text-sm mb-3",children:_.description}),u.jsxs("div",{className:"flex gap-2 mt-3 pt-3 border-t",children:[u.jsxs("button",{onClick:()=>j(_),className:"flex-1 inline-flex items-center justify-center gap-1 px-3 py-1.5 bg-blue-600 text-white text-xs font-semibold rounded hover:bg-blue-700 transition",children:[u.jsx(pF,{}),"Edit"]}),u.jsxs("button",{onClick:()=>D(_.id,_.itemName),className:"flex-1 inline-flex items-center justify-center gap-1 px-3 py-1.5 bg-red-600 text-white text-xs font-semibold rounded hover:bg-red-700 transition",children:[u.jsx(nE,{}),"Delete"]})]})]},_.id))})]})]})},$F=()=>{const[t,e]=se.useState([]),[n,r]=se.useState({}),[s,i]=se.useState([]),[a,o]=se.useState(!0);se.useEffect(()=>{l()},[]);const l=async()=>{o(!0);try{const p=await An(At(ze,"users")),N={};p.docs.forEach(D=>{N[D.id]=D.data()}),r(N);const w=(await An(At(ze,"works"))).docs.map(D=>({id:D.id,...D.data()})).filter(D=>{const H=D.rejections||{};return Object.keys(H).some(J=>!H[J].approved)});e(w);const j=(await An(At(ze,"rejectedWorks"))).docs.map(D=>({id:D.id,...D.data()}));j.sort((D,H)=>{const J=D.approvedAt?new Date(D.approvedAt).getTime():0;return(H.approvedAt?new Date(H.approvedAt).getTime():0)-J}),i(j)}catch(p){console.error("Error fetching data:",p)}finally{o(!1)}},c=async(p,N)=>{try{const S=t.find(O=>O.id===p),I=(S.rejections||{})[N];await Jr(At(ze,"rejectedWorks"),{workId:p,userId:N,title:S.title,description:S.description,date:S.date,priority:S.priority,assignedUserDetails:S.assignedUserDetails,assignedItems:S.assignedItems,rejectionReason:I.reason,rejectedAt:I.timestamp,approvedAt:new Date().toISOString()});const w=$t(ze,"works",p),T=(S.assignedUsers||[]).filter(O=>O!==N),j=(S.assignedUserDetails||[]).filter(O=>O.userId!==N),D={...S.rejections||{}};delete D[N];const H={...S.userAcceptance||{}};delete H[N];const J={...S.roleCompletion||{}};Object.keys(J).forEach(O=>{O.startsWith(`${N}_`)&&delete J[O]}),await Br(w,{assignedUsers:T,assignedUserDetails:j,rejections:D,userAcceptance:H,roleCompletion:J}),await l()}catch(S){console.error("Failed to approve:",S)}},d=async(p,N)=>{try{const S=t.find(j=>j.id===p),I=$t(ze,"works",p),w={...S.rejections||{}},T={...S.userAcceptance||{}};delete w[N],T[N]="pending",await Br(I,{rejections:w,userAcceptance:T}),await l()}catch(S){console.error("Failed to cancel rejection:",S)}};if(a)return u.jsxs("div",{className:"min-h-screen bg-gray-100",children:[u.jsx(pn,{userType:"admin"}),u.jsxs("div",{className:"flex flex-col items-center justify-center h-64",children:[u.jsx(Fi,{className:"animate-spin text-4xl text-blue-600 mb-4"}),u.jsx("p",{className:"text-gray-600",children:"Loading rejections..."})]})]});const g=s.reduce((p,N)=>{const S=N.workId||N.id;return p[S]||(p[S]={workId:S,title:N.title,items:[]}),p[S].items.push(N),p},{}),y=Object.values(g);return u.jsxs("div",{className:"min-h-screen bg-gray-100",children:[u.jsx(pn,{userType:"admin"}),u.jsxs("main",{className:"container mx-auto px-4 py-6 sm:py-8 max-w-4xl",children:[u.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-800 mb-6",children:"Pending Rejection Approvals"}),t.length===0?u.jsx("div",{className:"bg-white rounded-lg shadow-md p-6 text-center mb-8",children:u.jsx("p",{className:"text-gray-600",children:"No pending rejections."})}):u.jsx("div",{className:"space-y-4 mb-10",children:t.map(p=>{const N=p.rejections||{};return u.jsxs("div",{className:"bg-white rounded-lg shadow-md p-5",children:[u.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-3",children:p.title||"Task"}),Object.entries(N).filter(([,S])=>!S.approved).map(([S,I])=>{var w;return u.jsxs("div",{className:"mb-3 p-4 bg-red-50 rounded-lg border border-red-100",children:[u.jsxs("div",{className:"flex items-start justify-between mb-2",children:[u.jsxs("div",{children:[u.jsx("p",{className:"font-semibold text-gray-800 text-sm",children:((w=n[S])==null?void 0:w.name)||"Unknown User"}),u.jsx("p",{className:"text-xs text-gray-500",children:new Date(I.timestamp).toLocaleString()})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsxs("button",{onClick:()=>c(p.id,S),className:"bg-blue-600 text-white text-xs font-semibold px-3 py-1.5 rounded-lg hover:bg-blue-700 flex items-center gap-1",children:[u.jsx(lo,{}),"Approve"]}),u.jsxs("button",{onClick:()=>d(p.id,S),className:"bg-gray-200 text-gray-800 text-xs font-semibold px-3 py-1.5 rounded-lg hover:bg-gray-300 flex items-center gap-1",children:[u.jsx(Sl,{}),"Cancel"]})]})]}),u.jsxs("p",{className:"text-sm text-gray-700 bg-white p-3 rounded",children:[u.jsx("span",{className:"font-semibold",children:"Reason: "}),I.reason]})]},S)})]},p.id)})}),u.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-gray-800 mb-4",children:"Approved Rejections"}),y.length===0?u.jsx("div",{className:"bg-white rounded-lg shadow-md p-6 text-center",children:u.jsx("p",{className:"text-gray-600",children:"No approved rejections yet."})}):u.jsx("div",{className:"space-y-4",children:y.map(p=>u.jsxs("div",{className:"bg-white rounded-lg shadow-md p-5 border border-green-100",children:[u.jsxs("div",{className:"flex items-start justify-between mb-3",children:[u.jsx("h3",{className:"text-lg font-bold text-gray-800",children:p.title||"Task"}),u.jsxs("span",{className:"bg-green-100 text-green-800 text-xs font-semibold px-3 py-1.5 rounded-full flex items-center gap-1",children:[u.jsx(lo,{}),"Approved"]})]}),u.jsx("div",{className:"space-y-3",children:p.items.map(N=>{var S;return u.jsxs("div",{className:"p-3 rounded border border-green-100 bg-green-50",children:[u.jsx("p",{className:"text-sm font-semibold text-gray-800 mb-1",children:((S=n[N.userId])==null?void 0:S.name)||"Unknown User"}),u.jsxs("p",{className:"text-xs text-gray-500 mb-1",children:["Rejected:"," ",N.rejectedAt?new Date(N.rejectedAt).toLocaleString():"-",u.jsx("br",{}),"Approved:"," ",N.approvedAt?new Date(N.approvedAt).toLocaleString():"-"]}),u.jsxs("p",{className:"text-sm text-gray-700",children:[u.jsx("span",{className:"font-semibold",children:"Reason: "}),N.rejectionReason||"-"]})]},N.id)})})]},p.workId))})]})]})},WF=()=>{const[t,e]=se.useState(null),[n,r]=se.useState([]),[s,i]=se.useState(!0);return se.useEffect(()=>{const a=jc(qs,o=>{e(o||null)});return()=>a()},[]),se.useEffect(()=>{if(!t)return;(async()=>{i(!0);try{const o=xc(At(ze,"rejectedWorks"),qh("userId","==",t.uid)),c=(await An(o)).docs.map(d=>({id:d.id,...d.data()}));c.sort((d,g)=>{const y=d.approvedAt?new Date(d.approvedAt).getTime():0;return(g.approvedAt?new Date(g.approvedAt).getTime():0)-y}),r(c)}catch(o){console.error("Error fetching rejected works:",o)}finally{i(!1)}})()},[t]),s?u.jsxs("div",{className:"min-h-screen bg-gray-100",children:[u.jsx(pn,{userType:"user"}),u.jsxs("div",{className:"flex flex-col items-center justify-center h-64",children:[u.jsx(Fi,{className:"animate-spin text-4xl text-blue-600 mb-4"}),u.jsx("p",{className:"text-gray-600",children:"Loading rejected works..."})]})]}):u.jsxs("div",{className:"min-h-screen bg-gray-100",children:[u.jsx(pn,{userType:"user"}),u.jsxs("main",{className:"container mx-auto px-4 py-6 sm:py-8 max-w-3xl",children:[u.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-800 mb-6",children:"My Rejected Works"}),n.length===0?u.jsx("div",{className:"bg-white rounded-lg shadow-md p-6 text-center",children:u.jsx("p",{className:"text-gray-600",children:"You have no rejected works."})}):u.jsx("div",{className:"space-y-4",children:n.map(a=>u.jsxs("div",{className:"bg-white rounded-lg shadow-md p-5",children:[u.jsxs("div",{className:"flex items-start justify-between mb-3",children:[u.jsxs("div",{className:"flex-1",children:[u.jsx("h3",{className:"text-lg font-bold text-gray-800",children:a.title||"Task"}),a.date&&u.jsxs("p",{className:"flex items-center gap-1 text-xs text-gray-500 mt-1",children:[u.jsx(qn,{}),u.jsx("span",{children:new Date(a.date).toLocaleDateString()})]})]}),u.jsxs("span",{className:"bg-red-100 text-red-800 text-xs font-semibold px-3 py-1.5 rounded-full flex items-center gap-1",children:[u.jsx(Sl,{}),"You rejected"]})]}),u.jsxs("div",{className:"bg-red-50 rounded-lg p-4",children:[a.description&&u.jsx("p",{className:"text-sm text-gray-700 mb-3",children:a.description}),u.jsx("p",{className:"text-xs font-semibold text-red-800 mb-1",children:"Your reason:"}),u.jsx("p",{className:"text-sm text-gray-700",children:a.rejectionReason||"-"}),u.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Rejected: ",a.rejectedAt?new Date(a.rejectedAt).toLocaleString():"-",u.jsx("br",{}),"Approved by admin: ",a.approvedAt?new Date(a.approvedAt).toLocaleString():"-"]})]})]},a.id))})]})]})},GF=()=>{const[t,e]=se.useState([]),[n,r]=se.useState(!0),[s,i]=se.useState(!1),a=qr(),o=async()=>{r(!0);try{const p=xc(At(ze,"notifications"),Gv("createdAt","desc")),S=(await An(p)).docs.map(I=>({id:I.id,...I.data()}));e(S)}catch(p){console.error("Failed to load notifications",p)}finally{r(!1)}};se.useEffect(()=>{o()},[]);const l=p=>{const N=p.userName||"A user";return p.type==="accept"?`${N} accepted a work`:p.type==="reject"?`${N} rejected a work`:p.type==="done"?`${N} marked their work as done`:p.type==="undo-done"?`${N} undid a done task`:`${N} did something`},c=p=>p?(p.toDate?p.toDate():new Date(p)).toLocaleString():"",d=async()=>{const p=t.filter(N=>!N.read);if(p.length)try{i(!0);const N=cA(ze);p.forEach(S=>{N.update($t(ze,"notifications",S.id),{read:!0})}),await N.commit(),e(S=>S.map(I=>({...I,read:!0})))}catch(N){console.error("Failed to mark all read",N)}finally{i(!1)}},g=t.filter(p=>!p.read).length,y=p=>{a(`/admin/notifications/${p.id}`)};return u.jsxs("div",{className:"min-h-screen bg-gray-100",children:[u.jsx(pn,{userType:"admin"}),u.jsxs("main",{className:"container mx-auto px-4 py-6 max-w-4xl",children:[u.jsxs("div",{className:"flex items-center justify-between mb-6",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(d5,{className:"text-2xl text-blue-600"}),u.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-800",children:"Notification History"})]}),u.jsxs("button",{onClick:d,disabled:s||g===0,className:`px-4 py-2 rounded text-sm font-semibold ${g===0?"bg-gray-300 text-gray-600 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"}`,children:["Mark all read (",g,")"]})]}),n?u.jsx("p",{children:"Loading notifications..."}):t.length?u.jsx("ul",{className:"space-y-3",children:t.map(p=>u.jsx("li",{onClick:()=>y(p),className:`bg-white rounded-lg shadow border p-4 cursor-pointer flex items-start gap-3 justify-between ${p.read?"border-gray-100":"border-blue-200 bg-blue-50"}`,children:u.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[u.jsx("div",{className:"mt-1",children:p.read?u.jsx(U2,{className:"text-green-500"}):u.jsx(fF,{className:"text-blue-500 text-xs"})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("p",{className:"font-semibold text-gray-800 truncate",children:l(p)}),u.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Work ID:"," ",u.jsx("span",{className:"font-mono break-all",children:p.workId})]}),u.jsxs("p",{className:"text-xs text-gray-500",children:["At: ",c(p.createdAt)]})]})]})},p.id))}):u.jsx("p",{children:"No notifications yet."})]})]})},KF="modulepreload",YF=function(t){return"https://tmv.fotmv.online/"+t},t_={},H0=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),o=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=Promise.allSettled(n.map(l=>{if(l=YF(l),l in t_)return;t_[l]=!0;const c=l.endsWith(".css"),d=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${d}`))return;const g=document.createElement("link");if(g.rel=c?"stylesheet":KF,c||(g.as="script"),g.crossOrigin="",g.href=l,o&&g.setAttribute("nonce",o),document.head.appendChild(g),c)return new Promise((y,p)=>{g.addEventListener("load",y),g.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${l}`)))})}))}function i(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return s.then(a=>{for(const o of a||[])o.status==="rejected"&&i(o.reason);return e().catch(i)})};function xn(t){"@babel/helpers - typeof";return xn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xn(t)}var ra=Uint8Array,di=Uint16Array,p5=Int32Array,m5=new ra([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),g5=new ra([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),n_=new ra([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),aE=function(t,e){for(var n=new di(31),r=0;r<31;++r)n[r]=e+=1<<t[r-1];for(var s=new p5(n[30]),r=1;r<30;++r)for(var i=n[r];i<n[r+1];++i)s[i]=i-n[r]<<5|r;return{b:n,r:s}},oE=aE(m5,2),QF=oE.b,z2=oE.r;QF[28]=258,z2[258]=28;var XF=aE(g5,0),r_=XF.r,q2=new di(32768);for(var Fn=0;Fn<32768;++Fn){var $o=(Fn&43690)>>1|(Fn&21845)<<1;$o=($o&52428)>>2|($o&13107)<<2,$o=($o&61680)>>4|($o&3855)<<4,q2[Fn]=(($o&65280)>>8|($o&255)<<8)>>1}var dh=function(t,e,n){for(var r=t.length,s=0,i=new di(e);s<r;++s)t[s]&&++i[t[s]-1];var a=new di(e);for(s=1;s<e;++s)a[s]=a[s-1]+i[s-1]<<1;var o;if(n){o=new di(1<<e);var l=15-e;for(s=0;s<r;++s)if(t[s])for(var c=s<<4|t[s],d=e-t[s],g=a[t[s]-1]++<<d,y=g|(1<<d)-1;g<=y;++g)o[q2[g]>>l]=c}else for(o=new di(r),s=0;s<r;++s)t[s]&&(o[s]=q2[a[t[s]-1]++]>>15-t[s]);return o},Nc=new ra(288);for(var Fn=0;Fn<144;++Fn)Nc[Fn]=8;for(var Fn=144;Fn<256;++Fn)Nc[Fn]=9;for(var Fn=256;Fn<280;++Fn)Nc[Fn]=7;for(var Fn=280;Fn<288;++Fn)Nc[Fn]=8;var Dm=new ra(32);for(var Fn=0;Fn<32;++Fn)Dm[Fn]=5;var JF=dh(Nc,9,0),ZF=dh(Dm,5,0),lE=function(t){return(t+7)/8|0},eU=function(t,e,n){return(n==null||n>t.length)&&(n=t.length),new ra(t.subarray(e,n))},Wa=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8},Fd=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8,t[r+2]|=n>>16},$0=function(t,e){for(var n=[],r=0;r<t.length;++r)t[r]&&n.push({s:r,f:t[r]});var s=n.length,i=n.slice();if(!s)return{t:uE,l:0};if(s==1){var a=new ra(n[0].s+1);return a[n[0].s]=1,{t:a,l:1}}n.sort(function(H,J){return H.f-J.f}),n.push({s:-1,f:25001});var o=n[0],l=n[1],c=0,d=1,g=2;for(n[0]={s:-1,f:o.f+l.f,l:o,r:l};d!=s-1;)o=n[n[c].f<n[g].f?c++:g++],l=n[c!=d&&n[c].f<n[g].f?c++:g++],n[d++]={s:-1,f:o.f+l.f,l:o,r:l};for(var y=i[0].s,r=1;r<s;++r)i[r].s>y&&(y=i[r].s);var p=new di(y+1),N=H2(n[d-1],p,0);if(N>e){var r=0,S=0,I=N-e,w=1<<I;for(i.sort(function(J,O){return p[O.s]-p[J.s]||J.f-O.f});r<s;++r){var T=i[r].s;if(p[T]>e)S+=w-(1<<N-p[T]),p[T]=e;else break}for(S>>=I;S>0;){var j=i[r].s;p[j]<e?S-=1<<e-p[j]++-1:++r}for(;r>=0&&S;--r){var D=i[r].s;p[D]==e&&(--p[D],++S)}N=e}return{t:new ra(p),l:N}},H2=function(t,e,n){return t.s==-1?Math.max(H2(t.l,e,n+1),H2(t.r,e,n+1)):e[t.s]=n},s_=function(t){for(var e=t.length;e&&!t[--e];);for(var n=new di(++e),r=0,s=t[0],i=1,a=function(l){n[r++]=l},o=1;o<=e;++o)if(t[o]==s&&o!=e)++i;else{if(!s&&i>2){for(;i>138;i-=138)a(32754);i>2&&(a(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(a(s),--i;i>6;i-=6)a(8304);i>2&&(a(i-3<<5|8208),i=0)}for(;i--;)a(s);i=1,s=t[o]}return{c:n.subarray(0,r),n:e}},Ud=function(t,e){for(var n=0,r=0;r<e.length;++r)n+=t[r]*e[r];return n},cE=function(t,e,n){var r=n.length,s=lE(e+2);t[s]=r&255,t[s+1]=r>>8,t[s+2]=t[s]^255,t[s+3]=t[s+1]^255;for(var i=0;i<r;++i)t[s+i+4]=n[i];return(s+4+r)*8},i_=function(t,e,n,r,s,i,a,o,l,c,d){Wa(e,d++,n),++s[256];for(var g=$0(s,15),y=g.t,p=g.l,N=$0(i,15),S=N.t,I=N.l,w=s_(y),T=w.c,j=w.n,D=s_(S),H=D.c,J=D.n,O=new di(19),_=0;_<T.length;++_)++O[T[_]&31];for(var _=0;_<H.length;++_)++O[H[_]&31];for(var A=$0(O,7),R=A.t,E=A.l,C=19;C>4&&!R[n_[C-1]];--C);var L=c+5<<3,z=Ud(s,Nc)+Ud(i,Dm)+a,Z=Ud(s,y)+Ud(i,S)+a+14+3*C+Ud(O,R)+2*O[16]+3*O[17]+7*O[18];if(l>=0&&L<=z&&L<=Z)return cE(e,d,t.subarray(l,l+c));var ae,ue,Q,ce;if(Wa(e,d,1+(Z<z)),d+=2,Z<z){ae=dh(y,p,0),ue=y,Q=dh(S,I,0),ce=S;var me=dh(R,E,0);Wa(e,d,j-257),Wa(e,d+5,J-1),Wa(e,d+10,C-4),d+=14;for(var _=0;_<C;++_)Wa(e,d+3*_,R[n_[_]]);d+=3*C;for(var ye=[T,H],M=0;M<2;++M)for(var W=ye[M],_=0;_<W.length;++_){var X=W[_]&31;Wa(e,d,me[X]),d+=R[X],X>15&&(Wa(e,d,W[_]>>5&127),d+=W[_]>>12)}}else ae=JF,ue=Nc,Q=ZF,ce=Dm;for(var _=0;_<o;++_){var Y=r[_];if(Y>255){var X=Y>>18&31;Fd(e,d,ae[X+257]),d+=ue[X+257],X>7&&(Wa(e,d,Y>>23&31),d+=m5[X]);var ie=Y&31;Fd(e,d,Q[ie]),d+=ce[ie],ie>3&&(Fd(e,d,Y>>5&8191),d+=g5[ie])}else Fd(e,d,ae[Y]),d+=ue[Y]}return Fd(e,d,ae[256]),d+ue[256]},tU=new p5([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),uE=new ra(0),nU=function(t,e,n,r,s,i){var a=i.z||t.length,o=new ra(r+a+5*(1+Math.ceil(a/7e3))+s),l=o.subarray(r,o.length-s),c=i.l,d=(i.r||0)&7;if(e){d&&(l[0]=i.r>>3);for(var g=tU[e-1],y=g>>13,p=g&8191,N=(1<<n)-1,S=i.p||new di(32768),I=i.h||new di(N+1),w=Math.ceil(n/3),T=2*w,j=function(Ue){return(t[Ue]^t[Ue+1]<<w^t[Ue+2]<<T)&N},D=new p5(25e3),H=new di(288),J=new di(32),O=0,_=0,A=i.i||0,R=0,E=i.w||0,C=0;A+2<a;++A){var L=j(A),z=A&32767,Z=I[L];if(S[z]=Z,I[L]=z,E<=A){var ae=a-A;if((O>7e3||R>24576)&&(ae>423||!c)){d=i_(t,l,0,D,H,J,_,R,C,A-C,d),R=O=_=0,C=A;for(var ue=0;ue<286;++ue)H[ue]=0;for(var ue=0;ue<30;++ue)J[ue]=0}var Q=2,ce=0,me=p,ye=z-Z&32767;if(ae>2&&L==j(A-ye))for(var M=Math.min(y,ae)-1,W=Math.min(32767,A),X=Math.min(258,ae);ye<=W&&--me&&z!=Z;){if(t[A+Q]==t[A+Q-ye]){for(var Y=0;Y<X&&t[A+Y]==t[A+Y-ye];++Y);if(Y>Q){if(Q=Y,ce=ye,Y>M)break;for(var ie=Math.min(ye,Y-2),le=0,ue=0;ue<ie;++ue){var xe=A-ye+ue&32767,ee=S[xe],fe=xe-ee&32767;fe>le&&(le=fe,Z=xe)}}}z=Z,Z=S[z],ye+=z-Z&32767}if(ce){D[R++]=268435456|z2[Q]<<18|r_[ce];var ve=z2[Q]&31,Se=r_[ce]&31;_+=m5[ve]+g5[Se],++H[257+ve],++J[Se],E=A+Q,++O}else D[R++]=t[A],++H[t[A]]}}for(A=Math.max(A,E);A<a;++A)D[R++]=t[A],++H[t[A]];d=i_(t,l,c,D,H,J,_,R,C,A-C,d),c||(i.r=d&7|l[d/8|0]<<3,d-=7,i.h=I,i.p=S,i.i=A,i.w=E)}else{for(var A=i.w||0;A<a+c;A+=65535){var ke=A+65535;ke>=a&&(l[d/8|0]=c,ke=a),d=cE(l,d+1,t.subarray(A,ke))}i.i=a}return eU(o,0,r+lE(d)+s)},dE=function(){var t=1,e=0;return{p:function(n){for(var r=t,s=e,i=n.length|0,a=0;a!=i;){for(var o=Math.min(a+2655,i);a<o;++a)s+=r+=n[a];r=(r&65535)+15*(r>>16),s=(s&65535)+15*(s>>16)}t=r,e=s},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},rU=function(t,e,n,r,s){if(!s&&(s={l:1},e.dictionary)){var i=e.dictionary.subarray(-32768),a=new ra(i.length+t.length);a.set(i),a.set(t,i.length),t=a,s.w=i.length}return nU(t,e.level==null?6:e.level,e.mem==null?s.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,n,r,s)},hE=function(t,e,n){for(;n;++e)t[e]=n,n>>>=8},sU=function(t,e){var n=e.level,r=n==0?0:n<6?1:n==9?3:2;if(t[0]=120,t[1]=r<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var s=dE();s.p(e.dictionary),hE(t,2,s.d())}};function $2(t,e){e||(e={});var n=dE();n.p(t);var r=rU(t,e,e.dictionary?6:2,4);return sU(r,e),hE(r,r.length-4,n.d()),r}var iU=typeof TextDecoder<"u"&&new TextDecoder,aU=0;try{iU.decode(uE,{stream:!0}),aU=1}catch{}function oU(t){if(Array.isArray(t))return t}function lU(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,i,a,o=[],l=!0,c=!1;try{if(i=(n=n.call(t)).next,e!==0)for(;!(l=(r=i.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(d){c=!0,s=d}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw s}}return o}}function a_(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function cU(t,e){if(t){if(typeof t=="string")return a_(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a_(t,e):void 0}}function uU(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function o_(t,e){return oU(t)||lU(t,e)||cU(t,e)||uU()}function l_(t,e="utf8"){return new TextDecoder(e).decode(t)}const dU=new TextEncoder;function hU(t){return dU.encode(t)}const fU=1024*8,pU=(()=>{const t=new Uint8Array(4),e=new Uint32Array(t.buffer);return!((e[0]=1)&t[0])})(),W0={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class y5{constructor(e=fU,n={}){vn(this,"buffer");vn(this,"byteLength");vn(this,"byteOffset");vn(this,"length");vn(this,"offset");vn(this,"lastWrittenByte");vn(this,"littleEndian");vn(this,"_data");vn(this,"_mark");vn(this,"_marks");let r=!1;typeof e=="number"?e=new ArrayBuffer(e):(r=!0,this.lastWrittenByte=e.byteLength);const s=n.offset?n.offset>>>0:0,i=e.byteLength-s;let a=s;(ArrayBuffer.isView(e)||e instanceof y5)&&(e.byteLength!==e.buffer.byteLength&&(a=e.byteOffset+s),e=e.buffer),r?this.lastWrittenByte=i:this.lastWrittenByte=0,this.buffer=e,this.length=i,this.byteLength=i,this.byteOffset=a,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,a,i),this._mark=0,this._marks=[]}available(e=1){return this.offset+e<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(e=1){return this.offset+=e,this}back(e=1){return this.offset-=e,this}seek(e){return this.offset=e,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const e=this._marks.pop();if(e===void 0)throw new Error("Mark stack empty");return this.seek(e),this}rewind(){return this.offset=0,this}ensureAvailable(e=1){if(!this.available(e)){const r=(this.offset+e)*2,s=new Uint8Array(r);s.set(new Uint8Array(this.buffer)),this.buffer=s.buffer,this.length=r,this.byteLength=r,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(e=1){return this.readArray(e,"uint8")}readArray(e,n){const r=W0[n].BYTES_PER_ELEMENT*e,s=this.byteOffset+this.offset,i=this.buffer.slice(s,s+r);if(this.littleEndian===pU&&n!=="uint8"&&n!=="int8"){const o=new Uint8Array(this.buffer.slice(s,s+r));o.reverse();const l=new W0[n](o.buffer);return this.offset+=r,l.reverse(),l}const a=new W0[n](i);return this.offset+=r,a}readInt16(){const e=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}readUint16(){const e=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,e}readInt32(){const e=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}readUint32(){const e=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat32(){const e=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat64(){const e=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}readBigInt64(){const e=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,e}readBigUint64(){const e=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,e}readChar(){return String.fromCharCode(this.readInt8())}readChars(e=1){let n="";for(let r=0;r<e;r++)n+=this.readChar();return n}readUtf8(e=1){return l_(this.readBytes(e))}decodeText(e=1,n="utf8"){return l_(this.readBytes(e),n)}writeBoolean(e){return this.writeUint8(e?255:0),this}writeInt8(e){return this.ensureAvailable(1),this._data.setInt8(this.offset++,e),this._updateLastWrittenByte(),this}writeUint8(e){return this.ensureAvailable(1),this._data.setUint8(this.offset++,e),this._updateLastWrittenByte(),this}writeByte(e){return this.writeUint8(e)}writeBytes(e){this.ensureAvailable(e.length);for(let n=0;n<e.length;n++)this._data.setUint8(this.offset++,e[n]);return this._updateLastWrittenByte(),this}writeInt16(e){return this.ensureAvailable(2),this._data.setInt16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(e){return this.ensureAvailable(2),this._data.setUint16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(e){return this.ensureAvailable(4),this._data.setInt32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(e){return this.ensureAvailable(4),this._data.setUint32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(e){return this.ensureAvailable(4),this._data.setFloat32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(e){return this.ensureAvailable(8),this._data.setFloat64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(e){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(e){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(e){return this.writeUint8(e.charCodeAt(0))}writeChars(e){for(let n=0;n<e.length;n++)this.writeUint8(e.charCodeAt(n));return this}writeUtf8(e){return this.writeBytes(hU(e))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function ad(t){let e=t.length;for(;--e>=0;)t[e]=0}const mU=3,gU=258,fE=29,yU=256,vU=yU+1+fE,pE=30,xU=512,wU=new Array((vU+2)*2);ad(wU);const bU=new Array(pE*2);ad(bU);const _U=new Array(xU);ad(_U);const NU=new Array(gU-mU+1);ad(NU);const SU=new Array(fE);ad(SU);const AU=new Array(pE);ad(AU);const EU=(t,e,n,r)=>{let s=t&65535|0,i=t>>>16&65535|0,a=0;for(;n!==0;){a=n>2e3?2e3:n,n-=a;do s=s+e[r++]|0,i=i+s|0;while(--a);s%=65521,i%=65521}return s|i<<16|0};var W2=EU;const kU=()=>{let t,e=[];for(var n=0;n<256;n++){t=n;for(var r=0;r<8;r++)t=t&1?3988292384^t>>>1:t>>>1;e[n]=t}return e},TU=new Uint32Array(kU()),IU=(t,e,n,r)=>{const s=TU,i=r+n;t^=-1;for(let a=r;a<i;a++)t=t>>>8^s[(t^e[a])&255];return t^-1};var ya=IU,G2={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},mE={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const CU=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var PU=function(t){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const n=e.shift();if(n){if(typeof n!="object")throw new TypeError(n+"must be non-object");for(const r in n)CU(n,r)&&(t[r]=n[r])}}return t},jU=t=>{let e=0;for(let r=0,s=t.length;r<s;r++)e+=t[r].length;const n=new Uint8Array(e);for(let r=0,s=0,i=t.length;r<i;r++){let a=t[r];n.set(a,s),s+=a.length}return n},gE={assign:PU,flattenChunks:jU};let yE=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{yE=!1}const Kh=new Uint8Array(256);for(let t=0;t<256;t++)Kh[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;Kh[254]=Kh[254]=1;var LU=t=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(t);let e,n,r,s,i,a=t.length,o=0;for(s=0;s<a;s++)n=t.charCodeAt(s),(n&64512)===55296&&s+1<a&&(r=t.charCodeAt(s+1),(r&64512)===56320&&(n=65536+(n-55296<<10)+(r-56320),s++)),o+=n<128?1:n<2048?2:n<65536?3:4;for(e=new Uint8Array(o),i=0,s=0;i<o;s++)n=t.charCodeAt(s),(n&64512)===55296&&s+1<a&&(r=t.charCodeAt(s+1),(r&64512)===56320&&(n=65536+(n-55296<<10)+(r-56320),s++)),n<128?e[i++]=n:n<2048?(e[i++]=192|n>>>6,e[i++]=128|n&63):n<65536?(e[i++]=224|n>>>12,e[i++]=128|n>>>6&63,e[i++]=128|n&63):(e[i++]=240|n>>>18,e[i++]=128|n>>>12&63,e[i++]=128|n>>>6&63,e[i++]=128|n&63);return e};const RU=(t,e)=>{if(e<65534&&t.subarray&&yE)return String.fromCharCode.apply(null,t.length===e?t:t.subarray(0,e));let n="";for(let r=0;r<e;r++)n+=String.fromCharCode(t[r]);return n};var DU=(t,e)=>{const n=e||t.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(t.subarray(0,e));let r,s;const i=new Array(n*2);for(s=0,r=0;r<n;){let a=t[r++];if(a<128){i[s++]=a;continue}let o=Kh[a];if(o>4){i[s++]=65533,r+=o-1;continue}for(a&=o===2?31:o===3?15:7;o>1&&r<n;)a=a<<6|t[r++]&63,o--;if(o>1){i[s++]=65533;continue}a<65536?i[s++]=a:(a-=65536,i[s++]=55296|a>>10&1023,i[s++]=56320|a&1023)}return RU(i,s)},OU=(t,e)=>{e=e||t.length,e>t.length&&(e=t.length);let n=e-1;for(;n>=0&&(t[n]&192)===128;)n--;return n<0||n===0?e:n+Kh[t[n]]>e?n:e},K2={string2buf:LU,buf2string:DU,utf8border:OU};function MU(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var FU=MU;const cp=16209,UU=16191;var VU=function(e,n){let r,s,i,a,o,l,c,d,g,y,p,N,S,I,w,T,j,D,H,J,O,_,A,R;const E=e.state;r=e.next_in,A=e.input,s=r+(e.avail_in-5),i=e.next_out,R=e.output,a=i-(n-e.avail_out),o=i+(e.avail_out-257),l=E.dmax,c=E.wsize,d=E.whave,g=E.wnext,y=E.window,p=E.hold,N=E.bits,S=E.lencode,I=E.distcode,w=(1<<E.lenbits)-1,T=(1<<E.distbits)-1;e:do{N<15&&(p+=A[r++]<<N,N+=8,p+=A[r++]<<N,N+=8),j=S[p&w];t:for(;;){if(D=j>>>24,p>>>=D,N-=D,D=j>>>16&255,D===0)R[i++]=j&65535;else if(D&16){H=j&65535,D&=15,D&&(N<D&&(p+=A[r++]<<N,N+=8),H+=p&(1<<D)-1,p>>>=D,N-=D),N<15&&(p+=A[r++]<<N,N+=8,p+=A[r++]<<N,N+=8),j=I[p&T];n:for(;;){if(D=j>>>24,p>>>=D,N-=D,D=j>>>16&255,D&16){if(J=j&65535,D&=15,N<D&&(p+=A[r++]<<N,N+=8,N<D&&(p+=A[r++]<<N,N+=8)),J+=p&(1<<D)-1,J>l){e.msg="invalid distance too far back",E.mode=cp;break e}if(p>>>=D,N-=D,D=i-a,J>D){if(D=J-D,D>d&&E.sane){e.msg="invalid distance too far back",E.mode=cp;break e}if(O=0,_=y,g===0){if(O+=c-D,D<H){H-=D;do R[i++]=y[O++];while(--D);O=i-J,_=R}}else if(g<D){if(O+=c+g-D,D-=g,D<H){H-=D;do R[i++]=y[O++];while(--D);if(O=0,g<H){D=g,H-=D;do R[i++]=y[O++];while(--D);O=i-J,_=R}}}else if(O+=g-D,D<H){H-=D;do R[i++]=y[O++];while(--D);O=i-J,_=R}for(;H>2;)R[i++]=_[O++],R[i++]=_[O++],R[i++]=_[O++],H-=3;H&&(R[i++]=_[O++],H>1&&(R[i++]=_[O++]))}else{O=i-J;do R[i++]=R[O++],R[i++]=R[O++],R[i++]=R[O++],H-=3;while(H>2);H&&(R[i++]=R[O++],H>1&&(R[i++]=R[O++]))}}else if(D&64){e.msg="invalid distance code",E.mode=cp;break e}else{j=I[(j&65535)+(p&(1<<D)-1)];continue n}break}}else if(D&64)if(D&32){E.mode=UU;break e}else{e.msg="invalid literal/length code",E.mode=cp;break e}else{j=S[(j&65535)+(p&(1<<D)-1)];continue t}break}}while(r<s&&i<o);H=N>>3,r-=H,N-=H<<3,p&=(1<<N)-1,e.next_in=r,e.next_out=i,e.avail_in=r<s?5+(s-r):5-(r-s),e.avail_out=i<o?257+(o-i):257-(i-o),E.hold=p,E.bits=N};const Qc=15,c_=852,u_=592,d_=0,G0=1,h_=2,BU=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),zU=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),qU=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),HU=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),$U=(t,e,n,r,s,i,a,o)=>{const l=o.bits;let c=0,d=0,g=0,y=0,p=0,N=0,S=0,I=0,w=0,T=0,j,D,H,J,O,_=null,A;const R=new Uint16Array(Qc+1),E=new Uint16Array(Qc+1);let C=null,L,z,Z;for(c=0;c<=Qc;c++)R[c]=0;for(d=0;d<r;d++)R[e[n+d]]++;for(p=l,y=Qc;y>=1&&R[y]===0;y--);if(p>y&&(p=y),y===0)return s[i++]=1<<24|64<<16|0,s[i++]=1<<24|64<<16|0,o.bits=1,0;for(g=1;g<y&&R[g]===0;g++);for(p<g&&(p=g),I=1,c=1;c<=Qc;c++)if(I<<=1,I-=R[c],I<0)return-1;if(I>0&&(t===d_||y!==1))return-1;for(E[1]=0,c=1;c<Qc;c++)E[c+1]=E[c]+R[c];for(d=0;d<r;d++)e[n+d]!==0&&(a[E[e[n+d]]++]=d);if(t===d_?(_=C=a,A=20):t===G0?(_=BU,C=zU,A=257):(_=qU,C=HU,A=0),T=0,d=0,c=g,O=i,N=p,S=0,H=-1,w=1<<p,J=w-1,t===G0&&w>c_||t===h_&&w>u_)return 1;for(;;){L=c-S,a[d]+1<A?(z=0,Z=a[d]):a[d]>=A?(z=C[a[d]-A],Z=_[a[d]-A]):(z=96,Z=0),j=1<<c-S,D=1<<N,g=D;do D-=j,s[O+(T>>S)+D]=L<<24|z<<16|Z|0;while(D!==0);for(j=1<<c-1;T&j;)j>>=1;if(j!==0?(T&=j-1,T+=j):T=0,d++,--R[c]===0){if(c===y)break;c=e[n+a[d]]}if(c>p&&(T&J)!==H){for(S===0&&(S=p),O+=g,N=c-S,I=1<<N;N+S<y&&(I-=R[N+S],!(I<=0));)N++,I<<=1;if(w+=1<<N,t===G0&&w>c_||t===h_&&w>u_)return 1;H=T&J,s[H]=p<<24|N<<16|O-i|0}}return T!==0&&(s[O+T]=c-S<<24|64<<16|0),o.bits=p,0};var hh=$U;const WU=0,vE=1,xE=2,{Z_FINISH:f_,Z_BLOCK:GU,Z_TREES:up,Z_OK:Sc,Z_STREAM_END:KU,Z_NEED_DICT:YU,Z_STREAM_ERROR:Mi,Z_DATA_ERROR:wE,Z_MEM_ERROR:bE,Z_BUF_ERROR:QU,Z_DEFLATED:p_}=mE,jg=16180,m_=16181,g_=16182,y_=16183,v_=16184,x_=16185,w_=16186,b_=16187,__=16188,N_=16189,Om=16190,Ga=16191,K0=16192,S_=16193,Y0=16194,A_=16195,E_=16196,k_=16197,T_=16198,dp=16199,hp=16200,I_=16201,C_=16202,P_=16203,j_=16204,L_=16205,Q0=16206,R_=16207,D_=16208,zn=16209,_E=16210,NE=16211,XU=852,JU=592,ZU=15,eV=ZU,O_=t=>(t>>>24&255)+(t>>>8&65280)+((t&65280)<<8)+((t&255)<<24);function tV(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Oc=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||e.mode<jg||e.mode>NE?1:0},SE=t=>{if(Oc(t))return Mi;const e=t.state;return t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=e.wrap&1),e.mode=jg,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(XU),e.distcode=e.distdyn=new Int32Array(JU),e.sane=1,e.back=-1,Sc},AE=t=>{if(Oc(t))return Mi;const e=t.state;return e.wsize=0,e.whave=0,e.wnext=0,SE(t)},EE=(t,e)=>{let n;if(Oc(t))return Mi;const r=t.state;return e<0?(n=0,e=-e):(n=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?Mi:(r.window!==null&&r.wbits!==e&&(r.window=null),r.wrap=n,r.wbits=e,AE(t))},kE=(t,e)=>{if(!t)return Mi;const n=new tV;t.state=n,n.strm=t,n.window=null,n.mode=jg;const r=EE(t,e);return r!==Sc&&(t.state=null),r},nV=t=>kE(t,eV);let M_=!0,X0,J0;const rV=t=>{if(M_){X0=new Int32Array(512),J0=new Int32Array(32);let e=0;for(;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(hh(vE,t.lens,0,288,X0,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;hh(xE,t.lens,0,32,J0,0,t.work,{bits:5}),M_=!1}t.lencode=X0,t.lenbits=9,t.distcode=J0,t.distbits=5},TE=(t,e,n,r)=>{let s;const i=t.state;return i.window===null&&(i.wsize=1<<i.wbits,i.wnext=0,i.whave=0,i.window=new Uint8Array(i.wsize)),r>=i.wsize?(i.window.set(e.subarray(n-i.wsize,n),0),i.wnext=0,i.whave=i.wsize):(s=i.wsize-i.wnext,s>r&&(s=r),i.window.set(e.subarray(n-r,n-r+s),i.wnext),r-=s,r?(i.window.set(e.subarray(n-r,n),0),i.wnext=r,i.whave=i.wsize):(i.wnext+=s,i.wnext===i.wsize&&(i.wnext=0),i.whave<i.wsize&&(i.whave+=s))),0},sV=(t,e)=>{let n,r,s,i,a,o,l,c,d,g,y,p,N,S,I=0,w,T,j,D,H,J,O,_;const A=new Uint8Array(4);let R,E;const C=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Oc(t)||!t.output||!t.input&&t.avail_in!==0)return Mi;n=t.state,n.mode===Ga&&(n.mode=K0),a=t.next_out,s=t.output,l=t.avail_out,i=t.next_in,r=t.input,o=t.avail_in,c=n.hold,d=n.bits,g=o,y=l,_=Sc;e:for(;;)switch(n.mode){case jg:if(n.wrap===0){n.mode=K0;break}for(;d<16;){if(o===0)break e;o--,c+=r[i++]<<d,d+=8}if(n.wrap&2&&c===35615){n.wbits===0&&(n.wbits=15),n.check=0,A[0]=c&255,A[1]=c>>>8&255,n.check=ya(n.check,A,2,0),c=0,d=0,n.mode=m_;break}if(n.head&&(n.head.done=!1),!(n.wrap&1)||(((c&255)<<8)+(c>>8))%31){t.msg="incorrect header check",n.mode=zn;break}if((c&15)!==p_){t.msg="unknown compression method",n.mode=zn;break}if(c>>>=4,d-=4,O=(c&15)+8,n.wbits===0&&(n.wbits=O),O>15||O>n.wbits){t.msg="invalid window size",n.mode=zn;break}n.dmax=1<<n.wbits,n.flags=0,t.adler=n.check=1,n.mode=c&512?N_:Ga,c=0,d=0;break;case m_:for(;d<16;){if(o===0)break e;o--,c+=r[i++]<<d,d+=8}if(n.flags=c,(n.flags&255)!==p_){t.msg="unknown compression method",n.mode=zn;break}if(n.flags&57344){t.msg="unknown header flags set",n.mode=zn;break}n.head&&(n.head.text=c>>8&1),n.flags&512&&n.wrap&4&&(A[0]=c&255,A[1]=c>>>8&255,n.check=ya(n.check,A,2,0)),c=0,d=0,n.mode=g_;case g_:for(;d<32;){if(o===0)break e;o--,c+=r[i++]<<d,d+=8}n.head&&(n.head.time=c),n.flags&512&&n.wrap&4&&(A[0]=c&255,A[1]=c>>>8&255,A[2]=c>>>16&255,A[3]=c>>>24&255,n.check=ya(n.check,A,4,0)),c=0,d=0,n.mode=y_;case y_:for(;d<16;){if(o===0)break e;o--,c+=r[i++]<<d,d+=8}n.head&&(n.head.xflags=c&255,n.head.os=c>>8),n.flags&512&&n.wrap&4&&(A[0]=c&255,A[1]=c>>>8&255,n.check=ya(n.check,A,2,0)),c=0,d=0,n.mode=v_;case v_:if(n.flags&1024){for(;d<16;){if(o===0)break e;o--,c+=r[i++]<<d,d+=8}n.length=c,n.head&&(n.head.extra_len=c),n.flags&512&&n.wrap&4&&(A[0]=c&255,A[1]=c>>>8&255,n.check=ya(n.check,A,2,0)),c=0,d=0}else n.head&&(n.head.extra=null);n.mode=x_;case x_:if(n.flags&1024&&(p=n.length,p>o&&(p=o),p&&(n.head&&(O=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(r.subarray(i,i+p),O)),n.flags&512&&n.wrap&4&&(n.check=ya(n.check,r,p,i)),o-=p,i+=p,n.length-=p),n.length))break e;n.length=0,n.mode=w_;case w_:if(n.flags&2048){if(o===0)break e;p=0;do O=r[i+p++],n.head&&O&&n.length<65536&&(n.head.name+=String.fromCharCode(O));while(O&&p<o);if(n.flags&512&&n.wrap&4&&(n.check=ya(n.check,r,p,i)),o-=p,i+=p,O)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=b_;case b_:if(n.flags&4096){if(o===0)break e;p=0;do O=r[i+p++],n.head&&O&&n.length<65536&&(n.head.comment+=String.fromCharCode(O));while(O&&p<o);if(n.flags&512&&n.wrap&4&&(n.check=ya(n.check,r,p,i)),o-=p,i+=p,O)break e}else n.head&&(n.head.comment=null);n.mode=__;case __:if(n.flags&512){for(;d<16;){if(o===0)break e;o--,c+=r[i++]<<d,d+=8}if(n.wrap&4&&c!==(n.check&65535)){t.msg="header crc mismatch",n.mode=zn;break}c=0,d=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),t.adler=n.check=0,n.mode=Ga;break;case N_:for(;d<32;){if(o===0)break e;o--,c+=r[i++]<<d,d+=8}t.adler=n.check=O_(c),c=0,d=0,n.mode=Om;case Om:if(n.havedict===0)return t.next_out=a,t.avail_out=l,t.next_in=i,t.avail_in=o,n.hold=c,n.bits=d,YU;t.adler=n.check=1,n.mode=Ga;case Ga:if(e===GU||e===up)break e;case K0:if(n.last){c>>>=d&7,d-=d&7,n.mode=Q0;break}for(;d<3;){if(o===0)break e;o--,c+=r[i++]<<d,d+=8}switch(n.last=c&1,c>>>=1,d-=1,c&3){case 0:n.mode=S_;break;case 1:if(rV(n),n.mode=dp,e===up){c>>>=2,d-=2;break e}break;case 2:n.mode=E_;break;case 3:t.msg="invalid block type",n.mode=zn}c>>>=2,d-=2;break;case S_:for(c>>>=d&7,d-=d&7;d<32;){if(o===0)break e;o--,c+=r[i++]<<d,d+=8}if((c&65535)!==(c>>>16^65535)){t.msg="invalid stored block lengths",n.mode=zn;break}if(n.length=c&65535,c=0,d=0,n.mode=Y0,e===up)break e;case Y0:n.mode=A_;case A_:if(p=n.length,p){if(p>o&&(p=o),p>l&&(p=l),p===0)break e;s.set(r.subarray(i,i+p),a),o-=p,i+=p,l-=p,a+=p,n.length-=p;break}n.mode=Ga;break;case E_:for(;d<14;){if(o===0)break e;o--,c+=r[i++]<<d,d+=8}if(n.nlen=(c&31)+257,c>>>=5,d-=5,n.ndist=(c&31)+1,c>>>=5,d-=5,n.ncode=(c&15)+4,c>>>=4,d-=4,n.nlen>286||n.ndist>30){t.msg="too many length or distance symbols",n.mode=zn;break}n.have=0,n.mode=k_;case k_:for(;n.have<n.ncode;){for(;d<3;){if(o===0)break e;o--,c+=r[i++]<<d,d+=8}n.lens[C[n.have++]]=c&7,c>>>=3,d-=3}for(;n.have<19;)n.lens[C[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,R={bits:n.lenbits},_=hh(WU,n.lens,0,19,n.lencode,0,n.work,R),n.lenbits=R.bits,_){t.msg="invalid code lengths set",n.mode=zn;break}n.have=0,n.mode=T_;case T_:for(;n.have<n.nlen+n.ndist;){for(;I=n.lencode[c&(1<<n.lenbits)-1],w=I>>>24,T=I>>>16&255,j=I&65535,!(w<=d);){if(o===0)break e;o--,c+=r[i++]<<d,d+=8}if(j<16)c>>>=w,d-=w,n.lens[n.have++]=j;else{if(j===16){for(E=w+2;d<E;){if(o===0)break e;o--,c+=r[i++]<<d,d+=8}if(c>>>=w,d-=w,n.have===0){t.msg="invalid bit length repeat",n.mode=zn;break}O=n.lens[n.have-1],p=3+(c&3),c>>>=2,d-=2}else if(j===17){for(E=w+3;d<E;){if(o===0)break e;o--,c+=r[i++]<<d,d+=8}c>>>=w,d-=w,O=0,p=3+(c&7),c>>>=3,d-=3}else{for(E=w+7;d<E;){if(o===0)break e;o--,c+=r[i++]<<d,d+=8}c>>>=w,d-=w,O=0,p=11+(c&127),c>>>=7,d-=7}if(n.have+p>n.nlen+n.ndist){t.msg="invalid bit length repeat",n.mode=zn;break}for(;p--;)n.lens[n.have++]=O}}if(n.mode===zn)break;if(n.lens[256]===0){t.msg="invalid code -- missing end-of-block",n.mode=zn;break}if(n.lenbits=9,R={bits:n.lenbits},_=hh(vE,n.lens,0,n.nlen,n.lencode,0,n.work,R),n.lenbits=R.bits,_){t.msg="invalid literal/lengths set",n.mode=zn;break}if(n.distbits=6,n.distcode=n.distdyn,R={bits:n.distbits},_=hh(xE,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,R),n.distbits=R.bits,_){t.msg="invalid distances set",n.mode=zn;break}if(n.mode=dp,e===up)break e;case dp:n.mode=hp;case hp:if(o>=6&&l>=258){t.next_out=a,t.avail_out=l,t.next_in=i,t.avail_in=o,n.hold=c,n.bits=d,VU(t,y),a=t.next_out,s=t.output,l=t.avail_out,i=t.next_in,r=t.input,o=t.avail_in,c=n.hold,d=n.bits,n.mode===Ga&&(n.back=-1);break}for(n.back=0;I=n.lencode[c&(1<<n.lenbits)-1],w=I>>>24,T=I>>>16&255,j=I&65535,!(w<=d);){if(o===0)break e;o--,c+=r[i++]<<d,d+=8}if(T&&!(T&240)){for(D=w,H=T,J=j;I=n.lencode[J+((c&(1<<D+H)-1)>>D)],w=I>>>24,T=I>>>16&255,j=I&65535,!(D+w<=d);){if(o===0)break e;o--,c+=r[i++]<<d,d+=8}c>>>=D,d-=D,n.back+=D}if(c>>>=w,d-=w,n.back+=w,n.length=j,T===0){n.mode=L_;break}if(T&32){n.back=-1,n.mode=Ga;break}if(T&64){t.msg="invalid literal/length code",n.mode=zn;break}n.extra=T&15,n.mode=I_;case I_:if(n.extra){for(E=n.extra;d<E;){if(o===0)break e;o--,c+=r[i++]<<d,d+=8}n.length+=c&(1<<n.extra)-1,c>>>=n.extra,d-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=C_;case C_:for(;I=n.distcode[c&(1<<n.distbits)-1],w=I>>>24,T=I>>>16&255,j=I&65535,!(w<=d);){if(o===0)break e;o--,c+=r[i++]<<d,d+=8}if(!(T&240)){for(D=w,H=T,J=j;I=n.distcode[J+((c&(1<<D+H)-1)>>D)],w=I>>>24,T=I>>>16&255,j=I&65535,!(D+w<=d);){if(o===0)break e;o--,c+=r[i++]<<d,d+=8}c>>>=D,d-=D,n.back+=D}if(c>>>=w,d-=w,n.back+=w,T&64){t.msg="invalid distance code",n.mode=zn;break}n.offset=j,n.extra=T&15,n.mode=P_;case P_:if(n.extra){for(E=n.extra;d<E;){if(o===0)break e;o--,c+=r[i++]<<d,d+=8}n.offset+=c&(1<<n.extra)-1,c>>>=n.extra,d-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){t.msg="invalid distance too far back",n.mode=zn;break}n.mode=j_;case j_:if(l===0)break e;if(p=y-l,n.offset>p){if(p=n.offset-p,p>n.whave&&n.sane){t.msg="invalid distance too far back",n.mode=zn;break}p>n.wnext?(p-=n.wnext,N=n.wsize-p):N=n.wnext-p,p>n.length&&(p=n.length),S=n.window}else S=s,N=a-n.offset,p=n.length;p>l&&(p=l),l-=p,n.length-=p;do s[a++]=S[N++];while(--p);n.length===0&&(n.mode=hp);break;case L_:if(l===0)break e;s[a++]=n.length,l--,n.mode=hp;break;case Q0:if(n.wrap){for(;d<32;){if(o===0)break e;o--,c|=r[i++]<<d,d+=8}if(y-=l,t.total_out+=y,n.total+=y,n.wrap&4&&y&&(t.adler=n.check=n.flags?ya(n.check,s,y,a-y):W2(n.check,s,y,a-y)),y=l,n.wrap&4&&(n.flags?c:O_(c))!==n.check){t.msg="incorrect data check",n.mode=zn;break}c=0,d=0}n.mode=R_;case R_:if(n.wrap&&n.flags){for(;d<32;){if(o===0)break e;o--,c+=r[i++]<<d,d+=8}if(n.wrap&4&&c!==(n.total&4294967295)){t.msg="incorrect length check",n.mode=zn;break}c=0,d=0}n.mode=D_;case D_:_=KU;break e;case zn:_=wE;break e;case _E:return bE;case NE:default:return Mi}return t.next_out=a,t.avail_out=l,t.next_in=i,t.avail_in=o,n.hold=c,n.bits=d,(n.wsize||y!==t.avail_out&&n.mode<zn&&(n.mode<Q0||e!==f_))&&TE(t,t.output,t.next_out,y-t.avail_out),g-=t.avail_in,y-=t.avail_out,t.total_in+=g,t.total_out+=y,n.total+=y,n.wrap&4&&y&&(t.adler=n.check=n.flags?ya(n.check,s,y,t.next_out-y):W2(n.check,s,y,t.next_out-y)),t.data_type=n.bits+(n.last?64:0)+(n.mode===Ga?128:0)+(n.mode===dp||n.mode===Y0?256:0),(g===0&&y===0||e===f_)&&_===Sc&&(_=QU),_},iV=t=>{if(Oc(t))return Mi;let e=t.state;return e.window&&(e.window=null),t.state=null,Sc},aV=(t,e)=>{if(Oc(t))return Mi;const n=t.state;return n.wrap&2?(n.head=e,e.done=!1,Sc):Mi},oV=(t,e)=>{const n=e.length;let r,s,i;return Oc(t)||(r=t.state,r.wrap!==0&&r.mode!==Om)?Mi:r.mode===Om&&(s=1,s=W2(s,e,n,0),s!==r.check)?wE:(i=TE(t,e,n,n),i?(r.mode=_E,bE):(r.havedict=1,Sc))};var lV=AE,cV=EE,uV=SE,dV=nV,hV=kE,fV=sV,pV=iV,mV=aV,gV=oV,yV="pako inflate (from Nodeca project)",Xa={inflateReset:lV,inflateReset2:cV,inflateResetKeep:uV,inflateInit:dV,inflateInit2:hV,inflate:fV,inflateEnd:pV,inflateGetHeader:mV,inflateSetDictionary:gV,inflateInfo:yV};function vV(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var xV=vV;const IE=Object.prototype.toString,{Z_NO_FLUSH:wV,Z_FINISH:bV,Z_OK:Yh,Z_STREAM_END:Z0,Z_NEED_DICT:e1,Z_STREAM_ERROR:_V,Z_DATA_ERROR:F_,Z_MEM_ERROR:NV}=mE;function wf(t){this.options=gE.assign({chunkSize:1024*64,windowBits:15,to:""},t||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(t&&t.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15||(e.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new FU,this.strm.avail_out=0;let n=Xa.inflateInit2(this.strm,e.windowBits);if(n!==Yh)throw new Error(G2[n]);if(this.header=new xV,Xa.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=K2.string2buf(e.dictionary):IE.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(n=Xa.inflateSetDictionary(this.strm,e.dictionary),n!==Yh)))throw new Error(G2[n])}wf.prototype.push=function(t,e){const n=this.strm,r=this.options.chunkSize,s=this.options.dictionary;let i,a,o;if(this.ended)return!1;for(e===~~e?a=e:a=e===!0?bV:wV,IE.call(t)==="[object ArrayBuffer]"?n.input=new Uint8Array(t):n.input=t,n.next_in=0,n.avail_in=n.input.length;;){for(n.avail_out===0&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),i=Xa.inflate(n,a),i===e1&&s&&(i=Xa.inflateSetDictionary(n,s),i===Yh?i=Xa.inflate(n,a):i===F_&&(i=e1));n.avail_in>0&&i===Z0&&n.state.wrap>0&&t[n.next_in]!==0;)Xa.inflateReset(n),i=Xa.inflate(n,a);switch(i){case _V:case F_:case e1:case NV:return this.onEnd(i),this.ended=!0,!1}if(o=n.avail_out,n.next_out&&(n.avail_out===0||i===Z0))if(this.options.to==="string"){let l=K2.utf8border(n.output,n.next_out),c=n.next_out-l,d=K2.buf2string(n.output,l);n.next_out=c,n.avail_out=r-c,c&&n.output.set(n.output.subarray(l,l+c),0),this.onData(d)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(!(i===Yh&&o===0)){if(i===Z0)return i=Xa.inflateEnd(this.strm),this.onEnd(i),this.ended=!0,!0;if(n.avail_in===0)break}}return!0};wf.prototype.onData=function(t){this.chunks.push(t)};wf.prototype.onEnd=function(t){t===Yh&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=gE.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function SV(t,e){const n=new wf(e);if(n.push(t),n.err)throw n.msg||G2[n.err];return n.result}var AV=wf,EV=SV,kV={Inflate:AV,inflate:EV};const{Inflate:TV,inflate:IV}=kV;var U_=TV,CV=IV;const CE=[];for(let t=0;t<256;t++){let e=t;for(let n=0;n<8;n++)e&1?e=3988292384^e>>>1:e=e>>>1;CE[t]=e}const V_=4294967295;function PV(t,e,n){let r=t;for(let s=0;s<n;s++)r=CE[(r^e[s])&255]^r>>>8;return r}function jV(t,e){return(PV(V_,t,e)^V_)>>>0}function B_(t,e,n){const r=t.readUint32(),s=jV(new Uint8Array(t.buffer,t.byteOffset+t.offset-e-4,e),e);if(s!==r)throw new Error(`CRC mismatch for chunk ${n}. Expected ${r}, found ${s}`)}function PE(t,e,n){for(let r=0;r<n;r++)e[r]=t[r]}function jE(t,e,n,r){let s=0;for(;s<r;s++)e[s]=t[s];for(;s<n;s++)e[s]=t[s]+e[s-r]&255}function LE(t,e,n,r){let s=0;if(n.length===0)for(;s<r;s++)e[s]=t[s];else for(;s<r;s++)e[s]=t[s]+n[s]&255}function RE(t,e,n,r,s){let i=0;if(n.length===0){for(;i<s;i++)e[i]=t[i];for(;i<r;i++)e[i]=t[i]+(e[i-s]>>1)&255}else{for(;i<s;i++)e[i]=t[i]+(n[i]>>1)&255;for(;i<r;i++)e[i]=t[i]+(e[i-s]+n[i]>>1)&255}}function DE(t,e,n,r,s){let i=0;if(n.length===0){for(;i<s;i++)e[i]=t[i];for(;i<r;i++)e[i]=t[i]+e[i-s]&255}else{for(;i<s;i++)e[i]=t[i]+n[i]&255;for(;i<r;i++)e[i]=t[i]+LV(e[i-s],n[i],n[i-s])&255}}function LV(t,e,n){const r=t+e-n,s=Math.abs(r-t),i=Math.abs(r-e),a=Math.abs(r-n);return s<=i&&s<=a?t:i<=a?e:n}function RV(t,e,n,r,s,i){switch(t){case 0:PE(e,n,s);break;case 1:jE(e,n,s,i);break;case 2:LE(e,n,r,s);break;case 3:RE(e,n,r,s,i);break;case 4:DE(e,n,r,s,i);break;default:throw new Error(`Unsupported filter: ${t}`)}}const DV=new Uint16Array([255]),OV=new Uint8Array(DV.buffer),MV=OV[0]===255;function FV(t){const{data:e,width:n,height:r,channels:s,depth:i}=t,a=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],o=Math.ceil(i/8)*s,l=new Uint8Array(r*n*o);let c=0;for(let d=0;d<7;d++){const g=a[d],y=Math.ceil((n-g.x)/g.xStep),p=Math.ceil((r-g.y)/g.yStep);if(y<=0||p<=0)continue;const N=y*o,S=new Uint8Array(N);for(let I=0;I<p;I++){const w=e[c++],T=e.subarray(c,c+N);c+=N;const j=new Uint8Array(N);RV(w,T,j,S,N,o),S.set(j);for(let D=0;D<y;D++){const H=g.x+D*g.xStep,J=g.y+I*g.yStep;if(!(H>=n||J>=r))for(let O=0;O<o;O++)l[(J*n+H)*o+O]=j[D*o+O]}}}if(i===16){const d=new Uint16Array(l.buffer);if(MV)for(let g=0;g<d.length;g++)d[g]=UV(d[g]);return d}else return l}function UV(t){return(t&255)<<8|t>>8&255}const VV=new Uint16Array([255]),BV=new Uint8Array(VV.buffer),zV=BV[0]===255,qV=new Uint8Array(0);function z_(t){const{data:e,width:n,height:r,channels:s,depth:i}=t,a=Math.ceil(i/8)*s,o=Math.ceil(i/8*s*n),l=new Uint8Array(r*o);let c=qV,d=0,g,y;for(let p=0;p<r;p++){switch(g=e.subarray(d+1,d+1+o),y=l.subarray(p*o,(p+1)*o),e[d]){case 0:PE(g,y,o);break;case 1:jE(g,y,o,a);break;case 2:LE(g,y,c,o);break;case 3:RE(g,y,c,o,a);break;case 4:DE(g,y,c,o,a);break;default:throw new Error(`Unsupported filter: ${e[d]}`)}c=y,d+=o+1}if(i===16){const p=new Uint16Array(l.buffer);if(zV)for(let N=0;N<p.length;N++)p[N]=HV(p[N]);return p}else return l}function HV(t){return(t&255)<<8|t>>8&255}const Up=Uint8Array.of(137,80,78,71,13,10,26,10);function q_(t){if(!$V(t.readBytes(Up.length)))throw new Error("wrong PNG signature")}function $V(t){if(t.length<Up.length)return!1;for(let e=0;e<Up.length;e++)if(t[e]!==Up[e])return!1;return!0}const WV="tEXt",GV=0,OE=new TextDecoder("latin1");function KV(t){if(QV(t),t.length===0||t.length>79)throw new Error("keyword length must be between 1 and 79")}const YV=/^[\u0000-\u00FF]*$/;function QV(t){if(!YV.test(t))throw new Error("invalid latin1 text")}function XV(t,e,n){const r=ME(e);t[r]=JV(e,n-r.length-1)}function ME(t){for(t.mark();t.readByte()!==GV;);const e=t.offset;t.reset();const n=OE.decode(t.readBytes(e-t.offset-1));return t.skip(1),KV(n),n}function JV(t,e){return OE.decode(t.readBytes(e))}const ai={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},t1={UNKNOWN:-1,DEFLATE:0},H_={UNKNOWN:-1,ADAPTIVE:0},n1={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},fp={NONE:0,BACKGROUND:1,PREVIOUS:2},r1={SOURCE:0,OVER:1};class ZV extends y5{constructor(n,r={}){super(n);vn(this,"_checkCrc");vn(this,"_inflator");vn(this,"_png");vn(this,"_apng");vn(this,"_end");vn(this,"_hasPalette");vn(this,"_palette");vn(this,"_hasTransparency");vn(this,"_transparency");vn(this,"_compressionMethod");vn(this,"_filterMethod");vn(this,"_interlaceMethod");vn(this,"_colorType");vn(this,"_isAnimated");vn(this,"_numberOfFrames");vn(this,"_numberOfPlays");vn(this,"_frames");vn(this,"_writingDataChunks");const{checkCrc:s=!1}=r;this._checkCrc=s,this._inflator=new U_,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=t1.UNKNOWN,this._filterMethod=H_.UNKNOWN,this._interlaceMethod=n1.UNKNOWN,this._colorType=ai.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(q_(this);!this._end;){const n=this.readUint32(),r=this.readChars(4);this.decodeChunk(n,r)}return this.decodeImage(),this._png}decodeApng(){for(q_(this);!this._end;){const n=this.readUint32(),r=this.readChars(4);this.decodeApngChunk(n,r)}return this.decodeApngImage(),this._apng}decodeChunk(n,r){const s=this.offset;switch(r){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(n);break;case"IDAT":this.decodeIDAT(n);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(n);break;case"iCCP":this.decodeiCCP(n);break;case WV:XV(this._png.text,this,n);break;case"pHYs":this.decodepHYs();break;default:this.skip(n);break}if(this.offset-s!==n)throw new Error(`Length mismatch while decoding chunk ${r}`);this._checkCrc?B_(this,n+4,r):this.skip(4)}decodeApngChunk(n,r){const s=this.offset;switch(r!=="fdAT"&&r!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),r){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(n);break;default:this.decodeChunk(n,r),this.offset=s+n;break}if(this.offset-s!==n)throw new Error(`Length mismatch while decoding chunk ${r}`);this._checkCrc?B_(this,n+4,r):this.skip(4)}decodeIHDR(){const n=this._png;n.width=this.readUint32(),n.height=this.readUint32(),n.depth=eB(this.readUint8());const r=this.readUint8();this._colorType=r;let s;switch(r){case ai.GREYSCALE:s=1;break;case ai.TRUECOLOUR:s=3;break;case ai.INDEXED_COLOUR:s=1;break;case ai.GREYSCALE_ALPHA:s=2;break;case ai.TRUECOLOUR_ALPHA:s=4;break;case ai.UNKNOWN:default:throw new Error(`Unknown color type: ${r}`)}if(this._png.channels=s,this._compressionMethod=this.readUint8(),this._compressionMethod!==t1.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const n={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(n)}decodePLTE(n){if(n%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${n}`);const r=n/3;this._hasPalette=!0;const s=[];this._palette=s;for(let i=0;i<r;i++)s.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(n){this._writingDataChunks=!0;const r=n,s=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,s,r)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(n)}decodeFDAT(n){this._writingDataChunks=!0;let r=n,s=this.offset+this.byteOffset;if(s+=4,r-=4,this._inflator.push(new Uint8Array(this.buffer,s,r)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(n)}decodetRNS(n){switch(this._colorType){case ai.GREYSCALE:case ai.TRUECOLOUR:{if(n%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${n}`);if(n/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${n/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(n/2);for(let r=0;r<n/2;r++)this._transparency[r]=this.readUint16();break}case ai.INDEXED_COLOUR:{if(n>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${n} vs ${this._palette.length})`);let r=0;for(;r<n;r++){const s=this.readByte();this._palette[r].push(s)}for(;r<this._palette.length;r++)this._palette[r].push(255);break}case ai.UNKNOWN:case ai.GREYSCALE_ALPHA:case ai.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(n){const r=ME(this),s=this.readUint8();if(s!==t1.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${s}`);const i=this.readBytes(n-r.length-2);this._png.iccEmbeddedProfile={name:r,profile:CV(i)}}decodepHYs(){const n=this.readUint32(),r=this.readUint32(),s=this.readByte();this._png.resolution={x:n,y:r,unit:s}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let n=0;n<this._numberOfFrames;n++){const r={sequenceNumber:this._frames[n].sequenceNumber,delayNumber:this._frames[n].delayNumber,delayDenominator:this._frames[n].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},s=this._frames.at(n);if(s){if(s.data=z_({data:s.data,width:s.width,height:s.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),n===0||s.xOffset===0&&s.yOffset===0&&s.width===this._png.width&&s.height===this._png.height)r.data=s.data;else{const i=this._apng.frames.at(n-1);this.disposeFrame(s,i,r),this.addFrameDataToCanvas(r,s)}this._apng.frames.push(r)}}return this._apng}disposeFrame(n,r,s){switch(n.disposeOp){case fp.NONE:break;case fp.BACKGROUND:for(let i=0;i<this._png.height;i++)for(let a=0;a<this._png.width;a++){const o=(i*n.width+a)*this._png.channels;for(let l=0;l<this._png.channels;l++)s.data[o+l]=0}break;case fp.PREVIOUS:s.data.set(r.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(n,r){const s=1<<this._png.depth,i=(a,o)=>{const l=((a+r.yOffset)*this._png.width+r.xOffset+o)*this._png.channels,c=(a*r.width+o)*this._png.channels;return{index:l,frameIndex:c}};switch(r.blendOp){case r1.SOURCE:for(let a=0;a<r.height;a++)for(let o=0;o<r.width;o++){const{index:l,frameIndex:c}=i(a,o);for(let d=0;d<this._png.channels;d++)n.data[l+d]=r.data[c+d]}break;case r1.OVER:for(let a=0;a<r.height;a++)for(let o=0;o<r.width;o++){const{index:l,frameIndex:c}=i(a,o);for(let d=0;d<this._png.channels;d++){const g=r.data[c+this._png.channels-1]/s,y=d%(this._png.channels-1)===0?1:r.data[c+d],p=Math.floor(g*y+(1-g)*n.data[l+d]);n.data[l+d]+=p}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){var r;if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const n=this._isAnimated?((r=this._frames)==null?void 0:r.at(0)).data:this._inflator.result;if(this._filterMethod!==H_.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===n1.NO_INTERLACE)this._png.data=z_({data:n,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===n1.ADAM7)this._png.data=FV({data:n,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const n=this._inflator.result,r=this._frames.at(-1);r?r.data=n:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:fp.NONE,blendOp:r1.SOURCE,data:n}),this._inflator=new U_,this._writingDataChunks=!1}}function eB(t){if(t!==1&&t!==2&&t!==4&&t!==8&&t!==16)throw new Error(`invalid bit depth: ${t}`);return t}var $_;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.METRE=1]="METRE"})($_||($_={}));function tB(t,e){return new ZV(t,e).decode()}var Tt=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function s1(){Tt.console&&typeof Tt.console.log=="function"&&Tt.console.log.apply(Tt.console,arguments)}var Cn={log:s1,warn:function(t){Tt.console&&(typeof Tt.console.warn=="function"?Tt.console.warn.apply(Tt.console,arguments):s1.call(null,arguments))},error:function(t){Tt.console&&(typeof Tt.console.error=="function"?Tt.console.error.apply(Tt.console,arguments):s1(t))}};function i1(t,e,n){var r=new XMLHttpRequest;r.open("GET",t),r.responseType="blob",r.onload=function(){Xl(r.response,e,n)},r.onerror=function(){Cn.error("could not download file")},r.send()}function W_(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function pp(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var Xl=Tt.saveAs||((typeof window>"u"?"undefined":xn(window))!=="object"||window!==Tt?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,n){var r=Tt.URL||Tt.webkitURL,s=document.createElement("a");e=e||t.name||"download",s.download=e,s.rel="noopener",typeof t=="string"?(s.href=t,s.origin!==location.origin?W_(s.href)?i1(t,e,n):pp(s,s.target="_blank"):pp(s)):(s.href=r.createObjectURL(t),setTimeout(function(){r.revokeObjectURL(s.href)},4e4),setTimeout(function(){pp(s)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,n){if(e=e||t.name||"download",typeof t=="string")if(W_(t))i1(t,e,n);else{var r=document.createElement("a");r.href=t,r.target="_blank",setTimeout(function(){pp(r)})}else navigator.msSaveOrOpenBlob(function(s,i){return i===void 0?i={autoBom:!1}:xn(i)!=="object"&&(Cn.warn("Deprecated: Expected third argument to be a object"),i={autoBom:!i}),i.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(s.type)?new Blob(["\uFEFF",s],{type:s.type}):s}(t,n),e)}:function(t,e,n,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof t=="string")return i1(t,e,n);var s=t.type==="application/octet-stream",i=/constructor/i.test(Tt.HTMLElement)||Tt.safari,a=/CriOS\/[\d]+/.test(navigator.userAgent);if((a||s&&i)&&(typeof FileReader>"u"?"undefined":xn(FileReader))==="object"){var o=new FileReader;o.onloadend=function(){var d=o.result;d=a?d:d.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=d:location=d,r=null},o.readAsDataURL(t)}else{var l=Tt.URL||Tt.webkitURL,c=l.createObjectURL(t);r?r.location=c:location.href=c,r=null,setTimeout(function(){l.revokeObjectURL(c)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function FE(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(o){return[parseInt(o[1]),parseInt(o[2]),parseInt(o[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(o){return[parseInt(o[1],16),parseInt(o[2],16),parseInt(o[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(o){return[parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16),parseInt(o[3]+o[3],16)]}}],r=0;r<n.length;r++){var s=n[r].re,i=n[r].process,a=s.exec(t);a&&(e=i(a),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var o=this.r.toString(16),l=this.g.toString(16),c=this.b.toString(16);return o.length==1&&(o="0"+o),l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),"#"+o+l+c}}var Vp=Tt.atob.bind(Tt),G_=Tt.btoa.bind(Tt);/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function a1(t,e){var n=t[0],r=t[1],s=t[2],i=t[3];n=us(n,r,s,i,e[0],7,-680876936),i=us(i,n,r,s,e[1],12,-389564586),s=us(s,i,n,r,e[2],17,606105819),r=us(r,s,i,n,e[3],22,-1044525330),n=us(n,r,s,i,e[4],7,-176418897),i=us(i,n,r,s,e[5],12,1200080426),s=us(s,i,n,r,e[6],17,-1473231341),r=us(r,s,i,n,e[7],22,-45705983),n=us(n,r,s,i,e[8],7,1770035416),i=us(i,n,r,s,e[9],12,-1958414417),s=us(s,i,n,r,e[10],17,-42063),r=us(r,s,i,n,e[11],22,-1990404162),n=us(n,r,s,i,e[12],7,1804603682),i=us(i,n,r,s,e[13],12,-40341101),s=us(s,i,n,r,e[14],17,-1502002290),n=ds(n,r=us(r,s,i,n,e[15],22,1236535329),s,i,e[1],5,-165796510),i=ds(i,n,r,s,e[6],9,-1069501632),s=ds(s,i,n,r,e[11],14,643717713),r=ds(r,s,i,n,e[0],20,-373897302),n=ds(n,r,s,i,e[5],5,-701558691),i=ds(i,n,r,s,e[10],9,38016083),s=ds(s,i,n,r,e[15],14,-660478335),r=ds(r,s,i,n,e[4],20,-405537848),n=ds(n,r,s,i,e[9],5,568446438),i=ds(i,n,r,s,e[14],9,-1019803690),s=ds(s,i,n,r,e[3],14,-187363961),r=ds(r,s,i,n,e[8],20,1163531501),n=ds(n,r,s,i,e[13],5,-1444681467),i=ds(i,n,r,s,e[2],9,-51403784),s=ds(s,i,n,r,e[7],14,1735328473),n=hs(n,r=ds(r,s,i,n,e[12],20,-1926607734),s,i,e[5],4,-378558),i=hs(i,n,r,s,e[8],11,-2022574463),s=hs(s,i,n,r,e[11],16,1839030562),r=hs(r,s,i,n,e[14],23,-35309556),n=hs(n,r,s,i,e[1],4,-1530992060),i=hs(i,n,r,s,e[4],11,1272893353),s=hs(s,i,n,r,e[7],16,-155497632),r=hs(r,s,i,n,e[10],23,-1094730640),n=hs(n,r,s,i,e[13],4,681279174),i=hs(i,n,r,s,e[0],11,-358537222),s=hs(s,i,n,r,e[3],16,-722521979),r=hs(r,s,i,n,e[6],23,76029189),n=hs(n,r,s,i,e[9],4,-640364487),i=hs(i,n,r,s,e[12],11,-421815835),s=hs(s,i,n,r,e[15],16,530742520),n=fs(n,r=hs(r,s,i,n,e[2],23,-995338651),s,i,e[0],6,-198630844),i=fs(i,n,r,s,e[7],10,1126891415),s=fs(s,i,n,r,e[14],15,-1416354905),r=fs(r,s,i,n,e[5],21,-57434055),n=fs(n,r,s,i,e[12],6,1700485571),i=fs(i,n,r,s,e[3],10,-1894986606),s=fs(s,i,n,r,e[10],15,-1051523),r=fs(r,s,i,n,e[1],21,-2054922799),n=fs(n,r,s,i,e[8],6,1873313359),i=fs(i,n,r,s,e[15],10,-30611744),s=fs(s,i,n,r,e[6],15,-1560198380),r=fs(r,s,i,n,e[13],21,1309151649),n=fs(n,r,s,i,e[4],6,-145523070),i=fs(i,n,r,s,e[11],10,-1120210379),s=fs(s,i,n,r,e[2],15,718787259),r=fs(r,s,i,n,e[9],21,-343485551),t[0]=al(n,t[0]),t[1]=al(r,t[1]),t[2]=al(s,t[2]),t[3]=al(i,t[3])}function Lg(t,e,n,r,s,i){return e=al(al(e,t),al(r,i)),al(e<<s|e>>>32-s,n)}function us(t,e,n,r,s,i,a){return Lg(e&n|~e&r,t,e,s,i,a)}function ds(t,e,n,r,s,i,a){return Lg(e&r|n&~r,t,e,s,i,a)}function hs(t,e,n,r,s,i,a){return Lg(e^n^r,t,e,s,i,a)}function fs(t,e,n,r,s,i,a){return Lg(n^(e|~r),t,e,s,i,a)}function UE(t){var e,n=t.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)a1(r,nB(t.substring(e-64,e)));t=t.substring(e-64);var s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)s[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(s[e>>2]|=128<<(e%4<<3),e>55)for(a1(r,s),e=0;e<16;e++)s[e]=0;return s[14]=8*n,a1(r,s),r}function nB(t){var e,n=[];for(e=0;e<64;e+=4)n[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return n}var K_="0123456789abcdef".split("");function rB(t){for(var e="",n=0;n<4;n++)e+=K_[t>>8*n+4&15]+K_[t>>8*n&15];return e}function sB(t){return String.fromCharCode(255&t,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function Y2(t){return UE(t).map(sB).join("")}var iB=function(t){for(var e=0;e<t.length;e++)t[e]=rB(t[e]);return t.join("")}(UE("hello"))!="5d41402abc4b2a76b9719d911017c592";function al(t,e){if(iB){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function Q2(t,e){var n,r,s,i;if(t!==n){for(var a=(s=t,i=1+(256/t.length|0),new Array(i+1).join(s)),o=[],l=0;l<256;l++)o[l]=l;var c=0;for(l=0;l<256;l++){var d=o[l];c=(c+d+a.charCodeAt(l))%256,o[l]=o[c],o[c]=d}n=t,r=o}else o=r;var g=e.length,y=0,p=0,N="";for(l=0;l<g;l++)p=(p+(d=o[y=(y+1)%256]))%256,o[y]=o[p],o[p]=d,a=o[(o[y]+o[p])%256],N+=String.fromCharCode(e.charCodeAt(l)^a);return N}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var Y_={print:4,modify:8,copy:16,"annot-forms":32};function nu(t,e,n,r){this.v=1,this.r=2;var s=192;t.forEach(function(o){if(Y_.perm!==void 0)throw new Error("Invalid permission: "+o);s+=Y_[o]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var i=(e+this.padding).substr(0,32),a=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(i,a),this.P=-(1+(255^s)),this.encryptionKey=Y2(i+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=Q2(this.encryptionKey,this.padding)}function ru(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",n=t.length,r=0;r<n;r++){var s=t.charCodeAt(r);e+=s<33||s===35||s===37||s===40||s===41||s===47||s===60||s===62||s===91||s===93||s===123||s===125||s>126?"#"+("0"+s.toString(16)).slice(-2):t[r]}return e}function Q_(t){if(xn(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(n,r,s){if(s=s||!1,typeof n!="string"||typeof r!="function"||typeof s!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(n)||(e[n]={});var i=Math.random().toString(35);return e[n][i]=[r,!!s],i},this.unsubscribe=function(n){for(var r in e)if(e[r][n])return delete e[r][n],Object.keys(e[r]).length===0&&delete e[r],!0;return!1},this.publish=function(n){if(e.hasOwnProperty(n)){var r=Array.prototype.slice.call(arguments,1),s=[];for(var i in e[n]){var a=e[n][i];try{a[0].apply(t,r)}catch(o){Tt.console&&Cn.error("jsPDF PubSub Error",o.message,o)}a[1]&&s.push(i)}s.length&&s.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function Mm(t){if(!(this instanceof Mm))return new Mm(t);var e="opacity,stroke-opacity".split(",");for(var n in t)t.hasOwnProperty(n)&&e.indexOf(n)>=0&&(this[n]=t[n]);this.id="",this.objectNumber=-1}function VE(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function Jl(t,e,n,r,s){if(!(this instanceof Jl))return new Jl(t,e,n,r,s);this.type=t==="axial"?2:3,this.coords=e,this.colors=n,VE.call(this,r,s)}function yu(t,e,n,r,s){if(!(this instanceof yu))return new yu(t,e,n,r,s);this.boundingBox=t,this.xStep=e,this.yStep=n,this.stream="",this.cloneIndex=0,VE.call(this,r,s)}function vt(t){var e,n=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],s=arguments[2],i=arguments[3],a=[],o=1,l=16,c="S",d=null;xn(t=t||{})==="object"&&(n=t.orientation,r=t.unit||r,s=t.format||s,i=t.compress||t.compressPdf||i,(d=t.encryption||null)!==null&&(d.userPassword=d.userPassword||"",d.ownerPassword=d.ownerPassword||"",d.userPermissions=d.userPermissions||[]),o=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(l=t.floatPrecision),c=t.defaultPathOperation||"S"),a=t.filters||(i===!0?["FlateEncode"]:a),r=r||"mm",n=(""+(n||"P")).toLowerCase();var g=t.putOnlyUsedFonts||!1,y={},p={internal:{},__private__:{}};p.__private__.PubSub=Q_;var N="1.3",S=p.__private__.getPdfVersion=function(){return N};p.__private__.setPdfVersion=function(v){N=v};var I={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};p.__private__.getPageFormats=function(){return I};var w=p.__private__.getPageFormat=function(v){return I[v]};s=s||"a4";var T="compat",j="advanced",D=T;function H(){this.saveGraphicsState(),V(new nt(xt,0,0,-xt,0,Ni()*xt).toString()+" cm"),this.setFontSize(this.getFontSize()/xt),c="n",D=j}function J(){this.restoreGraphicsState(),c="S",D=T}var O=p.__private__.combineFontStyleAndFontWeight=function(v,F){if(v=="bold"&&F=="normal"||v=="bold"&&F==400||v=="normal"&&F=="italic"||v=="bold"&&F=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return F&&(v=F==400||F==="normal"?v==="italic"?"italic":"normal":F!=700&&F!=="bold"||v!=="normal"?(F==700?"bold":F)+""+v:"bold"),v};p.advancedAPI=function(v){var F=D===T;return F&&H.call(this),typeof v!="function"||(v(this),F&&J.call(this)),this},p.compatAPI=function(v){var F=D===j;return F&&J.call(this),typeof v!="function"||(v(this),F&&H.call(this)),this},p.isAdvancedAPI=function(){return D===j};var _,A=function(v){if(D!==j)throw new Error(v+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},R=p.roundToPrecision=p.__private__.roundToPrecision=function(v,F){var te=e||F;if(isNaN(v)||isNaN(te))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return v.toFixed(te).replace(/0+$/,"")};_=p.hpf=p.__private__.hpf=typeof l=="number"?function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.hpf");return R(v,l)}:l==="smart"?function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.hpf");return R(v,v>-1&&v<1?16:5)}:function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.hpf");return R(v,16)};var E=p.f2=p.__private__.f2=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.f2");return R(v,2)},C=p.__private__.f3=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.f3");return R(v,3)},L=p.scale=p.__private__.scale=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.scale");return D===T?v*xt:D===j?v:void 0},z=function(v){return L(function(F){return D===T?Ni()-F:D===j?F:void 0}(v))};p.__private__.setPrecision=p.setPrecision=function(v){typeof parseInt(v,10)=="number"&&(e=parseInt(v,10))};var Z,ae="00000000000000000000000000000000",ue=p.__private__.getFileId=function(){return ae},Q=p.__private__.setFileId=function(v){return ae=v!==void 0&&/^[a-fA-F0-9]{32}$/.test(v)?v.toUpperCase():ae.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),d!==null&&(kn=new nu(d.userPermissions,d.userPassword,d.ownerPassword,ae)),ae};p.setFileId=function(v){return Q(v),this},p.getFileId=function(){return ue()};var ce=p.__private__.convertDateToPDFDate=function(v){var F=v.getTimezoneOffset(),te=F<0?"+":"-",oe=Math.floor(Math.abs(F/60)),pe=Math.abs(F%60),Te=[te,X(oe),"'",X(pe),"'"].join("");return["D:",v.getFullYear(),X(v.getMonth()+1),X(v.getDate()),X(v.getHours()),X(v.getMinutes()),X(v.getSeconds()),Te].join("")},me=p.__private__.convertPDFDateToDate=function(v){var F=parseInt(v.substr(2,4),10),te=parseInt(v.substr(6,2),10)-1,oe=parseInt(v.substr(8,2),10),pe=parseInt(v.substr(10,2),10),Te=parseInt(v.substr(12,2),10),Le=parseInt(v.substr(14,2),10);return new Date(F,te,oe,pe,Te,Le,0)},ye=p.__private__.setCreationDate=function(v){var F;if(v===void 0&&(v=new Date),v instanceof Date)F=ce(v);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(v))throw new Error("Invalid argument passed to jsPDF.setCreationDate");F=v}return Z=F},M=p.__private__.getCreationDate=function(v){var F=Z;return v==="jsDate"&&(F=me(Z)),F};p.setCreationDate=function(v){return ye(v),this},p.getCreationDate=function(v){return M(v)};var W,X=p.__private__.padd2=function(v){return("0"+parseInt(v)).slice(-2)},Y=p.__private__.padd2Hex=function(v){return("00"+(v=v.toString())).substr(v.length)},ie=0,le=[],xe=[],ee=0,fe=[],ve=[],Se=!1,ke=xe;p.__private__.setCustomOutputDestination=function(v){Se=!0,ke=v};var Ue=function(v){Se||(ke=v)};p.__private__.resetCustomOutputDestination=function(){Se=!1,ke=xe};var V=p.__private__.out=function(v){return v=v.toString(),ee+=v.length+1,ke.push(v),ke},De=p.__private__.write=function(v){return V(arguments.length===1?v.toString():Array.prototype.join.call(arguments," "))},Ze=p.__private__.getArrayBuffer=function(v){for(var F=v.length,te=new ArrayBuffer(F),oe=new Uint8Array(te);F--;)oe[F]=v.charCodeAt(F);return te},Ve=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];p.__private__.getStandardFonts=function(){return Ve};var Ce=t.fontSize||16;p.__private__.setFontSize=p.setFontSize=function(v){return Ce=D===j?v/xt:v,this};var Xe,He=p.__private__.getFontSize=p.getFontSize=function(){return D===T?Ce:Ce*xt},st=t.R2L||!1;p.__private__.setR2L=p.setR2L=function(v){return st=v,this},p.__private__.getR2L=p.getR2L=function(){return st};var Ae,bt=p.__private__.setZoomMode=function(v){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(v))Xe=v;else if(isNaN(v)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(v)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+v+'" is not recognized.');Xe=v}else Xe=parseInt(v,10)};p.__private__.getZoomMode=function(){return Xe};var gt,$e=p.__private__.setPageMode=function(v){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(v)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+v+'" is not recognized.');Ae=v};p.__private__.getPageMode=function(){return Ae};var at=p.__private__.setLayoutMode=function(v){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(v)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+v+'" is not recognized.');gt=v};p.__private__.getLayoutMode=function(){return gt},p.__private__.setDisplayMode=p.setDisplayMode=function(v,F,te){return bt(v),at(F),$e(te),this};var Nt={title:"",subject:"",author:"",keywords:"",creator:""};p.__private__.getDocumentProperty=function(v){if(Object.keys(Nt).indexOf(v)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Nt[v]},p.__private__.getDocumentProperties=function(){return Nt},p.__private__.setDocumentProperties=p.setProperties=p.setDocumentProperties=function(v){for(var F in Nt)Nt.hasOwnProperty(F)&&v[F]&&(Nt[F]=v[F]);return this},p.__private__.setDocumentProperty=function(v,F){if(Object.keys(Nt).indexOf(v)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Nt[v]=F};var Ye,xt,et,Ot,Ft,Ge={},ft={},kt=[],ot={},Pt={},Qe={},tt={},It=null,qe=0,Ke=[],ut=new Q_(p),$n=t.hotfixes||[],zt={},en={},qt=[],nt=function v(F,te,oe,pe,Te,Le){if(!(this instanceof v))return new v(F,te,oe,pe,Te,Le);isNaN(F)&&(F=1),isNaN(te)&&(te=0),isNaN(oe)&&(oe=0),isNaN(pe)&&(pe=1),isNaN(Te)&&(Te=0),isNaN(Le)&&(Le=0),this._matrix=[F,te,oe,pe,Te,Le]};Object.defineProperty(nt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(v){this._matrix[0]=v}}),Object.defineProperty(nt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(v){this._matrix[1]=v}}),Object.defineProperty(nt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(v){this._matrix[2]=v}}),Object.defineProperty(nt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(v){this._matrix[3]=v}}),Object.defineProperty(nt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(v){this._matrix[4]=v}}),Object.defineProperty(nt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(v){this._matrix[5]=v}}),Object.defineProperty(nt.prototype,"a",{get:function(){return this._matrix[0]},set:function(v){this._matrix[0]=v}}),Object.defineProperty(nt.prototype,"b",{get:function(){return this._matrix[1]},set:function(v){this._matrix[1]=v}}),Object.defineProperty(nt.prototype,"c",{get:function(){return this._matrix[2]},set:function(v){this._matrix[2]=v}}),Object.defineProperty(nt.prototype,"d",{get:function(){return this._matrix[3]},set:function(v){this._matrix[3]=v}}),Object.defineProperty(nt.prototype,"e",{get:function(){return this._matrix[4]},set:function(v){this._matrix[4]=v}}),Object.defineProperty(nt.prototype,"f",{get:function(){return this._matrix[5]},set:function(v){this._matrix[5]=v}}),Object.defineProperty(nt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(nt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(nt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(nt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),nt.prototype.join=function(v){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(_).join(v)},nt.prototype.multiply=function(v){var F=v.sx*this.sx+v.shy*this.shx,te=v.sx*this.shy+v.shy*this.sy,oe=v.shx*this.sx+v.sy*this.shx,pe=v.shx*this.shy+v.sy*this.sy,Te=v.tx*this.sx+v.ty*this.shx+this.tx,Le=v.tx*this.shy+v.ty*this.sy+this.ty;return new nt(F,te,oe,pe,Te,Le)},nt.prototype.decompose=function(){var v=this.sx,F=this.shy,te=this.shx,oe=this.sy,pe=this.tx,Te=this.ty,Le=Math.sqrt(v*v+F*F),rt=(v/=Le)*te+(F/=Le)*oe;te-=v*rt,oe-=F*rt;var dt=Math.sqrt(te*te+oe*oe);return rt/=dt,v*(oe/=dt)<F*(te/=dt)&&(v=-v,F=-F,rt=-rt,Le=-Le),{scale:new nt(Le,0,0,dt,0,0),translate:new nt(1,0,0,1,pe,Te),rotate:new nt(v,F,-F,v,0,0),skew:new nt(1,0,rt,1,0,0)}},nt.prototype.toString=function(v){return this.join(" ")},nt.prototype.inversed=function(){var v=this.sx,F=this.shy,te=this.shx,oe=this.sy,pe=this.tx,Te=this.ty,Le=1/(v*oe-F*te),rt=oe*Le,dt=-F*Le,St=-te*Le,jt=v*Le;return new nt(rt,dt,St,jt,-rt*pe-St*Te,-dt*pe-jt*Te)},nt.prototype.applyToPoint=function(v){var F=v.x*this.sx+v.y*this.shx+this.tx,te=v.x*this.shy+v.y*this.sy+this.ty;return new bi(F,te)},nt.prototype.applyToRectangle=function(v){var F=this.applyToPoint(v),te=this.applyToPoint(new bi(v.x+v.w,v.y+v.h));return new To(F.x,F.y,te.x-F.x,te.y-F.y)},nt.prototype.clone=function(){var v=this.sx,F=this.shy,te=this.shx,oe=this.sy,pe=this.tx,Te=this.ty;return new nt(v,F,te,oe,pe,Te)},p.Matrix=nt;var Ut=p.matrixMult=function(v,F){return F.multiply(v)},Vn=new nt(1,0,0,1,0,0);p.unitMatrix=p.identityMatrix=Vn;var En=function(v,F){if(!Pt[v]){var te=(F instanceof Jl?"Sh":"P")+(Object.keys(ot).length+1).toString(10);F.id=te,Pt[v]=te,ot[te]=F,ut.publish("addPattern",F)}};p.ShadingPattern=Jl,p.TilingPattern=yu,p.addShadingPattern=function(v,F){return A("addShadingPattern()"),En(v,F),this},p.beginTilingPattern=function(v){A("beginTilingPattern()"),da(v.boundingBox[0],v.boundingBox[1],v.boundingBox[2]-v.boundingBox[0],v.boundingBox[3]-v.boundingBox[1],v.matrix)},p.endTilingPattern=function(v,F){A("endTilingPattern()"),F.stream=ve[W].join(`
`),En(v,F),ut.publish("endTilingPattern",F),qt.pop().restore()};var Nn,on=p.__private__.newObject=function(){var v=tn();return Gt(v,!0),v},tn=p.__private__.newObjectDeferred=function(){return ie++,le[ie]=function(){return ee},ie},Gt=function(v,F){return F=typeof F=="boolean"&&F,le[v]=ee,F&&V(v+" 0 obj"),v},ss=p.__private__.newAdditionalObject=function(){var v={objId:tn(),content:""};return fe.push(v),v},Nr=tn(),Bn=tn(),Sr=p.__private__.decodeColorString=function(v){var F=v.split(" ");if(F.length!==2||F[1]!=="g"&&F[1]!=="G")F.length!==5||F[4]!=="k"&&F[4]!=="K"||(F=[(1-F[0])*(1-F[3]),(1-F[1])*(1-F[3]),(1-F[2])*(1-F[3]),"r"]);else{var te=parseFloat(F[0]);F=[te,te,te,"r"]}for(var oe="#",pe=0;pe<3;pe++)oe+=("0"+Math.floor(255*parseFloat(F[pe])).toString(16)).slice(-2);return oe},Ar=p.__private__.encodeColorString=function(v){var F;typeof v=="string"&&(v={ch1:v});var te=v.ch1,oe=v.ch2,pe=v.ch3,Te=v.ch4,Le=v.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof te=="string"&&te.charAt(0)!=="#"){var rt=new FE(te);if(rt.ok)te=rt.toHex();else if(!/^\d*\.?\d*$/.test(te))throw new Error('Invalid color "'+te+'" passed to jsPDF.encodeColorString.')}if(typeof te=="string"&&/^#[0-9A-Fa-f]{3}$/.test(te)&&(te="#"+te[1]+te[1]+te[2]+te[2]+te[3]+te[3]),typeof te=="string"&&/^#[0-9A-Fa-f]{6}$/.test(te)){var dt=parseInt(te.substr(1),16);te=dt>>16&255,oe=dt>>8&255,pe=255&dt}if(oe===void 0||Te===void 0&&te===oe&&oe===pe)F=typeof te=="string"?te+" "+Le[0]:v.precision===2?E(te/255)+" "+Le[0]:C(te/255)+" "+Le[0];else if(Te===void 0||xn(Te)==="object"){if(Te&&!isNaN(Te.a)&&Te.a===0)return["1.","1.","1.",Le[1]].join(" ");F=typeof te=="string"?[te,oe,pe,Le[1]].join(" "):v.precision===2?[E(te/255),E(oe/255),E(pe/255),Le[1]].join(" "):[C(te/255),C(oe/255),C(pe/255),Le[1]].join(" ")}else F=typeof te=="string"?[te,oe,pe,Te,Le[2]].join(" "):v.precision===2?[E(te),E(oe),E(pe),E(Te),Le[2]].join(" "):[C(te),C(oe),C(pe),C(Te),Le[2]].join(" ");return F},Er=p.__private__.getFilters=function(){return a},hn=p.__private__.putStream=function(v){var F=(v=v||{}).data||"",te=v.filters||Er(),oe=v.alreadyAppliedFilters||[],pe=v.addLength1||!1,Te=F.length,Le=v.objectId,rt=function(tr){return tr};if(d!==null&&Le===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");d!==null&&(rt=kn.encryptor(Le,0));var dt={};te===!0&&(te=["FlateEncode"]);var St=v.additionalKeyValues||[],jt=(dt=vt.API.processDataByFilters!==void 0?vt.API.processDataByFilters(F,te):{data:F,reverseChain:[]}).reverseChain+(Array.isArray(oe)?oe.join(" "):oe.toString());if(dt.data.length!==0&&(St.push({key:"Length",value:dt.data.length}),pe===!0&&St.push({key:"Length1",value:Te})),jt.length!=0)if(jt.split("/").length-1==1)St.push({key:"Filter",value:jt});else{St.push({key:"Filter",value:"["+jt+"]"});for(var Yt=0;Yt<St.length;Yt+=1)if(St[Yt].key==="DecodeParms"){for(var dn=[],Gn=0;Gn<dt.reverseChain.split("/").length-1;Gn+=1)dn.push("null");dn.push(St[Yt].value),St[Yt].value="["+dn.join(" ")+"]"}}V("<<");for(var mn=0;mn<St.length;mn++)V("/"+St[mn].key+" "+St[mn].value);V(">>"),dt.data.length!==0&&(V("stream"),V(rt(dt.data)),V("endstream"))},kr=p.__private__.putPage=function(v){var F=v.number,te=v.data,oe=v.objId,pe=v.contentsObjId;Gt(oe,!0),V("<</Type /Page"),V("/Parent "+v.rootDictionaryObjId+" 0 R"),V("/Resources "+v.resourceDictionaryObjId+" 0 R"),V("/MediaBox ["+parseFloat(_(v.mediaBox.bottomLeftX))+" "+parseFloat(_(v.mediaBox.bottomLeftY))+" "+_(v.mediaBox.topRightX)+" "+_(v.mediaBox.topRightY)+"]"),v.cropBox!==null&&V("/CropBox ["+_(v.cropBox.bottomLeftX)+" "+_(v.cropBox.bottomLeftY)+" "+_(v.cropBox.topRightX)+" "+_(v.cropBox.topRightY)+"]"),v.bleedBox!==null&&V("/BleedBox ["+_(v.bleedBox.bottomLeftX)+" "+_(v.bleedBox.bottomLeftY)+" "+_(v.bleedBox.topRightX)+" "+_(v.bleedBox.topRightY)+"]"),v.trimBox!==null&&V("/TrimBox ["+_(v.trimBox.bottomLeftX)+" "+_(v.trimBox.bottomLeftY)+" "+_(v.trimBox.topRightX)+" "+_(v.trimBox.topRightY)+"]"),v.artBox!==null&&V("/ArtBox ["+_(v.artBox.bottomLeftX)+" "+_(v.artBox.bottomLeftY)+" "+_(v.artBox.topRightX)+" "+_(v.artBox.topRightY)+"]"),typeof v.userUnit=="number"&&v.userUnit!==1&&V("/UserUnit "+v.userUnit),ut.publish("putPage",{objId:oe,pageContext:Ke[F],pageNumber:F,page:te}),V("/Contents "+pe+" 0 R"),V(">>"),V("endobj");var Te=te.join(`
`);return D===j&&(Te+=`
Q`),Gt(pe,!0),hn({data:Te,filters:Er(),objectId:pe}),V("endobj"),oe},Dr=p.__private__.putPages=function(){var v,F,te=[];for(v=1;v<=qe;v++)Ke[v].objId=tn(),Ke[v].contentsObjId=tn();for(v=1;v<=qe;v++)te.push(kr({number:v,data:ve[v],objId:Ke[v].objId,contentsObjId:Ke[v].contentsObjId,mediaBox:Ke[v].mediaBox,cropBox:Ke[v].cropBox,bleedBox:Ke[v].bleedBox,trimBox:Ke[v].trimBox,artBox:Ke[v].artBox,userUnit:Ke[v].userUnit,rootDictionaryObjId:Nr,resourceDictionaryObjId:Bn}));Gt(Nr,!0),V("<</Type /Pages");var oe="/Kids [";for(F=0;F<qe;F++)oe+=te[F]+" 0 R ";V(oe+"]"),V("/Count "+qe),V(">>"),V("endobj"),ut.publish("postPutPages")},Hr=function(v){ut.publish("putFont",{font:v,out:V,newObject:on,putStream:hn}),v.isAlreadyPutted!==!0&&(v.objectNumber=on(),V("<<"),V("/Type /Font"),V("/BaseFont /"+ru(v.postScriptName)),V("/Subtype /Type1"),typeof v.encoding=="string"&&V("/Encoding /"+v.encoding),V("/FirstChar 32"),V("/LastChar 255"),V(">>"),V("endobj"))},bs=function(v){v.objectNumber=on();var F=[];F.push({key:"Type",value:"/XObject"}),F.push({key:"Subtype",value:"/Form"}),F.push({key:"BBox",value:"["+[_(v.x),_(v.y),_(v.x+v.width),_(v.y+v.height)].join(" ")+"]"}),F.push({key:"Matrix",value:"["+v.matrix.toString()+"]"});var te=v.pages[1].join(`
`);hn({data:te,additionalKeyValues:F,objectId:v.objectNumber}),V("endobj")},gi=function(v,F){F||(F=21);var te=on(),oe=function(Le,rt){var dt,St=[],jt=1/(rt-1);for(dt=0;dt<1;dt+=jt)St.push(dt);if(St.push(1),Le[0].offset!=0){var Yt={offset:0,color:Le[0].color};Le.unshift(Yt)}if(Le[Le.length-1].offset!=1){var dn={offset:1,color:Le[Le.length-1].color};Le.push(dn)}for(var Gn="",mn=0,tr=0;tr<St.length;tr++){for(dt=St[tr];dt>Le[mn+1].offset;)mn++;var Kn=Le[mn].offset,nr=(dt-Kn)/(Le[mn+1].offset-Kn),Yn=Le[mn].color,Ms=Le[mn+1].color;Gn+=Y(Math.round((1-nr)*Yn[0]+nr*Ms[0]).toString(16))+Y(Math.round((1-nr)*Yn[1]+nr*Ms[1]).toString(16))+Y(Math.round((1-nr)*Yn[2]+nr*Ms[2]).toString(16))}return Gn.trim()}(v.colors,F),pe=[];pe.push({key:"FunctionType",value:"0"}),pe.push({key:"Domain",value:"[0.0 1.0]"}),pe.push({key:"Size",value:"["+F+"]"}),pe.push({key:"BitsPerSample",value:"8"}),pe.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),pe.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),hn({data:oe,additionalKeyValues:pe,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:te}),V("endobj"),v.objectNumber=on(),V("<< /ShadingType "+v.type),V("/ColorSpace /DeviceRGB");var Te="/Coords ["+_(parseFloat(v.coords[0]))+" "+_(parseFloat(v.coords[1]))+" ";v.type===2?Te+=_(parseFloat(v.coords[2]))+" "+_(parseFloat(v.coords[3])):Te+=_(parseFloat(v.coords[2]))+" "+_(parseFloat(v.coords[3]))+" "+_(parseFloat(v.coords[4]))+" "+_(parseFloat(v.coords[5])),V(Te+="]"),v.matrix&&V("/Matrix ["+v.matrix.toString()+"]"),V("/Function "+te+" 0 R"),V("/Extend [true true]"),V(">>"),V("endobj")},Ra=function(v,F){var te=tn(),oe=on();F.push({resourcesOid:te,objectOid:oe}),v.objectNumber=oe;var pe=[];pe.push({key:"Type",value:"/Pattern"}),pe.push({key:"PatternType",value:"1"}),pe.push({key:"PaintType",value:"1"}),pe.push({key:"TilingType",value:"1"}),pe.push({key:"BBox",value:"["+v.boundingBox.map(_).join(" ")+"]"}),pe.push({key:"XStep",value:_(v.xStep)}),pe.push({key:"YStep",value:_(v.yStep)}),pe.push({key:"Resources",value:te+" 0 R"}),v.matrix&&pe.push({key:"Matrix",value:"["+v.matrix.toString()+"]"}),hn({data:v.stream,additionalKeyValues:pe,objectId:v.objectNumber}),V("endobj")},od=function(v){for(var F in v.objectNumber=on(),V("<<"),v)switch(F){case"opacity":V("/ca "+E(v[F]));break;case"stroke-opacity":V("/CA "+E(v[F]))}V(">>"),V("endobj")},oa=function(v){Gt(v.resourcesOid,!0),V("<<"),V("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),function(){for(var F in V("/Font <<"),Ge)Ge.hasOwnProperty(F)&&(g===!1||g===!0&&y.hasOwnProperty(F))&&V("/"+F+" "+Ge[F].objectNumber+" 0 R");V(">>")}(),function(){if(Object.keys(ot).length>0){for(var F in V("/Shading <<"),ot)ot.hasOwnProperty(F)&&ot[F]instanceof Jl&&ot[F].objectNumber>=0&&V("/"+F+" "+ot[F].objectNumber+" 0 R");ut.publish("putShadingPatternDict"),V(">>")}}(),function(F){if(Object.keys(ot).length>0){for(var te in V("/Pattern <<"),ot)ot.hasOwnProperty(te)&&ot[te]instanceof p.TilingPattern&&ot[te].objectNumber>=0&&ot[te].objectNumber<F&&V("/"+te+" "+ot[te].objectNumber+" 0 R");ut.publish("putTilingPatternDict"),V(">>")}}(v.objectOid),function(){if(Object.keys(Qe).length>0){var F;for(F in V("/ExtGState <<"),Qe)Qe.hasOwnProperty(F)&&Qe[F].objectNumber>=0&&V("/"+F+" "+Qe[F].objectNumber+" 0 R");ut.publish("putGStateDict"),V(">>")}}(),function(){for(var F in V("/XObject <<"),zt)zt.hasOwnProperty(F)&&zt[F].objectNumber>=0&&V("/"+F+" "+zt[F].objectNumber+" 0 R");ut.publish("putXobjectDict"),V(">>")}(),V(">>"),V("endobj")},Ll=function(v){ft[v.fontName]=ft[v.fontName]||{},ft[v.fontName][v.fontStyle]=v.id},_o=function(v,F,te,oe,pe){var Te={id:"F"+(Object.keys(Ge).length+1).toString(10),postScriptName:v,fontName:F,fontStyle:te,encoding:oe,isStandardFont:pe||!1,metadata:{}};return ut.publish("addFont",{font:Te,instance:this}),Ge[Te.id]=Te,Ll(Te),Te.id},Or=p.__private__.pdfEscape=p.pdfEscape=function(v,F){return function(te,oe){var pe,Te,Le,rt,dt,St,jt,Yt,dn;if(Le=(oe=oe||{}).sourceEncoding||"Unicode",dt=oe.outputEncoding,(oe.autoencode||dt)&&Ge[Ye].metadata&&Ge[Ye].metadata[Le]&&Ge[Ye].metadata[Le].encoding&&(rt=Ge[Ye].metadata[Le].encoding,!dt&&Ge[Ye].encoding&&(dt=Ge[Ye].encoding),!dt&&rt.codePages&&(dt=rt.codePages[0]),typeof dt=="string"&&(dt=rt[dt]),dt)){for(jt=!1,St=[],pe=0,Te=te.length;pe<Te;pe++)(Yt=dt[te.charCodeAt(pe)])?St.push(String.fromCharCode(Yt)):St.push(te[pe]),St[pe].charCodeAt(0)>>8&&(jt=!0);te=St.join("")}for(pe=te.length;jt===void 0&&pe!==0;)te.charCodeAt(pe-1)>>8&&(jt=!0),pe--;if(!jt)return te;for(St=oe.noBOM?[]:[254,255],pe=0,Te=te.length;pe<Te;pe++){if((dn=(Yt=te.charCodeAt(pe))>>8)>>8)throw new Error("Character at position "+pe+" of string '"+te+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");St.push(dn),St.push(Yt-(dn<<8))}return String.fromCharCode.apply(void 0,St)}(v,F).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Ys=p.__private__.beginPage=function(v){ve[++qe]=[],Ke[qe]={objId:0,contentsObjId:0,userUnit:Number(o),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(v[0]),topRightY:Number(v[1])}},Dl(qe),Ue(ve[W])},No=function(v,F){var te,oe,pe;switch(n=F||n,typeof v=="string"&&(te=w(v.toLowerCase()),Array.isArray(te)&&(oe=te[0],pe=te[1])),Array.isArray(v)&&(oe=v[0]*xt,pe=v[1]*xt),isNaN(oe)&&(oe=s[0],pe=s[1]),(oe>14400||pe>14400)&&(Cn.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),oe=Math.min(14400,oe),pe=Math.min(14400,pe)),s=[oe,pe],n.substr(0,1)){case"l":pe>oe&&(s=[pe,oe]);break;case"p":oe>pe&&(s=[pe,oe])}Ys(s),_t(Ao),V(Vi),Sn!==0&&V(Sn+" J"),Bl!==0&&V(Bl+" j"),ut.publish("addPage",{pageNumber:qe})},Rl=function(v){v>0&&v<=qe&&(ve.splice(v,1),Ke.splice(v,1),qe--,W>qe&&(W=qe),this.setPage(W))},Dl=function(v){v>0&&v<=qe&&(W=v)},Ol=p.__private__.getNumberOfPages=p.getNumberOfPages=function(){return ve.length-1},Ml=function(v,F,te){var oe,pe=void 0;return te=te||{},v=v!==void 0?v:Ge[Ye].fontName,F=F!==void 0?F:Ge[Ye].fontStyle,oe=v.toLowerCase(),ft[oe]!==void 0&&ft[oe][F]!==void 0?pe=ft[oe][F]:ft[v]!==void 0&&ft[v][F]!==void 0?pe=ft[v][F]:te.disableWarning===!1&&Cn.warn("Unable to look up font label for font '"+v+"', '"+F+"'. Refer to getFontList() for available fonts."),pe||te.noFallback||(pe=ft.times[F])==null&&(pe=ft.times.normal),pe},Ds=p.__private__.putInfo=function(){var v=on(),F=function(oe){return oe};for(var te in d!==null&&(F=kn.encryptor(v,0)),V("<<"),V("/Producer ("+Or(F("jsPDF "+vt.version))+")"),Nt)Nt.hasOwnProperty(te)&&Nt[te]&&V("/"+te.substr(0,1).toUpperCase()+te.substr(1)+" ("+Or(F(Nt[te]))+")");V("/CreationDate ("+Or(F(Z))+")"),V(">>"),V("endobj")},la=p.__private__.putCatalog=function(v){var F=(v=v||{}).rootDictionaryObjId||Nr;switch(on(),V("<<"),V("/Type /Catalog"),V("/Pages "+F+" 0 R"),Xe||(Xe="fullwidth"),Xe){case"fullwidth":V("/OpenAction [3 0 R /FitH null]");break;case"fullheight":V("/OpenAction [3 0 R /FitV null]");break;case"fullpage":V("/OpenAction [3 0 R /Fit]");break;case"original":V("/OpenAction [3 0 R /XYZ null null 1]");break;default:var te=""+Xe;te.substr(te.length-1)==="%"&&(Xe=parseInt(Xe)/100),typeof Xe=="number"&&V("/OpenAction [3 0 R /XYZ null null "+E(Xe)+"]")}switch(gt||(gt="continuous"),gt){case"continuous":V("/PageLayout /OneColumn");break;case"single":V("/PageLayout /SinglePage");break;case"two":case"twoleft":V("/PageLayout /TwoColumnLeft");break;case"tworight":V("/PageLayout /TwoColumnRight")}Ae&&V("/PageMode /"+Ae),ut.publish("putCatalog"),V(">>"),V("endobj")},Fc=p.__private__.putTrailer=function(){V("trailer"),V("<<"),V("/Size "+(ie+1)),V("/Root "+ie+" 0 R"),V("/Info "+(ie-1)+" 0 R"),d!==null&&V("/Encrypt "+kn.oid+" 0 R"),V("/ID [ <"+ae+"> <"+ae+"> ]"),V(">>")},Wn=p.__private__.putHeader=function(){V("%PDF-"+N),V("%")},Uc=p.__private__.putXRef=function(){var v="0000000000";V("xref"),V("0 "+(ie+1)),V("0000000000 65535 f ");for(var F=1;F<=ie;F++)typeof le[F]=="function"?V((v+le[F]()).slice(-10)+" 00000 n "):le[F]!==void 0?V((v+le[F]).slice(-10)+" 00000 n "):V("0000000000 00000 n ")},yi=p.__private__.buildDocument=function(){var v;ie=0,ee=0,xe=[],le=[],fe=[],Nr=tn(),Bn=tn(),Ue(xe),ut.publish("buildDocument"),Wn(),Dr(),function(){ut.publish("putAdditionalObjects");for(var te=0;te<fe.length;te++){var oe=fe[te];Gt(oe.objId,!0),V(oe.content),V("endobj")}ut.publish("postPutAdditionalObjects")}(),v=[],function(){for(var te in Ge)Ge.hasOwnProperty(te)&&(g===!1||g===!0&&y.hasOwnProperty(te))&&Hr(Ge[te])}(),function(){var te;for(te in Qe)Qe.hasOwnProperty(te)&&od(Qe[te])}(),function(){for(var te in zt)zt.hasOwnProperty(te)&&bs(zt[te])}(),function(te){var oe;for(oe in ot)ot.hasOwnProperty(oe)&&(ot[oe]instanceof Jl?gi(ot[oe]):ot[oe]instanceof yu&&Ra(ot[oe],te))}(v),ut.publish("putResources"),v.forEach(oa),oa({resourcesOid:Bn,objectOid:Number.MAX_SAFE_INTEGER}),ut.publish("postPutResources"),d!==null&&(kn.oid=on(),V("<<"),V("/Filter /Standard"),V("/V "+kn.v),V("/R "+kn.r),V("/U <"+kn.toHexString(kn.U)+">"),V("/O <"+kn.toHexString(kn.O)+">"),V("/P "+kn.P),V(">>"),V("endobj")),Ds(),la();var F=ee;return Uc(),Fc(),V("startxref"),V(""+F),V("%%EOF"),Ue(ve[W]),xe.join(`
`)},Da=p.__private__.getBlob=function(v){return new Blob([Ze(v)],{type:"application/pdf"})},Fl=p.output=p.__private__.output=(Nn=function(v,F){switch(typeof(F=F||{})=="string"?F={filename:F}:F.filename=F.filename||"generated.pdf",v){case void 0:return yi();case"save":p.save(F.filename);break;case"arraybuffer":return Ze(yi());case"blob":return Da(yi());case"bloburi":case"bloburl":if(Tt.URL!==void 0&&typeof Tt.URL.createObjectURL=="function")return Tt.URL&&Tt.URL.createObjectURL(Da(yi()))||void 0;Cn.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var te="",oe=yi();try{te=G_(oe)}catch{te=G_(unescape(encodeURIComponent(oe)))}return"data:application/pdf;filename="+F.filename+";base64,"+te;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Tt)==="[object Window]"){var pe="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Te=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';F.pdfObjectUrl&&(pe=F.pdfObjectUrl,Te="");var Le='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+pe+'"'+Te+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(F)+");<\/script></body></html>",rt=Tt.open();return rt!==null&&rt.document.write(Le),rt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Tt)==="[object Window]"){var dt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(F.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+F.filename+'" width="500px" height="400px" /></body></html>',St=Tt.open();if(St!==null){St.document.write(dt);var jt=this;St.document.documentElement.querySelector("#pdfViewer").onload=function(){St.document.title=F.filename,St.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(jt.output("bloburl"))}}return St}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Tt)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Yt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",F)+'"></iframe></body></html>',dn=Tt.open();if(dn!==null&&(dn.document.write(Yt),dn.document.title=F.filename),dn||typeof safari>"u")return dn;break;case"datauri":case"dataurl":return Tt.document.location.href=this.output("datauristring",F);default:return null}},Nn.foo=function(){try{return Nn.apply(this,arguments)}catch(te){var v=te.stack||"";~v.indexOf(" at ")&&(v=v.split(" at ")[1]);var F="Error in function "+v.split(`
`)[0].split("<")[0]+": "+te.message;if(!Tt.console)throw new Error(F);Tt.console.error(F,te),Tt.alert&&alert(F)}},Nn.foo.bar=Nn,Nn.foo),Os=function(v){return Array.isArray($n)===!0&&$n.indexOf(v)>-1};switch(r){case"pt":xt=1;break;case"mm":xt=72/25.4;break;case"cm":xt=72/2.54;break;case"in":xt=72;break;case"px":xt=Os("px_scaling")==1?.75:96/72;break;case"pc":case"em":xt=12;break;case"ex":xt=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);xt=r}var kn=null;ye(),Q();var Tr=p.__private__.getPageInfo=p.getPageInfo=function(v){if(isNaN(v)||v%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Ke[v].objId,pageNumber:v,pageContext:Ke[v]}},Oa=p.__private__.getPageInfoByObjId=function(v){if(isNaN(v)||v%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var F in Ke)if(Ke[F].objId===v)break;return Tr(F)},So=p.__private__.getCurrentPageInfo=p.getCurrentPageInfo=function(){return{objId:Ke[W].objId,pageNumber:W,pageContext:Ke[W]}};p.addPage=function(){return No.apply(this,arguments),this},p.setPage=function(){return Dl.apply(this,arguments),Ue.call(this,ve[W]),this},p.insertPage=function(v){return this.addPage(),this.movePage(W,v),this},p.movePage=function(v,F){var te,oe;if(v>F){te=ve[v],oe=Ke[v];for(var pe=v;pe>F;pe--)ve[pe]=ve[pe-1],Ke[pe]=Ke[pe-1];ve[F]=te,Ke[F]=oe,this.setPage(F)}else if(v<F){te=ve[v],oe=Ke[v];for(var Te=v;Te<F;Te++)ve[Te]=ve[Te+1],Ke[Te]=Ke[Te+1];ve[F]=te,Ke[F]=oe,this.setPage(F)}return this},p.deletePage=function(){return Rl.apply(this,arguments),this},p.__private__.text=p.text=function(v,F,te,oe,pe){var Te,Le,rt,dt,St,jt,Yt,dn,Gn,mn=(oe=oe||{}).scope||this;if(typeof v=="number"&&typeof F=="number"&&(typeof te=="string"||Array.isArray(te))){var tr=te;te=F,F=v,v=tr}if(arguments[3]instanceof nt==0?(rt=arguments[4],dt=arguments[5],xn(Yt=arguments[3])==="object"&&Yt!==null||(typeof rt=="string"&&(dt=rt,rt=null),typeof Yt=="string"&&(dt=Yt,Yt=null),typeof Yt=="number"&&(rt=Yt,Yt=null),oe={flags:Yt,angle:rt,align:dt})):(A("The transform parameter of text() with a Matrix value"),Gn=pe),isNaN(F)||isNaN(te)||v==null)throw new Error("Invalid arguments passed to jsPDF.text");if(v.length===0)return mn;var Kn,nr="",Yn=typeof oe.lineHeightFactor=="number"?oe.lineHeightFactor:ua,Ms=mn.internal.scaleFactor;function Si(fn){return fn=fn.split("	").join(Array(oe.TabLen||9).join(" ")),Or(fn,Yt)}function Ai(fn){for(var Tn,ur=fn.concat(),Ir=[],za=ur.length;za--;)typeof(Tn=ur.shift())=="string"?Ir.push(Tn):Array.isArray(fn)&&(Tn.length===1||Tn[1]===void 0&&Tn[2]===void 0)?Ir.push(Tn[0]):Ir.push([Tn[0],Tn[1],Tn[2]]);return Ir}function f(fn,Tn){var ur;if(typeof fn=="string")ur=Tn(fn)[0];else if(Array.isArray(fn)){for(var Ir,za,bd=fn.concat(),Gc=[],_f=bd.length;_f--;)typeof(Ir=bd.shift())=="string"?Gc.push(Tn(Ir)[0]):Array.isArray(Ir)&&typeof Ir[0]=="string"&&(za=Tn(Ir[0],Ir[1],Ir[2]),Gc.push([za[0],za[1],za[2]]));ur=Gc}return ur}var b=!1,P=!0;if(typeof v=="string")b=!0;else if(Array.isArray(v)){var G=v.concat();Le=[];for(var ge,Ne=G.length;Ne--;)(typeof(ge=G.shift())!="string"||Array.isArray(ge)&&typeof ge[0]!="string")&&(P=!1);b=P}if(b===!1)throw new Error('Type of text must be string or Array. "'+v+'" is not recognized.');typeof v=="string"&&(v=v.match(/[\r?\n]/)?v.split(/\r\n|\r|\n/g):[v]);var Be=Ce/mn.internal.scaleFactor,Xt=Be*(Yn-1);switch(oe.baseline){case"bottom":te-=Xt;break;case"top":te+=Be-Xt;break;case"hanging":te+=Be-2*Xt;break;case"middle":te+=Be/2-Xt}if((jt=oe.maxWidth||0)>0&&(typeof v=="string"?v=mn.splitTextToSize(v,jt):Object.prototype.toString.call(v)==="[object Array]"&&(v=v.reduce(function(fn,Tn){return fn.concat(mn.splitTextToSize(Tn,jt))},[]))),Te={text:v,x:F,y:te,options:oe,mutex:{pdfEscape:Or,activeFontKey:Ye,fonts:Ge,activeFontSize:Ce}},ut.publish("preProcessText",Te),v=Te.text,rt=(oe=Te.options).angle,Gn instanceof nt==0&&rt&&typeof rt=="number"){rt*=Math.PI/180,oe.rotationDirection===0&&(rt=-rt),D===j&&(rt=-rt);var Qn=Math.cos(rt),Ht=Math.sin(rt);Gn=new nt(Qn,Ht,-Ht,Qn,0,0)}else rt&&rt instanceof nt&&(Gn=rt);D!==j||Gn||(Gn=Vn),(St=oe.charSpace||wi)!==void 0&&(nr+=_(L(St))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(dn=oe.horizontalScale)!==void 0&&(nr+=_(100*dn)+` Tz
`),oe.lang;var ln=-1,Pn=oe.renderingMode!==void 0?oe.renderingMode:oe.stroke,Xs=mn.internal.getCurrentPageInfo().pageContext;switch(Pn){case 0:case!1:case"fill":ln=0;break;case 1:case!0:case"stroke":ln=1;break;case 2:case"fillThenStroke":ln=2;break;case 3:case"invisible":ln=3;break;case 4:case"fillAndAddForClipping":ln=4;break;case 5:case"strokeAndAddPathForClipping":ln=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":ln=6;break;case 7:case"addToPathForClipping":ln=7}var is=Xs.usedRenderingMode!==void 0?Xs.usedRenderingMode:-1;ln!==-1?nr+=ln+` Tr
`:is!==-1&&(nr+=`0 Tr
`),ln!==-1&&(Xs.usedRenderingMode=ln),dt=oe.align||"left";var Wr,Bi=Ce*Yn,pd=mn.internal.pageSize.getWidth(),md=Ge[Ye];St=oe.charSpace||wi,jt=oe.maxWidth||0,Yt=Object.assign({autoencode:!0,noBOM:!0},oe.flags);var Co=[],Hl=function(fn){return mn.getStringUnitWidth(fn,{font:md,charSpace:St,fontSize:Ce,doKerning:!1})*Ce/Ms};if(Object.prototype.toString.call(v)==="[object Array]"){var Js;Le=Ai(v),dt!=="left"&&(Wr=Le.map(Hl));var Zs,Po=0;if(dt==="right"){F-=Wr[0],v=[],Ne=Le.length;for(var Ba=0;Ba<Ne;Ba++)Ba===0?(Zs=Mr(F),Js=Ui(te)):(Zs=L(Po-Wr[Ba]),Js=-Bi),v.push([Le[Ba],Zs,Js]),Po=Wr[Ba]}else if(dt==="center"){F-=Wr[0]/2,v=[],Ne=Le.length;for(var jo=0;jo<Ne;jo++)jo===0?(Zs=Mr(F),Js=Ui(te)):(Zs=L((Po-Wr[jo])/2),Js=-Bi),v.push([Le[jo],Zs,Js]),Po=Wr[jo]}else if(dt==="left"){v=[],Ne=Le.length;for(var gd=0;gd<Ne;gd++)v.push(Le[gd])}else if(dt==="justify"&&md.encoding==="Identity-H"){v=[],Ne=Le.length,jt=jt!==0?jt:pd;for(var Wc=0,cr=0;cr<Ne;cr++)if(Js=cr===0?Ui(te):-Bi,Zs=cr===0?Mr(F):Wc,cr<Ne-1){var bf=L((jt-Wr[cr])/(Le[cr].split(" ").length-1)),fa=Le[cr].split(" ");v.push([fa[0]+" ",Zs,Js]),Wc=0;for(var pa=1;pa<fa.length;pa++){var yd=(Hl(fa[pa-1]+" "+fa[pa])-Hl(fa[pa]))*Ms+bf;pa==fa.length-1?v.push([fa[pa],yd,0]):v.push([fa[pa]+" ",yd,0]),Wc-=yd}}else v.push([Le[cr],Zs,Js]);v.push(["",Wc,0])}else{if(dt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(v=[],Ne=Le.length,jt=jt!==0?jt:pd,cr=0;cr<Ne;cr++){Js=cr===0?Ui(te):-Bi,Zs=cr===0?Mr(F):0;var vd=Le[cr].split(" ").length-1,xd=vd>0?(jt-Wr[cr])/vd:0;cr<Ne-1?Co.push(_(L(xd))):Co.push(0),v.push([Le[cr],Zs,Js])}}}(typeof oe.R2L=="boolean"?oe.R2L:st)===!0&&(v=f(v,function(fn,Tn,ur){return[fn.split("").reverse().join(""),Tn,ur]})),Te={text:v,x:F,y:te,options:oe,mutex:{pdfEscape:Or,activeFontKey:Ye,fonts:Ge,activeFontSize:Ce}},ut.publish("postProcessText",Te),v=Te.text,Kn=Te.mutex.isHex||!1;var wd=Ge[Ye].encoding;wd!=="WinAnsiEncoding"&&wd!=="StandardEncoding"||(v=f(v,function(fn,Tn,ur){return[Si(fn),Tn,ur]})),Le=Ai(v),v=[];for(var Lo,Ro,Do,$l=Array.isArray(Le[0])?1:0,Oo="",Wl=function(fn,Tn,ur){var Ir="";return ur instanceof nt?(ur=typeof oe.angle=="number"?Ut(ur,new nt(1,0,0,1,fn,Tn)):Ut(new nt(1,0,0,1,fn,Tn),ur),D===j&&(ur=Ut(new nt(1,0,0,-1,0,0),ur)),Ir=ur.join(" ")+` Tm
`):Ir=_(fn)+" "+_(Tn)+` Td
`,Ir},Ei=0;Ei<Le.length;Ei++){switch(Oo="",$l){case 1:Do=(Kn?"<":"(")+Le[Ei][0]+(Kn?">":")"),Lo=parseFloat(Le[Ei][1]),Ro=parseFloat(Le[Ei][2]);break;case 0:Do=(Kn?"<":"(")+Le[Ei]+(Kn?">":")"),Lo=Mr(F),Ro=Ui(te)}Co!==void 0&&Co[Ei]!==void 0&&(Oo=Co[Ei]+` Tw
`),Ei===0?v.push(Oo+Wl(Lo,Ro,Gn)+Do):$l===0?v.push(Oo+Do):$l===1&&v.push(Oo+Wl(Lo,Ro,Gn)+Do)}v=$l===0?v.join(` Tj
T* `):v.join(` Tj
`),v+=` Tj
`;var ma=`BT
/`;return ma+=Ye+" "+Ce+` Tf
`,ma+=_(Ce*Yn)+` TL
`,ma+=Qs+`
`,ma+=nr,ma+=v,V(ma+="ET"),y[Ye]=!0,mn};var Vc=p.__private__.clip=p.clip=function(v){return V(v==="evenodd"?"W*":"W"),this};p.clipEvenOdd=function(){return Vc("evenodd")},p.__private__.discardPath=p.discardPath=function(){return V("n"),this};var Kt=p.__private__.isValidStyle=function(v){var F=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(v)!==-1&&(F=!0),F};p.__private__.setDefaultPathOperation=p.setDefaultPathOperation=function(v){return Kt(v)&&(c=v),this};var Ma=p.__private__.getStyle=p.getStyle=function(v){var F=c;switch(v){case"D":case"S":F="S";break;case"F":F="f";break;case"FD":case"DF":F="B";break;case"f":case"f*":case"B":case"B*":F=v}return F},ca=p.close=function(){return V("h"),this};p.stroke=function(){return V("S"),this},p.fill=function(v){return vi("f",v),this},p.fillEvenOdd=function(v){return vi("f*",v),this},p.fillStroke=function(v){return vi("B",v),this},p.fillStrokeEvenOdd=function(v){return vi("B*",v),this};var vi=function(v,F){xn(F)==="object"?ld(F,v):V(v)},Fa=function(v){v===null||D===j&&v===void 0||(v=Ma(v),V(v))};function Bc(v,F,te,oe,pe){var Te=new yu(F||this.boundingBox,te||this.xStep,oe||this.yStep,this.gState,pe||this.matrix);Te.stream=this.stream;var Le=v+"$$"+this.cloneIndex+++"$$";return En(Le,Te),Te}var ld=function(v,F){var te=Pt[v.key],oe=ot[te];if(oe instanceof Jl)V("q"),V(cd(F)),oe.gState&&p.setGState(oe.gState),V(v.matrix.toString()+" cm"),V("/"+te+" sh"),V("Q");else if(oe instanceof yu){var pe=new nt(1,0,0,-1,0,Ni());v.matrix&&(pe=pe.multiply(v.matrix||Vn),te=Bc.call(oe,v.key,v.boundingBox,v.xStep,v.yStep,pe).id),V("q"),V("/Pattern cs"),V("/"+te+" scn"),oe.gState&&p.setGState(oe.gState),V(F),V("Q")}},cd=function(v){switch(v){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},Ul=p.moveTo=function(v,F){return V(_(L(v))+" "+_(z(F))+" m"),this},zc=p.lineTo=function(v,F){return V(_(L(v))+" "+_(z(F))+" l"),this},$r=p.curveTo=function(v,F,te,oe,pe,Te){return V([_(L(v)),_(z(F)),_(L(te)),_(z(oe)),_(L(pe)),_(z(Te)),"c"].join(" ")),this};p.__private__.line=p.line=function(v,F,te,oe,pe){if(isNaN(v)||isNaN(F)||isNaN(te)||isNaN(oe)||!Kt(pe))throw new Error("Invalid arguments passed to jsPDF.line");return D===T?this.lines([[te-v,oe-F]],v,F,[1,1],pe||"S"):this.lines([[te-v,oe-F]],v,F,[1,1]).stroke()},p.__private__.lines=p.lines=function(v,F,te,oe,pe,Te){var Le,rt,dt,St,jt,Yt,dn,Gn,mn,tr,Kn,nr;if(typeof v=="number"&&(nr=te,te=F,F=v,v=nr),oe=oe||[1,1],Te=Te||!1,isNaN(F)||isNaN(te)||!Array.isArray(v)||!Array.isArray(oe)||!Kt(pe)||typeof Te!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Ul(F,te),Le=oe[0],rt=oe[1],St=v.length,tr=F,Kn=te,dt=0;dt<St;dt++)(jt=v[dt]).length===2?(tr=jt[0]*Le+tr,Kn=jt[1]*rt+Kn,zc(tr,Kn)):(Yt=jt[0]*Le+tr,dn=jt[1]*rt+Kn,Gn=jt[2]*Le+tr,mn=jt[3]*rt+Kn,tr=jt[4]*Le+tr,Kn=jt[5]*rt+Kn,$r(Yt,dn,Gn,mn,tr,Kn));return Te&&ca(),Fa(pe),this},p.path=function(v){for(var F=0;F<v.length;F++){var te=v[F],oe=te.c;switch(te.op){case"m":Ul(oe[0],oe[1]);break;case"l":zc(oe[0],oe[1]);break;case"c":$r.apply(this,oe);break;case"h":ca()}}return this},p.__private__.rect=p.rect=function(v,F,te,oe,pe){if(isNaN(v)||isNaN(F)||isNaN(te)||isNaN(oe)||!Kt(pe))throw new Error("Invalid arguments passed to jsPDF.rect");return D===T&&(oe=-oe),V([_(L(v)),_(z(F)),_(L(te)),_(L(oe)),"re"].join(" ")),Fa(pe),this},p.__private__.triangle=p.triangle=function(v,F,te,oe,pe,Te,Le){if(isNaN(v)||isNaN(F)||isNaN(te)||isNaN(oe)||isNaN(pe)||isNaN(Te)||!Kt(Le))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[te-v,oe-F],[pe-te,Te-oe],[v-pe,F-Te]],v,F,[1,1],Le,!0),this},p.__private__.roundedRect=p.roundedRect=function(v,F,te,oe,pe,Te,Le){if(isNaN(v)||isNaN(F)||isNaN(te)||isNaN(oe)||isNaN(pe)||isNaN(Te)||!Kt(Le))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var rt=4/3*(Math.SQRT2-1);return pe=Math.min(pe,.5*te),Te=Math.min(Te,.5*oe),this.lines([[te-2*pe,0],[pe*rt,0,pe,Te-Te*rt,pe,Te],[0,oe-2*Te],[0,Te*rt,-pe*rt,Te,-pe,Te],[2*pe-te,0],[-pe*rt,0,-pe,-Te*rt,-pe,-Te],[0,2*Te-oe],[0,-Te*rt,pe*rt,-Te,pe,-Te]],v+pe,F,[1,1],Le,!0),this},p.__private__.ellipse=p.ellipse=function(v,F,te,oe,pe){if(isNaN(v)||isNaN(F)||isNaN(te)||isNaN(oe)||!Kt(pe))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Te=4/3*(Math.SQRT2-1)*te,Le=4/3*(Math.SQRT2-1)*oe;return Ul(v+te,F),$r(v+te,F-Le,v+Te,F-oe,v,F-oe),$r(v-Te,F-oe,v-te,F-Le,v-te,F),$r(v-te,F+Le,v-Te,F+oe,v,F+oe),$r(v+Te,F+oe,v+te,F+Le,v+te,F),Fa(pe),this},p.__private__.circle=p.circle=function(v,F,te,oe){if(isNaN(v)||isNaN(F)||isNaN(te)||!Kt(oe))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(v,F,te,te,oe)},p.setFont=function(v,F,te){return te&&(F=O(F,te)),Ye=Ml(v,F,{disableWarning:!1}),this};var xi=p.__private__.getFont=p.getFont=function(){return Ge[Ml.apply(p,arguments)]};p.__private__.getFontList=p.getFontList=function(){var v,F,te={};for(v in ft)if(ft.hasOwnProperty(v))for(F in te[v]=[],ft[v])ft[v].hasOwnProperty(F)&&te[v].push(F);return te},p.addFont=function(v,F,te,oe,pe){var Te=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Te.indexOf(arguments[3])!==-1?pe=arguments[3]:arguments[3]&&Te.indexOf(arguments[3])==-1&&(te=O(te,oe)),_o.call(this,v,F,te,pe=pe||"Identity-H")};var ua,Ao=t.lineWidth||.200025,qc=p.__private__.getLineWidth=p.getLineWidth=function(){return Ao},_t=p.__private__.setLineWidth=p.setLineWidth=function(v){return Ao=v,V(_(L(v))+" w"),this};p.__private__.setLineDash=vt.API.setLineDash=vt.API.setLineDashPattern=function(v,F){if(v=v||[],F=F||0,isNaN(F)||!Array.isArray(v))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return v=v.map(function(te){return _(L(te))}).join(" "),F=_(L(F)),V("["+v+"] "+F+" d"),this};var ud=p.__private__.getLineHeight=p.getLineHeight=function(){return Ce*ua};p.__private__.getLineHeight=p.getLineHeight=function(){return Ce*ua};var dd=p.__private__.setLineHeightFactor=p.setLineHeightFactor=function(v){return typeof(v=v||1.15)=="number"&&(ua=v),this},hd=p.__private__.getLineHeightFactor=p.getLineHeightFactor=function(){return ua};dd(t.lineHeight);var Mr=p.__private__.getHorizontalCoordinate=function(v){return L(v)},Ui=p.__private__.getVerticalCoordinate=function(v){return D===j?v:Ke[W].mediaBox.topRightY-Ke[W].mediaBox.bottomLeftY-L(v)},fd=p.__private__.getHorizontalCoordinateString=p.getHorizontalCoordinateString=function(v){return _(Mr(v))},Eo=p.__private__.getVerticalCoordinateString=p.getVerticalCoordinateString=function(v){return _(Ui(v))},Vi=t.strokeColor||"0 G";p.__private__.getStrokeColor=p.getDrawColor=function(){return Sr(Vi)},p.__private__.setStrokeColor=p.setDrawColor=function(v,F,te,oe){return Vi=Ar({ch1:v,ch2:F,ch3:te,ch4:oe,pdfColorType:"draw",precision:2}),V(Vi),this};var ko=t.fillColor||"0 g";p.__private__.getFillColor=p.getFillColor=function(){return Sr(ko)},p.__private__.setFillColor=p.setFillColor=function(v,F,te,oe){return ko=Ar({ch1:v,ch2:F,ch3:te,ch4:oe,pdfColorType:"fill",precision:2}),V(ko),this};var Qs=t.textColor||"0 g",Ua=p.__private__.getTextColor=p.getTextColor=function(){return Sr(Qs)};p.__private__.setTextColor=p.setTextColor=function(v,F,te,oe){return Qs=Ar({ch1:v,ch2:F,ch3:te,ch4:oe,pdfColorType:"text",precision:3}),this};var wi=t.charSpace,Vl=p.__private__.getCharSpace=p.getCharSpace=function(){return parseFloat(wi||0)};p.__private__.setCharSpace=p.setCharSpace=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return wi=v,this};var Sn=0;p.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},p.__private__.setLineCap=p.setLineCap=function(v){var F=p.CapJoinStyles[v];if(F===void 0)throw new Error("Line cap style of '"+v+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Sn=F,V(F+" J"),this};var Bl=0;p.__private__.setLineJoin=p.setLineJoin=function(v){var F=p.CapJoinStyles[v];if(F===void 0)throw new Error("Line join style of '"+v+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Bl=F,V(F+" j"),this},p.__private__.setLineMiterLimit=p.__private__.setMiterLimit=p.setLineMiterLimit=p.setMiterLimit=function(v){if(v=v||0,isNaN(v))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return V(_(L(v))+" M"),this},p.GState=Mm,p.setGState=function(v){(v=typeof v=="string"?Qe[tt[v]]:Hc(null,v)).equals(It)||(V("/"+v.id+" gs"),It=v)};var Hc=function(v,F){if(!v||!tt[v]){var te=!1;for(var oe in Qe)if(Qe.hasOwnProperty(oe)&&Qe[oe].equals(F)){te=!0;break}if(te)F=Qe[oe];else{var pe="GS"+(Object.keys(Qe).length+1).toString(10);Qe[pe]=F,F.id=pe}return v&&(tt[v]=F.id),ut.publish("addGState",F),F}};p.addGState=function(v,F){return Hc(v,F),this},p.saveGraphicsState=function(){return V("q"),kt.push({key:Ye,size:Ce,color:Qs}),this},p.restoreGraphicsState=function(){V("Q");var v=kt.pop();return Ye=v.key,Ce=v.size,Qs=v.color,It=null,this},p.setCurrentTransformationMatrix=function(v){return V(v.toString()+" cm"),this},p.comment=function(v){return V("#"+v),this};var bi=function(v,F){var te=v||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return te},set:function(Te){isNaN(Te)||(te=parseFloat(Te))}});var oe=F||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return oe},set:function(Te){isNaN(Te)||(oe=parseFloat(Te))}});var pe="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return pe},set:function(Te){pe=Te.toString()}}),this},To=function(v,F,te,oe){bi.call(this,v,F),this.type="rect";var pe=te||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return pe},set:function(Le){isNaN(Le)||(pe=parseFloat(Le))}});var Te=oe||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Te},set:function(Le){isNaN(Le)||(Te=parseFloat(Le))}}),this},Va=function(){this.page=qe,this.currentPage=W,this.pages=ve.slice(0),this.pagesContext=Ke.slice(0),this.x=et,this.y=Ot,this.matrix=Ft,this.width=_s(W),this.height=$c(W),this.outputDestination=ke,this.id="",this.objectNumber=-1};Va.prototype.restore=function(){qe=this.page,W=this.currentPage,Ke=this.pagesContext,ve=this.pages,et=this.x,Ot=this.y,Ft=this.matrix,zl(W,this.width),Ns(W,this.height),ke=this.outputDestination};var da=function(v,F,te,oe,pe){qt.push(new Va),qe=W=0,ve=[],et=v,Ot=F,Ft=pe,Ys([te,oe])};for(var ha in p.beginFormObject=function(v,F,te,oe,pe){return da(v,F,te,oe,pe),this},p.endFormObject=function(v){return function(F){if(en[F])qt.pop().restore();else{var te=new Va,oe="Xo"+(Object.keys(zt).length+1).toString(10);te.id=oe,en[F]=oe,zt[oe]=te,ut.publish("addFormObject",te),qt.pop().restore()}}(v),this},p.doFormObject=function(v,F){var te=zt[en[v]];return V("q"),V(F.toString()+" cm"),V("/"+te.id+" Do"),V("Q"),this},p.getFormObject=function(v){var F=zt[en[v]];return{x:F.x,y:F.y,width:F.width,height:F.height,matrix:F.matrix}},p.save=function(v,F){return v=v||"generated.pdf",(F=F||{}).returnPromise=F.returnPromise||!1,F.returnPromise===!1?(Xl(Da(yi()),v),typeof Xl.unload=="function"&&Tt.setTimeout&&setTimeout(Xl.unload,911),this):new Promise(function(te,oe){try{var pe=Xl(Da(yi()),v);typeof Xl.unload=="function"&&Tt.setTimeout&&setTimeout(Xl.unload,911),te(pe)}catch(Te){oe(Te.message)}})},vt.API)vt.API.hasOwnProperty(ha)&&(ha==="events"&&vt.API.events.length?function(v,F){var te,oe,pe;for(pe=F.length-1;pe!==-1;pe--)te=F[pe][0],oe=F[pe][1],v.subscribe.apply(v,[te].concat(typeof oe=="function"?[oe]:oe))}(ut,vt.API.events):p[ha]=vt.API[ha]);function _s(v){return Ke[v].mediaBox.topRightX-Ke[v].mediaBox.bottomLeftX}function zl(v,F){Ke[v].mediaBox.topRightX=F+Ke[v].mediaBox.bottomLeftX}function $c(v){return Ke[v].mediaBox.topRightY-Ke[v].mediaBox.bottomLeftY}function Ns(v,F){Ke[v].mediaBox.topRightY=F+Ke[v].mediaBox.bottomLeftY}var _i=p.getPageWidth=function(v){return _s(v=v||W)/xt},Io=p.setPageWidth=function(v,F){zl(v,F*xt)},Ni=p.getPageHeight=function(v){return $c(v=v||W)/xt},ql=p.setPageHeight=function(v,F){Ns(v,F*xt)};return p.internal={pdfEscape:Or,getStyle:Ma,getFont:xi,getFontSize:He,getCharSpace:Vl,getTextColor:Ua,getLineHeight:ud,getLineHeightFactor:hd,getLineWidth:qc,write:De,getHorizontalCoordinate:Mr,getVerticalCoordinate:Ui,getCoordinateString:fd,getVerticalCoordinateString:Eo,collections:{},newObject:on,newAdditionalObject:ss,newObjectDeferred:tn,newObjectDeferredBegin:Gt,getFilters:Er,putStream:hn,events:ut,scaleFactor:xt,pageSize:{getWidth:function(){return _i(W)},setWidth:function(v){Io(W,v)},getHeight:function(){return Ni(W)},setHeight:function(v){ql(W,v)}},encryptionOptions:d,encryption:kn,getEncryptor:function(v){return d!==null?kn.encryptor(v,0):function(F){return F}},output:Fl,getNumberOfPages:Ol,get pages(){return ve},out:V,f2:E,f3:C,getPageInfo:Tr,getPageInfoByObjId:Oa,getCurrentPageInfo:So,getPDFVersion:S,Point:bi,Rectangle:To,Matrix:nt,hasHotfix:Os},Object.defineProperty(p.internal.pageSize,"width",{get:function(){return _i(W)},set:function(v){Io(W,v)},enumerable:!0,configurable:!0}),Object.defineProperty(p.internal.pageSize,"height",{get:function(){return Ni(W)},set:function(v){ql(W,v)},enumerable:!0,configurable:!0}),(function(v){for(var F=0,te=Ve.length;F<te;F++){var oe=_o.call(this,v[F][0],v[F][1],v[F][2],Ve[F][3],!0);g===!1&&(y[oe]=!0);var pe=v[F][0].split("-");Ll({id:oe,fontName:pe[0],fontStyle:pe[1]||""})}ut.publish("addFonts",{fonts:Ge,dictionary:ft})}).call(p,Ve),Ye="F1",No(s,n),ut.publish("initialized"),p}nu.prototype.lsbFirstWord=function(t){return String.fromCharCode(255&t,t>>8&255,t>>16&255,t>>24&255)},nu.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},nu.prototype.hexToBytes=function(t){for(var e=[],n=0;n<t.length;n+=2)e.push(String.fromCharCode(parseInt(t.substr(n,2),16)));return e.join("")},nu.prototype.processOwnerPassword=function(t,e){return Q2(Y2(e).substr(0,5),t)},nu.prototype.encryptor=function(t,e){var n=Y2(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(r){return Q2(n,r)}},Mm.prototype.equals=function(t){var e,n="id,objectNumber,equals";if(!t||xn(t)!==xn(this))return!1;var r=0;for(e in this)if(!(n.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;r++}for(e in t)t.hasOwnProperty(e)&&n.indexOf(e)<0&&r--;return r===0},vt.API={events:[]},vt.version="3.0.4";var ir=vt.API,v5=1,Mc=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Xc=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Lt=function(t){return t.toFixed(2)},Wo=function(t){return t.toFixed(5)};ir.__acroform__={};var Ks=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},X_=function(t){return t*v5},va=function(t){var e=new zE,n=ct.internal.getHeight(t)||0,r=ct.internal.getWidth(t)||0;return e.BBox=[0,0,Number(Lt(r)),Number(Lt(n))],e},aB=ir.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|1<<e},oB=ir.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&~(1<<e)},lB=ir.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return t&1<<e?1:0},mr=ir.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return lB(t,e-1)},gr=ir.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return aB(t,e-1)},yr=ir.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return oB(t,e-1)},cB=ir.__acroform__.calculateCoordinates=function(t,e){var n=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,s=t[0],i=t[1],a=t[2],o=t[3],l={};return l.lowerLeft_X=n(s)||0,l.lowerLeft_Y=r(i+o)||0,l.upperRight_X=n(s+a)||0,l.upperRight_Y=r(i)||0,[Number(Lt(l.lowerLeft_X)),Number(Lt(l.lowerLeft_Y)),Number(Lt(l.upperRight_X)),Number(Lt(l.upperRight_Y))]},uB=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],n=t._V||t.DV,r=X2(t,n),s=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+s+" "+Lt(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var i=va(t);return i.scope=t.scope,i.stream=e.join(`
`),i}},X2=function(t,e){var n=t.fontSize===0?t.maxFontSize:t.fontSize,r={text:"",fontSize:""},s=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");s=t.multiline?s.map(function(E){return E.split(`
`)}):s.map(function(E){return[E]});var i=n,a=ct.internal.getHeight(t)||0;a=a<0?-a:a;var o=ct.internal.getWidth(t)||0;o=o<0?-o:o;var l=function(E,C,L){if(E+1<s.length){var z=C+" "+s[E+1][0];return mp(z,t,L).width<=o-4}return!1};i++;e:for(;i>0;){e="",i--;var c,d,g=mp("3",t,i).height,y=t.multiline?a-i:(a-g)/2,p=y+=2,N=0,S=0,I=0;if(i<=0){e=`(...) Tj
`,e+="% Width of Text: "+mp(e,t,i=12).width+", FieldWidth:"+o+`
`;break}for(var w="",T=0,j=0;j<s.length;j++)if(s.hasOwnProperty(j)){var D=!1;if(s[j].length!==1&&I!==s[j].length-1){if((g+2)*(T+2)+2>a)continue e;w+=s[j][I],D=!0,S=j,j--}else{w=(w+=s[j][I]+" ").substr(w.length-1)==" "?w.substr(0,w.length-1):w;var H=parseInt(j),J=l(H,w,i),O=j>=s.length-1;if(J&&!O){w+=" ",I=0;continue}if(J||O){if(O)S=H;else if(t.multiline&&(g+2)*(T+2)+2>a)continue e}else{if(!t.multiline||(g+2)*(T+2)+2>a)continue e;S=H}}for(var _="",A=N;A<=S;A++){var R=s[A];if(t.multiline){if(A===S){_+=R[I]+" ",I=(I+1)%R.length;continue}if(A===N){_+=R[R.length-1]+" ";continue}}_+=R[0]+" "}switch(_=_.substr(_.length-1)==" "?_.substr(0,_.length-1):_,d=mp(_,t,i).width,t.textAlign){case"right":c=o-d-2;break;case"center":c=(o-d)/2;break;default:c=2}e+=Lt(c)+" "+Lt(p)+` Td
`,e+="("+Mc(_)+`) Tj
`,e+=-Lt(c)+` 0 Td
`,p=-(i+2),d=0,N=D?S:S+1,T++,w=""}break}return r.text=e,r.fontSize=i,r},mp=function(t,e,n){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),s=e.scope.getStringUnitWidth(t,{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:s}},dB={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},hB=function(t,e){var n={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(r){return r.type===n.type&&r.object===n.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(n)},fB=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(ia.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(dB)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");v5=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new qE,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(n){n.internal.events.unsubscribe(n.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete n.internal.acroformPlugin.acroFormDictionaryRoot._eventID,n.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(n){n.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=n.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var s in r)if(r.hasOwnProperty(s)){var i=r[s];i.objId=void 0,i.hasAnnotation&&hB(i,n)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(n){if(n.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");n.internal.write("/AcroForm "+n.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(n){(function(r,s){var i=!r;for(var a in r||(s.internal.newObjectDeferredBegin(s.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),s.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||s.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(a)){var o=r[a],l=[],c=o.Rect;if(o.Rect&&(o.Rect=cB(o.Rect,s)),s.internal.newObjectDeferredBegin(o.objId,!0),o.DA=ct.createDefaultAppearanceStream(o),xn(o)==="object"&&typeof o.getKeyValueListForStream=="function"&&(l=o.getKeyValueListForStream()),o.Rect=c,o.hasAppearanceStream&&!o.appearanceStreamContent){var d=uB(o);l.push({key:"AP",value:"<</N "+d+">>"}),s.internal.acroformPlugin.xForms.push(d)}if(o.appearanceStreamContent){var g="";for(var y in o.appearanceStreamContent)if(o.appearanceStreamContent.hasOwnProperty(y)){var p=o.appearanceStreamContent[y];if(g+="/"+y+" ",g+="<<",Object.keys(p).length>=1||Array.isArray(p)){for(var a in p)if(p.hasOwnProperty(a)){var N=p[a];typeof N=="function"&&(N=N.call(s,o)),g+="/"+a+" "+N+" ",s.internal.acroformPlugin.xForms.indexOf(N)>=0||s.internal.acroformPlugin.xForms.push(N)}}else typeof(N=p)=="function"&&(N=N.call(s,o)),g+="/"+a+" "+N,s.internal.acroformPlugin.xForms.indexOf(N)>=0||s.internal.acroformPlugin.xForms.push(N);g+=">>"}l.push({key:"AP",value:`<<
`+g+">>"})}s.internal.putStream({additionalKeyValues:l,objectId:o.objId}),s.internal.out("endobj")}i&&function(S,I){for(var w in S)if(S.hasOwnProperty(w)){var T=w,j=S[w];I.internal.newObjectDeferredBegin(j.objId,!0),xn(j)==="object"&&typeof j.putStream=="function"&&j.putStream(),delete S[T]}}(s.internal.acroformPlugin.xForms,s)})(n,t)}),t.internal.acroformPlugin.isInitialized=!0}},BE=ir.__acroform__.arrayToPdfArray=function(t,e,n){var r=function(a){return a};if(Array.isArray(t)){for(var s="[",i=0;i<t.length;i++)switch(i!==0&&(s+=" "),xn(t[i])){case"boolean":case"number":case"object":s+=t[i].toString();break;case"string":t[i].substr(0,1)!=="/"?(e!==void 0&&n&&(r=n.internal.getEncryptor(e)),s+="("+Mc(r(t[i].toString()))+")"):s+=t[i].toString()}return s+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},o1=function(t,e,n){var r=function(s){return s};return e!==void 0&&n&&(r=n.internal.getEncryptor(e)),(t=t||"").toString(),"("+Mc(r(t))+")"},Sa=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Sa.prototype.toString=function(){return this.objId+" 0 R"},Sa.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},Sa.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(i){return i!="content"&&i!="appearanceStreamContent"&&i!="scope"&&i!="objId"&&i.substring(0,1)!="_"});for(var n in e)if(Object.getOwnPropertyDescriptor(this,e[n]).configurable===!1){var r=e[n],s=this[r];s&&(Array.isArray(s)?t.push({key:r,value:BE(s,this.objId,this.scope)}):s instanceof Sa?(s.scope=this.scope,t.push({key:r,value:s.objId+" 0 R"})):typeof s!="function"&&t.push({key:r,value:s}))}return t};var zE=function(){Sa.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(n){t=n.trim()},get:function(){return t||null}})};Ks(zE,Sa);var qE=function(){Sa.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var n=function(r){return r};return this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),"("+Mc(n(t))+")"}},set:function(n){t=n}})};Ks(qE,Sa);var ia=function t(){Sa.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(w){if(isNaN(w))throw new Error('Invalid value "'+w+'" for attribute F supplied.');e=w}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!mr(e,3)},set:function(w){w?this.F=gr(e,3):this.F=yr(e,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(w){if(isNaN(w))throw new Error('Invalid value "'+w+'" for attribute Ff supplied.');n=w}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(w){r=w!==void 0?w:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(w){r[0]=w}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(w){r[1]=w}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(w){r[2]=w}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(w){r[3]=w}});var s="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return s},set:function(w){switch(w){case"/Btn":case"/Tx":case"/Ch":case"/Sig":s=w;break;default:throw new Error('Invalid value "'+w+'" for attribute FT supplied.')}}});var i=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!i||i.length<1){if(this instanceof Fm)return;i="FieldObject"+t.FieldNum++}var w=function(T){return T};return this.scope&&(w=this.scope.internal.getEncryptor(this.objId)),"("+Mc(w(i))+")"},set:function(w){i=w.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return i},set:function(w){i=w}});var a="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return a},set:function(w){a=w}});var o="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return o},set:function(w){o=w}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(w){l=w}});var c=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return c===void 0?50/v5:c},set:function(w){c=w}});var d="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return d},set:function(w){d=w}});var g="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!g||this instanceof Fm||this instanceof lc))return o1(g,this.objId,this.scope)},set:function(w){w=w.toString(),g=w}});var y=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(y)return this instanceof Vr==0?o1(y,this.objId,this.scope):y},set:function(w){w=w.toString(),y=this instanceof Vr==0?w.substr(0,1)==="("?Xc(w.substr(1,w.length-2)):Xc(w):w}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Vr==1?Xc(y.substr(1,y.length-1)):y},set:function(w){w=w.toString(),y=this instanceof Vr==1?"/"+w:w}});var p=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(p)return p},set:function(w){this.V=w}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(p)return this instanceof Vr==0?o1(p,this.objId,this.scope):p},set:function(w){w=w.toString(),p=this instanceof Vr==0?w.substr(0,1)==="("?Xc(w.substr(1,w.length-2)):Xc(w):w}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Vr==1?Xc(p.substr(1,p.length-1)):p},set:function(w){w=w.toString(),p=this instanceof Vr==1?"/"+w:w}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var N,S=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return S},set:function(w){w=!!w,S=w}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(N)return N},set:function(w){N=w}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!mr(this.Ff,1)},set:function(w){w?this.Ff=gr(this.Ff,1):this.Ff=yr(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!mr(this.Ff,2)},set:function(w){w?this.Ff=gr(this.Ff,2):this.Ff=yr(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!mr(this.Ff,3)},set:function(w){w?this.Ff=gr(this.Ff,3):this.Ff=yr(this.Ff,3)}});var I=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(I!==null)return I},set:function(w){if([0,1,2].indexOf(w)===-1)throw new Error('Invalid value "'+w+'" for attribute Q supplied.');I=w}}),Object.defineProperty(this,"textAlign",{get:function(){var w;switch(I){case 0:default:w="left";break;case 1:w="center";break;case 2:w="right"}return w},configurable:!0,enumerable:!0,set:function(w){switch(w){case"right":case 2:I=2;break;case"center":case 1:I=1;break;default:I=0}}})};Ks(ia,Sa);var Tu=function(){ia.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(n){t=n}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return BE(e,this.objId,this.scope)},set:function(n){var r,s;s=[],typeof(r=n)=="string"&&(s=function(i,a,o){o||(o=1);for(var l,c=[];l=a.exec(i);)c.push(l[o]);return c}(r,/\((.*?)\)/g)),e=s}}),this.getOptions=function(){return e},this.setOptions=function(n){e=n,this.sort&&e.sort()},this.addOption=function(n){n=(n=n||"").toString(),e.push(n),this.sort&&e.sort()},this.removeOption=function(n,r){for(r=r||!1,n=(n=n||"").toString();e.indexOf(n)!==-1&&(e.splice(e.indexOf(n),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!mr(this.Ff,18)},set:function(n){n?this.Ff=gr(this.Ff,18):this.Ff=yr(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!mr(this.Ff,19)},set:function(n){this.combo===!0&&(n?this.Ff=gr(this.Ff,19):this.Ff=yr(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!mr(this.Ff,20)},set:function(n){n?(this.Ff=gr(this.Ff,20),e.sort()):this.Ff=yr(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!mr(this.Ff,22)},set:function(n){n?this.Ff=gr(this.Ff,22):this.Ff=yr(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!mr(this.Ff,23)},set:function(n){n?this.Ff=gr(this.Ff,23):this.Ff=yr(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!mr(this.Ff,27)},set:function(n){n?this.Ff=gr(this.Ff,27):this.Ff=yr(this.Ff,27)}}),this.hasAppearanceStream=!1};Ks(Tu,ia);var Iu=function(){Tu.call(this),this.fontName="helvetica",this.combo=!1};Ks(Iu,Tu);var Cu=function(){Iu.call(this),this.combo=!0};Ks(Cu,Iu);var Bp=function(){Cu.call(this),this.edit=!0};Ks(Bp,Cu);var Vr=function(){ia.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!mr(this.Ff,15)},set:function(n){n?this.Ff=gr(this.Ff,15):this.Ff=yr(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!mr(this.Ff,16)},set:function(n){n?this.Ff=gr(this.Ff,16):this.Ff=yr(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!mr(this.Ff,17)},set:function(n){n?this.Ff=gr(this.Ff,17):this.Ff=yr(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!mr(this.Ff,26)},set:function(n){n?this.Ff=gr(this.Ff,26):this.Ff=yr(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(i){return i};if(this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var r,s=[];for(r in s.push("<<"),e)s.push("/"+r+" ("+Mc(n(e[r]))+")");return s.push(">>"),s.join(`
`)}},set:function(n){xn(n)==="object"&&(e=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(n){typeof n=="string"&&(e.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(n){t="/"+n}})};Ks(Vr,ia);var zp=function(){Vr.call(this),this.pushButton=!0};Ks(zp,Vr);var Pu=function(){Vr.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};Ks(Pu,Vr);var Fm=function(){var t,e;ia.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(s){t=s}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(s){e=s}});var n,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var s=function(o){return o};this.scope&&(s=this.scope.internal.getEncryptor(this.objId));var i,a=[];for(i in a.push("<<"),r)a.push("/"+i+" ("+Mc(s(r[i]))+")");return a.push(">>"),a.join(`
`)},set:function(s){xn(s)==="object"&&(r=s)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(s){typeof s=="string"&&(r.CA=s)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(s){n=s}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(s){n="/"+s}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=ct.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Ks(Fm,ia),Pu.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var n=this.Kids[e];n.appearanceStreamContent=t.createAppearanceStream(n.optionName),n.caption=t.getCA()}},Pu.prototype.createOption=function(t){var e=new Fm;return e.Parent=this,e.optionName=t,this.Kids.push(e),pB.call(this.scope,e),e};var qp=function(){Vr.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=ct.CheckBox.createAppearanceStream()};Ks(qp,Vr);var lc=function(){ia.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!mr(this.Ff,13)},set:function(e){e?this.Ff=gr(this.Ff,13):this.Ff=yr(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!mr(this.Ff,21)},set:function(e){e?this.Ff=gr(this.Ff,21):this.Ff=yr(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!mr(this.Ff,23)},set:function(e){e?this.Ff=gr(this.Ff,23):this.Ff=yr(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!mr(this.Ff,24)},set:function(e){e?this.Ff=gr(this.Ff,24):this.Ff=yr(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!mr(this.Ff,25)},set:function(e){e?this.Ff=gr(this.Ff,25):this.Ff=yr(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!mr(this.Ff,26)},set:function(e){e?this.Ff=gr(this.Ff,26):this.Ff=yr(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Ks(lc,ia);var Hp=function(){lc.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!mr(this.Ff,14)},set:function(t){t?this.Ff=gr(this.Ff,14):this.Ff=yr(this.Ff,14)}}),this.password=!0};Ks(Hp,lc);var ct={CheckBox:{createAppearanceStream:function(){return{N:{On:ct.CheckBox.YesNormal},D:{On:ct.CheckBox.YesPushDown,Off:ct.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=va(t);e.scope=t.scope;var n=[],r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,s=t.scope.__private__.encodeColorString(t.color),i=X2(t,t.caption);return n.push("0.749023 g"),n.push("0 0 "+Lt(ct.internal.getWidth(t))+" "+Lt(ct.internal.getHeight(t))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+r+" "+Lt(i.fontSize)+" Tf "+s),n.push("BT"),n.push(i.text),n.push("ET"),n.push("Q"),n.push("EMC"),e.stream=n.join(`
`),e},YesNormal:function(t){var e=va(t);e.scope=t.scope;var n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color),s=[],i=ct.internal.getHeight(t),a=ct.internal.getWidth(t),o=X2(t,t.caption);return s.push("1 g"),s.push("0 0 "+Lt(a)+" "+Lt(i)+" re"),s.push("f"),s.push("q"),s.push("0 0 1 rg"),s.push("0 0 "+Lt(a-1)+" "+Lt(i-1)+" re"),s.push("W"),s.push("n"),s.push("0 g"),s.push("BT"),s.push("/"+n+" "+Lt(o.fontSize)+" Tf "+r),s.push(o.text),s.push("ET"),s.push("Q"),e.stream=s.join(`
`),e},OffPushDown:function(t){var e=va(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Lt(ct.internal.getWidth(t))+" "+Lt(ct.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:ct.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=ct.RadioButton.Circle.YesNormal,e.D[t]=ct.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=va(t);e.scope=t.scope;var n=[],r=ct.internal.getWidth(t)<=ct.internal.getHeight(t)?ct.internal.getWidth(t)/4:ct.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var s=ct.internal.Bezier_C,i=Number((r*s).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+Wo(ct.internal.getWidth(t)/2)+" "+Wo(ct.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+i+" "+i+" "+r+" 0 "+r+" c"),n.push("-"+i+" "+r+" -"+r+" "+i+" -"+r+" 0 c"),n.push("-"+r+" -"+i+" -"+i+" -"+r+" 0 -"+r+" c"),n.push(i+" -"+r+" "+r+" -"+i+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=va(t);e.scope=t.scope;var n=[],r=ct.internal.getWidth(t)<=ct.internal.getHeight(t)?ct.internal.getWidth(t)/4:ct.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var s=Number((2*r).toFixed(5)),i=Number((s*ct.internal.Bezier_C).toFixed(5)),a=Number((r*ct.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+Wo(ct.internal.getWidth(t)/2)+" "+Wo(ct.internal.getHeight(t)/2)+" cm"),n.push(s+" 0 m"),n.push(s+" "+i+" "+i+" "+s+" 0 "+s+" c"),n.push("-"+i+" "+s+" -"+s+" "+i+" -"+s+" 0 c"),n.push("-"+s+" -"+i+" -"+i+" -"+s+" 0 -"+s+" c"),n.push(i+" -"+s+" "+s+" -"+i+" "+s+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+Wo(ct.internal.getWidth(t)/2)+" "+Wo(ct.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+a+" "+a+" "+r+" 0 "+r+" c"),n.push("-"+a+" "+r+" -"+r+" "+a+" -"+r+" 0 c"),n.push("-"+r+" -"+a+" -"+a+" -"+r+" 0 -"+r+" c"),n.push(a+" -"+r+" "+r+" -"+a+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=va(t);e.scope=t.scope;var n=[],r=ct.internal.getWidth(t)<=ct.internal.getHeight(t)?ct.internal.getWidth(t)/4:ct.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var s=Number((2*r).toFixed(5)),i=Number((s*ct.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+Wo(ct.internal.getWidth(t)/2)+" "+Wo(ct.internal.getHeight(t)/2)+" cm"),n.push(s+" 0 m"),n.push(s+" "+i+" "+i+" "+s+" 0 "+s+" c"),n.push("-"+i+" "+s+" -"+s+" "+i+" -"+s+" 0 c"),n.push("-"+s+" -"+i+" -"+i+" -"+s+" 0 -"+s+" c"),n.push(i+" -"+s+" "+s+" -"+i+" "+s+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:ct.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=ct.RadioButton.Cross.YesNormal,e.D[t]=ct.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=va(t);e.scope=t.scope;var n=[],r=ct.internal.calculateCross(t);return n.push("q"),n.push("1 1 "+Lt(ct.internal.getWidth(t)-2)+" "+Lt(ct.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(Lt(r.x1.x)+" "+Lt(r.x1.y)+" m"),n.push(Lt(r.x2.x)+" "+Lt(r.x2.y)+" l"),n.push(Lt(r.x4.x)+" "+Lt(r.x4.y)+" m"),n.push(Lt(r.x3.x)+" "+Lt(r.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=va(t);e.scope=t.scope;var n=ct.internal.calculateCross(t),r=[];return r.push("0.749023 g"),r.push("0 0 "+Lt(ct.internal.getWidth(t))+" "+Lt(ct.internal.getHeight(t))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+Lt(ct.internal.getWidth(t)-2)+" "+Lt(ct.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(Lt(n.x1.x)+" "+Lt(n.x1.y)+" m"),r.push(Lt(n.x2.x)+" "+Lt(n.x2.y)+" l"),r.push(Lt(n.x4.x)+" "+Lt(n.x4.y)+" m"),r.push(Lt(n.x3.x)+" "+Lt(n.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=va(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Lt(ct.internal.getWidth(t))+" "+Lt(ct.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+n}};ct.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=ct.internal.getWidth(t),n=ct.internal.getHeight(t),r=Math.min(e,n);return{x1:{x:(e-r)/2,y:(n-r)/2+r},x2:{x:(e-r)/2+r,y:(n-r)/2},x3:{x:(e-r)/2,y:(n-r)/2},x4:{x:(e-r)/2+r,y:(n-r)/2+r}}}},ct.internal.getWidth=function(t){var e=0;return xn(t)==="object"&&(e=X_(t.Rect[2])),e},ct.internal.getHeight=function(t){var e=0;return xn(t)==="object"&&(e=X_(t.Rect[3])),e};var pB=ir.addField=function(t){if(fB(this,t),!(t instanceof ia))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};ir.AcroFormChoiceField=Tu,ir.AcroFormListBox=Iu,ir.AcroFormComboBox=Cu,ir.AcroFormEditBox=Bp,ir.AcroFormButton=Vr,ir.AcroFormPushButton=zp,ir.AcroFormRadioButton=Pu,ir.AcroFormCheckBox=qp,ir.AcroFormTextField=lc,ir.AcroFormPasswordField=Hp,ir.AcroFormAppearance=ct,ir.AcroForm={ChoiceField:Tu,ListBox:Iu,ComboBox:Cu,EditBox:Bp,Button:Vr,PushButton:zp,RadioButton:Pu,CheckBox:qp,TextField:lc,PasswordField:Hp,Appearance:ct},vt.AcroForm={ChoiceField:Tu,ListBox:Iu,ComboBox:Cu,EditBox:Bp,Button:Vr,PushButton:zp,RadioButton:Pu,CheckBox:qp,TextField:lc,PasswordField:Hp,Appearance:ct};vt.AcroForm;function HE(t){return t.reduce(function(e,n,r){return e[n]=r,e},{})}(function(t){var e="addImage_";t.__addimage__={};var n="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},s=t.__addimage__.getImageFileTypeByImageData=function(E,C){var L,z,Z,ae,ue,Q=n;if((C=C||n)==="RGBA"||E.data!==void 0&&E.data instanceof Uint8ClampedArray&&"height"in E&&"width"in E)return"RGBA";if(J(E))for(ue in r)for(Z=r[ue],L=0;L<Z.length;L+=1){for(ae=!0,z=0;z<Z[L].length;z+=1)if(Z[L][z]!==void 0&&Z[L][z]!==E[z]){ae=!1;break}if(ae===!0){Q=ue;break}}else for(ue in r)for(Z=r[ue],L=0;L<Z.length;L+=1){for(ae=!0,z=0;z<Z[L].length;z+=1)if(Z[L][z]!==void 0&&Z[L][z]!==E.charCodeAt(z)){ae=!1;break}if(ae===!0){Q=ue;break}}return Q===n&&C!==n&&(Q=C),Q},i=function E(C){for(var L=this.internal.write,z=this.internal.putStream,Z=(0,this.internal.getFilters)();Z.indexOf("FlateEncode")!==-1;)Z.splice(Z.indexOf("FlateEncode"),1);C.objectId=this.internal.newObject();var ae=[];if(ae.push({key:"Type",value:"/XObject"}),ae.push({key:"Subtype",value:"/Image"}),ae.push({key:"Width",value:C.width}),ae.push({key:"Height",value:C.height}),C.colorSpace===w.INDEXED?ae.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(C.palette.length/3-1)+" "+("sMask"in C&&C.sMask!==void 0?C.objectId+2:C.objectId+1)+" 0 R]"}):(ae.push({key:"ColorSpace",value:"/"+C.colorSpace}),C.colorSpace===w.DEVICE_CMYK&&ae.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),ae.push({key:"BitsPerComponent",value:C.bitsPerComponent}),"decodeParameters"in C&&C.decodeParameters!==void 0&&ae.push({key:"DecodeParms",value:"<<"+C.decodeParameters+">>"}),"transparency"in C&&Array.isArray(C.transparency)&&C.transparency.length>0){for(var ue="",Q=0,ce=C.transparency.length;Q<ce;Q++)ue+=C.transparency[Q]+" "+C.transparency[Q]+" ";ae.push({key:"Mask",value:"["+ue+"]"})}C.sMask!==void 0&&ae.push({key:"SMask",value:C.objectId+1+" 0 R"});var me=C.filter!==void 0?["/"+C.filter]:void 0;if(z({data:C.data,additionalKeyValues:ae,alreadyAppliedFilters:me,objectId:C.objectId}),L("endobj"),"sMask"in C&&C.sMask!==void 0){var ye,M=(ye=C.sMaskBitsPerComponent)!==null&&ye!==void 0?ye:C.bitsPerComponent,W={width:C.width,height:C.height,colorSpace:"DeviceGray",bitsPerComponent:M,data:C.sMask};"filter"in C&&(W.decodeParameters="/Predictor ".concat(C.predictor," /Colors 1 /BitsPerComponent ").concat(M," /Columns ").concat(C.width),W.filter=C.filter),E.call(this,W)}if(C.colorSpace===w.INDEXED){var X=this.internal.newObject();z({data:_(new Uint8Array(C.palette)),objectId:X}),L("endobj")}},a=function(){var E=this.internal.collections[e+"images"];for(var C in E)i.call(this,E[C])},o=function(){var E,C=this.internal.collections[e+"images"],L=this.internal.write;for(var z in C)L("/I"+(E=C[z]).index,E.objectId,"0","R")},l=function(){this.internal.collections[e+"images"]||(this.internal.collections[e+"images"]={},this.internal.events.subscribe("putResources",a),this.internal.events.subscribe("putXobjectDict",o))},c=function(){var E=this.internal.collections[e+"images"];return l.call(this),E},d=function(){return Object.keys(this.internal.collections[e+"images"]).length},g=function(E){return typeof t["process"+E.toUpperCase()]=="function"},y=function(E){return xn(E)==="object"&&E.nodeType===1},p=function(E,C){if(E.nodeName==="IMG"&&E.hasAttribute("src")){var L=""+E.getAttribute("src");if(L.indexOf("data:image/")===0)return Vp(unescape(L).split("base64,").pop());var z=t.loadFile(L,!0);if(z!==void 0)return z}if(E.nodeName==="CANVAS"){if(E.width===0||E.height===0)throw new Error("Given canvas must have data. Canvas width: "+E.width+", height: "+E.height);var Z;switch(C){case"PNG":Z="image/png";break;case"WEBP":Z="image/webp";break;default:Z="image/jpeg"}return Vp(E.toDataURL(Z,1).split("base64,").pop())}},N=function(E){var C=this.internal.collections[e+"images"];if(C){for(var L in C)if(E===C[L].alias)return C[L]}},S=function(E,C,L){return E||C||(E=-96,C=-96),E<0&&(E=-1*L.width*72/E/this.internal.scaleFactor),C<0&&(C=-1*L.height*72/C/this.internal.scaleFactor),E===0&&(E=C*L.width/L.height),C===0&&(C=E*L.height/L.width),[E,C]},I=function(E,C,L,z,Z,ae){var ue=S.call(this,L,z,Z),Q=this.internal.getCoordinateString,ce=this.internal.getVerticalCoordinateString,me=c.call(this);if(L=ue[0],z=ue[1],me[Z.index]=Z,ae){ae*=Math.PI/180;var ye=Math.cos(ae),M=Math.sin(ae),W=function(Y){return Y.toFixed(4)},X=[W(ye),W(M),W(-1*M),W(ye),0,0,"cm"]}this.internal.write("q"),ae?(this.internal.write([1,"0","0",1,Q(E),ce(C+z),"cm"].join(" ")),this.internal.write(X.join(" ")),this.internal.write([Q(L),"0","0",Q(z),"0","0","cm"].join(" "))):this.internal.write([Q(L),"0","0",Q(z),Q(E),ce(C+z),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+Z.index+" Do"),this.internal.write("Q")},w=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var T=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},j=t.__addimage__.sHashCode=function(E){var C,L,z=0;if(typeof E=="string")for(L=E.length,C=0;C<L;C++)z=(z<<5)-z+E.charCodeAt(C),z|=0;else if(J(E))for(L=E.byteLength/2,C=0;C<L;C++)z=(z<<5)-z+E[C],z|=0;return z},D=t.__addimage__.validateStringAsBase64=function(E){(E=E||"").toString().trim();var C=!0;return E.length===0&&(C=!1),E.length%4!=0&&(C=!1),/^[A-Za-z0-9+/]+$/.test(E.substr(0,E.length-2))===!1&&(C=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(E.substr(-2))===!1&&(C=!1),C},H=t.__addimage__.extractImageFromDataUrl=function(E){if(E==null||!(E=E.trim()).startsWith("data:"))return null;var C=E.indexOf(",");return C<0?null:E.substring(0,C).trim().endsWith("base64")?E.substring(C+1):null};t.__addimage__.isArrayBuffer=function(E){return E instanceof ArrayBuffer};var J=t.__addimage__.isArrayBufferView=function(E){return E instanceof Int8Array||E instanceof Uint8Array||E instanceof Uint8ClampedArray||E instanceof Int16Array||E instanceof Uint16Array||E instanceof Int32Array||E instanceof Uint32Array||E instanceof Float32Array||E instanceof Float64Array},O=t.__addimage__.binaryStringToUint8Array=function(E){for(var C=E.length,L=new Uint8Array(C),z=0;z<C;z++)L[z]=E.charCodeAt(z);return L},_=t.__addimage__.arrayBufferToBinaryString=function(E){for(var C="",L=J(E)?E:new Uint8Array(E),z=0;z<L.length;z+=8192)C+=String.fromCharCode.apply(null,L.subarray(z,z+8192));return C};t.addImage=function(){var E,C,L,z,Z,ae,ue,Q,ce;if(typeof arguments[1]=="number"?(C=n,L=arguments[1],z=arguments[2],Z=arguments[3],ae=arguments[4],ue=arguments[5],Q=arguments[6],ce=arguments[7]):(C=arguments[1],L=arguments[2],z=arguments[3],Z=arguments[4],ae=arguments[5],ue=arguments[6],Q=arguments[7],ce=arguments[8]),xn(E=arguments[0])==="object"&&!y(E)&&"imageData"in E){var me=E;E=me.imageData,C=me.format||C||n,L=me.x||L||0,z=me.y||z||0,Z=me.w||me.width||Z,ae=me.h||me.height||ae,ue=me.alias||ue,Q=me.compression||Q,ce=me.rotation||me.angle||ce}var ye=this.internal.getFilters();if(Q===void 0&&ye.indexOf("FlateEncode")!==-1&&(Q="SLOW"),isNaN(L)||isNaN(z))throw new Error("Invalid coordinates passed to jsPDF.addImage");l.call(this);var M=A.call(this,E,C,ue,Q);return I.call(this,L,z,Z,ae,M,ce),this};var A=function(E,C,L,z){var Z,ae,ue;if(typeof E=="string"&&s(E)===n){E=unescape(E);var Q=R(E,!1);(Q!==""||(Q=t.loadFile(E,!0))!==void 0)&&(E=Q)}if(y(E)&&(E=p(E,C)),C=s(E,C),!g(C))throw new Error("addImage does not support files of type '"+C+"', please ensure that a plugin for '"+C+"' support is added.");if(((ue=L)==null||ue.length===0)&&(L=function(ce){return typeof ce=="string"||J(ce)?j(ce):J(ce.data)?j(ce.data):null}(E)),(Z=N.call(this,L))||(E instanceof Uint8Array||C==="RGBA"||(ae=E,E=O(E)),Z=this["process"+C.toUpperCase()](E,d.call(this),L,function(ce){return ce&&typeof ce=="string"&&(ce=ce.toUpperCase()),ce in t.image_compression?ce:T.NONE}(z),ae)),!Z)throw new Error("An unknown error occurred whilst processing the image.");return Z},R=t.__addimage__.convertBase64ToBinaryString=function(E,C){C=typeof C!="boolean"||C;var L,z="";if(typeof E=="string"){var Z;L=(Z=H(E))!==null&&Z!==void 0?Z:E;try{z=Vp(L)}catch(ae){if(C)throw D(L)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+ae.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return z};t.getImageProperties=function(E){var C,L,z="";if(y(E)&&(E=p(E)),typeof E=="string"&&s(E)===n&&((z=R(E,!1))===""&&(z=t.loadFile(E)||""),E=z),L=s(E),!g(L))throw new Error("addImage does not support files of type '"+L+"', please ensure that a plugin for '"+L+"' support is added.");if(E instanceof Uint8Array||(E=O(E)),!(C=this["process"+L.toUpperCase()](E)))throw new Error("An unknown error occurred whilst processing the image");return C.fileType=L,C}})(vt.API),function(t){var e=function(n){if(n!==void 0&&n!="")return!0};vt.API.events.push(["addPage",function(n){this.internal.getPageInfo(n.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(n){for(var r,s,i,a=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString,l=this.internal.getPageInfoByObjId(n.objId),c=n.pageContext.annotations,d=!1,g=0;g<c.length&&!d;g++)switch((r=c[g]).type){case"link":(e(r.options.url)||e(r.options.pageNumber))&&(d=!0);break;case"reference":case"text":case"freetext":d=!0}if(d!=0){this.internal.write("/Annots [");for(var y=0;y<c.length;y++){r=c[y];var p=this.internal.pdfEscape,N=this.internal.getEncryptor(n.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var S=this.internal.newAdditionalObject(),I=this.internal.newAdditionalObject(),w=this.internal.getEncryptor(S.objId),T=r.title||"Note";i="<</Type /Annot /Subtype /Text "+(s="/Rect ["+a(r.bounds.x)+" "+o(r.bounds.y+r.bounds.h)+" "+a(r.bounds.x+r.bounds.w)+" "+o(r.bounds.y)+"] ")+"/Contents ("+p(w(r.contents))+")",i+=" /Popup "+I.objId+" 0 R",i+=" /P "+l.objId+" 0 R",i+=" /T ("+p(w(T))+") >>",S.content=i;var j=S.objId+" 0 R";i="<</Type /Annot /Subtype /Popup "+(s="/Rect ["+a(r.bounds.x+30)+" "+o(r.bounds.y+r.bounds.h)+" "+a(r.bounds.x+r.bounds.w+30)+" "+o(r.bounds.y)+"] ")+" /Parent "+j,r.open&&(i+=" /Open true"),i+=" >>",I.content=i,this.internal.write(S.objId,"0 R",I.objId,"0 R");break;case"freetext":s="/Rect ["+a(r.bounds.x)+" "+o(r.bounds.y)+" "+a(r.bounds.x+r.bounds.w)+" "+o(r.bounds.y+r.bounds.h)+"] ";var D=r.color||"#000000";i="<</Type /Annot /Subtype /FreeText "+s+"/Contents ("+p(N(r.contents))+")",i+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+D+")",i+=" /Border [0 0 0]",i+=" >>",this.internal.write(i);break;case"link":if(r.options.name){var H=this.annotations._nameMap[r.options.name];r.options.pageNumber=H.page,r.options.top=H.y}else r.options.top||(r.options.top=0);if(s="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",i="",r.options.url)i="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /A <</S /URI /URI ("+p(N(r.options.url))+") >>";else if(r.options.pageNumber)switch(i="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":i+=" /Fit]";break;case"FitH":i+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,i+=" /FitV "+r.options.left+"]";break;default:var J=o(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),i+=" /XYZ "+r.options.left+" "+J+" "+r.options.zoom+"]"}i!=""&&(i+=" >>",this.internal.write(i))}}this.internal.write("]")}}]),t.createAnnotation=function(n){var r=this.internal.getCurrentPageInfo();switch(n.type){case"link":this.link(n.bounds.x,n.bounds.y,n.bounds.w,n.bounds.h,n);break;case"text":case"freetext":r.pageContext.annotations.push(n)}},t.link=function(n,r,s,i,a){var o=this.internal.getCurrentPageInfo(),l=this.internal.getCoordinateString,c=this.internal.getVerticalCoordinateString;o.pageContext.annotations.push({finalBounds:{x:l(n),y:c(r),w:l(n+s),h:c(r+i)},options:a,type:"link"})},t.textWithLink=function(n,r,s,i){var a,o,l=this.getTextWidth(n),c=this.internal.getLineHeight()/this.internal.scaleFactor;if(i.maxWidth!==void 0){o=i.maxWidth;var d=this.splitTextToSize(n,o).length;a=Math.ceil(c*d)}else o=l,a=c;return this.text(n,r,s,i),s+=.2*c,i.align==="center"&&(r-=l/2),i.align==="right"&&(r-=l),this.link(r,s-c,o,a,i),l},t.getTextWidth=function(n){var r=this.internal.getFontSize();return this.getStringUnitWidth(n)*r/this.internal.scaleFactor}}(vt.API),function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},s=[1570,1571,1573,1575];t.__arabicParser__={};var i=t.__arabicParser__.isInArabicSubstitutionA=function(S){return e[S.charCodeAt(0)]!==void 0},a=t.__arabicParser__.isArabicLetter=function(S){return typeof S=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(S)},o=t.__arabicParser__.isArabicEndLetter=function(S){return a(S)&&i(S)&&e[S.charCodeAt(0)].length<=2},l=t.__arabicParser__.isArabicAlfLetter=function(S){return a(S)&&s.indexOf(S.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(S){return a(S)&&i(S)&&e[S.charCodeAt(0)].length>=1};var c=t.__arabicParser__.arabicLetterHasFinalForm=function(S){return a(S)&&i(S)&&e[S.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(S){return a(S)&&i(S)&&e[S.charCodeAt(0)].length>=3};var d=t.__arabicParser__.arabicLetterHasMedialForm=function(S){return a(S)&&i(S)&&e[S.charCodeAt(0)].length==4},g=t.__arabicParser__.resolveLigatures=function(S){var I=0,w=n,T="",j=0;for(I=0;I<S.length;I+=1)w[S.charCodeAt(I)]!==void 0?(j++,typeof(w=w[S.charCodeAt(I)])=="number"&&(T+=String.fromCharCode(w),w=n,j=0),I===S.length-1&&(w=n,T+=S.charAt(I-(j-1)),I-=j-1,j=0)):(w=n,T+=S.charAt(I-j),I-=j,j=0);return T};t.__arabicParser__.isArabicDiacritic=function(S){return S!==void 0&&r[S.charCodeAt(0)]!==void 0};var y=t.__arabicParser__.getCorrectForm=function(S,I,w){return a(S)?i(S)===!1?-1:!c(S)||!a(I)&&!a(w)||!a(w)&&o(I)||o(S)&&!a(I)||o(S)&&l(I)||o(S)&&o(I)?0:d(S)&&a(I)&&!o(I)&&a(w)&&c(w)?3:o(S)||!a(w)?1:2:-1},p=function(S){var I=0,w=0,T=0,j="",D="",H="",J=(S=S||"").split("\\s+"),O=[];for(I=0;I<J.length;I+=1){for(O.push(""),w=0;w<J[I].length;w+=1)j=J[I][w],D=J[I][w-1],H=J[I][w+1],a(j)?(T=y(j,D,H),O[I]+=T!==-1?String.fromCharCode(e[j.charCodeAt(0)][T]):j):O[I]+=j;O[I]=g(O[I])}return O.join(" ")},N=t.__arabicParser__.processArabic=t.processArabic=function(){var S,I=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,w=[];if(Array.isArray(I)){var T=0;for(w=[],T=0;T<I.length;T+=1)Array.isArray(I[T])?w.push([p(I[T][0]),I[T][1],I[T][2]]):w.push([p(I[T])]);S=w}else S=p(I);return typeof arguments[0]=="string"?S:(arguments[0].text=S,arguments[0])};t.events.push(["preProcessText",N])}(vt.API),vt.API.autoPrint=function(t){var e;return(t=t||{}).variant=t.variant||"non-conform",t.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})),this},function(t){var e=function(){var n=void 0;Object.defineProperty(this,"pdf",{get:function(){return n},set:function(o){n=o}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(o){r=isNaN(o)||Number.isInteger(o)===!1||o<0?150:o,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var s=300;Object.defineProperty(this,"height",{get:function(){return s},set:function(o){s=isNaN(o)||Number.isInteger(o)===!1||o<0?300:o,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=s+1)}});var i=[];Object.defineProperty(this,"childNodes",{get:function(){return i},set:function(o){i=o}});var a={};Object.defineProperty(this,"style",{get:function(){return a},set:function(o){a=o}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(n,r){var s;if((n=n||"2d")!=="2d")return null;for(s in r)this.pdf.context2d.hasOwnProperty(s)&&(this.pdf.context2d[s]=r[s]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(vt.API),function(t){var e={left:0,top:0,bottom:0,right:0},n=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),s.call(this))},s=function(){this.internal.__cell__.lastCell=new i,this.internal.__cell__.pages=1},i=function(){var l=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return l},set:function(S){l=S}});var c=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return c},set:function(S){c=S}});var d=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return d},set:function(S){d=S}});var g=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return g},set:function(S){g=S}});var y=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return y},set:function(S){y=S}});var p=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return p},set:function(S){p=S}});var N=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return N},set:function(S){N=S}}),this};i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},i.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(l){return r.call(this),this.internal.__cell__.headerFunction=typeof l=="function"?l:void 0,this},t.getTextDimensions=function(l,c){r.call(this);var d=(c=c||{}).fontSize||this.getFontSize(),g=c.font||this.getFont(),y=c.scaleFactor||this.internal.scaleFactor,p=0,N=0,S=0,I=this;if(!Array.isArray(l)&&typeof l!="string"){if(typeof l!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");l=String(l)}var w=c.maxWidth;w>0?typeof l=="string"?l=this.splitTextToSize(l,w):Object.prototype.toString.call(l)==="[object Array]"&&(l=l.reduce(function(j,D){return j.concat(I.splitTextToSize(D,w))},[])):l=Array.isArray(l)?l:[l];for(var T=0;T<l.length;T++)p<(S=this.getStringUnitWidth(l[T],{font:g})*d)&&(p=S);return p!==0&&(N=l.length),{w:p/=y,h:Math.max((N*d*this.getLineHeightFactor()-d*(this.getLineHeightFactor()-1))/y,0)}},t.cellAddPage=function(){r.call(this),this.addPage();var l=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new i(l.left,l.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var a=t.cell=function(){var l;l=arguments[0]instanceof i?arguments[0]:new i(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]),r.call(this);var c=this.internal.__cell__.lastCell,d=this.internal.__cell__.padding,g=this.internal.__cell__.margins||e,y=this.internal.__cell__.tableHeaderRow,p=this.internal.__cell__.printHeaders;return c.lineNumber!==void 0&&(c.lineNumber===l.lineNumber?(l.x=(c.x||0)+(c.width||0),l.y=c.y||0):c.y+c.height+l.height+g.bottom>this.getPageHeight()?(this.cellAddPage(),l.y=g.top,p&&y&&(this.printHeaderRow(l.lineNumber,!0),l.y+=y[0].height)):l.y=c.y+c.height||l.y),l.text[0]!==void 0&&(this.rect(l.x,l.y,l.width,l.height,n===!0?"FD":void 0),l.align==="right"?this.text(l.text,l.x+l.width-d,l.y+d,{align:"right",baseline:"top"}):l.align==="center"?this.text(l.text,l.x+l.width/2,l.y+d,{align:"center",baseline:"top",maxWidth:l.width-d-d}):this.text(l.text,l.x+d,l.y+d,{align:"left",baseline:"top",maxWidth:l.width-d-d})),this.internal.__cell__.lastCell=l,this};t.table=function(l,c,d,g,y){if(r.call(this),!d)throw new Error("No data for PDF table.");var p,N,S,I,w=[],T=[],j=[],D={},H={},J=[],O=[],_=(y=y||{}).autoSize||!1,A=y.printHeaders!==!1,R=y.css&&y.css["font-size"]!==void 0?16*y.css["font-size"]:y.fontSize||12,E=y.margins||Object.assign({width:this.getPageWidth()},e),C=typeof y.padding=="number"?y.padding:3,L=y.headerBackgroundColor||"#c8c8c8",z=y.headerTextColor||"#000";if(s.call(this),this.internal.__cell__.printHeaders=A,this.internal.__cell__.margins=E,this.internal.__cell__.table_font_size=R,this.internal.__cell__.padding=C,this.internal.__cell__.headerBackgroundColor=L,this.internal.__cell__.headerTextColor=z,this.setFontSize(R),g==null)T=w=Object.keys(d[0]),j=w.map(function(){return"left"});else if(Array.isArray(g)&&xn(g[0])==="object")for(w=g.map(function(me){return me.name}),T=g.map(function(me){return me.prompt||me.name||""}),j=g.map(function(me){return me.align||"left"}),p=0;p<g.length;p+=1)H[g[p].name]=.7499990551181103*g[p].width;else Array.isArray(g)&&typeof g[0]=="string"&&(T=w=g,j=w.map(function(){return"left"}));if(_||Array.isArray(g)&&typeof g[0]=="string")for(p=0;p<w.length;p+=1){for(D[I=w[p]]=d.map(function(me){return me[I]}),this.setFont(void 0,"bold"),J.push(this.getTextDimensions(T[p],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),N=D[I],this.setFont(void 0,"normal"),S=0;S<N.length;S+=1)J.push(this.getTextDimensions(N[S],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);H[I]=Math.max.apply(null,J)+C+C,J=[]}if(A){var Z={};for(p=0;p<w.length;p+=1)Z[w[p]]={},Z[w[p]].text=T[p],Z[w[p]].align=j[p];var ae=o.call(this,Z,H);O=w.map(function(me){return new i(l,c,H[me],ae,Z[me].text,void 0,Z[me].align)}),this.setTableHeaderRow(O),this.printHeaderRow(1,!1)}var ue=g.reduce(function(me,ye){return me[ye.name]=ye.align,me},{});for(p=0;p<d.length;p+=1){"rowStart"in y&&y.rowStart instanceof Function&&y.rowStart({row:p,data:d[p]},this);var Q=o.call(this,d[p],H);for(S=0;S<w.length;S+=1){var ce=d[p][w[S]];"cellStart"in y&&y.cellStart instanceof Function&&y.cellStart({row:p,col:S,data:ce},this),a.call(this,new i(l,c,H[w[S]],Q,ce,p+2,ue[w[S]]))}}return this.internal.__cell__.table_x=l,this.internal.__cell__.table_y=c,this};var o=function(l,c){var d=this.internal.__cell__.padding,g=this.internal.__cell__.table_font_size,y=this.internal.scaleFactor;return Object.keys(l).map(function(p){var N=l[p];return this.splitTextToSize(N.hasOwnProperty("text")?N.text:N,c[p]-d-d)},this).map(function(p){return this.getLineHeightFactor()*p.length*g/y+d+d},this).reduce(function(p,N){return Math.max(p,N)},0)};t.setTableHeaderRow=function(l){r.call(this),this.internal.__cell__.tableHeaderRow=l},t.printHeaderRow=function(l,c){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var d;if(n=!0,typeof this.internal.__cell__.headerFunction=="function"){var g=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new i(g[0],g[1],g[2],g[3],void 0,-1)}this.setFont(void 0,"bold");for(var y=[],p=0;p<this.internal.__cell__.tableHeaderRow.length;p+=1){d=this.internal.__cell__.tableHeaderRow[p].clone(),c&&(d.y=this.internal.__cell__.margins.top||0,y.push(d)),d.lineNumber=l;var N=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),a.call(this,d),this.setTextColor(N)}y.length>0&&this.setTableHeaderRow(y),this.setFont(void 0,"normal"),n=!1}}(vt.API);var $E={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},WE=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],J2=HE(WE),GE=[100,200,300,400,500,600,700,800,900],mB=HE(GE);function l1(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),n=function(i){return $E[i=i||"normal"]?i:"normal"}(t.style),r=function(i){return i?typeof i=="number"?i>=100&&i<=900&&i%100==0?i:400:/^\d00$/.test(i)?parseInt(i):i==="bold"?700:400:400}(t.weight),s=function(i){return typeof J2[i=i||"normal"]=="number"?i:"normal"}(t.stretch);return{family:e,style:n,weight:r,stretch:s,src:t.src||[],ref:t.ref||{name:e,style:[s,n,r].join(" ")}}}function J_(t,e,n,r){var s;for(s=n;s>=0&&s<e.length;s+=r)if(t[e[s]])return t[e[s]];for(s=n;s>=0&&s<e.length;s-=r)if(t[e[s]])return t[e[s]]}var gB={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},Z_={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function e4(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function t4(t){return t.trimLeft()}function yB(t,e){for(var n=0;n<t.length;){if(t.charAt(n)===e)return[t.substring(0,n),t.substring(n+1)];n+=1}return null}function vB(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var gp,n4,r4,Jc,yp,s4,i4,a4,c1=["times"];function o4(t,e,n,r,s){var i=4,a=c4;switch(s){case vt.API.image_compression.FAST:i=1,a=l4;break;case vt.API.image_compression.MEDIUM:i=6,a=u4;break;case vt.API.image_compression.SLOW:i=9,a=d4}t=function(l,c,d,g){for(var y,p=l.length/c,N=new Uint8Array(l.length+p),S=[xB,l4,c4,u4,d4],I=0;I<p;I+=1){var w=I*c,T=l.subarray(w,w+c);if(g)N.set(g(T,d,y),w+I);else{for(var j=S.length,D=[],H=0;H<j;H+=1)D[H]=S[H](T,d,y);var J=bB(D.concat());N.set(D[J],w+I)}y=T}return N}(t,e,Math.ceil(n*r/8),a);var o=$2(t,{level:i});return vt.API.__addimage__.arrayBufferToBinaryString(o)}function xB(t){var e=Array.apply([],t);return e.unshift(0),e}function l4(t,e){var n=t.length,r=[];r[0]=1;for(var s=0;s<n;s+=1){var i=t[s-e]||0;r[s+1]=t[s]-i+256&255}return r}function c4(t,e,n){var r=t.length,s=[];s[0]=2;for(var i=0;i<r;i+=1){var a=n&&n[i]||0;s[i+1]=t[i]-a+256&255}return s}function u4(t,e,n){var r=t.length,s=[];s[0]=3;for(var i=0;i<r;i+=1){var a=t[i-e]||0,o=n&&n[i]||0;s[i+1]=t[i]+256-(a+o>>>1)&255}return s}function d4(t,e,n){var r=t.length,s=[];s[0]=4;for(var i=0;i<r;i+=1){var a=wB(t[i-e]||0,n&&n[i]||0,n&&n[i-e]||0);s[i+1]=t[i]-a+256&255}return s}function wB(t,e,n){if(t===e&&e===n)return t;var r=Math.abs(e-n),s=Math.abs(t-n),i=Math.abs(t+e-n-n);return r<=s&&r<=i?t:s<=i?e:n}function bB(t){var e=t.map(function(n){return n.reduce(function(r,s){return r+Math.abs(s)},0)});return e.indexOf(Math.min.apply(null,e))}function u1(t,e,n){var r=e*n,s=Math.floor(r/8),i=16-(r-8*s+n),a=(1<<n)-1;return KE(t,s)>>i&a}function h4(t,e,n,r){var s=n*r,i=Math.floor(s/8),a=16-(s-8*i+r),o=(1<<r)-1,l=(e&o)<<a;(function(c,d,g){if(d+1<c.byteLength)c.setUint16(d,g,!1);else{var y=g>>8&255;c.setUint8(d,y)}})(t,i,KE(t,i)&~(o<<a)&65535|l)}function KE(t,e){return e+1<t.byteLength?t.getUint16(e,!1):t.getUint8(e)<<8}function _B(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var n=t[e++]|t[e++]<<8,r=t[e++]|t[e++]<<8,s=t[e++],i=s>>7,a=1<<1+(7&s);t[e++],t[e++];var o=null,l=null;i&&(o=e,l=a,e+=3*a);var c=!0,d=[],g=0,y=null,p=0,N=null;for(this.width=n,this.height=r;c&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,N=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((E=t[e++])>=0))throw Error("Invalid block size");if(E===0)break;e+=E}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var S=t[e++];g=t[e++]|t[e++]<<8,y=t[e++],1&S||(y=null),p=S>>2&7,e++;break;case 254:for(;;){if(!((E=t[e++])>=0))throw Error("Invalid block size");if(E===0)break;e+=E}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var I=t[e++]|t[e++]<<8,w=t[e++]|t[e++]<<8,T=t[e++]|t[e++]<<8,j=t[e++]|t[e++]<<8,D=t[e++],H=D>>6&1,J=1<<1+(7&D),O=o,_=l,A=!1;D>>7&&(A=!0,O=e,_=J,e+=3*J);var R=e;for(e++;;){var E;if(!((E=t[e++])>=0))throw Error("Invalid block size");if(E===0)break;e+=E}d.push({x:I,y:w,width:T,height:j,has_local_palette:A,palette_offset:O,palette_size:_,data_offset:R,data_length:e-R,transparent_index:y,interlaced:!!H,delay:g,disposal:p});break;case 59:c=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return d.length},this.loopCount=function(){return N},this.frameInfo=function(C){if(C<0||C>=d.length)throw new Error("Frame index out of range.");return d[C]},this.decodeAndBlitFrameBGRA=function(C,L){var z=this.frameInfo(C),Z=z.width*z.height,ae=new Uint8Array(Z);f4(t,z.data_offset,ae,Z);var ue=z.palette_offset,Q=z.transparent_index;Q===null&&(Q=256);var ce=z.width,me=n-ce,ye=ce,M=4*(z.y*n+z.x),W=4*((z.y+z.height)*n+z.x),X=M,Y=4*me;z.interlaced===!0&&(Y+=4*n*7);for(var ie=8,le=0,xe=ae.length;le<xe;++le){var ee=ae[le];if(ye===0&&(ye=ce,(X+=Y)>=W&&(Y=4*me+4*n*(ie-1),X=M+(ce+me)*(ie<<1),ie>>=1)),ee===Q)X+=4;else{var fe=t[ue+3*ee],ve=t[ue+3*ee+1],Se=t[ue+3*ee+2];L[X++]=Se,L[X++]=ve,L[X++]=fe,L[X++]=255}--ye}},this.decodeAndBlitFrameRGBA=function(C,L){var z=this.frameInfo(C),Z=z.width*z.height,ae=new Uint8Array(Z);f4(t,z.data_offset,ae,Z);var ue=z.palette_offset,Q=z.transparent_index;Q===null&&(Q=256);var ce=z.width,me=n-ce,ye=ce,M=4*(z.y*n+z.x),W=4*((z.y+z.height)*n+z.x),X=M,Y=4*me;z.interlaced===!0&&(Y+=4*n*7);for(var ie=8,le=0,xe=ae.length;le<xe;++le){var ee=ae[le];if(ye===0&&(ye=ce,(X+=Y)>=W&&(Y=4*me+4*n*(ie-1),X=M+(ce+me)*(ie<<1),ie>>=1)),ee===Q)X+=4;else{var fe=t[ue+3*ee],ve=t[ue+3*ee+1],Se=t[ue+3*ee+2];L[X++]=fe,L[X++]=ve,L[X++]=Se,L[X++]=255}--ye}}}function f4(t,e,n,r){for(var s=t[e++],i=1<<s,a=i+1,o=a+1,l=s+1,c=(1<<l)-1,d=0,g=0,y=0,p=t[e++],N=new Int32Array(4096),S=null;;){for(;d<16&&p!==0;)g|=t[e++]<<d,d+=8,p===1?p=t[e++]:--p;if(d<l)break;var I=g&c;if(g>>=l,d-=l,I!==i){if(I===a)break;for(var w=I<o?I:S,T=0,j=w;j>i;)j=N[j]>>8,++T;var D=j;if(y+T+(w!==I?1:0)>r)return void Cn.log("Warning, gif stream longer than expected.");n[y++]=D;var H=y+=T;for(w!==I&&(n[y++]=D),j=w;T--;)j=N[j],n[--H]=255&j,j>>=8;S!==null&&o<4096&&(N[o++]=S<<8|D,o>=c+1&&l<12&&(++l,c=c<<1|1)),S=I}else o=a+1,c=(1<<(l=s+1))-1,S=null}return y!==r&&Cn.log("Warning, gif stream shorter than expected."),n}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function d1(t){var e,n,r,s,i,a=Math.floor,o=new Array(64),l=new Array(64),c=new Array(64),d=new Array(64),g=new Array(65535),y=new Array(65535),p=new Array(64),N=new Array(64),S=[],I=0,w=7,T=new Array(64),j=new Array(64),D=new Array(64),H=new Array(256),J=new Array(2048),O=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],_=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],A=[0,1,2,3,4,5,6,7,8,9,10,11],R=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],E=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],C=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],L=[0,1,2,3,4,5,6,7,8,9,10,11],z=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],Z=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function ae(M,W){for(var X=0,Y=0,ie=new Array,le=1;le<=16;le++){for(var xe=1;xe<=M[le];xe++)ie[W[Y]]=[],ie[W[Y]][0]=X,ie[W[Y]][1]=le,Y++,X++;X*=2}return ie}function ue(M){for(var W=M[0],X=M[1]-1;X>=0;)W&1<<X&&(I|=1<<w),X--,--w<0&&(I==255?(Q(255),Q(0)):Q(I),w=7,I=0)}function Q(M){S.push(M)}function ce(M){Q(M>>8&255),Q(255&M)}function me(M,W,X,Y,ie){for(var le,xe=ie[0],ee=ie[240],fe=function(Ce,Xe){var He,st,Ae,bt,gt,$e,at,Nt,Ye,xt,et=0;for(Ye=0;Ye<8;++Ye){He=Ce[et],st=Ce[et+1],Ae=Ce[et+2],bt=Ce[et+3],gt=Ce[et+4],$e=Ce[et+5],at=Ce[et+6];var Ot=He+(Nt=Ce[et+7]),Ft=He-Nt,Ge=st+at,ft=st-at,kt=Ae+$e,ot=Ae-$e,Pt=bt+gt,Qe=bt-gt,tt=Ot+Pt,It=Ot-Pt,qe=Ge+kt,Ke=Ge-kt;Ce[et]=tt+qe,Ce[et+4]=tt-qe;var ut=.707106781*(Ke+It);Ce[et+2]=It+ut,Ce[et+6]=It-ut;var $n=.382683433*((tt=Qe+ot)-(Ke=ft+Ft)),zt=.5411961*tt+$n,en=1.306562965*Ke+$n,qt=.707106781*(qe=ot+ft),nt=Ft+qt,Ut=Ft-qt;Ce[et+5]=Ut+zt,Ce[et+3]=Ut-zt,Ce[et+1]=nt+en,Ce[et+7]=nt-en,et+=8}for(et=0,Ye=0;Ye<8;++Ye){He=Ce[et],st=Ce[et+8],Ae=Ce[et+16],bt=Ce[et+24],gt=Ce[et+32],$e=Ce[et+40],at=Ce[et+48];var Vn=He+(Nt=Ce[et+56]),En=He-Nt,Nn=st+at,on=st-at,tn=Ae+$e,Gt=Ae-$e,ss=bt+gt,Nr=bt-gt,Bn=Vn+ss,Sr=Vn-ss,Ar=Nn+tn,Er=Nn-tn;Ce[et]=Bn+Ar,Ce[et+32]=Bn-Ar;var hn=.707106781*(Er+Sr);Ce[et+16]=Sr+hn,Ce[et+48]=Sr-hn;var kr=.382683433*((Bn=Nr+Gt)-(Er=on+En)),Dr=.5411961*Bn+kr,Hr=1.306562965*Er+kr,bs=.707106781*(Ar=Gt+on),gi=En+bs,Ra=En-bs;Ce[et+40]=Ra+Dr,Ce[et+24]=Ra-Dr,Ce[et+8]=gi+Hr,Ce[et+56]=gi-Hr,et++}for(Ye=0;Ye<64;++Ye)xt=Ce[Ye]*Xe[Ye],p[Ye]=xt>0?xt+.5|0:xt-.5|0;return p}(M,W),ve=0;ve<64;++ve)N[O[ve]]=fe[ve];var Se=N[0]-X;X=N[0],Se==0?ue(Y[0]):(ue(Y[y[le=32767+Se]]),ue(g[le]));for(var ke=63;ke>0&&N[ke]==0;)ke--;if(ke==0)return ue(xe),X;for(var Ue,V=1;V<=ke;){for(var De=V;N[V]==0&&V<=ke;)++V;var Ze=V-De;if(Ze>=16){Ue=Ze>>4;for(var Ve=1;Ve<=Ue;++Ve)ue(ee);Ze&=15}le=32767+N[V],ue(ie[(Ze<<4)+y[le]]),ue(g[le]),V++}return ke!=63&&ue(xe),X}function ye(M){M=Math.min(Math.max(M,1),100),i!=M&&(function(W){for(var X=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],Y=0;Y<64;Y++){var ie=a((X[Y]*W+50)/100);ie=Math.min(Math.max(ie,1),255),o[O[Y]]=ie}for(var le=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],xe=0;xe<64;xe++){var ee=a((le[xe]*W+50)/100);ee=Math.min(Math.max(ee,1),255),l[O[xe]]=ee}for(var fe=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],ve=0,Se=0;Se<8;Se++)for(var ke=0;ke<8;ke++)c[ve]=1/(o[O[ve]]*fe[Se]*fe[ke]*8),d[ve]=1/(l[O[ve]]*fe[Se]*fe[ke]*8),ve++}(M<50?Math.floor(5e3/M):Math.floor(200-2*M)),i=M)}this.encode=function(M,W){W&&ye(W),S=new Array,I=0,w=7,ce(65496),ce(65504),ce(16),Q(74),Q(70),Q(73),Q(70),Q(0),Q(1),Q(1),Q(0),ce(1),ce(1),Q(0),Q(0),function(){ce(65499),ce(132),Q(0);for(var st=0;st<64;st++)Q(o[st]);Q(1);for(var Ae=0;Ae<64;Ae++)Q(l[Ae])}(),function(st,Ae){ce(65472),ce(17),Q(8),ce(Ae),ce(st),Q(3),Q(1),Q(17),Q(0),Q(2),Q(17),Q(1),Q(3),Q(17),Q(1)}(M.width,M.height),function(){ce(65476),ce(418),Q(0);for(var st=0;st<16;st++)Q(_[st+1]);for(var Ae=0;Ae<=11;Ae++)Q(A[Ae]);Q(16);for(var bt=0;bt<16;bt++)Q(R[bt+1]);for(var gt=0;gt<=161;gt++)Q(E[gt]);Q(1);for(var $e=0;$e<16;$e++)Q(C[$e+1]);for(var at=0;at<=11;at++)Q(L[at]);Q(17);for(var Nt=0;Nt<16;Nt++)Q(z[Nt+1]);for(var Ye=0;Ye<=161;Ye++)Q(Z[Ye])}(),ce(65498),ce(12),Q(3),Q(1),Q(0),Q(2),Q(17),Q(3),Q(17),Q(0),Q(63),Q(0);var X=0,Y=0,ie=0;I=0,w=7,this.encode.displayName="_encode_";for(var le,xe,ee,fe,ve,Se,ke,Ue,V,De=M.data,Ze=M.width,Ve=M.height,Ce=4*Ze,Xe=0;Xe<Ve;){for(le=0;le<Ce;){for(ve=Ce*Xe+le,ke=-1,Ue=0,V=0;V<64;V++)Se=ve+(Ue=V>>3)*Ce+(ke=4*(7&V)),Xe+Ue>=Ve&&(Se-=Ce*(Xe+1+Ue-Ve)),le+ke>=Ce&&(Se-=le+ke-Ce+4),xe=De[Se++],ee=De[Se++],fe=De[Se++],T[V]=(J[xe]+J[ee+256|0]+J[fe+512|0]>>16)-128,j[V]=(J[xe+768|0]+J[ee+1024|0]+J[fe+1280|0]>>16)-128,D[V]=(J[xe+1280|0]+J[ee+1536|0]+J[fe+1792|0]>>16)-128;X=me(T,c,X,e,r),Y=me(j,d,Y,n,s),ie=me(D,d,ie,n,s),le+=32}Xe+=8}if(w>=0){var He=[];He[1]=w+1,He[0]=(1<<w+1)-1,ue(He)}return ce(65497),new Uint8Array(S)},t=t||50,function(){for(var M=String.fromCharCode,W=0;W<256;W++)H[W]=M(W)}(),e=ae(_,A),n=ae(C,L),r=ae(R,E),s=ae(z,Z),function(){for(var M=1,W=2,X=1;X<=15;X++){for(var Y=M;Y<W;Y++)y[32767+Y]=X,g[32767+Y]=[],g[32767+Y][1]=X,g[32767+Y][0]=Y;for(var ie=-(W-1);ie<=-M;ie++)y[32767+ie]=X,g[32767+ie]=[],g[32767+ie][1]=X,g[32767+ie][0]=W-1+ie;M<<=1,W<<=1}}(),function(){for(var M=0;M<256;M++)J[M]=19595*M,J[M+256|0]=38470*M,J[M+512|0]=7471*M+32768,J[M+768|0]=-11059*M,J[M+1024|0]=-21709*M,J[M+1280|0]=32768*M+8421375,J[M+1536|0]=-27439*M,J[M+1792|0]=-5329*M}(),ye(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Wi(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function p4(t){function e(A){if(!A)throw Error("assert :P")}function n(A,R,E){for(var C=0;4>C;C++)if(A[R+C]!=E.charCodeAt(C))return!0;return!1}function r(A,R,E,C,L){for(var z=0;z<L;z++)A[R+z]=E[C+z]}function s(A,R,E,C){for(var L=0;L<C;L++)A[R+L]=E}function i(A){return new Int32Array(A)}function a(A,R){for(var E=[],C=0;C<A;C++)E.push(new R);return E}function o(A,R){var E=[];return function C(L,z,Z){for(var ae=Z[z],ue=0;ue<ae&&(L.push(Z.length>z+1?[]:new R),!(Z.length<z+1));ue++)C(L[ue],z+1,Z)}(E,0,A),E}var l=function(){var A=this;function R(h,m){for(var x=1<<m-1>>>0;h&x;)x>>>=1;return x?(h&x-1)+x:h}function E(h,m,x,k,U){e(!(k%x));do h[m+(k-=x)]=U;while(0<k)}function C(h,m,x,k,U){if(e(2328>=U),512>=U)var B=i(512);else if((B=i(U))==null)return 0;return function(q,$,K,ne,de,_e){var re,he,we=$,Ee=1<<K,be=i(16),Ie=i(16);for(e(de!=0),e(ne!=null),e(q!=null),e(0<K),he=0;he<de;++he){if(15<ne[he])return 0;++be[ne[he]]}if(be[0]==de)return 0;for(Ie[1]=0,re=1;15>re;++re){if(be[re]>1<<re)return 0;Ie[re+1]=Ie[re]+be[re]}for(he=0;he<de;++he)re=ne[he],0<ne[he]&&(_e[Ie[re]++]=he);if(Ie[15]==1)return(ne=new L).g=0,ne.value=_e[0],E(q,we,1,Ee,ne),Ee;var Pe,Me=-1,Re=Ee-1,yt=0,lt=1,Vt=1,pt=1<<K;for(he=0,re=1,de=2;re<=K;++re,de<<=1){if(lt+=Vt<<=1,0>(Vt-=be[re]))return 0;for(;0<be[re];--be[re])(ne=new L).g=re,ne.value=_e[he++],E(q,we+yt,de,pt,ne),yt=R(yt,re)}for(re=K+1,de=2;15>=re;++re,de<<=1){if(lt+=Vt<<=1,0>(Vt-=be[re]))return 0;for(;0<be[re];--be[re]){if(ne=new L,(yt&Re)!=Me){for(we+=pt,Pe=1<<(Me=re)-K;15>Me&&!(0>=(Pe-=be[Me]));)++Me,Pe<<=1;Ee+=pt=1<<(Pe=Me-K),q[$+(Me=yt&Re)].g=Pe+K,q[$+Me].value=we-$-Me}ne.g=re-K,ne.value=_e[he++],E(q,we+(yt>>K),de,pt,ne),yt=R(yt,re)}}return lt!=2*Ie[15]-1?0:Ee}(h,m,x,k,U,B)}function L(){this.value=this.g=0}function z(){this.value=this.g=0}function Z(){this.G=a(5,L),this.H=i(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=a(Hl,z)}function ae(h,m,x,k){e(h!=null),e(m!=null),e(2147483648>k),h.Ca=254,h.I=0,h.b=-8,h.Ka=0,h.oa=m,h.pa=x,h.Jd=m,h.Yc=x+k,h.Zc=4<=k?x+k-4+1:x,xe(h)}function ue(h,m){for(var x=0;0<m--;)x|=fe(h,128)<<m;return x}function Q(h,m){var x=ue(h,m);return ee(h)?-x:x}function ce(h,m,x,k){var U,B=0;for(e(h!=null),e(m!=null),e(4294967288>k),h.Sb=k,h.Ra=0,h.u=0,h.h=0,4<k&&(k=4),U=0;U<k;++U)B+=m[x+U]<<8*U;h.Ra=B,h.bb=k,h.oa=m,h.pa=x}function me(h){for(;8<=h.u&&h.bb<h.Sb;)h.Ra>>>=8,h.Ra+=h.oa[h.pa+h.bb]<<Po-8>>>0,++h.bb,h.u-=8;Y(h)&&(h.h=1,h.u=0)}function ye(h,m){if(e(0<=m),!h.h&&m<=Zs){var x=X(h)&Js[m];return h.u+=m,me(h),x}return h.h=1,h.u=0}function M(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function W(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function X(h){return h.Ra>>>(h.u&Po-1)>>>0}function Y(h){return e(h.bb<=h.Sb),h.h||h.bb==h.Sb&&h.u>Po}function ie(h,m){h.u=m,h.h=Y(h)}function le(h){h.u>=Ba&&(e(h.u>=Ba),me(h))}function xe(h){e(h!=null&&h.oa!=null),h.pa<h.Zc?(h.I=(h.oa[h.pa++]|h.I<<8)>>>0,h.b+=8):(e(h!=null&&h.oa!=null),h.pa<h.Yc?(h.b+=8,h.I=h.oa[h.pa++]|h.I<<8):h.Ka?h.b=0:(h.I<<=8,h.b+=8,h.Ka=1))}function ee(h){return ue(h,1)}function fe(h,m){var x=h.Ca;0>h.b&&xe(h);var k=h.b,U=x*m>>>8,B=(h.I>>>k>U)+0;for(B?(x-=U,h.I-=U+1<<k>>>0):x=U+1,k=x,U=0;256<=k;)U+=8,k>>=8;return k=7^U+jo[k],h.b-=k,h.Ca=(x<<k)-1,B}function ve(h,m,x){h[m+0]=x>>24&255,h[m+1]=x>>16&255,h[m+2]=x>>8&255,h[m+3]=255&x}function Se(h,m){return h[m+0]|h[m+1]<<8}function ke(h,m){return Se(h,m)|h[m+2]<<16}function Ue(h,m){return Se(h,m)|Se(h,m+2)<<16}function V(h,m){var x=1<<m;return e(h!=null),e(0<m),h.X=i(x),h.X==null?0:(h.Mb=32-m,h.Xa=m,1)}function De(h,m){e(h!=null),e(m!=null),e(h.Xa==m.Xa),r(m.X,0,h.X,0,1<<m.Xa)}function Ze(){this.X=[],this.Xa=this.Mb=0}function Ve(h,m,x,k){e(x!=null),e(k!=null);var U=x[0],B=k[0];return U==0&&(U=(h*B+m/2)/m),B==0&&(B=(m*U+h/2)/h),0>=U||0>=B?0:(x[0]=U,k[0]=B,1)}function Ce(h,m){return h+(1<<m)-1>>>m}function Xe(h,m){return((4278255360&h)+(4278255360&m)>>>0&4278255360)+((16711935&h)+(16711935&m)>>>0&16711935)>>>0}function He(h,m){A[m]=function(x,k,U,B,q,$,K){var ne;for(ne=0;ne<q;++ne){var de=A[h]($[K+ne-1],U,B+ne);$[K+ne]=Xe(x[k+ne],de)}}}function st(){this.ud=this.hd=this.jd=0}function Ae(h,m){return((4278124286&(h^m))>>>1)+(h&m)>>>0}function bt(h){return 0<=h&&256>h?h:0>h?0:255<h?255:void 0}function gt(h,m){return bt(h+(h-m+.5>>1))}function $e(h,m,x){return Math.abs(m-x)-Math.abs(h-x)}function at(h,m,x,k,U,B,q){for(k=B[q-1],x=0;x<U;++x)B[q+x]=k=Xe(h[m+x],k)}function Nt(h,m,x,k,U){var B;for(B=0;B<x;++B){var q=h[m+B],$=q>>8&255,K=16711935&(K=(K=16711935&q)+(($<<16)+$));k[U+B]=(4278255360&q)+K>>>0}}function Ye(h,m){m.jd=255&h,m.hd=h>>8&255,m.ud=h>>16&255}function xt(h,m,x,k,U,B){var q;for(q=0;q<k;++q){var $=m[x+q],K=$>>>8,ne=$,de=255&(de=(de=$>>>16)+((h.jd<<24>>24)*(K<<24>>24)>>>5));ne=255&(ne=(ne+=(h.hd<<24>>24)*(K<<24>>24)>>>5)+((h.ud<<24>>24)*(de<<24>>24)>>>5)),U[B+q]=(4278255360&$)+(de<<16)+ne}}function et(h,m,x,k,U){A[m]=function(B,q,$,K,ne,de,_e,re,he){for(K=_e;K<re;++K)for(_e=0;_e<he;++_e)ne[de++]=U($[k(B[q++])])},A[h]=function(B,q,$,K,ne,de,_e){var re=8>>B.b,he=B.Ea,we=B.K[0],Ee=B.w;if(8>re)for(B=(1<<B.b)-1,Ee=(1<<re)-1;q<$;++q){var be,Ie=0;for(be=0;be<he;++be)be&B||(Ie=k(K[ne++])),de[_e++]=U(we[Ie&Ee]),Ie>>=re}else A["VP8LMapColor"+x](K,ne,we,Ee,de,_e,q,$,he)}}function Ot(h,m,x,k,U){for(x=m+x;m<x;){var B=h[m++];k[U++]=B>>16&255,k[U++]=B>>8&255,k[U++]=255&B}}function Ft(h,m,x,k,U){for(x=m+x;m<x;){var B=h[m++];k[U++]=B>>16&255,k[U++]=B>>8&255,k[U++]=255&B,k[U++]=B>>24&255}}function Ge(h,m,x,k,U){for(x=m+x;m<x;){var B=(q=h[m++])>>16&240|q>>12&15,q=240&q|q>>28&15;k[U++]=B,k[U++]=q}}function ft(h,m,x,k,U){for(x=m+x;m<x;){var B=(q=h[m++])>>16&248|q>>13&7,q=q>>5&224|q>>3&31;k[U++]=B,k[U++]=q}}function kt(h,m,x,k,U){for(x=m+x;m<x;){var B=h[m++];k[U++]=255&B,k[U++]=B>>8&255,k[U++]=B>>16&255}}function ot(h,m,x,k,U,B){if(B==0)for(x=m+x;m<x;)ve(k,((B=h[m++])[0]>>24|B[1]>>8&65280|B[2]<<8&16711680|B[3]<<24)>>>0),U+=32;else r(k,U,h,m,x)}function Pt(h,m){A[m][0]=A[h+"0"],A[m][1]=A[h+"1"],A[m][2]=A[h+"2"],A[m][3]=A[h+"3"],A[m][4]=A[h+"4"],A[m][5]=A[h+"5"],A[m][6]=A[h+"6"],A[m][7]=A[h+"7"],A[m][8]=A[h+"8"],A[m][9]=A[h+"9"],A[m][10]=A[h+"10"],A[m][11]=A[h+"11"],A[m][12]=A[h+"12"],A[m][13]=A[h+"13"],A[m][14]=A[h+"0"],A[m][15]=A[h+"0"]}function Qe(h){return h==Mg||h==Fg||h==Tf||h==Ug}function tt(){this.eb=[],this.size=this.A=this.fb=0}function It(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function qe(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new tt,this.f.kb=new It,this.sd=null}function Ke(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function ut(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function $n(h){return alert("todo:WebPSamplerProcessPlane"),h.T}function zt(h,m){var x=h.T,k=m.ba.f.RGBA,U=k.eb,B=k.fb+h.ka*k.A,q=Ti[m.ba.S],$=h.y,K=h.O,ne=h.f,de=h.N,_e=h.ea,re=h.W,he=m.cc,we=m.dc,Ee=m.Mc,be=m.Nc,Ie=h.ka,Pe=h.ka+h.T,Me=h.U,Re=Me+1>>1;for(Ie==0?q($,K,null,null,ne,de,_e,re,ne,de,_e,re,U,B,null,null,Me):(q(m.ec,m.fc,$,K,he,we,Ee,be,ne,de,_e,re,U,B-k.A,U,B,Me),++x);Ie+2<Pe;Ie+=2)he=ne,we=de,Ee=_e,be=re,de+=h.Rc,re+=h.Rc,B+=2*k.A,q($,(K+=2*h.fa)-h.fa,$,K,he,we,Ee,be,ne,de,_e,re,U,B-k.A,U,B,Me);return K+=h.fa,h.j+Pe<h.o?(r(m.ec,m.fc,$,K,Me),r(m.cc,m.dc,ne,de,Re),r(m.Mc,m.Nc,_e,re,Re),x--):1&Pe||q($,K,null,null,ne,de,_e,re,ne,de,_e,re,U,B+k.A,null,null,Me),x}function en(h,m,x){var k=h.F,U=[h.J];if(k!=null){var B=h.U,q=m.ba.S,$=q==kf||q==Tf;m=m.ba.f.RGBA;var K=[0],ne=h.ka;K[0]=h.T,h.Kb&&(ne==0?--K[0]:(--ne,U[0]-=h.width),h.j+h.ka+h.T==h.o&&(K[0]=h.o-h.j-ne));var de=m.eb;ne=m.fb+ne*m.A,h=E5(k,U[0],h.width,B,K,de,ne+($?0:3),m.A),e(x==K),h&&Qe(q)&&_d(de,ne,$,B,K,m.A)}return 0}function qt(h){var m=h.ma,x=m.ba.S,k=11>x,U=x==Af||x==Ef||x==kf||x==Og||x==12||Qe(x);if(m.memory=null,m.Ib=null,m.Jb=null,m.Nd=null,!pd(m.Oa,h,U?11:12))return 0;if(U&&Qe(x)&&Ai(),h.da)alert("todo:use_scaling");else{if(k){if(m.Ib=$n,h.Kb){if(x=h.U+1>>1,m.memory=i(h.U+2*x),m.memory==null)return 0;m.ec=m.memory,m.fc=0,m.cc=m.ec,m.dc=m.fc+h.U,m.Mc=m.cc,m.Nc=m.dc+x,m.Ib=zt,Ai()}}else alert("todo:EmitYUV");U&&(m.Jb=en,k&&Ms())}if(k&&!z5){for(h=0;256>h;++h)Ck[h]=89858*(h-128)+Cf>>If,Lk[h]=-22014*(h-128)+Cf,jk[h]=-45773*(h-128),Pk[h]=113618*(h-128)+Cf>>If;for(h=Sd;h<zg;++h)m=76283*(h-16)+Cf>>If,Rk[h-Sd]=Ds(m,255),Dk[h-Sd]=Ds(m+8>>4,15);z5=1}return 1}function nt(h){var m=h.ma,x=h.U,k=h.T;return e(!(1&h.ka)),0>=x||0>=k?0:(x=m.Ib(h,m),m.Jb!=null&&m.Jb(h,m,x),m.Dc+=x,1)}function Ut(h){h.ma.memory=null}function Vn(h,m,x,k){return ye(h,8)!=47?0:(m[0]=ye(h,14)+1,x[0]=ye(h,14)+1,k[0]=ye(h,1),ye(h,3)!=0?0:!h.h)}function En(h,m){if(4>h)return h+1;var x=h-2>>1;return(2+(1&h)<<x)+ye(m,x)+1}function Nn(h,m){return 120<m?m-120:1<=(x=((x=gk[m-1])>>4)*h+(8-(15&x)))?x:1;var x}function on(h,m,x){var k=X(x),U=h[m+=255&k].g-8;return 0<U&&(ie(x,x.u+8),k=X(x),m+=h[m].value,m+=k&(1<<U)-1),ie(x,x.u+h[m].g),h[m].value}function tn(h,m,x){return x.g+=h.g,x.value+=h.value<<m>>>0,e(8>=x.g),h.g}function Gt(h,m,x){var k=h.xc;return e((m=k==0?0:h.vc[h.md*(x>>k)+(m>>k)])<h.Wb),h.Ya[m]}function ss(h,m,x,k){var U=h.ab,B=h.c*m,q=h.C;m=q+m;var $=x,K=k;for(k=h.Ta,x=h.Ua;0<U--;){var ne=h.gc[U],de=q,_e=m,re=$,he=K,we=(K=k,$=x,ne.Ea);switch(e(de<_e),e(_e<=ne.nc),ne.hc){case 2:cr(re,he,(_e-de)*we,K,$);break;case 0:var Ee=de,be=_e,Ie=K,Pe=$,Me=(pt=ne).Ea;Ee==0&&(gd(re,he,null,null,1,Ie,Pe),at(re,he+1,0,0,Me-1,Ie,Pe+1),he+=Me,Pe+=Me,++Ee);for(var Re=1<<pt.b,yt=Re-1,lt=Ce(Me,pt.b),Vt=pt.K,pt=pt.w+(Ee>>pt.b)*lt;Ee<be;){var Jt=Vt,Cr=pt,Bt=1;for(Wc(re,he,Ie,Pe-Me,1,Ie,Pe);Bt<Me;){var mt=(Bt&~yt)+Re;mt>Me&&(mt=Me),(0,vd[Jt[Cr++]>>8&15])(re,he+ +Bt,Ie,Pe+Bt-Me,mt-Bt,Ie,Pe+Bt),Bt=mt}he+=Me,Pe+=Me,++Ee&yt||(pt+=lt)}_e!=ne.nc&&r(K,$-we,K,$+(_e-de-1)*we,we);break;case 1:for(we=re,be=he,Me=(re=ne.Ea)-(Pe=re&~(Ie=(he=1<<ne.b)-1)),Ee=Ce(re,ne.b),Re=ne.K,ne=ne.w+(de>>ne.b)*Ee;de<_e;){for(yt=Re,lt=ne,Vt=new st,pt=be+Pe,Jt=be+re;be<pt;)Ye(yt[lt++],Vt),xd(Vt,we,be,he,K,$),be+=he,$+=he;be<Jt&&(Ye(yt[lt++],Vt),xd(Vt,we,be,Me,K,$),be+=Me,$+=Me),++de&Ie||(ne+=Ee)}break;case 3:if(re==K&&he==$&&0<ne.b){for(be=K,re=we=$+(_e-de)*we-(Pe=(_e-de)*Ce(ne.Ea,ne.b)),he=K,Ie=$,Ee=[],Pe=(Me=Pe)-1;0<=Pe;--Pe)Ee[Pe]=he[Ie+Pe];for(Pe=Me-1;0<=Pe;--Pe)be[re+Pe]=Ee[Pe];bf(ne,de,_e,K,we,K,$)}else bf(ne,de,_e,re,he,K,$)}$=k,K=x}K!=x&&r(k,x,$,K,B)}function Nr(h,m){var x=h.V,k=h.Ba+h.c*h.C,U=m-h.C;if(e(m<=h.l.o),e(16>=U),0<U){var B=h.l,q=h.Ta,$=h.Ua,K=B.width;if(ss(h,U,x,k),U=$=[$],e((x=h.C)<(k=m)),e(B.v<B.va),k>B.o&&(k=B.o),x<B.j){var ne=B.j-x;x=B.j,U[0]+=ne*K}if(x>=k?x=0:(U[0]+=4*B.v,B.ka=x-B.j,B.U=B.va-B.v,B.T=k-x,x=1),x){if($=$[0],11>(x=h.ca).S){var de=x.f.RGBA,_e=(k=x.S,U=B.U,B=B.T,ne=de.eb,de.A),re=B;for(de=de.fb+h.Ma*de.A;0<re--;){var he=q,we=$,Ee=U,be=ne,Ie=de;switch(k){case Sf:wd(he,we,Ee,be,Ie);break;case Af:Lo(he,we,Ee,be,Ie);break;case Mg:Lo(he,we,Ee,be,Ie),_d(be,Ie,0,Ee,1,0);break;case L5:$l(he,we,Ee,be,Ie);break;case Ef:ot(he,we,Ee,be,Ie,1);break;case Fg:ot(he,we,Ee,be,Ie,1),_d(be,Ie,0,Ee,1,0);break;case kf:ot(he,we,Ee,be,Ie,0);break;case Tf:ot(he,we,Ee,be,Ie,0),_d(be,Ie,1,Ee,1,0);break;case Og:Ro(he,we,Ee,be,Ie);break;case Ug:Ro(he,we,Ee,be,Ie),A5(be,Ie,Ee,1,0);break;case R5:Do(he,we,Ee,be,Ie);break;default:e(0)}$+=K,de+=_e}h.Ma+=B}else alert("todo:EmitRescaledRowsYUVA");e(h.Ma<=x.height)}}h.C=m,e(h.C<=h.i)}function Bn(h){var m;if(0<h.ua)return 0;for(m=0;m<h.Wb;++m){var x=h.Ya[m].G,k=h.Ya[m].H;if(0<x[1][k[1]+0].g||0<x[2][k[2]+0].g||0<x[3][k[3]+0].g)return 0}return 1}function Sr(h,m,x,k,U,B){if(h.Z!=0){var q=h.qd,$=h.rd;for(e(Fo[h.Z]!=null);m<x;++m)Fo[h.Z](q,$,k,U,k,U,B),q=k,$=U,U+=B;h.qd=q,h.rd=$}}function Ar(h,m){var x=h.l.ma,k=x.Z==0||x.Z==1?h.l.j:h.C;if(k=h.C<k?k:h.C,e(m<=h.l.o),m>k){var U=h.l.width,B=x.ca,q=x.tb+U*k,$=h.V,K=h.Ba+h.c*k,ne=h.gc;e(h.ab==1),e(ne[0].hc==3),pa(ne[0],k,m,$,K,B,q),Sr(x,k,m,B,q,U)}h.C=h.Ma=m}function Er(h,m,x,k,U,B,q){var $=h.$/k,K=h.$%k,ne=h.m,de=h.s,_e=x+h.$,re=_e;U=x+k*U;var he=x+k*B,we=280+de.ua,Ee=h.Pb?$:16777216,be=0<de.ua?de.Wa:null,Ie=de.wc,Pe=_e<he?Gt(de,K,$):null;e(h.C<B),e(he<=U);var Me=!1;e:for(;;){for(;Me||_e<he;){var Re=0;if($>=Ee){var yt=_e-x;e((Ee=h).Pb),Ee.wd=Ee.m,Ee.xd=yt,0<Ee.s.ua&&De(Ee.s.Wa,Ee.s.vb),Ee=$+vk}if(K&Ie||(Pe=Gt(de,K,$)),e(Pe!=null),Pe.Qb&&(m[_e]=Pe.qb,Me=!0),!Me)if(le(ne),Pe.jc){Re=ne,yt=m;var lt=_e,Vt=Pe.pd[X(Re)&Hl-1];e(Pe.jc),256>Vt.g?(ie(Re,Re.u+Vt.g),yt[lt]=Vt.value,Re=0):(ie(Re,Re.u+Vt.g-256),e(256<=Vt.value),Re=Vt.value),Re==0&&(Me=!0)}else Re=on(Pe.G[0],Pe.H[0],ne);if(ne.h)break;if(Me||256>Re){if(!Me)if(Pe.nd)m[_e]=(Pe.qb|Re<<8)>>>0;else{if(le(ne),Me=on(Pe.G[1],Pe.H[1],ne),le(ne),yt=on(Pe.G[2],Pe.H[2],ne),lt=on(Pe.G[3],Pe.H[3],ne),ne.h)break;m[_e]=(lt<<24|Me<<16|Re<<8|yt)>>>0}if(Me=!1,++_e,++K>=k&&(K=0,++$,q!=null&&$<=B&&!($%16)&&q(h,$),be!=null))for(;re<_e;)Re=m[re++],be.X[(506832829*Re&4294967295)>>>be.Mb]=Re}else if(280>Re){if(Re=En(Re-256,ne),yt=on(Pe.G[4],Pe.H[4],ne),le(ne),yt=Nn(k,yt=En(yt,ne)),ne.h)break;if(_e-x<yt||U-_e<Re)break e;for(lt=0;lt<Re;++lt)m[_e+lt]=m[_e+lt-yt];for(_e+=Re,K+=Re;K>=k;)K-=k,++$,q!=null&&$<=B&&!($%16)&&q(h,$);if(e(_e<=U),K&Ie&&(Pe=Gt(de,K,$)),be!=null)for(;re<_e;)Re=m[re++],be.X[(506832829*Re&4294967295)>>>be.Mb]=Re}else{if(!(Re<we))break e;for(Me=Re-280,e(be!=null);re<_e;)Re=m[re++],be.X[(506832829*Re&4294967295)>>>be.Mb]=Re;Re=_e,e(!(Me>>>(yt=be).Xa)),m[Re]=yt.X[Me],Me=!0}Me||e(ne.h==Y(ne))}if(h.Pb&&ne.h&&_e<U)e(h.m.h),h.a=5,h.m=h.wd,h.$=h.xd,0<h.s.ua&&De(h.s.vb,h.s.Wa);else{if(ne.h)break e;q!=null&&q(h,$>B?B:$),h.a=0,h.$=_e-x}return 1}return h.a=3,0}function hn(h){e(h!=null),h.vc=null,h.yc=null,h.Ya=null;var m=h.Wa;m!=null&&(m.X=null),h.vb=null,e(h!=null)}function kr(){var h=new St;return h==null?null:(h.a=0,h.xb=M5,Pt("Predictor","VP8LPredictors"),Pt("Predictor","VP8LPredictors_C"),Pt("PredictorAdd","VP8LPredictorsAdd"),Pt("PredictorAdd","VP8LPredictorsAdd_C"),cr=Nt,xd=xt,wd=Ot,Lo=Ft,Ro=Ge,Do=ft,$l=kt,A.VP8LMapColor32b=fa,A.VP8LMapColor8b=yd,h)}function Dr(h,m,x,k,U){var B=1,q=[h],$=[m],K=k.m,ne=k.s,de=null,_e=0;e:for(;;){if(x)for(;B&&ye(K,1);){var re=q,he=$,we=k,Ee=1,be=we.m,Ie=we.gc[we.ab],Pe=ye(be,2);if(we.Oc&1<<Pe)B=0;else{switch(we.Oc|=1<<Pe,Ie.hc=Pe,Ie.Ea=re[0],Ie.nc=he[0],Ie.K=[null],++we.ab,e(4>=we.ab),Pe){case 0:case 1:Ie.b=ye(be,3)+2,Ee=Dr(Ce(Ie.Ea,Ie.b),Ce(Ie.nc,Ie.b),0,we,Ie.K),Ie.K=Ie.K[0];break;case 3:var Me,Re=ye(be,8)+1,yt=16<Re?0:4<Re?1:2<Re?2:3;if(re[0]=Ce(Ie.Ea,yt),Ie.b=yt,Me=Ee=Dr(Re,1,0,we,Ie.K)){var lt,Vt=Re,pt=Ie,Jt=1<<(8>>pt.b),Cr=i(Jt);if(Cr==null)Me=0;else{var Bt=pt.K[0],mt=pt.w;for(Cr[0]=pt.K[0][0],lt=1;lt<1*Vt;++lt)Cr[lt]=Xe(Bt[mt+lt],Cr[lt-1]);for(;lt<4*Jt;++lt)Cr[lt]=0;pt.K[0]=null,pt.K[0]=Cr,Me=1}}Ee=Me;break;case 2:break;default:e(0)}B=Ee}}if(q=q[0],$=$[0],B&&ye(K,1)&&!(B=1<=(_e=ye(K,4))&&11>=_e)){k.a=3;break e}var We;if(We=B)t:{var dr,Mt,nn,Rn=k,Gr=q,Ss=$,rr=_e,as=x,As=Rn.m,Pr=Rn.s,sn=[null],gn=1,sr=0,yn=yk[rr];n:for(;;){if(as&&ye(As,1)){var Kr=ye(As,3)+2,qi=Ce(Gr,Kr),hr=Ce(Ss,Kr),Fs=qi*hr;if(!Dr(qi,hr,0,Rn,sn))break n;for(sn=sn[0],Pr.xc=Kr,dr=0;dr<Fs;++dr){var In=sn[dr]>>8&65535;sn[dr]=In,In>=gn&&(gn=In+1)}}if(As.h)break n;for(Mt=0;5>Mt;++Mt){var jr=D5[Mt];!Mt&&0<rr&&(jr+=1<<rr),sr<jr&&(sr=jr)}var ti=a(gn*yn,L),Es=gn,ni=a(Es,Z);if(ni==null)var ri=null;else e(65536>=Es),ri=ni;var Us=i(sr);if(ri==null||Us==null||ti==null){Rn.a=1;break n}var si=ti;for(dr=nn=0;dr<gn;++dr){var jn=ri[dr],ii=jn.G,Hi=jn.H,Gl=0,Ha=1,Yr=0;for(Mt=0;5>Mt;++Mt){jr=D5[Mt],ii[Mt]=si,Hi[Mt]=nn,!Mt&&0<rr&&(jr+=1<<rr);s:{var jf,qg=jr,Lf=Rn,Ad=Us,Fk=si,Uk=nn,Hg=0,Uo=Lf.m,Vk=ye(Uo,1);if(s(Ad,0,0,qg),Vk){var Bk=ye(Uo,1)+1,zk=ye(Uo,1),$5=ye(Uo,zk==0?1:8);Ad[$5]=1,Bk==2&&(Ad[$5=ye(Uo,8)]=1);var Rf=1}else{var W5=i(19),G5=ye(Uo,4)+4;if(19<G5){Lf.a=3;var Df=0;break s}for(jf=0;jf<G5;++jf)W5[mk[jf]]=ye(Uo,3);var $g=void 0,Ed=void 0,K5=Lf,qk=W5,Of=qg,Y5=Ad,Wg=0,Vo=K5.m,Q5=8,X5=a(128,L);r:for(;C(X5,0,7,qk,19);){if(ye(Vo,1)){var Hk=2+2*ye(Vo,3);if(($g=2+ye(Vo,Hk))>Of)break r}else $g=Of;for(Ed=0;Ed<Of&&$g--;){le(Vo);var J5=X5[0+(127&X(Vo))];ie(Vo,Vo.u+J5.g);var Kc=J5.value;if(16>Kc)Y5[Ed++]=Kc,Kc!=0&&(Q5=Kc);else{var $k=Kc==16,Z5=Kc-16,Wk=fk[Z5],ex=ye(Vo,hk[Z5])+Wk;if(Ed+ex>Of)break r;for(var Gk=$k?Q5:0;0<ex--;)Y5[Ed++]=Gk}}Wg=1;break r}Wg||(K5.a=3),Rf=Wg}(Rf=Rf&&!Uo.h)&&(Hg=C(Fk,Uk,8,Ad,qg)),Rf&&Hg!=0?Df=Hg:(Lf.a=3,Df=0)}if(Df==0)break n;if(Ha&&pk[Mt]==1&&(Ha=si[nn].g==0),Gl+=si[nn].g,nn+=Df,3>=Mt){var kd,Gg=Us[0];for(kd=1;kd<jr;++kd)Us[kd]>Gg&&(Gg=Us[kd]);Yr+=Gg}}if(jn.nd=Ha,jn.Qb=0,Ha&&(jn.qb=(ii[3][Hi[3]+0].value<<24|ii[1][Hi[1]+0].value<<16|ii[2][Hi[2]+0].value)>>>0,Gl==0&&256>ii[0][Hi[0]+0].value&&(jn.Qb=1,jn.qb+=ii[0][Hi[0]+0].value<<8)),jn.jc=!jn.Qb&&6>Yr,jn.jc){var Mf,$a=jn;for(Mf=0;Mf<Hl;++Mf){var Bo=Mf,zo=$a.pd[Bo],Ff=$a.G[0][$a.H[0]+Bo];256<=Ff.value?(zo.g=Ff.g+256,zo.value=Ff.value):(zo.g=0,zo.value=0,Bo>>=tn(Ff,8,zo),Bo>>=tn($a.G[1][$a.H[1]+Bo],16,zo),Bo>>=tn($a.G[2][$a.H[2]+Bo],0,zo),tn($a.G[3][$a.H[3]+Bo],24,zo))}}}Pr.vc=sn,Pr.Wb=gn,Pr.Ya=ri,Pr.yc=ti,We=1;break t}We=0}if(!(B=We)){k.a=3;break e}if(0<_e){if(ne.ua=1<<_e,!V(ne.Wa,_e)){k.a=1,B=0;break e}}else ne.ua=0;var Kg=k,tx=q,Kk=$,Yg=Kg.s,Qg=Yg.xc;if(Kg.c=tx,Kg.i=Kk,Yg.md=Ce(tx,Qg),Yg.wc=Qg==0?-1:(1<<Qg)-1,x){k.xb=Ak;break e}if((de=i(q*$))==null){k.a=1,B=0;break e}B=(B=Er(k,de,0,q,$,$,null))&&!K.h;break e}return B?(U!=null?U[0]=de:(e(de==null),e(x)),k.$=0,x||hn(ne)):hn(ne),B}function Hr(h,m){var x=h.c*h.i,k=x+m+16*m;return e(h.c<=m),h.V=i(k),h.V==null?(h.Ta=null,h.Ua=0,h.a=1,0):(h.Ta=h.V,h.Ua=h.Ba+x+m,1)}function bs(h,m){var x=h.C,k=m-x,U=h.V,B=h.Ba+h.c*x;for(e(m<=h.l.o);0<k;){var q=16<k?16:k,$=h.l.ma,K=h.l.width,ne=K*q,de=$.ca,_e=$.tb+K*x,re=h.Ta,he=h.Ua;ss(h,q,U,B),k5(re,he,de,_e,ne),Sr($,x,x+q,de,_e,K),k-=q,U+=q*h.c,x+=q}e(x==m),h.C=h.Ma=m}function gi(){this.ub=this.yd=this.td=this.Rb=0}function Ra(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function od(){this.Fb=this.Bb=this.Cb=0,this.Zb=i(4),this.Lb=i(4)}function oa(){this.Yb=function(){var h=[];return function m(x,k,U){for(var B=U[k],q=0;q<B&&(x.push(U.length>k+1?[]:0),!(U.length<k+1));q++)m(x[q],k+1,U)}(h,0,[3,11]),h}()}function Ll(){this.jb=i(3),this.Wc=o([4,8],oa),this.Xc=o([4,17],oa)}function _o(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new i(4),this.od=new i(4)}function Or(){this.ld=this.La=this.dd=this.tc=0}function Ys(){this.Na=this.la=0}function No(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Rl(){this.ad=i(384),this.Za=0,this.Ob=i(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Dl(){this.uc=this.M=this.Nb=0,this.wa=Array(new Or),this.Y=0,this.ya=Array(new Rl),this.aa=0,this.l=new la}function Ol(){this.y=i(16),this.f=i(8),this.ea=i(8)}function Ml(){this.cb=this.a=0,this.sc="",this.m=new M,this.Od=new gi,this.Kc=new Ra,this.ed=new _o,this.Qa=new od,this.Ic=this.$c=this.Aa=0,this.D=new Dl,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=a(8,M),this.ia=0,this.pb=a(4,No),this.Pa=new Ll,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Ol),this.Hd=0,this.rb=Array(new Ys),this.sb=0,this.wa=Array(new Or),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Rl),this.L=this.aa=0,this.gd=o([4,2],Or),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Ds(h,m){return 0>h?0:h>m?m:h}function la(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Fc(){var h=new Ml;return h!=null&&(h.a=0,h.sc="OK",h.cb=0,h.Xb=0,Nd||(Nd=Da)),h}function Wn(h,m,x){return h.a==0&&(h.a=m,h.sc=x,h.cb=0),0}function Uc(h,m,x){return 3<=x&&h[m+0]==157&&h[m+1]==1&&h[m+2]==42}function yi(h,m){if(h==null)return 0;if(h.a=0,h.sc="OK",m==null)return Wn(h,2,"null VP8Io passed to VP8GetHeaders()");var x=m.data,k=m.w,U=m.ha;if(4>U)return Wn(h,7,"Truncated header.");var B=x[k+0]|x[k+1]<<8|x[k+2]<<16,q=h.Od;if(q.Rb=!(1&B),q.td=B>>1&7,q.yd=B>>4&1,q.ub=B>>5,3<q.td)return Wn(h,3,"Incorrect keyframe parameters.");if(!q.yd)return Wn(h,4,"Frame not displayable.");k+=3,U-=3;var $=h.Kc;if(q.Rb){if(7>U)return Wn(h,7,"cannot parse picture header");if(!Uc(x,k,U))return Wn(h,3,"Bad code word");$.c=16383&(x[k+4]<<8|x[k+3]),$.Td=x[k+4]>>6,$.i=16383&(x[k+6]<<8|x[k+5]),$.Ud=x[k+6]>>6,k+=7,U-=7,h.za=$.c+15>>4,h.Ub=$.i+15>>4,m.width=$.c,m.height=$.i,m.Da=0,m.j=0,m.v=0,m.va=m.width,m.o=m.height,m.da=0,m.ib=m.width,m.hb=m.height,m.U=m.width,m.T=m.height,s((B=h.Pa).jb,0,255,B.jb.length),e((B=h.Qa)!=null),B.Cb=0,B.Bb=0,B.Fb=1,s(B.Zb,0,0,B.Zb.length),s(B.Lb,0,0,B.Lb)}if(q.ub>U)return Wn(h,7,"bad partition length");ae(B=h.m,x,k,q.ub),k+=q.ub,U-=q.ub,q.Rb&&($.Ld=ee(B),$.Kd=ee(B)),$=h.Qa;var K,ne=h.Pa;if(e(B!=null),e($!=null),$.Cb=ee(B),$.Cb){if($.Bb=ee(B),ee(B)){for($.Fb=ee(B),K=0;4>K;++K)$.Zb[K]=ee(B)?Q(B,7):0;for(K=0;4>K;++K)$.Lb[K]=ee(B)?Q(B,6):0}if($.Bb)for(K=0;3>K;++K)ne.jb[K]=ee(B)?ue(B,8):255}else $.Bb=0;if(B.Ka)return Wn(h,3,"cannot parse segment header");if(($=h.ed).zd=ee(B),$.Tb=ue(B,6),$.wb=ue(B,3),$.Pc=ee(B),$.Pc&&ee(B)){for(ne=0;4>ne;++ne)ee(B)&&($.vd[ne]=Q(B,6));for(ne=0;4>ne;++ne)ee(B)&&($.od[ne]=Q(B,6))}if(h.L=$.Tb==0?0:$.zd?1:2,B.Ka)return Wn(h,3,"cannot parse filter header");var de=U;if(U=K=k,k=K+de,$=de,h.Xb=(1<<ue(h.m,2))-1,de<3*(ne=h.Xb))x=7;else{for(K+=3*ne,$-=3*ne,de=0;de<ne;++de){var _e=x[U+0]|x[U+1]<<8|x[U+2]<<16;_e>$&&(_e=$),ae(h.Jc[+de],x,K,_e),K+=_e,$-=_e,U+=3}ae(h.Jc[+ne],x,K,$),x=K<k?0:5}if(x!=0)return Wn(h,x,"cannot parse partitions");for(x=ue(K=h.m,7),U=ee(K)?Q(K,4):0,k=ee(K)?Q(K,4):0,$=ee(K)?Q(K,4):0,ne=ee(K)?Q(K,4):0,K=ee(K)?Q(K,4):0,de=h.Qa,_e=0;4>_e;++_e){if(de.Cb){var re=de.Zb[_e];de.Fb||(re+=x)}else{if(0<_e){h.pb[_e]=h.pb[0];continue}re=x}var he=h.pb[_e];he.Sc[0]=Vg[Ds(re+U,127)],he.Sc[1]=Bg[Ds(re+0,127)],he.Eb[0]=2*Vg[Ds(re+k,127)],he.Eb[1]=101581*Bg[Ds(re+$,127)]>>16,8>he.Eb[1]&&(he.Eb[1]=8),he.Qc[0]=Vg[Ds(re+ne,117)],he.Qc[1]=Bg[Ds(re+K,127)],he.lc=re+K}if(!q.Rb)return Wn(h,4,"Not a key frame.");for(ee(B),q=h.Pa,x=0;4>x;++x){for(U=0;8>U;++U)for(k=0;3>k;++k)for($=0;11>$;++$)ne=fe(B,Nk[x][U][k][$])?ue(B,8):bk[x][U][k][$],q.Wc[x][U].Yb[k][$]=ne;for(U=0;17>U;++U)q.Xc[x][U]=q.Wc[x][Sk[U]]}return h.kc=ee(B),h.kc&&(h.Bd=ue(B,8)),h.cb=1}function Da(h,m,x,k,U,B,q){var $=m[U].Yb[x];for(x=0;16>U;++U){if(!fe(h,$[x+0]))return U;for(;!fe(h,$[x+1]);)if($=m[++U].Yb[0],x=0,U==16)return 16;var K=m[U+1].Yb;if(fe(h,$[x+2])){var ne=h,de=0;if(fe(ne,(re=$)[(_e=x)+3]))if(fe(ne,re[_e+6])){for($=0,_e=2*(de=fe(ne,re[_e+8]))+(re=fe(ne,re[_e+9+de])),de=0,re=xk[_e];re[$];++$)de+=de+fe(ne,re[$]);de+=3+(8<<_e)}else fe(ne,re[_e+7])?(de=7+2*fe(ne,165),de+=fe(ne,145)):de=5+fe(ne,159);else de=fe(ne,re[_e+4])?3+fe(ne,re[_e+5]):2;$=K[2]}else de=1,$=K[1];K=q+wk[U],0>(ne=h).b&&xe(ne);var _e,re=ne.b,he=(_e=ne.Ca>>1)-(ne.I>>re)>>31;--ne.b,ne.Ca+=he,ne.Ca|=1,ne.I-=(_e+1&he)<<re,B[K]=((de^he)-he)*k[(0<U)+0]}return 16}function Fl(h){var m=h.rb[h.sb-1];m.la=0,m.Na=0,s(h.zc,0,0,h.zc.length),h.ja=0}function Os(h,m,x,k,U){U=h[m+x+32*k]+(U>>3),h[m+x+32*k]=-256&U?0>U?0:255:U}function kn(h,m,x,k,U,B){Os(h,m,0,x,k+U),Os(h,m,1,x,k+B),Os(h,m,2,x,k-B),Os(h,m,3,x,k-U)}function Tr(h){return(20091*h>>16)+h}function Oa(h,m,x,k){var U,B=0,q=i(16);for(U=0;4>U;++U){var $=h[m+0]+h[m+8],K=h[m+0]-h[m+8],ne=(35468*h[m+4]>>16)-Tr(h[m+12]),de=Tr(h[m+4])+(35468*h[m+12]>>16);q[B+0]=$+de,q[B+1]=K+ne,q[B+2]=K-ne,q[B+3]=$-de,B+=4,m++}for(U=B=0;4>U;++U)$=(h=q[B+0]+4)+q[B+8],K=h-q[B+8],ne=(35468*q[B+4]>>16)-Tr(q[B+12]),Os(x,k,0,0,$+(de=Tr(q[B+4])+(35468*q[B+12]>>16))),Os(x,k,1,0,K+ne),Os(x,k,2,0,K-ne),Os(x,k,3,0,$-de),B++,k+=32}function So(h,m,x,k){var U=h[m+0]+4,B=35468*h[m+4]>>16,q=Tr(h[m+4]),$=35468*h[m+1]>>16;kn(x,k,0,U+q,h=Tr(h[m+1]),$),kn(x,k,1,U+B,h,$),kn(x,k,2,U-B,h,$),kn(x,k,3,U-q,h,$)}function Vc(h,m,x,k,U){Oa(h,m,x,k),U&&Oa(h,m+16,x,k+4)}function Kt(h,m,x,k){Wl(h,m+0,x,k,1),Wl(h,m+32,x,k+128,1)}function Ma(h,m,x,k){var U;for(h=h[m+0]+4,U=0;4>U;++U)for(m=0;4>m;++m)Os(x,k,m,U,h)}function ca(h,m,x,k){h[m+0]&&fn(h,m+0,x,k),h[m+16]&&fn(h,m+16,x,k+4),h[m+32]&&fn(h,m+32,x,k+128),h[m+48]&&fn(h,m+48,x,k+128+4)}function vi(h,m,x,k){var U,B=i(16);for(U=0;4>U;++U){var q=h[m+0+U]+h[m+12+U],$=h[m+4+U]+h[m+8+U],K=h[m+4+U]-h[m+8+U],ne=h[m+0+U]-h[m+12+U];B[0+U]=q+$,B[8+U]=q-$,B[4+U]=ne+K,B[12+U]=ne-K}for(U=0;4>U;++U)q=(h=B[0+4*U]+3)+B[3+4*U],$=B[1+4*U]+B[2+4*U],K=B[1+4*U]-B[2+4*U],ne=h-B[3+4*U],x[k+0]=q+$>>3,x[k+16]=ne+K>>3,x[k+32]=q-$>>3,x[k+48]=ne-K>>3,k+=64}function Fa(h,m,x){var k,U=m-32,B=ei,q=255-h[U-1];for(k=0;k<x;++k){var $,K=B,ne=q+h[m-1];for($=0;$<x;++$)h[m+$]=K[ne+h[U+$]];m+=32}}function Bc(h,m){Fa(h,m,4)}function ld(h,m){Fa(h,m,8)}function cd(h,m){Fa(h,m,16)}function Ul(h,m){var x;for(x=0;16>x;++x)r(h,m+32*x,h,m-32,16)}function zc(h,m){var x;for(x=16;0<x;--x)s(h,m,h[m-1],16),m+=32}function $r(h,m,x){var k;for(k=0;16>k;++k)s(m,x+32*k,h,16)}function xi(h,m){var x,k=16;for(x=0;16>x;++x)k+=h[m-1+32*x]+h[m+x-32];$r(k>>5,h,m)}function ua(h,m){var x,k=8;for(x=0;16>x;++x)k+=h[m-1+32*x];$r(k>>4,h,m)}function Ao(h,m){var x,k=8;for(x=0;16>x;++x)k+=h[m+x-32];$r(k>>4,h,m)}function qc(h,m){$r(128,h,m)}function _t(h,m,x){return h+2*m+x+2>>2}function ud(h,m){var x,k=m-32;for(k=new Uint8Array([_t(h[k-1],h[k+0],h[k+1]),_t(h[k+0],h[k+1],h[k+2]),_t(h[k+1],h[k+2],h[k+3]),_t(h[k+2],h[k+3],h[k+4])]),x=0;4>x;++x)r(h,m+32*x,k,0,k.length)}function dd(h,m){var x=h[m-1],k=h[m-1+32],U=h[m-1+64],B=h[m-1+96];ve(h,m+0,16843009*_t(h[m-1-32],x,k)),ve(h,m+32,16843009*_t(x,k,U)),ve(h,m+64,16843009*_t(k,U,B)),ve(h,m+96,16843009*_t(U,B,B))}function hd(h,m){var x,k=4;for(x=0;4>x;++x)k+=h[m+x-32]+h[m-1+32*x];for(k>>=3,x=0;4>x;++x)s(h,m+32*x,k,4)}function Mr(h,m){var x=h[m-1+0],k=h[m-1+32],U=h[m-1+64],B=h[m-1-32],q=h[m+0-32],$=h[m+1-32],K=h[m+2-32],ne=h[m+3-32];h[m+0+96]=_t(k,U,h[m-1+96]),h[m+1+96]=h[m+0+64]=_t(x,k,U),h[m+2+96]=h[m+1+64]=h[m+0+32]=_t(B,x,k),h[m+3+96]=h[m+2+64]=h[m+1+32]=h[m+0+0]=_t(q,B,x),h[m+3+64]=h[m+2+32]=h[m+1+0]=_t($,q,B),h[m+3+32]=h[m+2+0]=_t(K,$,q),h[m+3+0]=_t(ne,K,$)}function Ui(h,m){var x=h[m+1-32],k=h[m+2-32],U=h[m+3-32],B=h[m+4-32],q=h[m+5-32],$=h[m+6-32],K=h[m+7-32];h[m+0+0]=_t(h[m+0-32],x,k),h[m+1+0]=h[m+0+32]=_t(x,k,U),h[m+2+0]=h[m+1+32]=h[m+0+64]=_t(k,U,B),h[m+3+0]=h[m+2+32]=h[m+1+64]=h[m+0+96]=_t(U,B,q),h[m+3+32]=h[m+2+64]=h[m+1+96]=_t(B,q,$),h[m+3+64]=h[m+2+96]=_t(q,$,K),h[m+3+96]=_t($,K,K)}function fd(h,m){var x=h[m-1+0],k=h[m-1+32],U=h[m-1+64],B=h[m-1-32],q=h[m+0-32],$=h[m+1-32],K=h[m+2-32],ne=h[m+3-32];h[m+0+0]=h[m+1+64]=B+q+1>>1,h[m+1+0]=h[m+2+64]=q+$+1>>1,h[m+2+0]=h[m+3+64]=$+K+1>>1,h[m+3+0]=K+ne+1>>1,h[m+0+96]=_t(U,k,x),h[m+0+64]=_t(k,x,B),h[m+0+32]=h[m+1+96]=_t(x,B,q),h[m+1+32]=h[m+2+96]=_t(B,q,$),h[m+2+32]=h[m+3+96]=_t(q,$,K),h[m+3+32]=_t($,K,ne)}function Eo(h,m){var x=h[m+0-32],k=h[m+1-32],U=h[m+2-32],B=h[m+3-32],q=h[m+4-32],$=h[m+5-32],K=h[m+6-32],ne=h[m+7-32];h[m+0+0]=x+k+1>>1,h[m+1+0]=h[m+0+64]=k+U+1>>1,h[m+2+0]=h[m+1+64]=U+B+1>>1,h[m+3+0]=h[m+2+64]=B+q+1>>1,h[m+0+32]=_t(x,k,U),h[m+1+32]=h[m+0+96]=_t(k,U,B),h[m+2+32]=h[m+1+96]=_t(U,B,q),h[m+3+32]=h[m+2+96]=_t(B,q,$),h[m+3+64]=_t(q,$,K),h[m+3+96]=_t($,K,ne)}function Vi(h,m){var x=h[m-1+0],k=h[m-1+32],U=h[m-1+64],B=h[m-1+96];h[m+0+0]=x+k+1>>1,h[m+2+0]=h[m+0+32]=k+U+1>>1,h[m+2+32]=h[m+0+64]=U+B+1>>1,h[m+1+0]=_t(x,k,U),h[m+3+0]=h[m+1+32]=_t(k,U,B),h[m+3+32]=h[m+1+64]=_t(U,B,B),h[m+3+64]=h[m+2+64]=h[m+0+96]=h[m+1+96]=h[m+2+96]=h[m+3+96]=B}function ko(h,m){var x=h[m-1+0],k=h[m-1+32],U=h[m-1+64],B=h[m-1+96],q=h[m-1-32],$=h[m+0-32],K=h[m+1-32],ne=h[m+2-32];h[m+0+0]=h[m+2+32]=x+q+1>>1,h[m+0+32]=h[m+2+64]=k+x+1>>1,h[m+0+64]=h[m+2+96]=U+k+1>>1,h[m+0+96]=B+U+1>>1,h[m+3+0]=_t($,K,ne),h[m+2+0]=_t(q,$,K),h[m+1+0]=h[m+3+32]=_t(x,q,$),h[m+1+32]=h[m+3+64]=_t(k,x,q),h[m+1+64]=h[m+3+96]=_t(U,k,x),h[m+1+96]=_t(B,U,k)}function Qs(h,m){var x;for(x=0;8>x;++x)r(h,m+32*x,h,m-32,8)}function Ua(h,m){var x;for(x=0;8>x;++x)s(h,m,h[m-1],8),m+=32}function wi(h,m,x){var k;for(k=0;8>k;++k)s(m,x+32*k,h,8)}function Vl(h,m){var x,k=8;for(x=0;8>x;++x)k+=h[m+x-32]+h[m-1+32*x];wi(k>>4,h,m)}function Sn(h,m){var x,k=4;for(x=0;8>x;++x)k+=h[m+x-32];wi(k>>3,h,m)}function Bl(h,m){var x,k=4;for(x=0;8>x;++x)k+=h[m-1+32*x];wi(k>>3,h,m)}function Hc(h,m){wi(128,h,m)}function bi(h,m,x){var k=h[m-x],U=h[m+0],B=3*(U-k)+Dg[1020+h[m-2*x]-h[m+x]],q=Nf[112+(B+4>>3)];h[m-x]=ei[255+k+Nf[112+(B+3>>3)]],h[m+0]=ei[255+U-q]}function To(h,m,x,k){var U=h[m+0],B=h[m+x];return ki[255+h[m-2*x]-h[m-x]]>k||ki[255+B-U]>k}function Va(h,m,x,k){return 4*ki[255+h[m-x]-h[m+0]]+ki[255+h[m-2*x]-h[m+x]]<=k}function da(h,m,x,k,U){var B=h[m-3*x],q=h[m-2*x],$=h[m-x],K=h[m+0],ne=h[m+x],de=h[m+2*x],_e=h[m+3*x];return 4*ki[255+$-K]+ki[255+q-ne]>k?0:ki[255+h[m-4*x]-B]<=U&&ki[255+B-q]<=U&&ki[255+q-$]<=U&&ki[255+_e-de]<=U&&ki[255+de-ne]<=U&&ki[255+ne-K]<=U}function ha(h,m,x,k){var U=2*k+1;for(k=0;16>k;++k)Va(h,m+k,x,U)&&bi(h,m+k,x)}function _s(h,m,x,k){var U=2*k+1;for(k=0;16>k;++k)Va(h,m+k*x,1,U)&&bi(h,m+k*x,1)}function zl(h,m,x,k){var U;for(U=3;0<U;--U)ha(h,m+=4*x,x,k)}function $c(h,m,x,k){var U;for(U=3;0<U;--U)_s(h,m+=4,x,k)}function Ns(h,m,x,k,U,B,q,$){for(B=2*B+1;0<U--;){if(da(h,m,x,B,q))if(To(h,m,x,$))bi(h,m,x);else{var K=h,ne=m,de=x,_e=K[ne-2*de],re=K[ne-de],he=K[ne+0],we=K[ne+de],Ee=K[ne+2*de],be=27*(Pe=Dg[1020+3*(he-re)+Dg[1020+_e-we]])+63>>7,Ie=18*Pe+63>>7,Pe=9*Pe+63>>7;K[ne-3*de]=ei[255+K[ne-3*de]+Pe],K[ne-2*de]=ei[255+_e+Ie],K[ne-de]=ei[255+re+be],K[ne+0]=ei[255+he-be],K[ne+de]=ei[255+we-Ie],K[ne+2*de]=ei[255+Ee-Pe]}m+=k}}function _i(h,m,x,k,U,B,q,$){for(B=2*B+1;0<U--;){if(da(h,m,x,B,q))if(To(h,m,x,$))bi(h,m,x);else{var K=h,ne=m,de=x,_e=K[ne-de],re=K[ne+0],he=K[ne+de],we=Nf[112+(4+(Ee=3*(re-_e))>>3)],Ee=Nf[112+(Ee+3>>3)],be=we+1>>1;K[ne-2*de]=ei[255+K[ne-2*de]+be],K[ne-de]=ei[255+_e+Ee],K[ne+0]=ei[255+re-we],K[ne+de]=ei[255+he-be]}m+=k}}function Io(h,m,x,k,U,B){Ns(h,m,x,1,16,k,U,B)}function Ni(h,m,x,k,U,B){Ns(h,m,1,x,16,k,U,B)}function ql(h,m,x,k,U,B){var q;for(q=3;0<q;--q)_i(h,m+=4*x,x,1,16,k,U,B)}function v(h,m,x,k,U,B){var q;for(q=3;0<q;--q)_i(h,m+=4,1,x,16,k,U,B)}function F(h,m,x,k,U,B,q,$){Ns(h,m,U,1,8,B,q,$),Ns(x,k,U,1,8,B,q,$)}function te(h,m,x,k,U,B,q,$){Ns(h,m,1,U,8,B,q,$),Ns(x,k,1,U,8,B,q,$)}function oe(h,m,x,k,U,B,q,$){_i(h,m+4*U,U,1,8,B,q,$),_i(x,k+4*U,U,1,8,B,q,$)}function pe(h,m,x,k,U,B,q,$){_i(h,m+4,1,U,8,B,q,$),_i(x,k+4,1,U,8,B,q,$)}function Te(){this.ba=new qe,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new ut,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Le(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function rt(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function dt(){this.ua=0,this.Wa=new Ze,this.vb=new Ze,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new Z,this.yc=new L}function St(){this.xb=this.a=0,this.l=new la,this.ca=new qe,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new W,this.Pb=0,this.wd=new W,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new dt,this.ab=0,this.gc=a(4,rt),this.Oc=0}function jt(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new la,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Yt(h,m,x,k,U,B,q){for(h=h==null?0:h[m+0],m=0;m<q;++m)U[B+m]=h+x[k+m]&255,h=U[B+m]}function dn(h,m,x,k,U,B,q){var $;if(h==null)Yt(null,null,x,k,U,B,q);else for($=0;$<q;++$)U[B+$]=h[m+$]+x[k+$]&255}function Gn(h,m,x,k,U,B,q){if(h==null)Yt(null,null,x,k,U,B,q);else{var $,K=h[m+0],ne=K,de=K;for($=0;$<q;++$)ne=de+(K=h[m+$])-ne,de=x[k+$]+(-256&ne?0>ne?0:255:ne)&255,ne=K,U[B+$]=de}}function mn(h,m,x,k){var U=m.width,B=m.o;if(e(h!=null&&m!=null),0>x||0>=k||x+k>B)return null;if(!h.Cc){if(h.ga==null){var q;if(h.ga=new jt,(q=h.ga==null)||(q=m.width*m.o,e(h.Gb.length==0),h.Gb=i(q),h.Uc=0,h.Gb==null?q=0:(h.mb=h.Gb,h.nb=h.Uc,h.rc=null,q=1),q=!q),!q){q=h.ga;var $=h.Fa,K=h.P,ne=h.qc,de=h.mb,_e=h.nb,re=K+1,he=ne-1,we=q.l;if(e($!=null&&de!=null&&m!=null),Fo[0]=null,Fo[1]=Yt,Fo[2]=dn,Fo[3]=Gn,q.ca=de,q.tb=_e,q.c=m.width,q.i=m.height,e(0<q.c&&0<q.i),1>=ne)m=0;else if(q.$a=3&$[K+0],q.Z=$[K+0]>>2&3,q.Lc=$[K+0]>>4&3,K=$[K+0]>>6&3,0>q.$a||1<q.$a||4<=q.Z||1<q.Lc||K)m=0;else if(we.put=nt,we.ac=qt,we.bc=Ut,we.ma=q,we.width=m.width,we.height=m.height,we.Da=m.Da,we.v=m.v,we.va=m.va,we.j=m.j,we.o=m.o,q.$a)e:{e(q.$a==1),m=kr();t:for(;;){if(m==null){m=0;break e}if(e(q!=null),q.mc=m,m.c=q.c,m.i=q.i,m.l=q.l,m.l.ma=q,m.l.width=q.c,m.l.height=q.i,m.a=0,ce(m.m,$,re,he),!Dr(q.c,q.i,1,m,null)||(m.ab==1&&m.gc[0].hc==3&&Bn(m.s)?(q.ic=1,$=m.c*m.i,m.Ta=null,m.Ua=0,m.V=i($),m.Ba=0,m.V==null?(m.a=1,m=0):m=1):(q.ic=0,m=Hr(m,q.c)),!m))break t;m=1;break e}q.mc=null,m=0}else m=he>=q.c*q.i;q=!m}if(q)return null;h.ga.Lc!=1?h.Ga=0:k=B-x}e(h.ga!=null),e(x+k<=B);e:{if(m=($=h.ga).c,B=$.l.o,$.$a==0){if(re=h.rc,he=h.Vc,we=h.Fa,K=h.P+1+x*m,ne=h.mb,de=h.nb+x*m,e(K<=h.P+h.qc),$.Z!=0)for(e(Fo[$.Z]!=null),q=0;q<k;++q)Fo[$.Z](re,he,we,K,ne,de,m),re=ne,he=de,de+=m,K+=m;else for(q=0;q<k;++q)r(ne,de,we,K,m),re=ne,he=de,de+=m,K+=m;h.rc=re,h.Vc=he}else{if(e($.mc!=null),m=x+k,e((q=$.mc)!=null),e(m<=q.i),q.C>=m)m=1;else if($.ic||Ms(),$.ic){$=q.V,re=q.Ba,he=q.c;var Ee=q.i,be=(we=1,K=q.$/he,ne=q.$%he,de=q.m,_e=q.s,q.$),Ie=he*Ee,Pe=he*m,Me=_e.wc,Re=be<Pe?Gt(_e,ne,K):null;e(be<=Ie),e(m<=Ee),e(Bn(_e));t:for(;;){for(;!de.h&&be<Pe;){if(ne&Me||(Re=Gt(_e,ne,K)),e(Re!=null),le(de),256>(Ee=on(Re.G[0],Re.H[0],de)))$[re+be]=Ee,++be,++ne>=he&&(ne=0,++K<=m&&!(K%16)&&Ar(q,K));else{if(!(280>Ee)){we=0;break t}Ee=En(Ee-256,de);var yt,lt=on(Re.G[4],Re.H[4],de);if(le(de),!(be>=(lt=Nn(he,lt=En(lt,de)))&&Ie-be>=Ee)){we=0;break t}for(yt=0;yt<Ee;++yt)$[re+be+yt]=$[re+be+yt-lt];for(be+=Ee,ne+=Ee;ne>=he;)ne-=he,++K<=m&&!(K%16)&&Ar(q,K);be<Pe&&ne&Me&&(Re=Gt(_e,ne,K))}e(de.h==Y(de))}Ar(q,K>m?m:K);break t}!we||de.h&&be<Ie?(we=0,q.a=de.h?5:3):q.$=be,m=we}else m=Er(q,q.V,q.Ba,q.c,q.i,m,bs);if(!m){k=0;break e}}x+k>=B&&(h.Cc=1),k=1}if(!k)return null;if(h.Cc&&((k=h.ga)!=null&&(k.mc=null),h.ga=null,0<h.Ga))return alert("todo:WebPDequantizeLevels"),null}return h.nb+x*U}function tr(h,m,x,k,U,B){for(;0<U--;){var q,$=h,K=m+(x?1:0),ne=h,de=m+(x?0:3);for(q=0;q<k;++q){var _e=ne[de+4*q];_e!=255&&(_e*=32897,$[K+4*q+0]=$[K+4*q+0]*_e>>23,$[K+4*q+1]=$[K+4*q+1]*_e>>23,$[K+4*q+2]=$[K+4*q+2]*_e>>23)}m+=B}}function Kn(h,m,x,k,U){for(;0<k--;){var B;for(B=0;B<x;++B){var q=h[m+2*B+0],$=15&(ne=h[m+2*B+1]),K=4369*$,ne=(240&ne|ne>>4)*K>>16;h[m+2*B+0]=(240&q|q>>4)*K>>16&240|(15&q|q<<4)*K>>16>>4&15,h[m+2*B+1]=240&ne|$}m+=U}}function nr(h,m,x,k,U,B,q,$){var K,ne,de=255;for(ne=0;ne<U;++ne){for(K=0;K<k;++K){var _e=h[m+K];B[q+4*K]=_e,de&=_e}m+=x,q+=$}return de!=255}function Yn(h,m,x,k,U){var B;for(B=0;B<U;++B)x[k+B]=h[m+B]>>8}function Ms(){_d=tr,A5=Kn,E5=nr,k5=Yn}function Si(h,m,x){A[h]=function(k,U,B,q,$,K,ne,de,_e,re,he,we,Ee,be,Ie,Pe,Me){var Re,yt=Me-1>>1,lt=$[K+0]|ne[de+0]<<16,Vt=_e[re+0]|he[we+0]<<16;e(k!=null);var pt=3*lt+Vt+131074>>2;for(m(k[U+0],255&pt,pt>>16,Ee,be),B!=null&&(pt=3*Vt+lt+131074>>2,m(B[q+0],255&pt,pt>>16,Ie,Pe)),Re=1;Re<=yt;++Re){var Jt=$[K+Re]|ne[de+Re]<<16,Cr=_e[re+Re]|he[we+Re]<<16,Bt=lt+Jt+Vt+Cr+524296,mt=Bt+2*(Jt+Vt)>>3;pt=mt+lt>>1,lt=(Bt=Bt+2*(lt+Cr)>>3)+Jt>>1,m(k[U+2*Re-1],255&pt,pt>>16,Ee,be+(2*Re-1)*x),m(k[U+2*Re-0],255&lt,lt>>16,Ee,be+(2*Re-0)*x),B!=null&&(pt=Bt+Vt>>1,lt=mt+Cr>>1,m(B[q+2*Re-1],255&pt,pt>>16,Ie,Pe+(2*Re-1)*x),m(B[q+2*Re+0],255&lt,lt>>16,Ie,Pe+(2*Re+0)*x)),lt=Jt,Vt=Cr}1&Me||(pt=3*lt+Vt+131074>>2,m(k[U+Me-1],255&pt,pt>>16,Ee,be+(Me-1)*x),B!=null&&(pt=3*Vt+lt+131074>>2,m(B[q+Me-1],255&pt,pt>>16,Ie,Pe+(Me-1)*x)))}}function Ai(){Ti[Sf]=Ek,Ti[Af]=F5,Ti[L5]=kk,Ti[Ef]=U5,Ti[kf]=V5,Ti[Og]=B5,Ti[R5]=Tk,Ti[Mg]=F5,Ti[Fg]=U5,Ti[Tf]=V5,Ti[Ug]=B5}function f(h){return h&-16384?0>h?0:255:h>>Ik}function b(h,m){return f((19077*h>>8)+(26149*m>>8)-14234)}function P(h,m,x){return f((19077*h>>8)-(6419*m>>8)-(13320*x>>8)+8708)}function G(h,m){return f((19077*h>>8)+(33050*m>>8)-17685)}function ge(h,m,x,k,U){k[U+0]=b(h,x),k[U+1]=P(h,m,x),k[U+2]=G(h,m)}function Ne(h,m,x,k,U){k[U+0]=G(h,m),k[U+1]=P(h,m,x),k[U+2]=b(h,x)}function Be(h,m,x,k,U){var B=P(h,m,x);m=B<<3&224|G(h,m)>>3,k[U+0]=248&b(h,x)|B>>5,k[U+1]=m}function Xt(h,m,x,k,U){var B=240&G(h,m)|15;k[U+0]=240&b(h,x)|P(h,m,x)>>4,k[U+1]=B}function Qn(h,m,x,k,U){k[U+0]=255,ge(h,m,x,k,U+1)}function Ht(h,m,x,k,U){Ne(h,m,x,k,U),k[U+3]=255}function ln(h,m,x,k,U){ge(h,m,x,k,U),k[U+3]=255}function Pn(h,m,x){A[h]=function(k,U,B,q,$,K,ne,de,_e){for(var re=de+(-2&_e)*x;de!=re;)m(k[U+0],B[q+0],$[K+0],ne,de),m(k[U+1],B[q+0],$[K+0],ne,de+x),U+=2,++q,++K,de+=2*x;1&_e&&m(k[U+0],B[q+0],$[K+0],ne,de)}}function Xs(h,m,x){return x==0?h==0?m==0?6:5:m==0?4:0:x}function is(h,m,x,k,U){switch(h>>>30){case 3:Wl(m,x,k,U,0);break;case 2:Ei(m,x,k,U);break;case 1:fn(m,x,k,U)}}function Wr(h,m){var x,k,U=m.M,B=m.Nb,q=h.oc,$=h.pc+40,K=h.oc,ne=h.pc+584,de=h.oc,_e=h.pc+600;for(x=0;16>x;++x)q[$+32*x-1]=129;for(x=0;8>x;++x)K[ne+32*x-1]=129,de[_e+32*x-1]=129;for(0<U?q[$-1-32]=K[ne-1-32]=de[_e-1-32]=129:(s(q,$-32-1,127,21),s(K,ne-32-1,127,9),s(de,_e-32-1,127,9)),k=0;k<h.za;++k){var re=m.ya[m.aa+k];if(0<k){for(x=-1;16>x;++x)r(q,$+32*x-4,q,$+32*x+12,4);for(x=-1;8>x;++x)r(K,ne+32*x-4,K,ne+32*x+4,4),r(de,_e+32*x-4,de,_e+32*x+4,4)}var he=h.Gd,we=h.Hd+k,Ee=re.ad,be=re.Hc;if(0<U&&(r(q,$-32,he[we].y,0,16),r(K,ne-32,he[we].f,0,8),r(de,_e-32,he[we].ea,0,8)),re.Za){var Ie=q,Pe=$-32+16;for(0<U&&(k>=h.za-1?s(Ie,Pe,he[we].y[15],4):r(Ie,Pe,he[we+1].y,0,4)),x=0;4>x;x++)Ie[Pe+128+x]=Ie[Pe+256+x]=Ie[Pe+384+x]=Ie[Pe+0+x];for(x=0;16>x;++x,be<<=2)Ie=q,Pe=$+q5[x],zi[re.Ob[x]](Ie,Pe),is(be,Ee,16*+x,Ie,Pe)}else if(Ie=Xs(k,U,re.Ob[0]),Mo[Ie](q,$),be!=0)for(x=0;16>x;++x,be<<=2)is(be,Ee,16*+x,q,$+q5[x]);for(x=re.Gc,Ie=Xs(k,U,re.Dd),qa[Ie](K,ne),qa[Ie](de,_e),be=Ee,Ie=K,Pe=ne,255&(re=0|x)&&(170&re?ma(be,256,Ie,Pe):Tn(be,256,Ie,Pe)),re=de,be=_e,255&(x>>=8)&&(170&x?ma(Ee,320,re,be):Tn(Ee,320,re,be)),U<h.Ub-1&&(r(he[we].y,0,q,$+480,16),r(he[we].f,0,K,ne+224,8),r(he[we].ea,0,de,_e+224,8)),x=8*B*h.B,he=h.sa,we=h.ta+16*k+16*B*h.R,Ee=h.qa,re=h.ra+8*k+x,be=h.Ha,Ie=h.Ia+8*k+x,x=0;16>x;++x)r(he,we+x*h.R,q,$+32*x,16);for(x=0;8>x;++x)r(Ee,re+x*h.B,K,ne+32*x,8),r(be,Ie+x*h.B,de,_e+32*x,8)}}function Bi(h,m,x,k,U,B,q,$,K){var ne=[0],de=[0],_e=0,re=K!=null?K.kd:0,he=K??new Le;if(h==null||12>x)return 7;he.data=h,he.w=m,he.ha=x,m=[m],x=[x],he.gb=[he.gb];e:{var we=m,Ee=x,be=he.gb;if(e(h!=null),e(Ee!=null),e(be!=null),be[0]=0,12<=Ee[0]&&!n(h,we[0],"RIFF")){if(n(h,we[0]+8,"WEBP")){be=3;break e}var Ie=Ue(h,we[0]+4);if(12>Ie||4294967286<Ie){be=3;break e}if(re&&Ie>Ee[0]-8){be=7;break e}be[0]=Ie,we[0]+=12,Ee[0]-=12}be=0}if(be!=0)return be;for(Ie=0<he.gb[0],x=x[0];;){e:{var Pe=h;Ee=m,be=x;var Me=ne,Re=de,yt=we=[0];if((pt=_e=[_e])[0]=0,8>be[0])be=7;else{if(!n(Pe,Ee[0],"VP8X")){if(Ue(Pe,Ee[0]+4)!=10){be=3;break e}if(18>be[0]){be=7;break e}var lt=Ue(Pe,Ee[0]+8),Vt=1+ke(Pe,Ee[0]+12);if(2147483648<=Vt*(Pe=1+ke(Pe,Ee[0]+15))){be=3;break e}yt!=null&&(yt[0]=lt),Me!=null&&(Me[0]=Vt),Re!=null&&(Re[0]=Pe),Ee[0]+=18,be[0]-=18,pt[0]=1}be=0}}if(_e=_e[0],we=we[0],be!=0)return be;if(Ee=!!(2&we),!Ie&&_e)return 3;if(B!=null&&(B[0]=!!(16&we)),q!=null&&(q[0]=Ee),$!=null&&($[0]=0),q=ne[0],we=de[0],_e&&Ee&&K==null){be=0;break}if(4>x){be=7;break}if(Ie&&_e||!Ie&&!_e&&!n(h,m[0],"ALPH")){x=[x],he.na=[he.na],he.P=[he.P],he.Sa=[he.Sa];e:{lt=h,be=m,Ie=x;var pt=he.gb;Me=he.na,Re=he.P,yt=he.Sa,Vt=22,e(lt!=null),e(Ie!=null),Pe=be[0];var Jt=Ie[0];for(e(Me!=null),e(yt!=null),Me[0]=null,Re[0]=null,yt[0]=0;;){if(be[0]=Pe,Ie[0]=Jt,8>Jt){be=7;break e}var Cr=Ue(lt,Pe+4);if(4294967286<Cr){be=3;break e}var Bt=8+Cr+1&-2;if(Vt+=Bt,0<pt&&Vt>pt){be=3;break e}if(!n(lt,Pe,"VP8 ")||!n(lt,Pe,"VP8L")){be=0;break e}if(Jt[0]<Bt){be=7;break e}n(lt,Pe,"ALPH")||(Me[0]=lt,Re[0]=Pe+8,yt[0]=Cr),Pe+=Bt,Jt-=Bt}}if(x=x[0],he.na=he.na[0],he.P=he.P[0],he.Sa=he.Sa[0],be!=0)break}x=[x],he.Ja=[he.Ja],he.xa=[he.xa];e:if(pt=h,be=m,Ie=x,Me=he.gb[0],Re=he.Ja,yt=he.xa,lt=be[0],Pe=!n(pt,lt,"VP8 "),Vt=!n(pt,lt,"VP8L"),e(pt!=null),e(Ie!=null),e(Re!=null),e(yt!=null),8>Ie[0])be=7;else{if(Pe||Vt){if(pt=Ue(pt,lt+4),12<=Me&&pt>Me-12){be=3;break e}if(re&&pt>Ie[0]-8){be=7;break e}Re[0]=pt,be[0]+=8,Ie[0]-=8,yt[0]=Vt}else yt[0]=5<=Ie[0]&&pt[lt+0]==47&&!(pt[lt+4]>>5),Re[0]=Ie[0];be=0}if(x=x[0],he.Ja=he.Ja[0],he.xa=he.xa[0],m=m[0],be!=0)break;if(4294967286<he.Ja)return 3;if($==null||Ee||($[0]=he.xa?2:1),q=[q],we=[we],he.xa){if(5>x){be=7;break}$=q,re=we,Ee=B,h==null||5>x?h=0:5<=x&&h[m+0]==47&&!(h[m+4]>>5)?(Ie=[0],pt=[0],Me=[0],ce(Re=new W,h,m,x),Vn(Re,Ie,pt,Me)?($!=null&&($[0]=Ie[0]),re!=null&&(re[0]=pt[0]),Ee!=null&&(Ee[0]=Me[0]),h=1):h=0):h=0}else{if(10>x){be=7;break}$=we,h==null||10>x||!Uc(h,m+3,x-3)?h=0:(re=h[m+0]|h[m+1]<<8|h[m+2]<<16,Ee=16383&(h[m+7]<<8|h[m+6]),h=16383&(h[m+9]<<8|h[m+8]),1&re||3<(re>>1&7)||!(re>>4&1)||re>>5>=he.Ja||!Ee||!h?h=0:(q&&(q[0]=Ee),$&&($[0]=h),h=1))}if(!h||(q=q[0],we=we[0],_e&&(ne[0]!=q||de[0]!=we)))return 3;K!=null&&(K[0]=he,K.offset=m-K.w,e(4294967286>m-K.w),e(K.offset==K.ha-x));break}return be==0||be==7&&_e&&K==null?(B!=null&&(B[0]|=he.na!=null&&0<he.na.length),k!=null&&(k[0]=q),U!=null&&(U[0]=we),0):be}function pd(h,m,x){var k=m.width,U=m.height,B=0,q=0,$=k,K=U;if(m.Da=h!=null&&0<h.Da,m.Da&&($=h.cd,K=h.bd,B=h.v,q=h.j,11>x||(B&=-2,q&=-2),0>B||0>q||0>=$||0>=K||B+$>k||q+K>U))return 0;if(m.v=B,m.j=q,m.va=B+$,m.o=q+K,m.U=$,m.T=K,m.da=h!=null&&0<h.da,m.da){if(!Ve($,K,x=[h.ib],B=[h.hb]))return 0;m.ib=x[0],m.hb=B[0]}return m.ob=h!=null&&h.ob,m.Kb=h==null||!h.Sd,m.da&&(m.ob=m.ib<3*k/4&&m.hb<3*U/4,m.Kb=0),1}function md(h){if(h==null)return 2;if(11>h.S){var m=h.f.RGBA;m.fb+=(h.height-1)*m.A,m.A=-m.A}else m=h.f.kb,h=h.height,m.O+=(h-1)*m.fa,m.fa=-m.fa,m.N+=(h-1>>1)*m.Ab,m.Ab=-m.Ab,m.W+=(h-1>>1)*m.Db,m.Db=-m.Db,m.F!=null&&(m.J+=(h-1)*m.lb,m.lb=-m.lb);return 0}function Co(h,m,x,k){if(k==null||0>=h||0>=m)return 2;if(x!=null){if(x.Da){var U=x.cd,B=x.bd,q=-2&x.v,$=-2&x.j;if(0>q||0>$||0>=U||0>=B||q+U>h||$+B>m)return 2;h=U,m=B}if(x.da){if(!Ve(h,m,U=[x.ib],B=[x.hb]))return 2;h=U[0],m=B[0]}}k.width=h,k.height=m;e:{var K=k.width,ne=k.height;if(h=k.S,0>=K||0>=ne||!(h>=Sf&&13>h))h=2;else{if(0>=k.Rd&&k.sd==null){q=B=U=m=0;var de=($=K*H5[h])*ne;if(11>h||(B=(ne+1)/2*(m=(K+1)/2),h==12&&(q=(U=K)*ne)),(ne=i(de+2*B+q))==null){h=1;break e}k.sd=ne,11>h?((K=k.f.RGBA).eb=ne,K.fb=0,K.A=$,K.size=de):((K=k.f.kb).y=ne,K.O=0,K.fa=$,K.Fd=de,K.f=ne,K.N=0+de,K.Ab=m,K.Cd=B,K.ea=ne,K.W=0+de+B,K.Db=m,K.Ed=B,h==12&&(K.F=ne,K.J=0+de+2*B),K.Tc=q,K.lb=U)}if(m=1,U=k.S,B=k.width,q=k.height,U>=Sf&&13>U)if(11>U)h=k.f.RGBA,m&=($=Math.abs(h.A))*(q-1)+B<=h.size,m&=$>=B*H5[U],m&=h.eb!=null;else{h=k.f.kb,$=(B+1)/2,de=(q+1)/2,K=Math.abs(h.fa),ne=Math.abs(h.Ab);var _e=Math.abs(h.Db),re=Math.abs(h.lb),he=re*(q-1)+B;m&=K*(q-1)+B<=h.Fd,m&=ne*(de-1)+$<=h.Cd,m=(m&=_e*(de-1)+$<=h.Ed)&K>=B&ne>=$&_e>=$,m&=h.y!=null,m&=h.f!=null,m&=h.ea!=null,U==12&&(m&=re>=B,m&=he<=h.Tc,m&=h.F!=null)}else m=0;h=m?0:2}}return h!=0||x!=null&&x.fd&&(h=md(k)),h}var Hl=64,Js=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Zs=24,Po=32,Ba=8,jo=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];He("Predictor0","PredictorAdd0"),A.Predictor0=function(){return 4278190080},A.Predictor1=function(h){return h},A.Predictor2=function(h,m,x){return m[x+0]},A.Predictor3=function(h,m,x){return m[x+1]},A.Predictor4=function(h,m,x){return m[x-1]},A.Predictor5=function(h,m,x){return Ae(Ae(h,m[x+1]),m[x+0])},A.Predictor6=function(h,m,x){return Ae(h,m[x-1])},A.Predictor7=function(h,m,x){return Ae(h,m[x+0])},A.Predictor8=function(h,m,x){return Ae(m[x-1],m[x+0])},A.Predictor9=function(h,m,x){return Ae(m[x+0],m[x+1])},A.Predictor10=function(h,m,x){return Ae(Ae(h,m[x-1]),Ae(m[x+0],m[x+1]))},A.Predictor11=function(h,m,x){var k=m[x+0];return 0>=$e(k>>24&255,h>>24&255,(m=m[x-1])>>24&255)+$e(k>>16&255,h>>16&255,m>>16&255)+$e(k>>8&255,h>>8&255,m>>8&255)+$e(255&k,255&h,255&m)?k:h},A.Predictor12=function(h,m,x){var k=m[x+0];return(bt((h>>24&255)+(k>>24&255)-((m=m[x-1])>>24&255))<<24|bt((h>>16&255)+(k>>16&255)-(m>>16&255))<<16|bt((h>>8&255)+(k>>8&255)-(m>>8&255))<<8|bt((255&h)+(255&k)-(255&m)))>>>0},A.Predictor13=function(h,m,x){var k=m[x-1];return(gt((h=Ae(h,m[x+0]))>>24&255,k>>24&255)<<24|gt(h>>16&255,k>>16&255)<<16|gt(h>>8&255,k>>8&255)<<8|gt(255&h,255&k))>>>0};var gd=A.PredictorAdd0;A.PredictorAdd1=at,He("Predictor2","PredictorAdd2"),He("Predictor3","PredictorAdd3"),He("Predictor4","PredictorAdd4"),He("Predictor5","PredictorAdd5"),He("Predictor6","PredictorAdd6"),He("Predictor7","PredictorAdd7"),He("Predictor8","PredictorAdd8"),He("Predictor9","PredictorAdd9"),He("Predictor10","PredictorAdd10"),He("Predictor11","PredictorAdd11"),He("Predictor12","PredictorAdd12"),He("Predictor13","PredictorAdd13");var Wc=A.PredictorAdd2;et("ColorIndexInverseTransform","MapARGB","32b",function(h){return h>>8&255},function(h){return h}),et("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(h){return h},function(h){return h>>8&255});var cr,bf=A.ColorIndexInverseTransform,fa=A.MapARGB,pa=A.VP8LColorIndexInverseTransformAlpha,yd=A.MapAlpha,vd=A.VP8LPredictorsAdd=[];vd.length=16,(A.VP8LPredictors=[]).length=16,(A.VP8LPredictorsAdd_C=[]).length=16,(A.VP8LPredictors_C=[]).length=16;var xd,wd,Lo,Ro,Do,$l,Oo,Wl,Ei,ma,fn,Tn,ur,Ir,za,bd,Gc,_f,x5,w5,b5,_5,N5,S5,_d,A5,E5,k5,T5=i(511),I5=i(2041),C5=i(225),P5=i(767),j5=0,Dg=I5,Nf=C5,ei=P5,ki=T5,Sf=0,Af=1,L5=2,Ef=3,kf=4,Og=5,R5=6,Mg=7,Fg=8,Tf=9,Ug=10,hk=[2,3,7],fk=[3,3,11],D5=[280,256,256,256,40],pk=[0,1,1,1,0],mk=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],gk=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],yk=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],vk=8,Vg=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Bg=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Nd=null,xk=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],wk=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],O5=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],bk=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],_k=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Nk=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],Sk=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Mo=[],zi=[],qa=[],Ak=1,M5=2,Fo=[],Ti=[];Si("UpsampleRgbLinePair",ge,3),Si("UpsampleBgrLinePair",Ne,3),Si("UpsampleRgbaLinePair",ln,4),Si("UpsampleBgraLinePair",Ht,4),Si("UpsampleArgbLinePair",Qn,4),Si("UpsampleRgba4444LinePair",Xt,2),Si("UpsampleRgb565LinePair",Be,2);var Ek=A.UpsampleRgbLinePair,kk=A.UpsampleBgrLinePair,F5=A.UpsampleRgbaLinePair,U5=A.UpsampleBgraLinePair,V5=A.UpsampleArgbLinePair,B5=A.UpsampleRgba4444LinePair,Tk=A.UpsampleRgb565LinePair,If=16,Cf=1<<If-1,Sd=-227,zg=482,Ik=6,z5=0,Ck=i(256),Pk=i(256),jk=i(256),Lk=i(256),Rk=i(zg-Sd),Dk=i(zg-Sd);Pn("YuvToRgbRow",ge,3),Pn("YuvToBgrRow",Ne,3),Pn("YuvToRgbaRow",ln,4),Pn("YuvToBgraRow",Ht,4),Pn("YuvToArgbRow",Qn,4),Pn("YuvToRgba4444Row",Xt,2),Pn("YuvToRgb565Row",Be,2);var q5=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Pf=[0,2,8],Ok=[8,7,6,4,4,2,2,2,1,1,1,1],Mk=1;this.WebPDecodeRGBA=function(h,m,x,k,U){var B=Af,q=new Te,$=new qe;q.ba=$,$.S=B,$.width=[$.width],$.height=[$.height];var K=$.width,ne=$.height,de=new Ke;if(de==null||h==null)var _e=2;else e(de!=null),_e=Bi(h,m,x,de.width,de.height,de.Pd,de.Qd,de.format,null);if(_e!=0?K=0:(K!=null&&(K[0]=de.width[0]),ne!=null&&(ne[0]=de.height[0]),K=1),K){$.width=$.width[0],$.height=$.height[0],k!=null&&(k[0]=$.width),U!=null&&(U[0]=$.height);e:{if(k=new la,(U=new Le).data=h,U.w=m,U.ha=x,U.kd=1,m=[0],e(U!=null),((h=Bi(U.data,U.w,U.ha,null,null,null,m,null,U))==0||h==7)&&m[0]&&(h=4),(m=h)==0){if(e(q!=null),k.data=U.data,k.w=U.w+U.offset,k.ha=U.ha-U.offset,k.put=nt,k.ac=qt,k.bc=Ut,k.ma=q,U.xa){if((h=kr())==null){q=1;break e}if(function(re,he){var we=[0],Ee=[0],be=[0];t:for(;;){if(re==null)return 0;if(he==null)return re.a=2,0;if(re.l=he,re.a=0,ce(re.m,he.data,he.w,he.ha),!Vn(re.m,we,Ee,be)){re.a=3;break t}if(re.xb=M5,he.width=we[0],he.height=Ee[0],!Dr(we[0],Ee[0],1,re,null))break t;return 1}return e(re.a!=0),0}(h,k)){if(k=(m=Co(k.width,k.height,q.Oa,q.ba))==0){t:{k=h;n:for(;;){if(k==null){k=0;break t}if(e(k.s.yc!=null),e(k.s.Ya!=null),e(0<k.s.Wb),e((x=k.l)!=null),e((U=x.ma)!=null),k.xb!=0){if(k.ca=U.ba,k.tb=U.tb,e(k.ca!=null),!pd(U.Oa,x,Ef)){k.a=2;break n}if(!Hr(k,x.width)||x.da)break n;if((x.da||Qe(k.ca.S))&&Ms(),11>k.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),k.ca.f.kb.F!=null&&Ms()),k.Pb&&0<k.s.ua&&k.s.vb.X==null&&!V(k.s.vb,k.s.Wa.Xa)){k.a=1;break n}k.xb=0}if(!Er(k,k.V,k.Ba,k.c,k.i,x.o,Nr))break n;U.Dc=k.Ma,k=1;break t}e(k.a!=0),k=0}k=!k}k&&(m=h.a)}else m=h.a}else{if((h=new Fc)==null){q=1;break e}if(h.Fa=U.na,h.P=U.P,h.qc=U.Sa,yi(h,k)){if((m=Co(k.width,k.height,q.Oa,q.ba))==0){if(h.Aa=0,x=q.Oa,e((U=h)!=null),x!=null){if(0<(K=0>(K=x.Md)?0:100<K?255:255*K/100)){for(ne=de=0;4>ne;++ne)12>(_e=U.pb[ne]).lc&&(_e.ia=K*Ok[0>_e.lc?0:_e.lc]>>3),de|=_e.ia;de&&(alert("todo:VP8InitRandom"),U.ia=1)}U.Ga=x.Id,100<U.Ga?U.Ga=100:0>U.Ga&&(U.Ga=0)}(function(re,he){if(re==null)return 0;if(he==null)return Wn(re,2,"NULL VP8Io parameter in VP8Decode().");if(!re.cb&&!yi(re,he))return 0;if(e(re.cb),he.ac==null||he.ac(he)){he.ob&&(re.L=0);var we=Pf[re.L];if(re.L==2?(re.yb=0,re.zb=0):(re.yb=he.v-we>>4,re.zb=he.j-we>>4,0>re.yb&&(re.yb=0),0>re.zb&&(re.zb=0)),re.Va=he.o+15+we>>4,re.Hb=he.va+15+we>>4,re.Hb>re.za&&(re.Hb=re.za),re.Va>re.Ub&&(re.Va=re.Ub),0<re.L){var Ee=re.ed;for(we=0;4>we;++we){var be;if(re.Qa.Cb){var Ie=re.Qa.Lb[we];re.Qa.Fb||(Ie+=Ee.Tb)}else Ie=Ee.Tb;for(be=0;1>=be;++be){var Pe=re.gd[we][be],Me=Ie;if(Ee.Pc&&(Me+=Ee.vd[0],be&&(Me+=Ee.od[0])),0<(Me=0>Me?0:63<Me?63:Me)){var Re=Me;0<Ee.wb&&(Re=4<Ee.wb?Re>>2:Re>>1)>9-Ee.wb&&(Re=9-Ee.wb),1>Re&&(Re=1),Pe.dd=Re,Pe.tc=2*Me+Re,Pe.ld=40<=Me?2:15<=Me?1:0}else Pe.tc=0;Pe.La=be}}}we=0}else Wn(re,6,"Frame setup failed"),we=re.a;if(we=we==0){if(we){re.$c=0,0<re.Aa||(re.Ic=Mk);t:{we=re.Ic,Ee=4*(Re=re.za);var yt=32*Re,lt=Re+1,Vt=0<re.L?Re*(0<re.Aa?2:1):0,pt=(re.Aa==2?2:1)*Re;if((Pe=Ee+832+(be=3*(16*we+Pf[re.L])/2*yt)+(Ie=re.Fa!=null&&0<re.Fa.length?re.Kc.c*re.Kc.i:0))!=Pe)we=0;else{if(Pe>re.Vb){if(re.Vb=0,re.Ec=i(Pe),re.Fc=0,re.Ec==null){we=Wn(re,1,"no memory during frame initialization.");break t}re.Vb=Pe}Pe=re.Ec,Me=re.Fc,re.Ac=Pe,re.Bc=Me,Me+=Ee,re.Gd=a(yt,Ol),re.Hd=0,re.rb=a(lt+1,Ys),re.sb=1,re.wa=Vt?a(Vt,Or):null,re.Y=0,re.D.Nb=0,re.D.wa=re.wa,re.D.Y=re.Y,0<re.Aa&&(re.D.Y+=Re),e(!0),re.oc=Pe,re.pc=Me,Me+=832,re.ya=a(pt,Rl),re.aa=0,re.D.ya=re.ya,re.D.aa=re.aa,re.Aa==2&&(re.D.aa+=Re),re.R=16*Re,re.B=8*Re,Re=(yt=Pf[re.L])*re.R,yt=yt/2*re.B,re.sa=Pe,re.ta=Me+Re,re.qa=re.sa,re.ra=re.ta+16*we*re.R+yt,re.Ha=re.qa,re.Ia=re.ra+8*we*re.B+yt,re.$c=0,Me+=be,re.mb=Ie?Pe:null,re.nb=Ie?Me:null,e(Me+Ie<=re.Fc+re.Vb),Fl(re),s(re.Ac,re.Bc,0,Ee),we=1}}if(we){if(he.ka=0,he.y=re.sa,he.O=re.ta,he.f=re.qa,he.N=re.ra,he.ea=re.Ha,he.Vd=re.Ia,he.fa=re.R,he.Rc=re.B,he.F=null,he.J=0,!j5){for(we=-255;255>=we;++we)T5[255+we]=0>we?-we:we;for(we=-1020;1020>=we;++we)I5[1020+we]=-128>we?-128:127<we?127:we;for(we=-112;112>=we;++we)C5[112+we]=-16>we?-16:15<we?15:we;for(we=-255;510>=we;++we)P5[255+we]=0>we?0:255<we?255:we;j5=1}Oo=vi,Wl=Vc,ma=Kt,fn=Ma,Tn=ca,Ei=So,ur=Io,Ir=Ni,za=F,bd=te,Gc=ql,_f=v,x5=oe,w5=pe,b5=ha,_5=_s,N5=zl,S5=$c,zi[0]=hd,zi[1]=Bc,zi[2]=ud,zi[3]=dd,zi[4]=Mr,zi[5]=fd,zi[6]=Ui,zi[7]=Eo,zi[8]=ko,zi[9]=Vi,Mo[0]=xi,Mo[1]=cd,Mo[2]=Ul,Mo[3]=zc,Mo[4]=ua,Mo[5]=Ao,Mo[6]=qc,qa[0]=Vl,qa[1]=ld,qa[2]=Qs,qa[3]=Ua,qa[4]=Bl,qa[5]=Sn,qa[6]=Hc,we=1}else we=0}we&&(we=function(Jt,Cr){for(Jt.M=0;Jt.M<Jt.Va;++Jt.M){var Bt,mt=Jt.Jc[Jt.M&Jt.Xb],We=Jt.m,dr=Jt;for(Bt=0;Bt<dr.za;++Bt){var Mt=We,nn=dr,Rn=nn.Ac,Gr=nn.Bc+4*Bt,Ss=nn.zc,rr=nn.ya[nn.aa+Bt];if(nn.Qa.Bb?rr.$b=fe(Mt,nn.Pa.jb[0])?2+fe(Mt,nn.Pa.jb[2]):fe(Mt,nn.Pa.jb[1]):rr.$b=0,nn.kc&&(rr.Ad=fe(Mt,nn.Bd)),rr.Za=!fe(Mt,145)+0,rr.Za){var as=rr.Ob,As=0;for(nn=0;4>nn;++nn){var Pr,sn=Ss[0+nn];for(Pr=0;4>Pr;++Pr){sn=_k[Rn[Gr+Pr]][sn];for(var gn=O5[fe(Mt,sn[0])];0<gn;)gn=O5[2*gn+fe(Mt,sn[gn])];sn=-gn,Rn[Gr+Pr]=sn}r(as,As,Rn,Gr,4),As+=4,Ss[0+nn]=sn}}else sn=fe(Mt,156)?fe(Mt,128)?1:3:fe(Mt,163)?2:0,rr.Ob[0]=sn,s(Rn,Gr,sn,4),s(Ss,0,sn,4);rr.Dd=fe(Mt,142)?fe(Mt,114)?fe(Mt,183)?1:3:2:0}if(dr.m.Ka)return Wn(Jt,7,"Premature end-of-partition0 encountered.");for(;Jt.ja<Jt.za;++Jt.ja){if(dr=mt,Mt=(We=Jt).rb[We.sb-1],Rn=We.rb[We.sb+We.ja],Bt=We.ya[We.aa+We.ja],Gr=We.kc?Bt.Ad:0)Mt.la=Rn.la=0,Bt.Za||(Mt.Na=Rn.Na=0),Bt.Hc=0,Bt.Gc=0,Bt.ia=0;else{var sr,yn;if(Mt=Rn,Rn=dr,Gr=We.Pa.Xc,Ss=We.ya[We.aa+We.ja],rr=We.pb[Ss.$b],nn=Ss.ad,as=0,As=We.rb[We.sb-1],sn=Pr=0,s(nn,as,0,384),Ss.Za)var Kr=0,qi=Gr[3];else{gn=i(16);var hr=Mt.Na+As.Na;if(hr=Nd(Rn,Gr[1],hr,rr.Eb,0,gn,0),Mt.Na=As.Na=(0<hr)+0,1<hr)Oo(gn,0,nn,as);else{var Fs=gn[0]+3>>3;for(gn=0;256>gn;gn+=16)nn[as+gn]=Fs}Kr=1,qi=Gr[0]}var In=15&Mt.la,jr=15&As.la;for(gn=0;4>gn;++gn){var ti=1&jr;for(Fs=yn=0;4>Fs;++Fs)In=In>>1|(ti=(hr=Nd(Rn,qi,hr=ti+(1&In),rr.Sc,Kr,nn,as))>Kr)<<7,yn=yn<<2|(3<hr?3:1<hr?2:nn[as+0]!=0),as+=16;In>>=4,jr=jr>>1|ti<<7,Pr=(Pr<<8|yn)>>>0}for(qi=In,Kr=jr>>4,sr=0;4>sr;sr+=2){for(yn=0,In=Mt.la>>4+sr,jr=As.la>>4+sr,gn=0;2>gn;++gn){for(ti=1&jr,Fs=0;2>Fs;++Fs)hr=ti+(1&In),In=In>>1|(ti=0<(hr=Nd(Rn,Gr[2],hr,rr.Qc,0,nn,as)))<<3,yn=yn<<2|(3<hr?3:1<hr?2:nn[as+0]!=0),as+=16;In>>=2,jr=jr>>1|ti<<5}sn|=yn<<4*sr,qi|=In<<4<<sr,Kr|=(240&jr)<<sr}Mt.la=qi,As.la=Kr,Ss.Hc=Pr,Ss.Gc=sn,Ss.ia=43690&sn?0:rr.ia,Gr=!(Pr|sn)}if(0<We.L&&(We.wa[We.Y+We.ja]=We.gd[Bt.$b][Bt.Za],We.wa[We.Y+We.ja].La|=!Gr),dr.Ka)return Wn(Jt,7,"Premature end-of-file encountered.")}if(Fl(Jt),We=Cr,dr=1,Bt=(mt=Jt).D,Mt=0<mt.L&&mt.M>=mt.zb&&mt.M<=mt.Va,mt.Aa==0)t:{if(Bt.M=mt.M,Bt.uc=Mt,Wr(mt,Bt),dr=1,Bt=(yn=mt.D).Nb,Mt=(sn=Pf[mt.L])*mt.R,Rn=sn/2*mt.B,gn=16*Bt*mt.R,Fs=8*Bt*mt.B,Gr=mt.sa,Ss=mt.ta-Mt+gn,rr=mt.qa,nn=mt.ra-Rn+Fs,as=mt.Ha,As=mt.Ia-Rn+Fs,jr=(In=yn.M)==0,Pr=In>=mt.Va-1,mt.Aa==2&&Wr(mt,yn),yn.uc)for(ti=(hr=mt).D.M,e(hr.D.uc),yn=hr.yb;yn<hr.Hb;++yn){Kr=yn,qi=ti;var Es=(ni=(Yr=hr).D).Nb;sr=Yr.R;var ni=ni.wa[ni.Y+Kr],ri=Yr.sa,Us=Yr.ta+16*Es*sr+16*Kr,si=ni.dd,jn=ni.tc;if(jn!=0)if(e(3<=jn),Yr.L==1)0<Kr&&_5(ri,Us,sr,jn+4),ni.La&&S5(ri,Us,sr,jn),0<qi&&b5(ri,Us,sr,jn+4),ni.La&&N5(ri,Us,sr,jn);else{var ii=Yr.B,Hi=Yr.qa,Gl=Yr.ra+8*Es*ii+8*Kr,Ha=Yr.Ha,Yr=Yr.Ia+8*Es*ii+8*Kr;Es=ni.ld,0<Kr&&(Ir(ri,Us,sr,jn+4,si,Es),bd(Hi,Gl,Ha,Yr,ii,jn+4,si,Es)),ni.La&&(_f(ri,Us,sr,jn,si,Es),w5(Hi,Gl,Ha,Yr,ii,jn,si,Es)),0<qi&&(ur(ri,Us,sr,jn+4,si,Es),za(Hi,Gl,Ha,Yr,ii,jn+4,si,Es)),ni.La&&(Gc(ri,Us,sr,jn,si,Es),x5(Hi,Gl,Ha,Yr,ii,jn,si,Es))}}if(mt.ia&&alert("todo:DitherRow"),We.put!=null){if(yn=16*In,In=16*(In+1),jr?(We.y=mt.sa,We.O=mt.ta+gn,We.f=mt.qa,We.N=mt.ra+Fs,We.ea=mt.Ha,We.W=mt.Ia+Fs):(yn-=sn,We.y=Gr,We.O=Ss,We.f=rr,We.N=nn,We.ea=as,We.W=As),Pr||(In-=sn),In>We.o&&(In=We.o),We.F=null,We.J=null,mt.Fa!=null&&0<mt.Fa.length&&yn<In&&(We.J=mn(mt,We,yn,In-yn),We.F=mt.mb,We.F==null&&We.F.length==0)){dr=Wn(mt,3,"Could not decode alpha data.");break t}yn<We.j&&(sn=We.j-yn,yn=We.j,e(!(1&sn)),We.O+=mt.R*sn,We.N+=mt.B*(sn>>1),We.W+=mt.B*(sn>>1),We.F!=null&&(We.J+=We.width*sn)),yn<In&&(We.O+=We.v,We.N+=We.v>>1,We.W+=We.v>>1,We.F!=null&&(We.J+=We.v),We.ka=yn-We.j,We.U=We.va-We.v,We.T=In-yn,dr=We.put(We))}Bt+1!=mt.Ic||Pr||(r(mt.sa,mt.ta-Mt,Gr,Ss+16*mt.R,Mt),r(mt.qa,mt.ra-Rn,rr,nn+8*mt.B,Rn),r(mt.Ha,mt.Ia-Rn,as,As+8*mt.B,Rn))}if(!dr)return Wn(Jt,6,"Output aborted.")}return 1}(re,he)),he.bc!=null&&he.bc(he),we&=1}return we?(re.cb=0,we):0})(h,k)||(m=h.a)}}else m=h.a}m==0&&q.Oa!=null&&q.Oa.fd&&(m=md(q.ba))}q=m}B=q!=0?null:11>B?$.f.RGBA.eb:$.f.kb.y}else B=null;return B};var H5=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function c(A,R){for(var E="",C=0;C<4;C++)E+=String.fromCharCode(A[R++]);return E}function d(A,R){return A[R+0]|A[R+1]<<8}function g(A,R){return(A[R+0]|A[R+1]<<8|A[R+2]<<16)>>>0}function y(A,R){return(A[R+0]|A[R+1]<<8|A[R+2]<<16|A[R+3]<<24)>>>0}new l;var p=[0],N=[0],S=[],I=new l,w=t,T=function(A,R){var E={},C=0,L=!1,z=0,Z=0;if(E.frames=[],!function(M,W){for(var X=0;X<4;X++)if(M[W+X]!="RIFF".charCodeAt(X))return!0;return!1}(A,R)){for(y(A,R+=4),R+=8;R<A.length;){var ae=c(A,R),ue=y(A,R+=4);R+=4;var Q=ue+(1&ue);switch(ae){case"VP8 ":case"VP8L":E.frames[C]===void 0&&(E.frames[C]={}),(ye=E.frames[C]).src_off=L?Z:R-8,ye.src_size=z+ue+8,C++,L&&(L=!1,z=0,Z=0);break;case"VP8X":(ye=E.header={}).feature_flags=A[R];var ce=R+4;ye.canvas_width=1+g(A,ce),ce+=3,ye.canvas_height=1+g(A,ce),ce+=3;break;case"ALPH":L=!0,z=Q+8,Z=R-8;break;case"ANIM":(ye=E.header).bgcolor=y(A,R),ce=R+4,ye.loop_count=d(A,ce),ce+=2;break;case"ANMF":var me,ye;(ye=E.frames[C]={}).offset_x=2*g(A,R),R+=3,ye.offset_y=2*g(A,R),R+=3,ye.width=1+g(A,R),R+=3,ye.height=1+g(A,R),R+=3,ye.duration=g(A,R),R+=3,me=A[R++],ye.dispose=1&me,ye.blend=me>>1&1}ae!="ANMF"&&(R+=Q)}return E}}(w,0);T.response=w,T.rgbaoutput=!0,T.dataurl=!1;var j=T.header?T.header:null,D=T.frames?T.frames:null;if(j){j.loop_counter=j.loop_count,p=[j.canvas_height],N=[j.canvas_width];for(var H=0;H<D.length&&D[H].blend!=0;H++);}var J=D[0],O=I.WebPDecodeRGBA(w,J.src_off,J.src_size,N,p);J.rgba=O,J.imgwidth=N[0],J.imgheight=p[0];for(var _=0;_<N[0]*p[0]*4;_++)S[_]=O[_];return this.width=N,this.height=p,this.data=S,this}(function(t){var e,n,r,s,i,a,o,l,c,d=function(M){return M=M||{},this.isStrokeTransparent=M.isStrokeTransparent||!1,this.strokeOpacity=M.strokeOpacity||1,this.strokeStyle=M.strokeStyle||"#000000",this.fillStyle=M.fillStyle||"#000000",this.isFillTransparent=M.isFillTransparent||!1,this.fillOpacity=M.fillOpacity||1,this.font=M.font||"10px sans-serif",this.textBaseline=M.textBaseline||"alphabetic",this.textAlign=M.textAlign||"left",this.lineWidth=M.lineWidth||1,this.lineJoin=M.lineJoin||"miter",this.lineCap=M.lineCap||"butt",this.path=M.path||[],this.transform=M.transform!==void 0?M.transform.clone():new l,this.globalCompositeOperation=M.globalCompositeOperation||"normal",this.globalAlpha=M.globalAlpha||1,this.clip_path=M.clip_path||[],this.currentPoint=M.currentPoint||new a,this.miterLimit=M.miterLimit||10,this.lastPoint=M.lastPoint||new a,this.lineDashOffset=M.lineDashOffset||0,this.lineDash=M.lineDash||[],this.margin=M.margin||[0,0,0,0],this.prevPageLastElemOffset=M.prevPageLastElemOffset||0,this.ignoreClearRect=typeof M.ignoreClearRect!="boolean"||M.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new g(this),e=this.internal.f2,n=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,s=this.internal.getHorizontalCoordinate,i=this.internal.getVerticalCoordinate,a=this.internal.Point,o=this.internal.Rectangle,l=this.internal.Matrix,c=new d}]);var g=function(M){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var W=M;Object.defineProperty(this,"pdf",{get:function(){return W}});var X=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return X},set:function(V){X=!!V}});var Y=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return Y},set:function(V){Y=!!V}});var ie=0;Object.defineProperty(this,"posX",{get:function(){return ie},set:function(V){isNaN(V)||(ie=V)}});var le=0;Object.defineProperty(this,"posY",{get:function(){return le},set:function(V){isNaN(V)||(le=V)}}),Object.defineProperty(this,"margin",{get:function(){return c.margin},set:function(V){var De;typeof V=="number"?De=[V,V,V,V]:((De=new Array(4))[0]=V[0],De[1]=V.length>=2?V[1]:De[0],De[2]=V.length>=3?V[2]:De[0],De[3]=V.length>=4?V[3]:De[1]),c.margin=De}});var xe=!1;Object.defineProperty(this,"autoPaging",{get:function(){return xe},set:function(V){xe=V}});var ee=0;Object.defineProperty(this,"lastBreak",{get:function(){return ee},set:function(V){ee=V}});var fe=[];Object.defineProperty(this,"pageBreaks",{get:function(){return fe},set:function(V){fe=V}}),Object.defineProperty(this,"ctx",{get:function(){return c},set:function(V){V instanceof d&&(c=V)}}),Object.defineProperty(this,"path",{get:function(){return c.path},set:function(V){c.path=V}});var ve=[];Object.defineProperty(this,"ctxStack",{get:function(){return ve},set:function(V){ve=V}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(V){var De;De=y(V),this.ctx.fillStyle=De.style,this.ctx.isFillTransparent=De.a===0,this.ctx.fillOpacity=De.a,this.pdf.setFillColor(De.r,De.g,De.b,{a:De.a}),this.pdf.setTextColor(De.r,De.g,De.b,{a:De.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(V){var De=y(V);this.ctx.strokeStyle=De.style,this.ctx.isStrokeTransparent=De.a===0,this.ctx.strokeOpacity=De.a,De.a===0?this.pdf.setDrawColor(255,255,255):(De.a,this.pdf.setDrawColor(De.r,De.g,De.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(V){["butt","round","square"].indexOf(V)!==-1&&(this.ctx.lineCap=V,this.pdf.setLineCap(V))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(V){isNaN(V)||(this.ctx.lineWidth=V,this.pdf.setLineWidth(V))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(V){["bevel","round","miter"].indexOf(V)!==-1&&(this.ctx.lineJoin=V,this.pdf.setLineJoin(V))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(V){isNaN(V)||(this.ctx.miterLimit=V,this.pdf.setMiterLimit(V))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(V){this.ctx.textBaseline=V}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(V){["right","end","center","left","start"].indexOf(V)!==-1&&(this.ctx.textAlign=V)}});var Se=null,ke=null,Ue=null;Object.defineProperty(this,"fontFaces",{get:function(){return Ue},set:function(V){Se=null,ke=null,Ue=V}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(V){var De;if(this.ctx.font=V,(De=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z0-9]+?)\s*$/i.exec(V))!==null){var Ze=De[1];De[2];var Ve=De[3],Ce=De[4];De[5];var Xe=De[6],He=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Ce)[2];Ce=Math.floor(He==="px"?parseFloat(Ce)*this.pdf.internal.scaleFactor:He==="em"?parseFloat(Ce)*this.pdf.getFontSize():parseFloat(Ce)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Ce);var st=function(et){var Ot,Ft,Ge=[],ft=et.trim();if(ft==="")return c1;if(ft in Z_)return[Z_[ft]];for(;ft!=="";){switch(Ft=null,Ot=(ft=t4(ft)).charAt(0)){case'"':case"'":Ft=yB(ft.substring(1),Ot);break;default:Ft=vB(ft)}if(Ft===null||(Ge.push(Ft[0]),(ft=t4(Ft[1]))!==""&&ft.charAt(0)!==","))return c1;ft=ft.replace(/^,/,"")}return Ge}(Xe);if(this.fontFaces){var Ae=function(et,Ot){var Ft=et.getFontList(),Ge=JSON.stringify(Ft);if(Se===null||ke!==Ge){var ft=function(kt){var ot=[];return Object.keys(kt).forEach(function(Pt){kt[Pt].forEach(function(Qe){var tt=null;switch(Qe){case"bold":tt={family:Pt,weight:"bold"};break;case"italic":tt={family:Pt,style:"italic"};break;case"bolditalic":tt={family:Pt,weight:"bold",style:"italic"};break;case"":case"normal":tt={family:Pt}}tt!==null&&(tt.ref={name:Pt,style:Qe},ot.push(tt))})}),ot}(Ft);Se=function(kt){for(var ot={},Pt=0;Pt<kt.length;++Pt){var Qe=l1(kt[Pt]),tt=Qe.family,It=Qe.stretch,qe=Qe.style,Ke=Qe.weight;ot[tt]=ot[tt]||{},ot[tt][It]=ot[tt][It]||{},ot[tt][It][qe]=ot[tt][It][qe]||{},ot[tt][It][qe][Ke]=Qe}return ot}(ft.concat(Ot)),ke=Ge}return Se}(this.pdf,this.fontFaces),bt=st.map(function(et){return{family:et,stretch:"normal",weight:Ve,style:Ze}}),gt=function(et,Ot,Ft){for(var Ge=(Ft=Ft||{}).defaultFontFamily||"times",ft=Object.assign({},gB,Ft.genericFontFamilies||{}),kt=null,ot=null,Pt=0;Pt<Ot.length;++Pt)if(ft[(kt=l1(Ot[Pt])).family]&&(kt.family=ft[kt.family]),et.hasOwnProperty(kt.family)){ot=et[kt.family];break}if(!(ot=ot||et[Ge]))throw new Error("Could not find a font-family for the rule '"+e4(kt)+"' and default family '"+Ge+"'.");if(ot=function(Qe,tt){if(tt[Qe])return tt[Qe];var It=J2[Qe],qe=It<=J2.normal?-1:1,Ke=J_(tt,WE,It,qe);if(!Ke)throw new Error("Could not find a matching font-stretch value for "+Qe);return Ke}(kt.stretch,ot),ot=function(Qe,tt){if(tt[Qe])return tt[Qe];for(var It=$E[Qe],qe=0;qe<It.length;++qe)if(tt[It[qe]])return tt[It[qe]];throw new Error("Could not find a matching font-style for "+Qe)}(kt.style,ot),!(ot=function(Qe,tt){if(tt[Qe])return tt[Qe];if(Qe===400&&tt[500])return tt[500];if(Qe===500&&tt[400])return tt[400];var It=mB[Qe],qe=J_(tt,GE,It,Qe<400?-1:1);if(!qe)throw new Error("Could not find a matching font-weight for value "+Qe);return qe}(kt.weight,ot)))throw new Error("Failed to resolve a font for the rule '"+e4(kt)+"'.");return ot}(Ae,bt);this.pdf.setFont(gt.ref.name,gt.ref.style)}else{var $e="";(Ve==="bold"||parseInt(Ve,10)>=700||Ze==="bold")&&($e="bold"),Ze==="italic"&&($e+="italic"),$e.length===0&&($e="normal");for(var at="",Nt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Ye=0;Ye<st.length;Ye++){if(this.pdf.internal.getFont(st[Ye],$e,{noFallback:!0,disableWarning:!0})!==void 0){at=st[Ye];break}if($e==="bolditalic"&&this.pdf.internal.getFont(st[Ye],"bold",{noFallback:!0,disableWarning:!0})!==void 0)at=st[Ye],$e="bold";else if(this.pdf.internal.getFont(st[Ye],"normal",{noFallback:!0,disableWarning:!0})!==void 0){at=st[Ye],$e="normal";break}}if(at===""){for(var xt=0;xt<st.length;xt++)if(Nt[st[xt]]){at=Nt[st[xt]];break}}at=at===""?"Times":at,this.pdf.setFont(at,$e)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(V){this.ctx.globalCompositeOperation=V}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(V){this.ctx.globalAlpha=V}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(V){this.ctx.lineDashOffset=V,ye.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(V){this.ctx.lineDash=V,ye.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(V){this.ctx.ignoreClearRect=!!V}})};g.prototype.setLineDash=function(M){this.lineDash=M},g.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},g.prototype.fill=function(){D.call(this,"fill",!1)},g.prototype.stroke=function(){D.call(this,"stroke",!1)},g.prototype.beginPath=function(){this.path=[{type:"begin"}]},g.prototype.moveTo=function(M,W){if(isNaN(M)||isNaN(W))throw Cn.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var X=this.ctx.transform.applyToPoint(new a(M,W));this.path.push({type:"mt",x:X.x,y:X.y}),this.ctx.lastPoint=new a(M,W)},g.prototype.closePath=function(){var M=new a(0,0),W=0;for(W=this.path.length-1;W!==-1;W--)if(this.path[W].type==="begin"&&xn(this.path[W+1])==="object"&&typeof this.path[W+1].x=="number"){M=new a(this.path[W+1].x,this.path[W+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new a(M.x,M.y)},g.prototype.lineTo=function(M,W){if(isNaN(M)||isNaN(W))throw Cn.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var X=this.ctx.transform.applyToPoint(new a(M,W));this.path.push({type:"lt",x:X.x,y:X.y}),this.ctx.lastPoint=new a(X.x,X.y)},g.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),D.call(this,null,!0)},g.prototype.quadraticCurveTo=function(M,W,X,Y){if(isNaN(X)||isNaN(Y)||isNaN(M)||isNaN(W))throw Cn.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var ie=this.ctx.transform.applyToPoint(new a(X,Y)),le=this.ctx.transform.applyToPoint(new a(M,W));this.path.push({type:"qct",x1:le.x,y1:le.y,x:ie.x,y:ie.y}),this.ctx.lastPoint=new a(ie.x,ie.y)},g.prototype.bezierCurveTo=function(M,W,X,Y,ie,le){if(isNaN(ie)||isNaN(le)||isNaN(M)||isNaN(W)||isNaN(X)||isNaN(Y))throw Cn.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var xe=this.ctx.transform.applyToPoint(new a(ie,le)),ee=this.ctx.transform.applyToPoint(new a(M,W)),fe=this.ctx.transform.applyToPoint(new a(X,Y));this.path.push({type:"bct",x1:ee.x,y1:ee.y,x2:fe.x,y2:fe.y,x:xe.x,y:xe.y}),this.ctx.lastPoint=new a(xe.x,xe.y)},g.prototype.arc=function(M,W,X,Y,ie,le){if(isNaN(M)||isNaN(W)||isNaN(X)||isNaN(Y)||isNaN(ie))throw Cn.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(le=!!le,!this.ctx.transform.isIdentity){var xe=this.ctx.transform.applyToPoint(new a(M,W));M=xe.x,W=xe.y;var ee=this.ctx.transform.applyToPoint(new a(0,X)),fe=this.ctx.transform.applyToPoint(new a(0,0));X=Math.sqrt(Math.pow(ee.x-fe.x,2)+Math.pow(ee.y-fe.y,2))}Math.abs(ie-Y)>=2*Math.PI&&(Y=0,ie=2*Math.PI),this.path.push({type:"arc",x:M,y:W,radius:X,startAngle:Y,endAngle:ie,counterclockwise:le})},g.prototype.arcTo=function(M,W,X,Y,ie){throw new Error("arcTo not implemented.")},g.prototype.rect=function(M,W,X,Y){if(isNaN(M)||isNaN(W)||isNaN(X)||isNaN(Y))throw Cn.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(M,W),this.lineTo(M+X,W),this.lineTo(M+X,W+Y),this.lineTo(M,W+Y),this.lineTo(M,W),this.lineTo(M+X,W),this.lineTo(M,W)},g.prototype.fillRect=function(M,W,X,Y){if(isNaN(M)||isNaN(W)||isNaN(X)||isNaN(Y))throw Cn.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!p.call(this)){var ie={};this.lineCap!=="butt"&&(ie.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(ie.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(M,W,X,Y),this.fill(),ie.hasOwnProperty("lineCap")&&(this.lineCap=ie.lineCap),ie.hasOwnProperty("lineJoin")&&(this.lineJoin=ie.lineJoin)}},g.prototype.strokeRect=function(M,W,X,Y){if(isNaN(M)||isNaN(W)||isNaN(X)||isNaN(Y))throw Cn.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");N.call(this)||(this.beginPath(),this.rect(M,W,X,Y),this.stroke())},g.prototype.clearRect=function(M,W,X,Y){if(isNaN(M)||isNaN(W)||isNaN(X)||isNaN(Y))throw Cn.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(M,W,X,Y))},g.prototype.save=function(M){M=typeof M!="boolean"||M;for(var W=this.pdf.internal.getCurrentPageInfo().pageNumber,X=0;X<this.pdf.internal.getNumberOfPages();X++)this.pdf.setPage(X+1),this.pdf.internal.out("q");if(this.pdf.setPage(W),M){this.ctx.fontSize=this.pdf.internal.getFontSize();var Y=new d(this.ctx);this.ctxStack.push(this.ctx),this.ctx=Y}},g.prototype.restore=function(M){M=typeof M!="boolean"||M;for(var W=this.pdf.internal.getCurrentPageInfo().pageNumber,X=0;X<this.pdf.internal.getNumberOfPages();X++)this.pdf.setPage(X+1),this.pdf.internal.out("Q");this.pdf.setPage(W),M&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},g.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var y=function(M){var W,X,Y,ie;if(M.isCanvasGradient===!0&&(M=M.getColor()),!M)return{r:0,g:0,b:0,a:0,style:M};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(M))W=0,X=0,Y=0,ie=0;else{var le=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(M);if(le!==null)W=parseInt(le[1]),X=parseInt(le[2]),Y=parseInt(le[3]),ie=1;else if((le=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(M))!==null)W=parseInt(le[1]),X=parseInt(le[2]),Y=parseInt(le[3]),ie=parseFloat(le[4]);else{if(ie=1,typeof M=="string"&&M.charAt(0)!=="#"){var xe=new FE(M);M=xe.ok?xe.toHex():"#000000"}M.length===4?(W=M.substring(1,2),W+=W,X=M.substring(2,3),X+=X,Y=M.substring(3,4),Y+=Y):(W=M.substring(1,3),X=M.substring(3,5),Y=M.substring(5,7)),W=parseInt(W,16),X=parseInt(X,16),Y=parseInt(Y,16)}}return{r:W,g:X,b:Y,a:ie,style:M}},p=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},N=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};g.prototype.fillText=function(M,W,X,Y){if(isNaN(W)||isNaN(X)||typeof M!="string")throw Cn.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(Y=isNaN(Y)?void 0:Y,!p.call(this)){var ie=Q(this.ctx.transform.rotation),le=this.ctx.transform.scaleX;C.call(this,{text:M,x:W,y:X,scale:le,angle:ie,align:this.textAlign,maxWidth:Y})}},g.prototype.strokeText=function(M,W,X,Y){if(isNaN(W)||isNaN(X)||typeof M!="string")throw Cn.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!N.call(this)){Y=isNaN(Y)?void 0:Y;var ie=Q(this.ctx.transform.rotation),le=this.ctx.transform.scaleX;C.call(this,{text:M,x:W,y:X,scale:le,renderingMode:"stroke",angle:ie,align:this.textAlign,maxWidth:Y})}},g.prototype.measureText=function(M){if(typeof M!="string")throw Cn.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var W=this.pdf,X=this.pdf.internal.scaleFactor,Y=W.internal.getFontSize(),ie=W.getStringUnitWidth(M)*Y/W.internal.scaleFactor;return new function(le){var xe=(le=le||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return xe}}),this}({width:ie*=Math.round(96*X/72*1e4)/1e4})},g.prototype.scale=function(M,W){if(isNaN(M)||isNaN(W))throw Cn.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var X=new l(M,0,0,W,0,0);this.ctx.transform=this.ctx.transform.multiply(X)},g.prototype.rotate=function(M){if(isNaN(M))throw Cn.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var W=new l(Math.cos(M),Math.sin(M),-Math.sin(M),Math.cos(M),0,0);this.ctx.transform=this.ctx.transform.multiply(W)},g.prototype.translate=function(M,W){if(isNaN(M)||isNaN(W))throw Cn.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var X=new l(1,0,0,1,M,W);this.ctx.transform=this.ctx.transform.multiply(X)},g.prototype.transform=function(M,W,X,Y,ie,le){if(isNaN(M)||isNaN(W)||isNaN(X)||isNaN(Y)||isNaN(ie)||isNaN(le))throw Cn.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var xe=new l(M,W,X,Y,ie,le);this.ctx.transform=this.ctx.transform.multiply(xe)},g.prototype.setTransform=function(M,W,X,Y,ie,le){M=isNaN(M)?1:M,W=isNaN(W)?0:W,X=isNaN(X)?0:X,Y=isNaN(Y)?1:Y,ie=isNaN(ie)?0:ie,le=isNaN(le)?0:le,this.ctx.transform=new l(M,W,X,Y,ie,le)};var S=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};g.prototype.drawImage=function(M,W,X,Y,ie,le,xe,ee,fe){var ve=this.pdf.getImageProperties(M),Se=1,ke=1,Ue=1,V=1;Y!==void 0&&ee!==void 0&&(Ue=ee/Y,V=fe/ie,Se=ve.width/Y*ee/Y,ke=ve.height/ie*fe/ie),le===void 0&&(le=W,xe=X,W=0,X=0),Y!==void 0&&ee===void 0&&(ee=Y,fe=ie),Y===void 0&&ee===void 0&&(ee=ve.width,fe=ve.height);var De=this.ctx.transform.decompose(),Ze=Q(De.rotate.shx),Ve=new l,Ce=(Ve=(Ve=(Ve=Ve.multiply(De.translate)).multiply(De.skew)).multiply(De.scale)).applyToRectangle(new o(le-W*Ue,xe-X*V,Y*Se,ie*ke));if(this.autoPaging){for(var Xe,He=I.call(this,Ce),st=[],Ae=0;Ae<He.length;Ae+=1)st.indexOf(He[Ae])===-1&&st.push(He[Ae]);j(st);for(var bt=st[0],gt=st[st.length-1],$e=bt;$e<gt+1;$e++){this.pdf.setPage($e);var at=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Nt=$e===1?this.posY+this.margin[0]:this.margin[0],Ye=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],xt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],et=$e===1?0:Ye+($e-2)*xt;if(this.ctx.clip_path.length!==0){var Ot=this.path;Xe=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=T(Xe,this.posX+this.margin[3],-et+Nt+this.ctx.prevPageLastElemOffset),H.call(this,"fill",!0),this.path=Ot}var Ft=JSON.parse(JSON.stringify(Ce));Ft=T([Ft],this.posX+this.margin[3],-et+Nt+this.ctx.prevPageLastElemOffset)[0];var Ge=($e>bt||$e<gt)&&S.call(this);Ge&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],at,xt,null).clip().discardPath()),this.pdf.addImage(M,"JPEG",Ft.x,Ft.y,Ft.w,Ft.h,null,null,Ze),Ge&&this.pdf.restoreGraphicsState()}}else this.pdf.addImage(M,"JPEG",Ce.x,Ce.y,Ce.w,Ce.h,null,null,Ze)};var I=function(M,W,X){var Y=[];W=W||this.pdf.internal.pageSize.width,X=X||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var ie=this.posY+this.ctx.prevPageLastElemOffset;switch(M.type){default:case"mt":case"lt":Y.push(Math.floor((M.y+ie)/X)+1);break;case"arc":Y.push(Math.floor((M.y+ie-M.radius)/X)+1),Y.push(Math.floor((M.y+ie+M.radius)/X)+1);break;case"qct":var le=ce(this.ctx.lastPoint.x,this.ctx.lastPoint.y,M.x1,M.y1,M.x,M.y);Y.push(Math.floor((le.y+ie)/X)+1),Y.push(Math.floor((le.y+le.h+ie)/X)+1);break;case"bct":var xe=me(this.ctx.lastPoint.x,this.ctx.lastPoint.y,M.x1,M.y1,M.x2,M.y2,M.x,M.y);Y.push(Math.floor((xe.y+ie)/X)+1),Y.push(Math.floor((xe.y+xe.h+ie)/X)+1);break;case"rect":Y.push(Math.floor((M.y+ie)/X)+1),Y.push(Math.floor((M.y+M.h+ie)/X)+1)}for(var ee=0;ee<Y.length;ee+=1)for(;this.pdf.internal.getNumberOfPages()<Y[ee];)w.call(this);return Y},w=function(){var M=this.fillStyle,W=this.strokeStyle,X=this.font,Y=this.lineCap,ie=this.lineWidth,le=this.lineJoin;this.pdf.addPage(),this.fillStyle=M,this.strokeStyle=W,this.font=X,this.lineCap=Y,this.lineWidth=ie,this.lineJoin=le},T=function(M,W,X){for(var Y=0;Y<M.length;Y++)switch(M[Y].type){case"bct":M[Y].x2+=W,M[Y].y2+=X;case"qct":M[Y].x1+=W,M[Y].y1+=X;default:M[Y].x+=W,M[Y].y+=X}return M},j=function(M){return M.sort(function(W,X){return W-X})},D=function(M,W){var X=this.fillStyle,Y=this.strokeStyle,ie=this.lineCap,le=this.lineWidth,xe=Math.abs(le*this.ctx.transform.scaleX),ee=this.lineJoin;if(this.autoPaging){for(var fe,ve,Se=JSON.parse(JSON.stringify(this.path)),ke=JSON.parse(JSON.stringify(this.path)),Ue=[],V=0;V<ke.length;V++)if(ke[V].x!==void 0)for(var De=I.call(this,ke[V]),Ze=0;Ze<De.length;Ze+=1)Ue.indexOf(De[Ze])===-1&&Ue.push(De[Ze]);for(var Ve=0;Ve<Ue.length;Ve++)for(;this.pdf.internal.getNumberOfPages()<Ue[Ve];)w.call(this);j(Ue);for(var Ce=Ue[0],Xe=Ue[Ue.length-1],He=Ce;He<Xe+1;He++){this.pdf.setPage(He),this.fillStyle=X,this.strokeStyle=Y,this.lineCap=ie,this.lineWidth=xe,this.lineJoin=ee;var st=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ae=He===1?this.posY+this.margin[0]:this.margin[0],bt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],gt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],$e=He===1?0:bt+(He-2)*gt;if(this.ctx.clip_path.length!==0){var at=this.path;fe=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=T(fe,this.posX+this.margin[3],-$e+Ae+this.ctx.prevPageLastElemOffset),H.call(this,M,!0),this.path=at}if(ve=JSON.parse(JSON.stringify(Se)),this.path=T(ve,this.posX+this.margin[3],-$e+Ae+this.ctx.prevPageLastElemOffset),W===!1||He===0){var Nt=(He>Ce||He<Xe)&&S.call(this);Nt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],st,gt,null).clip().discardPath()),H.call(this,M,W),Nt&&this.pdf.restoreGraphicsState()}this.lineWidth=le}this.path=Se}else this.lineWidth=xe,H.call(this,M,W),this.lineWidth=le},H=function(M,W){if((M!=="stroke"||W||!N.call(this))&&(M==="stroke"||W||!p.call(this))){for(var X,Y,ie=[],le=this.path,xe=0;xe<le.length;xe++){var ee=le[xe];switch(ee.type){case"begin":ie.push({begin:!0});break;case"close":ie.push({close:!0});break;case"mt":ie.push({start:ee,deltas:[],abs:[]});break;case"lt":var fe=ie.length;if(le[xe-1]&&!isNaN(le[xe-1].x)&&(X=[ee.x-le[xe-1].x,ee.y-le[xe-1].y],fe>0)){for(;fe>=0;fe--)if(ie[fe-1].close!==!0&&ie[fe-1].begin!==!0){ie[fe-1].deltas.push(X),ie[fe-1].abs.push(ee);break}}break;case"bct":X=[ee.x1-le[xe-1].x,ee.y1-le[xe-1].y,ee.x2-le[xe-1].x,ee.y2-le[xe-1].y,ee.x-le[xe-1].x,ee.y-le[xe-1].y],ie[ie.length-1].deltas.push(X);break;case"qct":var ve=le[xe-1].x+2/3*(ee.x1-le[xe-1].x),Se=le[xe-1].y+2/3*(ee.y1-le[xe-1].y),ke=ee.x+2/3*(ee.x1-ee.x),Ue=ee.y+2/3*(ee.y1-ee.y),V=ee.x,De=ee.y;X=[ve-le[xe-1].x,Se-le[xe-1].y,ke-le[xe-1].x,Ue-le[xe-1].y,V-le[xe-1].x,De-le[xe-1].y],ie[ie.length-1].deltas.push(X);break;case"arc":ie.push({deltas:[],abs:[],arc:!0}),Array.isArray(ie[ie.length-1].abs)&&ie[ie.length-1].abs.push(ee)}}Y=W?null:M==="stroke"?"stroke":"fill";for(var Ze=!1,Ve=0;Ve<ie.length;Ve++)if(ie[Ve].arc)for(var Ce=ie[Ve].abs,Xe=0;Xe<Ce.length;Xe++){var He=Ce[Xe];He.type==="arc"?_.call(this,He.x,He.y,He.radius,He.startAngle,He.endAngle,He.counterclockwise,void 0,W,!Ze):L.call(this,He.x,He.y),Ze=!0}else if(ie[Ve].close===!0)this.pdf.internal.out("h"),Ze=!1;else if(ie[Ve].begin!==!0){var st=ie[Ve].start.x,Ae=ie[Ve].start.y;z.call(this,ie[Ve].deltas,st,Ae),Ze=!0}Y&&A.call(this,Y),W&&R.call(this)}},J=function(M){var W=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,X=W*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return M-X;case"top":return M+W-X;case"hanging":return M+W-2*X;case"middle":return M+W/2-X;default:return M}},O=function(M){return M+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};g.prototype.createLinearGradient=function(){var M=function(){};return M.colorStops=[],M.addColorStop=function(W,X){this.colorStops.push([W,X])},M.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},M.isCanvasGradient=!0,M},g.prototype.createPattern=function(){return this.createLinearGradient()},g.prototype.createRadialGradient=function(){return this.createLinearGradient()};var _=function(M,W,X,Y,ie,le,xe,ee,fe){for(var ve=ae.call(this,X,Y,ie,le),Se=0;Se<ve.length;Se++){var ke=ve[Se];Se===0&&(fe?E.call(this,ke.x1+M,ke.y1+W):L.call(this,ke.x1+M,ke.y1+W)),Z.call(this,M,W,ke.x2,ke.y2,ke.x3,ke.y3,ke.x4,ke.y4)}ee?R.call(this):A.call(this,xe)},A=function(M){switch(M){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},R=function(){this.pdf.clip(),this.pdf.discardPath()},E=function(M,W){this.pdf.internal.out(n(M)+" "+r(W)+" m")},C=function(M){var W;switch(M.align){case"right":case"end":W="right";break;case"center":W="center";break;default:W="left"}var X,Y,ie,le=this.pdf.getTextDimensions(M.text),xe=J.call(this,M.y),ee=O.call(this,xe)-le.h,fe=this.ctx.transform.applyToPoint(new a(M.x,xe));if(this.autoPaging){var ve=this.ctx.transform.decompose(),Se=new l;Se=(Se=(Se=Se.multiply(ve.translate)).multiply(ve.skew)).multiply(ve.scale);for(var ke=this.ctx.transform.applyToRectangle(new o(M.x,xe,le.w,le.h)),Ue=Se.applyToRectangle(new o(M.x,ee,le.w,le.h)),V=I.call(this,Ue),De=[],Ze=0;Ze<V.length;Ze+=1)De.indexOf(V[Ze])===-1&&De.push(V[Ze]);j(De);for(var Ve=De[0],Ce=De[De.length-1],Xe=Ve;Xe<Ce+1;Xe++){this.pdf.setPage(Xe);var He=Xe===1?this.posY+this.margin[0]:this.margin[0],st=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ae=this.pdf.internal.pageSize.height-this.margin[2],bt=Ae-this.margin[0],gt=this.pdf.internal.pageSize.width-this.margin[1],$e=gt-this.margin[3],at=Xe===1?0:st+(Xe-2)*bt;if(this.ctx.clip_path.length!==0){var Nt=this.path;X=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=T(X,this.posX+this.margin[3],-1*at+He),H.call(this,"fill",!0),this.path=Nt}var Ye=T([JSON.parse(JSON.stringify(Ue))],this.posX+this.margin[3],-at+He+this.ctx.prevPageLastElemOffset)[0];M.scale>=.01&&(Y=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Y*M.scale),ie=this.lineWidth,this.lineWidth=ie*M.scale);var xt=this.autoPaging!=="text";if(xt||Ye.y+Ye.h<=Ae){if(xt||Ye.y>=He&&Ye.x<=gt){var et=xt?M.text:this.pdf.splitTextToSize(M.text,M.maxWidth||gt-Ye.x)[0],Ot=T([JSON.parse(JSON.stringify(ke))],this.posX+this.margin[3],-at+He+this.ctx.prevPageLastElemOffset)[0],Ft=xt&&(Xe>Ve||Xe<Ce)&&S.call(this);Ft&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],$e,bt,null).clip().discardPath()),this.pdf.text(et,Ot.x,Ot.y,{angle:M.angle,align:W,renderingMode:M.renderingMode}),Ft&&this.pdf.restoreGraphicsState()}}else Ye.y<Ae&&(this.ctx.prevPageLastElemOffset+=Ae-Ye.y);M.scale>=.01&&(this.pdf.setFontSize(Y),this.lineWidth=ie)}}else M.scale>=.01&&(Y=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Y*M.scale),ie=this.lineWidth,this.lineWidth=ie*M.scale),this.pdf.text(M.text,fe.x+this.posX,fe.y+this.posY,{angle:M.angle,align:W,renderingMode:M.renderingMode,maxWidth:M.maxWidth}),M.scale>=.01&&(this.pdf.setFontSize(Y),this.lineWidth=ie)},L=function(M,W,X,Y){X=X||0,Y=Y||0,this.pdf.internal.out(n(M+X)+" "+r(W+Y)+" l")},z=function(M,W,X){return this.pdf.lines(M,W,X,null,null)},Z=function(M,W,X,Y,ie,le,xe,ee){this.pdf.internal.out([e(s(X+M)),e(i(Y+W)),e(s(ie+M)),e(i(le+W)),e(s(xe+M)),e(i(ee+W)),"c"].join(" "))},ae=function(M,W,X,Y){for(var ie=2*Math.PI,le=Math.PI/2;W>X;)W-=ie;var xe=Math.abs(X-W);xe<ie&&Y&&(xe=ie-xe);for(var ee=[],fe=Y?-1:1,ve=W;xe>1e-5;){var Se=ve+fe*Math.min(xe,le);ee.push(ue.call(this,M,ve,Se)),xe-=Math.abs(Se-ve),ve=Se}return ee},ue=function(M,W,X){var Y=(X-W)/2,ie=M*Math.cos(Y),le=M*Math.sin(Y),xe=ie,ee=-le,fe=xe*xe+ee*ee,ve=fe+xe*ie+ee*le,Se=4/3*(Math.sqrt(2*fe*ve)-ve)/(xe*le-ee*ie),ke=xe-Se*ee,Ue=ee+Se*xe,V=ke,De=-Ue,Ze=Y+W,Ve=Math.cos(Ze),Ce=Math.sin(Ze);return{x1:M*Math.cos(W),y1:M*Math.sin(W),x2:ke*Ve-Ue*Ce,y2:ke*Ce+Ue*Ve,x3:V*Ve-De*Ce,y3:V*Ce+De*Ve,x4:M*Math.cos(X),y4:M*Math.sin(X)}},Q=function(M){return 180*M/Math.PI},ce=function(M,W,X,Y,ie,le){var xe=M+.5*(X-M),ee=W+.5*(Y-W),fe=ie+.5*(X-ie),ve=le+.5*(Y-le),Se=Math.min(M,ie,xe,fe),ke=Math.max(M,ie,xe,fe),Ue=Math.min(W,le,ee,ve),V=Math.max(W,le,ee,ve);return new o(Se,Ue,ke-Se,V-Ue)},me=function(M,W,X,Y,ie,le,xe,ee){var fe,ve,Se,ke,Ue,V,De,Ze,Ve,Ce,Xe,He,st,Ae,bt=X-M,gt=Y-W,$e=ie-X,at=le-Y,Nt=xe-ie,Ye=ee-le;for(ve=0;ve<41;ve++)Ve=(De=(Se=M+(fe=ve/40)*bt)+fe*((Ue=X+fe*$e)-Se))+fe*(Ue+fe*(ie+fe*Nt-Ue)-De),Ce=(Ze=(ke=W+fe*gt)+fe*((V=Y+fe*at)-ke))+fe*(V+fe*(le+fe*Ye-V)-Ze),ve==0?(Xe=Ve,He=Ce,st=Ve,Ae=Ce):(Xe=Math.min(Xe,Ve),He=Math.min(He,Ce),st=Math.max(st,Ve),Ae=Math.max(Ae,Ce));return new o(Math.round(Xe),Math.round(He),Math.round(st-Xe),Math.round(Ae-He))},ye=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var M,W,X=(M=this.ctx.lineDash,W=this.ctx.lineDashOffset,JSON.stringify({lineDash:M,lineDashOffset:W}));this.prevLineDash!==X&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=X)}}})(vt.API),function(t){var e=function(a){var o,l,c,d,g,y,p,N,S,I;for(l=[],c=0,d=(a+=o="\0\0\0\0".slice(a.length%4||4)).length;d>c;c+=4)(g=(a.charCodeAt(c)<<24)+(a.charCodeAt(c+1)<<16)+(a.charCodeAt(c+2)<<8)+a.charCodeAt(c+3))!==0?(y=(g=((g=((g=((g=(g-(I=g%85))/85)-(S=g%85))/85)-(N=g%85))/85)-(p=g%85))/85)%85,l.push(y+33,p+33,N+33,S+33,I+33)):l.push(122);return function(w,T){for(var j=T;j>0;j--)w.pop()}(l,o.length),String.fromCharCode.apply(String,l)+"~>"},n=function(a){var o,l,c,d,g,y=String,p="length",N=255,S="charCodeAt",I="slice",w="replace";for(a[I](-2),a=a[I](0,-2)[w](/\s/g,"")[w]("z","!!!!!"),c=[],d=0,g=(a+=o="uuuuu"[I](a[p]%5||5))[p];g>d;d+=5)l=52200625*(a[S](d)-33)+614125*(a[S](d+1)-33)+7225*(a[S](d+2)-33)+85*(a[S](d+3)-33)+(a[S](d+4)-33),c.push(N&l>>24,N&l>>16,N&l>>8,N&l);return function(T,j){for(var D=j;D>0;D--)T.pop()}(c,o[p]),y.fromCharCode.apply(y,c)},r=function(a){return a.split("").map(function(o){return("0"+o.charCodeAt().toString(16)).slice(-2)}).join("")+">"},s=function(a){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((a=a.replace(/\s/g,"")).indexOf(">")!==-1&&(a=a.substr(0,a.indexOf(">"))),a.length%2&&(a+="0"),o.test(a)===!1)return"";for(var l="",c=0;c<a.length;c+=2)l+=String.fromCharCode("0x"+(a[c]+a[c+1]));return l},i=function(a){for(var o=new Uint8Array(a.length),l=a.length;l--;)o[l]=a.charCodeAt(l);return(o=$2(o)).reduce(function(c,d){return c+String.fromCharCode(d)},"")};t.processDataByFilters=function(a,o){var l=0,c=a||"",d=[];for(typeof(o=o||[])=="string"&&(o=[o]),l=0;l<o.length;l+=1)switch(o[l]){case"ASCII85Decode":case"/ASCII85Decode":c=n(c),d.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":c=e(c),d.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":c=s(c),d.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":c=r(c),d.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":c=i(c),d.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[l]+'" is not implemented')}return{data:c,reverseChain:d.reverse().join(" ")}}}(vt.API),function(t){t.loadFile=function(e,n,r){return function(s,i,a){i=i!==!1,a=typeof a=="function"?a:function(){};var o=void 0;try{o=function(l,c,d){var g=new XMLHttpRequest,y=0,p=function(N){var S=N.length,I=[],w=String.fromCharCode;for(y=0;y<S;y+=1)I.push(w(255&N.charCodeAt(y)));return I.join("")};if(g.open("GET",l,!c),g.overrideMimeType("text/plain; charset=x-user-defined"),c===!1&&(g.onload=function(){g.status===200?d(p(this.responseText)):d(void 0)}),g.send(null),c&&g.status===200)return p(g.responseText)}(s,i,a)}catch{}return o}(e,n,r)},t.loadImageFile=t.loadFile}(vt.API),function(t){function e(){return(Tt.html2canvas?Promise.resolve(Tt.html2canvas):H0(()=>import("./html2canvas.esm-CBrSDip1.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function n(){return(Tt.DOMPurify?Promise.resolve(Tt.DOMPurify):H0(()=>import("./purify.es-B9ZVCkUG.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var r=function(o){var l=xn(o);return l==="undefined"?"undefined":l==="string"||o instanceof String?"string":l==="number"||o instanceof Number?"number":l==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":l==="object"?"object":"unknown"},s=function(o,l){var c=document.createElement(o);for(var d in l.className&&(c.className=l.className),l.innerHTML&&l.dompurify&&(c.innerHTML=l.dompurify.sanitize(l.innerHTML)),l.style)c.style[d]=l.style[d];return c},i=function o(l,c){for(var d=l.nodeType===3?document.createTextNode(l.nodeValue):l.cloneNode(!1),g=l.firstChild;g;g=g.nextSibling)c!==!0&&g.nodeType===1&&g.nodeName==="SCRIPT"||d.appendChild(o(g,c));return l.nodeType===1&&(l.nodeName==="CANVAS"?(d.width=l.width,d.height=l.height,d.getContext("2d").drawImage(l,0,0)):l.nodeName!=="TEXTAREA"&&l.nodeName!=="SELECT"||(d.value=l.value),d.addEventListener("load",function(){d.scrollTop=l.scrollTop,d.scrollLeft=l.scrollLeft},!0)),d},a=function o(l){var c=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),d=o.convert(Promise.resolve(),c);return(d=d.setProgress(1,o,1,[o])).set(l)};(a.prototype=Object.create(Promise.prototype)).constructor=a,a.convert=function(o,l){return o.__proto__=l||a.prototype,o},a.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},a.prototype.from=function(o,l){return this.then(function(){switch(l=l||function(c){switch(r(c)){case"string":return"string";case"element":return c.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(o),l){case"string":return this.then(n).then(function(c){return this.set({src:s("div",{innerHTML:o,dompurify:c})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},a.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},a.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},l=i(this.prop.src,this.opt.html2canvas.javascriptEnabled);l.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=s("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=s("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(l),this.prop.container.firstChild.appendChild(s("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},a.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(l){var c=Object.assign({},this.opt.html2canvas);return delete c.onrendered,l(this.prop.container,c)}).then(function(l){(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},a.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(l){var c=this.opt.jsPDF,d=this.opt.fontFaces,g=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,y=Object.assign({async:!0,allowTaint:!0,scale:g,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete y.onrendered,c.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,c.context2d.posX=this.opt.x,c.context2d.posY=this.opt.y,c.context2d.margin=this.opt.margin,c.context2d.fontFaces=d,d)for(var p=0;p<d.length;++p){var N=d[p],S=N.src.find(function(I){return I.format==="truetype"});S&&c.addFont(S.url,N.ref.name,N.ref.style)}return y.windowHeight=y.windowHeight||0,y.windowHeight=y.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):y.windowHeight,c.context2d.save(!0),l(this.prop.container,y)}).then(function(l){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},a.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},a.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},a.prototype.output=function(o,l,c){return(c=c||"pdf").toLowerCase()==="img"||c.toLowerCase()==="image"?this.outputImg(o,l):this.outputPdf(o,l)},a.prototype.outputPdf=function(o,l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,l)})},a.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},a.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},a.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},a.prototype.set=function(o){if(r(o)!=="object")return this;var l=Object.keys(o||{}).map(function(c){if(c in a.template.prop)return function(){this.prop[c]=o[c]};switch(c){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[c]=o[c]}}},this);return this.then(function(){return this.thenList(l)})},a.prototype.get=function(o,l){return this.then(function(){var c=o in a.template.prop?this.prop[o]:this.opt[o];return l?l(c):c})},a.prototype.setMargin=function(o){return this.then(function(){switch(r(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},a.prototype.setPageSize=function(o){function l(c,d){return Math.floor(c*d/72*96)}return this.then(function(){(o=o||vt.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:l(o.inner.width,o.k),height:l(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},a.prototype.setProgress=function(o,l,c,d){return o!=null&&(this.progress.val=o),l!=null&&(this.progress.state=l),c!=null&&(this.progress.n=c),d!=null&&(this.progress.stack=d),this.progress.ratio=this.progress.val/this.progress.state,this},a.prototype.updateProgress=function(o,l,c,d){return this.setProgress(o?this.progress.val+o:null,l||null,c?this.progress.n+c:null,d?this.progress.stack.concat(d):null)},a.prototype.then=function(o,l){var c=this;return this.thenCore(o,l,function(d,g){return c.updateProgress(null,null,1,[d]),Promise.prototype.then.call(this,function(y){return c.updateProgress(null,d),y}).then(d,g).then(function(y){return c.updateProgress(1),y})})},a.prototype.thenCore=function(o,l,c){c=c||Promise.prototype.then;var d=this;o&&(o=o.bind(d)),l&&(l=l.bind(d));var g=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?d:a.convert(Object.assign({},d),Promise.prototype),y=c.call(g,o,l);return a.convert(y,d.__proto__)},a.prototype.thenExternal=function(o,l){return Promise.prototype.then.call(this,o,l)},a.prototype.thenList=function(o){var l=this;return o.forEach(function(c){l=l.thenCore(c)}),l},a.prototype.catch=function(o){o&&(o=o.bind(this));var l=Promise.prototype.catch.call(this,o);return a.convert(l,this)},a.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},a.prototype.error=function(o){return this.then(function(){throw new Error(o)})},a.prototype.using=a.prototype.set,a.prototype.saveAs=a.prototype.save,a.prototype.export=a.prototype.output,a.prototype.run=a.prototype.then,vt.getPageSize=function(o,l,c){if(xn(o)==="object"){var d=o;o=d.orientation,l=d.unit||l,c=d.format||c}l=l||"mm",c=c||"a4",o=(""+(o||"P")).toLowerCase();var g,y=(""+c).toLowerCase(),p={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(l){case"pt":g=1;break;case"mm":g=72/25.4;break;case"cm":g=72/2.54;break;case"in":g=72;break;case"px":g=.75;break;case"pc":case"em":g=12;break;case"ex":g=6;break;default:throw"Invalid unit: "+l}var N,S=0,I=0;if(p.hasOwnProperty(y))S=p[y][1]/g,I=p[y][0]/g;else try{S=c[1],I=c[0]}catch{throw new Error("Invalid format: "+c)}if(o==="p"||o==="portrait")o="p",I>S&&(N=I,I=S,S=N);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",S>I&&(N=I,I=S,S=N)}return{width:I,height:S,unit:l,k:g,orientation:o}},t.html=function(o,l){(l=l||{}).callback=l.callback||function(){},l.html2canvas=l.html2canvas||{},l.html2canvas.canvas=l.html2canvas.canvas||this.canvas,l.jsPDF=l.jsPDF||this,l.fontFaces=l.fontFaces?l.fontFaces.map(l1):null;var c=new a(l);return l.worker?c:c.from(o).doCallback()}}(vt.API),vt.API.addJS=function(t){return r4=t,this.internal.events.subscribe("postPutResources",function(){gp=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(gp+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),n4=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+r4+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){gp!==void 0&&n4!==void 0&&this.internal.out("/Names <</JavaScript "+gp+" 0 R>>")}),this},function(t){var e;t.events.push(["postPutResources",function(){var n=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var s=n.outline.render().split(/\r\n/),i=0;i<s.length;i++){var a=s[i],o=r.exec(a);if(o!=null){var l=o[1];n.internal.newObjectDeferredBegin(l,!1)}n.internal.write(a)}if(this.outline.createNamedDestinations){var c=this.internal.pages.length,d=[];for(i=0;i<c;i++){var g=n.internal.newObject();d.push(g);var y=n.internal.getPageInfo(i+1);n.internal.write("<< /D["+y.objId+" 0 R /XYZ null null null]>> endobj")}var p=n.internal.newObject();for(n.internal.write("<< /Names [ "),i=0;i<d.length;i++)n.internal.write("(page_"+(i+1)+")"+d[i]+" 0 R");n.internal.write(" ] >>","endobj"),e=n.internal.newObject(),n.internal.write("<< /Dests "+p+" 0 R"),n.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){var n=this;n.outline.root.children.length>0&&(n.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&n.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var n=this;n.outline={createNamedDestinations:!1,root:{children:[]}},n.outline.add=function(r,s,i){var a={title:s,options:i,children:[]};return r==null&&(r=this.root),r.children.push(a),a},n.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=n,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},n.outline.genIds_r=function(r){r.id=n.internal.newObjectDeferred();for(var s=0;s<r.children.length;s++)this.genIds_r(r.children[s])},n.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},n.outline.renderItems=function(r){for(var s=this.ctx.pdf.internal.getVerticalCoordinateString,i=0;i<r.children.length;i++){var a=r.children[i];this.objStart(a),this.line("/Title "+this.makeString(a.title)),this.line("/Parent "+this.makeRef(r)),i>0&&this.line("/Prev "+this.makeRef(r.children[i-1])),i<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[i+1])),a.children.length>0&&(this.line("/First "+this.makeRef(a.children[0])),this.line("/Last "+this.makeRef(a.children[a.children.length-1])));var o=this.count=this.count_r({count:0},a);if(o>0&&this.line("/Count "+o),a.options&&a.options.pageNumber){var l=n.internal.getPageInfo(a.options.pageNumber);this.line("/Dest ["+l.objId+" 0 R /XYZ 0 "+s(0)+" 0]")}this.objEnd()}for(var c=0;c<r.children.length;c++)this.renderItems(r.children[c])},n.outline.line=function(r){this.ctx.val+=r+`\r
`},n.outline.makeRef=function(r){return r.id+" 0 R"},n.outline.makeString=function(r){return"("+n.internal.pdfEscape(r)+")"},n.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},n.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},n.outline.count_r=function(r,s){for(var i=0;i<s.children.length;i++)r.count++,this.count_r(r,s.children[i]);return r.count}}])}(vt.API),function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(n,r,s,i,a,o){var l,c=this.decode.DCT_DECODE,d=null;if(typeof n=="string"||this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n)){switch(n=a||n,n=this.__addimage__.isArrayBuffer(n)?new Uint8Array(n):n,l=function(g){for(var y,p=256*g.charCodeAt(4)+g.charCodeAt(5),N=g.length,S={width:0,height:0,numcomponents:1},I=4;I<N;I+=2){if(I+=p,e.indexOf(g.charCodeAt(I+1))!==-1){y=256*g.charCodeAt(I+5)+g.charCodeAt(I+6),S={width:256*g.charCodeAt(I+7)+g.charCodeAt(I+8),height:y,numcomponents:g.charCodeAt(I+9)};break}p=256*g.charCodeAt(I+2)+g.charCodeAt(I+3)}return S}(n=this.__addimage__.isArrayBufferView(n)?this.__addimage__.arrayBufferToBinaryString(n):n),l.numcomponents){case 1:o=this.color_spaces.DEVICE_GRAY;break;case 4:o=this.color_spaces.DEVICE_CMYK;break;case 3:o=this.color_spaces.DEVICE_RGB}d={data:n,width:l.width,height:l.height,colorSpace:o,bitsPerComponent:8,filter:c,index:r,alias:s}}return d}}(vt.API),vt.API.processPNG=function(t,e,n,r){if(this.__addimage__.isArrayBuffer(t)&&(t=new Uint8Array(t)),this.__addimage__.isArrayBufferView(t)){var s,i=tB(t,{checkCrc:!0}),a=i.width,o=i.height,l=i.channels,c=i.palette,d=i.depth;s=c&&l===1?function(_){for(var A=_.width,R=_.height,E=_.data,C=_.palette,L=_.depth,z=!1,Z=[],ae=[],ue=void 0,Q=!1,ce=0,me=0;me<C.length;me++){var ye=o_(C[me],4),M=ye[0],W=ye[1],X=ye[2],Y=ye[3];Z.push(M,W,X),Y!=null&&(Y===0?(ce++,ae.length<1&&ae.push(me)):Y<255&&(Q=!0))}if(Q||ce>1){z=!0,ae=void 0;var ie=A*R;ue=new Uint8Array(ie);for(var le=new DataView(E.buffer),xe=0;xe<ie;xe++){var ee=u1(le,xe,L),fe=o_(C[ee],4)[3];ue[xe]=fe}}else ce===0&&(ae=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:z?8:void 0,colorBytes:E,alphaBytes:ue,needSMask:z,palette:Z,mask:ae}}(i):l===2||l===4?function(_){for(var A=_.data,R=_.width,E=_.height,C=_.channels,L=_.depth,z=C===2?"DeviceGray":"DeviceRGB",Z=C-1,ae=R*E,ue=Z,Q=ae*ue,ce=1*ae,me=Math.ceil(Q*L/8),ye=Math.ceil(ce*L/8),M=new Uint8Array(me),W=new Uint8Array(ye),X=new DataView(A.buffer),Y=new DataView(M.buffer),ie=new DataView(W.buffer),le=!1,xe=0;xe<ae;xe++){for(var ee=xe*C,fe=0;fe<ue;fe++)h4(Y,u1(X,ee+fe,L),xe*ue+fe,L);var ve=u1(X,ee+ue,L);ve<(1<<L)-1&&(le=!0),h4(ie,ve,1*xe,L)}return{colorSpace:z,colorsPerPixel:Z,sMaskBitsPerComponent:le?L:void 0,colorBytes:M,alphaBytes:W,needSMask:le}}(i):function(_){var A=_.data,R=_.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:R,colorsPerPixel:R==="DeviceGray"?1:3,colorBytes:A instanceof Uint16Array?function(E){for(var C=E.length,L=new Uint8Array(2*C),z=new DataView(L.buffer,L.byteOffset,L.byteLength),Z=0;Z<C;Z++)z.setUint16(2*Z,E[Z],!1);return L}(A):A,needSMask:!1}}(i);var g,y,p,N=s,S=N.colorSpace,I=N.colorsPerPixel,w=N.sMaskBitsPerComponent,T=N.colorBytes,j=N.alphaBytes,D=N.needSMask,H=N.palette,J=N.mask,O=null;return r!==vt.API.image_compression.NONE&&typeof $2=="function"?(O=function(_){var A;switch(_){case vt.API.image_compression.FAST:A=11;break;case vt.API.image_compression.MEDIUM:A=13;break;case vt.API.image_compression.SLOW:A=14;break;default:A=12}return A}(r),g=this.decode.FLATE_DECODE,y="/Predictor ".concat(O," /Colors ").concat(I," /BitsPerComponent ").concat(d," /Columns ").concat(a),t=o4(T,Math.ceil(a*I*d/8),I,d,r),D&&(p=o4(j,Math.ceil(a*w/8),1,w,r))):(g=void 0,y=void 0,t=T,D&&(p=j)),(this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t))&&(t=this.__addimage__.arrayBufferToBinaryString(t)),(p&&this.__addimage__.isArrayBuffer(p)||this.__addimage__.isArrayBufferView(p))&&(p=this.__addimage__.arrayBufferToBinaryString(p)),{alias:n,data:t,index:e,filter:g,decodeParameters:y,transparency:J,palette:H,sMask:p,predictor:O,width:a,height:o,bitsPerComponent:d,sMaskBitsPerComponent:w,colorSpace:S}}},function(t){t.processGIF89A=function(e,n,r,s){var i=new _B(e),a=i.width,o=i.height,l=[];i.decodeAndBlitFrameRGBA(0,l);var c={data:l,width:a,height:o},d=new d1(100).encode(c,100);return t.processJPEG.call(this,d,n,r,s)},t.processGIF87A=t.processGIF89A}(vt.API),Wi.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:s,green:r,blue:n,quad:i}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Wi.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(n){Cn.log("bit decode error:"+n)}},Wi.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),n=e%4;for(t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,s=0;s<e;s++)for(var i=this.datav.getUint8(this.pos++,!0),a=r*this.width*4+8*s*4,o=0;o<8&&8*s+o<this.width;o++){var l=this.palette[i>>7-o&1];this.data[a+4*o]=l.blue,this.data[a+4*o+1]=l.green,this.data[a+4*o+2]=l.red,this.data[a+4*o+3]=255}n!==0&&(this.pos+=4-n)}},Wi.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,s=0;s<t;s++){var i=this.datav.getUint8(this.pos++,!0),a=r*this.width*4+2*s*4,o=i>>4,l=15&i,c=this.palette[o];if(this.data[a]=c.blue,this.data[a+1]=c.green,this.data[a+2]=c.red,this.data[a+3]=255,2*s+1>=this.width)break;c=this.palette[l],this.data[a+4]=c.blue,this.data[a+4+1]=c.green,this.data[a+4+2]=c.red,this.data[a+4+3]=255}e!==0&&(this.pos+=4-e)}},Wi.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var s=this.datav.getUint8(this.pos++,!0),i=n*this.width*4+4*r;if(s<this.palette.length){var a=this.palette[s];this.data[i]=a.red,this.data[i+1]=a.green,this.data[i+2]=a.blue,this.data[i+3]=255}else this.data[i]=255,this.data[i+1]=255,this.data[i+2]=255,this.data[i+3]=255}t!==0&&(this.pos+=4-t)}},Wi.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,s=0;s<this.width;s++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(i&e)/e*255|0,o=(i>>5&e)/e*255|0,l=(i>>10&e)/e*255|0,c=i>>15?255:0,d=r*this.width*4+4*s;this.data[d]=l,this.data[d+1]=o,this.data[d+2]=a,this.data[d+3]=c}this.pos+=t}},Wi.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),n=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var s=this.bottom_up?r:this.height-1-r,i=0;i<this.width;i++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(a&e)/e*255|0,l=(a>>5&n)/n*255|0,c=(a>>11)/e*255|0,d=s*this.width*4+4*i;this.data[d]=c,this.data[d+1]=l,this.data[d+2]=o,this.data[d+3]=255}this.pos+=t}},Wi.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*n;this.data[a]=i,this.data[a+1]=s,this.data[a+2]=r,this.data[a+3]=255}this.pos+=this.width%4}},Wi.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*n;this.data[o]=i,this.data[o+1]=s,this.data[o+2]=r,this.data[o+3]=a}},Wi.prototype.getData=function(){return this.data},function(t){t.processBMP=function(e,n,r,s){var i=new Wi(e,!1),a=i.width,o=i.height,l={data:i.getData(),width:a,height:o},c=new d1(100).encode(l,100);return t.processJPEG.call(this,c,n,r,s)}}(vt.API),p4.prototype.getData=function(){return this.data},function(t){t.processWEBP=function(e,n,r,s){var i=new p4(e),a=i.width,o=i.height,l={data:i.getData(),width:a,height:o},c=new d1(100).encode(l,100);return t.processJPEG.call(this,c,n,r,s)}}(vt.API),vt.API.processRGBA=function(t,e,n){for(var r=t.data,s=r.length,i=new Uint8Array(s/4*3),a=new Uint8Array(s/4),o=0,l=0,c=0;c<s;c+=4){var d=r[c],g=r[c+1],y=r[c+2],p=r[c+3];i[o++]=d,i[o++]=g,i[o++]=y,a[l++]=p}var N=this.__addimage__.arrayBufferToBinaryString(i);return{alpha:this.__addimage__.arrayBufferToBinaryString(a),data:N,index:e,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},vt.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Jc=vt.API,yp=Jc.getCharWidthsArray=function(t,e){var n,r,s=(e=e||{}).font||this.internal.getFont(),i=e.fontSize||this.internal.getFontSize(),a=e.charSpace||this.internal.getCharSpace(),o=e.widths?e.widths:s.metadata.Unicode.widths,l=o.fof?o.fof:1,c=e.kerning?e.kerning:s.metadata.Unicode.kerning,d=c.fof?c.fof:1,g=e.doKerning!==!1,y=0,p=t.length,N=0,S=o[0]||l,I=[];for(n=0;n<p;n++)r=t.charCodeAt(n),typeof s.metadata.widthOfString=="function"?I.push((s.metadata.widthOfGlyph(s.metadata.characterToGlyph(r))+a*(1e3/i)||0)/1e3):(y=g&&xn(c[r])==="object"&&!isNaN(parseInt(c[r][N],10))?c[r][N]/d:0,I.push((o[r]||S)/l+y)),N=r;return I},s4=Jc.getStringUnitWidth=function(t,e){var n=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),s=e.charSpace||this.internal.getCharSpace();return Jc.processArabic&&(t=Jc.processArabic(t)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(t,n,s)/n:yp.apply(this,arguments).reduce(function(i,a){return i+a},0)},i4=function(t,e,n,r){for(var s=[],i=0,a=t.length,o=0;i!==a&&o+e[i]<n;)o+=e[i],i++;s.push(t.slice(0,i));var l=i;for(o=0;i!==a;)o+e[i]>r&&(s.push(t.slice(l,i)),o=0,l=i),o+=e[i],i++;return l!==i&&s.push(t.slice(l,i)),s},a4=function(t,e,n){n||(n={});var r,s,i,a,o,l,c,d=[],g=[d],y=n.textIndent||0,p=0,N=0,S=t.split(" "),I=yp.apply(this,[" ",n])[0];if(l=n.lineIndent===-1?S[0].length+2:n.lineIndent||0){var w=Array(l).join(" "),T=[];S.map(function(D){(D=D.split(/\s*\n/)).length>1?T=T.concat(D.map(function(H,J){return(J&&H.length?`
`:"")+H})):T.push(D[0])}),S=T,l=s4.apply(this,[w,n])}for(i=0,a=S.length;i<a;i++){var j=0;if(r=S[i],l&&r[0]==`
`&&(r=r.substr(1),j=1),y+p+(N=(s=yp.apply(this,[r,n])).reduce(function(D,H){return D+H},0))>e||j){if(N>e){for(o=i4.apply(this,[r,s,e-(y+p),e]),d.push(o.shift()),d=[o.pop()];o.length;)g.push([o.shift()]);N=s.slice(r.length-(d[0]?d[0].length:0)).reduce(function(D,H){return D+H},0)}else d=[r];g.push(d),y=N+l,p=I}else d.push(r),y+=p+N,p=I}return c=l?function(D,H){return(H?w:"")+D.join(" ")}:function(D){return D.join(" ")},g.map(c)},Jc.splitTextToSize=function(t,e,n){var r,s=(n=n||{}).fontSize||this.internal.getFontSize(),i=(function(d){if(d.widths&&d.kerning)return{widths:d.widths,kerning:d.kerning};var g=this.internal.getFont(d.fontName,d.fontStyle),y="Unicode";return g.metadata[y]?{widths:g.metadata[y].widths||{0:1},kerning:g.metadata[y].kerning||{}}:{font:g.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,n);r=Array.isArray(t)?t:String(t).split(/\r?\n/);var a=1*this.internal.scaleFactor*e/s;i.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/s:0,i.lineIndent=n.lineIndent;var o,l,c=[];for(o=0,l=r.length;o<l;o++)c=c.concat(a4.apply(this,[r[o],a,i]));return c},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="0123456789abcdef",n="klmnopqrstuvwxyz",r={},s={},i=0;i<16;i++)r[n[i]]=e[i],s[e[i]]=n[i];var a=function(y){return"0x"+parseInt(y,10).toString(16)},o=t.__fontmetrics__.compress=function(y){var p,N,S,I,w=["{"];for(var T in y){if(p=y[T],isNaN(parseInt(T,10))?N="'"+T+"'":(T=parseInt(T,10),N=(N=a(T).slice(2)).slice(0,-1)+s[N.slice(-1)]),typeof p=="number")p<0?(S=a(p).slice(3),I="-"):(S=a(p).slice(2),I=""),S=I+S.slice(0,-1)+s[S.slice(-1)];else{if(xn(p)!=="object")throw new Error("Don't know what to do with value type "+xn(p)+".");S=o(p)}w.push(N+S)}return w.push("}"),w.join("")},l=t.__fontmetrics__.uncompress=function(y){if(typeof y!="string")throw new Error("Invalid argument passed to uncompress.");for(var p,N,S,I,w={},T=1,j=w,D=[],H="",J="",O=y.length-1,_=1;_<O;_+=1)(I=y[_])=="'"?p?(S=p.join(""),p=void 0):p=[]:p?p.push(I):I=="{"?(D.push([j,S]),j={},S=void 0):I=="}"?((N=D.pop())[0][N[1]]=j,S=void 0,j=N[0]):I=="-"?T=-1:S===void 0?r.hasOwnProperty(I)?(H+=r[I],S=parseInt(H,16)*T,T=1,H=""):H+=I:r.hasOwnProperty(I)?(J+=r[I],j[S]=parseInt(J,16)*T,T=1,S=void 0,J=""):J+=I;return w},c={codePages:["WinAnsiEncoding"],WinAnsiEncoding:l("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},d={Unicode:{Courier:c,"Courier-Bold":c,"Courier-BoldOblique":c,"Courier-Oblique":c,Helvetica:c,"Helvetica-Bold":c,"Helvetica-BoldOblique":c,"Helvetica-Oblique":c,"Times-Roman":c,"Times-Bold":c,"Times-BoldItalic":c,"Times-Italic":c}},g={Unicode:{"Courier-Oblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":l("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":l("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:l("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:l("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":l("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":l("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(y){var p=y.font,N=g.Unicode[p.postScriptName];N&&(p.metadata.Unicode={},p.metadata.Unicode.widths=N.widths,p.metadata.Unicode.kerning=N.kerning);var S=d.Unicode[p.postScriptName];S&&(p.metadata.Unicode.encoding=S,p.encoding=S.codePages[0])}])}(vt.API),function(t){var e=function(n){for(var r=n.length,s=new Uint8Array(r),i=0;i<r;i++)s[i]=n.charCodeAt(i);return s};t.API.events.push(["addFont",function(n){var r=void 0,s=n.font,i=n.instance;if(!s.isStandardFont){if(i===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");if(typeof(r=i.existsFileInVFS(s.postScriptName)===!1?i.loadFile(s.postScriptName):i.getFileFromVFS(s.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");(function(a,o){o=/^\x00\x01\x00\x00/.test(o)?e(o):e(Vp(o)),a.metadata=t.API.TTFFont.open(o),a.metadata.Unicode=a.metadata.Unicode||{encoding:{},kerning:{},widths:[]},a.metadata.glyIdsUsed=[0]})(s,r)}}])}(vt),vt.API.addSvgAsImage=function(t,e,n,r,s,i,a,o){if(isNaN(e)||isNaN(n))throw Cn.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(r)||isNaN(s))throw Cn.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var l=document.createElement("canvas");l.width=r,l.height=s;var c=l.getContext("2d");c.fillStyle="#fff",c.fillRect(0,0,l.width,l.height);var d={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},g=this;return(Tt.canvg?Promise.resolve(Tt.canvg):H0(()=>import("./index.es-DxxzrYuM.js"),[])).catch(function(y){return Promise.reject(new Error("Could not load canvg: "+y))}).then(function(y){return y.default?y.default:y}).then(function(y){return y.fromString(c,t,d)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(y){return y.render(d)}).then(function(){g.addImage(l.toDataURL("image/jpeg",1),e,n,r,s,a,o)})},vt.API.putTotalPages=function(t){var e,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),n=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var s=0;s<this.internal.pages[r].length;s++)this.internal.pages[r][s]=this.internal.pages[r][s].replace(e,n);return this},vt.API.viewerPreferences=function(t,e){var n;t=t||{},e=e||!1;var r,s,i,a={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},o=Object.keys(a),l=[],c=0,d=0,g=0;function y(N,S){var I,w=!1;for(I=0;I<N.length;I+=1)N[I]===S&&(w=!0);return w}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(a)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var p=o.length;for(g=0;g<p;g+=1)n[o[g]].value=n[o[g]].defaultValue,n[o[g]].explicitSet=!1}if(xn(t)==="object"){for(s in t)if(i=t[s],y(o,s)&&i!==void 0){if(n[s].type==="boolean"&&typeof i=="boolean")n[s].value=i;else if(n[s].type==="name"&&y(n[s].valueSet,i))n[s].value=i;else if(n[s].type==="integer"&&Number.isInteger(i))n[s].value=i;else if(n[s].type==="array"){for(c=0;c<i.length;c+=1)if(r=!0,i[c].length===1&&typeof i[c][0]=="number")l.push(String(i[c]-1));else if(i[c].length>1){for(d=0;d<i[c].length;d+=1)typeof i[c][d]!="number"&&(r=!1);r===!0&&l.push([i[c][0]-1,i[c][1]-1].join(" "))}n[s].value="["+l.join(" ")+"]"}else n[s].value=n[s].defaultValue;n[s].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var N,S=[];for(N in n)n[N].explicitSet===!0&&(n[N].type==="name"?S.push("/"+N+" /"+n[N].value):S.push("/"+N+" "+n[N].value));S.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+S.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},function(t){var e=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',s=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),i=unescape(encodeURIComponent(r)),a=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),o=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),l=unescape(encodeURIComponent("</x:xmpmeta>")),c=i.length+a.length+o.length+s.length+l.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+c+" >>"),this.internal.write("stream"),this.internal.write(s+i+a+o+l),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(r,s){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:s||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",e)),this}}(vt.API),function(t){var e=t.API,n=e.pdfEscape16=function(i,a){for(var o,l=a.metadata.Unicode.widths,c=["","0","00","000","0000"],d=[""],g=0,y=i.length;g<y;++g){if(o=a.metadata.characterToGlyph(i.charCodeAt(g)),a.metadata.glyIdsUsed.push(o),a.metadata.toUnicode[o]=i.charCodeAt(g),l.indexOf(o)==-1&&(l.push(o),l.push([parseInt(a.metadata.widthOfGlyph(o),10)])),o=="0")return d.join("");o=o.toString(16),d.push(c[4-o.length],o)}return d.join("")},r=function(i){var a,o,l,c,d,g,y;for(d=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,l=[],g=0,y=(o=Object.keys(i).sort(function(p,N){return p-N})).length;g<y;g++)a=o[g],l.length>=100&&(d+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar`,l=[]),i[a]!==void 0&&i[a]!==null&&typeof i[a].toString=="function"&&(c=("0000"+i[a].toString(16)).slice(-4),a=("0000"+(+a).toString(16)).slice(-4),l.push("<"+a+"><"+c+">"));return l.length&&(d+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar
`),d+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(i){(function(a){var o=a.font,l=a.out,c=a.newObject,d=a.putStream;if(o.metadata instanceof t.API.TTFFont&&o.encoding==="Identity-H"){for(var g=o.metadata.Unicode.widths,y=o.metadata.subset.encode(o.metadata.glyIdsUsed,1),p="",N=0;N<y.length;N++)p+=String.fromCharCode(y[N]);var S=c();d({data:p,addLength1:!0,objectId:S}),l("endobj");var I=c();d({data:r(o.metadata.toUnicode),addLength1:!0,objectId:I}),l("endobj");var w=c();l("<<"),l("/Type /FontDescriptor"),l("/FontName /"+ru(o.fontName)),l("/FontFile2 "+S+" 0 R"),l("/FontBBox "+t.API.PDFObject.convert(o.metadata.bbox)),l("/Flags "+o.metadata.flags),l("/StemV "+o.metadata.stemV),l("/ItalicAngle "+o.metadata.italicAngle),l("/Ascent "+o.metadata.ascender),l("/Descent "+o.metadata.decender),l("/CapHeight "+o.metadata.capHeight),l(">>"),l("endobj");var T=c();l("<<"),l("/Type /Font"),l("/BaseFont /"+ru(o.fontName)),l("/FontDescriptor "+w+" 0 R"),l("/W "+t.API.PDFObject.convert(g)),l("/CIDToGIDMap /Identity"),l("/DW 1000"),l("/Subtype /CIDFontType2"),l("/CIDSystemInfo"),l("<<"),l("/Supplement 0"),l("/Registry (Adobe)"),l("/Ordering ("+o.encoding+")"),l(">>"),l(">>"),l("endobj"),o.objectNumber=c(),l("<<"),l("/Type /Font"),l("/Subtype /Type0"),l("/ToUnicode "+I+" 0 R"),l("/BaseFont /"+ru(o.fontName)),l("/Encoding /"+o.encoding),l("/DescendantFonts ["+T+" 0 R]"),l(">>"),l("endobj"),o.isAlreadyPutted=!0}})(i)}]),e.events.push(["putFont",function(i){(function(a){var o=a.font,l=a.out,c=a.newObject,d=a.putStream;if(o.metadata instanceof t.API.TTFFont&&o.encoding==="WinAnsiEncoding"){for(var g=o.metadata.rawData,y="",p=0;p<g.length;p++)y+=String.fromCharCode(g[p]);var N=c();d({data:y,addLength1:!0,objectId:N}),l("endobj");var S=c();d({data:r(o.metadata.toUnicode),addLength1:!0,objectId:S}),l("endobj");var I=c();l("<<"),l("/Descent "+o.metadata.decender),l("/CapHeight "+o.metadata.capHeight),l("/StemV "+o.metadata.stemV),l("/Type /FontDescriptor"),l("/FontFile2 "+N+" 0 R"),l("/Flags 96"),l("/FontBBox "+t.API.PDFObject.convert(o.metadata.bbox)),l("/FontName /"+ru(o.fontName)),l("/ItalicAngle "+o.metadata.italicAngle),l("/Ascent "+o.metadata.ascender),l(">>"),l("endobj"),o.objectNumber=c();for(var w=0;w<o.metadata.hmtx.widths.length;w++)o.metadata.hmtx.widths[w]=parseInt(o.metadata.hmtx.widths[w]*(1e3/o.metadata.head.unitsPerEm));l("<</Subtype/TrueType/Type/Font/ToUnicode "+S+" 0 R/BaseFont/"+ru(o.fontName)+"/FontDescriptor "+I+" 0 R/Encoding/"+o.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(o.metadata.hmtx.widths)+">>"),l("endobj"),o.isAlreadyPutted=!0}})(i)}]);var s=function(i){var a,o=i.text||"",l=i.x,c=i.y,d=i.options||{},g=i.mutex||{},y=g.pdfEscape,p=g.activeFontKey,N=g.fonts,S=p,I="",w=0,T="",j=N[S].encoding;if(N[S].encoding!=="Identity-H")return{text:o,x:l,y:c,options:d,mutex:g};for(T=o,S=p,Array.isArray(o)&&(T=o[0]),w=0;w<T.length;w+=1)N[S].metadata.hasOwnProperty("cmap")&&(a=N[S].metadata.cmap.unicode.codeMap[T[w].charCodeAt(0)]),a||T[w].charCodeAt(0)<256&&N[S].metadata.hasOwnProperty("Unicode")?I+=T[w]:I+="";var D="";return parseInt(S.slice(1))<14||j==="WinAnsiEncoding"?D=y(I,S).split("").map(function(H){return H.charCodeAt(0).toString(16)}).join(""):j==="Identity-H"&&(D=n(I,N[S])),g.isHex=!0,{text:D,x:l,y:c,options:d,mutex:g}};e.events.push(["postProcessText",function(i){var a=i.text||"",o=[],l={text:a,x:i.x,y:i.y,options:i.options,mutex:i.mutex};if(Array.isArray(a)){var c=0;for(c=0;c<a.length;c+=1)Array.isArray(a[c])&&a[c].length===3?o.push([s(Object.assign({},l,{text:a[c][0]})).text,a[c][1],a[c][2]]):o.push(s(Object.assign({},l,{text:a[c]})).text);i.text=o}else i.text=s(Object.assign({},l,{text:a})).text}])}(vt),function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0},t.addFileToVFS=function(n,r){return e.call(this),this.internal.vFS[n]=r,this},t.getFileFromVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0?this.internal.vFS[n]:null}}(vt.API),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(r){var s,i,a,o,l,c,d,g=e,y=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],p=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],N={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},S={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},I=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],w=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),T=!1,j=0;this.__bidiEngine__={};var D=function(E){var C=E.charCodeAt(),L=C>>8,z=S[L];return z!==void 0?g[256*z+(255&C)]:L===252||L===253?"AL":w.test(L)?"L":L===8?"R":"N"},H=function(E){for(var C,L=0;L<E.length;L++){if((C=D(E.charAt(L)))==="L")return!1;if(C==="R")return!0}return!1},J=function(E,C,L,z){var Z,ae,ue,Q,ce=C[z];switch(ce){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":T=!1;break;case"N":case"AN":break;case"EN":T&&(ce="AN");break;case"AL":T=!0,ce="R";break;case"WS":case"BN":ce="N";break;case"CS":z<1||z+1>=C.length||(Z=L[z-1])!=="EN"&&Z!=="AN"||(ae=C[z+1])!=="EN"&&ae!=="AN"?ce="N":T&&(ae="AN"),ce=ae===Z?ae:"N";break;case"ES":ce=(Z=z>0?L[z-1]:"B")==="EN"&&z+1<C.length&&C[z+1]==="EN"?"EN":"N";break;case"ET":if(z>0&&L[z-1]==="EN"){ce="EN";break}if(T){ce="N";break}for(ue=z+1,Q=C.length;ue<Q&&C[ue]==="ET";)ue++;ce=ue<Q&&C[ue]==="EN"?"EN":"N";break;case"NSM":if(a&&!o){for(Q=C.length,ue=z+1;ue<Q&&C[ue]==="NSM";)ue++;if(ue<Q){var me=E[z],ye=me>=1425&&me<=2303||me===64286;if(Z=C[ue],ye&&(Z==="R"||Z==="AL")){ce="R";break}}}ce=z<1||(Z=C[z-1])==="B"?"N":L[z-1];break;case"B":T=!1,s=!0,ce=j;break;case"S":i=!0,ce="N"}return ce},O=function(E,C,L){var z=E.split("");return L&&_(z,L,{hiLevel:j}),z.reverse(),C&&C.reverse(),z.join("")},_=function(E,C,L){var z,Z,ae,ue,Q,ce=-1,me=E.length,ye=0,M=[],W=j?p:y,X=[];for(T=!1,s=!1,i=!1,Z=0;Z<me;Z++)X[Z]=D(E[Z]);for(ae=0;ae<me;ae++){if(Q=ye,M[ae]=J(E,X,M,ae),z=240&(ye=W[Q][N[M[ae]]]),ye&=15,C[ae]=ue=W[ye][5],z>0)if(z===16){for(Z=ce;Z<ae;Z++)C[Z]=1;ce=-1}else ce=-1;if(W[ye][6])ce===-1&&(ce=ae);else if(ce>-1){for(Z=ce;Z<ae;Z++)C[Z]=ue;ce=-1}X[ae]==="B"&&(C[ae]=0),L.hiLevel|=ue}i&&function(Y,ie,le){for(var xe=0;xe<le;xe++)if(Y[xe]==="S"){ie[xe]=j;for(var ee=xe-1;ee>=0&&Y[ee]==="WS";ee--)ie[ee]=j}}(X,C,me)},A=function(E,C,L,z,Z){if(!(Z.hiLevel<E)){if(E===1&&j===1&&!s)return C.reverse(),void(L&&L.reverse());for(var ae,ue,Q,ce,me=C.length,ye=0;ye<me;){if(z[ye]>=E){for(Q=ye+1;Q<me&&z[Q]>=E;)Q++;for(ce=ye,ue=Q-1;ce<ue;ce++,ue--)ae=C[ce],C[ce]=C[ue],C[ue]=ae,L&&(ae=L[ce],L[ce]=L[ue],L[ue]=ae);ye=Q}ye++}}},R=function(E,C,L){var z=E.split(""),Z={hiLevel:j};return L||(L=[]),_(z,L,Z),function(ae,ue,Q){if(Q.hiLevel!==0&&d)for(var ce,me=0;me<ae.length;me++)ue[me]===1&&(ce=I.indexOf(ae[me]))>=0&&(ae[me]=I[ce+1])}(z,L,Z),A(2,z,C,L,Z),A(1,z,C,L,Z),z.join("")};return this.__bidiEngine__.doBidiReorder=function(E,C,L){if(function(Z,ae){if(ae)for(var ue=0;ue<Z.length;ue++)ae[ue]=ue;o===void 0&&(o=H(Z)),c===void 0&&(c=H(Z))}(E,C),a||!l||c)if(a&&l&&o^c)j=o?1:0,E=O(E,C,L);else if(!a&&l&&c)j=o?1:0,E=R(E,C,L),E=O(E,C);else if(!a||o||l||c){if(a&&!l&&o^c)E=O(E,C),o?(j=0,E=R(E,C,L)):(j=1,E=R(E,C,L),E=O(E,C));else if(a&&o&&!l&&c)j=1,E=R(E,C,L),E=O(E,C);else if(!a&&!l&&o^c){var z=d;o?(j=1,E=R(E,C,L),j=0,d=!1,E=R(E,C,L),d=z):(j=0,E=R(E,C,L),E=O(E,C),j=1,d=!1,E=R(E,C,L),d=z,E=O(E,C))}}else j=0,E=R(E,C,L);else j=o?1:0,E=R(E,C,L);return E},this.__bidiEngine__.setOptions=function(E){E&&(a=E.isInputVisual,l=E.isOutputVisual,o=E.isInputRtl,c=E.isOutputRtl,d=E.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(r){var s=r.text;r.x,r.y;var i=r.options||{};r.mutex,i.lang;var a=[];if(i.isInputVisual=typeof i.isInputVisual!="boolean"||i.isInputVisual,n.setOptions(i),Object.prototype.toString.call(s)==="[object Array]"){var o=0;for(a=[],o=0;o<s.length;o+=1)Object.prototype.toString.call(s[o])==="[object Array]"?a.push([n.doBidiReorder(s[o][0]),s[o][1],s[o][2]]):a.push([n.doBidiReorder(s[o])]);r.text=a}else r.text=n.doBidiReorder(s);n.setOptions({isInputVisual:!0})}])}(vt),vt.API.TTFFont=function(){function t(e){var n;if(this.rawData=e,n=this.contents=new Al(e),this.contents.pos=4,n.readString(4)==="ttcf")throw new Error("TTCF not supported.");n.pos=0,this.parse(),this.subset=new MB(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new NB(this.contents),this.head=new AB(this),this.name=new CB(this),this.cmap=new YE(this),this.toUnicode={},this.hhea=new EB(this),this.maxp=new PB(this),this.hmtx=new jB(this),this.post=new TB(this),this.os2=new kB(this),this.loca=new OB(this),this.glyf=new LB(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,n,r,s,i;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var a,o,l,c;for(c=[],a=0,o=(l=this.bbox).length;a<o;a++)e=l[a],c.push(Math.round(e*this.scaleFactor));return c}).call(this),this.stemV=0,this.post.exists?(r=255&(s=this.post.italic_angle),32768&(n=s>>16)&&(n=-(1+(65535^n))),this.italicAngle=+(n+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(i=this.familyClass)===1||i===2||i===3||i===4||i===5||i===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var n;return((n=this.cmap.unicode)!=null?n.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var n;return n=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*n},t.prototype.widthOfString=function(e,n,r){var s,i,a,o;for(a=0,i=0,o=(e=""+e).length;0<=o?i<o:i>o;i=0<=o?++i:--i)s=e.charCodeAt(i),a+=this.widthOfGlyph(this.characterToGlyph(s))+r*(1e3/n)||0;return a*(n/1e3)},t.prototype.lineHeight=function(e,n){var r;return n==null&&(n=!1),r=n?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},t}();var aa,Al=function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var n,r;for(r=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)r[n]=String.fromCharCode(this.readByte());return r.join("")},t.prototype.writeString=function(e){var n,r,s;for(s=[],n=0,r=e.length;0<=r?n<r:n>r;n=0<=r?++n:--n)s.push(this.writeByte(e.charCodeAt(n)));return s},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,n,r,s,i,a,o,l;return e=this.readByte(),n=this.readByte(),r=this.readByte(),s=this.readByte(),i=this.readByte(),a=this.readByte(),o=this.readByte(),l=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^n)+1099511627776*(255^r)+4294967296*(255^s)+16777216*(255^i)+65536*(255^a)+256*(255^o)+(255^l)+1):72057594037927940*e+281474976710656*n+1099511627776*r+4294967296*s+16777216*i+65536*a+256*o+l},t.prototype.writeLongLong=function(e){var n,r;return n=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var n,r;for(n=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)n.push(this.readByte());return n},t.prototype.write=function(e){var n,r,s,i;for(i=[],r=0,s=e.length;r<s;r++)n=e[r],i.push(this.writeByte(n));return i},t}(),NB=function(){var t;function e(n){var r,s,i;for(this.scalarType=n.readInt(),this.tableCount=n.readShort(),this.searchRange=n.readShort(),this.entrySelector=n.readShort(),this.rangeShift=n.readShort(),this.tables={},s=0,i=this.tableCount;0<=i?s<i:s>i;s=0<=i?++s:--s)r={tag:n.readString(4),checksum:n.readInt(),offset:n.readInt(),length:n.readInt()},this.tables[r.tag]=r}return e.prototype.encode=function(n){var r,s,i,a,o,l,c,d,g,y,p,N,S;for(S in p=Object.keys(n).length,l=Math.log(2),g=16*Math.floor(Math.log(p)/l),a=Math.floor(g/l),d=16*p-g,(s=new Al).writeInt(this.scalarType),s.writeShort(p),s.writeShort(g),s.writeShort(a),s.writeShort(d),i=16*p,c=s.pos+i,o=null,N=[],n)for(y=n[S],s.writeString(S),s.writeInt(t(y)),s.writeInt(c),s.writeInt(y.length),N=N.concat(y),S==="head"&&(o=c),c+=y.length;c%4;)N.push(0),c++;return s.write(N),r=2981146554-t(s.data),s.pos=o+8,s.writeUInt32(r),s.data},t=function(n){var r,s,i,a;for(n=QE.call(n);n.length%4;)n.push(0);for(i=new Al(n),s=0,r=0,a=n.length;r<a;r=r+=4)s+=i.readUInt32();return 4294967295&s},e}(),SB={}.hasOwnProperty,La=function(t,e){for(var n in e)SB.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};aa=function(){function t(e){var n;this.file=e,n=this.file.directory.tables[this.tag],this.exists=!!n,n&&(this.offset=n.offset,this.length=n.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var AB=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return La(t,aa),t.prototype.tag="head",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},t.prototype.encode=function(e){var n;return(n=new Al).writeInt(this.version),n.writeInt(this.revision),n.writeInt(this.checkSumAdjustment),n.writeInt(this.magicNumber),n.writeShort(this.flags),n.writeShort(this.unitsPerEm),n.writeLongLong(this.created),n.writeLongLong(this.modified),n.writeShort(this.xMin),n.writeShort(this.yMin),n.writeShort(this.xMax),n.writeShort(this.yMax),n.writeShort(this.macStyle),n.writeShort(this.lowestRecPPEM),n.writeShort(this.fontDirectionHint),n.writeShort(e),n.writeShort(this.glyphDataFormat),n.data},t}(),m4=function(){function t(e,n){var r,s,i,a,o,l,c,d,g,y,p,N,S,I,w,T,j;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=n+e.readInt(),g=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(l=0;l<256;++l)this.codeMap[l]=e.readByte();break;case 4:for(p=e.readUInt16(),y=p/2,e.pos+=6,i=function(){var D,H;for(H=[],l=D=0;0<=y?D<y:D>y;l=0<=y?++D:--D)H.push(e.readUInt16());return H}(),e.pos+=2,S=function(){var D,H;for(H=[],l=D=0;0<=y?D<y:D>y;l=0<=y?++D:--D)H.push(e.readUInt16());return H}(),c=function(){var D,H;for(H=[],l=D=0;0<=y?D<y:D>y;l=0<=y?++D:--D)H.push(e.readUInt16());return H}(),d=function(){var D,H;for(H=[],l=D=0;0<=y?D<y:D>y;l=0<=y?++D:--D)H.push(e.readUInt16());return H}(),s=(this.length-e.pos+this.offset)/2,o=function(){var D,H;for(H=[],l=D=0;0<=s?D<s:D>s;l=0<=s?++D:--D)H.push(e.readUInt16());return H}(),l=w=0,j=i.length;w<j;l=++w)for(I=i[l],r=T=N=S[l];N<=I?T<=I:T>=I;r=N<=I?++T:--T)d[l]===0?a=r+c[l]:(a=o[d[l]/2+(r-N)-(y-l)]||0)!==0&&(a+=c[l]),this.codeMap[r]=65535&a}e.pos=g}return t.encode=function(e,n){var r,s,i,a,o,l,c,d,g,y,p,N,S,I,w,T,j,D,H,J,O,_,A,R,E,C,L,z,Z,ae,ue,Q,ce,me,ye,M,W,X,Y,ie,le,xe,ee,fe,ve,Se;switch(z=new Al,a=Object.keys(e).sort(function(ke,Ue){return ke-Ue}),n){case"macroman":for(S=0,I=function(){var ke=[];for(N=0;N<256;++N)ke.push(0);return ke}(),T={0:0},i={},Z=0,ce=a.length;Z<ce;Z++)T[ee=e[s=a[Z]]]==null&&(T[ee]=++S),i[s]={old:e[s],new:T[e[s]]},I[s]=T[e[s]];return z.writeUInt16(1),z.writeUInt16(0),z.writeUInt32(12),z.writeUInt16(0),z.writeUInt16(262),z.writeUInt16(0),z.write(I),{charMap:i,subtable:z.data,maxGlyphID:S+1};case"unicode":for(C=[],g=[],j=0,T={},r={},w=c=null,ae=0,me=a.length;ae<me;ae++)T[H=e[s=a[ae]]]==null&&(T[H]=++j),r[s]={old:H,new:T[H]},o=T[H]-s,w!=null&&o===c||(w&&g.push(w),C.push(s),c=o),w=s;for(w&&g.push(w),g.push(65535),C.push(65535),R=2*(A=C.length),_=2*Math.pow(Math.log(A)/Math.LN2,2),y=Math.log(_/2)/Math.LN2,O=2*A-_,l=[],J=[],p=[],N=ue=0,ye=C.length;ue<ye;N=++ue){if(E=C[N],d=g[N],E===65535){l.push(0),J.push(0);break}if(E-(L=r[E].new)>=32768)for(l.push(0),J.push(2*(p.length+A-N)),s=Q=E;E<=d?Q<=d:Q>=d;s=E<=d?++Q:--Q)p.push(r[s].new);else l.push(L-E),J.push(0)}for(z.writeUInt16(3),z.writeUInt16(1),z.writeUInt32(12),z.writeUInt16(4),z.writeUInt16(16+8*A+2*p.length),z.writeUInt16(0),z.writeUInt16(R),z.writeUInt16(_),z.writeUInt16(y),z.writeUInt16(O),le=0,M=g.length;le<M;le++)s=g[le],z.writeUInt16(s);for(z.writeUInt16(0),xe=0,W=C.length;xe<W;xe++)s=C[xe],z.writeUInt16(s);for(fe=0,X=l.length;fe<X;fe++)o=l[fe],z.writeUInt16(o);for(ve=0,Y=J.length;ve<Y;ve++)D=J[ve],z.writeUInt16(D);for(Se=0,ie=p.length;Se<ie;Se++)S=p[Se],z.writeUInt16(S);return{charMap:r,subtable:z.data,maxGlyphID:j+1}}},t}(),YE=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return La(t,aa),t.prototype.tag="cmap",t.prototype.parse=function(e){var n,r,s;for(e.pos=this.offset,this.version=e.readUInt16(),s=e.readUInt16(),this.tables=[],this.unicode=null,r=0;0<=s?r<s:r>s;r=0<=s?++r:--r)n=new m4(e,this.offset),this.tables.push(n),n.isUnicode&&this.unicode==null&&(this.unicode=n);return!0},t.encode=function(e,n){var r,s;return n==null&&(n="macroman"),r=m4.encode(e,n),(s=new Al).writeUInt16(0),s.writeUInt16(1),r.table=s.data.concat(r.subtable),r},t}(),EB=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return La(t,aa),t.prototype.tag="hhea",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},t}(),kB=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return La(t,aa),t.prototype.tag="OS/2",t.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=function(){var n,r;for(r=[],n=0;n<10;++n)r.push(e.readByte());return r}(),this.charRange=function(){var n,r;for(r=[],n=0;n<4;++n)r.push(e.readInt());return r}(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=function(){var n,r;for(r=[],n=0;n<2;n=++n)r.push(e.readInt());return r}(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},t}(),TB=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return La(t,aa),t.prototype.tag="post",t.prototype.parse=function(e){var n,r,s;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:case 196608:break;case 131072:var i;for(r=e.readUInt16(),this.glyphNameIndex=[],i=0;0<=r?i<r:i>r;i=0<=r?++i:--i)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],s=[];e.pos<this.offset+this.length;)n=e.readByte(),s.push(this.names.push(e.readString(n)));return s;case 151552:return r=e.readUInt16(),this.offsets=e.read(r);case 262144:return this.map=(function(){var a,o,l;for(l=[],i=a=0,o=this.file.maxp.numGlyphs;0<=o?a<o:a>o;i=0<=o?++a:--a)l.push(e.readUInt32());return l}).call(this)}},t}(),IB=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},CB=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return La(t,aa),t.prototype.tag="name",t.prototype.parse=function(e){var n,r,s,i,a,o,l,c,d,g,y;for(e.pos=this.offset,e.readShort(),n=e.readShort(),o=e.readShort(),r=[],i=0;0<=n?i<n:i>n;i=0<=n?++i:--i)r.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+o+e.readShort()});for(l={},i=d=0,g=r.length;d<g;i=++d)s=r[i],e.pos=s.offset,c=e.readString(s.length),a=new IB(c,s),l[y=s.nameID]==null&&(l[y]=[]),l[s.nameID].push(a);this.strings=l,this.copyright=l[0],this.fontFamily=l[1],this.fontSubfamily=l[2],this.uniqueSubfamily=l[3],this.fontName=l[4],this.version=l[5];try{this.postscriptName=l[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=l[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=l[7],this.manufacturer=l[8],this.designer=l[9],this.description=l[10],this.vendorUrl=l[11],this.designerUrl=l[12],this.license=l[13],this.licenseUrl=l[14],this.preferredFamily=l[15],this.preferredSubfamily=l[17],this.compatibleFull=l[18],this.sampleText=l[19]},t}(),PB=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return La(t,aa),t.prototype.tag="maxp",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},t}(),jB=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return La(t,aa),t.prototype.tag="hmtx",t.prototype.parse=function(e){var n,r,s,i,a,o,l;for(e.pos=this.offset,this.metrics=[],n=0,o=this.file.hhea.numberOfMetrics;0<=o?n<o:n>o;n=0<=o?++n:--n)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(s=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var c,d;for(d=[],n=c=0;0<=s?c<s:c>s;n=0<=s?++c:--c)d.push(e.readInt16());return d}(),this.widths=(function(){var c,d,g,y;for(y=[],c=0,d=(g=this.metrics).length;c<d;c++)i=g[c],y.push(i.advance);return y}).call(this),r=this.widths[this.widths.length-1],l=[],n=a=0;0<=s?a<s:a>s;n=0<=s?++a:--a)l.push(this.widths.push(r));return l},t.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},t}(),QE=[].slice,LB=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return La(t,aa),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(e){var n,r,s,i,a,o,l,c,d,g;return e in this.cache?this.cache[e]:(i=this.file.loca,n=this.file.contents,r=i.indexOf(e),(s=i.lengthOf(e))===0?this.cache[e]=null:(n.pos=this.offset+r,a=(o=new Al(n.read(s))).readShort(),c=o.readShort(),g=o.readShort(),l=o.readShort(),d=o.readShort(),this.cache[e]=a===-1?new DB(o,c,g,l,d):new RB(o,a,c,g,l,d),this.cache[e]))},t.prototype.encode=function(e,n,r){var s,i,a,o,l;for(a=[],i=[],o=0,l=n.length;o<l;o++)s=e[n[o]],i.push(a.length),s&&(a=a.concat(s.encode(r)));return i.push(a.length),{table:a,offsets:i}},t}(),RB=function(){function t(e,n,r,s,i,a){this.raw=e,this.numberOfContours=n,this.xMin=r,this.yMin=s,this.xMax=i,this.yMax=a,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),DB=function(){function t(e,n,r,s,i){var a,o;for(this.raw=e,this.xMin=n,this.yMin=r,this.xMax=s,this.yMax=i,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],a=this.raw;o=a.readShort(),this.glyphOffsets.push(a.pos),this.glyphIDs.push(a.readUInt16()),32&o;)a.pos+=1&o?4:2,128&o?a.pos+=8:64&o?a.pos+=4:8&o&&(a.pos+=2)}return t.prototype.encode=function(){var e,n,r;for(n=new Al(QE.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)n.pos=this.glyphOffsets[e];return n.data},t}(),OB=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return La(t,aa),t.prototype.tag="loca",t.prototype.parse=function(e){var n,r;return e.pos=this.offset,n=this.file.head.indexToLocFormat,this.offsets=n===0?(function(){var s,i;for(i=[],r=0,s=this.length;r<s;r+=2)i.push(2*e.readUInt16());return i}).call(this):(function(){var s,i;for(i=[],r=0,s=this.length;r<s;r+=4)i.push(e.readUInt32());return i}).call(this)},t.prototype.indexOf=function(e){return this.offsets[e]},t.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},t.prototype.encode=function(e,n){for(var r=new Uint32Array(this.offsets.length),s=0,i=0,a=0;a<r.length;++a)if(r[a]=s,i<n.length&&n[i]==a){++i,r[a]=s;var o=this.offsets[a],l=this.offsets[a+1]-o;l>0&&(s+=l)}for(var c=new Array(4*r.length),d=0;d<r.length;++d)c[4*d+3]=255&r[d],c[4*d+2]=(65280&r[d])>>8,c[4*d+1]=(16711680&r[d])>>16,c[4*d]=(4278190080&r[d])>>24;return c},t}(),MB=function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,n,r,s,i;for(n in s=this.font.cmap.tables[0].codeMap,e={},i=this.subset)r=i[n],e[n]=s[r];return e},t.prototype.glyphsFor=function(e){var n,r,s,i,a,o,l;for(s={},a=0,o=e.length;a<o;a++)s[i=e[a]]=this.font.glyf.glyphFor(i);for(i in n=[],s)(r=s[i])!=null&&r.compound&&n.push.apply(n,r.glyphIDs);if(n.length>0)for(i in l=this.glyphsFor(n))r=l[i],s[i]=r;return s},t.prototype.encode=function(e,n){var r,s,i,a,o,l,c,d,g,y,p,N,S,I,w;for(s in r=YE.encode(this.generateCmap(),"unicode"),a=this.glyphsFor(e),p={0:0},w=r.charMap)p[(l=w[s]).old]=l.new;for(N in y=r.maxGlyphID,a)N in p||(p[N]=y++);return d=function(T){var j,D;for(j in D={},T)D[T[j]]=j;return D}(p),g=Object.keys(d).sort(function(T,j){return T-j}),S=function(){var T,j,D;for(D=[],T=0,j=g.length;T<j;T++)o=g[T],D.push(d[o]);return D}(),i=this.font.glyf.encode(a,S,p),c=this.font.loca.encode(i.offsets,S),I={cmap:this.font.cmap.raw(),glyf:i.table,loca:c,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(n)},this.font.os2.exists&&(I["OS/2"]=this.font.os2.raw()),this.font.directory.encode(I)},t}();vt.API.PDFObject=function(){var t;function e(){}return t=function(n,r){return(Array(r+1).join("0")+n).slice(-r)},e.convert=function(n){var r,s,i,a;if(Array.isArray(n))return"["+function(){var o,l,c;for(c=[],o=0,l=n.length;o<l;o++)r=n[o],c.push(e.convert(r));return c}().join(" ")+"]";if(typeof n=="string")return"/"+n;if(n!=null&&n.isString)return"("+n+")";if(n instanceof Date)return"(D:"+t(n.getUTCFullYear(),4)+t(n.getUTCMonth(),2)+t(n.getUTCDate(),2)+t(n.getUTCHours(),2)+t(n.getUTCMinutes(),2)+t(n.getUTCSeconds(),2)+"Z)";if({}.toString.call(n)==="[object Object]"){for(s in i=["<<"],n)a=n[s],i.push("/"+s+" "+e.convert(a));return i.push(">>"),i.join(`
`)}return""+n},e}();function XE(t,e,n,r,s){r=r||{};var i=1.15,a=s.internal.scaleFactor,o=s.internal.getFontSize()/a,l=s.getLineHeightFactor?s.getLineHeightFactor():i,c=o*l,d=/\r\n|\r|\n/g,g="",y=1;if((r.valign==="middle"||r.valign==="bottom"||r.halign==="center"||r.halign==="right")&&(g=typeof t=="string"?t.split(d):t,y=g.length||1),n+=o*(2-i),r.valign==="middle"?n-=y/2*c:r.valign==="bottom"&&(n-=y*c),r.halign==="center"||r.halign==="right"){var p=o;if(r.halign==="center"&&(p*=.5),g&&y>=1){for(var N=0;N<g.length;N++)s.text(g[N],e-s.getStringUnitWidth(g[N])*p,n),n+=c;return s}e-=s.getStringUnitWidth(t)*p}return r.halign==="justify"?s.text(t,e,n,{maxWidth:r.maxWidth||100,align:"justify"}):s.text(t,e,n),s}var g4={},ju=function(){function t(e){this.jsPDFDocument=e,this.userStyles={textColor:e.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:e.internal.getFontSize(),fontStyle:e.internal.getFont().fontStyle,font:e.internal.getFont().fontName,lineWidth:e.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:e.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return t.setDefaults=function(e,n){n===void 0&&(n=null),n?n.__autoTableDocumentDefaults=e:g4=e},t.unifyColor=function(e){return Array.isArray(e)?e:typeof e=="number"?[e,e,e]:typeof e=="string"?[e]:null},t.prototype.applyStyles=function(e,n){var r,s,i;n===void 0&&(n=!1),e.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(e.fontStyle);var a=this.jsPDFDocument.internal.getFont(),o=a.fontStyle,l=a.fontName;if(e.font&&(l=e.font),e.fontStyle){o=e.fontStyle;var c=this.getFontList()[l];c&&c.indexOf(o)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(c[0]),o=c[0])}if(this.jsPDFDocument.setFont(l,o),e.fontSize&&this.jsPDFDocument.setFontSize(e.fontSize),!n){var d=t.unifyColor(e.fillColor);d&&(r=this.jsPDFDocument).setFillColor.apply(r,d),d=t.unifyColor(e.textColor),d&&(s=this.jsPDFDocument).setTextColor.apply(s,d),d=t.unifyColor(e.lineColor),d&&(i=this.jsPDFDocument).setDrawColor.apply(i,d),typeof e.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(e.lineWidth)}},t.prototype.splitTextToSize=function(e,n,r){return this.jsPDFDocument.splitTextToSize(e,n,r)},t.prototype.rect=function(e,n,r,s,i){return this.jsPDFDocument.rect(e,n,r,s,i)},t.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},t.prototype.getTextWidth=function(e){return this.jsPDFDocument.getTextWidth(e)},t.prototype.getDocument=function(){return this.jsPDFDocument},t.prototype.setPage=function(e){this.jsPDFDocument.setPage(e)},t.prototype.addPage=function(){return this.jsPDFDocument.addPage()},t.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},t.prototype.getGlobalOptions=function(){return g4||{}},t.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},t.prototype.pageSize=function(){var e=this.jsPDFDocument.internal.pageSize;return e.width==null&&(e={width:e.getWidth(),height:e.getHeight()}),e},t.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},t.prototype.getLineHeightFactor=function(){var e=this.jsPDFDocument;return e.getLineHeightFactor?e.getLineHeightFactor():1.15},t.prototype.getLineHeight=function(e){return e/this.scaleFactor()*this.getLineHeightFactor()},t.prototype.pageNumber=function(){var e=this.jsPDFDocument.internal.getCurrentPageInfo();return e?e.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},t}(),Z2=function(t,e){return Z2=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},Z2(t,e)};function JE(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Z2(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var ZE=function(t){JE(e,t);function e(n){var r=t.call(this)||this;return r._element=n,r}return e}(Array);function FB(t){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/t,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function UB(t){var e={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return e[t]}function Um(t,e,n){n.applyStyles(e,!0);var r=Array.isArray(t)?t:[t],s=r.map(function(i){return n.getTextWidth(i)}).reduce(function(i,a){return Math.max(i,a)},0);return s}function ek(t,e,n,r){var s=e.settings.tableLineWidth,i=e.settings.tableLineColor;t.applyStyles({lineWidth:s,lineColor:i});var a=tk(s,!1);a&&t.rect(n.x,n.y,e.getWidth(t.pageSize().width),r.y-n.y,a)}function tk(t,e){var n=t>0,r=e||e===0;return n&&r?"DF":n?"S":r?"F":null}function Rg(t,e){var n,r,s,i;if(t=t||e,Array.isArray(t)){if(t.length>=4)return{top:t[0],right:t[1],bottom:t[2],left:t[3]};if(t.length===3)return{top:t[0],right:t[1],bottom:t[2],left:t[1]};if(t.length===2)return{top:t[0],right:t[1],bottom:t[0],left:t[1]};t.length===1?t=t[0]:t=e}return typeof t=="object"?(typeof t.vertical=="number"&&(t.top=t.vertical,t.bottom=t.vertical),typeof t.horizontal=="number"&&(t.right=t.horizontal,t.left=t.horizontal),{left:(n=t.left)!==null&&n!==void 0?n:e,top:(r=t.top)!==null&&r!==void 0?r:e,right:(s=t.right)!==null&&s!==void 0?s:e,bottom:(i=t.bottom)!==null&&i!==void 0?i:e}):(typeof t!="number"&&(t=e),{top:t,right:t,bottom:t,left:t})}function nk(t,e){var n=Rg(e.settings.margin,0);return t.pageSize().width-(n.left+n.right)}function VB(t,e,n,r,s){var i={},a=1.3333333333333333,o=h1(e,function(j){return s.getComputedStyle(j).backgroundColor});o!=null&&(i.fillColor=o);var l=h1(e,function(j){return s.getComputedStyle(j).color});l!=null&&(i.textColor=l);var c=zB(r,n);c&&(i.cellPadding=c);var d="borderTopColor",g=a*n,y=r.borderTopWidth;if(r.borderBottomWidth===y&&r.borderRightWidth===y&&r.borderLeftWidth===y){var p=(parseFloat(y)||0)/g;p&&(i.lineWidth=p)}else i.lineWidth={top:(parseFloat(r.borderTopWidth)||0)/g,right:(parseFloat(r.borderRightWidth)||0)/g,bottom:(parseFloat(r.borderBottomWidth)||0)/g,left:(parseFloat(r.borderLeftWidth)||0)/g},i.lineWidth.top||(i.lineWidth.right?d="borderRightColor":i.lineWidth.bottom?d="borderBottomColor":i.lineWidth.left&&(d="borderLeftColor"));var N=h1(e,function(j){return s.getComputedStyle(j)[d]});N!=null&&(i.lineColor=N);var S=["left","right","center","justify"];S.indexOf(r.textAlign)!==-1&&(i.halign=r.textAlign),S=["middle","bottom","top"],S.indexOf(r.verticalAlign)!==-1&&(i.valign=r.verticalAlign);var I=parseInt(r.fontSize||"");isNaN(I)||(i.fontSize=I/a);var w=BB(r);w&&(i.fontStyle=w);var T=(r.fontFamily||"").toLowerCase();return t.indexOf(T)!==-1&&(i.font=T),i}function BB(t){var e="";return(t.fontWeight==="bold"||t.fontWeight==="bolder"||parseInt(t.fontWeight)>=700)&&(e="bold"),(t.fontStyle==="italic"||t.fontStyle==="oblique")&&(e+="italic"),e}function h1(t,e){var n=rk(t,e);if(!n)return null;var r=n.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!r||!Array.isArray(r))return null;var s=[parseInt(r[1]),parseInt(r[2]),parseInt(r[3])],i=parseInt(r[4]);return i===0||isNaN(s[0])||isNaN(s[1])||isNaN(s[2])?null:s}function rk(t,e){var n=e(t);return n==="rgba(0, 0, 0, 0)"||n==="transparent"||n==="initial"||n==="inherit"?t.parentElement==null?null:rk(t.parentElement,e):n}function zB(t,e){var n=[t.paddingTop,t.paddingRight,t.paddingBottom,t.paddingLeft],r=96/(72/e),s=(parseInt(t.lineHeight)-parseInt(t.fontSize))/e/2,i=n.map(function(o){return parseInt(o||"0")/r}),a=Rg(i,0);return s>a.top&&(a.top=s),s>a.bottom&&(a.bottom=s),a}function sk(t,e,n,r,s){var i,a;r===void 0&&(r=!1),s===void 0&&(s=!1);var o;typeof e=="string"?o=n.document.querySelector(e):o=e;var l=Object.keys(t.getFontList()),c=t.scaleFactor(),d=[],g=[],y=[];if(!o)return console.error("Html table could not be found with input: ",e),{head:d,body:g,foot:y};for(var p=0;p<o.rows.length;p++){var N=o.rows[p],S=(a=(i=N==null?void 0:N.parentElement)===null||i===void 0?void 0:i.tagName)===null||a===void 0?void 0:a.toLowerCase(),I=qB(l,c,n,N,r,s);I&&(S==="thead"?d.push(I):S==="tfoot"?y.push(I):g.push(I))}return{head:d,body:g,foot:y}}function qB(t,e,n,r,s,i){for(var a=new ZE(r),o=0;o<r.cells.length;o++){var l=r.cells[o],c=n.getComputedStyle(l);if(s||c.display!=="none"){var d=void 0;i&&(d=VB(t,l,e,c,n)),a.push({rowSpan:l.rowSpan,colSpan:l.colSpan,styles:d,_element:l,content:HB(l)})}}var g=n.getComputedStyle(r);if(a.length>0&&(s||g.display!=="none"))return a}function HB(t){var e=t.cloneNode(!0);return e.innerHTML=e.innerHTML.replace(/\n/g,"").replace(/ +/g," "),e.innerHTML=e.innerHTML.split(/<br.*?>/).map(function(n){return n.trim()}).join(`
`),e.innerText||e.textContent||""}function $B(t,e,n){for(var r=0,s=[t,e,n];r<s.length;r++){var i=s[r];i&&typeof i!="object"&&console.error("The options parameter should be of type object, is: "+typeof i),i.startY&&typeof i.startY!="number"&&(console.error("Invalid value for startY option",i.startY),delete i.startY)}}function ro(t,e,n,r,s){if(t==null)throw new TypeError("Cannot convert undefined or null to object");for(var i=Object(t),a=1;a<arguments.length;a++){var o=arguments[a];if(o!=null)for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(i[l]=o[l])}return i}function ik(t,e){var n=new ju(t),r=n.getDocumentOptions(),s=n.getGlobalOptions();$B(s,r,e);var i=ro({},s,r,e),a;typeof window<"u"&&(a=window);var o=WB(s,r,e),l=GB(s,r,e),c=KB(n,i),d=QB(n,i,a);return{id:e.tableId,content:d,hooks:l,styles:o,settings:c}}function WB(t,e,n){for(var r={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},s=function(l){if(l==="columnStyles"){var c=t[l],d=e[l],g=n[l];r.columnStyles=ro({},c,d,g)}else{var y=[t,e,n],p=y.map(function(N){return N[l]||{}});r[l]=ro({},p[0],p[1],p[2])}},i=0,a=Object.keys(r);i<a.length;i++){var o=a[i];s(o)}return r}function GB(t,e,n){for(var r=[t,e,n],s={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},i=0,a=r;i<a.length;i++){var o=a[i];o.didParseCell&&s.didParseCell.push(o.didParseCell),o.willDrawCell&&s.willDrawCell.push(o.willDrawCell),o.didDrawCell&&s.didDrawCell.push(o.didDrawCell),o.willDrawPage&&s.willDrawPage.push(o.willDrawPage),o.didDrawPage&&s.didDrawPage.push(o.didDrawPage)}return s}function KB(t,e){var n,r,s,i,a,o,l,c,d,g,y,p,N=Rg(e.margin,40/t.scaleFactor()),S=(n=YB(t,e.startY))!==null&&n!==void 0?n:N.top,I;e.showFoot===!0?I="everyPage":e.showFoot===!1?I="never":I=(r=e.showFoot)!==null&&r!==void 0?r:"everyPage";var w;e.showHead===!0?w="everyPage":e.showHead===!1?w="never":w=(s=e.showHead)!==null&&s!==void 0?s:"everyPage";var T=(i=e.useCss)!==null&&i!==void 0?i:!1,j=e.theme||(T?"plain":"striped"),D=!!e.horizontalPageBreak,H=(a=e.horizontalPageBreakRepeat)!==null&&a!==void 0?a:null;return{includeHiddenHtml:(o=e.includeHiddenHtml)!==null&&o!==void 0?o:!1,useCss:T,theme:j,startY:S,margin:N,pageBreak:(l=e.pageBreak)!==null&&l!==void 0?l:"auto",rowPageBreak:(c=e.rowPageBreak)!==null&&c!==void 0?c:"auto",tableWidth:(d=e.tableWidth)!==null&&d!==void 0?d:"auto",showHead:w,showFoot:I,tableLineWidth:(g=e.tableLineWidth)!==null&&g!==void 0?g:0,tableLineColor:(y=e.tableLineColor)!==null&&y!==void 0?y:200,horizontalPageBreak:D,horizontalPageBreakRepeat:H,horizontalPageBreakBehaviour:(p=e.horizontalPageBreakBehaviour)!==null&&p!==void 0?p:"afterAllRows"}}function YB(t,e){var n=t.getLastAutoTable(),r=t.scaleFactor(),s=t.pageNumber(),i=!1;if(n&&n.startPageNumber){var a=n.startPageNumber+n.pageNumber-1;i=a===s}return typeof e=="number"?e:(e==null||e===!1)&&i&&(n==null?void 0:n.finalY)!=null?n.finalY+20/r:null}function QB(t,e,n){var r=e.head||[],s=e.body||[],i=e.foot||[];if(e.html){var a=e.includeHiddenHtml;if(n){var o=sk(t,e.html,n,a,e.useCss)||{};r=o.head||r,s=o.body||r,i=o.foot||r}else console.error("Cannot parse html in non browser environment")}var l=e.columns||XB(r,s,i);return{columns:l,head:r,body:s,foot:i}}function XB(t,e,n){var r=t[0]||e[0]||n[0]||[],s=[];return Object.keys(r).filter(function(i){return i!=="_element"}).forEach(function(i){var a=1,o;Array.isArray(r)?o=r[parseInt(i)]:o=r[i],typeof o=="object"&&!Array.isArray(o)&&(a=(o==null?void 0:o.colSpan)||1);for(var l=0;l<a;l++){var c=void 0;Array.isArray(r)?c=s.length:c=i+(l>0?"_".concat(l):"");var d={dataKey:c};s.push(d)}}),s}var ey=function(){function t(e,n,r){this.table=n,this.pageNumber=n.pageNumber,this.settings=n.settings,this.cursor=r,this.doc=e.getDocument()}return t}(),JB=function(t){JE(e,t);function e(n,r,s,i,a,o){var l=t.call(this,n,r,o)||this;return l.cell=s,l.row=i,l.column=a,l.section=i.section,l}return e}(ey),ZB=function(){function t(e,n){this.pageNumber=1,this.id=e.id,this.settings=e.settings,this.styles=e.styles,this.hooks=e.hooks,this.columns=n.columns,this.head=n.head,this.body=n.body,this.foot=n.foot}return t.prototype.getHeadHeight=function(e){return this.head.reduce(function(n,r){return n+r.getMaxCellHeight(e)},0)},t.prototype.getFootHeight=function(e){return this.foot.reduce(function(n,r){return n+r.getMaxCellHeight(e)},0)},t.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},t.prototype.callCellHooks=function(e,n,r,s,i,a){for(var o=0,l=n;o<l.length;o++){var c=l[o],d=new JB(e,this,r,s,i,a),g=c(d)===!1;if(r.text=Array.isArray(r.text)?r.text:[r.text],g)return!1}return!0},t.prototype.callEndPageHooks=function(e,n){e.applyStyles(e.userStyles);for(var r=0,s=this.hooks.didDrawPage;r<s.length;r++){var i=s[r];i(new ey(e,this,n))}},t.prototype.callWillDrawPageHooks=function(e,n){for(var r=0,s=this.hooks.willDrawPage;r<s.length;r++){var i=s[r];i(new ey(e,this,n))}},t.prototype.getWidth=function(e){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var n=this.columns.reduce(function(s,i){return s+i.wrappedWidth},0);return n}else{var r=this.settings.margin;return e-r.left-r.right}},t}(),ak=function(){function t(e,n,r,s,i){i===void 0&&(i=!1),this.height=0,this.raw=e,e instanceof ZE&&(this.raw=e._element,this.element=e._element),this.index=n,this.section=r,this.cells=s,this.spansMultiplePages=i}return t.prototype.getMaxCellHeight=function(e){var n=this;return e.reduce(function(r,s){var i;return Math.max(r,((i=n.cells[s.index])===null||i===void 0?void 0:i.height)||0)},0)},t.prototype.hasRowSpan=function(e){var n=this;return e.filter(function(r){var s=n.cells[r.index];return s?s.rowSpan>1:!1}).length>0},t.prototype.canEntireRowFit=function(e,n){return this.getMaxCellHeight(n)<=e},t.prototype.getMinimumRowHeight=function(e,n){var r=this;return e.reduce(function(s,i){var a=r.cells[i.index];if(!a)return 0;var o=n.getLineHeight(a.styles.fontSize),l=a.padding("vertical"),c=l+o;return c>s?c:s},0)},t}(),ok=function(){function t(e,n,r){var s;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=n,this.section=r,this.raw=e;var i=e;e!=null&&typeof e=="object"&&!Array.isArray(e)?(this.rowSpan=e.rowSpan||1,this.colSpan=e.colSpan||1,i=(s=e.content)!==null&&s!==void 0?s:e,e._element&&(this.raw=e._element)):(this.rowSpan=1,this.colSpan=1);var a=i!=null?""+i:"",o=/\r\n|\r|\n/g;this.text=a.split(o)}return t.prototype.getTextPos=function(){var e;if(this.styles.valign==="top")e=this.y+this.padding("top");else if(this.styles.valign==="bottom")e=this.y+this.height-this.padding("bottom");else{var n=this.height-this.padding("vertical");e=this.y+n/2+this.padding("top")}var r;if(this.styles.halign==="right")r=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var s=this.width-this.padding("horizontal");r=this.x+s/2+this.padding("left")}else r=this.x+this.padding("left");return{x:r,y:e}},t.prototype.getContentHeight=function(e,n){n===void 0&&(n=1.15);var r=Array.isArray(this.text)?this.text.length:1,s=this.styles.fontSize/e*n,i=r*s+this.padding("vertical");return Math.max(i,this.styles.minCellHeight)},t.prototype.padding=function(e){var n=Rg(this.styles.cellPadding,0);return e==="vertical"?n.top+n.bottom:e==="horizontal"?n.left+n.right:n[e]},t}(),ez=function(){function t(e,n,r){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=e,this.raw=n,this.index=r}return t.prototype.getMaxCustomCellWidth=function(e){for(var n=0,r=0,s=e.allRows();r<s.length;r++){var i=s[r],a=i.cells[this.index];a&&typeof a.styles.cellWidth=="number"&&(n=Math.max(n,a.styles.cellWidth))}return n},t}();function tz(t,e){nz(t,e);var n=[],r=0;e.columns.forEach(function(i){var a=i.getMaxCustomCellWidth(e);a?i.width=a:(i.width=i.wrappedWidth,n.push(i)),r+=i.width});var s=e.getWidth(t.pageSize().width)-r;s&&(s=ty(n,s,function(i){return Math.max(i.minReadableWidth,i.minWidth)})),s&&(s=ty(n,s,function(i){return i.minWidth})),s=Math.abs(s),!e.settings.horizontalPageBreak&&s>.1/t.scaleFactor()&&(s=s<1?s:Math.round(s),console.warn("Of the table content, ".concat(s," units width could not fit page"))),sz(e),iz(e,t),rz(e)}function nz(t,e){var n=t.scaleFactor(),r=e.settings.horizontalPageBreak,s=nk(t,e);e.allRows().forEach(function(i){for(var a=0,o=e.columns;a<o.length;a++){var l=o[a],c=i.cells[l.index];if(c){var d=e.hooks.didParseCell;e.callCellHooks(t,d,c,i,l,null);var g=c.padding("horizontal");c.contentWidth=Um(c.text,c.styles,t)+g;var y=Um(c.text.join(" ").split(/[^\S\u00A0]+/),c.styles,t);if(c.minReadableWidth=y+c.padding("horizontal"),typeof c.styles.cellWidth=="number")c.minWidth=c.styles.cellWidth,c.wrappedWidth=c.styles.cellWidth;else if(c.styles.cellWidth==="wrap"||r===!0)c.contentWidth>s?(c.minWidth=s,c.wrappedWidth=s):(c.minWidth=c.contentWidth,c.wrappedWidth=c.contentWidth);else{var p=10/n;c.minWidth=c.styles.minCellWidth||p,c.wrappedWidth=c.contentWidth,c.minWidth>c.wrappedWidth&&(c.wrappedWidth=c.minWidth)}}}}),e.allRows().forEach(function(i){for(var a=0,o=e.columns;a<o.length;a++){var l=o[a],c=i.cells[l.index];if(c&&c.colSpan===1)l.wrappedWidth=Math.max(l.wrappedWidth,c.wrappedWidth),l.minWidth=Math.max(l.minWidth,c.minWidth),l.minReadableWidth=Math.max(l.minReadableWidth,c.minReadableWidth);else{var d=e.styles.columnStyles[l.dataKey]||e.styles.columnStyles[l.index]||{},g=d.cellWidth||d.minCellWidth;g&&typeof g=="number"&&(l.minWidth=g,l.wrappedWidth=g)}c&&(c.colSpan>1&&!l.minWidth&&(l.minWidth=c.minWidth),c.colSpan>1&&!l.wrappedWidth&&(l.wrappedWidth=c.minWidth))}})}function ty(t,e,n){for(var r=e,s=t.reduce(function(p,N){return p+N.wrappedWidth},0),i=0;i<t.length;i++){var a=t[i],o=a.wrappedWidth/s,l=r*o,c=a.width+l,d=n(a),g=c<d?d:c;e-=g-a.width,a.width=g}if(e=Math.round(e*1e10)/1e10,e){var y=t.filter(function(p){return e<0?p.width>n(p):!0});y.length&&(e=ty(y,e,n))}return e}function rz(t){for(var e={},n=1,r=t.allRows(),s=0;s<r.length;s++)for(var i=r[s],a=0,o=t.columns;a<o.length;a++){var l=o[a],c=e[l.index];if(n>1)n--,delete i.cells[l.index];else if(c)c.cell.height+=i.height,n=c.cell.colSpan,delete i.cells[l.index],c.left--,c.left<=1&&delete e[l.index];else{var d=i.cells[l.index];if(!d)continue;if(d.height=i.height,d.rowSpan>1){var g=r.length-s,y=d.rowSpan>g?g:d.rowSpan;e[l.index]={cell:d,left:y,row:i}}}}}function sz(t){for(var e=t.allRows(),n=0;n<e.length;n++)for(var r=e[n],s=null,i=0,a=0,o=0;o<t.columns.length;o++){var l=t.columns[o];if(a-=1,a>1&&t.columns[o+1])i+=l.width,delete r.cells[l.index];else if(s){var c=s;delete r.cells[l.index],s=null,c.width=l.width+i}else{var c=r.cells[l.index];if(!c)continue;if(a=c.colSpan,i=0,c.colSpan>1){s=c,i+=l.width;continue}c.width=l.width+i}}}function iz(t,e){for(var n={count:0,height:0},r=0,s=t.allRows();r<s.length;r++){for(var i=s[r],a=0,o=t.columns;a<o.length;a++){var l=o[a],c=i.cells[l.index];if(c){e.applyStyles(c.styles,!0);var d=c.width-c.padding("horizontal");if(c.styles.overflow==="linebreak")c.text=e.splitTextToSize(c.text,d+1/e.scaleFactor(),{fontSize:c.styles.fontSize});else if(c.styles.overflow==="ellipsize")c.text=y4(c.text,d,c.styles,e,"...");else if(c.styles.overflow==="hidden")c.text=y4(c.text,d,c.styles,e,"");else if(typeof c.styles.overflow=="function"){var g=c.styles.overflow(c.text,d);typeof g=="string"?c.text=[g]:c.text=g}c.contentHeight=c.getContentHeight(e.scaleFactor(),e.getLineHeightFactor());var y=c.contentHeight/c.rowSpan;c.rowSpan>1&&n.count*n.height<y*c.rowSpan?n={height:y,count:c.rowSpan}:n&&n.count>0&&n.height>y&&(y=n.height),y>i.height&&(i.height=y)}}n.count--}}function y4(t,e,n,r,s){return t.map(function(i){return az(i,e,n,r,s)})}function az(t,e,n,r,s){var i=1e4*r.scaleFactor();if(e=Math.ceil(e*i)/i,e>=Um(t,n,r))return t;for(;e<Um(t+s,n,r)&&!(t.length<=1);)t=t.substring(0,t.length-1);return t.trim()+s}function lk(t,e){var n=new ju(t),r=oz(e,n.scaleFactor()),s=new ZB(e,r);return tz(n,s),n.applyStyles(n.userStyles),s}function oz(t,e){var n=t.content,r=cz(n.columns);if(n.head.length===0){var s=v4(r,"head");s&&n.head.push(s)}if(n.foot.length===0){var s=v4(r,"foot");s&&n.foot.push(s)}var i=t.settings.theme,a=t.styles;return{columns:r,head:f1("head",n.head,r,a,i,e),body:f1("body",n.body,r,a,i,e),foot:f1("foot",n.foot,r,a,i,e)}}function f1(t,e,n,r,s,i){var a={},o=e.map(function(l,c){for(var d=0,g={},y=0,p=0,N=0,S=n;N<S.length;N++){var I=S[N];if(a[I.index]==null||a[I.index].left===0)if(p===0){var w=void 0;Array.isArray(l)?w=l[I.index-y-d]:w=l[I.dataKey];var T={};typeof w=="object"&&!Array.isArray(w)&&(T=(w==null?void 0:w.styles)||{});var j=uz(t,I,c,s,r,i,T),D=new ok(w,j,t);g[I.dataKey]=D,g[I.index]=D,p=D.colSpan-1,a[I.index]={left:D.rowSpan-1,times:p}}else p--,y++;else a[I.index].left--,p=a[I.index].times,d++}return new ak(l,c,t,g)});return o}function v4(t,e){var n={};return t.forEach(function(r){if(r.raw!=null){var s=lz(e,r.raw);s!=null&&(n[r.dataKey]=s)}}),Object.keys(n).length>0?n:null}function lz(t,e){if(t==="head"){if(typeof e=="object")return e.header||null;if(typeof e=="string"||typeof e=="number")return e}else if(t==="foot"&&typeof e=="object")return e.footer;return null}function cz(t){return t.map(function(e,n){var r,s;return typeof e=="object"?s=(r=e.dataKey)!==null&&r!==void 0?r:n:s=n,new ez(s,e,n)})}function uz(t,e,n,r,s,i,a){var o=UB(r),l;t==="head"?l=s.headStyles:t==="body"?l=s.bodyStyles:t==="foot"&&(l=s.footStyles);var c=ro({},o.table,o[t],s.styles,l),d=s.columnStyles[e.dataKey]||s.columnStyles[e.index]||{},g=t==="body"?d:{},y=t==="body"&&n%2===0?ro({},o.alternateRow,s.alternateRowStyles):{},p=FB(i),N=ro({},p,c,y,g);return ro(N,a)}function dz(t,e,n){var r;n===void 0&&(n={});var s=nk(t,e),i=new Map,a=[],o=[],l=[];Array.isArray(e.settings.horizontalPageBreakRepeat)?l=e.settings.horizontalPageBreakRepeat:(typeof e.settings.horizontalPageBreakRepeat=="string"||typeof e.settings.horizontalPageBreakRepeat=="number")&&(l=[e.settings.horizontalPageBreakRepeat]),l.forEach(function(y){var p=e.columns.find(function(N){return N.dataKey===y||N.index===y});p&&!i.has(p.index)&&(i.set(p.index,!0),a.push(p.index),o.push(e.columns[p.index]),s-=p.wrappedWidth)});for(var c=!0,d=(r=n==null?void 0:n.start)!==null&&r!==void 0?r:0;d<e.columns.length;){if(i.has(d)){d++;continue}var g=e.columns[d].wrappedWidth;if(c||s>=g)c=!1,a.push(d),o.push(e.columns[d]),s-=g;else break;d++}return{colIndexes:a,columns:o,lastIndex:d-1}}function hz(t,e){for(var n=[],r=0;r<e.columns.length;r++){var s=dz(t,e,{start:r});s.columns.length&&(n.push(s),r=s.lastIndex)}return n}function ck(t,e){var n=e.settings,r=n.startY,s=n.margin,i={x:s.left,y:r},a=e.getHeadHeight(e.columns)+e.getFootHeight(e.columns),o=r+s.bottom+a;if(n.pageBreak==="avoid"){var l=e.body,c=l.reduce(function(y,p){return y+p.height},0);o+=c}var d=new ju(t);(n.pageBreak==="always"||n.startY!=null&&o>d.pageSize().height)&&(dk(d),i.y=s.top),e.callWillDrawPageHooks(d,i);var g=ro({},i);e.startPageNumber=d.pageNumber(),n.horizontalPageBreak?fz(d,e,g,i):(d.applyStyles(d.userStyles),(n.showHead==="firstPage"||n.showHead==="everyPage")&&e.head.forEach(function(y){return vo(d,e,y,i,e.columns)}),d.applyStyles(d.userStyles),e.body.forEach(function(y,p){var N=p===e.body.length-1;Vm(d,e,y,N,g,i,e.columns)}),d.applyStyles(d.userStyles),(n.showFoot==="lastPage"||n.showFoot==="everyPage")&&e.foot.forEach(function(y){return vo(d,e,y,i,e.columns)})),ek(d,e,g,i),e.callEndPageHooks(d,i),e.finalY=i.y,t.lastAutoTable=e,d.applyStyles(d.userStyles)}function fz(t,e,n,r){var s=hz(t,e),i=e.settings;if(i.horizontalPageBreakBehaviour==="afterAllRows")s.forEach(function(c,d){t.applyStyles(t.userStyles),d>0?fh(t,e,n,r,c.columns,!0):x4(t,e,r,c.columns),pz(t,e,n,r,c.columns),p1(t,e,r,c.columns)});else for(var a=-1,o=s[0],l=function(){var c=a;if(o){t.applyStyles(t.userStyles);var d=o.columns;a>=0?fh(t,e,n,r,d,!0):x4(t,e,r,d),c=w4(t,e,a+1,r,d),p1(t,e,r,d)}var g=c-a;s.slice(1).forEach(function(y){t.applyStyles(t.userStyles),fh(t,e,n,r,y.columns,!0),w4(t,e,a+1,r,y.columns,g),p1(t,e,r,y.columns)}),a=c};a<e.body.length-1;)l()}function x4(t,e,n,r){var s=e.settings;t.applyStyles(t.userStyles),(s.showHead==="firstPage"||s.showHead==="everyPage")&&e.head.forEach(function(i){return vo(t,e,i,n,r)})}function pz(t,e,n,r,s){t.applyStyles(t.userStyles),e.body.forEach(function(i,a){var o=a===e.body.length-1;Vm(t,e,i,o,n,r,s)})}function w4(t,e,n,r,s,i){t.applyStyles(t.userStyles),i=i??e.body.length;var a=Math.min(n+i,e.body.length),o=-1;return e.body.slice(n,a).forEach(function(l,c){var d=n+c===e.body.length-1,g=uk(t,e,d,r);l.canEntireRowFit(g,s)&&(vo(t,e,l,r,s),o=n+c)}),o}function p1(t,e,n,r){var s=e.settings;t.applyStyles(t.userStyles),(s.showFoot==="lastPage"||s.showFoot==="everyPage")&&e.foot.forEach(function(i){return vo(t,e,i,n,r)})}function mz(t,e,n){var r=n.getLineHeight(t.styles.fontSize),s=t.padding("vertical"),i=Math.floor((e-s)/r);return Math.max(0,i)}function gz(t,e,n,r){var s={};t.spansMultiplePages=!0,t.height=0;for(var i=0,a=0,o=n.columns;a<o.length;a++){var l=o[a],c=t.cells[l.index];if(c){Array.isArray(c.text)||(c.text=[c.text]);var d=new ok(c.raw,c.styles,c.section);d=ro(d,c),d.text=[];var g=mz(c,e,r);c.text.length>g&&(d.text=c.text.splice(g,c.text.length));var y=r.scaleFactor(),p=r.getLineHeightFactor();c.contentHeight=c.getContentHeight(y,p),c.contentHeight>=e&&(c.contentHeight=e,d.styles.minCellHeight-=e),c.contentHeight>t.height&&(t.height=c.contentHeight),d.contentHeight=d.getContentHeight(y,p),d.contentHeight>i&&(i=d.contentHeight),s[l.index]=d}}var N=new ak(t.raw,-1,t.section,s,!0);N.height=i;for(var S=0,I=n.columns;S<I.length;S++){var l=I[S],d=N.cells[l.index];d&&(d.height=N.height);var c=t.cells[l.index];c&&(c.height=t.height)}return N}function yz(t,e,n,r){var s=t.pageSize().height,i=r.settings.margin,a=i.top+i.bottom,o=s-a;e.section==="body"&&(o-=r.getHeadHeight(r.columns)+r.getFootHeight(r.columns));var l=e.getMinimumRowHeight(r.columns,t),c=l<n;if(l>o)return console.error("Will not be able to print row ".concat(e.index," correctly since it's minimum height is larger than page height")),!0;if(!c)return!1;var d=e.hasRowSpan(r.columns),g=e.getMaxCellHeight(r.columns)>o;return g?(d&&console.error("The content of row ".concat(e.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(d||r.settings.rowPageBreak==="avoid")}function Vm(t,e,n,r,s,i,a){var o=uk(t,e,r,i);if(n.canEntireRowFit(o,a))vo(t,e,n,i,a);else if(yz(t,n,o,e)){var l=gz(n,o,e,t);vo(t,e,n,i,a),fh(t,e,s,i,a),Vm(t,e,l,r,s,i,a)}else fh(t,e,s,i,a),Vm(t,e,n,r,s,i,a)}function vo(t,e,n,r,s){r.x=e.settings.margin.left;for(var i=0,a=s;i<a.length;i++){var o=a[i],l=n.cells[o.index];if(!l){r.x+=o.width;continue}t.applyStyles(l.styles),l.x=r.x,l.y=r.y;var c=e.callCellHooks(t,e.hooks.willDrawCell,l,n,o,r);if(c===!1){r.x+=o.width;continue}vz(t,l,r);var d=l.getTextPos();XE(l.text,d.x,d.y,{halign:l.styles.halign,valign:l.styles.valign,maxWidth:Math.ceil(l.width-l.padding("left")-l.padding("right"))},t.getDocument()),e.callCellHooks(t,e.hooks.didDrawCell,l,n,o,r),r.x+=o.width}r.y+=n.height}function vz(t,e,n){var r=e.styles;if(t.getDocument().setFillColor(t.getDocument().getFillColor()),typeof r.lineWidth=="number"){var s=tk(r.lineWidth,r.fillColor);s&&t.rect(e.x,n.y,e.width,e.height,s)}else typeof r.lineWidth=="object"&&(r.fillColor&&t.rect(e.x,n.y,e.width,e.height,"F"),xz(t,e,n,r.lineWidth))}function xz(t,e,n,r){var s,i,a,o;r.top&&(s=n.x,i=n.y,a=n.x+e.width,o=n.y,r.right&&(a+=.5*r.right),r.left&&(s-=.5*r.left),l(r.top,s,i,a,o)),r.bottom&&(s=n.x,i=n.y+e.height,a=n.x+e.width,o=n.y+e.height,r.right&&(a+=.5*r.right),r.left&&(s-=.5*r.left),l(r.bottom,s,i,a,o)),r.left&&(s=n.x,i=n.y,a=n.x,o=n.y+e.height,r.top&&(i-=.5*r.top),r.bottom&&(o+=.5*r.bottom),l(r.left,s,i,a,o)),r.right&&(s=n.x+e.width,i=n.y,a=n.x+e.width,o=n.y+e.height,r.top&&(i-=.5*r.top),r.bottom&&(o+=.5*r.bottom),l(r.right,s,i,a,o));function l(c,d,g,y,p){t.getDocument().setLineWidth(c),t.getDocument().line(d,g,y,p,"S")}}function uk(t,e,n,r){var s=e.settings.margin.bottom,i=e.settings.showFoot;return(i==="everyPage"||i==="lastPage"&&n)&&(s+=e.getFootHeight(e.columns)),t.pageSize().height-r.y-s}function fh(t,e,n,r,s,i){s===void 0&&(s=[]),i===void 0&&(i=!1),t.applyStyles(t.userStyles),e.settings.showFoot==="everyPage"&&!i&&e.foot.forEach(function(o){return vo(t,e,o,r,s)}),e.callEndPageHooks(t,r);var a=e.settings.margin;ek(t,e,n,r),dk(t),e.pageNumber++,r.x=a.left,r.y=a.top,n.y=a.top,e.callWillDrawPageHooks(t,r),e.settings.showHead==="everyPage"&&(e.head.forEach(function(o){return vo(t,e,o,r,s)}),t.applyStyles(t.userStyles))}function dk(t){var e=t.pageNumber();t.setPage(e+1);var n=t.pageNumber();return n===e?(t.addPage(),!0):!1}function wz(t){t.API.autoTable=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=e[0],s=ik(this,r),i=lk(this,s);return ck(this,i),this},t.API.lastAutoTable=!1,t.API.autoTableText=function(e,n,r,s){XE(e,n,r,s,this)},t.API.autoTableSetDefaults=function(e){return ju.setDefaults(e,this),this},t.autoTableSetDefaults=function(e,n){ju.setDefaults(e,n)},t.API.autoTableHtmlToJson=function(e,n){var r;if(n===void 0&&(n=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var s=new ju(this),i=sk(s,e,window,n,!1),a=i.head,o=i.body,l=((r=a[0])===null||r===void 0?void 0:r.map(function(c){return c.content}))||[];return{columns:l,rows:o,data:o}}}var m1;function bz(t,e){var n=ik(t,e),r=lk(t,n);ck(t,r)}try{if(typeof window<"u"&&window){var b4=window,_4=b4.jsPDF||((m1=b4.jspdf)===null||m1===void 0?void 0:m1.jsPDF);_4&&wz(_4)}}catch(t){console.error("Could not apply autoTable plugin",t)}const _z=()=>{const[t,e]=se.useState([]),[n,r]=se.useState(null),[s,i]=se.useState(""),[a,o]=se.useState({}),[l,c]=se.useState(new Set);se.useEffect(()=>{(async()=>{try{const J=await An(At(ze,"users")),O={};J.docs.forEach(_=>{O[_.id]=_.data()}),o(O)}catch(J){console.error("Failed to load users",J)}})()},[]),se.useEffect(()=>{(async()=>{try{const O=(await An(At(ze,"works"))).docs.map(_=>{const A=_.data();return{id:_.id,title:A.title||"Video",description:A.description||"",workDate:A.date?new Date(A.date):null,postingDate:A.postingDate?A.postingDate.toDate():null,posted:!!A.posted,assignedUserDetails:A.assignedUserDetails||[]}});e(O)}catch(J){console.error("Failed to load works",J)}})()},[]);const d=(H,J)=>{e(O=>O.map(_=>_.id===H?{..._,postingDate:J?new Date(J):null}:_))},g=async(H,J)=>{try{r(H.id);const O=$t(ze,"works",H.id);await Br(O,{posted:J}),e(_=>_.map(A=>A.id===H.id?{...A,posted:J}:A))}catch(O){console.error("Failed to update posted flag",O)}finally{r(null)}},y=async H=>{try{r(H.id);const J=$t(ze,"works",H.id);await Br(J,{postingDate:H.postingDate?_r.fromDate(H.postingDate):null})}catch(J){console.error("Failed to save posting date",J)}finally{r(null)}},p=H=>{const J=H.assignedUserDetails||[];return J.length?J.map(O=>{var E;const _=((E=a[O.userId])==null?void 0:E.name)||"Unknown",A=Array.isArray(O.roles)?O.roles:[],R=A.length?A.join(" & "):"";return{name:_,rolesText:R}}):[]},N=H=>{c(J=>{const O=new Set(J);return O.has(H)?O.delete(H):O.add(H),O})},S=()=>{c(H=>{const J=new Set(t.map(_=>_.id)),O=new Set;return H.forEach(_=>{J.has(_)&&O.add(_)}),O})},w=[...t].sort((H,J)=>{const O=!!H.postingDate,_=!!J.postingDate,A=O&&!H.posted,R=_&&!J.posted;if(A&&!R)return-1;if(!A&&R)return 1;const E=!O,C=!_;return E&&!C?-1:!E&&C?1:O&&_?H.postingDate.getTime()-J.postingDate.getTime():0}).filter(H=>H.title.toLowerCase().includes(s.toLowerCase())),T=H=>{if(!H)return"Not set";const J=String(H.getDate()).padStart(2,"0"),_=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][H.getMonth()],A=H.getFullYear();return`${J} ${_} ${A}`},j=w.filter(H=>l.has(H.id)),D=()=>{const H=j.length?j:w;if(!H.length)return;const J=new vt;J.setFontSize(14),J.text("Video schedule",14,16);const O=H.map(_=>{const A=p(_).map(E=>E.rolesText?`${E.name} [${E.rolesText}]`:E.name),R=A.length?A.join(`
`):"No users found";return[_.title,_.description||"",T(_.postingDate),_.posted?"Posted":"Not posted",R]});bz(J,{startY:22,head:[["Title","Description","Posting Date","Status","Member(s)"]],body:O,styles:{fontSize:8},headStyles:{fillColor:[33,150,243],halign:"center",valign:"middle"},columnStyles:{0:{cellWidth:50},1:{cellWidth:40},2:{cellWidth:23,halign:"center"},3:{cellWidth:20,halign:"center"},4:{cellWidth:"auto"}}}),J.save("video-schedule.pdf")};return se.useEffect(()=>{S()},[t]),u.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50",children:[u.jsx(pn,{userType:"admin"}),u.jsxs("main",{className:"container mx-auto px-4 py-8 max-w-5xl",children:[u.jsxs("div",{className:"mb-6 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-800",children:"Video schedule"}),u.jsx("p",{className:"text-sm text-gray-600",children:"Manage posting dates for videos / tasks."})]}),u.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:items-center",children:[u.jsx("input",{type:"text",value:s,onChange:H=>i(H.target.value),placeholder:"Search video",className:"w-full sm:w-64 px-3 py-2 rounded-lg border border-gray-300 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"}),u.jsx("button",{onClick:D,disabled:w.length===0,className:"px-4 py-2 text-sm font-semibold rounded-lg bg-purple-600 text-white hover:bg-purple-700 disabled:opacity-60 disabled:cursor-not-allowed",children:j.length?"Download selected as PDF":"Download all as PDF"})]})]}),w.length===0?u.jsx("p",{className:"text-gray-500 text-sm",children:"No works found."}):u.jsx("div",{className:"space-y-4",children:w.map(H=>u.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-4 flex flex-col gap-3",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:[u.jsxs("div",{className:"max-w-xl",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[u.jsx("input",{type:"checkbox",checked:l.has(H.id),onChange:()=>N(H.id),className:"h-4 w-4"}),u.jsx("h2",{className:"text-sm sm:text-base font-semibold text-gray-800",children:H.title})]}),u.jsxs("p",{className:"text-xs text-gray-600",children:["Work date: ",T(H.workDate)]}),H.description&&u.jsxs("div",{className:"mt-1 bg-gray-50 rounded-md px-3 py-2",children:[u.jsx("p",{className:"text-xs font-semibold text-gray-600 mb-0.5",children:"Description"}),u.jsx("p",{className:"text-xs text-gray-700 leading-relaxed line-clamp-3",children:H.description})]}),u.jsxs("div",{className:"mt-1",children:[u.jsx("p",{className:"text-xs font-semibold text-gray-600",children:"Users"}),p(H).length===0?u.jsx("p",{className:"text-xs text-gray-500",children:"No users found"}):u.jsx("ul",{className:"mt-0.5 space-y-0.5",children:p(H).map((J,O)=>u.jsx("li",{className:"text-xs text-gray-700",children:J.rolesText?`${J.name} [${J.rolesText}]`:J.name},O))})]})]}),u.jsx("div",{className:"text-xs font-semibold",children:H.postingDate?H.posted?u.jsxs("span",{className:"px-3 py-1 rounded-full bg-green-100 text-green-800",children:["Posted (",T(H.postingDate),")"]}):u.jsxs("span",{className:"px-3 py-1 rounded-full bg-yellow-100 text-yellow-800",children:["Scheduled (",T(H.postingDate),")"]}):u.jsx("span",{className:"px-3 py-1 rounded-full bg-gray-100 text-gray-600",children:"No posting date"})})]}),u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2",children:[u.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[u.jsx("label",{className:"text-xs text-gray-600",children:"Posting date:"}),u.jsx("input",{type:"date",value:H.postingDate?H.postingDate.toISOString().slice(0,10):"",onChange:J=>d(H.id,J.target.value),className:"px-3 py-2 rounded-lg border border-gray-300 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"}),u.jsx("button",{onClick:()=>y(H),disabled:n===H.id,className:`px-3 py-2 text-xs font-semibold rounded-lg text-white ${n===H.id?"bg-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700"}`,children:n===H.id?"Saving":"Save date"})]}),u.jsx("div",{className:"flex items-center gap-2",children:u.jsx("button",{onClick:()=>g(H,!H.posted),disabled:!H.postingDate||n===H.id,className:`px-4 py-2 text-xs font-semibold rounded-lg ${H.posted?"bg-red-100 text-red-700 hover:bg-red-200":"bg-green-600 text-white hover:bg-green-700"} ${!H.postingDate||n===H.id?"opacity-60 cursor-not-allowed":""}`,children:H.posted?"Unmark posted":"Mark posted"})})]})]},H.id))})]})]})},Nz=()=>{const[t,e]=se.useState([]),[n,r]=se.useState(!0),[s,i]=se.useState("all"),[a,o]=se.useState([]),[l,c]=se.useState(""),[d,g]=se.useState(""),[y,p]=se.useState(!1),[N,S]=se.useState(""),[I,w]=se.useState("");se.useEffect(()=>{(async()=>{try{const J=(await An(At(ze,"users"))).docs.map(O=>({id:O.id,...O.data()}));e(J)}catch(H){console.error(H),w("Failed to load users.")}finally{r(!1)}})()},[]);const T=D=>{o(H=>H.includes(D)?H.filter(J=>J!==D):[...H,D])},j=async D=>{if(D.preventDefault(),w(""),S(""),!l.trim()||!d.trim()){w("Title and message are required.");return}if(s==="selected"&&a.length===0){w("Select at least one user.");return}p(!0);try{if(s==="all")await Jr(At(ze,"notifications"),{title:l.trim(),body:d.trim(),target:"all",createdAt:wa()});else{const H=cA(ze);a.forEach(J=>{const O=$t(At(ze,"users",J,"notifications"));H.set(O,{title:l.trim(),body:d.trim(),target:"user",userId:J,createdAt:wa()})}),await H.commit()}S("Notification(s) sent successfully."),c(""),g(""),o([]),i("all")}catch(H){console.error(H),w("Failed to send notification.")}finally{p(!1)}};return u.jsxs("div",{className:"min-h-screen bg-gray-100",children:[u.jsx(pn,{userType:"admin"}),u.jsxs("main",{className:"container mx-auto px-4 py-6 sm:py-8 max-w-3xl",children:[u.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-800 mb-4",children:"Send notifications"}),u.jsxs("form",{onSubmit:j,className:"bg-white rounded-lg shadow-md p-4 sm:p-6 space-y-4",children:[I&&u.jsx("div",{className:"p-2 rounded bg-red-100 text-red-700 text-sm",children:I}),N&&u.jsx("div",{className:"p-2 rounded bg-green-100 text-green-700 text-sm",children:N}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Title"}),u.jsx("input",{type:"text",value:l,onChange:D=>c(D.target.value),className:"w-full px-3 py-2 border rounded text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Notification title"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Message"}),u.jsx("textarea",{value:d,onChange:D=>g(D.target.value),rows:4,className:"w-full px-3 py-2 border rounded text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Notification message"})]}),u.jsxs("div",{children:[u.jsx("p",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Send to"}),u.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[u.jsxs("label",{className:"inline-flex items-center gap-2 text-sm",children:[u.jsx("input",{type:"radio",name:"sendMode",value:"all",checked:s==="all",onChange:()=>i("all")}),u.jsx("span",{children:"All users"})]}),u.jsxs("label",{className:"inline-flex items-center gap-2 text-sm",children:[u.jsx("input",{type:"radio",name:"sendMode",value:"selected",checked:s==="selected",onChange:()=>i("selected")}),u.jsx("span",{children:"Selected users"})]})]})]}),s==="selected"&&u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Select users"}),n?u.jsxs("div",{className:"flex items-center gap-2 text-gray-600 text-sm",children:[u.jsx(Fi,{className:"animate-spin"}),u.jsx("span",{children:"Loading users..."})]}):u.jsxs("div",{className:"max-h-60 overflow-y-auto border rounded p-2 space-y-1 bg-gray-50",children:[t.length===0&&u.jsx("p",{className:"text-xs text-gray-600",children:"No users found."}),t.map(D=>u.jsxs("label",{className:"flex items-center gap-2 text-xs sm:text-sm cursor-pointer",children:[u.jsx("input",{type:"checkbox",checked:a.includes(D.id),onChange:()=>T(D.id)}),u.jsxs("span",{children:[D.name||"Unnamed"," (",D.email||"no email",")"]})]},D.id))]})]}),u.jsx("button",{type:"submit",disabled:y,className:"w-full sm:w-auto bg-blue-600 text-white px-4 py-2 rounded text-sm font-semibold hover:bg-blue-700 disabled:opacity-50",children:y?"Sending...":"Send notification"})]})]})]})},Sz=()=>{const[t,e]=se.useState(null),[n,r]=se.useState([]),[s,i]=se.useState(!0),a=qr();se.useEffect(()=>{const l=jc(qs,c=>{e(c||null)});return()=>l()},[]),se.useEffect(()=>{if(!t)return;const l=xc(At(ze,"users",t.uid,"notifications"),Gv("createdAt","desc")),c=Pm(l,d=>{const g=d.docs.map(y=>({id:y.id,...y.data()}));r(g),i(!1)});return()=>c()},[t]);const o=async l=>{if(t){try{await Br($t(ze,"users",t.uid,"notifications",l.id),{read:!0})}catch(c){console.error("Failed to mark notif read",c)}a(`/notifications/${l.id}`)}};return u.jsxs("div",{className:"min-h-screen bg-gray-50",children:[u.jsx(pn,{userType:"user"}),u.jsxs("main",{className:"container mx-auto px-4 py-6 sm:py-8 max-w-2xl",children:[u.jsxs("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-800 mb-4 flex items-center gap-2",children:[u.jsx(d5,{className:"text-yellow-500"}),"Notifications"]}),s?u.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[u.jsx(Fi,{className:"animate-spin"}),u.jsx("span",{children:"Loading notifications..."})]}):n.length===0?u.jsx("p",{className:"text-gray-600 text-sm sm:text-base",children:"No notifications yet."}):u.jsx("div",{className:"bg-white rounded-lg shadow-md divide-y",children:n.map(l=>{var g;const c=(g=l.createdAt)!=null&&g.toDate?l.createdAt.toDate().toLocaleString():"",d=l.read===!1;return u.jsxs("button",{onClick:()=>o(l),className:`w-full text-left px-4 py-3 flex flex-col sm:flex-row sm:items-center sm:justify-between hover:bg-gray-50 ${d?"bg-yellow-50":""}`,children:[u.jsxs("div",{children:[u.jsx("p",{className:"font-semibold text-gray-800 text-sm sm:text-base",children:l.title||"Notification"}),l.message&&u.jsx("p",{className:"text-xs sm:text-sm text-gray-600",children:l.message}),c&&u.jsx("p",{className:"text-xs text-gray-400 mt-1",children:c})]}),d&&u.jsx("span",{className:"mt-2 sm:mt-0 inline-flex items-center text-xs font-semibold text-yellow-800 bg-yellow-100 px-2 py-0.5 rounded-full",children:"New"})]},l.id)})})]})]})},Az=()=>{var o;const{notifId:t}=tf(),[e,n]=se.useState(null),[r,s]=se.useState(null),[i,a]=se.useState(!0);return se.useEffect(()=>{const l=jc(qs,c=>{n(c||null)});return()=>l()},[]),se.useEffect(()=>{if(!e||!t)return;(async()=>{try{const c=$t(ze,"users",e.uid,"notifications",t),d=await Li(c);if(d.exists()){const g=d.data();s({id:d.id,...g}),g.read===!1&&await Br(c,{read:!0})}}catch(c){console.error("Failed to load notification",c)}finally{a(!1)}})()},[e,t]),u.jsxs("div",{className:"min-h-screen bg-gray-50",children:[u.jsx(pn,{userType:"user"}),u.jsx("main",{className:"container mx-auto px-4 py-6 sm:py-8 max-w-xl",children:i?u.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[u.jsx(Fi,{className:"animate-spin"}),u.jsx("span",{children:"Loading notification..."})]}):r?u.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 sm:p-6",children:[u.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-800 mb-2",children:r.title||"Notification"}),((o=r.createdAt)==null?void 0:o.toDate)&&u.jsx("p",{className:"text-xs text-gray-500 mb-4",children:r.createdAt.toDate().toLocaleString()}),r.message&&u.jsx("p",{className:"text-sm sm:text-base text-gray-700 mb-4",children:r.message}),r.type&&u.jsxs("p",{className:"text-xs text-gray-500",children:["Type: ",u.jsx("span",{className:"font-mono",children:r.type})]})]}):u.jsx("p",{className:"text-gray-600 text-sm sm:text-base",children:"Notification not found."})})]})},Ez=()=>{const{notifId:t}=tf(),e=qr(),[n,r]=se.useState(null),[s,i]=se.useState(null),[a,o]=se.useState(null),[l,c]=se.useState(!0),[d,g]=se.useState("");if(se.useEffect(()=>{t&&(async()=>{c(!0),g("");try{const N=$t(ze,"notifications",t),S=await Li(N);if(!S.exists()){g("Notification not found."),c(!1);return}const I={id:S.id,...S.data()};if(r(I),I.workId){const w=await Li($t(ze,"works",I.workId));w.exists()&&i({id:w.id,...w.data()})}if(I.userId){const w=await Li($t(ze,"users",I.userId));w.exists()&&o({id:w.id,...w.data()})}}catch(N){console.error("NotificationDetails load error",N),g("Failed to load notification details.")}finally{c(!1)}})()},[t]),l)return u.jsxs("div",{className:"min-h-screen bg-gray-100",children:[u.jsx(pn,{userType:"admin"}),u.jsx("main",{className:"container mx-auto px-4 py-6 max-w-3xl",children:u.jsx("p",{children:"Loading notification..."})})]});if(d)return u.jsxs("div",{className:"min-h-screen bg-gray-100",children:[u.jsx(pn,{userType:"admin"}),u.jsxs("main",{className:"container mx-auto px-4 py-6 max-w-3xl",children:[u.jsx("p",{className:"text-red-600 mb-4",children:d}),u.jsx("button",{onClick:()=>e(-1),className:"px-3 py-1 rounded bg-blue-600 text-white text-sm hover:bg-blue-700",children:"Back"})]})]});if(!n)return u.jsxs("div",{className:"min-h-screen bg-gray-100",children:[u.jsx(pn,{userType:"admin"}),u.jsx("main",{className:"container mx-auto px-4 py-6 max-w-3xl",children:u.jsx("p",{children:"No data."})})]});const y=(()=>{switch(n.type){case"accept":return"Work accepted";case"reject":return"Work rejected";case"done":return"Work marked done";case"undo-done":return"Work status changed";default:return"Notification"}})();return u.jsxs("div",{className:"min-h-screen bg-gray-100",children:[u.jsx(pn,{userType:"admin"}),u.jsxs("main",{className:"container mx-auto px-4 py-6 max-w-3xl",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-800",children:"Notification details"}),u.jsx("button",{onClick:()=>e(-1),className:"px-3 py-1 rounded bg-gray-200 text-gray-800 text-sm hover:bg-gray-300",children:"Back"})]}),u.jsxs("section",{className:"mb-4 bg-white rounded-lg shadow p-4",children:[u.jsx("p",{className:"text-sm font-semibold text-gray-800 mb-1",children:y}),u.jsxs("p",{className:"text-xs text-gray-600 mb-1",children:["ID: ",n.id]}),n.createdAt&&u.jsxs("p",{className:"text-xs text-gray-600 flex items-center gap-1",children:[u.jsx(qn,{className:"text-gray-500"}),n.createdAt.toDate?n.createdAt.toDate().toLocaleString():""]})]}),u.jsxs("section",{className:"mb-4 bg-white rounded-lg shadow p-4",children:[u.jsx("h2",{className:"text-sm font-semibold text-gray-800 mb-2",children:"User"}),a?u.jsxs(u.Fragment,{children:[u.jsx("p",{className:"text-sm text-gray-800",children:a.name||"No name"}),a.email&&u.jsx("p",{className:"text-xs text-gray-600",children:a.email}),a.cardNumber&&u.jsxs("p",{className:"text-xs text-gray-600",children:["Card: ",a.cardNumber]})]}):u.jsx("p",{className:"text-xs text-gray-500",children:n.userName||"Unknown user"})]}),u.jsxs("section",{className:"mb-4 bg-white rounded-lg shadow p-4",children:[u.jsx("h2",{className:"text-sm font-semibold text-gray-800 mb-2",children:"Work"}),s?u.jsxs(u.Fragment,{children:[u.jsx("p",{className:"text-sm font-semibold text-gray-800",children:s.title||"No title"}),s.date&&u.jsxs("p",{className:"text-xs text-gray-600 flex items-center gap-1 mt-1",children:[u.jsx(qn,{className:"text-gray-500"}),new Date(s.date).toLocaleDateString()]}),s.description&&u.jsx("p",{className:"text-xs text-gray-600 mt-1",children:s.description})]}):u.jsxs("p",{className:"text-xs text-gray-500",children:["Work not found (id: ",n.workId||"",")."]})]}),n.message&&u.jsxs("section",{className:"mb-4 bg-white rounded-lg shadow p-4",children:[u.jsx("h2",{className:"text-sm font-semibold text-gray-800 mb-2",children:"Message"}),u.jsx("p",{className:"text-sm text-gray-700",children:n.message})]})]})]})},kz=["videography","editing"],Tz=()=>{const{id:t}=tf(),[e,n]=se.useState(!0),[r,s]=se.useState(null),[i,a]=se.useState([]),[o,l]=se.useState([]),[c,d]=se.useState(!0),[g,y]=se.useState(!0),[p,N]=se.useState(""),[S,I]=se.useState(""),[w,T]=se.useState(""),[j,D]=se.useState("");se.useEffect(()=>{const z=async()=>{d(!0),N("");try{const ue=(await An(At(ze,"users"))).docs.map(Q=>({id:Q.id,...Q.data()}));ue.sort((Q,ce)=>(Q.name||"").localeCompare(ce.name||"")),a(ue)}catch(ae){N("Failed to load users"),a([]),console.error("Error fetching users:",ae)}finally{d(!1)}},Z=async()=>{y(!0),I("");try{const ue=(await An(At(ze,"inventory"))).docs.map(Q=>({id:Q.id,...Q.data()}));ue.sort((Q,ce)=>(Q.itemName||"").localeCompare(ce.itemName||"")),l(ue)}catch(ae){I("Failed to load items"),l([]),console.error("Error fetching inventory:",ae)}finally{y(!1)}};z(),Z()},[]);const H=z=>{s(Z=>(Z.assignedUserDetails||[]).find(ue=>ue.userId===z)?{...Z,assignedUserDetails:Z.assignedUserDetails.filter(ue=>ue.userId!==z),assignedUsers:Z.assignedUsers.filter(ue=>ue!==z)}:{...Z,assignedUserDetails:[...Z.assignedUserDetails||[],{userId:z,roles:["videography"]}],assignedUsers:[...Z.assignedUsers||[],z]})},J=(z,Z)=>{s(ae=>{const ue=(ae.assignedUserDetails||[]).map(Q=>{if(Q.userId!==z)return Q;const me=Q.roles.includes(Z)?Q.roles.filter(ye=>ye!==Z):[...Q.roles,Z];return{...Q,roles:me.length?me:[Z]}});return{...ae,assignedUserDetails:ue}})},O=z=>{s(Z=>({...Z,assignedItems:(Z.assignedItems||[]).includes(z)?Z.assignedItems.filter(ae=>ae!==z):[...Z.assignedItems||[],z]}))},[_,A]=se.useState(""),R=qr();se.useEffect(()=>{(async()=>{n(!0);try{const Z=await Li($t(ze,"works",t));Z.exists()?s({...Z.data(),id:t}):A("Old work not found.")}catch{A("Failed to load old work.")}finally{n(!1)}})()},[t]);const E=z=>{s(Z=>({...Z,[z.target.name]:z.target.value}))},C=async z=>{z.preventDefault(),n(!0),A("");try{await Br($t(ze,"works",t),{title:r.title,description:r.description,date:r.date||null,deadline:r.deadline||null,priority:r.priority,assignedUsers:r.assignedUsers||[],assignedUserDetails:r.assignedUserDetails||[],assignedItems:r.assignedItems||[]}),A("Old work updated!"),setTimeout(()=>R("/work-list"),1e3)}catch{A("Failed to update old work.")}finally{n(!1)}},L=async()=>{if(window.confirm("Are you sure you want to delete this old work? This action cannot be undone.")){n(!0),A("");try{await Xv($t(ze,"works",t)),A("Old work deleted!"),setTimeout(()=>R("/work-list"),1e3)}catch{A("Failed to delete old work.")}finally{n(!1)}}};return e||!r?u.jsxs("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center",children:[u.jsx(pn,{userType:"admin"}),u.jsx("div",{className:"text-gray-600",children:"Loading..."})]}):u.jsxs("div",{className:"min-h-screen bg-gray-100",children:[u.jsx(pn,{userType:"admin"}),u.jsx("main",{className:"container mx-auto px-4 py-6 sm:py-8",children:u.jsxs("div",{className:"max-w-3xl mx-auto bg-white rounded-lg shadow-md p-4 sm:p-8",children:[u.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-gray-800 mb-4 sm:mb-6",children:"Edit Old Work"}),_&&u.jsx("div",{className:"mb-4 p-3 rounded text-sm bg-green-100 text-green-700",children:_}),u.jsxs("form",{onSubmit:C,className:"space-y-4",children:[u.jsxs("div",{children:[u.jsxs("label",{className:"flex items-center gap-2 text-gray-700 font-semibold mb-2 text-sm sm:text-base",children:[u.jsx(f5,{}),u.jsx("span",{children:"Work Title"})]}),u.jsx("input",{type:"text",name:"title",value:r.title,onChange:E,required:!0,className:"w-full px-3 sm:px-4 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-green-500 text-sm sm:text-base"})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"flex items-center gap-2 text-gray-700 font-semibold mb-2 text-sm sm:text-base",children:[u.jsx(u5,{}),u.jsx("span",{children:"Description"})]}),u.jsx("textarea",{name:"description",value:r.description,onChange:E,rows:"4",className:"w-full px-3 sm:px-4 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-green-500 text-sm sm:text-base"})]}),u.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsxs("label",{className:"flex items-center gap-2 text-gray-700 font-semibold mb-2 text-sm sm:text-base",children:[u.jsx(qn,{}),u.jsx("span",{children:"Date"})]}),u.jsx("input",{type:"date",name:"date",value:r.date||"",onChange:E,className:"w-full px-3 sm:px-4 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-green-500 text-sm sm:text-base"})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"flex items-center gap-2 text-gray-700 font-semibold mb-2 text-sm sm:text-base",children:[u.jsx(qn,{}),u.jsx("span",{children:"Deadline"})]}),u.jsx("input",{type:"date",name:"deadline",value:r.deadline||"",onChange:E,className:"w-full px-3 sm:px-4 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-green-500 text-sm sm:text-base"})]})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"flex items-center gap-2 text-gray-700 font-semibold mb-2 text-sm sm:text-base",children:[u.jsx(h5,{}),u.jsx("span",{children:"Priority"})]}),u.jsxs("select",{name:"priority",value:r.priority,onChange:E,className:"w-full px-3 sm:px-4 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-green-500 text-sm sm:text-base",children:[u.jsx("option",{value:"low",children:"Low"}),u.jsx("option",{value:"medium",children:"Medium"}),u.jsx("option",{value:"high",children:"High"}),u.jsx("option",{value:"urgent",children:"Urgent"})]})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"flex items-center gap-2 text-gray-700 font-semibold mb-2 text-sm sm:text-base",children:[u.jsx(xf,{}),u.jsx("span",{children:"Assign Team Members"})]}),u.jsxs("div",{className:"relative mb-2",children:[u.jsx(na,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 text-xs"}),u.jsx("input",{type:"text",placeholder:"Search by name or card...",value:w,onChange:z=>T(z.target.value),className:"w-full pl-8 pr-3 py-2 border border-gray-300 rounded text-sm focus:outline-none focus:ring-2 focus:ring-green-500"})]}),u.jsx("div",{className:"border border-gray-300 rounded p-3 sm:p-4 max-h-60 overflow-y-auto",children:c?u.jsx("p",{className:"text-gray-500 text-sm sm:text-base",children:"Loading users..."}):p?u.jsx("p",{className:"text-red-500 text-sm sm:text-base",children:p}):(()=>{const z=w.trim().toLowerCase(),Z=i.filter(Q=>{if(!z)return!0;const ce=(Q.name||"").toLowerCase(),me=(Q.cardNumber||"").toLowerCase();return ce.includes(z)||me.includes(z)}),ae=Q=>(r.assignedUserDetails||[]).some(ce=>ce.userId===Q),ue=Q=>{var ce;return((ce=(r.assignedUserDetails||[]).find(me=>me.userId===Q))==null?void 0:ce.roles)||[]};return Z.length===0?u.jsx("p",{className:"text-gray-500 text-sm sm:text-base",children:"No users found"}):Z.map(Q=>{const ce=ae(Q.id),me=ue(Q.id);return u.jsxs("div",{className:"mb-2 p-2 rounded hover:bg-gray-50",children:[u.jsxs("label",{className:"flex items-center cursor-pointer",children:[u.jsx("input",{type:"checkbox",checked:ce,onChange:()=>H(Q.id),className:"mr-3 w-4 h-4"}),u.jsx("div",{className:"flex-1",children:u.jsxs("p",{className:"text-gray-700 text-sm sm:text-base",children:[Q.name," ",u.jsxs("span",{className:"text-xs text-gray-500",children:["(",Q.cardNumber||"-",")"]})]})})]}),ce&&u.jsx("div",{className:"mt-1 ml-7 flex flex-wrap gap-2 text-xs sm:text-sm",children:kz.map(ye=>u.jsx("button",{type:"button",onClick:()=>J(Q.id,ye),className:`px-2 py-1 rounded border ${me.includes(ye)?"bg-green-600 text-white border-green-600":"bg-white text-gray-700 border-gray-300"}`,children:ye},ye))})]},Q.id)})})()}),u.jsxs("p",{className:"text-xs sm:text-sm text-gray-500 mt-2",children:["Selected: ",(r.assignedUserDetails||[]).length," member(s)"]})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"flex items-center gap-2 text-gray-700 font-semibold mb-2 text-sm sm:text-base",children:[u.jsx(Dc,{}),u.jsx("span",{children:"Assign Inventory Items (Optional)"})]}),u.jsxs("div",{className:"relative mb-2",children:[u.jsx(na,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 text-xs"}),u.jsx("input",{type:"text",placeholder:"Search by item name or number...",value:j,onChange:z=>D(z.target.value),className:"w-full pl-8 pr-3 py-2 border border-gray-300 rounded text-sm focus:outline-none focus:ring-2 focus:ring-green-500"})]}),u.jsx("div",{className:"border border-gray-300 rounded p-3 sm:p-4 max-h-60 overflow-y-auto",children:g?u.jsx("p",{className:"text-gray-500 text-sm sm:text-base",children:"Loading items..."}):S?u.jsx("p",{className:"text-red-500 text-sm sm:text-base",children:S}):(()=>{const z=j.trim().toLowerCase(),Z=o.filter(ae=>{if(!z)return!0;const ue=(ae.itemName||"").toLowerCase(),Q=(ae.itemNo||"").toLowerCase();return ue.includes(z)||Q.includes(z)});return Z.length===0?u.jsx("p",{className:"text-gray-500 text-sm sm:text-base",children:"No items found"}):Z.map(ae=>u.jsxs("label",{className:"flex items-center mb-2 cursor-pointer hover:bg-gray-50 p-2 rounded",children:[u.jsx("input",{type:"checkbox",checked:(r.assignedItems||[]).includes(ae.id),onChange:()=>O(ae.id),className:"mr-3 w-4 h-4"}),u.jsxs("div",{className:"flex-1",children:[u.jsxs("p",{className:"text-gray-700 text-sm sm:text-base",children:[ae.itemName," ",u.jsxs("span",{className:"text-xs text-gray-500",children:["(",ae.itemNo,")"]})]}),ae.details&&u.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:ae.details})]})]},ae.id))})()}),u.jsxs("p",{className:"text-xs sm:text-sm text-gray-500 mt-2",children:["Selected: ",(r.assignedItems||[]).length," item(s)"]})]}),u.jsx("button",{type:"submit",disabled:e,className:"w-full bg-green-600 text-white py-2 sm:py-3 px-4 rounded font-semibold hover:bg-green-700 transition disabled:opacity-50 text-sm sm:text-base mb-2",children:e?"Saving...":"Save Changes"}),u.jsx("button",{type:"button",onClick:L,disabled:e,className:"w-full bg-red-600 text-white py-2 sm:py-3 px-4 rounded font-semibold hover:bg-red-700 transition disabled:opacity-50 text-sm sm:text-base",children:"Delete Work"})]})]})})]})},Iz=()=>(sF(),u.jsxs(vC,{children:[u.jsx(On,{path:"/",element:u.jsx(SF,{})}),u.jsx(On,{path:"/login",element:u.jsx(kF,{})}),u.jsx(On,{path:"/signup",element:u.jsx(CF,{})}),u.jsx(On,{path:"/home",element:u.jsx(NF,{})}),u.jsx(On,{path:"/admin-home",element:u.jsx(Ts,{children:u.jsx(bF,{})})}),u.jsx(On,{path:"/create-user",element:u.jsx(Ts,{children:u.jsx(PF,{})})}),u.jsx(On,{path:"/assign-work",element:u.jsx(Ts,{children:u.jsx(LF,{})})}),u.jsx(On,{path:"/work-list",element:u.jsx(Ts,{children:u.jsx(OF,{})})}),u.jsx(On,{path:"/profile",element:u.jsx(FF,{})}),u.jsx(On,{path:"/manage-users",element:u.jsx(Ts,{children:u.jsx(UF,{})})}),u.jsx(On,{path:"/users/:userId",element:u.jsx(Ts,{children:u.jsx(VF,{})})}),u.jsx(On,{path:"/tasks/:taskId",element:u.jsx(Ts,{children:u.jsx(qF,{})})}),u.jsx(On,{path:"/task-history",element:u.jsx(BF,{})}),u.jsx(On,{path:"/inventory",element:u.jsx(Ts,{children:u.jsx(HF,{})})}),u.jsx(On,{path:"/admin-reject-details",element:u.jsx(Ts,{children:u.jsx($F,{})})}),u.jsx(On,{path:"/user-reject-details",element:u.jsx(WF,{})}),u.jsx(On,{path:"/posting-dates",element:u.jsx(Ts,{children:u.jsx(_z,{})})}),u.jsx(On,{path:"/notifications",element:u.jsx(Ts,{children:u.jsx(GF,{})})}),u.jsx(On,{path:"/admin/notifications",element:u.jsx(Ts,{children:u.jsx(Nz,{})})}),u.jsx(On,{path:"/admin/notifications/:notifId",element:u.jsx(Ts,{children:u.jsx(Ez,{})})}),u.jsx(On,{path:"/user/notifications",element:u.jsx(Sz,{})}),u.jsx(On,{path:"/user/notifications/:notifId",element:u.jsx(Az,{})}),u.jsx(On,{path:"/add-old-work",element:u.jsx(Ts,{children:u.jsx(DF,{})})}),u.jsx(On,{path:"/edit-old-work/:id",element:u.jsx(Ts,{children:u.jsx(Tz,{})})})]}));function Cz(){return u.jsx(_F,{children:u.jsx(AC,{children:u.jsx(Iz,{})})})}const Pz="BCDW2bDpR51kOUCYdebGFw4pHEU_h2159MHvkSEslEdrV0yI0AVUiQikAbClmXfS9EGHHQblUlKTC_To4SaQ7Hg";function jz(){return se.useEffect(()=>{(async()=>{if(!("serviceWorker"in navigator)||!("Notification"in window))return;const e=await navigator.serviceWorker.register("/firebase-messaging-sw.js");if(await Notification.requestPermission()!=="granted")return;const r=await JA(F2,{vapidKey:Pz,serviceWorkerRegistration:e}),s=qs.currentUser;s&&r&&await Br($t(ze,"users",s.uid),{fcmToken:r})})().catch(console.error)},[]),u.jsx(Cz,{})}D6(document.getElementById("root")).render(u.jsx(se.StrictMode,{children:u.jsx(jz,{})}));export{xn as _,Rz as c,Jk as g};
