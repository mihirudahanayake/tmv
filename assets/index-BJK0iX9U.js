var VT=Object.defineProperty;var BT=(t,e,n)=>e in t?VT(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var gn=(t,e,n)=>BT(t,typeof e!="symbol"?e+"":e,n);function zT(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var bz=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function qT(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var p4={exports:{}},Mm={},m4={exports:{}},Wt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gd=Symbol.for("react.element"),HT=Symbol.for("react.portal"),WT=Symbol.for("react.fragment"),$T=Symbol.for("react.strict_mode"),GT=Symbol.for("react.profiler"),KT=Symbol.for("react.provider"),YT=Symbol.for("react.context"),QT=Symbol.for("react.forward_ref"),XT=Symbol.for("react.suspense"),JT=Symbol.for("react.memo"),ZT=Symbol.for("react.lazy"),Y5=Symbol.iterator;function eI(t){return t===null||typeof t!="object"?null:(t=Y5&&t[Y5]||t["@@iterator"],typeof t=="function"?t:null)}var g4={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},y4=Object.assign,v4={};function Ku(t,e,n){this.props=t,this.context=e,this.refs=v4,this.updater=n||g4}Ku.prototype.isReactComponent={};Ku.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ku.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function w4(){}w4.prototype=Ku.prototype;function J2(t,e,n){this.props=t,this.context=e,this.refs=v4,this.updater=n||g4}var Z2=J2.prototype=new w4;Z2.constructor=J2;y4(Z2,Ku.prototype);Z2.isPureReactComponent=!0;var Q5=Array.isArray,x4=Object.prototype.hasOwnProperty,ey={current:null},_4={key:!0,ref:!0,__self:!0,__source:!0};function b4(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)x4.call(e,r)&&!_4.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Gd,type:t,key:s,ref:o,props:i,_owner:ey.current}}function tI(t,e){return{$$typeof:Gd,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function ty(t){return typeof t=="object"&&t!==null&&t.$$typeof===Gd}function nI(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var X5=/\/+/g;function Gg(t,e){return typeof t=="object"&&t!==null&&t.key!=null?nI(""+t.key):e.toString(36)}function pp(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Gd:case HT:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Gg(o,0):r,Q5(i)?(n="",t!=null&&(n=t.replace(X5,"$&/")+"/"),pp(i,e,n,"",function(c){return c})):i!=null&&(ty(i)&&(i=tI(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(X5,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",Q5(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+Gg(s,a);o+=pp(s,e,n,l,i)}else if(l=eI(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+Gg(s,a++),o+=pp(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Df(t,e,n){if(t==null)return t;var r=[],i=0;return pp(t,r,"","",function(s){return e.call(n,s,i++)}),r}function rI(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ri={current:null},mp={transition:null},iI={ReactCurrentDispatcher:Ri,ReactCurrentBatchConfig:mp,ReactCurrentOwner:ey};function N4(){throw Error("act(...) is not supported in production builds of React.")}Wt.Children={map:Df,forEach:function(t,e,n){Df(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Df(t,function(){e++}),e},toArray:function(t){return Df(t,function(e){return e})||[]},only:function(t){if(!ty(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Wt.Component=Ku;Wt.Fragment=WT;Wt.Profiler=GT;Wt.PureComponent=J2;Wt.StrictMode=$T;Wt.Suspense=XT;Wt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=iI;Wt.act=N4;Wt.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=y4({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=ey.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)x4.call(e,l)&&!_4.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Gd,type:t.type,key:i,ref:s,props:r,_owner:o}};Wt.createContext=function(t){return t={$$typeof:YT,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:KT,_context:t},t.Consumer=t};Wt.createElement=b4;Wt.createFactory=function(t){var e=b4.bind(null,t);return e.type=t,e};Wt.createRef=function(){return{current:null}};Wt.forwardRef=function(t){return{$$typeof:QT,render:t}};Wt.isValidElement=ty;Wt.lazy=function(t){return{$$typeof:ZT,_payload:{_status:-1,_result:t},_init:rI}};Wt.memo=function(t,e){return{$$typeof:JT,type:t,compare:e===void 0?null:e}};Wt.startTransition=function(t){var e=mp.transition;mp.transition={};try{t()}finally{mp.transition=e}};Wt.unstable_act=N4;Wt.useCallback=function(t,e){return Ri.current.useCallback(t,e)};Wt.useContext=function(t){return Ri.current.useContext(t)};Wt.useDebugValue=function(){};Wt.useDeferredValue=function(t){return Ri.current.useDeferredValue(t)};Wt.useEffect=function(t,e){return Ri.current.useEffect(t,e)};Wt.useId=function(){return Ri.current.useId()};Wt.useImperativeHandle=function(t,e,n){return Ri.current.useImperativeHandle(t,e,n)};Wt.useInsertionEffect=function(t,e){return Ri.current.useInsertionEffect(t,e)};Wt.useLayoutEffect=function(t,e){return Ri.current.useLayoutEffect(t,e)};Wt.useMemo=function(t,e){return Ri.current.useMemo(t,e)};Wt.useReducer=function(t,e,n){return Ri.current.useReducer(t,e,n)};Wt.useRef=function(t){return Ri.current.useRef(t)};Wt.useState=function(t){return Ri.current.useState(t)};Wt.useSyncExternalStore=function(t,e,n){return Ri.current.useSyncExternalStore(t,e,n)};Wt.useTransition=function(){return Ri.current.useTransition()};Wt.version="18.3.1";m4.exports=Wt;var se=m4.exports;const ol=qT(se),sI=zT({__proto__:null,default:ol},[se]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oI=se,aI=Symbol.for("react.element"),lI=Symbol.for("react.fragment"),cI=Object.prototype.hasOwnProperty,uI=oI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,hI={key:!0,ref:!0,__self:!0,__source:!0};function S4(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)cI.call(e,r)&&!hI.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:aI,type:t,key:s,ref:o,props:i,_owner:uI.current}}Mm.Fragment=lI;Mm.jsx=S4;Mm.jsxs=S4;p4.exports=Mm;var d=p4.exports,A4={exports:{}},ps={},E4={exports:{}},T4={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(ne,le){var we=ne.length;ne.push(le);e:for(;0<we;){var de=we-1>>>1,U=ne[de];if(0<i(U,le))ne[de]=le,ne[we]=U,we=de;else break e}}function n(ne){return ne.length===0?null:ne[0]}function r(ne){if(ne.length===0)return null;var le=ne[0],we=ne.pop();if(we!==le){ne[0]=we;e:for(var de=0,U=ne.length,W=U>>>1;de<W;){var te=2*(de+1)-1,Q=ne[te],re=te+1,q=ne[re];if(0>i(Q,we))re<U&&0>i(q,Q)?(ne[de]=q,ne[re]=we,de=re):(ne[de]=Q,ne[te]=we,de=te);else if(re<U&&0>i(q,we))ne[de]=q,ne[re]=we,de=re;else break e}}return le}function i(ne,le){var we=ne.sortIndex-le.sortIndex;return we!==0?we:ne.id-le.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,g=null,y=3,p=!1,b=!1,N=!1,C=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function L(ne){for(var le=n(c);le!==null;){if(le.callback===null)r(c);else if(le.startTime<=ne)r(c),le.sortIndex=le.expirationTime,e(l,le);else break;le=n(c)}}function D(ne){if(N=!1,L(ne),!b)if(n(l)!==null)b=!0,pe(z);else{var le=n(c);le!==null&&ge(D,le.startTime-ne)}}function z(ne,le){b=!1,N&&(N=!1,_(S),S=-1),p=!0;var we=y;try{for(L(le),g=n(l);g!==null&&(!(g.expirationTime>le)||ne&&!A());){var de=g.callback;if(typeof de=="function"){g.callback=null,y=g.priorityLevel;var U=de(g.expirationTime<=le);le=t.unstable_now(),typeof U=="function"?g.callback=U:g===n(l)&&r(l),L(le)}else r(l);g=n(l)}if(g!==null)var W=!0;else{var te=n(c);te!==null&&ge(D,te.startTime-le),W=!1}return W}finally{g=null,y=we,p=!1}}var X=!1,j=null,S=-1,T=5,M=-1;function A(){return!(t.unstable_now()-M<T)}function I(){if(j!==null){var ne=t.unstable_now();M=ne;var le=!0;try{le=j(!0,ne)}finally{le?R():(X=!1,j=null)}}else X=!1}var R;if(typeof k=="function")R=function(){k(I)};else if(typeof MessageChannel<"u"){var G=new MessageChannel,oe=G.port2;G.port1.onmessage=I,R=function(){oe.postMessage(null)}}else R=function(){C(I,0)};function pe(ne){j=ne,X||(X=!0,R())}function ge(ne,le){S=C(function(){ne(t.unstable_now())},le)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(ne){ne.callback=null},t.unstable_continueExecution=function(){b||p||(b=!0,pe(z))},t.unstable_forceFrameRate=function(ne){0>ne||125<ne?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<ne?Math.floor(1e3/ne):5},t.unstable_getCurrentPriorityLevel=function(){return y},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(ne){switch(y){case 1:case 2:case 3:var le=3;break;default:le=y}var we=y;y=le;try{return ne()}finally{y=we}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(ne,le){switch(ne){case 1:case 2:case 3:case 4:case 5:break;default:ne=3}var we=y;y=ne;try{return le()}finally{y=we}},t.unstable_scheduleCallback=function(ne,le,we){var de=t.unstable_now();switch(typeof we=="object"&&we!==null?(we=we.delay,we=typeof we=="number"&&0<we?de+we:de):we=de,ne){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=we+U,ne={id:u++,callback:le,priorityLevel:ne,startTime:we,expirationTime:U,sortIndex:-1},we>de?(ne.sortIndex=we,e(c,ne),n(l)===null&&ne===n(c)&&(N?(_(S),S=-1):N=!0,ge(D,we-de))):(ne.sortIndex=U,e(l,ne),b||p||(b=!0,pe(z))),ne},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(ne){var le=y;return function(){var we=y;y=le;try{return ne.apply(this,arguments)}finally{y=we}}}})(T4);E4.exports=T4;var dI=E4.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fI=se,fs=dI;function Ue(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var I4=new Set,fd={};function Ac(t,e){Ru(t,e),Ru(t+"Capture",e)}function Ru(t,e){for(fd[t]=e,t=0;t<e.length;t++)I4.add(e[t])}var ca=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d1=Object.prototype.hasOwnProperty,pI=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,J5={},Z5={};function mI(t){return d1.call(Z5,t)?!0:d1.call(J5,t)?!1:pI.test(t)?Z5[t]=!0:(J5[t]=!0,!1)}function gI(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function yI(t,e,n,r){if(e===null||typeof e>"u"||gI(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Li(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var ei={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ei[t]=new Li(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ei[e]=new Li(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ei[t]=new Li(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ei[t]=new Li(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ei[t]=new Li(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ei[t]=new Li(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ei[t]=new Li(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ei[t]=new Li(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ei[t]=new Li(t,5,!1,t.toLowerCase(),null,!1,!1)});var ny=/[\-:]([a-z])/g;function ry(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(ny,ry);ei[e]=new Li(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(ny,ry);ei[e]=new Li(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(ny,ry);ei[e]=new Li(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ei[t]=new Li(t,1,!1,t.toLowerCase(),null,!1,!1)});ei.xlinkHref=new Li("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ei[t]=new Li(t,1,!1,t.toLowerCase(),null,!0,!0)});function iy(t,e,n,r){var i=ei.hasOwnProperty(e)?ei[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(yI(e,n,i,r)&&(n=null),r||i===null?mI(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var va=fI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Of=Symbol.for("react.element"),ru=Symbol.for("react.portal"),iu=Symbol.for("react.fragment"),sy=Symbol.for("react.strict_mode"),f1=Symbol.for("react.profiler"),k4=Symbol.for("react.provider"),C4=Symbol.for("react.context"),oy=Symbol.for("react.forward_ref"),p1=Symbol.for("react.suspense"),m1=Symbol.for("react.suspense_list"),ay=Symbol.for("react.memo"),$a=Symbol.for("react.lazy"),P4=Symbol.for("react.offscreen"),ew=Symbol.iterator;function Th(t){return t===null||typeof t!="object"?null:(t=ew&&t[ew]||t["@@iterator"],typeof t=="function"?t:null)}var Qn=Object.assign,Kg;function Uh(t){if(Kg===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Kg=e&&e[1]||""}return`
`+Kg+t}var Yg=!1;function Qg(t,e){if(!t||Yg)return"";Yg=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Yg=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Uh(t):""}function vI(t){switch(t.tag){case 5:return Uh(t.type);case 16:return Uh("Lazy");case 13:return Uh("Suspense");case 19:return Uh("SuspenseList");case 0:case 2:case 15:return t=Qg(t.type,!1),t;case 11:return t=Qg(t.type.render,!1),t;case 1:return t=Qg(t.type,!0),t;default:return""}}function g1(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case iu:return"Fragment";case ru:return"Portal";case f1:return"Profiler";case sy:return"StrictMode";case p1:return"Suspense";case m1:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case C4:return(t.displayName||"Context")+".Consumer";case k4:return(t._context.displayName||"Context")+".Provider";case oy:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case ay:return e=t.displayName||null,e!==null?e:g1(t.type)||"Memo";case $a:e=t._payload,t=t._init;try{return g1(t(e))}catch{}}return null}function wI(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return g1(e);case 8:return e===sy?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function vl(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function R4(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function xI(t){var e=R4(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Mf(t){t._valueTracker||(t._valueTracker=xI(t))}function L4(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=R4(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Bp(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function y1(t,e){var n=e.checked;return Qn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function tw(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=vl(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function j4(t,e){e=e.checked,e!=null&&iy(t,"checked",e,!1)}function v1(t,e){j4(t,e);var n=vl(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?w1(t,e.type,n):e.hasOwnProperty("defaultValue")&&w1(t,e.type,vl(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function nw(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function w1(t,e,n){(e!=="number"||Bp(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Vh=Array.isArray;function yu(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+vl(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function x1(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Ue(91));return Qn({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function rw(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Ue(92));if(Vh(n)){if(1<n.length)throw Error(Ue(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:vl(n)}}function D4(t,e){var n=vl(e.value),r=vl(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function iw(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function O4(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function _1(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?O4(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ff,M4=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Ff=Ff||document.createElement("div"),Ff.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ff.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function pd(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Yh={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},_I=["Webkit","ms","Moz","O"];Object.keys(Yh).forEach(function(t){_I.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Yh[e]=Yh[t]})});function F4(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Yh.hasOwnProperty(t)&&Yh[t]?(""+e).trim():e+"px"}function U4(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=F4(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var bI=Qn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function b1(t,e){if(e){if(bI[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Ue(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Ue(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Ue(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Ue(62))}}function N1(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var S1=null;function ly(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var A1=null,vu=null,wu=null;function sw(t){if(t=Qd(t)){if(typeof A1!="function")throw Error(Ue(280));var e=t.stateNode;e&&(e=zm(e),A1(t.stateNode,t.type,e))}}function V4(t){vu?wu?wu.push(t):wu=[t]:vu=t}function B4(){if(vu){var t=vu,e=wu;if(wu=vu=null,sw(t),e)for(t=0;t<e.length;t++)sw(e[t])}}function z4(t,e){return t(e)}function q4(){}var Xg=!1;function H4(t,e,n){if(Xg)return t(e,n);Xg=!0;try{return z4(t,e,n)}finally{Xg=!1,(vu!==null||wu!==null)&&(q4(),B4())}}function md(t,e){var n=t.stateNode;if(n===null)return null;var r=zm(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Ue(231,e,typeof n));return n}var E1=!1;if(ca)try{var Ih={};Object.defineProperty(Ih,"passive",{get:function(){E1=!0}}),window.addEventListener("test",Ih,Ih),window.removeEventListener("test",Ih,Ih)}catch{E1=!1}function NI(t,e,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var Qh=!1,zp=null,qp=!1,T1=null,SI={onError:function(t){Qh=!0,zp=t}};function AI(t,e,n,r,i,s,o,a,l){Qh=!1,zp=null,NI.apply(SI,arguments)}function EI(t,e,n,r,i,s,o,a,l){if(AI.apply(this,arguments),Qh){if(Qh){var c=zp;Qh=!1,zp=null}else throw Error(Ue(198));qp||(qp=!0,T1=c)}}function Ec(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function W4(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function ow(t){if(Ec(t)!==t)throw Error(Ue(188))}function TI(t){var e=t.alternate;if(!e){if(e=Ec(t),e===null)throw Error(Ue(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return ow(i),t;if(s===r)return ow(i),e;s=s.sibling}throw Error(Ue(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(Ue(189))}}if(n.alternate!==r)throw Error(Ue(190))}if(n.tag!==3)throw Error(Ue(188));return n.stateNode.current===n?t:e}function $4(t){return t=TI(t),t!==null?G4(t):null}function G4(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=G4(t);if(e!==null)return e;t=t.sibling}return null}var K4=fs.unstable_scheduleCallback,aw=fs.unstable_cancelCallback,II=fs.unstable_shouldYield,kI=fs.unstable_requestPaint,pr=fs.unstable_now,CI=fs.unstable_getCurrentPriorityLevel,cy=fs.unstable_ImmediatePriority,Y4=fs.unstable_UserBlockingPriority,Hp=fs.unstable_NormalPriority,PI=fs.unstable_LowPriority,Q4=fs.unstable_IdlePriority,Fm=null,Ao=null;function RI(t){if(Ao&&typeof Ao.onCommitFiberRoot=="function")try{Ao.onCommitFiberRoot(Fm,t,void 0,(t.current.flags&128)===128)}catch{}}var Ys=Math.clz32?Math.clz32:DI,LI=Math.log,jI=Math.LN2;function DI(t){return t>>>=0,t===0?32:31-(LI(t)/jI|0)|0}var Uf=64,Vf=4194304;function Bh(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Wp(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=Bh(a):(s&=o,s!==0&&(r=Bh(s)))}else o=n&~i,o!==0?r=Bh(o):s!==0&&(r=Bh(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Ys(e),i=1<<n,r|=t[n],e&=~i;return r}function OI(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function MI(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Ys(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=OI(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function I1(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function X4(){var t=Uf;return Uf<<=1,!(Uf&4194240)&&(Uf=64),t}function Jg(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Kd(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Ys(e),t[e]=n}function FI(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Ys(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function uy(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Ys(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var vn=0;function J4(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Z4,hy,e3,t3,n3,k1=!1,Bf=[],al=null,ll=null,cl=null,gd=new Map,yd=new Map,Ka=[],UI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function lw(t,e){switch(t){case"focusin":case"focusout":al=null;break;case"dragenter":case"dragleave":ll=null;break;case"mouseover":case"mouseout":cl=null;break;case"pointerover":case"pointerout":gd.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":yd.delete(e.pointerId)}}function kh(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Qd(e),e!==null&&hy(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function VI(t,e,n,r,i){switch(e){case"focusin":return al=kh(al,t,e,n,r,i),!0;case"dragenter":return ll=kh(ll,t,e,n,r,i),!0;case"mouseover":return cl=kh(cl,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return gd.set(s,kh(gd.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,yd.set(s,kh(yd.get(s)||null,t,e,n,r,i)),!0}return!1}function r3(t){var e=Jl(t.target);if(e!==null){var n=Ec(e);if(n!==null){if(e=n.tag,e===13){if(e=W4(n),e!==null){t.blockedOn=e,n3(t.priority,function(){e3(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function gp(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=C1(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);S1=r,n.target.dispatchEvent(r),S1=null}else return e=Qd(n),e!==null&&hy(e),t.blockedOn=n,!1;e.shift()}return!0}function cw(t,e,n){gp(t)&&n.delete(e)}function BI(){k1=!1,al!==null&&gp(al)&&(al=null),ll!==null&&gp(ll)&&(ll=null),cl!==null&&gp(cl)&&(cl=null),gd.forEach(cw),yd.forEach(cw)}function Ch(t,e){t.blockedOn===e&&(t.blockedOn=null,k1||(k1=!0,fs.unstable_scheduleCallback(fs.unstable_NormalPriority,BI)))}function vd(t){function e(i){return Ch(i,t)}if(0<Bf.length){Ch(Bf[0],t);for(var n=1;n<Bf.length;n++){var r=Bf[n];r.blockedOn===t&&(r.blockedOn=null)}}for(al!==null&&Ch(al,t),ll!==null&&Ch(ll,t),cl!==null&&Ch(cl,t),gd.forEach(e),yd.forEach(e),n=0;n<Ka.length;n++)r=Ka[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Ka.length&&(n=Ka[0],n.blockedOn===null);)r3(n),n.blockedOn===null&&Ka.shift()}var xu=va.ReactCurrentBatchConfig,$p=!0;function zI(t,e,n,r){var i=vn,s=xu.transition;xu.transition=null;try{vn=1,dy(t,e,n,r)}finally{vn=i,xu.transition=s}}function qI(t,e,n,r){var i=vn,s=xu.transition;xu.transition=null;try{vn=4,dy(t,e,n,r)}finally{vn=i,xu.transition=s}}function dy(t,e,n,r){if($p){var i=C1(t,e,n,r);if(i===null)l0(t,e,r,Gp,n),lw(t,r);else if(VI(i,t,e,n,r))r.stopPropagation();else if(lw(t,r),e&4&&-1<UI.indexOf(t)){for(;i!==null;){var s=Qd(i);if(s!==null&&Z4(s),s=C1(t,e,n,r),s===null&&l0(t,e,r,Gp,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else l0(t,e,r,null,n)}}var Gp=null;function C1(t,e,n,r){if(Gp=null,t=ly(r),t=Jl(t),t!==null)if(e=Ec(t),e===null)t=null;else if(n=e.tag,n===13){if(t=W4(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Gp=t,null}function i3(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(CI()){case cy:return 1;case Y4:return 4;case Hp:case PI:return 16;case Q4:return 536870912;default:return 16}default:return 16}}var tl=null,fy=null,yp=null;function s3(){if(yp)return yp;var t,e=fy,n=e.length,r,i="value"in tl?tl.value:tl.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return yp=i.slice(t,1<r?1-r:void 0)}function vp(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function zf(){return!0}function uw(){return!1}function ms(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?zf:uw,this.isPropagationStopped=uw,this}return Qn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=zf)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=zf)},persist:function(){},isPersistent:zf}),e}var Yu={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},py=ms(Yu),Yd=Qn({},Yu,{view:0,detail:0}),HI=ms(Yd),Zg,e0,Ph,Um=Qn({},Yd,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:my,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ph&&(Ph&&t.type==="mousemove"?(Zg=t.screenX-Ph.screenX,e0=t.screenY-Ph.screenY):e0=Zg=0,Ph=t),Zg)},movementY:function(t){return"movementY"in t?t.movementY:e0}}),hw=ms(Um),WI=Qn({},Um,{dataTransfer:0}),$I=ms(WI),GI=Qn({},Yd,{relatedTarget:0}),t0=ms(GI),KI=Qn({},Yu,{animationName:0,elapsedTime:0,pseudoElement:0}),YI=ms(KI),QI=Qn({},Yu,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),XI=ms(QI),JI=Qn({},Yu,{data:0}),dw=ms(JI),ZI={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ek={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},tk={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function nk(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=tk[t])?!!e[t]:!1}function my(){return nk}var rk=Qn({},Yd,{key:function(t){if(t.key){var e=ZI[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=vp(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?ek[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:my,charCode:function(t){return t.type==="keypress"?vp(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?vp(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),ik=ms(rk),sk=Qn({},Um,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),fw=ms(sk),ok=Qn({},Yd,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:my}),ak=ms(ok),lk=Qn({},Yu,{propertyName:0,elapsedTime:0,pseudoElement:0}),ck=ms(lk),uk=Qn({},Um,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),hk=ms(uk),dk=[9,13,27,32],gy=ca&&"CompositionEvent"in window,Xh=null;ca&&"documentMode"in document&&(Xh=document.documentMode);var fk=ca&&"TextEvent"in window&&!Xh,o3=ca&&(!gy||Xh&&8<Xh&&11>=Xh),pw=" ",mw=!1;function a3(t,e){switch(t){case"keyup":return dk.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function l3(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var su=!1;function pk(t,e){switch(t){case"compositionend":return l3(e);case"keypress":return e.which!==32?null:(mw=!0,pw);case"textInput":return t=e.data,t===pw&&mw?null:t;default:return null}}function mk(t,e){if(su)return t==="compositionend"||!gy&&a3(t,e)?(t=s3(),yp=fy=tl=null,su=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return o3&&e.locale!=="ko"?null:e.data;default:return null}}var gk={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function gw(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!gk[t.type]:e==="textarea"}function c3(t,e,n,r){V4(r),e=Kp(e,"onChange"),0<e.length&&(n=new py("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Jh=null,wd=null;function yk(t){x3(t,0)}function Vm(t){var e=lu(t);if(L4(e))return t}function vk(t,e){if(t==="change")return e}var u3=!1;if(ca){var n0;if(ca){var r0="oninput"in document;if(!r0){var yw=document.createElement("div");yw.setAttribute("oninput","return;"),r0=typeof yw.oninput=="function"}n0=r0}else n0=!1;u3=n0&&(!document.documentMode||9<document.documentMode)}function vw(){Jh&&(Jh.detachEvent("onpropertychange",h3),wd=Jh=null)}function h3(t){if(t.propertyName==="value"&&Vm(wd)){var e=[];c3(e,wd,t,ly(t)),H4(yk,e)}}function wk(t,e,n){t==="focusin"?(vw(),Jh=e,wd=n,Jh.attachEvent("onpropertychange",h3)):t==="focusout"&&vw()}function xk(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Vm(wd)}function _k(t,e){if(t==="click")return Vm(e)}function bk(t,e){if(t==="input"||t==="change")return Vm(e)}function Nk(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Js=typeof Object.is=="function"?Object.is:Nk;function xd(t,e){if(Js(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!d1.call(e,i)||!Js(t[i],e[i]))return!1}return!0}function ww(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function xw(t,e){var n=ww(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=ww(n)}}function d3(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?d3(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function f3(){for(var t=window,e=Bp();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Bp(t.document)}return e}function yy(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Sk(t){var e=f3(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&d3(n.ownerDocument.documentElement,n)){if(r!==null&&yy(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=xw(n,s);var o=xw(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Ak=ca&&"documentMode"in document&&11>=document.documentMode,ou=null,P1=null,Zh=null,R1=!1;function _w(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;R1||ou==null||ou!==Bp(r)||(r=ou,"selectionStart"in r&&yy(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Zh&&xd(Zh,r)||(Zh=r,r=Kp(P1,"onSelect"),0<r.length&&(e=new py("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=ou)))}function qf(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var au={animationend:qf("Animation","AnimationEnd"),animationiteration:qf("Animation","AnimationIteration"),animationstart:qf("Animation","AnimationStart"),transitionend:qf("Transition","TransitionEnd")},i0={},p3={};ca&&(p3=document.createElement("div").style,"AnimationEvent"in window||(delete au.animationend.animation,delete au.animationiteration.animation,delete au.animationstart.animation),"TransitionEvent"in window||delete au.transitionend.transition);function Bm(t){if(i0[t])return i0[t];if(!au[t])return t;var e=au[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in p3)return i0[t]=e[n];return t}var m3=Bm("animationend"),g3=Bm("animationiteration"),y3=Bm("animationstart"),v3=Bm("transitionend"),w3=new Map,bw="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Al(t,e){w3.set(t,e),Ac(e,[t])}for(var s0=0;s0<bw.length;s0++){var o0=bw[s0],Ek=o0.toLowerCase(),Tk=o0[0].toUpperCase()+o0.slice(1);Al(Ek,"on"+Tk)}Al(m3,"onAnimationEnd");Al(g3,"onAnimationIteration");Al(y3,"onAnimationStart");Al("dblclick","onDoubleClick");Al("focusin","onFocus");Al("focusout","onBlur");Al(v3,"onTransitionEnd");Ru("onMouseEnter",["mouseout","mouseover"]);Ru("onMouseLeave",["mouseout","mouseover"]);Ru("onPointerEnter",["pointerout","pointerover"]);Ru("onPointerLeave",["pointerout","pointerover"]);Ac("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ac("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ac("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ac("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ac("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ac("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var zh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ik=new Set("cancel close invalid load scroll toggle".split(" ").concat(zh));function Nw(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,EI(r,e,void 0,t),t.currentTarget=null}function x3(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;Nw(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;Nw(i,a,c),s=l}}}if(qp)throw t=T1,qp=!1,T1=null,t}function jn(t,e){var n=e[M1];n===void 0&&(n=e[M1]=new Set);var r=t+"__bubble";n.has(r)||(_3(e,t,2,!1),n.add(r))}function a0(t,e,n){var r=0;e&&(r|=4),_3(n,t,r,e)}var Hf="_reactListening"+Math.random().toString(36).slice(2);function _d(t){if(!t[Hf]){t[Hf]=!0,I4.forEach(function(n){n!=="selectionchange"&&(Ik.has(n)||a0(n,!1,t),a0(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Hf]||(e[Hf]=!0,a0("selectionchange",!1,e))}}function _3(t,e,n,r){switch(i3(e)){case 1:var i=zI;break;case 4:i=qI;break;default:i=dy}n=i.bind(null,e,n,t),i=void 0,!E1||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function l0(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Jl(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}H4(function(){var c=s,u=ly(n),g=[];e:{var y=w3.get(t);if(y!==void 0){var p=py,b=t;switch(t){case"keypress":if(vp(n)===0)break e;case"keydown":case"keyup":p=ik;break;case"focusin":b="focus",p=t0;break;case"focusout":b="blur",p=t0;break;case"beforeblur":case"afterblur":p=t0;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=hw;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=$I;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=ak;break;case m3:case g3:case y3:p=YI;break;case v3:p=ck;break;case"scroll":p=HI;break;case"wheel":p=hk;break;case"copy":case"cut":case"paste":p=XI;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=fw}var N=(e&4)!==0,C=!N&&t==="scroll",_=N?y!==null?y+"Capture":null:y;N=[];for(var k=c,L;k!==null;){L=k;var D=L.stateNode;if(L.tag===5&&D!==null&&(L=D,_!==null&&(D=md(k,_),D!=null&&N.push(bd(k,D,L)))),C)break;k=k.return}0<N.length&&(y=new p(y,b,null,n,u),g.push({event:y,listeners:N}))}}if(!(e&7)){e:{if(y=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",y&&n!==S1&&(b=n.relatedTarget||n.fromElement)&&(Jl(b)||b[ua]))break e;if((p||y)&&(y=u.window===u?u:(y=u.ownerDocument)?y.defaultView||y.parentWindow:window,p?(b=n.relatedTarget||n.toElement,p=c,b=b?Jl(b):null,b!==null&&(C=Ec(b),b!==C||b.tag!==5&&b.tag!==6)&&(b=null)):(p=null,b=c),p!==b)){if(N=hw,D="onMouseLeave",_="onMouseEnter",k="mouse",(t==="pointerout"||t==="pointerover")&&(N=fw,D="onPointerLeave",_="onPointerEnter",k="pointer"),C=p==null?y:lu(p),L=b==null?y:lu(b),y=new N(D,k+"leave",p,n,u),y.target=C,y.relatedTarget=L,D=null,Jl(u)===c&&(N=new N(_,k+"enter",b,n,u),N.target=L,N.relatedTarget=C,D=N),C=D,p&&b)t:{for(N=p,_=b,k=0,L=N;L;L=Kc(L))k++;for(L=0,D=_;D;D=Kc(D))L++;for(;0<k-L;)N=Kc(N),k--;for(;0<L-k;)_=Kc(_),L--;for(;k--;){if(N===_||_!==null&&N===_.alternate)break t;N=Kc(N),_=Kc(_)}N=null}else N=null;p!==null&&Sw(g,y,p,N,!1),b!==null&&C!==null&&Sw(g,C,b,N,!0)}}e:{if(y=c?lu(c):window,p=y.nodeName&&y.nodeName.toLowerCase(),p==="select"||p==="input"&&y.type==="file")var z=vk;else if(gw(y))if(u3)z=bk;else{z=xk;var X=wk}else(p=y.nodeName)&&p.toLowerCase()==="input"&&(y.type==="checkbox"||y.type==="radio")&&(z=_k);if(z&&(z=z(t,c))){c3(g,z,n,u);break e}X&&X(t,y,c),t==="focusout"&&(X=y._wrapperState)&&X.controlled&&y.type==="number"&&w1(y,"number",y.value)}switch(X=c?lu(c):window,t){case"focusin":(gw(X)||X.contentEditable==="true")&&(ou=X,P1=c,Zh=null);break;case"focusout":Zh=P1=ou=null;break;case"mousedown":R1=!0;break;case"contextmenu":case"mouseup":case"dragend":R1=!1,_w(g,n,u);break;case"selectionchange":if(Ak)break;case"keydown":case"keyup":_w(g,n,u)}var j;if(gy)e:{switch(t){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else su?a3(t,n)&&(S="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(S="onCompositionStart");S&&(o3&&n.locale!=="ko"&&(su||S!=="onCompositionStart"?S==="onCompositionEnd"&&su&&(j=s3()):(tl=u,fy="value"in tl?tl.value:tl.textContent,su=!0)),X=Kp(c,S),0<X.length&&(S=new dw(S,t,null,n,u),g.push({event:S,listeners:X}),j?S.data=j:(j=l3(n),j!==null&&(S.data=j)))),(j=fk?pk(t,n):mk(t,n))&&(c=Kp(c,"onBeforeInput"),0<c.length&&(u=new dw("onBeforeInput","beforeinput",null,n,u),g.push({event:u,listeners:c}),u.data=j))}x3(g,e)})}function bd(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Kp(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=md(t,n),s!=null&&r.unshift(bd(t,s,i)),s=md(t,e),s!=null&&r.push(bd(t,s,i))),t=t.return}return r}function Kc(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Sw(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=md(n,s),l!=null&&o.unshift(bd(n,l,a))):i||(l=md(n,s),l!=null&&o.push(bd(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var kk=/\r\n?/g,Ck=/\u0000|\uFFFD/g;function Aw(t){return(typeof t=="string"?t:""+t).replace(kk,`
`).replace(Ck,"")}function Wf(t,e,n){if(e=Aw(e),Aw(t)!==e&&n)throw Error(Ue(425))}function Yp(){}var L1=null,j1=null;function D1(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var O1=typeof setTimeout=="function"?setTimeout:void 0,Pk=typeof clearTimeout=="function"?clearTimeout:void 0,Ew=typeof Promise=="function"?Promise:void 0,Rk=typeof queueMicrotask=="function"?queueMicrotask:typeof Ew<"u"?function(t){return Ew.resolve(null).then(t).catch(Lk)}:O1;function Lk(t){setTimeout(function(){throw t})}function c0(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),vd(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);vd(e)}function ul(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Tw(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Qu=Math.random().toString(36).slice(2),_o="__reactFiber$"+Qu,Nd="__reactProps$"+Qu,ua="__reactContainer$"+Qu,M1="__reactEvents$"+Qu,jk="__reactListeners$"+Qu,Dk="__reactHandles$"+Qu;function Jl(t){var e=t[_o];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ua]||n[_o]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Tw(t);t!==null;){if(n=t[_o])return n;t=Tw(t)}return e}t=n,n=t.parentNode}return null}function Qd(t){return t=t[_o]||t[ua],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function lu(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Ue(33))}function zm(t){return t[Nd]||null}var F1=[],cu=-1;function El(t){return{current:t}}function Mn(t){0>cu||(t.current=F1[cu],F1[cu]=null,cu--)}function Rn(t,e){cu++,F1[cu]=t.current,t.current=e}var wl={},vi=El(wl),qi=El(!1),lc=wl;function Lu(t,e){var n=t.type.contextTypes;if(!n)return wl;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Hi(t){return t=t.childContextTypes,t!=null}function Qp(){Mn(qi),Mn(vi)}function Iw(t,e,n){if(vi.current!==wl)throw Error(Ue(168));Rn(vi,e),Rn(qi,n)}function b3(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(Ue(108,wI(t)||"Unknown",i));return Qn({},n,r)}function Xp(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||wl,lc=vi.current,Rn(vi,t),Rn(qi,qi.current),!0}function kw(t,e,n){var r=t.stateNode;if(!r)throw Error(Ue(169));n?(t=b3(t,e,lc),r.__reactInternalMemoizedMergedChildContext=t,Mn(qi),Mn(vi),Rn(vi,t)):Mn(qi),Rn(qi,n)}var Qo=null,qm=!1,u0=!1;function N3(t){Qo===null?Qo=[t]:Qo.push(t)}function Ok(t){qm=!0,N3(t)}function Tl(){if(!u0&&Qo!==null){u0=!0;var t=0,e=vn;try{var n=Qo;for(vn=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Qo=null,qm=!1}catch(i){throw Qo!==null&&(Qo=Qo.slice(t+1)),K4(cy,Tl),i}finally{vn=e,u0=!1}}return null}var uu=[],hu=0,Jp=null,Zp=0,ks=[],Cs=0,cc=null,Jo=1,Zo="";function Gl(t,e){uu[hu++]=Zp,uu[hu++]=Jp,Jp=t,Zp=e}function S3(t,e,n){ks[Cs++]=Jo,ks[Cs++]=Zo,ks[Cs++]=cc,cc=t;var r=Jo;t=Zo;var i=32-Ys(r)-1;r&=~(1<<i),n+=1;var s=32-Ys(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Jo=1<<32-Ys(e)+i|n<<i|r,Zo=s+t}else Jo=1<<s|n<<i|r,Zo=t}function vy(t){t.return!==null&&(Gl(t,1),S3(t,1,0))}function wy(t){for(;t===Jp;)Jp=uu[--hu],uu[hu]=null,Zp=uu[--hu],uu[hu]=null;for(;t===cc;)cc=ks[--Cs],ks[Cs]=null,Zo=ks[--Cs],ks[Cs]=null,Jo=ks[--Cs],ks[Cs]=null}var ds=null,ls=null,Vn=!1,Ks=null;function A3(t,e){var n=Ps(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Cw(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,ds=t,ls=ul(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,ds=t,ls=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=cc!==null?{id:Jo,overflow:Zo}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Ps(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,ds=t,ls=null,!0):!1;default:return!1}}function U1(t){return(t.mode&1)!==0&&(t.flags&128)===0}function V1(t){if(Vn){var e=ls;if(e){var n=e;if(!Cw(t,e)){if(U1(t))throw Error(Ue(418));e=ul(n.nextSibling);var r=ds;e&&Cw(t,e)?A3(r,n):(t.flags=t.flags&-4097|2,Vn=!1,ds=t)}}else{if(U1(t))throw Error(Ue(418));t.flags=t.flags&-4097|2,Vn=!1,ds=t}}}function Pw(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;ds=t}function $f(t){if(t!==ds)return!1;if(!Vn)return Pw(t),Vn=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!D1(t.type,t.memoizedProps)),e&&(e=ls)){if(U1(t))throw E3(),Error(Ue(418));for(;e;)A3(t,e),e=ul(e.nextSibling)}if(Pw(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Ue(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){ls=ul(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}ls=null}}else ls=ds?ul(t.stateNode.nextSibling):null;return!0}function E3(){for(var t=ls;t;)t=ul(t.nextSibling)}function ju(){ls=ds=null,Vn=!1}function xy(t){Ks===null?Ks=[t]:Ks.push(t)}var Mk=va.ReactCurrentBatchConfig;function Rh(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Ue(309));var r=n.stateNode}if(!r)throw Error(Ue(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(Ue(284));if(!n._owner)throw Error(Ue(290,t))}return t}function Gf(t,e){throw t=Object.prototype.toString.call(e),Error(Ue(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Rw(t){var e=t._init;return e(t._payload)}function T3(t){function e(_,k){if(t){var L=_.deletions;L===null?(_.deletions=[k],_.flags|=16):L.push(k)}}function n(_,k){if(!t)return null;for(;k!==null;)e(_,k),k=k.sibling;return null}function r(_,k){for(_=new Map;k!==null;)k.key!==null?_.set(k.key,k):_.set(k.index,k),k=k.sibling;return _}function i(_,k){return _=pl(_,k),_.index=0,_.sibling=null,_}function s(_,k,L){return _.index=L,t?(L=_.alternate,L!==null?(L=L.index,L<k?(_.flags|=2,k):L):(_.flags|=2,k)):(_.flags|=1048576,k)}function o(_){return t&&_.alternate===null&&(_.flags|=2),_}function a(_,k,L,D){return k===null||k.tag!==6?(k=y0(L,_.mode,D),k.return=_,k):(k=i(k,L),k.return=_,k)}function l(_,k,L,D){var z=L.type;return z===iu?u(_,k,L.props.children,D,L.key):k!==null&&(k.elementType===z||typeof z=="object"&&z!==null&&z.$$typeof===$a&&Rw(z)===k.type)?(D=i(k,L.props),D.ref=Rh(_,k,L),D.return=_,D):(D=Ap(L.type,L.key,L.props,null,_.mode,D),D.ref=Rh(_,k,L),D.return=_,D)}function c(_,k,L,D){return k===null||k.tag!==4||k.stateNode.containerInfo!==L.containerInfo||k.stateNode.implementation!==L.implementation?(k=v0(L,_.mode,D),k.return=_,k):(k=i(k,L.children||[]),k.return=_,k)}function u(_,k,L,D,z){return k===null||k.tag!==7?(k=ic(L,_.mode,D,z),k.return=_,k):(k=i(k,L),k.return=_,k)}function g(_,k,L){if(typeof k=="string"&&k!==""||typeof k=="number")return k=y0(""+k,_.mode,L),k.return=_,k;if(typeof k=="object"&&k!==null){switch(k.$$typeof){case Of:return L=Ap(k.type,k.key,k.props,null,_.mode,L),L.ref=Rh(_,null,k),L.return=_,L;case ru:return k=v0(k,_.mode,L),k.return=_,k;case $a:var D=k._init;return g(_,D(k._payload),L)}if(Vh(k)||Th(k))return k=ic(k,_.mode,L,null),k.return=_,k;Gf(_,k)}return null}function y(_,k,L,D){var z=k!==null?k.key:null;if(typeof L=="string"&&L!==""||typeof L=="number")return z!==null?null:a(_,k,""+L,D);if(typeof L=="object"&&L!==null){switch(L.$$typeof){case Of:return L.key===z?l(_,k,L,D):null;case ru:return L.key===z?c(_,k,L,D):null;case $a:return z=L._init,y(_,k,z(L._payload),D)}if(Vh(L)||Th(L))return z!==null?null:u(_,k,L,D,null);Gf(_,L)}return null}function p(_,k,L,D,z){if(typeof D=="string"&&D!==""||typeof D=="number")return _=_.get(L)||null,a(k,_,""+D,z);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case Of:return _=_.get(D.key===null?L:D.key)||null,l(k,_,D,z);case ru:return _=_.get(D.key===null?L:D.key)||null,c(k,_,D,z);case $a:var X=D._init;return p(_,k,L,X(D._payload),z)}if(Vh(D)||Th(D))return _=_.get(L)||null,u(k,_,D,z,null);Gf(k,D)}return null}function b(_,k,L,D){for(var z=null,X=null,j=k,S=k=0,T=null;j!==null&&S<L.length;S++){j.index>S?(T=j,j=null):T=j.sibling;var M=y(_,j,L[S],D);if(M===null){j===null&&(j=T);break}t&&j&&M.alternate===null&&e(_,j),k=s(M,k,S),X===null?z=M:X.sibling=M,X=M,j=T}if(S===L.length)return n(_,j),Vn&&Gl(_,S),z;if(j===null){for(;S<L.length;S++)j=g(_,L[S],D),j!==null&&(k=s(j,k,S),X===null?z=j:X.sibling=j,X=j);return Vn&&Gl(_,S),z}for(j=r(_,j);S<L.length;S++)T=p(j,_,S,L[S],D),T!==null&&(t&&T.alternate!==null&&j.delete(T.key===null?S:T.key),k=s(T,k,S),X===null?z=T:X.sibling=T,X=T);return t&&j.forEach(function(A){return e(_,A)}),Vn&&Gl(_,S),z}function N(_,k,L,D){var z=Th(L);if(typeof z!="function")throw Error(Ue(150));if(L=z.call(L),L==null)throw Error(Ue(151));for(var X=z=null,j=k,S=k=0,T=null,M=L.next();j!==null&&!M.done;S++,M=L.next()){j.index>S?(T=j,j=null):T=j.sibling;var A=y(_,j,M.value,D);if(A===null){j===null&&(j=T);break}t&&j&&A.alternate===null&&e(_,j),k=s(A,k,S),X===null?z=A:X.sibling=A,X=A,j=T}if(M.done)return n(_,j),Vn&&Gl(_,S),z;if(j===null){for(;!M.done;S++,M=L.next())M=g(_,M.value,D),M!==null&&(k=s(M,k,S),X===null?z=M:X.sibling=M,X=M);return Vn&&Gl(_,S),z}for(j=r(_,j);!M.done;S++,M=L.next())M=p(j,_,S,M.value,D),M!==null&&(t&&M.alternate!==null&&j.delete(M.key===null?S:M.key),k=s(M,k,S),X===null?z=M:X.sibling=M,X=M);return t&&j.forEach(function(I){return e(_,I)}),Vn&&Gl(_,S),z}function C(_,k,L,D){if(typeof L=="object"&&L!==null&&L.type===iu&&L.key===null&&(L=L.props.children),typeof L=="object"&&L!==null){switch(L.$$typeof){case Of:e:{for(var z=L.key,X=k;X!==null;){if(X.key===z){if(z=L.type,z===iu){if(X.tag===7){n(_,X.sibling),k=i(X,L.props.children),k.return=_,_=k;break e}}else if(X.elementType===z||typeof z=="object"&&z!==null&&z.$$typeof===$a&&Rw(z)===X.type){n(_,X.sibling),k=i(X,L.props),k.ref=Rh(_,X,L),k.return=_,_=k;break e}n(_,X);break}else e(_,X);X=X.sibling}L.type===iu?(k=ic(L.props.children,_.mode,D,L.key),k.return=_,_=k):(D=Ap(L.type,L.key,L.props,null,_.mode,D),D.ref=Rh(_,k,L),D.return=_,_=D)}return o(_);case ru:e:{for(X=L.key;k!==null;){if(k.key===X)if(k.tag===4&&k.stateNode.containerInfo===L.containerInfo&&k.stateNode.implementation===L.implementation){n(_,k.sibling),k=i(k,L.children||[]),k.return=_,_=k;break e}else{n(_,k);break}else e(_,k);k=k.sibling}k=v0(L,_.mode,D),k.return=_,_=k}return o(_);case $a:return X=L._init,C(_,k,X(L._payload),D)}if(Vh(L))return b(_,k,L,D);if(Th(L))return N(_,k,L,D);Gf(_,L)}return typeof L=="string"&&L!==""||typeof L=="number"?(L=""+L,k!==null&&k.tag===6?(n(_,k.sibling),k=i(k,L),k.return=_,_=k):(n(_,k),k=y0(L,_.mode,D),k.return=_,_=k),o(_)):n(_,k)}return C}var Du=T3(!0),I3=T3(!1),em=El(null),tm=null,du=null,_y=null;function by(){_y=du=tm=null}function Ny(t){var e=em.current;Mn(em),t._currentValue=e}function B1(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function _u(t,e){tm=t,_y=du=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(zi=!0),t.firstContext=null)}function Ls(t){var e=t._currentValue;if(_y!==t)if(t={context:t,memoizedValue:e,next:null},du===null){if(tm===null)throw Error(Ue(308));du=t,tm.dependencies={lanes:0,firstContext:t}}else du=du.next=t;return e}var Zl=null;function Sy(t){Zl===null?Zl=[t]:Zl.push(t)}function k3(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Sy(e)):(n.next=i.next,i.next=n),e.interleaved=n,ha(t,r)}function ha(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Ga=!1;function Ay(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function C3(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ia(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function hl(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,sn&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,ha(t,n)}return i=r.interleaved,i===null?(e.next=e,Sy(r)):(e.next=i.next,i.next=e),r.interleaved=e,ha(t,n)}function wp(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,uy(t,n)}}function Lw(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function nm(t,e,n,r){var i=t.updateQueue;Ga=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(s!==null){var g=i.baseState;o=0,u=c=l=null,a=s;do{var y=a.lane,p=a.eventTime;if((r&y)===y){u!==null&&(u=u.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var b=t,N=a;switch(y=e,p=n,N.tag){case 1:if(b=N.payload,typeof b=="function"){g=b.call(p,g,y);break e}g=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=N.payload,y=typeof b=="function"?b.call(p,g,y):b,y==null)break e;g=Qn({},g,y);break e;case 2:Ga=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,y=i.effects,y===null?i.effects=[a]:y.push(a))}else p={eventTime:p,lane:y,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=p,l=g):u=u.next=p,o|=y;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;y=a,a=y.next,y.next=null,i.lastBaseUpdate=y,i.shared.pending=null}}while(!0);if(u===null&&(l=g),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);hc|=o,t.lanes=o,t.memoizedState=g}}function jw(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(Ue(191,i));i.call(r)}}}var Xd={},Eo=El(Xd),Sd=El(Xd),Ad=El(Xd);function ec(t){if(t===Xd)throw Error(Ue(174));return t}function Ey(t,e){switch(Rn(Ad,e),Rn(Sd,t),Rn(Eo,Xd),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:_1(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=_1(e,t)}Mn(Eo),Rn(Eo,e)}function Ou(){Mn(Eo),Mn(Sd),Mn(Ad)}function P3(t){ec(Ad.current);var e=ec(Eo.current),n=_1(e,t.type);e!==n&&(Rn(Sd,t),Rn(Eo,n))}function Ty(t){Sd.current===t&&(Mn(Eo),Mn(Sd))}var Kn=El(0);function rm(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var h0=[];function Iy(){for(var t=0;t<h0.length;t++)h0[t]._workInProgressVersionPrimary=null;h0.length=0}var xp=va.ReactCurrentDispatcher,d0=va.ReactCurrentBatchConfig,uc=0,Yn=null,Pr=null,Fr=null,im=!1,ed=!1,Ed=0,Fk=0;function si(){throw Error(Ue(321))}function ky(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Js(t[n],e[n]))return!1;return!0}function Cy(t,e,n,r,i,s){if(uc=s,Yn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,xp.current=t===null||t.memoizedState===null?zk:qk,t=n(r,i),ed){s=0;do{if(ed=!1,Ed=0,25<=s)throw Error(Ue(301));s+=1,Fr=Pr=null,e.updateQueue=null,xp.current=Hk,t=n(r,i)}while(ed)}if(xp.current=sm,e=Pr!==null&&Pr.next!==null,uc=0,Fr=Pr=Yn=null,im=!1,e)throw Error(Ue(300));return t}function Py(){var t=Ed!==0;return Ed=0,t}function wo(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Fr===null?Yn.memoizedState=Fr=t:Fr=Fr.next=t,Fr}function js(){if(Pr===null){var t=Yn.alternate;t=t!==null?t.memoizedState:null}else t=Pr.next;var e=Fr===null?Yn.memoizedState:Fr.next;if(e!==null)Fr=e,Pr=t;else{if(t===null)throw Error(Ue(310));Pr=t,t={memoizedState:Pr.memoizedState,baseState:Pr.baseState,baseQueue:Pr.baseQueue,queue:Pr.queue,next:null},Fr===null?Yn.memoizedState=Fr=t:Fr=Fr.next=t}return Fr}function Td(t,e){return typeof e=="function"?e(t):e}function f0(t){var e=js(),n=e.queue;if(n===null)throw Error(Ue(311));n.lastRenderedReducer=t;var r=Pr,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var u=c.lane;if((uc&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var g={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=g,o=r):l=l.next=g,Yn.lanes|=u,hc|=u}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,Js(r,e.memoizedState)||(zi=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Yn.lanes|=s,hc|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function p0(t){var e=js(),n=e.queue;if(n===null)throw Error(Ue(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Js(s,e.memoizedState)||(zi=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function R3(){}function L3(t,e){var n=Yn,r=js(),i=e(),s=!Js(r.memoizedState,i);if(s&&(r.memoizedState=i,zi=!0),r=r.queue,Ry(O3.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Fr!==null&&Fr.memoizedState.tag&1){if(n.flags|=2048,Id(9,D3.bind(null,n,r,i,e),void 0,null),Vr===null)throw Error(Ue(349));uc&30||j3(n,e,i)}return i}function j3(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Yn.updateQueue,e===null?(e={lastEffect:null,stores:null},Yn.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function D3(t,e,n,r){e.value=n,e.getSnapshot=r,M3(e)&&F3(t)}function O3(t,e,n){return n(function(){M3(e)&&F3(t)})}function M3(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Js(t,n)}catch{return!0}}function F3(t){var e=ha(t,1);e!==null&&Qs(e,t,1,-1)}function Dw(t){var e=wo();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Td,lastRenderedState:t},e.queue=t,t=t.dispatch=Bk.bind(null,Yn,t),[e.memoizedState,t]}function Id(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Yn.updateQueue,e===null?(e={lastEffect:null,stores:null},Yn.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function U3(){return js().memoizedState}function _p(t,e,n,r){var i=wo();Yn.flags|=t,i.memoizedState=Id(1|e,n,void 0,r===void 0?null:r)}function Hm(t,e,n,r){var i=js();r=r===void 0?null:r;var s=void 0;if(Pr!==null){var o=Pr.memoizedState;if(s=o.destroy,r!==null&&ky(r,o.deps)){i.memoizedState=Id(e,n,s,r);return}}Yn.flags|=t,i.memoizedState=Id(1|e,n,s,r)}function Ow(t,e){return _p(8390656,8,t,e)}function Ry(t,e){return Hm(2048,8,t,e)}function V3(t,e){return Hm(4,2,t,e)}function B3(t,e){return Hm(4,4,t,e)}function z3(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function q3(t,e,n){return n=n!=null?n.concat([t]):null,Hm(4,4,z3.bind(null,e,t),n)}function Ly(){}function H3(t,e){var n=js();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&ky(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function W3(t,e){var n=js();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&ky(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function $3(t,e,n){return uc&21?(Js(n,e)||(n=X4(),Yn.lanes|=n,hc|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,zi=!0),t.memoizedState=n)}function Uk(t,e){var n=vn;vn=n!==0&&4>n?n:4,t(!0);var r=d0.transition;d0.transition={};try{t(!1),e()}finally{vn=n,d0.transition=r}}function G3(){return js().memoizedState}function Vk(t,e,n){var r=fl(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},K3(t))Y3(e,n);else if(n=k3(t,e,n,r),n!==null){var i=ki();Qs(n,t,r,i),Q3(n,e,r)}}function Bk(t,e,n){var r=fl(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(K3(t))Y3(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Js(a,o)){var l=e.interleaved;l===null?(i.next=i,Sy(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=k3(t,e,i,r),n!==null&&(i=ki(),Qs(n,t,r,i),Q3(n,e,r))}}function K3(t){var e=t.alternate;return t===Yn||e!==null&&e===Yn}function Y3(t,e){ed=im=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Q3(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,uy(t,n)}}var sm={readContext:Ls,useCallback:si,useContext:si,useEffect:si,useImperativeHandle:si,useInsertionEffect:si,useLayoutEffect:si,useMemo:si,useReducer:si,useRef:si,useState:si,useDebugValue:si,useDeferredValue:si,useTransition:si,useMutableSource:si,useSyncExternalStore:si,useId:si,unstable_isNewReconciler:!1},zk={readContext:Ls,useCallback:function(t,e){return wo().memoizedState=[t,e===void 0?null:e],t},useContext:Ls,useEffect:Ow,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,_p(4194308,4,z3.bind(null,e,t),n)},useLayoutEffect:function(t,e){return _p(4194308,4,t,e)},useInsertionEffect:function(t,e){return _p(4,2,t,e)},useMemo:function(t,e){var n=wo();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=wo();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=Vk.bind(null,Yn,t),[r.memoizedState,t]},useRef:function(t){var e=wo();return t={current:t},e.memoizedState=t},useState:Dw,useDebugValue:Ly,useDeferredValue:function(t){return wo().memoizedState=t},useTransition:function(){var t=Dw(!1),e=t[0];return t=Uk.bind(null,t[1]),wo().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Yn,i=wo();if(Vn){if(n===void 0)throw Error(Ue(407));n=n()}else{if(n=e(),Vr===null)throw Error(Ue(349));uc&30||j3(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,Ow(O3.bind(null,r,s,t),[t]),r.flags|=2048,Id(9,D3.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=wo(),e=Vr.identifierPrefix;if(Vn){var n=Zo,r=Jo;n=(r&~(1<<32-Ys(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ed++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Fk++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},qk={readContext:Ls,useCallback:H3,useContext:Ls,useEffect:Ry,useImperativeHandle:q3,useInsertionEffect:V3,useLayoutEffect:B3,useMemo:W3,useReducer:f0,useRef:U3,useState:function(){return f0(Td)},useDebugValue:Ly,useDeferredValue:function(t){var e=js();return $3(e,Pr.memoizedState,t)},useTransition:function(){var t=f0(Td)[0],e=js().memoizedState;return[t,e]},useMutableSource:R3,useSyncExternalStore:L3,useId:G3,unstable_isNewReconciler:!1},Hk={readContext:Ls,useCallback:H3,useContext:Ls,useEffect:Ry,useImperativeHandle:q3,useInsertionEffect:V3,useLayoutEffect:B3,useMemo:W3,useReducer:p0,useRef:U3,useState:function(){return p0(Td)},useDebugValue:Ly,useDeferredValue:function(t){var e=js();return Pr===null?e.memoizedState=t:$3(e,Pr.memoizedState,t)},useTransition:function(){var t=p0(Td)[0],e=js().memoizedState;return[t,e]},useMutableSource:R3,useSyncExternalStore:L3,useId:G3,unstable_isNewReconciler:!1};function $s(t,e){if(t&&t.defaultProps){e=Qn({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function z1(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Qn({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Wm={isMounted:function(t){return(t=t._reactInternals)?Ec(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=ki(),i=fl(t),s=ia(r,i);s.payload=e,n!=null&&(s.callback=n),e=hl(t,s,i),e!==null&&(Qs(e,t,i,r),wp(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=ki(),i=fl(t),s=ia(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=hl(t,s,i),e!==null&&(Qs(e,t,i,r),wp(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=ki(),r=fl(t),i=ia(n,r);i.tag=2,e!=null&&(i.callback=e),e=hl(t,i,r),e!==null&&(Qs(e,t,r,n),wp(e,t,r))}};function Mw(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!xd(n,r)||!xd(i,s):!0}function X3(t,e,n){var r=!1,i=wl,s=e.contextType;return typeof s=="object"&&s!==null?s=Ls(s):(i=Hi(e)?lc:vi.current,r=e.contextTypes,s=(r=r!=null)?Lu(t,i):wl),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Wm,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function Fw(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Wm.enqueueReplaceState(e,e.state,null)}function q1(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Ay(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Ls(s):(s=Hi(e)?lc:vi.current,i.context=Lu(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(z1(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Wm.enqueueReplaceState(i,i.state,null),nm(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Mu(t,e){try{var n="",r=e;do n+=vI(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function m0(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function H1(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Wk=typeof WeakMap=="function"?WeakMap:Map;function J3(t,e,n){n=ia(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){am||(am=!0,e2=r),H1(t,e)},n}function Z3(t,e,n){n=ia(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){H1(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){H1(t,e),typeof r!="function"&&(dl===null?dl=new Set([this]):dl.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Uw(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Wk;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=s8.bind(null,t,e,n),e.then(t,t))}function Vw(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Bw(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=ia(-1,1),e.tag=2,hl(n,e,1))),n.lanes|=1),t)}var $k=va.ReactCurrentOwner,zi=!1;function Ti(t,e,n,r){e.child=t===null?I3(e,null,n,r):Du(e,t.child,n,r)}function zw(t,e,n,r,i){n=n.render;var s=e.ref;return _u(e,i),r=Cy(t,e,n,r,s,i),n=Py(),t!==null&&!zi?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,da(t,e,i)):(Vn&&n&&vy(e),e.flags|=1,Ti(t,e,r,i),e.child)}function qw(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!By(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,e6(t,e,s,r,i)):(t=Ap(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:xd,n(o,r)&&t.ref===e.ref)return da(t,e,i)}return e.flags|=1,t=pl(s,r),t.ref=e.ref,t.return=e,e.child=t}function e6(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(xd(s,r)&&t.ref===e.ref)if(zi=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(zi=!0);else return e.lanes=t.lanes,da(t,e,i)}return W1(t,e,n,r,i)}function t6(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Rn(pu,as),as|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Rn(pu,as),as|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Rn(pu,as),as|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Rn(pu,as),as|=r;return Ti(t,e,i,n),e.child}function n6(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function W1(t,e,n,r,i){var s=Hi(n)?lc:vi.current;return s=Lu(e,s),_u(e,i),n=Cy(t,e,n,r,s,i),r=Py(),t!==null&&!zi?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,da(t,e,i)):(Vn&&r&&vy(e),e.flags|=1,Ti(t,e,n,i),e.child)}function Hw(t,e,n,r,i){if(Hi(n)){var s=!0;Xp(e)}else s=!1;if(_u(e,i),e.stateNode===null)bp(t,e),X3(e,n,r),q1(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Ls(c):(c=Hi(n)?lc:vi.current,c=Lu(e,c));var u=n.getDerivedStateFromProps,g=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";g||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&Fw(e,o,r,c),Ga=!1;var y=e.memoizedState;o.state=y,nm(e,r,o,i),l=e.memoizedState,a!==r||y!==l||qi.current||Ga?(typeof u=="function"&&(z1(e,n,u,r),l=e.memoizedState),(a=Ga||Mw(e,n,a,r,y,l,c))?(g||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,C3(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:$s(e.type,a),o.props=c,g=e.pendingProps,y=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Ls(l):(l=Hi(n)?lc:vi.current,l=Lu(e,l));var p=n.getDerivedStateFromProps;(u=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==g||y!==l)&&Fw(e,o,r,l),Ga=!1,y=e.memoizedState,o.state=y,nm(e,r,o,i);var b=e.memoizedState;a!==g||y!==b||qi.current||Ga?(typeof p=="function"&&(z1(e,n,p,r),b=e.memoizedState),(c=Ga||Mw(e,n,c,r,y,b,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,b,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,b,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&y===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&y===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=b),o.props=r,o.state=b,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&y===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&y===t.memoizedState||(e.flags|=1024),r=!1)}return $1(t,e,n,r,s,i)}function $1(t,e,n,r,i,s){n6(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&kw(e,n,!1),da(t,e,s);r=e.stateNode,$k.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Du(e,t.child,null,s),e.child=Du(e,null,a,s)):Ti(t,e,a,s),e.memoizedState=r.state,i&&kw(e,n,!0),e.child}function r6(t){var e=t.stateNode;e.pendingContext?Iw(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Iw(t,e.context,!1),Ey(t,e.containerInfo)}function Ww(t,e,n,r,i){return ju(),xy(i),e.flags|=256,Ti(t,e,n,r),e.child}var G1={dehydrated:null,treeContext:null,retryLane:0};function K1(t){return{baseLanes:t,cachePool:null,transitions:null}}function i6(t,e,n){var r=e.pendingProps,i=Kn.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Rn(Kn,i&1),t===null)return V1(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Km(o,r,0,null),t=ic(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=K1(n),e.memoizedState=G1,t):jy(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return Gk(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=pl(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=pl(a,s):(s=ic(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?K1(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=G1,r}return s=t.child,t=s.sibling,r=pl(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function jy(t,e){return e=Km({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Kf(t,e,n,r){return r!==null&&xy(r),Du(e,t.child,null,n),t=jy(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Gk(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=m0(Error(Ue(422))),Kf(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Km({mode:"visible",children:r.children},i,0,null),s=ic(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Du(e,t.child,null,o),e.child.memoizedState=K1(o),e.memoizedState=G1,s);if(!(e.mode&1))return Kf(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(Ue(419)),r=m0(s,r,void 0),Kf(t,e,o,r)}if(a=(o&t.childLanes)!==0,zi||a){if(r=Vr,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,ha(t,i),Qs(r,t,i,-1))}return Vy(),r=m0(Error(Ue(421))),Kf(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=o8.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,ls=ul(i.nextSibling),ds=e,Vn=!0,Ks=null,t!==null&&(ks[Cs++]=Jo,ks[Cs++]=Zo,ks[Cs++]=cc,Jo=t.id,Zo=t.overflow,cc=e),e=jy(e,r.children),e.flags|=4096,e)}function $w(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),B1(t.return,e,n)}function g0(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function s6(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Ti(t,e,r.children,n),r=Kn.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&$w(t,n,e);else if(t.tag===19)$w(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Rn(Kn,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&rm(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),g0(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&rm(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}g0(e,!0,n,null,s);break;case"together":g0(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function bp(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function da(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),hc|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Ue(153));if(e.child!==null){for(t=e.child,n=pl(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=pl(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Kk(t,e,n){switch(e.tag){case 3:r6(e),ju();break;case 5:P3(e);break;case 1:Hi(e.type)&&Xp(e);break;case 4:Ey(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Rn(em,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Rn(Kn,Kn.current&1),e.flags|=128,null):n&e.child.childLanes?i6(t,e,n):(Rn(Kn,Kn.current&1),t=da(t,e,n),t!==null?t.sibling:null);Rn(Kn,Kn.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return s6(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Rn(Kn,Kn.current),r)break;return null;case 22:case 23:return e.lanes=0,t6(t,e,n)}return da(t,e,n)}var o6,Y1,a6,l6;o6=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Y1=function(){};a6=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,ec(Eo.current);var s=null;switch(n){case"input":i=y1(t,i),r=y1(t,r),s=[];break;case"select":i=Qn({},i,{value:void 0}),r=Qn({},r,{value:void 0}),s=[];break;case"textarea":i=x1(t,i),r=x1(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Yp)}b1(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(fd.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(fd.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&jn("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};l6=function(t,e,n,r){n!==r&&(e.flags|=4)};function Lh(t,e){if(!Vn)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function oi(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Yk(t,e,n){var r=e.pendingProps;switch(wy(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return oi(e),null;case 1:return Hi(e.type)&&Qp(),oi(e),null;case 3:return r=e.stateNode,Ou(),Mn(qi),Mn(vi),Iy(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&($f(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ks!==null&&(r2(Ks),Ks=null))),Y1(t,e),oi(e),null;case 5:Ty(e);var i=ec(Ad.current);if(n=e.type,t!==null&&e.stateNode!=null)a6(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Ue(166));return oi(e),null}if(t=ec(Eo.current),$f(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[_o]=e,r[Nd]=s,t=(e.mode&1)!==0,n){case"dialog":jn("cancel",r),jn("close",r);break;case"iframe":case"object":case"embed":jn("load",r);break;case"video":case"audio":for(i=0;i<zh.length;i++)jn(zh[i],r);break;case"source":jn("error",r);break;case"img":case"image":case"link":jn("error",r),jn("load",r);break;case"details":jn("toggle",r);break;case"input":tw(r,s),jn("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},jn("invalid",r);break;case"textarea":rw(r,s),jn("invalid",r)}b1(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Wf(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Wf(r.textContent,a,t),i=["children",""+a]):fd.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&jn("scroll",r)}switch(n){case"input":Mf(r),nw(r,s,!0);break;case"textarea":Mf(r),iw(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Yp)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=O4(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[_o]=e,t[Nd]=r,o6(t,e,!1,!1),e.stateNode=t;e:{switch(o=N1(n,r),n){case"dialog":jn("cancel",t),jn("close",t),i=r;break;case"iframe":case"object":case"embed":jn("load",t),i=r;break;case"video":case"audio":for(i=0;i<zh.length;i++)jn(zh[i],t);i=r;break;case"source":jn("error",t),i=r;break;case"img":case"image":case"link":jn("error",t),jn("load",t),i=r;break;case"details":jn("toggle",t),i=r;break;case"input":tw(t,r),i=y1(t,r),jn("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Qn({},r,{value:void 0}),jn("invalid",t);break;case"textarea":rw(t,r),i=x1(t,r),jn("invalid",t);break;default:i=r}b1(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?U4(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&M4(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&pd(t,l):typeof l=="number"&&pd(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(fd.hasOwnProperty(s)?l!=null&&s==="onScroll"&&jn("scroll",t):l!=null&&iy(t,s,l,o))}switch(n){case"input":Mf(t),nw(t,r,!1);break;case"textarea":Mf(t),iw(t);break;case"option":r.value!=null&&t.setAttribute("value",""+vl(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?yu(t,!!r.multiple,s,!1):r.defaultValue!=null&&yu(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Yp)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return oi(e),null;case 6:if(t&&e.stateNode!=null)l6(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Ue(166));if(n=ec(Ad.current),ec(Eo.current),$f(e)){if(r=e.stateNode,n=e.memoizedProps,r[_o]=e,(s=r.nodeValue!==n)&&(t=ds,t!==null))switch(t.tag){case 3:Wf(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Wf(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[_o]=e,e.stateNode=r}return oi(e),null;case 13:if(Mn(Kn),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Vn&&ls!==null&&e.mode&1&&!(e.flags&128))E3(),ju(),e.flags|=98560,s=!1;else if(s=$f(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(Ue(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Ue(317));s[_o]=e}else ju(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;oi(e),s=!1}else Ks!==null&&(r2(Ks),Ks=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Kn.current&1?Rr===0&&(Rr=3):Vy())),e.updateQueue!==null&&(e.flags|=4),oi(e),null);case 4:return Ou(),Y1(t,e),t===null&&_d(e.stateNode.containerInfo),oi(e),null;case 10:return Ny(e.type._context),oi(e),null;case 17:return Hi(e.type)&&Qp(),oi(e),null;case 19:if(Mn(Kn),s=e.memoizedState,s===null)return oi(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Lh(s,!1);else{if(Rr!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=rm(t),o!==null){for(e.flags|=128,Lh(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Rn(Kn,Kn.current&1|2),e.child}t=t.sibling}s.tail!==null&&pr()>Fu&&(e.flags|=128,r=!0,Lh(s,!1),e.lanes=4194304)}else{if(!r)if(t=rm(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Lh(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Vn)return oi(e),null}else 2*pr()-s.renderingStartTime>Fu&&n!==1073741824&&(e.flags|=128,r=!0,Lh(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=pr(),e.sibling=null,n=Kn.current,Rn(Kn,r?n&1|2:n&1),e):(oi(e),null);case 22:case 23:return Uy(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?as&1073741824&&(oi(e),e.subtreeFlags&6&&(e.flags|=8192)):oi(e),null;case 24:return null;case 25:return null}throw Error(Ue(156,e.tag))}function Qk(t,e){switch(wy(e),e.tag){case 1:return Hi(e.type)&&Qp(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ou(),Mn(qi),Mn(vi),Iy(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Ty(e),null;case 13:if(Mn(Kn),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Ue(340));ju()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Mn(Kn),null;case 4:return Ou(),null;case 10:return Ny(e.type._context),null;case 22:case 23:return Uy(),null;case 24:return null;default:return null}}var Yf=!1,pi=!1,Xk=typeof WeakSet=="function"?WeakSet:Set,rt=null;function fu(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){sr(t,e,r)}else n.current=null}function Q1(t,e,n){try{n()}catch(r){sr(t,e,r)}}var Gw=!1;function Jk(t,e){if(L1=$p,t=f3(),yy(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,u=0,g=t,y=null;t:for(;;){for(var p;g!==n||i!==0&&g.nodeType!==3||(a=o+i),g!==s||r!==0&&g.nodeType!==3||(l=o+r),g.nodeType===3&&(o+=g.nodeValue.length),(p=g.firstChild)!==null;)y=g,g=p;for(;;){if(g===t)break t;if(y===n&&++c===i&&(a=o),y===s&&++u===r&&(l=o),(p=g.nextSibling)!==null)break;g=y,y=g.parentNode}g=p}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(j1={focusedElem:t,selectionRange:n},$p=!1,rt=e;rt!==null;)if(e=rt,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,rt=t;else for(;rt!==null;){e=rt;try{var b=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var N=b.memoizedProps,C=b.memoizedState,_=e.stateNode,k=_.getSnapshotBeforeUpdate(e.elementType===e.type?N:$s(e.type,N),C);_.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var L=e.stateNode.containerInfo;L.nodeType===1?L.textContent="":L.nodeType===9&&L.documentElement&&L.removeChild(L.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ue(163))}}catch(D){sr(e,e.return,D)}if(t=e.sibling,t!==null){t.return=e.return,rt=t;break}rt=e.return}return b=Gw,Gw=!1,b}function td(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Q1(e,n,s)}i=i.next}while(i!==r)}}function $m(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function X1(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function c6(t){var e=t.alternate;e!==null&&(t.alternate=null,c6(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[_o],delete e[Nd],delete e[M1],delete e[jk],delete e[Dk])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function u6(t){return t.tag===5||t.tag===3||t.tag===4}function Kw(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||u6(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function J1(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Yp));else if(r!==4&&(t=t.child,t!==null))for(J1(t,e,n),t=t.sibling;t!==null;)J1(t,e,n),t=t.sibling}function Z1(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Z1(t,e,n),t=t.sibling;t!==null;)Z1(t,e,n),t=t.sibling}var Kr=null,Gs=!1;function za(t,e,n){for(n=n.child;n!==null;)h6(t,e,n),n=n.sibling}function h6(t,e,n){if(Ao&&typeof Ao.onCommitFiberUnmount=="function")try{Ao.onCommitFiberUnmount(Fm,n)}catch{}switch(n.tag){case 5:pi||fu(n,e);case 6:var r=Kr,i=Gs;Kr=null,za(t,e,n),Kr=r,Gs=i,Kr!==null&&(Gs?(t=Kr,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Kr.removeChild(n.stateNode));break;case 18:Kr!==null&&(Gs?(t=Kr,n=n.stateNode,t.nodeType===8?c0(t.parentNode,n):t.nodeType===1&&c0(t,n),vd(t)):c0(Kr,n.stateNode));break;case 4:r=Kr,i=Gs,Kr=n.stateNode.containerInfo,Gs=!0,za(t,e,n),Kr=r,Gs=i;break;case 0:case 11:case 14:case 15:if(!pi&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Q1(n,e,o),i=i.next}while(i!==r)}za(t,e,n);break;case 1:if(!pi&&(fu(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){sr(n,e,a)}za(t,e,n);break;case 21:za(t,e,n);break;case 22:n.mode&1?(pi=(r=pi)||n.memoizedState!==null,za(t,e,n),pi=r):za(t,e,n);break;default:za(t,e,n)}}function Yw(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Xk),e.forEach(function(r){var i=a8.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Hs(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Kr=a.stateNode,Gs=!1;break e;case 3:Kr=a.stateNode.containerInfo,Gs=!0;break e;case 4:Kr=a.stateNode.containerInfo,Gs=!0;break e}a=a.return}if(Kr===null)throw Error(Ue(160));h6(s,o,i),Kr=null,Gs=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){sr(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)d6(e,t),e=e.sibling}function d6(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Hs(e,t),go(t),r&4){try{td(3,t,t.return),$m(3,t)}catch(N){sr(t,t.return,N)}try{td(5,t,t.return)}catch(N){sr(t,t.return,N)}}break;case 1:Hs(e,t),go(t),r&512&&n!==null&&fu(n,n.return);break;case 5:if(Hs(e,t),go(t),r&512&&n!==null&&fu(n,n.return),t.flags&32){var i=t.stateNode;try{pd(i,"")}catch(N){sr(t,t.return,N)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&j4(i,s),N1(a,o);var c=N1(a,s);for(o=0;o<l.length;o+=2){var u=l[o],g=l[o+1];u==="style"?U4(i,g):u==="dangerouslySetInnerHTML"?M4(i,g):u==="children"?pd(i,g):iy(i,u,g,c)}switch(a){case"input":v1(i,s);break;case"textarea":D4(i,s);break;case"select":var y=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var p=s.value;p!=null?yu(i,!!s.multiple,p,!1):y!==!!s.multiple&&(s.defaultValue!=null?yu(i,!!s.multiple,s.defaultValue,!0):yu(i,!!s.multiple,s.multiple?[]:"",!1))}i[Nd]=s}catch(N){sr(t,t.return,N)}}break;case 6:if(Hs(e,t),go(t),r&4){if(t.stateNode===null)throw Error(Ue(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(N){sr(t,t.return,N)}}break;case 3:if(Hs(e,t),go(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{vd(e.containerInfo)}catch(N){sr(t,t.return,N)}break;case 4:Hs(e,t),go(t);break;case 13:Hs(e,t),go(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(My=pr())),r&4&&Yw(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(pi=(c=pi)||u,Hs(e,t),pi=c):Hs(e,t),go(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(rt=t,u=t.child;u!==null;){for(g=rt=u;rt!==null;){switch(y=rt,p=y.child,y.tag){case 0:case 11:case 14:case 15:td(4,y,y.return);break;case 1:fu(y,y.return);var b=y.stateNode;if(typeof b.componentWillUnmount=="function"){r=y,n=y.return;try{e=r,b.props=e.memoizedProps,b.state=e.memoizedState,b.componentWillUnmount()}catch(N){sr(r,n,N)}}break;case 5:fu(y,y.return);break;case 22:if(y.memoizedState!==null){Xw(g);continue}}p!==null?(p.return=y,rt=p):Xw(g)}u=u.sibling}e:for(u=null,g=t;;){if(g.tag===5){if(u===null){u=g;try{i=g.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=g.stateNode,l=g.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=F4("display",o))}catch(N){sr(t,t.return,N)}}}else if(g.tag===6){if(u===null)try{g.stateNode.nodeValue=c?"":g.memoizedProps}catch(N){sr(t,t.return,N)}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===t)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===t)break e;for(;g.sibling===null;){if(g.return===null||g.return===t)break e;u===g&&(u=null),g=g.return}u===g&&(u=null),g.sibling.return=g.return,g=g.sibling}}break;case 19:Hs(e,t),go(t),r&4&&Yw(t);break;case 21:break;default:Hs(e,t),go(t)}}function go(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(u6(n)){var r=n;break e}n=n.return}throw Error(Ue(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(pd(i,""),r.flags&=-33);var s=Kw(t);Z1(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=Kw(t);J1(t,a,o);break;default:throw Error(Ue(161))}}catch(l){sr(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Zk(t,e,n){rt=t,f6(t)}function f6(t,e,n){for(var r=(t.mode&1)!==0;rt!==null;){var i=rt,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Yf;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||pi;a=Yf;var c=pi;if(Yf=o,(pi=l)&&!c)for(rt=i;rt!==null;)o=rt,l=o.child,o.tag===22&&o.memoizedState!==null?Jw(i):l!==null?(l.return=o,rt=l):Jw(i);for(;s!==null;)rt=s,f6(s),s=s.sibling;rt=i,Yf=a,pi=c}Qw(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,rt=s):Qw(t)}}function Qw(t){for(;rt!==null;){var e=rt;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:pi||$m(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!pi)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:$s(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&jw(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}jw(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var g=u.dehydrated;g!==null&&vd(g)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ue(163))}pi||e.flags&512&&X1(e)}catch(y){sr(e,e.return,y)}}if(e===t){rt=null;break}if(n=e.sibling,n!==null){n.return=e.return,rt=n;break}rt=e.return}}function Xw(t){for(;rt!==null;){var e=rt;if(e===t){rt=null;break}var n=e.sibling;if(n!==null){n.return=e.return,rt=n;break}rt=e.return}}function Jw(t){for(;rt!==null;){var e=rt;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{$m(4,e)}catch(l){sr(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){sr(e,i,l)}}var s=e.return;try{X1(e)}catch(l){sr(e,s,l)}break;case 5:var o=e.return;try{X1(e)}catch(l){sr(e,o,l)}}}catch(l){sr(e,e.return,l)}if(e===t){rt=null;break}var a=e.sibling;if(a!==null){a.return=e.return,rt=a;break}rt=e.return}}var e8=Math.ceil,om=va.ReactCurrentDispatcher,Dy=va.ReactCurrentOwner,Rs=va.ReactCurrentBatchConfig,sn=0,Vr=null,xr=null,Jr=0,as=0,pu=El(0),Rr=0,kd=null,hc=0,Gm=0,Oy=0,nd=null,Vi=null,My=0,Fu=1/0,Ko=null,am=!1,e2=null,dl=null,Qf=!1,nl=null,lm=0,rd=0,t2=null,Np=-1,Sp=0;function ki(){return sn&6?pr():Np!==-1?Np:Np=pr()}function fl(t){return t.mode&1?sn&2&&Jr!==0?Jr&-Jr:Mk.transition!==null?(Sp===0&&(Sp=X4()),Sp):(t=vn,t!==0||(t=window.event,t=t===void 0?16:i3(t.type)),t):1}function Qs(t,e,n,r){if(50<rd)throw rd=0,t2=null,Error(Ue(185));Kd(t,n,r),(!(sn&2)||t!==Vr)&&(t===Vr&&(!(sn&2)&&(Gm|=n),Rr===4&&Ya(t,Jr)),Wi(t,r),n===1&&sn===0&&!(e.mode&1)&&(Fu=pr()+500,qm&&Tl()))}function Wi(t,e){var n=t.callbackNode;MI(t,e);var r=Wp(t,t===Vr?Jr:0);if(r===0)n!==null&&aw(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&aw(n),e===1)t.tag===0?Ok(Zw.bind(null,t)):N3(Zw.bind(null,t)),Rk(function(){!(sn&6)&&Tl()}),n=null;else{switch(J4(r)){case 1:n=cy;break;case 4:n=Y4;break;case 16:n=Hp;break;case 536870912:n=Q4;break;default:n=Hp}n=_6(n,p6.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function p6(t,e){if(Np=-1,Sp=0,sn&6)throw Error(Ue(327));var n=t.callbackNode;if(bu()&&t.callbackNode!==n)return null;var r=Wp(t,t===Vr?Jr:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=cm(t,r);else{e=r;var i=sn;sn|=2;var s=g6();(Vr!==t||Jr!==e)&&(Ko=null,Fu=pr()+500,rc(t,e));do try{r8();break}catch(a){m6(t,a)}while(!0);by(),om.current=s,sn=i,xr!==null?e=0:(Vr=null,Jr=0,e=Rr)}if(e!==0){if(e===2&&(i=I1(t),i!==0&&(r=i,e=n2(t,i))),e===1)throw n=kd,rc(t,0),Ya(t,r),Wi(t,pr()),n;if(e===6)Ya(t,r);else{if(i=t.current.alternate,!(r&30)&&!t8(i)&&(e=cm(t,r),e===2&&(s=I1(t),s!==0&&(r=s,e=n2(t,s))),e===1))throw n=kd,rc(t,0),Ya(t,r),Wi(t,pr()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(Ue(345));case 2:Kl(t,Vi,Ko);break;case 3:if(Ya(t,r),(r&130023424)===r&&(e=My+500-pr(),10<e)){if(Wp(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){ki(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=O1(Kl.bind(null,t,Vi,Ko),e);break}Kl(t,Vi,Ko);break;case 4:if(Ya(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Ys(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=pr()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*e8(r/1960))-r,10<r){t.timeoutHandle=O1(Kl.bind(null,t,Vi,Ko),r);break}Kl(t,Vi,Ko);break;case 5:Kl(t,Vi,Ko);break;default:throw Error(Ue(329))}}}return Wi(t,pr()),t.callbackNode===n?p6.bind(null,t):null}function n2(t,e){var n=nd;return t.current.memoizedState.isDehydrated&&(rc(t,e).flags|=256),t=cm(t,e),t!==2&&(e=Vi,Vi=n,e!==null&&r2(e)),t}function r2(t){Vi===null?Vi=t:Vi.push.apply(Vi,t)}function t8(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Js(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ya(t,e){for(e&=~Oy,e&=~Gm,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Ys(e),r=1<<n;t[n]=-1,e&=~r}}function Zw(t){if(sn&6)throw Error(Ue(327));bu();var e=Wp(t,0);if(!(e&1))return Wi(t,pr()),null;var n=cm(t,e);if(t.tag!==0&&n===2){var r=I1(t);r!==0&&(e=r,n=n2(t,r))}if(n===1)throw n=kd,rc(t,0),Ya(t,e),Wi(t,pr()),n;if(n===6)throw Error(Ue(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Kl(t,Vi,Ko),Wi(t,pr()),null}function Fy(t,e){var n=sn;sn|=1;try{return t(e)}finally{sn=n,sn===0&&(Fu=pr()+500,qm&&Tl())}}function dc(t){nl!==null&&nl.tag===0&&!(sn&6)&&bu();var e=sn;sn|=1;var n=Rs.transition,r=vn;try{if(Rs.transition=null,vn=1,t)return t()}finally{vn=r,Rs.transition=n,sn=e,!(sn&6)&&Tl()}}function Uy(){as=pu.current,Mn(pu)}function rc(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Pk(n)),xr!==null)for(n=xr.return;n!==null;){var r=n;switch(wy(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Qp();break;case 3:Ou(),Mn(qi),Mn(vi),Iy();break;case 5:Ty(r);break;case 4:Ou();break;case 13:Mn(Kn);break;case 19:Mn(Kn);break;case 10:Ny(r.type._context);break;case 22:case 23:Uy()}n=n.return}if(Vr=t,xr=t=pl(t.current,null),Jr=as=e,Rr=0,kd=null,Oy=Gm=hc=0,Vi=nd=null,Zl!==null){for(e=0;e<Zl.length;e++)if(n=Zl[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Zl=null}return t}function m6(t,e){do{var n=xr;try{if(by(),xp.current=sm,im){for(var r=Yn.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}im=!1}if(uc=0,Fr=Pr=Yn=null,ed=!1,Ed=0,Dy.current=null,n===null||n.return===null){Rr=1,kd=e,xr=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=Jr,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,g=u.tag;if(!(u.mode&1)&&(g===0||g===11||g===15)){var y=u.alternate;y?(u.updateQueue=y.updateQueue,u.memoizedState=y.memoizedState,u.lanes=y.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=Vw(o);if(p!==null){p.flags&=-257,Bw(p,o,a,s,e),p.mode&1&&Uw(s,c,e),e=p,l=c;var b=e.updateQueue;if(b===null){var N=new Set;N.add(l),e.updateQueue=N}else b.add(l);break e}else{if(!(e&1)){Uw(s,c,e),Vy();break e}l=Error(Ue(426))}}else if(Vn&&a.mode&1){var C=Vw(o);if(C!==null){!(C.flags&65536)&&(C.flags|=256),Bw(C,o,a,s,e),xy(Mu(l,a));break e}}s=l=Mu(l,a),Rr!==4&&(Rr=2),nd===null?nd=[s]:nd.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var _=J3(s,l,e);Lw(s,_);break e;case 1:a=l;var k=s.type,L=s.stateNode;if(!(s.flags&128)&&(typeof k.getDerivedStateFromError=="function"||L!==null&&typeof L.componentDidCatch=="function"&&(dl===null||!dl.has(L)))){s.flags|=65536,e&=-e,s.lanes|=e;var D=Z3(s,a,e);Lw(s,D);break e}}s=s.return}while(s!==null)}v6(n)}catch(z){e=z,xr===n&&n!==null&&(xr=n=n.return);continue}break}while(!0)}function g6(){var t=om.current;return om.current=sm,t===null?sm:t}function Vy(){(Rr===0||Rr===3||Rr===2)&&(Rr=4),Vr===null||!(hc&268435455)&&!(Gm&268435455)||Ya(Vr,Jr)}function cm(t,e){var n=sn;sn|=2;var r=g6();(Vr!==t||Jr!==e)&&(Ko=null,rc(t,e));do try{n8();break}catch(i){m6(t,i)}while(!0);if(by(),sn=n,om.current=r,xr!==null)throw Error(Ue(261));return Vr=null,Jr=0,Rr}function n8(){for(;xr!==null;)y6(xr)}function r8(){for(;xr!==null&&!II();)y6(xr)}function y6(t){var e=x6(t.alternate,t,as);t.memoizedProps=t.pendingProps,e===null?v6(t):xr=e,Dy.current=null}function v6(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Qk(n,e),n!==null){n.flags&=32767,xr=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Rr=6,xr=null;return}}else if(n=Yk(n,e,as),n!==null){xr=n;return}if(e=e.sibling,e!==null){xr=e;return}xr=e=t}while(e!==null);Rr===0&&(Rr=5)}function Kl(t,e,n){var r=vn,i=Rs.transition;try{Rs.transition=null,vn=1,i8(t,e,n,r)}finally{Rs.transition=i,vn=r}return null}function i8(t,e,n,r){do bu();while(nl!==null);if(sn&6)throw Error(Ue(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Ue(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(FI(t,s),t===Vr&&(xr=Vr=null,Jr=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Qf||(Qf=!0,_6(Hp,function(){return bu(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Rs.transition,Rs.transition=null;var o=vn;vn=1;var a=sn;sn|=4,Dy.current=null,Jk(t,n),d6(n,t),Sk(j1),$p=!!L1,j1=L1=null,t.current=n,Zk(n),kI(),sn=a,vn=o,Rs.transition=s}else t.current=n;if(Qf&&(Qf=!1,nl=t,lm=i),s=t.pendingLanes,s===0&&(dl=null),RI(n.stateNode),Wi(t,pr()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(am)throw am=!1,t=e2,e2=null,t;return lm&1&&t.tag!==0&&bu(),s=t.pendingLanes,s&1?t===t2?rd++:(rd=0,t2=t):rd=0,Tl(),null}function bu(){if(nl!==null){var t=J4(lm),e=Rs.transition,n=vn;try{if(Rs.transition=null,vn=16>t?16:t,nl===null)var r=!1;else{if(t=nl,nl=null,lm=0,sn&6)throw Error(Ue(331));var i=sn;for(sn|=4,rt=t.current;rt!==null;){var s=rt,o=s.child;if(rt.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(rt=c;rt!==null;){var u=rt;switch(u.tag){case 0:case 11:case 15:td(8,u,s)}var g=u.child;if(g!==null)g.return=u,rt=g;else for(;rt!==null;){u=rt;var y=u.sibling,p=u.return;if(c6(u),u===c){rt=null;break}if(y!==null){y.return=p,rt=y;break}rt=p}}}var b=s.alternate;if(b!==null){var N=b.child;if(N!==null){b.child=null;do{var C=N.sibling;N.sibling=null,N=C}while(N!==null)}}rt=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,rt=o;else e:for(;rt!==null;){if(s=rt,s.flags&2048)switch(s.tag){case 0:case 11:case 15:td(9,s,s.return)}var _=s.sibling;if(_!==null){_.return=s.return,rt=_;break e}rt=s.return}}var k=t.current;for(rt=k;rt!==null;){o=rt;var L=o.child;if(o.subtreeFlags&2064&&L!==null)L.return=o,rt=L;else e:for(o=k;rt!==null;){if(a=rt,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:$m(9,a)}}catch(z){sr(a,a.return,z)}if(a===o){rt=null;break e}var D=a.sibling;if(D!==null){D.return=a.return,rt=D;break e}rt=a.return}}if(sn=i,Tl(),Ao&&typeof Ao.onPostCommitFiberRoot=="function")try{Ao.onPostCommitFiberRoot(Fm,t)}catch{}r=!0}return r}finally{vn=n,Rs.transition=e}}return!1}function ex(t,e,n){e=Mu(n,e),e=J3(t,e,1),t=hl(t,e,1),e=ki(),t!==null&&(Kd(t,1,e),Wi(t,e))}function sr(t,e,n){if(t.tag===3)ex(t,t,n);else for(;e!==null;){if(e.tag===3){ex(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(dl===null||!dl.has(r))){t=Mu(n,t),t=Z3(e,t,1),e=hl(e,t,1),t=ki(),e!==null&&(Kd(e,1,t),Wi(e,t));break}}e=e.return}}function s8(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=ki(),t.pingedLanes|=t.suspendedLanes&n,Vr===t&&(Jr&n)===n&&(Rr===4||Rr===3&&(Jr&130023424)===Jr&&500>pr()-My?rc(t,0):Oy|=n),Wi(t,e)}function w6(t,e){e===0&&(t.mode&1?(e=Vf,Vf<<=1,!(Vf&130023424)&&(Vf=4194304)):e=1);var n=ki();t=ha(t,e),t!==null&&(Kd(t,e,n),Wi(t,n))}function o8(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),w6(t,n)}function a8(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Ue(314))}r!==null&&r.delete(e),w6(t,n)}var x6;x6=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||qi.current)zi=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return zi=!1,Kk(t,e,n);zi=!!(t.flags&131072)}else zi=!1,Vn&&e.flags&1048576&&S3(e,Zp,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;bp(t,e),t=e.pendingProps;var i=Lu(e,vi.current);_u(e,n),i=Cy(null,e,r,t,i,n);var s=Py();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Hi(r)?(s=!0,Xp(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Ay(e),i.updater=Wm,e.stateNode=i,i._reactInternals=e,q1(e,r,t,n),e=$1(null,e,r,!0,s,n)):(e.tag=0,Vn&&s&&vy(e),Ti(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(bp(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=c8(r),t=$s(r,t),i){case 0:e=W1(null,e,r,t,n);break e;case 1:e=Hw(null,e,r,t,n);break e;case 11:e=zw(null,e,r,t,n);break e;case 14:e=qw(null,e,r,$s(r.type,t),n);break e}throw Error(Ue(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:$s(r,i),W1(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:$s(r,i),Hw(t,e,r,i,n);case 3:e:{if(r6(e),t===null)throw Error(Ue(387));r=e.pendingProps,s=e.memoizedState,i=s.element,C3(t,e),nm(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Mu(Error(Ue(423)),e),e=Ww(t,e,r,n,i);break e}else if(r!==i){i=Mu(Error(Ue(424)),e),e=Ww(t,e,r,n,i);break e}else for(ls=ul(e.stateNode.containerInfo.firstChild),ds=e,Vn=!0,Ks=null,n=I3(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ju(),r===i){e=da(t,e,n);break e}Ti(t,e,r,n)}e=e.child}return e;case 5:return P3(e),t===null&&V1(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,D1(r,i)?o=null:s!==null&&D1(r,s)&&(e.flags|=32),n6(t,e),Ti(t,e,o,n),e.child;case 6:return t===null&&V1(e),null;case 13:return i6(t,e,n);case 4:return Ey(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Du(e,null,r,n):Ti(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:$s(r,i),zw(t,e,r,i,n);case 7:return Ti(t,e,e.pendingProps,n),e.child;case 8:return Ti(t,e,e.pendingProps.children,n),e.child;case 12:return Ti(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Rn(em,r._currentValue),r._currentValue=o,s!==null)if(Js(s.value,o)){if(s.children===i.children&&!qi.current){e=da(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=ia(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),B1(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(Ue(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),B1(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Ti(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,_u(e,n),i=Ls(i),r=r(i),e.flags|=1,Ti(t,e,r,n),e.child;case 14:return r=e.type,i=$s(r,e.pendingProps),i=$s(r.type,i),qw(t,e,r,i,n);case 15:return e6(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:$s(r,i),bp(t,e),e.tag=1,Hi(r)?(t=!0,Xp(e)):t=!1,_u(e,n),X3(e,r,i),q1(e,r,i,n),$1(null,e,r,!0,t,n);case 19:return s6(t,e,n);case 22:return t6(t,e,n)}throw Error(Ue(156,e.tag))};function _6(t,e){return K4(t,e)}function l8(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ps(t,e,n,r){return new l8(t,e,n,r)}function By(t){return t=t.prototype,!(!t||!t.isReactComponent)}function c8(t){if(typeof t=="function")return By(t)?1:0;if(t!=null){if(t=t.$$typeof,t===oy)return 11;if(t===ay)return 14}return 2}function pl(t,e){var n=t.alternate;return n===null?(n=Ps(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Ap(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")By(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case iu:return ic(n.children,i,s,e);case sy:o=8,i|=8;break;case f1:return t=Ps(12,n,e,i|2),t.elementType=f1,t.lanes=s,t;case p1:return t=Ps(13,n,e,i),t.elementType=p1,t.lanes=s,t;case m1:return t=Ps(19,n,e,i),t.elementType=m1,t.lanes=s,t;case P4:return Km(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case k4:o=10;break e;case C4:o=9;break e;case oy:o=11;break e;case ay:o=14;break e;case $a:o=16,r=null;break e}throw Error(Ue(130,t==null?t:typeof t,""))}return e=Ps(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function ic(t,e,n,r){return t=Ps(7,t,r,e),t.lanes=n,t}function Km(t,e,n,r){return t=Ps(22,t,r,e),t.elementType=P4,t.lanes=n,t.stateNode={isHidden:!1},t}function y0(t,e,n){return t=Ps(6,t,null,e),t.lanes=n,t}function v0(t,e,n){return e=Ps(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function u8(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Jg(0),this.expirationTimes=Jg(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Jg(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function zy(t,e,n,r,i,s,o,a,l){return t=new u8(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Ps(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ay(s),t}function h8(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ru,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function b6(t){if(!t)return wl;t=t._reactInternals;e:{if(Ec(t)!==t||t.tag!==1)throw Error(Ue(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Hi(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Ue(171))}if(t.tag===1){var n=t.type;if(Hi(n))return b3(t,n,e)}return e}function N6(t,e,n,r,i,s,o,a,l){return t=zy(n,r,!0,t,i,s,o,a,l),t.context=b6(null),n=t.current,r=ki(),i=fl(n),s=ia(r,i),s.callback=e??null,hl(n,s,i),t.current.lanes=i,Kd(t,i,r),Wi(t,r),t}function Ym(t,e,n,r){var i=e.current,s=ki(),o=fl(i);return n=b6(n),e.context===null?e.context=n:e.pendingContext=n,e=ia(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=hl(i,e,o),t!==null&&(Qs(t,i,o,s),wp(t,i,o)),o}function um(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function tx(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function qy(t,e){tx(t,e),(t=t.alternate)&&tx(t,e)}function d8(){return null}var S6=typeof reportError=="function"?reportError:function(t){console.error(t)};function Hy(t){this._internalRoot=t}Qm.prototype.render=Hy.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Ue(409));Ym(t,e,null,null)};Qm.prototype.unmount=Hy.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;dc(function(){Ym(null,t,null,null)}),e[ua]=null}};function Qm(t){this._internalRoot=t}Qm.prototype.unstable_scheduleHydration=function(t){if(t){var e=t3();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ka.length&&e!==0&&e<Ka[n].priority;n++);Ka.splice(n,0,t),n===0&&r3(t)}};function Wy(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Xm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function nx(){}function f8(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=um(o);s.call(c)}}var o=N6(e,r,t,0,null,!1,!1,"",nx);return t._reactRootContainer=o,t[ua]=o.current,_d(t.nodeType===8?t.parentNode:t),dc(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=um(l);a.call(c)}}var l=zy(t,0,!1,null,null,!1,!1,"",nx);return t._reactRootContainer=l,t[ua]=l.current,_d(t.nodeType===8?t.parentNode:t),dc(function(){Ym(e,l,n,r)}),l}function Jm(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=um(o);a.call(l)}}Ym(e,o,t,i)}else o=f8(n,e,t,i,r);return um(o)}Z4=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Bh(e.pendingLanes);n!==0&&(uy(e,n|1),Wi(e,pr()),!(sn&6)&&(Fu=pr()+500,Tl()))}break;case 13:dc(function(){var r=ha(t,1);if(r!==null){var i=ki();Qs(r,t,1,i)}}),qy(t,1)}};hy=function(t){if(t.tag===13){var e=ha(t,134217728);if(e!==null){var n=ki();Qs(e,t,134217728,n)}qy(t,134217728)}};e3=function(t){if(t.tag===13){var e=fl(t),n=ha(t,e);if(n!==null){var r=ki();Qs(n,t,e,r)}qy(t,e)}};t3=function(){return vn};n3=function(t,e){var n=vn;try{return vn=t,e()}finally{vn=n}};A1=function(t,e,n){switch(e){case"input":if(v1(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=zm(r);if(!i)throw Error(Ue(90));L4(r),v1(r,i)}}}break;case"textarea":D4(t,n);break;case"select":e=n.value,e!=null&&yu(t,!!n.multiple,e,!1)}};z4=Fy;q4=dc;var p8={usingClientEntryPoint:!1,Events:[Qd,lu,zm,V4,B4,Fy]},jh={findFiberByHostInstance:Jl,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},m8={bundleType:jh.bundleType,version:jh.version,rendererPackageName:jh.rendererPackageName,rendererConfig:jh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:va.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=$4(t),t===null?null:t.stateNode},findFiberByHostInstance:jh.findFiberByHostInstance||d8,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Xf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Xf.isDisabled&&Xf.supportsFiber)try{Fm=Xf.inject(m8),Ao=Xf}catch{}}ps.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=p8;ps.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Wy(e))throw Error(Ue(200));return h8(t,e,null,n)};ps.createRoot=function(t,e){if(!Wy(t))throw Error(Ue(299));var n=!1,r="",i=S6;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=zy(t,1,!1,null,null,n,!1,r,i),t[ua]=e.current,_d(t.nodeType===8?t.parentNode:t),new Hy(e)};ps.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Ue(188)):(t=Object.keys(t).join(","),Error(Ue(268,t)));return t=$4(e),t=t===null?null:t.stateNode,t};ps.flushSync=function(t){return dc(t)};ps.hydrate=function(t,e,n){if(!Xm(e))throw Error(Ue(200));return Jm(null,t,e,!0,n)};ps.hydrateRoot=function(t,e,n){if(!Wy(t))throw Error(Ue(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=S6;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=N6(e,null,t,1,n??null,i,!1,s,o),t[ua]=e.current,_d(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Qm(e)};ps.render=function(t,e,n){if(!Xm(e))throw Error(Ue(200));return Jm(null,t,e,!1,n)};ps.unmountComponentAtNode=function(t){if(!Xm(t))throw Error(Ue(40));return t._reactRootContainer?(dc(function(){Jm(null,null,t,!1,function(){t._reactRootContainer=null,t[ua]=null})}),!0):!1};ps.unstable_batchedUpdates=Fy;ps.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Xm(n))throw Error(Ue(200));if(t==null||t._reactInternals===void 0)throw Error(Ue(38));return Jm(t,e,n,!1,r)};ps.version="18.3.1-next-f1338f8080-20240426";function A6(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(A6)}catch(t){console.error(t)}}A6(),A4.exports=ps;var g8=A4.exports,E6,rx=g8;E6=rx.createRoot,rx.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Cd(){return Cd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Cd.apply(this,arguments)}var rl;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(rl||(rl={}));const ix="popstate";function y8(t){t===void 0&&(t={});function e(i,s){let{pathname:o="/",search:a="",hash:l=""}=Tc(i.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),i2("",{pathname:o,search:a,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(i,s){let o=i.document.querySelector("base"),a="";if(o&&o.getAttribute("href")){let l=i.location.href,c=l.indexOf("#");a=c===-1?l:l.slice(0,c)}return a+"#"+(typeof s=="string"?s:hm(s))}function r(i,s){Zm(i.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(s)+")")}return w8(e,n,r,t)}function vr(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Zm(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function v8(){return Math.random().toString(36).substr(2,8)}function sx(t,e){return{usr:t.state,key:t.key,idx:e}}function i2(t,e,n,r){return n===void 0&&(n=null),Cd({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Tc(e):e,{state:n,key:e&&e.key||r||v8()})}function hm(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Tc(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function w8(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=rl.Pop,l=null,c=u();c==null&&(c=0,o.replaceState(Cd({},o.state,{idx:c}),""));function u(){return(o.state||{idx:null}).idx}function g(){a=rl.Pop;let C=u(),_=C==null?null:C-c;c=C,l&&l({action:a,location:N.location,delta:_})}function y(C,_){a=rl.Push;let k=i2(N.location,C,_);n&&n(k,C),c=u()+1;let L=sx(k,c),D=N.createHref(k);try{o.pushState(L,"",D)}catch(z){if(z instanceof DOMException&&z.name==="DataCloneError")throw z;i.location.assign(D)}s&&l&&l({action:a,location:N.location,delta:1})}function p(C,_){a=rl.Replace;let k=i2(N.location,C,_);n&&n(k,C),c=u();let L=sx(k,c),D=N.createHref(k);o.replaceState(L,"",D),s&&l&&l({action:a,location:N.location,delta:0})}function b(C){let _=i.location.origin!=="null"?i.location.origin:i.location.href,k=typeof C=="string"?C:hm(C);return k=k.replace(/ $/,"%20"),vr(_,"No window.location.(origin|href) available to create URL for href: "+k),new URL(k,_)}let N={get action(){return a},get location(){return t(i,o)},listen(C){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(ix,g),l=C,()=>{i.removeEventListener(ix,g),l=null}},createHref(C){return e(i,C)},createURL:b,encodeLocation(C){let _=b(C);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:y,replace:p,go(C){return o.go(C)}};return N}var ox;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(ox||(ox={}));function x8(t,e,n){return n===void 0&&(n="/"),_8(t,e,n)}function _8(t,e,n,r){let i=typeof e=="string"?Tc(e):e,s=$y(i.pathname||"/",n);if(s==null)return null;let o=T6(t);b8(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=j8(s);a=P8(o[l],c)}return a}function T6(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(vr(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=ml([r,l.relativePath]),u=n.concat(l);s.children&&s.children.length>0&&(vr(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),T6(s.children,e,u,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:k8(c,s.index),routesMeta:u})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of I6(s.path))i(s,o,l)}),e}function I6(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=I6(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function b8(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:C8(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const N8=/^:[\w-]+$/,S8=3,A8=2,E8=1,T8=10,I8=-2,ax=t=>t==="*";function k8(t,e){let n=t.split("/"),r=n.length;return n.some(ax)&&(r+=I8),e&&(r+=A8),n.filter(i=>!ax(i)).reduce((i,s)=>i+(N8.test(s)?S8:s===""?E8:T8),r)}function C8(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function P8(t,e,n){let{routesMeta:r}=t,i={},s="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,u=s==="/"?e:e.slice(s.length)||"/",g=R8({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u),y=l.route;if(!g)return null;Object.assign(i,g.params),o.push({params:i,pathname:ml([s,g.pathname]),pathnameBase:U8(ml([s,g.pathnameBase])),route:y}),g.pathnameBase!=="/"&&(s=ml([s,g.pathnameBase]))}return o}function R8(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=L8(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((c,u,g)=>{let{paramName:y,isOptional:p}=u;if(y==="*"){let N=a[g]||"";o=s.slice(0,s.length-N.length).replace(/(.)\/+$/,"$1")}const b=a[g];return p&&!b?c[y]=void 0:c[y]=(b||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:t}}function L8(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Zm(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function j8(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Zm(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function $y(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const D8=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,O8=t=>D8.test(t);function M8(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Tc(t):t,s;if(n)if(O8(n))s=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),Zm(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+n))}n.startsWith("/")?s=lx(n.substring(1),"/"):s=lx(n,e)}else s=e;return{pathname:s,search:V8(r),hash:B8(i)}}function lx(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function w0(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function F8(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Gy(t,e){let n=F8(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Ky(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=Tc(t):(i=Cd({},t),vr(!i.pathname||!i.pathname.includes("?"),w0("?","pathname","search",i)),vr(!i.pathname||!i.pathname.includes("#"),w0("#","pathname","hash",i)),vr(!i.search||!i.search.includes("#"),w0("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let g=e.length-1;if(!r&&o.startsWith("..")){let y=o.split("/");for(;y[0]==="..";)y.shift(),g-=1;i.pathname=y.join("/")}a=g>=0?e[g]:"/"}let l=M8(i,a),c=o&&o!=="/"&&o.endsWith("/"),u=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}const ml=t=>t.join("/").replace(/\/\/+/g,"/"),U8=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),V8=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,B8=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function z8(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const k6=["post","put","patch","delete"];new Set(k6);const q8=["get",...k6];new Set(q8);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Pd(){return Pd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Pd.apply(this,arguments)}const Yy=se.createContext(null),H8=se.createContext(null),Il=se.createContext(null),eg=se.createContext(null),wa=se.createContext({outlet:null,matches:[],isDataRoute:!1}),C6=se.createContext(null);function W8(t,e){let{relative:n}=e===void 0?{}:e;Xu()||vr(!1);let{basename:r,navigator:i}=se.useContext(Il),{hash:s,pathname:o,search:a}=R6(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:ml([r,o])),i.createHref({pathname:l,search:a,hash:s})}function Xu(){return se.useContext(eg)!=null}function Ju(){return Xu()||vr(!1),se.useContext(eg).location}function P6(t){se.useContext(Il).static||se.useLayoutEffect(t)}function ji(){let{isDataRoute:t}=se.useContext(wa);return t?iC():$8()}function $8(){Xu()||vr(!1);let t=se.useContext(Yy),{basename:e,future:n,navigator:r}=se.useContext(Il),{matches:i}=se.useContext(wa),{pathname:s}=Ju(),o=JSON.stringify(Gy(i,n.v7_relativeSplatPath)),a=se.useRef(!1);return P6(()=>{a.current=!0}),se.useCallback(function(c,u){if(u===void 0&&(u={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let g=Ky(c,JSON.parse(o),s,u.relative==="path");t==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:ml([e,g.pathname])),(u.replace?r.replace:r.push)(g,u.state,u)},[e,r,o,s,t])}function tg(){let{matches:t}=se.useContext(wa),e=t[t.length-1];return e?e.params:{}}function R6(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=se.useContext(Il),{matches:i}=se.useContext(wa),{pathname:s}=Ju(),o=JSON.stringify(Gy(i,r.v7_relativeSplatPath));return se.useMemo(()=>Ky(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function G8(t,e){return K8(t,e)}function K8(t,e,n,r){Xu()||vr(!1);let{navigator:i}=se.useContext(Il),{matches:s}=se.useContext(wa),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=Ju(),u;if(e){var g;let C=typeof e=="string"?Tc(e):e;l==="/"||(g=C.pathname)!=null&&g.startsWith(l)||vr(!1),u=C}else u=c;let y=u.pathname||"/",p=y;if(l!=="/"){let C=l.replace(/^\//,"").split("/");p="/"+y.replace(/^\//,"").split("/").slice(C.length).join("/")}let b=x8(t,{pathname:p}),N=Z8(b&&b.map(C=>Object.assign({},C,{params:Object.assign({},a,C.params),pathname:ml([l,i.encodeLocation?i.encodeLocation(C.pathname).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?l:ml([l,i.encodeLocation?i.encodeLocation(C.pathnameBase).pathname:C.pathnameBase])})),s,n,r);return e&&N?se.createElement(eg.Provider,{value:{location:Pd({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:rl.Pop}},N):N}function Y8(){let t=rC(),e=z8(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return se.createElement(se.Fragment,null,se.createElement("h2",null,"Unexpected Application Error!"),se.createElement("h3",{style:{fontStyle:"italic"}},e),n?se.createElement("pre",{style:i},n):null,null)}const Q8=se.createElement(Y8,null);class X8 extends se.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?se.createElement(wa.Provider,{value:this.props.routeContext},se.createElement(C6.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function J8(t){let{routeContext:e,match:n,children:r}=t,i=se.useContext(Yy);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),se.createElement(wa.Provider,{value:e},r)}function Z8(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let u=o.findIndex(g=>g.route.id&&(a==null?void 0:a[g.route.id])!==void 0);u>=0||vr(!1),o=o.slice(0,Math.min(o.length,u+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let u=0;u<o.length;u++){let g=o[u];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(c=u),g.route.id){let{loaderData:y,errors:p}=n,b=g.route.loader&&y[g.route.id]===void 0&&(!p||p[g.route.id]===void 0);if(g.route.lazy||b){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((u,g,y)=>{let p,b=!1,N=null,C=null;n&&(p=a&&g.route.id?a[g.route.id]:void 0,N=g.route.errorElement||Q8,l&&(c<0&&y===0?(sC("route-fallback"),b=!0,C=null):c===y&&(b=!0,C=g.route.hydrateFallbackElement||null)));let _=e.concat(o.slice(0,y+1)),k=()=>{let L;return p?L=N:b?L=C:g.route.Component?L=se.createElement(g.route.Component,null):g.route.element?L=g.route.element:L=u,se.createElement(J8,{match:g,routeContext:{outlet:u,matches:_,isDataRoute:n!=null},children:L})};return n&&(g.route.ErrorBoundary||g.route.errorElement||y===0)?se.createElement(X8,{location:n.location,revalidation:n.revalidation,component:N,error:p,children:k(),routeContext:{outlet:null,matches:_,isDataRoute:!0}}):k()},null)}var L6=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(L6||{}),j6=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(j6||{});function eC(t){let e=se.useContext(Yy);return e||vr(!1),e}function tC(t){let e=se.useContext(H8);return e||vr(!1),e}function nC(t){let e=se.useContext(wa);return e||vr(!1),e}function D6(t){let e=nC(),n=e.matches[e.matches.length-1];return n.route.id||vr(!1),n.route.id}function rC(){var t;let e=se.useContext(C6),n=tC(),r=D6();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function iC(){let{router:t}=eC(L6.UseNavigateStable),e=D6(j6.UseNavigateStable),n=se.useRef(!1);return P6(()=>{n.current=!0}),se.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,Pd({fromRouteId:e},s)))},[t,e])}const cx={};function sC(t,e,n){cx[t]||(cx[t]=!0)}function oC(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function aC(t){let{to:e,replace:n,state:r,relative:i}=t;Xu()||vr(!1);let{future:s,static:o}=se.useContext(Il),{matches:a}=se.useContext(wa),{pathname:l}=Ju(),c=ji(),u=Ky(e,Gy(a,s.v7_relativeSplatPath),l,i==="path"),g=JSON.stringify(u);return se.useEffect(()=>c(JSON.parse(g),{replace:n,state:r,relative:i}),[c,g,i,n,r]),null}function Gn(t){vr(!1)}function lC(t){let{basename:e="/",children:n=null,location:r,navigationType:i=rl.Pop,navigator:s,static:o=!1,future:a}=t;Xu()&&vr(!1);let l=e.replace(/^\/*/,"/"),c=se.useMemo(()=>({basename:l,navigator:s,static:o,future:Pd({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof r=="string"&&(r=Tc(r));let{pathname:u="/",search:g="",hash:y="",state:p=null,key:b="default"}=r,N=se.useMemo(()=>{let C=$y(u,l);return C==null?null:{location:{pathname:C,search:g,hash:y,state:p,key:b},navigationType:i}},[l,u,g,y,p,b,i]);return N==null?null:se.createElement(Il.Provider,{value:c},se.createElement(eg.Provider,{children:n,value:N}))}function cC(t){let{children:e,location:n}=t;return G8(s2(e),n)}new Promise(()=>{});function s2(t,e){e===void 0&&(e=[]);let n=[];return se.Children.forEach(t,(r,i)=>{if(!se.isValidElement(r))return;let s=[...e,i];if(r.type===se.Fragment){n.push.apply(n,s2(r.props.children,s));return}r.type!==Gn&&vr(!1),!r.props.index||!r.props.children||vr(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=s2(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function o2(){return o2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},o2.apply(this,arguments)}function uC(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function hC(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function dC(t,e){return t.button===0&&(!e||e==="_self")&&!hC(t)}const fC=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],pC="6";try{window.__reactRouterVersion=pC}catch{}const mC="startTransition",ux=sI[mC];function gC(t){let{basename:e,children:n,future:r,window:i}=t,s=se.useRef();s.current==null&&(s.current=y8({window:i,v5Compat:!0}));let o=s.current,[a,l]=se.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},u=se.useCallback(g=>{c&&ux?ux(()=>l(g)):l(g)},[l,c]);return se.useLayoutEffect(()=>o.listen(u),[o,u]),se.useEffect(()=>oC(r),[r]),se.createElement(lC,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const yC=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",vC=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,hx=se.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:l,to:c,preventScrollReset:u,viewTransition:g}=e,y=uC(e,fC),{basename:p}=se.useContext(Il),b,N=!1;if(typeof c=="string"&&vC.test(c)&&(b=c,yC))try{let L=new URL(window.location.href),D=c.startsWith("//")?new URL(L.protocol+c):new URL(c),z=$y(D.pathname,p);D.origin===L.origin&&z!=null?c=z+D.search+D.hash:N=!0}catch{}let C=W8(c,{relative:i}),_=wC(c,{replace:o,state:a,target:l,preventScrollReset:u,relative:i,viewTransition:g});function k(L){r&&r(L),L.defaultPrevented||_(L)}return se.createElement("a",o2({},y,{href:b||C,onClick:N||s?r:k,ref:n,target:l}))});var dx;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(dx||(dx={}));var fx;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(fx||(fx={}));function wC(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,viewTransition:a}=e===void 0?{}:e,l=ji(),c=Ju(),u=R6(t,{relative:o});return se.useCallback(g=>{if(dC(g,n)){g.preventDefault();let y=r!==void 0?r:hm(c)===hm(u);l(t,{replace:y,state:i,preventScrollReset:s,relative:o,viewTransition:a})}},[c,l,u,r,i,n,t,s,o,a])}var px={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O6=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},xC=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},M6={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,c=l?t[i+2]:0,u=s>>2,g=(s&3)<<4|a>>4;let y=(a&15)<<2|c>>6,p=c&63;l||(p=64,o||(y=64)),r.push(n[u],n[g],n[y],n[p])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(O6(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):xC(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const g=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||c==null||g==null)throw new _C;const y=s<<2|a>>4;if(r.push(y),c!==64){const p=a<<4&240|c>>2;if(r.push(p),g!==64){const b=c<<6&192|g;r.push(b)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class _C extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const bC=function(t){const e=O6(t);return M6.encodeByteArray(e,!0)},dm=function(t){return bC(t).replace(/\./g,"")},F6=function(t){try{return M6.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SC=()=>NC().__FIREBASE_DEFAULTS__,AC=()=>{if(typeof process>"u"||typeof px>"u")return;const t=px.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},EC=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&F6(t[1]);return e&&JSON.parse(e)},ng=()=>{try{return SC()||AC()||EC()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},U6=t=>{var e,n;return(n=(e=ng())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},V6=t=>{const e=U6(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},B6=()=>{var t;return(t=ng())===null||t===void 0?void 0:t.config},z6=t=>{var e;return(e=ng())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TC{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q6(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[dm(JSON.stringify(n)),dm(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wi(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function IC(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(wi())}function kC(){var t;const e=(t=ng())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function CC(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function PC(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function RC(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function LC(){const t=wi();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function jC(){return!kC()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function H6(){try{return typeof indexedDB=="object"}catch{return!1}}function W6(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}function DC(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OC="FirebaseError";class ro extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=OC,Object.setPrototypeOf(this,ro.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ic.prototype.create)}}class Ic{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?MC(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new ro(i,a,r)}}function MC(t,e){return t.replace(FC,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const FC=/\{\$([^}]+)}/g;function UC(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Rd(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(mx(s)&&mx(o)){if(!Rd(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function mx(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jd(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function qh(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Hh(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function VC(t,e){const n=new BC(t,e);return n.subscribe.bind(n)}class BC{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");zC(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=x0),i.error===void 0&&(i.error=x0),i.complete===void 0&&(i.complete=x0);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function zC(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function x0(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xn(t){return t&&t._delegate?t._delegate:t}class Ds{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yl="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qC{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new TC;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(WC(e))try{this.getOrInitializeService({instanceIdentifier:Yl})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Yl){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Yl){return this.instances.has(e)}getOptions(e=Yl){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:HC(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Yl){return this.component?this.component.multipleInstances?e:Yl:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function HC(t){return t===Yl?void 0:t}function WC(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $C{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new qC(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Jt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Jt||(Jt={}));const GC={debug:Jt.DEBUG,verbose:Jt.VERBOSE,info:Jt.INFO,warn:Jt.WARN,error:Jt.ERROR,silent:Jt.SILENT},KC=Jt.INFO,YC={[Jt.DEBUG]:"log",[Jt.VERBOSE]:"log",[Jt.INFO]:"info",[Jt.WARN]:"warn",[Jt.ERROR]:"error"},QC=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=YC[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Qy{constructor(e){this.name=e,this._logLevel=KC,this._logHandler=QC,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Jt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?GC[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Jt.DEBUG,...e),this._logHandler(this,Jt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Jt.VERBOSE,...e),this._logHandler(this,Jt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Jt.INFO,...e),this._logHandler(this,Jt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Jt.WARN,...e),this._logHandler(this,Jt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Jt.ERROR,...e),this._logHandler(this,Jt.ERROR,...e)}}const XC=(t,e)=>e.some(n=>t instanceof n);let gx,yx;function JC(){return gx||(gx=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function ZC(){return yx||(yx=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const $6=new WeakMap,a2=new WeakMap,G6=new WeakMap,_0=new WeakMap,Xy=new WeakMap;function eP(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(sa(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&$6.set(n,t)}).catch(()=>{}),Xy.set(e,t),e}function tP(t){if(a2.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});a2.set(t,e)}let l2={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return a2.get(t);if(e==="objectStoreNames")return t.objectStoreNames||G6.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return sa(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function nP(t){l2=t(l2)}function rP(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(b0(this),e,...n);return G6.set(r,e.sort?e.sort():[e]),sa(r)}:ZC().includes(t)?function(...e){return t.apply(b0(this),e),sa($6.get(this))}:function(...e){return sa(t.apply(b0(this),e))}}function iP(t){return typeof t=="function"?rP(t):(t instanceof IDBTransaction&&tP(t),XC(t,JC())?new Proxy(t,l2):t)}function sa(t){if(t instanceof IDBRequest)return eP(t);if(_0.has(t))return _0.get(t);const e=iP(t);return e!==t&&(_0.set(t,e),Xy.set(e,t)),e}const b0=t=>Xy.get(t);function rg(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=sa(o);return r&&o.addEventListener("upgradeneeded",l=>{r(sa(o.result),l.oldVersion,l.newVersion,sa(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}function N0(t,{blocked:e}={}){const n=indexedDB.deleteDatabase(t);return e&&n.addEventListener("blocked",r=>e(r.oldVersion,r)),sa(n).then(()=>{})}const sP=["get","getKey","getAll","getAllKeys","count"],oP=["put","add","delete","clear"],S0=new Map;function vx(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(S0.get(e))return S0.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=oP.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||sP.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),i&&l.done]))[0]};return S0.set(e,s),s}nP(t=>({...t,get:(e,n,r)=>vx(e,n)||t.get(e,n,r),has:(e,n)=>!!vx(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aP{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(lP(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function lP(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const c2="@firebase/app",wx="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fa=new Qy("@firebase/app"),cP="@firebase/app-compat",uP="@firebase/analytics-compat",hP="@firebase/analytics",dP="@firebase/app-check-compat",fP="@firebase/app-check",pP="@firebase/auth",mP="@firebase/auth-compat",gP="@firebase/database",yP="@firebase/data-connect",vP="@firebase/database-compat",wP="@firebase/functions",xP="@firebase/functions-compat",_P="@firebase/installations",bP="@firebase/installations-compat",NP="@firebase/messaging",SP="@firebase/messaging-compat",AP="@firebase/performance",EP="@firebase/performance-compat",TP="@firebase/remote-config",IP="@firebase/remote-config-compat",kP="@firebase/storage",CP="@firebase/storage-compat",PP="@firebase/firestore",RP="@firebase/vertexai-preview",LP="@firebase/firestore-compat",jP="firebase",DP="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u2="[DEFAULT]",OP={[c2]:"fire-core",[cP]:"fire-core-compat",[hP]:"fire-analytics",[uP]:"fire-analytics-compat",[fP]:"fire-app-check",[dP]:"fire-app-check-compat",[pP]:"fire-auth",[mP]:"fire-auth-compat",[gP]:"fire-rtdb",[yP]:"fire-data-connect",[vP]:"fire-rtdb-compat",[wP]:"fire-fn",[xP]:"fire-fn-compat",[_P]:"fire-iid",[bP]:"fire-iid-compat",[NP]:"fire-fcm",[SP]:"fire-fcm-compat",[AP]:"fire-perf",[EP]:"fire-perf-compat",[TP]:"fire-rc",[IP]:"fire-rc-compat",[kP]:"fire-gcs",[CP]:"fire-gcs-compat",[PP]:"fire-fst",[LP]:"fire-fst-compat",[RP]:"fire-vertex","fire-js":"fire-js",[jP]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fm=new Map,MP=new Map,h2=new Map;function xx(t,e){try{t.container.addComponent(e)}catch(n){fa.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Zs(t){const e=t.name;if(h2.has(e))return fa.debug(`There were multiple attempts to register component ${e}.`),!1;h2.set(e,t);for(const n of fm.values())xx(n,t);for(const n of MP.values())xx(n,t);return!0}function kc(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function bo(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FP={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},gl=new Ic("app","Firebase",FP);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UP{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ds("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw gl.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cc=DP;function K6(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:u2,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw gl.create("bad-app-name",{appName:String(i)});if(n||(n=B6()),!n)throw gl.create("no-options");const s=fm.get(i);if(s){if(Rd(n,s.options)&&Rd(r,s.config))return s;throw gl.create("duplicate-app",{appName:i})}const o=new $C(i);for(const l of h2.values())o.addComponent(l);const a=new UP(n,r,o);return fm.set(i,a),a}function ig(t=u2){const e=fm.get(t);if(!e&&t===u2&&B6())return K6();if(!e)throw gl.create("no-app",{appName:t});return e}function $i(t,e,n){var r;let i=(r=OP[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),fa.warn(a.join(" "));return}Zs(new Ds(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VP="firebase-heartbeat-database",BP=1,Ld="firebase-heartbeat-store";let A0=null;function Y6(){return A0||(A0=rg(VP,BP,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ld)}catch(n){console.warn(n)}}}}).catch(t=>{throw gl.create("idb-open",{originalErrorMessage:t.message})})),A0}async function zP(t){try{const n=(await Y6()).transaction(Ld),r=await n.objectStore(Ld).get(Q6(t));return await n.done,r}catch(e){if(e instanceof ro)fa.warn(e.message);else{const n=gl.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});fa.warn(n.message)}}}async function _x(t,e){try{const r=(await Y6()).transaction(Ld,"readwrite");await r.objectStore(Ld).put(e,Q6(t)),await r.done}catch(n){if(n instanceof ro)fa.warn(n.message);else{const r=gl.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});fa.warn(r.message)}}}function Q6(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qP=1024,HP=30*24*60*60*1e3;class WP{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new GP(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=bx();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=HP}),this._storage.overwrite(this._heartbeatsCache))}catch(r){fa.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=bx(),{heartbeatsToSend:r,unsentEntries:i}=$P(this._heartbeatsCache.heartbeats),s=dm(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return fa.warn(n),""}}}function bx(){return new Date().toISOString().substring(0,10)}function $P(t,e=qP){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),Nx(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Nx(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class GP{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return H6()?W6().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await zP(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return _x(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return _x(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Nx(t){return dm(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KP(t){Zs(new Ds("platform-logger",e=>new aP(e),"PRIVATE")),Zs(new Ds("heartbeat",e=>new WP(e),"PRIVATE")),$i(c2,wx,t),$i(c2,wx,"esm2017"),$i("fire-js","")}KP("");function Jy(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function X6(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const YP=X6,J6=new Ic("auth","Firebase",X6());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pm=new Qy("@firebase/auth");function QP(t,...e){pm.logLevel<=Jt.WARN&&pm.warn(`Auth (${Cc}): ${t}`,...e)}function Ep(t,...e){pm.logLevel<=Jt.ERROR&&pm.error(`Auth (${Cc}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eo(t,...e){throw Zy(t,...e)}function To(t,...e){return Zy(t,...e)}function Z6(t,e,n){const r=Object.assign(Object.assign({},YP()),{[e]:n});return new Ic("auth","Firebase",r).create(e,{appName:t.name})}function oa(t){return Z6(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Zy(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return J6.create(t,...e)}function Et(t,e,...n){if(!t)throw Zy(e,...n)}function ea(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Ep(e),new Error(e)}function pa(t,e){t||ea(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d2(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function XP(){return Sx()==="http:"||Sx()==="https:"}function Sx(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JP(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(XP()||PC()||"connection"in navigator)?navigator.onLine:!0}function ZP(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zd{constructor(e,n){this.shortDelay=e,this.longDelay=n,pa(n>e,"Short delay should be less than long delay!"),this.isMobile=IC()||RC()}get(){return JP()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ev(t,e){pa(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eN{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ea("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ea("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ea("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tR=new Zd(3e4,6e4);function kl(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function xa(t,e,n,r,i={}){return tN(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=Jd(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:l},s);return CC()||(c.referrerPolicy="no-referrer"),eN.fetch()(nN(t,t.config.apiHost,n,a),c)})}async function tN(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},eR),e);try{const i=new rR(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Jf(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Jf(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Jf(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Jf(t,"user-disabled",o);const u=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw Z6(t,u,c);eo(t,u)}}catch(i){if(i instanceof ro)throw i;eo(t,"network-request-failed",{message:String(i)})}}async function ef(t,e,n,r,i={}){const s=await xa(t,e,n,r,i);return"mfaPendingCredential"in s&&eo(t,"multi-factor-auth-required",{_serverResponse:s}),s}function nN(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?ev(t.config,i):`${t.config.apiScheme}://${i}`}function nR(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class rR{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(To(this.auth,"network-request-failed")),tR.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Jf(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=To(t,e,r);return i.customData._tokenResponse=n,i}function Ax(t){return t!==void 0&&t.enterprise!==void 0}class iR{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return nR(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function sR(t,e){return xa(t,"GET","/v2/recaptchaConfig",kl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oR(t,e){return xa(t,"POST","/v1/accounts:delete",e)}async function rN(t,e){return xa(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function id(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function aR(t,e=!1){const n=xn(t),r=await n.getIdToken(e),i=tv(r);Et(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:id(E0(i.auth_time)),issuedAtTime:id(E0(i.iat)),expirationTime:id(E0(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function E0(t){return Number(t)*1e3}function tv(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Ep("JWT malformed, contained fewer than 3 sections"),null;try{const i=F6(n);return i?JSON.parse(i):(Ep("Failed to decode base64 JWT payload"),null)}catch(i){return Ep("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function Ex(t){const e=tv(t);return Et(e,"internal-error"),Et(typeof e.exp<"u","internal-error"),Et(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uu(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof ro&&lR(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function lR({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cR{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f2{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=id(this.lastLoginAt),this.creationTime=id(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mm(t){var e;const n=t.auth,r=await t.getIdToken(),i=await Uu(t,rN(n,{idToken:r}));Et(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?iN(s.providerUserInfo):[],a=hR(t.providerData,o),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),u=l?c:!1,g={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new f2(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(t,g)}async function uR(t){const e=xn(t);await mm(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function hR(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function iN(t){return t.map(e=>{var{providerId:n}=e,r=Jy(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dR(t,e){const n=await tN(t,{},async()=>{const r=Jd({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=nN(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",eN.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function fR(t,e){return xa(t,"POST","/v2/accounts:revokeToken",kl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nu{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Et(e.idToken,"internal-error"),Et(typeof e.idToken<"u","internal-error"),Et(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Ex(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Et(e.length!==0,"internal-error");const n=Ex(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Et(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await dR(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new Nu;return r&&(Et(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(Et(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(Et(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Nu,this.toJSON())}_performRefresh(){return ea("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qa(t,e){Et(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class ta{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=Jy(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new cR(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new f2(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Uu(this,this.stsTokenManager.getToken(this.auth,e));return Et(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return aR(this,e)}reload(){return uR(this)}_assign(e){this!==e&&(Et(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ta(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Et(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await mm(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(bo(this.auth.app))return Promise.reject(oa(this.auth));const e=await this.getIdToken();return await Uu(this,oR(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,l,c,u;const g=(r=n.displayName)!==null&&r!==void 0?r:void 0,y=(i=n.email)!==null&&i!==void 0?i:void 0,p=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,b=(o=n.photoURL)!==null&&o!==void 0?o:void 0,N=(a=n.tenantId)!==null&&a!==void 0?a:void 0,C=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,_=(c=n.createdAt)!==null&&c!==void 0?c:void 0,k=(u=n.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:L,emailVerified:D,isAnonymous:z,providerData:X,stsTokenManager:j}=n;Et(L&&j,e,"internal-error");const S=Nu.fromJSON(this.name,j);Et(typeof L=="string",e,"internal-error"),qa(g,e.name),qa(y,e.name),Et(typeof D=="boolean",e,"internal-error"),Et(typeof z=="boolean",e,"internal-error"),qa(p,e.name),qa(b,e.name),qa(N,e.name),qa(C,e.name),qa(_,e.name),qa(k,e.name);const T=new ta({uid:L,auth:e,email:y,emailVerified:D,displayName:g,isAnonymous:z,photoURL:b,phoneNumber:p,tenantId:N,stsTokenManager:S,createdAt:_,lastLoginAt:k});return X&&Array.isArray(X)&&(T.providerData=X.map(M=>Object.assign({},M))),C&&(T._redirectEventId=C),T}static async _fromIdTokenResponse(e,n,r=!1){const i=new Nu;i.updateFromServerResponse(n);const s=new ta({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await mm(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];Et(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?iN(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new Nu;a.updateFromIdToken(r);const l=new ta({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new f2(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tx=new Map;function na(t){pa(t instanceof Function,"Expected a class definition");let e=Tx.get(t);return e?(pa(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Tx.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sN{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}sN.type="NONE";const Ix=sN;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tp(t,e,n){return`firebase:${t}:${e}:${n}`}class Su{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Tp(this.userKey,i.apiKey,s),this.fullPersistenceKey=Tp("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?ta._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Su(na(Ix),e,r);const i=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||na(Ix);const o=Tp(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const u=await c._get(o);if(u){const g=ta._fromJSON(e,u);c!==s&&(a=g),s=c;break}}catch{}const l=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new Su(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new Su(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kx(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(cN(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(oN(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(hN(e))return"Blackberry";if(dN(e))return"Webos";if(aN(e))return"Safari";if((e.includes("chrome/")||lN(e))&&!e.includes("edge/"))return"Chrome";if(uN(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function oN(t=wi()){return/firefox\//i.test(t)}function aN(t=wi()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function lN(t=wi()){return/crios\//i.test(t)}function cN(t=wi()){return/iemobile/i.test(t)}function uN(t=wi()){return/android/i.test(t)}function hN(t=wi()){return/blackberry/i.test(t)}function dN(t=wi()){return/webos/i.test(t)}function nv(t=wi()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function pR(t=wi()){var e;return nv(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function mR(){return LC()&&document.documentMode===10}function fN(t=wi()){return nv(t)||uN(t)||dN(t)||hN(t)||/windows phone/i.test(t)||cN(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pN(t,e=[]){let n;switch(t){case"Browser":n=kx(wi());break;case"Worker":n=`${kx(wi())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Cc}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gR{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yR(t,e={}){return xa(t,"GET","/v2/passwordPolicy",kl(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vR=6;class wR{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:vR,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xR{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Cx(this),this.idTokenSubscription=new Cx(this),this.beforeStateQueue=new gR(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=J6,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=na(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Su.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await rN(this,{idToken:e}),r=await ta._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(bo(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Et(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await mm(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=ZP()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(bo(this.app))return Promise.reject(oa(this));const n=e?xn(e):null;return n&&Et(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Et(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return bo(this.app)?Promise.reject(oa(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return bo(this.app)?Promise.reject(oa(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(na(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await yR(this),n=new wR(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Ic("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await fR(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&na(e)||this._popupRedirectResolver;Et(n,this,"argument-error"),this.redirectPersistenceManager=await Su.create(this,[na(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Et(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Et(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=pN(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&QP(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Pc(t){return xn(t)}class Cx{constructor(e){this.auth=e,this.observer=null,this.addObserver=VC(n=>this.observer=n)}get next(){return Et(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sg={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function _R(t){sg=t}function mN(t){return sg.loadJS(t)}function bR(){return sg.recaptchaEnterpriseScript}function NR(){return sg.gapiScript}function SR(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const AR="recaptcha-enterprise",ER="NO_RECAPTCHA";class TR{constructor(e){this.type=AR,this.auth=Pc(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{sR(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new iR(l);return s.tenantId==null?s._agentRecaptchaConfig=c:s._tenantRecaptchaConfigs[s.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function i(s,o,a){const l=window.grecaptcha;Ax(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(c=>{o(c)}).catch(()=>{o(ER)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&Ax(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=bR();l.length!==0&&(l+=a),mN(l).then(()=>{i(a,s,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function Px(t,e,n,r=!1){const i=new TR(t);let s;try{s=await i.verify(n)}catch{s=await i.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function p2(t,e,n,r){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await Px(t,e,n,n==="getOobCode");return r(t,s)}else return r(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await Px(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IR(t,e){const n=kc(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(Rd(s,e??{}))return i;eo(i,"already-initialized")}return n.initialize({options:e})}function kR(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(na);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function CR(t,e,n){const r=Pc(t);Et(r._canInitEmulator,r,"emulator-config-failed"),Et(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=gN(e),{host:o,port:a}=PR(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),RR()}function gN(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function PR(t){const e=gN(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:Rx(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:Rx(o)}}}function Rx(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function RR(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rv{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ea("not implemented")}_getIdTokenResponse(e){return ea("not implemented")}_linkToIdToken(e,n){return ea("not implemented")}_getReauthenticationResolver(e){return ea("not implemented")}}async function LR(t,e){return xa(t,"POST","/v1/accounts:update",e)}async function jR(t,e){return xa(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DR(t,e){return ef(t,"POST","/v1/accounts:signInWithPassword",kl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OR(t,e){return ef(t,"POST","/v1/accounts:signInWithEmailLink",kl(t,e))}async function MR(t,e){return ef(t,"POST","/v1/accounts:signInWithEmailLink",kl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jd extends rv{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new jd(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new jd(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return p2(e,n,"signInWithPassword",DR);case"emailLink":return OR(e,{email:this._email,oobCode:this._password});default:eo(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return p2(e,r,"signUpPassword",jR);case"emailLink":return MR(e,{idToken:n,email:this._email,oobCode:this._password});default:eo(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Au(t,e){return ef(t,"POST","/v1/accounts:signInWithIdp",kl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FR="http://localhost";class fc extends rv{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new fc(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):eo("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=Jy(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new fc(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Au(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Au(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Au(e,n)}buildRequest(){const e={requestUri:FR,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Jd(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UR(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function VR(t){const e=qh(Hh(t)).link,n=e?qh(Hh(e)).deep_link_id:null,r=qh(Hh(t)).deep_link_id;return(r?qh(Hh(r)).link:null)||r||n||e||t}class iv{constructor(e){var n,r,i,s,o,a;const l=qh(Hh(e)),c=(n=l.apiKey)!==null&&n!==void 0?n:null,u=(r=l.oobCode)!==null&&r!==void 0?r:null,g=UR((i=l.mode)!==null&&i!==void 0?i:null);Et(c&&u&&g,"argument-error"),this.apiKey=c,this.operation=g,this.code=u,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=VR(e);try{return new iv(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zu{constructor(){this.providerId=Zu.PROVIDER_ID}static credential(e,n){return jd._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=iv.parseLink(n);return Et(r,"argument-error"),jd._fromEmailAndCode(e,r.code,r.tenantId)}}Zu.PROVIDER_ID="password";Zu.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Zu.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yN{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tf extends yN{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qa extends tf{constructor(){super("facebook.com")}static credential(e){return fc._fromParams({providerId:Qa.PROVIDER_ID,signInMethod:Qa.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Qa.credentialFromTaggedObject(e)}static credentialFromError(e){return Qa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Qa.credential(e.oauthAccessToken)}catch{return null}}}Qa.FACEBOOK_SIGN_IN_METHOD="facebook.com";Qa.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xa extends tf{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return fc._fromParams({providerId:Xa.PROVIDER_ID,signInMethod:Xa.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Xa.credentialFromTaggedObject(e)}static credentialFromError(e){return Xa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Xa.credential(n,r)}catch{return null}}}Xa.GOOGLE_SIGN_IN_METHOD="google.com";Xa.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ja extends tf{constructor(){super("github.com")}static credential(e){return fc._fromParams({providerId:Ja.PROVIDER_ID,signInMethod:Ja.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ja.credentialFromTaggedObject(e)}static credentialFromError(e){return Ja.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ja.credential(e.oauthAccessToken)}catch{return null}}}Ja.GITHUB_SIGN_IN_METHOD="github.com";Ja.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Za extends tf{constructor(){super("twitter.com")}static credential(e,n){return fc._fromParams({providerId:Za.PROVIDER_ID,signInMethod:Za.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Za.credentialFromTaggedObject(e)}static credentialFromError(e){return Za.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Za.credential(n,r)}catch{return null}}}Za.TWITTER_SIGN_IN_METHOD="twitter.com";Za.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BR(t,e){return ef(t,"POST","/v1/accounts:signUp",kl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await ta._fromIdTokenResponse(e,r,i),o=Lx(r);return new pc({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=Lx(r);return new pc({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function Lx(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gm extends ro{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,gm.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new gm(e,n,r,i)}}function vN(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?gm._fromErrorAndOperation(t,s,e,r):s})}async function zR(t,e,n=!1){const r=await Uu(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return pc._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qR(t,e,n=!1){const{auth:r}=t;if(bo(r.app))return Promise.reject(oa(r));const i="reauthenticate";try{const s=await Uu(t,vN(r,i,e,t),n);Et(s.idToken,r,"internal-error");const o=tv(s.idToken);Et(o,r,"internal-error");const{sub:a}=o;return Et(t.uid===a,r,"user-mismatch"),pc._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&eo(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wN(t,e,n=!1){if(bo(t.app))return Promise.reject(oa(t));const r="signIn",i=await vN(t,r,e),s=await pc._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function HR(t,e){return wN(Pc(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xN(t){const e=Pc(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function _N(t,e,n){if(bo(t.app))return Promise.reject(oa(t));const r=Pc(t),o=await p2(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",BR).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&xN(t),l}),a=await pc._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function WR(t,e,n){return bo(t.app)?Promise.reject(oa(t)):HR(xn(t),Zu.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&xN(t),r})}function $R(t,e){return GR(xn(t),null,e)}async function GR(t,e,n){const{auth:r}=t,s={idToken:await t.getIdToken(),returnSecureToken:!0};n&&(s.password=n);const o=await Uu(t,LR(r,s));await t._updateTokensIfNecessary(o,!0)}function KR(t,e,n,r){return xn(t).onIdTokenChanged(e,n,r)}function YR(t,e,n){return xn(t).beforeAuthStateChanged(e,n)}function Rc(t,e,n,r){return xn(t).onAuthStateChanged(e,n,r)}function bN(t){return xn(t).signOut()}const ym="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NN{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(ym,"1"),this.storage.removeItem(ym),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QR=1e3,XR=10;class SN extends NN{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=fN(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);mR()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,XR):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},QR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}SN.type="LOCAL";const JR=SN;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AN extends NN{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}AN.type="SESSION";const EN=AN;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZR(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class og{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new og(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async c=>c(n.origin,s)),l=await ZR(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}og.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sv(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eL{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const c=sv("",20);i.port1.start();const u=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(g){const y=g;if(y.data.eventId===c)switch(y.data.status){case"ack":clearTimeout(u),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(y.data.response);break;default:clearTimeout(u),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Io(){return window}function tL(t){Io().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TN(){return typeof Io().WorkerGlobalScope<"u"&&typeof Io().importScripts=="function"}async function nL(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function rL(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function iL(){return TN()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IN="firebaseLocalStorageDb",sL=1,vm="firebaseLocalStorage",kN="fbase_key";class nf{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function ag(t,e){return t.transaction([vm],e?"readwrite":"readonly").objectStore(vm)}function oL(){const t=indexedDB.deleteDatabase(IN);return new nf(t).toPromise()}function m2(){const t=indexedDB.open(IN,sL);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(vm,{keyPath:kN})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(vm)?e(r):(r.close(),await oL(),e(await m2()))})})}async function jx(t,e,n){const r=ag(t,!0).put({[kN]:e,value:n});return new nf(r).toPromise()}async function aL(t,e){const n=ag(t,!1).get(e),r=await new nf(n).toPromise();return r===void 0?null:r.value}function Dx(t,e){const n=ag(t,!0).delete(e);return new nf(n).toPromise()}const lL=800,cL=3;class CN{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await m2(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>cL)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return TN()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=og._getInstance(iL()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await nL(),!this.activeServiceWorker)return;this.sender=new eL(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||rL()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await m2();return await jx(e,ym,"1"),await Dx(e,ym),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>jx(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>aL(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Dx(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=ag(i,!1).getAll();return new nf(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),lL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}CN.type="LOCAL";const uL=CN;new Zd(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hL(t,e){return e?na(e):(Et(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ov extends rv{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Au(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Au(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Au(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function dL(t){return wN(t.auth,new ov(t),t.bypassAuthState)}function fL(t){const{auth:e,user:n}=t;return Et(n,e,"internal-error"),qR(n,new ov(t),t.bypassAuthState)}async function pL(t){const{auth:e,user:n}=t;return Et(n,e,"internal-error"),zR(n,new ov(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PN{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return dL;case"linkViaPopup":case"linkViaRedirect":return pL;case"reauthViaPopup":case"reauthViaRedirect":return fL;default:eo(this.auth,"internal-error")}}resolve(e){pa(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){pa(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mL=new Zd(2e3,1e4);class mu extends PN{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,mu.currentPopupAction&&mu.currentPopupAction.cancel(),mu.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Et(e,this.auth,"internal-error"),e}async onExecution(){pa(this.filter.length===1,"Popup operations only handle one event");const e=sv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(To(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(To(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,mu.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(To(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,mL.get())};e()}}mu.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gL="pendingRedirect",Ip=new Map;class yL extends PN{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Ip.get(this.auth._key());if(!e){try{const r=await vL(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Ip.set(this.auth._key(),e)}return this.bypassAuthState||Ip.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function vL(t,e){const n=_L(e),r=xL(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function wL(t,e){Ip.set(t._key(),e)}function xL(t){return na(t._redirectPersistence)}function _L(t){return Tp(gL,t.config.apiKey,t.name)}async function bL(t,e,n=!1){if(bo(t.app))return Promise.reject(oa(t));const r=Pc(t),i=hL(r,e),o=await new yL(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NL=10*60*1e3;class SL{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!AL(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!RN(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(To(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=NL&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ox(e))}saveEventToCache(e){this.cachedEventUids.add(Ox(e)),this.lastProcessedEventTime=Date.now()}}function Ox(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function RN({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function AL(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return RN(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EL(t,e={}){return xa(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TL=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,IL=/^https?/;async function kL(t){if(t.config.emulator)return;const{authorizedDomains:e}=await EL(t);for(const n of e)try{if(CL(n))return}catch{}eo(t,"unauthorized-domain")}function CL(t){const e=d2(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!IL.test(n))return!1;if(TL.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PL=new Zd(3e4,6e4);function Mx(){const t=Io().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function RL(t){return new Promise((e,n)=>{var r,i,s;function o(){Mx(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Mx(),n(To(t,"network-request-failed"))},timeout:PL.get()})}if(!((i=(r=Io().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Io().gapi)===null||s===void 0)&&s.load)o();else{const a=SR("iframefcb");return Io()[a]=()=>{gapi.load?o():n(To(t,"network-request-failed"))},mN(`${NR()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw kp=null,e})}let kp=null;function LL(t){return kp=kp||RL(t),kp}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jL=new Zd(5e3,15e3),DL="__/auth/iframe",OL="emulator/auth/iframe",ML={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},FL=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function UL(t){const e=t.config;Et(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?ev(e,OL):`https://${t.config.authDomain}/${DL}`,r={apiKey:e.apiKey,appName:t.name,v:Cc},i=FL.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Jd(r).slice(1)}`}async function VL(t){const e=await LL(t),n=Io().gapi;return Et(n,t,"internal-error"),e.open({where:document.body,url:UL(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ML,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=To(t,"network-request-failed"),a=Io().setTimeout(()=>{s(o)},jL.get());function l(){Io().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BL={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},zL=500,qL=600,HL="_blank",WL="http://localhost";class Fx{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function $L(t,e,n,r=zL,i=qL){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},BL),{width:r.toString(),height:i.toString(),top:s,left:o}),c=wi().toLowerCase();n&&(a=lN(c)?HL:n),oN(c)&&(e=e||WL,l.scrollbars="yes");const u=Object.entries(l).reduce((y,[p,b])=>`${y}${p}=${b},`,"");if(pR(c)&&a!=="_self")return GL(e||"",a),new Fx(null);const g=window.open(e||"",a,u);Et(g,t,"popup-blocked");try{g.focus()}catch{}return new Fx(g)}function GL(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KL="__/auth/handler",YL="emulator/auth/handler",QL=encodeURIComponent("fac");async function Ux(t,e,n,r,i,s){Et(t.config.authDomain,t,"auth-domain-config-required"),Et(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Cc,eventId:i};if(e instanceof yN){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",UC(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,g]of Object.entries({}))o[u]=g}if(e instanceof tf){const u=e.getScopes().filter(g=>g!=="");u.length>0&&(o.scopes=u.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const u of Object.keys(a))a[u]===void 0&&delete a[u];const l=await t._getAppCheckToken(),c=l?`#${QL}=${encodeURIComponent(l)}`:"";return`${XL(t)}?${Jd(a).slice(1)}${c}`}function XL({config:t}){return t.emulator?ev(t,YL):`https://${t.authDomain}/${KL}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T0="webStorageSupport";class JL{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=EN,this._completeRedirectFn=bL,this._overrideRedirectResult=wL}async _openPopup(e,n,r,i){var s;pa((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await Ux(e,n,r,d2(),i);return $L(e,o,sv())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await Ux(e,n,r,d2(),i);return tL(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(pa(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await VL(e),r=new SL(e);return n.register("authEvent",i=>(Et(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(T0,{type:T0},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[T0];o!==void 0&&n(!!o),eo(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=kL(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return fN()||aN()||nv()}}const ZL=JL;var Vx="@firebase/auth",Bx="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e7{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Et(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t7(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function n7(t){Zs(new Ds("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Et(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:pN(t)},c=new xR(r,i,s,l);return kR(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Zs(new Ds("auth-internal",e=>{const n=Pc(e.getProvider("auth").getImmediate());return(r=>new e7(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),$i(Vx,Bx,t7(t)),$i(Vx,Bx,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r7=5*60,i7=z6("authIdTokenMaxAge")||r7;let zx=null;const s7=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>i7)return;const i=n==null?void 0:n.token;zx!==i&&(zx=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function o7(t=ig()){const e=kc(t,"auth");if(e.isInitialized())return e.getImmediate();const n=IR(t,{popupRedirectResolver:ZL,persistence:[uL,JR,EN]}),r=z6("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=s7(s.toString());YR(n,o,()=>o(n.currentUser)),KR(n,a=>o(a))}}const i=U6("auth");return i&&CR(n,`http://${i}`),n}function a7(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}_R({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=To("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",a7().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});n7("Browser");var l7="firebase",c7="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */$i(l7,c7,"app");var qx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var sc,LN;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(j,S){function T(){}T.prototype=S.prototype,j.D=S.prototype,j.prototype=new T,j.prototype.constructor=j,j.C=function(M,A,I){for(var R=Array(arguments.length-2),G=2;G<arguments.length;G++)R[G-2]=arguments[G];return S.prototype[A].apply(M,R)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(j,S,T){T||(T=0);var M=Array(16);if(typeof S=="string")for(var A=0;16>A;++A)M[A]=S.charCodeAt(T++)|S.charCodeAt(T++)<<8|S.charCodeAt(T++)<<16|S.charCodeAt(T++)<<24;else for(A=0;16>A;++A)M[A]=S[T++]|S[T++]<<8|S[T++]<<16|S[T++]<<24;S=j.g[0],T=j.g[1],A=j.g[2];var I=j.g[3],R=S+(I^T&(A^I))+M[0]+3614090360&4294967295;S=T+(R<<7&4294967295|R>>>25),R=I+(A^S&(T^A))+M[1]+3905402710&4294967295,I=S+(R<<12&4294967295|R>>>20),R=A+(T^I&(S^T))+M[2]+606105819&4294967295,A=I+(R<<17&4294967295|R>>>15),R=T+(S^A&(I^S))+M[3]+3250441966&4294967295,T=A+(R<<22&4294967295|R>>>10),R=S+(I^T&(A^I))+M[4]+4118548399&4294967295,S=T+(R<<7&4294967295|R>>>25),R=I+(A^S&(T^A))+M[5]+1200080426&4294967295,I=S+(R<<12&4294967295|R>>>20),R=A+(T^I&(S^T))+M[6]+2821735955&4294967295,A=I+(R<<17&4294967295|R>>>15),R=T+(S^A&(I^S))+M[7]+4249261313&4294967295,T=A+(R<<22&4294967295|R>>>10),R=S+(I^T&(A^I))+M[8]+1770035416&4294967295,S=T+(R<<7&4294967295|R>>>25),R=I+(A^S&(T^A))+M[9]+2336552879&4294967295,I=S+(R<<12&4294967295|R>>>20),R=A+(T^I&(S^T))+M[10]+4294925233&4294967295,A=I+(R<<17&4294967295|R>>>15),R=T+(S^A&(I^S))+M[11]+2304563134&4294967295,T=A+(R<<22&4294967295|R>>>10),R=S+(I^T&(A^I))+M[12]+1804603682&4294967295,S=T+(R<<7&4294967295|R>>>25),R=I+(A^S&(T^A))+M[13]+4254626195&4294967295,I=S+(R<<12&4294967295|R>>>20),R=A+(T^I&(S^T))+M[14]+2792965006&4294967295,A=I+(R<<17&4294967295|R>>>15),R=T+(S^A&(I^S))+M[15]+1236535329&4294967295,T=A+(R<<22&4294967295|R>>>10),R=S+(A^I&(T^A))+M[1]+4129170786&4294967295,S=T+(R<<5&4294967295|R>>>27),R=I+(T^A&(S^T))+M[6]+3225465664&4294967295,I=S+(R<<9&4294967295|R>>>23),R=A+(S^T&(I^S))+M[11]+643717713&4294967295,A=I+(R<<14&4294967295|R>>>18),R=T+(I^S&(A^I))+M[0]+3921069994&4294967295,T=A+(R<<20&4294967295|R>>>12),R=S+(A^I&(T^A))+M[5]+3593408605&4294967295,S=T+(R<<5&4294967295|R>>>27),R=I+(T^A&(S^T))+M[10]+38016083&4294967295,I=S+(R<<9&4294967295|R>>>23),R=A+(S^T&(I^S))+M[15]+3634488961&4294967295,A=I+(R<<14&4294967295|R>>>18),R=T+(I^S&(A^I))+M[4]+3889429448&4294967295,T=A+(R<<20&4294967295|R>>>12),R=S+(A^I&(T^A))+M[9]+568446438&4294967295,S=T+(R<<5&4294967295|R>>>27),R=I+(T^A&(S^T))+M[14]+3275163606&4294967295,I=S+(R<<9&4294967295|R>>>23),R=A+(S^T&(I^S))+M[3]+4107603335&4294967295,A=I+(R<<14&4294967295|R>>>18),R=T+(I^S&(A^I))+M[8]+1163531501&4294967295,T=A+(R<<20&4294967295|R>>>12),R=S+(A^I&(T^A))+M[13]+2850285829&4294967295,S=T+(R<<5&4294967295|R>>>27),R=I+(T^A&(S^T))+M[2]+4243563512&4294967295,I=S+(R<<9&4294967295|R>>>23),R=A+(S^T&(I^S))+M[7]+1735328473&4294967295,A=I+(R<<14&4294967295|R>>>18),R=T+(I^S&(A^I))+M[12]+2368359562&4294967295,T=A+(R<<20&4294967295|R>>>12),R=S+(T^A^I)+M[5]+4294588738&4294967295,S=T+(R<<4&4294967295|R>>>28),R=I+(S^T^A)+M[8]+2272392833&4294967295,I=S+(R<<11&4294967295|R>>>21),R=A+(I^S^T)+M[11]+1839030562&4294967295,A=I+(R<<16&4294967295|R>>>16),R=T+(A^I^S)+M[14]+4259657740&4294967295,T=A+(R<<23&4294967295|R>>>9),R=S+(T^A^I)+M[1]+2763975236&4294967295,S=T+(R<<4&4294967295|R>>>28),R=I+(S^T^A)+M[4]+1272893353&4294967295,I=S+(R<<11&4294967295|R>>>21),R=A+(I^S^T)+M[7]+4139469664&4294967295,A=I+(R<<16&4294967295|R>>>16),R=T+(A^I^S)+M[10]+3200236656&4294967295,T=A+(R<<23&4294967295|R>>>9),R=S+(T^A^I)+M[13]+681279174&4294967295,S=T+(R<<4&4294967295|R>>>28),R=I+(S^T^A)+M[0]+3936430074&4294967295,I=S+(R<<11&4294967295|R>>>21),R=A+(I^S^T)+M[3]+3572445317&4294967295,A=I+(R<<16&4294967295|R>>>16),R=T+(A^I^S)+M[6]+76029189&4294967295,T=A+(R<<23&4294967295|R>>>9),R=S+(T^A^I)+M[9]+3654602809&4294967295,S=T+(R<<4&4294967295|R>>>28),R=I+(S^T^A)+M[12]+3873151461&4294967295,I=S+(R<<11&4294967295|R>>>21),R=A+(I^S^T)+M[15]+530742520&4294967295,A=I+(R<<16&4294967295|R>>>16),R=T+(A^I^S)+M[2]+3299628645&4294967295,T=A+(R<<23&4294967295|R>>>9),R=S+(A^(T|~I))+M[0]+4096336452&4294967295,S=T+(R<<6&4294967295|R>>>26),R=I+(T^(S|~A))+M[7]+1126891415&4294967295,I=S+(R<<10&4294967295|R>>>22),R=A+(S^(I|~T))+M[14]+2878612391&4294967295,A=I+(R<<15&4294967295|R>>>17),R=T+(I^(A|~S))+M[5]+4237533241&4294967295,T=A+(R<<21&4294967295|R>>>11),R=S+(A^(T|~I))+M[12]+1700485571&4294967295,S=T+(R<<6&4294967295|R>>>26),R=I+(T^(S|~A))+M[3]+2399980690&4294967295,I=S+(R<<10&4294967295|R>>>22),R=A+(S^(I|~T))+M[10]+4293915773&4294967295,A=I+(R<<15&4294967295|R>>>17),R=T+(I^(A|~S))+M[1]+2240044497&4294967295,T=A+(R<<21&4294967295|R>>>11),R=S+(A^(T|~I))+M[8]+1873313359&4294967295,S=T+(R<<6&4294967295|R>>>26),R=I+(T^(S|~A))+M[15]+4264355552&4294967295,I=S+(R<<10&4294967295|R>>>22),R=A+(S^(I|~T))+M[6]+2734768916&4294967295,A=I+(R<<15&4294967295|R>>>17),R=T+(I^(A|~S))+M[13]+1309151649&4294967295,T=A+(R<<21&4294967295|R>>>11),R=S+(A^(T|~I))+M[4]+4149444226&4294967295,S=T+(R<<6&4294967295|R>>>26),R=I+(T^(S|~A))+M[11]+3174756917&4294967295,I=S+(R<<10&4294967295|R>>>22),R=A+(S^(I|~T))+M[2]+718787259&4294967295,A=I+(R<<15&4294967295|R>>>17),R=T+(I^(A|~S))+M[9]+3951481745&4294967295,j.g[0]=j.g[0]+S&4294967295,j.g[1]=j.g[1]+(A+(R<<21&4294967295|R>>>11))&4294967295,j.g[2]=j.g[2]+A&4294967295,j.g[3]=j.g[3]+I&4294967295}r.prototype.u=function(j,S){S===void 0&&(S=j.length);for(var T=S-this.blockSize,M=this.B,A=this.h,I=0;I<S;){if(A==0)for(;I<=T;)i(this,j,I),I+=this.blockSize;if(typeof j=="string"){for(;I<S;)if(M[A++]=j.charCodeAt(I++),A==this.blockSize){i(this,M),A=0;break}}else for(;I<S;)if(M[A++]=j[I++],A==this.blockSize){i(this,M),A=0;break}}this.h=A,this.o+=S},r.prototype.v=function(){var j=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);j[0]=128;for(var S=1;S<j.length-8;++S)j[S]=0;var T=8*this.o;for(S=j.length-8;S<j.length;++S)j[S]=T&255,T/=256;for(this.u(j),j=Array(16),S=T=0;4>S;++S)for(var M=0;32>M;M+=8)j[T++]=this.g[S]>>>M&255;return j};function s(j,S){var T=a;return Object.prototype.hasOwnProperty.call(T,j)?T[j]:T[j]=S(j)}function o(j,S){this.h=S;for(var T=[],M=!0,A=j.length-1;0<=A;A--){var I=j[A]|0;M&&I==S||(T[A]=I,M=!1)}this.g=T}var a={};function l(j){return-128<=j&&128>j?s(j,function(S){return new o([S|0],0>S?-1:0)}):new o([j|0],0>j?-1:0)}function c(j){if(isNaN(j)||!isFinite(j))return g;if(0>j)return C(c(-j));for(var S=[],T=1,M=0;j>=T;M++)S[M]=j/T|0,T*=4294967296;return new o(S,0)}function u(j,S){if(j.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(j.charAt(0)=="-")return C(u(j.substring(1),S));if(0<=j.indexOf("-"))throw Error('number format error: interior "-" character');for(var T=c(Math.pow(S,8)),M=g,A=0;A<j.length;A+=8){var I=Math.min(8,j.length-A),R=parseInt(j.substring(A,A+I),S);8>I?(I=c(Math.pow(S,I)),M=M.j(I).add(c(R))):(M=M.j(T),M=M.add(c(R)))}return M}var g=l(0),y=l(1),p=l(16777216);t=o.prototype,t.m=function(){if(N(this))return-C(this).m();for(var j=0,S=1,T=0;T<this.g.length;T++){var M=this.i(T);j+=(0<=M?M:4294967296+M)*S,S*=4294967296}return j},t.toString=function(j){if(j=j||10,2>j||36<j)throw Error("radix out of range: "+j);if(b(this))return"0";if(N(this))return"-"+C(this).toString(j);for(var S=c(Math.pow(j,6)),T=this,M="";;){var A=D(T,S).g;T=_(T,A.j(S));var I=((0<T.g.length?T.g[0]:T.h)>>>0).toString(j);if(T=A,b(T))return I+M;for(;6>I.length;)I="0"+I;M=I+M}},t.i=function(j){return 0>j?0:j<this.g.length?this.g[j]:this.h};function b(j){if(j.h!=0)return!1;for(var S=0;S<j.g.length;S++)if(j.g[S]!=0)return!1;return!0}function N(j){return j.h==-1}t.l=function(j){return j=_(this,j),N(j)?-1:b(j)?0:1};function C(j){for(var S=j.g.length,T=[],M=0;M<S;M++)T[M]=~j.g[M];return new o(T,~j.h).add(y)}t.abs=function(){return N(this)?C(this):this},t.add=function(j){for(var S=Math.max(this.g.length,j.g.length),T=[],M=0,A=0;A<=S;A++){var I=M+(this.i(A)&65535)+(j.i(A)&65535),R=(I>>>16)+(this.i(A)>>>16)+(j.i(A)>>>16);M=R>>>16,I&=65535,R&=65535,T[A]=R<<16|I}return new o(T,T[T.length-1]&-2147483648?-1:0)};function _(j,S){return j.add(C(S))}t.j=function(j){if(b(this)||b(j))return g;if(N(this))return N(j)?C(this).j(C(j)):C(C(this).j(j));if(N(j))return C(this.j(C(j)));if(0>this.l(p)&&0>j.l(p))return c(this.m()*j.m());for(var S=this.g.length+j.g.length,T=[],M=0;M<2*S;M++)T[M]=0;for(M=0;M<this.g.length;M++)for(var A=0;A<j.g.length;A++){var I=this.i(M)>>>16,R=this.i(M)&65535,G=j.i(A)>>>16,oe=j.i(A)&65535;T[2*M+2*A]+=R*oe,k(T,2*M+2*A),T[2*M+2*A+1]+=I*oe,k(T,2*M+2*A+1),T[2*M+2*A+1]+=R*G,k(T,2*M+2*A+1),T[2*M+2*A+2]+=I*G,k(T,2*M+2*A+2)}for(M=0;M<S;M++)T[M]=T[2*M+1]<<16|T[2*M];for(M=S;M<2*S;M++)T[M]=0;return new o(T,0)};function k(j,S){for(;(j[S]&65535)!=j[S];)j[S+1]+=j[S]>>>16,j[S]&=65535,S++}function L(j,S){this.g=j,this.h=S}function D(j,S){if(b(S))throw Error("division by zero");if(b(j))return new L(g,g);if(N(j))return S=D(C(j),S),new L(C(S.g),C(S.h));if(N(S))return S=D(j,C(S)),new L(C(S.g),S.h);if(30<j.g.length){if(N(j)||N(S))throw Error("slowDivide_ only works with positive integers.");for(var T=y,M=S;0>=M.l(j);)T=z(T),M=z(M);var A=X(T,1),I=X(M,1);for(M=X(M,2),T=X(T,2);!b(M);){var R=I.add(M);0>=R.l(j)&&(A=A.add(T),I=R),M=X(M,1),T=X(T,1)}return S=_(j,A.j(S)),new L(A,S)}for(A=g;0<=j.l(S);){for(T=Math.max(1,Math.floor(j.m()/S.m())),M=Math.ceil(Math.log(T)/Math.LN2),M=48>=M?1:Math.pow(2,M-48),I=c(T),R=I.j(S);N(R)||0<R.l(j);)T-=M,I=c(T),R=I.j(S);b(I)&&(I=y),A=A.add(I),j=_(j,R)}return new L(A,j)}t.A=function(j){return D(this,j).h},t.and=function(j){for(var S=Math.max(this.g.length,j.g.length),T=[],M=0;M<S;M++)T[M]=this.i(M)&j.i(M);return new o(T,this.h&j.h)},t.or=function(j){for(var S=Math.max(this.g.length,j.g.length),T=[],M=0;M<S;M++)T[M]=this.i(M)|j.i(M);return new o(T,this.h|j.h)},t.xor=function(j){for(var S=Math.max(this.g.length,j.g.length),T=[],M=0;M<S;M++)T[M]=this.i(M)^j.i(M);return new o(T,this.h^j.h)};function z(j){for(var S=j.g.length+1,T=[],M=0;M<S;M++)T[M]=j.i(M)<<1|j.i(M-1)>>>31;return new o(T,j.h)}function X(j,S){var T=S>>5;S%=32;for(var M=j.g.length-T,A=[],I=0;I<M;I++)A[I]=0<S?j.i(I+T)>>>S|j.i(I+T+1)<<32-S:j.i(I+T);return new o(A,j.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,LN=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=u,sc=o}).apply(typeof qx<"u"?qx:typeof self<"u"?self:typeof window<"u"?window:{});var Zf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var jN,Wh,DN,Cp,g2,ON,MN,FN;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(f,x,P){return f==Array.prototype||f==Object.prototype||(f[x]=P.value),f};function n(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof Zf=="object"&&Zf];for(var x=0;x<f.length;++x){var P=f[x];if(P&&P.Math==Math)return P}throw Error("Cannot find global object")}var r=n(this);function i(f,x){if(x)e:{var P=r;f=f.split(".");for(var $=0;$<f.length-1;$++){var ye=f[$];if(!(ye in P))break e;P=P[ye]}f=f[f.length-1],$=P[f],x=x($),x!=$&&x!=null&&e(P,f,{configurable:!0,writable:!0,value:x})}}function s(f,x){f instanceof String&&(f+="");var P=0,$=!1,ye={next:function(){if(!$&&P<f.length){var Ne=P++;return{value:x(Ne,f[Ne]),done:!1}}return $=!0,{done:!0,value:void 0}}};return ye[Symbol.iterator]=function(){return ye},ye}i("Array.prototype.values",function(f){return f||function(){return s(this,function(x,P){return P})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(f){var x=typeof f;return x=x!="object"?x:f?Array.isArray(f)?"array":x:"null",x=="array"||x=="object"&&typeof f.length=="number"}function c(f){var x=typeof f;return x=="object"&&f!=null||x=="function"}function u(f,x,P){return f.call.apply(f.bind,arguments)}function g(f,x,P){if(!f)throw Error();if(2<arguments.length){var $=Array.prototype.slice.call(arguments,2);return function(){var ye=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(ye,$),f.apply(x,ye)}}return function(){return f.apply(x,arguments)}}function y(f,x,P){return y=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?u:g,y.apply(null,arguments)}function p(f,x){var P=Array.prototype.slice.call(arguments,1);return function(){var $=P.slice();return $.push.apply($,arguments),f.apply(this,$)}}function b(f,x){function P(){}P.prototype=x.prototype,f.aa=x.prototype,f.prototype=new P,f.prototype.constructor=f,f.Qb=function($,ye,Ne){for(var Ve=Array(arguments.length-2),Qt=2;Qt<arguments.length;Qt++)Ve[Qt-2]=arguments[Qt];return x.prototype[ye].apply($,Ve)}}function N(f){const x=f.length;if(0<x){const P=Array(x);for(let $=0;$<x;$++)P[$]=f[$];return P}return[]}function C(f,x){for(let P=1;P<arguments.length;P++){const $=arguments[P];if(l($)){const ye=f.length||0,Ne=$.length||0;f.length=ye+Ne;for(let Ve=0;Ve<Ne;Ve++)f[ye+Ve]=$[Ve]}else f.push($)}}class _{constructor(x,P){this.i=x,this.j=P,this.h=0,this.g=null}get(){let x;return 0<this.h?(this.h--,x=this.g,this.g=x.next,x.next=null):x=this.i(),x}}function k(f){return/^[\s\xa0]*$/.test(f)}function L(){var f=a.navigator;return f&&(f=f.userAgent)?f:""}function D(f){return D[" "](f),f}D[" "]=function(){};var z=L().indexOf("Gecko")!=-1&&!(L().toLowerCase().indexOf("webkit")!=-1&&L().indexOf("Edge")==-1)&&!(L().indexOf("Trident")!=-1||L().indexOf("MSIE")!=-1)&&L().indexOf("Edge")==-1;function X(f,x,P){for(const $ in f)x.call(P,f[$],$,f)}function j(f,x){for(const P in f)x.call(void 0,f[P],P,f)}function S(f){const x={};for(const P in f)x[P]=f[P];return x}const T="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function M(f,x){let P,$;for(let ye=1;ye<arguments.length;ye++){$=arguments[ye];for(P in $)f[P]=$[P];for(let Ne=0;Ne<T.length;Ne++)P=T[Ne],Object.prototype.hasOwnProperty.call($,P)&&(f[P]=$[P])}}function A(f){var x=1;f=f.split(":");const P=[];for(;0<x&&f.length;)P.push(f.shift()),x--;return f.length&&P.push(f.join(":")),P}function I(f){a.setTimeout(()=>{throw f},0)}function R(){var f=le;let x=null;return f.g&&(x=f.g,f.g=f.g.next,f.g||(f.h=null),x.next=null),x}class G{constructor(){this.h=this.g=null}add(x,P){const $=oe.get();$.set(x,P),this.h?this.h.next=$:this.g=$,this.h=$}}var oe=new _(()=>new pe,f=>f.reset());class pe{constructor(){this.next=this.g=this.h=null}set(x,P){this.h=x,this.g=P,this.next=null}reset(){this.next=this.g=this.h=null}}let ge,ne=!1,le=new G,we=()=>{const f=a.Promise.resolve(void 0);ge=()=>{f.then(de)}};var de=()=>{for(var f;f=R();){try{f.h.call(f.g)}catch(P){I(P)}var x=oe;x.j(f),100>x.h&&(x.h++,f.next=x.g,x.g=f)}ne=!1};function U(){this.s=this.s,this.C=this.C}U.prototype.s=!1,U.prototype.ma=function(){this.s||(this.s=!0,this.N())},U.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function W(f,x){this.type=f,this.g=this.target=x,this.defaultPrevented=!1}W.prototype.h=function(){this.defaultPrevented=!0};var te=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var f=!1,x=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const P=()=>{};a.addEventListener("test",P,x),a.removeEventListener("test",P,x)}catch{}return f}();function Q(f,x){if(W.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f){var P=this.type=f.type,$=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;if(this.target=f.target||f.srcElement,this.g=x,x=f.relatedTarget){if(z){e:{try{D(x.nodeName);var ye=!0;break e}catch{}ye=!1}ye||(x=null)}}else P=="mouseover"?x=f.fromElement:P=="mouseout"&&(x=f.toElement);this.relatedTarget=x,$?(this.clientX=$.clientX!==void 0?$.clientX:$.pageX,this.clientY=$.clientY!==void 0?$.clientY:$.pageY,this.screenX=$.screenX||0,this.screenY=$.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=typeof f.pointerType=="string"?f.pointerType:re[f.pointerType]||"",this.state=f.state,this.i=f,f.defaultPrevented&&Q.aa.h.call(this)}}b(Q,W);var re={2:"touch",3:"pen",4:"mouse"};Q.prototype.h=function(){Q.aa.h.call(this);var f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var q="closure_listenable_"+(1e6*Math.random()|0),ae=0;function ue(f,x,P,$,ye){this.listener=f,this.proxy=null,this.src=x,this.type=P,this.capture=!!$,this.ha=ye,this.key=++ae,this.da=this.fa=!1}function me(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function _e(f){this.src=f,this.g={},this.h=0}_e.prototype.add=function(f,x,P,$,ye){var Ne=f.toString();f=this.g[Ne],f||(f=this.g[Ne]=[],this.h++);var Ve=Te(f,x,$,ye);return-1<Ve?(x=f[Ve],P||(x.fa=!1)):(x=new ue(x,this.src,Ne,!!$,ye),x.fa=P,f.push(x)),x};function Le(f,x){var P=x.type;if(P in f.g){var $=f.g[P],ye=Array.prototype.indexOf.call($,x,void 0),Ne;(Ne=0<=ye)&&Array.prototype.splice.call($,ye,1),Ne&&(me(x),f.g[P].length==0&&(delete f.g[P],f.h--))}}function Te(f,x,P,$){for(var ye=0;ye<f.length;++ye){var Ne=f[ye];if(!Ne.da&&Ne.listener==x&&Ne.capture==!!P&&Ne.ha==$)return ye}return-1}var Se="closure_lm_"+(1e6*Math.random()|0),K={};function Ce(f,x,P,$,ye){if(Array.isArray(x)){for(var Ne=0;Ne<x.length;Ne++)Ce(f,x[Ne],P,$,ye);return null}return P=gt(P),f&&f[q]?f.K(x,P,c($)?!!$.capture:!1,ye):it(f,x,P,!1,$,ye)}function it(f,x,P,$,ye,Ne){if(!x)throw Error("Invalid event type");var Ve=c(ye)?!!ye.capture:!!ye,Qt=Ae(f);if(Qt||(f[Se]=Qt=new _e(f)),P=Qt.add(x,P,$,Ve,Ne),P.proxy)return P;if($=He(),P.proxy=$,$.src=f,$.listener=P,f.addEventListener)te||(ye=Ve),ye===void 0&&(ye=!1),f.addEventListener(x.toString(),$,ye);else if(f.attachEvent)f.attachEvent($e(x.toString()),$);else if(f.addListener&&f.removeListener)f.addListener($);else throw Error("addEventListener and attachEvent are unavailable.");return P}function He(){function f(P){return x.call(f.src,f.listener,P)}const x=st;return f}function Re(f,x,P,$,ye){if(Array.isArray(x))for(var Ne=0;Ne<x.length;Ne++)Re(f,x[Ne],P,$,ye);else $=c($)?!!$.capture:!!$,P=gt(P),f&&f[q]?(f=f.i,x=String(x).toString(),x in f.g&&(Ne=f.g[x],P=Te(Ne,P,$,ye),-1<P&&(me(Ne[P]),Array.prototype.splice.call(Ne,P,1),Ne.length==0&&(delete f.g[x],f.h--)))):f&&(f=Ae(f))&&(x=f.g[x.toString()],f=-1,x&&(f=Te(x,P,$,ye)),(P=-1<f?x[f]:null)&&Ze(P))}function Ze(f){if(typeof f!="number"&&f&&!f.da){var x=f.src;if(x&&x[q])Le(x.i,f);else{var P=f.type,$=f.proxy;x.removeEventListener?x.removeEventListener(P,$,f.capture):x.detachEvent?x.detachEvent($e(P),$):x.addListener&&x.removeListener&&x.removeListener($),(P=Ae(x))?(Le(P,f),P.h==0&&(P.src=null,x[Se]=null)):me(f)}}}function $e(f){return f in K?K[f]:K[f]="on"+f}function st(f,x){if(f.da)f=!0;else{x=new Q(x,this);var P=f.listener,$=f.ha||f.src;f.fa&&Ze(f),f=P.call($,x)}return f}function Ae(f){return f=f[Se],f instanceof _e?f:null}var Mt="__closure_events_fn_"+(1e9*Math.random()>>>0);function gt(f){return typeof f=="function"?f:(f[Mt]||(f[Mt]=function(x){return f.handleEvent(x)}),f[Mt])}function ze(){U.call(this),this.i=new _e(this),this.M=this,this.F=null}b(ze,U),ze.prototype[q]=!0,ze.prototype.removeEventListener=function(f,x,P,$){Re(this,f,x,P,$)};function lt(f,x){var P,$=f.F;if($)for(P=[];$;$=$.F)P.push($);if(f=f.M,$=x.type||x,typeof x=="string")x=new W(x,f);else if(x instanceof W)x.target=x.target||f;else{var ye=x;x=new W($,f),M(x,ye)}if(ye=!0,P)for(var Ne=P.length-1;0<=Ne;Ne--){var Ve=x.g=P[Ne];ye=Nt(Ve,$,!0,x)&&ye}if(Ve=x.g=f,ye=Nt(Ve,$,!0,x)&&ye,ye=Nt(Ve,$,!1,x)&&ye,P)for(Ne=0;Ne<P.length;Ne++)Ve=x.g=P[Ne],ye=Nt(Ve,$,!1,x)&&ye}ze.prototype.N=function(){if(ze.aa.N.call(this),this.i){var f=this.i,x;for(x in f.g){for(var P=f.g[x],$=0;$<P.length;$++)me(P[$]);delete f.g[x],f.h--}}this.F=null},ze.prototype.K=function(f,x,P,$){return this.i.add(String(f),x,!1,P,$)},ze.prototype.L=function(f,x,P,$){return this.i.add(String(f),x,!0,P,$)};function Nt(f,x,P,$){if(x=f.i.g[String(x)],!x)return!0;x=x.concat();for(var ye=!0,Ne=0;Ne<x.length;++Ne){var Ve=x[Ne];if(Ve&&!Ve.da&&Ve.capture==P){var Qt=Ve.listener,$n=Ve.ha||Ve.src;Ve.fa&&Le(f.i,Ve),ye=Qt.call($n,$)!==!1&&ye}}return ye&&!$.defaultPrevented}function Ge(f,x,P){if(typeof f=="function")P&&(f=y(f,P));else if(f&&typeof f.handleEvent=="function")f=y(f.handleEvent,f);else throw Error("Invalid listener argument");return 2147483647<Number(x)?-1:a.setTimeout(f,x||0)}function xt(f){f.g=Ge(()=>{f.g=null,f.i&&(f.i=!1,xt(f))},f.l);const x=f.h;f.h=null,f.m.apply(null,x)}class tt extends U{constructor(x,P){super(),this.m=x,this.l=P,this.h=null,this.i=!1,this.g=null}j(x){this.h=arguments,this.g?this.i=!0:xt(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Dt(f){U.call(this),this.h=f,this.g={}}b(Dt,U);var Qe=[];function yt(f){X(f.g,function(x,P){this.g.hasOwnProperty(P)&&Ze(x)},f),f.g={}}Dt.prototype.N=function(){Dt.aa.N.call(this),yt(this)},Dt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ot=a.JSON.stringify,$t=a.JSON.parse,Xe=class{stringify(f){return a.JSON.stringify(f,void 0)}parse(f){return a.JSON.parse(f,void 0)}};function At(){}At.prototype.h=null;function Ke(f){return f.h||(f.h=f.i())}function ut(){}var Tt={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Be(){W.call(this,"d")}b(Be,W);function Ye(){W.call(this,"c")}b(Ye,W);var ht={},Jn=null;function Bt(){return Jn=Jn||new ze}ht.La="serverreachability";function on(f){W.call(this,ht.La,f)}b(on,W);function Ht(f){const x=Bt();lt(x,new on(x))}ht.STAT_EVENT="statevent";function et(f,x){W.call(this,ht.STAT_EVENT,f),this.stat=x}b(et,W);function Ft(f){const x=Bt();lt(x,new et(x,f))}ht.Ma="timingevent";function Fn(f,x){W.call(this,ht.Ma,f),this.size=x}b(Fn,W);function _n(f,x){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){f()},x)}function Nn(){this.g=!0}Nn.prototype.xa=function(){this.g=!1};function zt(f,x,P,$,ye,Ne){f.info(function(){if(f.g)if(Ne)for(var Ve="",Qt=Ne.split("&"),$n=0;$n<Qt.length;$n++){var qt=Qt[$n].split("=");if(1<qt.length){var ln=qt[0];qt=qt[1];var Cn=ln.split("_");Ve=2<=Cn.length&&Cn[1]=="type"?Ve+(ln+"="+qt+"&"):Ve+(ln+"=redacted&")}}else Ve=null;else Ve=Ne;return"XMLHTTP REQ ("+$+") [attempt "+ye+"]: "+x+`
`+P+`
`+Ve})}function en(f,x,P,$,ye,Ne,Ve){f.info(function(){return"XMLHTTP RESP ("+$+") [ attempt "+ye+"]: "+x+`
`+P+`
`+Ne+" "+Ve})}function an(f,x,P,$){f.info(function(){return"XMLHTTP TEXT ("+x+"): "+Lr(f,P)+($?" "+$:"")})}function Br(f,x){f.info(function(){return"TIMEOUT: "+x})}Nn.prototype.info=function(){};function Lr(f,x){if(!f.g)return x;if(!x)return null;try{var P=JSON.parse(x);if(P){for(f=0;f<P.length;f++)if(Array.isArray(P[f])){var $=P[f];if(!(2>$.length)){var ye=$[1];if(Array.isArray(ye)&&!(1>ye.length)){var Ne=ye[0];if(Ne!="noop"&&Ne!="stop"&&Ne!="close")for(var Ve=1;Ve<ye.length;Ve++)ye[Ve]=""}}}}return ot(P)}catch{return x}}var Zn={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ni={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Nr;function Sr(){}b(Sr,At),Sr.prototype.g=function(){return new XMLHttpRequest},Sr.prototype.i=function(){return{}},Nr=new Sr;function hn(f,x,P,$){this.j=f,this.i=x,this.l=P,this.R=$||1,this.U=new Dt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ar}function Ar(){this.i=null,this.g="",this.h=!1}var jr={},zr={};function xi(f,x,P){f.L=1,f.v=Mo(Er(x)),f.m=P,f.P=!0,gs(f,null)}function gs(f,x){f.F=Date.now(),oo(f),f.A=Er(f.v);var P=f.A,$=f.R;Array.isArray($)||($=[String($)]),zc(P.i,"t",$),f.C=0,P=f.j.J,f.h=new Ar,f.g=er(f.j,P?x:null,!f.m),0<f.O&&(f.M=new tt(y(f.Y,f,f.g),f.O)),x=f.U,P=f.g,$=f.ca;var ye="readystatechange";Array.isArray(ye)||(ye&&(Qe[0]=ye.toString()),ye=Qe);for(var Ne=0;Ne<ye.length;Ne++){var Ve=Ce(P,ye[Ne],$||x.handleEvent,!1,x.h||x);if(!Ve)break;x.g[Ve.key]=Ve}x=f.H?S(f.H):{},f.m?(f.u||(f.u="POST"),x["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.A,f.u,f.m,x)):(f.u="GET",f.g.ea(f.A,f.u,null,x)),Ht(),zt(f.i,f.u,f.A,f.l,f.R,f.m)}hn.prototype.ca=function(f){f=f.target;const x=this.M;x&&_i(f)==3?x.j():this.Y(f)},hn.prototype.Y=function(f){try{if(f==this.g)e:{const Cn=_i(this.g);var x=this.g.Ba();const Qi=this.g.Z();if(!(3>Cn)&&(Cn!=3||this.g&&(this.h.h||this.g.oa()||Bl(this.g)))){this.J||Cn!=4||x==7||(x==8||0>=Qi?Ht(3):Ht(2)),_a(this);var P=this.g.Z();this.X=P;t:if(jo(this)){var $=Bl(this.g);f="";var ye=$.length,Ne=_i(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ki(this),Dr(this);var Ve="";break t}this.h.i=new a.TextDecoder}for(x=0;x<ye;x++)this.h.h=!0,f+=this.h.i.decode($[x],{stream:!(Ne&&x==ye-1)});$.length=0,this.h.g+=f,this.C=0,Ve=this.h.g}else Ve=this.g.oa();if(this.o=P==200,en(this.i,this.u,this.A,this.l,this.R,Cn,P),this.o){if(this.T&&!this.K){t:{if(this.g){var Qt,$n=this.g;if((Qt=$n.g?$n.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!k(Qt)){var qt=Qt;break t}}qt=null}if(P=qt)an(this.i,this.l,P,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ba(this,P);else{this.o=!1,this.s=3,Ft(12),Ki(this),Dr(this);break e}}if(this.P){P=!0;let ri;for(;!this.J&&this.C<Ve.length;)if(ri=oh(this,Ve),ri==zr){Cn==4&&(this.s=4,Ft(14),P=!1),an(this.i,this.l,null,"[Incomplete Response]");break}else if(ri==jr){this.s=4,Ft(15),an(this.i,this.l,Ve,"[Invalid Chunk]"),P=!1;break}else an(this.i,this.l,ri,null),ba(this,ri);if(jo(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Cn!=4||Ve.length!=0||this.h.h||(this.s=1,Ft(16),P=!1),this.o=this.o&&P,!P)an(this.i,this.l,Ve,"[Invalid Chunked Response]"),Ki(this),Dr(this);else if(0<Ve.length&&!this.W){this.W=!0;var ln=this.j;ln.g==this&&ln.ba&&!ln.M&&(ln.j.info("Great, no buffering proxy detected. Bytes received: "+Ve.length),nt(ln),ln.M=!0,Ft(11))}}else an(this.i,this.l,Ve,null),ba(this,Ve);Cn==4&&Ki(this),this.o&&!this.J&&(Cn==4?Ct(this.j,this):(this.o=!1,oo(this)))}else Hc(this.g),P==400&&0<Ve.indexOf("Unknown SID")?(this.s=3,Ft(12)):(this.s=0,Ft(13)),Ki(this),Dr(this)}}}catch{}finally{}};function jo(f){return f.g?f.u=="GET"&&f.L!=2&&f.j.Ca:!1}function oh(f,x){var P=f.C,$=x.indexOf(`
`,P);return $==-1?zr:(P=Number(x.substring(P,$)),isNaN(P)?jr:($+=1,$+P>x.length?zr:(x=x.slice($,$+P),f.C=$+P,x)))}hn.prototype.cancel=function(){this.J=!0,Ki(this)};function oo(f){f.S=Date.now()+f.I,Rl(f,f.I)}function Rl(f,x){if(f.B!=null)throw Error("WatchDog timer not null");f.B=_n(y(f.ba,f),x)}function _a(f){f.B&&(a.clearTimeout(f.B),f.B=null)}hn.prototype.ba=function(){this.B=null;const f=Date.now();0<=f-this.S?(Br(this.i,this.A),this.L!=2&&(Ht(),Ft(17)),Ki(this),this.s=2,Dr(this)):Rl(this,this.S-f)};function Dr(f){f.j.G==0||f.J||Ct(f.j,f)}function Ki(f){_a(f);var x=f.M;x&&typeof x.ma=="function"&&x.ma(),f.M=null,yt(f.U),f.g&&(x=f.g,f.g=null,x.abort(),x.ma())}function ba(f,x){try{var P=f.j;if(P.G!=0&&(P.g==f||Di(P.h,f))){if(!f.K&&Di(P.h,f)&&P.G==3){try{var $=P.Da.g.parse(x)}catch{$=null}if(Array.isArray($)&&$.length==3){var ye=$;if(ye[0]==0){e:if(!P.u){if(P.g)if(P.g.F+3e3<f.F)St(P),Ns(P);else break e;De(P),Ft(18)}}else P.za=ye[1],0<P.za-P.T&&37500>ye[2]&&P.F&&P.v==0&&!P.C&&(P.C=_n(y(P.Za,P),6e3));if(1>=Ol(P.h)&&P.ca){try{P.ca()}catch{}P.ca=void 0}}else un(P,11)}else if((f.K||P.g==f)&&St(P),!k(x))for(ye=P.Da.g.parse(x),x=0;x<ye.length;x++){let qt=ye[x];if(P.T=qt[0],qt=qt[1],P.G==2)if(qt[0]=="c"){P.K=qt[1],P.ia=qt[2];const ln=qt[3];ln!=null&&(P.la=ln,P.j.info("VER="+P.la));const Cn=qt[4];Cn!=null&&(P.Aa=Cn,P.j.info("SVER="+P.Aa));const Qi=qt[5];Qi!=null&&typeof Qi=="number"&&0<Qi&&($=1.5*Qi,P.L=$,P.j.info("backChannelRequestTimeoutMs_="+$)),$=P;const ri=f.g;if(ri){const Hr=ri.g?ri.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Hr){var Ne=$.h;Ne.g||Hr.indexOf("spdy")==-1&&Hr.indexOf("quic")==-1&&Hr.indexOf("h2")==-1||(Ne.j=Ne.l,Ne.g=new Set,Ne.h&&(ao(Ne,Ne.h),Ne.h=null))}if($.D){const Vs=ri.g?ri.g.getResponseHeader("X-HTTP-Session-Id"):null;Vs&&($.ya=Vs,Gt($.I,$.D,Vs))}}P.G=3,P.l&&P.l.ua(),P.ba&&(P.R=Date.now()-f.F,P.j.info("Handshake RTT: "+P.R+"ms")),$=P;var Ve=f;if($.qa=fn($,$.J?$.ia:null,$.W),Ve.K){Mc($.h,Ve);var Qt=Ve,$n=$.L;$n&&(Qt.I=$n),Qt.B&&(_a(Qt),oo(Qt)),$.g=Ve}else Ie($);0<P.i.length&&v(P)}else qt[0]!="stop"&&qt[0]!="close"||un(P,7);else P.G==3&&(qt[0]=="stop"||qt[0]=="close"?qt[0]=="stop"?un(P,7):Ia(P):qt[0]!="noop"&&P.l&&P.l.ta(qt),P.v=0)}}Ht(4)}catch{}}var Ll=class{constructor(f,x){this.g=f,this.map=x}};function jl(f){this.l=f||10,a.PerformanceNavigationTiming?(f=a.performance.getEntriesByType("navigation"),f=0<f.length&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Dl(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function Ol(f){return f.h?1:f.g?f.g.size:0}function Di(f,x){return f.h?f.h==x:f.g?f.g.has(x):!1}function ao(f,x){f.g?f.g.add(x):f.h=x}function Mc(f,x){f.h&&f.h==x?f.h=null:f.g&&f.g.has(x)&&f.g.delete(x)}jl.prototype.cancel=function(){if(this.i=zn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function zn(f){if(f.h!=null)return f.i.concat(f.h.D);if(f.g!=null&&f.g.size!==0){let x=f.i;for(const P of f.g.values())x=x.concat(P.D);return x}return N(f.i)}function Fc(f){if(f.V&&typeof f.V=="function")return f.V();if(typeof Map<"u"&&f instanceof Map||typeof Set<"u"&&f instanceof Set)return Array.from(f.values());if(typeof f=="string")return f.split("");if(l(f)){for(var x=[],P=f.length,$=0;$<P;$++)x.push(f[$]);return x}x=[],P=0;for($ in f)x[P++]=f[$];return x}function ys(f){if(f.na&&typeof f.na=="function")return f.na();if(!f.V||typeof f.V!="function"){if(typeof Map<"u"&&f instanceof Map)return Array.from(f.keys());if(!(typeof Set<"u"&&f instanceof Set)){if(l(f)||typeof f=="string"){var x=[];f=f.length;for(var P=0;P<f;P++)x.push(P);return x}x=[],P=0;for(const $ in f)x[P++]=$;return x}}}function Do(f,x){if(f.forEach&&typeof f.forEach=="function")f.forEach(x,void 0);else if(l(f)||typeof f=="string")Array.prototype.forEach.call(f,x,void 0);else for(var P=ys(f),$=Fc(f),ye=$.length,Ne=0;Ne<ye;Ne++)x.call(void 0,$[Ne],P&&P[Ne],f)}var Ml=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Oi(f,x){if(f){f=f.split("&");for(var P=0;P<f.length;P++){var $=f[P].indexOf("="),ye=null;if(0<=$){var Ne=f[P].substring(0,$);ye=f[P].substring($+1)}else Ne=f[P];x(Ne,ye?decodeURIComponent(ye.replace(/\+/g," ")):"")}}}function Sn(f){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,f instanceof Sn){this.h=f.h,Oo(this,f.j),this.o=f.o,this.g=f.g,Na(this,f.s),this.l=f.l;var x=f.i,P=new qr;P.i=x.i,x.g&&(P.g=new Map(x.g),P.h=x.h),Uc(this,P),this.m=f.m}else f&&(x=String(f).match(Ml))?(this.h=!1,Oo(this,x[1]||"",!0),this.o=lo(x[2]||""),this.g=lo(x[3]||"",!0),Na(this,x[4]),this.l=lo(x[5]||"",!0),Uc(this,x[6]||"",!0),this.m=lo(x[7]||"")):(this.h=!1,this.i=new qr(null,this.h))}Sn.prototype.toString=function(){var f=[],x=this.j;x&&f.push(vs(x,Vc,!0),":");var P=this.g;return(P||x=="file")&&(f.push("//"),(x=this.o)&&f.push(vs(x,Vc,!0),"@"),f.push(encodeURIComponent(String(P)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),P=this.s,P!=null&&f.push(":",String(P))),(P=this.l)&&(this.g&&P.charAt(0)!="/"&&f.push("/"),f.push(vs(P,P.charAt(0)=="/"?lh:ah,!0))),(P=this.i.toString())&&f.push("?",P),(P=this.m)&&f.push("#",vs(P,Bc)),f.join("")};function Er(f){return new Sn(f)}function Oo(f,x,P){f.j=P?lo(x,!0):x,f.j&&(f.j=f.j.replace(/:$/,""))}function Na(f,x){if(x){if(x=Number(x),isNaN(x)||0>x)throw Error("Bad port number "+x);f.s=x}else f.s=null}function Uc(f,x,P){x instanceof qr?(f.i=x,ch(f.i,f.h)):(P||(x=vs(x,Fl)),f.i=new qr(x,f.h))}function Gt(f,x,P){f.i.set(x,P)}function Mo(f){return Gt(f,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),f}function lo(f,x){return f?x?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function vs(f,x,P){return typeof f=="string"?(f=encodeURI(f).replace(x,Fo),P&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function Fo(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var Vc=/[#\/\?@]/g,ah=/[#\?:]/g,lh=/[#\?]/g,Fl=/[#\?@]/g,Bc=/#/g;function qr(f,x){this.h=this.g=null,this.i=f||null,this.j=!!x}function ws(f){f.g||(f.g=new Map,f.h=0,f.i&&Oi(f.i,function(x,P){f.add(decodeURIComponent(x.replace(/\+/g," ")),P)}))}t=qr.prototype,t.add=function(f,x){ws(this),this.i=null,f=bt(this,f);var P=this.g.get(f);return P||this.g.set(f,P=[]),P.push(x),this.h+=1,this};function co(f,x){ws(f),x=bt(f,x),f.g.has(x)&&(f.i=null,f.h-=f.g.get(x).length,f.g.delete(x))}function Sa(f,x){return ws(f),x=bt(f,x),f.g.has(x)}t.forEach=function(f,x){ws(this),this.g.forEach(function(P,$){P.forEach(function(ye){f.call(x,ye,$,this)},this)},this)},t.na=function(){ws(this);const f=Array.from(this.g.values()),x=Array.from(this.g.keys()),P=[];for(let $=0;$<x.length;$++){const ye=f[$];for(let Ne=0;Ne<ye.length;Ne++)P.push(x[$])}return P},t.V=function(f){ws(this);let x=[];if(typeof f=="string")Sa(this,f)&&(x=x.concat(this.g.get(bt(this,f))));else{f=Array.from(this.g.values());for(let P=0;P<f.length;P++)x=x.concat(f[P])}return x},t.set=function(f,x){return ws(this),this.i=null,f=bt(this,f),Sa(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[x]),this.h+=1,this},t.get=function(f,x){return f?(f=this.V(f),0<f.length?String(f[0]):x):x};function zc(f,x,P){co(f,x),0<P.length&&(f.i=null,f.g.set(bt(f,x),N(P)),f.h+=P.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],x=Array.from(this.g.keys());for(var P=0;P<x.length;P++){var $=x[P];const Ne=encodeURIComponent(String($)),Ve=this.V($);for($=0;$<Ve.length;$++){var ye=Ne;Ve[$]!==""&&(ye+="="+encodeURIComponent(String(Ve[$]))),f.push(ye)}}return this.i=f.join("&")};function bt(f,x){return x=String(x),f.j&&(x=x.toLowerCase()),x}function ch(f,x){x&&!f.j&&(ws(f),f.i=null,f.g.forEach(function(P,$){var ye=$.toLowerCase();$!=ye&&(co(this,$),zc(this,ye,P))},f)),f.j=x}function uh(f,x){const P=new Nn;if(a.Image){const $=new Image;$.onload=p(Or,P,"TestLoadImage: loaded",!0,x,$),$.onerror=p(Or,P,"TestLoadImage: error",!1,x,$),$.onabort=p(Or,P,"TestLoadImage: abort",!1,x,$),$.ontimeout=p(Or,P,"TestLoadImage: timeout",!1,x,$),a.setTimeout(function(){$.ontimeout&&$.ontimeout()},1e4),$.src=f}else x(!1)}function hh(f,x){const P=new Nn,$=new AbortController,ye=setTimeout(()=>{$.abort(),Or(P,"TestPingServer: timeout",!1,x)},1e4);fetch(f,{signal:$.signal}).then(Ne=>{clearTimeout(ye),Ne.ok?Or(P,"TestPingServer: ok",!0,x):Or(P,"TestPingServer: server error",!1,x)}).catch(()=>{clearTimeout(ye),Or(P,"TestPingServer: error",!1,x)})}function Or(f,x,P,$,ye){try{ye&&(ye.onload=null,ye.onerror=null,ye.onabort=null,ye.ontimeout=null),$(P)}catch{}}function Fs(){this.g=new Xe}function dh(f,x,P){const $=P||"";try{Do(f,function(ye,Ne){let Ve=ye;c(ye)&&(Ve=ot(ye)),x.push($+Ne+"="+encodeURIComponent(Ve))})}catch(ye){throw x.push($+"type="+encodeURIComponent("_badmap")),ye}}function Aa(f){this.l=f.Ub||null,this.j=f.eb||!1}b(Aa,At),Aa.prototype.g=function(){return new Us(this.l,this.j)},Aa.prototype.i=function(f){return function(){return f}}({});function Us(f,x){ze.call(this),this.D=f,this.o=x,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}b(Us,ze),t=Us.prototype,t.open=function(f,x){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=f,this.A=x,this.readyState=1,Uo(this)},t.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const x={headers:this.u,method:this.B,credentials:this.m,cache:void 0};f&&(x.body=f),(this.D||a).fetch(new Request(this.A,x)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Yi(this)),this.readyState=0},t.Sa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,Uo(this)),this.g&&(this.readyState=3,Uo(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ea(this)}else f.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ea(f){f.j.read().then(f.Pa.bind(f)).catch(f.ga.bind(f))}t.Pa=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var x=f.value?f.value:new Uint8Array(0);(x=this.v.decode(x,{stream:!f.done}))&&(this.response=this.responseText+=x)}f.done?Yi(this):Uo(this),this.readyState==3&&Ea(this)}},t.Ra=function(f){this.g&&(this.response=this.responseText=f,Yi(this))},t.Qa=function(f){this.g&&(this.response=f,Yi(this))},t.ga=function(){this.g&&Yi(this)};function Yi(f){f.readyState=4,f.l=null,f.j=null,f.v=null,Uo(f)}t.setRequestHeader=function(f,x){this.u.append(f,x)},t.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],x=this.h.entries();for(var P=x.next();!P.done;)P=P.value,f.push(P[0]+": "+P[1]),P=x.next();return f.join(`\r
`)};function Uo(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(Us.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function xs(f){let x="";return X(f,function(P,$){x+=$,x+=":",x+=P,x+=`\r
`}),x}function Ul(f,x,P){e:{for($ in P){var $=!1;break e}$=!0}$||(P=xs(P),typeof f=="string"?P!=null&&encodeURIComponent(String(P)):Gt(f,x,P))}function bn(f){ze.call(this),this.headers=new Map,this.o=f||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}b(bn,ze);var Vl=/^https?$/i,qc=["POST","PUT"];t=bn.prototype,t.Ha=function(f){this.J=f},t.ea=function(f,x,P,$){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);x=x?x.toUpperCase():"GET",this.D=f,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Nr.g(),this.v=this.o?Ke(this.o):Ke(Nr),this.g.onreadystatechange=y(this.Ea,this);try{this.B=!0,this.g.open(x,String(f),!0),this.B=!1}catch(Ne){_s(this,Ne);return}if(f=P||"",P=new Map(this.headers),$)if(Object.getPrototypeOf($)===Object.prototype)for(var ye in $)P.set(ye,$[ye]);else if(typeof $.keys=="function"&&typeof $.get=="function")for(const Ne of $.keys())P.set(Ne,$.get(Ne));else throw Error("Unknown input type for opt_headers: "+String($));$=Array.from(P.keys()).find(Ne=>Ne.toLowerCase()=="content-type"),ye=a.FormData&&f instanceof a.FormData,!(0<=Array.prototype.indexOf.call(qc,x,void 0))||$||ye||P.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Ne,Ve]of P)this.g.setRequestHeader(Ne,Ve);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ho(this),this.u=!0,this.g.send(f),this.u=!1}catch(Ne){_s(this,Ne)}};function _s(f,x){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=x,f.m=5,Ta(f),uo(f)}function Ta(f){f.A||(f.A=!0,lt(f,"complete"),lt(f,"error"))}t.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=f||7,lt(this,"complete"),lt(this,"abort"),uo(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),uo(this,!0)),bn.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Vo(this):this.bb())},t.bb=function(){Vo(this)};function Vo(f){if(f.h&&typeof o<"u"&&(!f.v[1]||_i(f)!=4||f.Z()!=2)){if(f.u&&_i(f)==4)Ge(f.Ea,0,f);else if(lt(f,"readystatechange"),_i(f)==4){f.h=!1;try{const Ve=f.Z();e:switch(Ve){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var x=!0;break e;default:x=!1}var P;if(!(P=x)){var $;if($=Ve===0){var ye=String(f.D).match(Ml)[1]||null;!ye&&a.self&&a.self.location&&(ye=a.self.location.protocol.slice(0,-1)),$=!Vl.test(ye?ye.toLowerCase():"")}P=$}if(P)lt(f,"complete"),lt(f,"success");else{f.m=6;try{var Ne=2<_i(f)?f.g.statusText:""}catch{Ne=""}f.l=Ne+" ["+f.Z()+"]",Ta(f)}}finally{uo(f)}}}}function uo(f,x){if(f.g){ho(f);const P=f.g,$=f.v[0]?()=>{}:null;f.g=null,f.v=null,x||lt(f,"ready");try{P.onreadystatechange=$}catch{}}}function ho(f){f.I&&(a.clearTimeout(f.I),f.I=null)}t.isActive=function(){return!!this.g};function _i(f){return f.g?f.g.readyState:0}t.Z=function(){try{return 2<_i(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(f){if(this.g){var x=this.g.responseText;return f&&x.indexOf(f)==0&&(x=x.substring(f.length)),$t(x)}};function Bl(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.H){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function Hc(f){const x={};f=(f.g&&2<=_i(f)&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let $=0;$<f.length;$++){if(k(f[$]))continue;var P=A(f[$]);const ye=P[0];if(P=P[1],typeof P!="string")continue;P=P.trim();const Ne=x[ye]||[];x[ye]=Ne,Ne.push(P)}j(x,function($){return $.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function bi(f,x,P){return P&&P.internalChannelParams&&P.internalChannelParams[f]||x}function bs(f){this.Aa=0,this.i=[],this.j=new Nn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=bi("failFast",!1,f),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=bi("baseRetryDelayMs",5e3,f),this.cb=bi("retryDelaySeedMs",1e4,f),this.Wa=bi("forwardChannelMaxRetries",2,f),this.wa=bi("forwardChannelRequestTimeoutMs",2e4,f),this.pa=f&&f.xmlHttpFactory||void 0,this.Xa=f&&f.Tb||void 0,this.Ca=f&&f.useFetchStreams||!1,this.L=void 0,this.J=f&&f.supportsCrossDomainXhr||!1,this.K="",this.h=new jl(f&&f.concurrentRequestLimit),this.Da=new Fs,this.P=f&&f.fastHandshake||!1,this.O=f&&f.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=f&&f.Rb||!1,f&&f.xa&&this.j.xa(),f&&f.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&f&&f.detectBufferingProxy||!1,this.ja=void 0,f&&f.longPollingTimeout&&0<f.longPollingTimeout&&(this.ja=f.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=bs.prototype,t.la=8,t.G=1,t.connect=function(f,x,P,$){Ft(0),this.W=f,this.H=x||{},P&&$!==void 0&&(this.H.OSID=P,this.H.OAID=$),this.F=this.X,this.I=fn(this,null,this.W),v(this)};function Ia(f){if(zl(f),f.G==3){var x=f.U++,P=Er(f.I);if(Gt(P,"SID",f.K),Gt(P,"RID",x),Gt(P,"TYPE","terminate"),ie(f,P),x=new hn(f,f.j,x),x.L=2,x.v=Mo(Er(P)),P=!1,a.navigator&&a.navigator.sendBeacon)try{P=a.navigator.sendBeacon(x.v.toString(),"")}catch{}!P&&a.Image&&(new Image().src=x.v,P=!0),P||(x.g=er(x.j,null),x.g.ea(x.v)),x.F=Date.now(),oo(x)}qn(f)}function Ns(f){f.g&&(nt(f),f.g.cancel(),f.g=null)}function zl(f){Ns(f),f.u&&(a.clearTimeout(f.u),f.u=null),St(f),f.h.cancel(),f.s&&(typeof f.s=="number"&&a.clearTimeout(f.s),f.s=null)}function v(f){if(!Dl(f.h)&&!f.s){f.s=!0;var x=f.Ga;ge||we(),ne||(ge(),ne=!0),le.add(x,f),f.B=0}}function O(f,x){return Ol(f.h)>=f.h.j-(f.s?1:0)?!1:f.s?(f.i=x.D.concat(f.i),!0):f.G==1||f.G==2||f.B>=(f.Va?0:f.Wa)?!1:(f.s=_n(y(f.Ga,f,x),Kt(f,f.B)),f.B++,!0)}t.Ga=function(f){if(this.s)if(this.s=null,this.G==1){if(!f){this.U=Math.floor(1e5*Math.random()),f=this.U++;const ye=new hn(this,this.j,f);let Ne=this.o;if(this.S&&(Ne?(Ne=S(Ne),M(Ne,this.S)):Ne=this.S),this.m!==null||this.O||(ye.H=Ne,Ne=null),this.P)e:{for(var x=0,P=0;P<this.i.length;P++){t:{var $=this.i[P];if("__data__"in $.map&&($=$.map.__data__,typeof $=="string")){$=$.length;break t}$=void 0}if($===void 0)break;if(x+=$,4096<x){x=P;break e}if(x===4096||P===this.i.length-1){x=P+1;break e}}x=1e3}else x=1e3;x=fe(this,ye,x),P=Er(this.I),Gt(P,"RID",f),Gt(P,"CVER",22),this.D&&Gt(P,"X-HTTP-Session-Id",this.D),ie(this,P),Ne&&(this.O?x="headers="+encodeURIComponent(String(xs(Ne)))+"&"+x:this.m&&Ul(P,this.m,Ne)),ao(this.h,ye),this.Ua&&Gt(P,"TYPE","init"),this.P?(Gt(P,"$req",x),Gt(P,"SID","null"),ye.T=!0,xi(ye,P,null)):xi(ye,P,x),this.G=2}}else this.G==3&&(f?J(this,f):this.i.length==0||Dl(this.h)||J(this))};function J(f,x){var P;x?P=x.l:P=f.U++;const $=Er(f.I);Gt($,"SID",f.K),Gt($,"RID",P),Gt($,"AID",f.T),ie(f,$),f.m&&f.o&&Ul($,f.m,f.o),P=new hn(f,f.j,P,f.B+1),f.m===null&&(P.H=f.o),x&&(f.i=x.D.concat(f.i)),x=fe(f,P,1e3),P.I=Math.round(.5*f.wa)+Math.round(.5*f.wa*Math.random()),ao(f.h,P),xi(P,$,x)}function ie(f,x){f.H&&X(f.H,function(P,$){Gt(x,$,P)}),f.l&&Do({},function(P,$){Gt(x,$,P)})}function fe(f,x,P){P=Math.min(f.i.length,P);var $=f.l?y(f.l.Na,f.l,f):null;e:{var ye=f.i;let Ne=-1;for(;;){const Ve=["count="+P];Ne==-1?0<P?(Ne=ye[0].g,Ve.push("ofs="+Ne)):Ne=0:Ve.push("ofs="+Ne);let Qt=!0;for(let $n=0;$n<P;$n++){let qt=ye[$n].g;const ln=ye[$n].map;if(qt-=Ne,0>qt)Ne=Math.max(0,ye[$n].g-100),Qt=!1;else try{dh(ln,Ve,"req"+qt+"_")}catch{$&&$(ln)}}if(Qt){$=Ve.join("&");break e}}}return f=f.i.splice(0,P),x.D=f,$}function Ie(f){if(!f.g&&!f.u){f.Y=1;var x=f.Fa;ge||we(),ne||(ge(),ne=!0),le.add(x,f),f.v=0}}function De(f){return f.g||f.u||3<=f.v?!1:(f.Y++,f.u=_n(y(f.Fa,f),Kt(f,f.v)),f.v++,!0)}t.Fa=function(){if(this.u=null,dt(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var f=2*this.R;this.j.info("BP detection timer enabled: "+f),this.A=_n(y(this.ab,this),f)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ft(10),Ns(this),dt(this))};function nt(f){f.A!=null&&(a.clearTimeout(f.A),f.A=null)}function dt(f){f.g=new hn(f,f.j,"rpc",f.Y),f.m===null&&(f.g.H=f.o),f.g.O=0;var x=Er(f.qa);Gt(x,"RID","rpc"),Gt(x,"SID",f.K),Gt(x,"AID",f.T),Gt(x,"CI",f.F?"0":"1"),!f.F&&f.ja&&Gt(x,"TO",f.ja),Gt(x,"TYPE","xmlhttp"),ie(f,x),f.m&&f.o&&Ul(x,f.m,f.o),f.L&&(f.g.I=f.L);var P=f.g;f=f.ia,P.L=1,P.v=Mo(Er(x)),P.m=null,P.P=!0,gs(P,f)}t.Za=function(){this.C!=null&&(this.C=null,Ns(this),De(this),Ft(19))};function St(f){f.C!=null&&(a.clearTimeout(f.C),f.C=null)}function Ct(f,x){var P=null;if(f.g==x){St(f),nt(f),f.g=null;var $=2}else if(Di(f.h,x))P=x.D,Mc(f.h,x),$=1;else return;if(f.G!=0){if(x.o)if($==1){P=x.m?x.m.length:0,x=Date.now()-x.F;var ye=f.B;$=Bt(),lt($,new Fn($,P)),v(f)}else Ie(f);else if(ye=x.s,ye==3||ye==0&&0<x.X||!($==1&&O(f,x)||$==2&&De(f)))switch(P&&0<P.length&&(x=f.h,x.i=x.i.concat(P)),ye){case 1:un(f,5);break;case 4:un(f,10);break;case 3:un(f,6);break;default:un(f,2)}}}function Kt(f,x){let P=f.Ta+Math.floor(Math.random()*f.cb);return f.isActive()||(P*=2),P*x}function un(f,x){if(f.j.info("Error code "+x),x==2){var P=y(f.fb,f),$=f.Xa;const ye=!$;$=new Sn($||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Oo($,"https"),Mo($),ye?uh($.toString(),P):hh($.toString(),P)}else Ft(2);f.G=0,f.l&&f.l.sa(x),qn(f),zl(f)}t.fb=function(f){f?(this.j.info("Successfully pinged google.com"),Ft(2)):(this.j.info("Failed to ping google.com"),Ft(1))};function qn(f){if(f.G=0,f.ka=[],f.l){const x=zn(f.h);(x.length!=0||f.i.length!=0)&&(C(f.ka,x),C(f.ka,f.i),f.h.i.length=0,N(f.i),f.i.length=0),f.l.ra()}}function fn(f,x,P){var $=P instanceof Sn?Er(P):new Sn(P);if($.g!="")x&&($.g=x+"."+$.g),Na($,$.s);else{var ye=a.location;$=ye.protocol,x=x?x+"."+ye.hostname:ye.hostname,ye=+ye.port;var Ne=new Sn(null);$&&Oo(Ne,$),x&&(Ne.g=x),ye&&Na(Ne,ye),P&&(Ne.l=P),$=Ne}return P=f.D,x=f.ya,P&&x&&Gt($,P,x),Gt($,"VER",f.la),ie(f,$),$}function er(f,x,P){if(x&&!f.J)throw Error("Can't create secondary domain capable XhrIo object.");return x=f.Ca&&!f.pa?new bn(new Aa({eb:P})):new bn(f.pa),x.Ha(f.J),x}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Hn(){}t=Hn.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function tr(){}tr.prototype.g=function(f,x){return new Wn(f,x)};function Wn(f,x){ze.call(this),this.g=new bs(x),this.l=f,this.h=x&&x.messageUrlParams||null,f=x&&x.messageHeaders||null,x&&x.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=x&&x.initMessageHeaders||null,x&&x.messageContentType&&(f?f["X-WebChannel-Content-Type"]=x.messageContentType:f={"X-WebChannel-Content-Type":x.messageContentType}),x&&x.va&&(f?f["X-WebChannel-Client-Profile"]=x.va:f={"X-WebChannel-Client-Profile":x.va}),this.g.S=f,(f=x&&x.Sb)&&!k(f)&&(this.g.m=f),this.v=x&&x.supportsCrossDomainXhr||!1,this.u=x&&x.sendRawJson||!1,(x=x&&x.httpSessionIdParam)&&!k(x)&&(this.g.D=x,f=this.h,f!==null&&x in f&&(f=this.h,x in f&&delete f[x])),this.j=new As(this)}b(Wn,ze),Wn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Wn.prototype.close=function(){Ia(this.g)},Wn.prototype.o=function(f){var x=this.g;if(typeof f=="string"){var P={};P.__data__=f,f=P}else this.u&&(P={},P.__data__=ot(f),f=P);x.i.push(new Ll(x.Ya++,f)),x.G==3&&v(x)},Wn.prototype.N=function(){this.g.l=null,delete this.j,Ia(this.g),delete this.g,Wn.aa.N.call(this)};function Mi(f){Be.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var x=f.__sm__;if(x){e:{for(const P in x){f=P;break e}f=void 0}(this.i=f)&&(f=this.i,x=x!==null&&f in x?x[f]:void 0),this.data=x}else this.data=f}b(Mi,Be);function Ss(){Ye.call(this),this.status=1}b(Ss,Ye);function As(f){this.g=f}b(As,Hn),As.prototype.ua=function(){lt(this.g,"a")},As.prototype.ta=function(f){lt(this.g,new Mi(f))},As.prototype.sa=function(f){lt(this.g,new Ss)},As.prototype.ra=function(){lt(this.g,"b")},tr.prototype.createWebChannel=tr.prototype.g,Wn.prototype.send=Wn.prototype.o,Wn.prototype.open=Wn.prototype.m,Wn.prototype.close=Wn.prototype.close,FN=function(){return new tr},MN=function(){return Bt()},ON=ht,g2={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Zn.NO_ERROR=0,Zn.TIMEOUT=8,Zn.HTTP_ERROR=6,Cp=Zn,ni.COMPLETE="complete",DN=ni,ut.EventType=Tt,Tt.OPEN="a",Tt.CLOSE="b",Tt.ERROR="c",Tt.MESSAGE="d",ze.prototype.listen=ze.prototype.K,Wh=ut,bn.prototype.listenOnce=bn.prototype.L,bn.prototype.getLastError=bn.prototype.Ka,bn.prototype.getLastErrorCode=bn.prototype.Ba,bn.prototype.getStatus=bn.prototype.Z,bn.prototype.getResponseJson=bn.prototype.Oa,bn.prototype.getResponseText=bn.prototype.oa,bn.prototype.send=bn.prototype.ea,bn.prototype.setWithCredentials=bn.prototype.Ha,jN=bn}).apply(typeof Zf<"u"?Zf:typeof self<"u"?self:typeof window<"u"?window:{});const Hx="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}di.UNAUTHENTICATED=new di(null),di.GOOGLE_CREDENTIALS=new di("google-credentials-uid"),di.FIRST_PARTY=new di("first-party-uid"),di.MOCK_USER=new di("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let eh="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mc=new Qy("@firebase/firestore");function Dh(){return mc.logLevel}function ft(t,...e){if(mc.logLevel<=Jt.DEBUG){const n=e.map(av);mc.debug(`Firestore (${eh}): ${t}`,...n)}}function ma(t,...e){if(mc.logLevel<=Jt.ERROR){const n=e.map(av);mc.error(`Firestore (${eh}): ${t}`,...n)}}function Vu(t,...e){if(mc.logLevel<=Jt.WARN){const n=e.map(av);mc.warn(`Firestore (${eh}): ${t}`,...n)}}function av(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kt(t="Unexpected state"){const e=`FIRESTORE (${eh}) INTERNAL ASSERTION FAILED: `+t;throw ma(e),new Error(e)}function wn(t,e){t||kt()}function jt(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const je={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Je extends ro{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aa{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UN{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class u7{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(di.UNAUTHENTICATED))}shutdown(){}}class h7{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class d7{constructor(e){this.t=e,this.currentUser=di.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){wn(this.o===void 0);let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new aa;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new aa,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{ft("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(ft("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new aa)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(ft("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(wn(typeof r.accessToken=="string"),new UN(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return wn(e===null||typeof e=="string"),new di(e)}}class f7{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=di.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class p7{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new f7(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(di.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class m7{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class g7{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){wn(this.o===void 0);const r=s=>{s.error!=null&&ft("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,ft("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{ft("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):ft("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(wn(typeof n.token=="string"),this.R=n.token,new m7(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y7(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VN{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=y7(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function cn(t,e){return t<e?-1:t>e?1:0}function Bu(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Je(je.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Je(je.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new Je(je.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Je(je.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return br.fromMillis(Date.now())}static fromDate(e){return br.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new br(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?cn(this.nanoseconds,e.nanoseconds):cn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Lt(e)}static min(){return new Lt(new br(0,0))}static max(){return new Lt(new br(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dd{constructor(e,n,r){n===void 0?n=0:n>e.length&&kt(),r===void 0?r=e.length-n:r>e.length-n&&kt(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Dd.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Dd?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Dn extends Dd{construct(e,n,r){return new Dn(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Je(je.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Dn(n)}static emptyPath(){return new Dn([])}}const v7=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Qr extends Dd{construct(e,n,r){return new Qr(e,n,r)}static isValidIdentifier(e){return v7.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Qr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Qr(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new Je(je.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new Je(je.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new Je(je.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new Je(je.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Qr(n)}static emptyPath(){return new Qr([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{constructor(e){this.path=e}static fromPath(e){return new _t(Dn.fromString(e))}static fromName(e){return new _t(Dn.fromString(e).popFirst(5))}static empty(){return new _t(Dn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Dn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Dn.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new _t(new Dn(e.slice()))}}function w7(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Lt.fromTimestamp(r===1e9?new br(n+1,0):new br(n,r));return new xl(i,_t.empty(),e)}function x7(t){return new xl(t.readTime,t.key,-1)}class xl{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new xl(Lt.min(),_t.empty(),-1)}static max(){return new xl(Lt.max(),_t.empty(),-1)}}function _7(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=_t.comparator(t.documentKey,e.documentKey),n!==0?n:cn(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b7="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class N7{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rf(t){if(t.code!==je.FAILED_PRECONDITION||t.message!==b7)throw t;ft("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Me{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&kt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Me((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof Me?n:Me.resolve(n)}catch(n){return Me.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):Me.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):Me.reject(n)}static resolve(e){return new Me((n,r)=>{n(e)})}static reject(e){return new Me((n,r)=>{r(e)})}static waitFor(e){return new Me((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=Me.resolve(!1);for(const r of e)n=n.next(i=>i?Me.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new Me((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;n(e[c]).next(u=>{o[c]=u,++a,a===s&&r(o)},u=>i(u))}})}static doWhile(e,n){return new Me((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function S7(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function sf(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lv{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}lv.oe=-1;function lg(t){return t==null}function wm(t){return t===0&&1/t==-1/0}function A7(t){return typeof t=="number"&&Number.isInteger(t)&&!wm(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wx(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Lc(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function BN(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn{constructor(e,n){this.comparator=e,this.root=n||Yr.EMPTY}insert(e,n){return new Xn(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Yr.BLACK,null,null))}remove(e){return new Xn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Yr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ep(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ep(this.root,e,this.comparator,!1)}getReverseIterator(){return new ep(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ep(this.root,e,this.comparator,!0)}}class ep{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Yr{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Yr.RED,this.left=i??Yr.EMPTY,this.right=s??Yr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new Yr(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Yr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Yr.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Yr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Yr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw kt();const e=this.left.check();if(e!==this.right.check())throw kt();return e+(this.isRed()?0:1)}}Yr.EMPTY=null,Yr.RED=!0,Yr.BLACK=!1;Yr.EMPTY=new class{constructor(){this.size=0}get key(){throw kt()}get value(){throw kt()}get color(){throw kt()}get left(){throw kt()}get right(){throw kt()}copy(e,n,r,i,s){return this}insert(e,n,r){return new Yr(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zr{constructor(e){this.comparator=e,this.data=new Xn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new $x(this.data.getIterator())}getIteratorFrom(e){return new $x(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Zr)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Zr(this.comparator);return n.data=e,n}}class $x{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs{constructor(e){this.fields=e,e.sort(Qr.comparator)}static empty(){return new cs([])}unionWith(e){let n=new Zr(Qr.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new cs(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Bu(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zN extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ti{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new zN("Invalid base64 string: "+s):s}}(e);return new ti(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new ti(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return cn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ti.EMPTY_BYTE_STRING=new ti("");const E7=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function _l(t){if(wn(!!t),typeof t=="string"){let e=0;const n=E7.exec(t);if(wn(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:dr(t.seconds),nanos:dr(t.nanos)}}function dr(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function gc(t){return typeof t=="string"?ti.fromBase64String(t):ti.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cv(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function uv(t){const e=t.mapValue.fields.__previous_value__;return cv(e)?uv(e):e}function Od(t){const e=_l(t.mapValue.fields.__local_write_time__.timestampValue);return new br(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T7{constructor(e,n,r,i,s,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class Md{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Md("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Md&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tp={mapValue:{}};function yc(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?cv(t)?4:k7(t)?9007199254740991:I7(t)?10:11:kt()}function Po(t,e){if(t===e)return!0;const n=yc(t);if(n!==yc(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Od(t).isEqual(Od(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=_l(i.timestampValue),a=_l(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return gc(i.bytesValue).isEqual(gc(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return dr(i.geoPointValue.latitude)===dr(s.geoPointValue.latitude)&&dr(i.geoPointValue.longitude)===dr(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return dr(i.integerValue)===dr(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=dr(i.doubleValue),a=dr(s.doubleValue);return o===a?wm(o)===wm(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Bu(t.arrayValue.values||[],e.arrayValue.values||[],Po);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(Wx(o)!==Wx(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Po(o[l],a[l])))return!1;return!0}(t,e);default:return kt()}}function Fd(t,e){return(t.values||[]).find(n=>Po(n,e))!==void 0}function zu(t,e){if(t===e)return 0;const n=yc(t),r=yc(e);if(n!==r)return cn(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return cn(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=dr(s.integerValue||s.doubleValue),l=dr(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return Gx(t.timestampValue,e.timestampValue);case 4:return Gx(Od(t),Od(e));case 5:return cn(t.stringValue,e.stringValue);case 6:return function(s,o){const a=gc(s),l=gc(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const u=cn(a[c],l[c]);if(u!==0)return u}return cn(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=cn(dr(s.latitude),dr(o.latitude));return a!==0?a:cn(dr(s.longitude),dr(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Kx(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,l,c,u;const g=s.fields||{},y=o.fields||{},p=(a=g.value)===null||a===void 0?void 0:a.arrayValue,b=(l=y.value)===null||l===void 0?void 0:l.arrayValue,N=cn(((c=p==null?void 0:p.values)===null||c===void 0?void 0:c.length)||0,((u=b==null?void 0:b.values)===null||u===void 0?void 0:u.length)||0);return N!==0?N:Kx(p,b)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===tp.mapValue&&o===tp.mapValue)return 0;if(s===tp.mapValue)return 1;if(o===tp.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=o.fields||{},u=Object.keys(c);l.sort(),u.sort();for(let g=0;g<l.length&&g<u.length;++g){const y=cn(l[g],u[g]);if(y!==0)return y;const p=zu(a[l[g]],c[u[g]]);if(p!==0)return p}return cn(l.length,u.length)}(t.mapValue,e.mapValue);default:throw kt()}}function Gx(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return cn(t,e);const n=_l(t),r=_l(e),i=cn(n.seconds,r.seconds);return i!==0?i:cn(n.nanos,r.nanos)}function Kx(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=zu(n[i],r[i]);if(s)return s}return cn(n.length,r.length)}function qu(t){return y2(t)}function y2(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=_l(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return gc(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return _t.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=y2(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${y2(n.fields[o])}`;return i+"}"}(t.mapValue):kt()}function Yx(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function v2(t){return!!t&&"integerValue"in t}function hv(t){return!!t&&"arrayValue"in t}function Qx(t){return!!t&&"nullValue"in t}function Xx(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Pp(t){return!!t&&"mapValue"in t}function I7(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function sd(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Lc(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=sd(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=sd(t.arrayValue.values[n]);return e}return Object.assign({},t)}function k7(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi{constructor(e){this.value=e}static empty(){return new Bi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Pp(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=sd(n)}setAll(e){let n=Qr.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=sd(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Pp(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Po(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Pp(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Lc(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Bi(sd(this.value))}}function qN(t){const e=[];return Lc(t.fields,(n,r)=>{const i=new Qr([n]);if(Pp(r)){const s=qN(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new cs(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new mi(e,0,Lt.min(),Lt.min(),Lt.min(),Bi.empty(),0)}static newFoundDocument(e,n,r,i){return new mi(e,1,n,Lt.min(),r,i,0)}static newNoDocument(e,n){return new mi(e,2,n,Lt.min(),Lt.min(),Bi.empty(),0)}static newUnknownDocument(e,n){return new mi(e,3,n,Lt.min(),Lt.min(),Bi.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Lt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Bi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Bi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Lt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof mi&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new mi(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xm{constructor(e,n){this.position=e,this.inclusive=n}}function Jx(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=_t.comparator(_t.fromName(o.referenceValue),n.key):r=zu(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function Zx(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Po(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ud{constructor(e,n="asc"){this.field=e,this.dir=n}}function C7(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HN{}class _r extends HN{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new R7(e,n,r):n==="array-contains"?new D7(e,r):n==="in"?new O7(e,r):n==="not-in"?new M7(e,r):n==="array-contains-any"?new F7(e,r):new _r(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new L7(e,r):new j7(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(zu(n,this.value)):n!==null&&yc(this.value)===yc(n)&&this.matchesComparison(zu(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return kt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class to extends HN{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new to(e,n)}matches(e){return WN(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function WN(t){return t.op==="and"}function $N(t){return P7(t)&&WN(t)}function P7(t){for(const e of t.filters)if(e instanceof to)return!1;return!0}function w2(t){if(t instanceof _r)return t.field.canonicalString()+t.op.toString()+qu(t.value);if($N(t))return t.filters.map(e=>w2(e)).join(",");{const e=t.filters.map(n=>w2(n)).join(",");return`${t.op}(${e})`}}function GN(t,e){return t instanceof _r?function(r,i){return i instanceof _r&&r.op===i.op&&r.field.isEqual(i.field)&&Po(r.value,i.value)}(t,e):t instanceof to?function(r,i){return i instanceof to&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&GN(o,i.filters[a]),!0):!1}(t,e):void kt()}function KN(t){return t instanceof _r?function(n){return`${n.field.canonicalString()} ${n.op} ${qu(n.value)}`}(t):t instanceof to?function(n){return n.op.toString()+" {"+n.getFilters().map(KN).join(" ,")+"}"}(t):"Filter"}class R7 extends _r{constructor(e,n,r){super(e,n,r),this.key=_t.fromName(r.referenceValue)}matches(e){const n=_t.comparator(e.key,this.key);return this.matchesComparison(n)}}class L7 extends _r{constructor(e,n){super(e,"in",n),this.keys=YN("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class j7 extends _r{constructor(e,n){super(e,"not-in",n),this.keys=YN("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function YN(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>_t.fromName(r.referenceValue))}class D7 extends _r{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return hv(n)&&Fd(n.arrayValue,this.value)}}class O7 extends _r{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Fd(this.value.arrayValue,n)}}class M7 extends _r{constructor(e,n){super(e,"not-in",n)}matches(e){if(Fd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Fd(this.value.arrayValue,n)}}class F7 extends _r{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!hv(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Fd(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U7{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function e_(t,e=null,n=[],r=[],i=null,s=null,o=null){return new U7(t,e,n,r,i,s,o)}function dv(t){const e=jt(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>w2(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),lg(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>qu(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>qu(r)).join(",")),e.ue=n}return e.ue}function fv(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!C7(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!GN(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Zx(t.startAt,e.startAt)&&Zx(t.endAt,e.endAt)}function x2(t){return _t.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class th{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function V7(t,e,n,r,i,s,o,a){return new th(t,e,n,r,i,s,o,a)}function cg(t){return new th(t)}function t_(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function QN(t){return t.collectionGroup!==null}function od(t){const e=jt(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Zr(Qr.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Ud(s,r))}),n.has(Qr.keyField().canonicalString())||e.ce.push(new Ud(Qr.keyField(),r))}return e.ce}function ko(t){const e=jt(t);return e.le||(e.le=B7(e,od(t))),e.le}function B7(t,e){if(t.limitType==="F")return e_(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Ud(i.field,s)});const n=t.endAt?new xm(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new xm(t.startAt.position,t.startAt.inclusive):null;return e_(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function _2(t,e){const n=t.filters.concat([e]);return new th(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function b2(t,e,n){return new th(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function ug(t,e){return fv(ko(t),ko(e))&&t.limitType===e.limitType}function XN(t){return`${dv(ko(t))}|lt:${t.limitType}`}function Jc(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>KN(i)).join(", ")}]`),lg(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>qu(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>qu(i)).join(",")),`Target(${r})`}(ko(t))}; limitType=${t.limitType})`}function hg(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):_t.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of od(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const c=Jx(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,od(r),i)||r.endAt&&!function(o,a,l){const c=Jx(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,od(r),i))}(t,e)}function z7(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function JN(t){return(e,n)=>{let r=!1;for(const i of od(t)){const s=q7(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function q7(t,e,n){const r=t.field.isKeyField()?_t.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),c=a.data.field(s);return l!==null&&c!==null?zu(l,c):kt()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return kt()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nh{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Lc(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return BN(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H7=new Xn(_t.comparator);function ga(){return H7}const ZN=new Xn(_t.comparator);function $h(...t){let e=ZN;for(const n of t)e=e.insert(n.key,n);return e}function eS(t){let e=ZN;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function tc(){return ad()}function tS(){return ad()}function ad(){return new nh(t=>t.toString(),(t,e)=>t.isEqual(e))}const W7=new Xn(_t.comparator),$7=new Zr(_t.comparator);function Yt(...t){let e=$7;for(const n of t)e=e.add(n);return e}const G7=new Zr(cn);function K7(){return G7}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pv(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:wm(e)?"-0":e}}function nS(t){return{integerValue:""+t}}function Y7(t,e){return A7(e)?nS(e):pv(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dg{constructor(){this._=void 0}}function Q7(t,e,n){return t instanceof Vd?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&cv(s)&&(s=uv(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof Hu?iS(t,e):t instanceof Bd?sS(t,e):function(i,s){const o=rS(i,s),a=n_(o)+n_(i.Pe);return v2(o)&&v2(i.Pe)?nS(a):pv(i.serializer,a)}(t,e)}function X7(t,e,n){return t instanceof Hu?iS(t,e):t instanceof Bd?sS(t,e):n}function rS(t,e){return t instanceof _m?function(r){return v2(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Vd extends dg{}class Hu extends dg{constructor(e){super(),this.elements=e}}function iS(t,e){const n=oS(e);for(const r of t.elements)n.some(i=>Po(i,r))||n.push(r);return{arrayValue:{values:n}}}class Bd extends dg{constructor(e){super(),this.elements=e}}function sS(t,e){let n=oS(e);for(const r of t.elements)n=n.filter(i=>!Po(i,r));return{arrayValue:{values:n}}}class _m extends dg{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function n_(t){return dr(t.integerValue||t.doubleValue)}function oS(t){return hv(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aS{constructor(e,n){this.field=e,this.transform=n}}function J7(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Hu&&i instanceof Hu||r instanceof Bd&&i instanceof Bd?Bu(r.elements,i.elements,Po):r instanceof _m&&i instanceof _m?Po(r.Pe,i.Pe):r instanceof Vd&&i instanceof Vd}(t.transform,e.transform)}class Z7{constructor(e,n){this.version=e,this.transformResults=n}}class Ci{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Ci}static exists(e){return new Ci(void 0,e)}static updateTime(e){return new Ci(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Rp(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class fg{}function lS(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new pg(t.key,Ci.none()):new of(t.key,t.data,Ci.none());{const n=t.data,r=Bi.empty();let i=new Zr(Qr.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Cl(t.key,r,new cs(i.toArray()),Ci.none())}}function ej(t,e,n){t instanceof of?function(i,s,o){const a=i.value.clone(),l=i_(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Cl?function(i,s,o){if(!Rp(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=i_(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(cS(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function ld(t,e,n,r){return t instanceof of?function(s,o,a,l){if(!Rp(s.precondition,o))return a;const c=s.value.clone(),u=s_(s.fieldTransforms,l,o);return c.setAll(u),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof Cl?function(s,o,a,l){if(!Rp(s.precondition,o))return a;const c=s_(s.fieldTransforms,l,o),u=o.data;return u.setAll(cS(s)),u.setAll(c),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(g=>g.field))}(t,e,n,r):function(s,o,a){return Rp(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function tj(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=rS(r.transform,i||null);s!=null&&(n===null&&(n=Bi.empty()),n.set(r.field,s))}return n||null}function r_(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Bu(r,i,(s,o)=>J7(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class of extends fg{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Cl extends fg{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function cS(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function i_(t,e,n){const r=new Map;wn(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,X7(o,a,n[i]))}return r}function s_(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,Q7(s,o,e))}return r}class pg extends fg{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class nj extends fg{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rj{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&ej(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=ld(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=ld(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=tS();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=lS(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(Lt.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Yt())}isEqual(e){return this.batchId===e.batchId&&Bu(this.mutations,e.mutations,(n,r)=>r_(n,r))&&Bu(this.baseMutations,e.baseMutations,(n,r)=>r_(n,r))}}class mv{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){wn(e.mutations.length===r.length);let i=function(){return W7}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new mv(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ij{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sj{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var wr,nn;function oj(t){switch(t){default:return kt();case je.CANCELLED:case je.UNKNOWN:case je.DEADLINE_EXCEEDED:case je.RESOURCE_EXHAUSTED:case je.INTERNAL:case je.UNAVAILABLE:case je.UNAUTHENTICATED:return!1;case je.INVALID_ARGUMENT:case je.NOT_FOUND:case je.ALREADY_EXISTS:case je.PERMISSION_DENIED:case je.FAILED_PRECONDITION:case je.ABORTED:case je.OUT_OF_RANGE:case je.UNIMPLEMENTED:case je.DATA_LOSS:return!0}}function uS(t){if(t===void 0)return ma("GRPC error has no .code"),je.UNKNOWN;switch(t){case wr.OK:return je.OK;case wr.CANCELLED:return je.CANCELLED;case wr.UNKNOWN:return je.UNKNOWN;case wr.DEADLINE_EXCEEDED:return je.DEADLINE_EXCEEDED;case wr.RESOURCE_EXHAUSTED:return je.RESOURCE_EXHAUSTED;case wr.INTERNAL:return je.INTERNAL;case wr.UNAVAILABLE:return je.UNAVAILABLE;case wr.UNAUTHENTICATED:return je.UNAUTHENTICATED;case wr.INVALID_ARGUMENT:return je.INVALID_ARGUMENT;case wr.NOT_FOUND:return je.NOT_FOUND;case wr.ALREADY_EXISTS:return je.ALREADY_EXISTS;case wr.PERMISSION_DENIED:return je.PERMISSION_DENIED;case wr.FAILED_PRECONDITION:return je.FAILED_PRECONDITION;case wr.ABORTED:return je.ABORTED;case wr.OUT_OF_RANGE:return je.OUT_OF_RANGE;case wr.UNIMPLEMENTED:return je.UNIMPLEMENTED;case wr.DATA_LOSS:return je.DATA_LOSS;default:return kt()}}(nn=wr||(wr={}))[nn.OK=0]="OK",nn[nn.CANCELLED=1]="CANCELLED",nn[nn.UNKNOWN=2]="UNKNOWN",nn[nn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",nn[nn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",nn[nn.NOT_FOUND=5]="NOT_FOUND",nn[nn.ALREADY_EXISTS=6]="ALREADY_EXISTS",nn[nn.PERMISSION_DENIED=7]="PERMISSION_DENIED",nn[nn.UNAUTHENTICATED=16]="UNAUTHENTICATED",nn[nn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",nn[nn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",nn[nn.ABORTED=10]="ABORTED",nn[nn.OUT_OF_RANGE=11]="OUT_OF_RANGE",nn[nn.UNIMPLEMENTED=12]="UNIMPLEMENTED",nn[nn.INTERNAL=13]="INTERNAL",nn[nn.UNAVAILABLE=14]="UNAVAILABLE",nn[nn.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aj(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lj=new sc([4294967295,4294967295],0);function o_(t){const e=aj().encode(t),n=new LN;return n.update(e),new Uint8Array(n.digest())}function a_(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new sc([n,r],0),new sc([i,s],0)]}class gv{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Gh(`Invalid padding: ${n}`);if(r<0)throw new Gh(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Gh(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Gh(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=sc.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(sc.fromNumber(r)));return i.compare(lj)===1&&(i=new sc([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=o_(e),[r,i]=a_(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new gv(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=o_(e),[r,i]=a_(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Gh extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mg{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,af.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new mg(Lt.min(),i,new Xn(cn),ga(),Yt())}}class af{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new af(r,n,Yt(),Yt(),Yt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lp{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class hS{constructor(e,n){this.targetId=e,this.me=n}}class dS{constructor(e,n,r=ti.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class l_{constructor(){this.fe=0,this.ge=u_(),this.pe=ti.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Yt(),n=Yt(),r=Yt();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:kt()}}),new af(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=u_()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,wn(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class cj{constructor(e){this.Le=e,this.Be=new Map,this.ke=ga(),this.qe=c_(),this.Qe=new Xn(cn)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:kt()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const s=i.target;if(x2(s))if(r===0){const o=new _t(s.path);this.Ue(n,o,mi.newNoDocument(o,Lt.min()))}else wn(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=gc(r).toUint8Array()}catch(l){if(l instanceof zN)return Vu("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new gv(o,i,s)}catch(l){return Vu(l instanceof Gh?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&x2(a.target)){const l=new _t(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,mi.newNoDocument(l,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=Yt();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Je(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new mg(e,n,this.Qe,this.ke,r);return this.ke=ga(),this.qe=c_(),this.Qe=new Xn(cn),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new l_,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Zr(cn),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||ft("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new l_),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function c_(){return new Xn(_t.comparator)}function u_(){return new Xn(_t.comparator)}const uj={asc:"ASCENDING",desc:"DESCENDING"},hj={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},dj={and:"AND",or:"OR"};class fj{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function N2(t,e){return t.useProto3Json||lg(e)?e:{value:e}}function bm(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function fS(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function pj(t,e){return bm(t,e.toTimestamp())}function Co(t){return wn(!!t),Lt.fromTimestamp(function(n){const r=_l(n);return new br(r.seconds,r.nanos)}(t))}function yv(t,e){return S2(t,e).canonicalString()}function S2(t,e){const n=function(i){return new Dn(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function pS(t){const e=Dn.fromString(t);return wn(wS(e)),e}function A2(t,e){return yv(t.databaseId,e.path)}function I0(t,e){const n=pS(e);if(n.get(1)!==t.databaseId.projectId)throw new Je(je.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Je(je.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new _t(gS(n))}function mS(t,e){return yv(t.databaseId,e)}function mj(t){const e=pS(t);return e.length===4?Dn.emptyPath():gS(e)}function E2(t){return new Dn(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function gS(t){return wn(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function h_(t,e,n){return{name:A2(t,e),fields:n.value.mapValue.fields}}function gj(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:kt()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,u){return c.useProto3Json?(wn(u===void 0||typeof u=="string"),ti.fromBase64String(u||"")):(wn(u===void 0||u instanceof Buffer||u instanceof Uint8Array),ti.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const u=c.code===void 0?je.UNKNOWN:uS(c.code);return new Je(u,c.message||"")}(o);n=new dS(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=I0(t,r.document.name),s=Co(r.document.updateTime),o=r.document.createTime?Co(r.document.createTime):Lt.min(),a=new Bi({mapValue:{fields:r.document.fields}}),l=mi.newFoundDocument(i,s,o,a),c=r.targetIds||[],u=r.removedTargetIds||[];n=new Lp(c,u,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=I0(t,r.document),s=r.readTime?Co(r.readTime):Lt.min(),o=mi.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Lp([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=I0(t,r.document),s=r.removedTargetIds||[];n=new Lp([],s,i,null)}else{if(!("filter"in e))return kt();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new sj(i,s),a=r.targetId;n=new hS(a,o)}}return n}function yj(t,e){let n;if(e instanceof of)n={update:h_(t,e.key,e.value)};else if(e instanceof pg)n={delete:A2(t,e.key)};else if(e instanceof Cl)n={update:h_(t,e.key,e.data),updateMask:Ej(e.fieldMask)};else{if(!(e instanceof nj))return kt();n={verify:A2(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof Vd)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Hu)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Bd)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof _m)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw kt()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:pj(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:kt()}(t,e.precondition)),n}function vj(t,e){return t&&t.length>0?(wn(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?Co(i.updateTime):Co(s);return o.isEqual(Lt.min())&&(o=Co(s)),new Z7(o,i.transformResults||[])}(n,e))):[]}function wj(t,e){return{documents:[mS(t,e.path)]}}function xj(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=mS(t,i);const s=function(c){if(c.length!==0)return vS(to.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(u=>function(y){return{field:Zc(y.field),direction:Nj(y.dir)}}(u))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=N2(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:i}}function _j(t){let e=mj(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){wn(r===1);const u=n.from[0];u.allDescendants?i=u.collectionId:e=e.child(u.collectionId)}let s=[];n.where&&(s=function(g){const y=yS(g);return y instanceof to&&$N(y)?y.getFilters():[y]}(n.where));let o=[];n.orderBy&&(o=function(g){return g.map(y=>function(b){return new Ud(eu(b.field),function(C){switch(C){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(y))}(n.orderBy));let a=null;n.limit&&(a=function(g){let y;return y=typeof g=="object"?g.value:g,lg(y)?null:y}(n.limit));let l=null;n.startAt&&(l=function(g){const y=!!g.before,p=g.values||[];return new xm(p,y)}(n.startAt));let c=null;return n.endAt&&(c=function(g){const y=!g.before,p=g.values||[];return new xm(p,y)}(n.endAt)),V7(e,i,o,s,a,"F",l,c)}function bj(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return kt()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function yS(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=eu(n.unaryFilter.field);return _r.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=eu(n.unaryFilter.field);return _r.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=eu(n.unaryFilter.field);return _r.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=eu(n.unaryFilter.field);return _r.create(o,"!=",{nullValue:"NULL_VALUE"});default:return kt()}}(t):t.fieldFilter!==void 0?function(n){return _r.create(eu(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return kt()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return to.create(n.compositeFilter.filters.map(r=>yS(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return kt()}}(n.compositeFilter.op))}(t):kt()}function Nj(t){return uj[t]}function Sj(t){return hj[t]}function Aj(t){return dj[t]}function Zc(t){return{fieldPath:t.canonicalString()}}function eu(t){return Qr.fromServerFormat(t.fieldPath)}function vS(t){return t instanceof _r?function(n){if(n.op==="=="){if(Xx(n.value))return{unaryFilter:{field:Zc(n.field),op:"IS_NAN"}};if(Qx(n.value))return{unaryFilter:{field:Zc(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Xx(n.value))return{unaryFilter:{field:Zc(n.field),op:"IS_NOT_NAN"}};if(Qx(n.value))return{unaryFilter:{field:Zc(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Zc(n.field),op:Sj(n.op),value:n.value}}}(t):t instanceof to?function(n){const r=n.getFilters().map(i=>vS(i));return r.length===1?r[0]:{compositeFilter:{op:Aj(n.op),filters:r}}}(t):kt()}function Ej(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function wS(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class il{constructor(e,n,r,i,s=Lt.min(),o=Lt.min(),a=ti.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new il(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new il(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new il(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new il(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tj{constructor(e){this.ct=e}}function Ij(t){const e=_j({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?b2(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kj{constructor(){this.un=new Cj}addToCollectionParentIndex(e,n){return this.un.add(n),Me.resolve()}getCollectionParents(e,n){return Me.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return Me.resolve()}deleteFieldIndex(e,n){return Me.resolve()}deleteAllFieldIndexes(e){return Me.resolve()}createTargetIndexes(e,n){return Me.resolve()}getDocumentsMatchingTarget(e,n){return Me.resolve(null)}getIndexType(e,n){return Me.resolve(0)}getFieldIndexes(e,n){return Me.resolve([])}getNextCollectionGroupToUpdate(e){return Me.resolve(null)}getMinOffset(e,n){return Me.resolve(xl.min())}getMinOffsetFromCollectionGroup(e,n){return Me.resolve(xl.min())}updateCollectionGroup(e,n,r){return Me.resolve()}updateIndexEntries(e,n){return Me.resolve()}}class Cj{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Zr(Dn.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Zr(Dn.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wu{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Wu(0)}static kn(){return new Wu(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pj{constructor(){this.changes=new nh(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,mi.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?Me.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rj{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lj{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&ld(r.mutation,i,cs.empty(),br.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Yt()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Yt()){const i=tc();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=$h();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=tc();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Yt()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=ga();const o=ad(),a=function(){return ad()}();return n.forEach((l,c)=>{const u=r.get(c.key);i.has(c.key)&&(u===void 0||u.mutation instanceof Cl)?s=s.insert(c.key,c):u!==void 0?(o.set(c.key,u.mutation.getFieldMask()),ld(u.mutation,c,u.mutation.getFieldMask(),br.now())):o.set(c.key,cs.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,u)=>o.set(c,u)),n.forEach((c,u)=>{var g;return a.set(c,new Rj(u,(g=o.get(c))!==null&&g!==void 0?g:null))}),a))}recalculateAndSaveOverlays(e,n){const r=ad();let i=new Xn((o,a)=>o-a),s=Yt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let u=r.get(l)||cs.empty();u=a.applyToLocalView(c,u),r.set(l,u);const g=(i.get(a.batchId)||Yt()).add(l);i=i.insert(a.batchId,g)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,u=l.value,g=tS();u.forEach(y=>{if(!s.has(y)){const p=lS(n.get(y),r.get(y));p!==null&&g.set(y,p),s=s.add(y)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,g))}return Me.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return _t.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):QN(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):Me.resolve(tc());let a=-1,l=s;return o.next(c=>Me.forEach(c,(u,g)=>(a<g.largestBatchId&&(a=g.largestBatchId),s.get(u)?Me.resolve():this.remoteDocumentCache.getEntry(e,u).next(y=>{l=l.insert(u,y)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,Yt())).next(u=>({batchId:a,changes:eS(u)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new _t(n)).next(r=>{let i=$h();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=$h();return this.indexManager.getCollectionParents(e,s).next(a=>Me.forEach(a,l=>{const c=function(g,y){return new th(y,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(u=>{u.forEach((g,y)=>{o=o.insert(g,y)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((l,c)=>{const u=c.getKey();o.get(u)===null&&(o=o.insert(u,mi.newInvalidDocument(u)))});let a=$h();return o.forEach((l,c)=>{const u=s.get(l);u!==void 0&&ld(u.mutation,c,cs.empty(),br.now()),hg(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jj{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return Me.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Co(i.createTime)}}(n)),Me.resolve()}getNamedQuery(e,n){return Me.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:Ij(i.bundledQuery),readTime:Co(i.readTime)}}(n)),Me.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dj{constructor(){this.overlays=new Xn(_t.comparator),this.Ir=new Map}getOverlay(e,n){return Me.resolve(this.overlays.get(n))}getOverlays(e,n){const r=tc();return Me.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),Me.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),Me.resolve()}getOverlaysForCollection(e,n,r){const i=tc(),s=n.length+1,o=new _t(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return Me.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Xn((c,u)=>c-u);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let u=s.get(c.largestBatchId);u===null&&(u=tc(),s=s.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const a=tc(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>a.set(c,u)),!(a.size()>=i)););return Me.resolve(a)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new ij(n,r));let s=this.Ir.get(n);s===void 0&&(s=Yt(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oj{constructor(){this.sessionToken=ti.EMPTY_BYTE_STRING}getSessionToken(e){return Me.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,Me.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vv{constructor(){this.Tr=new Zr(Mr.Er),this.dr=new Zr(Mr.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new Mr(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Mr(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new _t(new Dn([])),r=new Mr(n,e),i=new Mr(n,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new _t(new Dn([])),r=new Mr(n,e),i=new Mr(n,e+1);let s=Yt();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new Mr(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Mr{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return _t.comparator(e.key,n.key)||cn(e.wr,n.wr)}static Ar(e,n){return cn(e.wr,n.wr)||_t.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mj{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Zr(Mr.Er)}checkEmpty(e){return Me.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new rj(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.br=this.br.add(new Mr(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return Me.resolve(o)}lookupMutationBatch(e,n){return Me.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),s=i<0?0:i;return Me.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Me.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return Me.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Mr(n,0),i=new Mr(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{const a=this.Dr(o.wr);s.push(a)}),Me.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Zr(cn);return n.forEach(i=>{const s=new Mr(i,0),o=new Mr(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),Me.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;_t.isDocumentKey(s)||(s=s.child(""));const o=new Mr(new _t(s),0);let a=new Zr(cn);return this.br.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(l.wr)),!0)},o),Me.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){wn(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return Me.forEach(n.mutations,i=>{const s=new Mr(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new Mr(n,0),i=this.br.firstAfterOrEqual(r);return Me.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,Me.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fj{constructor(e){this.Mr=e,this.docs=function(){return new Xn(_t.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return Me.resolve(r?r.document.mutableCopy():mi.newInvalidDocument(n))}getEntries(e,n){let r=ga();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():mi.newInvalidDocument(i))}),Me.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=ga();const o=n.path,a=new _t(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||_7(x7(u),r)<=0||(i.has(u.key)||hg(n,u))&&(s=s.insert(u.key,u.mutableCopy()))}return Me.resolve(s)}getAllFromCollectionGroup(e,n,r,i){kt()}Or(e,n){return Me.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Uj(this)}getSize(e){return Me.resolve(this.size)}}class Uj extends Pj{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),Me.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vj{constructor(e){this.persistence=e,this.Nr=new nh(n=>dv(n),fv),this.lastRemoteSnapshotVersion=Lt.min(),this.highestTargetId=0,this.Lr=0,this.Br=new vv,this.targetCount=0,this.kr=Wu.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),Me.resolve()}getLastRemoteSnapshotVersion(e){return Me.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Me.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),Me.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),Me.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Wu(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,Me.resolve()}updateTargetData(e,n){return this.Kn(n),Me.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,Me.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),Me.waitFor(s).next(()=>i)}getTargetCount(e){return Me.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return Me.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),Me.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),Me.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),Me.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return Me.resolve(r)}containsKey(e,n){return Me.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bj{constructor(e,n){this.qr={},this.overlays={},this.Qr=new lv(0),this.Kr=!1,this.Kr=!0,this.$r=new Oj,this.referenceDelegate=e(this),this.Ur=new Vj(this),this.indexManager=new kj,this.remoteDocumentCache=function(i){return new Fj(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new Tj(n),this.Gr=new jj(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Dj,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new Mj(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){ft("MemoryPersistence","Starting transaction:",e);const i=new zj(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return Me.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class zj extends N7{constructor(e){super(),this.currentSequenceNumber=e}}class wv{constructor(e){this.persistence=e,this.Jr=new vv,this.Yr=null}static Zr(e){return new wv(e)}get Xr(){if(this.Yr)return this.Yr;throw kt()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),Me.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),Me.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),Me.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Me.forEach(this.Xr,r=>{const i=_t.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,Lt.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return Me.or([()=>Me.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xv{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=Yt(),i=Yt();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new xv(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qj{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hj{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return jC()?8:S7(wi())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new qj;return this.Xi(e,n,o).next(a=>{if(s.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(Dh()<=Jt.DEBUG&&ft("QueryEngine","SDK will not create cache indexes for query:",Jc(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Me.resolve()):(Dh()<=Jt.DEBUG&&ft("QueryEngine","Query:",Jc(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Dh()<=Jt.DEBUG&&ft("QueryEngine","The SDK decides to create cache indexes for query:",Jc(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ko(n))):Me.resolve())}Yi(e,n){if(t_(n))return Me.resolve(null);let r=ko(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=b2(n,null,"F"),r=ko(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=Yt(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.ts(n,a);return this.ns(n,c,o,l.readTime)?this.Yi(e,b2(n,null,"F")):this.rs(e,c,n,l)}))})))}Zi(e,n,r,i){return t_(n)||i.isEqual(Lt.min())?Me.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const o=this.ts(n,s);return this.ns(n,o,r,i)?Me.resolve(null):(Dh()<=Jt.DEBUG&&ft("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Jc(n)),this.rs(e,o,n,w7(i,-1)).next(a=>a))})}ts(e,n){let r=new Zr(JN(e));return n.forEach((i,s)=>{hg(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return Dh()<=Jt.DEBUG&&ft("QueryEngine","Using full collection scan to execute query:",Jc(n)),this.Ji.getDocumentsMatchingQuery(e,n,xl.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wj{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new Xn(cn),this._s=new nh(s=>dv(s),fv),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Lj(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function $j(t,e,n,r){return new Wj(t,e,n,r)}async function xS(t,e){const n=jt(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=Yt();for(const c of i){o.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of s){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return n.localDocuments.getDocuments(r,l).next(c=>({hs:c,removedBatchIds:o,addedBatchIds:a}))})})}function Gj(t,e){const n=jt(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,c,u){const g=c.batch,y=g.keys();let p=Me.resolve();return y.forEach(b=>{p=p.next(()=>u.getEntry(l,b)).next(N=>{const C=c.docVersions.get(b);wn(C!==null),N.version.compareTo(C)<0&&(g.applyToRemoteDocument(N,c),N.isValidDocument()&&(N.setReadTime(c.commitVersion),u.addEntry(N)))})}),p.next(()=>a.mutationQueue.removeMutationBatch(l,g))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=Yt();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function _S(t){const e=jt(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function Kj(t,e){const n=jt(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const a=[];e.targetChanges.forEach((u,g)=>{const y=i.get(g);if(!y)return;a.push(n.Ur.removeMatchingKeys(s,u.removedDocuments,g).next(()=>n.Ur.addMatchingKeys(s,u.addedDocuments,g)));let p=y.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(g)!==null?p=p.withResumeToken(ti.EMPTY_BYTE_STRING,Lt.min()).withLastLimboFreeSnapshotVersion(Lt.min()):u.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(u.resumeToken,r)),i=i.insert(g,p),function(N,C,_){return N.resumeToken.approximateByteSize()===0||C.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=3e8?!0:_.addedDocuments.size+_.modifiedDocuments.size+_.removedDocuments.size>0}(y,p,u)&&a.push(n.Ur.updateTargetData(s,p))});let l=ga(),c=Yt();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,u))}),a.push(Yj(s,o,e.documentUpdates).next(u=>{l=u.Ps,c=u.Is})),!r.isEqual(Lt.min())){const u=n.Ur.getLastRemoteSnapshotVersion(s).next(g=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(u)}return Me.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(n.os=i,s))}function Yj(t,e,n){let r=Yt(),i=Yt();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=ga();return n.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(Lt.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):ft("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Ps:o,Is:i}})}function Qj(t,e){const n=jt(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Xj(t,e){const n=jt(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,Me.resolve(i)):n.Ur.allocateTargetId(r).next(o=>(i=new il(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function T2(t,e,n){const r=jt(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!sf(o))throw o;ft("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function d_(t,e,n){const r=jt(t);let i=Lt.min(),s=Yt();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,u){const g=jt(l),y=g._s.get(u);return y!==void 0?Me.resolve(g.os.get(y)):g.Ur.getTargetData(c,u)}(r,o,ko(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?i:Lt.min(),n?s:Yt())).next(a=>(Jj(r,z7(e),a),{documents:a,Ts:s})))}function Jj(t,e,n){let r=t.us.get(e)||Lt.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}class f_{constructor(){this.activeTargetIds=K7()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Zj{constructor(){this.so=new f_,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new f_,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eD{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p_{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){ft("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){ft("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let np=null;function k0(){return np===null?np=function(){return 268435456+Math.round(2147483648*Math.random())}():np++,"0x"+np.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tD={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nD{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ai="WebChannelConnection";class rD extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,o){const a=k0(),l=this.xo(n,r.toUriEncodedString());ft("RestConnection",`Sending RPC '${n}' ${a}:`,l,i);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,s,o),this.No(n,l,c,i).then(u=>(ft("RestConnection",`Received RPC '${n}' ${a}: `,u),u),u=>{throw Vu("RestConnection",`RPC '${n}' ${a} failed with error: `,u,"url: ",l,"request:",i),u})}Lo(n,r,i,s,o,a){return this.Mo(n,r,i,s,o)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+eh}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}xo(n,r){const i=tD[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const s=k0();return new Promise((o,a)=>{const l=new jN;l.setWithCredentials(!0),l.listenOnce(DN.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Cp.NO_ERROR:const u=l.getResponseJson();ft(ai,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(u)),o(u);break;case Cp.TIMEOUT:ft(ai,`RPC '${e}' ${s} timed out`),a(new Je(je.DEADLINE_EXCEEDED,"Request time out"));break;case Cp.HTTP_ERROR:const g=l.getStatus();if(ft(ai,`RPC '${e}' ${s} failed with status:`,g,"response text:",l.getResponseText()),g>0){let y=l.getResponseJson();Array.isArray(y)&&(y=y[0]);const p=y==null?void 0:y.error;if(p&&p.status&&p.message){const b=function(C){const _=C.toLowerCase().replace(/_/g,"-");return Object.values(je).indexOf(_)>=0?_:je.UNKNOWN}(p.status);a(new Je(b,p.message))}else a(new Je(je.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new Je(je.UNAVAILABLE,"Connection failed."));break;default:kt()}}finally{ft(ai,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(i);ft(ai,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",c,r,15)})}Bo(e,n,r){const i=k0(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=FN(),a=MN(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const u=s.join("");ft(ai,`Creating RPC '${e}' stream ${i}: ${u}`,l);const g=o.createWebChannel(u,l);let y=!1,p=!1;const b=new nD({Io:C=>{p?ft(ai,`Not sending because RPC '${e}' stream ${i} is closed:`,C):(y||(ft(ai,`Opening RPC '${e}' stream ${i} transport.`),g.open(),y=!0),ft(ai,`RPC '${e}' stream ${i} sending:`,C),g.send(C))},To:()=>g.close()}),N=(C,_,k)=>{C.listen(_,L=>{try{k(L)}catch(D){setTimeout(()=>{throw D},0)}})};return N(g,Wh.EventType.OPEN,()=>{p||(ft(ai,`RPC '${e}' stream ${i} transport opened.`),b.yo())}),N(g,Wh.EventType.CLOSE,()=>{p||(p=!0,ft(ai,`RPC '${e}' stream ${i} transport closed`),b.So())}),N(g,Wh.EventType.ERROR,C=>{p||(p=!0,Vu(ai,`RPC '${e}' stream ${i} transport errored:`,C),b.So(new Je(je.UNAVAILABLE,"The operation could not be completed")))}),N(g,Wh.EventType.MESSAGE,C=>{var _;if(!p){const k=C.data[0];wn(!!k);const L=k,D=L.error||((_=L[0])===null||_===void 0?void 0:_.error);if(D){ft(ai,`RPC '${e}' stream ${i} received error:`,D);const z=D.status;let X=function(T){const M=wr[T];if(M!==void 0)return uS(M)}(z),j=D.message;X===void 0&&(X=je.INTERNAL,j="Unknown error status: "+z+" with message "+D.message),p=!0,b.So(new Je(X,j)),g.close()}else ft(ai,`RPC '${e}' stream ${i} received:`,k),b.bo(k)}}),N(a,ON.STAT_EVENT,C=>{C.stat===g2.PROXY?ft(ai,`RPC '${e}' stream ${i} detected buffering proxy`):C.stat===g2.NOPROXY&&ft(ai,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{b.wo()},0),b}}function C0(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gg(t){return new fj(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bS{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&ft("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NS{constructor(e,n,r,i,s,o,a,l){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new bS(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===je.RESOURCE_EXHAUSTED?(ma(n.toString()),ma("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===je.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new Je(je.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return ft("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(ft("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class iD extends NS{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=gj(this.serializer,e),r=function(s){if(!("targetChange"in s))return Lt.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?Lt.min():o.readTime?Co(o.readTime):Lt.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=E2(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=x2(l)?{documents:wj(s,l)}:{query:xj(s,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=fS(s,o.resumeToken);const c=N2(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(Lt.min())>0){a.readTime=bm(s,o.snapshotVersion.toTimestamp());const c=N2(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=bj(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=E2(this.serializer),n.removeTarget=e,this.a_(n)}}class sD extends NS{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return wn(!!e.streamToken),this.lastStreamToken=e.streamToken,wn(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){wn(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=vj(e.writeResults,e.commitTime),r=Co(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=E2(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>yj(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oD extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new Je(je.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,S2(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===je.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Je(je.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,S2(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===je.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Je(je.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class aD{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(ma(n),this.D_=!1):ft("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lD{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(async()=>{jc(this)&&(ft("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=jt(l);c.L_.add(4),await lf(c),c.q_.set("Unknown"),c.L_.delete(4),await yg(c)}(this))})}),this.q_=new aD(r,i)}}async function yg(t){if(jc(t))for(const e of t.B_)await e(!0)}async function lf(t){for(const e of t.B_)await e(!1)}function SS(t,e){const n=jt(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Sv(n)?Nv(n):rh(n).r_()&&bv(n,e))}function _v(t,e){const n=jt(t),r=rh(n);n.N_.delete(e),r.r_()&&AS(n,e),n.N_.size===0&&(r.r_()?r.o_():jc(n)&&n.q_.set("Unknown"))}function bv(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Lt.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}rh(t).A_(e)}function AS(t,e){t.Q_.xe(e),rh(t).R_(e)}function Nv(t){t.Q_=new cj({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),rh(t).start(),t.q_.v_()}function Sv(t){return jc(t)&&!rh(t).n_()&&t.N_.size>0}function jc(t){return jt(t).L_.size===0}function ES(t){t.Q_=void 0}async function cD(t){t.q_.set("Online")}async function uD(t){t.N_.forEach((e,n)=>{bv(t,e)})}async function hD(t,e){ES(t),Sv(t)?(t.q_.M_(e),Nv(t)):t.q_.set("Unknown")}async function dD(t,e,n){if(t.q_.set("Online"),e instanceof dS&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.N_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.N_.delete(a),i.Q_.removeTarget(a))}(t,e)}catch(r){ft("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Nm(t,r)}else if(e instanceof Lp?t.Q_.Ke(e):e instanceof hS?t.Q_.He(e):t.Q_.We(e),!n.isEqual(Lt.min()))try{const r=await _S(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.Q_.rt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const u=s.N_.get(c);u&&s.N_.set(c,u.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const u=s.N_.get(l);if(!u)return;s.N_.set(l,u.withResumeToken(ti.EMPTY_BYTE_STRING,u.snapshotVersion)),AS(s,l);const g=new il(u.target,l,c,u.sequenceNumber);bv(s,g)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){ft("RemoteStore","Failed to raise snapshot:",r),await Nm(t,r)}}async function Nm(t,e,n){if(!sf(e))throw e;t.L_.add(1),await lf(t),t.q_.set("Offline"),n||(n=()=>_S(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ft("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await yg(t)})}function TS(t,e){return e().catch(n=>Nm(t,n,e))}async function vg(t){const e=jt(t),n=bl(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;fD(e);)try{const i=await Qj(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,pD(e,i)}catch(i){await Nm(e,i)}IS(e)&&kS(e)}function fD(t){return jc(t)&&t.O_.length<10}function pD(t,e){t.O_.push(e);const n=bl(t);n.r_()&&n.V_&&n.m_(e.mutations)}function IS(t){return jc(t)&&!bl(t).n_()&&t.O_.length>0}function kS(t){bl(t).start()}async function mD(t){bl(t).p_()}async function gD(t){const e=bl(t);for(const n of t.O_)e.m_(n.mutations)}async function yD(t,e,n){const r=t.O_.shift(),i=mv.from(r,e,n);await TS(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await vg(t)}async function vD(t,e){e&&bl(t).V_&&await async function(r,i){if(function(o){return oj(o)&&o!==je.ABORTED}(i.code)){const s=r.O_.shift();bl(r).s_(),await TS(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await vg(r)}}(t,e),IS(t)&&kS(t)}async function m_(t,e){const n=jt(t);n.asyncQueue.verifyOperationInProgress(),ft("RemoteStore","RemoteStore received new credentials");const r=jc(n);n.L_.add(3),await lf(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await yg(n)}async function wD(t,e){const n=jt(t);e?(n.L_.delete(2),await yg(n)):e||(n.L_.add(2),await lf(n),n.q_.set("Unknown"))}function rh(t){return t.K_||(t.K_=function(n,r,i){const s=jt(n);return s.w_(),new iD(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:cD.bind(null,t),Ro:uD.bind(null,t),mo:hD.bind(null,t),d_:dD.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Sv(t)?Nv(t):t.q_.set("Unknown")):(await t.K_.stop(),ES(t))})),t.K_}function bl(t){return t.U_||(t.U_=function(n,r,i){const s=jt(n);return s.w_(),new sD(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:mD.bind(null,t),mo:vD.bind(null,t),f_:gD.bind(null,t),g_:yD.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await vg(t)):(await t.U_.stop(),t.O_.length>0&&(ft("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Av{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new aa,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new Av(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Je(je.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ev(t,e){if(ma("AsyncQueue",`${e}: ${t}`),sf(t))return new Je(je.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eu{constructor(e){this.comparator=e?(n,r)=>e(n,r)||_t.comparator(n.key,r.key):(n,r)=>_t.comparator(n.key,r.key),this.keyedMap=$h(),this.sortedSet=new Xn(this.comparator)}static emptySet(e){return new Eu(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Eu)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Eu;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g_{constructor(){this.W_=new Xn(_t.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):kt():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class $u{constructor(e,n,r,i,s,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new $u(e,n,Eu.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ug(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xD{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class _D{constructor(){this.queries=y_(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=jt(n),s=i.queries;i.queries=y_(),s.forEach((o,a)=>{for(const l of a.j_)l.onError(r)})})(this,new Je(je.ABORTED,"Firestore shutting down"))}}function y_(){return new nh(t=>XN(t),ug)}async function Tv(t,e){const n=jt(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new xD,r=e.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(i,!0);break;case 1:s.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=Ev(o,`Initialization of query '${Jc(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&kv(n)}async function Iv(t,e){const n=jt(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function bD(t,e){const n=jt(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&kv(n)}function ND(t,e,n){const r=jt(t),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(n);r.queries.delete(e)}function kv(t){t.Y_.forEach(e=>{e.next()})}var I2,v_;(v_=I2||(I2={})).ea="default",v_.Cache="cache";class Cv{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new $u(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=$u.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==I2.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CS{constructor(e){this.key=e}}class PS{constructor(e){this.key=e}}class SD{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Yt(),this.mutatedKeys=Yt(),this.Aa=JN(e),this.Ra=new Eu(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new g_,i=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((u,g)=>{const y=i.get(u),p=hg(this.query,g)?g:null,b=!!y&&this.mutatedKeys.has(y.key),N=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let C=!1;y&&p?y.data.isEqual(p.data)?b!==N&&(r.track({type:3,doc:p}),C=!0):this.ga(y,p)||(r.track({type:2,doc:p}),C=!0,(l&&this.Aa(p,l)>0||c&&this.Aa(p,c)<0)&&(a=!0)):!y&&p?(r.track({type:0,doc:p}),C=!0):y&&!p&&(r.track({type:1,doc:y}),C=!0,(l||c)&&(a=!0)),C&&(p?(o=o.add(p),s=N?s.add(u):s.delete(u)):(o=o.delete(u),s=s.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),s=s.delete(u.key),r.track({type:1,doc:u})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((u,g)=>function(p,b){const N=C=>{switch(C){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return kt()}};return N(p)-N(b)}(u.type,g.type)||this.Aa(u.doc,g.doc)),this.pa(r),i=i!=null&&i;const a=n&&!i?this.ya():[],l=this.da.size===0&&this.current&&!i?1:0,c=l!==this.Ea;return this.Ea=l,o.length!==0||c?{snapshot:new $u(this.query,e.Ra,s,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new g_,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Yt(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new PS(r))}),this.da.forEach(r=>{e.has(r)||n.push(new CS(r))}),n}ba(e){this.Ta=e.Ts,this.da=Yt();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return $u.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class AD{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class ED{constructor(e){this.key=e,this.va=!1}}class TD{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new nh(a=>XN(a),ug),this.Ma=new Map,this.xa=new Set,this.Oa=new Xn(_t.comparator),this.Na=new Map,this.La=new vv,this.Ba={},this.ka=new Map,this.qa=Wu.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function ID(t,e,n=!0){const r=MS(t);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await RS(r,e,n,!0),i}async function kD(t,e){const n=MS(t);await RS(n,e,!0,!1)}async function RS(t,e,n,r){const i=await Xj(t.localStore,ko(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await CD(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&SS(t.remoteStore,i),a}async function CD(t,e,n,r,i){t.Ka=(g,y,p)=>async function(N,C,_,k){let L=C.view.ma(_);L.ns&&(L=await d_(N.localStore,C.query,!1).then(({documents:j})=>C.view.ma(j,L)));const D=k&&k.targetChanges.get(C.targetId),z=k&&k.targetMismatches.get(C.targetId)!=null,X=C.view.applyChanges(L,N.isPrimaryClient,D,z);return x_(N,C.targetId,X.wa),X.snapshot}(t,g,y,p);const s=await d_(t.localStore,e,!0),o=new SD(e,s.Ts),a=o.ma(s.documents),l=af.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=o.applyChanges(a,t.isPrimaryClient,l);x_(t,n,c.wa);const u=new AD(e,n,o);return t.Fa.set(e,u),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),c.snapshot}async function PD(t,e,n){const r=jt(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!ug(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await T2(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&_v(r.remoteStore,i.targetId),k2(r,i.targetId)}).catch(rf)):(k2(r,i.targetId),await T2(r.localStore,i.targetId,!0))}async function RD(t,e){const n=jt(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),_v(n.remoteStore,r.targetId))}async function LD(t,e,n){const r=VD(t);try{const i=await function(o,a){const l=jt(o),c=br.now(),u=a.reduce((p,b)=>p.add(b.key),Yt());let g,y;return l.persistence.runTransaction("Locally write mutations","readwrite",p=>{let b=ga(),N=Yt();return l.cs.getEntries(p,u).next(C=>{b=C,b.forEach((_,k)=>{k.isValidDocument()||(N=N.add(_))})}).next(()=>l.localDocuments.getOverlayedDocuments(p,b)).next(C=>{g=C;const _=[];for(const k of a){const L=tj(k,g.get(k.key).overlayedDocument);L!=null&&_.push(new Cl(k.key,L,qN(L.value.mapValue),Ci.exists(!0)))}return l.mutationQueue.addMutationBatch(p,c,_,a)}).next(C=>{y=C;const _=C.applyToLocalDocumentSet(g,N);return l.documentOverlayCache.saveOverlays(p,C.batchId,_)})}).then(()=>({batchId:y.batchId,changes:eS(g)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let c=o.Ba[o.currentUser.toKey()];c||(c=new Xn(cn)),c=c.insert(a,l),o.Ba[o.currentUser.toKey()]=c}(r,i.batchId,n),await cf(r,i.changes),await vg(r.remoteStore)}catch(i){const s=Ev(i,"Failed to persist write");n.reject(s)}}async function LS(t,e){const n=jt(t);try{const r=await Kj(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Na.get(s);o&&(wn(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?wn(o.va):i.removedDocuments.size>0&&(wn(o.va),o.va=!1))}),await cf(n,r,e)}catch(r){await rf(r)}}function w_(t,e,n){const r=jt(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((s,o)=>{const a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=jt(o);l.onlineState=a;let c=!1;l.queries.forEach((u,g)=>{for(const y of g.j_)y.Z_(a)&&(c=!0)}),c&&kv(l)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function jD(t,e,n){const r=jt(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),s=i&&i.key;if(s){let o=new Xn(_t.comparator);o=o.insert(s,mi.newNoDocument(s,Lt.min()));const a=Yt().add(s),l=new mg(Lt.min(),new Map,new Xn(cn),o,a);await LS(r,l),r.Oa=r.Oa.remove(s),r.Na.delete(e),Pv(r)}else await T2(r.localStore,e,!1).then(()=>k2(r,e,n)).catch(rf)}async function DD(t,e){const n=jt(t),r=e.batch.batchId;try{const i=await Gj(n.localStore,e);DS(n,r,null),jS(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await cf(n,i)}catch(i){await rf(i)}}async function OD(t,e,n){const r=jt(t);try{const i=await function(o,a){const l=jt(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let u;return l.mutationQueue.lookupMutationBatch(c,a).next(g=>(wn(g!==null),u=g.keys(),l.mutationQueue.removeMutationBatch(c,g))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,u,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,u)).next(()=>l.localDocuments.getDocuments(c,u))})}(r.localStore,e);DS(r,e,n),jS(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await cf(r,i)}catch(i){await rf(i)}}function jS(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function DS(t,e,n){const r=jt(t);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function k2(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||OS(t,r)})}function OS(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(_v(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Pv(t))}function x_(t,e,n){for(const r of n)r instanceof CS?(t.La.addReference(r.key,e),MD(t,r)):r instanceof PS?(ft("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||OS(t,r.key)):kt()}function MD(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(ft("SyncEngine","New document in limbo: "+n),t.xa.add(r),Pv(t))}function Pv(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new _t(Dn.fromString(e)),r=t.qa.next();t.Na.set(r,new ED(n)),t.Oa=t.Oa.insert(n,r),SS(t.remoteStore,new il(ko(cg(n.path)),r,"TargetPurposeLimboResolution",lv.oe))}}async function cf(t,e,n){const r=jt(t),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,l)=>{o.push(r.Ka(l,e,n).then(c=>{var u;if((c||n)&&r.isPrimaryClient){const g=c?!c.fromCache:(u=n==null?void 0:n.targetChanges.get(l.targetId))===null||u===void 0?void 0:u.current;r.sharedClientState.updateQueryState(l.targetId,g?"current":"not-current")}if(c){i.push(c);const g=xv.Wi(l.targetId,c);s.push(g)}}))}),await Promise.all(o),r.Ca.d_(i),await async function(l,c){const u=jt(l);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>Me.forEach(c,y=>Me.forEach(y.$i,p=>u.persistence.referenceDelegate.addReference(g,y.targetId,p)).next(()=>Me.forEach(y.Ui,p=>u.persistence.referenceDelegate.removeReference(g,y.targetId,p)))))}catch(g){if(!sf(g))throw g;ft("LocalStore","Failed to update sequence numbers: "+g)}for(const g of c){const y=g.targetId;if(!g.fromCache){const p=u.os.get(y),b=p.snapshotVersion,N=p.withLastLimboFreeSnapshotVersion(b);u.os=u.os.insert(y,N)}}}(r.localStore,s))}async function FD(t,e){const n=jt(t);if(!n.currentUser.isEqual(e)){ft("SyncEngine","User change. New user:",e.toKey());const r=await xS(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(l=>{l.reject(new Je(je.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await cf(n,r.hs)}}function UD(t,e){const n=jt(t),r=n.Na.get(e);if(r&&r.va)return Yt().add(r.key);{let i=Yt();const s=n.Ma.get(e);if(!s)return i;for(const o of s){const a=n.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}function MS(t){const e=jt(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=LS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=UD.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=jD.bind(null,e),e.Ca.d_=bD.bind(null,e.eventManager),e.Ca.$a=ND.bind(null,e.eventManager),e}function VD(t){const e=jt(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=DD.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=OD.bind(null,e),e}class Sm{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=gg(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return $j(this.persistence,new Hj,e.initialUser,this.serializer)}Ga(e){return new Bj(wv.Zr,this.serializer)}Wa(e){return new Zj}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Sm.provider={build:()=>new Sm};class C2{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>w_(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=FD.bind(null,this.syncEngine),await wD(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new _D}()}createDatastore(e){const n=gg(e.databaseInfo.databaseId),r=function(s){return new rD(s)}(e.databaseInfo);return function(s,o,a,l){return new oD(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new lD(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>w_(this.syncEngine,n,0),function(){return p_.D()?new p_:new eD}())}createSyncEngine(e,n){return function(i,s,o,a,l,c,u){const g=new TD(i,s,o,a,l,c);return u&&(g.Qa=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=jt(i);ft("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await lf(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}C2.provider={build:()=>new C2};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rv{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):ma("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BD{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=di.UNAUTHENTICATED,this.clientId=VN.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{ft("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(ft("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new aa;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Ev(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function P0(t,e){t.asyncQueue.verifyOperationInProgress(),ft("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await xS(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function __(t,e){t.asyncQueue.verifyOperationInProgress();const n=await zD(t);ft("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>m_(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>m_(e.remoteStore,i)),t._onlineComponents=e}async function zD(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ft("FirestoreClient","Using user provided OfflineComponentProvider");try{await P0(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===je.FAILED_PRECONDITION||i.code===je.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Vu("Error using user provided cache. Falling back to memory cache: "+n),await P0(t,new Sm)}}else ft("FirestoreClient","Using default OfflineComponentProvider"),await P0(t,new Sm);return t._offlineComponents}async function FS(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ft("FirestoreClient","Using user provided OnlineComponentProvider"),await __(t,t._uninitializedComponentsProvider._online)):(ft("FirestoreClient","Using default OnlineComponentProvider"),await __(t,new C2))),t._onlineComponents}function qD(t){return FS(t).then(e=>e.syncEngine)}async function Am(t){const e=await FS(t),n=e.eventManager;return n.onListen=ID.bind(null,e.syncEngine),n.onUnlisten=PD.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=kD.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=RD.bind(null,e.syncEngine),n}function HD(t,e,n={}){const r=new aa;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const u=new Rv({next:y=>{u.Za(),o.enqueueAndForget(()=>Iv(s,g));const p=y.docs.has(a);!p&&y.fromCache?c.reject(new Je(je.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&y.fromCache&&l&&l.source==="server"?c.reject(new Je(je.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(y)},error:y=>c.reject(y)}),g=new Cv(cg(a.path),u,{includeMetadataChanges:!0,_a:!0});return Tv(s,g)}(await Am(t),t.asyncQueue,e,n,r)),r.promise}function WD(t,e,n={}){const r=new aa;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const u=new Rv({next:y=>{u.Za(),o.enqueueAndForget(()=>Iv(s,g)),y.fromCache&&l.source==="server"?c.reject(new Je(je.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(y)},error:y=>c.reject(y)}),g=new Cv(a,u,{includeMetadataChanges:!0,_a:!0});return Tv(s,g)}(await Am(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function US(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b_=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VS(t,e,n){if(!n)throw new Je(je.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function $D(t,e,n,r){if(e===!0&&r===!0)throw new Je(je.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function N_(t){if(!_t.isDocumentKey(t))throw new Je(je.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function S_(t){if(_t.isDocumentKey(t))throw new Je(je.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function wg(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":kt()}function Pi(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Je(je.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=wg(t);throw new Je(je.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A_{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Je(je.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Je(je.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}$D("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=US((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Je(je.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Je(je.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Je(je.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class xg{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new A_({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Je(je.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Je(je.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new A_(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new u7;switch(r.type){case"firstParty":return new p7(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Je(je.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=b_.get(n);r&&(ft("ComponentProvider","Removing Datastore"),b_.delete(n),r.terminate())}(this),Promise.resolve()}}function GD(t,e,n,r={}){var i;const s=(t=Pi(t,xg))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Vu("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=di.MOCK_USER;else{a=q6(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new Je(je.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new di(c)}t._authCredentials=new h7(new UN(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pl{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Pl(this.firestore,e,this._query)}}class gi{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new yl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new gi(this.firestore,e,this._key)}}class yl extends Pl{constructor(e,n,r){super(e,n,cg(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new gi(this.firestore,null,new _t(e))}withConverter(e){return new yl(this.firestore,e,this._path)}}function Pt(t,e,...n){if(t=xn(t),VS("collection","path",e),t instanceof xg){const r=Dn.fromString(e,...n);return S_(r),new yl(t,null,r)}{if(!(t instanceof gi||t instanceof yl))throw new Je(je.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Dn.fromString(e,...n));return S_(r),new yl(t.firestore,null,r)}}function Zt(t,e,...n){if(t=xn(t),arguments.length===1&&(e=VN.newId()),VS("doc","path",e),t instanceof xg){const r=Dn.fromString(e,...n);return N_(r),new gi(t,null,new _t(r))}{if(!(t instanceof gi||t instanceof yl))throw new Je(je.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Dn.fromString(e,...n));return N_(r),new gi(t.firestore,t instanceof yl?t.converter:null,new _t(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E_{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new bS(this,"async_queue_retry"),this.Vu=()=>{const r=C0();r&&ft("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=C0();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=C0();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new aa;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!sf(e))throw e;ft("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw ma("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=Av.createAndSchedule(this,e,n,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&kt()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function T_(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class Ro extends xg{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new E_,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new E_(e),this._firestoreClient=void 0,await e}}}function KD(t,e){const n=typeof t=="object"?t:ig(),r=typeof t=="string"?t:"(default)",i=kc(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=V6("firestore");s&&GD(i,...s)}return i}function uf(t){if(t._terminated)throw new Je(je.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||YD(t),t._firestoreClient}function YD(t){var e,n,r;const i=t._freezeSettings(),s=function(a,l,c,u){return new T7(a,l,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,US(u.experimentalLongPollingOptions),u.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new BD(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Gu(ti.fromBase64String(e))}catch(n){throw new Je(je.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Gu(ti.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hf{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Je(je.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Qr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class df{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lv{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Je(je.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Je(je.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return cn(this._lat,e._lat)||cn(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jv{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QD=/^__.*__$/;class XD{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Cl(e,this.data,this.fieldMask,n,this.fieldTransforms):new of(e,this.data,n,this.fieldTransforms)}}class BS{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Cl(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function zS(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw kt()}}class _g{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new _g(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Em(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(zS(this.Cu)&&QD.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class JD{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||gg(e)}Qu(e,n,r,i=!1){return new _g({Cu:e,methodName:n,qu:r,path:Qr.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ff(t){const e=t._freezeSettings(),n=gg(t._databaseId);return new JD(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Dv(t,e,n,r,i,s={}){const o=t.Qu(s.merge||s.mergeFields?2:0,e,n,i);Fv("Data must be an object, but it was:",o,r);const a=WS(r,o);let l,c;if(s.merge)l=new cs(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const u=[];for(const g of s.mergeFields){const y=P2(e,g,n);if(!o.contains(y))throw new Je(je.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);GS(u,y)||u.push(y)}l=new cs(u),c=o.fieldTransforms.filter(g=>l.covers(g.field))}else l=null,c=o.fieldTransforms;return new XD(new Bi(a),l,c)}class bg extends df{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof bg}}function ZD(t,e,n){return new _g({Cu:3,qu:e.settings.qu,methodName:t._methodName,xu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Ov extends df{_toFieldTransform(e){return new aS(e.path,new Vd)}isEqual(e){return e instanceof Ov}}class Mv extends df{constructor(e,n){super(e),this.Ku=n}_toFieldTransform(e){const n=ZD(this,e,!0),r=this.Ku.map(s=>ih(s,n)),i=new Hu(r);return new aS(e.path,i)}isEqual(e){return e instanceof Mv&&Rd(this.Ku,e.Ku)}}function qS(t,e,n,r){const i=t.Qu(1,e,n);Fv("Data must be an object, but it was:",i,r);const s=[],o=Bi.empty();Lc(r,(l,c)=>{const u=Uv(e,l,n);c=xn(c);const g=i.Nu(u);if(c instanceof bg)s.push(u);else{const y=ih(c,g);y!=null&&(s.push(u),o.set(u,y))}});const a=new cs(s);return new BS(o,a,i.fieldTransforms)}function HS(t,e,n,r,i,s){const o=t.Qu(1,e,n),a=[P2(e,r,n)],l=[i];if(s.length%2!=0)throw new Je(je.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let y=0;y<s.length;y+=2)a.push(P2(e,s[y])),l.push(s[y+1]);const c=[],u=Bi.empty();for(let y=a.length-1;y>=0;--y)if(!GS(c,a[y])){const p=a[y];let b=l[y];b=xn(b);const N=o.Nu(p);if(b instanceof bg)c.push(p);else{const C=ih(b,N);C!=null&&(c.push(p),u.set(p,C))}}const g=new cs(c);return new BS(u,g,o.fieldTransforms)}function eO(t,e,n,r=!1){return ih(n,t.Qu(r?4:3,e))}function ih(t,e){if($S(t=xn(t)))return Fv("Unsupported field value:",e,t),WS(t,e);if(t instanceof df)return function(r,i){if(!zS(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=ih(a,i.Lu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=xn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Y7(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=br.fromDate(r);return{timestampValue:bm(i.serializer,s)}}if(r instanceof br){const s=new br(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:bm(i.serializer,s)}}if(r instanceof Lv)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Gu)return{bytesValue:fS(i.serializer,r._byteString)};if(r instanceof gi){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:yv(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof jv)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.Bu("VectorValues must only contain numeric values.");return pv(a.serializer,l)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${wg(r)}`)}(t,e)}function WS(t,e){const n={};return BN(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Lc(t,(r,i)=>{const s=ih(i,e.Mu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function $S(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof br||t instanceof Lv||t instanceof Gu||t instanceof gi||t instanceof df||t instanceof jv)}function Fv(t,e,n){if(!$S(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=wg(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function P2(t,e,n){if((e=xn(e))instanceof hf)return e._internalPath;if(typeof e=="string")return Uv(t,e);throw Em("Field path arguments must be of type string or ",t,!1,void 0,n)}const tO=new RegExp("[~\\*/\\[\\]]");function Uv(t,e,n){if(e.search(tO)>=0)throw Em(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new hf(...e.split("."))._internalPath}catch{throw Em(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Em(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new Je(je.INVALID_ARGUMENT,a+t+l)}function GS(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KS{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new gi(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new nO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Ng("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class nO extends KS{data(){return super.data()}}function Ng(t,e){return typeof e=="string"?Uv(t,e):e instanceof hf?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YS(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Je(je.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Vv{}class QS extends Vv{}function vc(t,e,...n){let r=[];e instanceof Vv&&r.push(e),r=r.concat(n),function(s){const o=s.filter(l=>l instanceof Bv).length,a=s.filter(l=>l instanceof Sg).length;if(o>1||o>0&&a>0)throw new Je(je.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class Sg extends QS{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Sg(e,n,r)}_apply(e){const n=this._parse(e);return XS(e._query,n),new Pl(e.firestore,e.converter,_2(e._query,n))}_parse(e){const n=ff(e.firestore);return function(s,o,a,l,c,u,g){let y;if(c.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new Je(je.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){k_(g,u);const p=[];for(const b of g)p.push(I_(l,s,b));y={arrayValue:{values:p}}}else y=I_(l,s,g)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||k_(g,u),y=eO(a,o,g,u==="in"||u==="not-in");return _r.create(c,u,y)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function zd(t,e,n){const r=e,i=Ng("where",t);return Sg._create(i,r,n)}class Bv extends Vv{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Bv(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:to.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)XS(o,l),o=_2(o,l)}(e._query,n),new Pl(e.firestore,e.converter,_2(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class zv extends QS{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new zv(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new Je(je.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new Je(je.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ud(s,o)}(e._query,this._field,this._direction);return new Pl(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new th(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function qv(t,e="asc"){const n=e,r=Ng("orderBy",t);return zv._create(r,n)}function I_(t,e,n){if(typeof(n=xn(n))=="string"){if(n==="")throw new Je(je.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!QN(e)&&n.indexOf("/")!==-1)throw new Je(je.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Dn.fromString(n));if(!_t.isDocumentKey(r))throw new Je(je.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Yx(t,new _t(r))}if(n instanceof gi)return Yx(t,n._key);throw new Je(je.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${wg(n)}.`)}function k_(t,e){if(!Array.isArray(t)||t.length===0)throw new Je(je.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function XS(t,e){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Je(je.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Je(je.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class rO{convertValue(e,n="none"){switch(yc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return dr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(gc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw kt()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Lc(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>dr(o.doubleValue));return new jv(s)}convertGeoPoint(e){return new Lv(dr(e.latitude),dr(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=uv(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Od(e));default:return null}}convertTimestamp(e){const n=_l(e);return new br(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Dn.fromString(e);wn(wS(r));const i=new Md(r.get(1),r.get(3)),s=new _t(r.popFirst(5));return i.isEqual(n)||ma(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hv(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kh{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class JS extends KS{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new jp(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Ng("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class jp extends JS{data(e={}){return super.data(e)}}class ZS{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Kh(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new jp(this._firestore,this._userDataWriter,r.key,r,new Kh(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Je(je.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new jp(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Kh(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new jp(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Kh(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,u=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),u=o.indexOf(a.doc.key)),{type:iO(a.type),doc:l,oldIndex:c,newIndex:u}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function iO(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return kt()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xs(t){t=Pi(t,gi);const e=Pi(t.firestore,Ro);return HD(uf(e),t._key).then(n=>tA(e,t,n))}class Wv extends rO{constructor(e){super(),this.firestore=e}convertBytes(e){return new Gu(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new gi(this.firestore,null,n)}}function Bn(t){t=Pi(t,Pl);const e=Pi(t.firestore,Ro),n=uf(e),r=new Wv(e);return YS(t._query),WD(n,t._query).then(i=>new ZS(e,r,t,i))}function $v(t,e,n){t=Pi(t,gi);const r=Pi(t.firestore,Ro),i=Hv(t.converter,e,n);return pf(r,[Dv(ff(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Ci.none())])}function Xr(t,e,n,...r){t=Pi(t,gi);const i=Pi(t.firestore,Ro),s=ff(i);let o;return o=typeof(e=xn(e))=="string"||e instanceof hf?HS(s,"updateDoc",t._key,e,n,r):qS(s,"updateDoc",t._key,e),pf(i,[o.toMutation(t._key,Ci.exists(!0))])}function eA(t){return pf(Pi(t.firestore,Ro),[new pg(t._key,Ci.none())])}function fi(t,e){const n=Pi(t.firestore,Ro),r=Zt(t),i=Hv(t.converter,e);return pf(n,[Dv(ff(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Ci.exists(!1))]).then(()=>r)}function Tm(t,...e){var n,r,i;t=xn(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||T_(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(T_(e[o])){const g=e[o];e[o]=(n=g.next)===null||n===void 0?void 0:n.bind(g),e[o+1]=(r=g.error)===null||r===void 0?void 0:r.bind(g),e[o+2]=(i=g.complete)===null||i===void 0?void 0:i.bind(g)}let l,c,u;if(t instanceof gi)c=Pi(t.firestore,Ro),u=cg(t._key.path),l={next:g=>{e[o]&&e[o](tA(c,t,g))},error:e[o+1],complete:e[o+2]};else{const g=Pi(t,Pl);c=Pi(g.firestore,Ro),u=g._query;const y=new Wv(c);l={next:p=>{e[o]&&e[o](new ZS(c,y,g,p))},error:e[o+1],complete:e[o+2]},YS(t._query)}return function(y,p,b,N){const C=new Rv(N),_=new Cv(p,C,b);return y.asyncQueue.enqueueAndForget(async()=>Tv(await Am(y),_)),()=>{C.Za(),y.asyncQueue.enqueueAndForget(async()=>Iv(await Am(y),_))}}(uf(c),u,a,l)}function pf(t,e){return function(r,i){const s=new aa;return r.asyncQueue.enqueueAndForget(async()=>LD(await qD(r),i,s)),s.promise}(uf(t),e)}function tA(t,e,n){const r=n.docs.get(e._key),i=new Wv(t);return new JS(t,i,e._key,r,new Kh(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sO{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=ff(e)}set(e,n,r){this._verifyNotCommitted();const i=R0(e,this._firestore),s=Hv(i.converter,n,r),o=Dv(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,Ci.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const s=R0(e,this._firestore);let o;return o=typeof(n=xn(n))=="string"||n instanceof hf?HS(this._dataReader,"WriteBatch.update",s._key,n,r,i):qS(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,Ci.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=R0(e,this._firestore);return this._mutations=this._mutations.concat(new pg(n._key,Ci.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Je(je.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function R0(t,e){if((t=xn(t)).firestore!==e)throw new Je(je.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function xo(){return new Ov("serverTimestamp")}function oO(...t){return new Mv("arrayUnion",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nA(t){return uf(t=Pi(t,Ro)),new sO(t,e=>pf(t,e))}(function(e,n=!0){(function(i){eh=i})(Cc),Zs(new Ds("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new Ro(new d7(r.getProvider("auth-internal")),new g7(r.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new Je(je.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Md(c.options.projectId,u)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),$i(Hx,"4.7.3",e),$i(Hx,"4.7.3","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rA="firebasestorage.googleapis.com",iA="storageBucket",aO=2*60*1e3,lO=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ar extends ro{constructor(e,n,r=0){super(L0(e),`Firebase Storage: ${n} (${L0(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ar.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return L0(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var or;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(or||(or={}));function L0(t){return"storage/"+t}function Gv(){const t="An unknown error occurred, please check the error payload for server response.";return new ar(or.UNKNOWN,t)}function cO(t){return new ar(or.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function uO(t){return new ar(or.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function hO(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new ar(or.UNAUTHENTICATED,t)}function dO(){return new ar(or.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function fO(t){return new ar(or.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function pO(){return new ar(or.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function mO(){return new ar(or.CANCELED,"User canceled the upload/download.")}function gO(t){return new ar(or.INVALID_URL,"Invalid URL '"+t+"'.")}function yO(t){return new ar(or.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function vO(){return new ar(or.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+iA+"' property when initializing the app?")}function wO(){return new ar(or.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function xO(){return new ar(or.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function _O(t){return new ar(or.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function R2(t){return new ar(or.INVALID_ARGUMENT,t)}function sA(){return new ar(or.APP_DELETED,"The Firebase app was deleted.")}function bO(t){return new ar(or.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function cd(t,e){return new ar(or.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Oh(t){throw new ar(or.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=us.makeFromUrl(e,n)}catch{return new us(e,"")}if(r.path==="")return r;throw yO(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(D){D.path.charAt(D.path.length-1)==="/"&&(D.path_=D.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),l={bucket:1,path:3};function c(D){D.path_=decodeURIComponent(D.path)}const u="v[A-Za-z0-9_]+",g=n.replace(/[.]/g,"\\."),y="(/([^?#]*).*)?$",p=new RegExp(`^https?://${g}/${u}/b/${i}/o${y}`,"i"),b={bucket:1,path:3},N=n===rA?"(?:storage.googleapis.com|storage.cloud.google.com)":n,C="([^?#]*)",_=new RegExp(`^https?://${N}/${i}/${C}`,"i"),L=[{regex:a,indices:l,postModify:s},{regex:p,indices:b,postModify:c},{regex:_,indices:{bucket:1,path:2},postModify:c}];for(let D=0;D<L.length;D++){const z=L[D],X=z.regex.exec(e);if(X){const j=X[z.indices.bucket];let S=X[z.indices.path];S||(S=""),r=new us(j,S),z.postModify(r);break}}if(r==null)throw gO(e);return r}}class NO{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SO(t,e,n){let r=1,i=null,s=null,o=!1,a=0;function l(){return a===2}let c=!1;function u(...C){c||(c=!0,e.apply(null,C))}function g(C){i=setTimeout(()=>{i=null,t(p,l())},C)}function y(){s&&clearTimeout(s)}function p(C,..._){if(c){y();return}if(C){y(),u.call(null,C,..._);return}if(l()||o){y(),u.call(null,C,..._);return}r<64&&(r*=2);let L;a===1?(a=2,L=0):L=(r+Math.random())*1e3,g(L)}let b=!1;function N(C){b||(b=!0,y(),!c&&(i!==null?(C||(a=2),clearTimeout(i),g(0)):C||(a=1)))}return g(0),s=setTimeout(()=>{o=!0,N(!0)},n),N}function AO(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EO(t){return t!==void 0}function TO(t){return typeof t=="object"&&!Array.isArray(t)}function Kv(t){return typeof t=="string"||t instanceof String}function C_(t){return Yv()&&t instanceof Blob}function Yv(){return typeof Blob<"u"}function P_(t,e,n,r){if(r<e)throw R2(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw R2(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qv(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function oA(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var oc;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(oc||(oc={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IO(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kO{constructor(e,n,r,i,s,o,a,l,c,u,g,y=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=u,this.connectionFactory_=g,this.retry=y,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((p,b)=>{this.resolve_=p,this.reject_=b,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new rp(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===oc.NO_ERROR,l=s.getStatus();if(!a||IO(l,this.additionalRetryCodes_)&&this.retry){const u=s.getErrorCode()===oc.ABORT;r(!1,new rp(!1,null,u));return}const c=this.successCodes_.indexOf(l)!==-1;r(!0,new rp(c,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());EO(l)?s(l):s()}catch(l){o(l)}else if(a!==null){const l=Gv();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(i.canceled){const l=this.appDelete_?sA():mO();o(l)}else{const l=pO();o(l)}};this.canceled_?n(!1,new rp(!1,null,!0)):this.backoffId_=SO(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&AO(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class rp{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function CO(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function PO(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function RO(t,e){e&&(t["X-Firebase-GMPID"]=e)}function LO(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function jO(t,e,n,r,i,s,o=!0){const a=oA(t.urlParams),l=t.url+a,c=Object.assign({},t.headers);return RO(c,e),CO(c,n),PO(c,s),LO(c,r),new kO(l,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DO(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function OO(...t){const e=DO();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(Yv())return new Blob(t);throw new ar(or.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function MO(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FO(t){if(typeof atob>"u")throw _O("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const No={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class j0{constructor(e,n){this.data=e,this.contentType=n||null}}function UO(t,e){switch(t){case No.RAW:return new j0(aA(e));case No.BASE64:case No.BASE64URL:return new j0(lA(t,e));case No.DATA_URL:return new j0(BO(e),zO(e))}throw Gv()}function aA(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const s=r,o=t.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function VO(t){let e;try{e=decodeURIComponent(t)}catch{throw cd(No.DATA_URL,"Malformed data URL.")}return aA(e)}function lA(t,e){switch(t){case No.BASE64:{const i=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(i||s)throw cd(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case No.BASE64URL:{const i=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(i||s)throw cd(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=FO(e)}catch(i){throw i.message.includes("polyfill")?i:cd(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class cA{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw cd(No.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=qO(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function BO(t){const e=new cA(t);return e.base64?lA(No.BASE64,e.rest):VO(e.rest)}function zO(t){return new cA(t).contentType}function qO(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class el{constructor(e,n){let r=0,i="";C_(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(C_(this.data_)){const r=this.data_,i=MO(r,e,n);return i===null?null:new el(i)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new el(r,!0)}}static getBlob(...e){if(Yv()){const n=e.map(r=>r instanceof el?r.data_:r);return new el(OO.apply(null,n))}else{const n=e.map(o=>Kv(o)?UO(No.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new el(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uA(t){let e;try{e=JSON.parse(t)}catch{return null}return TO(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HO(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function WO(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function hA(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $O(t,e){return e}class Ei{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||$O}}let ip=null;function GO(t){return!Kv(t)||t.length<2?t:hA(t)}function dA(){if(ip)return ip;const t=[];t.push(new Ei("bucket")),t.push(new Ei("generation")),t.push(new Ei("metageneration")),t.push(new Ei("name","fullPath",!0));function e(s,o){return GO(o)}const n=new Ei("name");n.xform=e,t.push(n);function r(s,o){return o!==void 0?Number(o):o}const i=new Ei("size");return i.xform=r,t.push(i),t.push(new Ei("timeCreated")),t.push(new Ei("updated")),t.push(new Ei("md5Hash",null,!0)),t.push(new Ei("cacheControl",null,!0)),t.push(new Ei("contentDisposition",null,!0)),t.push(new Ei("contentEncoding",null,!0)),t.push(new Ei("contentLanguage",null,!0)),t.push(new Ei("contentType",null,!0)),t.push(new Ei("metadata","customMetadata",!0)),ip=t,ip}function KO(t,e){function n(){const r=t.bucket,i=t.fullPath,s=new us(r,i);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:n})}function YO(t,e,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const o=n[s];r[o.local]=o.xform(r,e[o.server])}return KO(r,t),r}function fA(t,e,n){const r=uA(e);return r===null?null:YO(t,r,n)}function QO(t,e,n,r){const i=uA(e);if(i===null||!Kv(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(c=>{const u=t.bucket,g=t.fullPath,y="/b/"+o(u)+"/o/"+o(g),p=Qv(y,n,r),b=oA({alt:"media",token:c});return p+b})[0]}function XO(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(n[s.server]=t[s.local])}return JSON.stringify(n)}class pA{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mA(t){if(!t)throw Gv()}function JO(t,e){function n(r,i){const s=fA(t,i,e);return mA(s!==null),s}return n}function ZO(t,e){function n(r,i){const s=fA(t,i,e);return mA(s!==null),QO(s,i,t.host,t._protocol)}return n}function gA(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=dO():i=hO():n.getStatus()===402?i=uO(t.bucket):n.getStatus()===403?i=fO(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function e9(t){const e=gA(t);function n(r,i){let s=e(r,i);return r.getStatus()===404&&(s=cO(t.path)),s.serverResponse=i.serverResponse,s}return n}function t9(t,e,n){const r=e.fullServerUrl(),i=Qv(r,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,a=new pA(i,s,ZO(t,n),o);return a.errorHandler=e9(e),a}function n9(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function r9(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=n9(null,e)),r}function i9(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let L="";for(let D=0;D<2;D++)L=L+Math.random().toString().slice(2);return L}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const c=r9(e,r,i),u=XO(c,n),g="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+u+`\r
--`+l+`\r
Content-Type: `+c.contentType+`\r
\r
`,y=`\r
--`+l+"--",p=el.getBlob(g,r,y);if(p===null)throw wO();const b={name:c.fullPath},N=Qv(s,t.host,t._protocol),C="POST",_=t.maxUploadRetryTime,k=new pA(N,C,JO(t,n),_);return k.urlParams=b,k.headers=o,k.body=p.uploadData(),k.errorHandler=gA(e),k}class s9{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=oc.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=oc.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=oc.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i){if(this.sent_)throw Oh("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Oh("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Oh("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Oh("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Oh("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class o9 extends s9{initXhr(){this.xhr_.responseType="text"}}function yA(){return new o9}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wc{constructor(e,n){this._service=e,n instanceof us?this._location=n:this._location=us.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new wc(e,n)}get root(){const e=new us(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return hA(this._location.path)}get storage(){return this._service}get parent(){const e=HO(this._location.path);if(e===null)return null;const n=new us(this._location.bucket,e);return new wc(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw bO(e)}}function a9(t,e,n){t._throwIfRoot("uploadBytes");const r=i9(t.storage,t._location,dA(),new el(e,!0),n);return t.storage.makeRequestWithTokens(r,yA).then(i=>({metadata:i,ref:t}))}function l9(t){t._throwIfRoot("getDownloadURL");const e=t9(t.storage,t._location,dA());return t.storage.makeRequestWithTokens(e,yA).then(n=>{if(n===null)throw xO();return n})}function c9(t,e){const n=WO(t._location.path,e),r=new us(t._location.bucket,n);return new wc(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u9(t){return/^[A-Za-z]+:\/\//.test(t)}function h9(t,e){return new wc(t,e)}function vA(t,e){if(t instanceof Xv){const n=t;if(n._bucket==null)throw vO();const r=new wc(n,n._bucket);return e!=null?vA(r,e):r}else return e!==void 0?c9(t,e):t}function d9(t,e){if(e&&u9(e)){if(t instanceof Xv)return h9(t,e);throw R2("To use ref(service, url), the first argument must be a Storage instance.")}else return vA(t,e)}function R_(t,e){const n=e==null?void 0:e[iA];return n==null?null:us.makeFromBucketSpec(n,t)}function f9(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:q6(i,t.app.options.projectId))}class Xv{constructor(e,n,r,i,s){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=rA,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=aO,this._maxUploadRetryTime=lO,this._requests=new Set,i!=null?this._bucket=us.makeFromBucketSpec(i,this._host):this._bucket=R_(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=us.makeFromBucketSpec(this._url,e):this._bucket=R_(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){P_("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){P_("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new wc(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new NO(sA());{const o=jO(e,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const L_="@firebase/storage",j_="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wA="storage";function p9(t,e,n){return t=xn(t),a9(t,e,n)}function m9(t){return t=xn(t),l9(t)}function g9(t,e){return t=xn(t),d9(t,e)}function xA(t=ig(),e){t=xn(t);const r=kc(t,wA).getImmediate({identifier:e}),i=V6("storage");return i&&y9(r,...i),r}function y9(t,e,n,r={}){f9(t,e,n,r)}function v9(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new Xv(n,r,i,e,Cc)}function w9(){Zs(new Ds(wA,v9,"PUBLIC").setMultipleInstances(!0)),$i(L_,j_,""),$i(L_,j_,"esm2017")}w9();const _A="@firebase/installations",Jv="0.6.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bA=1e4,NA=`w:${Jv}`,SA="FIS_v2",x9="https://firebaseinstallations.googleapis.com/v1",_9=60*60*1e3,b9="installations",N9="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S9={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},xc=new Ic(b9,N9,S9);function AA(t){return t instanceof ro&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EA({projectId:t}){return`${x9}/projects/${t}/installations`}function TA(t){return{token:t.token,requestStatus:2,expiresIn:E9(t.expiresIn),creationTime:Date.now()}}async function IA(t,e){const r=(await e.json()).error;return xc.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function kA({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function A9(t,{refreshToken:e}){const n=kA(t);return n.append("Authorization",T9(e)),n}async function CA(t){const e=await t();return e.status>=500&&e.status<600?t():e}function E9(t){return Number(t.replace("s","000"))}function T9(t){return`${SA} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function I9({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=EA(t),i=kA(t),s=e.getImmediate({optional:!0});if(s){const c=await s.getHeartbeatsHeader();c&&i.append("x-firebase-client",c)}const o={fid:n,authVersion:SA,appId:t.appId,sdkVersion:NA},a={method:"POST",headers:i,body:JSON.stringify(o)},l=await CA(()=>fetch(r,a));if(l.ok){const c=await l.json();return{fid:c.fid||n,registrationStatus:2,refreshToken:c.refreshToken,authToken:TA(c.authToken)}}else throw await IA("Create Installation",l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PA(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k9(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C9=/^[cdef][\w-]{21}$/,L2="";function P9(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=R9(t);return C9.test(n)?n:L2}catch{return L2}}function R9(t){return k9(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ag(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RA=new Map;function LA(t,e){const n=Ag(t);jA(n,e),L9(n,e)}function jA(t,e){const n=RA.get(t);if(n)for(const r of n)r(e)}function L9(t,e){const n=j9();n&&n.postMessage({key:t,fid:e}),D9()}let nc=null;function j9(){return!nc&&"BroadcastChannel"in self&&(nc=new BroadcastChannel("[Firebase] FID Change"),nc.onmessage=t=>{jA(t.data.key,t.data.fid)}),nc}function D9(){RA.size===0&&nc&&(nc.close(),nc=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O9="firebase-installations-database",M9=1,_c="firebase-installations-store";let D0=null;function Zv(){return D0||(D0=rg(O9,M9,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(_c)}}})),D0}async function Im(t,e){const n=Ag(t),i=(await Zv()).transaction(_c,"readwrite"),s=i.objectStore(_c),o=await s.get(n);return await s.put(e,n),await i.done,(!o||o.fid!==e.fid)&&LA(t,e.fid),e}async function DA(t){const e=Ag(t),r=(await Zv()).transaction(_c,"readwrite");await r.objectStore(_c).delete(e),await r.done}async function Eg(t,e){const n=Ag(t),i=(await Zv()).transaction(_c,"readwrite"),s=i.objectStore(_c),o=await s.get(n),a=e(o);return a===void 0?await s.delete(n):await s.put(a,n),await i.done,a&&(!o||o.fid!==a.fid)&&LA(t,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function e5(t){let e;const n=await Eg(t.appConfig,r=>{const i=F9(r),s=U9(t,i);return e=s.registrationPromise,s.installationEntry});return n.fid===L2?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function F9(t){const e=t||{fid:P9(),registrationStatus:0};return OA(e)}function U9(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(xc.create("app-offline"));return{installationEntry:e,registrationPromise:i}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=V9(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:B9(t)}:{installationEntry:e}}async function V9(t,e){try{const n=await I9(t,e);return Im(t.appConfig,n)}catch(n){throw AA(n)&&n.customData.serverCode===409?await DA(t.appConfig):await Im(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function B9(t){let e=await D_(t.appConfig);for(;e.registrationStatus===1;)await PA(100),e=await D_(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await e5(t);return r||n}return e}function D_(t){return Eg(t,e=>{if(!e)throw xc.create("installation-not-found");return OA(e)})}function OA(t){return z9(t)?{fid:t.fid,registrationStatus:0}:t}function z9(t){return t.registrationStatus===1&&t.registrationTime+bA<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function q9({appConfig:t,heartbeatServiceProvider:e},n){const r=H9(t,n),i=A9(t,n),s=e.getImmediate({optional:!0});if(s){const c=await s.getHeartbeatsHeader();c&&i.append("x-firebase-client",c)}const o={installation:{sdkVersion:NA,appId:t.appId}},a={method:"POST",headers:i,body:JSON.stringify(o)},l=await CA(()=>fetch(r,a));if(l.ok){const c=await l.json();return TA(c)}else throw await IA("Generate Auth Token",l)}function H9(t,{fid:e}){return`${EA(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function t5(t,e=!1){let n;const r=await Eg(t.appConfig,s=>{if(!MA(s))throw xc.create("not-registered");const o=s.authToken;if(!e&&G9(o))return s;if(o.requestStatus===1)return n=W9(t,e),s;{if(!navigator.onLine)throw xc.create("app-offline");const a=Y9(s);return n=$9(t,a),a}});return n?await n:r.authToken}async function W9(t,e){let n=await O_(t.appConfig);for(;n.authToken.requestStatus===1;)await PA(100),n=await O_(t.appConfig);const r=n.authToken;return r.requestStatus===0?t5(t,e):r}function O_(t){return Eg(t,e=>{if(!MA(e))throw xc.create("not-registered");const n=e.authToken;return Q9(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function $9(t,e){try{const n=await q9(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return await Im(t.appConfig,r),n}catch(n){if(AA(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await DA(t.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await Im(t.appConfig,r)}throw n}}function MA(t){return t!==void 0&&t.registrationStatus===2}function G9(t){return t.requestStatus===2&&!K9(t)}function K9(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+_9}function Y9(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function Q9(t){return t.requestStatus===1&&t.requestTime+bA<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function X9(t){const e=t,{installationEntry:n,registrationPromise:r}=await e5(e);return r?r.catch(console.error):t5(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function J9(t,e=!1){const n=t;return await Z9(n),(await t5(n,e)).token}async function Z9(t){const{registrationPromise:e}=await e5(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eM(t){if(!t||!t.options)throw O0("App Configuration");if(!t.name)throw O0("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw O0(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function O0(t){return xc.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FA="installations",tM="installations-internal",nM=t=>{const e=t.getProvider("app").getImmediate(),n=eM(e),r=kc(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},rM=t=>{const e=t.getProvider("app").getImmediate(),n=kc(e,FA).getImmediate();return{getId:()=>X9(n),getToken:i=>J9(n,i)}};function iM(){Zs(new Ds(FA,nM,"PUBLIC")),Zs(new Ds(tM,rM,"PRIVATE"))}iM();$i(_A,Jv);$i(_A,Jv,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sM="/firebase-messaging-sw.js",oM="/firebase-cloud-messaging-push-scope",UA="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",aM="https://fcmregistrations.googleapis.com/v1",VA="google.c.a.c_id",lM="google.c.a.c_l",cM="google.c.a.ts",uM="google.c.a.e";var M_;(function(t){t[t.DATA_MESSAGE=1]="DATA_MESSAGE",t[t.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"})(M_||(M_={}));/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License. You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under the License
 * is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
 * or implied. See the License for the specific language governing permissions and limitations under
 * the License.
 */var qd;(function(t){t.PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked"})(qd||(qd={}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yo(t){const e=new Uint8Array(t);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function hM(t){const e="=".repeat((4-t.length%4)%4),n=(t+e).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(n),i=new Uint8Array(r.length);for(let s=0;s<r.length;++s)i[s]=r.charCodeAt(s);return i}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M0="fcm_token_details_db",dM=5,F_="fcm_token_object_Store";async function fM(t){if("databases"in indexedDB&&!(await indexedDB.databases()).map(s=>s.name).includes(M0))return null;let e=null;return(await rg(M0,dM,{upgrade:async(r,i,s,o)=>{var a;if(i<2||!r.objectStoreNames.contains(F_))return;const l=o.objectStore(F_),c=await l.index("fcmSenderId").get(t);if(await l.clear(),!!c){if(i===2){const u=c;if(!u.auth||!u.p256dh||!u.endpoint)return;e={token:u.fcmToken,createTime:(a=u.createTime)!==null&&a!==void 0?a:Date.now(),subscriptionOptions:{auth:u.auth,p256dh:u.p256dh,endpoint:u.endpoint,swScope:u.swScope,vapidKey:typeof u.vapidKey=="string"?u.vapidKey:Yo(u.vapidKey)}}}else if(i===3){const u=c;e={token:u.fcmToken,createTime:u.createTime,subscriptionOptions:{auth:Yo(u.auth),p256dh:Yo(u.p256dh),endpoint:u.endpoint,swScope:u.swScope,vapidKey:Yo(u.vapidKey)}}}else if(i===4){const u=c;e={token:u.fcmToken,createTime:u.createTime,subscriptionOptions:{auth:Yo(u.auth),p256dh:Yo(u.p256dh),endpoint:u.endpoint,swScope:u.swScope,vapidKey:Yo(u.vapidKey)}}}}}})).close(),await N0(M0),await N0("fcm_vapid_details_db"),await N0("undefined"),pM(e)?e:null}function pM(t){if(!t||!t.subscriptionOptions)return!1;const{subscriptionOptions:e}=t;return typeof t.createTime=="number"&&t.createTime>0&&typeof t.token=="string"&&t.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mM="firebase-messaging-database",gM=1,Hd="firebase-messaging-store";let F0=null;function BA(){return F0||(F0=rg(mM,gM,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Hd)}}})),F0}async function yM(t){const e=zA(t),r=await(await BA()).transaction(Hd).objectStore(Hd).get(e);if(r)return r;{const i=await fM(t.appConfig.senderId);if(i)return await n5(t,i),i}}async function n5(t,e){const n=zA(t),i=(await BA()).transaction(Hd,"readwrite");return await i.objectStore(Hd).put(e,n),await i.done,e}function zA({appConfig:t}){return t.appId}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vM={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},yi=new Ic("messaging","Messaging",vM);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wM(t,e){const n=await i5(t),r=qA(e),i={method:"POST",headers:n,body:JSON.stringify(r)};let s;try{s=await(await fetch(r5(t.appConfig),i)).json()}catch(o){throw yi.create("token-subscribe-failed",{errorInfo:o==null?void 0:o.toString()})}if(s.error){const o=s.error.message;throw yi.create("token-subscribe-failed",{errorInfo:o})}if(!s.token)throw yi.create("token-subscribe-no-token");return s.token}async function xM(t,e){const n=await i5(t),r=qA(e.subscriptionOptions),i={method:"PATCH",headers:n,body:JSON.stringify(r)};let s;try{s=await(await fetch(`${r5(t.appConfig)}/${e.token}`,i)).json()}catch(o){throw yi.create("token-update-failed",{errorInfo:o==null?void 0:o.toString()})}if(s.error){const o=s.error.message;throw yi.create("token-update-failed",{errorInfo:o})}if(!s.token)throw yi.create("token-update-no-token");return s.token}async function _M(t,e){const r={method:"DELETE",headers:await i5(t)};try{const s=await(await fetch(`${r5(t.appConfig)}/${e}`,r)).json();if(s.error){const o=s.error.message;throw yi.create("token-unsubscribe-failed",{errorInfo:o})}}catch(i){throw yi.create("token-unsubscribe-failed",{errorInfo:i==null?void 0:i.toString()})}}function r5({projectId:t}){return`${aM}/projects/${t}/registrations`}async function i5({appConfig:t,installations:e}){const n=await e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":`FIS ${n}`})}function qA({p256dh:t,auth:e,endpoint:n,vapidKey:r}){const i={web:{endpoint:n,auth:e,p256dh:t}};return r!==UA&&(i.web.applicationPubKey=r),i}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bM=7*24*60*60*1e3;async function NM(t){const e=await AM(t.swRegistration,t.vapidKey),n={vapidKey:t.vapidKey,swScope:t.swRegistration.scope,endpoint:e.endpoint,auth:Yo(e.getKey("auth")),p256dh:Yo(e.getKey("p256dh"))},r=await yM(t.firebaseDependencies);if(r){if(EM(r.subscriptionOptions,n))return Date.now()>=r.createTime+bM?SM(t,{token:r.token,createTime:Date.now(),subscriptionOptions:n}):r.token;try{await _M(t.firebaseDependencies,r.token)}catch(i){console.warn(i)}return U_(t.firebaseDependencies,n)}else return U_(t.firebaseDependencies,n)}async function SM(t,e){try{const n=await xM(t.firebaseDependencies,e),r=Object.assign(Object.assign({},e),{token:n,createTime:Date.now()});return await n5(t.firebaseDependencies,r),n}catch(n){throw n}}async function U_(t,e){const r={token:await wM(t,e),createTime:Date.now(),subscriptionOptions:e};return await n5(t,r),r.token}async function AM(t,e){const n=await t.pushManager.getSubscription();return n||t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:hM(e)})}function EM(t,e){const n=e.vapidKey===t.vapidKey,r=e.endpoint===t.endpoint,i=e.auth===t.auth,s=e.p256dh===t.p256dh;return n&&r&&i&&s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V_(t){const e={from:t.from,collapseKey:t.collapse_key,messageId:t.fcmMessageId};return TM(e,t),IM(e,t),kM(e,t),e}function TM(t,e){if(!e.notification)return;t.notification={};const n=e.notification.title;n&&(t.notification.title=n);const r=e.notification.body;r&&(t.notification.body=r);const i=e.notification.image;i&&(t.notification.image=i);const s=e.notification.icon;s&&(t.notification.icon=s)}function IM(t,e){e.data&&(t.data=e.data)}function kM(t,e){var n,r,i,s,o;if(!e.fcmOptions&&!(!((n=e.notification)===null||n===void 0)&&n.click_action))return;t.fcmOptions={};const a=(i=(r=e.fcmOptions)===null||r===void 0?void 0:r.link)!==null&&i!==void 0?i:(s=e.notification)===null||s===void 0?void 0:s.click_action;a&&(t.fcmOptions.link=a);const l=(o=e.fcmOptions)===null||o===void 0?void 0:o.analytics_label;l&&(t.fcmOptions.analyticsLabel=l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CM(t){return typeof t=="object"&&!!t&&VA in t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PM(t){if(!t||!t.options)throw U0("App Configuration Object");if(!t.name)throw U0("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:n}=t;for(const r of e)if(!n[r])throw U0(r);return{appName:t.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}function U0(t){return yi.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RM{constructor(e,n,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const i=PM(e);this.firebaseDependencies={app:e,appConfig:i,installations:n,analyticsProvider:r}}_delete(){return Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LM(t){try{t.swRegistration=await navigator.serviceWorker.register(sM,{scope:oM}),t.swRegistration.update().catch(()=>{})}catch(e){throw yi.create("failed-service-worker-registration",{browserErrorMessage:e==null?void 0:e.message})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jM(t,e){if(!e&&!t.swRegistration&&await LM(t),!(!e&&t.swRegistration)){if(!(e instanceof ServiceWorkerRegistration))throw yi.create("invalid-sw-registration");t.swRegistration=e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DM(t,e){e?t.vapidKey=e:t.vapidKey||(t.vapidKey=UA)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HA(t,e){if(!navigator)throw yi.create("only-available-in-window");if(Notification.permission==="default"&&await Notification.requestPermission(),Notification.permission!=="granted")throw yi.create("permission-blocked");return await DM(t,e==null?void 0:e.vapidKey),await jM(t,e==null?void 0:e.serviceWorkerRegistration),NM(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OM(t,e,n){const r=MM(e);(await t.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:n[VA],message_name:n[lM],message_time:n[cM],message_device_time:Math.floor(Date.now()/1e3)})}function MM(t){switch(t){case qd.NOTIFICATION_CLICKED:return"notification_open";case qd.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FM(t,e){const n=e.data;if(!n.isFirebaseMessaging)return;t.onMessageHandler&&n.messageType===qd.PUSH_RECEIVED&&(typeof t.onMessageHandler=="function"?t.onMessageHandler(V_(n)):t.onMessageHandler.next(V_(n)));const r=n.data;CM(r)&&r[uM]==="1"&&await OM(t,n.messageType,r)}const B_="@firebase/messaging",z_="0.12.12";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UM=t=>{const e=new RM(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),t.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",n=>FM(e,n)),e},VM=t=>{const e=t.getProvider("messaging").getImmediate();return{getToken:r=>HA(e,r)}};function BM(){Zs(new Ds("messaging",UM,"PUBLIC")),Zs(new Ds("messaging-internal",VM,"PRIVATE")),$i(B_,z_),$i(B_,z_,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zM(){try{await W6()}catch{return!1}return typeof window<"u"&&H6()&&DC()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qM(t,e){if(!navigator)throw yi.create("only-available-in-window");return t.onMessageHandler=e,()=>{t.onMessageHandler=null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HM(t=ig()){return zM().then(e=>{if(!e)throw yi.create("unsupported-browser")},e=>{throw yi.create("indexed-db-unsupported")}),kc(xn(t),"messaging").getImmediate()}async function WA(t,e){return t=xn(t),HA(t,e)}function WM(t,e){return t=xn(t),qM(t,e)}BM();const $M={apiKey:"AIzaSyCKPrE1B2ikGlnr6PmTq4JVLlBDlOe50Co",authDomain:"tmv1-7fc4f.firebaseapp.com",projectId:"tmv1-7fc4f",storageBucket:"tmv1-7fc4f.firebasestorage.app",messagingSenderId:"377085834114",appId:"1:377085834114:web:aeb2ca19e51abe8fc5959b",measurementId:"G-8J8CDN3QFF"},Tg=K6($M),Ii=o7(Tg),qe=KD(Tg);xA(Tg);const j2=HM(Tg),GM=30;function KM(){const t=ji();se.useEffect(()=>{const e=GM*60*1e3;let n;const r=()=>{n&&clearTimeout(n),n=setTimeout(async()=>{try{await bN(Ii)}catch(s){console.error("Auto logout failed",s)}t("/")},e)},i=["click","mousemove","keydown","touchstart"];return i.forEach(s=>window.addEventListener(s,r,!0)),r(),()=>{n&&clearTimeout(n),i.forEach(s=>window.removeEventListener(s,r,!0))}},[t])}function YM(){const t=ji();return d.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-600 to-blue-900 flex items-center justify-center p-4",children:d.jsxs("div",{className:"max-w-md w-full",children:[d.jsxs("div",{className:"text-center mb-8",children:[d.jsx("div",{className:"bg-white rounded-full w-20 h-20 flex items-center justify-center mx-auto mb-6",children:d.jsx("span",{className:"text-4xl font-bold text-blue-600",children:"TMV"})}),d.jsx("h1",{className:"text-4xl font-bold text-white mb-2",children:"Welcome"}),d.jsx("p",{className:"text-blue-100 text-lg",children:"Task Management & Videography"})]}),d.jsx("div",{className:"bg-white bg-opacity-10 backdrop-blur-lg rounded-lg p-6 mb-8 text-center",children:d.jsx("p",{className:"text-blue-50 text-sm leading-relaxed",children:"Manage your work tasks, assignments, and videography projects efficiently. Sign in to your account or create a new one to get started."})}),d.jsxs("div",{className:"space-y-4",children:[d.jsx("button",{onClick:()=>t("/login"),className:"w-full bg-white text-blue-600 font-bold py-3 px-4 rounded-lg hover:bg-blue-50 transition-all duration-200 transform hover:scale-105 shadow-lg",children:"Login"}),d.jsx("button",{onClick:()=>t("/signup"),className:"w-full bg-blue-400 text-white font-bold py-3 px-4 rounded-lg hover:bg-blue-500 transition-all duration-200 transform hover:scale-105 shadow-lg",children:"Create Account"})]}),d.jsxs("div",{className:"mt-8 text-center text-blue-100 text-sm",children:[d.jsx("p",{children:"FOT Media | Rajarata University"}),d.jsx("p",{className:"mt-1",children:"Videography Department"})]})]})})}const ss=({children:t})=>{const[e,n]=se.useState("checking");return se.useEffect(()=>{const r=Rc(Ii,async i=>{if(!i){n("denied");return}try{const s=await Xs(Zt(qe,"users",i.uid));(s.exists()?s.data():{}).userType==="admin"?n("allowed"):n("denied")}catch{n("denied")}});return()=>r()},[]),e==="checking"?null:e==="denied"?d.jsx(aC,{to:"/home",replace:!0}):t};var $A={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},q_=ol.createContext&&ol.createContext($A),QM=["attr","size","title"];function XM(t,e){if(t==null)return{};var n=JM(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function JM(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function km(){return km=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},km.apply(this,arguments)}function H_(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Cm(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?H_(Object(n),!0).forEach(function(r){ZM(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):H_(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ZM(t,e,n){return e=eF(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function eF(t){var e=tF(t,"string");return typeof e=="symbol"?e:e+""}function tF(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function GA(t){return t&&t.map((e,n)=>ol.createElement(e.tag,Cm({key:n},e.attr),GA(e.child)))}function kn(t){return e=>ol.createElement(nF,km({attr:Cm({},t.attr)},e),GA(t.child))}function nF(t){var e=n=>{var{attr:r,size:i,title:s}=t,o=XM(t,QM),a=i||n.size||"1em",l;return n.className&&(l=n.className),t.className&&(l=(l?l+" ":"")+t.className),ol.createElement("svg",km({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,o,{className:l,style:Cm(Cm({color:t.color||n.color},n.style),t.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),s&&ol.createElement("title",null,s),t.children)};return q_!==void 0?ol.createElement(q_.Consumer,null,n=>e(n)):e($A)}function rF(t){return kn({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M12.83 352h262.34A12.82 12.82 0 0 0 288 339.17v-38.34A12.82 12.82 0 0 0 275.17 288H12.83A12.82 12.82 0 0 0 0 300.83v38.34A12.82 12.82 0 0 0 12.83 352zm0-256h262.34A12.82 12.82 0 0 0 288 83.17V44.83A12.82 12.82 0 0 0 275.17 32H12.83A12.82 12.82 0 0 0 0 44.83v38.34A12.82 12.82 0 0 0 12.83 96zM432 160H16a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zm0 256H16a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16z"},child:[]}]})(t)}function iF(t){return kn({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"},child:[]}]})(t)}function s5(t){return kn({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 512c35.32 0 63.97-28.65 63.97-64H160.03c0 35.35 28.65 64 63.97 64zm215.39-149.71c-19.32-20.76-55.47-51.99-55.47-154.29 0-77.7-54.48-139.9-127.94-155.16V32c0-17.67-14.32-32-31.98-32s-31.98 14.33-31.98 32v20.84C118.56 68.1 64.08 130.3 64.08 208c0 102.3-36.15 133.53-55.47 154.29-6 6.45-8.66 14.16-8.61 21.71.11 16.4 12.98 32 32.1 32h383.8c19.12 0 32-15.6 32.1-32 .05-7.55-2.61-15.27-8.61-21.71z"},child:[]}]})(t)}function mf(t){return kn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M509.5 184.6L458.9 32.8C452.4 13.2 434.1 0 413.4 0H272v192h238.7c-.4-2.5-.4-5-1.2-7.4zM240 0H98.6c-20.7 0-39 13.2-45.5 32.8L2.5 184.6c-.8 2.4-.8 4.9-1.2 7.4H240V0zM0 224v240c0 26.5 21.5 48 48 48h416c26.5 0 48-21.5 48-48V224H0z"},child:[]}]})(t)}function fr(t){return kn({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M0 464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V192H0v272zm320-196c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zM192 268c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zM64 268c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40zM400 64h-48V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48H160V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48H48C21.5 64 0 85.5 0 112v48h448v-48c0-26.5-21.5-48-48-48z"},child:[]}]})(t)}function D2(t){return kn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z"},child:[]}]})(t)}function la(t){return kn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"},child:[]}]})(t)}function sF(t){return kn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8z"},child:[]}]})(t)}function oF(t){return kn({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M402.6 83.2l90.2 90.2c3.8 3.8 3.8 10 0 13.8L274.4 405.6l-92.8 10.3c-12.4 1.4-22.9-9.1-21.5-21.5l10.3-92.8L388.8 83.2c3.8-3.8 10-3.8 13.8 0zm162-22.9l-48.8-48.8c-15.2-15.2-39.9-15.2-55.2 0l-35.4 35.4c-3.8 3.8-3.8 10 0 13.8l90.2 90.2c3.8 3.8 10 3.8 13.8 0l35.4-35.4c15.2-15.3 15.2-40 0-55.2zM384 346.2V448H64V128h229.8c3.2 0 6.2-1.3 8.5-3.5l40-40c7.6-7.6 2.2-20.5-8.5-20.5H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V306.2c0-10.7-12.9-16-20.5-8.5l-40 40c-2.2 2.3-3.5 5.3-3.5 8.5z"},child:[]}]})(t)}function aF(t){return kn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M502.3 190.8c3.9-3.1 9.7-.2 9.7 4.7V400c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V195.6c0-5 5.7-7.8 9.7-4.7 22.4 17.4 52.1 39.5 154.1 113.6 21.1 15.4 56.7 47.8 92.2 47.6 35.7.3 72-32.8 92.3-47.6 102-74.1 131.6-96.3 154-113.7zM256 320c23.2.4 56.6-29.2 73.4-41.4 132.7-96.3 142.8-104.7 173.4-128.7 5.8-4.5 9.2-11.5 9.2-18.9v-19c0-26.5-21.5-48-48-48H48C21.5 64 0 85.5 0 112v19c0 7.4 3.4 14.3 9.2 18.9 30.6 23.9 40.7 32.4 173.4 128.7 16.8 12.2 50.2 41.8 73.4 41.4z"},child:[]}]})(t)}function lF(t){return kn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zm-248 50c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"},child:[]}]})(t)}function cF(t){return kn({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"},child:[]}]})(t)}function uF(t){return kn({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M224 136V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zm64 236c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12v8zm0-64c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12v8zm0-72v8c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12zm96-114.1v6.1H256V0h6.1c6.4 0 12.5 2.5 17 7l97.9 98c4.5 4.5 7 10.6 7 16.9z"},child:[]}]})(t)}function hF(t){return kn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 255.531c.253 136.64-111.18 248.372-247.82 248.468-59.015.042-113.223-20.53-155.822-54.911-11.077-8.94-11.905-25.541-1.839-35.607l11.267-11.267c8.609-8.609 22.353-9.551 31.891-1.984C173.062 425.135 212.781 440 256 440c101.705 0 184-82.311 184-184 0-101.705-82.311-184-184-184-48.814 0-93.149 18.969-126.068 49.932l50.754 50.754c10.08 10.08 2.941 27.314-11.313 27.314H24c-8.837 0-16-7.163-16-16V38.627c0-14.254 17.234-21.393 27.314-11.314l49.372 49.372C129.209 34.136 189.552 8 256 8c136.81 0 247.747 110.78 248 247.531zm-180.912 78.784l9.823-12.63c8.138-10.463 6.253-25.542-4.21-33.679L288 256.349V152c0-13.255-10.745-24-24-24h-16c-13.255 0-24 10.745-24 24v135.651l65.409 50.874c10.463 8.137 25.541 6.253 33.679-4.21z"},child:[]}]})(t)}function dF(t){return kn({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M280.37 148.26L96 300.11V464a16 16 0 0 0 16 16l112.06-.29a16 16 0 0 0 15.92-16V368a16 16 0 0 1 16-16h64a16 16 0 0 1 16 16v95.64a16 16 0 0 0 16 16.05L464 480a16 16 0 0 0 16-16V300L295.67 148.26a12.19 12.19 0 0 0-15.3 0zM571.6 251.47L488 182.56V44.05a12 12 0 0 0-12-12h-56a12 12 0 0 0-12 12v72.61L318.47 43a48 48 0 0 0-61 0L4.34 251.47a12 12 0 0 0-1.6 16.9l25.5 31A12 12 0 0 0 45.15 301l235.22-193.74a12.19 12.19 0 0 1 15.3 0L530.9 301a12 12 0 0 0 16.9-1.6l25.5-31a12 12 0 0 0-1.7-16.93z"},child:[]}]})(t)}function O2(t){return kn({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M360 0H24C10.745 0 0 10.745 0 24v16c0 13.255 10.745 24 24 24 0 90.965 51.016 167.734 120.842 192C75.016 280.266 24 357.035 24 448c-13.255 0-24 10.745-24 24v16c0 13.255 10.745 24 24 24h336c13.255 0 24-10.745 24-24v-16c0-13.255-10.745-24-24-24 0-90.965-51.016-167.734-120.842-192C308.984 231.734 360 154.965 360 64c13.255 0 24-10.745 24-24V24c0-13.255-10.745-24-24-24zm-75.078 384H99.08c17.059-46.797 52.096-80 92.92-80 40.821 0 75.862 33.196 92.922 80zm.019-256H99.078C91.988 108.548 88 86.748 88 64h208c0 22.805-3.987 44.587-11.059 64z"},child:[]}]})(t)}function fF(t){return kn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M80 368H16a16 16 0 0 0-16 16v64a16 16 0 0 0 16 16h64a16 16 0 0 0 16-16v-64a16 16 0 0 0-16-16zm0-320H16A16 16 0 0 0 0 64v64a16 16 0 0 0 16 16h64a16 16 0 0 0 16-16V64a16 16 0 0 0-16-16zm0 160H16a16 16 0 0 0-16 16v64a16 16 0 0 0 16 16h64a16 16 0 0 0 16-16v-64a16 16 0 0 0-16-16zm416 176H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zm0-320H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16V80a16 16 0 0 0-16-16zm0 160H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16z"},child:[]}]})(t)}function pF(t){return kn({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"},child:[]}]})(t)}function bc(t){return kn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"},child:[]}]})(t)}function Ms(t){return kn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M304 48c0 26.51-21.49 48-48 48s-48-21.49-48-48 21.49-48 48-48 48 21.49 48 48zm-48 368c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zm208-208c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zM96 256c0-26.51-21.49-48-48-48S0 229.49 0 256s21.49 48 48 48 48-21.49 48-48zm12.922 99.078c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.491-48-48-48zm294.156 0c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.49-48-48-48zM108.922 60.922c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.491-48-48-48z"},child:[]}]})(t)}function M2(t){return kn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M139.61 35.5a12 12 0 0 0-17 0L58.93 98.81l-22.7-22.12a12 12 0 0 0-17 0L3.53 92.41a12 12 0 0 0 0 17l47.59 47.4a12.78 12.78 0 0 0 17.61 0l15.59-15.62L156.52 69a12.09 12.09 0 0 0 .09-17zm0 159.19a12 12 0 0 0-17 0l-63.68 63.72-22.7-22.1a12 12 0 0 0-17 0L3.53 252a12 12 0 0 0 0 17L51 316.5a12.77 12.77 0 0 0 17.6 0l15.7-15.69 72.2-72.22a12 12 0 0 0 .09-16.9zM64 368c-26.49 0-48.59 21.5-48.59 48S37.53 464 64 464a48 48 0 0 0 0-96zm432 16H208a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h288a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zm0-320H208a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h288a16 16 0 0 0 16-16V80a16 16 0 0 0-16-16zm0 160H208a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h288a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16z"},child:[]}]})(t)}function Nl(t){return kn({attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"},child:[]}]})(t)}function KA(t){return kn({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z"},child:[]}]})(t)}function W_(t){return kn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M212.333 224.333H12c-6.627 0-12-5.373-12-12V12C0 5.373 5.373 0 12 0h48c6.627 0 12 5.373 12 12v78.112C117.773 39.279 184.26 7.47 258.175 8.007c136.906.994 246.448 111.623 246.157 248.532C504.041 393.258 393.12 504 256.333 504c-64.089 0-122.496-24.313-166.51-64.215-5.099-4.622-5.334-12.554-.467-17.42l33.967-33.967c4.474-4.474 11.662-4.717 16.401-.525C170.76 415.336 211.58 432 256.333 432c97.268 0 176-78.716 176-176 0-97.267-78.716-176-176-176-58.496 0-110.28 28.476-142.274 72.333h98.274c6.627 0 12 5.373 12 12v48c0 6.627-5.373 12-12 12z"},child:[]}]})(t)}function YA(t){return kn({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M624 208h-64v-64c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v64h-64c-8.8 0-16 7.2-16 16v32c0 8.8 7.2 16 16 16h64v64c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16v-64h64c8.8 0 16-7.2 16-16v-32c0-8.8-7.2-16-16-16zm-400 48c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"},child:[]}]})(t)}function QA(t){return kn({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"},child:[]}]})(t)}function o5(t){return kn({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M96 224c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm448 0c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm32 32h-64c-17.6 0-33.5 7.1-45.1 18.6 40.3 22.1 68.9 62 75.1 109.4h66c17.7 0 32-14.3 32-32v-32c0-35.3-28.7-64-64-64zm-256 0c61.9 0 112-50.1 112-112S381.9 32 320 32 208 82.1 208 144s50.1 112 112 112zm76.8 32h-8.3c-20.8 10-43.9 16-68.5 16s-47.6-6-68.5-16h-8.3C179.6 288 128 339.6 128 403.2V432c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48v-28.8c0-63.6-51.6-115.2-115.2-115.2zm-223.7-13.4C161.5 263.1 145.6 256 128 256H64c-35.3 0-64 28.7-64 64v32c0 17.7 14.3 32 32 32h65.9c6.3-47.4 34.9-87.3 75.2-109.4z"},child:[]}]})(t)}const In=({userType:t})=>{const e=Ju(),[n,r]=se.useState(!1),i=a=>e.pathname===a,o=[{path:t==="admin"?"/admin-home":"/home",label:"Home",icon:d.jsx(dF,{})},{path:"/profile",label:"Profile",icon:d.jsx(QA,{})}];return t==="user"&&o.push({path:"/task-history",label:"Task History",icon:d.jsx(hF,{})},{path:"/user-reject-details",label:"My Rejections",icon:d.jsx(Nl,{})}),t==="admin"&&o.push({path:"/manage-users",label:"Manage Users",icon:d.jsx(YA,{})},{path:"/assign-work",label:"Assign Work",icon:d.jsx(M2,{})},{path:"/work-list",label:"Work List",icon:d.jsx(fF,{})},{path:"/inventory",label:"Inventory",icon:d.jsx(mf,{})},{path:"/notifications",label:"Notifications",icon:d.jsx(s5,{})}),d.jsx("header",{className:"bg-blue-600 text-white shadow-lg",children:d.jsxs("nav",{className:"container mx-auto px-4 py-4",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("h1",{className:"text-lg sm:text-xl md:text-2xl font-bold",children:"Videography Manager"}),d.jsx("button",{onClick:()=>r(!n),className:"lg:hidden text-2xl focus:outline-none","aria-label":"Toggle menu",children:n?d.jsx(Nl,{}):d.jsx(iF,{})}),d.jsx("ul",{className:"hidden lg:flex space-x-6",children:o.map(a=>d.jsx("li",{children:d.jsxs(hx,{to:a.path,className:`flex items-center gap-2 hover:text-blue-200 transition ${i(a.path)?"font-bold border-b-2 border-white pb-1":""}`,children:[a.icon,d.jsx("span",{children:a.label})]})},a.path))})]}),n&&d.jsx("ul",{className:"lg:hidden mt-4 space-y-2 pb-2",children:o.map(a=>d.jsx("li",{children:d.jsxs(hx,{to:a.path,onClick:()=>r(!1),className:`flex items-center gap-3 p-3 rounded hover:bg-blue-700 transition ${i(a.path)?"bg-blue-700 font-bold":""}`,children:[d.jsx("span",{className:"text-xl",children:a.icon}),d.jsx("span",{children:a.label})]})},a.path))})]})})},mF=()=>{const t=ji(),[e,n]=se.useState(null);se.useEffect(()=>{(async()=>{try{const o=await Bn(Pt(qe,"notifications"));console.log("Notifications count:",o.size),o.forEach(a=>console.log("Notif doc:",a.id,a.data()))}catch(o){console.error("Test read of notifications failed:",o)}})()},[]),se.useEffect(()=>{console.log("Admin notification listener mounted");const s=vc(Pt(qe,"notifications"),zd("read","==",!1),qv("createdAt","desc")),o=Tm(s,a=>{console.log("Notification snapshot size:",a.size),a.docChanges().forEach(l=>{if(console.log("Notif change:",l.type,l.doc.id),l.type==="added"){const c=l.doc.data();n({id:l.doc.id,...c})}})},a=>{console.error("Notification listener error:",a)});return()=>{console.log("Admin notification listener unsubscribed"),o()}},[]);const r=async()=>{if(!e)return;try{await Xr(Zt(qe,"notifications",e.id),{read:!0})}catch(o){console.error("Failed to mark notification read",o)}const s=e.id;n(null),t(`/admin/notifications/${s}`)},i=()=>{if(!e)return"";const s=e.userName||"A user";return e.type==="accept"?`${s} accepted a work.`:e.type==="reject"?`${s} rejected a work.`:e.type==="done"?`${s} marked their work as done.`:e.type==="undo-done"?`${s} undid a done task.`:"New activity on a work."};return d.jsxs("div",{className:"min-h-screen bg-gray-100",children:[d.jsx(In,{userType:"admin"}),e&&d.jsxs("button",{onClick:r,className:"fixed bottom-4 right-4 z-50 max-w-xs text-left bg-white shadow-xl rounded-xl border border-gray-200 px-4 py-3 text-sm hover:bg-gray-50",children:[d.jsx("p",{className:"font-semibold text-gray-800 mb-1",children:i()}),d.jsx("p",{className:"text-gray-500 text-xs",children:"Click to view details"})]}),d.jsx("main",{className:"container mx-auto px-4 py-6 sm:py-8",children:d.jsxs("div",{className:"max-w-4xl mx-auto",children:[d.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-gray-800 mb-6 sm:mb-8",children:"Admin Dashboard"}),d.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-6",children:[d.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 hover:shadow-xl transition",children:[d.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[d.jsx(M2,{className:"text-3xl sm:text-4xl text-blue-600"}),d.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-blue-600",children:"Work List"})]}),d.jsx("p",{className:"text-gray-600 mb-4 text-sm sm:text-base",children:"View all works, see user acceptance and progress, and manage task status."}),d.jsx("button",{onClick:()=>t("/work-list"),className:"w-full bg-blue-600 text-white py-2 sm:py-3 px-4 rounded hover:bg-blue-700 transition font-medium",children:"Go to Work List"})]}),d.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 hover:shadow-xl transition",children:[d.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[d.jsx(YA,{className:"text-3xl sm:text-4xl text-green-600"}),d.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-green-600",children:"Work Assignment"})]}),d.jsx("p",{className:"text-gray-600 mb-4 text-sm sm:text-base",children:"Create new work projects and assign team members to tasks."}),d.jsx("button",{onClick:()=>t("/assign-work"),className:"w-full bg-green-600 text-white py-2 sm:py-3 px-4 rounded hover:bg-green-700 transition font-medium",children:"Go to Work Assignment"})]}),d.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 hover:shadow-xl transition",children:[d.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[d.jsx(fr,{className:"text-3xl sm:text-4xl text-purple-600"}),d.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-purple-600",children:"Schedule Posting"})]}),d.jsx("p",{className:"text-gray-600 mb-4 text-sm sm:text-base",children:"Set posting dates, mark videos as posted, and view the posting queue."}),d.jsx("button",{onClick:()=>t("/posting-dates"),className:"w-full bg-purple-600 text-white py-2 sm:py-3 px-4 rounded hover:bg-purple-700 transition font-medium",children:"Go to Schedule Posting"})]}),d.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 hover:shadow-xl transition",children:[d.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[d.jsx(M2,{className:"text-3xl sm:text-4xl text-orange-500"}),d.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-orange-500",children:"Send Notifications"})]}),d.jsx("p",{className:"text-gray-600 mb-4 text-sm sm:text-base",children:"Send announcements or messages to all members or selected users."}),d.jsx("button",{onClick:()=>t("/admin/notifications"),className:"w-full bg-orange-500 text-white py-2 sm:py-3 px-4 rounded hover:bg-orange-600 transition font-medium",children:"Go to Send Notifications"})]})]})]})})]})},gF=()=>{const[t,e]=se.useState(null),[n,r]=se.useState([]),[i,s]=se.useState({}),[o,a]=se.useState({}),[l,c]=se.useState(!0),[u,g]=se.useState(!1),[y,p]=se.useState(""),[b,N]=se.useState(!1),[C,_]=se.useState(""),[k,L]=se.useState(null),[D,z]=se.useState(!0),[X,j]=se.useState(null),S="user";se.useEffect(()=>{const q=Rc(Ii,ae=>{e(ae||null),c(!1)});return()=>q()},[]),se.useEffect(()=>{if(!t)return;(async()=>{g(!0);try{const me=(await Bn(Pt(qe,"works"))).docs.map(Te=>({id:Te.id,...Te.data()})).filter(Te=>Array.isArray(Te.assignedUsers)&&Te.assignedUsers.includes(t.uid));me.sort((Te,Se)=>{const K=Te.date?new Date(Te.date).getTime():0;return(Se.date?new Date(Se.date).getTime():0)-K}),r(me);const _e=await Bn(Pt(qe,"inventory")),Le={};_e.docs.forEach(Te=>{Le[Te.id]=Te.data()}),s(Le)}catch(ae){console.error("Error loading user tasks:",ae)}finally{g(!1)}})()},[t]),se.useEffect(()=>{(async()=>{try{const ae=await Bn(Pt(qe,"users")),ue={};ae.docs.forEach(me=>{ue[me.id]=me.data()}),a(ue)}catch(ae){console.error("Error loading users:",ae)}})()},[]);const T=q=>{p(q),setTimeout(()=>p(""),4e3)};se.useEffect(()=>{if(!t)return;const q=vc(Pt(qe,"users",t.uid,"notifications"),zd("read","==",!1)),ae=Tm(q,ue=>{ue.docChanges().forEach(me=>{if(me.type==="added"){const _e=me.doc.data(),Le={id:me.doc.id,..._e};j(Le),setTimeout(async()=>{try{await Xr(Zt(qe,"users",t.uid,"notifications",Le.id),{read:!0})}catch(Te){console.error("Failed to mark user notification read",Te)}j(Te=>Te&&Te.id===Le.id?null:Te)},5e3)}})});return()=>ae()},[t]),se.useEffect(()=>{if(!t)return;const q=vc(Pt(qe,"users",t.uid,"notifications"),zd("read","==",!1)),ae=Tm(q,ue=>{ue.docChanges().forEach(me=>{if(me.type==="added"){const _e=me.doc.data();j({id:me.doc.id,..._e})}})});return()=>ae()},[t]);const M=q=>q.status||"incomplete",A=q=>(q.userAcceptance||{})[t==null?void 0:t.uid]||"pending",I=async q=>{try{const ae=q.userAcceptance||{};ae[t.uid]="accepted";const ue=Zt(qe,"works",q.id);await Xr(ue,{userAcceptance:ae}),r(me=>me.map(_e=>_e.id===q.id?{..._e,userAcceptance:ae}:_e)),T("Work accepted successfully!"),await fi(Pt(qe,"notifications"),{type:"accept",workId:q.id,userId:t.uid,userName:t.displayName||"",createdAt:xo(),read:!1}),await fi(Pt(qe,"users",t.uid,"notifications"),{type:"accept",workId:q.id,title:q.title||"Work accepted",message:"You accepted this work.",createdAt:xo(),read:!1})}catch(ae){console.error("Failed to accept:",ae)}},R=q=>{L(q),_(""),N(!0)},G=async()=>{if(!C.trim()){T("Please provide a reason for rejection.");return}try{const q=k.userAcceptance||{};q[t.uid]="rejected";const ae=k.rejections||{};ae[t.uid]={reason:C.trim(),timestamp:new Date().toISOString(),approved:!1};const ue=Zt(qe,"works",k.id);await Xr(ue,{userAcceptance:q,rejections:ae}),r(me=>me.map(_e=>_e.id===k.id?{..._e,userAcceptance:q,rejections:ae}:_e)),T("Work rejected."),N(!1),L(null),await fi(Pt(qe,"notifications"),{type:"reject",workId:k.id,userId:t.uid,userName:t.displayName||"",createdAt:xo(),read:!1}),await fi(Pt(qe,"users",t.uid,"notifications"),{type:"reject",workId:k.id,title:k.title||"Work rejected",message:"You rejected this work.",createdAt:xo(),read:!1})}catch(q){console.error("Failed to reject:",q)}},oe=q=>{if(!t)return[];const ue=(q.assignedUserDetails||[]).find(me=>me.userId===t.uid);return(ue==null?void 0:ue.roles)||[]},pe=(q,ae)=>{const ue=`${t.uid}_${ae}`;return(q.roleCompletion||{})[ue]==="done"},ge=q=>{const ae=oe(q);return ae.length?ae.every(ue=>pe(q,ue)):!1},ne=async(q,ae)=>{if(M(q)==="complete")return;const ue=`${t.uid}_${ae}`,me=q.roleCompletion||{},_e=me[ue]==="done",Le={...me};_e?delete Le[ue]:Le[ue]="done";const Te=oe(q),Se=Te.length>0&&Te.every(Ce=>Le[`${t.uid}_${Ce}`]==="done"),K=Te.length>0&&Te.every(Ce=>(q.roleCompletion||{})[`${t.uid}_${Ce}`]==="done");try{Se&&!K?(await fi(Pt(qe,"notifications"),{type:"done",workId:q.id,userId:t.uid,userName:t.displayName||"",createdAt:xo(),read:!1}),await fi(Pt(qe,"users",t.uid,"notifications"),{type:"done",workId:q.id,title:q.title||"Work done",message:"All your roles for this work are marked done.",createdAt:xo(),read:!1})):!Se&&K&&(await fi(Pt(qe,"notifications"),{type:"undo-done",workId:q.id,userId:t.uid,userName:t.displayName||"",createdAt:xo(),read:!1}),await fi(Pt(qe,"users",t.uid,"notifications"),{type:"undo-done",workId:q.id,title:q.title||"Work status changed",message:"You undid a previously completed work status.",createdAt:xo(),read:!1}));const Ce=Zt(qe,"works",q.id);await Xr(Ce,{roleCompletion:Le}),r(it=>it.map(He=>He.id===q.id?{...He,roleCompletion:Le}:He))}catch(Ce){console.error("Failed to update role status:",Ce)}},le=q=>{const ae=q.assignedItems||[];return ae.length?d.jsxs("div",{className:"mt-3",children:[d.jsx("p",{className:"text-xs sm:text-sm font-semibold text-gray-700 mb-1",children:"Assigned items:"}),d.jsx("div",{className:"flex flex-wrap gap-2",children:ae.map(ue=>{const me=i[ue];return me?d.jsxs("span",{className:"px-2 py-1 rounded-full bg-blue-50 text-xs sm:text-sm text-blue-800 border border-blue-100",children:[me.itemName||"Item",me.itemNo?` (${me.itemNo})`:""]},ue):d.jsx("span",{className:"px-2 py-1 rounded-full bg-gray-100 text-xs text-gray-500",children:"Unknown item"},ue)})})]}):null},we=q=>{const ue=(q.assignedUsers||[]).filter(me=>me!==(t==null?void 0:t.uid));return ue.length===0?d.jsx("div",{className:"mt-3",children:d.jsx("p",{className:"text-xs text-gray-500 italic",children:"You are working on this alone"})}):d.jsxs("div",{className:"mt-3",children:[d.jsx("p",{className:"text-xs sm:text-sm font-semibold text-gray-700 mb-2",children:"Working with:"}),d.jsx("div",{className:"flex flex-wrap gap-2",children:ue.map(me=>{const _e=o[me];if(!_e)return d.jsxs("span",{className:"inline-flex items-center gap-2 px-3 py-1.5 rounded-full bg-gray-100 text-xs text-gray-500",children:[d.jsx("div",{className:"w-6 h-6 rounded-full bg-gray-300 flex items-center justify-center text-xs font-bold text-white",children:"?"}),"Unknown User"]},me);const Le=_e.photoURL||_e.avatarUrl||null;return d.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1.5 rounded-full bg-gradient-to-r from-blue-50 to-purple-50 border border-blue-100",children:[Le?d.jsx("img",{src:Le,alt:_e.name||"User",className:"w-7 h-7 rounded-full object-cover border border-white shadow-sm"}):d.jsx("div",{className:"w-7 h-7 rounded-full bg-gradient-to-r from-blue-500 to-purple-600 flex items-center justify-center text-xs font-bold text-white",children:(_e.name||"U").charAt(0).toUpperCase()}),d.jsx("div",{className:"flex flex-col",children:d.jsx("span",{className:"text-xs sm:text-sm font-semibold text-gray-800",children:_e.name||"User"})})]},me)})})]})},de=n.filter(q=>M(q)!=="complete"),U=de.filter(q=>A(q)==="pending"),W=de.filter(q=>A(q)==="rejected"),te=de.filter(q=>A(q)==="accepted"&&!ge(q)),Q=de.filter(q=>A(q)==="accepted"&&ge(q)),re=()=>X?X.title?X.title:X.type==="accept"?"You accepted a work.":X.type==="reject"?"You rejected a work.":X.type==="done"?"All your roles for a work are done.":X.type==="undo-done"?"You changed a previously completed work.":"New notification.":"";return d.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50",children:[d.jsx(In,{userType:S}),X&&d.jsxs("div",{className:"fixed bottom-4 right-4 z-50 max-w-xs text-left bg-white shadow-xl rounded-xl border border-gray-200 px-4 py-3 text-sm",children:[d.jsx("p",{className:"font-semibold text-gray-800 mb-1",children:re()}),X.message&&d.jsx("p",{className:"text-gray-600 text-xs mb-1",children:X.message}),d.jsx("p",{className:"text-gray-500 text-xs",children:"Notification"})]}),y&&d.jsx("div",{className:"fixed top-20 right-4 z-40 bg-gradient-to-r from-blue-600 to-purple-600 text-white text-sm px-5 py-3 rounded-lg shadow-2xl animate-slide-in",children:y}),b&&d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:d.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full p-6",children:[d.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-4",children:"Reject Work"}),d.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Please provide a reason for rejecting this work:"}),d.jsx("textarea",{value:C,onChange:q=>_(q.target.value),rows:"4",className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-red-500 text-sm",placeholder:"Enter your reason..."}),d.jsxs("div",{className:"flex gap-3 mt-4",children:[d.jsx("button",{onClick:G,className:"flex-1 bg-gradient-to-r from-red-500 to-rose-600 text-white py-2.5 px-4 rounded-xl font-semibold hover:from-red-600 hover:to-rose-700 transition-all",children:"Submit Rejection"}),d.jsx("button",{onClick:()=>{N(!1),L(null)},className:"flex-1 bg-gray-200 text-gray-800 py-2.5 px-4 rounded-xl font-semibold hover:bg-gray-300 transition-all",children:"Cancel"})]})]})}),d.jsxs("main",{className:"container mx-auto px-4 py-8 max-w-5xl",children:[d.jsxs("div",{className:"mb-8",children:[d.jsx("h1",{className:"text-3xl sm:text-4xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-purple-600 mb-2",children:"Welcome Back"}),d.jsx("p",{className:"text-gray-600 text-sm sm:text-base",children:"Manage your tasks efficiently. Accept new assignments and track your progress."})]}),l||u?d.jsxs("div",{className:"flex flex-col items-center justify-center py-20",children:[d.jsx(Ms,{className:"animate-spin text-5xl text-blue-600 mb-4"}),d.jsx("p",{className:"text-gray-600",children:"Loading your tasks..."})]}):de.length===0?d.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-12 text-center border border-gray-100",children:[d.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-blue-100 to-purple-100 rounded-full flex items-center justify-center mx-auto mb-4",children:d.jsx(D2,{className:"text-4xl text-blue-600"})}),d.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:"All Clear!"}),d.jsx("p",{className:"text-gray-600",children:"You have no active tasks at the moment."})]}):d.jsxs(d.Fragment,{children:[U.length>0&&d.jsxs("section",{className:"mb-8",children:[d.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[d.jsx("div",{className:"w-1 h-6 bg-gradient-to-b from-yellow-400 to-orange-500 rounded-full"}),d.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-gray-800",children:"Pending Acceptance"}),d.jsx("span",{className:"bg-gradient-to-r from-yellow-400 to-orange-500 text-white text-xs font-bold px-3 py-1 rounded-full",children:U.length})]}),d.jsx("div",{className:"space-y-4",children:U.map(q=>d.jsxs("div",{className:"bg-white rounded-2xl shadow-md hover:shadow-xl transition-all p-5 sm:p-6 border border-yellow-100",children:[d.jsxs("div",{className:"flex items-start justify-between mb-3",children:[d.jsxs("div",{className:"flex-1",children:[d.jsx("h3",{className:"text-lg sm:text-xl font-bold text-gray-800 mb-1",children:q.title||"Task"}),(q.date||q.deadline)&&d.jsxs("div",{className:"flex flex-col gap-1 text-xs sm:text-sm text-gray-500",children:[q.date&&d.jsxs("p",{className:"flex items-center gap-2",children:[d.jsx(fr,{}),d.jsxs("span",{children:["Date: ",new Date(q.date).toLocaleDateString()]})]}),q.deadline&&d.jsxs("p",{className:"flex items-center gap-2",children:[d.jsx(fr,{}),d.jsxs("span",{children:["Deadline: ",new Date(q.deadline).toLocaleDateString()]})]})]})]}),d.jsxs("span",{className:"bg-yellow-100 text-yellow-800 text-xs font-semibold px-3 py-1.5 rounded-full flex items-center gap-1",children:[d.jsx(O2,{}),"Pending"]})]}),q.description&&d.jsx("p",{className:"text-gray-700 text-sm mb-2",children:q.description}),le(q),we(q),d.jsxs("div",{className:"flex gap-3 mt-4",children:[d.jsxs("button",{onClick:()=>I(q),className:"flex-1 bg-gradient-to-r from-green-500 to-emerald-600 text-white py-2.5 px-4 rounded-xl font-semibold hover:from-green-600 hover:to-emerald-700 transition-all shadow-md flex items-center justify-center gap-2",children:[d.jsx(la,{}),"Accept"]}),d.jsxs("button",{onClick:()=>R(q),className:"flex-1 bg-gradient-to-r from-red-500 to-rose-600 text-white py-2.5 px-4 rounded-xl font-semibold hover:from-red-600 hover:to-rose-700 transition-all shadow-md flex items-center justify-center gap-2",children:[d.jsx(Nl,{}),"Reject"]})]})]},q.id))})]}),W.length>0&&d.jsxs("section",{className:"mb-8",children:[d.jsxs("div",{className:"flex items-center justify-between mb-4",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("div",{className:"w-1 h-6 bg-gradient-to-b from-orange-500 to-red-500 rounded-full"}),d.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-gray-800",children:"Pending Rejection Approval"}),d.jsx("span",{className:"bg-gradient-to-r from-orange-500 to-red-500 text-white text-xs font-bold px-3 py-1 rounded-full",children:W.length})]}),d.jsx("button",{onClick:()=>z(q=>!q),className:"text-sm font-semibold text-gray-600 hover:text-gray-800 transition px-3 py-1.5 rounded-lg hover:bg-gray-100",children:D?"Hide":"Show"})]}),D&&d.jsx("div",{className:"space-y-4",children:W.map(q=>{const ae=(q.rejections||{})[t.uid]||{};return d.jsxs("div",{className:"bg-white rounded-2xl shadow-md p-5 sm:p-6 border border-orange-100",children:[d.jsxs("div",{className:"flex items-start justify-between mb-3",children:[d.jsxs("div",{children:[d.jsx("h3",{className:"text-lg sm:text-xl font-bold text-gray-800 mb-1",children:q.title||"Task"}),(q.date||q.deadline)&&d.jsxs("div",{className:"flex flex-col gap-1 text-xs sm:text-sm text-gray-500",children:[q.date&&d.jsxs("p",{className:"flex items-center gap-2",children:[d.jsx(fr,{}),d.jsxs("span",{children:["Date: ",new Date(q.date).toLocaleDateString()]})]}),q.deadline&&d.jsxs("p",{className:"flex items-center gap-2",children:[d.jsx(fr,{}),d.jsxs("span",{children:["Deadline: ",new Date(q.deadline).toLocaleDateString()]})]})]})]}),d.jsxs("span",{className:"bg-orange-100 text-orange-800 text-xs font-semibold px-3 py-1.5 rounded-full flex items-center gap-1",children:[d.jsx(O2,{}),"Pending Approval"]})]}),le(q),we(q),d.jsxs("div",{className:"bg-orange-50 rounded-xl p-4 mt-3",children:[d.jsx("p",{className:"text-xs font-semibold text-orange-800 mb-1",children:"Your Rejection Reason:"}),d.jsx("p",{className:"text-sm text-gray-700",children:ae.reason||"-"}),d.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Waiting for admin to approve your rejection request"})]})]},q.id)})})]}),te.length>0&&d.jsxs("section",{className:"mb-8",children:[d.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[d.jsx("div",{className:"w-1 h-6 bg-gradient-to-b from-blue-500 to-purple-600 rounded-full"}),d.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-gray-800",children:"Active Tasks"}),d.jsx("span",{className:"bg-gradient-to-r from-blue-500 to-purple-600 text-white text-xs font-bold px-3 py-1 rounded-full",children:te.length})]}),d.jsx("div",{className:"space-y-4",children:te.map(q=>{const ae=oe(q);return d.jsxs("div",{className:"bg-white rounded-2xl shadow-md hover:shadow-xl transition-all p-5 sm:p-6 border border-blue-100",children:[d.jsx("h3",{className:"text-lg sm:text-xl font-bold text-gray-800 mb-1",children:q.title||"Task"}),(q.date||q.deadline)&&d.jsxs("div",{className:"flex flex-col gap-1 text-xs sm:text-sm text-gray-500 mb-3",children:[q.date&&d.jsxs("p",{className:"flex items-center gap-2",children:[d.jsx(fr,{}),d.jsxs("span",{children:["Date: ",new Date(q.date).toLocaleDateString()]})]}),q.deadline&&d.jsxs("p",{className:"flex items-center gap-2",children:[d.jsx(fr,{}),d.jsxs("span",{children:["Deadline: ",new Date(q.deadline).toLocaleDateString()]})]})]}),q.description&&d.jsx("p",{className:"text-gray-700 text-sm mb-2",children:q.description}),le(q),we(q),d.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 rounded-xl p-4 mt-3",children:[d.jsx("p",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Your Work Types:"}),d.jsx("div",{className:"flex flex-wrap gap-2",children:ae.map(ue=>{const me=pe(q,ue);return d.jsx("button",{type:"button",onClick:()=>ne(q,ue),className:`inline-flex items-center gap-2 px-4 py-2 rounded-xl text-sm font-semibold transition-all shadow-sm ${me?"bg-gradient-to-r from-green-500 to-emerald-600 text-white hover:from-green-600 hover:to-emerald-700":"bg-white text-gray-700 border-2 border-gray-200 hover:border-blue-400"}`,children:me?d.jsxs(d.Fragment,{children:[d.jsx(W_,{}),"Undo ",ue]}):d.jsxs(d.Fragment,{children:[d.jsx(la,{}),"Mark ",ue," as done"]})},ue)})})]})]},q.id)})})]}),Q.length>0&&d.jsxs("section",{children:[d.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[d.jsx("div",{className:"w-1 h-6 bg-gradient-to-b from-green-500 to-emerald-600 rounded-full"}),d.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-gray-800",children:"Completed"}),d.jsx("span",{className:"bg-gradient-to-r from-green-500 to-emerald-600 text-white text-xs font-bold px-3 py-1 rounded-full",children:Q.length})]}),d.jsx("div",{className:"space-y-4",children:Q.map(q=>{const ae=oe(q);return d.jsxs("div",{className:"bg-white rounded-2xl shadow-md p-5 sm:p-6 border border-green-100",children:[d.jsxs("div",{className:"flex items-start justify-between mb-3",children:[d.jsxs("div",{children:[d.jsx("h3",{className:"text-lg sm:text-xl font-bold text-gray-800 mb-1",children:q.title||"Task"}),(q.date||q.deadline)&&d.jsxs("div",{className:"flex flex-col gap-1 text-xs sm:text-sm text-gray-500",children:[q.date&&d.jsxs("p",{className:"flex items-center gap-2",children:[d.jsx(fr,{}),d.jsxs("span",{children:["Date: ",new Date(q.date).toLocaleDateString()]})]}),q.deadline&&d.jsxs("p",{className:"flex items-center gap-2",children:[d.jsx(fr,{}),d.jsxs("span",{children:["Deadline: ",new Date(q.deadline).toLocaleDateString()]})]})]})]}),d.jsx(D2,{className:"text-3xl text-green-500"})]}),q.description&&d.jsx("p",{className:"text-gray-700 text-sm mb-2",children:q.description}),le(q),we(q),d.jsx("div",{className:"flex flex-wrap gap-2 mb-3 mt-3",children:ae.map(ue=>d.jsxs("button",{onClick:()=>ne(q,ue),className:"inline-flex items-center gap-1 px-3 py-1.5 rounded-full text-xs font-semibold bg-green-100 text-green-800 hover:bg-green-200 transition",children:[d.jsx(W_,{className:"text-xs"}),"Undo ",ue]},ue))}),d.jsx("p",{className:"text-sm text-green-700 font-semibold bg-green-50 px-4 py-2 rounded-lg",children:" All work completed. Waiting for admin review."})]},q.id)})})]})]})]})]})},yF="BCDW2bDpR51kOUCYdebGFw4pHEU_h2159MHvkSEslEdrV0yI0AVUiQikAbClmXfS9EGHHQblUlKTC_To4SaQ7Hg";async function vF(t){if(!t)return;if(!("Notification"in window)){console.log("Notifications not supported");return}if(await Notification.requestPermission()!=="granted"){console.log("Notification permission not granted");return}"serviceWorker"in navigator&&await navigator.serviceWorker.register("/firebase-messaging-sw.js");const n=await WA(j2,{vapidKey:yF});if(!n){console.log("No FCM token");return}await $v(Zt(qe,"users",t),{fcmTokens:oO(n)},{merge:!0}),WM(j2,r=>{var o,a;const i=(o=r.notification)==null?void 0:o.title,s=(a=r.notification)==null?void 0:a.body;i&&(async()=>{try{const c=(r.data||{}).items,u={body:s,icon:"/icon-192.png"};if(c){const y=JSON.parse(c).map(p=>p.imageUrl).filter(p=>typeof p=="string"&&p.length);if(y.length&&window.caches)try{const p=await caches.open("tmv-task-assets-v1");await Promise.all(y.map(async b=>{try{const N=await fetch(b,{mode:"no-cors"});await p.put(b,N.clone()),u.image||(u.image=b)}catch{}}))}catch(p){console.warn("caching images failed",p)}}new Notification(i,u)}catch{new Notification(i,{body:s,icon:"/icon-192.png"})}})()})}const wF=()=>{const t=ji(),[e,n]=se.useState({email:"",password:""}),[r,i]=se.useState(!1),[s,o]=se.useState(""),a=c=>{n(u=>({...u,[c.target.name]:c.target.value}))},l=async c=>{c.preventDefault(),o(""),i(!0);try{const g=(await WR(Ii,e.email,e.password)).user;await vF(g.uid);const y=Zt(qe,"users",g.uid),p=await Xs(y);let b="user";p.exists()&&(b=p.data().userType||"user"),t(b==="admin"?"/admin-home":"/home")}catch(u){o(u.message||"Failed to log in.")}finally{i(!1)}};return d.jsx("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center px-4",children:d.jsxs("div",{className:"w-full max-w-md bg-white rounded-lg shadow-md p-4 sm:p-6",children:[d.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-800 mb-4",children:"Log In"}),s&&d.jsx("div",{className:"mb-4 p-3 rounded bg-red-100 text-red-700 text-sm",children:s}),d.jsxs("form",{onSubmit:l,className:"space-y-3 sm:space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Email"}),d.jsx("input",{type:"email",name:"email",value:e.email,onChange:a,required:!0,className:"w-full px-3 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Password"}),d.jsx("input",{type:"password",name:"password",value:e.password,onChange:a,required:!0,className:"w-full px-3 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm"})]}),d.jsx("button",{type:"submit",disabled:r,className:"w-full bg-blue-600 text-white py-2 rounded font-semibold text-sm hover:bg-blue-700 disabled:opacity-50",children:r?"Logging in...":"Log In"}),d.jsxs("p",{className:"mt-3 text-center text-xs sm:text-sm text-gray-600",children:["Do not have an account?"," ",d.jsx("span",{onClick:()=>t("/signup"),className:"text-blue-600 font-semibold cursor-pointer hover:underline",children:"Sign up"})]})]})]})})},xF="mihirudahanayake@gmail.com",_F=["videography","photography"],bF=()=>{const t=ji(),[e,n]=se.useState({name:"",email:"",phoneNo:"",departments:["videography"],firstPriority:"videography",batch:"20/21",studyDepartment:"ITT",gender:"male",registrationNumber:"",cardNumber:"",birthday:"",password:"",confirmPassword:""}),[r,i]=se.useState(!1),[s,o]=se.useState(""),a=g=>{n(y=>({...y,[g.target.name]:g.target.value}))},l=g=>{n(y=>{const b=y.departments.includes(g)?y.departments.filter(C=>C!==g):[...y.departments,g];let N=y.firstPriority;return b.includes(N)||(N=b[0]||""),{...y,departments:b,firstPriority:N}})},c=async g=>{if(g.preventDefault(),o(""),e.password!==e.confirmPassword){o("Password and confirm password do not match.");return}if(e.departments.length===0){o("Please select at least one work department.");return}i(!0);try{const p=(await _N(Ii,e.email,e.password)).user,b=p.email===xF?"admin":"user";await $v(Zt(qe,"users",p.uid),{name:e.name,email:e.email,phoneNo:e.phoneNo,departments:e.departments,firstPriority:e.firstPriority,batch:e.batch,studyDepartment:e.studyDepartment,gender:e.gender,registrationNumber:e.registrationNumber,cardNumber:e.cardNumber||null,birthday:e.birthday||null,userType:b,createdAt:new Date().toISOString()}),t(b==="admin"?"/admin-home":"/home")}catch(y){o(y.message||"Failed to sign up.")}finally{i(!1)}},u=g=>e.departments.includes(g);return d.jsx("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center px-4",children:d.jsxs("div",{className:"w-full max-w-md bg-white rounded-lg shadow-md p-4 sm:p-6",children:[d.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-800 mb-4",children:"Sign Up"}),s&&d.jsx("div",{className:"mb-4 p-3 rounded bg-red-100 text-red-700 text-sm",children:s}),d.jsxs("form",{onSubmit:c,className:"space-y-3 sm:space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Name"}),d.jsx("input",{type:"text",name:"name",value:e.name,onChange:a,required:!0,className:"w-full px-3 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Email"}),d.jsx("input",{type:"email",name:"email",value:e.email,onChange:a,required:!0,className:"w-full px-3 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Phone number"}),d.jsx("input",{type:"tel",name:"phoneNo",value:e.phoneNo,onChange:a,required:!0,className:"w-full px-3 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Batch"}),d.jsxs("select",{name:"batch",value:e.batch,onChange:a,className:"w-full px-3 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm",children:[d.jsx("option",{value:"20/21",children:"20/21"}),d.jsx("option",{value:"21/22",children:"21/22"}),d.jsx("option",{value:"22/23",children:"22/23"}),d.jsx("option",{value:"23/24",children:"23/24"})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Department in study"}),d.jsxs("select",{name:"studyDepartment",value:e.studyDepartment,onChange:a,className:"w-full px-3 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm",children:[d.jsx("option",{value:"ITT",children:"ITT"}),d.jsx("option",{value:"EET",children:"EET"}),d.jsx("option",{value:"MTT",children:"MTT"}),d.jsx("option",{value:"BPT",children:"BPT"}),d.jsx("option",{value:"Food",children:"Food"})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Gender"}),d.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[d.jsxs("label",{className:"flex items-center gap-2",children:[d.jsx("input",{type:"radio",name:"gender",value:"male",checked:e.gender==="male",onChange:a}),d.jsx("span",{children:"Male"})]}),d.jsxs("label",{className:"flex items-center gap-2",children:[d.jsx("input",{type:"radio",name:"gender",value:"female",checked:e.gender==="female",onChange:a}),d.jsx("span",{children:"Female"})]})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Registration number"}),d.jsx("input",{type:"text",name:"registrationNumber",value:e.registrationNumber,onChange:a,required:!0,className:"w-full px-3 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Card (if have)"}),d.jsx("input",{type:"text",name:"cardNumber",value:e.cardNumber,onChange:a,placeholder:"Optional",className:"w-full px-3 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Birthday"}),d.jsx("input",{type:"date",name:"birthday",value:e.birthday,onChange:a,className:"w-full px-3 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Departments (work)"}),d.jsx("div",{className:"bg-gray-50 border rounded p-2 flex flex-col gap-1",children:_F.map(g=>d.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[d.jsx("input",{type:"checkbox",checked:u(g),onChange:()=>l(g)}),d.jsx("span",{className:"capitalize",children:g})]},g))}),d.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"You can select one or more departments."})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"First priority department (work)"}),d.jsx("select",{name:"firstPriority",value:e.firstPriority,onChange:a,className:"w-full px-3 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm",children:e.departments.map(g=>d.jsx("option",{value:g,children:g},g))})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Password"}),d.jsx("input",{type:"password",name:"password",value:e.password,onChange:a,required:!0,minLength:6,className:"w-full px-3 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Confirm password"}),d.jsx("input",{type:"password",name:"confirmPassword",value:e.confirmPassword,onChange:a,required:!0,minLength:6,className:"w-full px-3 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm"})]}),d.jsx("button",{type:"submit",disabled:r,className:"w-full bg-blue-600 text-white py-2 rounded font-semibold text-sm hover:bg-blue-700 disabled:opacity-50",children:r?"Creating account...":"Sign Up"}),d.jsxs("p",{className:"mt-3 text-center text-xs sm:text-sm text-gray-600",children:["Already have an account?"," ",d.jsx("span",{onClick:()=>t("/"),className:"text-blue-600 font-semibold cursor-pointer hover:underline",children:"Log in"})]})]})]})})},NF=()=>{const[t,e]=se.useState({name:"",email:"",password:"",phone:"",specialty:""}),[n,r]=se.useState(!1),[i,s]=se.useState({type:"",text:""}),o=l=>{e(c=>({...c,[l.target.name]:l.target.value}))},a=async l=>{l.preventDefault(),r(!0),s({type:"",text:""});try{const c=await _N(Ii,t.email,t.password),u=t.email==="mihirudahanayake@gmail.com"?"admin":"user";await $v(Zt(qe,"users",c.user.uid),{name:t.name,email:t.email,phone:t.phone,specialty:t.specialty,role:u,createdAt:new Date().toISOString()}),s({type:"success",text:"User created successfully."}),e({name:"",email:"",password:"",phone:"",specialty:""})}catch(c){s({type:"error",text:c.message})}finally{r(!1)}};return d.jsxs("div",{className:"min-h-screen bg-gray-100",children:[d.jsx(In,{userType:"admin"}),d.jsx("main",{className:"container mx-auto px-4 py-6 sm:py-8",children:d.jsxs("div",{className:"max-w-2xl mx-auto bg-white rounded-lg shadow-md p-4 sm:p-8",children:[d.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-gray-800 mb-4 sm:mb-6",children:"Create New User Account"}),i.text&&d.jsx("div",{className:`mb-4 p-3 sm:p-4 rounded text-sm sm:text-base ${i.type==="success"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:i.text}),d.jsxs("form",{onSubmit:a,className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-gray-700 font-semibold mb-2 text-sm sm:text-base",children:"Name"}),d.jsx("input",{type:"text",name:"name",value:t.name,onChange:o,required:!0,className:"w-full px-3 sm:px-4 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm sm:text-base"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-gray-700 font-semibold mb-2 text-sm sm:text-base",children:"Email"}),d.jsx("input",{type:"email",name:"email",value:t.email,onChange:o,required:!0,className:"w-full px-3 sm:px-4 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm sm:text-base"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-gray-700 font-semibold mb-2 text-sm sm:text-base",children:"Password"}),d.jsx("input",{type:"password",name:"password",value:t.password,onChange:o,required:!0,minLength:6,className:"w-full px-3 sm:px-4 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm sm:text-base"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-gray-700 font-semibold mb-2 text-sm sm:text-base",children:"Phone"}),d.jsx("input",{type:"tel",name:"phone",value:t.phone,onChange:o,className:"w-full px-3 sm:px-4 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm sm:text-base"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-gray-700 font-semibold mb-2 text-sm sm:text-base",children:"Specialty"}),d.jsx("input",{type:"text",name:"specialty",value:t.specialty,onChange:o,className:"w-full px-3 sm:px-4 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm sm:text-base"})]}),d.jsx("button",{type:"submit",disabled:n,className:"w-full bg-blue-600 text-white py-2 sm:py-3 px-4 rounded font-semibold hover:bg-blue-700 transition disabled:opacity-50 text-sm sm:text-base",children:n?"Creating user...":"Create User"})]})]})})]})},SF=["videography","editing"],AF=()=>{const[t,e]=se.useState([]),[n,r]=se.useState([]),[i,s]=se.useState({title:"",description:"",date:"",deadline:"",priority:"medium",assignedUsers:[],assignedItems:[]}),[o,a]=se.useState("date"),[l,c]=se.useState(!1),[u,g]=se.useState({type:"",text:""}),[y,p]=se.useState(""),[b,N]=se.useState("");se.useEffect(()=>{C(),_()},[]);const C=async()=>{try{const oe=(await Bn(Pt(qe,"users"))).docs.map(pe=>({id:pe.id,...pe.data()}));oe.sort((pe,ge)=>{const ne=(pe.name||"").toLowerCase(),le=(ge.name||"").toLowerCase();return ne.localeCompare(le)}),e(oe)}catch(G){console.error("Error fetching users:",G)}},_=async()=>{try{const oe=(await Bn(Pt(qe,"inventory"))).docs.map(pe=>({id:pe.id,...pe.data()}));oe.sort((pe,ge)=>{const ne=(pe.itemName||"").toLowerCase(),le=(ge.itemName||"").toLowerCase();return ne.localeCompare(le)}),r(oe)}catch(G){console.error("Error fetching inventory:",G)}},k=async({task:G,usersMap:oe={},itemsMap:pe={}})=>{try{const{id:ge,title:ne,description:le,date:we,deadline:de,priority:U,assignedUserDetails:W=[],assignedItems:te=[],userAcceptance:Q={},roleCompletion:re={}}=G,q=()=>{if((G.status||"").toLowerCase()==="complete")return"completed";const Qe=G.assignedUserDetails||[],yt=G.roleCompletion||{},ot=G.userAcceptance||{};return!Qe.length||!Qe.every(At=>ot[At.userId]==="accepted")?"pending":Qe.every(At=>(At.roles||[]).every(Ke=>yt[`${At.userId}_${Ke}`]==="done"))?"done":"accepted"},ae=Qe=>{const yt={pending:{bg:"#fef3c7",text:"#b45309"},accepted:{bg:"#fed7aa",text:"#b45309"},done:{bg:"#bfdbfe",text:"#1e40af"},completed:{bg:"#dcfce7",text:"#166534"}};return yt[Qe]||yt.pending},ue=(W||[]).map(({userId:Qe,roles:yt})=>{const ot=oe[Qe]||{},$t=Q[Qe]||"pending";return{id:Qe,name:ot.name||ot.displayName||"Unknown",photoURL:ot.photoURL||ot.avatarUrl||"",roles:yt||[],acceptanceStatus:$t}}),me=te.map(Qe=>pe[Qe]).filter(Boolean),_e=1080,Le=1360,Te=document.createElement("canvas");Te.width=_e,Te.height=Le;const Se=Te.getContext("2d");Se.fillStyle="#f3f4f6",Se.fillRect(0,0,_e,Le);const K=48,Ce=K,it=K,He=_e-K*2,Re=Le-K*2;Se.fillStyle="#ffffff";const Ze=24;Se.beginPath(),Se.moveTo(Ce+Ze,it),Se.lineTo(Ce+He-Ze,it),Se.quadraticCurveTo(Ce+He,it,Ce+He,it+Ze),Se.lineTo(Ce+He,it+Re-Ze),Se.quadraticCurveTo(Ce+He,it+Re,Ce+He-Ze,it+Re),Se.lineTo(Ce+Ze,it+Re),Se.quadraticCurveTo(Ce,it+Re,Ce,it+Re-Ze),Se.lineTo(Ce,it+Ze),Se.quadraticCurveTo(Ce,it,Ce+Ze,it),Se.closePath(),Se.fill(),Se.strokeStyle="#e5e7eb",Se.lineWidth=2,Se.stroke();const $e=40;let st=Ce+$e,Ae=it+$e;const Mt=He-$e*2,gt=(Qe,yt,ot,$t,Xe,At)=>{Se.font=At;const Ke=(Qe||"").split(" ");let ut="",Tt=$t;for(let Be=0;Be<Ke.length;Be++){const Ye=ut+Ke[Be]+" ";Se.measureText(Ye).width>yt&&Be>0?(Se.fillText(ut.trim(),ot,Tt),ut=Ke[Be]+" ",Tt+=Xe):ut=Ye}return ut&&(Se.fillText(ut.trim(),ot,Tt),Tt+=Xe),Tt};Se.fillStyle="#3f3f3f",Se.textBaseline="top",Ae=gt(ne||"New Task",Mt-200,st,Ae,56,'bold 48px system-ui, -apple-system, Roboto, "Segoe UI", "Helvetica Neue", Arial');const ze=q(),lt=ae(ze);Se.font='500 22px system-ui, -apple-system, Roboto, "Segoe UI", "Helvetica Neue", Arial';const Nt=Se.measureText(ze).width+32,Ge=48,xt=Ce+He-$e-Nt-8,tt=it+$e+8;Se.fillStyle=lt.bg,Se.fillRect(xt,tt,Nt,Ge),Se.fillStyle=lt.text,Se.fillText(ze,xt+16,tt+12),Ae+=16;const Dt=we||de;if(Dt){Se.fillStyle="#6b7280",Se.font='400 26px system-ui, -apple-system, Roboto, "Segoe UI", "Helvetica Neue", Arial';const Qe=new Date(Dt).toLocaleDateString(void 0,{day:"numeric",month:"short",year:"numeric"});Se.fillText(`Date: ${Qe}`,st,Ae),Ae+=44}if(le&&(Se.fillStyle="#374151",Ae=gt(le,Mt,st,Ae+12,36,'400 24px system-ui, -apple-system, Roboto, "Segoe UI", "Helvetica Neue", Arial')),(ue||[]).length){Ae+=16,Se.fillStyle="#3f3f3f",Se.font='600 26px system-ui, -apple-system, Roboto, "Segoe UI", "Helvetica Neue", Arial',Se.fillText("Assigned to:",st,Ae),Ae+=44;const Qe=72,yt=20,ot=ue.map(Xe=>new Promise(At=>{if(!Xe||!Xe.photoURL)return At(null);const Ke=new Image;Ke.crossOrigin="anonymous",Ke.onload=()=>At(Ke),Ke.onerror=()=>At(null),Ke.src=Xe.photoURL})),$t=await Promise.all(ot);for(let Xe=0;Xe<ue.length;Xe++){const At=ue[Xe],Ke=$t[Xe],ut=st,Tt=Ae;if(Se.save(),Se.beginPath(),Se.arc(ut+Qe/2,Tt+Qe/2,Qe/2,0,Math.PI*2),Se.closePath(),Se.fillStyle="#e5e7eb",Se.fill(),Ke){Se.save(),Se.beginPath(),Se.arc(ut+Qe/2,Tt+Qe/2,Qe/2,0,Math.PI*2),Se.clip();const zt=Math.max(Qe/Ke.width,Qe/Ke.height),en=Ke.width*zt,an=Ke.height*zt,Br=ut+(Qe-en)/2,Lr=Tt+(Qe-an)/2;Se.drawImage(Ke,Br,Lr,en,an),Se.restore()}else{Se.fillStyle="#6b7280",Se.font='600 26px system-ui, -apple-system, Roboto, "Segoe UI", "Helvetica Neue", Arial';const zt=(At.name||"").split(" ").map(en=>en[0]).slice(0,2).join("").toUpperCase();Se.fillText(zt,ut+16,Tt+20)}Se.restore();const Be=ut+Qe+20;Se.fillStyle="#111827",Se.font='600 26px system-ui, -apple-system, Roboto, "Segoe UI", "Helvetica Neue", Arial',Se.fillText(At.name||"Unknown",Be,Tt+4);const Ye=At.acceptanceStatus;let ht,Jn,Bt;Ye==="accepted"?(ht=" Accepted",Jn="#dcfce7",Bt="#16a34a"):Ye==="rejected"?(ht=" Rejected",Jn="#fee2e2",Bt="#dc2626"):(ht=" Pending",Jn="#fef3c7",Bt="#b45309"),Se.font='500 22px system-ui, -apple-system, Roboto, "Segoe UI", "Helvetica Neue", Arial';const on=Se.measureText(ht).width+24,Ht=44,et=Ce+He-$e-on-8,Ft=Tt+10;Se.fillStyle=Jn,Se.fillRect(et,Ft,on,Ht),Se.fillStyle=Bt,Se.fillText(ht,et+12,Ft+10);const Fn=At.roles||[];let _n=Be;const Nn=Tt+40;Se.font='400 22px system-ui, -apple-system, Roboto, "Segoe UI", "Helvetica Neue", Arial';for(let zt=0;zt<Fn.length;zt++){const en=Fn[zt],an=`${At.id}_${en}`,Br=re[an]==="done",Lr=Br?` ${en}`:en,Zn=Se.measureText(Lr).width+20;Se.fillStyle=Br?"#d1fae5":"#f0f0f0",Se.fillRect(_n,Nn,Zn,36),Se.fillStyle=Br?"#059669":"#5b6b7d",Se.fillText(Lr,_n+10,Nn+24-6),_n+=Zn+12}Ae+=Qe+yt}}Te.toBlob(Qe=>{if(!Qe)return;const yt=URL.createObjectURL(Qe),ot=document.createElement("a");ot.href=yt,ot.download=`task-${ge||Date.now()}.png`,document.body.appendChild(ot),ot.click(),ot.remove(),setTimeout(()=>URL.revokeObjectURL(yt),3e3)},"image/png")}catch(ge){console.warn("generateAndDownloadTaskImage error",ge)}},L=G=>{s(oe=>({...oe,[G.target.name]:G.target.value}))},D=G=>{s(oe=>oe.assignedUsers.find(ge=>ge.userId===G)?{...oe,assignedUsers:oe.assignedUsers.filter(ge=>ge.userId!==G)}:{...oe,assignedUsers:[...oe.assignedUsers,{userId:G,roles:["videography"]}]})},z=(G,oe)=>{s(pe=>{const ge=pe.assignedUsers.map(ne=>{if(ne.userId!==G)return ne;const we=ne.roles.includes(oe)?ne.roles.filter(de=>de!==oe):[...ne.roles,oe];return{...ne,roles:we.length?we:[oe]}});return{...pe,assignedUsers:ge}})},X=G=>{s(oe=>({...oe,assignedItems:oe.assignedItems.includes(G)?oe.assignedItems.filter(pe=>pe!==G):[...oe.assignedItems,G]}))},j=async G=>{if(G.preventDefault(),c(!0),g({type:"",text:""}),!i.date&&!i.deadline){c(!1),g({type:"error",text:"Please select a date or a deadline."});return}try{const oe=await fi(Pt(qe,"works"),{title:i.title,description:i.description,date:i.date||null,deadline:i.deadline||null,dateType:o,priority:i.priority,assignedUsers:i.assignedUsers.map(de=>de.userId),assignedUserDetails:i.assignedUsers,assignedItems:i.assignedItems,createdAt:new Date().toISOString(),status:"pending"}),pe=i.assignedUsers.map(async({userId:de})=>{const W=(await Xs(Zt(qe,"users",de))).data();return{email:(W==null?void 0:W.email)||null,phone:(W==null?void 0:W.phoneNumber)||(W==null?void 0:W.phone)||null}}),ge=await Promise.all(pe),ne=ge.map(de=>de.email).filter(Boolean),le=ge.map(de=>de.phone).filter(Boolean),we={lines:[`Title: ${i.title}`,...i.date?[`Date: ${i.date}`]:[],...i.deadline?[`Deadline: ${i.deadline}`]:[],`Description: ${i.description}`]};if(ne.length>0){const de=we.lines,U=[`<p><b>Title:</b> ${i.title}</p>`,...i.date?[`<p><b>Date:</b> ${i.date}</p>`]:[],...i.deadline?[`<p><b>Deadline:</b> ${i.deadline}</p>`]:[],`<p><b>Description:</b> ${i.description}</p>`];await fi(Pt(qe,"mail"),{to:ne,message:{subject:`New work assigned: ${i.title}`,text:`You have been assigned to a new work:

`+de.join(`
`)+`

Kindly review and confirm the work by visiting the Videography Manager website.`,html:`<p>Hello,</p>
        <p>You have been assigned a new work. Please find the details below:</p> 
        ${U.join("")}
        <p>Kindly review and confirm the work by visiting the <a href="https://tmv.fotmv.online/">Videography Manager</a> Website</p> 
        <p>If you encounter any issues or need further assistance, feel free to contact me.</p> 
        <p>Thank you.</p> 
        
        <p>Best regards,</p>
        <p style="color:#A3A9AD">
          <strong>Mihiru Dahanayake</strong><br>
          <i>Acting Videography Department Head<br>FOT Media<br>Faculty Of Technology<br>Rajarata University of Sri Lanka<br>
          <a href="tel:+94703426554" style="color:#0066cc; text-decoration:none;">070 342 6554</a><br>
          <a href="mailto:mihirudahanayake@gmail.com" style="color:#0066cc; text-decoration:none;">mihiru.online@gmail.com</a></i><br>
        </p>`}})}if(le.length>0){const de=`Hello!

You have been assigned to a new work:

`+we.lines.join(`
`)+`

Kindly review and confirm the work by visiting the Videography Manager website: https://tmv.fotmv.online/

If you encounter any issues, feel free to contact me.

Best regards,
Mihiru Dahanayake
Acting Videography Department Head
FOT Media, Rajarata University
070 342 6554`;await fi(Pt(qe,"whatsapp"),{to:le,message:de})}g({type:"success",text:"Work assigned successfully!"});try{const de={};t.forEach(W=>{de[W.id]=W});const U={};n.forEach(W=>{U[W.id]=W}),k({task:{id:oe.id,title:i.title,description:i.description,date:i.date||null,deadline:i.deadline||null,priority:i.priority,assignedUserDetails:i.assignedUsers,assignedItems:i.assignedItems,status:"pending",userAcceptance:{},roleCompletion:{}},usersMap:de,itemsMap:U})}catch(de){console.warn("failed to generate task image",de)}s({title:"",description:"",date:"",deadline:"",priority:"medium",assignedUsers:[],assignedItems:[]}),a("date")}catch(oe){g({type:"error",text:oe.message})}finally{c(!1)}},S=G=>i.assignedUsers.some(oe=>oe.userId===G),T=G=>{var oe;return((oe=i.assignedUsers.find(pe=>pe.userId===G))==null?void 0:oe.roles)||[]},M=y.trim().toLowerCase(),A=t.filter(G=>{if(!M)return!0;const oe=(G.name||"").toLowerCase(),pe=(G.cardNumber||"").toLowerCase();return oe.includes(M)||pe.includes(M)}),I=b.trim().toLowerCase(),R=n.filter(G=>{if(!I)return!0;const oe=(G.itemName||"").toLowerCase(),pe=(G.itemNo||"").toLowerCase();return oe.includes(I)||pe.includes(I)});return d.jsxs("div",{className:"min-h-screen bg-gray-100",children:[d.jsx(In,{userType:"admin"}),d.jsx("main",{className:"container mx-auto px-4 py-6 sm:py-8",children:d.jsxs("div",{className:"max-w-3xl mx-auto bg-white rounded-lg shadow-md p-4 sm:p-8",children:[d.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-gray-800 mb-4 sm:mb-6",children:"Create and Assign Work"}),u.text&&d.jsx("div",{className:`mb-4 p-3 sm:p-4 rounded text-sm sm:text-base ${u.type==="success"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:u.text}),d.jsxs("form",{onSubmit:j,className:"space-y-4",children:[d.jsxs("div",{children:[d.jsxs("label",{className:"flex items-center gap-2 text-gray-700 font-semibold mb-2 text-sm sm:text-base",children:[d.jsx(uF,{}),d.jsx("span",{children:"Work Title"})]}),d.jsx("input",{type:"text",name:"title",value:i.title,onChange:L,required:!0,className:"w-full px-3 sm:px-4 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-green-500 text-sm sm:text-base"})]}),d.jsxs("div",{children:[d.jsxs("label",{className:"flex items-center gap-2 text-gray-700 font-semibold mb-2 text-sm sm:text-base",children:[d.jsx(rF,{}),d.jsx("span",{children:"Description"})]}),d.jsx("textarea",{name:"description",value:i.description,onChange:L,required:!0,rows:"4",className:"w-full px-3 sm:px-4 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-green-500 text-sm sm:text-base"})]}),d.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsxs("label",{className:"flex items-center gap-2 text-gray-700 font-semibold mb-2 text-sm sm:text-base",children:[d.jsx(fr,{}),d.jsx("span",{children:"Date / Deadline"})]}),d.jsxs("div",{className:"flex items-center gap-3 mb-2 text-xs sm:text-sm",children:[d.jsxs("label",{className:"flex items-center gap-1",children:[d.jsx("input",{type:"radio",name:"dateType",value:"date",checked:o==="date",onChange:G=>a(G.target.value),className:"w-4 h-4"}),d.jsx("span",{children:"Date"})]}),d.jsxs("label",{className:"flex items-center gap-1",children:[d.jsx("input",{type:"radio",name:"dateType",value:"deadline",checked:o==="deadline",onChange:G=>a(G.target.value),className:"w-4 h-4"}),d.jsx("span",{children:"Deadline"})]})]}),o==="date"&&d.jsx("input",{type:"date",name:"date",value:i.date,onChange:L,className:"w-full px-3 sm:px-4 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-green-500 text-sm sm:text-base"}),o==="deadline"&&d.jsx("input",{type:"date",name:"deadline",value:i.deadline,onChange:L,className:"w-full px-3 sm:px-4 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-green-500 text-sm sm:text-base"}),d.jsx("p",{className:"mt-1 text-[11px] text-gray-500",children:"At least one of date or deadline is required, but both are optional individually."})]}),d.jsxs("div",{children:[d.jsxs("label",{className:"flex items-center gap-2 text-gray-700 font-semibold mb-2 text-sm sm:text-base",children:[d.jsx(lF,{}),d.jsx("span",{children:"Priority"})]}),d.jsxs("select",{name:"priority",value:i.priority,onChange:L,className:"w-full px-3 sm:px-4 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-green-500 text-sm sm:text-base",children:[d.jsx("option",{value:"low",children:"Low"}),d.jsx("option",{value:"medium",children:"Medium"}),d.jsx("option",{value:"high",children:"High"}),d.jsx("option",{value:"urgent",children:"Urgent"})]})]})]}),d.jsxs("div",{children:[d.jsxs("label",{className:"flex items-center gap-2 text-gray-700 font-semibold mb-2 text-sm sm:text-base",children:[d.jsx(o5,{}),d.jsx("span",{children:"Assign Team Members"})]}),d.jsxs("div",{className:"relative mb-2",children:[d.jsx(bc,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 text-xs"}),d.jsx("input",{type:"text",placeholder:"Search by name or card...",value:y,onChange:G=>p(G.target.value),className:"w-full pl-8 pr-3 py-2 border border-gray-300 rounded text-sm focus:outline-none focus:ring-2 focus:ring-green-500"})]}),d.jsx("div",{className:"border border-gray-300 rounded p-3 sm:p-4 max-h-60 overflow-y-auto",children:A.length===0?d.jsx("p",{className:"text-gray-500 text-sm sm:text-base",children:"No users found"}):A.map(G=>{const oe=S(G.id),pe=T(G.id);return d.jsxs("div",{className:"mb-2 p-2 rounded hover:bg-gray-50",children:[d.jsxs("label",{className:"flex items-center cursor-pointer",children:[d.jsx("input",{type:"checkbox",checked:oe,onChange:()=>D(G.id),className:"mr-3 w-4 h-4"}),d.jsx("div",{className:"flex-1",children:d.jsxs("p",{className:"text-gray-700 text-sm sm:text-base",children:[G.name," ",d.jsxs("span",{className:"text-xs text-gray-500",children:["(",G.cardNumber||"-",")"]})]})})]}),oe&&d.jsx("div",{className:"mt-1 ml-7 flex flex-wrap gap-2 text-xs sm:text-sm",children:SF.map(ge=>d.jsx("button",{type:"button",onClick:()=>z(G.id,ge),className:`px-2 py-1 rounded border ${pe.includes(ge)?"bg-green-600 text-white border-green-600":"bg-white text-gray-700 border-gray-300"}`,children:ge},ge))})]},G.id)})}),d.jsxs("p",{className:"text-xs sm:text-sm text-gray-500 mt-2",children:["Selected: ",i.assignedUsers.length," member(s)"]})]}),d.jsxs("div",{children:[d.jsxs("label",{className:"flex items-center gap-2 text-gray-700 font-semibold mb-2 text-sm sm:text-base",children:[d.jsx(mf,{}),d.jsx("span",{children:"Assign Inventory Items (Optional)"})]}),d.jsxs("div",{className:"relative mb-2",children:[d.jsx(bc,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 text-xs"}),d.jsx("input",{type:"text",placeholder:"Search by item name or number...",value:b,onChange:G=>N(G.target.value),className:"w-full pl-8 pr-3 py-2 border border-gray-300 rounded text-sm focus:outline-none focus:ring-2 focus:ring-green-500"})]}),d.jsx("div",{className:"border border-gray-300 rounded p-3 sm:p-4 max-h-60 overflow-y-auto",children:R.length===0?d.jsx("p",{className:"text-gray-500 text-sm sm:text-base",children:"No items found"}):R.map(G=>d.jsxs("label",{className:"flex items-center mb-2 cursor-pointer hover:bg-gray-50 p-2 rounded",children:[d.jsx("input",{type:"checkbox",checked:i.assignedItems.includes(G.id),onChange:()=>X(G.id),className:"mr-3 w-4 h-4"}),d.jsxs("div",{className:"flex-1",children:[d.jsxs("p",{className:"text-gray-700 text-sm sm:text-base",children:[G.itemName," ",d.jsxs("span",{className:"text-xs text-gray-500",children:["(",G.itemNo,")"]})]}),G.details&&d.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:G.details})]})]},G.id))}),d.jsxs("p",{className:"text-xs sm:text-sm text-gray-500 mt-2",children:["Selected: ",i.assignedItems.length," item(s)"]})]}),d.jsx("button",{type:"submit",disabled:l||i.assignedUsers.length===0,className:"w-full bg-green-600 text-white py-2 sm:py-3 px-4 rounded font-semibold hover:bg-green-700 transition disabled:opacity-50 text-sm sm:text-base",children:l?"Creating Work...":"Create and Assign Work"})]})]})})]})},EF=()=>{const[t,e]=se.useState([]),[n,r]=se.useState({}),[i,s]=se.useState({}),[o,a]=se.useState(!0),[l,c]=se.useState(""),[u,g]=se.useState(""),[y,p]=se.useState(""),[b,N]=se.useState("accepted"),C=ji();se.useEffect(()=>{_()},[]);const _=async()=>{a(!0);try{const I=await Bn(Pt(qe,"users")),R={};I.docs.forEach(ne=>{R[ne.id]=ne.data()}),r(R);const G=await Bn(Pt(qe,"inventory")),oe={};G.docs.forEach(ne=>{oe[ne.id]=ne.data()}),s(oe);const ge=(await Bn(Pt(qe,"works"))).docs.map(ne=>({id:ne.id,...ne.data()}));e(ge)}catch(I){console.error("Error fetching data:",I)}finally{a(!1)}},k=async I=>{try{const R=Zt(qe,"works",I);await Xr(R,{status:"complete"}),e(G=>G.map(oe=>oe.id===I?{...oe,status:"complete"}:oe))}catch(R){console.error("Failed to mark task complete:",R)}},L=l.trim().toLowerCase(),D=I=>{const R={pending:"bg-red-100 text-red-800",accepted:"bg-orange-100 text-orange-800",done:"bg-blue-100 text-blue-800",completed:"bg-green-100 text-green-800"};return R[I]||R.pending},z=I=>{if((I.status||"").toLowerCase()==="complete")return"completed";const R=I.assignedUserDetails||[],G=I.roleCompletion||{},oe=I.userAcceptance||{};return!R.length||!R.every(ne=>oe[ne.userId]==="accepted")?"pending":R.every(ne=>(ne.roles||[]).every(le=>G[`${ne.userId}_${le}`]==="done"))?"done":"accepted"},X=t.filter(I=>{if(u||y){if(!I.date)return!1;const de=new Date(I.date),U=new Date(de.getTime()-de.getTimezoneOffset()*6e4).toISOString().slice(0,10);if(u&&U<u||y&&U>y)return!1}const R=z(I);if(b!=="all"&&R!==b)return!1;if(!L)return!0;const G=(I.title||"").toLowerCase(),oe=(I.assignedUsers||[]).map(de=>n[de]||{}),pe=oe.map(de=>(de.name||"").toLowerCase()),ge=oe.map(de=>(de.cardNumber||"").toLowerCase()),ne=G.includes(L),le=pe.some(de=>de.includes(L)),we=ge.some(de=>de.includes(L));return ne||le||we}).sort((I,R)=>{const G=I.date?new Date(I.date).getTime():0;return(R.date?new Date(R.date).getTime():0)-G}),j=X.filter(I=>(I.status||"incomplete")!=="complete"),S=X.filter(I=>(I.status||"incomplete")==="complete");if(o)return d.jsxs("div",{className:"min-h-screen bg-gray-100",children:[d.jsx(In,{userType:"admin"}),d.jsxs("div",{className:"flex flex-col justify-center items-center h-64",children:[d.jsx(Ms,{className:"animate-spin text-4xl text-blue-600 mb-4"}),d.jsx("p",{className:"text-gray-600",children:"Loading tasks..."})]})]});const T=(I,R)=>{const oe=(I.userAcceptance||{})[R]||"pending";return oe==="accepted"?d.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-green-100 text-green-800 text-[11px] font-semibold",children:[d.jsx(la,{className:"text-[10px]"}),"Accepted"]}):oe==="rejected"?d.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-red-100 text-red-800 text-[11px] font-semibold",children:[d.jsx(Nl,{className:"text-[10px]"}),"Rejected"]}):d.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-yellow-100 text-yellow-800 text-[11px] font-semibold",children:[d.jsx(O2,{className:"text-[10px]"}),"Pending"]})},M=(I,R=!1)=>{var ne;const G=z(I),oe=I.assignedUserDetails||[],pe=I.roleCompletion||{},ge=I.assignedItems||[];return d.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 sm:p-6 hover:shadow-xl transition cursor-pointer",onClick:()=>C(`/tasks/${I.id}`),children:[d.jsxs("div",{className:"flex justify-between items-start mb-3",children:[d.jsxs("div",{className:"flex-1 pr-2",children:[d.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-gray-800",children:I.title||"Task"}),d.jsxs("p",{className:"mt-1 text-xs sm:text-sm text-gray-500 capitalize",children:["Priority: ",I.priority||"medium"]})]}),d.jsx("span",{className:`px-2 sm:px-3 py-1 rounded-full text-xs font-semibold ${D(G)}`,children:G})]}),I.description&&d.jsx("p",{className:"text-gray-600 mb-4 text-sm sm:text-base line-clamp-3",children:I.description}),(I.date||I.deadline)&&d.jsx("div",{className:"mb-3",children:d.jsxs("div",{className:"flex flex-col gap-1 text-xs sm:text-sm text-gray-500",children:[I.date&&d.jsxs("p",{className:"flex items-center gap-2",children:[d.jsx(fr,{}),d.jsxs("span",{children:["Date:"," ",new Date(I.date).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"})]})]}),I.deadline&&d.jsxs("p",{className:"flex items-center gap-2",children:[d.jsx(fr,{}),d.jsxs("span",{children:["Deadline:"," ",new Date(I.deadline).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"})]})]})]})}),d.jsxs("div",{className:"mb-3",children:[d.jsx("div",{className:"flex items-center justify-between mb-2",children:d.jsxs("div",{className:"flex items-center gap-2 text-xs sm:text-sm font-semibold text-gray-700",children:[d.jsx(o5,{}),d.jsx("span",{children:"Assigned to:"})]})}),d.jsxs("div",{className:"space-y-2",children:[oe.map(le=>{const we=le.userId,de=le.roles||[],U=n[we]||{},W=U.name||"Unknown",te=U.photoURL||U.avatarUrl||null;return d.jsxs("div",{onClick:Q=>{Q.stopPropagation(),C(`/users/${we}`)},className:"bg-gray-50 px-2 py-1 rounded text-xs sm:text-sm cursor-pointer hover:bg-blue-50 transition",children:[d.jsxs("div",{className:"flex items-center justify-between gap-2",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[te?d.jsx("img",{src:te,alt:W,className:"w-7 h-7 rounded-full object-cover border border-white shadow-sm"}):d.jsx("div",{className:"w-7 h-7 rounded-full bg-blue-500 flex items-center justify-center text-xs font-bold text-white",children:W.charAt(0).toUpperCase()}),d.jsx("p",{className:"font-semibold text-gray-800",children:W})]}),T(I,we)]}),d.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:de.map(Q=>{const re=`${we}_${Q}`,q=pe[re]==="done";return d.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 rounded text-xs ${q?"bg-green-100 text-green-800":"bg-gray-200 text-gray-700"}`,children:[q&&d.jsx(la,{className:"text-xs"}),Q]},Q)})})]},we)}),oe.length===0&&((ne=I.assignedUsers)==null?void 0:ne.map(le=>{const we=n[le]||{},de=we.name||"Unknown",U=we.photoURL||we.avatarUrl||null;return d.jsxs("div",{onClick:W=>{W.stopPropagation(),C(`/users/${le}`)},className:"bg-gray-50 px-2 py-1 rounded text-xs sm:text-sm flex items-center justify-between cursor-pointer hover:bg-blue-50 transition",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[U?d.jsx("img",{src:U,alt:de,className:"w-7 h-7 rounded-full object-cover border border-white shadow-sm"}):d.jsx("div",{className:"w-7 h-7 rounded-full bg-blue-500 flex items-center justify-center text-xs font-bold text-white",children:de.charAt(0).toUpperCase()}),d.jsx("span",{className:"text-gray-700",children:de})]}),T(I,le)]},le)}))]})]}),ge.length>0&&d.jsxs("div",{className:"mb-3",children:[d.jsxs("div",{className:"flex items-center gap-2 text-xs sm:text-sm font-semibold text-gray-700 mb-2",children:[d.jsx(mf,{}),d.jsx("span",{children:"Items:"})]}),d.jsx("div",{className:"flex flex-wrap gap-2",children:ge.map(le=>{const we=i[le];return d.jsx("span",{className:"bg-blue-50 px-2 py-1 rounded text-xs sm:text-sm text-blue-800",children:we?`${we.itemName} (${we.itemNo})`:"Unknown item"},le)})})]}),!R&&d.jsxs("button",{type:"button",onClick:le=>{le.stopPropagation(),k(I.id)},className:"mt-2 inline-flex items-center gap-2 px-3 py-1.5 rounded bg-green-600 text-white text-xs sm:text-sm hover:bg-green-700",children:[d.jsx(la,{}),"Mark as complete"]}),R&&d.jsx("p",{className:"mt-2 text-xs sm:text-sm text-green-700 font-semibold",children:"Completed"})]},I.id)},A=j.length>0||S.length>0;return d.jsxs("div",{className:"min-h-screen bg-gray-100",children:[d.jsx(In,{userType:"admin"}),d.jsxs("main",{className:"container mx-auto px-4 py-6 sm:py-8",children:[d.jsxs("div",{className:"flex flex-col gap-3 mb-4 sm:mb-6",children:[d.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-gray-800",children:"All Tasks"}),d.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3",children:[d.jsxs("div",{className:"relative flex-1 min-w-0",children:[d.jsx(bc,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 text-sm"}),d.jsx("input",{type:"text",placeholder:"Search title, user name, or card...",value:l,onChange:I=>c(I.target.value),className:"w-full pl-9 pr-3 py-2 border rounded text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-2 sm:flex sm:gap-2 w-full sm:w-auto",children:[d.jsx("input",{type:"date",value:u,onChange:I=>g(I.target.value),className:"w-full px-2 py-2 border rounded text-xs sm:text-sm focus:outline-none focus:ring-2 focus:ring-blue-500","aria-label":"Start date"}),d.jsx("input",{type:"date",value:y,onChange:I=>p(I.target.value),className:"w-full px-2 py-2 border rounded text-xs sm:text-sm focus:outline-none focus:ring-2 focus:ring-blue-500","aria-label":"End date"}),d.jsxs("select",{value:b,onChange:I=>N(I.target.value),className:"w-full px-2 py-2 border rounded text-xs sm:text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[d.jsx("option",{value:"accepted",children:"Accepted"}),d.jsx("option",{value:"pending",children:"Pending"}),d.jsx("option",{value:"done",children:"Done"}),d.jsx("option",{value:"completed",children:"Completed"}),d.jsx("option",{value:"all",children:"All status"})]})]})]})]}),A?d.jsxs(d.Fragment,{children:[j.length>0&&d.jsxs("section",{className:"mb-6",children:[d.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-gray-800 mb-3",children:"Incomplete / waiting for admin"}),d.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:j.map(I=>M(I,!1))})]}),S.length>0&&d.jsxs("section",{children:[d.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-gray-800 mb-3",children:"Completed tasks"}),d.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:S.map(I=>M(I,!0))})]})]}):d.jsx("div",{className:"bg-white rounded-lg shadow-md p-6 sm:p-8 text-center",children:d.jsx("p",{className:"text-gray-600 text-sm sm:text-base",children:"No tasks match your filters."})})]})]})},TF=xA(),IF=()=>{const[t,e]=se.useState(null),[n,r]=se.useState(null),[i,s]=se.useState("loading"),[o,a]=se.useState(!1),[l,c]=se.useState(!1),[u,g]=se.useState(!1),[y,p]=se.useState(!1),[b,N]=se.useState(""),[C,_]=se.useState(""),[k,L]=se.useState(""),[D,z]=se.useState(""),[X,j]=se.useState({newPassword:"",confirmPassword:""}),[S,T]=se.useState(!1),[M,A]=se.useState(""),I=ji();se.useEffect(()=>{const te=Rc(Ii,async Q=>{if(!Q){s("no-auth"),e(null);return}try{const re=await Xs(Zt(qe,"users",Q.uid));if(re.exists()){const q={id:Q.uid,...re.data(),email:Q.email||""};e(q),r(q)}s("ready")}catch(re){console.error(re),s("error")}});return()=>te()},[]);const R=async()=>{await bN(Ii),I("/")},G=te=>{if(!o)return;const{name:Q,value:re}=te.target;e(q=>({...q,[Q]:re}))},oe=()=>{N(""),_(""),A(""),r(t),a(!0)},pe=()=>{N(""),_(""),A(""),e(n),a(!1)},ge=async te=>{if(te.preventDefault(),!!(t!=null&&t.id)){g(!0),N(""),_("");try{const Q=Zt(qe,"users",t.id),{id:re,userType:q,createdAt:ae,email:ue,...me}=t;await Xr(Q,me),_("Profile updated successfully."),a(!1),r(t)}catch(Q){console.error(Q),N("Failed to update profile.")}finally{g(!1)}}},ne=()=>{L(""),z(""),j({newPassword:"",confirmPassword:""}),c(!0)},le=()=>{L(""),z(""),j({newPassword:"",confirmPassword:""}),c(!1)},we=async te=>{if(te.preventDefault(),L(""),z(""),X.newPassword.length<6){L("New password must be at least 6 characters.");return}if(X.newPassword!==X.confirmPassword){L("New password and confirm password do not match.");return}const Q=Ii.currentUser;if(!Q){L("You are not logged in.");return}p(!0);try{await $R(Q,X.newPassword),z("Password updated successfully."),c(!1),j({newPassword:"",confirmPassword:""})}catch(re){console.error(re),L(re.message||"Failed to update password.")}finally{p(!1)}},de=async te=>{var q;const Q=(q=te.target.files)==null?void 0:q[0];if(!Q)return;const re=Ii.currentUser;if(!re){A("You are not logged in.");return}A(""),T(!0);try{const ae=`memberProfileImage/${re.uid}/${Date.now()}-${Q.name}`,ue=g9(TF,ae),me=await p9(ue,Q),_e=await m9(me.ref),Le=Zt(qe,"users",re.uid);await Xr(Le,{photoURL:_e}),e(Te=>Te&&{...Te,photoURL:_e}),_("Profile picture updated.")}catch(ae){console.error(ae),A("Failed to upload profile picture.")}finally{T(!1),te.target.value=""}},U=(t==null?void 0:t.userType)==="admin"?"admin":"user",W="w-full px-3 py-2 border rounded text-sm focus:outline-none focus:ring-2 focus:ring-blue-500";return d.jsxs("div",{className:"min-h-screen bg-gray-100",children:[d.jsx(In,{userType:U}),d.jsxs("main",{className:"container mx-auto px-4 py-6 sm:py-8 max-w-2xl",children:[d.jsxs("div",{className:"flex items-center justify-between mb-6",children:[d.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-800",children:"Profile"}),d.jsx("button",{onClick:R,className:"text-xs sm:text-sm px-3 py-1 rounded bg-red-600 text-white hover:bg-red-700",children:"Logout"})]}),i==="loading"&&d.jsx("p",{className:"text-gray-600 text-sm sm:text-base",children:"Loading profile..."}),i==="no-auth"&&d.jsx("p",{className:"text-gray-600 text-sm sm:text-base",children:"You are not logged in."}),i==="error"&&d.jsx("p",{className:"text-red-600 text-sm sm:text-base",children:"Failed to load profile information."}),i==="ready"&&t&&d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 sm:p-6 flex items-center gap-4 mb-6",children:[d.jsx("div",{className:"flex-shrink-0",children:t.photoURL?d.jsx("img",{src:t.photoURL,alt:t.name||"Profile",style:{width:80,height:80,borderRadius:"50%",objectFit:"cover",border:"2px solid #e5e7eb",display:"block",backgroundColor:"#f3f4f6"}}):d.jsx("div",{className:"w-20 h-20 rounded-full bg-gray-300 flex items-center justify-center text-xl font-semibold text-white",children:(t.name||"U").charAt(0).toUpperCase()})}),d.jsxs("div",{className:"flex-1",children:[d.jsx("p",{className:"text-lg font-semibold text-gray-800",children:t.name||"Unnamed user"}),d.jsx("p",{className:"text-sm text-gray-600",children:t.email}),d.jsx("p",{className:"text-xs text-gray-500 mt-1 capitalize",children:t.userType||"user"}),o&&d.jsxs("div",{className:"mt-3",children:[d.jsx("label",{className:"block text-xs font-semibold text-gray-700 mb-1",children:"Change profile picture"}),d.jsx("input",{type:"file",accept:"image/*",onChange:de,className:`text-xs text-stone-500\r
                        file:mr-3 file:py-1 file:px-3 file:border file:border-gray-300\r
                        file:text-xs file:font-medium\r
                        file:bg-stone-50 file:text-stone-700\r
                        hover:file:cursor-pointer hover:file:bg-blue-50 hover:file:text-blue-700`}),S&&d.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Uploading image..."}),M&&d.jsx("p",{className:"text-xs text-red-600 mt-1",children:M})]})]})]}),d.jsxs("form",{onSubmit:ge,className:"bg-white rounded-lg shadow-md p-4 sm:p-6 space-y-3 mb-6",children:[d.jsxs("div",{className:"flex justify-between items-center mb-2",children:[d.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"Profile details"}),o?d.jsxs("div",{className:"flex gap-2",children:[d.jsx("button",{type:"submit",disabled:u,className:"text-sm px-3 py-1 rounded bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-50",children:u?"Saving...":"Save"}),d.jsx("button",{type:"button",onClick:pe,className:"text-sm px-3 py-1 rounded bg-gray-300 text-gray-800 hover:bg-gray-400",children:"Cancel"})]}):d.jsx("button",{type:"button",onClick:oe,className:"text-sm px-3 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",children:"Edit"})]}),b&&d.jsx("div",{className:"p-2 rounded bg-red-100 text-red-700 text-sm",children:b}),C&&d.jsx("div",{className:"p-2 rounded bg-green-100 text-green-700 text-sm",children:C}),d.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Name"}),d.jsx("input",{type:"text",name:"name",value:t.name||"",onChange:G,className:W,disabled:!o})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Email"}),d.jsx("input",{type:"email",name:"email",value:t.email||"",onChange:G,className:W,disabled:!0})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Phone"}),d.jsx("input",{type:"tel",name:"phoneNo",value:t.phoneNo||"",onChange:G,className:W,disabled:!o})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Batch"}),d.jsxs("select",{name:"batch",value:t.batch||"20/21",onChange:G,className:W,disabled:!o,children:[d.jsx("option",{value:"20/21",children:"20/21"}),d.jsx("option",{value:"21/22",children:"21/22"}),d.jsx("option",{value:"22/23",children:"22/23"}),d.jsx("option",{value:"23/24",children:"23/24"})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Study department"}),d.jsxs("select",{name:"studyDepartment",value:t.studyDepartment||"ITT",onChange:G,className:W,disabled:!o,children:[d.jsx("option",{value:"ITT",children:"ITT"}),d.jsx("option",{value:"EET",children:"EET"}),d.jsx("option",{value:"MTT",children:"MTT"}),d.jsx("option",{value:"BPT",children:"BPT"}),d.jsx("option",{value:"Food",children:"Food"})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Gender"}),d.jsxs("select",{name:"gender",value:t.gender||"male",onChange:G,className:W,disabled:!o,children:[d.jsx("option",{value:"male",children:"Male"}),d.jsx("option",{value:"female",children:"Female"})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Registration number"}),d.jsx("input",{type:"text",name:"registrationNumber",value:t.registrationNumber||"",onChange:G,className:W,disabled:!o})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Card"}),d.jsx("input",{type:"text",name:"cardNumber",value:t.cardNumber||"",onChange:G,className:W,disabled:!o})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Birthday"}),d.jsx("input",{type:"date",name:"birthday",value:t.birthday||"",onChange:G,className:W,disabled:!o})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Work department"}),d.jsxs("select",{name:"department",value:t.department||"videography",onChange:G,className:W,disabled:!o,children:[d.jsx("option",{value:"videography",children:"Videography"}),d.jsx("option",{value:"photography",children:"Photography"})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"First priority (work)"}),d.jsxs("select",{name:"firstPriority",value:t.firstPriority||"videography",onChange:G,className:W,disabled:!o,children:[d.jsx("option",{value:"videography",children:"Videography"}),d.jsx("option",{value:"photography",children:"Photography"})]})]})]})]}),d.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 sm:p-6 space-y-3",children:[d.jsxs("div",{className:"flex justify-between items-center mb-1",children:[d.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"Change password"}),l?d.jsx("button",{type:"button",onClick:le,className:"text-sm px-3 py-1 rounded bg-gray-300 text-gray-800 hover:bg-gray-400",children:"Cancel"}):d.jsx("button",{type:"button",onClick:ne,className:"text-sm px-3 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",children:"Change"})]}),k&&d.jsx("div",{className:"p-2 rounded bg-red-100 text-red-700 text-sm",children:k}),D&&d.jsx("div",{className:"p-2 rounded bg-green-100 text-green-700 text-sm",children:D}),l&&d.jsxs("form",{onSubmit:we,className:"space-y-3 mt-2",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"New password"}),d.jsx("input",{type:"password",name:"newPassword",value:X.newPassword,onChange:te=>j(Q=>({...Q,newPassword:te.target.value})),className:W,minLength:6,required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Confirm new password"}),d.jsx("input",{type:"password",name:"confirmPassword",value:X.confirmPassword,onChange:te=>j(Q=>({...Q,confirmPassword:te.target.value})),className:W,minLength:6,required:!0})]}),d.jsx("button",{type:"submit",disabled:y,className:"w-full bg-blue-600 text-white py-2 rounded font-semibold text-sm hover:bg-blue-700 disabled:opacity-50",children:y?"Updating...":"Update password"})]})]})]})]})]})},kF=()=>{const[t,e]=se.useState([]),[n,r]=se.useState(!0),[i,s]=se.useState(""),[o,a]=se.useState("all"),l=ji();se.useEffect(()=>{(async()=>{try{const p=(await Bn(Pt(qe,"users"))).docs.map(b=>({id:b.id,...b.data()}));e(p)}catch(y){console.error("Error loading users:",y)}finally{r(!1)}})()},[]);const c=i.trim().toLowerCase(),u=t.filter(g=>{if(o!=="all"&&(g.batch||"")!==o)return!1;if(!c)return!0;const y=(g.name||"").toLowerCase(),p=(g.cardNumber||"").toLowerCase();return y.includes(c)||p.includes(c)});return d.jsxs("div",{className:"min-h-screen bg-gray-100",children:[d.jsx(In,{userType:"admin"}),d.jsxs("main",{className:"container mx-auto px-4 py-6 sm:py-8 max-w-4xl",children:[d.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-800 mb-4",children:"Manage users"}),d.jsxs("div",{className:"mb-4 flex flex-col sm:flex-row gap-3 sm:items-center",children:[d.jsxs("div",{className:"flex-1 relative",children:[d.jsx(bc,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 text-sm"}),d.jsx("input",{type:"text",placeholder:"Search by name or card...",value:i,onChange:g=>s(g.target.value),className:"w-full pl-9 pr-3 py-2 border rounded text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),d.jsx("div",{className:"w-full sm:w-40",children:d.jsxs("select",{value:o,onChange:g=>a(g.target.value),className:"w-full px-3 py-2 border rounded text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[d.jsx("option",{value:"all",children:"All batches"}),d.jsx("option",{value:"20/21",children:"20/21"}),d.jsx("option",{value:"21/22",children:"21/22"}),d.jsx("option",{value:"22/23",children:"22/23"}),d.jsx("option",{value:"23/24",children:"23/24"})]})})]}),n?d.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[d.jsx(Ms,{className:"animate-spin"}),d.jsx("span",{children:"Loading users..."})]}):u.length===0?d.jsx("p",{className:"text-gray-600 text-sm sm:text-base",children:"No users match your search."}):d.jsx("div",{className:"bg-white rounded-lg shadow-md divide-y",children:u.map(g=>d.jsxs("button",{onClick:()=>l(`/users/${g.id}`),className:"w-full text-left px-4 py-3 flex items-center justify-between hover:bg-gray-50",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[g.photoURL?d.jsx("img",{src:g.photoURL,alt:g.name||"User",className:"w-10 h-10 rounded-full object-cover border border-gray-200 bg-gray-100"}):d.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center text-blue-600",children:d.jsx(QA,{})}),d.jsxs("div",{children:[d.jsx("p",{className:"font-semibold text-gray-800 text-sm sm:text-base",children:g.name||"No name"}),d.jsxs("p",{className:"flex items-center gap-1 text-xs sm:text-sm text-gray-600",children:[d.jsx(aF,{})," ",g.email]}),d.jsxs("p",{className:"text-xs text-gray-500",children:["Card: ",g.cardNumber||"-","  Batch: ",g.batch||"-"]})]})]}),d.jsx("span",{className:"text-xs sm:text-sm text-gray-500",children:g.userType||"user"})]},g.id))})]})]})},CF=()=>{const{userId:t}=tg(),e=ji(),[n,r]=se.useState(null),[i,s]=se.useState([]),[o,a]=se.useState(!0);se.useEffect(()=>{(async()=>{try{const g=await Xs(Zt(qe,"users",t));g.exists()&&r({id:t,...g.data()});const b=(await Bn(Pt(qe,"works"))).docs.map(N=>({id:N.id,...N.data()})).filter(N=>N.assignedUsers?Array.isArray(N.assignedUsers)?N.assignedUsers.includes(t):N.assignedUsers===t:!1);b.sort((N,C)=>{const _=N.date?new Date(N.date).getTime():0;return(C.date?new Date(C.date).getTime():0)-_}),s(b)}catch(g){console.error("Error loading user details:",g)}finally{a(!1)}})()},[t]);const l=u=>{const y=(u.assignedUserDetails||[]).find(p=>p.userId===t);return(y==null?void 0:y.roles)||[]},c=(u,g)=>{const y=`${t}_${g}`;return(u.roleCompletion||{})[y]==="done"};return d.jsxs("div",{className:"min-h-screen bg-gray-100",children:[d.jsx(In,{userType:"admin"}),d.jsxs("main",{className:"container mx-auto px-4 py-6 sm:py-8 max-w-4xl",children:[o&&d.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[d.jsx(Ms,{className:"animate-spin"}),d.jsx("span",{children:"Loading user..."})]}),!o&&!n&&d.jsx("p",{className:"text-gray-600 text-sm sm:text-base",children:"User not found."}),!o&&n&&d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[n.photoURL?d.jsx("img",{src:n.photoURL,alt:n.name||"User",className:"w-16 h-16 sm:w-20 sm:h-20 rounded-full object-cover border border-gray-200 bg-gray-100"}):d.jsx("div",{className:"w-16 h-16 sm:w-20 sm:h-20 rounded-full bg-gray-300 flex items-center justify-center text-2xl font-semibold text-white",children:(n.name||"U").charAt(0).toUpperCase()}),d.jsxs("div",{children:[d.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-800",children:n.name||"User details"}),d.jsx("p",{className:"text-sm sm:text-base text-gray-600",children:n.email})]})]}),d.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 sm:p-6 mb-6 text-sm sm:text-base space-y-2",children:[d.jsxs("p",{children:[d.jsx("span",{className:"font-semibold",children:"Phone:"})," ",n.phoneNo||"-"]}),d.jsxs("p",{children:[d.jsx("span",{className:"font-semibold",children:"Batch:"})," ",n.batch||"-"]}),d.jsxs("p",{children:[d.jsx("span",{className:"font-semibold",children:"Study department:"})," ",n.studyDepartment||"-"]}),d.jsxs("p",{children:[d.jsx("span",{className:"font-semibold",children:"Gender:"})," ",n.gender||"-"]}),d.jsxs("p",{children:[d.jsx("span",{className:"font-semibold",children:"Registration no:"})," ",n.registrationNumber||"-"]}),d.jsxs("p",{children:[d.jsx("span",{className:"font-semibold",children:"Card:"})," ",n.cardNumber||"-"]}),d.jsxs("p",{children:[d.jsx("span",{className:"font-semibold",children:"Work departments:"})," ",Array.isArray(n.departments)?n.departments.join(", "):n.department||"-"]}),d.jsxs("p",{children:[d.jsx("span",{className:"font-semibold",children:"First priority:"})," ",n.firstPriority||"-"]}),d.jsxs("p",{children:[d.jsx("span",{className:"font-semibold",children:"User type:"})," ",n.userType||"user"]})]}),d.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-3",children:"Task history"}),i.length===0?d.jsx("p",{className:"text-gray-600 text-sm sm:text-base",children:"No tasks for this user."}):d.jsx("div",{className:"space-y-3",children:i.map(u=>{const g=l(u),y=u.status||"incomplete";return d.jsxs("div",{onClick:()=>e(`/tasks/${u.id}`),className:"bg-white rounded-lg shadow p-3 sm:p-4 text-sm sm:text-base cursor-pointer hover:shadow-md hover:bg-gray-50 transition",children:[d.jsxs("div",{className:"flex justify-between items-start mb-2",children:[d.jsxs("div",{className:"flex-1",children:[d.jsx("h3",{className:"font-semibold text-gray-800",children:u.title||"Untitled task"}),u.date&&d.jsxs("span",{className:"flex items-center gap-1 text-xs text-gray-500 mt-1",children:[d.jsx(fr,{})," ",new Date(u.date).toLocaleDateString()]})]}),d.jsx("span",{className:`px-2 py-1 rounded text-xs font-semibold capitalize ${y==="complete"?"bg-green-100 text-green-800":y==="done"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:y})]}),u.description&&d.jsx("p",{className:"text-gray-700 text-sm mb-2",children:u.description}),g.length>0&&d.jsxs("div",{className:"mt-2",children:[d.jsx("p",{className:"text-xs font-semibold text-gray-700 mb-1",children:"Assigned work types:"}),d.jsx("div",{className:"flex flex-wrap gap-1",children:g.map(p=>{const b=c(u,p);return d.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 rounded text-xs ${b?"bg-green-100 text-green-800":"bg-gray-100 text-gray-700"}`,children:[b&&d.jsx(la,{className:"text-xs"}),p]},p)})})]})]},u.id)})})]})]})]})},PF=()=>{const[t,e]=se.useState(null),[n,r]=se.useState([]),[i,s]=se.useState([]),[o,a]=se.useState(!0);se.useEffect(()=>{const c=Rc(Ii,u=>{e(u||null)});return()=>c()},[]),se.useEffect(()=>{if(!t)return;(async()=>{a(!0);try{const y=(await Bn(Pt(qe,"works"))).docs.map(N=>({id:N.id,...N.data()})).filter(N=>N.status==="complete"&&Array.isArray(N.assignedUsers)&&N.assignedUsers.includes(t.uid));y.sort((N,C)=>{const _=N.date?new Date(N.date).getTime():0;return(C.date?new Date(C.date).getTime():0)-_}),r(y);const b=(await Bn(vc(Pt(qe,"rejectedWorks"),zd("userId","==",t.uid)))).docs.map(N=>({id:N.id,...N.data()}));b.sort((N,C)=>{const _=N.approvedAt?new Date(N.approvedAt).getTime():0;return(C.approvedAt?new Date(C.approvedAt).getTime():0)-_}),s(b)}catch(u){console.error("Error loading task history:",u)}finally{a(!1)}})()},[t]);const l=c=>{if(!t)return[];const g=(c.assignedUserDetails||[]).find(y=>y.userId===t.uid);return(g==null?void 0:g.roles)||[]};return d.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50",children:[d.jsx(In,{userType:"user"}),d.jsxs("main",{className:"container mx-auto px-4 py-8 max-w-4xl",children:[d.jsxs("div",{className:"mb-8",children:[d.jsx("h1",{className:"text-3xl sm:text-4xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-purple-600 mb-2",children:"Task History"}),d.jsx("p",{className:"text-gray-600 text-sm sm:text-base",children:"View all your completed and rejected tasks"})]}),o?d.jsxs("div",{className:"flex flex-col items-center justify-center py-20",children:[d.jsx(Ms,{className:"animate-spin text-5xl text-blue-600 mb-4"}),d.jsx("p",{className:"text-gray-600",children:"Loading history..."})]}):n.length===0&&i.length===0?d.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-12 text-center border border-gray-100",children:[d.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-blue-100 to-purple-100 rounded-full flex items-center justify-center mx-auto mb-4",children:d.jsx(fr,{className:"text-4xl text-blue-600"})}),d.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:"No History"}),d.jsx("p",{className:"text-gray-600",children:"You have no completed or rejected tasks yet."})]}):d.jsxs(d.Fragment,{children:[n.length>0&&d.jsxs("section",{className:"mb-8",children:[d.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[d.jsx("div",{className:"w-1 h-6 bg-gradient-to-b from-green-500 to-emerald-600 rounded-full"}),d.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-gray-800",children:"Completed Tasks"}),d.jsx("span",{className:"bg-gradient-to-r from-green-500 to-emerald-600 text-white text-xs font-bold px-3 py-1 rounded-full",children:n.length})]}),d.jsx("div",{className:"space-y-4",children:n.map(c=>{const u=l(c);return d.jsxs("div",{className:"bg-white rounded-2xl shadow-md p-5 border border-green-100",children:[d.jsxs("div",{className:"flex items-start justify-between mb-3",children:[d.jsxs("div",{className:"flex-1",children:[d.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-1",children:c.title||"Task"}),c.date&&d.jsxs("p",{className:"flex items-center gap-2 text-xs text-gray-500",children:[d.jsx(fr,{}),new Date(c.date).toLocaleDateString()]})]}),d.jsxs("div",{className:"flex items-center gap-2 text-green-600",children:[d.jsx(la,{className:"text-2xl"}),d.jsx("span",{className:"text-xs font-semibold",children:"Completed"})]})]}),c.description&&d.jsx("p",{className:"text-gray-700 text-sm mb-3",children:c.description}),d.jsx("div",{className:"flex flex-wrap gap-2",children:u.map(g=>d.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-semibold bg-green-100 text-green-800",children:g},g))})]},c.id)})})]}),i.length>0&&d.jsxs("section",{children:[d.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[d.jsx("div",{className:"w-1 h-6 bg-gradient-to-b from-red-500 to-rose-600 rounded-full"}),d.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-gray-800",children:"Rejected Tasks"}),d.jsx("span",{className:"bg-gradient-to-r from-red-500 to-rose-600 text-white text-xs font-bold px-3 py-1 rounded-full",children:i.length})]}),d.jsx("div",{className:"space-y-4",children:i.map(c=>d.jsxs("div",{className:"bg-white rounded-2xl shadow-md p-5 border border-red-100",children:[d.jsxs("div",{className:"flex items-start justify-between mb-3",children:[d.jsxs("div",{className:"flex-1",children:[d.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-1",children:c.title||"Task"}),c.date&&d.jsxs("p",{className:"flex items-center gap-2 text-xs text-gray-500",children:[d.jsx(fr,{}),new Date(c.date).toLocaleDateString()]})]}),d.jsxs("div",{className:"flex items-center gap-2 text-red-600",children:[d.jsx(Nl,{className:"text-2xl"}),d.jsx("span",{className:"text-xs font-semibold",children:"You Rejected"})]})]}),c.description&&d.jsx("p",{className:"text-gray-700 text-sm mb-3",children:c.description}),d.jsxs("div",{className:"bg-red-50 rounded-xl p-4 border border-red-100",children:[d.jsxs("div",{className:"flex items-start gap-2 mb-2",children:[d.jsx(cF,{className:"text-red-600 mt-0.5"}),d.jsxs("div",{className:"flex-1",children:[d.jsx("p",{className:"text-xs font-semibold text-red-800 mb-1",children:"Rejection Reason:"}),d.jsx("p",{className:"text-sm text-gray-700",children:c.rejectionReason||"-"})]})]}),d.jsxs("div",{className:"text-xs text-gray-500 mt-2 flex flex-col gap-1",children:[d.jsxs("p",{children:["Rejected: ",new Date(c.rejectedAt).toLocaleString()]}),d.jsxs("p",{children:["Approved: ",new Date(c.approvedAt).toLocaleString()]})]})]})]},c.id))})]})]})]})]})},RF=["videography","editing"],LF=()=>{const{taskId:t}=tg(),e=ji(),[n,r]=se.useState(null),[i,s]=se.useState([]),[o,a]=se.useState([]),[l,c]=se.useState([]),[u,g]=se.useState([]),[y,p]=se.useState(!0),[b,N]=se.useState(!1),[C,_]=se.useState(!1),[k,L]=se.useState(!1),[D,z]=se.useState(""),[X,j]=se.useState(""),[S,T]=se.useState(""),[M,A]=se.useState("");se.useEffect(()=>{(async()=>{p(!0);try{const q=(await Bn(Pt(qe,"users"))).docs.map(_e=>({id:_e.id,..._e.data()}));q.sort((_e,Le)=>{const Te=(_e.name||"").toLowerCase(),Se=(Le.name||"").toLowerCase();return Te.localeCompare(Se)}),s(q);const ue=(await Bn(Pt(qe,"inventory"))).docs.map(_e=>({id:_e.id,..._e.data()}));ue.sort((_e,Le)=>{const Te=(_e.itemName||"").toLowerCase(),Se=(Le.itemName||"").toLowerCase();return Te.localeCompare(Se)}),a(ue);const me=await Xs(Zt(qe,"works",t));if(me.exists()){const _e={id:me.id,...me.data()};r(_e),c(_e.assignedUserDetails||[]),g(_e.assignedItems||[]),(async()=>{try{const Le=_e.assignedItems||[];if(!Le.length||!("caches"in window))return;const Te=await caches.open("tmv-task-assets-v1"),Se=Le.map(K=>o.find(Ce=>Ce.id===K)).filter(Boolean).map(K=>K.imageUrl||K.photoURL||"").filter(K=>typeof K=="string"&&K.length);await Promise.all(Se.map(async K=>{try{const Ce=await fetch(K,{mode:"no-cors"});await Te.put(K,Ce.clone())}catch{}}))}catch(Le){console.warn("prefetch admin item images failed",Le)}})()}else z("Task not found.")}catch(re){console.error(re),z("Failed to load task.")}finally{p(!1)}})()},[t]);const I=async({task:Q,usersMap:re={},itemsMap:q={}})=>{try{const{id:ae,title:ue,description:me,date:_e,deadline:Le,assignedUserDetails:Te=[],assignedItems:Se=[],userAcceptance:K={},roleCompletion:Ce={}}=Q,it=()=>{if((Q.status||"").toLowerCase()==="complete")return"completed";const Be=Q.assignedUserDetails||[],Ye=Q.roleCompletion||{},ht=Q.userAcceptance||{};return!Be.length||!Be.every(on=>ht[on.userId]==="accepted")?"pending":Be.every(on=>(on.roles||[]).every(Ht=>Ye[`${on.userId}_${Ht}`]==="done"))?"done":"accepted"},He=Be=>{const Ye={pending:{bg:"#fef3c7",text:"#b45309"},accepted:{bg:"#fed7aa",text:"#b45309"},done:{bg:"#bfdbfe",text:"#1e40af"},completed:{bg:"#dcfce7",text:"#166534"}};return Ye[Be]||Ye.pending},Re=(Te||[]).map(({userId:Be,roles:Ye})=>{const ht=re[Be]||{},Jn=K[Be]||"pending";return{id:Be,name:ht.name||ht.displayName||"Unknown",photoURL:ht.photoURL||ht.avatarUrl||"",roles:Ye||[],acceptanceStatus:Jn}}),Ze=1080,$e=1360,st=document.createElement("canvas");st.width=Ze,st.height=$e;const Ae=st.getContext("2d");Ae.fillStyle="#f3f4f6",Ae.fillRect(0,0,Ze,$e);const Mt=48,gt=Mt,ze=Mt,lt=Ze-Mt*2,Nt=$e-Mt*2;Ae.fillStyle="#ffffff";const Ge=24;Ae.beginPath(),Ae.moveTo(gt+Ge,ze),Ae.lineTo(gt+lt-Ge,ze),Ae.quadraticCurveTo(gt+lt,ze,gt+lt,ze+Ge),Ae.lineTo(gt+lt,ze+Nt-Ge),Ae.quadraticCurveTo(gt+lt,ze+Nt,gt+lt-Ge,ze+Nt),Ae.lineTo(gt+Ge,ze+Nt),Ae.quadraticCurveTo(gt,ze+Nt,gt,ze+Nt-Ge),Ae.lineTo(gt,ze+Ge),Ae.quadraticCurveTo(gt,ze,gt+Ge,ze),Ae.closePath(),Ae.fill(),Ae.strokeStyle="#e5e7eb",Ae.lineWidth=2,Ae.stroke();const xt=40;let tt=gt+xt,Dt=ze+xt;const Qe=lt-xt*2,yt=(Be,Ye,ht,Jn,Bt,on)=>{Ae.font=on;const Ht=(Be||"").split(" ");let et="",Ft=Jn;for(let Fn=0;Fn<Ht.length;Fn++){const _n=et+Ht[Fn]+" ";Ae.measureText(_n).width>Ye&&Fn>0?(Ae.fillText(et.trim(),ht,Ft),et=Ht[Fn]+" ",Ft+=Bt):et=_n}return et&&(Ae.fillText(et.trim(),ht,Ft),Ft+=Bt),Ft};Ae.fillStyle="#3f3f3f",Ae.textBaseline="top",Dt=yt(ue||"Task",Qe-200,tt,Dt,56,'bold 48px system-ui, -apple-system, Roboto, "Segoe UI", "Helvetica Neue", Arial');const ot=it(),$t=He(ot);Ae.font='500 22px system-ui, -apple-system, Roboto, "Segoe UI", "Helvetica Neue", Arial';const Xe=Ae.measureText(ot).width+32,At=48,Ke=gt+lt-xt-Xe-8,ut=ze+xt+8;Ae.fillStyle=$t.bg,Ae.fillRect(Ke,ut,Xe,At),Ae.fillStyle=$t.text,Ae.fillText(ot,Ke+16,ut+12),Dt+=16;const Tt=_e||Le;if(Tt){Ae.fillStyle="#6b7280",Ae.font='400 26px system-ui, -apple-system, Roboto, "Segoe UI", "Helvetica Neue", Arial';const Be=new Date(Tt).toLocaleDateString(void 0,{day:"numeric",month:"short",year:"numeric"});Ae.fillText(`Date: ${Be}`,tt,Dt),Dt+=44}if(me&&(Ae.fillStyle="#374151",Dt=yt(me,Qe,tt,Dt+12,36,'400 24px system-ui, -apple-system, Roboto, "Segoe UI", "Helvetica Neue", Arial')),(Re||[]).length){Dt+=16,Ae.fillStyle="#3f3f3f",Ae.font='600 26px system-ui, -apple-system, Roboto, "Segoe UI", "Helvetica Neue", Arial',Ae.fillText("Assigned to:",tt,Dt),Dt+=44;const Be=72,Ye=20,ht=Re.map(Bt=>new Promise(on=>{if(!Bt||!Bt.photoURL)return on(null);const Ht=new Image;Ht.crossOrigin="anonymous",Ht.onload=()=>on(Ht),Ht.onerror=()=>on(null),Ht.src=Bt.photoURL})),Jn=await Promise.all(ht);for(let Bt=0;Bt<Re.length;Bt++){const on=Re[Bt],Ht=Jn[Bt],et=tt,Ft=Dt;if(Ae.save(),Ae.beginPath(),Ae.arc(et+Be/2,Ft+Be/2,Be/2,0,Math.PI*2),Ae.closePath(),Ae.fillStyle="#e5e7eb",Ae.fill(),Ht){Ae.save(),Ae.beginPath(),Ae.arc(et+Be/2,Ft+Be/2,Be/2,0,Math.PI*2),Ae.clip();const hn=Math.max(Be/Ht.width,Be/Ht.height),Ar=Ht.width*hn,jr=Ht.height*hn,zr=et+(Be-Ar)/2,xi=Ft+(Be-jr)/2;Ae.drawImage(Ht,zr,xi,Ar,jr),Ae.restore()}else{Ae.fillStyle="#6b7280",Ae.font='600 26px system-ui, -apple-system, Roboto, "Segoe UI", "Helvetica Neue", Arial';const hn=(on.name||"").split(" ").map(Ar=>Ar[0]).slice(0,2).join("").toUpperCase();Ae.fillText(hn,et+16,Ft+20)}Ae.restore();const Fn=et+Be+20;Ae.fillStyle="#111827",Ae.font='600 26px system-ui, -apple-system, Roboto, "Segoe UI", "Helvetica Neue", Arial',Ae.fillText(on.name||"Unknown",Fn,Ft+4);const _n=on.acceptanceStatus;let Nn,zt,en;_n==="accepted"?(Nn=" Accepted",zt="#dcfce7",en="#16a34a"):_n==="rejected"?(Nn=" Rejected",zt="#fee2e2",en="#dc2626"):(Nn=" Pending",zt="#fef3c7",en="#b45309"),Ae.font='500 22px system-ui, -apple-system, Roboto, "Segoe UI", "Helvetica Neue", Arial';const an=Ae.measureText(Nn).width+24,Br=44,Lr=gt+lt-xt-an-8,Zn=Ft+10;Ae.fillStyle=zt,Ae.fillRect(Lr,Zn,an,Br),Ae.fillStyle=en,Ae.fillText(Nn,Lr+12,Zn+10);const ni=on.roles||[];let Nr=Fn;const Sr=Ft+40;Ae.font='400 22px system-ui, -apple-system, Roboto, "Segoe UI", "Helvetica Neue", Arial';for(let hn=0;hn<ni.length;hn++){const Ar=ni[hn],jr=`${on.id}_${Ar}`,zr=Ce[jr]==="done",xi=zr?` ${Ar}`:Ar,gs=Ae.measureText(xi).width+20;Ae.fillStyle=zr?"#d1fae5":"#f0f0f0",Ae.fillRect(Nr,Sr,gs,36),Ae.fillStyle=zr?"#059669":"#5b6b7d",Ae.fillText(xi,Nr+10,Sr+24-6),Nr+=gs+12}Dt+=Be+Ye}}st.toBlob(Be=>{if(!Be)return;const Ye=URL.createObjectURL(Be),ht=document.createElement("a");ht.href=Ye,ht.download=`task-${ae||Date.now()}.png`,document.body.appendChild(ht),ht.click(),ht.remove(),setTimeout(()=>URL.revokeObjectURL(Ye),3e3)},"image/png")}catch(ae){console.warn("generateAndDownloadTaskImage error",ae)}},R=Q=>{if(!k)return;const re=l.find(q=>q.userId===Q);c(re?q=>q.filter(ae=>ae.userId!==Q):q=>[...q,{userId:Q,roles:["videography"]}])},G=(Q,re)=>{k&&c(q=>q.map(ae=>{if(ae.userId!==Q)return ae;const me=ae.roles.includes(re)?ae.roles.filter(_e=>_e!==re):[...ae.roles,re];return{...ae,roles:me.length?me:[re]}}))},oe=Q=>{k&&g(re=>re.includes(Q)?re.filter(q=>q!==Q):[...re,Q])},pe=Q=>{if(!k)return;const{name:re,value:q}=Q.target;r(ae=>({...ae,[re]:q}))},ge=async Q=>{if(Q.preventDefault(),!!n){if(N(!0),z(""),j(""),!n.date&&!n.deadline){N(!1),z("Please set a date or a deadline.");return}try{const{id:re,...q}=n,ae=n.assignedUsers||[],ue=l.map(_e=>_e.userId);await Xr(Zt(qe,"works",n.id),{...q,assignedUsers:ue,assignedUserDetails:l,assignedItems:u});const me=ue.filter(_e=>!ae.includes(_e));if(me.length>0){const _e=me.map(async Ce=>{const He=(await Xs(Zt(qe,"users",Ce))).data();return{email:(He==null?void 0:He.email)||null,phone:(He==null?void 0:He.phoneNumber)||(He==null?void 0:He.phone)||null}}),Le=await Promise.all(_e),Te=Le.map(Ce=>Ce.email).filter(Boolean),Se=Le.map(Ce=>Ce.phone).filter(Boolean),K={lines:[`Title: ${n.title}`,...n.date?[`Date: ${n.date}`]:[],...n.deadline?[`Deadline: ${n.deadline}`]:[],`Description: ${n.description}`]};if(Te.length>0){const Ce=K.lines,it=[`<p><b>Title:</b> ${n.title}</p>`,...n.date?[`<p><b>Date:</b> ${n.date}</p>`]:[],...n.deadline?[`<p><b>Deadline:</b> ${n.deadline}</p>`]:[],`<p><b>Description:</b> ${n.description}</p>`];await fi(Pt(qe,"mail"),{to:Te,message:{subject:`You were assigned to a work: ${n.title}`,text:`You have been assigned to the work "${n.title}".

`+Ce.join(`
`)+`

Kindly review and confirm the work by visiting the Videography Manager website.`,html:`<p>Hello,</p>
        <p>You have been assigned a work. Please find the details below:</p>
        ${it.join("")}
        <p>Kindly review and confirm the work by visiting the <a href="https://tmv.fotmv.online/">Videography Manager</a> Website</p>
        <p>If you encounter any issues or need further assistance, feel free to contact me.</p>
        <p>Thank you.</p>
        <p>Best regards,</p>
        <p style="color:#A3A9AD">
          <strong>Mihiru Dahanayake</strong><br>
          <i>Acting Videography Department Head<br>FOT Media<br>Faculty Of Technology<br>Rajarata University of Sri Lanka<br>
          <a href="tel:+94703426554" style="color:#0066cc; text-decoration:none;">070 342 6554</a><br>
          <a href="mailto:mihirudahanayake@gmail.com" style="color:#0066cc; text-decoration:none;">mihiru.online@gmail.com</a></i><br>
        </p>`}})}if(Se.length>0){const Ce=`Hello!

You have been assigned to a work:

`+K.lines.join(`
`)+`

Kindly review and confirm the work by visiting the Videography Manager website: https://tmv.fotmv.online/

If you encounter any issues, feel free to contact me.

Best regards,
Mihiru Dahanayake
Acting Videography Department Head
FOT Media, Rajarata University
070 342 6554`;await fi(Pt(qe,"whatsapp"),{to:Se,message:Ce})}}try{const _e={};i.forEach(Te=>{_e[Te.id]=Te});const Le={};o.forEach(Te=>{Le[Te.id]=Te}),await I({task:{id:n.id,title:n.title,description:n.description,date:n.date,deadline:n.deadline,assignedUserDetails:l,assignedItems:u,status:n.status||"pending",userAcceptance:n.userAcceptance||{},roleCompletion:n.roleCompletion||{}},usersMap:_e,itemsMap:Le})}catch(_e){console.warn("failed to generate task image",_e)}j("Task updated successfully."),L(!1)}catch(re){console.error(re),z("Failed to update task.")}finally{N(!1)}}},ne=async()=>{if(window.confirm("Are you sure you want to delete this task?")){_(!0),z(""),j("");try{await eA(Zt(qe,"works",t)),j("Task deleted successfully."),setTimeout(()=>e("/work-list"),1500)}catch(Q){console.error(Q),z("Failed to delete task.")}finally{_(!1)}}};if(y)return d.jsxs("div",{className:"min-h-screen bg-gray-100",children:[d.jsx(In,{userType:"admin"}),d.jsxs("div",{className:"flex flex-col justify-center items-center h-64",children:[d.jsx(Ms,{className:"animate-spin text-4xl text-blue-600 mb-4"}),d.jsx("p",{className:"text-gray-600",children:"Loading task..."})]})]});if(!n)return d.jsxs("div",{className:"min-h-screen bg-gray-100",children:[d.jsx(In,{userType:"admin"}),d.jsxs("main",{className:"container mx-auto px-4 py-6 sm:py-8 max-w-3xl",children:[d.jsx("p",{className:"text-gray-600 mb-4",children:D||"Task not found."}),d.jsx("button",{onClick:()=>e(-1),className:"px-4 py-2 rounded bg-blue-600 text-white text-sm hover:bg-blue-700",children:"Back"})]})]});const le=Q=>l.some(re=>re.userId===Q),we=Q=>{var re;return((re=l.find(q=>q.userId===Q))==null?void 0:re.roles)||[]},de=M.trim().toLowerCase(),U=i.filter(Q=>{if(!de)return!0;const re=(Q.name||"").toLowerCase(),q=(Q.cardNumber||"").toLowerCase();return re.includes(de)||q.includes(de)}),W=S.trim().toLowerCase(),te=o.filter(Q=>{if(!W)return!0;const re=(Q.itemName||"").toLowerCase(),q=(Q.itemNo||"").toLowerCase();return re.includes(W)||q.includes(W)});return d.jsxs("div",{className:"min-h-screen bg-gray-100",children:[d.jsx(In,{userType:"admin"}),d.jsxs("main",{className:"container mx-auto px-4 py-6 sm:py-8 max-w-3xl",children:[d.jsxs("div",{className:"flex items-center justify-between mb-4",children:[d.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-800",children:"Task details"}),d.jsxs("div",{className:"flex gap-2",children:[k?d.jsxs(d.Fragment,{children:[d.jsx("button",{onClick:ge,disabled:b,className:"px-3 py-1 rounded bg-blue-600 text-white text-sm hover:bg-blue-700 disabled:opacity-50",children:b?"Saving...":"Save"}),d.jsx("button",{onClick:()=>{L(!1),j(""),z(""),c(n.assignedUserDetails||[]),g(n.assignedItems||[])},className:"px-3 py-1 rounded bg-gray-300 text-gray-800 text-sm hover:bg-gray-400",children:"Cancel"})]}):d.jsxs(d.Fragment,{children:[d.jsx("button",{onClick:()=>{L(!0),z(""),j("")},className:"px-3 py-1 rounded bg-blue-600 text-white text-sm hover:bg-blue-700",children:"Edit"}),d.jsxs("button",{onClick:ne,disabled:C,className:"px-3 py-1 rounded bg-red-600 text-white text-sm hover:bg-red-700 disabled:opacity-50 inline-flex items-center gap-1",children:[d.jsx(KA,{}),C?"Deleting...":"Delete"]})]}),d.jsx("button",{onClick:()=>e(-1),className:"px-3 py-1 rounded bg-gray-200 text-gray-800 text-sm hover:bg-gray-300",children:"Back"})]})]}),D&&d.jsx("div",{className:"mb-3 p-2 rounded bg-red-100 text-red-700 text-sm",children:D}),X&&d.jsx("div",{className:"mb-3 p-2 rounded bg-green-100 text-green-700 text-sm",children:X}),d.jsxs("form",{className:"space-y-4",onSubmit:ge,children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Title"}),d.jsx("input",{type:"text",name:"title",value:n.title||"",onChange:pe,disabled:!k,className:"w-full px-3 py-2 border rounded text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Description"}),d.jsx("textarea",{name:"description",value:n.description||"",onChange:pe,disabled:!k,rows:3,className:"w-full px-3 py-2 border rounded text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),d.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Date"}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(fr,{className:"text-gray-500"}),d.jsx("input",{type:"date",name:"date",value:n.date?new Date(n.date).toISOString().slice(0,10):"",onChange:pe,disabled:!k,className:"flex-1 px-3 py-2 border rounded text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Deadline"}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(fr,{className:"text-gray-500"}),d.jsx("input",{type:"date",name:"deadline",value:n.deadline?new Date(n.deadline).toISOString().slice(0,10):"",onChange:pe,disabled:!k,className:"flex-1 px-3 py-2 border rounded text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),d.jsx("p",{className:"text-[11px] text-gray-500 mt-1",children:"Date or deadline is required, but each is optional on its own."})]})]}),d.jsxs("div",{children:[d.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:[d.jsx(o5,{className:"inline mr-2"}),"Assigned users and work types"]}),k&&d.jsxs("div",{className:"relative mb-3",children:[d.jsx(bc,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 text-xs"}),d.jsx("input",{type:"text",placeholder:"Search users by name or card...",value:M,onChange:Q=>A(Q.target.value),className:"w-full pl-8 pr-3 py-2 border rounded text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),d.jsx("div",{className:"bg-white rounded border p-3 max-h-80 overflow-y-auto",children:U.length===0?d.jsx("p",{className:"text-xs text-gray-500",children:"No users found."}):U.map(Q=>{const re=le(Q.id),q=we(Q.id);return d.jsxs("div",{className:"mb-2 p-2 rounded hover:bg-gray-50",children:[d.jsxs("label",{className:"flex items-center cursor-pointer",children:[d.jsx("input",{type:"checkbox",checked:re,onChange:()=>R(Q.id),disabled:!k,className:"mr-3 w-4 h-4"}),d.jsx("div",{className:"flex-1",children:d.jsxs("p",{className:"text-sm",children:[Q.name||"No name"," ",d.jsxs("span",{className:"text-xs text-gray-500",children:["(",Q.cardNumber||"-",")"]})]})})]}),re&&d.jsx("div",{className:"mt-1 ml-7 flex flex-wrap gap-2 text-xs sm:text-sm",children:RF.map(ae=>d.jsx("button",{type:"button",onClick:()=>G(Q.id,ae),disabled:!k,className:`px-2 py-1 rounded border ${q.includes(ae)?"bg-green-600 text-white border-green-600":"bg-white text-gray-700 border-gray-300"} ${k?"cursor-pointer":"cursor-default"}`,children:ae},ae))})]},Q.id)})})]}),d.jsxs("div",{children:[d.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:[d.jsx(mf,{className:"inline mr-2"}),"Assigned inventory items"]}),k&&d.jsxs("div",{className:"relative mb-2",children:[d.jsx(bc,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 text-xs"}),d.jsx("input",{type:"text",placeholder:"Search by item name or number...",value:S,onChange:Q=>T(Q.target.value),className:"w-full pl-8 pr-3 py-2 border rounded text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),d.jsx("div",{className:"bg-white rounded border p-3 max-h-60 overflow-y-auto",children:te.length===0?d.jsx("p",{className:"text-xs text-gray-500",children:"No items available."}):te.map(Q=>d.jsxs("label",{className:"flex items-center mb-2 cursor-pointer hover:bg-gray-50 p-2 rounded",children:[d.jsx("input",{type:"checkbox",checked:u.includes(Q.id),onChange:()=>oe(Q.id),disabled:!k,className:"mr-3 w-4 h-4"}),d.jsxs("div",{className:"flex-1",children:[d.jsxs("p",{className:"text-sm",children:[Q.itemName," ",d.jsxs("span",{className:"text-xs text-gray-500",children:["(",Q.itemNo,")"]})]}),Q.details&&d.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:Q.details})]})]},Q.id))}),d.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Selected: ",u.length," item(s)"]})]})]})]})]})},jF=()=>{const[t,e]=se.useState([]),[n,r]=se.useState(!0),[i,s]=se.useState(!1),[o,a]=se.useState(""),[l,c]=se.useState(!1),[u,g]=se.useState(null),[y,p]=se.useState({type:"",text:""}),[b,N]=se.useState({itemNo:"",itemName:"",details:""});se.useEffect(()=>{C()},[]);const C=async()=>{r(!0);try{const T=(await Bn(Pt(qe,"inventory"))).docs.map(M=>({id:M.id,...M.data()}));T.sort((M,A)=>{const I=(M.itemName||"").toLowerCase(),R=(A.itemName||"").toLowerCase();return I.localeCompare(R)}),e(T)}catch(S){console.error("Error fetching inventory:",S),p({type:"error",text:"Failed to load inventory."})}finally{r(!1)}},_=S=>{N(T=>({...T,[S.target.name]:S.target.value}))},k=async S=>{S.preventDefault(),s(!0),p({type:"",text:""});try{if(u){const T=Zt(qe,"inventory",u.id);await Xr(T,{...b,updatedAt:new Date().toISOString()}),p({type:"success",text:"Item updated successfully!"})}else await fi(Pt(qe,"inventory"),{...b,createdAt:new Date().toISOString()}),p({type:"success",text:"Item added successfully!"});N({itemNo:"",itemName:"",details:""}),c(!1),g(null),await C()}catch(T){console.error("Error saving item:",T),p({type:"error",text:u?"Failed to update item.":"Failed to add item."})}finally{s(!1)}},L=S=>{g(S),N({itemNo:S.itemNo,itemName:S.itemName,details:S.details||""}),c(!0),p({type:"",text:""}),window.scrollTo({top:0,behavior:"smooth"})},D=async(S,T)=>{if(window.confirm(`Are you sure you want to delete "${T}"?`))try{await eA(Zt(qe,"inventory",S)),p({type:"success",text:"Item deleted successfully!"}),await C()}catch(M){console.error("Error deleting item:",M),p({type:"error",text:"Failed to delete item."})}},z=()=>{g(null),N({itemNo:"",itemName:"",details:""}),c(!1),p({type:"",text:""})},X=o.trim().toLowerCase(),j=t.filter(S=>{if(!X)return!0;const T=(S.itemName||"").toLowerCase(),M=(S.itemNo||"").toLowerCase();return T.includes(X)||M.includes(X)});return d.jsxs("div",{className:"min-h-screen bg-gray-100",children:[d.jsx(In,{userType:"admin"}),d.jsxs("main",{className:"container mx-auto px-4 py-6 sm:py-8",children:[d.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3 mb-4 sm:mb-6",children:[d.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-800",children:"Inventory"}),d.jsxs("button",{onClick:()=>{l&&!u?c(!1):(z(),c(!l))},className:"self-start sm:self-auto inline-flex items-center gap-2 px-4 py-2 rounded bg-green-600 text-white text-sm font-semibold hover:bg-green-700",children:[d.jsx(pF,{}),l?"Cancel":"Add Item"]})]}),y.text&&d.jsx("div",{className:`mb-4 p-3 rounded text-sm ${y.type==="success"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:y.text}),l&&d.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 sm:p-6 mb-6",children:[d.jsxs("div",{className:"flex items-center justify-between mb-4",children:[d.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-gray-800",children:u?"Edit Item":"Add New Item"}),u&&d.jsx("button",{onClick:z,className:"text-gray-500 hover:text-gray-700",title:"Cancel editing",children:d.jsx(Nl,{className:"text-xl"})})]}),d.jsxs("form",{onSubmit:k,className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Item No"}),d.jsx("input",{type:"text",name:"itemNo",value:b.itemNo,onChange:_,required:!0,className:"w-full px-3 py-2 border rounded text-sm focus:outline-none focus:ring-2 focus:ring-green-500"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Item Name"}),d.jsx("input",{type:"text",name:"itemName",value:b.itemName,onChange:_,required:!0,className:"w-full px-3 py-2 border rounded text-sm focus:outline-none focus:ring-2 focus:ring-green-500"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Details"}),d.jsx("textarea",{name:"details",value:b.details,onChange:_,rows:"3",className:"w-full px-3 py-2 border rounded text-sm focus:outline-none focus:ring-2 focus:ring-green-500"})]}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx("button",{type:"submit",disabled:i,className:"flex-1 bg-green-600 text-white py-2 px-4 rounded font-semibold hover:bg-green-700 transition disabled:opacity-50 text-sm",children:i?u?"Updating...":"Adding...":u?"Update Item":"Add Item"}),u&&d.jsx("button",{type:"button",onClick:z,className:"px-4 py-2 border border-gray-300 rounded text-gray-700 font-semibold hover:bg-gray-100 transition text-sm",children:"Cancel"})]})]})]}),d.jsxs("div",{className:"relative mb-4",children:[d.jsx(bc,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 text-sm"}),d.jsx("input",{type:"text",placeholder:"Search by item name or number...",value:o,onChange:S=>a(S.target.value),className:"w-full pl-9 pr-3 py-2 border rounded text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),n?d.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[d.jsx(Ms,{className:"animate-spin text-xl text-blue-600"}),d.jsx("span",{children:"Loading inventory..."})]}):j.length===0?d.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 text-center",children:[d.jsx(mf,{className:"mx-auto text-4xl text-gray-400 mb-2"}),d.jsx("p",{className:"text-gray-600 text-sm",children:o?"No items match your search.":"No items in inventory."})]}):d.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:j.map(S=>d.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 hover:shadow-lg transition",children:[d.jsxs("div",{className:"flex items-start justify-between mb-2",children:[d.jsx("h3",{className:"font-semibold text-gray-800 text-sm sm:text-base flex-1",children:S.itemName}),d.jsx("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded ml-2",children:S.itemNo})]}),S.details&&d.jsx("p",{className:"text-gray-600 text-xs sm:text-sm mb-3",children:S.details}),d.jsxs("div",{className:"flex gap-2 mt-3 pt-3 border-t",children:[d.jsxs("button",{onClick:()=>L(S),className:"flex-1 inline-flex items-center justify-center gap-1 px-3 py-1.5 bg-blue-600 text-white text-xs font-semibold rounded hover:bg-blue-700 transition",children:[d.jsx(oF,{}),"Edit"]}),d.jsxs("button",{onClick:()=>D(S.id,S.itemName),className:"flex-1 inline-flex items-center justify-center gap-1 px-3 py-1.5 bg-red-600 text-white text-xs font-semibold rounded hover:bg-red-700 transition",children:[d.jsx(KA,{}),"Delete"]})]})]},S.id))})]})]})},DF=()=>{const[t,e]=se.useState([]),[n,r]=se.useState({}),[i,s]=se.useState([]),[o,a]=se.useState(!0);se.useEffect(()=>{l()},[]);const l=async()=>{a(!0);try{const p=await Bn(Pt(qe,"users")),b={};p.docs.forEach(D=>{b[D.id]=D.data()}),r(b);const _=(await Bn(Pt(qe,"works"))).docs.map(D=>({id:D.id,...D.data()})).filter(D=>{const z=D.rejections||{};return Object.keys(z).some(X=>!z[X].approved)});e(_);const L=(await Bn(Pt(qe,"rejectedWorks"))).docs.map(D=>({id:D.id,...D.data()}));L.sort((D,z)=>{const X=D.approvedAt?new Date(D.approvedAt).getTime():0;return(z.approvedAt?new Date(z.approvedAt).getTime():0)-X}),s(L)}catch(p){console.error("Error fetching data:",p)}finally{a(!1)}},c=async(p,b)=>{try{const N=t.find(j=>j.id===p),C=(N.rejections||{})[b];await fi(Pt(qe,"rejectedWorks"),{workId:p,userId:b,title:N.title,description:N.description,date:N.date,priority:N.priority,assignedUserDetails:N.assignedUserDetails,assignedItems:N.assignedItems,rejectionReason:C.reason,rejectedAt:C.timestamp,approvedAt:new Date().toISOString()});const _=Zt(qe,"works",p),k=(N.assignedUsers||[]).filter(j=>j!==b),L=(N.assignedUserDetails||[]).filter(j=>j.userId!==b),D={...N.rejections||{}};delete D[b];const z={...N.userAcceptance||{}};delete z[b];const X={...N.roleCompletion||{}};Object.keys(X).forEach(j=>{j.startsWith(`${b}_`)&&delete X[j]}),await Xr(_,{assignedUsers:k,assignedUserDetails:L,rejections:D,userAcceptance:z,roleCompletion:X}),await l()}catch(N){console.error("Failed to approve:",N)}},u=async(p,b)=>{try{const N=t.find(L=>L.id===p),C=Zt(qe,"works",p),_={...N.rejections||{}},k={...N.userAcceptance||{}};delete _[b],k[b]="pending",await Xr(C,{rejections:_,userAcceptance:k}),await l()}catch(N){console.error("Failed to cancel rejection:",N)}};if(o)return d.jsxs("div",{className:"min-h-screen bg-gray-100",children:[d.jsx(In,{userType:"admin"}),d.jsxs("div",{className:"flex flex-col items-center justify-center h-64",children:[d.jsx(Ms,{className:"animate-spin text-4xl text-blue-600 mb-4"}),d.jsx("p",{className:"text-gray-600",children:"Loading rejections..."})]})]});const g=i.reduce((p,b)=>{const N=b.workId||b.id;return p[N]||(p[N]={workId:N,title:b.title,items:[]}),p[N].items.push(b),p},{}),y=Object.values(g);return d.jsxs("div",{className:"min-h-screen bg-gray-100",children:[d.jsx(In,{userType:"admin"}),d.jsxs("main",{className:"container mx-auto px-4 py-6 sm:py-8 max-w-4xl",children:[d.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-800 mb-6",children:"Pending Rejection Approvals"}),t.length===0?d.jsx("div",{className:"bg-white rounded-lg shadow-md p-6 text-center mb-8",children:d.jsx("p",{className:"text-gray-600",children:"No pending rejections."})}):d.jsx("div",{className:"space-y-4 mb-10",children:t.map(p=>{const b=p.rejections||{};return d.jsxs("div",{className:"bg-white rounded-lg shadow-md p-5",children:[d.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-3",children:p.title||"Task"}),Object.entries(b).filter(([,N])=>!N.approved).map(([N,C])=>{var _;return d.jsxs("div",{className:"mb-3 p-4 bg-red-50 rounded-lg border border-red-100",children:[d.jsxs("div",{className:"flex items-start justify-between mb-2",children:[d.jsxs("div",{children:[d.jsx("p",{className:"font-semibold text-gray-800 text-sm",children:((_=n[N])==null?void 0:_.name)||"Unknown User"}),d.jsx("p",{className:"text-xs text-gray-500",children:new Date(C.timestamp).toLocaleString()})]}),d.jsxs("div",{className:"flex gap-2",children:[d.jsxs("button",{onClick:()=>c(p.id,N),className:"bg-blue-600 text-white text-xs font-semibold px-3 py-1.5 rounded-lg hover:bg-blue-700 flex items-center gap-1",children:[d.jsx(la,{}),"Approve"]}),d.jsxs("button",{onClick:()=>u(p.id,N),className:"bg-gray-200 text-gray-800 text-xs font-semibold px-3 py-1.5 rounded-lg hover:bg-gray-300 flex items-center gap-1",children:[d.jsx(Nl,{}),"Cancel"]})]})]}),d.jsxs("p",{className:"text-sm text-gray-700 bg-white p-3 rounded",children:[d.jsx("span",{className:"font-semibold",children:"Reason: "}),C.reason]})]},N)})]},p.id)})}),d.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-gray-800 mb-4",children:"Approved Rejections"}),y.length===0?d.jsx("div",{className:"bg-white rounded-lg shadow-md p-6 text-center",children:d.jsx("p",{className:"text-gray-600",children:"No approved rejections yet."})}):d.jsx("div",{className:"space-y-4",children:y.map(p=>d.jsxs("div",{className:"bg-white rounded-lg shadow-md p-5 border border-green-100",children:[d.jsxs("div",{className:"flex items-start justify-between mb-3",children:[d.jsx("h3",{className:"text-lg font-bold text-gray-800",children:p.title||"Task"}),d.jsxs("span",{className:"bg-green-100 text-green-800 text-xs font-semibold px-3 py-1.5 rounded-full flex items-center gap-1",children:[d.jsx(la,{}),"Approved"]})]}),d.jsx("div",{className:"space-y-3",children:p.items.map(b=>{var N;return d.jsxs("div",{className:"p-3 rounded border border-green-100 bg-green-50",children:[d.jsx("p",{className:"text-sm font-semibold text-gray-800 mb-1",children:((N=n[b.userId])==null?void 0:N.name)||"Unknown User"}),d.jsxs("p",{className:"text-xs text-gray-500 mb-1",children:["Rejected:"," ",b.rejectedAt?new Date(b.rejectedAt).toLocaleString():"-",d.jsx("br",{}),"Approved:"," ",b.approvedAt?new Date(b.approvedAt).toLocaleString():"-"]}),d.jsxs("p",{className:"text-sm text-gray-700",children:[d.jsx("span",{className:"font-semibold",children:"Reason: "}),b.rejectionReason||"-"]})]},b.id)})})]},p.workId))})]})]})},OF=()=>{const[t,e]=se.useState(null),[n,r]=se.useState([]),[i,s]=se.useState(!0);return se.useEffect(()=>{const o=Rc(Ii,a=>{e(a||null)});return()=>o()},[]),se.useEffect(()=>{if(!t)return;(async()=>{s(!0);try{const a=vc(Pt(qe,"rejectedWorks"),zd("userId","==",t.uid)),c=(await Bn(a)).docs.map(u=>({id:u.id,...u.data()}));c.sort((u,g)=>{const y=u.approvedAt?new Date(u.approvedAt).getTime():0;return(g.approvedAt?new Date(g.approvedAt).getTime():0)-y}),r(c)}catch(a){console.error("Error fetching rejected works:",a)}finally{s(!1)}})()},[t]),i?d.jsxs("div",{className:"min-h-screen bg-gray-100",children:[d.jsx(In,{userType:"user"}),d.jsxs("div",{className:"flex flex-col items-center justify-center h-64",children:[d.jsx(Ms,{className:"animate-spin text-4xl text-blue-600 mb-4"}),d.jsx("p",{className:"text-gray-600",children:"Loading rejected works..."})]})]}):d.jsxs("div",{className:"min-h-screen bg-gray-100",children:[d.jsx(In,{userType:"user"}),d.jsxs("main",{className:"container mx-auto px-4 py-6 sm:py-8 max-w-3xl",children:[d.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-800 mb-6",children:"My Rejected Works"}),n.length===0?d.jsx("div",{className:"bg-white rounded-lg shadow-md p-6 text-center",children:d.jsx("p",{className:"text-gray-600",children:"You have no rejected works."})}):d.jsx("div",{className:"space-y-4",children:n.map(o=>d.jsxs("div",{className:"bg-white rounded-lg shadow-md p-5",children:[d.jsxs("div",{className:"flex items-start justify-between mb-3",children:[d.jsxs("div",{className:"flex-1",children:[d.jsx("h3",{className:"text-lg font-bold text-gray-800",children:o.title||"Task"}),o.date&&d.jsxs("p",{className:"flex items-center gap-1 text-xs text-gray-500 mt-1",children:[d.jsx(fr,{}),d.jsx("span",{children:new Date(o.date).toLocaleDateString()})]})]}),d.jsxs("span",{className:"bg-red-100 text-red-800 text-xs font-semibold px-3 py-1.5 rounded-full flex items-center gap-1",children:[d.jsx(Nl,{}),"You rejected"]})]}),d.jsxs("div",{className:"bg-red-50 rounded-lg p-4",children:[o.description&&d.jsx("p",{className:"text-sm text-gray-700 mb-3",children:o.description}),d.jsx("p",{className:"text-xs font-semibold text-red-800 mb-1",children:"Your reason:"}),d.jsx("p",{className:"text-sm text-gray-700",children:o.rejectionReason||"-"}),d.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Rejected: ",o.rejectedAt?new Date(o.rejectedAt).toLocaleString():"-",d.jsx("br",{}),"Approved by admin: ",o.approvedAt?new Date(o.approvedAt).toLocaleString():"-"]})]})]},o.id))})]})]})},MF=()=>{const[t,e]=se.useState([]),[n,r]=se.useState(!0),[i,s]=se.useState(!1),o=ji(),a=async()=>{r(!0);try{const p=vc(Pt(qe,"notifications"),qv("createdAt","desc")),N=(await Bn(p)).docs.map(C=>({id:C.id,...C.data()}));e(N)}catch(p){console.error("Failed to load notifications",p)}finally{r(!1)}};se.useEffect(()=>{a()},[]);const l=p=>{const b=p.userName||"A user";return p.type==="accept"?`${b} accepted a work`:p.type==="reject"?`${b} rejected a work`:p.type==="done"?`${b} marked their work as done`:p.type==="undo-done"?`${b} undid a done task`:`${b} did something`},c=p=>p?(p.toDate?p.toDate():new Date(p)).toLocaleString():"",u=async()=>{const p=t.filter(b=>!b.read);if(p.length)try{s(!0);const b=nA(qe);p.forEach(N=>{b.update(Zt(qe,"notifications",N.id),{read:!0})}),await b.commit(),e(N=>N.map(C=>({...C,read:!0})))}catch(b){console.error("Failed to mark all read",b)}finally{s(!1)}},g=t.filter(p=>!p.read).length,y=p=>{o(`/admin/notifications/${p.id}`)};return d.jsxs("div",{className:"min-h-screen bg-gray-100",children:[d.jsx(In,{userType:"admin"}),d.jsxs("main",{className:"container mx-auto px-4 py-6 max-w-4xl",children:[d.jsxs("div",{className:"flex items-center justify-between mb-6",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(s5,{className:"text-2xl text-blue-600"}),d.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-800",children:"Notification History"})]}),d.jsxs("button",{onClick:u,disabled:i||g===0,className:`px-4 py-2 rounded text-sm font-semibold ${g===0?"bg-gray-300 text-gray-600 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"}`,children:["Mark all read (",g,")"]})]}),n?d.jsx("p",{children:"Loading notifications..."}):t.length?d.jsx("ul",{className:"space-y-3",children:t.map(p=>d.jsx("li",{onClick:()=>y(p),className:`bg-white rounded-lg shadow border p-4 cursor-pointer flex items-start gap-3 justify-between ${p.read?"border-gray-100":"border-blue-200 bg-blue-50"}`,children:d.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[d.jsx("div",{className:"mt-1",children:p.read?d.jsx(D2,{className:"text-green-500"}):d.jsx(sF,{className:"text-blue-500 text-xs"})}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("p",{className:"font-semibold text-gray-800 truncate",children:l(p)}),d.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Work ID:"," ",d.jsx("span",{className:"font-mono break-all",children:p.workId})]}),d.jsxs("p",{className:"text-xs text-gray-500",children:["At: ",c(p.createdAt)]})]})]})},p.id))}):d.jsx("p",{children:"No notifications yet."})]})]})},FF="modulepreload",UF=function(t){return"https://tmv.fotmv.online/"+t},$_={},V0=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(n.map(l=>{if(l=UF(l),l in $_)return;$_[l]=!0;const c=l.endsWith(".css"),u=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${u}`))return;const g=document.createElement("link");if(g.rel=c?"stylesheet":FF,c||(g.as="script"),g.crossOrigin="",g.href=l,a&&g.setAttribute("nonce",a),document.head.appendChild(g),c)return new Promise((y,p)=>{g.addEventListener("load",y),g.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})};function yn(t){"@babel/helpers - typeof";return yn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yn(t)}var no=Uint8Array,hs=Uint16Array,a5=Int32Array,l5=new no([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),c5=new no([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),G_=new no([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),XA=function(t,e){for(var n=new hs(31),r=0;r<31;++r)n[r]=e+=1<<t[r-1];for(var i=new a5(n[30]),r=1;r<30;++r)for(var s=n[r];s<n[r+1];++s)i[s]=s-n[r]<<5|r;return{b:n,r:i}},JA=XA(l5,2),VF=JA.b,F2=JA.r;VF[28]=258,F2[258]=28;var BF=XA(c5,0),K_=BF.r,U2=new hs(32768);for(var On=0;On<32768;++On){var Ha=(On&43690)>>1|(On&21845)<<1;Ha=(Ha&52428)>>2|(Ha&13107)<<2,Ha=(Ha&61680)>>4|(Ha&3855)<<4,U2[On]=((Ha&65280)>>8|(Ha&255)<<8)>>1}var ud=function(t,e,n){for(var r=t.length,i=0,s=new hs(e);i<r;++i)t[i]&&++s[t[i]-1];var o=new hs(e);for(i=1;i<e;++i)o[i]=o[i-1]+s[i-1]<<1;var a;if(n){a=new hs(1<<e);var l=15-e;for(i=0;i<r;++i)if(t[i])for(var c=i<<4|t[i],u=e-t[i],g=o[t[i]-1]++<<u,y=g|(1<<u)-1;g<=y;++g)a[U2[g]>>l]=c}else for(a=new hs(r),i=0;i<r;++i)t[i]&&(a[i]=U2[o[t[i]-1]++]>>15-t[i]);return a},Nc=new no(288);for(var On=0;On<144;++On)Nc[On]=8;for(var On=144;On<256;++On)Nc[On]=9;for(var On=256;On<280;++On)Nc[On]=7;for(var On=280;On<288;++On)Nc[On]=8;var Pm=new no(32);for(var On=0;On<32;++On)Pm[On]=5;var zF=ud(Nc,9,0),qF=ud(Pm,5,0),ZA=function(t){return(t+7)/8|0},HF=function(t,e,n){return(n==null||n>t.length)&&(n=t.length),new no(t.subarray(e,n))},$o=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8},Mh=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8,t[r+2]|=n>>16},B0=function(t,e){for(var n=[],r=0;r<t.length;++r)t[r]&&n.push({s:r,f:t[r]});var i=n.length,s=n.slice();if(!i)return{t:tE,l:0};if(i==1){var o=new no(n[0].s+1);return o[n[0].s]=1,{t:o,l:1}}n.sort(function(z,X){return z.f-X.f}),n.push({s:-1,f:25001});var a=n[0],l=n[1],c=0,u=1,g=2;for(n[0]={s:-1,f:a.f+l.f,l:a,r:l};u!=i-1;)a=n[n[c].f<n[g].f?c++:g++],l=n[c!=u&&n[c].f<n[g].f?c++:g++],n[u++]={s:-1,f:a.f+l.f,l:a,r:l};for(var y=s[0].s,r=1;r<i;++r)s[r].s>y&&(y=s[r].s);var p=new hs(y+1),b=V2(n[u-1],p,0);if(b>e){var r=0,N=0,C=b-e,_=1<<C;for(s.sort(function(X,j){return p[j.s]-p[X.s]||X.f-j.f});r<i;++r){var k=s[r].s;if(p[k]>e)N+=_-(1<<b-p[k]),p[k]=e;else break}for(N>>=C;N>0;){var L=s[r].s;p[L]<e?N-=1<<e-p[L]++-1:++r}for(;r>=0&&N;--r){var D=s[r].s;p[D]==e&&(--p[D],++N)}b=e}return{t:new no(p),l:b}},V2=function(t,e,n){return t.s==-1?Math.max(V2(t.l,e,n+1),V2(t.r,e,n+1)):e[t.s]=n},Y_=function(t){for(var e=t.length;e&&!t[--e];);for(var n=new hs(++e),r=0,i=t[0],s=1,o=function(l){n[r++]=l},a=1;a<=e;++a)if(t[a]==i&&a!=e)++s;else{if(!i&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(i),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(i);s=1,i=t[a]}return{c:n.subarray(0,r),n:e}},Fh=function(t,e){for(var n=0,r=0;r<e.length;++r)n+=t[r]*e[r];return n},eE=function(t,e,n){var r=n.length,i=ZA(e+2);t[i]=r&255,t[i+1]=r>>8,t[i+2]=t[i]^255,t[i+3]=t[i+1]^255;for(var s=0;s<r;++s)t[i+s+4]=n[s];return(i+4+r)*8},Q_=function(t,e,n,r,i,s,o,a,l,c,u){$o(e,u++,n),++i[256];for(var g=B0(i,15),y=g.t,p=g.l,b=B0(s,15),N=b.t,C=b.l,_=Y_(y),k=_.c,L=_.n,D=Y_(N),z=D.c,X=D.n,j=new hs(19),S=0;S<k.length;++S)++j[k[S]&31];for(var S=0;S<z.length;++S)++j[z[S]&31];for(var T=B0(j,7),M=T.t,A=T.l,I=19;I>4&&!M[G_[I-1]];--I);var R=c+5<<3,G=Fh(i,Nc)+Fh(s,Pm)+o,oe=Fh(i,y)+Fh(s,N)+o+14+3*I+Fh(j,M)+2*j[16]+3*j[17]+7*j[18];if(l>=0&&R<=G&&R<=oe)return eE(e,u,t.subarray(l,l+c));var pe,ge,ne,le;if($o(e,u,1+(oe<G)),u+=2,oe<G){pe=ud(y,p,0),ge=y,ne=ud(N,C,0),le=N;var we=ud(M,A,0);$o(e,u,L-257),$o(e,u+5,X-1),$o(e,u+10,I-4),u+=14;for(var S=0;S<I;++S)$o(e,u+3*S,M[G_[S]]);u+=3*I;for(var de=[k,z],U=0;U<2;++U)for(var W=de[U],S=0;S<W.length;++S){var te=W[S]&31;$o(e,u,we[te]),u+=M[te],te>15&&($o(e,u,W[S]>>5&127),u+=W[S]>>12)}}else pe=zF,ge=Nc,ne=qF,le=Pm;for(var S=0;S<a;++S){var Q=r[S];if(Q>255){var te=Q>>18&31;Mh(e,u,pe[te+257]),u+=ge[te+257],te>7&&($o(e,u,Q>>23&31),u+=l5[te]);var re=Q&31;Mh(e,u,ne[re]),u+=le[re],re>3&&(Mh(e,u,Q>>5&8191),u+=c5[re])}else Mh(e,u,pe[Q]),u+=ge[Q]}return Mh(e,u,pe[256]),u+ge[256]},WF=new a5([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),tE=new no(0),$F=function(t,e,n,r,i,s){var o=s.z||t.length,a=new no(r+o+5*(1+Math.ceil(o/7e3))+i),l=a.subarray(r,a.length-i),c=s.l,u=(s.r||0)&7;if(e){u&&(l[0]=s.r>>3);for(var g=WF[e-1],y=g>>13,p=g&8191,b=(1<<n)-1,N=s.p||new hs(32768),C=s.h||new hs(b+1),_=Math.ceil(n/3),k=2*_,L=function(Se){return(t[Se]^t[Se+1]<<_^t[Se+2]<<k)&b},D=new a5(25e3),z=new hs(288),X=new hs(32),j=0,S=0,T=s.i||0,M=0,A=s.w||0,I=0;T+2<o;++T){var R=L(T),G=T&32767,oe=C[R];if(N[G]=oe,C[R]=G,A<=T){var pe=o-T;if((j>7e3||M>24576)&&(pe>423||!c)){u=Q_(t,l,0,D,z,X,S,M,I,T-I,u),M=j=S=0,I=T;for(var ge=0;ge<286;++ge)z[ge]=0;for(var ge=0;ge<30;++ge)X[ge]=0}var ne=2,le=0,we=p,de=G-oe&32767;if(pe>2&&R==L(T-de))for(var U=Math.min(y,pe)-1,W=Math.min(32767,T),te=Math.min(258,pe);de<=W&&--we&&G!=oe;){if(t[T+ne]==t[T+ne-de]){for(var Q=0;Q<te&&t[T+Q]==t[T+Q-de];++Q);if(Q>ne){if(ne=Q,le=de,Q>U)break;for(var re=Math.min(de,Q-2),q=0,ge=0;ge<re;++ge){var ae=T-de+ge&32767,ue=N[ae],me=ae-ue&32767;me>q&&(q=me,oe=ae)}}}G=oe,oe=N[G],de+=G-oe&32767}if(le){D[M++]=268435456|F2[ne]<<18|K_[le];var _e=F2[ne]&31,Le=K_[le]&31;S+=l5[_e]+c5[Le],++z[257+_e],++X[Le],A=T+ne,++j}else D[M++]=t[T],++z[t[T]]}}for(T=Math.max(T,A);T<o;++T)D[M++]=t[T],++z[t[T]];u=Q_(t,l,c,D,z,X,S,M,I,T-I,u),c||(s.r=u&7|l[u/8|0]<<3,u-=7,s.h=C,s.p=N,s.i=T,s.w=A)}else{for(var T=s.w||0;T<o+c;T+=65535){var Te=T+65535;Te>=o&&(l[u/8|0]=c,Te=o),u=eE(l,u+1,t.subarray(T,Te))}s.i=o}return HF(a,0,r+ZA(u)+i)},nE=function(){var t=1,e=0;return{p:function(n){for(var r=t,i=e,s=n.length|0,o=0;o!=s;){for(var a=Math.min(o+2655,s);o<a;++o)i+=r+=n[o];r=(r&65535)+15*(r>>16),i=(i&65535)+15*(i>>16)}t=r,e=i},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},GF=function(t,e,n,r,i){if(!i&&(i={l:1},e.dictionary)){var s=e.dictionary.subarray(-32768),o=new no(s.length+t.length);o.set(s),o.set(t,s.length),t=o,i.w=s.length}return $F(t,e.level==null?6:e.level,e.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,n,r,i)},rE=function(t,e,n){for(;n;++e)t[e]=n,n>>>=8},KF=function(t,e){var n=e.level,r=n==0?0:n<6?1:n==9?3:2;if(t[0]=120,t[1]=r<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var i=nE();i.p(e.dictionary),rE(t,2,i.d())}};function B2(t,e){e||(e={});var n=nE();n.p(t);var r=GF(t,e,e.dictionary?6:2,4);return KF(r,e),rE(r,r.length-4,n.d()),r}var YF=typeof TextDecoder<"u"&&new TextDecoder,QF=0;try{YF.decode(tE,{stream:!0}),QF=1}catch{}function XF(t){if(Array.isArray(t))return t}function JF(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,o,a=[],l=!0,c=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(l=(r=s.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return a}}function X_(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function ZF(t,e){if(t){if(typeof t=="string")return X_(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?X_(t,e):void 0}}function eU(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function J_(t,e){return XF(t)||JF(t,e)||ZF(t,e)||eU()}function Z_(t,e="utf8"){return new TextDecoder(e).decode(t)}const tU=new TextEncoder;function nU(t){return tU.encode(t)}const rU=1024*8,iU=(()=>{const t=new Uint8Array(4),e=new Uint32Array(t.buffer);return!((e[0]=1)&t[0])})(),z0={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class u5{constructor(e=rU,n={}){gn(this,"buffer");gn(this,"byteLength");gn(this,"byteOffset");gn(this,"length");gn(this,"offset");gn(this,"lastWrittenByte");gn(this,"littleEndian");gn(this,"_data");gn(this,"_mark");gn(this,"_marks");let r=!1;typeof e=="number"?e=new ArrayBuffer(e):(r=!0,this.lastWrittenByte=e.byteLength);const i=n.offset?n.offset>>>0:0,s=e.byteLength-i;let o=i;(ArrayBuffer.isView(e)||e instanceof u5)&&(e.byteLength!==e.buffer.byteLength&&(o=e.byteOffset+i),e=e.buffer),r?this.lastWrittenByte=s:this.lastWrittenByte=0,this.buffer=e,this.length=s,this.byteLength=s,this.byteOffset=o,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,o,s),this._mark=0,this._marks=[]}available(e=1){return this.offset+e<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(e=1){return this.offset+=e,this}back(e=1){return this.offset-=e,this}seek(e){return this.offset=e,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const e=this._marks.pop();if(e===void 0)throw new Error("Mark stack empty");return this.seek(e),this}rewind(){return this.offset=0,this}ensureAvailable(e=1){if(!this.available(e)){const r=(this.offset+e)*2,i=new Uint8Array(r);i.set(new Uint8Array(this.buffer)),this.buffer=i.buffer,this.length=r,this.byteLength=r,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(e=1){return this.readArray(e,"uint8")}readArray(e,n){const r=z0[n].BYTES_PER_ELEMENT*e,i=this.byteOffset+this.offset,s=this.buffer.slice(i,i+r);if(this.littleEndian===iU&&n!=="uint8"&&n!=="int8"){const a=new Uint8Array(this.buffer.slice(i,i+r));a.reverse();const l=new z0[n](a.buffer);return this.offset+=r,l.reverse(),l}const o=new z0[n](s);return this.offset+=r,o}readInt16(){const e=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}readUint16(){const e=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,e}readInt32(){const e=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}readUint32(){const e=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat32(){const e=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat64(){const e=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}readBigInt64(){const e=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,e}readBigUint64(){const e=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,e}readChar(){return String.fromCharCode(this.readInt8())}readChars(e=1){let n="";for(let r=0;r<e;r++)n+=this.readChar();return n}readUtf8(e=1){return Z_(this.readBytes(e))}decodeText(e=1,n="utf8"){return Z_(this.readBytes(e),n)}writeBoolean(e){return this.writeUint8(e?255:0),this}writeInt8(e){return this.ensureAvailable(1),this._data.setInt8(this.offset++,e),this._updateLastWrittenByte(),this}writeUint8(e){return this.ensureAvailable(1),this._data.setUint8(this.offset++,e),this._updateLastWrittenByte(),this}writeByte(e){return this.writeUint8(e)}writeBytes(e){this.ensureAvailable(e.length);for(let n=0;n<e.length;n++)this._data.setUint8(this.offset++,e[n]);return this._updateLastWrittenByte(),this}writeInt16(e){return this.ensureAvailable(2),this._data.setInt16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(e){return this.ensureAvailable(2),this._data.setUint16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(e){return this.ensureAvailable(4),this._data.setInt32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(e){return this.ensureAvailable(4),this._data.setUint32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(e){return this.ensureAvailable(4),this._data.setFloat32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(e){return this.ensureAvailable(8),this._data.setFloat64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(e){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(e){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(e){return this.writeUint8(e.charCodeAt(0))}writeChars(e){for(let n=0;n<e.length;n++)this.writeUint8(e.charCodeAt(n));return this}writeUtf8(e){return this.writeBytes(nU(e))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function sh(t){let e=t.length;for(;--e>=0;)t[e]=0}const sU=3,oU=258,iE=29,aU=256,lU=aU+1+iE,sE=30,cU=512,uU=new Array((lU+2)*2);sh(uU);const hU=new Array(sE*2);sh(hU);const dU=new Array(cU);sh(dU);const fU=new Array(oU-sU+1);sh(fU);const pU=new Array(iE);sh(pU);const mU=new Array(sE);sh(mU);const gU=(t,e,n,r)=>{let i=t&65535|0,s=t>>>16&65535|0,o=0;for(;n!==0;){o=n>2e3?2e3:n,n-=o;do i=i+e[r++]|0,s=s+i|0;while(--o);i%=65521,s%=65521}return i|s<<16|0};var z2=gU;const yU=()=>{let t,e=[];for(var n=0;n<256;n++){t=n;for(var r=0;r<8;r++)t=t&1?3988292384^t>>>1:t>>>1;e[n]=t}return e},vU=new Uint32Array(yU()),wU=(t,e,n,r)=>{const i=vU,s=r+n;t^=-1;for(let o=r;o<s;o++)t=t>>>8^i[(t^e[o])&255];return t^-1};var yo=wU,q2={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},oE={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const xU=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var _U=function(t){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const n=e.shift();if(n){if(typeof n!="object")throw new TypeError(n+"must be non-object");for(const r in n)xU(n,r)&&(t[r]=n[r])}}return t},bU=t=>{let e=0;for(let r=0,i=t.length;r<i;r++)e+=t[r].length;const n=new Uint8Array(e);for(let r=0,i=0,s=t.length;r<s;r++){let o=t[r];n.set(o,i),i+=o.length}return n},aE={assign:_U,flattenChunks:bU};let lE=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{lE=!1}const Wd=new Uint8Array(256);for(let t=0;t<256;t++)Wd[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;Wd[254]=Wd[254]=1;var NU=t=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(t);let e,n,r,i,s,o=t.length,a=0;for(i=0;i<o;i++)n=t.charCodeAt(i),(n&64512)===55296&&i+1<o&&(r=t.charCodeAt(i+1),(r&64512)===56320&&(n=65536+(n-55296<<10)+(r-56320),i++)),a+=n<128?1:n<2048?2:n<65536?3:4;for(e=new Uint8Array(a),s=0,i=0;s<a;i++)n=t.charCodeAt(i),(n&64512)===55296&&i+1<o&&(r=t.charCodeAt(i+1),(r&64512)===56320&&(n=65536+(n-55296<<10)+(r-56320),i++)),n<128?e[s++]=n:n<2048?(e[s++]=192|n>>>6,e[s++]=128|n&63):n<65536?(e[s++]=224|n>>>12,e[s++]=128|n>>>6&63,e[s++]=128|n&63):(e[s++]=240|n>>>18,e[s++]=128|n>>>12&63,e[s++]=128|n>>>6&63,e[s++]=128|n&63);return e};const SU=(t,e)=>{if(e<65534&&t.subarray&&lE)return String.fromCharCode.apply(null,t.length===e?t:t.subarray(0,e));let n="";for(let r=0;r<e;r++)n+=String.fromCharCode(t[r]);return n};var AU=(t,e)=>{const n=e||t.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(t.subarray(0,e));let r,i;const s=new Array(n*2);for(i=0,r=0;r<n;){let o=t[r++];if(o<128){s[i++]=o;continue}let a=Wd[o];if(a>4){s[i++]=65533,r+=a-1;continue}for(o&=a===2?31:a===3?15:7;a>1&&r<n;)o=o<<6|t[r++]&63,a--;if(a>1){s[i++]=65533;continue}o<65536?s[i++]=o:(o-=65536,s[i++]=55296|o>>10&1023,s[i++]=56320|o&1023)}return SU(s,i)},EU=(t,e)=>{e=e||t.length,e>t.length&&(e=t.length);let n=e-1;for(;n>=0&&(t[n]&192)===128;)n--;return n<0||n===0?e:n+Wd[t[n]]>e?n:e},H2={string2buf:NU,buf2string:AU,utf8border:EU};function TU(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var IU=TU;const sp=16209,kU=16191;var CU=function(e,n){let r,i,s,o,a,l,c,u,g,y,p,b,N,C,_,k,L,D,z,X,j,S,T,M;const A=e.state;r=e.next_in,T=e.input,i=r+(e.avail_in-5),s=e.next_out,M=e.output,o=s-(n-e.avail_out),a=s+(e.avail_out-257),l=A.dmax,c=A.wsize,u=A.whave,g=A.wnext,y=A.window,p=A.hold,b=A.bits,N=A.lencode,C=A.distcode,_=(1<<A.lenbits)-1,k=(1<<A.distbits)-1;e:do{b<15&&(p+=T[r++]<<b,b+=8,p+=T[r++]<<b,b+=8),L=N[p&_];t:for(;;){if(D=L>>>24,p>>>=D,b-=D,D=L>>>16&255,D===0)M[s++]=L&65535;else if(D&16){z=L&65535,D&=15,D&&(b<D&&(p+=T[r++]<<b,b+=8),z+=p&(1<<D)-1,p>>>=D,b-=D),b<15&&(p+=T[r++]<<b,b+=8,p+=T[r++]<<b,b+=8),L=C[p&k];n:for(;;){if(D=L>>>24,p>>>=D,b-=D,D=L>>>16&255,D&16){if(X=L&65535,D&=15,b<D&&(p+=T[r++]<<b,b+=8,b<D&&(p+=T[r++]<<b,b+=8)),X+=p&(1<<D)-1,X>l){e.msg="invalid distance too far back",A.mode=sp;break e}if(p>>>=D,b-=D,D=s-o,X>D){if(D=X-D,D>u&&A.sane){e.msg="invalid distance too far back",A.mode=sp;break e}if(j=0,S=y,g===0){if(j+=c-D,D<z){z-=D;do M[s++]=y[j++];while(--D);j=s-X,S=M}}else if(g<D){if(j+=c+g-D,D-=g,D<z){z-=D;do M[s++]=y[j++];while(--D);if(j=0,g<z){D=g,z-=D;do M[s++]=y[j++];while(--D);j=s-X,S=M}}}else if(j+=g-D,D<z){z-=D;do M[s++]=y[j++];while(--D);j=s-X,S=M}for(;z>2;)M[s++]=S[j++],M[s++]=S[j++],M[s++]=S[j++],z-=3;z&&(M[s++]=S[j++],z>1&&(M[s++]=S[j++]))}else{j=s-X;do M[s++]=M[j++],M[s++]=M[j++],M[s++]=M[j++],z-=3;while(z>2);z&&(M[s++]=M[j++],z>1&&(M[s++]=M[j++]))}}else if(D&64){e.msg="invalid distance code",A.mode=sp;break e}else{L=C[(L&65535)+(p&(1<<D)-1)];continue n}break}}else if(D&64)if(D&32){A.mode=kU;break e}else{e.msg="invalid literal/length code",A.mode=sp;break e}else{L=N[(L&65535)+(p&(1<<D)-1)];continue t}break}}while(r<i&&s<a);z=b>>3,r-=z,b-=z<<3,p&=(1<<b)-1,e.next_in=r,e.next_out=s,e.avail_in=r<i?5+(i-r):5-(r-i),e.avail_out=s<a?257+(a-s):257-(s-a),A.hold=p,A.bits=b};const Yc=15,eb=852,tb=592,nb=0,q0=1,rb=2,PU=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),RU=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),LU=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),jU=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),DU=(t,e,n,r,i,s,o,a)=>{const l=a.bits;let c=0,u=0,g=0,y=0,p=0,b=0,N=0,C=0,_=0,k=0,L,D,z,X,j,S=null,T;const M=new Uint16Array(Yc+1),A=new Uint16Array(Yc+1);let I=null,R,G,oe;for(c=0;c<=Yc;c++)M[c]=0;for(u=0;u<r;u++)M[e[n+u]]++;for(p=l,y=Yc;y>=1&&M[y]===0;y--);if(p>y&&(p=y),y===0)return i[s++]=1<<24|64<<16|0,i[s++]=1<<24|64<<16|0,a.bits=1,0;for(g=1;g<y&&M[g]===0;g++);for(p<g&&(p=g),C=1,c=1;c<=Yc;c++)if(C<<=1,C-=M[c],C<0)return-1;if(C>0&&(t===nb||y!==1))return-1;for(A[1]=0,c=1;c<Yc;c++)A[c+1]=A[c]+M[c];for(u=0;u<r;u++)e[n+u]!==0&&(o[A[e[n+u]]++]=u);if(t===nb?(S=I=o,T=20):t===q0?(S=PU,I=RU,T=257):(S=LU,I=jU,T=0),k=0,u=0,c=g,j=s,b=p,N=0,z=-1,_=1<<p,X=_-1,t===q0&&_>eb||t===rb&&_>tb)return 1;for(;;){R=c-N,o[u]+1<T?(G=0,oe=o[u]):o[u]>=T?(G=I[o[u]-T],oe=S[o[u]-T]):(G=96,oe=0),L=1<<c-N,D=1<<b,g=D;do D-=L,i[j+(k>>N)+D]=R<<24|G<<16|oe|0;while(D!==0);for(L=1<<c-1;k&L;)L>>=1;if(L!==0?(k&=L-1,k+=L):k=0,u++,--M[c]===0){if(c===y)break;c=e[n+o[u]]}if(c>p&&(k&X)!==z){for(N===0&&(N=p),j+=g,b=c-N,C=1<<b;b+N<y&&(C-=M[b+N],!(C<=0));)b++,C<<=1;if(_+=1<<b,t===q0&&_>eb||t===rb&&_>tb)return 1;z=k&X,i[z]=p<<24|b<<16|j-s|0}}return k!==0&&(i[j+k]=c-N<<24|64<<16|0),a.bits=p,0};var hd=DU;const OU=0,cE=1,uE=2,{Z_FINISH:ib,Z_BLOCK:MU,Z_TREES:op,Z_OK:Sc,Z_STREAM_END:FU,Z_NEED_DICT:UU,Z_STREAM_ERROR:Os,Z_DATA_ERROR:hE,Z_MEM_ERROR:dE,Z_BUF_ERROR:VU,Z_DEFLATED:sb}=oE,Ig=16180,ob=16181,ab=16182,lb=16183,cb=16184,ub=16185,hb=16186,db=16187,fb=16188,pb=16189,Rm=16190,Go=16191,H0=16192,mb=16193,W0=16194,gb=16195,yb=16196,vb=16197,wb=16198,ap=16199,lp=16200,xb=16201,_b=16202,bb=16203,Nb=16204,Sb=16205,$0=16206,Ab=16207,Eb=16208,Un=16209,fE=16210,pE=16211,BU=852,zU=592,qU=15,HU=qU,Tb=t=>(t>>>24&255)+(t>>>8&65280)+((t&65280)<<8)+((t&255)<<24);function WU(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Dc=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||e.mode<Ig||e.mode>pE?1:0},mE=t=>{if(Dc(t))return Os;const e=t.state;return t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=e.wrap&1),e.mode=Ig,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(BU),e.distcode=e.distdyn=new Int32Array(zU),e.sane=1,e.back=-1,Sc},gE=t=>{if(Dc(t))return Os;const e=t.state;return e.wsize=0,e.whave=0,e.wnext=0,mE(t)},yE=(t,e)=>{let n;if(Dc(t))return Os;const r=t.state;return e<0?(n=0,e=-e):(n=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?Os:(r.window!==null&&r.wbits!==e&&(r.window=null),r.wrap=n,r.wbits=e,gE(t))},vE=(t,e)=>{if(!t)return Os;const n=new WU;t.state=n,n.strm=t,n.window=null,n.mode=Ig;const r=yE(t,e);return r!==Sc&&(t.state=null),r},$U=t=>vE(t,HU);let Ib=!0,G0,K0;const GU=t=>{if(Ib){G0=new Int32Array(512),K0=new Int32Array(32);let e=0;for(;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(hd(cE,t.lens,0,288,G0,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;hd(uE,t.lens,0,32,K0,0,t.work,{bits:5}),Ib=!1}t.lencode=G0,t.lenbits=9,t.distcode=K0,t.distbits=5},wE=(t,e,n,r)=>{let i;const s=t.state;return s.window===null&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new Uint8Array(s.wsize)),r>=s.wsize?(s.window.set(e.subarray(n-s.wsize,n),0),s.wnext=0,s.whave=s.wsize):(i=s.wsize-s.wnext,i>r&&(i=r),s.window.set(e.subarray(n-r,n-r+i),s.wnext),r-=i,r?(s.window.set(e.subarray(n-r,n),0),s.wnext=r,s.whave=s.wsize):(s.wnext+=i,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=i))),0},KU=(t,e)=>{let n,r,i,s,o,a,l,c,u,g,y,p,b,N,C=0,_,k,L,D,z,X,j,S;const T=new Uint8Array(4);let M,A;const I=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Dc(t)||!t.output||!t.input&&t.avail_in!==0)return Os;n=t.state,n.mode===Go&&(n.mode=H0),o=t.next_out,i=t.output,l=t.avail_out,s=t.next_in,r=t.input,a=t.avail_in,c=n.hold,u=n.bits,g=a,y=l,S=Sc;e:for(;;)switch(n.mode){case Ig:if(n.wrap===0){n.mode=H0;break}for(;u<16;){if(a===0)break e;a--,c+=r[s++]<<u,u+=8}if(n.wrap&2&&c===35615){n.wbits===0&&(n.wbits=15),n.check=0,T[0]=c&255,T[1]=c>>>8&255,n.check=yo(n.check,T,2,0),c=0,u=0,n.mode=ob;break}if(n.head&&(n.head.done=!1),!(n.wrap&1)||(((c&255)<<8)+(c>>8))%31){t.msg="incorrect header check",n.mode=Un;break}if((c&15)!==sb){t.msg="unknown compression method",n.mode=Un;break}if(c>>>=4,u-=4,j=(c&15)+8,n.wbits===0&&(n.wbits=j),j>15||j>n.wbits){t.msg="invalid window size",n.mode=Un;break}n.dmax=1<<n.wbits,n.flags=0,t.adler=n.check=1,n.mode=c&512?pb:Go,c=0,u=0;break;case ob:for(;u<16;){if(a===0)break e;a--,c+=r[s++]<<u,u+=8}if(n.flags=c,(n.flags&255)!==sb){t.msg="unknown compression method",n.mode=Un;break}if(n.flags&57344){t.msg="unknown header flags set",n.mode=Un;break}n.head&&(n.head.text=c>>8&1),n.flags&512&&n.wrap&4&&(T[0]=c&255,T[1]=c>>>8&255,n.check=yo(n.check,T,2,0)),c=0,u=0,n.mode=ab;case ab:for(;u<32;){if(a===0)break e;a--,c+=r[s++]<<u,u+=8}n.head&&(n.head.time=c),n.flags&512&&n.wrap&4&&(T[0]=c&255,T[1]=c>>>8&255,T[2]=c>>>16&255,T[3]=c>>>24&255,n.check=yo(n.check,T,4,0)),c=0,u=0,n.mode=lb;case lb:for(;u<16;){if(a===0)break e;a--,c+=r[s++]<<u,u+=8}n.head&&(n.head.xflags=c&255,n.head.os=c>>8),n.flags&512&&n.wrap&4&&(T[0]=c&255,T[1]=c>>>8&255,n.check=yo(n.check,T,2,0)),c=0,u=0,n.mode=cb;case cb:if(n.flags&1024){for(;u<16;){if(a===0)break e;a--,c+=r[s++]<<u,u+=8}n.length=c,n.head&&(n.head.extra_len=c),n.flags&512&&n.wrap&4&&(T[0]=c&255,T[1]=c>>>8&255,n.check=yo(n.check,T,2,0)),c=0,u=0}else n.head&&(n.head.extra=null);n.mode=ub;case ub:if(n.flags&1024&&(p=n.length,p>a&&(p=a),p&&(n.head&&(j=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(r.subarray(s,s+p),j)),n.flags&512&&n.wrap&4&&(n.check=yo(n.check,r,p,s)),a-=p,s+=p,n.length-=p),n.length))break e;n.length=0,n.mode=hb;case hb:if(n.flags&2048){if(a===0)break e;p=0;do j=r[s+p++],n.head&&j&&n.length<65536&&(n.head.name+=String.fromCharCode(j));while(j&&p<a);if(n.flags&512&&n.wrap&4&&(n.check=yo(n.check,r,p,s)),a-=p,s+=p,j)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=db;case db:if(n.flags&4096){if(a===0)break e;p=0;do j=r[s+p++],n.head&&j&&n.length<65536&&(n.head.comment+=String.fromCharCode(j));while(j&&p<a);if(n.flags&512&&n.wrap&4&&(n.check=yo(n.check,r,p,s)),a-=p,s+=p,j)break e}else n.head&&(n.head.comment=null);n.mode=fb;case fb:if(n.flags&512){for(;u<16;){if(a===0)break e;a--,c+=r[s++]<<u,u+=8}if(n.wrap&4&&c!==(n.check&65535)){t.msg="header crc mismatch",n.mode=Un;break}c=0,u=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),t.adler=n.check=0,n.mode=Go;break;case pb:for(;u<32;){if(a===0)break e;a--,c+=r[s++]<<u,u+=8}t.adler=n.check=Tb(c),c=0,u=0,n.mode=Rm;case Rm:if(n.havedict===0)return t.next_out=o,t.avail_out=l,t.next_in=s,t.avail_in=a,n.hold=c,n.bits=u,UU;t.adler=n.check=1,n.mode=Go;case Go:if(e===MU||e===op)break e;case H0:if(n.last){c>>>=u&7,u-=u&7,n.mode=$0;break}for(;u<3;){if(a===0)break e;a--,c+=r[s++]<<u,u+=8}switch(n.last=c&1,c>>>=1,u-=1,c&3){case 0:n.mode=mb;break;case 1:if(GU(n),n.mode=ap,e===op){c>>>=2,u-=2;break e}break;case 2:n.mode=yb;break;case 3:t.msg="invalid block type",n.mode=Un}c>>>=2,u-=2;break;case mb:for(c>>>=u&7,u-=u&7;u<32;){if(a===0)break e;a--,c+=r[s++]<<u,u+=8}if((c&65535)!==(c>>>16^65535)){t.msg="invalid stored block lengths",n.mode=Un;break}if(n.length=c&65535,c=0,u=0,n.mode=W0,e===op)break e;case W0:n.mode=gb;case gb:if(p=n.length,p){if(p>a&&(p=a),p>l&&(p=l),p===0)break e;i.set(r.subarray(s,s+p),o),a-=p,s+=p,l-=p,o+=p,n.length-=p;break}n.mode=Go;break;case yb:for(;u<14;){if(a===0)break e;a--,c+=r[s++]<<u,u+=8}if(n.nlen=(c&31)+257,c>>>=5,u-=5,n.ndist=(c&31)+1,c>>>=5,u-=5,n.ncode=(c&15)+4,c>>>=4,u-=4,n.nlen>286||n.ndist>30){t.msg="too many length or distance symbols",n.mode=Un;break}n.have=0,n.mode=vb;case vb:for(;n.have<n.ncode;){for(;u<3;){if(a===0)break e;a--,c+=r[s++]<<u,u+=8}n.lens[I[n.have++]]=c&7,c>>>=3,u-=3}for(;n.have<19;)n.lens[I[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,M={bits:n.lenbits},S=hd(OU,n.lens,0,19,n.lencode,0,n.work,M),n.lenbits=M.bits,S){t.msg="invalid code lengths set",n.mode=Un;break}n.have=0,n.mode=wb;case wb:for(;n.have<n.nlen+n.ndist;){for(;C=n.lencode[c&(1<<n.lenbits)-1],_=C>>>24,k=C>>>16&255,L=C&65535,!(_<=u);){if(a===0)break e;a--,c+=r[s++]<<u,u+=8}if(L<16)c>>>=_,u-=_,n.lens[n.have++]=L;else{if(L===16){for(A=_+2;u<A;){if(a===0)break e;a--,c+=r[s++]<<u,u+=8}if(c>>>=_,u-=_,n.have===0){t.msg="invalid bit length repeat",n.mode=Un;break}j=n.lens[n.have-1],p=3+(c&3),c>>>=2,u-=2}else if(L===17){for(A=_+3;u<A;){if(a===0)break e;a--,c+=r[s++]<<u,u+=8}c>>>=_,u-=_,j=0,p=3+(c&7),c>>>=3,u-=3}else{for(A=_+7;u<A;){if(a===0)break e;a--,c+=r[s++]<<u,u+=8}c>>>=_,u-=_,j=0,p=11+(c&127),c>>>=7,u-=7}if(n.have+p>n.nlen+n.ndist){t.msg="invalid bit length repeat",n.mode=Un;break}for(;p--;)n.lens[n.have++]=j}}if(n.mode===Un)break;if(n.lens[256]===0){t.msg="invalid code -- missing end-of-block",n.mode=Un;break}if(n.lenbits=9,M={bits:n.lenbits},S=hd(cE,n.lens,0,n.nlen,n.lencode,0,n.work,M),n.lenbits=M.bits,S){t.msg="invalid literal/lengths set",n.mode=Un;break}if(n.distbits=6,n.distcode=n.distdyn,M={bits:n.distbits},S=hd(uE,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,M),n.distbits=M.bits,S){t.msg="invalid distances set",n.mode=Un;break}if(n.mode=ap,e===op)break e;case ap:n.mode=lp;case lp:if(a>=6&&l>=258){t.next_out=o,t.avail_out=l,t.next_in=s,t.avail_in=a,n.hold=c,n.bits=u,CU(t,y),o=t.next_out,i=t.output,l=t.avail_out,s=t.next_in,r=t.input,a=t.avail_in,c=n.hold,u=n.bits,n.mode===Go&&(n.back=-1);break}for(n.back=0;C=n.lencode[c&(1<<n.lenbits)-1],_=C>>>24,k=C>>>16&255,L=C&65535,!(_<=u);){if(a===0)break e;a--,c+=r[s++]<<u,u+=8}if(k&&!(k&240)){for(D=_,z=k,X=L;C=n.lencode[X+((c&(1<<D+z)-1)>>D)],_=C>>>24,k=C>>>16&255,L=C&65535,!(D+_<=u);){if(a===0)break e;a--,c+=r[s++]<<u,u+=8}c>>>=D,u-=D,n.back+=D}if(c>>>=_,u-=_,n.back+=_,n.length=L,k===0){n.mode=Sb;break}if(k&32){n.back=-1,n.mode=Go;break}if(k&64){t.msg="invalid literal/length code",n.mode=Un;break}n.extra=k&15,n.mode=xb;case xb:if(n.extra){for(A=n.extra;u<A;){if(a===0)break e;a--,c+=r[s++]<<u,u+=8}n.length+=c&(1<<n.extra)-1,c>>>=n.extra,u-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=_b;case _b:for(;C=n.distcode[c&(1<<n.distbits)-1],_=C>>>24,k=C>>>16&255,L=C&65535,!(_<=u);){if(a===0)break e;a--,c+=r[s++]<<u,u+=8}if(!(k&240)){for(D=_,z=k,X=L;C=n.distcode[X+((c&(1<<D+z)-1)>>D)],_=C>>>24,k=C>>>16&255,L=C&65535,!(D+_<=u);){if(a===0)break e;a--,c+=r[s++]<<u,u+=8}c>>>=D,u-=D,n.back+=D}if(c>>>=_,u-=_,n.back+=_,k&64){t.msg="invalid distance code",n.mode=Un;break}n.offset=L,n.extra=k&15,n.mode=bb;case bb:if(n.extra){for(A=n.extra;u<A;){if(a===0)break e;a--,c+=r[s++]<<u,u+=8}n.offset+=c&(1<<n.extra)-1,c>>>=n.extra,u-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){t.msg="invalid distance too far back",n.mode=Un;break}n.mode=Nb;case Nb:if(l===0)break e;if(p=y-l,n.offset>p){if(p=n.offset-p,p>n.whave&&n.sane){t.msg="invalid distance too far back",n.mode=Un;break}p>n.wnext?(p-=n.wnext,b=n.wsize-p):b=n.wnext-p,p>n.length&&(p=n.length),N=n.window}else N=i,b=o-n.offset,p=n.length;p>l&&(p=l),l-=p,n.length-=p;do i[o++]=N[b++];while(--p);n.length===0&&(n.mode=lp);break;case Sb:if(l===0)break e;i[o++]=n.length,l--,n.mode=lp;break;case $0:if(n.wrap){for(;u<32;){if(a===0)break e;a--,c|=r[s++]<<u,u+=8}if(y-=l,t.total_out+=y,n.total+=y,n.wrap&4&&y&&(t.adler=n.check=n.flags?yo(n.check,i,y,o-y):z2(n.check,i,y,o-y)),y=l,n.wrap&4&&(n.flags?c:Tb(c))!==n.check){t.msg="incorrect data check",n.mode=Un;break}c=0,u=0}n.mode=Ab;case Ab:if(n.wrap&&n.flags){for(;u<32;){if(a===0)break e;a--,c+=r[s++]<<u,u+=8}if(n.wrap&4&&c!==(n.total&4294967295)){t.msg="incorrect length check",n.mode=Un;break}c=0,u=0}n.mode=Eb;case Eb:S=FU;break e;case Un:S=hE;break e;case fE:return dE;case pE:default:return Os}return t.next_out=o,t.avail_out=l,t.next_in=s,t.avail_in=a,n.hold=c,n.bits=u,(n.wsize||y!==t.avail_out&&n.mode<Un&&(n.mode<$0||e!==ib))&&wE(t,t.output,t.next_out,y-t.avail_out),g-=t.avail_in,y-=t.avail_out,t.total_in+=g,t.total_out+=y,n.total+=y,n.wrap&4&&y&&(t.adler=n.check=n.flags?yo(n.check,i,y,t.next_out-y):z2(n.check,i,y,t.next_out-y)),t.data_type=n.bits+(n.last?64:0)+(n.mode===Go?128:0)+(n.mode===ap||n.mode===W0?256:0),(g===0&&y===0||e===ib)&&S===Sc&&(S=VU),S},YU=t=>{if(Dc(t))return Os;let e=t.state;return e.window&&(e.window=null),t.state=null,Sc},QU=(t,e)=>{if(Dc(t))return Os;const n=t.state;return n.wrap&2?(n.head=e,e.done=!1,Sc):Os},XU=(t,e)=>{const n=e.length;let r,i,s;return Dc(t)||(r=t.state,r.wrap!==0&&r.mode!==Rm)?Os:r.mode===Rm&&(i=1,i=z2(i,e,n,0),i!==r.check)?hE:(s=wE(t,e,n,n),s?(r.mode=fE,dE):(r.havedict=1,Sc))};var JU=gE,ZU=yE,eV=mE,tV=$U,nV=vE,rV=KU,iV=YU,sV=QU,oV=XU,aV="pako inflate (from Nodeca project)",Xo={inflateReset:JU,inflateReset2:ZU,inflateResetKeep:eV,inflateInit:tV,inflateInit2:nV,inflate:rV,inflateEnd:iV,inflateGetHeader:sV,inflateSetDictionary:oV,inflateInfo:aV};function lV(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var cV=lV;const xE=Object.prototype.toString,{Z_NO_FLUSH:uV,Z_FINISH:hV,Z_OK:$d,Z_STREAM_END:Y0,Z_NEED_DICT:Q0,Z_STREAM_ERROR:dV,Z_DATA_ERROR:kb,Z_MEM_ERROR:fV}=oE;function gf(t){this.options=aE.assign({chunkSize:1024*64,windowBits:15,to:""},t||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(t&&t.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15||(e.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new IU,this.strm.avail_out=0;let n=Xo.inflateInit2(this.strm,e.windowBits);if(n!==$d)throw new Error(q2[n]);if(this.header=new cV,Xo.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=H2.string2buf(e.dictionary):xE.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(n=Xo.inflateSetDictionary(this.strm,e.dictionary),n!==$d)))throw new Error(q2[n])}gf.prototype.push=function(t,e){const n=this.strm,r=this.options.chunkSize,i=this.options.dictionary;let s,o,a;if(this.ended)return!1;for(e===~~e?o=e:o=e===!0?hV:uV,xE.call(t)==="[object ArrayBuffer]"?n.input=new Uint8Array(t):n.input=t,n.next_in=0,n.avail_in=n.input.length;;){for(n.avail_out===0&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),s=Xo.inflate(n,o),s===Q0&&i&&(s=Xo.inflateSetDictionary(n,i),s===$d?s=Xo.inflate(n,o):s===kb&&(s=Q0));n.avail_in>0&&s===Y0&&n.state.wrap>0&&t[n.next_in]!==0;)Xo.inflateReset(n),s=Xo.inflate(n,o);switch(s){case dV:case kb:case Q0:case fV:return this.onEnd(s),this.ended=!0,!1}if(a=n.avail_out,n.next_out&&(n.avail_out===0||s===Y0))if(this.options.to==="string"){let l=H2.utf8border(n.output,n.next_out),c=n.next_out-l,u=H2.buf2string(n.output,l);n.next_out=c,n.avail_out=r-c,c&&n.output.set(n.output.subarray(l,l+c),0),this.onData(u)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(!(s===$d&&a===0)){if(s===Y0)return s=Xo.inflateEnd(this.strm),this.onEnd(s),this.ended=!0,!0;if(n.avail_in===0)break}}return!0};gf.prototype.onData=function(t){this.chunks.push(t)};gf.prototype.onEnd=function(t){t===$d&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=aE.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function pV(t,e){const n=new gf(e);if(n.push(t),n.err)throw n.msg||q2[n.err];return n.result}var mV=gf,gV=pV,yV={Inflate:mV,inflate:gV};const{Inflate:vV,inflate:wV}=yV;var Cb=vV,xV=wV;const _E=[];for(let t=0;t<256;t++){let e=t;for(let n=0;n<8;n++)e&1?e=3988292384^e>>>1:e=e>>>1;_E[t]=e}const Pb=4294967295;function _V(t,e,n){let r=t;for(let i=0;i<n;i++)r=_E[(r^e[i])&255]^r>>>8;return r}function bV(t,e){return(_V(Pb,t,e)^Pb)>>>0}function Rb(t,e,n){const r=t.readUint32(),i=bV(new Uint8Array(t.buffer,t.byteOffset+t.offset-e-4,e),e);if(i!==r)throw new Error(`CRC mismatch for chunk ${n}. Expected ${r}, found ${i}`)}function bE(t,e,n){for(let r=0;r<n;r++)e[r]=t[r]}function NE(t,e,n,r){let i=0;for(;i<r;i++)e[i]=t[i];for(;i<n;i++)e[i]=t[i]+e[i-r]&255}function SE(t,e,n,r){let i=0;if(n.length===0)for(;i<r;i++)e[i]=t[i];else for(;i<r;i++)e[i]=t[i]+n[i]&255}function AE(t,e,n,r,i){let s=0;if(n.length===0){for(;s<i;s++)e[s]=t[s];for(;s<r;s++)e[s]=t[s]+(e[s-i]>>1)&255}else{for(;s<i;s++)e[s]=t[s]+(n[s]>>1)&255;for(;s<r;s++)e[s]=t[s]+(e[s-i]+n[s]>>1)&255}}function EE(t,e,n,r,i){let s=0;if(n.length===0){for(;s<i;s++)e[s]=t[s];for(;s<r;s++)e[s]=t[s]+e[s-i]&255}else{for(;s<i;s++)e[s]=t[s]+n[s]&255;for(;s<r;s++)e[s]=t[s]+NV(e[s-i],n[s],n[s-i])&255}}function NV(t,e,n){const r=t+e-n,i=Math.abs(r-t),s=Math.abs(r-e),o=Math.abs(r-n);return i<=s&&i<=o?t:s<=o?e:n}function SV(t,e,n,r,i,s){switch(t){case 0:bE(e,n,i);break;case 1:NE(e,n,i,s);break;case 2:SE(e,n,r,i);break;case 3:AE(e,n,r,i,s);break;case 4:EE(e,n,r,i,s);break;default:throw new Error(`Unsupported filter: ${t}`)}}const AV=new Uint16Array([255]),EV=new Uint8Array(AV.buffer),TV=EV[0]===255;function IV(t){const{data:e,width:n,height:r,channels:i,depth:s}=t,o=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],a=Math.ceil(s/8)*i,l=new Uint8Array(r*n*a);let c=0;for(let u=0;u<7;u++){const g=o[u],y=Math.ceil((n-g.x)/g.xStep),p=Math.ceil((r-g.y)/g.yStep);if(y<=0||p<=0)continue;const b=y*a,N=new Uint8Array(b);for(let C=0;C<p;C++){const _=e[c++],k=e.subarray(c,c+b);c+=b;const L=new Uint8Array(b);SV(_,k,L,N,b,a),N.set(L);for(let D=0;D<y;D++){const z=g.x+D*g.xStep,X=g.y+C*g.yStep;if(!(z>=n||X>=r))for(let j=0;j<a;j++)l[(X*n+z)*a+j]=L[D*a+j]}}}if(s===16){const u=new Uint16Array(l.buffer);if(TV)for(let g=0;g<u.length;g++)u[g]=kV(u[g]);return u}else return l}function kV(t){return(t&255)<<8|t>>8&255}const CV=new Uint16Array([255]),PV=new Uint8Array(CV.buffer),RV=PV[0]===255,LV=new Uint8Array(0);function Lb(t){const{data:e,width:n,height:r,channels:i,depth:s}=t,o=Math.ceil(s/8)*i,a=Math.ceil(s/8*i*n),l=new Uint8Array(r*a);let c=LV,u=0,g,y;for(let p=0;p<r;p++){switch(g=e.subarray(u+1,u+1+a),y=l.subarray(p*a,(p+1)*a),e[u]){case 0:bE(g,y,a);break;case 1:NE(g,y,a,o);break;case 2:SE(g,y,c,a);break;case 3:AE(g,y,c,a,o);break;case 4:EE(g,y,c,a,o);break;default:throw new Error(`Unsupported filter: ${e[u]}`)}c=y,u+=a+1}if(s===16){const p=new Uint16Array(l.buffer);if(RV)for(let b=0;b<p.length;b++)p[b]=jV(p[b]);return p}else return l}function jV(t){return(t&255)<<8|t>>8&255}const Dp=Uint8Array.of(137,80,78,71,13,10,26,10);function jb(t){if(!DV(t.readBytes(Dp.length)))throw new Error("wrong PNG signature")}function DV(t){if(t.length<Dp.length)return!1;for(let e=0;e<Dp.length;e++)if(t[e]!==Dp[e])return!1;return!0}const OV="tEXt",MV=0,TE=new TextDecoder("latin1");function FV(t){if(VV(t),t.length===0||t.length>79)throw new Error("keyword length must be between 1 and 79")}const UV=/^[\u0000-\u00FF]*$/;function VV(t){if(!UV.test(t))throw new Error("invalid latin1 text")}function BV(t,e,n){const r=IE(e);t[r]=zV(e,n-r.length-1)}function IE(t){for(t.mark();t.readByte()!==MV;);const e=t.offset;t.reset();const n=TE.decode(t.readBytes(e-t.offset-1));return t.skip(1),FV(n),n}function zV(t,e){return TE.decode(t.readBytes(e))}const os={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},X0={UNKNOWN:-1,DEFLATE:0},Db={UNKNOWN:-1,ADAPTIVE:0},J0={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},cp={NONE:0,BACKGROUND:1,PREVIOUS:2},Z0={SOURCE:0,OVER:1};class qV extends u5{constructor(n,r={}){super(n);gn(this,"_checkCrc");gn(this,"_inflator");gn(this,"_png");gn(this,"_apng");gn(this,"_end");gn(this,"_hasPalette");gn(this,"_palette");gn(this,"_hasTransparency");gn(this,"_transparency");gn(this,"_compressionMethod");gn(this,"_filterMethod");gn(this,"_interlaceMethod");gn(this,"_colorType");gn(this,"_isAnimated");gn(this,"_numberOfFrames");gn(this,"_numberOfPlays");gn(this,"_frames");gn(this,"_writingDataChunks");const{checkCrc:i=!1}=r;this._checkCrc=i,this._inflator=new Cb,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=X0.UNKNOWN,this._filterMethod=Db.UNKNOWN,this._interlaceMethod=J0.UNKNOWN,this._colorType=os.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(jb(this);!this._end;){const n=this.readUint32(),r=this.readChars(4);this.decodeChunk(n,r)}return this.decodeImage(),this._png}decodeApng(){for(jb(this);!this._end;){const n=this.readUint32(),r=this.readChars(4);this.decodeApngChunk(n,r)}return this.decodeApngImage(),this._apng}decodeChunk(n,r){const i=this.offset;switch(r){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(n);break;case"IDAT":this.decodeIDAT(n);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(n);break;case"iCCP":this.decodeiCCP(n);break;case OV:BV(this._png.text,this,n);break;case"pHYs":this.decodepHYs();break;default:this.skip(n);break}if(this.offset-i!==n)throw new Error(`Length mismatch while decoding chunk ${r}`);this._checkCrc?Rb(this,n+4,r):this.skip(4)}decodeApngChunk(n,r){const i=this.offset;switch(r!=="fdAT"&&r!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),r){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(n);break;default:this.decodeChunk(n,r),this.offset=i+n;break}if(this.offset-i!==n)throw new Error(`Length mismatch while decoding chunk ${r}`);this._checkCrc?Rb(this,n+4,r):this.skip(4)}decodeIHDR(){const n=this._png;n.width=this.readUint32(),n.height=this.readUint32(),n.depth=HV(this.readUint8());const r=this.readUint8();this._colorType=r;let i;switch(r){case os.GREYSCALE:i=1;break;case os.TRUECOLOUR:i=3;break;case os.INDEXED_COLOUR:i=1;break;case os.GREYSCALE_ALPHA:i=2;break;case os.TRUECOLOUR_ALPHA:i=4;break;case os.UNKNOWN:default:throw new Error(`Unknown color type: ${r}`)}if(this._png.channels=i,this._compressionMethod=this.readUint8(),this._compressionMethod!==X0.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const n={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(n)}decodePLTE(n){if(n%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${n}`);const r=n/3;this._hasPalette=!0;const i=[];this._palette=i;for(let s=0;s<r;s++)i.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(n){this._writingDataChunks=!0;const r=n,i=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,i,r)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(n)}decodeFDAT(n){this._writingDataChunks=!0;let r=n,i=this.offset+this.byteOffset;if(i+=4,r-=4,this._inflator.push(new Uint8Array(this.buffer,i,r)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(n)}decodetRNS(n){switch(this._colorType){case os.GREYSCALE:case os.TRUECOLOUR:{if(n%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${n}`);if(n/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${n/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(n/2);for(let r=0;r<n/2;r++)this._transparency[r]=this.readUint16();break}case os.INDEXED_COLOUR:{if(n>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${n} vs ${this._palette.length})`);let r=0;for(;r<n;r++){const i=this.readByte();this._palette[r].push(i)}for(;r<this._palette.length;r++)this._palette[r].push(255);break}case os.UNKNOWN:case os.GREYSCALE_ALPHA:case os.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(n){const r=IE(this),i=this.readUint8();if(i!==X0.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${i}`);const s=this.readBytes(n-r.length-2);this._png.iccEmbeddedProfile={name:r,profile:xV(s)}}decodepHYs(){const n=this.readUint32(),r=this.readUint32(),i=this.readByte();this._png.resolution={x:n,y:r,unit:i}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let n=0;n<this._numberOfFrames;n++){const r={sequenceNumber:this._frames[n].sequenceNumber,delayNumber:this._frames[n].delayNumber,delayDenominator:this._frames[n].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},i=this._frames.at(n);if(i){if(i.data=Lb({data:i.data,width:i.width,height:i.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),n===0||i.xOffset===0&&i.yOffset===0&&i.width===this._png.width&&i.height===this._png.height)r.data=i.data;else{const s=this._apng.frames.at(n-1);this.disposeFrame(i,s,r),this.addFrameDataToCanvas(r,i)}this._apng.frames.push(r)}}return this._apng}disposeFrame(n,r,i){switch(n.disposeOp){case cp.NONE:break;case cp.BACKGROUND:for(let s=0;s<this._png.height;s++)for(let o=0;o<this._png.width;o++){const a=(s*n.width+o)*this._png.channels;for(let l=0;l<this._png.channels;l++)i.data[a+l]=0}break;case cp.PREVIOUS:i.data.set(r.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(n,r){const i=1<<this._png.depth,s=(o,a)=>{const l=((o+r.yOffset)*this._png.width+r.xOffset+a)*this._png.channels,c=(o*r.width+a)*this._png.channels;return{index:l,frameIndex:c}};switch(r.blendOp){case Z0.SOURCE:for(let o=0;o<r.height;o++)for(let a=0;a<r.width;a++){const{index:l,frameIndex:c}=s(o,a);for(let u=0;u<this._png.channels;u++)n.data[l+u]=r.data[c+u]}break;case Z0.OVER:for(let o=0;o<r.height;o++)for(let a=0;a<r.width;a++){const{index:l,frameIndex:c}=s(o,a);for(let u=0;u<this._png.channels;u++){const g=r.data[c+this._png.channels-1]/i,y=u%(this._png.channels-1)===0?1:r.data[c+u],p=Math.floor(g*y+(1-g)*n.data[l+u]);n.data[l+u]+=p}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){var r;if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const n=this._isAnimated?((r=this._frames)==null?void 0:r.at(0)).data:this._inflator.result;if(this._filterMethod!==Db.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===J0.NO_INTERLACE)this._png.data=Lb({data:n,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===J0.ADAM7)this._png.data=IV({data:n,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const n=this._inflator.result,r=this._frames.at(-1);r?r.data=n:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:cp.NONE,blendOp:Z0.SOURCE,data:n}),this._inflator=new Cb,this._writingDataChunks=!1}}function HV(t){if(t!==1&&t!==2&&t!==4&&t!==8&&t!==16)throw new Error(`invalid bit depth: ${t}`);return t}var Ob;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.METRE=1]="METRE"})(Ob||(Ob={}));function WV(t,e){return new qV(t,e).decode()}var It=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function e1(){It.console&&typeof It.console.log=="function"&&It.console.log.apply(It.console,arguments)}var Tn={log:e1,warn:function(t){It.console&&(typeof It.console.warn=="function"?It.console.warn.apply(It.console,arguments):e1.call(null,arguments))},error:function(t){It.console&&(typeof It.console.error=="function"?It.console.error.apply(It.console,arguments):e1(t))}};function t1(t,e,n){var r=new XMLHttpRequest;r.open("GET",t),r.responseType="blob",r.onload=function(){Ql(r.response,e,n)},r.onerror=function(){Tn.error("could not download file")},r.send()}function Mb(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function up(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var Ql=It.saveAs||((typeof window>"u"?"undefined":yn(window))!=="object"||window!==It?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,n){var r=It.URL||It.webkitURL,i=document.createElement("a");e=e||t.name||"download",i.download=e,i.rel="noopener",typeof t=="string"?(i.href=t,i.origin!==location.origin?Mb(i.href)?t1(t,e,n):up(i,i.target="_blank"):up(i)):(i.href=r.createObjectURL(t),setTimeout(function(){r.revokeObjectURL(i.href)},4e4),setTimeout(function(){up(i)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,n){if(e=e||t.name||"download",typeof t=="string")if(Mb(t))t1(t,e,n);else{var r=document.createElement("a");r.href=t,r.target="_blank",setTimeout(function(){up(r)})}else navigator.msSaveOrOpenBlob(function(i,s){return s===void 0?s={autoBom:!1}:yn(s)!=="object"&&(Tn.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i}(t,n),e)}:function(t,e,n,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof t=="string")return t1(t,e,n);var i=t.type==="application/octet-stream",s=/constructor/i.test(It.HTMLElement)||It.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||i&&s)&&(typeof FileReader>"u"?"undefined":yn(FileReader))==="object"){var a=new FileReader;a.onloadend=function(){var u=a.result;u=o?u:u.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=u:location=u,r=null},a.readAsDataURL(t)}else{var l=It.URL||It.webkitURL,c=l.createObjectURL(t);r?r.location=c:location.href=c,r=null,setTimeout(function(){l.revokeObjectURL(c)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function kE(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(a){return[parseInt(a[1]),parseInt(a[2]),parseInt(a[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}}],r=0;r<n.length;r++){var i=n[r].re,s=n[r].process,o=i.exec(t);o&&(e=s(o),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var a=this.r.toString(16),l=this.g.toString(16),c=this.b.toString(16);return a.length==1&&(a="0"+a),l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),"#"+a+l+c}}var Op=It.atob.bind(It),Fb=It.btoa.bind(It);/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function n1(t,e){var n=t[0],r=t[1],i=t[2],s=t[3];n=li(n,r,i,s,e[0],7,-680876936),s=li(s,n,r,i,e[1],12,-389564586),i=li(i,s,n,r,e[2],17,606105819),r=li(r,i,s,n,e[3],22,-1044525330),n=li(n,r,i,s,e[4],7,-176418897),s=li(s,n,r,i,e[5],12,1200080426),i=li(i,s,n,r,e[6],17,-1473231341),r=li(r,i,s,n,e[7],22,-45705983),n=li(n,r,i,s,e[8],7,1770035416),s=li(s,n,r,i,e[9],12,-1958414417),i=li(i,s,n,r,e[10],17,-42063),r=li(r,i,s,n,e[11],22,-1990404162),n=li(n,r,i,s,e[12],7,1804603682),s=li(s,n,r,i,e[13],12,-40341101),i=li(i,s,n,r,e[14],17,-1502002290),n=ci(n,r=li(r,i,s,n,e[15],22,1236535329),i,s,e[1],5,-165796510),s=ci(s,n,r,i,e[6],9,-1069501632),i=ci(i,s,n,r,e[11],14,643717713),r=ci(r,i,s,n,e[0],20,-373897302),n=ci(n,r,i,s,e[5],5,-701558691),s=ci(s,n,r,i,e[10],9,38016083),i=ci(i,s,n,r,e[15],14,-660478335),r=ci(r,i,s,n,e[4],20,-405537848),n=ci(n,r,i,s,e[9],5,568446438),s=ci(s,n,r,i,e[14],9,-1019803690),i=ci(i,s,n,r,e[3],14,-187363961),r=ci(r,i,s,n,e[8],20,1163531501),n=ci(n,r,i,s,e[13],5,-1444681467),s=ci(s,n,r,i,e[2],9,-51403784),i=ci(i,s,n,r,e[7],14,1735328473),n=ui(n,r=ci(r,i,s,n,e[12],20,-1926607734),i,s,e[5],4,-378558),s=ui(s,n,r,i,e[8],11,-2022574463),i=ui(i,s,n,r,e[11],16,1839030562),r=ui(r,i,s,n,e[14],23,-35309556),n=ui(n,r,i,s,e[1],4,-1530992060),s=ui(s,n,r,i,e[4],11,1272893353),i=ui(i,s,n,r,e[7],16,-155497632),r=ui(r,i,s,n,e[10],23,-1094730640),n=ui(n,r,i,s,e[13],4,681279174),s=ui(s,n,r,i,e[0],11,-358537222),i=ui(i,s,n,r,e[3],16,-722521979),r=ui(r,i,s,n,e[6],23,76029189),n=ui(n,r,i,s,e[9],4,-640364487),s=ui(s,n,r,i,e[12],11,-421815835),i=ui(i,s,n,r,e[15],16,530742520),n=hi(n,r=ui(r,i,s,n,e[2],23,-995338651),i,s,e[0],6,-198630844),s=hi(s,n,r,i,e[7],10,1126891415),i=hi(i,s,n,r,e[14],15,-1416354905),r=hi(r,i,s,n,e[5],21,-57434055),n=hi(n,r,i,s,e[12],6,1700485571),s=hi(s,n,r,i,e[3],10,-1894986606),i=hi(i,s,n,r,e[10],15,-1051523),r=hi(r,i,s,n,e[1],21,-2054922799),n=hi(n,r,i,s,e[8],6,1873313359),s=hi(s,n,r,i,e[15],10,-30611744),i=hi(i,s,n,r,e[6],15,-1560198380),r=hi(r,i,s,n,e[13],21,1309151649),n=hi(n,r,i,s,e[4],6,-145523070),s=hi(s,n,r,i,e[11],10,-1120210379),i=hi(i,s,n,r,e[2],15,718787259),r=hi(r,i,s,n,e[9],21,-343485551),t[0]=sl(n,t[0]),t[1]=sl(r,t[1]),t[2]=sl(i,t[2]),t[3]=sl(s,t[3])}function kg(t,e,n,r,i,s){return e=sl(sl(e,t),sl(r,s)),sl(e<<i|e>>>32-i,n)}function li(t,e,n,r,i,s,o){return kg(e&n|~e&r,t,e,i,s,o)}function ci(t,e,n,r,i,s,o){return kg(e&r|n&~r,t,e,i,s,o)}function ui(t,e,n,r,i,s,o){return kg(e^n^r,t,e,i,s,o)}function hi(t,e,n,r,i,s,o){return kg(n^(e|~r),t,e,i,s,o)}function CE(t){var e,n=t.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)n1(r,$V(t.substring(e-64,e)));t=t.substring(e-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)i[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(n1(r,i),e=0;e<16;e++)i[e]=0;return i[14]=8*n,n1(r,i),r}function $V(t){var e,n=[];for(e=0;e<64;e+=4)n[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return n}var Ub="0123456789abcdef".split("");function GV(t){for(var e="",n=0;n<4;n++)e+=Ub[t>>8*n+4&15]+Ub[t>>8*n&15];return e}function KV(t){return String.fromCharCode(255&t,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function W2(t){return CE(t).map(KV).join("")}var YV=function(t){for(var e=0;e<t.length;e++)t[e]=GV(t[e]);return t.join("")}(CE("hello"))!="5d41402abc4b2a76b9719d911017c592";function sl(t,e){if(YV){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function $2(t,e){var n,r,i,s;if(t!==n){for(var o=(i=t,s=1+(256/t.length|0),new Array(s+1).join(i)),a=[],l=0;l<256;l++)a[l]=l;var c=0;for(l=0;l<256;l++){var u=a[l];c=(c+u+o.charCodeAt(l))%256,a[l]=a[c],a[c]=u}n=t,r=a}else a=r;var g=e.length,y=0,p=0,b="";for(l=0;l<g;l++)p=(p+(u=a[y=(y+1)%256]))%256,a[y]=a[p],a[p]=u,o=a[(a[y]+a[p])%256],b+=String.fromCharCode(e.charCodeAt(l)^o);return b}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var Vb={print:4,modify:8,copy:16,"annot-forms":32};function tu(t,e,n,r){this.v=1,this.r=2;var i=192;t.forEach(function(a){if(Vb.perm!==void 0)throw new Error("Invalid permission: "+a);i+=Vb[a]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var s=(e+this.padding).substr(0,32),o=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,o),this.P=-(1+(255^i)),this.encryptionKey=W2(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=$2(this.encryptionKey,this.padding)}function nu(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",n=t.length,r=0;r<n;r++){var i=t.charCodeAt(r);e+=i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?"#"+("0"+i.toString(16)).slice(-2):t[r]}return e}function Bb(t){if(yn(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(n,r,i){if(i=i||!1,typeof n!="string"||typeof r!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(n)||(e[n]={});var s=Math.random().toString(35);return e[n][s]=[r,!!i],s},this.unsubscribe=function(n){for(var r in e)if(e[r][n])return delete e[r][n],Object.keys(e[r]).length===0&&delete e[r],!0;return!1},this.publish=function(n){if(e.hasOwnProperty(n)){var r=Array.prototype.slice.call(arguments,1),i=[];for(var s in e[n]){var o=e[n][s];try{o[0].apply(t,r)}catch(a){It.console&&Tn.error("jsPDF PubSub Error",a.message,a)}o[1]&&i.push(s)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function Lm(t){if(!(this instanceof Lm))return new Lm(t);var e="opacity,stroke-opacity".split(",");for(var n in t)t.hasOwnProperty(n)&&e.indexOf(n)>=0&&(this[n]=t[n]);this.id="",this.objectNumber=-1}function PE(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function Xl(t,e,n,r,i){if(!(this instanceof Xl))return new Xl(t,e,n,r,i);this.type=t==="axial"?2:3,this.coords=e,this.colors=n,PE.call(this,r,i)}function gu(t,e,n,r,i){if(!(this instanceof gu))return new gu(t,e,n,r,i);this.boundingBox=t,this.xStep=e,this.yStep=n,this.stream="",this.cloneIndex=0,PE.call(this,r,i)}function wt(t){var e,n=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],i=arguments[2],s=arguments[3],o=[],a=1,l=16,c="S",u=null;yn(t=t||{})==="object"&&(n=t.orientation,r=t.unit||r,i=t.format||i,s=t.compress||t.compressPdf||s,(u=t.encryption||null)!==null&&(u.userPassword=u.userPassword||"",u.ownerPassword=u.ownerPassword||"",u.userPermissions=u.userPermissions||[]),a=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(l=t.floatPrecision),c=t.defaultPathOperation||"S"),o=t.filters||(s===!0?["FlateEncode"]:o),r=r||"mm",n=(""+(n||"P")).toLowerCase();var g=t.putOnlyUsedFonts||!1,y={},p={internal:{},__private__:{}};p.__private__.PubSub=Bb;var b="1.3",N=p.__private__.getPdfVersion=function(){return b};p.__private__.setPdfVersion=function(v){b=v};var C={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};p.__private__.getPageFormats=function(){return C};var _=p.__private__.getPageFormat=function(v){return C[v]};i=i||"a4";var k="compat",L="advanced",D=k;function z(){this.saveGraphicsState(),K(new et(xt,0,0,-xt,0,Ns()*xt).toString()+" cm"),this.setFontSize(this.getFontSize()/xt),c="n",D=L}function X(){this.restoreGraphicsState(),c="S",D=k}var j=p.__private__.combineFontStyleAndFontWeight=function(v,O){if(v=="bold"&&O=="normal"||v=="bold"&&O==400||v=="normal"&&O=="italic"||v=="bold"&&O=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return O&&(v=O==400||O==="normal"?v==="italic"?"italic":"normal":O!=700&&O!=="bold"||v!=="normal"?(O==700?"bold":O)+""+v:"bold"),v};p.advancedAPI=function(v){var O=D===k;return O&&z.call(this),typeof v!="function"||(v(this),O&&X.call(this)),this},p.compatAPI=function(v){var O=D===L;return O&&X.call(this),typeof v!="function"||(v(this),O&&z.call(this)),this},p.isAdvancedAPI=function(){return D===L};var S,T=function(v){if(D!==L)throw new Error(v+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},M=p.roundToPrecision=p.__private__.roundToPrecision=function(v,O){var J=e||O;if(isNaN(v)||isNaN(J))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return v.toFixed(J).replace(/0+$/,"")};S=p.hpf=p.__private__.hpf=typeof l=="number"?function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.hpf");return M(v,l)}:l==="smart"?function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.hpf");return M(v,v>-1&&v<1?16:5)}:function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.hpf");return M(v,16)};var A=p.f2=p.__private__.f2=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.f2");return M(v,2)},I=p.__private__.f3=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.f3");return M(v,3)},R=p.scale=p.__private__.scale=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.scale");return D===k?v*xt:D===L?v:void 0},G=function(v){return R(function(O){return D===k?Ns()-O:D===L?O:void 0}(v))};p.__private__.setPrecision=p.setPrecision=function(v){typeof parseInt(v,10)=="number"&&(e=parseInt(v,10))};var oe,pe="00000000000000000000000000000000",ge=p.__private__.getFileId=function(){return pe},ne=p.__private__.setFileId=function(v){return pe=v!==void 0&&/^[a-fA-F0-9]{32}$/.test(v)?v.toUpperCase():pe.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),u!==null&&(Sn=new tu(u.userPermissions,u.userPassword,u.ownerPassword,pe)),pe};p.setFileId=function(v){return ne(v),this},p.getFileId=function(){return ge()};var le=p.__private__.convertDateToPDFDate=function(v){var O=v.getTimezoneOffset(),J=O<0?"+":"-",ie=Math.floor(Math.abs(O/60)),fe=Math.abs(O%60),Ie=[J,te(ie),"'",te(fe),"'"].join("");return["D:",v.getFullYear(),te(v.getMonth()+1),te(v.getDate()),te(v.getHours()),te(v.getMinutes()),te(v.getSeconds()),Ie].join("")},we=p.__private__.convertPDFDateToDate=function(v){var O=parseInt(v.substr(2,4),10),J=parseInt(v.substr(6,2),10)-1,ie=parseInt(v.substr(8,2),10),fe=parseInt(v.substr(10,2),10),Ie=parseInt(v.substr(12,2),10),De=parseInt(v.substr(14,2),10);return new Date(O,J,ie,fe,Ie,De,0)},de=p.__private__.setCreationDate=function(v){var O;if(v===void 0&&(v=new Date),v instanceof Date)O=le(v);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(v))throw new Error("Invalid argument passed to jsPDF.setCreationDate");O=v}return oe=O},U=p.__private__.getCreationDate=function(v){var O=oe;return v==="jsDate"&&(O=we(oe)),O};p.setCreationDate=function(v){return de(v),this},p.getCreationDate=function(v){return U(v)};var W,te=p.__private__.padd2=function(v){return("0"+parseInt(v)).slice(-2)},Q=p.__private__.padd2Hex=function(v){return("00"+(v=v.toString())).substr(v.length)},re=0,q=[],ae=[],ue=0,me=[],_e=[],Le=!1,Te=ae;p.__private__.setCustomOutputDestination=function(v){Le=!0,Te=v};var Se=function(v){Le||(Te=v)};p.__private__.resetCustomOutputDestination=function(){Le=!1,Te=ae};var K=p.__private__.out=function(v){return v=v.toString(),ue+=v.length+1,Te.push(v),Te},Ce=p.__private__.write=function(v){return K(arguments.length===1?v.toString():Array.prototype.join.call(arguments," "))},it=p.__private__.getArrayBuffer=function(v){for(var O=v.length,J=new ArrayBuffer(O),ie=new Uint8Array(J);O--;)ie[O]=v.charCodeAt(O);return J},He=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];p.__private__.getStandardFonts=function(){return He};var Re=t.fontSize||16;p.__private__.setFontSize=p.setFontSize=function(v){return Re=D===L?v/xt:v,this};var Ze,$e=p.__private__.getFontSize=p.getFontSize=function(){return D===k?Re:Re*xt},st=t.R2L||!1;p.__private__.setR2L=p.setR2L=function(v){return st=v,this},p.__private__.getR2L=p.getR2L=function(){return st};var Ae,Mt=p.__private__.setZoomMode=function(v){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(v))Ze=v;else if(isNaN(v)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(v)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+v+'" is not recognized.');Ze=v}else Ze=parseInt(v,10)};p.__private__.getZoomMode=function(){return Ze};var gt,ze=p.__private__.setPageMode=function(v){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(v)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+v+'" is not recognized.');Ae=v};p.__private__.getPageMode=function(){return Ae};var lt=p.__private__.setLayoutMode=function(v){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(v)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+v+'" is not recognized.');gt=v};p.__private__.getLayoutMode=function(){return gt},p.__private__.setDisplayMode=p.setDisplayMode=function(v,O,J){return Mt(v),lt(O),ze(J),this};var Nt={title:"",subject:"",author:"",keywords:"",creator:""};p.__private__.getDocumentProperty=function(v){if(Object.keys(Nt).indexOf(v)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Nt[v]},p.__private__.getDocumentProperties=function(){return Nt},p.__private__.setDocumentProperties=p.setProperties=p.setDocumentProperties=function(v){for(var O in Nt)Nt.hasOwnProperty(O)&&v[O]&&(Nt[O]=v[O]);return this},p.__private__.setDocumentProperty=function(v,O){if(Object.keys(Nt).indexOf(v)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Nt[v]=O};var Ge,xt,tt,Dt,Qe,yt={},ot={},$t=[],Xe={},At={},Ke={},ut={},Tt=null,Be=0,Ye=[],ht=new Bb(p),Jn=t.hotfixes||[],Bt={},on={},Ht=[],et=function v(O,J,ie,fe,Ie,De){if(!(this instanceof v))return new v(O,J,ie,fe,Ie,De);isNaN(O)&&(O=1),isNaN(J)&&(J=0),isNaN(ie)&&(ie=0),isNaN(fe)&&(fe=1),isNaN(Ie)&&(Ie=0),isNaN(De)&&(De=0),this._matrix=[O,J,ie,fe,Ie,De]};Object.defineProperty(et.prototype,"sx",{get:function(){return this._matrix[0]},set:function(v){this._matrix[0]=v}}),Object.defineProperty(et.prototype,"shy",{get:function(){return this._matrix[1]},set:function(v){this._matrix[1]=v}}),Object.defineProperty(et.prototype,"shx",{get:function(){return this._matrix[2]},set:function(v){this._matrix[2]=v}}),Object.defineProperty(et.prototype,"sy",{get:function(){return this._matrix[3]},set:function(v){this._matrix[3]=v}}),Object.defineProperty(et.prototype,"tx",{get:function(){return this._matrix[4]},set:function(v){this._matrix[4]=v}}),Object.defineProperty(et.prototype,"ty",{get:function(){return this._matrix[5]},set:function(v){this._matrix[5]=v}}),Object.defineProperty(et.prototype,"a",{get:function(){return this._matrix[0]},set:function(v){this._matrix[0]=v}}),Object.defineProperty(et.prototype,"b",{get:function(){return this._matrix[1]},set:function(v){this._matrix[1]=v}}),Object.defineProperty(et.prototype,"c",{get:function(){return this._matrix[2]},set:function(v){this._matrix[2]=v}}),Object.defineProperty(et.prototype,"d",{get:function(){return this._matrix[3]},set:function(v){this._matrix[3]=v}}),Object.defineProperty(et.prototype,"e",{get:function(){return this._matrix[4]},set:function(v){this._matrix[4]=v}}),Object.defineProperty(et.prototype,"f",{get:function(){return this._matrix[5]},set:function(v){this._matrix[5]=v}}),Object.defineProperty(et.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(et.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(et.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(et.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),et.prototype.join=function(v){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(S).join(v)},et.prototype.multiply=function(v){var O=v.sx*this.sx+v.shy*this.shx,J=v.sx*this.shy+v.shy*this.sy,ie=v.shx*this.sx+v.sy*this.shx,fe=v.shx*this.shy+v.sy*this.sy,Ie=v.tx*this.sx+v.ty*this.shx+this.tx,De=v.tx*this.shy+v.ty*this.sy+this.ty;return new et(O,J,ie,fe,Ie,De)},et.prototype.decompose=function(){var v=this.sx,O=this.shy,J=this.shx,ie=this.sy,fe=this.tx,Ie=this.ty,De=Math.sqrt(v*v+O*O),nt=(v/=De)*J+(O/=De)*ie;J-=v*nt,ie-=O*nt;var dt=Math.sqrt(J*J+ie*ie);return nt/=dt,v*(ie/=dt)<O*(J/=dt)&&(v=-v,O=-O,nt=-nt,De=-De),{scale:new et(De,0,0,dt,0,0),translate:new et(1,0,0,1,fe,Ie),rotate:new et(v,O,-O,v,0,0),skew:new et(1,0,nt,1,0,0)}},et.prototype.toString=function(v){return this.join(" ")},et.prototype.inversed=function(){var v=this.sx,O=this.shy,J=this.shx,ie=this.sy,fe=this.tx,Ie=this.ty,De=1/(v*ie-O*J),nt=ie*De,dt=-O*De,St=-J*De,Ct=v*De;return new et(nt,dt,St,Ct,-nt*fe-St*Ie,-dt*fe-Ct*Ie)},et.prototype.applyToPoint=function(v){var O=v.x*this.sx+v.y*this.shx+this.tx,J=v.x*this.shy+v.y*this.sy+this.ty;return new _s(O,J)},et.prototype.applyToRectangle=function(v){var O=this.applyToPoint(v),J=this.applyToPoint(new _s(v.x+v.w,v.y+v.h));return new Ta(O.x,O.y,J.x-O.x,J.y-O.y)},et.prototype.clone=function(){var v=this.sx,O=this.shy,J=this.shx,ie=this.sy,fe=this.tx,Ie=this.ty;return new et(v,O,J,ie,fe,Ie)},p.Matrix=et;var Ft=p.matrixMult=function(v,O){return O.multiply(v)},Fn=new et(1,0,0,1,0,0);p.unitMatrix=p.identityMatrix=Fn;var _n=function(v,O){if(!At[v]){var J=(O instanceof Xl?"Sh":"P")+(Object.keys(Xe).length+1).toString(10);O.id=J,At[v]=J,Xe[J]=O,ht.publish("addPattern",O)}};p.ShadingPattern=Xl,p.TilingPattern=gu,p.addShadingPattern=function(v,O){return T("addShadingPattern()"),_n(v,O),this},p.beginTilingPattern=function(v){T("beginTilingPattern()"),uo(v.boundingBox[0],v.boundingBox[1],v.boundingBox[2]-v.boundingBox[0],v.boundingBox[3]-v.boundingBox[1],v.matrix)},p.endTilingPattern=function(v,O){T("endTilingPattern()"),O.stream=_e[W].join(`
`),_n(v,O),ht.publish("endTilingPattern",O),Ht.pop().restore()};var Nn,zt=p.__private__.newObject=function(){var v=en();return an(v,!0),v},en=p.__private__.newObjectDeferred=function(){return re++,q[re]=function(){return ue},re},an=function(v,O){return O=typeof O=="boolean"&&O,q[v]=ue,O&&K(v+" 0 obj"),v},Br=p.__private__.newAdditionalObject=function(){var v={objId:en(),content:""};return me.push(v),v},Lr=en(),Zn=en(),ni=p.__private__.decodeColorString=function(v){var O=v.split(" ");if(O.length!==2||O[1]!=="g"&&O[1]!=="G")O.length!==5||O[4]!=="k"&&O[4]!=="K"||(O=[(1-O[0])*(1-O[3]),(1-O[1])*(1-O[3]),(1-O[2])*(1-O[3]),"r"]);else{var J=parseFloat(O[0]);O=[J,J,J,"r"]}for(var ie="#",fe=0;fe<3;fe++)ie+=("0"+Math.floor(255*parseFloat(O[fe])).toString(16)).slice(-2);return ie},Nr=p.__private__.encodeColorString=function(v){var O;typeof v=="string"&&(v={ch1:v});var J=v.ch1,ie=v.ch2,fe=v.ch3,Ie=v.ch4,De=v.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof J=="string"&&J.charAt(0)!=="#"){var nt=new kE(J);if(nt.ok)J=nt.toHex();else if(!/^\d*\.?\d*$/.test(J))throw new Error('Invalid color "'+J+'" passed to jsPDF.encodeColorString.')}if(typeof J=="string"&&/^#[0-9A-Fa-f]{3}$/.test(J)&&(J="#"+J[1]+J[1]+J[2]+J[2]+J[3]+J[3]),typeof J=="string"&&/^#[0-9A-Fa-f]{6}$/.test(J)){var dt=parseInt(J.substr(1),16);J=dt>>16&255,ie=dt>>8&255,fe=255&dt}if(ie===void 0||Ie===void 0&&J===ie&&ie===fe)O=typeof J=="string"?J+" "+De[0]:v.precision===2?A(J/255)+" "+De[0]:I(J/255)+" "+De[0];else if(Ie===void 0||yn(Ie)==="object"){if(Ie&&!isNaN(Ie.a)&&Ie.a===0)return["1.","1.","1.",De[1]].join(" ");O=typeof J=="string"?[J,ie,fe,De[1]].join(" "):v.precision===2?[A(J/255),A(ie/255),A(fe/255),De[1]].join(" "):[I(J/255),I(ie/255),I(fe/255),De[1]].join(" ")}else O=typeof J=="string"?[J,ie,fe,Ie,De[2]].join(" "):v.precision===2?[A(J),A(ie),A(fe),A(Ie),De[2]].join(" "):[I(J),I(ie),I(fe),I(Ie),De[2]].join(" ");return O},Sr=p.__private__.getFilters=function(){return o},hn=p.__private__.putStream=function(v){var O=(v=v||{}).data||"",J=v.filters||Sr(),ie=v.alreadyAppliedFilters||[],fe=v.addLength1||!1,Ie=O.length,De=v.objectId,nt=function(er){return er};if(u!==null&&De===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");u!==null&&(nt=Sn.encryptor(De,0));var dt={};J===!0&&(J=["FlateEncode"]);var St=v.additionalKeyValues||[],Ct=(dt=wt.API.processDataByFilters!==void 0?wt.API.processDataByFilters(O,J):{data:O,reverseChain:[]}).reverseChain+(Array.isArray(ie)?ie.join(" "):ie.toString());if(dt.data.length!==0&&(St.push({key:"Length",value:dt.data.length}),fe===!0&&St.push({key:"Length1",value:Ie})),Ct.length!=0)if(Ct.split("/").length-1==1)St.push({key:"Filter",value:Ct});else{St.push({key:"Filter",value:"["+Ct+"]"});for(var Kt=0;Kt<St.length;Kt+=1)if(St[Kt].key==="DecodeParms"){for(var un=[],qn=0;qn<dt.reverseChain.split("/").length-1;qn+=1)un.push("null");un.push(St[Kt].value),St[Kt].value="["+un.join(" ")+"]"}}K("<<");for(var fn=0;fn<St.length;fn++)K("/"+St[fn].key+" "+St[fn].value);K(">>"),dt.data.length!==0&&(K("stream"),K(nt(dt.data)),K("endstream"))},Ar=p.__private__.putPage=function(v){var O=v.number,J=v.data,ie=v.objId,fe=v.contentsObjId;an(ie,!0),K("<</Type /Page"),K("/Parent "+v.rootDictionaryObjId+" 0 R"),K("/Resources "+v.resourceDictionaryObjId+" 0 R"),K("/MediaBox ["+parseFloat(S(v.mediaBox.bottomLeftX))+" "+parseFloat(S(v.mediaBox.bottomLeftY))+" "+S(v.mediaBox.topRightX)+" "+S(v.mediaBox.topRightY)+"]"),v.cropBox!==null&&K("/CropBox ["+S(v.cropBox.bottomLeftX)+" "+S(v.cropBox.bottomLeftY)+" "+S(v.cropBox.topRightX)+" "+S(v.cropBox.topRightY)+"]"),v.bleedBox!==null&&K("/BleedBox ["+S(v.bleedBox.bottomLeftX)+" "+S(v.bleedBox.bottomLeftY)+" "+S(v.bleedBox.topRightX)+" "+S(v.bleedBox.topRightY)+"]"),v.trimBox!==null&&K("/TrimBox ["+S(v.trimBox.bottomLeftX)+" "+S(v.trimBox.bottomLeftY)+" "+S(v.trimBox.topRightX)+" "+S(v.trimBox.topRightY)+"]"),v.artBox!==null&&K("/ArtBox ["+S(v.artBox.bottomLeftX)+" "+S(v.artBox.bottomLeftY)+" "+S(v.artBox.topRightX)+" "+S(v.artBox.topRightY)+"]"),typeof v.userUnit=="number"&&v.userUnit!==1&&K("/UserUnit "+v.userUnit),ht.publish("putPage",{objId:ie,pageContext:Ye[O],pageNumber:O,page:J}),K("/Contents "+fe+" 0 R"),K(">>"),K("endobj");var Ie=J.join(`
`);return D===L&&(Ie+=`
Q`),an(fe,!0),hn({data:Ie,filters:Sr(),objectId:fe}),K("endobj"),ie},jr=p.__private__.putPages=function(){var v,O,J=[];for(v=1;v<=Be;v++)Ye[v].objId=en(),Ye[v].contentsObjId=en();for(v=1;v<=Be;v++)J.push(Ar({number:v,data:_e[v],objId:Ye[v].objId,contentsObjId:Ye[v].contentsObjId,mediaBox:Ye[v].mediaBox,cropBox:Ye[v].cropBox,bleedBox:Ye[v].bleedBox,trimBox:Ye[v].trimBox,artBox:Ye[v].artBox,userUnit:Ye[v].userUnit,rootDictionaryObjId:Lr,resourceDictionaryObjId:Zn}));an(Lr,!0),K("<</Type /Pages");var ie="/Kids [";for(O=0;O<Be;O++)ie+=J[O]+" 0 R ";K(ie+"]"),K("/Count "+Be),K(">>"),K("endobj"),ht.publish("postPutPages")},zr=function(v){ht.publish("putFont",{font:v,out:K,newObject:zt,putStream:hn}),v.isAlreadyPutted!==!0&&(v.objectNumber=zt(),K("<<"),K("/Type /Font"),K("/BaseFont /"+nu(v.postScriptName)),K("/Subtype /Type1"),typeof v.encoding=="string"&&K("/Encoding /"+v.encoding),K("/FirstChar 32"),K("/LastChar 255"),K(">>"),K("endobj"))},xi=function(v){v.objectNumber=zt();var O=[];O.push({key:"Type",value:"/XObject"}),O.push({key:"Subtype",value:"/Form"}),O.push({key:"BBox",value:"["+[S(v.x),S(v.y),S(v.x+v.width),S(v.y+v.height)].join(" ")+"]"}),O.push({key:"Matrix",value:"["+v.matrix.toString()+"]"});var J=v.pages[1].join(`
`);hn({data:J,additionalKeyValues:O,objectId:v.objectNumber}),K("endobj")},gs=function(v,O){O||(O=21);var J=zt(),ie=function(De,nt){var dt,St=[],Ct=1/(nt-1);for(dt=0;dt<1;dt+=Ct)St.push(dt);if(St.push(1),De[0].offset!=0){var Kt={offset:0,color:De[0].color};De.unshift(Kt)}if(De[De.length-1].offset!=1){var un={offset:1,color:De[De.length-1].color};De.push(un)}for(var qn="",fn=0,er=0;er<St.length;er++){for(dt=St[er];dt>De[fn+1].offset;)fn++;var Hn=De[fn].offset,tr=(dt-Hn)/(De[fn+1].offset-Hn),Wn=De[fn].color,Mi=De[fn+1].color;qn+=Q(Math.round((1-tr)*Wn[0]+tr*Mi[0]).toString(16))+Q(Math.round((1-tr)*Wn[1]+tr*Mi[1]).toString(16))+Q(Math.round((1-tr)*Wn[2]+tr*Mi[2]).toString(16))}return qn.trim()}(v.colors,O),fe=[];fe.push({key:"FunctionType",value:"0"}),fe.push({key:"Domain",value:"[0.0 1.0]"}),fe.push({key:"Size",value:"["+O+"]"}),fe.push({key:"BitsPerSample",value:"8"}),fe.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),fe.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),hn({data:ie,additionalKeyValues:fe,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:J}),K("endobj"),v.objectNumber=zt(),K("<< /ShadingType "+v.type),K("/ColorSpace /DeviceRGB");var Ie="/Coords ["+S(parseFloat(v.coords[0]))+" "+S(parseFloat(v.coords[1]))+" ";v.type===2?Ie+=S(parseFloat(v.coords[2]))+" "+S(parseFloat(v.coords[3])):Ie+=S(parseFloat(v.coords[2]))+" "+S(parseFloat(v.coords[3]))+" "+S(parseFloat(v.coords[4]))+" "+S(parseFloat(v.coords[5])),K(Ie+="]"),v.matrix&&K("/Matrix ["+v.matrix.toString()+"]"),K("/Function "+J+" 0 R"),K("/Extend [true true]"),K(">>"),K("endobj")},jo=function(v,O){var J=en(),ie=zt();O.push({resourcesOid:J,objectOid:ie}),v.objectNumber=ie;var fe=[];fe.push({key:"Type",value:"/Pattern"}),fe.push({key:"PatternType",value:"1"}),fe.push({key:"PaintType",value:"1"}),fe.push({key:"TilingType",value:"1"}),fe.push({key:"BBox",value:"["+v.boundingBox.map(S).join(" ")+"]"}),fe.push({key:"XStep",value:S(v.xStep)}),fe.push({key:"YStep",value:S(v.yStep)}),fe.push({key:"Resources",value:J+" 0 R"}),v.matrix&&fe.push({key:"Matrix",value:"["+v.matrix.toString()+"]"}),hn({data:v.stream,additionalKeyValues:fe,objectId:v.objectNumber}),K("endobj")},oh=function(v){for(var O in v.objectNumber=zt(),K("<<"),v)switch(O){case"opacity":K("/ca "+A(v[O]));break;case"stroke-opacity":K("/CA "+A(v[O]))}K(">>"),K("endobj")},oo=function(v){an(v.resourcesOid,!0),K("<<"),K("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),function(){for(var O in K("/Font <<"),yt)yt.hasOwnProperty(O)&&(g===!1||g===!0&&y.hasOwnProperty(O))&&K("/"+O+" "+yt[O].objectNumber+" 0 R");K(">>")}(),function(){if(Object.keys(Xe).length>0){for(var O in K("/Shading <<"),Xe)Xe.hasOwnProperty(O)&&Xe[O]instanceof Xl&&Xe[O].objectNumber>=0&&K("/"+O+" "+Xe[O].objectNumber+" 0 R");ht.publish("putShadingPatternDict"),K(">>")}}(),function(O){if(Object.keys(Xe).length>0){for(var J in K("/Pattern <<"),Xe)Xe.hasOwnProperty(J)&&Xe[J]instanceof p.TilingPattern&&Xe[J].objectNumber>=0&&Xe[J].objectNumber<O&&K("/"+J+" "+Xe[J].objectNumber+" 0 R");ht.publish("putTilingPatternDict"),K(">>")}}(v.objectOid),function(){if(Object.keys(Ke).length>0){var O;for(O in K("/ExtGState <<"),Ke)Ke.hasOwnProperty(O)&&Ke[O].objectNumber>=0&&K("/"+O+" "+Ke[O].objectNumber+" 0 R");ht.publish("putGStateDict"),K(">>")}}(),function(){for(var O in K("/XObject <<"),Bt)Bt.hasOwnProperty(O)&&Bt[O].objectNumber>=0&&K("/"+O+" "+Bt[O].objectNumber+" 0 R");ht.publish("putXobjectDict"),K(">>")}(),K(">>"),K("endobj")},Rl=function(v){ot[v.fontName]=ot[v.fontName]||{},ot[v.fontName][v.fontStyle]=v.id},_a=function(v,O,J,ie,fe){var Ie={id:"F"+(Object.keys(yt).length+1).toString(10),postScriptName:v,fontName:O,fontStyle:J,encoding:ie,isStandardFont:fe||!1,metadata:{}};return ht.publish("addFont",{font:Ie,instance:this}),yt[Ie.id]=Ie,Rl(Ie),Ie.id},Dr=p.__private__.pdfEscape=p.pdfEscape=function(v,O){return function(J,ie){var fe,Ie,De,nt,dt,St,Ct,Kt,un;if(De=(ie=ie||{}).sourceEncoding||"Unicode",dt=ie.outputEncoding,(ie.autoencode||dt)&&yt[Ge].metadata&&yt[Ge].metadata[De]&&yt[Ge].metadata[De].encoding&&(nt=yt[Ge].metadata[De].encoding,!dt&&yt[Ge].encoding&&(dt=yt[Ge].encoding),!dt&&nt.codePages&&(dt=nt.codePages[0]),typeof dt=="string"&&(dt=nt[dt]),dt)){for(Ct=!1,St=[],fe=0,Ie=J.length;fe<Ie;fe++)(Kt=dt[J.charCodeAt(fe)])?St.push(String.fromCharCode(Kt)):St.push(J[fe]),St[fe].charCodeAt(0)>>8&&(Ct=!0);J=St.join("")}for(fe=J.length;Ct===void 0&&fe!==0;)J.charCodeAt(fe-1)>>8&&(Ct=!0),fe--;if(!Ct)return J;for(St=ie.noBOM?[]:[254,255],fe=0,Ie=J.length;fe<Ie;fe++){if((un=(Kt=J.charCodeAt(fe))>>8)>>8)throw new Error("Character at position "+fe+" of string '"+J+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");St.push(un),St.push(Kt-(un<<8))}return String.fromCharCode.apply(void 0,St)}(v,O).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Ki=p.__private__.beginPage=function(v){_e[++Be]=[],Ye[Be]={objId:0,contentsObjId:0,userUnit:Number(a),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(v[0]),topRightY:Number(v[1])}},jl(Be),Se(_e[W])},ba=function(v,O){var J,ie,fe;switch(n=O||n,typeof v=="string"&&(J=_(v.toLowerCase()),Array.isArray(J)&&(ie=J[0],fe=J[1])),Array.isArray(v)&&(ie=v[0]*xt,fe=v[1]*xt),isNaN(ie)&&(ie=i[0],fe=i[1]),(ie>14400||fe>14400)&&(Tn.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),ie=Math.min(14400,ie),fe=Math.min(14400,fe)),i=[ie,fe],n.substr(0,1)){case"l":fe>ie&&(i=[fe,ie]);break;case"p":ie>fe&&(i=[fe,ie])}Ki(i),bt(Sa),K(Us),bn!==0&&K(bn+" J"),Vl!==0&&K(Vl+" j"),ht.publish("addPage",{pageNumber:Be})},Ll=function(v){v>0&&v<=Be&&(_e.splice(v,1),Ye.splice(v,1),Be--,W>Be&&(W=Be),this.setPage(W))},jl=function(v){v>0&&v<=Be&&(W=v)},Dl=p.__private__.getNumberOfPages=p.getNumberOfPages=function(){return _e.length-1},Ol=function(v,O,J){var ie,fe=void 0;return J=J||{},v=v!==void 0?v:yt[Ge].fontName,O=O!==void 0?O:yt[Ge].fontStyle,ie=v.toLowerCase(),ot[ie]!==void 0&&ot[ie][O]!==void 0?fe=ot[ie][O]:ot[v]!==void 0&&ot[v][O]!==void 0?fe=ot[v][O]:J.disableWarning===!1&&Tn.warn("Unable to look up font label for font '"+v+"', '"+O+"'. Refer to getFontList() for available fonts."),fe||J.noFallback||(fe=ot.times[O])==null&&(fe=ot.times.normal),fe},Di=p.__private__.putInfo=function(){var v=zt(),O=function(ie){return ie};for(var J in u!==null&&(O=Sn.encryptor(v,0)),K("<<"),K("/Producer ("+Dr(O("jsPDF "+wt.version))+")"),Nt)Nt.hasOwnProperty(J)&&Nt[J]&&K("/"+J.substr(0,1).toUpperCase()+J.substr(1)+" ("+Dr(O(Nt[J]))+")");K("/CreationDate ("+Dr(O(oe))+")"),K(">>"),K("endobj")},ao=p.__private__.putCatalog=function(v){var O=(v=v||{}).rootDictionaryObjId||Lr;switch(zt(),K("<<"),K("/Type /Catalog"),K("/Pages "+O+" 0 R"),Ze||(Ze="fullwidth"),Ze){case"fullwidth":K("/OpenAction [3 0 R /FitH null]");break;case"fullheight":K("/OpenAction [3 0 R /FitV null]");break;case"fullpage":K("/OpenAction [3 0 R /Fit]");break;case"original":K("/OpenAction [3 0 R /XYZ null null 1]");break;default:var J=""+Ze;J.substr(J.length-1)==="%"&&(Ze=parseInt(Ze)/100),typeof Ze=="number"&&K("/OpenAction [3 0 R /XYZ null null "+A(Ze)+"]")}switch(gt||(gt="continuous"),gt){case"continuous":K("/PageLayout /OneColumn");break;case"single":K("/PageLayout /SinglePage");break;case"two":case"twoleft":K("/PageLayout /TwoColumnLeft");break;case"tworight":K("/PageLayout /TwoColumnRight")}Ae&&K("/PageMode /"+Ae),ht.publish("putCatalog"),K(">>"),K("endobj")},Mc=p.__private__.putTrailer=function(){K("trailer"),K("<<"),K("/Size "+(re+1)),K("/Root "+re+" 0 R"),K("/Info "+(re-1)+" 0 R"),u!==null&&K("/Encrypt "+Sn.oid+" 0 R"),K("/ID [ <"+pe+"> <"+pe+"> ]"),K(">>")},zn=p.__private__.putHeader=function(){K("%PDF-"+b),K("%")},Fc=p.__private__.putXRef=function(){var v="0000000000";K("xref"),K("0 "+(re+1)),K("0000000000 65535 f ");for(var O=1;O<=re;O++)typeof q[O]=="function"?K((v+q[O]()).slice(-10)+" 00000 n "):q[O]!==void 0?K((v+q[O]).slice(-10)+" 00000 n "):K("0000000000 00000 n ")},ys=p.__private__.buildDocument=function(){var v;re=0,ue=0,ae=[],q=[],me=[],Lr=en(),Zn=en(),Se(ae),ht.publish("buildDocument"),zn(),jr(),function(){ht.publish("putAdditionalObjects");for(var J=0;J<me.length;J++){var ie=me[J];an(ie.objId,!0),K(ie.content),K("endobj")}ht.publish("postPutAdditionalObjects")}(),v=[],function(){for(var J in yt)yt.hasOwnProperty(J)&&(g===!1||g===!0&&y.hasOwnProperty(J))&&zr(yt[J])}(),function(){var J;for(J in Ke)Ke.hasOwnProperty(J)&&oh(Ke[J])}(),function(){for(var J in Bt)Bt.hasOwnProperty(J)&&xi(Bt[J])}(),function(J){var ie;for(ie in Xe)Xe.hasOwnProperty(ie)&&(Xe[ie]instanceof Xl?gs(Xe[ie]):Xe[ie]instanceof gu&&jo(Xe[ie],J))}(v),ht.publish("putResources"),v.forEach(oo),oo({resourcesOid:Zn,objectOid:Number.MAX_SAFE_INTEGER}),ht.publish("postPutResources"),u!==null&&(Sn.oid=zt(),K("<<"),K("/Filter /Standard"),K("/V "+Sn.v),K("/R "+Sn.r),K("/U <"+Sn.toHexString(Sn.U)+">"),K("/O <"+Sn.toHexString(Sn.O)+">"),K("/P "+Sn.P),K(">>"),K("endobj")),Di(),ao();var O=ue;return Fc(),Mc(),K("startxref"),K(""+O),K("%%EOF"),Se(_e[W]),ae.join(`
`)},Do=p.__private__.getBlob=function(v){return new Blob([it(v)],{type:"application/pdf"})},Ml=p.output=p.__private__.output=(Nn=function(v,O){switch(typeof(O=O||{})=="string"?O={filename:O}:O.filename=O.filename||"generated.pdf",v){case void 0:return ys();case"save":p.save(O.filename);break;case"arraybuffer":return it(ys());case"blob":return Do(ys());case"bloburi":case"bloburl":if(It.URL!==void 0&&typeof It.URL.createObjectURL=="function")return It.URL&&It.URL.createObjectURL(Do(ys()))||void 0;Tn.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var J="",ie=ys();try{J=Fb(ie)}catch{J=Fb(unescape(encodeURIComponent(ie)))}return"data:application/pdf;filename="+O.filename+";base64,"+J;case"pdfobjectnewwindow":if(Object.prototype.toString.call(It)==="[object Window]"){var fe="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Ie=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';O.pdfObjectUrl&&(fe=O.pdfObjectUrl,Ie="");var De='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+fe+'"'+Ie+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(O)+");<\/script></body></html>",nt=It.open();return nt!==null&&nt.document.write(De),nt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(It)==="[object Window]"){var dt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(O.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+O.filename+'" width="500px" height="400px" /></body></html>',St=It.open();if(St!==null){St.document.write(dt);var Ct=this;St.document.documentElement.querySelector("#pdfViewer").onload=function(){St.document.title=O.filename,St.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Ct.output("bloburl"))}}return St}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(It)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Kt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",O)+'"></iframe></body></html>',un=It.open();if(un!==null&&(un.document.write(Kt),un.document.title=O.filename),un||typeof safari>"u")return un;break;case"datauri":case"dataurl":return It.document.location.href=this.output("datauristring",O);default:return null}},Nn.foo=function(){try{return Nn.apply(this,arguments)}catch(J){var v=J.stack||"";~v.indexOf(" at ")&&(v=v.split(" at ")[1]);var O="Error in function "+v.split(`
`)[0].split("<")[0]+": "+J.message;if(!It.console)throw new Error(O);It.console.error(O,J),It.alert&&alert(O)}},Nn.foo.bar=Nn,Nn.foo),Oi=function(v){return Array.isArray(Jn)===!0&&Jn.indexOf(v)>-1};switch(r){case"pt":xt=1;break;case"mm":xt=72/25.4;break;case"cm":xt=72/2.54;break;case"in":xt=72;break;case"px":xt=Oi("px_scaling")==1?.75:96/72;break;case"pc":case"em":xt=12;break;case"ex":xt=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);xt=r}var Sn=null;de(),ne();var Er=p.__private__.getPageInfo=p.getPageInfo=function(v){if(isNaN(v)||v%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Ye[v].objId,pageNumber:v,pageContext:Ye[v]}},Oo=p.__private__.getPageInfoByObjId=function(v){if(isNaN(v)||v%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var O in Ye)if(Ye[O].objId===v)break;return Er(O)},Na=p.__private__.getCurrentPageInfo=p.getCurrentPageInfo=function(){return{objId:Ye[W].objId,pageNumber:W,pageContext:Ye[W]}};p.addPage=function(){return ba.apply(this,arguments),this},p.setPage=function(){return jl.apply(this,arguments),Se.call(this,_e[W]),this},p.insertPage=function(v){return this.addPage(),this.movePage(W,v),this},p.movePage=function(v,O){var J,ie;if(v>O){J=_e[v],ie=Ye[v];for(var fe=v;fe>O;fe--)_e[fe]=_e[fe-1],Ye[fe]=Ye[fe-1];_e[O]=J,Ye[O]=ie,this.setPage(O)}else if(v<O){J=_e[v],ie=Ye[v];for(var Ie=v;Ie<O;Ie++)_e[Ie]=_e[Ie+1],Ye[Ie]=Ye[Ie+1];_e[O]=J,Ye[O]=ie,this.setPage(O)}return this},p.deletePage=function(){return Ll.apply(this,arguments),this},p.__private__.text=p.text=function(v,O,J,ie,fe){var Ie,De,nt,dt,St,Ct,Kt,un,qn,fn=(ie=ie||{}).scope||this;if(typeof v=="number"&&typeof O=="number"&&(typeof J=="string"||Array.isArray(J))){var er=J;J=O,O=v,v=er}if(arguments[3]instanceof et==0?(nt=arguments[4],dt=arguments[5],yn(Kt=arguments[3])==="object"&&Kt!==null||(typeof nt=="string"&&(dt=nt,nt=null),typeof Kt=="string"&&(dt=Kt,Kt=null),typeof Kt=="number"&&(nt=Kt,Kt=null),ie={flags:Kt,angle:nt,align:dt})):(T("The transform parameter of text() with a Matrix value"),qn=fe),isNaN(O)||isNaN(J)||v==null)throw new Error("Invalid arguments passed to jsPDF.text");if(v.length===0)return fn;var Hn,tr="",Wn=typeof ie.lineHeightFactor=="number"?ie.lineHeightFactor:co,Mi=fn.internal.scaleFactor;function Ss(dn){return dn=dn.split("	").join(Array(ie.TabLen||9).join(" ")),Dr(dn,Kt)}function As(dn){for(var An,cr=dn.concat(),Tr=[],zo=cr.length;zo--;)typeof(An=cr.shift())=="string"?Tr.push(An):Array.isArray(dn)&&(An.length===1||An[1]===void 0&&An[2]===void 0)?Tr.push(An[0]):Tr.push([An[0],An[1],An[2]]);return Tr}function f(dn,An){var cr;if(typeof dn=="string")cr=An(dn)[0];else if(Array.isArray(dn)){for(var Tr,zo,xh=dn.concat(),$c=[],vf=xh.length;vf--;)typeof(Tr=xh.shift())=="string"?$c.push(An(Tr)[0]):Array.isArray(Tr)&&typeof Tr[0]=="string"&&(zo=An(Tr[0],Tr[1],Tr[2]),$c.push([zo[0],zo[1],zo[2]]));cr=$c}return cr}var x=!1,P=!0;if(typeof v=="string")x=!0;else if(Array.isArray(v)){var $=v.concat();De=[];for(var ye,Ne=$.length;Ne--;)(typeof(ye=$.shift())!="string"||Array.isArray(ye)&&typeof ye[0]!="string")&&(P=!1);x=P}if(x===!1)throw new Error('Type of text must be string or Array. "'+v+'" is not recognized.');typeof v=="string"&&(v=v.match(/[\r?\n]/)?v.split(/\r\n|\r|\n/g):[v]);var Ve=Re/fn.internal.scaleFactor,Qt=Ve*(Wn-1);switch(ie.baseline){case"bottom":J-=Qt;break;case"top":J+=Ve-Qt;break;case"hanging":J+=Ve-2*Qt;break;case"middle":J+=Ve/2-Qt}if((Ct=ie.maxWidth||0)>0&&(typeof v=="string"?v=fn.splitTextToSize(v,Ct):Object.prototype.toString.call(v)==="[object Array]"&&(v=v.reduce(function(dn,An){return dn.concat(fn.splitTextToSize(An,Ct))},[]))),Ie={text:v,x:O,y:J,options:ie,mutex:{pdfEscape:Dr,activeFontKey:Ge,fonts:yt,activeFontSize:Re}},ht.publish("preProcessText",Ie),v=Ie.text,nt=(ie=Ie.options).angle,qn instanceof et==0&&nt&&typeof nt=="number"){nt*=Math.PI/180,ie.rotationDirection===0&&(nt=-nt),D===L&&(nt=-nt);var $n=Math.cos(nt),qt=Math.sin(nt);qn=new et($n,qt,-qt,$n,0,0)}else nt&&nt instanceof et&&(qn=nt);D!==L||qn||(qn=Fn),(St=ie.charSpace||xs)!==void 0&&(tr+=S(R(St))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(un=ie.horizontalScale)!==void 0&&(tr+=S(100*un)+` Tz
`),ie.lang;var ln=-1,Cn=ie.renderingMode!==void 0?ie.renderingMode:ie.stroke,Qi=fn.internal.getCurrentPageInfo().pageContext;switch(Cn){case 0:case!1:case"fill":ln=0;break;case 1:case!0:case"stroke":ln=1;break;case 2:case"fillThenStroke":ln=2;break;case 3:case"invisible":ln=3;break;case 4:case"fillAndAddForClipping":ln=4;break;case 5:case"strokeAndAddPathForClipping":ln=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":ln=6;break;case 7:case"addToPathForClipping":ln=7}var ri=Qi.usedRenderingMode!==void 0?Qi.usedRenderingMode:-1;ln!==-1?tr+=ln+` Tr
`:ri!==-1&&(tr+=`0 Tr
`),ln!==-1&&(Qi.usedRenderingMode=ln),dt=ie.align||"left";var Hr,Vs=Re*Wn,fh=fn.internal.pageSize.getWidth(),ph=yt[Ge];St=ie.charSpace||xs,Ct=ie.maxWidth||0,Kt=Object.assign({autoencode:!0,noBOM:!0},ie.flags);var ka=[],ql=function(dn){return fn.getStringUnitWidth(dn,{font:ph,charSpace:St,fontSize:Re,doKerning:!1})*Re/Mi};if(Object.prototype.toString.call(v)==="[object Array]"){var Xi;De=As(v),dt!=="left"&&(Hr=De.map(ql));var Ji,Ca=0;if(dt==="right"){O-=Hr[0],v=[],Ne=De.length;for(var Bo=0;Bo<Ne;Bo++)Bo===0?(Ji=Or(O),Xi=Fs(J)):(Ji=R(Ca-Hr[Bo]),Xi=-Vs),v.push([De[Bo],Ji,Xi]),Ca=Hr[Bo]}else if(dt==="center"){O-=Hr[0]/2,v=[],Ne=De.length;for(var Pa=0;Pa<Ne;Pa++)Pa===0?(Ji=Or(O),Xi=Fs(J)):(Ji=R((Ca-Hr[Pa])/2),Xi=-Vs),v.push([De[Pa],Ji,Xi]),Ca=Hr[Pa]}else if(dt==="left"){v=[],Ne=De.length;for(var mh=0;mh<Ne;mh++)v.push(De[mh])}else if(dt==="justify"&&ph.encoding==="Identity-H"){v=[],Ne=De.length,Ct=Ct!==0?Ct:fh;for(var Wc=0,lr=0;lr<Ne;lr++)if(Xi=lr===0?Fs(J):-Vs,Ji=lr===0?Or(O):Wc,lr<Ne-1){var yf=R((Ct-Hr[lr])/(De[lr].split(" ").length-1)),fo=De[lr].split(" ");v.push([fo[0]+" ",Ji,Xi]),Wc=0;for(var po=1;po<fo.length;po++){var gh=(ql(fo[po-1]+" "+fo[po])-ql(fo[po]))*Mi+yf;po==fo.length-1?v.push([fo[po],gh,0]):v.push([fo[po]+" ",gh,0]),Wc-=gh}}else v.push([De[lr],Ji,Xi]);v.push(["",Wc,0])}else{if(dt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(v=[],Ne=De.length,Ct=Ct!==0?Ct:fh,lr=0;lr<Ne;lr++){Xi=lr===0?Fs(J):-Vs,Ji=lr===0?Or(O):0;var yh=De[lr].split(" ").length-1,vh=yh>0?(Ct-Hr[lr])/yh:0;lr<Ne-1?ka.push(S(R(vh))):ka.push(0),v.push([De[lr],Ji,Xi])}}}(typeof ie.R2L=="boolean"?ie.R2L:st)===!0&&(v=f(v,function(dn,An,cr){return[dn.split("").reverse().join(""),An,cr]})),Ie={text:v,x:O,y:J,options:ie,mutex:{pdfEscape:Dr,activeFontKey:Ge,fonts:yt,activeFontSize:Re}},ht.publish("postProcessText",Ie),v=Ie.text,Hn=Ie.mutex.isHex||!1;var wh=yt[Ge].encoding;wh!=="WinAnsiEncoding"&&wh!=="StandardEncoding"||(v=f(v,function(dn,An,cr){return[Ss(dn),An,cr]})),De=As(v),v=[];for(var Ra,La,ja,Hl=Array.isArray(De[0])?1:0,Da="",Wl=function(dn,An,cr){var Tr="";return cr instanceof et?(cr=typeof ie.angle=="number"?Ft(cr,new et(1,0,0,1,dn,An)):Ft(new et(1,0,0,1,dn,An),cr),D===L&&(cr=Ft(new et(1,0,0,-1,0,0),cr)),Tr=cr.join(" ")+` Tm
`):Tr=S(dn)+" "+S(An)+` Td
`,Tr},Es=0;Es<De.length;Es++){switch(Da="",Hl){case 1:ja=(Hn?"<":"(")+De[Es][0]+(Hn?">":")"),Ra=parseFloat(De[Es][1]),La=parseFloat(De[Es][2]);break;case 0:ja=(Hn?"<":"(")+De[Es]+(Hn?">":")"),Ra=Or(O),La=Fs(J)}ka!==void 0&&ka[Es]!==void 0&&(Da=ka[Es]+` Tw
`),Es===0?v.push(Da+Wl(Ra,La,qn)+ja):Hl===0?v.push(Da+ja):Hl===1&&v.push(Da+Wl(Ra,La,qn)+ja)}v=Hl===0?v.join(` Tj
T* `):v.join(` Tj
`),v+=` Tj
`;var mo=`BT
/`;return mo+=Ge+" "+Re+` Tf
`,mo+=S(Re*Wn)+` TL
`,mo+=Yi+`
`,mo+=tr,mo+=v,K(mo+="ET"),y[Ge]=!0,fn};var Uc=p.__private__.clip=p.clip=function(v){return K(v==="evenodd"?"W*":"W"),this};p.clipEvenOdd=function(){return Uc("evenodd")},p.__private__.discardPath=p.discardPath=function(){return K("n"),this};var Gt=p.__private__.isValidStyle=function(v){var O=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(v)!==-1&&(O=!0),O};p.__private__.setDefaultPathOperation=p.setDefaultPathOperation=function(v){return Gt(v)&&(c=v),this};var Mo=p.__private__.getStyle=p.getStyle=function(v){var O=c;switch(v){case"D":case"S":O="S";break;case"F":O="f";break;case"FD":case"DF":O="B";break;case"f":case"f*":case"B":case"B*":O=v}return O},lo=p.close=function(){return K("h"),this};p.stroke=function(){return K("S"),this},p.fill=function(v){return vs("f",v),this},p.fillEvenOdd=function(v){return vs("f*",v),this},p.fillStroke=function(v){return vs("B",v),this},p.fillStrokeEvenOdd=function(v){return vs("B*",v),this};var vs=function(v,O){yn(O)==="object"?ah(O,v):K(v)},Fo=function(v){v===null||D===L&&v===void 0||(v=Mo(v),K(v))};function Vc(v,O,J,ie,fe){var Ie=new gu(O||this.boundingBox,J||this.xStep,ie||this.yStep,this.gState,fe||this.matrix);Ie.stream=this.stream;var De=v+"$$"+this.cloneIndex+++"$$";return _n(De,Ie),Ie}var ah=function(v,O){var J=At[v.key],ie=Xe[J];if(ie instanceof Xl)K("q"),K(lh(O)),ie.gState&&p.setGState(ie.gState),K(v.matrix.toString()+" cm"),K("/"+J+" sh"),K("Q");else if(ie instanceof gu){var fe=new et(1,0,0,-1,0,Ns());v.matrix&&(fe=fe.multiply(v.matrix||Fn),J=Vc.call(ie,v.key,v.boundingBox,v.xStep,v.yStep,fe).id),K("q"),K("/Pattern cs"),K("/"+J+" scn"),ie.gState&&p.setGState(ie.gState),K(O),K("Q")}},lh=function(v){switch(v){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},Fl=p.moveTo=function(v,O){return K(S(R(v))+" "+S(G(O))+" m"),this},Bc=p.lineTo=function(v,O){return K(S(R(v))+" "+S(G(O))+" l"),this},qr=p.curveTo=function(v,O,J,ie,fe,Ie){return K([S(R(v)),S(G(O)),S(R(J)),S(G(ie)),S(R(fe)),S(G(Ie)),"c"].join(" ")),this};p.__private__.line=p.line=function(v,O,J,ie,fe){if(isNaN(v)||isNaN(O)||isNaN(J)||isNaN(ie)||!Gt(fe))throw new Error("Invalid arguments passed to jsPDF.line");return D===k?this.lines([[J-v,ie-O]],v,O,[1,1],fe||"S"):this.lines([[J-v,ie-O]],v,O,[1,1]).stroke()},p.__private__.lines=p.lines=function(v,O,J,ie,fe,Ie){var De,nt,dt,St,Ct,Kt,un,qn,fn,er,Hn,tr;if(typeof v=="number"&&(tr=J,J=O,O=v,v=tr),ie=ie||[1,1],Ie=Ie||!1,isNaN(O)||isNaN(J)||!Array.isArray(v)||!Array.isArray(ie)||!Gt(fe)||typeof Ie!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Fl(O,J),De=ie[0],nt=ie[1],St=v.length,er=O,Hn=J,dt=0;dt<St;dt++)(Ct=v[dt]).length===2?(er=Ct[0]*De+er,Hn=Ct[1]*nt+Hn,Bc(er,Hn)):(Kt=Ct[0]*De+er,un=Ct[1]*nt+Hn,qn=Ct[2]*De+er,fn=Ct[3]*nt+Hn,er=Ct[4]*De+er,Hn=Ct[5]*nt+Hn,qr(Kt,un,qn,fn,er,Hn));return Ie&&lo(),Fo(fe),this},p.path=function(v){for(var O=0;O<v.length;O++){var J=v[O],ie=J.c;switch(J.op){case"m":Fl(ie[0],ie[1]);break;case"l":Bc(ie[0],ie[1]);break;case"c":qr.apply(this,ie);break;case"h":lo()}}return this},p.__private__.rect=p.rect=function(v,O,J,ie,fe){if(isNaN(v)||isNaN(O)||isNaN(J)||isNaN(ie)||!Gt(fe))throw new Error("Invalid arguments passed to jsPDF.rect");return D===k&&(ie=-ie),K([S(R(v)),S(G(O)),S(R(J)),S(R(ie)),"re"].join(" ")),Fo(fe),this},p.__private__.triangle=p.triangle=function(v,O,J,ie,fe,Ie,De){if(isNaN(v)||isNaN(O)||isNaN(J)||isNaN(ie)||isNaN(fe)||isNaN(Ie)||!Gt(De))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[J-v,ie-O],[fe-J,Ie-ie],[v-fe,O-Ie]],v,O,[1,1],De,!0),this},p.__private__.roundedRect=p.roundedRect=function(v,O,J,ie,fe,Ie,De){if(isNaN(v)||isNaN(O)||isNaN(J)||isNaN(ie)||isNaN(fe)||isNaN(Ie)||!Gt(De))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var nt=4/3*(Math.SQRT2-1);return fe=Math.min(fe,.5*J),Ie=Math.min(Ie,.5*ie),this.lines([[J-2*fe,0],[fe*nt,0,fe,Ie-Ie*nt,fe,Ie],[0,ie-2*Ie],[0,Ie*nt,-fe*nt,Ie,-fe,Ie],[2*fe-J,0],[-fe*nt,0,-fe,-Ie*nt,-fe,-Ie],[0,2*Ie-ie],[0,-Ie*nt,fe*nt,-Ie,fe,-Ie]],v+fe,O,[1,1],De,!0),this},p.__private__.ellipse=p.ellipse=function(v,O,J,ie,fe){if(isNaN(v)||isNaN(O)||isNaN(J)||isNaN(ie)||!Gt(fe))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Ie=4/3*(Math.SQRT2-1)*J,De=4/3*(Math.SQRT2-1)*ie;return Fl(v+J,O),qr(v+J,O-De,v+Ie,O-ie,v,O-ie),qr(v-Ie,O-ie,v-J,O-De,v-J,O),qr(v-J,O+De,v-Ie,O+ie,v,O+ie),qr(v+Ie,O+ie,v+J,O+De,v+J,O),Fo(fe),this},p.__private__.circle=p.circle=function(v,O,J,ie){if(isNaN(v)||isNaN(O)||isNaN(J)||!Gt(ie))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(v,O,J,J,ie)},p.setFont=function(v,O,J){return J&&(O=j(O,J)),Ge=Ol(v,O,{disableWarning:!1}),this};var ws=p.__private__.getFont=p.getFont=function(){return yt[Ol.apply(p,arguments)]};p.__private__.getFontList=p.getFontList=function(){var v,O,J={};for(v in ot)if(ot.hasOwnProperty(v))for(O in J[v]=[],ot[v])ot[v].hasOwnProperty(O)&&J[v].push(O);return J},p.addFont=function(v,O,J,ie,fe){var Ie=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Ie.indexOf(arguments[3])!==-1?fe=arguments[3]:arguments[3]&&Ie.indexOf(arguments[3])==-1&&(J=j(J,ie)),_a.call(this,v,O,J,fe=fe||"Identity-H")};var co,Sa=t.lineWidth||.200025,zc=p.__private__.getLineWidth=p.getLineWidth=function(){return Sa},bt=p.__private__.setLineWidth=p.setLineWidth=function(v){return Sa=v,K(S(R(v))+" w"),this};p.__private__.setLineDash=wt.API.setLineDash=wt.API.setLineDashPattern=function(v,O){if(v=v||[],O=O||0,isNaN(O)||!Array.isArray(v))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return v=v.map(function(J){return S(R(J))}).join(" "),O=S(R(O)),K("["+v+"] "+O+" d"),this};var ch=p.__private__.getLineHeight=p.getLineHeight=function(){return Re*co};p.__private__.getLineHeight=p.getLineHeight=function(){return Re*co};var uh=p.__private__.setLineHeightFactor=p.setLineHeightFactor=function(v){return typeof(v=v||1.15)=="number"&&(co=v),this},hh=p.__private__.getLineHeightFactor=p.getLineHeightFactor=function(){return co};uh(t.lineHeight);var Or=p.__private__.getHorizontalCoordinate=function(v){return R(v)},Fs=p.__private__.getVerticalCoordinate=function(v){return D===L?v:Ye[W].mediaBox.topRightY-Ye[W].mediaBox.bottomLeftY-R(v)},dh=p.__private__.getHorizontalCoordinateString=p.getHorizontalCoordinateString=function(v){return S(Or(v))},Aa=p.__private__.getVerticalCoordinateString=p.getVerticalCoordinateString=function(v){return S(Fs(v))},Us=t.strokeColor||"0 G";p.__private__.getStrokeColor=p.getDrawColor=function(){return ni(Us)},p.__private__.setStrokeColor=p.setDrawColor=function(v,O,J,ie){return Us=Nr({ch1:v,ch2:O,ch3:J,ch4:ie,pdfColorType:"draw",precision:2}),K(Us),this};var Ea=t.fillColor||"0 g";p.__private__.getFillColor=p.getFillColor=function(){return ni(Ea)},p.__private__.setFillColor=p.setFillColor=function(v,O,J,ie){return Ea=Nr({ch1:v,ch2:O,ch3:J,ch4:ie,pdfColorType:"fill",precision:2}),K(Ea),this};var Yi=t.textColor||"0 g",Uo=p.__private__.getTextColor=p.getTextColor=function(){return ni(Yi)};p.__private__.setTextColor=p.setTextColor=function(v,O,J,ie){return Yi=Nr({ch1:v,ch2:O,ch3:J,ch4:ie,pdfColorType:"text",precision:3}),this};var xs=t.charSpace,Ul=p.__private__.getCharSpace=p.getCharSpace=function(){return parseFloat(xs||0)};p.__private__.setCharSpace=p.setCharSpace=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return xs=v,this};var bn=0;p.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},p.__private__.setLineCap=p.setLineCap=function(v){var O=p.CapJoinStyles[v];if(O===void 0)throw new Error("Line cap style of '"+v+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return bn=O,K(O+" J"),this};var Vl=0;p.__private__.setLineJoin=p.setLineJoin=function(v){var O=p.CapJoinStyles[v];if(O===void 0)throw new Error("Line join style of '"+v+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Vl=O,K(O+" j"),this},p.__private__.setLineMiterLimit=p.__private__.setMiterLimit=p.setLineMiterLimit=p.setMiterLimit=function(v){if(v=v||0,isNaN(v))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return K(S(R(v))+" M"),this},p.GState=Lm,p.setGState=function(v){(v=typeof v=="string"?Ke[ut[v]]:qc(null,v)).equals(Tt)||(K("/"+v.id+" gs"),Tt=v)};var qc=function(v,O){if(!v||!ut[v]){var J=!1;for(var ie in Ke)if(Ke.hasOwnProperty(ie)&&Ke[ie].equals(O)){J=!0;break}if(J)O=Ke[ie];else{var fe="GS"+(Object.keys(Ke).length+1).toString(10);Ke[fe]=O,O.id=fe}return v&&(ut[v]=O.id),ht.publish("addGState",O),O}};p.addGState=function(v,O){return qc(v,O),this},p.saveGraphicsState=function(){return K("q"),$t.push({key:Ge,size:Re,color:Yi}),this},p.restoreGraphicsState=function(){K("Q");var v=$t.pop();return Ge=v.key,Re=v.size,Yi=v.color,Tt=null,this},p.setCurrentTransformationMatrix=function(v){return K(v.toString()+" cm"),this},p.comment=function(v){return K("#"+v),this};var _s=function(v,O){var J=v||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return J},set:function(Ie){isNaN(Ie)||(J=parseFloat(Ie))}});var ie=O||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return ie},set:function(Ie){isNaN(Ie)||(ie=parseFloat(Ie))}});var fe="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return fe},set:function(Ie){fe=Ie.toString()}}),this},Ta=function(v,O,J,ie){_s.call(this,v,O),this.type="rect";var fe=J||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return fe},set:function(De){isNaN(De)||(fe=parseFloat(De))}});var Ie=ie||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Ie},set:function(De){isNaN(De)||(Ie=parseFloat(De))}}),this},Vo=function(){this.page=Be,this.currentPage=W,this.pages=_e.slice(0),this.pagesContext=Ye.slice(0),this.x=tt,this.y=Dt,this.matrix=Qe,this.width=_i(W),this.height=Hc(W),this.outputDestination=Te,this.id="",this.objectNumber=-1};Vo.prototype.restore=function(){Be=this.page,W=this.currentPage,Ye=this.pagesContext,_e=this.pages,tt=this.x,Dt=this.y,Qe=this.matrix,Bl(W,this.width),bi(W,this.height),Te=this.outputDestination};var uo=function(v,O,J,ie,fe){Ht.push(new Vo),Be=W=0,_e=[],tt=v,Dt=O,Qe=fe,Ki([J,ie])};for(var ho in p.beginFormObject=function(v,O,J,ie,fe){return uo(v,O,J,ie,fe),this},p.endFormObject=function(v){return function(O){if(on[O])Ht.pop().restore();else{var J=new Vo,ie="Xo"+(Object.keys(Bt).length+1).toString(10);J.id=ie,on[O]=ie,Bt[ie]=J,ht.publish("addFormObject",J),Ht.pop().restore()}}(v),this},p.doFormObject=function(v,O){var J=Bt[on[v]];return K("q"),K(O.toString()+" cm"),K("/"+J.id+" Do"),K("Q"),this},p.getFormObject=function(v){var O=Bt[on[v]];return{x:O.x,y:O.y,width:O.width,height:O.height,matrix:O.matrix}},p.save=function(v,O){return v=v||"generated.pdf",(O=O||{}).returnPromise=O.returnPromise||!1,O.returnPromise===!1?(Ql(Do(ys()),v),typeof Ql.unload=="function"&&It.setTimeout&&setTimeout(Ql.unload,911),this):new Promise(function(J,ie){try{var fe=Ql(Do(ys()),v);typeof Ql.unload=="function"&&It.setTimeout&&setTimeout(Ql.unload,911),J(fe)}catch(Ie){ie(Ie.message)}})},wt.API)wt.API.hasOwnProperty(ho)&&(ho==="events"&&wt.API.events.length?function(v,O){var J,ie,fe;for(fe=O.length-1;fe!==-1;fe--)J=O[fe][0],ie=O[fe][1],v.subscribe.apply(v,[J].concat(typeof ie=="function"?[ie]:ie))}(ht,wt.API.events):p[ho]=wt.API[ho]);function _i(v){return Ye[v].mediaBox.topRightX-Ye[v].mediaBox.bottomLeftX}function Bl(v,O){Ye[v].mediaBox.topRightX=O+Ye[v].mediaBox.bottomLeftX}function Hc(v){return Ye[v].mediaBox.topRightY-Ye[v].mediaBox.bottomLeftY}function bi(v,O){Ye[v].mediaBox.topRightY=O+Ye[v].mediaBox.bottomLeftY}var bs=p.getPageWidth=function(v){return _i(v=v||W)/xt},Ia=p.setPageWidth=function(v,O){Bl(v,O*xt)},Ns=p.getPageHeight=function(v){return Hc(v=v||W)/xt},zl=p.setPageHeight=function(v,O){bi(v,O*xt)};return p.internal={pdfEscape:Dr,getStyle:Mo,getFont:ws,getFontSize:$e,getCharSpace:Ul,getTextColor:Uo,getLineHeight:ch,getLineHeightFactor:hh,getLineWidth:zc,write:Ce,getHorizontalCoordinate:Or,getVerticalCoordinate:Fs,getCoordinateString:dh,getVerticalCoordinateString:Aa,collections:{},newObject:zt,newAdditionalObject:Br,newObjectDeferred:en,newObjectDeferredBegin:an,getFilters:Sr,putStream:hn,events:ht,scaleFactor:xt,pageSize:{getWidth:function(){return bs(W)},setWidth:function(v){Ia(W,v)},getHeight:function(){return Ns(W)},setHeight:function(v){zl(W,v)}},encryptionOptions:u,encryption:Sn,getEncryptor:function(v){return u!==null?Sn.encryptor(v,0):function(O){return O}},output:Ml,getNumberOfPages:Dl,get pages(){return _e},out:K,f2:A,f3:I,getPageInfo:Er,getPageInfoByObjId:Oo,getCurrentPageInfo:Na,getPDFVersion:N,Point:_s,Rectangle:Ta,Matrix:et,hasHotfix:Oi},Object.defineProperty(p.internal.pageSize,"width",{get:function(){return bs(W)},set:function(v){Ia(W,v)},enumerable:!0,configurable:!0}),Object.defineProperty(p.internal.pageSize,"height",{get:function(){return Ns(W)},set:function(v){zl(W,v)},enumerable:!0,configurable:!0}),(function(v){for(var O=0,J=He.length;O<J;O++){var ie=_a.call(this,v[O][0],v[O][1],v[O][2],He[O][3],!0);g===!1&&(y[ie]=!0);var fe=v[O][0].split("-");Rl({id:ie,fontName:fe[0],fontStyle:fe[1]||""})}ht.publish("addFonts",{fonts:yt,dictionary:ot})}).call(p,He),Ge="F1",ba(i,n),ht.publish("initialized"),p}tu.prototype.lsbFirstWord=function(t){return String.fromCharCode(255&t,t>>8&255,t>>16&255,t>>24&255)},tu.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},tu.prototype.hexToBytes=function(t){for(var e=[],n=0;n<t.length;n+=2)e.push(String.fromCharCode(parseInt(t.substr(n,2),16)));return e.join("")},tu.prototype.processOwnerPassword=function(t,e){return $2(W2(e).substr(0,5),t)},tu.prototype.encryptor=function(t,e){var n=W2(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(r){return $2(n,r)}},Lm.prototype.equals=function(t){var e,n="id,objectNumber,equals";if(!t||yn(t)!==yn(this))return!1;var r=0;for(e in this)if(!(n.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;r++}for(e in t)t.hasOwnProperty(e)&&n.indexOf(e)<0&&r--;return r===0},wt.API={events:[]},wt.version="3.0.4";var ir=wt.API,h5=1,Oc=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Qc=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Rt=function(t){return t.toFixed(2)},Wa=function(t){return t.toFixed(5)};ir.__acroform__={};var Gi=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},zb=function(t){return t*h5},vo=function(t){var e=new LE,n=ct.internal.getHeight(t)||0,r=ct.internal.getWidth(t)||0;return e.BBox=[0,0,Number(Rt(r)),Number(Rt(n))],e},QV=ir.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|1<<e},XV=ir.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&~(1<<e)},JV=ir.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return t&1<<e?1:0},mr=ir.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return JV(t,e-1)},gr=ir.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return QV(t,e-1)},yr=ir.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return XV(t,e-1)},ZV=ir.__acroform__.calculateCoordinates=function(t,e){var n=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,i=t[0],s=t[1],o=t[2],a=t[3],l={};return l.lowerLeft_X=n(i)||0,l.lowerLeft_Y=r(s+a)||0,l.upperRight_X=n(i+o)||0,l.upperRight_Y=r(s)||0,[Number(Rt(l.lowerLeft_X)),Number(Rt(l.lowerLeft_Y)),Number(Rt(l.upperRight_X)),Number(Rt(l.upperRight_Y))]},eB=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],n=t._V||t.DV,r=G2(t,n),i=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+i+" "+Rt(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var s=vo(t);return s.scope=t.scope,s.stream=e.join(`
`),s}},G2=function(t,e){var n=t.fontSize===0?t.maxFontSize:t.fontSize,r={text:"",fontSize:""},i=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");i=t.multiline?i.map(function(A){return A.split(`
`)}):i.map(function(A){return[A]});var s=n,o=ct.internal.getHeight(t)||0;o=o<0?-o:o;var a=ct.internal.getWidth(t)||0;a=a<0?-a:a;var l=function(A,I,R){if(A+1<i.length){var G=I+" "+i[A+1][0];return hp(G,t,R).width<=a-4}return!1};s++;e:for(;s>0;){e="",s--;var c,u,g=hp("3",t,s).height,y=t.multiline?o-s:(o-g)/2,p=y+=2,b=0,N=0,C=0;if(s<=0){e=`(...) Tj
`,e+="% Width of Text: "+hp(e,t,s=12).width+", FieldWidth:"+a+`
`;break}for(var _="",k=0,L=0;L<i.length;L++)if(i.hasOwnProperty(L)){var D=!1;if(i[L].length!==1&&C!==i[L].length-1){if((g+2)*(k+2)+2>o)continue e;_+=i[L][C],D=!0,N=L,L--}else{_=(_+=i[L][C]+" ").substr(_.length-1)==" "?_.substr(0,_.length-1):_;var z=parseInt(L),X=l(z,_,s),j=L>=i.length-1;if(X&&!j){_+=" ",C=0;continue}if(X||j){if(j)N=z;else if(t.multiline&&(g+2)*(k+2)+2>o)continue e}else{if(!t.multiline||(g+2)*(k+2)+2>o)continue e;N=z}}for(var S="",T=b;T<=N;T++){var M=i[T];if(t.multiline){if(T===N){S+=M[C]+" ",C=(C+1)%M.length;continue}if(T===b){S+=M[M.length-1]+" ";continue}}S+=M[0]+" "}switch(S=S.substr(S.length-1)==" "?S.substr(0,S.length-1):S,u=hp(S,t,s).width,t.textAlign){case"right":c=a-u-2;break;case"center":c=(a-u)/2;break;default:c=2}e+=Rt(c)+" "+Rt(p)+` Td
`,e+="("+Oc(S)+`) Tj
`,e+=-Rt(c)+` 0 Td
`,p=-(s+2),u=0,b=D?N:N+1,k++,_=""}break}return r.text=e,r.fontSize=s,r},hp=function(t,e,n){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),i=e.scope.getStringUnitWidth(t,{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:i}},tB={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},nB=function(t,e){var n={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(r){return r.type===n.type&&r.object===n.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(n)},rB=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(io.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(tB)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");h5=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new jE,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(n){n.internal.events.unsubscribe(n.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete n.internal.acroformPlugin.acroFormDictionaryRoot._eventID,n.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(n){n.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=n.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in r)if(r.hasOwnProperty(i)){var s=r[i];s.objId=void 0,s.hasAnnotation&&nB(s,n)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(n){if(n.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");n.internal.write("/AcroForm "+n.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(n){(function(r,i){var s=!r;for(var o in r||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(o)){var a=r[o],l=[],c=a.Rect;if(a.Rect&&(a.Rect=ZV(a.Rect,i)),i.internal.newObjectDeferredBegin(a.objId,!0),a.DA=ct.createDefaultAppearanceStream(a),yn(a)==="object"&&typeof a.getKeyValueListForStream=="function"&&(l=a.getKeyValueListForStream()),a.Rect=c,a.hasAppearanceStream&&!a.appearanceStreamContent){var u=eB(a);l.push({key:"AP",value:"<</N "+u+">>"}),i.internal.acroformPlugin.xForms.push(u)}if(a.appearanceStreamContent){var g="";for(var y in a.appearanceStreamContent)if(a.appearanceStreamContent.hasOwnProperty(y)){var p=a.appearanceStreamContent[y];if(g+="/"+y+" ",g+="<<",Object.keys(p).length>=1||Array.isArray(p)){for(var o in p)if(p.hasOwnProperty(o)){var b=p[o];typeof b=="function"&&(b=b.call(i,a)),g+="/"+o+" "+b+" ",i.internal.acroformPlugin.xForms.indexOf(b)>=0||i.internal.acroformPlugin.xForms.push(b)}}else typeof(b=p)=="function"&&(b=b.call(i,a)),g+="/"+o+" "+b,i.internal.acroformPlugin.xForms.indexOf(b)>=0||i.internal.acroformPlugin.xForms.push(b);g+=">>"}l.push({key:"AP",value:`<<
`+g+">>"})}i.internal.putStream({additionalKeyValues:l,objectId:a.objId}),i.internal.out("endobj")}s&&function(N,C){for(var _ in N)if(N.hasOwnProperty(_)){var k=_,L=N[_];C.internal.newObjectDeferredBegin(L.objId,!0),yn(L)==="object"&&typeof L.putStream=="function"&&L.putStream(),delete N[k]}}(i.internal.acroformPlugin.xForms,i)})(n,t)}),t.internal.acroformPlugin.isInitialized=!0}},RE=ir.__acroform__.arrayToPdfArray=function(t,e,n){var r=function(o){return o};if(Array.isArray(t)){for(var i="[",s=0;s<t.length;s++)switch(s!==0&&(i+=" "),yn(t[s])){case"boolean":case"number":case"object":i+=t[s].toString();break;case"string":t[s].substr(0,1)!=="/"?(e!==void 0&&n&&(r=n.internal.getEncryptor(e)),i+="("+Oc(r(t[s].toString()))+")"):i+=t[s].toString()}return i+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},r1=function(t,e,n){var r=function(i){return i};return e!==void 0&&n&&(r=n.internal.getEncryptor(e)),(t=t||"").toString(),"("+Oc(r(t))+")"},So=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};So.prototype.toString=function(){return this.objId+" 0 R"},So.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},So.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var n in e)if(Object.getOwnPropertyDescriptor(this,e[n]).configurable===!1){var r=e[n],i=this[r];i&&(Array.isArray(i)?t.push({key:r,value:RE(i,this.objId,this.scope)}):i instanceof So?(i.scope=this.scope,t.push({key:r,value:i.objId+" 0 R"})):typeof i!="function"&&t.push({key:r,value:i}))}return t};var LE=function(){So.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(n){t=n.trim()},get:function(){return t||null}})};Gi(LE,So);var jE=function(){So.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var n=function(r){return r};return this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),"("+Oc(n(t))+")"}},set:function(n){t=n}})};Gi(jE,So);var io=function t(){So.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(_){if(isNaN(_))throw new Error('Invalid value "'+_+'" for attribute F supplied.');e=_}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!mr(e,3)},set:function(_){_?this.F=gr(e,3):this.F=yr(e,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(_){if(isNaN(_))throw new Error('Invalid value "'+_+'" for attribute Ff supplied.');n=_}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(_){r=_!==void 0?_:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(_){r[0]=_}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(_){r[1]=_}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(_){r[2]=_}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(_){r[3]=_}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(_){switch(_){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=_;break;default:throw new Error('Invalid value "'+_+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof jm)return;s="FieldObject"+t.FieldNum++}var _=function(k){return k};return this.scope&&(_=this.scope.internal.getEncryptor(this.objId)),"("+Oc(_(s))+")"},set:function(_){s=_.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(_){s=_}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(_){o=_}});var a="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return a},set:function(_){a=_}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(_){l=_}});var c=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return c===void 0?50/h5:c},set:function(_){c=_}});var u="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return u},set:function(_){u=_}});var g="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!g||this instanceof jm||this instanceof ac))return r1(g,this.objId,this.scope)},set:function(_){_=_.toString(),g=_}});var y=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(y)return this instanceof Ur==0?r1(y,this.objId,this.scope):y},set:function(_){_=_.toString(),y=this instanceof Ur==0?_.substr(0,1)==="("?Qc(_.substr(1,_.length-2)):Qc(_):_}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Ur==1?Qc(y.substr(1,y.length-1)):y},set:function(_){_=_.toString(),y=this instanceof Ur==1?"/"+_:_}});var p=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(p)return p},set:function(_){this.V=_}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(p)return this instanceof Ur==0?r1(p,this.objId,this.scope):p},set:function(_){_=_.toString(),p=this instanceof Ur==0?_.substr(0,1)==="("?Qc(_.substr(1,_.length-2)):Qc(_):_}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Ur==1?Qc(p.substr(1,p.length-1)):p},set:function(_){_=_.toString(),p=this instanceof Ur==1?"/"+_:_}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var b,N=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return N},set:function(_){_=!!_,N=_}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(b)return b},set:function(_){b=_}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!mr(this.Ff,1)},set:function(_){_?this.Ff=gr(this.Ff,1):this.Ff=yr(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!mr(this.Ff,2)},set:function(_){_?this.Ff=gr(this.Ff,2):this.Ff=yr(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!mr(this.Ff,3)},set:function(_){_?this.Ff=gr(this.Ff,3):this.Ff=yr(this.Ff,3)}});var C=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(C!==null)return C},set:function(_){if([0,1,2].indexOf(_)===-1)throw new Error('Invalid value "'+_+'" for attribute Q supplied.');C=_}}),Object.defineProperty(this,"textAlign",{get:function(){var _;switch(C){case 0:default:_="left";break;case 1:_="center";break;case 2:_="right"}return _},configurable:!0,enumerable:!0,set:function(_){switch(_){case"right":case 2:C=2;break;case"center":case 1:C=1;break;default:C=0}}})};Gi(io,So);var Tu=function(){io.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(n){t=n}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return RE(e,this.objId,this.scope)},set:function(n){var r,i;i=[],typeof(r=n)=="string"&&(i=function(s,o,a){a||(a=1);for(var l,c=[];l=o.exec(s);)c.push(l[a]);return c}(r,/\((.*?)\)/g)),e=i}}),this.getOptions=function(){return e},this.setOptions=function(n){e=n,this.sort&&e.sort()},this.addOption=function(n){n=(n=n||"").toString(),e.push(n),this.sort&&e.sort()},this.removeOption=function(n,r){for(r=r||!1,n=(n=n||"").toString();e.indexOf(n)!==-1&&(e.splice(e.indexOf(n),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!mr(this.Ff,18)},set:function(n){n?this.Ff=gr(this.Ff,18):this.Ff=yr(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!mr(this.Ff,19)},set:function(n){this.combo===!0&&(n?this.Ff=gr(this.Ff,19):this.Ff=yr(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!mr(this.Ff,20)},set:function(n){n?(this.Ff=gr(this.Ff,20),e.sort()):this.Ff=yr(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!mr(this.Ff,22)},set:function(n){n?this.Ff=gr(this.Ff,22):this.Ff=yr(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!mr(this.Ff,23)},set:function(n){n?this.Ff=gr(this.Ff,23):this.Ff=yr(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!mr(this.Ff,27)},set:function(n){n?this.Ff=gr(this.Ff,27):this.Ff=yr(this.Ff,27)}}),this.hasAppearanceStream=!1};Gi(Tu,io);var Iu=function(){Tu.call(this),this.fontName="helvetica",this.combo=!1};Gi(Iu,Tu);var ku=function(){Iu.call(this),this.combo=!0};Gi(ku,Iu);var Mp=function(){ku.call(this),this.edit=!0};Gi(Mp,ku);var Ur=function(){io.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!mr(this.Ff,15)},set:function(n){n?this.Ff=gr(this.Ff,15):this.Ff=yr(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!mr(this.Ff,16)},set:function(n){n?this.Ff=gr(this.Ff,16):this.Ff=yr(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!mr(this.Ff,17)},set:function(n){n?this.Ff=gr(this.Ff,17):this.Ff=yr(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!mr(this.Ff,26)},set:function(n){n?this.Ff=gr(this.Ff,26):this.Ff=yr(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(s){return s};if(this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var r,i=[];for(r in i.push("<<"),e)i.push("/"+r+" ("+Oc(n(e[r]))+")");return i.push(">>"),i.join(`
`)}},set:function(n){yn(n)==="object"&&(e=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(n){typeof n=="string"&&(e.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(n){t="/"+n}})};Gi(Ur,io);var Fp=function(){Ur.call(this),this.pushButton=!0};Gi(Fp,Ur);var Cu=function(){Ur.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};Gi(Cu,Ur);var jm=function(){var t,e;io.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(i){e=i}});var n,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(a){return a};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var s,o=[];for(s in o.push("<<"),r)o.push("/"+s+" ("+Oc(i(r[s]))+")");return o.push(">>"),o.join(`
`)},set:function(i){yn(i)==="object"&&(r=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(i){typeof i=="string"&&(r.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(i){n=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(i){n="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=ct.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Gi(jm,io),Cu.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var n=this.Kids[e];n.appearanceStreamContent=t.createAppearanceStream(n.optionName),n.caption=t.getCA()}},Cu.prototype.createOption=function(t){var e=new jm;return e.Parent=this,e.optionName=t,this.Kids.push(e),iB.call(this.scope,e),e};var Up=function(){Ur.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=ct.CheckBox.createAppearanceStream()};Gi(Up,Ur);var ac=function(){io.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!mr(this.Ff,13)},set:function(e){e?this.Ff=gr(this.Ff,13):this.Ff=yr(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!mr(this.Ff,21)},set:function(e){e?this.Ff=gr(this.Ff,21):this.Ff=yr(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!mr(this.Ff,23)},set:function(e){e?this.Ff=gr(this.Ff,23):this.Ff=yr(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!mr(this.Ff,24)},set:function(e){e?this.Ff=gr(this.Ff,24):this.Ff=yr(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!mr(this.Ff,25)},set:function(e){e?this.Ff=gr(this.Ff,25):this.Ff=yr(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!mr(this.Ff,26)},set:function(e){e?this.Ff=gr(this.Ff,26):this.Ff=yr(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Gi(ac,io);var Vp=function(){ac.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!mr(this.Ff,14)},set:function(t){t?this.Ff=gr(this.Ff,14):this.Ff=yr(this.Ff,14)}}),this.password=!0};Gi(Vp,ac);var ct={CheckBox:{createAppearanceStream:function(){return{N:{On:ct.CheckBox.YesNormal},D:{On:ct.CheckBox.YesPushDown,Off:ct.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=vo(t);e.scope=t.scope;var n=[],r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,i=t.scope.__private__.encodeColorString(t.color),s=G2(t,t.caption);return n.push("0.749023 g"),n.push("0 0 "+Rt(ct.internal.getWidth(t))+" "+Rt(ct.internal.getHeight(t))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+r+" "+Rt(s.fontSize)+" Tf "+i),n.push("BT"),n.push(s.text),n.push("ET"),n.push("Q"),n.push("EMC"),e.stream=n.join(`
`),e},YesNormal:function(t){var e=vo(t);e.scope=t.scope;var n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color),i=[],s=ct.internal.getHeight(t),o=ct.internal.getWidth(t),a=G2(t,t.caption);return i.push("1 g"),i.push("0 0 "+Rt(o)+" "+Rt(s)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+Rt(o-1)+" "+Rt(s-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+n+" "+Rt(a.fontSize)+" Tf "+r),i.push(a.text),i.push("ET"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(t){var e=vo(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Rt(ct.internal.getWidth(t))+" "+Rt(ct.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:ct.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=ct.RadioButton.Circle.YesNormal,e.D[t]=ct.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=vo(t);e.scope=t.scope;var n=[],r=ct.internal.getWidth(t)<=ct.internal.getHeight(t)?ct.internal.getWidth(t)/4:ct.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=ct.internal.Bezier_C,s=Number((r*i).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+Wa(ct.internal.getWidth(t)/2)+" "+Wa(ct.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),n.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),n.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),n.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=vo(t);e.scope=t.scope;var n=[],r=ct.internal.getWidth(t)<=ct.internal.getHeight(t)?ct.internal.getWidth(t)/4:ct.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*ct.internal.Bezier_C).toFixed(5)),o=Number((r*ct.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+Wa(ct.internal.getWidth(t)/2)+" "+Wa(ct.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),n.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),n.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),n.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+Wa(ct.internal.getWidth(t)/2)+" "+Wa(ct.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+o+" "+o+" "+r+" 0 "+r+" c"),n.push("-"+o+" "+r+" -"+r+" "+o+" -"+r+" 0 c"),n.push("-"+r+" -"+o+" -"+o+" -"+r+" 0 -"+r+" c"),n.push(o+" -"+r+" "+r+" -"+o+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=vo(t);e.scope=t.scope;var n=[],r=ct.internal.getWidth(t)<=ct.internal.getHeight(t)?ct.internal.getWidth(t)/4:ct.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*ct.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+Wa(ct.internal.getWidth(t)/2)+" "+Wa(ct.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),n.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),n.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),n.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:ct.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=ct.RadioButton.Cross.YesNormal,e.D[t]=ct.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=vo(t);e.scope=t.scope;var n=[],r=ct.internal.calculateCross(t);return n.push("q"),n.push("1 1 "+Rt(ct.internal.getWidth(t)-2)+" "+Rt(ct.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(Rt(r.x1.x)+" "+Rt(r.x1.y)+" m"),n.push(Rt(r.x2.x)+" "+Rt(r.x2.y)+" l"),n.push(Rt(r.x4.x)+" "+Rt(r.x4.y)+" m"),n.push(Rt(r.x3.x)+" "+Rt(r.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=vo(t);e.scope=t.scope;var n=ct.internal.calculateCross(t),r=[];return r.push("0.749023 g"),r.push("0 0 "+Rt(ct.internal.getWidth(t))+" "+Rt(ct.internal.getHeight(t))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+Rt(ct.internal.getWidth(t)-2)+" "+Rt(ct.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(Rt(n.x1.x)+" "+Rt(n.x1.y)+" m"),r.push(Rt(n.x2.x)+" "+Rt(n.x2.y)+" l"),r.push(Rt(n.x4.x)+" "+Rt(n.x4.y)+" m"),r.push(Rt(n.x3.x)+" "+Rt(n.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=vo(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Rt(ct.internal.getWidth(t))+" "+Rt(ct.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+n}};ct.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=ct.internal.getWidth(t),n=ct.internal.getHeight(t),r=Math.min(e,n);return{x1:{x:(e-r)/2,y:(n-r)/2+r},x2:{x:(e-r)/2+r,y:(n-r)/2},x3:{x:(e-r)/2,y:(n-r)/2},x4:{x:(e-r)/2+r,y:(n-r)/2+r}}}},ct.internal.getWidth=function(t){var e=0;return yn(t)==="object"&&(e=zb(t.Rect[2])),e},ct.internal.getHeight=function(t){var e=0;return yn(t)==="object"&&(e=zb(t.Rect[3])),e};var iB=ir.addField=function(t){if(rB(this,t),!(t instanceof io))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};ir.AcroFormChoiceField=Tu,ir.AcroFormListBox=Iu,ir.AcroFormComboBox=ku,ir.AcroFormEditBox=Mp,ir.AcroFormButton=Ur,ir.AcroFormPushButton=Fp,ir.AcroFormRadioButton=Cu,ir.AcroFormCheckBox=Up,ir.AcroFormTextField=ac,ir.AcroFormPasswordField=Vp,ir.AcroFormAppearance=ct,ir.AcroForm={ChoiceField:Tu,ListBox:Iu,ComboBox:ku,EditBox:Mp,Button:Ur,PushButton:Fp,RadioButton:Cu,CheckBox:Up,TextField:ac,PasswordField:Vp,Appearance:ct},wt.AcroForm={ChoiceField:Tu,ListBox:Iu,ComboBox:ku,EditBox:Mp,Button:Ur,PushButton:Fp,RadioButton:Cu,CheckBox:Up,TextField:ac,PasswordField:Vp,Appearance:ct};wt.AcroForm;function DE(t){return t.reduce(function(e,n,r){return e[n]=r,e},{})}(function(t){var e="addImage_";t.__addimage__={};var n="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},i=t.__addimage__.getImageFileTypeByImageData=function(A,I){var R,G,oe,pe,ge,ne=n;if((I=I||n)==="RGBA"||A.data!==void 0&&A.data instanceof Uint8ClampedArray&&"height"in A&&"width"in A)return"RGBA";if(X(A))for(ge in r)for(oe=r[ge],R=0;R<oe.length;R+=1){for(pe=!0,G=0;G<oe[R].length;G+=1)if(oe[R][G]!==void 0&&oe[R][G]!==A[G]){pe=!1;break}if(pe===!0){ne=ge;break}}else for(ge in r)for(oe=r[ge],R=0;R<oe.length;R+=1){for(pe=!0,G=0;G<oe[R].length;G+=1)if(oe[R][G]!==void 0&&oe[R][G]!==A.charCodeAt(G)){pe=!1;break}if(pe===!0){ne=ge;break}}return ne===n&&I!==n&&(ne=I),ne},s=function A(I){for(var R=this.internal.write,G=this.internal.putStream,oe=(0,this.internal.getFilters)();oe.indexOf("FlateEncode")!==-1;)oe.splice(oe.indexOf("FlateEncode"),1);I.objectId=this.internal.newObject();var pe=[];if(pe.push({key:"Type",value:"/XObject"}),pe.push({key:"Subtype",value:"/Image"}),pe.push({key:"Width",value:I.width}),pe.push({key:"Height",value:I.height}),I.colorSpace===_.INDEXED?pe.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(I.palette.length/3-1)+" "+("sMask"in I&&I.sMask!==void 0?I.objectId+2:I.objectId+1)+" 0 R]"}):(pe.push({key:"ColorSpace",value:"/"+I.colorSpace}),I.colorSpace===_.DEVICE_CMYK&&pe.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),pe.push({key:"BitsPerComponent",value:I.bitsPerComponent}),"decodeParameters"in I&&I.decodeParameters!==void 0&&pe.push({key:"DecodeParms",value:"<<"+I.decodeParameters+">>"}),"transparency"in I&&Array.isArray(I.transparency)&&I.transparency.length>0){for(var ge="",ne=0,le=I.transparency.length;ne<le;ne++)ge+=I.transparency[ne]+" "+I.transparency[ne]+" ";pe.push({key:"Mask",value:"["+ge+"]"})}I.sMask!==void 0&&pe.push({key:"SMask",value:I.objectId+1+" 0 R"});var we=I.filter!==void 0?["/"+I.filter]:void 0;if(G({data:I.data,additionalKeyValues:pe,alreadyAppliedFilters:we,objectId:I.objectId}),R("endobj"),"sMask"in I&&I.sMask!==void 0){var de,U=(de=I.sMaskBitsPerComponent)!==null&&de!==void 0?de:I.bitsPerComponent,W={width:I.width,height:I.height,colorSpace:"DeviceGray",bitsPerComponent:U,data:I.sMask};"filter"in I&&(W.decodeParameters="/Predictor ".concat(I.predictor," /Colors 1 /BitsPerComponent ").concat(U," /Columns ").concat(I.width),W.filter=I.filter),A.call(this,W)}if(I.colorSpace===_.INDEXED){var te=this.internal.newObject();G({data:S(new Uint8Array(I.palette)),objectId:te}),R("endobj")}},o=function(){var A=this.internal.collections[e+"images"];for(var I in A)s.call(this,A[I])},a=function(){var A,I=this.internal.collections[e+"images"],R=this.internal.write;for(var G in I)R("/I"+(A=I[G]).index,A.objectId,"0","R")},l=function(){this.internal.collections[e+"images"]||(this.internal.collections[e+"images"]={},this.internal.events.subscribe("putResources",o),this.internal.events.subscribe("putXobjectDict",a))},c=function(){var A=this.internal.collections[e+"images"];return l.call(this),A},u=function(){return Object.keys(this.internal.collections[e+"images"]).length},g=function(A){return typeof t["process"+A.toUpperCase()]=="function"},y=function(A){return yn(A)==="object"&&A.nodeType===1},p=function(A,I){if(A.nodeName==="IMG"&&A.hasAttribute("src")){var R=""+A.getAttribute("src");if(R.indexOf("data:image/")===0)return Op(unescape(R).split("base64,").pop());var G=t.loadFile(R,!0);if(G!==void 0)return G}if(A.nodeName==="CANVAS"){if(A.width===0||A.height===0)throw new Error("Given canvas must have data. Canvas width: "+A.width+", height: "+A.height);var oe;switch(I){case"PNG":oe="image/png";break;case"WEBP":oe="image/webp";break;default:oe="image/jpeg"}return Op(A.toDataURL(oe,1).split("base64,").pop())}},b=function(A){var I=this.internal.collections[e+"images"];if(I){for(var R in I)if(A===I[R].alias)return I[R]}},N=function(A,I,R){return A||I||(A=-96,I=-96),A<0&&(A=-1*R.width*72/A/this.internal.scaleFactor),I<0&&(I=-1*R.height*72/I/this.internal.scaleFactor),A===0&&(A=I*R.width/R.height),I===0&&(I=A*R.height/R.width),[A,I]},C=function(A,I,R,G,oe,pe){var ge=N.call(this,R,G,oe),ne=this.internal.getCoordinateString,le=this.internal.getVerticalCoordinateString,we=c.call(this);if(R=ge[0],G=ge[1],we[oe.index]=oe,pe){pe*=Math.PI/180;var de=Math.cos(pe),U=Math.sin(pe),W=function(Q){return Q.toFixed(4)},te=[W(de),W(U),W(-1*U),W(de),0,0,"cm"]}this.internal.write("q"),pe?(this.internal.write([1,"0","0",1,ne(A),le(I+G),"cm"].join(" ")),this.internal.write(te.join(" ")),this.internal.write([ne(R),"0","0",ne(G),"0","0","cm"].join(" "))):this.internal.write([ne(R),"0","0",ne(G),ne(A),le(I+G),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+oe.index+" Do"),this.internal.write("Q")},_=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var k=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},L=t.__addimage__.sHashCode=function(A){var I,R,G=0;if(typeof A=="string")for(R=A.length,I=0;I<R;I++)G=(G<<5)-G+A.charCodeAt(I),G|=0;else if(X(A))for(R=A.byteLength/2,I=0;I<R;I++)G=(G<<5)-G+A[I],G|=0;return G},D=t.__addimage__.validateStringAsBase64=function(A){(A=A||"").toString().trim();var I=!0;return A.length===0&&(I=!1),A.length%4!=0&&(I=!1),/^[A-Za-z0-9+/]+$/.test(A.substr(0,A.length-2))===!1&&(I=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(A.substr(-2))===!1&&(I=!1),I},z=t.__addimage__.extractImageFromDataUrl=function(A){if(A==null||!(A=A.trim()).startsWith("data:"))return null;var I=A.indexOf(",");return I<0?null:A.substring(0,I).trim().endsWith("base64")?A.substring(I+1):null};t.__addimage__.isArrayBuffer=function(A){return A instanceof ArrayBuffer};var X=t.__addimage__.isArrayBufferView=function(A){return A instanceof Int8Array||A instanceof Uint8Array||A instanceof Uint8ClampedArray||A instanceof Int16Array||A instanceof Uint16Array||A instanceof Int32Array||A instanceof Uint32Array||A instanceof Float32Array||A instanceof Float64Array},j=t.__addimage__.binaryStringToUint8Array=function(A){for(var I=A.length,R=new Uint8Array(I),G=0;G<I;G++)R[G]=A.charCodeAt(G);return R},S=t.__addimage__.arrayBufferToBinaryString=function(A){for(var I="",R=X(A)?A:new Uint8Array(A),G=0;G<R.length;G+=8192)I+=String.fromCharCode.apply(null,R.subarray(G,G+8192));return I};t.addImage=function(){var A,I,R,G,oe,pe,ge,ne,le;if(typeof arguments[1]=="number"?(I=n,R=arguments[1],G=arguments[2],oe=arguments[3],pe=arguments[4],ge=arguments[5],ne=arguments[6],le=arguments[7]):(I=arguments[1],R=arguments[2],G=arguments[3],oe=arguments[4],pe=arguments[5],ge=arguments[6],ne=arguments[7],le=arguments[8]),yn(A=arguments[0])==="object"&&!y(A)&&"imageData"in A){var we=A;A=we.imageData,I=we.format||I||n,R=we.x||R||0,G=we.y||G||0,oe=we.w||we.width||oe,pe=we.h||we.height||pe,ge=we.alias||ge,ne=we.compression||ne,le=we.rotation||we.angle||le}var de=this.internal.getFilters();if(ne===void 0&&de.indexOf("FlateEncode")!==-1&&(ne="SLOW"),isNaN(R)||isNaN(G))throw new Error("Invalid coordinates passed to jsPDF.addImage");l.call(this);var U=T.call(this,A,I,ge,ne);return C.call(this,R,G,oe,pe,U,le),this};var T=function(A,I,R,G){var oe,pe,ge;if(typeof A=="string"&&i(A)===n){A=unescape(A);var ne=M(A,!1);(ne!==""||(ne=t.loadFile(A,!0))!==void 0)&&(A=ne)}if(y(A)&&(A=p(A,I)),I=i(A,I),!g(I))throw new Error("addImage does not support files of type '"+I+"', please ensure that a plugin for '"+I+"' support is added.");if(((ge=R)==null||ge.length===0)&&(R=function(le){return typeof le=="string"||X(le)?L(le):X(le.data)?L(le.data):null}(A)),(oe=b.call(this,R))||(A instanceof Uint8Array||I==="RGBA"||(pe=A,A=j(A)),oe=this["process"+I.toUpperCase()](A,u.call(this),R,function(le){return le&&typeof le=="string"&&(le=le.toUpperCase()),le in t.image_compression?le:k.NONE}(G),pe)),!oe)throw new Error("An unknown error occurred whilst processing the image.");return oe},M=t.__addimage__.convertBase64ToBinaryString=function(A,I){I=typeof I!="boolean"||I;var R,G="";if(typeof A=="string"){var oe;R=(oe=z(A))!==null&&oe!==void 0?oe:A;try{G=Op(R)}catch(pe){if(I)throw D(R)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+pe.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return G};t.getImageProperties=function(A){var I,R,G="";if(y(A)&&(A=p(A)),typeof A=="string"&&i(A)===n&&((G=M(A,!1))===""&&(G=t.loadFile(A)||""),A=G),R=i(A),!g(R))throw new Error("addImage does not support files of type '"+R+"', please ensure that a plugin for '"+R+"' support is added.");if(A instanceof Uint8Array||(A=j(A)),!(I=this["process"+R.toUpperCase()](A)))throw new Error("An unknown error occurred whilst processing the image");return I.fileType=R,I}})(wt.API),function(t){var e=function(n){if(n!==void 0&&n!="")return!0};wt.API.events.push(["addPage",function(n){this.internal.getPageInfo(n.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(n){for(var r,i,s,o=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString,l=this.internal.getPageInfoByObjId(n.objId),c=n.pageContext.annotations,u=!1,g=0;g<c.length&&!u;g++)switch((r=c[g]).type){case"link":(e(r.options.url)||e(r.options.pageNumber))&&(u=!0);break;case"reference":case"text":case"freetext":u=!0}if(u!=0){this.internal.write("/Annots [");for(var y=0;y<c.length;y++){r=c[y];var p=this.internal.pdfEscape,b=this.internal.getEncryptor(n.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var N=this.internal.newAdditionalObject(),C=this.internal.newAdditionalObject(),_=this.internal.getEncryptor(N.objId),k=r.title||"Note";s="<</Type /Annot /Subtype /Text "+(i="/Rect ["+o(r.bounds.x)+" "+a(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y)+"] ")+"/Contents ("+p(_(r.contents))+")",s+=" /Popup "+C.objId+" 0 R",s+=" /P "+l.objId+" 0 R",s+=" /T ("+p(_(k))+") >>",N.content=s;var L=N.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+o(r.bounds.x+30)+" "+a(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w+30)+" "+a(r.bounds.y)+"] ")+" /Parent "+L,r.open&&(s+=" /Open true"),s+=" >>",C.content=s,this.internal.write(N.objId,"0 R",C.objId,"0 R");break;case"freetext":i="/Rect ["+o(r.bounds.x)+" "+a(r.bounds.y)+" "+o(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y+r.bounds.h)+"] ";var D=r.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+p(b(r.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+D+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(r.options.name){var z=this.annotations._nameMap[r.options.name];r.options.pageNumber=z.page,r.options.top=z.y}else r.options.top||(r.options.top=0);if(i="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",s="",r.options.url)s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+p(b(r.options.url))+") >>";else if(r.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,s+=" /FitV "+r.options.left+"]";break;default:var X=a(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),s+=" /XYZ "+r.options.left+" "+X+" "+r.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),t.createAnnotation=function(n){var r=this.internal.getCurrentPageInfo();switch(n.type){case"link":this.link(n.bounds.x,n.bounds.y,n.bounds.w,n.bounds.h,n);break;case"text":case"freetext":r.pageContext.annotations.push(n)}},t.link=function(n,r,i,s,o){var a=this.internal.getCurrentPageInfo(),l=this.internal.getCoordinateString,c=this.internal.getVerticalCoordinateString;a.pageContext.annotations.push({finalBounds:{x:l(n),y:c(r),w:l(n+i),h:c(r+s)},options:o,type:"link"})},t.textWithLink=function(n,r,i,s){var o,a,l=this.getTextWidth(n),c=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){a=s.maxWidth;var u=this.splitTextToSize(n,a).length;o=Math.ceil(c*u)}else a=l,o=c;return this.text(n,r,i,s),i+=.2*c,s.align==="center"&&(r-=l/2),s.align==="right"&&(r-=l),this.link(r,i-c,a,o,s),l},t.getTextWidth=function(n){var r=this.internal.getFontSize();return this.getStringUnitWidth(n)*r/this.internal.scaleFactor}}(wt.API),function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];t.__arabicParser__={};var s=t.__arabicParser__.isInArabicSubstitutionA=function(N){return e[N.charCodeAt(0)]!==void 0},o=t.__arabicParser__.isArabicLetter=function(N){return typeof N=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(N)},a=t.__arabicParser__.isArabicEndLetter=function(N){return o(N)&&s(N)&&e[N.charCodeAt(0)].length<=2},l=t.__arabicParser__.isArabicAlfLetter=function(N){return o(N)&&i.indexOf(N.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(N){return o(N)&&s(N)&&e[N.charCodeAt(0)].length>=1};var c=t.__arabicParser__.arabicLetterHasFinalForm=function(N){return o(N)&&s(N)&&e[N.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(N){return o(N)&&s(N)&&e[N.charCodeAt(0)].length>=3};var u=t.__arabicParser__.arabicLetterHasMedialForm=function(N){return o(N)&&s(N)&&e[N.charCodeAt(0)].length==4},g=t.__arabicParser__.resolveLigatures=function(N){var C=0,_=n,k="",L=0;for(C=0;C<N.length;C+=1)_[N.charCodeAt(C)]!==void 0?(L++,typeof(_=_[N.charCodeAt(C)])=="number"&&(k+=String.fromCharCode(_),_=n,L=0),C===N.length-1&&(_=n,k+=N.charAt(C-(L-1)),C-=L-1,L=0)):(_=n,k+=N.charAt(C-L),C-=L,L=0);return k};t.__arabicParser__.isArabicDiacritic=function(N){return N!==void 0&&r[N.charCodeAt(0)]!==void 0};var y=t.__arabicParser__.getCorrectForm=function(N,C,_){return o(N)?s(N)===!1?-1:!c(N)||!o(C)&&!o(_)||!o(_)&&a(C)||a(N)&&!o(C)||a(N)&&l(C)||a(N)&&a(C)?0:u(N)&&o(C)&&!a(C)&&o(_)&&c(_)?3:a(N)||!o(_)?1:2:-1},p=function(N){var C=0,_=0,k=0,L="",D="",z="",X=(N=N||"").split("\\s+"),j=[];for(C=0;C<X.length;C+=1){for(j.push(""),_=0;_<X[C].length;_+=1)L=X[C][_],D=X[C][_-1],z=X[C][_+1],o(L)?(k=y(L,D,z),j[C]+=k!==-1?String.fromCharCode(e[L.charCodeAt(0)][k]):L):j[C]+=L;j[C]=g(j[C])}return j.join(" ")},b=t.__arabicParser__.processArabic=t.processArabic=function(){var N,C=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,_=[];if(Array.isArray(C)){var k=0;for(_=[],k=0;k<C.length;k+=1)Array.isArray(C[k])?_.push([p(C[k][0]),C[k][1],C[k][2]]):_.push([p(C[k])]);N=_}else N=p(C);return typeof arguments[0]=="string"?N:(arguments[0].text=N,arguments[0])};t.events.push(["preProcessText",b])}(wt.API),wt.API.autoPrint=function(t){var e;return(t=t||{}).variant=t.variant||"non-conform",t.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})),this},function(t){var e=function(){var n=void 0;Object.defineProperty(this,"pdf",{get:function(){return n},set:function(a){n=a}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(a){r=isNaN(a)||Number.isInteger(a)===!1||a<0?150:a,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(a){i=isNaN(a)||Number.isInteger(a)===!1||a<0?300:a,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(a){s=a}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(a){o=a}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(n,r){var i;if((n=n||"2d")!=="2d")return null;for(i in r)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=r[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(wt.API),function(t){var e={left:0,top:0,bottom:0,right:0},n=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var l=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return l},set:function(N){l=N}});var c=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return c},set:function(N){c=N}});var u=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return u},set:function(N){u=N}});var g=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return g},set:function(N){g=N}});var y=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return y},set:function(N){y=N}});var p=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return p},set:function(N){p=N}});var b=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return b},set:function(N){b=N}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(l){return r.call(this),this.internal.__cell__.headerFunction=typeof l=="function"?l:void 0,this},t.getTextDimensions=function(l,c){r.call(this);var u=(c=c||{}).fontSize||this.getFontSize(),g=c.font||this.getFont(),y=c.scaleFactor||this.internal.scaleFactor,p=0,b=0,N=0,C=this;if(!Array.isArray(l)&&typeof l!="string"){if(typeof l!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");l=String(l)}var _=c.maxWidth;_>0?typeof l=="string"?l=this.splitTextToSize(l,_):Object.prototype.toString.call(l)==="[object Array]"&&(l=l.reduce(function(L,D){return L.concat(C.splitTextToSize(D,_))},[])):l=Array.isArray(l)?l:[l];for(var k=0;k<l.length;k++)p<(N=this.getStringUnitWidth(l[k],{font:g})*u)&&(p=N);return p!==0&&(b=l.length),{w:p/=y,h:Math.max((b*u*this.getLineHeightFactor()-u*(this.getLineHeightFactor()-1))/y,0)}},t.cellAddPage=function(){r.call(this),this.addPage();var l=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new s(l.left,l.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=t.cell=function(){var l;l=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]),r.call(this);var c=this.internal.__cell__.lastCell,u=this.internal.__cell__.padding,g=this.internal.__cell__.margins||e,y=this.internal.__cell__.tableHeaderRow,p=this.internal.__cell__.printHeaders;return c.lineNumber!==void 0&&(c.lineNumber===l.lineNumber?(l.x=(c.x||0)+(c.width||0),l.y=c.y||0):c.y+c.height+l.height+g.bottom>this.getPageHeight()?(this.cellAddPage(),l.y=g.top,p&&y&&(this.printHeaderRow(l.lineNumber,!0),l.y+=y[0].height)):l.y=c.y+c.height||l.y),l.text[0]!==void 0&&(this.rect(l.x,l.y,l.width,l.height,n===!0?"FD":void 0),l.align==="right"?this.text(l.text,l.x+l.width-u,l.y+u,{align:"right",baseline:"top"}):l.align==="center"?this.text(l.text,l.x+l.width/2,l.y+u,{align:"center",baseline:"top",maxWidth:l.width-u-u}):this.text(l.text,l.x+u,l.y+u,{align:"left",baseline:"top",maxWidth:l.width-u-u})),this.internal.__cell__.lastCell=l,this};t.table=function(l,c,u,g,y){if(r.call(this),!u)throw new Error("No data for PDF table.");var p,b,N,C,_=[],k=[],L=[],D={},z={},X=[],j=[],S=(y=y||{}).autoSize||!1,T=y.printHeaders!==!1,M=y.css&&y.css["font-size"]!==void 0?16*y.css["font-size"]:y.fontSize||12,A=y.margins||Object.assign({width:this.getPageWidth()},e),I=typeof y.padding=="number"?y.padding:3,R=y.headerBackgroundColor||"#c8c8c8",G=y.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=T,this.internal.__cell__.margins=A,this.internal.__cell__.table_font_size=M,this.internal.__cell__.padding=I,this.internal.__cell__.headerBackgroundColor=R,this.internal.__cell__.headerTextColor=G,this.setFontSize(M),g==null)k=_=Object.keys(u[0]),L=_.map(function(){return"left"});else if(Array.isArray(g)&&yn(g[0])==="object")for(_=g.map(function(we){return we.name}),k=g.map(function(we){return we.prompt||we.name||""}),L=g.map(function(we){return we.align||"left"}),p=0;p<g.length;p+=1)z[g[p].name]=.7499990551181103*g[p].width;else Array.isArray(g)&&typeof g[0]=="string"&&(k=_=g,L=_.map(function(){return"left"}));if(S||Array.isArray(g)&&typeof g[0]=="string")for(p=0;p<_.length;p+=1){for(D[C=_[p]]=u.map(function(we){return we[C]}),this.setFont(void 0,"bold"),X.push(this.getTextDimensions(k[p],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),b=D[C],this.setFont(void 0,"normal"),N=0;N<b.length;N+=1)X.push(this.getTextDimensions(b[N],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);z[C]=Math.max.apply(null,X)+I+I,X=[]}if(T){var oe={};for(p=0;p<_.length;p+=1)oe[_[p]]={},oe[_[p]].text=k[p],oe[_[p]].align=L[p];var pe=a.call(this,oe,z);j=_.map(function(we){return new s(l,c,z[we],pe,oe[we].text,void 0,oe[we].align)}),this.setTableHeaderRow(j),this.printHeaderRow(1,!1)}var ge=g.reduce(function(we,de){return we[de.name]=de.align,we},{});for(p=0;p<u.length;p+=1){"rowStart"in y&&y.rowStart instanceof Function&&y.rowStart({row:p,data:u[p]},this);var ne=a.call(this,u[p],z);for(N=0;N<_.length;N+=1){var le=u[p][_[N]];"cellStart"in y&&y.cellStart instanceof Function&&y.cellStart({row:p,col:N,data:le},this),o.call(this,new s(l,c,z[_[N]],ne,le,p+2,ge[_[N]]))}}return this.internal.__cell__.table_x=l,this.internal.__cell__.table_y=c,this};var a=function(l,c){var u=this.internal.__cell__.padding,g=this.internal.__cell__.table_font_size,y=this.internal.scaleFactor;return Object.keys(l).map(function(p){var b=l[p];return this.splitTextToSize(b.hasOwnProperty("text")?b.text:b,c[p]-u-u)},this).map(function(p){return this.getLineHeightFactor()*p.length*g/y+u+u},this).reduce(function(p,b){return Math.max(p,b)},0)};t.setTableHeaderRow=function(l){r.call(this),this.internal.__cell__.tableHeaderRow=l},t.printHeaderRow=function(l,c){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var u;if(n=!0,typeof this.internal.__cell__.headerFunction=="function"){var g=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(g[0],g[1],g[2],g[3],void 0,-1)}this.setFont(void 0,"bold");for(var y=[],p=0;p<this.internal.__cell__.tableHeaderRow.length;p+=1){u=this.internal.__cell__.tableHeaderRow[p].clone(),c&&(u.y=this.internal.__cell__.margins.top||0,y.push(u)),u.lineNumber=l;var b=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,u),this.setTextColor(b)}y.length>0&&this.setTableHeaderRow(y),this.setFont(void 0,"normal"),n=!1}}(wt.API);var OE={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},ME=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],K2=DE(ME),FE=[100,200,300,400,500,600,700,800,900],sB=DE(FE);function i1(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),n=function(s){return OE[s=s||"normal"]?s:"normal"}(t.style),r=function(s){return s?typeof s=="number"?s>=100&&s<=900&&s%100==0?s:400:/^\d00$/.test(s)?parseInt(s):s==="bold"?700:400:400}(t.weight),i=function(s){return typeof K2[s=s||"normal"]=="number"?s:"normal"}(t.stretch);return{family:e,style:n,weight:r,stretch:i,src:t.src||[],ref:t.ref||{name:e,style:[i,n,r].join(" ")}}}function qb(t,e,n,r){var i;for(i=n;i>=0&&i<e.length;i+=r)if(t[e[i]])return t[e[i]];for(i=n;i>=0&&i<e.length;i-=r)if(t[e[i]])return t[e[i]]}var oB={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},Hb={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function Wb(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function $b(t){return t.trimLeft()}function aB(t,e){for(var n=0;n<t.length;){if(t.charAt(n)===e)return[t.substring(0,n),t.substring(n+1)];n+=1}return null}function lB(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var dp,Gb,Kb,Xc,fp,Yb,Qb,Xb,s1=["times"];function Jb(t,e,n,r,i){var s=4,o=e4;switch(i){case wt.API.image_compression.FAST:s=1,o=Zb;break;case wt.API.image_compression.MEDIUM:s=6,o=t4;break;case wt.API.image_compression.SLOW:s=9,o=n4}t=function(l,c,u,g){for(var y,p=l.length/c,b=new Uint8Array(l.length+p),N=[cB,Zb,e4,t4,n4],C=0;C<p;C+=1){var _=C*c,k=l.subarray(_,_+c);if(g)b.set(g(k,u,y),_+C);else{for(var L=N.length,D=[],z=0;z<L;z+=1)D[z]=N[z](k,u,y);var X=hB(D.concat());b.set(D[X],_+C)}y=k}return b}(t,e,Math.ceil(n*r/8),o);var a=B2(t,{level:s});return wt.API.__addimage__.arrayBufferToBinaryString(a)}function cB(t){var e=Array.apply([],t);return e.unshift(0),e}function Zb(t,e){var n=t.length,r=[];r[0]=1;for(var i=0;i<n;i+=1){var s=t[i-e]||0;r[i+1]=t[i]-s+256&255}return r}function e4(t,e,n){var r=t.length,i=[];i[0]=2;for(var s=0;s<r;s+=1){var o=n&&n[s]||0;i[s+1]=t[s]-o+256&255}return i}function t4(t,e,n){var r=t.length,i=[];i[0]=3;for(var s=0;s<r;s+=1){var o=t[s-e]||0,a=n&&n[s]||0;i[s+1]=t[s]+256-(o+a>>>1)&255}return i}function n4(t,e,n){var r=t.length,i=[];i[0]=4;for(var s=0;s<r;s+=1){var o=uB(t[s-e]||0,n&&n[s]||0,n&&n[s-e]||0);i[s+1]=t[s]-o+256&255}return i}function uB(t,e,n){if(t===e&&e===n)return t;var r=Math.abs(e-n),i=Math.abs(t-n),s=Math.abs(t+e-n-n);return r<=i&&r<=s?t:i<=s?e:n}function hB(t){var e=t.map(function(n){return n.reduce(function(r,i){return r+Math.abs(i)},0)});return e.indexOf(Math.min.apply(null,e))}function o1(t,e,n){var r=e*n,i=Math.floor(r/8),s=16-(r-8*i+n),o=(1<<n)-1;return UE(t,i)>>s&o}function r4(t,e,n,r){var i=n*r,s=Math.floor(i/8),o=16-(i-8*s+r),a=(1<<r)-1,l=(e&a)<<o;(function(c,u,g){if(u+1<c.byteLength)c.setUint16(u,g,!1);else{var y=g>>8&255;c.setUint8(u,y)}})(t,s,UE(t,s)&~(a<<o)&65535|l)}function UE(t,e){return e+1<t.byteLength?t.getUint16(e,!1):t.getUint8(e)<<8}function dB(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var n=t[e++]|t[e++]<<8,r=t[e++]|t[e++]<<8,i=t[e++],s=i>>7,o=1<<1+(7&i);t[e++],t[e++];var a=null,l=null;s&&(a=e,l=o,e+=3*o);var c=!0,u=[],g=0,y=null,p=0,b=null;for(this.width=n,this.height=r;c&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,b=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((A=t[e++])>=0))throw Error("Invalid block size");if(A===0)break;e+=A}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var N=t[e++];g=t[e++]|t[e++]<<8,y=t[e++],1&N||(y=null),p=N>>2&7,e++;break;case 254:for(;;){if(!((A=t[e++])>=0))throw Error("Invalid block size");if(A===0)break;e+=A}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var C=t[e++]|t[e++]<<8,_=t[e++]|t[e++]<<8,k=t[e++]|t[e++]<<8,L=t[e++]|t[e++]<<8,D=t[e++],z=D>>6&1,X=1<<1+(7&D),j=a,S=l,T=!1;D>>7&&(T=!0,j=e,S=X,e+=3*X);var M=e;for(e++;;){var A;if(!((A=t[e++])>=0))throw Error("Invalid block size");if(A===0)break;e+=A}u.push({x:C,y:_,width:k,height:L,has_local_palette:T,palette_offset:j,palette_size:S,data_offset:M,data_length:e-M,transparent_index:y,interlaced:!!z,delay:g,disposal:p});break;case 59:c=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return u.length},this.loopCount=function(){return b},this.frameInfo=function(I){if(I<0||I>=u.length)throw new Error("Frame index out of range.");return u[I]},this.decodeAndBlitFrameBGRA=function(I,R){var G=this.frameInfo(I),oe=G.width*G.height,pe=new Uint8Array(oe);i4(t,G.data_offset,pe,oe);var ge=G.palette_offset,ne=G.transparent_index;ne===null&&(ne=256);var le=G.width,we=n-le,de=le,U=4*(G.y*n+G.x),W=4*((G.y+G.height)*n+G.x),te=U,Q=4*we;G.interlaced===!0&&(Q+=4*n*7);for(var re=8,q=0,ae=pe.length;q<ae;++q){var ue=pe[q];if(de===0&&(de=le,(te+=Q)>=W&&(Q=4*we+4*n*(re-1),te=U+(le+we)*(re<<1),re>>=1)),ue===ne)te+=4;else{var me=t[ge+3*ue],_e=t[ge+3*ue+1],Le=t[ge+3*ue+2];R[te++]=Le,R[te++]=_e,R[te++]=me,R[te++]=255}--de}},this.decodeAndBlitFrameRGBA=function(I,R){var G=this.frameInfo(I),oe=G.width*G.height,pe=new Uint8Array(oe);i4(t,G.data_offset,pe,oe);var ge=G.palette_offset,ne=G.transparent_index;ne===null&&(ne=256);var le=G.width,we=n-le,de=le,U=4*(G.y*n+G.x),W=4*((G.y+G.height)*n+G.x),te=U,Q=4*we;G.interlaced===!0&&(Q+=4*n*7);for(var re=8,q=0,ae=pe.length;q<ae;++q){var ue=pe[q];if(de===0&&(de=le,(te+=Q)>=W&&(Q=4*we+4*n*(re-1),te=U+(le+we)*(re<<1),re>>=1)),ue===ne)te+=4;else{var me=t[ge+3*ue],_e=t[ge+3*ue+1],Le=t[ge+3*ue+2];R[te++]=me,R[te++]=_e,R[te++]=Le,R[te++]=255}--de}}}function i4(t,e,n,r){for(var i=t[e++],s=1<<i,o=s+1,a=o+1,l=i+1,c=(1<<l)-1,u=0,g=0,y=0,p=t[e++],b=new Int32Array(4096),N=null;;){for(;u<16&&p!==0;)g|=t[e++]<<u,u+=8,p===1?p=t[e++]:--p;if(u<l)break;var C=g&c;if(g>>=l,u-=l,C!==s){if(C===o)break;for(var _=C<a?C:N,k=0,L=_;L>s;)L=b[L]>>8,++k;var D=L;if(y+k+(_!==C?1:0)>r)return void Tn.log("Warning, gif stream longer than expected.");n[y++]=D;var z=y+=k;for(_!==C&&(n[y++]=D),L=_;k--;)L=b[L],n[--z]=255&L,L>>=8;N!==null&&a<4096&&(b[a++]=N<<8|D,a>=c+1&&l<12&&(++l,c=c<<1|1)),N=C}else a=o+1,c=(1<<(l=i+1))-1,N=null}return y!==r&&Tn.log("Warning, gif stream shorter than expected."),n}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function a1(t){var e,n,r,i,s,o=Math.floor,a=new Array(64),l=new Array(64),c=new Array(64),u=new Array(64),g=new Array(65535),y=new Array(65535),p=new Array(64),b=new Array(64),N=[],C=0,_=7,k=new Array(64),L=new Array(64),D=new Array(64),z=new Array(256),X=new Array(2048),j=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],S=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],T=[0,1,2,3,4,5,6,7,8,9,10,11],M=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],A=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],I=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],R=[0,1,2,3,4,5,6,7,8,9,10,11],G=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],oe=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function pe(U,W){for(var te=0,Q=0,re=new Array,q=1;q<=16;q++){for(var ae=1;ae<=U[q];ae++)re[W[Q]]=[],re[W[Q]][0]=te,re[W[Q]][1]=q,Q++,te++;te*=2}return re}function ge(U){for(var W=U[0],te=U[1]-1;te>=0;)W&1<<te&&(C|=1<<_),te--,--_<0&&(C==255?(ne(255),ne(0)):ne(C),_=7,C=0)}function ne(U){N.push(U)}function le(U){ne(U>>8&255),ne(255&U)}function we(U,W,te,Q,re){for(var q,ae=re[0],ue=re[240],me=function(Re,Ze){var $e,st,Ae,Mt,gt,ze,lt,Nt,Ge,xt,tt=0;for(Ge=0;Ge<8;++Ge){$e=Re[tt],st=Re[tt+1],Ae=Re[tt+2],Mt=Re[tt+3],gt=Re[tt+4],ze=Re[tt+5],lt=Re[tt+6];var Dt=$e+(Nt=Re[tt+7]),Qe=$e-Nt,yt=st+lt,ot=st-lt,$t=Ae+ze,Xe=Ae-ze,At=Mt+gt,Ke=Mt-gt,ut=Dt+At,Tt=Dt-At,Be=yt+$t,Ye=yt-$t;Re[tt]=ut+Be,Re[tt+4]=ut-Be;var ht=.707106781*(Ye+Tt);Re[tt+2]=Tt+ht,Re[tt+6]=Tt-ht;var Jn=.382683433*((ut=Ke+Xe)-(Ye=ot+Qe)),Bt=.5411961*ut+Jn,on=1.306562965*Ye+Jn,Ht=.707106781*(Be=Xe+ot),et=Qe+Ht,Ft=Qe-Ht;Re[tt+5]=Ft+Bt,Re[tt+3]=Ft-Bt,Re[tt+1]=et+on,Re[tt+7]=et-on,tt+=8}for(tt=0,Ge=0;Ge<8;++Ge){$e=Re[tt],st=Re[tt+8],Ae=Re[tt+16],Mt=Re[tt+24],gt=Re[tt+32],ze=Re[tt+40],lt=Re[tt+48];var Fn=$e+(Nt=Re[tt+56]),_n=$e-Nt,Nn=st+lt,zt=st-lt,en=Ae+ze,an=Ae-ze,Br=Mt+gt,Lr=Mt-gt,Zn=Fn+Br,ni=Fn-Br,Nr=Nn+en,Sr=Nn-en;Re[tt]=Zn+Nr,Re[tt+32]=Zn-Nr;var hn=.707106781*(Sr+ni);Re[tt+16]=ni+hn,Re[tt+48]=ni-hn;var Ar=.382683433*((Zn=Lr+an)-(Sr=zt+_n)),jr=.5411961*Zn+Ar,zr=1.306562965*Sr+Ar,xi=.707106781*(Nr=an+zt),gs=_n+xi,jo=_n-xi;Re[tt+40]=jo+jr,Re[tt+24]=jo-jr,Re[tt+8]=gs+zr,Re[tt+56]=gs-zr,tt++}for(Ge=0;Ge<64;++Ge)xt=Re[Ge]*Ze[Ge],p[Ge]=xt>0?xt+.5|0:xt-.5|0;return p}(U,W),_e=0;_e<64;++_e)b[j[_e]]=me[_e];var Le=b[0]-te;te=b[0],Le==0?ge(Q[0]):(ge(Q[y[q=32767+Le]]),ge(g[q]));for(var Te=63;Te>0&&b[Te]==0;)Te--;if(Te==0)return ge(ae),te;for(var Se,K=1;K<=Te;){for(var Ce=K;b[K]==0&&K<=Te;)++K;var it=K-Ce;if(it>=16){Se=it>>4;for(var He=1;He<=Se;++He)ge(ue);it&=15}q=32767+b[K],ge(re[(it<<4)+y[q]]),ge(g[q]),K++}return Te!=63&&ge(ae),te}function de(U){U=Math.min(Math.max(U,1),100),s!=U&&(function(W){for(var te=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],Q=0;Q<64;Q++){var re=o((te[Q]*W+50)/100);re=Math.min(Math.max(re,1),255),a[j[Q]]=re}for(var q=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],ae=0;ae<64;ae++){var ue=o((q[ae]*W+50)/100);ue=Math.min(Math.max(ue,1),255),l[j[ae]]=ue}for(var me=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],_e=0,Le=0;Le<8;Le++)for(var Te=0;Te<8;Te++)c[_e]=1/(a[j[_e]]*me[Le]*me[Te]*8),u[_e]=1/(l[j[_e]]*me[Le]*me[Te]*8),_e++}(U<50?Math.floor(5e3/U):Math.floor(200-2*U)),s=U)}this.encode=function(U,W){W&&de(W),N=new Array,C=0,_=7,le(65496),le(65504),le(16),ne(74),ne(70),ne(73),ne(70),ne(0),ne(1),ne(1),ne(0),le(1),le(1),ne(0),ne(0),function(){le(65499),le(132),ne(0);for(var st=0;st<64;st++)ne(a[st]);ne(1);for(var Ae=0;Ae<64;Ae++)ne(l[Ae])}(),function(st,Ae){le(65472),le(17),ne(8),le(Ae),le(st),ne(3),ne(1),ne(17),ne(0),ne(2),ne(17),ne(1),ne(3),ne(17),ne(1)}(U.width,U.height),function(){le(65476),le(418),ne(0);for(var st=0;st<16;st++)ne(S[st+1]);for(var Ae=0;Ae<=11;Ae++)ne(T[Ae]);ne(16);for(var Mt=0;Mt<16;Mt++)ne(M[Mt+1]);for(var gt=0;gt<=161;gt++)ne(A[gt]);ne(1);for(var ze=0;ze<16;ze++)ne(I[ze+1]);for(var lt=0;lt<=11;lt++)ne(R[lt]);ne(17);for(var Nt=0;Nt<16;Nt++)ne(G[Nt+1]);for(var Ge=0;Ge<=161;Ge++)ne(oe[Ge])}(),le(65498),le(12),ne(3),ne(1),ne(0),ne(2),ne(17),ne(3),ne(17),ne(0),ne(63),ne(0);var te=0,Q=0,re=0;C=0,_=7,this.encode.displayName="_encode_";for(var q,ae,ue,me,_e,Le,Te,Se,K,Ce=U.data,it=U.width,He=U.height,Re=4*it,Ze=0;Ze<He;){for(q=0;q<Re;){for(_e=Re*Ze+q,Te=-1,Se=0,K=0;K<64;K++)Le=_e+(Se=K>>3)*Re+(Te=4*(7&K)),Ze+Se>=He&&(Le-=Re*(Ze+1+Se-He)),q+Te>=Re&&(Le-=q+Te-Re+4),ae=Ce[Le++],ue=Ce[Le++],me=Ce[Le++],k[K]=(X[ae]+X[ue+256|0]+X[me+512|0]>>16)-128,L[K]=(X[ae+768|0]+X[ue+1024|0]+X[me+1280|0]>>16)-128,D[K]=(X[ae+1280|0]+X[ue+1536|0]+X[me+1792|0]>>16)-128;te=we(k,c,te,e,r),Q=we(L,u,Q,n,i),re=we(D,u,re,n,i),q+=32}Ze+=8}if(_>=0){var $e=[];$e[1]=_+1,$e[0]=(1<<_+1)-1,ge($e)}return le(65497),new Uint8Array(N)},t=t||50,function(){for(var U=String.fromCharCode,W=0;W<256;W++)z[W]=U(W)}(),e=pe(S,T),n=pe(I,R),r=pe(M,A),i=pe(G,oe),function(){for(var U=1,W=2,te=1;te<=15;te++){for(var Q=U;Q<W;Q++)y[32767+Q]=te,g[32767+Q]=[],g[32767+Q][1]=te,g[32767+Q][0]=Q;for(var re=-(W-1);re<=-U;re++)y[32767+re]=te,g[32767+re]=[],g[32767+re][1]=te,g[32767+re][0]=W-1+re;U<<=1,W<<=1}}(),function(){for(var U=0;U<256;U++)X[U]=19595*U,X[U+256|0]=38470*U,X[U+512|0]=7471*U+32768,X[U+768|0]=-11059*U,X[U+1024|0]=-21709*U,X[U+1280|0]=32768*U+8421375,X[U+1536|0]=-27439*U,X[U+1792|0]=-5329*U}(),de(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Ws(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function s4(t){function e(T){if(!T)throw Error("assert :P")}function n(T,M,A){for(var I=0;4>I;I++)if(T[M+I]!=A.charCodeAt(I))return!0;return!1}function r(T,M,A,I,R){for(var G=0;G<R;G++)T[M+G]=A[I+G]}function i(T,M,A,I){for(var R=0;R<I;R++)T[M+R]=A}function s(T){return new Int32Array(T)}function o(T,M){for(var A=[],I=0;I<T;I++)A.push(new M);return A}function a(T,M){var A=[];return function I(R,G,oe){for(var pe=oe[G],ge=0;ge<pe&&(R.push(oe.length>G+1?[]:new M),!(oe.length<G+1));ge++)I(R[ge],G+1,oe)}(A,0,T),A}var l=function(){var T=this;function M(h,m){for(var w=1<<m-1>>>0;h&w;)w>>>=1;return w?(h&w-1)+w:h}function A(h,m,w,E,F){e(!(E%w));do h[m+(E-=w)]=F;while(0<E)}function I(h,m,w,E,F){if(e(2328>=F),512>=F)var V=s(512);else if((V=s(F))==null)return 0;return function(B,H,Y,Z,ce,be){var ee,he,ve=H,Ee=1<<Y,xe=s(16),ke=s(16);for(e(ce!=0),e(Z!=null),e(B!=null),e(0<Y),he=0;he<ce;++he){if(15<Z[he])return 0;++xe[Z[he]]}if(xe[0]==ce)return 0;for(ke[1]=0,ee=1;15>ee;++ee){if(xe[ee]>1<<ee)return 0;ke[ee+1]=ke[ee]+xe[ee]}for(he=0;he<ce;++he)ee=Z[he],0<Z[he]&&(be[ke[ee]++]=he);if(ke[15]==1)return(Z=new R).g=0,Z.value=be[0],A(B,ve,1,Ee,Z),Ee;var Pe,Fe=-1,Oe=Ee-1,vt=0,at=1,Ut=1,pt=1<<Y;for(he=0,ee=1,ce=2;ee<=Y;++ee,ce<<=1){if(at+=Ut<<=1,0>(Ut-=xe[ee]))return 0;for(;0<xe[ee];--xe[ee])(Z=new R).g=ee,Z.value=be[he++],A(B,ve+vt,ce,pt,Z),vt=M(vt,ee)}for(ee=Y+1,ce=2;15>=ee;++ee,ce<<=1){if(at+=Ut<<=1,0>(Ut-=xe[ee]))return 0;for(;0<xe[ee];--xe[ee]){if(Z=new R,(vt&Oe)!=Fe){for(ve+=pt,Pe=1<<(Fe=ee)-Y;15>Fe&&!(0>=(Pe-=xe[Fe]));)++Fe,Pe<<=1;Ee+=pt=1<<(Pe=Fe-Y),B[H+(Fe=vt&Oe)].g=Pe+Y,B[H+Fe].value=ve-H-Fe}Z.g=ee-Y,Z.value=be[he++],A(B,ve+(vt>>Y),ce,pt,Z),vt=M(vt,ee)}}return at!=2*ke[15]-1?0:Ee}(h,m,w,E,F,V)}function R(){this.value=this.g=0}function G(){this.value=this.g=0}function oe(){this.G=o(5,R),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(ql,G)}function pe(h,m,w,E){e(h!=null),e(m!=null),e(2147483648>E),h.Ca=254,h.I=0,h.b=-8,h.Ka=0,h.oa=m,h.pa=w,h.Jd=m,h.Yc=w+E,h.Zc=4<=E?w+E-4+1:w,ae(h)}function ge(h,m){for(var w=0;0<m--;)w|=me(h,128)<<m;return w}function ne(h,m){var w=ge(h,m);return ue(h)?-w:w}function le(h,m,w,E){var F,V=0;for(e(h!=null),e(m!=null),e(4294967288>E),h.Sb=E,h.Ra=0,h.u=0,h.h=0,4<E&&(E=4),F=0;F<E;++F)V+=m[w+F]<<8*F;h.Ra=V,h.bb=E,h.oa=m,h.pa=w}function we(h){for(;8<=h.u&&h.bb<h.Sb;)h.Ra>>>=8,h.Ra+=h.oa[h.pa+h.bb]<<Ca-8>>>0,++h.bb,h.u-=8;Q(h)&&(h.h=1,h.u=0)}function de(h,m){if(e(0<=m),!h.h&&m<=Ji){var w=te(h)&Xi[m];return h.u+=m,we(h),w}return h.h=1,h.u=0}function U(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function W(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function te(h){return h.Ra>>>(h.u&Ca-1)>>>0}function Q(h){return e(h.bb<=h.Sb),h.h||h.bb==h.Sb&&h.u>Ca}function re(h,m){h.u=m,h.h=Q(h)}function q(h){h.u>=Bo&&(e(h.u>=Bo),we(h))}function ae(h){e(h!=null&&h.oa!=null),h.pa<h.Zc?(h.I=(h.oa[h.pa++]|h.I<<8)>>>0,h.b+=8):(e(h!=null&&h.oa!=null),h.pa<h.Yc?(h.b+=8,h.I=h.oa[h.pa++]|h.I<<8):h.Ka?h.b=0:(h.I<<=8,h.b+=8,h.Ka=1))}function ue(h){return ge(h,1)}function me(h,m){var w=h.Ca;0>h.b&&ae(h);var E=h.b,F=w*m>>>8,V=(h.I>>>E>F)+0;for(V?(w-=F,h.I-=F+1<<E>>>0):w=F+1,E=w,F=0;256<=E;)F+=8,E>>=8;return E=7^F+Pa[E],h.b-=E,h.Ca=(w<<E)-1,V}function _e(h,m,w){h[m+0]=w>>24&255,h[m+1]=w>>16&255,h[m+2]=w>>8&255,h[m+3]=255&w}function Le(h,m){return h[m+0]|h[m+1]<<8}function Te(h,m){return Le(h,m)|h[m+2]<<16}function Se(h,m){return Le(h,m)|Le(h,m+2)<<16}function K(h,m){var w=1<<m;return e(h!=null),e(0<m),h.X=s(w),h.X==null?0:(h.Mb=32-m,h.Xa=m,1)}function Ce(h,m){e(h!=null),e(m!=null),e(h.Xa==m.Xa),r(m.X,0,h.X,0,1<<m.Xa)}function it(){this.X=[],this.Xa=this.Mb=0}function He(h,m,w,E){e(w!=null),e(E!=null);var F=w[0],V=E[0];return F==0&&(F=(h*V+m/2)/m),V==0&&(V=(m*F+h/2)/h),0>=F||0>=V?0:(w[0]=F,E[0]=V,1)}function Re(h,m){return h+(1<<m)-1>>>m}function Ze(h,m){return((4278255360&h)+(4278255360&m)>>>0&4278255360)+((16711935&h)+(16711935&m)>>>0&16711935)>>>0}function $e(h,m){T[m]=function(w,E,F,V,B,H,Y){var Z;for(Z=0;Z<B;++Z){var ce=T[h](H[Y+Z-1],F,V+Z);H[Y+Z]=Ze(w[E+Z],ce)}}}function st(){this.ud=this.hd=this.jd=0}function Ae(h,m){return((4278124286&(h^m))>>>1)+(h&m)>>>0}function Mt(h){return 0<=h&&256>h?h:0>h?0:255<h?255:void 0}function gt(h,m){return Mt(h+(h-m+.5>>1))}function ze(h,m,w){return Math.abs(m-w)-Math.abs(h-w)}function lt(h,m,w,E,F,V,B){for(E=V[B-1],w=0;w<F;++w)V[B+w]=E=Ze(h[m+w],E)}function Nt(h,m,w,E,F){var V;for(V=0;V<w;++V){var B=h[m+V],H=B>>8&255,Y=16711935&(Y=(Y=16711935&B)+((H<<16)+H));E[F+V]=(4278255360&B)+Y>>>0}}function Ge(h,m){m.jd=255&h,m.hd=h>>8&255,m.ud=h>>16&255}function xt(h,m,w,E,F,V){var B;for(B=0;B<E;++B){var H=m[w+B],Y=H>>>8,Z=H,ce=255&(ce=(ce=H>>>16)+((h.jd<<24>>24)*(Y<<24>>24)>>>5));Z=255&(Z=(Z+=(h.hd<<24>>24)*(Y<<24>>24)>>>5)+((h.ud<<24>>24)*(ce<<24>>24)>>>5)),F[V+B]=(4278255360&H)+(ce<<16)+Z}}function tt(h,m,w,E,F){T[m]=function(V,B,H,Y,Z,ce,be,ee,he){for(Y=be;Y<ee;++Y)for(be=0;be<he;++be)Z[ce++]=F(H[E(V[B++])])},T[h]=function(V,B,H,Y,Z,ce,be){var ee=8>>V.b,he=V.Ea,ve=V.K[0],Ee=V.w;if(8>ee)for(V=(1<<V.b)-1,Ee=(1<<ee)-1;B<H;++B){var xe,ke=0;for(xe=0;xe<he;++xe)xe&V||(ke=E(Y[Z++])),ce[be++]=F(ve[ke&Ee]),ke>>=ee}else T["VP8LMapColor"+w](Y,Z,ve,Ee,ce,be,B,H,he)}}function Dt(h,m,w,E,F){for(w=m+w;m<w;){var V=h[m++];E[F++]=V>>16&255,E[F++]=V>>8&255,E[F++]=255&V}}function Qe(h,m,w,E,F){for(w=m+w;m<w;){var V=h[m++];E[F++]=V>>16&255,E[F++]=V>>8&255,E[F++]=255&V,E[F++]=V>>24&255}}function yt(h,m,w,E,F){for(w=m+w;m<w;){var V=(B=h[m++])>>16&240|B>>12&15,B=240&B|B>>28&15;E[F++]=V,E[F++]=B}}function ot(h,m,w,E,F){for(w=m+w;m<w;){var V=(B=h[m++])>>16&248|B>>13&7,B=B>>5&224|B>>3&31;E[F++]=V,E[F++]=B}}function $t(h,m,w,E,F){for(w=m+w;m<w;){var V=h[m++];E[F++]=255&V,E[F++]=V>>8&255,E[F++]=V>>16&255}}function Xe(h,m,w,E,F,V){if(V==0)for(w=m+w;m<w;)_e(E,((V=h[m++])[0]>>24|V[1]>>8&65280|V[2]<<8&16711680|V[3]<<24)>>>0),F+=32;else r(E,F,h,m,w)}function At(h,m){T[m][0]=T[h+"0"],T[m][1]=T[h+"1"],T[m][2]=T[h+"2"],T[m][3]=T[h+"3"],T[m][4]=T[h+"4"],T[m][5]=T[h+"5"],T[m][6]=T[h+"6"],T[m][7]=T[h+"7"],T[m][8]=T[h+"8"],T[m][9]=T[h+"9"],T[m][10]=T[h+"10"],T[m][11]=T[h+"11"],T[m][12]=T[h+"12"],T[m][13]=T[h+"13"],T[m][14]=T[h+"0"],T[m][15]=T[h+"0"]}function Ke(h){return h==Lg||h==jg||h==Sf||h==Dg}function ut(){this.eb=[],this.size=this.A=this.fb=0}function Tt(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Be(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new ut,this.f.kb=new Tt,this.sd=null}function Ye(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function ht(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Jn(h){return alert("todo:WebPSamplerProcessPlane"),h.T}function Bt(h,m){var w=h.T,E=m.ba.f.RGBA,F=E.eb,V=E.fb+h.ka*E.A,B=Is[m.ba.S],H=h.y,Y=h.O,Z=h.f,ce=h.N,be=h.ea,ee=h.W,he=m.cc,ve=m.dc,Ee=m.Mc,xe=m.Nc,ke=h.ka,Pe=h.ka+h.T,Fe=h.U,Oe=Fe+1>>1;for(ke==0?B(H,Y,null,null,Z,ce,be,ee,Z,ce,be,ee,F,V,null,null,Fe):(B(m.ec,m.fc,H,Y,he,ve,Ee,xe,Z,ce,be,ee,F,V-E.A,F,V,Fe),++w);ke+2<Pe;ke+=2)he=Z,ve=ce,Ee=be,xe=ee,ce+=h.Rc,ee+=h.Rc,V+=2*E.A,B(H,(Y+=2*h.fa)-h.fa,H,Y,he,ve,Ee,xe,Z,ce,be,ee,F,V-E.A,F,V,Fe);return Y+=h.fa,h.j+Pe<h.o?(r(m.ec,m.fc,H,Y,Fe),r(m.cc,m.dc,Z,ce,Oe),r(m.Mc,m.Nc,be,ee,Oe),w--):1&Pe||B(H,Y,null,null,Z,ce,be,ee,Z,ce,be,ee,F,V+E.A,null,null,Fe),w}function on(h,m,w){var E=h.F,F=[h.J];if(E!=null){var V=h.U,B=m.ba.S,H=B==Nf||B==Sf;m=m.ba.f.RGBA;var Y=[0],Z=h.ka;Y[0]=h.T,h.Kb&&(Z==0?--Y[0]:(--Z,F[0]-=h.width),h.j+h.ka+h.T==h.o&&(Y[0]=h.o-h.j-Z));var ce=m.eb;Z=m.fb+Z*m.A,h=w5(E,F[0],h.width,V,Y,ce,Z+(H?0:3),m.A),e(w==Y),h&&Ke(B)&&_h(ce,Z,H,V,Y,m.A)}return 0}function Ht(h){var m=h.ma,w=m.ba.S,E=11>w,F=w==_f||w==bf||w==Nf||w==Rg||w==12||Ke(w);if(m.memory=null,m.Ib=null,m.Jb=null,m.Nd=null,!fh(m.Oa,h,F?11:12))return 0;if(F&&Ke(w)&&As(),h.da)alert("todo:use_scaling");else{if(E){if(m.Ib=Jn,h.Kb){if(w=h.U+1>>1,m.memory=s(h.U+2*w),m.memory==null)return 0;m.ec=m.memory,m.fc=0,m.cc=m.ec,m.dc=m.fc+h.U,m.Mc=m.cc,m.Nc=m.dc+w,m.Ib=Bt,As()}}else alert("todo:EmitYUV");F&&(m.Jb=on,E&&Mi())}if(E&&!D5){for(h=0;256>h;++h)_T[h]=89858*(h-128)+Ef>>Af,ST[h]=-22014*(h-128)+Ef,NT[h]=-45773*(h-128),bT[h]=113618*(h-128)+Ef>>Af;for(h=Nh;h<Fg;++h)m=76283*(h-16)+Ef>>Af,AT[h-Nh]=Di(m,255),ET[h-Nh]=Di(m+8>>4,15);D5=1}return 1}function et(h){var m=h.ma,w=h.U,E=h.T;return e(!(1&h.ka)),0>=w||0>=E?0:(w=m.Ib(h,m),m.Jb!=null&&m.Jb(h,m,w),m.Dc+=w,1)}function Ft(h){h.ma.memory=null}function Fn(h,m,w,E){return de(h,8)!=47?0:(m[0]=de(h,14)+1,w[0]=de(h,14)+1,E[0]=de(h,1),de(h,3)!=0?0:!h.h)}function _n(h,m){if(4>h)return h+1;var w=h-2>>1;return(2+(1&h)<<w)+de(m,w)+1}function Nn(h,m){return 120<m?m-120:1<=(w=((w=aT[m-1])>>4)*h+(8-(15&w)))?w:1;var w}function zt(h,m,w){var E=te(w),F=h[m+=255&E].g-8;return 0<F&&(re(w,w.u+8),E=te(w),m+=h[m].value,m+=E&(1<<F)-1),re(w,w.u+h[m].g),h[m].value}function en(h,m,w){return w.g+=h.g,w.value+=h.value<<m>>>0,e(8>=w.g),h.g}function an(h,m,w){var E=h.xc;return e((m=E==0?0:h.vc[h.md*(w>>E)+(m>>E)])<h.Wb),h.Ya[m]}function Br(h,m,w,E){var F=h.ab,V=h.c*m,B=h.C;m=B+m;var H=w,Y=E;for(E=h.Ta,w=h.Ua;0<F--;){var Z=h.gc[F],ce=B,be=m,ee=H,he=Y,ve=(Y=E,H=w,Z.Ea);switch(e(ce<be),e(be<=Z.nc),Z.hc){case 2:lr(ee,he,(be-ce)*ve,Y,H);break;case 0:var Ee=ce,xe=be,ke=Y,Pe=H,Fe=(pt=Z).Ea;Ee==0&&(mh(ee,he,null,null,1,ke,Pe),lt(ee,he+1,0,0,Fe-1,ke,Pe+1),he+=Fe,Pe+=Fe,++Ee);for(var Oe=1<<pt.b,vt=Oe-1,at=Re(Fe,pt.b),Ut=pt.K,pt=pt.w+(Ee>>pt.b)*at;Ee<xe;){var Xt=Ut,Ir=pt,Vt=1;for(Wc(ee,he,ke,Pe-Fe,1,ke,Pe);Vt<Fe;){var mt=(Vt&~vt)+Oe;mt>Fe&&(mt=Fe),(0,yh[Xt[Ir++]>>8&15])(ee,he+ +Vt,ke,Pe+Vt-Fe,mt-Vt,ke,Pe+Vt),Vt=mt}he+=Fe,Pe+=Fe,++Ee&vt||(pt+=at)}be!=Z.nc&&r(Y,H-ve,Y,H+(be-ce-1)*ve,ve);break;case 1:for(ve=ee,xe=he,Fe=(ee=Z.Ea)-(Pe=ee&~(ke=(he=1<<Z.b)-1)),Ee=Re(ee,Z.b),Oe=Z.K,Z=Z.w+(ce>>Z.b)*Ee;ce<be;){for(vt=Oe,at=Z,Ut=new st,pt=xe+Pe,Xt=xe+ee;xe<pt;)Ge(vt[at++],Ut),vh(Ut,ve,xe,he,Y,H),xe+=he,H+=he;xe<Xt&&(Ge(vt[at++],Ut),vh(Ut,ve,xe,Fe,Y,H),xe+=Fe,H+=Fe),++ce&ke||(Z+=Ee)}break;case 3:if(ee==Y&&he==H&&0<Z.b){for(xe=Y,ee=ve=H+(be-ce)*ve-(Pe=(be-ce)*Re(Z.Ea,Z.b)),he=Y,ke=H,Ee=[],Pe=(Fe=Pe)-1;0<=Pe;--Pe)Ee[Pe]=he[ke+Pe];for(Pe=Fe-1;0<=Pe;--Pe)xe[ee+Pe]=Ee[Pe];yf(Z,ce,be,Y,ve,Y,H)}else yf(Z,ce,be,ee,he,Y,H)}H=E,Y=w}Y!=w&&r(E,w,H,Y,V)}function Lr(h,m){var w=h.V,E=h.Ba+h.c*h.C,F=m-h.C;if(e(m<=h.l.o),e(16>=F),0<F){var V=h.l,B=h.Ta,H=h.Ua,Y=V.width;if(Br(h,F,w,E),F=H=[H],e((w=h.C)<(E=m)),e(V.v<V.va),E>V.o&&(E=V.o),w<V.j){var Z=V.j-w;w=V.j,F[0]+=Z*Y}if(w>=E?w=0:(F[0]+=4*V.v,V.ka=w-V.j,V.U=V.va-V.v,V.T=E-w,w=1),w){if(H=H[0],11>(w=h.ca).S){var ce=w.f.RGBA,be=(E=w.S,F=V.U,V=V.T,Z=ce.eb,ce.A),ee=V;for(ce=ce.fb+h.Ma*ce.A;0<ee--;){var he=B,ve=H,Ee=F,xe=Z,ke=ce;switch(E){case xf:wh(he,ve,Ee,xe,ke);break;case _f:Ra(he,ve,Ee,xe,ke);break;case Lg:Ra(he,ve,Ee,xe,ke),_h(xe,ke,0,Ee,1,0);break;case E5:Hl(he,ve,Ee,xe,ke);break;case bf:Xe(he,ve,Ee,xe,ke,1);break;case jg:Xe(he,ve,Ee,xe,ke,1),_h(xe,ke,0,Ee,1,0);break;case Nf:Xe(he,ve,Ee,xe,ke,0);break;case Sf:Xe(he,ve,Ee,xe,ke,0),_h(xe,ke,1,Ee,1,0);break;case Rg:La(he,ve,Ee,xe,ke);break;case Dg:La(he,ve,Ee,xe,ke),v5(xe,ke,Ee,1,0);break;case T5:ja(he,ve,Ee,xe,ke);break;default:e(0)}H+=Y,ce+=be}h.Ma+=V}else alert("todo:EmitRescaledRowsYUVA");e(h.Ma<=w.height)}}h.C=m,e(h.C<=h.i)}function Zn(h){var m;if(0<h.ua)return 0;for(m=0;m<h.Wb;++m){var w=h.Ya[m].G,E=h.Ya[m].H;if(0<w[1][E[1]+0].g||0<w[2][E[2]+0].g||0<w[3][E[3]+0].g)return 0}return 1}function ni(h,m,w,E,F,V){if(h.Z!=0){var B=h.qd,H=h.rd;for(e(Ma[h.Z]!=null);m<w;++m)Ma[h.Z](B,H,E,F,E,F,V),B=E,H=F,F+=V;h.qd=B,h.rd=H}}function Nr(h,m){var w=h.l.ma,E=w.Z==0||w.Z==1?h.l.j:h.C;if(E=h.C<E?E:h.C,e(m<=h.l.o),m>E){var F=h.l.width,V=w.ca,B=w.tb+F*E,H=h.V,Y=h.Ba+h.c*E,Z=h.gc;e(h.ab==1),e(Z[0].hc==3),po(Z[0],E,m,H,Y,V,B),ni(w,E,m,V,B,F)}h.C=h.Ma=m}function Sr(h,m,w,E,F,V,B){var H=h.$/E,Y=h.$%E,Z=h.m,ce=h.s,be=w+h.$,ee=be;F=w+E*F;var he=w+E*V,ve=280+ce.ua,Ee=h.Pb?H:16777216,xe=0<ce.ua?ce.Wa:null,ke=ce.wc,Pe=be<he?an(ce,Y,H):null;e(h.C<V),e(he<=F);var Fe=!1;e:for(;;){for(;Fe||be<he;){var Oe=0;if(H>=Ee){var vt=be-w;e((Ee=h).Pb),Ee.wd=Ee.m,Ee.xd=vt,0<Ee.s.ua&&Ce(Ee.s.Wa,Ee.s.vb),Ee=H+cT}if(Y&ke||(Pe=an(ce,Y,H)),e(Pe!=null),Pe.Qb&&(m[be]=Pe.qb,Fe=!0),!Fe)if(q(Z),Pe.jc){Oe=Z,vt=m;var at=be,Ut=Pe.pd[te(Oe)&ql-1];e(Pe.jc),256>Ut.g?(re(Oe,Oe.u+Ut.g),vt[at]=Ut.value,Oe=0):(re(Oe,Oe.u+Ut.g-256),e(256<=Ut.value),Oe=Ut.value),Oe==0&&(Fe=!0)}else Oe=zt(Pe.G[0],Pe.H[0],Z);if(Z.h)break;if(Fe||256>Oe){if(!Fe)if(Pe.nd)m[be]=(Pe.qb|Oe<<8)>>>0;else{if(q(Z),Fe=zt(Pe.G[1],Pe.H[1],Z),q(Z),vt=zt(Pe.G[2],Pe.H[2],Z),at=zt(Pe.G[3],Pe.H[3],Z),Z.h)break;m[be]=(at<<24|Fe<<16|Oe<<8|vt)>>>0}if(Fe=!1,++be,++Y>=E&&(Y=0,++H,B!=null&&H<=V&&!(H%16)&&B(h,H),xe!=null))for(;ee<be;)Oe=m[ee++],xe.X[(506832829*Oe&4294967295)>>>xe.Mb]=Oe}else if(280>Oe){if(Oe=_n(Oe-256,Z),vt=zt(Pe.G[4],Pe.H[4],Z),q(Z),vt=Nn(E,vt=_n(vt,Z)),Z.h)break;if(be-w<vt||F-be<Oe)break e;for(at=0;at<Oe;++at)m[be+at]=m[be+at-vt];for(be+=Oe,Y+=Oe;Y>=E;)Y-=E,++H,B!=null&&H<=V&&!(H%16)&&B(h,H);if(e(be<=F),Y&ke&&(Pe=an(ce,Y,H)),xe!=null)for(;ee<be;)Oe=m[ee++],xe.X[(506832829*Oe&4294967295)>>>xe.Mb]=Oe}else{if(!(Oe<ve))break e;for(Fe=Oe-280,e(xe!=null);ee<be;)Oe=m[ee++],xe.X[(506832829*Oe&4294967295)>>>xe.Mb]=Oe;Oe=be,e(!(Fe>>>(vt=xe).Xa)),m[Oe]=vt.X[Fe],Fe=!0}Fe||e(Z.h==Q(Z))}if(h.Pb&&Z.h&&be<F)e(h.m.h),h.a=5,h.m=h.wd,h.$=h.xd,0<h.s.ua&&Ce(h.s.vb,h.s.Wa);else{if(Z.h)break e;B!=null&&B(h,H>V?V:H),h.a=0,h.$=be-w}return 1}return h.a=3,0}function hn(h){e(h!=null),h.vc=null,h.yc=null,h.Ya=null;var m=h.Wa;m!=null&&(m.X=null),h.vb=null,e(h!=null)}function Ar(){var h=new St;return h==null?null:(h.a=0,h.xb=C5,At("Predictor","VP8LPredictors"),At("Predictor","VP8LPredictors_C"),At("PredictorAdd","VP8LPredictorsAdd"),At("PredictorAdd","VP8LPredictorsAdd_C"),lr=Nt,vh=xt,wh=Dt,Ra=Qe,La=yt,ja=ot,Hl=$t,T.VP8LMapColor32b=fo,T.VP8LMapColor8b=gh,h)}function jr(h,m,w,E,F){var V=1,B=[h],H=[m],Y=E.m,Z=E.s,ce=null,be=0;e:for(;;){if(w)for(;V&&de(Y,1);){var ee=B,he=H,ve=E,Ee=1,xe=ve.m,ke=ve.gc[ve.ab],Pe=de(xe,2);if(ve.Oc&1<<Pe)V=0;else{switch(ve.Oc|=1<<Pe,ke.hc=Pe,ke.Ea=ee[0],ke.nc=he[0],ke.K=[null],++ve.ab,e(4>=ve.ab),Pe){case 0:case 1:ke.b=de(xe,3)+2,Ee=jr(Re(ke.Ea,ke.b),Re(ke.nc,ke.b),0,ve,ke.K),ke.K=ke.K[0];break;case 3:var Fe,Oe=de(xe,8)+1,vt=16<Oe?0:4<Oe?1:2<Oe?2:3;if(ee[0]=Re(ke.Ea,vt),ke.b=vt,Fe=Ee=jr(Oe,1,0,ve,ke.K)){var at,Ut=Oe,pt=ke,Xt=1<<(8>>pt.b),Ir=s(Xt);if(Ir==null)Fe=0;else{var Vt=pt.K[0],mt=pt.w;for(Ir[0]=pt.K[0][0],at=1;at<1*Ut;++at)Ir[at]=Ze(Vt[mt+at],Ir[at-1]);for(;at<4*Xt;++at)Ir[at]=0;pt.K[0]=null,pt.K[0]=Ir,Fe=1}}Ee=Fe;break;case 2:break;default:e(0)}V=Ee}}if(B=B[0],H=H[0],V&&de(Y,1)&&!(V=1<=(be=de(Y,4))&&11>=be)){E.a=3;break e}var We;if(We=V)t:{var ur,Ot,tn,Ln=E,Wr=B,Ni=H,nr=be,ii=w,Si=Ln.m,kr=Ln.s,rn=[null],pn=1,rr=0,mn=lT[nr];n:for(;;){if(ii&&de(Si,1)){var $r=de(Si,3)+2,zs=Re(Wr,$r),hr=Re(Ni,$r),Fi=zs*hr;if(!jr(zs,hr,0,Ln,rn))break n;for(rn=rn[0],kr.xc=$r,ur=0;ur<Fi;++ur){var En=rn[ur]>>8&65535;rn[ur]=En,En>=pn&&(pn=En+1)}}if(Si.h)break n;for(Ot=0;5>Ot;++Ot){var Cr=I5[Ot];!Ot&&0<nr&&(Cr+=1<<nr),rr<Cr&&(rr=Cr)}var es=o(pn*mn,R),Ai=pn,ts=o(Ai,oe);if(ts==null)var ns=null;else e(65536>=Ai),ns=ts;var Ui=s(rr);if(ns==null||Ui==null||es==null){Ln.a=1;break n}var rs=es;for(ur=tn=0;ur<pn;++ur){var Pn=ns[ur],is=Pn.G,qs=Pn.H,$l=0,Ho=1,Gr=0;for(Ot=0;5>Ot;++Ot){Cr=I5[Ot],is[Ot]=rs,qs[Ot]=tn,!Ot&&0<nr&&(Cr+=1<<nr);i:{var If,Ug=Cr,kf=Ln,Sh=Ui,kT=rs,CT=tn,Vg=0,Fa=kf.m,PT=de(Fa,1);if(i(Sh,0,0,Ug),PT){var RT=de(Fa,1)+1,LT=de(Fa,1),F5=de(Fa,LT==0?1:8);Sh[F5]=1,RT==2&&(Sh[F5=de(Fa,8)]=1);var Cf=1}else{var U5=s(19),V5=de(Fa,4)+4;if(19<V5){kf.a=3;var Pf=0;break i}for(If=0;If<V5;++If)U5[oT[If]]=de(Fa,3);var Bg=void 0,Ah=void 0,B5=kf,jT=U5,Rf=Ug,z5=Sh,zg=0,Ua=B5.m,q5=8,H5=o(128,R);r:for(;I(H5,0,7,jT,19);){if(de(Ua,1)){var DT=2+2*de(Ua,3);if((Bg=2+de(Ua,DT))>Rf)break r}else Bg=Rf;for(Ah=0;Ah<Rf&&Bg--;){q(Ua);var W5=H5[0+(127&te(Ua))];re(Ua,Ua.u+W5.g);var Gc=W5.value;if(16>Gc)z5[Ah++]=Gc,Gc!=0&&(q5=Gc);else{var OT=Gc==16,$5=Gc-16,MT=iT[$5],G5=de(Ua,rT[$5])+MT;if(Ah+G5>Rf)break r;for(var FT=OT?q5:0;0<G5--;)z5[Ah++]=FT}}zg=1;break r}zg||(B5.a=3),Cf=zg}(Cf=Cf&&!Fa.h)&&(Vg=I(kT,CT,8,Sh,Ug)),Cf&&Vg!=0?Pf=Vg:(kf.a=3,Pf=0)}if(Pf==0)break n;if(Ho&&sT[Ot]==1&&(Ho=rs[tn].g==0),$l+=rs[tn].g,tn+=Pf,3>=Ot){var Eh,qg=Ui[0];for(Eh=1;Eh<Cr;++Eh)Ui[Eh]>qg&&(qg=Ui[Eh]);Gr+=qg}}if(Pn.nd=Ho,Pn.Qb=0,Ho&&(Pn.qb=(is[3][qs[3]+0].value<<24|is[1][qs[1]+0].value<<16|is[2][qs[2]+0].value)>>>0,$l==0&&256>is[0][qs[0]+0].value&&(Pn.Qb=1,Pn.qb+=is[0][qs[0]+0].value<<8)),Pn.jc=!Pn.Qb&&6>Gr,Pn.jc){var Lf,Wo=Pn;for(Lf=0;Lf<ql;++Lf){var Va=Lf,Ba=Wo.pd[Va],jf=Wo.G[0][Wo.H[0]+Va];256<=jf.value?(Ba.g=jf.g+256,Ba.value=jf.value):(Ba.g=0,Ba.value=0,Va>>=en(jf,8,Ba),Va>>=en(Wo.G[1][Wo.H[1]+Va],16,Ba),Va>>=en(Wo.G[2][Wo.H[2]+Va],0,Ba),en(Wo.G[3][Wo.H[3]+Va],24,Ba))}}}kr.vc=rn,kr.Wb=pn,kr.Ya=ns,kr.yc=es,We=1;break t}We=0}if(!(V=We)){E.a=3;break e}if(0<be){if(Z.ua=1<<be,!K(Z.Wa,be)){E.a=1,V=0;break e}}else Z.ua=0;var Hg=E,K5=B,UT=H,Wg=Hg.s,$g=Wg.xc;if(Hg.c=K5,Hg.i=UT,Wg.md=Re(K5,$g),Wg.wc=$g==0?-1:(1<<$g)-1,w){E.xb=gT;break e}if((ce=s(B*H))==null){E.a=1,V=0;break e}V=(V=Sr(E,ce,0,B,H,H,null))&&!Y.h;break e}return V?(F!=null?F[0]=ce:(e(ce==null),e(w)),E.$=0,w||hn(Z)):hn(Z),V}function zr(h,m){var w=h.c*h.i,E=w+m+16*m;return e(h.c<=m),h.V=s(E),h.V==null?(h.Ta=null,h.Ua=0,h.a=1,0):(h.Ta=h.V,h.Ua=h.Ba+w+m,1)}function xi(h,m){var w=h.C,E=m-w,F=h.V,V=h.Ba+h.c*w;for(e(m<=h.l.o);0<E;){var B=16<E?16:E,H=h.l.ma,Y=h.l.width,Z=Y*B,ce=H.ca,be=H.tb+Y*w,ee=h.Ta,he=h.Ua;Br(h,B,F,V),x5(ee,he,ce,be,Z),ni(H,w,w+B,ce,be,Y),E-=B,F+=B*h.c,w+=B}e(w==m),h.C=h.Ma=m}function gs(){this.ub=this.yd=this.td=this.Rb=0}function jo(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function oh(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function oo(){this.Yb=function(){var h=[];return function m(w,E,F){for(var V=F[E],B=0;B<V&&(w.push(F.length>E+1?[]:0),!(F.length<E+1));B++)m(w[B],E+1,F)}(h,0,[3,11]),h}()}function Rl(){this.jb=s(3),this.Wc=a([4,8],oo),this.Xc=a([4,17],oo)}function _a(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function Dr(){this.ld=this.La=this.dd=this.tc=0}function Ki(){this.Na=this.la=0}function ba(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Ll(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function jl(){this.uc=this.M=this.Nb=0,this.wa=Array(new Dr),this.Y=0,this.ya=Array(new Ll),this.aa=0,this.l=new ao}function Dl(){this.y=s(16),this.f=s(8),this.ea=s(8)}function Ol(){this.cb=this.a=0,this.sc="",this.m=new U,this.Od=new gs,this.Kc=new jo,this.ed=new _a,this.Qa=new oh,this.Ic=this.$c=this.Aa=0,this.D=new jl,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,U),this.ia=0,this.pb=o(4,ba),this.Pa=new Rl,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Dl),this.Hd=0,this.rb=Array(new Ki),this.sb=0,this.wa=Array(new Dr),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Ll),this.L=this.aa=0,this.gd=a([4,2],Dr),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Di(h,m){return 0>h?0:h>m?m:h}function ao(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Mc(){var h=new Ol;return h!=null&&(h.a=0,h.sc="OK",h.cb=0,h.Xb=0,bh||(bh=Do)),h}function zn(h,m,w){return h.a==0&&(h.a=m,h.sc=w,h.cb=0),0}function Fc(h,m,w){return 3<=w&&h[m+0]==157&&h[m+1]==1&&h[m+2]==42}function ys(h,m){if(h==null)return 0;if(h.a=0,h.sc="OK",m==null)return zn(h,2,"null VP8Io passed to VP8GetHeaders()");var w=m.data,E=m.w,F=m.ha;if(4>F)return zn(h,7,"Truncated header.");var V=w[E+0]|w[E+1]<<8|w[E+2]<<16,B=h.Od;if(B.Rb=!(1&V),B.td=V>>1&7,B.yd=V>>4&1,B.ub=V>>5,3<B.td)return zn(h,3,"Incorrect keyframe parameters.");if(!B.yd)return zn(h,4,"Frame not displayable.");E+=3,F-=3;var H=h.Kc;if(B.Rb){if(7>F)return zn(h,7,"cannot parse picture header");if(!Fc(w,E,F))return zn(h,3,"Bad code word");H.c=16383&(w[E+4]<<8|w[E+3]),H.Td=w[E+4]>>6,H.i=16383&(w[E+6]<<8|w[E+5]),H.Ud=w[E+6]>>6,E+=7,F-=7,h.za=H.c+15>>4,h.Ub=H.i+15>>4,m.width=H.c,m.height=H.i,m.Da=0,m.j=0,m.v=0,m.va=m.width,m.o=m.height,m.da=0,m.ib=m.width,m.hb=m.height,m.U=m.width,m.T=m.height,i((V=h.Pa).jb,0,255,V.jb.length),e((V=h.Qa)!=null),V.Cb=0,V.Bb=0,V.Fb=1,i(V.Zb,0,0,V.Zb.length),i(V.Lb,0,0,V.Lb)}if(B.ub>F)return zn(h,7,"bad partition length");pe(V=h.m,w,E,B.ub),E+=B.ub,F-=B.ub,B.Rb&&(H.Ld=ue(V),H.Kd=ue(V)),H=h.Qa;var Y,Z=h.Pa;if(e(V!=null),e(H!=null),H.Cb=ue(V),H.Cb){if(H.Bb=ue(V),ue(V)){for(H.Fb=ue(V),Y=0;4>Y;++Y)H.Zb[Y]=ue(V)?ne(V,7):0;for(Y=0;4>Y;++Y)H.Lb[Y]=ue(V)?ne(V,6):0}if(H.Bb)for(Y=0;3>Y;++Y)Z.jb[Y]=ue(V)?ge(V,8):255}else H.Bb=0;if(V.Ka)return zn(h,3,"cannot parse segment header");if((H=h.ed).zd=ue(V),H.Tb=ge(V,6),H.wb=ge(V,3),H.Pc=ue(V),H.Pc&&ue(V)){for(Z=0;4>Z;++Z)ue(V)&&(H.vd[Z]=ne(V,6));for(Z=0;4>Z;++Z)ue(V)&&(H.od[Z]=ne(V,6))}if(h.L=H.Tb==0?0:H.zd?1:2,V.Ka)return zn(h,3,"cannot parse filter header");var ce=F;if(F=Y=E,E=Y+ce,H=ce,h.Xb=(1<<ge(h.m,2))-1,ce<3*(Z=h.Xb))w=7;else{for(Y+=3*Z,H-=3*Z,ce=0;ce<Z;++ce){var be=w[F+0]|w[F+1]<<8|w[F+2]<<16;be>H&&(be=H),pe(h.Jc[+ce],w,Y,be),Y+=be,H-=be,F+=3}pe(h.Jc[+Z],w,Y,H),w=Y<E?0:5}if(w!=0)return zn(h,w,"cannot parse partitions");for(w=ge(Y=h.m,7),F=ue(Y)?ne(Y,4):0,E=ue(Y)?ne(Y,4):0,H=ue(Y)?ne(Y,4):0,Z=ue(Y)?ne(Y,4):0,Y=ue(Y)?ne(Y,4):0,ce=h.Qa,be=0;4>be;++be){if(ce.Cb){var ee=ce.Zb[be];ce.Fb||(ee+=w)}else{if(0<be){h.pb[be]=h.pb[0];continue}ee=w}var he=h.pb[be];he.Sc[0]=Og[Di(ee+F,127)],he.Sc[1]=Mg[Di(ee+0,127)],he.Eb[0]=2*Og[Di(ee+E,127)],he.Eb[1]=101581*Mg[Di(ee+H,127)]>>16,8>he.Eb[1]&&(he.Eb[1]=8),he.Qc[0]=Og[Di(ee+Z,117)],he.Qc[1]=Mg[Di(ee+Y,127)],he.lc=ee+Y}if(!B.Rb)return zn(h,4,"Not a key frame.");for(ue(V),B=h.Pa,w=0;4>w;++w){for(F=0;8>F;++F)for(E=0;3>E;++E)for(H=0;11>H;++H)Z=me(V,pT[w][F][E][H])?ge(V,8):dT[w][F][E][H],B.Wc[w][F].Yb[E][H]=Z;for(F=0;17>F;++F)B.Xc[w][F]=B.Wc[w][mT[F]]}return h.kc=ue(V),h.kc&&(h.Bd=ge(V,8)),h.cb=1}function Do(h,m,w,E,F,V,B){var H=m[F].Yb[w];for(w=0;16>F;++F){if(!me(h,H[w+0]))return F;for(;!me(h,H[w+1]);)if(H=m[++F].Yb[0],w=0,F==16)return 16;var Y=m[F+1].Yb;if(me(h,H[w+2])){var Z=h,ce=0;if(me(Z,(ee=H)[(be=w)+3]))if(me(Z,ee[be+6])){for(H=0,be=2*(ce=me(Z,ee[be+8]))+(ee=me(Z,ee[be+9+ce])),ce=0,ee=uT[be];ee[H];++H)ce+=ce+me(Z,ee[H]);ce+=3+(8<<be)}else me(Z,ee[be+7])?(ce=7+2*me(Z,165),ce+=me(Z,145)):ce=5+me(Z,159);else ce=me(Z,ee[be+4])?3+me(Z,ee[be+5]):2;H=Y[2]}else ce=1,H=Y[1];Y=B+hT[F],0>(Z=h).b&&ae(Z);var be,ee=Z.b,he=(be=Z.Ca>>1)-(Z.I>>ee)>>31;--Z.b,Z.Ca+=he,Z.Ca|=1,Z.I-=(be+1&he)<<ee,V[Y]=((ce^he)-he)*E[(0<F)+0]}return 16}function Ml(h){var m=h.rb[h.sb-1];m.la=0,m.Na=0,i(h.zc,0,0,h.zc.length),h.ja=0}function Oi(h,m,w,E,F){F=h[m+w+32*E]+(F>>3),h[m+w+32*E]=-256&F?0>F?0:255:F}function Sn(h,m,w,E,F,V){Oi(h,m,0,w,E+F),Oi(h,m,1,w,E+V),Oi(h,m,2,w,E-V),Oi(h,m,3,w,E-F)}function Er(h){return(20091*h>>16)+h}function Oo(h,m,w,E){var F,V=0,B=s(16);for(F=0;4>F;++F){var H=h[m+0]+h[m+8],Y=h[m+0]-h[m+8],Z=(35468*h[m+4]>>16)-Er(h[m+12]),ce=Er(h[m+4])+(35468*h[m+12]>>16);B[V+0]=H+ce,B[V+1]=Y+Z,B[V+2]=Y-Z,B[V+3]=H-ce,V+=4,m++}for(F=V=0;4>F;++F)H=(h=B[V+0]+4)+B[V+8],Y=h-B[V+8],Z=(35468*B[V+4]>>16)-Er(B[V+12]),Oi(w,E,0,0,H+(ce=Er(B[V+4])+(35468*B[V+12]>>16))),Oi(w,E,1,0,Y+Z),Oi(w,E,2,0,Y-Z),Oi(w,E,3,0,H-ce),V++,E+=32}function Na(h,m,w,E){var F=h[m+0]+4,V=35468*h[m+4]>>16,B=Er(h[m+4]),H=35468*h[m+1]>>16;Sn(w,E,0,F+B,h=Er(h[m+1]),H),Sn(w,E,1,F+V,h,H),Sn(w,E,2,F-V,h,H),Sn(w,E,3,F-B,h,H)}function Uc(h,m,w,E,F){Oo(h,m,w,E),F&&Oo(h,m+16,w,E+4)}function Gt(h,m,w,E){Wl(h,m+0,w,E,1),Wl(h,m+32,w,E+128,1)}function Mo(h,m,w,E){var F;for(h=h[m+0]+4,F=0;4>F;++F)for(m=0;4>m;++m)Oi(w,E,m,F,h)}function lo(h,m,w,E){h[m+0]&&dn(h,m+0,w,E),h[m+16]&&dn(h,m+16,w,E+4),h[m+32]&&dn(h,m+32,w,E+128),h[m+48]&&dn(h,m+48,w,E+128+4)}function vs(h,m,w,E){var F,V=s(16);for(F=0;4>F;++F){var B=h[m+0+F]+h[m+12+F],H=h[m+4+F]+h[m+8+F],Y=h[m+4+F]-h[m+8+F],Z=h[m+0+F]-h[m+12+F];V[0+F]=B+H,V[8+F]=B-H,V[4+F]=Z+Y,V[12+F]=Z-Y}for(F=0;4>F;++F)B=(h=V[0+4*F]+3)+V[3+4*F],H=V[1+4*F]+V[2+4*F],Y=V[1+4*F]-V[2+4*F],Z=h-V[3+4*F],w[E+0]=B+H>>3,w[E+16]=Z+Y>>3,w[E+32]=B-H>>3,w[E+48]=Z-Y>>3,E+=64}function Fo(h,m,w){var E,F=m-32,V=Zi,B=255-h[F-1];for(E=0;E<w;++E){var H,Y=V,Z=B+h[m-1];for(H=0;H<w;++H)h[m+H]=Y[Z+h[F+H]];m+=32}}function Vc(h,m){Fo(h,m,4)}function ah(h,m){Fo(h,m,8)}function lh(h,m){Fo(h,m,16)}function Fl(h,m){var w;for(w=0;16>w;++w)r(h,m+32*w,h,m-32,16)}function Bc(h,m){var w;for(w=16;0<w;--w)i(h,m,h[m-1],16),m+=32}function qr(h,m,w){var E;for(E=0;16>E;++E)i(m,w+32*E,h,16)}function ws(h,m){var w,E=16;for(w=0;16>w;++w)E+=h[m-1+32*w]+h[m+w-32];qr(E>>5,h,m)}function co(h,m){var w,E=8;for(w=0;16>w;++w)E+=h[m-1+32*w];qr(E>>4,h,m)}function Sa(h,m){var w,E=8;for(w=0;16>w;++w)E+=h[m+w-32];qr(E>>4,h,m)}function zc(h,m){qr(128,h,m)}function bt(h,m,w){return h+2*m+w+2>>2}function ch(h,m){var w,E=m-32;for(E=new Uint8Array([bt(h[E-1],h[E+0],h[E+1]),bt(h[E+0],h[E+1],h[E+2]),bt(h[E+1],h[E+2],h[E+3]),bt(h[E+2],h[E+3],h[E+4])]),w=0;4>w;++w)r(h,m+32*w,E,0,E.length)}function uh(h,m){var w=h[m-1],E=h[m-1+32],F=h[m-1+64],V=h[m-1+96];_e(h,m+0,16843009*bt(h[m-1-32],w,E)),_e(h,m+32,16843009*bt(w,E,F)),_e(h,m+64,16843009*bt(E,F,V)),_e(h,m+96,16843009*bt(F,V,V))}function hh(h,m){var w,E=4;for(w=0;4>w;++w)E+=h[m+w-32]+h[m-1+32*w];for(E>>=3,w=0;4>w;++w)i(h,m+32*w,E,4)}function Or(h,m){var w=h[m-1+0],E=h[m-1+32],F=h[m-1+64],V=h[m-1-32],B=h[m+0-32],H=h[m+1-32],Y=h[m+2-32],Z=h[m+3-32];h[m+0+96]=bt(E,F,h[m-1+96]),h[m+1+96]=h[m+0+64]=bt(w,E,F),h[m+2+96]=h[m+1+64]=h[m+0+32]=bt(V,w,E),h[m+3+96]=h[m+2+64]=h[m+1+32]=h[m+0+0]=bt(B,V,w),h[m+3+64]=h[m+2+32]=h[m+1+0]=bt(H,B,V),h[m+3+32]=h[m+2+0]=bt(Y,H,B),h[m+3+0]=bt(Z,Y,H)}function Fs(h,m){var w=h[m+1-32],E=h[m+2-32],F=h[m+3-32],V=h[m+4-32],B=h[m+5-32],H=h[m+6-32],Y=h[m+7-32];h[m+0+0]=bt(h[m+0-32],w,E),h[m+1+0]=h[m+0+32]=bt(w,E,F),h[m+2+0]=h[m+1+32]=h[m+0+64]=bt(E,F,V),h[m+3+0]=h[m+2+32]=h[m+1+64]=h[m+0+96]=bt(F,V,B),h[m+3+32]=h[m+2+64]=h[m+1+96]=bt(V,B,H),h[m+3+64]=h[m+2+96]=bt(B,H,Y),h[m+3+96]=bt(H,Y,Y)}function dh(h,m){var w=h[m-1+0],E=h[m-1+32],F=h[m-1+64],V=h[m-1-32],B=h[m+0-32],H=h[m+1-32],Y=h[m+2-32],Z=h[m+3-32];h[m+0+0]=h[m+1+64]=V+B+1>>1,h[m+1+0]=h[m+2+64]=B+H+1>>1,h[m+2+0]=h[m+3+64]=H+Y+1>>1,h[m+3+0]=Y+Z+1>>1,h[m+0+96]=bt(F,E,w),h[m+0+64]=bt(E,w,V),h[m+0+32]=h[m+1+96]=bt(w,V,B),h[m+1+32]=h[m+2+96]=bt(V,B,H),h[m+2+32]=h[m+3+96]=bt(B,H,Y),h[m+3+32]=bt(H,Y,Z)}function Aa(h,m){var w=h[m+0-32],E=h[m+1-32],F=h[m+2-32],V=h[m+3-32],B=h[m+4-32],H=h[m+5-32],Y=h[m+6-32],Z=h[m+7-32];h[m+0+0]=w+E+1>>1,h[m+1+0]=h[m+0+64]=E+F+1>>1,h[m+2+0]=h[m+1+64]=F+V+1>>1,h[m+3+0]=h[m+2+64]=V+B+1>>1,h[m+0+32]=bt(w,E,F),h[m+1+32]=h[m+0+96]=bt(E,F,V),h[m+2+32]=h[m+1+96]=bt(F,V,B),h[m+3+32]=h[m+2+96]=bt(V,B,H),h[m+3+64]=bt(B,H,Y),h[m+3+96]=bt(H,Y,Z)}function Us(h,m){var w=h[m-1+0],E=h[m-1+32],F=h[m-1+64],V=h[m-1+96];h[m+0+0]=w+E+1>>1,h[m+2+0]=h[m+0+32]=E+F+1>>1,h[m+2+32]=h[m+0+64]=F+V+1>>1,h[m+1+0]=bt(w,E,F),h[m+3+0]=h[m+1+32]=bt(E,F,V),h[m+3+32]=h[m+1+64]=bt(F,V,V),h[m+3+64]=h[m+2+64]=h[m+0+96]=h[m+1+96]=h[m+2+96]=h[m+3+96]=V}function Ea(h,m){var w=h[m-1+0],E=h[m-1+32],F=h[m-1+64],V=h[m-1+96],B=h[m-1-32],H=h[m+0-32],Y=h[m+1-32],Z=h[m+2-32];h[m+0+0]=h[m+2+32]=w+B+1>>1,h[m+0+32]=h[m+2+64]=E+w+1>>1,h[m+0+64]=h[m+2+96]=F+E+1>>1,h[m+0+96]=V+F+1>>1,h[m+3+0]=bt(H,Y,Z),h[m+2+0]=bt(B,H,Y),h[m+1+0]=h[m+3+32]=bt(w,B,H),h[m+1+32]=h[m+3+64]=bt(E,w,B),h[m+1+64]=h[m+3+96]=bt(F,E,w),h[m+1+96]=bt(V,F,E)}function Yi(h,m){var w;for(w=0;8>w;++w)r(h,m+32*w,h,m-32,8)}function Uo(h,m){var w;for(w=0;8>w;++w)i(h,m,h[m-1],8),m+=32}function xs(h,m,w){var E;for(E=0;8>E;++E)i(m,w+32*E,h,8)}function Ul(h,m){var w,E=8;for(w=0;8>w;++w)E+=h[m+w-32]+h[m-1+32*w];xs(E>>4,h,m)}function bn(h,m){var w,E=4;for(w=0;8>w;++w)E+=h[m+w-32];xs(E>>3,h,m)}function Vl(h,m){var w,E=4;for(w=0;8>w;++w)E+=h[m-1+32*w];xs(E>>3,h,m)}function qc(h,m){xs(128,h,m)}function _s(h,m,w){var E=h[m-w],F=h[m+0],V=3*(F-E)+Pg[1020+h[m-2*w]-h[m+w]],B=wf[112+(V+4>>3)];h[m-w]=Zi[255+E+wf[112+(V+3>>3)]],h[m+0]=Zi[255+F-B]}function Ta(h,m,w,E){var F=h[m+0],V=h[m+w];return Ts[255+h[m-2*w]-h[m-w]]>E||Ts[255+V-F]>E}function Vo(h,m,w,E){return 4*Ts[255+h[m-w]-h[m+0]]+Ts[255+h[m-2*w]-h[m+w]]<=E}function uo(h,m,w,E,F){var V=h[m-3*w],B=h[m-2*w],H=h[m-w],Y=h[m+0],Z=h[m+w],ce=h[m+2*w],be=h[m+3*w];return 4*Ts[255+H-Y]+Ts[255+B-Z]>E?0:Ts[255+h[m-4*w]-V]<=F&&Ts[255+V-B]<=F&&Ts[255+B-H]<=F&&Ts[255+be-ce]<=F&&Ts[255+ce-Z]<=F&&Ts[255+Z-Y]<=F}function ho(h,m,w,E){var F=2*E+1;for(E=0;16>E;++E)Vo(h,m+E,w,F)&&_s(h,m+E,w)}function _i(h,m,w,E){var F=2*E+1;for(E=0;16>E;++E)Vo(h,m+E*w,1,F)&&_s(h,m+E*w,1)}function Bl(h,m,w,E){var F;for(F=3;0<F;--F)ho(h,m+=4*w,w,E)}function Hc(h,m,w,E){var F;for(F=3;0<F;--F)_i(h,m+=4,w,E)}function bi(h,m,w,E,F,V,B,H){for(V=2*V+1;0<F--;){if(uo(h,m,w,V,B))if(Ta(h,m,w,H))_s(h,m,w);else{var Y=h,Z=m,ce=w,be=Y[Z-2*ce],ee=Y[Z-ce],he=Y[Z+0],ve=Y[Z+ce],Ee=Y[Z+2*ce],xe=27*(Pe=Pg[1020+3*(he-ee)+Pg[1020+be-ve]])+63>>7,ke=18*Pe+63>>7,Pe=9*Pe+63>>7;Y[Z-3*ce]=Zi[255+Y[Z-3*ce]+Pe],Y[Z-2*ce]=Zi[255+be+ke],Y[Z-ce]=Zi[255+ee+xe],Y[Z+0]=Zi[255+he-xe],Y[Z+ce]=Zi[255+ve-ke],Y[Z+2*ce]=Zi[255+Ee-Pe]}m+=E}}function bs(h,m,w,E,F,V,B,H){for(V=2*V+1;0<F--;){if(uo(h,m,w,V,B))if(Ta(h,m,w,H))_s(h,m,w);else{var Y=h,Z=m,ce=w,be=Y[Z-ce],ee=Y[Z+0],he=Y[Z+ce],ve=wf[112+(4+(Ee=3*(ee-be))>>3)],Ee=wf[112+(Ee+3>>3)],xe=ve+1>>1;Y[Z-2*ce]=Zi[255+Y[Z-2*ce]+xe],Y[Z-ce]=Zi[255+be+Ee],Y[Z+0]=Zi[255+ee-ve],Y[Z+ce]=Zi[255+he-xe]}m+=E}}function Ia(h,m,w,E,F,V){bi(h,m,w,1,16,E,F,V)}function Ns(h,m,w,E,F,V){bi(h,m,1,w,16,E,F,V)}function zl(h,m,w,E,F,V){var B;for(B=3;0<B;--B)bs(h,m+=4*w,w,1,16,E,F,V)}function v(h,m,w,E,F,V){var B;for(B=3;0<B;--B)bs(h,m+=4,1,w,16,E,F,V)}function O(h,m,w,E,F,V,B,H){bi(h,m,F,1,8,V,B,H),bi(w,E,F,1,8,V,B,H)}function J(h,m,w,E,F,V,B,H){bi(h,m,1,F,8,V,B,H),bi(w,E,1,F,8,V,B,H)}function ie(h,m,w,E,F,V,B,H){bs(h,m+4*F,F,1,8,V,B,H),bs(w,E+4*F,F,1,8,V,B,H)}function fe(h,m,w,E,F,V,B,H){bs(h,m+4,1,F,8,V,B,H),bs(w,E+4,1,F,8,V,B,H)}function Ie(){this.ba=new Be,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new ht,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function De(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function nt(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function dt(){this.ua=0,this.Wa=new it,this.vb=new it,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new oe,this.yc=new R}function St(){this.xb=this.a=0,this.l=new ao,this.ca=new Be,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new W,this.Pb=0,this.wd=new W,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new dt,this.ab=0,this.gc=o(4,nt),this.Oc=0}function Ct(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new ao,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Kt(h,m,w,E,F,V,B){for(h=h==null?0:h[m+0],m=0;m<B;++m)F[V+m]=h+w[E+m]&255,h=F[V+m]}function un(h,m,w,E,F,V,B){var H;if(h==null)Kt(null,null,w,E,F,V,B);else for(H=0;H<B;++H)F[V+H]=h[m+H]+w[E+H]&255}function qn(h,m,w,E,F,V,B){if(h==null)Kt(null,null,w,E,F,V,B);else{var H,Y=h[m+0],Z=Y,ce=Y;for(H=0;H<B;++H)Z=ce+(Y=h[m+H])-Z,ce=w[E+H]+(-256&Z?0>Z?0:255:Z)&255,Z=Y,F[V+H]=ce}}function fn(h,m,w,E){var F=m.width,V=m.o;if(e(h!=null&&m!=null),0>w||0>=E||w+E>V)return null;if(!h.Cc){if(h.ga==null){var B;if(h.ga=new Ct,(B=h.ga==null)||(B=m.width*m.o,e(h.Gb.length==0),h.Gb=s(B),h.Uc=0,h.Gb==null?B=0:(h.mb=h.Gb,h.nb=h.Uc,h.rc=null,B=1),B=!B),!B){B=h.ga;var H=h.Fa,Y=h.P,Z=h.qc,ce=h.mb,be=h.nb,ee=Y+1,he=Z-1,ve=B.l;if(e(H!=null&&ce!=null&&m!=null),Ma[0]=null,Ma[1]=Kt,Ma[2]=un,Ma[3]=qn,B.ca=ce,B.tb=be,B.c=m.width,B.i=m.height,e(0<B.c&&0<B.i),1>=Z)m=0;else if(B.$a=3&H[Y+0],B.Z=H[Y+0]>>2&3,B.Lc=H[Y+0]>>4&3,Y=H[Y+0]>>6&3,0>B.$a||1<B.$a||4<=B.Z||1<B.Lc||Y)m=0;else if(ve.put=et,ve.ac=Ht,ve.bc=Ft,ve.ma=B,ve.width=m.width,ve.height=m.height,ve.Da=m.Da,ve.v=m.v,ve.va=m.va,ve.j=m.j,ve.o=m.o,B.$a)e:{e(B.$a==1),m=Ar();t:for(;;){if(m==null){m=0;break e}if(e(B!=null),B.mc=m,m.c=B.c,m.i=B.i,m.l=B.l,m.l.ma=B,m.l.width=B.c,m.l.height=B.i,m.a=0,le(m.m,H,ee,he),!jr(B.c,B.i,1,m,null)||(m.ab==1&&m.gc[0].hc==3&&Zn(m.s)?(B.ic=1,H=m.c*m.i,m.Ta=null,m.Ua=0,m.V=s(H),m.Ba=0,m.V==null?(m.a=1,m=0):m=1):(B.ic=0,m=zr(m,B.c)),!m))break t;m=1;break e}B.mc=null,m=0}else m=he>=B.c*B.i;B=!m}if(B)return null;h.ga.Lc!=1?h.Ga=0:E=V-w}e(h.ga!=null),e(w+E<=V);e:{if(m=(H=h.ga).c,V=H.l.o,H.$a==0){if(ee=h.rc,he=h.Vc,ve=h.Fa,Y=h.P+1+w*m,Z=h.mb,ce=h.nb+w*m,e(Y<=h.P+h.qc),H.Z!=0)for(e(Ma[H.Z]!=null),B=0;B<E;++B)Ma[H.Z](ee,he,ve,Y,Z,ce,m),ee=Z,he=ce,ce+=m,Y+=m;else for(B=0;B<E;++B)r(Z,ce,ve,Y,m),ee=Z,he=ce,ce+=m,Y+=m;h.rc=ee,h.Vc=he}else{if(e(H.mc!=null),m=w+E,e((B=H.mc)!=null),e(m<=B.i),B.C>=m)m=1;else if(H.ic||Mi(),H.ic){H=B.V,ee=B.Ba,he=B.c;var Ee=B.i,xe=(ve=1,Y=B.$/he,Z=B.$%he,ce=B.m,be=B.s,B.$),ke=he*Ee,Pe=he*m,Fe=be.wc,Oe=xe<Pe?an(be,Z,Y):null;e(xe<=ke),e(m<=Ee),e(Zn(be));t:for(;;){for(;!ce.h&&xe<Pe;){if(Z&Fe||(Oe=an(be,Z,Y)),e(Oe!=null),q(ce),256>(Ee=zt(Oe.G[0],Oe.H[0],ce)))H[ee+xe]=Ee,++xe,++Z>=he&&(Z=0,++Y<=m&&!(Y%16)&&Nr(B,Y));else{if(!(280>Ee)){ve=0;break t}Ee=_n(Ee-256,ce);var vt,at=zt(Oe.G[4],Oe.H[4],ce);if(q(ce),!(xe>=(at=Nn(he,at=_n(at,ce)))&&ke-xe>=Ee)){ve=0;break t}for(vt=0;vt<Ee;++vt)H[ee+xe+vt]=H[ee+xe+vt-at];for(xe+=Ee,Z+=Ee;Z>=he;)Z-=he,++Y<=m&&!(Y%16)&&Nr(B,Y);xe<Pe&&Z&Fe&&(Oe=an(be,Z,Y))}e(ce.h==Q(ce))}Nr(B,Y>m?m:Y);break t}!ve||ce.h&&xe<ke?(ve=0,B.a=ce.h?5:3):B.$=xe,m=ve}else m=Sr(B,B.V,B.Ba,B.c,B.i,m,xi);if(!m){E=0;break e}}w+E>=V&&(h.Cc=1),E=1}if(!E)return null;if(h.Cc&&((E=h.ga)!=null&&(E.mc=null),h.ga=null,0<h.Ga))return alert("todo:WebPDequantizeLevels"),null}return h.nb+w*F}function er(h,m,w,E,F,V){for(;0<F--;){var B,H=h,Y=m+(w?1:0),Z=h,ce=m+(w?0:3);for(B=0;B<E;++B){var be=Z[ce+4*B];be!=255&&(be*=32897,H[Y+4*B+0]=H[Y+4*B+0]*be>>23,H[Y+4*B+1]=H[Y+4*B+1]*be>>23,H[Y+4*B+2]=H[Y+4*B+2]*be>>23)}m+=V}}function Hn(h,m,w,E,F){for(;0<E--;){var V;for(V=0;V<w;++V){var B=h[m+2*V+0],H=15&(Z=h[m+2*V+1]),Y=4369*H,Z=(240&Z|Z>>4)*Y>>16;h[m+2*V+0]=(240&B|B>>4)*Y>>16&240|(15&B|B<<4)*Y>>16>>4&15,h[m+2*V+1]=240&Z|H}m+=F}}function tr(h,m,w,E,F,V,B,H){var Y,Z,ce=255;for(Z=0;Z<F;++Z){for(Y=0;Y<E;++Y){var be=h[m+Y];V[B+4*Y]=be,ce&=be}m+=w,B+=H}return ce!=255}function Wn(h,m,w,E,F){var V;for(V=0;V<F;++V)w[E+V]=h[m+V]>>8}function Mi(){_h=er,v5=Hn,w5=tr,x5=Wn}function Ss(h,m,w){T[h]=function(E,F,V,B,H,Y,Z,ce,be,ee,he,ve,Ee,xe,ke,Pe,Fe){var Oe,vt=Fe-1>>1,at=H[Y+0]|Z[ce+0]<<16,Ut=be[ee+0]|he[ve+0]<<16;e(E!=null);var pt=3*at+Ut+131074>>2;for(m(E[F+0],255&pt,pt>>16,Ee,xe),V!=null&&(pt=3*Ut+at+131074>>2,m(V[B+0],255&pt,pt>>16,ke,Pe)),Oe=1;Oe<=vt;++Oe){var Xt=H[Y+Oe]|Z[ce+Oe]<<16,Ir=be[ee+Oe]|he[ve+Oe]<<16,Vt=at+Xt+Ut+Ir+524296,mt=Vt+2*(Xt+Ut)>>3;pt=mt+at>>1,at=(Vt=Vt+2*(at+Ir)>>3)+Xt>>1,m(E[F+2*Oe-1],255&pt,pt>>16,Ee,xe+(2*Oe-1)*w),m(E[F+2*Oe-0],255&at,at>>16,Ee,xe+(2*Oe-0)*w),V!=null&&(pt=Vt+Ut>>1,at=mt+Ir>>1,m(V[B+2*Oe-1],255&pt,pt>>16,ke,Pe+(2*Oe-1)*w),m(V[B+2*Oe+0],255&at,at>>16,ke,Pe+(2*Oe+0)*w)),at=Xt,Ut=Ir}1&Fe||(pt=3*at+Ut+131074>>2,m(E[F+Fe-1],255&pt,pt>>16,Ee,xe+(Fe-1)*w),V!=null&&(pt=3*Ut+at+131074>>2,m(V[B+Fe-1],255&pt,pt>>16,ke,Pe+(Fe-1)*w)))}}function As(){Is[xf]=yT,Is[_f]=P5,Is[E5]=vT,Is[bf]=R5,Is[Nf]=L5,Is[Rg]=j5,Is[T5]=wT,Is[Lg]=P5,Is[jg]=R5,Is[Sf]=L5,Is[Dg]=j5}function f(h){return h&-16384?0>h?0:255:h>>xT}function x(h,m){return f((19077*h>>8)+(26149*m>>8)-14234)}function P(h,m,w){return f((19077*h>>8)-(6419*m>>8)-(13320*w>>8)+8708)}function $(h,m){return f((19077*h>>8)+(33050*m>>8)-17685)}function ye(h,m,w,E,F){E[F+0]=x(h,w),E[F+1]=P(h,m,w),E[F+2]=$(h,m)}function Ne(h,m,w,E,F){E[F+0]=$(h,m),E[F+1]=P(h,m,w),E[F+2]=x(h,w)}function Ve(h,m,w,E,F){var V=P(h,m,w);m=V<<3&224|$(h,m)>>3,E[F+0]=248&x(h,w)|V>>5,E[F+1]=m}function Qt(h,m,w,E,F){var V=240&$(h,m)|15;E[F+0]=240&x(h,w)|P(h,m,w)>>4,E[F+1]=V}function $n(h,m,w,E,F){E[F+0]=255,ye(h,m,w,E,F+1)}function qt(h,m,w,E,F){Ne(h,m,w,E,F),E[F+3]=255}function ln(h,m,w,E,F){ye(h,m,w,E,F),E[F+3]=255}function Cn(h,m,w){T[h]=function(E,F,V,B,H,Y,Z,ce,be){for(var ee=ce+(-2&be)*w;ce!=ee;)m(E[F+0],V[B+0],H[Y+0],Z,ce),m(E[F+1],V[B+0],H[Y+0],Z,ce+w),F+=2,++B,++Y,ce+=2*w;1&be&&m(E[F+0],V[B+0],H[Y+0],Z,ce)}}function Qi(h,m,w){return w==0?h==0?m==0?6:5:m==0?4:0:w}function ri(h,m,w,E,F){switch(h>>>30){case 3:Wl(m,w,E,F,0);break;case 2:Es(m,w,E,F);break;case 1:dn(m,w,E,F)}}function Hr(h,m){var w,E,F=m.M,V=m.Nb,B=h.oc,H=h.pc+40,Y=h.oc,Z=h.pc+584,ce=h.oc,be=h.pc+600;for(w=0;16>w;++w)B[H+32*w-1]=129;for(w=0;8>w;++w)Y[Z+32*w-1]=129,ce[be+32*w-1]=129;for(0<F?B[H-1-32]=Y[Z-1-32]=ce[be-1-32]=129:(i(B,H-32-1,127,21),i(Y,Z-32-1,127,9),i(ce,be-32-1,127,9)),E=0;E<h.za;++E){var ee=m.ya[m.aa+E];if(0<E){for(w=-1;16>w;++w)r(B,H+32*w-4,B,H+32*w+12,4);for(w=-1;8>w;++w)r(Y,Z+32*w-4,Y,Z+32*w+4,4),r(ce,be+32*w-4,ce,be+32*w+4,4)}var he=h.Gd,ve=h.Hd+E,Ee=ee.ad,xe=ee.Hc;if(0<F&&(r(B,H-32,he[ve].y,0,16),r(Y,Z-32,he[ve].f,0,8),r(ce,be-32,he[ve].ea,0,8)),ee.Za){var ke=B,Pe=H-32+16;for(0<F&&(E>=h.za-1?i(ke,Pe,he[ve].y[15],4):r(ke,Pe,he[ve+1].y,0,4)),w=0;4>w;w++)ke[Pe+128+w]=ke[Pe+256+w]=ke[Pe+384+w]=ke[Pe+0+w];for(w=0;16>w;++w,xe<<=2)ke=B,Pe=H+O5[w],Bs[ee.Ob[w]](ke,Pe),ri(xe,Ee,16*+w,ke,Pe)}else if(ke=Qi(E,F,ee.Ob[0]),Oa[ke](B,H),xe!=0)for(w=0;16>w;++w,xe<<=2)ri(xe,Ee,16*+w,B,H+O5[w]);for(w=ee.Gc,ke=Qi(E,F,ee.Dd),qo[ke](Y,Z),qo[ke](ce,be),xe=Ee,ke=Y,Pe=Z,255&(ee=0|w)&&(170&ee?mo(xe,256,ke,Pe):An(xe,256,ke,Pe)),ee=ce,xe=be,255&(w>>=8)&&(170&w?mo(Ee,320,ee,xe):An(Ee,320,ee,xe)),F<h.Ub-1&&(r(he[ve].y,0,B,H+480,16),r(he[ve].f,0,Y,Z+224,8),r(he[ve].ea,0,ce,be+224,8)),w=8*V*h.B,he=h.sa,ve=h.ta+16*E+16*V*h.R,Ee=h.qa,ee=h.ra+8*E+w,xe=h.Ha,ke=h.Ia+8*E+w,w=0;16>w;++w)r(he,ve+w*h.R,B,H+32*w,16);for(w=0;8>w;++w)r(Ee,ee+w*h.B,Y,Z+32*w,8),r(xe,ke+w*h.B,ce,be+32*w,8)}}function Vs(h,m,w,E,F,V,B,H,Y){var Z=[0],ce=[0],be=0,ee=Y!=null?Y.kd:0,he=Y??new De;if(h==null||12>w)return 7;he.data=h,he.w=m,he.ha=w,m=[m],w=[w],he.gb=[he.gb];e:{var ve=m,Ee=w,xe=he.gb;if(e(h!=null),e(Ee!=null),e(xe!=null),xe[0]=0,12<=Ee[0]&&!n(h,ve[0],"RIFF")){if(n(h,ve[0]+8,"WEBP")){xe=3;break e}var ke=Se(h,ve[0]+4);if(12>ke||4294967286<ke){xe=3;break e}if(ee&&ke>Ee[0]-8){xe=7;break e}xe[0]=ke,ve[0]+=12,Ee[0]-=12}xe=0}if(xe!=0)return xe;for(ke=0<he.gb[0],w=w[0];;){e:{var Pe=h;Ee=m,xe=w;var Fe=Z,Oe=ce,vt=ve=[0];if((pt=be=[be])[0]=0,8>xe[0])xe=7;else{if(!n(Pe,Ee[0],"VP8X")){if(Se(Pe,Ee[0]+4)!=10){xe=3;break e}if(18>xe[0]){xe=7;break e}var at=Se(Pe,Ee[0]+8),Ut=1+Te(Pe,Ee[0]+12);if(2147483648<=Ut*(Pe=1+Te(Pe,Ee[0]+15))){xe=3;break e}vt!=null&&(vt[0]=at),Fe!=null&&(Fe[0]=Ut),Oe!=null&&(Oe[0]=Pe),Ee[0]+=18,xe[0]-=18,pt[0]=1}xe=0}}if(be=be[0],ve=ve[0],xe!=0)return xe;if(Ee=!!(2&ve),!ke&&be)return 3;if(V!=null&&(V[0]=!!(16&ve)),B!=null&&(B[0]=Ee),H!=null&&(H[0]=0),B=Z[0],ve=ce[0],be&&Ee&&Y==null){xe=0;break}if(4>w){xe=7;break}if(ke&&be||!ke&&!be&&!n(h,m[0],"ALPH")){w=[w],he.na=[he.na],he.P=[he.P],he.Sa=[he.Sa];e:{at=h,xe=m,ke=w;var pt=he.gb;Fe=he.na,Oe=he.P,vt=he.Sa,Ut=22,e(at!=null),e(ke!=null),Pe=xe[0];var Xt=ke[0];for(e(Fe!=null),e(vt!=null),Fe[0]=null,Oe[0]=null,vt[0]=0;;){if(xe[0]=Pe,ke[0]=Xt,8>Xt){xe=7;break e}var Ir=Se(at,Pe+4);if(4294967286<Ir){xe=3;break e}var Vt=8+Ir+1&-2;if(Ut+=Vt,0<pt&&Ut>pt){xe=3;break e}if(!n(at,Pe,"VP8 ")||!n(at,Pe,"VP8L")){xe=0;break e}if(Xt[0]<Vt){xe=7;break e}n(at,Pe,"ALPH")||(Fe[0]=at,Oe[0]=Pe+8,vt[0]=Ir),Pe+=Vt,Xt-=Vt}}if(w=w[0],he.na=he.na[0],he.P=he.P[0],he.Sa=he.Sa[0],xe!=0)break}w=[w],he.Ja=[he.Ja],he.xa=[he.xa];e:if(pt=h,xe=m,ke=w,Fe=he.gb[0],Oe=he.Ja,vt=he.xa,at=xe[0],Pe=!n(pt,at,"VP8 "),Ut=!n(pt,at,"VP8L"),e(pt!=null),e(ke!=null),e(Oe!=null),e(vt!=null),8>ke[0])xe=7;else{if(Pe||Ut){if(pt=Se(pt,at+4),12<=Fe&&pt>Fe-12){xe=3;break e}if(ee&&pt>ke[0]-8){xe=7;break e}Oe[0]=pt,xe[0]+=8,ke[0]-=8,vt[0]=Ut}else vt[0]=5<=ke[0]&&pt[at+0]==47&&!(pt[at+4]>>5),Oe[0]=ke[0];xe=0}if(w=w[0],he.Ja=he.Ja[0],he.xa=he.xa[0],m=m[0],xe!=0)break;if(4294967286<he.Ja)return 3;if(H==null||Ee||(H[0]=he.xa?2:1),B=[B],ve=[ve],he.xa){if(5>w){xe=7;break}H=B,ee=ve,Ee=V,h==null||5>w?h=0:5<=w&&h[m+0]==47&&!(h[m+4]>>5)?(ke=[0],pt=[0],Fe=[0],le(Oe=new W,h,m,w),Fn(Oe,ke,pt,Fe)?(H!=null&&(H[0]=ke[0]),ee!=null&&(ee[0]=pt[0]),Ee!=null&&(Ee[0]=Fe[0]),h=1):h=0):h=0}else{if(10>w){xe=7;break}H=ve,h==null||10>w||!Fc(h,m+3,w-3)?h=0:(ee=h[m+0]|h[m+1]<<8|h[m+2]<<16,Ee=16383&(h[m+7]<<8|h[m+6]),h=16383&(h[m+9]<<8|h[m+8]),1&ee||3<(ee>>1&7)||!(ee>>4&1)||ee>>5>=he.Ja||!Ee||!h?h=0:(B&&(B[0]=Ee),H&&(H[0]=h),h=1))}if(!h||(B=B[0],ve=ve[0],be&&(Z[0]!=B||ce[0]!=ve)))return 3;Y!=null&&(Y[0]=he,Y.offset=m-Y.w,e(4294967286>m-Y.w),e(Y.offset==Y.ha-w));break}return xe==0||xe==7&&be&&Y==null?(V!=null&&(V[0]|=he.na!=null&&0<he.na.length),E!=null&&(E[0]=B),F!=null&&(F[0]=ve),0):xe}function fh(h,m,w){var E=m.width,F=m.height,V=0,B=0,H=E,Y=F;if(m.Da=h!=null&&0<h.Da,m.Da&&(H=h.cd,Y=h.bd,V=h.v,B=h.j,11>w||(V&=-2,B&=-2),0>V||0>B||0>=H||0>=Y||V+H>E||B+Y>F))return 0;if(m.v=V,m.j=B,m.va=V+H,m.o=B+Y,m.U=H,m.T=Y,m.da=h!=null&&0<h.da,m.da){if(!He(H,Y,w=[h.ib],V=[h.hb]))return 0;m.ib=w[0],m.hb=V[0]}return m.ob=h!=null&&h.ob,m.Kb=h==null||!h.Sd,m.da&&(m.ob=m.ib<3*E/4&&m.hb<3*F/4,m.Kb=0),1}function ph(h){if(h==null)return 2;if(11>h.S){var m=h.f.RGBA;m.fb+=(h.height-1)*m.A,m.A=-m.A}else m=h.f.kb,h=h.height,m.O+=(h-1)*m.fa,m.fa=-m.fa,m.N+=(h-1>>1)*m.Ab,m.Ab=-m.Ab,m.W+=(h-1>>1)*m.Db,m.Db=-m.Db,m.F!=null&&(m.J+=(h-1)*m.lb,m.lb=-m.lb);return 0}function ka(h,m,w,E){if(E==null||0>=h||0>=m)return 2;if(w!=null){if(w.Da){var F=w.cd,V=w.bd,B=-2&w.v,H=-2&w.j;if(0>B||0>H||0>=F||0>=V||B+F>h||H+V>m)return 2;h=F,m=V}if(w.da){if(!He(h,m,F=[w.ib],V=[w.hb]))return 2;h=F[0],m=V[0]}}E.width=h,E.height=m;e:{var Y=E.width,Z=E.height;if(h=E.S,0>=Y||0>=Z||!(h>=xf&&13>h))h=2;else{if(0>=E.Rd&&E.sd==null){B=V=F=m=0;var ce=(H=Y*M5[h])*Z;if(11>h||(V=(Z+1)/2*(m=(Y+1)/2),h==12&&(B=(F=Y)*Z)),(Z=s(ce+2*V+B))==null){h=1;break e}E.sd=Z,11>h?((Y=E.f.RGBA).eb=Z,Y.fb=0,Y.A=H,Y.size=ce):((Y=E.f.kb).y=Z,Y.O=0,Y.fa=H,Y.Fd=ce,Y.f=Z,Y.N=0+ce,Y.Ab=m,Y.Cd=V,Y.ea=Z,Y.W=0+ce+V,Y.Db=m,Y.Ed=V,h==12&&(Y.F=Z,Y.J=0+ce+2*V),Y.Tc=B,Y.lb=F)}if(m=1,F=E.S,V=E.width,B=E.height,F>=xf&&13>F)if(11>F)h=E.f.RGBA,m&=(H=Math.abs(h.A))*(B-1)+V<=h.size,m&=H>=V*M5[F],m&=h.eb!=null;else{h=E.f.kb,H=(V+1)/2,ce=(B+1)/2,Y=Math.abs(h.fa),Z=Math.abs(h.Ab);var be=Math.abs(h.Db),ee=Math.abs(h.lb),he=ee*(B-1)+V;m&=Y*(B-1)+V<=h.Fd,m&=Z*(ce-1)+H<=h.Cd,m=(m&=be*(ce-1)+H<=h.Ed)&Y>=V&Z>=H&be>=H,m&=h.y!=null,m&=h.f!=null,m&=h.ea!=null,F==12&&(m&=ee>=V,m&=he<=h.Tc,m&=h.F!=null)}else m=0;h=m?0:2}}return h!=0||w!=null&&w.fd&&(h=ph(E)),h}var ql=64,Xi=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Ji=24,Ca=32,Bo=8,Pa=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];$e("Predictor0","PredictorAdd0"),T.Predictor0=function(){return 4278190080},T.Predictor1=function(h){return h},T.Predictor2=function(h,m,w){return m[w+0]},T.Predictor3=function(h,m,w){return m[w+1]},T.Predictor4=function(h,m,w){return m[w-1]},T.Predictor5=function(h,m,w){return Ae(Ae(h,m[w+1]),m[w+0])},T.Predictor6=function(h,m,w){return Ae(h,m[w-1])},T.Predictor7=function(h,m,w){return Ae(h,m[w+0])},T.Predictor8=function(h,m,w){return Ae(m[w-1],m[w+0])},T.Predictor9=function(h,m,w){return Ae(m[w+0],m[w+1])},T.Predictor10=function(h,m,w){return Ae(Ae(h,m[w-1]),Ae(m[w+0],m[w+1]))},T.Predictor11=function(h,m,w){var E=m[w+0];return 0>=ze(E>>24&255,h>>24&255,(m=m[w-1])>>24&255)+ze(E>>16&255,h>>16&255,m>>16&255)+ze(E>>8&255,h>>8&255,m>>8&255)+ze(255&E,255&h,255&m)?E:h},T.Predictor12=function(h,m,w){var E=m[w+0];return(Mt((h>>24&255)+(E>>24&255)-((m=m[w-1])>>24&255))<<24|Mt((h>>16&255)+(E>>16&255)-(m>>16&255))<<16|Mt((h>>8&255)+(E>>8&255)-(m>>8&255))<<8|Mt((255&h)+(255&E)-(255&m)))>>>0},T.Predictor13=function(h,m,w){var E=m[w-1];return(gt((h=Ae(h,m[w+0]))>>24&255,E>>24&255)<<24|gt(h>>16&255,E>>16&255)<<16|gt(h>>8&255,E>>8&255)<<8|gt(255&h,255&E))>>>0};var mh=T.PredictorAdd0;T.PredictorAdd1=lt,$e("Predictor2","PredictorAdd2"),$e("Predictor3","PredictorAdd3"),$e("Predictor4","PredictorAdd4"),$e("Predictor5","PredictorAdd5"),$e("Predictor6","PredictorAdd6"),$e("Predictor7","PredictorAdd7"),$e("Predictor8","PredictorAdd8"),$e("Predictor9","PredictorAdd9"),$e("Predictor10","PredictorAdd10"),$e("Predictor11","PredictorAdd11"),$e("Predictor12","PredictorAdd12"),$e("Predictor13","PredictorAdd13");var Wc=T.PredictorAdd2;tt("ColorIndexInverseTransform","MapARGB","32b",function(h){return h>>8&255},function(h){return h}),tt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(h){return h},function(h){return h>>8&255});var lr,yf=T.ColorIndexInverseTransform,fo=T.MapARGB,po=T.VP8LColorIndexInverseTransformAlpha,gh=T.MapAlpha,yh=T.VP8LPredictorsAdd=[];yh.length=16,(T.VP8LPredictors=[]).length=16,(T.VP8LPredictorsAdd_C=[]).length=16,(T.VP8LPredictors_C=[]).length=16;var vh,wh,Ra,La,ja,Hl,Da,Wl,Es,mo,dn,An,cr,Tr,zo,xh,$c,vf,d5,f5,p5,m5,g5,y5,_h,v5,w5,x5,_5=s(511),b5=s(2041),N5=s(225),S5=s(767),A5=0,Pg=b5,wf=N5,Zi=S5,Ts=_5,xf=0,_f=1,E5=2,bf=3,Nf=4,Rg=5,T5=6,Lg=7,jg=8,Sf=9,Dg=10,rT=[2,3,7],iT=[3,3,11],I5=[280,256,256,256,40],sT=[0,1,1,1,0],oT=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],aT=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],lT=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],cT=8,Og=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Mg=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],bh=null,uT=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],hT=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],k5=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],dT=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],fT=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],pT=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],mT=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Oa=[],Bs=[],qo=[],gT=1,C5=2,Ma=[],Is=[];Ss("UpsampleRgbLinePair",ye,3),Ss("UpsampleBgrLinePair",Ne,3),Ss("UpsampleRgbaLinePair",ln,4),Ss("UpsampleBgraLinePair",qt,4),Ss("UpsampleArgbLinePair",$n,4),Ss("UpsampleRgba4444LinePair",Qt,2),Ss("UpsampleRgb565LinePair",Ve,2);var yT=T.UpsampleRgbLinePair,vT=T.UpsampleBgrLinePair,P5=T.UpsampleRgbaLinePair,R5=T.UpsampleBgraLinePair,L5=T.UpsampleArgbLinePair,j5=T.UpsampleRgba4444LinePair,wT=T.UpsampleRgb565LinePair,Af=16,Ef=1<<Af-1,Nh=-227,Fg=482,xT=6,D5=0,_T=s(256),bT=s(256),NT=s(256),ST=s(256),AT=s(Fg-Nh),ET=s(Fg-Nh);Cn("YuvToRgbRow",ye,3),Cn("YuvToBgrRow",Ne,3),Cn("YuvToRgbaRow",ln,4),Cn("YuvToBgraRow",qt,4),Cn("YuvToArgbRow",$n,4),Cn("YuvToRgba4444Row",Qt,2),Cn("YuvToRgb565Row",Ve,2);var O5=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Tf=[0,2,8],TT=[8,7,6,4,4,2,2,2,1,1,1,1],IT=1;this.WebPDecodeRGBA=function(h,m,w,E,F){var V=_f,B=new Ie,H=new Be;B.ba=H,H.S=V,H.width=[H.width],H.height=[H.height];var Y=H.width,Z=H.height,ce=new Ye;if(ce==null||h==null)var be=2;else e(ce!=null),be=Vs(h,m,w,ce.width,ce.height,ce.Pd,ce.Qd,ce.format,null);if(be!=0?Y=0:(Y!=null&&(Y[0]=ce.width[0]),Z!=null&&(Z[0]=ce.height[0]),Y=1),Y){H.width=H.width[0],H.height=H.height[0],E!=null&&(E[0]=H.width),F!=null&&(F[0]=H.height);e:{if(E=new ao,(F=new De).data=h,F.w=m,F.ha=w,F.kd=1,m=[0],e(F!=null),((h=Vs(F.data,F.w,F.ha,null,null,null,m,null,F))==0||h==7)&&m[0]&&(h=4),(m=h)==0){if(e(B!=null),E.data=F.data,E.w=F.w+F.offset,E.ha=F.ha-F.offset,E.put=et,E.ac=Ht,E.bc=Ft,E.ma=B,F.xa){if((h=Ar())==null){B=1;break e}if(function(ee,he){var ve=[0],Ee=[0],xe=[0];t:for(;;){if(ee==null)return 0;if(he==null)return ee.a=2,0;if(ee.l=he,ee.a=0,le(ee.m,he.data,he.w,he.ha),!Fn(ee.m,ve,Ee,xe)){ee.a=3;break t}if(ee.xb=C5,he.width=ve[0],he.height=Ee[0],!jr(ve[0],Ee[0],1,ee,null))break t;return 1}return e(ee.a!=0),0}(h,E)){if(E=(m=ka(E.width,E.height,B.Oa,B.ba))==0){t:{E=h;n:for(;;){if(E==null){E=0;break t}if(e(E.s.yc!=null),e(E.s.Ya!=null),e(0<E.s.Wb),e((w=E.l)!=null),e((F=w.ma)!=null),E.xb!=0){if(E.ca=F.ba,E.tb=F.tb,e(E.ca!=null),!fh(F.Oa,w,bf)){E.a=2;break n}if(!zr(E,w.width)||w.da)break n;if((w.da||Ke(E.ca.S))&&Mi(),11>E.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),E.ca.f.kb.F!=null&&Mi()),E.Pb&&0<E.s.ua&&E.s.vb.X==null&&!K(E.s.vb,E.s.Wa.Xa)){E.a=1;break n}E.xb=0}if(!Sr(E,E.V,E.Ba,E.c,E.i,w.o,Lr))break n;F.Dc=E.Ma,E=1;break t}e(E.a!=0),E=0}E=!E}E&&(m=h.a)}else m=h.a}else{if((h=new Mc)==null){B=1;break e}if(h.Fa=F.na,h.P=F.P,h.qc=F.Sa,ys(h,E)){if((m=ka(E.width,E.height,B.Oa,B.ba))==0){if(h.Aa=0,w=B.Oa,e((F=h)!=null),w!=null){if(0<(Y=0>(Y=w.Md)?0:100<Y?255:255*Y/100)){for(Z=ce=0;4>Z;++Z)12>(be=F.pb[Z]).lc&&(be.ia=Y*TT[0>be.lc?0:be.lc]>>3),ce|=be.ia;ce&&(alert("todo:VP8InitRandom"),F.ia=1)}F.Ga=w.Id,100<F.Ga?F.Ga=100:0>F.Ga&&(F.Ga=0)}(function(ee,he){if(ee==null)return 0;if(he==null)return zn(ee,2,"NULL VP8Io parameter in VP8Decode().");if(!ee.cb&&!ys(ee,he))return 0;if(e(ee.cb),he.ac==null||he.ac(he)){he.ob&&(ee.L=0);var ve=Tf[ee.L];if(ee.L==2?(ee.yb=0,ee.zb=0):(ee.yb=he.v-ve>>4,ee.zb=he.j-ve>>4,0>ee.yb&&(ee.yb=0),0>ee.zb&&(ee.zb=0)),ee.Va=he.o+15+ve>>4,ee.Hb=he.va+15+ve>>4,ee.Hb>ee.za&&(ee.Hb=ee.za),ee.Va>ee.Ub&&(ee.Va=ee.Ub),0<ee.L){var Ee=ee.ed;for(ve=0;4>ve;++ve){var xe;if(ee.Qa.Cb){var ke=ee.Qa.Lb[ve];ee.Qa.Fb||(ke+=Ee.Tb)}else ke=Ee.Tb;for(xe=0;1>=xe;++xe){var Pe=ee.gd[ve][xe],Fe=ke;if(Ee.Pc&&(Fe+=Ee.vd[0],xe&&(Fe+=Ee.od[0])),0<(Fe=0>Fe?0:63<Fe?63:Fe)){var Oe=Fe;0<Ee.wb&&(Oe=4<Ee.wb?Oe>>2:Oe>>1)>9-Ee.wb&&(Oe=9-Ee.wb),1>Oe&&(Oe=1),Pe.dd=Oe,Pe.tc=2*Fe+Oe,Pe.ld=40<=Fe?2:15<=Fe?1:0}else Pe.tc=0;Pe.La=xe}}}ve=0}else zn(ee,6,"Frame setup failed"),ve=ee.a;if(ve=ve==0){if(ve){ee.$c=0,0<ee.Aa||(ee.Ic=IT);t:{ve=ee.Ic,Ee=4*(Oe=ee.za);var vt=32*Oe,at=Oe+1,Ut=0<ee.L?Oe*(0<ee.Aa?2:1):0,pt=(ee.Aa==2?2:1)*Oe;if((Pe=Ee+832+(xe=3*(16*ve+Tf[ee.L])/2*vt)+(ke=ee.Fa!=null&&0<ee.Fa.length?ee.Kc.c*ee.Kc.i:0))!=Pe)ve=0;else{if(Pe>ee.Vb){if(ee.Vb=0,ee.Ec=s(Pe),ee.Fc=0,ee.Ec==null){ve=zn(ee,1,"no memory during frame initialization.");break t}ee.Vb=Pe}Pe=ee.Ec,Fe=ee.Fc,ee.Ac=Pe,ee.Bc=Fe,Fe+=Ee,ee.Gd=o(vt,Dl),ee.Hd=0,ee.rb=o(at+1,Ki),ee.sb=1,ee.wa=Ut?o(Ut,Dr):null,ee.Y=0,ee.D.Nb=0,ee.D.wa=ee.wa,ee.D.Y=ee.Y,0<ee.Aa&&(ee.D.Y+=Oe),e(!0),ee.oc=Pe,ee.pc=Fe,Fe+=832,ee.ya=o(pt,Ll),ee.aa=0,ee.D.ya=ee.ya,ee.D.aa=ee.aa,ee.Aa==2&&(ee.D.aa+=Oe),ee.R=16*Oe,ee.B=8*Oe,Oe=(vt=Tf[ee.L])*ee.R,vt=vt/2*ee.B,ee.sa=Pe,ee.ta=Fe+Oe,ee.qa=ee.sa,ee.ra=ee.ta+16*ve*ee.R+vt,ee.Ha=ee.qa,ee.Ia=ee.ra+8*ve*ee.B+vt,ee.$c=0,Fe+=xe,ee.mb=ke?Pe:null,ee.nb=ke?Fe:null,e(Fe+ke<=ee.Fc+ee.Vb),Ml(ee),i(ee.Ac,ee.Bc,0,Ee),ve=1}}if(ve){if(he.ka=0,he.y=ee.sa,he.O=ee.ta,he.f=ee.qa,he.N=ee.ra,he.ea=ee.Ha,he.Vd=ee.Ia,he.fa=ee.R,he.Rc=ee.B,he.F=null,he.J=0,!A5){for(ve=-255;255>=ve;++ve)_5[255+ve]=0>ve?-ve:ve;for(ve=-1020;1020>=ve;++ve)b5[1020+ve]=-128>ve?-128:127<ve?127:ve;for(ve=-112;112>=ve;++ve)N5[112+ve]=-16>ve?-16:15<ve?15:ve;for(ve=-255;510>=ve;++ve)S5[255+ve]=0>ve?0:255<ve?255:ve;A5=1}Da=vs,Wl=Uc,mo=Gt,dn=Mo,An=lo,Es=Na,cr=Ia,Tr=Ns,zo=O,xh=J,$c=zl,vf=v,d5=ie,f5=fe,p5=ho,m5=_i,g5=Bl,y5=Hc,Bs[0]=hh,Bs[1]=Vc,Bs[2]=ch,Bs[3]=uh,Bs[4]=Or,Bs[5]=dh,Bs[6]=Fs,Bs[7]=Aa,Bs[8]=Ea,Bs[9]=Us,Oa[0]=ws,Oa[1]=lh,Oa[2]=Fl,Oa[3]=Bc,Oa[4]=co,Oa[5]=Sa,Oa[6]=zc,qo[0]=Ul,qo[1]=ah,qo[2]=Yi,qo[3]=Uo,qo[4]=Vl,qo[5]=bn,qo[6]=qc,ve=1}else ve=0}ve&&(ve=function(Xt,Ir){for(Xt.M=0;Xt.M<Xt.Va;++Xt.M){var Vt,mt=Xt.Jc[Xt.M&Xt.Xb],We=Xt.m,ur=Xt;for(Vt=0;Vt<ur.za;++Vt){var Ot=We,tn=ur,Ln=tn.Ac,Wr=tn.Bc+4*Vt,Ni=tn.zc,nr=tn.ya[tn.aa+Vt];if(tn.Qa.Bb?nr.$b=me(Ot,tn.Pa.jb[0])?2+me(Ot,tn.Pa.jb[2]):me(Ot,tn.Pa.jb[1]):nr.$b=0,tn.kc&&(nr.Ad=me(Ot,tn.Bd)),nr.Za=!me(Ot,145)+0,nr.Za){var ii=nr.Ob,Si=0;for(tn=0;4>tn;++tn){var kr,rn=Ni[0+tn];for(kr=0;4>kr;++kr){rn=fT[Ln[Wr+kr]][rn];for(var pn=k5[me(Ot,rn[0])];0<pn;)pn=k5[2*pn+me(Ot,rn[pn])];rn=-pn,Ln[Wr+kr]=rn}r(ii,Si,Ln,Wr,4),Si+=4,Ni[0+tn]=rn}}else rn=me(Ot,156)?me(Ot,128)?1:3:me(Ot,163)?2:0,nr.Ob[0]=rn,i(Ln,Wr,rn,4),i(Ni,0,rn,4);nr.Dd=me(Ot,142)?me(Ot,114)?me(Ot,183)?1:3:2:0}if(ur.m.Ka)return zn(Xt,7,"Premature end-of-partition0 encountered.");for(;Xt.ja<Xt.za;++Xt.ja){if(ur=mt,Ot=(We=Xt).rb[We.sb-1],Ln=We.rb[We.sb+We.ja],Vt=We.ya[We.aa+We.ja],Wr=We.kc?Vt.Ad:0)Ot.la=Ln.la=0,Vt.Za||(Ot.Na=Ln.Na=0),Vt.Hc=0,Vt.Gc=0,Vt.ia=0;else{var rr,mn;if(Ot=Ln,Ln=ur,Wr=We.Pa.Xc,Ni=We.ya[We.aa+We.ja],nr=We.pb[Ni.$b],tn=Ni.ad,ii=0,Si=We.rb[We.sb-1],rn=kr=0,i(tn,ii,0,384),Ni.Za)var $r=0,zs=Wr[3];else{pn=s(16);var hr=Ot.Na+Si.Na;if(hr=bh(Ln,Wr[1],hr,nr.Eb,0,pn,0),Ot.Na=Si.Na=(0<hr)+0,1<hr)Da(pn,0,tn,ii);else{var Fi=pn[0]+3>>3;for(pn=0;256>pn;pn+=16)tn[ii+pn]=Fi}$r=1,zs=Wr[0]}var En=15&Ot.la,Cr=15&Si.la;for(pn=0;4>pn;++pn){var es=1&Cr;for(Fi=mn=0;4>Fi;++Fi)En=En>>1|(es=(hr=bh(Ln,zs,hr=es+(1&En),nr.Sc,$r,tn,ii))>$r)<<7,mn=mn<<2|(3<hr?3:1<hr?2:tn[ii+0]!=0),ii+=16;En>>=4,Cr=Cr>>1|es<<7,kr=(kr<<8|mn)>>>0}for(zs=En,$r=Cr>>4,rr=0;4>rr;rr+=2){for(mn=0,En=Ot.la>>4+rr,Cr=Si.la>>4+rr,pn=0;2>pn;++pn){for(es=1&Cr,Fi=0;2>Fi;++Fi)hr=es+(1&En),En=En>>1|(es=0<(hr=bh(Ln,Wr[2],hr,nr.Qc,0,tn,ii)))<<3,mn=mn<<2|(3<hr?3:1<hr?2:tn[ii+0]!=0),ii+=16;En>>=2,Cr=Cr>>1|es<<5}rn|=mn<<4*rr,zs|=En<<4<<rr,$r|=(240&Cr)<<rr}Ot.la=zs,Si.la=$r,Ni.Hc=kr,Ni.Gc=rn,Ni.ia=43690&rn?0:nr.ia,Wr=!(kr|rn)}if(0<We.L&&(We.wa[We.Y+We.ja]=We.gd[Vt.$b][Vt.Za],We.wa[We.Y+We.ja].La|=!Wr),ur.Ka)return zn(Xt,7,"Premature end-of-file encountered.")}if(Ml(Xt),We=Ir,ur=1,Vt=(mt=Xt).D,Ot=0<mt.L&&mt.M>=mt.zb&&mt.M<=mt.Va,mt.Aa==0)t:{if(Vt.M=mt.M,Vt.uc=Ot,Hr(mt,Vt),ur=1,Vt=(mn=mt.D).Nb,Ot=(rn=Tf[mt.L])*mt.R,Ln=rn/2*mt.B,pn=16*Vt*mt.R,Fi=8*Vt*mt.B,Wr=mt.sa,Ni=mt.ta-Ot+pn,nr=mt.qa,tn=mt.ra-Ln+Fi,ii=mt.Ha,Si=mt.Ia-Ln+Fi,Cr=(En=mn.M)==0,kr=En>=mt.Va-1,mt.Aa==2&&Hr(mt,mn),mn.uc)for(es=(hr=mt).D.M,e(hr.D.uc),mn=hr.yb;mn<hr.Hb;++mn){$r=mn,zs=es;var Ai=(ts=(Gr=hr).D).Nb;rr=Gr.R;var ts=ts.wa[ts.Y+$r],ns=Gr.sa,Ui=Gr.ta+16*Ai*rr+16*$r,rs=ts.dd,Pn=ts.tc;if(Pn!=0)if(e(3<=Pn),Gr.L==1)0<$r&&m5(ns,Ui,rr,Pn+4),ts.La&&y5(ns,Ui,rr,Pn),0<zs&&p5(ns,Ui,rr,Pn+4),ts.La&&g5(ns,Ui,rr,Pn);else{var is=Gr.B,qs=Gr.qa,$l=Gr.ra+8*Ai*is+8*$r,Ho=Gr.Ha,Gr=Gr.Ia+8*Ai*is+8*$r;Ai=ts.ld,0<$r&&(Tr(ns,Ui,rr,Pn+4,rs,Ai),xh(qs,$l,Ho,Gr,is,Pn+4,rs,Ai)),ts.La&&(vf(ns,Ui,rr,Pn,rs,Ai),f5(qs,$l,Ho,Gr,is,Pn,rs,Ai)),0<zs&&(cr(ns,Ui,rr,Pn+4,rs,Ai),zo(qs,$l,Ho,Gr,is,Pn+4,rs,Ai)),ts.La&&($c(ns,Ui,rr,Pn,rs,Ai),d5(qs,$l,Ho,Gr,is,Pn,rs,Ai))}}if(mt.ia&&alert("todo:DitherRow"),We.put!=null){if(mn=16*En,En=16*(En+1),Cr?(We.y=mt.sa,We.O=mt.ta+pn,We.f=mt.qa,We.N=mt.ra+Fi,We.ea=mt.Ha,We.W=mt.Ia+Fi):(mn-=rn,We.y=Wr,We.O=Ni,We.f=nr,We.N=tn,We.ea=ii,We.W=Si),kr||(En-=rn),En>We.o&&(En=We.o),We.F=null,We.J=null,mt.Fa!=null&&0<mt.Fa.length&&mn<En&&(We.J=fn(mt,We,mn,En-mn),We.F=mt.mb,We.F==null&&We.F.length==0)){ur=zn(mt,3,"Could not decode alpha data.");break t}mn<We.j&&(rn=We.j-mn,mn=We.j,e(!(1&rn)),We.O+=mt.R*rn,We.N+=mt.B*(rn>>1),We.W+=mt.B*(rn>>1),We.F!=null&&(We.J+=We.width*rn)),mn<En&&(We.O+=We.v,We.N+=We.v>>1,We.W+=We.v>>1,We.F!=null&&(We.J+=We.v),We.ka=mn-We.j,We.U=We.va-We.v,We.T=En-mn,ur=We.put(We))}Vt+1!=mt.Ic||kr||(r(mt.sa,mt.ta-Ot,Wr,Ni+16*mt.R,Ot),r(mt.qa,mt.ra-Ln,nr,tn+8*mt.B,Ln),r(mt.Ha,mt.Ia-Ln,ii,Si+8*mt.B,Ln))}if(!ur)return zn(Xt,6,"Output aborted.")}return 1}(ee,he)),he.bc!=null&&he.bc(he),ve&=1}return ve?(ee.cb=0,ve):0})(h,E)||(m=h.a)}}else m=h.a}m==0&&B.Oa!=null&&B.Oa.fd&&(m=ph(B.ba))}B=m}V=B!=0?null:11>V?H.f.RGBA.eb:H.f.kb.y}else V=null;return V};var M5=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function c(T,M){for(var A="",I=0;I<4;I++)A+=String.fromCharCode(T[M++]);return A}function u(T,M){return T[M+0]|T[M+1]<<8}function g(T,M){return(T[M+0]|T[M+1]<<8|T[M+2]<<16)>>>0}function y(T,M){return(T[M+0]|T[M+1]<<8|T[M+2]<<16|T[M+3]<<24)>>>0}new l;var p=[0],b=[0],N=[],C=new l,_=t,k=function(T,M){var A={},I=0,R=!1,G=0,oe=0;if(A.frames=[],!function(U,W){for(var te=0;te<4;te++)if(U[W+te]!="RIFF".charCodeAt(te))return!0;return!1}(T,M)){for(y(T,M+=4),M+=8;M<T.length;){var pe=c(T,M),ge=y(T,M+=4);M+=4;var ne=ge+(1&ge);switch(pe){case"VP8 ":case"VP8L":A.frames[I]===void 0&&(A.frames[I]={}),(de=A.frames[I]).src_off=R?oe:M-8,de.src_size=G+ge+8,I++,R&&(R=!1,G=0,oe=0);break;case"VP8X":(de=A.header={}).feature_flags=T[M];var le=M+4;de.canvas_width=1+g(T,le),le+=3,de.canvas_height=1+g(T,le),le+=3;break;case"ALPH":R=!0,G=ne+8,oe=M-8;break;case"ANIM":(de=A.header).bgcolor=y(T,M),le=M+4,de.loop_count=u(T,le),le+=2;break;case"ANMF":var we,de;(de=A.frames[I]={}).offset_x=2*g(T,M),M+=3,de.offset_y=2*g(T,M),M+=3,de.width=1+g(T,M),M+=3,de.height=1+g(T,M),M+=3,de.duration=g(T,M),M+=3,we=T[M++],de.dispose=1&we,de.blend=we>>1&1}pe!="ANMF"&&(M+=ne)}return A}}(_,0);k.response=_,k.rgbaoutput=!0,k.dataurl=!1;var L=k.header?k.header:null,D=k.frames?k.frames:null;if(L){L.loop_counter=L.loop_count,p=[L.canvas_height],b=[L.canvas_width];for(var z=0;z<D.length&&D[z].blend!=0;z++);}var X=D[0],j=C.WebPDecodeRGBA(_,X.src_off,X.src_size,b,p);X.rgba=j,X.imgwidth=b[0],X.imgheight=p[0];for(var S=0;S<b[0]*p[0]*4;S++)N[S]=j[S];return this.width=b,this.height=p,this.data=N,this}(function(t){var e,n,r,i,s,o,a,l,c,u=function(U){return U=U||{},this.isStrokeTransparent=U.isStrokeTransparent||!1,this.strokeOpacity=U.strokeOpacity||1,this.strokeStyle=U.strokeStyle||"#000000",this.fillStyle=U.fillStyle||"#000000",this.isFillTransparent=U.isFillTransparent||!1,this.fillOpacity=U.fillOpacity||1,this.font=U.font||"10px sans-serif",this.textBaseline=U.textBaseline||"alphabetic",this.textAlign=U.textAlign||"left",this.lineWidth=U.lineWidth||1,this.lineJoin=U.lineJoin||"miter",this.lineCap=U.lineCap||"butt",this.path=U.path||[],this.transform=U.transform!==void 0?U.transform.clone():new l,this.globalCompositeOperation=U.globalCompositeOperation||"normal",this.globalAlpha=U.globalAlpha||1,this.clip_path=U.clip_path||[],this.currentPoint=U.currentPoint||new o,this.miterLimit=U.miterLimit||10,this.lastPoint=U.lastPoint||new o,this.lineDashOffset=U.lineDashOffset||0,this.lineDash=U.lineDash||[],this.margin=U.margin||[0,0,0,0],this.prevPageLastElemOffset=U.prevPageLastElemOffset||0,this.ignoreClearRect=typeof U.ignoreClearRect!="boolean"||U.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new g(this),e=this.internal.f2,n=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,o=this.internal.Point,a=this.internal.Rectangle,l=this.internal.Matrix,c=new u}]);var g=function(U){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var W=U;Object.defineProperty(this,"pdf",{get:function(){return W}});var te=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return te},set:function(K){te=!!K}});var Q=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return Q},set:function(K){Q=!!K}});var re=0;Object.defineProperty(this,"posX",{get:function(){return re},set:function(K){isNaN(K)||(re=K)}});var q=0;Object.defineProperty(this,"posY",{get:function(){return q},set:function(K){isNaN(K)||(q=K)}}),Object.defineProperty(this,"margin",{get:function(){return c.margin},set:function(K){var Ce;typeof K=="number"?Ce=[K,K,K,K]:((Ce=new Array(4))[0]=K[0],Ce[1]=K.length>=2?K[1]:Ce[0],Ce[2]=K.length>=3?K[2]:Ce[0],Ce[3]=K.length>=4?K[3]:Ce[1]),c.margin=Ce}});var ae=!1;Object.defineProperty(this,"autoPaging",{get:function(){return ae},set:function(K){ae=K}});var ue=0;Object.defineProperty(this,"lastBreak",{get:function(){return ue},set:function(K){ue=K}});var me=[];Object.defineProperty(this,"pageBreaks",{get:function(){return me},set:function(K){me=K}}),Object.defineProperty(this,"ctx",{get:function(){return c},set:function(K){K instanceof u&&(c=K)}}),Object.defineProperty(this,"path",{get:function(){return c.path},set:function(K){c.path=K}});var _e=[];Object.defineProperty(this,"ctxStack",{get:function(){return _e},set:function(K){_e=K}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(K){var Ce;Ce=y(K),this.ctx.fillStyle=Ce.style,this.ctx.isFillTransparent=Ce.a===0,this.ctx.fillOpacity=Ce.a,this.pdf.setFillColor(Ce.r,Ce.g,Ce.b,{a:Ce.a}),this.pdf.setTextColor(Ce.r,Ce.g,Ce.b,{a:Ce.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(K){var Ce=y(K);this.ctx.strokeStyle=Ce.style,this.ctx.isStrokeTransparent=Ce.a===0,this.ctx.strokeOpacity=Ce.a,Ce.a===0?this.pdf.setDrawColor(255,255,255):(Ce.a,this.pdf.setDrawColor(Ce.r,Ce.g,Ce.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(K){["butt","round","square"].indexOf(K)!==-1&&(this.ctx.lineCap=K,this.pdf.setLineCap(K))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(K){isNaN(K)||(this.ctx.lineWidth=K,this.pdf.setLineWidth(K))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(K){["bevel","round","miter"].indexOf(K)!==-1&&(this.ctx.lineJoin=K,this.pdf.setLineJoin(K))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(K){isNaN(K)||(this.ctx.miterLimit=K,this.pdf.setMiterLimit(K))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(K){this.ctx.textBaseline=K}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(K){["right","end","center","left","start"].indexOf(K)!==-1&&(this.ctx.textAlign=K)}});var Le=null,Te=null,Se=null;Object.defineProperty(this,"fontFaces",{get:function(){return Se},set:function(K){Le=null,Te=null,Se=K}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(K){var Ce;if(this.ctx.font=K,(Ce=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z0-9]+?)\s*$/i.exec(K))!==null){var it=Ce[1];Ce[2];var He=Ce[3],Re=Ce[4];Ce[5];var Ze=Ce[6],$e=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Re)[2];Re=Math.floor($e==="px"?parseFloat(Re)*this.pdf.internal.scaleFactor:$e==="em"?parseFloat(Re)*this.pdf.getFontSize():parseFloat(Re)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Re);var st=function(tt){var Dt,Qe,yt=[],ot=tt.trim();if(ot==="")return s1;if(ot in Hb)return[Hb[ot]];for(;ot!=="";){switch(Qe=null,Dt=(ot=$b(ot)).charAt(0)){case'"':case"'":Qe=aB(ot.substring(1),Dt);break;default:Qe=lB(ot)}if(Qe===null||(yt.push(Qe[0]),(ot=$b(Qe[1]))!==""&&ot.charAt(0)!==","))return s1;ot=ot.replace(/^,/,"")}return yt}(Ze);if(this.fontFaces){var Ae=function(tt,Dt){var Qe=tt.getFontList(),yt=JSON.stringify(Qe);if(Le===null||Te!==yt){var ot=function($t){var Xe=[];return Object.keys($t).forEach(function(At){$t[At].forEach(function(Ke){var ut=null;switch(Ke){case"bold":ut={family:At,weight:"bold"};break;case"italic":ut={family:At,style:"italic"};break;case"bolditalic":ut={family:At,weight:"bold",style:"italic"};break;case"":case"normal":ut={family:At}}ut!==null&&(ut.ref={name:At,style:Ke},Xe.push(ut))})}),Xe}(Qe);Le=function($t){for(var Xe={},At=0;At<$t.length;++At){var Ke=i1($t[At]),ut=Ke.family,Tt=Ke.stretch,Be=Ke.style,Ye=Ke.weight;Xe[ut]=Xe[ut]||{},Xe[ut][Tt]=Xe[ut][Tt]||{},Xe[ut][Tt][Be]=Xe[ut][Tt][Be]||{},Xe[ut][Tt][Be][Ye]=Ke}return Xe}(ot.concat(Dt)),Te=yt}return Le}(this.pdf,this.fontFaces),Mt=st.map(function(tt){return{family:tt,stretch:"normal",weight:He,style:it}}),gt=function(tt,Dt,Qe){for(var yt=(Qe=Qe||{}).defaultFontFamily||"times",ot=Object.assign({},oB,Qe.genericFontFamilies||{}),$t=null,Xe=null,At=0;At<Dt.length;++At)if(ot[($t=i1(Dt[At])).family]&&($t.family=ot[$t.family]),tt.hasOwnProperty($t.family)){Xe=tt[$t.family];break}if(!(Xe=Xe||tt[yt]))throw new Error("Could not find a font-family for the rule '"+Wb($t)+"' and default family '"+yt+"'.");if(Xe=function(Ke,ut){if(ut[Ke])return ut[Ke];var Tt=K2[Ke],Be=Tt<=K2.normal?-1:1,Ye=qb(ut,ME,Tt,Be);if(!Ye)throw new Error("Could not find a matching font-stretch value for "+Ke);return Ye}($t.stretch,Xe),Xe=function(Ke,ut){if(ut[Ke])return ut[Ke];for(var Tt=OE[Ke],Be=0;Be<Tt.length;++Be)if(ut[Tt[Be]])return ut[Tt[Be]];throw new Error("Could not find a matching font-style for "+Ke)}($t.style,Xe),!(Xe=function(Ke,ut){if(ut[Ke])return ut[Ke];if(Ke===400&&ut[500])return ut[500];if(Ke===500&&ut[400])return ut[400];var Tt=sB[Ke],Be=qb(ut,FE,Tt,Ke<400?-1:1);if(!Be)throw new Error("Could not find a matching font-weight for value "+Ke);return Be}($t.weight,Xe)))throw new Error("Failed to resolve a font for the rule '"+Wb($t)+"'.");return Xe}(Ae,Mt);this.pdf.setFont(gt.ref.name,gt.ref.style)}else{var ze="";(He==="bold"||parseInt(He,10)>=700||it==="bold")&&(ze="bold"),it==="italic"&&(ze+="italic"),ze.length===0&&(ze="normal");for(var lt="",Nt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Ge=0;Ge<st.length;Ge++){if(this.pdf.internal.getFont(st[Ge],ze,{noFallback:!0,disableWarning:!0})!==void 0){lt=st[Ge];break}if(ze==="bolditalic"&&this.pdf.internal.getFont(st[Ge],"bold",{noFallback:!0,disableWarning:!0})!==void 0)lt=st[Ge],ze="bold";else if(this.pdf.internal.getFont(st[Ge],"normal",{noFallback:!0,disableWarning:!0})!==void 0){lt=st[Ge],ze="normal";break}}if(lt===""){for(var xt=0;xt<st.length;xt++)if(Nt[st[xt]]){lt=Nt[st[xt]];break}}lt=lt===""?"Times":lt,this.pdf.setFont(lt,ze)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(K){this.ctx.globalCompositeOperation=K}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(K){this.ctx.globalAlpha=K}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(K){this.ctx.lineDashOffset=K,de.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(K){this.ctx.lineDash=K,de.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(K){this.ctx.ignoreClearRect=!!K}})};g.prototype.setLineDash=function(U){this.lineDash=U},g.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},g.prototype.fill=function(){D.call(this,"fill",!1)},g.prototype.stroke=function(){D.call(this,"stroke",!1)},g.prototype.beginPath=function(){this.path=[{type:"begin"}]},g.prototype.moveTo=function(U,W){if(isNaN(U)||isNaN(W))throw Tn.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var te=this.ctx.transform.applyToPoint(new o(U,W));this.path.push({type:"mt",x:te.x,y:te.y}),this.ctx.lastPoint=new o(U,W)},g.prototype.closePath=function(){var U=new o(0,0),W=0;for(W=this.path.length-1;W!==-1;W--)if(this.path[W].type==="begin"&&yn(this.path[W+1])==="object"&&typeof this.path[W+1].x=="number"){U=new o(this.path[W+1].x,this.path[W+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(U.x,U.y)},g.prototype.lineTo=function(U,W){if(isNaN(U)||isNaN(W))throw Tn.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var te=this.ctx.transform.applyToPoint(new o(U,W));this.path.push({type:"lt",x:te.x,y:te.y}),this.ctx.lastPoint=new o(te.x,te.y)},g.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),D.call(this,null,!0)},g.prototype.quadraticCurveTo=function(U,W,te,Q){if(isNaN(te)||isNaN(Q)||isNaN(U)||isNaN(W))throw Tn.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var re=this.ctx.transform.applyToPoint(new o(te,Q)),q=this.ctx.transform.applyToPoint(new o(U,W));this.path.push({type:"qct",x1:q.x,y1:q.y,x:re.x,y:re.y}),this.ctx.lastPoint=new o(re.x,re.y)},g.prototype.bezierCurveTo=function(U,W,te,Q,re,q){if(isNaN(re)||isNaN(q)||isNaN(U)||isNaN(W)||isNaN(te)||isNaN(Q))throw Tn.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var ae=this.ctx.transform.applyToPoint(new o(re,q)),ue=this.ctx.transform.applyToPoint(new o(U,W)),me=this.ctx.transform.applyToPoint(new o(te,Q));this.path.push({type:"bct",x1:ue.x,y1:ue.y,x2:me.x,y2:me.y,x:ae.x,y:ae.y}),this.ctx.lastPoint=new o(ae.x,ae.y)},g.prototype.arc=function(U,W,te,Q,re,q){if(isNaN(U)||isNaN(W)||isNaN(te)||isNaN(Q)||isNaN(re))throw Tn.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(q=!!q,!this.ctx.transform.isIdentity){var ae=this.ctx.transform.applyToPoint(new o(U,W));U=ae.x,W=ae.y;var ue=this.ctx.transform.applyToPoint(new o(0,te)),me=this.ctx.transform.applyToPoint(new o(0,0));te=Math.sqrt(Math.pow(ue.x-me.x,2)+Math.pow(ue.y-me.y,2))}Math.abs(re-Q)>=2*Math.PI&&(Q=0,re=2*Math.PI),this.path.push({type:"arc",x:U,y:W,radius:te,startAngle:Q,endAngle:re,counterclockwise:q})},g.prototype.arcTo=function(U,W,te,Q,re){throw new Error("arcTo not implemented.")},g.prototype.rect=function(U,W,te,Q){if(isNaN(U)||isNaN(W)||isNaN(te)||isNaN(Q))throw Tn.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(U,W),this.lineTo(U+te,W),this.lineTo(U+te,W+Q),this.lineTo(U,W+Q),this.lineTo(U,W),this.lineTo(U+te,W),this.lineTo(U,W)},g.prototype.fillRect=function(U,W,te,Q){if(isNaN(U)||isNaN(W)||isNaN(te)||isNaN(Q))throw Tn.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!p.call(this)){var re={};this.lineCap!=="butt"&&(re.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(re.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(U,W,te,Q),this.fill(),re.hasOwnProperty("lineCap")&&(this.lineCap=re.lineCap),re.hasOwnProperty("lineJoin")&&(this.lineJoin=re.lineJoin)}},g.prototype.strokeRect=function(U,W,te,Q){if(isNaN(U)||isNaN(W)||isNaN(te)||isNaN(Q))throw Tn.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");b.call(this)||(this.beginPath(),this.rect(U,W,te,Q),this.stroke())},g.prototype.clearRect=function(U,W,te,Q){if(isNaN(U)||isNaN(W)||isNaN(te)||isNaN(Q))throw Tn.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(U,W,te,Q))},g.prototype.save=function(U){U=typeof U!="boolean"||U;for(var W=this.pdf.internal.getCurrentPageInfo().pageNumber,te=0;te<this.pdf.internal.getNumberOfPages();te++)this.pdf.setPage(te+1),this.pdf.internal.out("q");if(this.pdf.setPage(W),U){this.ctx.fontSize=this.pdf.internal.getFontSize();var Q=new u(this.ctx);this.ctxStack.push(this.ctx),this.ctx=Q}},g.prototype.restore=function(U){U=typeof U!="boolean"||U;for(var W=this.pdf.internal.getCurrentPageInfo().pageNumber,te=0;te<this.pdf.internal.getNumberOfPages();te++)this.pdf.setPage(te+1),this.pdf.internal.out("Q");this.pdf.setPage(W),U&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},g.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var y=function(U){var W,te,Q,re;if(U.isCanvasGradient===!0&&(U=U.getColor()),!U)return{r:0,g:0,b:0,a:0,style:U};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(U))W=0,te=0,Q=0,re=0;else{var q=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(U);if(q!==null)W=parseInt(q[1]),te=parseInt(q[2]),Q=parseInt(q[3]),re=1;else if((q=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(U))!==null)W=parseInt(q[1]),te=parseInt(q[2]),Q=parseInt(q[3]),re=parseFloat(q[4]);else{if(re=1,typeof U=="string"&&U.charAt(0)!=="#"){var ae=new kE(U);U=ae.ok?ae.toHex():"#000000"}U.length===4?(W=U.substring(1,2),W+=W,te=U.substring(2,3),te+=te,Q=U.substring(3,4),Q+=Q):(W=U.substring(1,3),te=U.substring(3,5),Q=U.substring(5,7)),W=parseInt(W,16),te=parseInt(te,16),Q=parseInt(Q,16)}}return{r:W,g:te,b:Q,a:re,style:U}},p=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},b=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};g.prototype.fillText=function(U,W,te,Q){if(isNaN(W)||isNaN(te)||typeof U!="string")throw Tn.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(Q=isNaN(Q)?void 0:Q,!p.call(this)){var re=ne(this.ctx.transform.rotation),q=this.ctx.transform.scaleX;I.call(this,{text:U,x:W,y:te,scale:q,angle:re,align:this.textAlign,maxWidth:Q})}},g.prototype.strokeText=function(U,W,te,Q){if(isNaN(W)||isNaN(te)||typeof U!="string")throw Tn.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!b.call(this)){Q=isNaN(Q)?void 0:Q;var re=ne(this.ctx.transform.rotation),q=this.ctx.transform.scaleX;I.call(this,{text:U,x:W,y:te,scale:q,renderingMode:"stroke",angle:re,align:this.textAlign,maxWidth:Q})}},g.prototype.measureText=function(U){if(typeof U!="string")throw Tn.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var W=this.pdf,te=this.pdf.internal.scaleFactor,Q=W.internal.getFontSize(),re=W.getStringUnitWidth(U)*Q/W.internal.scaleFactor;return new function(q){var ae=(q=q||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return ae}}),this}({width:re*=Math.round(96*te/72*1e4)/1e4})},g.prototype.scale=function(U,W){if(isNaN(U)||isNaN(W))throw Tn.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var te=new l(U,0,0,W,0,0);this.ctx.transform=this.ctx.transform.multiply(te)},g.prototype.rotate=function(U){if(isNaN(U))throw Tn.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var W=new l(Math.cos(U),Math.sin(U),-Math.sin(U),Math.cos(U),0,0);this.ctx.transform=this.ctx.transform.multiply(W)},g.prototype.translate=function(U,W){if(isNaN(U)||isNaN(W))throw Tn.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var te=new l(1,0,0,1,U,W);this.ctx.transform=this.ctx.transform.multiply(te)},g.prototype.transform=function(U,W,te,Q,re,q){if(isNaN(U)||isNaN(W)||isNaN(te)||isNaN(Q)||isNaN(re)||isNaN(q))throw Tn.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var ae=new l(U,W,te,Q,re,q);this.ctx.transform=this.ctx.transform.multiply(ae)},g.prototype.setTransform=function(U,W,te,Q,re,q){U=isNaN(U)?1:U,W=isNaN(W)?0:W,te=isNaN(te)?0:te,Q=isNaN(Q)?1:Q,re=isNaN(re)?0:re,q=isNaN(q)?0:q,this.ctx.transform=new l(U,W,te,Q,re,q)};var N=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};g.prototype.drawImage=function(U,W,te,Q,re,q,ae,ue,me){var _e=this.pdf.getImageProperties(U),Le=1,Te=1,Se=1,K=1;Q!==void 0&&ue!==void 0&&(Se=ue/Q,K=me/re,Le=_e.width/Q*ue/Q,Te=_e.height/re*me/re),q===void 0&&(q=W,ae=te,W=0,te=0),Q!==void 0&&ue===void 0&&(ue=Q,me=re),Q===void 0&&ue===void 0&&(ue=_e.width,me=_e.height);var Ce=this.ctx.transform.decompose(),it=ne(Ce.rotate.shx),He=new l,Re=(He=(He=(He=He.multiply(Ce.translate)).multiply(Ce.skew)).multiply(Ce.scale)).applyToRectangle(new a(q-W*Se,ae-te*K,Q*Le,re*Te));if(this.autoPaging){for(var Ze,$e=C.call(this,Re),st=[],Ae=0;Ae<$e.length;Ae+=1)st.indexOf($e[Ae])===-1&&st.push($e[Ae]);L(st);for(var Mt=st[0],gt=st[st.length-1],ze=Mt;ze<gt+1;ze++){this.pdf.setPage(ze);var lt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Nt=ze===1?this.posY+this.margin[0]:this.margin[0],Ge=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],xt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],tt=ze===1?0:Ge+(ze-2)*xt;if(this.ctx.clip_path.length!==0){var Dt=this.path;Ze=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=k(Ze,this.posX+this.margin[3],-tt+Nt+this.ctx.prevPageLastElemOffset),z.call(this,"fill",!0),this.path=Dt}var Qe=JSON.parse(JSON.stringify(Re));Qe=k([Qe],this.posX+this.margin[3],-tt+Nt+this.ctx.prevPageLastElemOffset)[0];var yt=(ze>Mt||ze<gt)&&N.call(this);yt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],lt,xt,null).clip().discardPath()),this.pdf.addImage(U,"JPEG",Qe.x,Qe.y,Qe.w,Qe.h,null,null,it),yt&&this.pdf.restoreGraphicsState()}}else this.pdf.addImage(U,"JPEG",Re.x,Re.y,Re.w,Re.h,null,null,it)};var C=function(U,W,te){var Q=[];W=W||this.pdf.internal.pageSize.width,te=te||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var re=this.posY+this.ctx.prevPageLastElemOffset;switch(U.type){default:case"mt":case"lt":Q.push(Math.floor((U.y+re)/te)+1);break;case"arc":Q.push(Math.floor((U.y+re-U.radius)/te)+1),Q.push(Math.floor((U.y+re+U.radius)/te)+1);break;case"qct":var q=le(this.ctx.lastPoint.x,this.ctx.lastPoint.y,U.x1,U.y1,U.x,U.y);Q.push(Math.floor((q.y+re)/te)+1),Q.push(Math.floor((q.y+q.h+re)/te)+1);break;case"bct":var ae=we(this.ctx.lastPoint.x,this.ctx.lastPoint.y,U.x1,U.y1,U.x2,U.y2,U.x,U.y);Q.push(Math.floor((ae.y+re)/te)+1),Q.push(Math.floor((ae.y+ae.h+re)/te)+1);break;case"rect":Q.push(Math.floor((U.y+re)/te)+1),Q.push(Math.floor((U.y+U.h+re)/te)+1)}for(var ue=0;ue<Q.length;ue+=1)for(;this.pdf.internal.getNumberOfPages()<Q[ue];)_.call(this);return Q},_=function(){var U=this.fillStyle,W=this.strokeStyle,te=this.font,Q=this.lineCap,re=this.lineWidth,q=this.lineJoin;this.pdf.addPage(),this.fillStyle=U,this.strokeStyle=W,this.font=te,this.lineCap=Q,this.lineWidth=re,this.lineJoin=q},k=function(U,W,te){for(var Q=0;Q<U.length;Q++)switch(U[Q].type){case"bct":U[Q].x2+=W,U[Q].y2+=te;case"qct":U[Q].x1+=W,U[Q].y1+=te;default:U[Q].x+=W,U[Q].y+=te}return U},L=function(U){return U.sort(function(W,te){return W-te})},D=function(U,W){var te=this.fillStyle,Q=this.strokeStyle,re=this.lineCap,q=this.lineWidth,ae=Math.abs(q*this.ctx.transform.scaleX),ue=this.lineJoin;if(this.autoPaging){for(var me,_e,Le=JSON.parse(JSON.stringify(this.path)),Te=JSON.parse(JSON.stringify(this.path)),Se=[],K=0;K<Te.length;K++)if(Te[K].x!==void 0)for(var Ce=C.call(this,Te[K]),it=0;it<Ce.length;it+=1)Se.indexOf(Ce[it])===-1&&Se.push(Ce[it]);for(var He=0;He<Se.length;He++)for(;this.pdf.internal.getNumberOfPages()<Se[He];)_.call(this);L(Se);for(var Re=Se[0],Ze=Se[Se.length-1],$e=Re;$e<Ze+1;$e++){this.pdf.setPage($e),this.fillStyle=te,this.strokeStyle=Q,this.lineCap=re,this.lineWidth=ae,this.lineJoin=ue;var st=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ae=$e===1?this.posY+this.margin[0]:this.margin[0],Mt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],gt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ze=$e===1?0:Mt+($e-2)*gt;if(this.ctx.clip_path.length!==0){var lt=this.path;me=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=k(me,this.posX+this.margin[3],-ze+Ae+this.ctx.prevPageLastElemOffset),z.call(this,U,!0),this.path=lt}if(_e=JSON.parse(JSON.stringify(Le)),this.path=k(_e,this.posX+this.margin[3],-ze+Ae+this.ctx.prevPageLastElemOffset),W===!1||$e===0){var Nt=($e>Re||$e<Ze)&&N.call(this);Nt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],st,gt,null).clip().discardPath()),z.call(this,U,W),Nt&&this.pdf.restoreGraphicsState()}this.lineWidth=q}this.path=Le}else this.lineWidth=ae,z.call(this,U,W),this.lineWidth=q},z=function(U,W){if((U!=="stroke"||W||!b.call(this))&&(U==="stroke"||W||!p.call(this))){for(var te,Q,re=[],q=this.path,ae=0;ae<q.length;ae++){var ue=q[ae];switch(ue.type){case"begin":re.push({begin:!0});break;case"close":re.push({close:!0});break;case"mt":re.push({start:ue,deltas:[],abs:[]});break;case"lt":var me=re.length;if(q[ae-1]&&!isNaN(q[ae-1].x)&&(te=[ue.x-q[ae-1].x,ue.y-q[ae-1].y],me>0)){for(;me>=0;me--)if(re[me-1].close!==!0&&re[me-1].begin!==!0){re[me-1].deltas.push(te),re[me-1].abs.push(ue);break}}break;case"bct":te=[ue.x1-q[ae-1].x,ue.y1-q[ae-1].y,ue.x2-q[ae-1].x,ue.y2-q[ae-1].y,ue.x-q[ae-1].x,ue.y-q[ae-1].y],re[re.length-1].deltas.push(te);break;case"qct":var _e=q[ae-1].x+2/3*(ue.x1-q[ae-1].x),Le=q[ae-1].y+2/3*(ue.y1-q[ae-1].y),Te=ue.x+2/3*(ue.x1-ue.x),Se=ue.y+2/3*(ue.y1-ue.y),K=ue.x,Ce=ue.y;te=[_e-q[ae-1].x,Le-q[ae-1].y,Te-q[ae-1].x,Se-q[ae-1].y,K-q[ae-1].x,Ce-q[ae-1].y],re[re.length-1].deltas.push(te);break;case"arc":re.push({deltas:[],abs:[],arc:!0}),Array.isArray(re[re.length-1].abs)&&re[re.length-1].abs.push(ue)}}Q=W?null:U==="stroke"?"stroke":"fill";for(var it=!1,He=0;He<re.length;He++)if(re[He].arc)for(var Re=re[He].abs,Ze=0;Ze<Re.length;Ze++){var $e=Re[Ze];$e.type==="arc"?S.call(this,$e.x,$e.y,$e.radius,$e.startAngle,$e.endAngle,$e.counterclockwise,void 0,W,!it):R.call(this,$e.x,$e.y),it=!0}else if(re[He].close===!0)this.pdf.internal.out("h"),it=!1;else if(re[He].begin!==!0){var st=re[He].start.x,Ae=re[He].start.y;G.call(this,re[He].deltas,st,Ae),it=!0}Q&&T.call(this,Q),W&&M.call(this)}},X=function(U){var W=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,te=W*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return U-te;case"top":return U+W-te;case"hanging":return U+W-2*te;case"middle":return U+W/2-te;default:return U}},j=function(U){return U+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};g.prototype.createLinearGradient=function(){var U=function(){};return U.colorStops=[],U.addColorStop=function(W,te){this.colorStops.push([W,te])},U.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},U.isCanvasGradient=!0,U},g.prototype.createPattern=function(){return this.createLinearGradient()},g.prototype.createRadialGradient=function(){return this.createLinearGradient()};var S=function(U,W,te,Q,re,q,ae,ue,me){for(var _e=pe.call(this,te,Q,re,q),Le=0;Le<_e.length;Le++){var Te=_e[Le];Le===0&&(me?A.call(this,Te.x1+U,Te.y1+W):R.call(this,Te.x1+U,Te.y1+W)),oe.call(this,U,W,Te.x2,Te.y2,Te.x3,Te.y3,Te.x4,Te.y4)}ue?M.call(this):T.call(this,ae)},T=function(U){switch(U){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},M=function(){this.pdf.clip(),this.pdf.discardPath()},A=function(U,W){this.pdf.internal.out(n(U)+" "+r(W)+" m")},I=function(U){var W;switch(U.align){case"right":case"end":W="right";break;case"center":W="center";break;default:W="left"}var te,Q,re,q=this.pdf.getTextDimensions(U.text),ae=X.call(this,U.y),ue=j.call(this,ae)-q.h,me=this.ctx.transform.applyToPoint(new o(U.x,ae));if(this.autoPaging){var _e=this.ctx.transform.decompose(),Le=new l;Le=(Le=(Le=Le.multiply(_e.translate)).multiply(_e.skew)).multiply(_e.scale);for(var Te=this.ctx.transform.applyToRectangle(new a(U.x,ae,q.w,q.h)),Se=Le.applyToRectangle(new a(U.x,ue,q.w,q.h)),K=C.call(this,Se),Ce=[],it=0;it<K.length;it+=1)Ce.indexOf(K[it])===-1&&Ce.push(K[it]);L(Ce);for(var He=Ce[0],Re=Ce[Ce.length-1],Ze=He;Ze<Re+1;Ze++){this.pdf.setPage(Ze);var $e=Ze===1?this.posY+this.margin[0]:this.margin[0],st=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ae=this.pdf.internal.pageSize.height-this.margin[2],Mt=Ae-this.margin[0],gt=this.pdf.internal.pageSize.width-this.margin[1],ze=gt-this.margin[3],lt=Ze===1?0:st+(Ze-2)*Mt;if(this.ctx.clip_path.length!==0){var Nt=this.path;te=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=k(te,this.posX+this.margin[3],-1*lt+$e),z.call(this,"fill",!0),this.path=Nt}var Ge=k([JSON.parse(JSON.stringify(Se))],this.posX+this.margin[3],-lt+$e+this.ctx.prevPageLastElemOffset)[0];U.scale>=.01&&(Q=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Q*U.scale),re=this.lineWidth,this.lineWidth=re*U.scale);var xt=this.autoPaging!=="text";if(xt||Ge.y+Ge.h<=Ae){if(xt||Ge.y>=$e&&Ge.x<=gt){var tt=xt?U.text:this.pdf.splitTextToSize(U.text,U.maxWidth||gt-Ge.x)[0],Dt=k([JSON.parse(JSON.stringify(Te))],this.posX+this.margin[3],-lt+$e+this.ctx.prevPageLastElemOffset)[0],Qe=xt&&(Ze>He||Ze<Re)&&N.call(this);Qe&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ze,Mt,null).clip().discardPath()),this.pdf.text(tt,Dt.x,Dt.y,{angle:U.angle,align:W,renderingMode:U.renderingMode}),Qe&&this.pdf.restoreGraphicsState()}}else Ge.y<Ae&&(this.ctx.prevPageLastElemOffset+=Ae-Ge.y);U.scale>=.01&&(this.pdf.setFontSize(Q),this.lineWidth=re)}}else U.scale>=.01&&(Q=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Q*U.scale),re=this.lineWidth,this.lineWidth=re*U.scale),this.pdf.text(U.text,me.x+this.posX,me.y+this.posY,{angle:U.angle,align:W,renderingMode:U.renderingMode,maxWidth:U.maxWidth}),U.scale>=.01&&(this.pdf.setFontSize(Q),this.lineWidth=re)},R=function(U,W,te,Q){te=te||0,Q=Q||0,this.pdf.internal.out(n(U+te)+" "+r(W+Q)+" l")},G=function(U,W,te){return this.pdf.lines(U,W,te,null,null)},oe=function(U,W,te,Q,re,q,ae,ue){this.pdf.internal.out([e(i(te+U)),e(s(Q+W)),e(i(re+U)),e(s(q+W)),e(i(ae+U)),e(s(ue+W)),"c"].join(" "))},pe=function(U,W,te,Q){for(var re=2*Math.PI,q=Math.PI/2;W>te;)W-=re;var ae=Math.abs(te-W);ae<re&&Q&&(ae=re-ae);for(var ue=[],me=Q?-1:1,_e=W;ae>1e-5;){var Le=_e+me*Math.min(ae,q);ue.push(ge.call(this,U,_e,Le)),ae-=Math.abs(Le-_e),_e=Le}return ue},ge=function(U,W,te){var Q=(te-W)/2,re=U*Math.cos(Q),q=U*Math.sin(Q),ae=re,ue=-q,me=ae*ae+ue*ue,_e=me+ae*re+ue*q,Le=4/3*(Math.sqrt(2*me*_e)-_e)/(ae*q-ue*re),Te=ae-Le*ue,Se=ue+Le*ae,K=Te,Ce=-Se,it=Q+W,He=Math.cos(it),Re=Math.sin(it);return{x1:U*Math.cos(W),y1:U*Math.sin(W),x2:Te*He-Se*Re,y2:Te*Re+Se*He,x3:K*He-Ce*Re,y3:K*Re+Ce*He,x4:U*Math.cos(te),y4:U*Math.sin(te)}},ne=function(U){return 180*U/Math.PI},le=function(U,W,te,Q,re,q){var ae=U+.5*(te-U),ue=W+.5*(Q-W),me=re+.5*(te-re),_e=q+.5*(Q-q),Le=Math.min(U,re,ae,me),Te=Math.max(U,re,ae,me),Se=Math.min(W,q,ue,_e),K=Math.max(W,q,ue,_e);return new a(Le,Se,Te-Le,K-Se)},we=function(U,W,te,Q,re,q,ae,ue){var me,_e,Le,Te,Se,K,Ce,it,He,Re,Ze,$e,st,Ae,Mt=te-U,gt=Q-W,ze=re-te,lt=q-Q,Nt=ae-re,Ge=ue-q;for(_e=0;_e<41;_e++)He=(Ce=(Le=U+(me=_e/40)*Mt)+me*((Se=te+me*ze)-Le))+me*(Se+me*(re+me*Nt-Se)-Ce),Re=(it=(Te=W+me*gt)+me*((K=Q+me*lt)-Te))+me*(K+me*(q+me*Ge-K)-it),_e==0?(Ze=He,$e=Re,st=He,Ae=Re):(Ze=Math.min(Ze,He),$e=Math.min($e,Re),st=Math.max(st,He),Ae=Math.max(Ae,Re));return new a(Math.round(Ze),Math.round($e),Math.round(st-Ze),Math.round(Ae-$e))},de=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var U,W,te=(U=this.ctx.lineDash,W=this.ctx.lineDashOffset,JSON.stringify({lineDash:U,lineDashOffset:W}));this.prevLineDash!==te&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=te)}}})(wt.API),function(t){var e=function(o){var a,l,c,u,g,y,p,b,N,C;for(l=[],c=0,u=(o+=a="\0\0\0\0".slice(o.length%4||4)).length;u>c;c+=4)(g=(o.charCodeAt(c)<<24)+(o.charCodeAt(c+1)<<16)+(o.charCodeAt(c+2)<<8)+o.charCodeAt(c+3))!==0?(y=(g=((g=((g=((g=(g-(C=g%85))/85)-(N=g%85))/85)-(b=g%85))/85)-(p=g%85))/85)%85,l.push(y+33,p+33,b+33,N+33,C+33)):l.push(122);return function(_,k){for(var L=k;L>0;L--)_.pop()}(l,a.length),String.fromCharCode.apply(String,l)+"~>"},n=function(o){var a,l,c,u,g,y=String,p="length",b=255,N="charCodeAt",C="slice",_="replace";for(o[C](-2),o=o[C](0,-2)[_](/\s/g,"")[_]("z","!!!!!"),c=[],u=0,g=(o+=a="uuuuu"[C](o[p]%5||5))[p];g>u;u+=5)l=52200625*(o[N](u)-33)+614125*(o[N](u+1)-33)+7225*(o[N](u+2)-33)+85*(o[N](u+3)-33)+(o[N](u+4)-33),c.push(b&l>>24,b&l>>16,b&l>>8,b&l);return function(k,L){for(var D=L;D>0;D--)k.pop()}(c,a[p]),y.fromCharCode.apply(y,c)},r=function(o){return o.split("").map(function(a){return("0"+a.charCodeAt().toString(16)).slice(-2)}).join("")+">"},i=function(o){var a=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((o=o.replace(/\s/g,"")).indexOf(">")!==-1&&(o=o.substr(0,o.indexOf(">"))),o.length%2&&(o+="0"),a.test(o)===!1)return"";for(var l="",c=0;c<o.length;c+=2)l+=String.fromCharCode("0x"+(o[c]+o[c+1]));return l},s=function(o){for(var a=new Uint8Array(o.length),l=o.length;l--;)a[l]=o.charCodeAt(l);return(a=B2(a)).reduce(function(c,u){return c+String.fromCharCode(u)},"")};t.processDataByFilters=function(o,a){var l=0,c=o||"",u=[];for(typeof(a=a||[])=="string"&&(a=[a]),l=0;l<a.length;l+=1)switch(a[l]){case"ASCII85Decode":case"/ASCII85Decode":c=n(c),u.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":c=e(c),u.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":c=i(c),u.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":c=r(c),u.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":c=s(c),u.push("/FlateDecode");break;default:throw new Error('The filter: "'+a[l]+'" is not implemented')}return{data:c,reverseChain:u.reverse().join(" ")}}}(wt.API),function(t){t.loadFile=function(e,n,r){return function(i,s,o){s=s!==!1,o=typeof o=="function"?o:function(){};var a=void 0;try{a=function(l,c,u){var g=new XMLHttpRequest,y=0,p=function(b){var N=b.length,C=[],_=String.fromCharCode;for(y=0;y<N;y+=1)C.push(_(255&b.charCodeAt(y)));return C.join("")};if(g.open("GET",l,!c),g.overrideMimeType("text/plain; charset=x-user-defined"),c===!1&&(g.onload=function(){g.status===200?u(p(this.responseText)):u(void 0)}),g.send(null),c&&g.status===200)return p(g.responseText)}(i,s,o)}catch{}return a}(e,n,r)},t.loadImageFile=t.loadFile}(wt.API),function(t){function e(){return(It.html2canvas?Promise.resolve(It.html2canvas):V0(()=>import("./html2canvas.esm-CBrSDip1.js"),[])).catch(function(a){return Promise.reject(new Error("Could not load html2canvas: "+a))}).then(function(a){return a.default?a.default:a})}function n(){return(It.DOMPurify?Promise.resolve(It.DOMPurify):V0(()=>import("./purify.es-B9ZVCkUG.js"),[])).catch(function(a){return Promise.reject(new Error("Could not load dompurify: "+a))}).then(function(a){return a.default?a.default:a})}var r=function(a){var l=yn(a);return l==="undefined"?"undefined":l==="string"||a instanceof String?"string":l==="number"||a instanceof Number?"number":l==="function"||a instanceof Function?"function":a&&a.constructor===Array?"array":a&&a.nodeType===1?"element":l==="object"?"object":"unknown"},i=function(a,l){var c=document.createElement(a);for(var u in l.className&&(c.className=l.className),l.innerHTML&&l.dompurify&&(c.innerHTML=l.dompurify.sanitize(l.innerHTML)),l.style)c.style[u]=l.style[u];return c},s=function a(l,c){for(var u=l.nodeType===3?document.createTextNode(l.nodeValue):l.cloneNode(!1),g=l.firstChild;g;g=g.nextSibling)c!==!0&&g.nodeType===1&&g.nodeName==="SCRIPT"||u.appendChild(a(g,c));return l.nodeType===1&&(l.nodeName==="CANVAS"?(u.width=l.width,u.height=l.height,u.getContext("2d").drawImage(l,0,0)):l.nodeName!=="TEXTAREA"&&l.nodeName!=="SELECT"||(u.value=l.value),u.addEventListener("load",function(){u.scrollTop=l.scrollTop,u.scrollLeft=l.scrollLeft},!0)),u},o=function a(l){var c=Object.assign(a.convert(Promise.resolve()),JSON.parse(JSON.stringify(a.template))),u=a.convert(Promise.resolve(),c);return(u=u.setProgress(1,a,1,[a])).set(l)};(o.prototype=Object.create(Promise.prototype)).constructor=o,o.convert=function(a,l){return a.__proto__=l||o.prototype,a},o.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},o.prototype.from=function(a,l){return this.then(function(){switch(l=l||function(c){switch(r(c)){case"string":return"string";case"element":return c.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(a),l){case"string":return this.then(n).then(function(c){return this.set({src:i("div",{innerHTML:a,dompurify:c})})});case"element":return this.set({src:a});case"canvas":return this.set({canvas:a});case"img":return this.set({img:a});default:return this.error("Unknown source type.")}})},o.prototype.to=function(a){switch(a){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},o.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var a={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},l=s(this.prop.src,this.opt.html2canvas.javascriptEnabled);l.tagName==="BODY"&&(a.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:a}),this.prop.container.appendChild(l),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},o.prototype.toCanvas=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(e).then(function(l){var c=Object.assign({},this.opt.html2canvas);return delete c.onrendered,l(this.prop.container,c)}).then(function(l){(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},o.prototype.toContext2d=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(e).then(function(l){var c=this.opt.jsPDF,u=this.opt.fontFaces,g=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,y=Object.assign({async:!0,allowTaint:!0,scale:g,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete y.onrendered,c.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,c.context2d.posX=this.opt.x,c.context2d.posY=this.opt.y,c.context2d.margin=this.opt.margin,c.context2d.fontFaces=u,u)for(var p=0;p<u.length;++p){var b=u[p],N=b.src.find(function(C){return C.format==="truetype"});N&&c.addFont(N.url,b.ref.name,b.ref.style)}return y.windowHeight=y.windowHeight||0,y.windowHeight=y.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):y.windowHeight,c.context2d.save(!0),l(this.prop.container,y)}).then(function(l){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},o.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var a=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=a})},o.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},o.prototype.output=function(a,l,c){return(c=c||"pdf").toLowerCase()==="img"||c.toLowerCase()==="image"?this.outputImg(a,l):this.outputPdf(a,l)},o.prototype.outputPdf=function(a,l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(a,l)})},o.prototype.outputImg=function(a){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(a){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+a+'" is not supported.'}})},o.prototype.save=function(a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(a?{filename:a}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},o.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},o.prototype.set=function(a){if(r(a)!=="object")return this;var l=Object.keys(a||{}).map(function(c){if(c in o.template.prop)return function(){this.prop[c]=a[c]};switch(c){case"margin":return this.setMargin.bind(this,a.margin);case"jsPDF":return function(){return this.opt.jsPDF=a.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,a.pageSize);default:return function(){this.opt[c]=a[c]}}},this);return this.then(function(){return this.thenList(l)})},o.prototype.get=function(a,l){return this.then(function(){var c=a in o.template.prop?this.prop[a]:this.opt[a];return l?l(c):c})},o.prototype.setMargin=function(a){return this.then(function(){switch(r(a)){case"number":a=[a,a,a,a];case"array":if(a.length===2&&(a=[a[0],a[1],a[0],a[1]]),a.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=a}).then(this.setPageSize)},o.prototype.setPageSize=function(a){function l(c,u){return Math.floor(c*u/72*96)}return this.then(function(){(a=a||wt.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(a.inner={width:a.width-this.opt.margin[1]-this.opt.margin[3],height:a.height-this.opt.margin[0]-this.opt.margin[2]},a.inner.px={width:l(a.inner.width,a.k),height:l(a.inner.height,a.k)},a.inner.ratio=a.inner.height/a.inner.width),this.prop.pageSize=a})},o.prototype.setProgress=function(a,l,c,u){return a!=null&&(this.progress.val=a),l!=null&&(this.progress.state=l),c!=null&&(this.progress.n=c),u!=null&&(this.progress.stack=u),this.progress.ratio=this.progress.val/this.progress.state,this},o.prototype.updateProgress=function(a,l,c,u){return this.setProgress(a?this.progress.val+a:null,l||null,c?this.progress.n+c:null,u?this.progress.stack.concat(u):null)},o.prototype.then=function(a,l){var c=this;return this.thenCore(a,l,function(u,g){return c.updateProgress(null,null,1,[u]),Promise.prototype.then.call(this,function(y){return c.updateProgress(null,u),y}).then(u,g).then(function(y){return c.updateProgress(1),y})})},o.prototype.thenCore=function(a,l,c){c=c||Promise.prototype.then;var u=this;a&&(a=a.bind(u)),l&&(l=l.bind(u));var g=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?u:o.convert(Object.assign({},u),Promise.prototype),y=c.call(g,a,l);return o.convert(y,u.__proto__)},o.prototype.thenExternal=function(a,l){return Promise.prototype.then.call(this,a,l)},o.prototype.thenList=function(a){var l=this;return a.forEach(function(c){l=l.thenCore(c)}),l},o.prototype.catch=function(a){a&&(a=a.bind(this));var l=Promise.prototype.catch.call(this,a);return o.convert(l,this)},o.prototype.catchExternal=function(a){return Promise.prototype.catch.call(this,a)},o.prototype.error=function(a){return this.then(function(){throw new Error(a)})},o.prototype.using=o.prototype.set,o.prototype.saveAs=o.prototype.save,o.prototype.export=o.prototype.output,o.prototype.run=o.prototype.then,wt.getPageSize=function(a,l,c){if(yn(a)==="object"){var u=a;a=u.orientation,l=u.unit||l,c=u.format||c}l=l||"mm",c=c||"a4",a=(""+(a||"P")).toLowerCase();var g,y=(""+c).toLowerCase(),p={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(l){case"pt":g=1;break;case"mm":g=72/25.4;break;case"cm":g=72/2.54;break;case"in":g=72;break;case"px":g=.75;break;case"pc":case"em":g=12;break;case"ex":g=6;break;default:throw"Invalid unit: "+l}var b,N=0,C=0;if(p.hasOwnProperty(y))N=p[y][1]/g,C=p[y][0]/g;else try{N=c[1],C=c[0]}catch{throw new Error("Invalid format: "+c)}if(a==="p"||a==="portrait")a="p",C>N&&(b=C,C=N,N=b);else{if(a!=="l"&&a!=="landscape")throw"Invalid orientation: "+a;a="l",N>C&&(b=C,C=N,N=b)}return{width:C,height:N,unit:l,k:g,orientation:a}},t.html=function(a,l){(l=l||{}).callback=l.callback||function(){},l.html2canvas=l.html2canvas||{},l.html2canvas.canvas=l.html2canvas.canvas||this.canvas,l.jsPDF=l.jsPDF||this,l.fontFaces=l.fontFaces?l.fontFaces.map(i1):null;var c=new o(l);return l.worker?c:c.from(a).doCallback()}}(wt.API),wt.API.addJS=function(t){return Kb=t,this.internal.events.subscribe("postPutResources",function(){dp=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(dp+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),Gb=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+Kb+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){dp!==void 0&&Gb!==void 0&&this.internal.out("/Names <</JavaScript "+dp+" 0 R>>")}),this},function(t){var e;t.events.push(["postPutResources",function(){var n=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=n.outline.render().split(/\r\n/),s=0;s<i.length;s++){var o=i[s],a=r.exec(o);if(a!=null){var l=a[1];n.internal.newObjectDeferredBegin(l,!1)}n.internal.write(o)}if(this.outline.createNamedDestinations){var c=this.internal.pages.length,u=[];for(s=0;s<c;s++){var g=n.internal.newObject();u.push(g);var y=n.internal.getPageInfo(s+1);n.internal.write("<< /D["+y.objId+" 0 R /XYZ null null null]>> endobj")}var p=n.internal.newObject();for(n.internal.write("<< /Names [ "),s=0;s<u.length;s++)n.internal.write("(page_"+(s+1)+")"+u[s]+" 0 R");n.internal.write(" ] >>","endobj"),e=n.internal.newObject(),n.internal.write("<< /Dests "+p+" 0 R"),n.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){var n=this;n.outline.root.children.length>0&&(n.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&n.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var n=this;n.outline={createNamedDestinations:!1,root:{children:[]}},n.outline.add=function(r,i,s){var o={title:i,options:s,children:[]};return r==null&&(r=this.root),r.children.push(o),o},n.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=n,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},n.outline.genIds_r=function(r){r.id=n.internal.newObjectDeferred();for(var i=0;i<r.children.length;i++)this.genIds_r(r.children[i])},n.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},n.outline.renderItems=function(r){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<r.children.length;s++){var o=r.children[s];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(r)),s>0&&this.line("/Prev "+this.makeRef(r.children[s-1])),s<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[s+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var a=this.count=this.count_r({count:0},o);if(a>0&&this.line("/Count "+a),o.options&&o.options.pageNumber){var l=n.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+l.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var c=0;c<r.children.length;c++)this.renderItems(r.children[c])},n.outline.line=function(r){this.ctx.val+=r+`\r
`},n.outline.makeRef=function(r){return r.id+" 0 R"},n.outline.makeString=function(r){return"("+n.internal.pdfEscape(r)+")"},n.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},n.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},n.outline.count_r=function(r,i){for(var s=0;s<i.children.length;s++)r.count++,this.count_r(r,i.children[s]);return r.count}}])}(wt.API),function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(n,r,i,s,o,a){var l,c=this.decode.DCT_DECODE,u=null;if(typeof n=="string"||this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n)){switch(n=o||n,n=this.__addimage__.isArrayBuffer(n)?new Uint8Array(n):n,l=function(g){for(var y,p=256*g.charCodeAt(4)+g.charCodeAt(5),b=g.length,N={width:0,height:0,numcomponents:1},C=4;C<b;C+=2){if(C+=p,e.indexOf(g.charCodeAt(C+1))!==-1){y=256*g.charCodeAt(C+5)+g.charCodeAt(C+6),N={width:256*g.charCodeAt(C+7)+g.charCodeAt(C+8),height:y,numcomponents:g.charCodeAt(C+9)};break}p=256*g.charCodeAt(C+2)+g.charCodeAt(C+3)}return N}(n=this.__addimage__.isArrayBufferView(n)?this.__addimage__.arrayBufferToBinaryString(n):n),l.numcomponents){case 1:a=this.color_spaces.DEVICE_GRAY;break;case 4:a=this.color_spaces.DEVICE_CMYK;break;case 3:a=this.color_spaces.DEVICE_RGB}u={data:n,width:l.width,height:l.height,colorSpace:a,bitsPerComponent:8,filter:c,index:r,alias:i}}return u}}(wt.API),wt.API.processPNG=function(t,e,n,r){if(this.__addimage__.isArrayBuffer(t)&&(t=new Uint8Array(t)),this.__addimage__.isArrayBufferView(t)){var i,s=WV(t,{checkCrc:!0}),o=s.width,a=s.height,l=s.channels,c=s.palette,u=s.depth;i=c&&l===1?function(S){for(var T=S.width,M=S.height,A=S.data,I=S.palette,R=S.depth,G=!1,oe=[],pe=[],ge=void 0,ne=!1,le=0,we=0;we<I.length;we++){var de=J_(I[we],4),U=de[0],W=de[1],te=de[2],Q=de[3];oe.push(U,W,te),Q!=null&&(Q===0?(le++,pe.length<1&&pe.push(we)):Q<255&&(ne=!0))}if(ne||le>1){G=!0,pe=void 0;var re=T*M;ge=new Uint8Array(re);for(var q=new DataView(A.buffer),ae=0;ae<re;ae++){var ue=o1(q,ae,R),me=J_(I[ue],4)[3];ge[ae]=me}}else le===0&&(pe=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:G?8:void 0,colorBytes:A,alphaBytes:ge,needSMask:G,palette:oe,mask:pe}}(s):l===2||l===4?function(S){for(var T=S.data,M=S.width,A=S.height,I=S.channels,R=S.depth,G=I===2?"DeviceGray":"DeviceRGB",oe=I-1,pe=M*A,ge=oe,ne=pe*ge,le=1*pe,we=Math.ceil(ne*R/8),de=Math.ceil(le*R/8),U=new Uint8Array(we),W=new Uint8Array(de),te=new DataView(T.buffer),Q=new DataView(U.buffer),re=new DataView(W.buffer),q=!1,ae=0;ae<pe;ae++){for(var ue=ae*I,me=0;me<ge;me++)r4(Q,o1(te,ue+me,R),ae*ge+me,R);var _e=o1(te,ue+ge,R);_e<(1<<R)-1&&(q=!0),r4(re,_e,1*ae,R)}return{colorSpace:G,colorsPerPixel:oe,sMaskBitsPerComponent:q?R:void 0,colorBytes:U,alphaBytes:W,needSMask:q}}(s):function(S){var T=S.data,M=S.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:M,colorsPerPixel:M==="DeviceGray"?1:3,colorBytes:T instanceof Uint16Array?function(A){for(var I=A.length,R=new Uint8Array(2*I),G=new DataView(R.buffer,R.byteOffset,R.byteLength),oe=0;oe<I;oe++)G.setUint16(2*oe,A[oe],!1);return R}(T):T,needSMask:!1}}(s);var g,y,p,b=i,N=b.colorSpace,C=b.colorsPerPixel,_=b.sMaskBitsPerComponent,k=b.colorBytes,L=b.alphaBytes,D=b.needSMask,z=b.palette,X=b.mask,j=null;return r!==wt.API.image_compression.NONE&&typeof B2=="function"?(j=function(S){var T;switch(S){case wt.API.image_compression.FAST:T=11;break;case wt.API.image_compression.MEDIUM:T=13;break;case wt.API.image_compression.SLOW:T=14;break;default:T=12}return T}(r),g=this.decode.FLATE_DECODE,y="/Predictor ".concat(j," /Colors ").concat(C," /BitsPerComponent ").concat(u," /Columns ").concat(o),t=Jb(k,Math.ceil(o*C*u/8),C,u,r),D&&(p=Jb(L,Math.ceil(o*_/8),1,_,r))):(g=void 0,y=void 0,t=k,D&&(p=L)),(this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t))&&(t=this.__addimage__.arrayBufferToBinaryString(t)),(p&&this.__addimage__.isArrayBuffer(p)||this.__addimage__.isArrayBufferView(p))&&(p=this.__addimage__.arrayBufferToBinaryString(p)),{alias:n,data:t,index:e,filter:g,decodeParameters:y,transparency:X,palette:z,sMask:p,predictor:j,width:o,height:a,bitsPerComponent:u,sMaskBitsPerComponent:_,colorSpace:N}}},function(t){t.processGIF89A=function(e,n,r,i){var s=new dB(e),o=s.width,a=s.height,l=[];s.decodeAndBlitFrameRGBA(0,l);var c={data:l,width:o,height:a},u=new a1(100).encode(c,100);return t.processJPEG.call(this,u,n,r,i)},t.processGIF87A=t.processGIF89A}(wt.API),Ws.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:i,green:r,blue:n,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Ws.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(n){Tn.log("bit decode error:"+n)}},Ws.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),n=e%4;for(t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<e;i++)for(var s=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+8*i*4,a=0;a<8&&8*i+a<this.width;a++){var l=this.palette[s>>7-a&1];this.data[o+4*a]=l.blue,this.data[o+4*a+1]=l.green,this.data[o+4*a+2]=l.red,this.data[o+4*a+3]=255}n!==0&&(this.pos+=4-n)}},Ws.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<t;i++){var s=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+2*i*4,a=s>>4,l=15&s,c=this.palette[a];if(this.data[o]=c.blue,this.data[o+1]=c.green,this.data[o+2]=c.red,this.data[o+3]=255,2*i+1>=this.width)break;c=this.palette[l],this.data[o+4]=c.blue,this.data[o+4+1]=c.green,this.data[o+4+2]=c.red,this.data[o+4+3]=255}e!==0&&(this.pos+=4-e)}},Ws.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),s=n*this.width*4+4*r;if(i<this.palette.length){var o=this.palette[i];this.data[s]=o.red,this.data[s+1]=o.green,this.data[s+2]=o.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}t!==0&&(this.pos+=4-t)}},Ws.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(s&e)/e*255|0,a=(s>>5&e)/e*255|0,l=(s>>10&e)/e*255|0,c=s>>15?255:0,u=r*this.width*4+4*i;this.data[u]=l,this.data[u+1]=a,this.data[u+2]=o,this.data[u+3]=c}this.pos+=t}},Ws.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),n=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,s=0;s<this.width;s++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(o&e)/e*255|0,l=(o>>5&n)/n*255|0,c=(o>>11)/e*255|0,u=i*this.width*4+4*s;this.data[u]=c,this.data[u+1]=l,this.data[u+2]=a,this.data[u+3]=255}this.pos+=t}},Ws.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*n;this.data[o]=s,this.data[o+1]=i,this.data[o+2]=r,this.data[o+3]=255}this.pos+=this.width%4}},Ws.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*n;this.data[a]=s,this.data[a+1]=i,this.data[a+2]=r,this.data[a+3]=o}},Ws.prototype.getData=function(){return this.data},function(t){t.processBMP=function(e,n,r,i){var s=new Ws(e,!1),o=s.width,a=s.height,l={data:s.getData(),width:o,height:a},c=new a1(100).encode(l,100);return t.processJPEG.call(this,c,n,r,i)}}(wt.API),s4.prototype.getData=function(){return this.data},function(t){t.processWEBP=function(e,n,r,i){var s=new s4(e),o=s.width,a=s.height,l={data:s.getData(),width:o,height:a},c=new a1(100).encode(l,100);return t.processJPEG.call(this,c,n,r,i)}}(wt.API),wt.API.processRGBA=function(t,e,n){for(var r=t.data,i=r.length,s=new Uint8Array(i/4*3),o=new Uint8Array(i/4),a=0,l=0,c=0;c<i;c+=4){var u=r[c],g=r[c+1],y=r[c+2],p=r[c+3];s[a++]=u,s[a++]=g,s[a++]=y,o[l++]=p}var b=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:b,index:e,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},wt.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Xc=wt.API,fp=Xc.getCharWidthsArray=function(t,e){var n,r,i=(e=e||{}).font||this.internal.getFont(),s=e.fontSize||this.internal.getFontSize(),o=e.charSpace||this.internal.getCharSpace(),a=e.widths?e.widths:i.metadata.Unicode.widths,l=a.fof?a.fof:1,c=e.kerning?e.kerning:i.metadata.Unicode.kerning,u=c.fof?c.fof:1,g=e.doKerning!==!1,y=0,p=t.length,b=0,N=a[0]||l,C=[];for(n=0;n<p;n++)r=t.charCodeAt(n),typeof i.metadata.widthOfString=="function"?C.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(r))+o*(1e3/s)||0)/1e3):(y=g&&yn(c[r])==="object"&&!isNaN(parseInt(c[r][b],10))?c[r][b]/u:0,C.push((a[r]||N)/l+y)),b=r;return C},Yb=Xc.getStringUnitWidth=function(t,e){var n=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),i=e.charSpace||this.internal.getCharSpace();return Xc.processArabic&&(t=Xc.processArabic(t)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(t,n,i)/n:fp.apply(this,arguments).reduce(function(s,o){return s+o},0)},Qb=function(t,e,n,r){for(var i=[],s=0,o=t.length,a=0;s!==o&&a+e[s]<n;)a+=e[s],s++;i.push(t.slice(0,s));var l=s;for(a=0;s!==o;)a+e[s]>r&&(i.push(t.slice(l,s)),a=0,l=s),a+=e[s],s++;return l!==s&&i.push(t.slice(l,s)),i},Xb=function(t,e,n){n||(n={});var r,i,s,o,a,l,c,u=[],g=[u],y=n.textIndent||0,p=0,b=0,N=t.split(" "),C=fp.apply(this,[" ",n])[0];if(l=n.lineIndent===-1?N[0].length+2:n.lineIndent||0){var _=Array(l).join(" "),k=[];N.map(function(D){(D=D.split(/\s*\n/)).length>1?k=k.concat(D.map(function(z,X){return(X&&z.length?`
`:"")+z})):k.push(D[0])}),N=k,l=Yb.apply(this,[_,n])}for(s=0,o=N.length;s<o;s++){var L=0;if(r=N[s],l&&r[0]==`
`&&(r=r.substr(1),L=1),y+p+(b=(i=fp.apply(this,[r,n])).reduce(function(D,z){return D+z},0))>e||L){if(b>e){for(a=Qb.apply(this,[r,i,e-(y+p),e]),u.push(a.shift()),u=[a.pop()];a.length;)g.push([a.shift()]);b=i.slice(r.length-(u[0]?u[0].length:0)).reduce(function(D,z){return D+z},0)}else u=[r];g.push(u),y=b+l,p=C}else u.push(r),y+=p+b,p=C}return c=l?function(D,z){return(z?_:"")+D.join(" ")}:function(D){return D.join(" ")},g.map(c)},Xc.splitTextToSize=function(t,e,n){var r,i=(n=n||{}).fontSize||this.internal.getFontSize(),s=(function(u){if(u.widths&&u.kerning)return{widths:u.widths,kerning:u.kerning};var g=this.internal.getFont(u.fontName,u.fontStyle),y="Unicode";return g.metadata[y]?{widths:g.metadata[y].widths||{0:1},kerning:g.metadata[y].kerning||{}}:{font:g.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,n);r=Array.isArray(t)?t:String(t).split(/\r?\n/);var o=1*this.internal.scaleFactor*e/i;s.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/i:0,s.lineIndent=n.lineIndent;var a,l,c=[];for(a=0,l=r.length;a<l;a++)c=c.concat(Xb.apply(this,[r[a],o,s]));return c},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="0123456789abcdef",n="klmnopqrstuvwxyz",r={},i={},s=0;s<16;s++)r[n[s]]=e[s],i[e[s]]=n[s];var o=function(y){return"0x"+parseInt(y,10).toString(16)},a=t.__fontmetrics__.compress=function(y){var p,b,N,C,_=["{"];for(var k in y){if(p=y[k],isNaN(parseInt(k,10))?b="'"+k+"'":(k=parseInt(k,10),b=(b=o(k).slice(2)).slice(0,-1)+i[b.slice(-1)]),typeof p=="number")p<0?(N=o(p).slice(3),C="-"):(N=o(p).slice(2),C=""),N=C+N.slice(0,-1)+i[N.slice(-1)];else{if(yn(p)!=="object")throw new Error("Don't know what to do with value type "+yn(p)+".");N=a(p)}_.push(b+N)}return _.push("}"),_.join("")},l=t.__fontmetrics__.uncompress=function(y){if(typeof y!="string")throw new Error("Invalid argument passed to uncompress.");for(var p,b,N,C,_={},k=1,L=_,D=[],z="",X="",j=y.length-1,S=1;S<j;S+=1)(C=y[S])=="'"?p?(N=p.join(""),p=void 0):p=[]:p?p.push(C):C=="{"?(D.push([L,N]),L={},N=void 0):C=="}"?((b=D.pop())[0][b[1]]=L,N=void 0,L=b[0]):C=="-"?k=-1:N===void 0?r.hasOwnProperty(C)?(z+=r[C],N=parseInt(z,16)*k,k=1,z=""):z+=C:r.hasOwnProperty(C)?(X+=r[C],L[N]=parseInt(X,16)*k,k=1,N=void 0,X=""):X+=C;return _},c={codePages:["WinAnsiEncoding"],WinAnsiEncoding:l("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},u={Unicode:{Courier:c,"Courier-Bold":c,"Courier-BoldOblique":c,"Courier-Oblique":c,Helvetica:c,"Helvetica-Bold":c,"Helvetica-BoldOblique":c,"Helvetica-Oblique":c,"Times-Roman":c,"Times-Bold":c,"Times-BoldItalic":c,"Times-Italic":c}},g={Unicode:{"Courier-Oblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":l("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":l("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:l("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:l("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":l("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":l("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(y){var p=y.font,b=g.Unicode[p.postScriptName];b&&(p.metadata.Unicode={},p.metadata.Unicode.widths=b.widths,p.metadata.Unicode.kerning=b.kerning);var N=u.Unicode[p.postScriptName];N&&(p.metadata.Unicode.encoding=N,p.encoding=N.codePages[0])}])}(wt.API),function(t){var e=function(n){for(var r=n.length,i=new Uint8Array(r),s=0;s<r;s++)i[s]=n.charCodeAt(s);return i};t.API.events.push(["addFont",function(n){var r=void 0,i=n.font,s=n.instance;if(!i.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(r=s.existsFileInVFS(i.postScriptName)===!1?s.loadFile(i.postScriptName):s.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(o,a){a=/^\x00\x01\x00\x00/.test(a)?e(a):e(Op(a)),o.metadata=t.API.TTFFont.open(a),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(i,r)}}])}(wt),wt.API.addSvgAsImage=function(t,e,n,r,i,s,o,a){if(isNaN(e)||isNaN(n))throw Tn.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(r)||isNaN(i))throw Tn.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var l=document.createElement("canvas");l.width=r,l.height=i;var c=l.getContext("2d");c.fillStyle="#fff",c.fillRect(0,0,l.width,l.height);var u={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},g=this;return(It.canvg?Promise.resolve(It.canvg):V0(()=>import("./index.es-DHgbmVjf.js"),[])).catch(function(y){return Promise.reject(new Error("Could not load canvg: "+y))}).then(function(y){return y.default?y.default:y}).then(function(y){return y.fromString(c,t,u)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(y){return y.render(u)}).then(function(){g.addImage(l.toDataURL("image/jpeg",1),e,n,r,i,o,a)})},wt.API.putTotalPages=function(t){var e,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),n=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var i=0;i<this.internal.pages[r].length;i++)this.internal.pages[r][i]=this.internal.pages[r][i].replace(e,n);return this},wt.API.viewerPreferences=function(t,e){var n;t=t||{},e=e||!1;var r,i,s,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},a=Object.keys(o),l=[],c=0,u=0,g=0;function y(b,N){var C,_=!1;for(C=0;C<b.length;C+=1)b[C]===N&&(_=!0);return _}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var p=a.length;for(g=0;g<p;g+=1)n[a[g]].value=n[a[g]].defaultValue,n[a[g]].explicitSet=!1}if(yn(t)==="object"){for(i in t)if(s=t[i],y(a,i)&&s!==void 0){if(n[i].type==="boolean"&&typeof s=="boolean")n[i].value=s;else if(n[i].type==="name"&&y(n[i].valueSet,s))n[i].value=s;else if(n[i].type==="integer"&&Number.isInteger(s))n[i].value=s;else if(n[i].type==="array"){for(c=0;c<s.length;c+=1)if(r=!0,s[c].length===1&&typeof s[c][0]=="number")l.push(String(s[c]-1));else if(s[c].length>1){for(u=0;u<s[c].length;u+=1)typeof s[c][u]!="number"&&(r=!1);r===!0&&l.push([s[c][0]-1,s[c][1]-1].join(" "))}n[i].value="["+l.join(" ")+"]"}else n[i].value=n[i].defaultValue;n[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var b,N=[];for(b in n)n[b].explicitSet===!0&&(n[b].type==="name"?N.push("/"+b+" /"+n[b].value):N.push("/"+b+" "+n[b].value));N.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+N.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},function(t){var e=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(r)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),a=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),l=unescape(encodeURIComponent("</x:xmpmeta>")),c=s.length+o.length+a.length+i.length+l.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+c+" >>"),this.internal.write("stream"),this.internal.write(i+s+o+a+l),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(r,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",e)),this}}(wt.API),function(t){var e=t.API,n=e.pdfEscape16=function(s,o){for(var a,l=o.metadata.Unicode.widths,c=["","0","00","000","0000"],u=[""],g=0,y=s.length;g<y;++g){if(a=o.metadata.characterToGlyph(s.charCodeAt(g)),o.metadata.glyIdsUsed.push(a),o.metadata.toUnicode[a]=s.charCodeAt(g),l.indexOf(a)==-1&&(l.push(a),l.push([parseInt(o.metadata.widthOfGlyph(a),10)])),a=="0")return u.join("");a=a.toString(16),u.push(c[4-a.length],a)}return u.join("")},r=function(s){var o,a,l,c,u,g,y;for(u=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,l=[],g=0,y=(a=Object.keys(s).sort(function(p,b){return p-b})).length;g<y;g++)o=a[g],l.length>=100&&(u+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar`,l=[]),s[o]!==void 0&&s[o]!==null&&typeof s[o].toString=="function"&&(c=("0000"+s[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),l.push("<"+o+"><"+c+">"));return l.length&&(u+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar
`),u+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(s){(function(o){var a=o.font,l=o.out,c=o.newObject,u=o.putStream;if(a.metadata instanceof t.API.TTFFont&&a.encoding==="Identity-H"){for(var g=a.metadata.Unicode.widths,y=a.metadata.subset.encode(a.metadata.glyIdsUsed,1),p="",b=0;b<y.length;b++)p+=String.fromCharCode(y[b]);var N=c();u({data:p,addLength1:!0,objectId:N}),l("endobj");var C=c();u({data:r(a.metadata.toUnicode),addLength1:!0,objectId:C}),l("endobj");var _=c();l("<<"),l("/Type /FontDescriptor"),l("/FontName /"+nu(a.fontName)),l("/FontFile2 "+N+" 0 R"),l("/FontBBox "+t.API.PDFObject.convert(a.metadata.bbox)),l("/Flags "+a.metadata.flags),l("/StemV "+a.metadata.stemV),l("/ItalicAngle "+a.metadata.italicAngle),l("/Ascent "+a.metadata.ascender),l("/Descent "+a.metadata.decender),l("/CapHeight "+a.metadata.capHeight),l(">>"),l("endobj");var k=c();l("<<"),l("/Type /Font"),l("/BaseFont /"+nu(a.fontName)),l("/FontDescriptor "+_+" 0 R"),l("/W "+t.API.PDFObject.convert(g)),l("/CIDToGIDMap /Identity"),l("/DW 1000"),l("/Subtype /CIDFontType2"),l("/CIDSystemInfo"),l("<<"),l("/Supplement 0"),l("/Registry (Adobe)"),l("/Ordering ("+a.encoding+")"),l(">>"),l(">>"),l("endobj"),a.objectNumber=c(),l("<<"),l("/Type /Font"),l("/Subtype /Type0"),l("/ToUnicode "+C+" 0 R"),l("/BaseFont /"+nu(a.fontName)),l("/Encoding /"+a.encoding),l("/DescendantFonts ["+k+" 0 R]"),l(">>"),l("endobj"),a.isAlreadyPutted=!0}})(s)}]),e.events.push(["putFont",function(s){(function(o){var a=o.font,l=o.out,c=o.newObject,u=o.putStream;if(a.metadata instanceof t.API.TTFFont&&a.encoding==="WinAnsiEncoding"){for(var g=a.metadata.rawData,y="",p=0;p<g.length;p++)y+=String.fromCharCode(g[p]);var b=c();u({data:y,addLength1:!0,objectId:b}),l("endobj");var N=c();u({data:r(a.metadata.toUnicode),addLength1:!0,objectId:N}),l("endobj");var C=c();l("<<"),l("/Descent "+a.metadata.decender),l("/CapHeight "+a.metadata.capHeight),l("/StemV "+a.metadata.stemV),l("/Type /FontDescriptor"),l("/FontFile2 "+b+" 0 R"),l("/Flags 96"),l("/FontBBox "+t.API.PDFObject.convert(a.metadata.bbox)),l("/FontName /"+nu(a.fontName)),l("/ItalicAngle "+a.metadata.italicAngle),l("/Ascent "+a.metadata.ascender),l(">>"),l("endobj"),a.objectNumber=c();for(var _=0;_<a.metadata.hmtx.widths.length;_++)a.metadata.hmtx.widths[_]=parseInt(a.metadata.hmtx.widths[_]*(1e3/a.metadata.head.unitsPerEm));l("<</Subtype/TrueType/Type/Font/ToUnicode "+N+" 0 R/BaseFont/"+nu(a.fontName)+"/FontDescriptor "+C+" 0 R/Encoding/"+a.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(a.metadata.hmtx.widths)+">>"),l("endobj"),a.isAlreadyPutted=!0}})(s)}]);var i=function(s){var o,a=s.text||"",l=s.x,c=s.y,u=s.options||{},g=s.mutex||{},y=g.pdfEscape,p=g.activeFontKey,b=g.fonts,N=p,C="",_=0,k="",L=b[N].encoding;if(b[N].encoding!=="Identity-H")return{text:a,x:l,y:c,options:u,mutex:g};for(k=a,N=p,Array.isArray(a)&&(k=a[0]),_=0;_<k.length;_+=1)b[N].metadata.hasOwnProperty("cmap")&&(o=b[N].metadata.cmap.unicode.codeMap[k[_].charCodeAt(0)]),o||k[_].charCodeAt(0)<256&&b[N].metadata.hasOwnProperty("Unicode")?C+=k[_]:C+="";var D="";return parseInt(N.slice(1))<14||L==="WinAnsiEncoding"?D=y(C,N).split("").map(function(z){return z.charCodeAt(0).toString(16)}).join(""):L==="Identity-H"&&(D=n(C,b[N])),g.isHex=!0,{text:D,x:l,y:c,options:u,mutex:g}};e.events.push(["postProcessText",function(s){var o=s.text||"",a=[],l={text:o,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(o)){var c=0;for(c=0;c<o.length;c+=1)Array.isArray(o[c])&&o[c].length===3?a.push([i(Object.assign({},l,{text:o[c][0]})).text,o[c][1],o[c][2]]):a.push(i(Object.assign({},l,{text:o[c]})).text);s.text=a}else s.text=i(Object.assign({},l,{text:o})).text}])}(wt),function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0},t.addFileToVFS=function(n,r){return e.call(this),this.internal.vFS[n]=r,this},t.getFileFromVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0?this.internal.vFS[n]:null}}(wt.API),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(r){var i,s,o,a,l,c,u,g=e,y=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],p=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],b={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},N={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},C=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],_=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),k=!1,L=0;this.__bidiEngine__={};var D=function(A){var I=A.charCodeAt(),R=I>>8,G=N[R];return G!==void 0?g[256*G+(255&I)]:R===252||R===253?"AL":_.test(R)?"L":R===8?"R":"N"},z=function(A){for(var I,R=0;R<A.length;R++){if((I=D(A.charAt(R)))==="L")return!1;if(I==="R")return!0}return!1},X=function(A,I,R,G){var oe,pe,ge,ne,le=I[G];switch(le){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":k=!1;break;case"N":case"AN":break;case"EN":k&&(le="AN");break;case"AL":k=!0,le="R";break;case"WS":case"BN":le="N";break;case"CS":G<1||G+1>=I.length||(oe=R[G-1])!=="EN"&&oe!=="AN"||(pe=I[G+1])!=="EN"&&pe!=="AN"?le="N":k&&(pe="AN"),le=pe===oe?pe:"N";break;case"ES":le=(oe=G>0?R[G-1]:"B")==="EN"&&G+1<I.length&&I[G+1]==="EN"?"EN":"N";break;case"ET":if(G>0&&R[G-1]==="EN"){le="EN";break}if(k){le="N";break}for(ge=G+1,ne=I.length;ge<ne&&I[ge]==="ET";)ge++;le=ge<ne&&I[ge]==="EN"?"EN":"N";break;case"NSM":if(o&&!a){for(ne=I.length,ge=G+1;ge<ne&&I[ge]==="NSM";)ge++;if(ge<ne){var we=A[G],de=we>=1425&&we<=2303||we===64286;if(oe=I[ge],de&&(oe==="R"||oe==="AL")){le="R";break}}}le=G<1||(oe=I[G-1])==="B"?"N":R[G-1];break;case"B":k=!1,i=!0,le=L;break;case"S":s=!0,le="N"}return le},j=function(A,I,R){var G=A.split("");return R&&S(G,R,{hiLevel:L}),G.reverse(),I&&I.reverse(),G.join("")},S=function(A,I,R){var G,oe,pe,ge,ne,le=-1,we=A.length,de=0,U=[],W=L?p:y,te=[];for(k=!1,i=!1,s=!1,oe=0;oe<we;oe++)te[oe]=D(A[oe]);for(pe=0;pe<we;pe++){if(ne=de,U[pe]=X(A,te,U,pe),G=240&(de=W[ne][b[U[pe]]]),de&=15,I[pe]=ge=W[de][5],G>0)if(G===16){for(oe=le;oe<pe;oe++)I[oe]=1;le=-1}else le=-1;if(W[de][6])le===-1&&(le=pe);else if(le>-1){for(oe=le;oe<pe;oe++)I[oe]=ge;le=-1}te[pe]==="B"&&(I[pe]=0),R.hiLevel|=ge}s&&function(Q,re,q){for(var ae=0;ae<q;ae++)if(Q[ae]==="S"){re[ae]=L;for(var ue=ae-1;ue>=0&&Q[ue]==="WS";ue--)re[ue]=L}}(te,I,we)},T=function(A,I,R,G,oe){if(!(oe.hiLevel<A)){if(A===1&&L===1&&!i)return I.reverse(),void(R&&R.reverse());for(var pe,ge,ne,le,we=I.length,de=0;de<we;){if(G[de]>=A){for(ne=de+1;ne<we&&G[ne]>=A;)ne++;for(le=de,ge=ne-1;le<ge;le++,ge--)pe=I[le],I[le]=I[ge],I[ge]=pe,R&&(pe=R[le],R[le]=R[ge],R[ge]=pe);de=ne}de++}}},M=function(A,I,R){var G=A.split(""),oe={hiLevel:L};return R||(R=[]),S(G,R,oe),function(pe,ge,ne){if(ne.hiLevel!==0&&u)for(var le,we=0;we<pe.length;we++)ge[we]===1&&(le=C.indexOf(pe[we]))>=0&&(pe[we]=C[le+1])}(G,R,oe),T(2,G,I,R,oe),T(1,G,I,R,oe),G.join("")};return this.__bidiEngine__.doBidiReorder=function(A,I,R){if(function(oe,pe){if(pe)for(var ge=0;ge<oe.length;ge++)pe[ge]=ge;a===void 0&&(a=z(oe)),c===void 0&&(c=z(oe))}(A,I),o||!l||c)if(o&&l&&a^c)L=a?1:0,A=j(A,I,R);else if(!o&&l&&c)L=a?1:0,A=M(A,I,R),A=j(A,I);else if(!o||a||l||c){if(o&&!l&&a^c)A=j(A,I),a?(L=0,A=M(A,I,R)):(L=1,A=M(A,I,R),A=j(A,I));else if(o&&a&&!l&&c)L=1,A=M(A,I,R),A=j(A,I);else if(!o&&!l&&a^c){var G=u;a?(L=1,A=M(A,I,R),L=0,u=!1,A=M(A,I,R),u=G):(L=0,A=M(A,I,R),A=j(A,I),L=1,u=!1,A=M(A,I,R),u=G,A=j(A,I))}}else L=0,A=M(A,I,R);else L=a?1:0,A=M(A,I,R);return A},this.__bidiEngine__.setOptions=function(A){A&&(o=A.isInputVisual,l=A.isOutputVisual,a=A.isInputRtl,c=A.isOutputRtl,u=A.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(r){var i=r.text;r.x,r.y;var s=r.options||{};r.mutex,s.lang;var o=[];if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,n.setOptions(s),Object.prototype.toString.call(i)==="[object Array]"){var a=0;for(o=[],a=0;a<i.length;a+=1)Object.prototype.toString.call(i[a])==="[object Array]"?o.push([n.doBidiReorder(i[a][0]),i[a][1],i[a][2]]):o.push([n.doBidiReorder(i[a])]);r.text=o}else r.text=n.doBidiReorder(i);n.setOptions({isInputVisual:!0})}])}(wt),wt.API.TTFFont=function(){function t(e){var n;if(this.rawData=e,n=this.contents=new Sl(e),this.contents.pos=4,n.readString(4)==="ttcf")throw new Error("TTCF not supported.");n.pos=0,this.parse(),this.subset=new TB(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new fB(this.contents),this.head=new mB(this),this.name=new xB(this),this.cmap=new VE(this),this.toUnicode={},this.hhea=new gB(this),this.maxp=new _B(this),this.hmtx=new bB(this),this.post=new vB(this),this.os2=new yB(this),this.loca=new EB(this),this.glyf=new NB(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,n,r,i,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,a,l,c;for(c=[],o=0,a=(l=this.bbox).length;o<a;o++)e=l[o],c.push(Math.round(e*this.scaleFactor));return c}).call(this),this.stemV=0,this.post.exists?(r=255&(i=this.post.italic_angle),32768&(n=i>>16)&&(n=-(1+(65535^n))),this.italicAngle=+(n+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var n;return((n=this.cmap.unicode)!=null?n.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var n;return n=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*n},t.prototype.widthOfString=function(e,n,r){var i,s,o,a;for(o=0,s=0,a=(e=""+e).length;0<=a?s<a:s>a;s=0<=a?++s:--s)i=e.charCodeAt(s),o+=this.widthOfGlyph(this.characterToGlyph(i))+r*(1e3/n)||0;return o*(n/1e3)},t.prototype.lineHeight=function(e,n){var r;return n==null&&(n=!1),r=n?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},t}();var so,Sl=function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var n,r;for(r=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)r[n]=String.fromCharCode(this.readByte());return r.join("")},t.prototype.writeString=function(e){var n,r,i;for(i=[],n=0,r=e.length;0<=r?n<r:n>r;n=0<=r?++n:--n)i.push(this.writeByte(e.charCodeAt(n)));return i},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,n,r,i,s,o,a,l;return e=this.readByte(),n=this.readByte(),r=this.readByte(),i=this.readByte(),s=this.readByte(),o=this.readByte(),a=this.readByte(),l=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^n)+1099511627776*(255^r)+4294967296*(255^i)+16777216*(255^s)+65536*(255^o)+256*(255^a)+(255^l)+1):72057594037927940*e+281474976710656*n+1099511627776*r+4294967296*i+16777216*s+65536*o+256*a+l},t.prototype.writeLongLong=function(e){var n,r;return n=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var n,r;for(n=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)n.push(this.readByte());return n},t.prototype.write=function(e){var n,r,i,s;for(s=[],r=0,i=e.length;r<i;r++)n=e[r],s.push(this.writeByte(n));return s},t}(),fB=function(){var t;function e(n){var r,i,s;for(this.scalarType=n.readInt(),this.tableCount=n.readShort(),this.searchRange=n.readShort(),this.entrySelector=n.readShort(),this.rangeShift=n.readShort(),this.tables={},i=0,s=this.tableCount;0<=s?i<s:i>s;i=0<=s?++i:--i)r={tag:n.readString(4),checksum:n.readInt(),offset:n.readInt(),length:n.readInt()},this.tables[r.tag]=r}return e.prototype.encode=function(n){var r,i,s,o,a,l,c,u,g,y,p,b,N;for(N in p=Object.keys(n).length,l=Math.log(2),g=16*Math.floor(Math.log(p)/l),o=Math.floor(g/l),u=16*p-g,(i=new Sl).writeInt(this.scalarType),i.writeShort(p),i.writeShort(g),i.writeShort(o),i.writeShort(u),s=16*p,c=i.pos+s,a=null,b=[],n)for(y=n[N],i.writeString(N),i.writeInt(t(y)),i.writeInt(c),i.writeInt(y.length),b=b.concat(y),N==="head"&&(a=c),c+=y.length;c%4;)b.push(0),c++;return i.write(b),r=2981146554-t(i.data),i.pos=a+8,i.writeUInt32(r),i.data},t=function(n){var r,i,s,o;for(n=BE.call(n);n.length%4;)n.push(0);for(s=new Sl(n),i=0,r=0,o=n.length;r<o;r=r+=4)i+=s.readUInt32();return 4294967295&i},e}(),pB={}.hasOwnProperty,Lo=function(t,e){for(var n in e)pB.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};so=function(){function t(e){var n;this.file=e,n=this.file.directory.tables[this.tag],this.exists=!!n,n&&(this.offset=n.offset,this.length=n.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var mB=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Lo(t,so),t.prototype.tag="head",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},t.prototype.encode=function(e){var n;return(n=new Sl).writeInt(this.version),n.writeInt(this.revision),n.writeInt(this.checkSumAdjustment),n.writeInt(this.magicNumber),n.writeShort(this.flags),n.writeShort(this.unitsPerEm),n.writeLongLong(this.created),n.writeLongLong(this.modified),n.writeShort(this.xMin),n.writeShort(this.yMin),n.writeShort(this.xMax),n.writeShort(this.yMax),n.writeShort(this.macStyle),n.writeShort(this.lowestRecPPEM),n.writeShort(this.fontDirectionHint),n.writeShort(e),n.writeShort(this.glyphDataFormat),n.data},t}(),o4=function(){function t(e,n){var r,i,s,o,a,l,c,u,g,y,p,b,N,C,_,k,L;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=n+e.readInt(),g=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(l=0;l<256;++l)this.codeMap[l]=e.readByte();break;case 4:for(p=e.readUInt16(),y=p/2,e.pos+=6,s=function(){var D,z;for(z=[],l=D=0;0<=y?D<y:D>y;l=0<=y?++D:--D)z.push(e.readUInt16());return z}(),e.pos+=2,N=function(){var D,z;for(z=[],l=D=0;0<=y?D<y:D>y;l=0<=y?++D:--D)z.push(e.readUInt16());return z}(),c=function(){var D,z;for(z=[],l=D=0;0<=y?D<y:D>y;l=0<=y?++D:--D)z.push(e.readUInt16());return z}(),u=function(){var D,z;for(z=[],l=D=0;0<=y?D<y:D>y;l=0<=y?++D:--D)z.push(e.readUInt16());return z}(),i=(this.length-e.pos+this.offset)/2,a=function(){var D,z;for(z=[],l=D=0;0<=i?D<i:D>i;l=0<=i?++D:--D)z.push(e.readUInt16());return z}(),l=_=0,L=s.length;_<L;l=++_)for(C=s[l],r=k=b=N[l];b<=C?k<=C:k>=C;r=b<=C?++k:--k)u[l]===0?o=r+c[l]:(o=a[u[l]/2+(r-b)-(y-l)]||0)!==0&&(o+=c[l]),this.codeMap[r]=65535&o}e.pos=g}return t.encode=function(e,n){var r,i,s,o,a,l,c,u,g,y,p,b,N,C,_,k,L,D,z,X,j,S,T,M,A,I,R,G,oe,pe,ge,ne,le,we,de,U,W,te,Q,re,q,ae,ue,me,_e,Le;switch(G=new Sl,o=Object.keys(e).sort(function(Te,Se){return Te-Se}),n){case"macroman":for(N=0,C=function(){var Te=[];for(b=0;b<256;++b)Te.push(0);return Te}(),k={0:0},s={},oe=0,le=o.length;oe<le;oe++)k[ue=e[i=o[oe]]]==null&&(k[ue]=++N),s[i]={old:e[i],new:k[e[i]]},C[i]=k[e[i]];return G.writeUInt16(1),G.writeUInt16(0),G.writeUInt32(12),G.writeUInt16(0),G.writeUInt16(262),G.writeUInt16(0),G.write(C),{charMap:s,subtable:G.data,maxGlyphID:N+1};case"unicode":for(I=[],g=[],L=0,k={},r={},_=c=null,pe=0,we=o.length;pe<we;pe++)k[z=e[i=o[pe]]]==null&&(k[z]=++L),r[i]={old:z,new:k[z]},a=k[z]-i,_!=null&&a===c||(_&&g.push(_),I.push(i),c=a),_=i;for(_&&g.push(_),g.push(65535),I.push(65535),M=2*(T=I.length),S=2*Math.pow(Math.log(T)/Math.LN2,2),y=Math.log(S/2)/Math.LN2,j=2*T-S,l=[],X=[],p=[],b=ge=0,de=I.length;ge<de;b=++ge){if(A=I[b],u=g[b],A===65535){l.push(0),X.push(0);break}if(A-(R=r[A].new)>=32768)for(l.push(0),X.push(2*(p.length+T-b)),i=ne=A;A<=u?ne<=u:ne>=u;i=A<=u?++ne:--ne)p.push(r[i].new);else l.push(R-A),X.push(0)}for(G.writeUInt16(3),G.writeUInt16(1),G.writeUInt32(12),G.writeUInt16(4),G.writeUInt16(16+8*T+2*p.length),G.writeUInt16(0),G.writeUInt16(M),G.writeUInt16(S),G.writeUInt16(y),G.writeUInt16(j),q=0,U=g.length;q<U;q++)i=g[q],G.writeUInt16(i);for(G.writeUInt16(0),ae=0,W=I.length;ae<W;ae++)i=I[ae],G.writeUInt16(i);for(me=0,te=l.length;me<te;me++)a=l[me],G.writeUInt16(a);for(_e=0,Q=X.length;_e<Q;_e++)D=X[_e],G.writeUInt16(D);for(Le=0,re=p.length;Le<re;Le++)N=p[Le],G.writeUInt16(N);return{charMap:r,subtable:G.data,maxGlyphID:L+1}}},t}(),VE=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Lo(t,so),t.prototype.tag="cmap",t.prototype.parse=function(e){var n,r,i;for(e.pos=this.offset,this.version=e.readUInt16(),i=e.readUInt16(),this.tables=[],this.unicode=null,r=0;0<=i?r<i:r>i;r=0<=i?++r:--r)n=new o4(e,this.offset),this.tables.push(n),n.isUnicode&&this.unicode==null&&(this.unicode=n);return!0},t.encode=function(e,n){var r,i;return n==null&&(n="macroman"),r=o4.encode(e,n),(i=new Sl).writeUInt16(0),i.writeUInt16(1),r.table=i.data.concat(r.subtable),r},t}(),gB=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Lo(t,so),t.prototype.tag="hhea",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},t}(),yB=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Lo(t,so),t.prototype.tag="OS/2",t.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=function(){var n,r;for(r=[],n=0;n<10;++n)r.push(e.readByte());return r}(),this.charRange=function(){var n,r;for(r=[],n=0;n<4;++n)r.push(e.readInt());return r}(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=function(){var n,r;for(r=[],n=0;n<2;n=++n)r.push(e.readInt());return r}(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},t}(),vB=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Lo(t,so),t.prototype.tag="post",t.prototype.parse=function(e){var n,r,i;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:case 196608:break;case 131072:var s;for(r=e.readUInt16(),this.glyphNameIndex=[],s=0;0<=r?s<r:s>r;s=0<=r?++s:--s)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],i=[];e.pos<this.offset+this.length;)n=e.readByte(),i.push(this.names.push(e.readString(n)));return i;case 151552:return r=e.readUInt16(),this.offsets=e.read(r);case 262144:return this.map=(function(){var o,a,l;for(l=[],s=o=0,a=this.file.maxp.numGlyphs;0<=a?o<a:o>a;s=0<=a?++o:--o)l.push(e.readUInt32());return l}).call(this)}},t}(),wB=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},xB=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Lo(t,so),t.prototype.tag="name",t.prototype.parse=function(e){var n,r,i,s,o,a,l,c,u,g,y;for(e.pos=this.offset,e.readShort(),n=e.readShort(),a=e.readShort(),r=[],s=0;0<=n?s<n:s>n;s=0<=n?++s:--s)r.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+a+e.readShort()});for(l={},s=u=0,g=r.length;u<g;s=++u)i=r[s],e.pos=i.offset,c=e.readString(i.length),o=new wB(c,i),l[y=i.nameID]==null&&(l[y]=[]),l[i.nameID].push(o);this.strings=l,this.copyright=l[0],this.fontFamily=l[1],this.fontSubfamily=l[2],this.uniqueSubfamily=l[3],this.fontName=l[4],this.version=l[5];try{this.postscriptName=l[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=l[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=l[7],this.manufacturer=l[8],this.designer=l[9],this.description=l[10],this.vendorUrl=l[11],this.designerUrl=l[12],this.license=l[13],this.licenseUrl=l[14],this.preferredFamily=l[15],this.preferredSubfamily=l[17],this.compatibleFull=l[18],this.sampleText=l[19]},t}(),_B=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Lo(t,so),t.prototype.tag="maxp",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},t}(),bB=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Lo(t,so),t.prototype.tag="hmtx",t.prototype.parse=function(e){var n,r,i,s,o,a,l;for(e.pos=this.offset,this.metrics=[],n=0,a=this.file.hhea.numberOfMetrics;0<=a?n<a:n>a;n=0<=a?++n:--n)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(i=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var c,u;for(u=[],n=c=0;0<=i?c<i:c>i;n=0<=i?++c:--c)u.push(e.readInt16());return u}(),this.widths=(function(){var c,u,g,y;for(y=[],c=0,u=(g=this.metrics).length;c<u;c++)s=g[c],y.push(s.advance);return y}).call(this),r=this.widths[this.widths.length-1],l=[],n=o=0;0<=i?o<i:o>i;n=0<=i?++o:--o)l.push(this.widths.push(r));return l},t.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},t}(),BE=[].slice,NB=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Lo(t,so),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(e){var n,r,i,s,o,a,l,c,u,g;return e in this.cache?this.cache[e]:(s=this.file.loca,n=this.file.contents,r=s.indexOf(e),(i=s.lengthOf(e))===0?this.cache[e]=null:(n.pos=this.offset+r,o=(a=new Sl(n.read(i))).readShort(),c=a.readShort(),g=a.readShort(),l=a.readShort(),u=a.readShort(),this.cache[e]=o===-1?new AB(a,c,g,l,u):new SB(a,o,c,g,l,u),this.cache[e]))},t.prototype.encode=function(e,n,r){var i,s,o,a,l;for(o=[],s=[],a=0,l=n.length;a<l;a++)i=e[n[a]],s.push(o.length),i&&(o=o.concat(i.encode(r)));return s.push(o.length),{table:o,offsets:s}},t}(),SB=function(){function t(e,n,r,i,s,o){this.raw=e,this.numberOfContours=n,this.xMin=r,this.yMin=i,this.xMax=s,this.yMax=o,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),AB=function(){function t(e,n,r,i,s){var o,a;for(this.raw=e,this.xMin=n,this.yMin=r,this.xMax=i,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;a=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&a;)o.pos+=1&a?4:2,128&a?o.pos+=8:64&a?o.pos+=4:8&a&&(o.pos+=2)}return t.prototype.encode=function(){var e,n,r;for(n=new Sl(BE.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)n.pos=this.glyphOffsets[e];return n.data},t}(),EB=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Lo(t,so),t.prototype.tag="loca",t.prototype.parse=function(e){var n,r;return e.pos=this.offset,n=this.file.head.indexToLocFormat,this.offsets=n===0?(function(){var i,s;for(s=[],r=0,i=this.length;r<i;r+=2)s.push(2*e.readUInt16());return s}).call(this):(function(){var i,s;for(s=[],r=0,i=this.length;r<i;r+=4)s.push(e.readUInt32());return s}).call(this)},t.prototype.indexOf=function(e){return this.offsets[e]},t.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},t.prototype.encode=function(e,n){for(var r=new Uint32Array(this.offsets.length),i=0,s=0,o=0;o<r.length;++o)if(r[o]=i,s<n.length&&n[s]==o){++s,r[o]=i;var a=this.offsets[o],l=this.offsets[o+1]-a;l>0&&(i+=l)}for(var c=new Array(4*r.length),u=0;u<r.length;++u)c[4*u+3]=255&r[u],c[4*u+2]=(65280&r[u])>>8,c[4*u+1]=(16711680&r[u])>>16,c[4*u]=(4278190080&r[u])>>24;return c},t}(),TB=function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,n,r,i,s;for(n in i=this.font.cmap.tables[0].codeMap,e={},s=this.subset)r=s[n],e[n]=i[r];return e},t.prototype.glyphsFor=function(e){var n,r,i,s,o,a,l;for(i={},o=0,a=e.length;o<a;o++)i[s=e[o]]=this.font.glyf.glyphFor(s);for(s in n=[],i)(r=i[s])!=null&&r.compound&&n.push.apply(n,r.glyphIDs);if(n.length>0)for(s in l=this.glyphsFor(n))r=l[s],i[s]=r;return i},t.prototype.encode=function(e,n){var r,i,s,o,a,l,c,u,g,y,p,b,N,C,_;for(i in r=VE.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(e),p={0:0},_=r.charMap)p[(l=_[i]).old]=l.new;for(b in y=r.maxGlyphID,o)b in p||(p[b]=y++);return u=function(k){var L,D;for(L in D={},k)D[k[L]]=L;return D}(p),g=Object.keys(u).sort(function(k,L){return k-L}),N=function(){var k,L,D;for(D=[],k=0,L=g.length;k<L;k++)a=g[k],D.push(u[a]);return D}(),s=this.font.glyf.encode(o,N,p),c=this.font.loca.encode(s.offsets,N),C={cmap:this.font.cmap.raw(),glyf:s.table,loca:c,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(n)},this.font.os2.exists&&(C["OS/2"]=this.font.os2.raw()),this.font.directory.encode(C)},t}();wt.API.PDFObject=function(){var t;function e(){}return t=function(n,r){return(Array(r+1).join("0")+n).slice(-r)},e.convert=function(n){var r,i,s,o;if(Array.isArray(n))return"["+function(){var a,l,c;for(c=[],a=0,l=n.length;a<l;a++)r=n[a],c.push(e.convert(r));return c}().join(" ")+"]";if(typeof n=="string")return"/"+n;if(n!=null&&n.isString)return"("+n+")";if(n instanceof Date)return"(D:"+t(n.getUTCFullYear(),4)+t(n.getUTCMonth(),2)+t(n.getUTCDate(),2)+t(n.getUTCHours(),2)+t(n.getUTCMinutes(),2)+t(n.getUTCSeconds(),2)+"Z)";if({}.toString.call(n)==="[object Object]"){for(i in s=["<<"],n)o=n[i],s.push("/"+i+" "+e.convert(o));return s.push(">>"),s.join(`
`)}return""+n},e}();function zE(t,e,n,r,i){r=r||{};var s=1.15,o=i.internal.scaleFactor,a=i.internal.getFontSize()/o,l=i.getLineHeightFactor?i.getLineHeightFactor():s,c=a*l,u=/\r\n|\r|\n/g,g="",y=1;if((r.valign==="middle"||r.valign==="bottom"||r.halign==="center"||r.halign==="right")&&(g=typeof t=="string"?t.split(u):t,y=g.length||1),n+=a*(2-s),r.valign==="middle"?n-=y/2*c:r.valign==="bottom"&&(n-=y*c),r.halign==="center"||r.halign==="right"){var p=a;if(r.halign==="center"&&(p*=.5),g&&y>=1){for(var b=0;b<g.length;b++)i.text(g[b],e-i.getStringUnitWidth(g[b])*p,n),n+=c;return i}e-=i.getStringUnitWidth(t)*p}return r.halign==="justify"?i.text(t,e,n,{maxWidth:r.maxWidth||100,align:"justify"}):i.text(t,e,n),i}var a4={},Pu=function(){function t(e){this.jsPDFDocument=e,this.userStyles={textColor:e.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:e.internal.getFontSize(),fontStyle:e.internal.getFont().fontStyle,font:e.internal.getFont().fontName,lineWidth:e.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:e.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return t.setDefaults=function(e,n){n===void 0&&(n=null),n?n.__autoTableDocumentDefaults=e:a4=e},t.unifyColor=function(e){return Array.isArray(e)?e:typeof e=="number"?[e,e,e]:typeof e=="string"?[e]:null},t.prototype.applyStyles=function(e,n){var r,i,s;n===void 0&&(n=!1),e.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(e.fontStyle);var o=this.jsPDFDocument.internal.getFont(),a=o.fontStyle,l=o.fontName;if(e.font&&(l=e.font),e.fontStyle){a=e.fontStyle;var c=this.getFontList()[l];c&&c.indexOf(a)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(c[0]),a=c[0])}if(this.jsPDFDocument.setFont(l,a),e.fontSize&&this.jsPDFDocument.setFontSize(e.fontSize),!n){var u=t.unifyColor(e.fillColor);u&&(r=this.jsPDFDocument).setFillColor.apply(r,u),u=t.unifyColor(e.textColor),u&&(i=this.jsPDFDocument).setTextColor.apply(i,u),u=t.unifyColor(e.lineColor),u&&(s=this.jsPDFDocument).setDrawColor.apply(s,u),typeof e.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(e.lineWidth)}},t.prototype.splitTextToSize=function(e,n,r){return this.jsPDFDocument.splitTextToSize(e,n,r)},t.prototype.rect=function(e,n,r,i,s){return this.jsPDFDocument.rect(e,n,r,i,s)},t.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},t.prototype.getTextWidth=function(e){return this.jsPDFDocument.getTextWidth(e)},t.prototype.getDocument=function(){return this.jsPDFDocument},t.prototype.setPage=function(e){this.jsPDFDocument.setPage(e)},t.prototype.addPage=function(){return this.jsPDFDocument.addPage()},t.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},t.prototype.getGlobalOptions=function(){return a4||{}},t.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},t.prototype.pageSize=function(){var e=this.jsPDFDocument.internal.pageSize;return e.width==null&&(e={width:e.getWidth(),height:e.getHeight()}),e},t.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},t.prototype.getLineHeightFactor=function(){var e=this.jsPDFDocument;return e.getLineHeightFactor?e.getLineHeightFactor():1.15},t.prototype.getLineHeight=function(e){return e/this.scaleFactor()*this.getLineHeightFactor()},t.prototype.pageNumber=function(){var e=this.jsPDFDocument.internal.getCurrentPageInfo();return e?e.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},t}(),Y2=function(t,e){return Y2=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},Y2(t,e)};function qE(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Y2(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var HE=function(t){qE(e,t);function e(n){var r=t.call(this)||this;return r._element=n,r}return e}(Array);function IB(t){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/t,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function kB(t){var e={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return e[t]}function Dm(t,e,n){n.applyStyles(e,!0);var r=Array.isArray(t)?t:[t],i=r.map(function(s){return n.getTextWidth(s)}).reduce(function(s,o){return Math.max(s,o)},0);return i}function WE(t,e,n,r){var i=e.settings.tableLineWidth,s=e.settings.tableLineColor;t.applyStyles({lineWidth:i,lineColor:s});var o=$E(i,!1);o&&t.rect(n.x,n.y,e.getWidth(t.pageSize().width),r.y-n.y,o)}function $E(t,e){var n=t>0,r=e||e===0;return n&&r?"DF":n?"S":r?"F":null}function Cg(t,e){var n,r,i,s;if(t=t||e,Array.isArray(t)){if(t.length>=4)return{top:t[0],right:t[1],bottom:t[2],left:t[3]};if(t.length===3)return{top:t[0],right:t[1],bottom:t[2],left:t[1]};if(t.length===2)return{top:t[0],right:t[1],bottom:t[0],left:t[1]};t.length===1?t=t[0]:t=e}return typeof t=="object"?(typeof t.vertical=="number"&&(t.top=t.vertical,t.bottom=t.vertical),typeof t.horizontal=="number"&&(t.right=t.horizontal,t.left=t.horizontal),{left:(n=t.left)!==null&&n!==void 0?n:e,top:(r=t.top)!==null&&r!==void 0?r:e,right:(i=t.right)!==null&&i!==void 0?i:e,bottom:(s=t.bottom)!==null&&s!==void 0?s:e}):(typeof t!="number"&&(t=e),{top:t,right:t,bottom:t,left:t})}function GE(t,e){var n=Cg(e.settings.margin,0);return t.pageSize().width-(n.left+n.right)}function CB(t,e,n,r,i){var s={},o=1.3333333333333333,a=l1(e,function(L){return i.getComputedStyle(L).backgroundColor});a!=null&&(s.fillColor=a);var l=l1(e,function(L){return i.getComputedStyle(L).color});l!=null&&(s.textColor=l);var c=RB(r,n);c&&(s.cellPadding=c);var u="borderTopColor",g=o*n,y=r.borderTopWidth;if(r.borderBottomWidth===y&&r.borderRightWidth===y&&r.borderLeftWidth===y){var p=(parseFloat(y)||0)/g;p&&(s.lineWidth=p)}else s.lineWidth={top:(parseFloat(r.borderTopWidth)||0)/g,right:(parseFloat(r.borderRightWidth)||0)/g,bottom:(parseFloat(r.borderBottomWidth)||0)/g,left:(parseFloat(r.borderLeftWidth)||0)/g},s.lineWidth.top||(s.lineWidth.right?u="borderRightColor":s.lineWidth.bottom?u="borderBottomColor":s.lineWidth.left&&(u="borderLeftColor"));var b=l1(e,function(L){return i.getComputedStyle(L)[u]});b!=null&&(s.lineColor=b);var N=["left","right","center","justify"];N.indexOf(r.textAlign)!==-1&&(s.halign=r.textAlign),N=["middle","bottom","top"],N.indexOf(r.verticalAlign)!==-1&&(s.valign=r.verticalAlign);var C=parseInt(r.fontSize||"");isNaN(C)||(s.fontSize=C/o);var _=PB(r);_&&(s.fontStyle=_);var k=(r.fontFamily||"").toLowerCase();return t.indexOf(k)!==-1&&(s.font=k),s}function PB(t){var e="";return(t.fontWeight==="bold"||t.fontWeight==="bolder"||parseInt(t.fontWeight)>=700)&&(e="bold"),(t.fontStyle==="italic"||t.fontStyle==="oblique")&&(e+="italic"),e}function l1(t,e){var n=KE(t,e);if(!n)return null;var r=n.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!r||!Array.isArray(r))return null;var i=[parseInt(r[1]),parseInt(r[2]),parseInt(r[3])],s=parseInt(r[4]);return s===0||isNaN(i[0])||isNaN(i[1])||isNaN(i[2])?null:i}function KE(t,e){var n=e(t);return n==="rgba(0, 0, 0, 0)"||n==="transparent"||n==="initial"||n==="inherit"?t.parentElement==null?null:KE(t.parentElement,e):n}function RB(t,e){var n=[t.paddingTop,t.paddingRight,t.paddingBottom,t.paddingLeft],r=96/(72/e),i=(parseInt(t.lineHeight)-parseInt(t.fontSize))/e/2,s=n.map(function(a){return parseInt(a||"0")/r}),o=Cg(s,0);return i>o.top&&(o.top=i),i>o.bottom&&(o.bottom=i),o}function YE(t,e,n,r,i){var s,o;r===void 0&&(r=!1),i===void 0&&(i=!1);var a;typeof e=="string"?a=n.document.querySelector(e):a=e;var l=Object.keys(t.getFontList()),c=t.scaleFactor(),u=[],g=[],y=[];if(!a)return console.error("Html table could not be found with input: ",e),{head:u,body:g,foot:y};for(var p=0;p<a.rows.length;p++){var b=a.rows[p],N=(o=(s=b==null?void 0:b.parentElement)===null||s===void 0?void 0:s.tagName)===null||o===void 0?void 0:o.toLowerCase(),C=LB(l,c,n,b,r,i);C&&(N==="thead"?u.push(C):N==="tfoot"?y.push(C):g.push(C))}return{head:u,body:g,foot:y}}function LB(t,e,n,r,i,s){for(var o=new HE(r),a=0;a<r.cells.length;a++){var l=r.cells[a],c=n.getComputedStyle(l);if(i||c.display!=="none"){var u=void 0;s&&(u=CB(t,l,e,c,n)),o.push({rowSpan:l.rowSpan,colSpan:l.colSpan,styles:u,_element:l,content:jB(l)})}}var g=n.getComputedStyle(r);if(o.length>0&&(i||g.display!=="none"))return o}function jB(t){var e=t.cloneNode(!0);return e.innerHTML=e.innerHTML.replace(/\n/g,"").replace(/ +/g," "),e.innerHTML=e.innerHTML.split(/<br.*?>/).map(function(n){return n.trim()}).join(`
`),e.innerText||e.textContent||""}function DB(t,e,n){for(var r=0,i=[t,e,n];r<i.length;r++){var s=i[r];s&&typeof s!="object"&&console.error("The options parameter should be of type object, is: "+typeof s),s.startY&&typeof s.startY!="number"&&(console.error("Invalid value for startY option",s.startY),delete s.startY)}}function ra(t,e,n,r,i){if(t==null)throw new TypeError("Cannot convert undefined or null to object");for(var s=Object(t),o=1;o<arguments.length;o++){var a=arguments[o];if(a!=null)for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(s[l]=a[l])}return s}function QE(t,e){var n=new Pu(t),r=n.getDocumentOptions(),i=n.getGlobalOptions();DB(i,r,e);var s=ra({},i,r,e),o;typeof window<"u"&&(o=window);var a=OB(i,r,e),l=MB(i,r,e),c=FB(n,s),u=VB(n,s,o);return{id:e.tableId,content:u,hooks:l,styles:a,settings:c}}function OB(t,e,n){for(var r={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},i=function(l){if(l==="columnStyles"){var c=t[l],u=e[l],g=n[l];r.columnStyles=ra({},c,u,g)}else{var y=[t,e,n],p=y.map(function(b){return b[l]||{}});r[l]=ra({},p[0],p[1],p[2])}},s=0,o=Object.keys(r);s<o.length;s++){var a=o[s];i(a)}return r}function MB(t,e,n){for(var r=[t,e,n],i={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},s=0,o=r;s<o.length;s++){var a=o[s];a.didParseCell&&i.didParseCell.push(a.didParseCell),a.willDrawCell&&i.willDrawCell.push(a.willDrawCell),a.didDrawCell&&i.didDrawCell.push(a.didDrawCell),a.willDrawPage&&i.willDrawPage.push(a.willDrawPage),a.didDrawPage&&i.didDrawPage.push(a.didDrawPage)}return i}function FB(t,e){var n,r,i,s,o,a,l,c,u,g,y,p,b=Cg(e.margin,40/t.scaleFactor()),N=(n=UB(t,e.startY))!==null&&n!==void 0?n:b.top,C;e.showFoot===!0?C="everyPage":e.showFoot===!1?C="never":C=(r=e.showFoot)!==null&&r!==void 0?r:"everyPage";var _;e.showHead===!0?_="everyPage":e.showHead===!1?_="never":_=(i=e.showHead)!==null&&i!==void 0?i:"everyPage";var k=(s=e.useCss)!==null&&s!==void 0?s:!1,L=e.theme||(k?"plain":"striped"),D=!!e.horizontalPageBreak,z=(o=e.horizontalPageBreakRepeat)!==null&&o!==void 0?o:null;return{includeHiddenHtml:(a=e.includeHiddenHtml)!==null&&a!==void 0?a:!1,useCss:k,theme:L,startY:N,margin:b,pageBreak:(l=e.pageBreak)!==null&&l!==void 0?l:"auto",rowPageBreak:(c=e.rowPageBreak)!==null&&c!==void 0?c:"auto",tableWidth:(u=e.tableWidth)!==null&&u!==void 0?u:"auto",showHead:_,showFoot:C,tableLineWidth:(g=e.tableLineWidth)!==null&&g!==void 0?g:0,tableLineColor:(y=e.tableLineColor)!==null&&y!==void 0?y:200,horizontalPageBreak:D,horizontalPageBreakRepeat:z,horizontalPageBreakBehaviour:(p=e.horizontalPageBreakBehaviour)!==null&&p!==void 0?p:"afterAllRows"}}function UB(t,e){var n=t.getLastAutoTable(),r=t.scaleFactor(),i=t.pageNumber(),s=!1;if(n&&n.startPageNumber){var o=n.startPageNumber+n.pageNumber-1;s=o===i}return typeof e=="number"?e:(e==null||e===!1)&&s&&(n==null?void 0:n.finalY)!=null?n.finalY+20/r:null}function VB(t,e,n){var r=e.head||[],i=e.body||[],s=e.foot||[];if(e.html){var o=e.includeHiddenHtml;if(n){var a=YE(t,e.html,n,o,e.useCss)||{};r=a.head||r,i=a.body||r,s=a.foot||r}else console.error("Cannot parse html in non browser environment")}var l=e.columns||BB(r,i,s);return{columns:l,head:r,body:i,foot:s}}function BB(t,e,n){var r=t[0]||e[0]||n[0]||[],i=[];return Object.keys(r).filter(function(s){return s!=="_element"}).forEach(function(s){var o=1,a;Array.isArray(r)?a=r[parseInt(s)]:a=r[s],typeof a=="object"&&!Array.isArray(a)&&(o=(a==null?void 0:a.colSpan)||1);for(var l=0;l<o;l++){var c=void 0;Array.isArray(r)?c=i.length:c=s+(l>0?"_".concat(l):"");var u={dataKey:c};i.push(u)}}),i}var Q2=function(){function t(e,n,r){this.table=n,this.pageNumber=n.pageNumber,this.settings=n.settings,this.cursor=r,this.doc=e.getDocument()}return t}(),zB=function(t){qE(e,t);function e(n,r,i,s,o,a){var l=t.call(this,n,r,a)||this;return l.cell=i,l.row=s,l.column=o,l.section=s.section,l}return e}(Q2),qB=function(){function t(e,n){this.pageNumber=1,this.id=e.id,this.settings=e.settings,this.styles=e.styles,this.hooks=e.hooks,this.columns=n.columns,this.head=n.head,this.body=n.body,this.foot=n.foot}return t.prototype.getHeadHeight=function(e){return this.head.reduce(function(n,r){return n+r.getMaxCellHeight(e)},0)},t.prototype.getFootHeight=function(e){return this.foot.reduce(function(n,r){return n+r.getMaxCellHeight(e)},0)},t.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},t.prototype.callCellHooks=function(e,n,r,i,s,o){for(var a=0,l=n;a<l.length;a++){var c=l[a],u=new zB(e,this,r,i,s,o),g=c(u)===!1;if(r.text=Array.isArray(r.text)?r.text:[r.text],g)return!1}return!0},t.prototype.callEndPageHooks=function(e,n){e.applyStyles(e.userStyles);for(var r=0,i=this.hooks.didDrawPage;r<i.length;r++){var s=i[r];s(new Q2(e,this,n))}},t.prototype.callWillDrawPageHooks=function(e,n){for(var r=0,i=this.hooks.willDrawPage;r<i.length;r++){var s=i[r];s(new Q2(e,this,n))}},t.prototype.getWidth=function(e){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var n=this.columns.reduce(function(i,s){return i+s.wrappedWidth},0);return n}else{var r=this.settings.margin;return e-r.left-r.right}},t}(),XE=function(){function t(e,n,r,i,s){s===void 0&&(s=!1),this.height=0,this.raw=e,e instanceof HE&&(this.raw=e._element,this.element=e._element),this.index=n,this.section=r,this.cells=i,this.spansMultiplePages=s}return t.prototype.getMaxCellHeight=function(e){var n=this;return e.reduce(function(r,i){var s;return Math.max(r,((s=n.cells[i.index])===null||s===void 0?void 0:s.height)||0)},0)},t.prototype.hasRowSpan=function(e){var n=this;return e.filter(function(r){var i=n.cells[r.index];return i?i.rowSpan>1:!1}).length>0},t.prototype.canEntireRowFit=function(e,n){return this.getMaxCellHeight(n)<=e},t.prototype.getMinimumRowHeight=function(e,n){var r=this;return e.reduce(function(i,s){var o=r.cells[s.index];if(!o)return 0;var a=n.getLineHeight(o.styles.fontSize),l=o.padding("vertical"),c=l+a;return c>i?c:i},0)},t}(),JE=function(){function t(e,n,r){var i;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=n,this.section=r,this.raw=e;var s=e;e!=null&&typeof e=="object"&&!Array.isArray(e)?(this.rowSpan=e.rowSpan||1,this.colSpan=e.colSpan||1,s=(i=e.content)!==null&&i!==void 0?i:e,e._element&&(this.raw=e._element)):(this.rowSpan=1,this.colSpan=1);var o=s!=null?""+s:"",a=/\r\n|\r|\n/g;this.text=o.split(a)}return t.prototype.getTextPos=function(){var e;if(this.styles.valign==="top")e=this.y+this.padding("top");else if(this.styles.valign==="bottom")e=this.y+this.height-this.padding("bottom");else{var n=this.height-this.padding("vertical");e=this.y+n/2+this.padding("top")}var r;if(this.styles.halign==="right")r=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var i=this.width-this.padding("horizontal");r=this.x+i/2+this.padding("left")}else r=this.x+this.padding("left");return{x:r,y:e}},t.prototype.getContentHeight=function(e,n){n===void 0&&(n=1.15);var r=Array.isArray(this.text)?this.text.length:1,i=this.styles.fontSize/e*n,s=r*i+this.padding("vertical");return Math.max(s,this.styles.minCellHeight)},t.prototype.padding=function(e){var n=Cg(this.styles.cellPadding,0);return e==="vertical"?n.top+n.bottom:e==="horizontal"?n.left+n.right:n[e]},t}(),HB=function(){function t(e,n,r){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=e,this.raw=n,this.index=r}return t.prototype.getMaxCustomCellWidth=function(e){for(var n=0,r=0,i=e.allRows();r<i.length;r++){var s=i[r],o=s.cells[this.index];o&&typeof o.styles.cellWidth=="number"&&(n=Math.max(n,o.styles.cellWidth))}return n},t}();function WB(t,e){$B(t,e);var n=[],r=0;e.columns.forEach(function(s){var o=s.getMaxCustomCellWidth(e);o?s.width=o:(s.width=s.wrappedWidth,n.push(s)),r+=s.width});var i=e.getWidth(t.pageSize().width)-r;i&&(i=X2(n,i,function(s){return Math.max(s.minReadableWidth,s.minWidth)})),i&&(i=X2(n,i,function(s){return s.minWidth})),i=Math.abs(i),!e.settings.horizontalPageBreak&&i>.1/t.scaleFactor()&&(i=i<1?i:Math.round(i),console.warn("Of the table content, ".concat(i," units width could not fit page"))),KB(e),YB(e,t),GB(e)}function $B(t,e){var n=t.scaleFactor(),r=e.settings.horizontalPageBreak,i=GE(t,e);e.allRows().forEach(function(s){for(var o=0,a=e.columns;o<a.length;o++){var l=a[o],c=s.cells[l.index];if(c){var u=e.hooks.didParseCell;e.callCellHooks(t,u,c,s,l,null);var g=c.padding("horizontal");c.contentWidth=Dm(c.text,c.styles,t)+g;var y=Dm(c.text.join(" ").split(/[^\S\u00A0]+/),c.styles,t);if(c.minReadableWidth=y+c.padding("horizontal"),typeof c.styles.cellWidth=="number")c.minWidth=c.styles.cellWidth,c.wrappedWidth=c.styles.cellWidth;else if(c.styles.cellWidth==="wrap"||r===!0)c.contentWidth>i?(c.minWidth=i,c.wrappedWidth=i):(c.minWidth=c.contentWidth,c.wrappedWidth=c.contentWidth);else{var p=10/n;c.minWidth=c.styles.minCellWidth||p,c.wrappedWidth=c.contentWidth,c.minWidth>c.wrappedWidth&&(c.wrappedWidth=c.minWidth)}}}}),e.allRows().forEach(function(s){for(var o=0,a=e.columns;o<a.length;o++){var l=a[o],c=s.cells[l.index];if(c&&c.colSpan===1)l.wrappedWidth=Math.max(l.wrappedWidth,c.wrappedWidth),l.minWidth=Math.max(l.minWidth,c.minWidth),l.minReadableWidth=Math.max(l.minReadableWidth,c.minReadableWidth);else{var u=e.styles.columnStyles[l.dataKey]||e.styles.columnStyles[l.index]||{},g=u.cellWidth||u.minCellWidth;g&&typeof g=="number"&&(l.minWidth=g,l.wrappedWidth=g)}c&&(c.colSpan>1&&!l.minWidth&&(l.minWidth=c.minWidth),c.colSpan>1&&!l.wrappedWidth&&(l.wrappedWidth=c.minWidth))}})}function X2(t,e,n){for(var r=e,i=t.reduce(function(p,b){return p+b.wrappedWidth},0),s=0;s<t.length;s++){var o=t[s],a=o.wrappedWidth/i,l=r*a,c=o.width+l,u=n(o),g=c<u?u:c;e-=g-o.width,o.width=g}if(e=Math.round(e*1e10)/1e10,e){var y=t.filter(function(p){return e<0?p.width>n(p):!0});y.length&&(e=X2(y,e,n))}return e}function GB(t){for(var e={},n=1,r=t.allRows(),i=0;i<r.length;i++)for(var s=r[i],o=0,a=t.columns;o<a.length;o++){var l=a[o],c=e[l.index];if(n>1)n--,delete s.cells[l.index];else if(c)c.cell.height+=s.height,n=c.cell.colSpan,delete s.cells[l.index],c.left--,c.left<=1&&delete e[l.index];else{var u=s.cells[l.index];if(!u)continue;if(u.height=s.height,u.rowSpan>1){var g=r.length-i,y=u.rowSpan>g?g:u.rowSpan;e[l.index]={cell:u,left:y,row:s}}}}}function KB(t){for(var e=t.allRows(),n=0;n<e.length;n++)for(var r=e[n],i=null,s=0,o=0,a=0;a<t.columns.length;a++){var l=t.columns[a];if(o-=1,o>1&&t.columns[a+1])s+=l.width,delete r.cells[l.index];else if(i){var c=i;delete r.cells[l.index],i=null,c.width=l.width+s}else{var c=r.cells[l.index];if(!c)continue;if(o=c.colSpan,s=0,c.colSpan>1){i=c,s+=l.width;continue}c.width=l.width+s}}}function YB(t,e){for(var n={count:0,height:0},r=0,i=t.allRows();r<i.length;r++){for(var s=i[r],o=0,a=t.columns;o<a.length;o++){var l=a[o],c=s.cells[l.index];if(c){e.applyStyles(c.styles,!0);var u=c.width-c.padding("horizontal");if(c.styles.overflow==="linebreak")c.text=e.splitTextToSize(c.text,u+1/e.scaleFactor(),{fontSize:c.styles.fontSize});else if(c.styles.overflow==="ellipsize")c.text=l4(c.text,u,c.styles,e,"...");else if(c.styles.overflow==="hidden")c.text=l4(c.text,u,c.styles,e,"");else if(typeof c.styles.overflow=="function"){var g=c.styles.overflow(c.text,u);typeof g=="string"?c.text=[g]:c.text=g}c.contentHeight=c.getContentHeight(e.scaleFactor(),e.getLineHeightFactor());var y=c.contentHeight/c.rowSpan;c.rowSpan>1&&n.count*n.height<y*c.rowSpan?n={height:y,count:c.rowSpan}:n&&n.count>0&&n.height>y&&(y=n.height),y>s.height&&(s.height=y)}}n.count--}}function l4(t,e,n,r,i){return t.map(function(s){return QB(s,e,n,r,i)})}function QB(t,e,n,r,i){var s=1e4*r.scaleFactor();if(e=Math.ceil(e*s)/s,e>=Dm(t,n,r))return t;for(;e<Dm(t+i,n,r)&&!(t.length<=1);)t=t.substring(0,t.length-1);return t.trim()+i}function ZE(t,e){var n=new Pu(t),r=XB(e,n.scaleFactor()),i=new qB(e,r);return WB(n,i),n.applyStyles(n.userStyles),i}function XB(t,e){var n=t.content,r=ZB(n.columns);if(n.head.length===0){var i=c4(r,"head");i&&n.head.push(i)}if(n.foot.length===0){var i=c4(r,"foot");i&&n.foot.push(i)}var s=t.settings.theme,o=t.styles;return{columns:r,head:c1("head",n.head,r,o,s,e),body:c1("body",n.body,r,o,s,e),foot:c1("foot",n.foot,r,o,s,e)}}function c1(t,e,n,r,i,s){var o={},a=e.map(function(l,c){for(var u=0,g={},y=0,p=0,b=0,N=n;b<N.length;b++){var C=N[b];if(o[C.index]==null||o[C.index].left===0)if(p===0){var _=void 0;Array.isArray(l)?_=l[C.index-y-u]:_=l[C.dataKey];var k={};typeof _=="object"&&!Array.isArray(_)&&(k=(_==null?void 0:_.styles)||{});var L=ez(t,C,c,i,r,s,k),D=new JE(_,L,t);g[C.dataKey]=D,g[C.index]=D,p=D.colSpan-1,o[C.index]={left:D.rowSpan-1,times:p}}else p--,y++;else o[C.index].left--,p=o[C.index].times,u++}return new XE(l,c,t,g)});return a}function c4(t,e){var n={};return t.forEach(function(r){if(r.raw!=null){var i=JB(e,r.raw);i!=null&&(n[r.dataKey]=i)}}),Object.keys(n).length>0?n:null}function JB(t,e){if(t==="head"){if(typeof e=="object")return e.header||null;if(typeof e=="string"||typeof e=="number")return e}else if(t==="foot"&&typeof e=="object")return e.footer;return null}function ZB(t){return t.map(function(e,n){var r,i;return typeof e=="object"?i=(r=e.dataKey)!==null&&r!==void 0?r:n:i=n,new HB(i,e,n)})}function ez(t,e,n,r,i,s,o){var a=kB(r),l;t==="head"?l=i.headStyles:t==="body"?l=i.bodyStyles:t==="foot"&&(l=i.footStyles);var c=ra({},a.table,a[t],i.styles,l),u=i.columnStyles[e.dataKey]||i.columnStyles[e.index]||{},g=t==="body"?u:{},y=t==="body"&&n%2===0?ra({},a.alternateRow,i.alternateRowStyles):{},p=IB(s),b=ra({},p,c,y,g);return ra(b,o)}function tz(t,e,n){var r;n===void 0&&(n={});var i=GE(t,e),s=new Map,o=[],a=[],l=[];Array.isArray(e.settings.horizontalPageBreakRepeat)?l=e.settings.horizontalPageBreakRepeat:(typeof e.settings.horizontalPageBreakRepeat=="string"||typeof e.settings.horizontalPageBreakRepeat=="number")&&(l=[e.settings.horizontalPageBreakRepeat]),l.forEach(function(y){var p=e.columns.find(function(b){return b.dataKey===y||b.index===y});p&&!s.has(p.index)&&(s.set(p.index,!0),o.push(p.index),a.push(e.columns[p.index]),i-=p.wrappedWidth)});for(var c=!0,u=(r=n==null?void 0:n.start)!==null&&r!==void 0?r:0;u<e.columns.length;){if(s.has(u)){u++;continue}var g=e.columns[u].wrappedWidth;if(c||i>=g)c=!1,o.push(u),a.push(e.columns[u]),i-=g;else break;u++}return{colIndexes:o,columns:a,lastIndex:u-1}}function nz(t,e){for(var n=[],r=0;r<e.columns.length;r++){var i=tz(t,e,{start:r});i.columns.length&&(n.push(i),r=i.lastIndex)}return n}function eT(t,e){var n=e.settings,r=n.startY,i=n.margin,s={x:i.left,y:r},o=e.getHeadHeight(e.columns)+e.getFootHeight(e.columns),a=r+i.bottom+o;if(n.pageBreak==="avoid"){var l=e.body,c=l.reduce(function(y,p){return y+p.height},0);a+=c}var u=new Pu(t);(n.pageBreak==="always"||n.startY!=null&&a>u.pageSize().height)&&(nT(u),s.y=i.top),e.callWillDrawPageHooks(u,s);var g=ra({},s);e.startPageNumber=u.pageNumber(),n.horizontalPageBreak?rz(u,e,g,s):(u.applyStyles(u.userStyles),(n.showHead==="firstPage"||n.showHead==="everyPage")&&e.head.forEach(function(y){return ya(u,e,y,s,e.columns)}),u.applyStyles(u.userStyles),e.body.forEach(function(y,p){var b=p===e.body.length-1;Om(u,e,y,b,g,s,e.columns)}),u.applyStyles(u.userStyles),(n.showFoot==="lastPage"||n.showFoot==="everyPage")&&e.foot.forEach(function(y){return ya(u,e,y,s,e.columns)})),WE(u,e,g,s),e.callEndPageHooks(u,s),e.finalY=s.y,t.lastAutoTable=e,u.applyStyles(u.userStyles)}function rz(t,e,n,r){var i=nz(t,e),s=e.settings;if(s.horizontalPageBreakBehaviour==="afterAllRows")i.forEach(function(c,u){t.applyStyles(t.userStyles),u>0?dd(t,e,n,r,c.columns,!0):u4(t,e,r,c.columns),iz(t,e,n,r,c.columns),u1(t,e,r,c.columns)});else for(var o=-1,a=i[0],l=function(){var c=o;if(a){t.applyStyles(t.userStyles);var u=a.columns;o>=0?dd(t,e,n,r,u,!0):u4(t,e,r,u),c=h4(t,e,o+1,r,u),u1(t,e,r,u)}var g=c-o;i.slice(1).forEach(function(y){t.applyStyles(t.userStyles),dd(t,e,n,r,y.columns,!0),h4(t,e,o+1,r,y.columns,g),u1(t,e,r,y.columns)}),o=c};o<e.body.length-1;)l()}function u4(t,e,n,r){var i=e.settings;t.applyStyles(t.userStyles),(i.showHead==="firstPage"||i.showHead==="everyPage")&&e.head.forEach(function(s){return ya(t,e,s,n,r)})}function iz(t,e,n,r,i){t.applyStyles(t.userStyles),e.body.forEach(function(s,o){var a=o===e.body.length-1;Om(t,e,s,a,n,r,i)})}function h4(t,e,n,r,i,s){t.applyStyles(t.userStyles),s=s??e.body.length;var o=Math.min(n+s,e.body.length),a=-1;return e.body.slice(n,o).forEach(function(l,c){var u=n+c===e.body.length-1,g=tT(t,e,u,r);l.canEntireRowFit(g,i)&&(ya(t,e,l,r,i),a=n+c)}),a}function u1(t,e,n,r){var i=e.settings;t.applyStyles(t.userStyles),(i.showFoot==="lastPage"||i.showFoot==="everyPage")&&e.foot.forEach(function(s){return ya(t,e,s,n,r)})}function sz(t,e,n){var r=n.getLineHeight(t.styles.fontSize),i=t.padding("vertical"),s=Math.floor((e-i)/r);return Math.max(0,s)}function oz(t,e,n,r){var i={};t.spansMultiplePages=!0,t.height=0;for(var s=0,o=0,a=n.columns;o<a.length;o++){var l=a[o],c=t.cells[l.index];if(c){Array.isArray(c.text)||(c.text=[c.text]);var u=new JE(c.raw,c.styles,c.section);u=ra(u,c),u.text=[];var g=sz(c,e,r);c.text.length>g&&(u.text=c.text.splice(g,c.text.length));var y=r.scaleFactor(),p=r.getLineHeightFactor();c.contentHeight=c.getContentHeight(y,p),c.contentHeight>=e&&(c.contentHeight=e,u.styles.minCellHeight-=e),c.contentHeight>t.height&&(t.height=c.contentHeight),u.contentHeight=u.getContentHeight(y,p),u.contentHeight>s&&(s=u.contentHeight),i[l.index]=u}}var b=new XE(t.raw,-1,t.section,i,!0);b.height=s;for(var N=0,C=n.columns;N<C.length;N++){var l=C[N],u=b.cells[l.index];u&&(u.height=b.height);var c=t.cells[l.index];c&&(c.height=t.height)}return b}function az(t,e,n,r){var i=t.pageSize().height,s=r.settings.margin,o=s.top+s.bottom,a=i-o;e.section==="body"&&(a-=r.getHeadHeight(r.columns)+r.getFootHeight(r.columns));var l=e.getMinimumRowHeight(r.columns,t),c=l<n;if(l>a)return console.error("Will not be able to print row ".concat(e.index," correctly since it's minimum height is larger than page height")),!0;if(!c)return!1;var u=e.hasRowSpan(r.columns),g=e.getMaxCellHeight(r.columns)>a;return g?(u&&console.error("The content of row ".concat(e.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(u||r.settings.rowPageBreak==="avoid")}function Om(t,e,n,r,i,s,o){var a=tT(t,e,r,s);if(n.canEntireRowFit(a,o))ya(t,e,n,s,o);else if(az(t,n,a,e)){var l=oz(n,a,e,t);ya(t,e,n,s,o),dd(t,e,i,s,o),Om(t,e,l,r,i,s,o)}else dd(t,e,i,s,o),Om(t,e,n,r,i,s,o)}function ya(t,e,n,r,i){r.x=e.settings.margin.left;for(var s=0,o=i;s<o.length;s++){var a=o[s],l=n.cells[a.index];if(!l){r.x+=a.width;continue}t.applyStyles(l.styles),l.x=r.x,l.y=r.y;var c=e.callCellHooks(t,e.hooks.willDrawCell,l,n,a,r);if(c===!1){r.x+=a.width;continue}lz(t,l,r);var u=l.getTextPos();zE(l.text,u.x,u.y,{halign:l.styles.halign,valign:l.styles.valign,maxWidth:Math.ceil(l.width-l.padding("left")-l.padding("right"))},t.getDocument()),e.callCellHooks(t,e.hooks.didDrawCell,l,n,a,r),r.x+=a.width}r.y+=n.height}function lz(t,e,n){var r=e.styles;if(t.getDocument().setFillColor(t.getDocument().getFillColor()),typeof r.lineWidth=="number"){var i=$E(r.lineWidth,r.fillColor);i&&t.rect(e.x,n.y,e.width,e.height,i)}else typeof r.lineWidth=="object"&&(r.fillColor&&t.rect(e.x,n.y,e.width,e.height,"F"),cz(t,e,n,r.lineWidth))}function cz(t,e,n,r){var i,s,o,a;r.top&&(i=n.x,s=n.y,o=n.x+e.width,a=n.y,r.right&&(o+=.5*r.right),r.left&&(i-=.5*r.left),l(r.top,i,s,o,a)),r.bottom&&(i=n.x,s=n.y+e.height,o=n.x+e.width,a=n.y+e.height,r.right&&(o+=.5*r.right),r.left&&(i-=.5*r.left),l(r.bottom,i,s,o,a)),r.left&&(i=n.x,s=n.y,o=n.x,a=n.y+e.height,r.top&&(s-=.5*r.top),r.bottom&&(a+=.5*r.bottom),l(r.left,i,s,o,a)),r.right&&(i=n.x+e.width,s=n.y,o=n.x+e.width,a=n.y+e.height,r.top&&(s-=.5*r.top),r.bottom&&(a+=.5*r.bottom),l(r.right,i,s,o,a));function l(c,u,g,y,p){t.getDocument().setLineWidth(c),t.getDocument().line(u,g,y,p,"S")}}function tT(t,e,n,r){var i=e.settings.margin.bottom,s=e.settings.showFoot;return(s==="everyPage"||s==="lastPage"&&n)&&(i+=e.getFootHeight(e.columns)),t.pageSize().height-r.y-i}function dd(t,e,n,r,i,s){i===void 0&&(i=[]),s===void 0&&(s=!1),t.applyStyles(t.userStyles),e.settings.showFoot==="everyPage"&&!s&&e.foot.forEach(function(a){return ya(t,e,a,r,i)}),e.callEndPageHooks(t,r);var o=e.settings.margin;WE(t,e,n,r),nT(t),e.pageNumber++,r.x=o.left,r.y=o.top,n.y=o.top,e.callWillDrawPageHooks(t,r),e.settings.showHead==="everyPage"&&(e.head.forEach(function(a){return ya(t,e,a,r,i)}),t.applyStyles(t.userStyles))}function nT(t){var e=t.pageNumber();t.setPage(e+1);var n=t.pageNumber();return n===e?(t.addPage(),!0):!1}function uz(t){t.API.autoTable=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=e[0],i=QE(this,r),s=ZE(this,i);return eT(this,s),this},t.API.lastAutoTable=!1,t.API.autoTableText=function(e,n,r,i){zE(e,n,r,i,this)},t.API.autoTableSetDefaults=function(e){return Pu.setDefaults(e,this),this},t.autoTableSetDefaults=function(e,n){Pu.setDefaults(e,n)},t.API.autoTableHtmlToJson=function(e,n){var r;if(n===void 0&&(n=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var i=new Pu(this),s=YE(i,e,window,n,!1),o=s.head,a=s.body,l=((r=o[0])===null||r===void 0?void 0:r.map(function(c){return c.content}))||[];return{columns:l,rows:a,data:a}}}var h1;function hz(t,e){var n=QE(t,e),r=ZE(t,n);eT(t,r)}try{if(typeof window<"u"&&window){var d4=window,f4=d4.jsPDF||((h1=d4.jspdf)===null||h1===void 0?void 0:h1.jsPDF);f4&&uz(f4)}}catch(t){console.error("Could not apply autoTable plugin",t)}const dz=()=>{const[t,e]=se.useState([]),[n,r]=se.useState(null),[i,s]=se.useState(""),[o,a]=se.useState({}),[l,c]=se.useState(new Set);se.useEffect(()=>{(async()=>{try{const X=await Bn(Pt(qe,"users")),j={};X.docs.forEach(S=>{j[S.id]=S.data()}),a(j)}catch(X){console.error("Failed to load users",X)}})()},[]),se.useEffect(()=>{(async()=>{try{const j=(await Bn(Pt(qe,"works"))).docs.map(S=>{const T=S.data();return{id:S.id,title:T.title||"Video",description:T.description||"",workDate:T.date?new Date(T.date):null,postingDate:T.postingDate?T.postingDate.toDate():null,posted:!!T.posted,assignedUserDetails:T.assignedUserDetails||[]}});e(j)}catch(X){console.error("Failed to load works",X)}})()},[]);const u=(z,X)=>{e(j=>j.map(S=>S.id===z?{...S,postingDate:X?new Date(X):null}:S))},g=async(z,X)=>{try{r(z.id);const j=Zt(qe,"works",z.id);await Xr(j,{posted:X}),e(S=>S.map(T=>T.id===z.id?{...T,posted:X}:T))}catch(j){console.error("Failed to update posted flag",j)}finally{r(null)}},y=async z=>{try{r(z.id);const X=Zt(qe,"works",z.id);await Xr(X,{postingDate:z.postingDate?br.fromDate(z.postingDate):null})}catch(X){console.error("Failed to save posting date",X)}finally{r(null)}},p=z=>{const X=z.assignedUserDetails||[];return X.length?X.map(j=>{var A;const S=((A=o[j.userId])==null?void 0:A.name)||"Unknown",T=Array.isArray(j.roles)?j.roles:[],M=T.length?T.join(" & "):"";return{name:S,rolesText:M}}):[]},b=z=>{c(X=>{const j=new Set(X);return j.has(z)?j.delete(z):j.add(z),j})},N=()=>{c(z=>{const X=new Set(t.map(S=>S.id)),j=new Set;return z.forEach(S=>{X.has(S)&&j.add(S)}),j})},_=[...t].sort((z,X)=>{const j=!!z.postingDate,S=!!X.postingDate,T=j&&!z.posted,M=S&&!X.posted;if(T&&!M)return-1;if(!T&&M)return 1;const A=!j,I=!S;return A&&!I?-1:!A&&I?1:j&&S?z.postingDate.getTime()-X.postingDate.getTime():0}).filter(z=>z.title.toLowerCase().includes(i.toLowerCase())),k=z=>{if(!z)return"Not set";const X=String(z.getDate()).padStart(2,"0"),S=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][z.getMonth()],T=z.getFullYear();return`${X} ${S} ${T}`},L=_.filter(z=>l.has(z.id)),D=()=>{const z=L.length?L:_;if(!z.length)return;const X=new wt;X.setFontSize(14),X.text("Video schedule",14,16);const j=z.map(S=>{const T=p(S).map(A=>A.rolesText?`${A.name} [${A.rolesText}]`:A.name),M=T.length?T.join(`
`):"No users found";return[S.title,S.description||"",k(S.postingDate),S.posted?"Posted":"Not posted",M]});hz(X,{startY:22,head:[["Title","Description","Posting Date","Status","Member(s)"]],body:j,styles:{fontSize:8},headStyles:{fillColor:[33,150,243],halign:"center",valign:"middle"},columnStyles:{0:{cellWidth:50},1:{cellWidth:40},2:{cellWidth:23,halign:"center"},3:{cellWidth:20,halign:"center"},4:{cellWidth:"auto"}}}),X.save("video-schedule.pdf")};return se.useEffect(()=>{N()},[t]),d.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50",children:[d.jsx(In,{userType:"admin"}),d.jsxs("main",{className:"container mx-auto px-4 py-8 max-w-5xl",children:[d.jsxs("div",{className:"mb-6 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[d.jsxs("div",{children:[d.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-800",children:"Video schedule"}),d.jsx("p",{className:"text-sm text-gray-600",children:"Manage posting dates for videos / tasks."})]}),d.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:items-center",children:[d.jsx("input",{type:"text",value:i,onChange:z=>s(z.target.value),placeholder:"Search video",className:"w-full sm:w-64 px-3 py-2 rounded-lg border border-gray-300 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"}),d.jsx("button",{onClick:D,disabled:_.length===0,className:"px-4 py-2 text-sm font-semibold rounded-lg bg-purple-600 text-white hover:bg-purple-700 disabled:opacity-60 disabled:cursor-not-allowed",children:L.length?"Download selected as PDF":"Download all as PDF"})]})]}),_.length===0?d.jsx("p",{className:"text-gray-500 text-sm",children:"No works found."}):d.jsx("div",{className:"space-y-4",children:_.map(z=>d.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-4 flex flex-col gap-3",children:[d.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:[d.jsxs("div",{className:"max-w-xl",children:[d.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[d.jsx("input",{type:"checkbox",checked:l.has(z.id),onChange:()=>b(z.id),className:"h-4 w-4"}),d.jsx("h2",{className:"text-sm sm:text-base font-semibold text-gray-800",children:z.title})]}),d.jsxs("p",{className:"text-xs text-gray-600",children:["Work date: ",k(z.workDate)]}),z.description&&d.jsxs("div",{className:"mt-1 bg-gray-50 rounded-md px-3 py-2",children:[d.jsx("p",{className:"text-xs font-semibold text-gray-600 mb-0.5",children:"Description"}),d.jsx("p",{className:"text-xs text-gray-700 leading-relaxed line-clamp-3",children:z.description})]}),d.jsxs("div",{className:"mt-1",children:[d.jsx("p",{className:"text-xs font-semibold text-gray-600",children:"Users"}),p(z).length===0?d.jsx("p",{className:"text-xs text-gray-500",children:"No users found"}):d.jsx("ul",{className:"mt-0.5 space-y-0.5",children:p(z).map((X,j)=>d.jsx("li",{className:"text-xs text-gray-700",children:X.rolesText?`${X.name} [${X.rolesText}]`:X.name},j))})]})]}),d.jsx("div",{className:"text-xs font-semibold",children:z.postingDate?z.posted?d.jsxs("span",{className:"px-3 py-1 rounded-full bg-green-100 text-green-800",children:["Posted (",k(z.postingDate),")"]}):d.jsxs("span",{className:"px-3 py-1 rounded-full bg-yellow-100 text-yellow-800",children:["Scheduled (",k(z.postingDate),")"]}):d.jsx("span",{className:"px-3 py-1 rounded-full bg-gray-100 text-gray-600",children:"No posting date"})})]}),d.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2",children:[d.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[d.jsx("label",{className:"text-xs text-gray-600",children:"Posting date:"}),d.jsx("input",{type:"date",value:z.postingDate?z.postingDate.toISOString().slice(0,10):"",onChange:X=>u(z.id,X.target.value),className:"px-3 py-2 rounded-lg border border-gray-300 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"}),d.jsx("button",{onClick:()=>y(z),disabled:n===z.id,className:`px-3 py-2 text-xs font-semibold rounded-lg text-white ${n===z.id?"bg-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700"}`,children:n===z.id?"Saving":"Save date"})]}),d.jsx("div",{className:"flex items-center gap-2",children:d.jsx("button",{onClick:()=>g(z,!z.posted),disabled:!z.postingDate||n===z.id,className:`px-4 py-2 text-xs font-semibold rounded-lg ${z.posted?"bg-red-100 text-red-700 hover:bg-red-200":"bg-green-600 text-white hover:bg-green-700"} ${!z.postingDate||n===z.id?"opacity-60 cursor-not-allowed":""}`,children:z.posted?"Unmark posted":"Mark posted"})})]})]},z.id))})]})]})},fz=()=>{const[t,e]=se.useState([]),[n,r]=se.useState(!0),[i,s]=se.useState("all"),[o,a]=se.useState([]),[l,c]=se.useState(""),[u,g]=se.useState(""),[y,p]=se.useState(!1),[b,N]=se.useState(""),[C,_]=se.useState("");se.useEffect(()=>{(async()=>{try{const X=(await Bn(Pt(qe,"users"))).docs.map(j=>({id:j.id,...j.data()}));e(X)}catch(z){console.error(z),_("Failed to load users.")}finally{r(!1)}})()},[]);const k=D=>{a(z=>z.includes(D)?z.filter(X=>X!==D):[...z,D])},L=async D=>{if(D.preventDefault(),_(""),N(""),!l.trim()||!u.trim()){_("Title and message are required.");return}if(i==="selected"&&o.length===0){_("Select at least one user.");return}p(!0);try{if(i==="all")await fi(Pt(qe,"notifications"),{title:l.trim(),body:u.trim(),target:"all",createdAt:xo()});else{const z=nA(qe);o.forEach(X=>{const j=Zt(Pt(qe,"users",X,"notifications"));z.set(j,{title:l.trim(),body:u.trim(),target:"user",userId:X,createdAt:xo()})}),await z.commit()}N("Notification(s) sent successfully."),c(""),g(""),a([]),s("all")}catch(z){console.error(z),_("Failed to send notification.")}finally{p(!1)}};return d.jsxs("div",{className:"min-h-screen bg-gray-100",children:[d.jsx(In,{userType:"admin"}),d.jsxs("main",{className:"container mx-auto px-4 py-6 sm:py-8 max-w-3xl",children:[d.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-800 mb-4",children:"Send notifications"}),d.jsxs("form",{onSubmit:L,className:"bg-white rounded-lg shadow-md p-4 sm:p-6 space-y-4",children:[C&&d.jsx("div",{className:"p-2 rounded bg-red-100 text-red-700 text-sm",children:C}),b&&d.jsx("div",{className:"p-2 rounded bg-green-100 text-green-700 text-sm",children:b}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Title"}),d.jsx("input",{type:"text",value:l,onChange:D=>c(D.target.value),className:"w-full px-3 py-2 border rounded text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Notification title"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Message"}),d.jsx("textarea",{value:u,onChange:D=>g(D.target.value),rows:4,className:"w-full px-3 py-2 border rounded text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Notification message"})]}),d.jsxs("div",{children:[d.jsx("p",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Send to"}),d.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[d.jsxs("label",{className:"inline-flex items-center gap-2 text-sm",children:[d.jsx("input",{type:"radio",name:"sendMode",value:"all",checked:i==="all",onChange:()=>s("all")}),d.jsx("span",{children:"All users"})]}),d.jsxs("label",{className:"inline-flex items-center gap-2 text-sm",children:[d.jsx("input",{type:"radio",name:"sendMode",value:"selected",checked:i==="selected",onChange:()=>s("selected")}),d.jsx("span",{children:"Selected users"})]})]})]}),i==="selected"&&d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Select users"}),n?d.jsxs("div",{className:"flex items-center gap-2 text-gray-600 text-sm",children:[d.jsx(Ms,{className:"animate-spin"}),d.jsx("span",{children:"Loading users..."})]}):d.jsxs("div",{className:"max-h-60 overflow-y-auto border rounded p-2 space-y-1 bg-gray-50",children:[t.length===0&&d.jsx("p",{className:"text-xs text-gray-600",children:"No users found."}),t.map(D=>d.jsxs("label",{className:"flex items-center gap-2 text-xs sm:text-sm cursor-pointer",children:[d.jsx("input",{type:"checkbox",checked:o.includes(D.id),onChange:()=>k(D.id)}),d.jsxs("span",{children:[D.name||"Unnamed"," (",D.email||"no email",")"]})]},D.id))]})]}),d.jsx("button",{type:"submit",disabled:y,className:"w-full sm:w-auto bg-blue-600 text-white px-4 py-2 rounded text-sm font-semibold hover:bg-blue-700 disabled:opacity-50",children:y?"Sending...":"Send notification"})]})]})]})},pz=()=>{const[t,e]=se.useState(null),[n,r]=se.useState([]),[i,s]=se.useState(!0),o=ji();se.useEffect(()=>{const l=Rc(Ii,c=>{e(c||null)});return()=>l()},[]),se.useEffect(()=>{if(!t)return;const l=vc(Pt(qe,"users",t.uid,"notifications"),qv("createdAt","desc")),c=Tm(l,u=>{const g=u.docs.map(y=>({id:y.id,...y.data()}));r(g),s(!1)});return()=>c()},[t]);const a=async l=>{if(t){try{await Xr(Zt(qe,"users",t.uid,"notifications",l.id),{read:!0})}catch(c){console.error("Failed to mark notif read",c)}o(`/notifications/${l.id}`)}};return d.jsxs("div",{className:"min-h-screen bg-gray-50",children:[d.jsx(In,{userType:"user"}),d.jsxs("main",{className:"container mx-auto px-4 py-6 sm:py-8 max-w-2xl",children:[d.jsxs("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-800 mb-4 flex items-center gap-2",children:[d.jsx(s5,{className:"text-yellow-500"}),"Notifications"]}),i?d.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[d.jsx(Ms,{className:"animate-spin"}),d.jsx("span",{children:"Loading notifications..."})]}):n.length===0?d.jsx("p",{className:"text-gray-600 text-sm sm:text-base",children:"No notifications yet."}):d.jsx("div",{className:"bg-white rounded-lg shadow-md divide-y",children:n.map(l=>{var g;const c=(g=l.createdAt)!=null&&g.toDate?l.createdAt.toDate().toLocaleString():"",u=l.read===!1;return d.jsxs("button",{onClick:()=>a(l),className:`w-full text-left px-4 py-3 flex flex-col sm:flex-row sm:items-center sm:justify-between hover:bg-gray-50 ${u?"bg-yellow-50":""}`,children:[d.jsxs("div",{children:[d.jsx("p",{className:"font-semibold text-gray-800 text-sm sm:text-base",children:l.title||"Notification"}),l.message&&d.jsx("p",{className:"text-xs sm:text-sm text-gray-600",children:l.message}),c&&d.jsx("p",{className:"text-xs text-gray-400 mt-1",children:c})]}),u&&d.jsx("span",{className:"mt-2 sm:mt-0 inline-flex items-center text-xs font-semibold text-yellow-800 bg-yellow-100 px-2 py-0.5 rounded-full",children:"New"})]},l.id)})})]})]})},mz=()=>{var a;const{notifId:t}=tg(),[e,n]=se.useState(null),[r,i]=se.useState(null),[s,o]=se.useState(!0);return se.useEffect(()=>{const l=Rc(Ii,c=>{n(c||null)});return()=>l()},[]),se.useEffect(()=>{if(!e||!t)return;(async()=>{try{const c=Zt(qe,"users",e.uid,"notifications",t),u=await Xs(c);if(u.exists()){const g=u.data();i({id:u.id,...g}),g.read===!1&&await Xr(c,{read:!0})}}catch(c){console.error("Failed to load notification",c)}finally{o(!1)}})()},[e,t]),d.jsxs("div",{className:"min-h-screen bg-gray-50",children:[d.jsx(In,{userType:"user"}),d.jsx("main",{className:"container mx-auto px-4 py-6 sm:py-8 max-w-xl",children:s?d.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[d.jsx(Ms,{className:"animate-spin"}),d.jsx("span",{children:"Loading notification..."})]}):r?d.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 sm:p-6",children:[d.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-800 mb-2",children:r.title||"Notification"}),((a=r.createdAt)==null?void 0:a.toDate)&&d.jsx("p",{className:"text-xs text-gray-500 mb-4",children:r.createdAt.toDate().toLocaleString()}),r.message&&d.jsx("p",{className:"text-sm sm:text-base text-gray-700 mb-4",children:r.message}),r.type&&d.jsxs("p",{className:"text-xs text-gray-500",children:["Type: ",d.jsx("span",{className:"font-mono",children:r.type})]})]}):d.jsx("p",{className:"text-gray-600 text-sm sm:text-base",children:"Notification not found."})})]})},gz=()=>{const{notifId:t}=tg(),e=ji(),[n,r]=se.useState(null),[i,s]=se.useState(null),[o,a]=se.useState(null),[l,c]=se.useState(!0),[u,g]=se.useState("");if(se.useEffect(()=>{t&&(async()=>{c(!0),g("");try{const b=Zt(qe,"notifications",t),N=await Xs(b);if(!N.exists()){g("Notification not found."),c(!1);return}const C={id:N.id,...N.data()};if(r(C),C.workId){const _=await Xs(Zt(qe,"works",C.workId));_.exists()&&s({id:_.id,..._.data()})}if(C.userId){const _=await Xs(Zt(qe,"users",C.userId));_.exists()&&a({id:_.id,..._.data()})}}catch(b){console.error("NotificationDetails load error",b),g("Failed to load notification details.")}finally{c(!1)}})()},[t]),l)return d.jsxs("div",{className:"min-h-screen bg-gray-100",children:[d.jsx(In,{userType:"admin"}),d.jsx("main",{className:"container mx-auto px-4 py-6 max-w-3xl",children:d.jsx("p",{children:"Loading notification..."})})]});if(u)return d.jsxs("div",{className:"min-h-screen bg-gray-100",children:[d.jsx(In,{userType:"admin"}),d.jsxs("main",{className:"container mx-auto px-4 py-6 max-w-3xl",children:[d.jsx("p",{className:"text-red-600 mb-4",children:u}),d.jsx("button",{onClick:()=>e(-1),className:"px-3 py-1 rounded bg-blue-600 text-white text-sm hover:bg-blue-700",children:"Back"})]})]});if(!n)return d.jsxs("div",{className:"min-h-screen bg-gray-100",children:[d.jsx(In,{userType:"admin"}),d.jsx("main",{className:"container mx-auto px-4 py-6 max-w-3xl",children:d.jsx("p",{children:"No data."})})]});const y=(()=>{switch(n.type){case"accept":return"Work accepted";case"reject":return"Work rejected";case"done":return"Work marked done";case"undo-done":return"Work status changed";default:return"Notification"}})();return d.jsxs("div",{className:"min-h-screen bg-gray-100",children:[d.jsx(In,{userType:"admin"}),d.jsxs("main",{className:"container mx-auto px-4 py-6 max-w-3xl",children:[d.jsxs("div",{className:"flex items-center justify-between mb-4",children:[d.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-800",children:"Notification details"}),d.jsx("button",{onClick:()=>e(-1),className:"px-3 py-1 rounded bg-gray-200 text-gray-800 text-sm hover:bg-gray-300",children:"Back"})]}),d.jsxs("section",{className:"mb-4 bg-white rounded-lg shadow p-4",children:[d.jsx("p",{className:"text-sm font-semibold text-gray-800 mb-1",children:y}),d.jsxs("p",{className:"text-xs text-gray-600 mb-1",children:["ID: ",n.id]}),n.createdAt&&d.jsxs("p",{className:"text-xs text-gray-600 flex items-center gap-1",children:[d.jsx(fr,{className:"text-gray-500"}),n.createdAt.toDate?n.createdAt.toDate().toLocaleString():""]})]}),d.jsxs("section",{className:"mb-4 bg-white rounded-lg shadow p-4",children:[d.jsx("h2",{className:"text-sm font-semibold text-gray-800 mb-2",children:"User"}),o?d.jsxs(d.Fragment,{children:[d.jsx("p",{className:"text-sm text-gray-800",children:o.name||"No name"}),o.email&&d.jsx("p",{className:"text-xs text-gray-600",children:o.email}),o.cardNumber&&d.jsxs("p",{className:"text-xs text-gray-600",children:["Card: ",o.cardNumber]})]}):d.jsx("p",{className:"text-xs text-gray-500",children:n.userName||"Unknown user"})]}),d.jsxs("section",{className:"mb-4 bg-white rounded-lg shadow p-4",children:[d.jsx("h2",{className:"text-sm font-semibold text-gray-800 mb-2",children:"Work"}),i?d.jsxs(d.Fragment,{children:[d.jsx("p",{className:"text-sm font-semibold text-gray-800",children:i.title||"No title"}),i.date&&d.jsxs("p",{className:"text-xs text-gray-600 flex items-center gap-1 mt-1",children:[d.jsx(fr,{className:"text-gray-500"}),new Date(i.date).toLocaleDateString()]}),i.description&&d.jsx("p",{className:"text-xs text-gray-600 mt-1",children:i.description})]}):d.jsxs("p",{className:"text-xs text-gray-500",children:["Work not found (id: ",n.workId||"",")."]})]}),n.message&&d.jsxs("section",{className:"mb-4 bg-white rounded-lg shadow p-4",children:[d.jsx("h2",{className:"text-sm font-semibold text-gray-800 mb-2",children:"Message"}),d.jsx("p",{className:"text-sm text-gray-700",children:n.message})]})]})]})},yz=()=>(KM(),d.jsxs(cC,{children:[d.jsx(Gn,{path:"/",element:d.jsx(YM,{})}),d.jsx(Gn,{path:"/login",element:d.jsx(wF,{})}),d.jsx(Gn,{path:"/signup",element:d.jsx(bF,{})}),d.jsx(Gn,{path:"/home",element:d.jsx(gF,{})}),d.jsx(Gn,{path:"/admin-home",element:d.jsx(ss,{children:d.jsx(mF,{})})}),d.jsx(Gn,{path:"/create-user",element:d.jsx(ss,{children:d.jsx(NF,{})})}),d.jsx(Gn,{path:"/assign-work",element:d.jsx(ss,{children:d.jsx(AF,{})})}),d.jsx(Gn,{path:"/work-list",element:d.jsx(ss,{children:d.jsx(EF,{})})}),d.jsx(Gn,{path:"/profile",element:d.jsx(IF,{})}),d.jsx(Gn,{path:"/manage-users",element:d.jsx(ss,{children:d.jsx(kF,{})})}),d.jsx(Gn,{path:"/users/:userId",element:d.jsx(ss,{children:d.jsx(CF,{})})}),d.jsx(Gn,{path:"/tasks/:taskId",element:d.jsx(ss,{children:d.jsx(LF,{})})}),d.jsx(Gn,{path:"/task-history",element:d.jsx(PF,{})}),d.jsx(Gn,{path:"/inventory",element:d.jsx(ss,{children:d.jsx(jF,{})})}),d.jsx(Gn,{path:"/admin-reject-details",element:d.jsx(ss,{children:d.jsx(DF,{})})}),d.jsx(Gn,{path:"/user-reject-details",element:d.jsx(OF,{})}),d.jsx(Gn,{path:"/posting-dates",element:d.jsx(ss,{children:d.jsx(dz,{})})}),d.jsx(Gn,{path:"/notifications",element:d.jsx(ss,{children:d.jsx(MF,{})})}),d.jsx(Gn,{path:"/admin/notifications",element:d.jsx(ss,{children:d.jsx(fz,{})})}),d.jsx(Gn,{path:"/admin/notifications/:notifId",element:d.jsx(ss,{children:d.jsx(gz,{})})}),d.jsx(Gn,{path:"/user/notifications",element:d.jsx(pz,{})}),d.jsx(Gn,{path:"/user/notifications/:notifId",element:d.jsx(mz,{})})]}));function vz(){return d.jsx(gC,{children:d.jsx(yz,{})})}const wz="BCDW2bDpR51kOUCYdebGFw4pHEU_h2159MHvkSEslEdrV0yI0AVUiQikAbClmXfS9EGHHQblUlKTC_To4SaQ7Hg";function xz(){return se.useEffect(()=>{(async()=>{if(!("serviceWorker"in navigator)||!("Notification"in window))return;const e=await navigator.serviceWorker.register("/firebase-messaging-sw.js");if(await Notification.requestPermission()!=="granted")return;const r=await WA(j2,{vapidKey:wz,serviceWorkerRegistration:e}),i=Ii.currentUser;i&&r&&await Xr(Zt(qe,"users",i.uid),{fcmToken:r})})().catch(console.error)},[]),d.jsx(vz,{})}E6(document.getElementById("root")).render(d.jsx(se.StrictMode,{children:d.jsx(xz,{})}));export{yn as _,bz as c,qT as g};
